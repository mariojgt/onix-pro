import{a as Hu,S as Ma,g as Nh}from"./sweetalert2-7c60aed3.js";var h_={410:(w,Y,st)=>{var rt,lt,F;/*!
* Backbone.Undo.js v0.2
* 
* Copyright (c)2013 Oliver Sartun
* Released under the MIT License
*
* Documentation and full license available at
* https://github.com/osartun/Backbone.Undo.js
*/(function(R){lt=[st(50),st(316)],rt=R,F=typeof rt=="function"?rt.apply(Y,lt):rt,F!==void 0&&(w.exports=F)})(function(R,M){var N=Array.prototype.slice;function x(dt,ot,X){return X.length<=4?dt.call(ot,X[0],X[1],X[2],X[3]):dt.apply(ot,X)}function j(dt,ot){return N.call(dt,ot)}function L(dt,ot){return dt==null?!1:(R.isArray(ot)||(ot=j(arguments,1)),R.all(ot,function(X){return X in dt}))}var D=function(){var dt=!1,ot=-1;function X(){ot++,dt=!0,R.defer(function(){dt=!1})}return function(){return dt||X(),ot}}();function H(){this.registeredObjects=[],this.cidIndexes=[]}H.prototype={isRegistered:function(dt){return dt&&dt.cid?this.registeredObjects[dt.cid]:R.contains(this.registeredObjects,dt)},register:function(dt){return this.isRegistered(dt)?!1:(dt&&dt.cid?(this.registeredObjects[dt.cid]=dt,this.cidIndexes.push(dt.cid)):this.registeredObjects.push(dt),!0)},unregister:function(dt){if(this.isRegistered(dt)){if(dt&&dt.cid)delete this.registeredObjects[dt.cid],this.cidIndexes.splice(R.indexOf(this.cidIndexes,dt.cid),1);else{var ot=R.indexOf(this.registeredObjects,dt);this.registeredObjects.splice(ot,1)}return!0}return!1},get:function(){return R.map(this.cidIndexes,function(dt){return this.registeredObjects[dt]},this).concat(this.registeredObjects)}};function G(dt,ot,X,z){for(var et=0,A=ot.length,tt;et<A;et++)if(tt=ot[et],!!tt){if(dt==="on"){if(!z.objectRegistry.register(tt))continue}else if(!z.objectRegistry.unregister(tt))continue;R.isFunction(tt[dt])&&tt[dt]("all",X,z)}}function pt(dt,ot){var X=ot.type,z=ot.undoTypes,et=!z[X]||z[X][dt];R.isFunction(et)&&et(ot.object,ot.before,ot.after,ot.options)}function xt(dt,ot,X,z,et){if(!(X.isCurrentlyUndoRedoing||dt==="undo"&&X.pointer===-1||dt==="redo"&&X.pointer===X.length-1)){X.isCurrentlyUndoRedoing=!0;var A,tt,E=dt==="undo";for(et?tt=E&&X.pointer===X.length-1||!E&&X.pointer===-1?R.clone(X.models):N.apply(X.models,E?[0,X.pointer]:[X.pointer,X.length-1]):(A=X.at(E?X.pointer:X.pointer+1),tt=z?X.where({magicFusionIndex:A.get("magicFusionIndex")}):[A]),X.pointer+=(E?-1:1)*tt.length;A=E?tt.pop():tt.shift();)A[dt]();X.isCurrentlyUndoRedoing=!1,ot.trigger(dt,ot)}}function Nt(dt,ot){var X=dt.condition,z=typeof X;return z==="function"?!!x(X,dt,ot):z==="boolean"?X:!0}function jt(dt,ot,X,z){if(dt.track&&!dt.isCurrentlyUndoRedoing&&ot in z&&Nt(z[ot],X)){var et=x(z[ot].on,z[ot],X),A;if(L(et,"object","before","after")){if(et.type=ot,et.magicFusionIndex=D(),et.undoTypes=z,dt.pointer<dt.length-1)for(var A=dt.length-dt.pointer-1;A--;)dt.pop();dt.pointer=dt.length,dt.add(et),dt.length>dt.maximumStackLength&&(dt.shift(),dt.pointer--)}}}var Tt={add:{undo:function(dt,ot,X,z){dt.remove(X,z)},redo:function(dt,ot,X,z){z.index&&(z.at=z.index),dt.add(X,z)},on:function(dt,ot,X){return{object:ot,before:void 0,after:dt,options:R.clone(X)}}},remove:{undo:function(dt,ot,X,z){"index"in z&&(z.at=z.index),dt.add(ot,z)},redo:function(dt,ot,X,z){dt.remove(ot,z)},on:function(dt,ot,X){return{object:ot,before:dt,after:void 0,options:R.clone(X)}}},change:{undo:function(dt,ot,X,z){R.isEmpty(ot)?R.each(R.keys(X),dt.unset,dt):(dt.set(ot),z&&z.unsetData&&z.unsetData.before&&z.unsetData.before.length&&R.each(z.unsetData.before,dt.unset,dt))},redo:function(dt,ot,X,z){R.isEmpty(X)?R.each(R.keys(ot),dt.unset,dt):(dt.set(X),z&&z.unsetData&&z.unsetData.after&&z.unsetData.after.length&&R.each(z.unsetData.after,dt.unset,dt))},on:function(dt,ot){var X=dt.changedAttributes(),z=R.keys(X),et=R.pick(dt.previousAttributes(),z),A=R.keys(et),tt=(ot||(ot={})).unsetData={after:[],before:[]};return z.length!=A.length&&(z.length>A.length?R.each(z,function(E){E in et||tt.before.push(E)},this):R.each(A,function(E){E in X||tt.after.push(E)})),{object:dt,before:et,after:X,options:R.clone(ot)}}},reset:{undo:function(dt,ot,X){dt.reset(ot)},redo:function(dt,ot,X){dt.reset(X)},on:function(dt,ot){return{object:dt,before:ot.previousModels,after:R.clone(dt.models)}}}};function yt(){}yt.prototype=Tt;function Kt(dt,ot,X,z){if(typeof ot=="object")return R.each(ot,function(et,A){dt===2?Kt(dt,et,X,z):Kt(dt,A,et,X)});switch(dt){case 0:L(X,"undo","redo","on")&&R.all(R.pick(X,"undo","redo","on"),R.isFunction)&&(z[ot]=X);break;case 1:z[ot]&&R.isObject(X)&&(z[ot]=R.extend({},z[ot],X));break;case 2:delete z[ot];break}return this}var te=M.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(dt){pt("undo",this.attributes)},redo:function(dt){pt("redo",this.attributes)}}),ue=M.Collection.extend({model:te,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(dt){this.maximumStackLength=dt}}),Zt=M.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(dt){this.stack=new ue,this.objectRegistry=new H,this.undoTypes=new yt,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(ot,X){this.stack.setMaxLength(X)},this),dt&&dt.track&&this.startTracking(),dt&&dt.register&&(R.isArray(dt.register)||R.isArguments(dt.register)?x(this.register,this,dt.register):this.register(dt.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(dt){jt(this.stack,dt,j(arguments,1),this.undoTypes)},register:function(){G("on",arguments,this._addToStack,this)},unregister:function(){G("off",arguments,this._addToStack,this)},unregisterAll:function(){x(this.unregister,this,this.objectRegistry.get())},undo:function(dt){xt("undo",this,this.stack,dt)},undoAll:function(){xt("undo",this,this.stack,!1,!0)},redo:function(dt){xt("redo",this,this.stack,dt)},redoAll:function(){xt("redo",this,this.stack,!1,!0)},isAvailable:function(dt){var ot=this.stack,X=ot.length;switch(dt){case"undo":return X>0&&ot.pointer>-1;case"redo":return X>0&&ot.pointer<X-1;default:return!1}},merge:function(dt){for(var ot=R.isArray(dt)?dt:j(arguments),X;X=ot.pop();)X instanceof Zt&&X.stack instanceof ue&&(X.stack=this.stack)},addUndoType:function(dt,ot){Kt(0,dt,ot,this.undoTypes)},changeUndoType:function(dt,ot){Kt(1,dt,ot,this.undoTypes)},removeUndoType:function(dt){Kt(2,dt,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return R.extend(Zt,{defaults:function(dt){R.extend(Zt.prototype.defaults,dt)},addUndoType:function(dt,ot){Kt(0,dt,ot,Tt)},changeUndoType:function(dt,ot){Kt(1,dt,ot,Tt)},removeUndoType:function(dt){Kt(2,dt,void 0,Tt)}}),M.UndoManager=Zt})},316:(w,Y,st)=>{var rt,lt;(function(F){var R=typeof self=="object"&&self.self===self&&self||typeof st.g=="object"&&st.g.global===st.g&&st.g;rt=[st(50),st(895),Y],lt=(function(M,N,x){R.Backbone=F(R,x,M,N)}).apply(Y,rt),lt!==void 0&&(w.exports=lt)})(function(F,R,M,N){var x=F.Backbone,j=Array.prototype.slice;R.VERSION="1.4.1",R.$=N,R.noConflict=function(){return F.Backbone=x,this},R.emulateHTTP=!1,R.emulateJSON=!1;var L=R.Events={},D=/\s+/,H,G=function(T,B,nt,ht,Lt){var Z=0,Et;if(nt&&typeof nt=="object")for(ht!==void 0&&("context"in Lt)&&Lt.context===void 0&&(Lt.context=ht),Et=M.keys(nt);Z<Et.length;Z++)B=G(T,B,Et[Z],nt[Et[Z]],Lt);else if(nt&&D.test(nt))for(Et=nt.split(D);Z<Et.length;Z++)B=T(B,Et[Z],ht,Lt);else B=T(B,nt,ht,Lt);return B};L.on=function(T,B,nt){if(this._events=G(pt,this._events||{},T,B,{context:nt,ctx:this,listening:H}),H){var ht=this._listeners||(this._listeners={});ht[H.id]=H,H.interop=!1}return this},L.listenTo=function(T,B,nt){if(!T)return this;var ht=T._listenId||(T._listenId=M.uniqueId("l")),Lt=this._listeningTo||(this._listeningTo={}),Z=H=Lt[ht];Z||(this._listenId||(this._listenId=M.uniqueId("l")),Z=H=Lt[ht]=new Kt(this,T));var Et=xt(T,B,nt,this);if(H=void 0,Et)throw Et;return Z.interop&&Z.on(B,nt),this};var pt=function(T,B,nt,ht){if(nt){var Lt=T[B]||(T[B]=[]),Z=ht.context,Et=ht.ctx,mt=ht.listening;mt&&mt.count++,Lt.push({callback:nt,context:Z,ctx:Z||Et,listening:mt})}return T},xt=function(T,B,nt,ht){try{T.on(B,nt,ht)}catch(Lt){return Lt}};L.off=function(T,B,nt){return this._events?(this._events=G(Nt,this._events,T,B,{context:nt,listeners:this._listeners}),this):this},L.stopListening=function(T,B,nt){var ht=this._listeningTo;if(!ht)return this;for(var Lt=T?[T._listenId]:M.keys(ht),Z=0;Z<Lt.length;Z++){var Et=ht[Lt[Z]];if(!Et)break;Et.obj.off(B,nt,this),Et.interop&&Et.off(B,nt)}return M.isEmpty(ht)&&(this._listeningTo=void 0),this};var Nt=function(T,B,nt,ht){if(T){var Lt=ht.context,Z=ht.listeners,Et=0,mt;if(!B&&!Lt&&!nt){for(mt=M.keys(Z);Et<mt.length;Et++)Z[mt[Et]].cleanup();return}for(mt=B?[B]:M.keys(T);Et<mt.length;Et++){B=mt[Et];var xe=T[B];if(!xe)break;for(var He=[],De=0;De<xe.length;De++){var ee=xe[De];if(nt&&nt!==ee.callback&&nt!==ee.callback._callback||Lt&&Lt!==ee.context)He.push(ee);else{var Jt=ee.listening;Jt&&Jt.off(B,nt)}}He.length?T[B]=He:delete T[B]}return T}};L.once=function(T,B,nt){var ht=G(jt,{},T,B,this.off.bind(this));return typeof T=="string"&&nt==null&&(B=void 0),this.on(ht,B,nt)},L.listenToOnce=function(T,B,nt){var ht=G(jt,{},B,nt,this.stopListening.bind(this,T));return this.listenTo(T,ht)};var jt=function(T,B,nt,ht){if(nt){var Lt=T[B]=M.once(function(){ht(B,Lt),nt.apply(this,arguments)});Lt._callback=nt}return T};L.trigger=function(T){if(!this._events)return this;for(var B=Math.max(0,arguments.length-1),nt=Array(B),ht=0;ht<B;ht++)nt[ht]=arguments[ht+1];return G(Tt,this._events,T,void 0,nt),this};var Tt=function(T,B,nt,ht){if(T){var Lt=T[B],Z=T.all;Lt&&Z&&(Z=Z.slice()),Lt&&yt(Lt,ht),Z&&yt(Z,[B].concat(ht))}return T},yt=function(T,B){var nt,ht=-1,Lt=T.length,Z=B[0],Et=B[1],mt=B[2];switch(B.length){case 0:for(;++ht<Lt;)(nt=T[ht]).callback.call(nt.ctx);return;case 1:for(;++ht<Lt;)(nt=T[ht]).callback.call(nt.ctx,Z);return;case 2:for(;++ht<Lt;)(nt=T[ht]).callback.call(nt.ctx,Z,Et);return;case 3:for(;++ht<Lt;)(nt=T[ht]).callback.call(nt.ctx,Z,Et,mt);return;default:for(;++ht<Lt;)(nt=T[ht]).callback.apply(nt.ctx,B);return}},Kt=function(T,B){this.id=T._listenId,this.listener=T,this.obj=B,this.interop=!0,this.count=0,this._events=void 0};Kt.prototype.on=L.on,Kt.prototype.off=function(T,B){var nt;this.interop?(this._events=G(Nt,this._events,T,B,{context:void 0,listeners:void 0}),nt=!this._events):(this.count--,nt=this.count===0),nt&&this.cleanup()},Kt.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},L.bind=L.on,L.unbind=L.off,M.extend(R,L);var te=R.Model=function(T,B){var nt=T||{};B||(B={}),this.preinitialize.apply(this,arguments),this.cid=M.uniqueId(this.cidPrefix),this.attributes={},B.collection&&(this.collection=B.collection),B.parse&&(nt=this.parse(nt,B)||{});var ht=M.result(this,"defaults");nt=M.defaults(M.extend({},ht,nt),ht),this.set(nt,B),this.changed={},this.initialize.apply(this,arguments)};M.extend(te.prototype,L,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(T){return M.clone(this.attributes)},sync:function(){return R.sync.apply(this,arguments)},get:function(T){return this.attributes[T]},escape:function(T){return M.escape(this.get(T))},has:function(T){return this.get(T)!=null},matches:function(T){return!!M.iteratee(T,this)(this.attributes)},set:function(T,B,nt){if(T==null)return this;var ht;if(typeof T=="object"?(ht=T,nt=B):(ht={})[T]=B,nt||(nt={}),!this._validate(ht,nt))return!1;var Lt=nt.unset,Z=nt.silent,Et=[],mt=this._changing;this._changing=!0,mt||(this._previousAttributes=M.clone(this.attributes),this.changed={});var xe=this.attributes,He=this.changed,De=this._previousAttributes;for(var ee in ht)B=ht[ee],M.isEqual(xe[ee],B)||Et.push(ee),M.isEqual(De[ee],B)?delete He[ee]:He[ee]=B,Lt?delete xe[ee]:xe[ee]=B;if(this.idAttribute in ht){var Jt=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,Jt,nt)}if(!Z){Et.length&&(this._pending=nt);for(var Vt=0;Vt<Et.length;Vt++)this.trigger("change:"+Et[Vt],this,xe[Et[Vt]],nt)}if(mt)return this;if(!Z)for(;this._pending;)nt=this._pending,this._pending=!1,this.trigger("change",this,nt);return this._pending=!1,this._changing=!1,this},unset:function(T,B){return this.set(T,void 0,M.extend({},B,{unset:!0}))},clear:function(T){var B={};for(var nt in this.attributes)B[nt]=void 0;return this.set(B,M.extend({},T,{unset:!0}))},hasChanged:function(T){return T==null?!M.isEmpty(this.changed):M.has(this.changed,T)},changedAttributes:function(T){if(!T)return this.hasChanged()?M.clone(this.changed):!1;var B=this._changing?this._previousAttributes:this.attributes,nt={},ht;for(var Lt in T){var Z=T[Lt];M.isEqual(B[Lt],Z)||(nt[Lt]=Z,ht=!0)}return ht?nt:!1},previous:function(T){return T==null||!this._previousAttributes?null:this._previousAttributes[T]},previousAttributes:function(){return M.clone(this._previousAttributes)},fetch:function(T){T=M.extend({parse:!0},T);var B=this,nt=T.success;return T.success=function(ht){var Lt=T.parse?B.parse(ht,T):ht;if(!B.set(Lt,T))return!1;nt&&nt.call(T.context,B,ht,T),B.trigger("sync",B,ht,T)},he(this,T),this.sync("read",this,T)},save:function(T,B,nt){var ht;T==null||typeof T=="object"?(ht=T,nt=B):(ht={})[T]=B,nt=M.extend({validate:!0,parse:!0},nt);var Lt=nt.wait;if(ht&&!Lt){if(!this.set(ht,nt))return!1}else if(!this._validate(ht,nt))return!1;var Z=this,Et=nt.success,mt=this.attributes;nt.success=function(De){Z.attributes=mt;var ee=nt.parse?Z.parse(De,nt):De;if(Lt&&(ee=M.extend({},ht,ee)),ee&&!Z.set(ee,nt))return!1;Et&&Et.call(nt.context,Z,De,nt),Z.trigger("sync",Z,De,nt)},he(this,nt),ht&&Lt&&(this.attributes=M.extend({},mt,ht));var xe=this.isNew()?"create":nt.patch?"patch":"update";xe==="patch"&&!nt.attrs&&(nt.attrs=ht);var He=this.sync(xe,this,nt);return this.attributes=mt,He},destroy:function(T){T=T?M.clone(T):{};var B=this,nt=T.success,ht=T.wait,Lt=function(){B.stopListening(),B.trigger("destroy",B,B.collection,T)};T.success=function(Et){ht&&Lt(),nt&&nt.call(T.context,B,Et,T),B.isNew()||B.trigger("sync",B,Et,T)};var Z=!1;return this.isNew()?M.defer(T.success):(he(this,T),Z=this.sync("delete",this,T)),ht||Lt(),Z},url:function(){var T=M.result(this,"urlRoot")||M.result(this.collection,"url")||ar();if(this.isNew())return T;var B=this.get(this.idAttribute);return T.replace(/[^\/]$/,"$&/")+encodeURIComponent(B)},parse:function(T,B){return T},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(T){return this._validate({},M.extend({},T,{validate:!0}))},_validate:function(T,B){if(!B.validate||!this.validate)return!0;T=M.extend({},this.attributes,T);var nt=this.validationError=this.validate(T,B)||null;return nt?(this.trigger("invalid",this,nt,M.extend(B,{validationError:nt})),!1):!0}});var ue=R.Collection=function(T,B){B||(B={}),this.preinitialize.apply(this,arguments),B.model&&(this.model=B.model),B.comparator!==void 0&&(this.comparator=B.comparator),this._reset(),this.initialize.apply(this,arguments),T&&this.reset(T,M.extend({silent:!0},B))},Zt={add:!0,remove:!0,merge:!0},dt={add:!0,remove:!1},ot=function(T,B,nt){nt=Math.min(Math.max(nt,0),T.length);var ht=Array(T.length-nt),Lt=B.length,Z;for(Z=0;Z<ht.length;Z++)ht[Z]=T[Z+nt];for(Z=0;Z<Lt;Z++)T[Z+nt]=B[Z];for(Z=0;Z<ht.length;Z++)T[Z+Lt+nt]=ht[Z]};M.extend(ue.prototype,L,{model:te,preinitialize:function(){},initialize:function(){},toJSON:function(T){return this.map(function(B){return B.toJSON(T)})},sync:function(){return R.sync.apply(this,arguments)},add:function(T,B){return this.set(T,M.extend({merge:!1},B,dt))},remove:function(T,B){B=M.extend({},B);var nt=!M.isArray(T);T=nt?[T]:T.slice();var ht=this._removeModels(T,B);return!B.silent&&ht.length&&(B.changes={added:[],merged:[],removed:ht},this.trigger("update",this,B)),nt?ht[0]:ht},set:function(T,B){if(T!=null){B=M.extend({},Zt,B),B.parse&&!this._isModel(T)&&(T=this.parse(T,B)||[]);var nt=!M.isArray(T);T=nt?[T]:T.slice();var ht=B.at;ht!=null&&(ht=+ht),ht>this.length&&(ht=this.length),ht<0&&(ht+=this.length+1);var Lt=[],Z=[],Et=[],mt=[],xe={},He=B.add,De=B.merge,ee=B.remove,Jt=!1,Vt=this.comparator&&ht==null&&B.sort!==!1,Te=M.isString(this.comparator)?this.comparator:null,Be,Ee;for(Ee=0;Ee<T.length;Ee++){Be=T[Ee];var Ke=this.get(Be);if(Ke){if(De&&Be!==Ke){var ge=this._isModel(Be)?Be.attributes:Be;B.parse&&(ge=Ke.parse(ge,B)),Ke.set(ge,B),Et.push(Ke),Vt&&!Jt&&(Jt=Ke.hasChanged(Te))}xe[Ke.cid]||(xe[Ke.cid]=!0,Lt.push(Ke)),T[Ee]=Ke}else He&&(Be=T[Ee]=this._prepareModel(Be,B),Be&&(Z.push(Be),this._addReference(Be,B),xe[Be.cid]=!0,Lt.push(Be)))}if(ee){for(Ee=0;Ee<this.length;Ee++)Be=this.models[Ee],xe[Be.cid]||mt.push(Be);mt.length&&this._removeModels(mt,B)}var fr=!1,Me=!Vt&&He&&ee;if(Lt.length&&Me?(fr=this.length!==Lt.length||M.some(this.models,function(nr,Qe){return nr!==Lt[Qe]}),this.models.length=0,ot(this.models,Lt,0),this.length=this.models.length):Z.length&&(Vt&&(Jt=!0),ot(this.models,Z,ht??this.length),this.length=this.models.length),Jt&&this.sort({silent:!0}),!B.silent){for(Ee=0;Ee<Z.length;Ee++)ht!=null&&(B.index=ht+Ee),Be=Z[Ee],Be.trigger("add",Be,this,B);(Jt||fr)&&this.trigger("sort",this,B),(Z.length||mt.length||Et.length)&&(B.changes={added:Z,removed:mt,merged:Et},this.trigger("update",this,B))}return nt?T[0]:T}},reset:function(T,B){B=B?M.clone(B):{};for(var nt=0;nt<this.models.length;nt++)this._removeReference(this.models[nt],B);return B.previousModels=this.models,this._reset(),T=this.add(T,M.extend({silent:!0},B)),B.silent||this.trigger("reset",this,B),T},push:function(T,B){return this.add(T,M.extend({at:this.length},B))},pop:function(T){var B=this.at(this.length-1);return this.remove(B,T)},unshift:function(T,B){return this.add(T,M.extend({at:0},B))},shift:function(T){var B=this.at(0);return this.remove(B,T)},slice:function(){return j.apply(this.models,arguments)},get:function(T){if(T!=null)return this._byId[T]||this._byId[this.modelId(this._isModel(T)?T.attributes:T,T.idAttribute)]||T.cid&&this._byId[T.cid]},has:function(T){return this.get(T)!=null},at:function(T){return T<0&&(T+=this.length),this.models[T]},where:function(T,B){return this[B?"find":"filter"](T)},findWhere:function(T){return this.where(T,!0)},sort:function(T){var B=this.comparator;if(!B)throw new Error("Cannot sort a set without a comparator");T||(T={});var nt=B.length;return M.isFunction(B)&&(B=B.bind(this)),nt===1||M.isString(B)?this.models=this.sortBy(B):this.models.sort(B),T.silent||this.trigger("sort",this,T),this},pluck:function(T){return this.map(T+"")},fetch:function(T){T=M.extend({parse:!0},T);var B=T.success,nt=this;return T.success=function(ht){var Lt=T.reset?"reset":"set";nt[Lt](ht,T),B&&B.call(T.context,nt,ht,T),nt.trigger("sync",nt,ht,T)},he(this,T),this.sync("read",this,T)},create:function(T,B){B=B?M.clone(B):{};var nt=B.wait;if(T=this._prepareModel(T,B),!T)return!1;nt||this.add(T,B);var ht=this,Lt=B.success;return B.success=function(Z,Et,mt){nt&&ht.add(Z,mt),Lt&&Lt.call(mt.context,Z,Et,mt)},T.save(null,B),T},parse:function(T,B){return T},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(T,B){return T[B||this.model.prototype.idAttribute||"id"]},values:function(){return new z(this,et)},keys:function(){return new z(this,A)},entries:function(){return new z(this,tt)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(T,B){if(this._isModel(T))return T.collection||(T.collection=this),T;B=B?M.clone(B):{},B.collection=this;var nt;return this.model.prototype?nt=new this.model(T,B):nt=this.model(T,B),nt.validationError?(this.trigger("invalid",this,nt.validationError,B),!1):nt},_removeModels:function(T,B){for(var nt=[],ht=0;ht<T.length;ht++){var Lt=this.get(T[ht]);if(Lt){var Z=this.indexOf(Lt);this.models.splice(Z,1),this.length--,delete this._byId[Lt.cid];var Et=this.modelId(Lt.attributes,Lt.idAttribute);Et!=null&&delete this._byId[Et],B.silent||(B.index=Z,Lt.trigger("remove",Lt,this,B)),nt.push(Lt),this._removeReference(Lt,B)}}return nt},_isModel:function(T){return T instanceof te},_addReference:function(T,B){this._byId[T.cid]=T;var nt=this.modelId(T.attributes,T.idAttribute);nt!=null&&(this._byId[nt]=T),T.on("all",this._onModelEvent,this)},_removeReference:function(T,B){delete this._byId[T.cid];var nt=this.modelId(T.attributes,T.idAttribute);nt!=null&&delete this._byId[nt],this===T.collection&&delete T.collection,T.off("all",this._onModelEvent,this)},_onModelEvent:function(T,B,nt,ht){if(B){if((T==="add"||T==="remove")&&nt!==this)return;if(T==="destroy"&&this.remove(B,ht),T==="changeId"){var Lt=this.modelId(B.previousAttributes(),B.idAttribute),Z=this.modelId(B.attributes,B.idAttribute);Lt!=null&&delete this._byId[Lt],Z!=null&&(this._byId[Z]=B)}}this.trigger.apply(this,arguments)}});var X=typeof Symbol=="function"&&Symbol.iterator;X&&(ue.prototype[X]=ue.prototype.values);var z=function(T,B){this._collection=T,this._kind=B,this._index=0},et=1,A=2,tt=3;X&&(z.prototype[X]=function(){return this}),z.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var T=this._collection.at(this._index);this._index++;var B;if(this._kind===et)B=T;else{var nt=this._collection.modelId(T.attributes,T.idAttribute);this._kind===A?B=nt:B=[nt,T]}return{value:B,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var E=R.View=function(T){this.cid=M.uniqueId("view"),this.preinitialize.apply(this,arguments),M.extend(this,M.pick(T,Pt)),this._ensureElement(),this.initialize.apply(this,arguments)},At=/^(\S+)\s*(.*)$/,Pt=["model","collection","el","id","attributes","className","tagName","events"];M.extend(E.prototype,L,{tagName:"div",$:function(T){return this.$el.find(T)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(T){return this.undelegateEvents(),this._setElement(T),this.delegateEvents(),this},_setElement:function(T){this.$el=T instanceof R.$?T:R.$(T),this.el=this.$el[0]},delegateEvents:function(T){if(T||(T=M.result(this,"events")),!T)return this;this.undelegateEvents();for(var B in T){var nt=T[B];if(M.isFunction(nt)||(nt=this[nt]),!!nt){var ht=B.match(At);this.delegate(ht[1],ht[2],nt.bind(this))}}return this},delegate:function(T,B,nt){return this.$el.on(T+".delegateEvents"+this.cid,B,nt),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(T,B,nt){return this.$el.off(T+".delegateEvents"+this.cid,B,nt),this},_createElement:function(T){return document.createElement(T)},_ensureElement:function(){if(this.el)this.setElement(M.result(this,"el"));else{var T=M.extend({},M.result(this,"attributes"));this.id&&(T.id=M.result(this,"id")),this.className&&(T.class=M.result(this,"className")),this.setElement(this._createElement(M.result(this,"tagName"))),this._setAttributes(T)}},_setAttributes:function(T){this.$el.attr(T)}});var ct=function(T,B,nt,ht){switch(B){case 1:return function(){return T[nt](this[ht])};case 2:return function(Lt){return T[nt](this[ht],Lt)};case 3:return function(Lt,Z){return T[nt](this[ht],Wt(Lt,this),Z)};case 4:return function(Lt,Z,Et){return T[nt](this[ht],Wt(Lt,this),Z,Et)};default:return function(){var Lt=j.call(arguments);return Lt.unshift(this[ht]),T[nt].apply(T,Lt)}}},Dt=function(T,B,nt,ht){M.each(nt,function(Lt,Z){B[Z]&&(T.prototype[Z]=ct(B,Lt,Z,ht))})},Wt=function(T,B){return M.isFunction(T)?T:M.isObject(T)&&!B._isModel(T)?oe(T):M.isString(T)?function(nt){return nt.get(T)}:T},oe=function(T){var B=M.matches(T);return function(nt){return B(nt.attributes)}},Pe={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},_e={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};M.each([[ue,Pe,"models"],[te,_e,"attributes"]],function(T){var B=T[0],nt=T[1],ht=T[2];B.mixin=function(Lt){var Z=M.reduce(M.functions(Lt),function(Et,mt){return Et[mt]=0,Et},{});Dt(B,Lt,Z,ht)},Dt(B,M,nt,ht)}),R.sync=function(T,B,nt){var ht=ve[T];M.defaults(nt||(nt={}),{emulateHTTP:R.emulateHTTP,emulateJSON:R.emulateJSON});var Lt={type:ht,dataType:"json"};if(nt.url||(Lt.url=M.result(B,"url")||ar()),nt.data==null&&B&&(T==="create"||T==="update"||T==="patch")&&(Lt.contentType="application/json",Lt.data=JSON.stringify(nt.attrs||B.toJSON(nt))),nt.emulateJSON&&(Lt.contentType="application/x-www-form-urlencoded",Lt.data=Lt.data?{model:Lt.data}:{}),nt.emulateHTTP&&(ht==="PUT"||ht==="DELETE"||ht==="PATCH")){Lt.type="POST",nt.emulateJSON&&(Lt.data._method=ht);var Z=nt.beforeSend;nt.beforeSend=function(xe){if(xe.setRequestHeader("X-HTTP-Method-Override",ht),Z)return Z.apply(this,arguments)}}Lt.type!=="GET"&&!nt.emulateJSON&&(Lt.processData=!1);var Et=nt.error;nt.error=function(xe,He,De){nt.textStatus=He,nt.errorThrown=De,Et&&Et.call(nt.context,xe,He,De)};var mt=nt.xhr=R.ajax(M.extend(Lt,nt));return B.trigger("request",B,mt,nt),mt};var ve={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};R.ajax=function(){return R.$.ajax.apply(R.$,arguments)};var Ct=R.Router=function(T){T||(T={}),this.preinitialize.apply(this,arguments),T.routes&&(this.routes=T.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Rt=/\((.*?)\)/g,zt=/(\(\?)?:\w+/g,ie=/\*\w+/g,ne=/[\-{}\[\]+?.,\\\^$|#\s]/g;M.extend(Ct.prototype,L,{preinitialize:function(){},initialize:function(){},route:function(T,B,nt){M.isRegExp(T)||(T=this._routeToRegExp(T)),M.isFunction(B)&&(nt=B,B=""),nt||(nt=this[B]);var ht=this;return R.history.route(T,function(Lt){var Z=ht._extractParameters(T,Lt);ht.execute(nt,Z,B)!==!1&&(ht.trigger.apply(ht,["route:"+B].concat(Z)),ht.trigger("route",B,Z),R.history.trigger("route",ht,B,Z))}),this},execute:function(T,B,nt){T&&T.apply(this,B)},navigate:function(T,B){return R.history.navigate(T,B),this},_bindRoutes:function(){if(this.routes){this.routes=M.result(this,"routes");for(var T,B=M.keys(this.routes);(T=B.pop())!=null;)this.route(T,this.routes[T])}},_routeToRegExp:function(T){return T=T.replace(ne,"\\$&").replace(Rt,"(?:$1)?").replace(zt,function(B,nt){return nt?B:"([^/?]+)"}).replace(ie,"([^?]*?)"),new RegExp("^"+T+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(T,B){var nt=T.exec(B).slice(1);return M.map(nt,function(ht,Lt){return Lt===nt.length-1?ht||null:ht?decodeURIComponent(ht):null})}});var qt=R.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},me=/^[#\/]|\s+$/g,Ne=/^\/+|\/+$/g,cr=/#.*$/;qt.started=!1,M.extend(qt.prototype,L,{interval:50,atRoot:function(){var T=this.location.pathname.replace(/[^\/]$/,"$&/");return T===this.root&&!this.getSearch()},matchRoot:function(){var T=this.decodeFragment(this.location.pathname),B=T.slice(0,this.root.length-1)+"/";return B===this.root},decodeFragment:function(T){return decodeURI(T.replace(/%25/g,"%2525"))},getSearch:function(){var T=this.location.href.replace(/#.*/,"").match(/\?.+/);return T?T[0]:""},getHash:function(T){var B=(T||this).location.href.match(/#(.*)$/);return B?B[1]:""},getPath:function(){var T=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return T.charAt(0)==="/"?T.slice(1):T},getFragment:function(T){return T==null&&(this._usePushState||!this._wantsHashChange?T=this.getPath():T=this.getHash()),T.replace(me,"")},start:function(T){if(qt.started)throw new Error("Backbone.history has already been started");if(qt.started=!0,this.options=M.extend({root:"/"},this.options,T),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ne,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var B=this.root.slice(0,-1)||"/";return this.location.replace(B+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var nt=document.body,ht=nt.insertBefore(this.iframe,nt.firstChild).contentWindow;ht.document.open(),ht.document.close(),ht.location.hash="#"+this.fragment}var Lt=window.addEventListener||function(Z,Et){return attachEvent("on"+Z,Et)};if(this._usePushState?Lt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Lt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var T=window.removeEventListener||function(B,nt){return detachEvent("on"+B,nt)};this._usePushState?T("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&T("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),qt.started=!1},route:function(T,B){this.handlers.unshift({route:T,callback:B})},checkUrl:function(T){var B=this.getFragment();if(B===this.fragment&&this.iframe&&(B=this.getHash(this.iframe.contentWindow)),B===this.fragment)return!1;this.iframe&&this.navigate(B),this.loadUrl()},loadUrl:function(T){return this.matchRoot()?(T=this.fragment=this.getFragment(T),M.some(this.handlers,function(B){if(B.route.test(T))return B.callback(T),!0})):!1},navigate:function(T,B){if(!qt.started)return!1;(!B||B===!0)&&(B={trigger:!!B}),T=this.getFragment(T||"");var nt=this.root;(T===""||T.charAt(0)==="?")&&(nt=nt.slice(0,-1)||"/");var ht=nt+T;T=T.replace(cr,"");var Lt=this.decodeFragment(T);if(this.fragment!==Lt){if(this.fragment=Lt,this._usePushState)this.history[B.replace?"replaceState":"pushState"]({},document.title,ht);else if(this._wantsHashChange){if(this._updateHash(this.location,T,B.replace),this.iframe&&T!==this.getHash(this.iframe.contentWindow)){var Z=this.iframe.contentWindow;B.replace||(Z.document.open(),Z.document.close()),this._updateHash(Z.location,T,B.replace)}}else return this.location.assign(ht);if(B.trigger)return this.loadUrl(T)}},_updateHash:function(T,B,nt){if(nt){var ht=T.href.replace(/(javascript:|#).*$/,"");T.replace(ht+"#"+B)}else T.hash="#"+B}}),R.history=new qt;var _r=function(T,B){var nt=this,ht;return T&&M.has(T,"constructor")?ht=T.constructor:ht=function(){return nt.apply(this,arguments)},M.extend(ht,nt,B),ht.prototype=M.create(nt.prototype,T),ht.prototype.constructor=ht,ht.__super__=nt.prototype,ht};te.extend=ue.extend=Ct.extend=E.extend=qt.extend=_r;var ar=function(){throw new Error('A "url" property or function must be specified')},he=function(T,B){var nt=B.error;B.error=function(ht){nt&&nt.call(B.context,T,ht,B),T.trigger("error",T,ht,B)}};return R})},210:(w,Y,st)=>{(function(rt){rt(st(631))})(function(rt){rt.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(F,R){return/^[;{}]$/.test(R)}}),rt.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(F,R,M,N){return this.jsonMode?/^[\[,{]$/.test(R)||/^}/.test(M):R==";"&&N.lexical&&N.lexical.type==")"?!1:/^[;{}]$/.test(R)&&!/^;/.test(M)}});var lt=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;rt.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(F,R,M,N){var x=!1;return this.configuration=="html"&&(x=N.context?lt.test(N.context.tagName):!1),!x&&(F=="tag"&&/>$/.test(R)&&N.context||/^</.test(M))}}),rt.defineExtension("commentRange",function(F,R,M){var N=this,x=rt.innerMode(N.getMode(),N.getTokenAt(R).state).mode;N.operation(function(){if(F)N.replaceRange(x.commentEnd,M),N.replaceRange(x.commentStart,R),R.line==M.line&&R.ch==M.ch&&N.setCursor(R.line,R.ch+x.commentStart.length);else{var j=N.getRange(R,M),L=j.indexOf(x.commentStart),D=j.lastIndexOf(x.commentEnd);L>-1&&D>-1&&D>L&&(j=j.substr(0,L)+j.substring(L+x.commentStart.length,D)+j.substr(D+x.commentEnd.length)),N.replaceRange(j,R,M)}})}),rt.defineExtension("autoIndentRange",function(F,R){var M=this;this.operation(function(){for(var N=F.line;N<=R.line;N++)M.indentLine(N,"smart")})}),rt.defineExtension("autoFormatRange",function(F,R){var M=this,N=M.getMode(),x=M.getRange(F,R).split(`
`),j=rt.copyState(N,M.getTokenAt(F).state),L=M.getOption("tabSize"),D="",H=0,G=F.ch===0;function pt(){D+=`
`,G=!0,++H}for(var xt=0;xt<x.length;++xt){for(var Nt=new rt.StringStream(x[xt],L);!Nt.eol();){var jt=rt.innerMode(N,j),Tt=N.token(Nt,j),yt=Nt.current();Nt.start=Nt.pos,(!G||/\S/.test(yt))&&(D+=yt,G=!1),!G&&jt.mode.newlineAfterToken&&jt.mode.newlineAfterToken(Tt,yt,Nt.string.slice(Nt.pos)||x[xt+1]||"",jt.state)&&pt()}!Nt.pos&&N.blankLine&&N.blankLine(j),!G&&xt<x.length-1&&pt()}M.operation(function(){M.replaceRange(D,F,R);for(var Kt=F.line+1,te=F.line+H;Kt<=te;++Kt)M.indentLine(Kt,"smart");M.setSelection(F,M.getCursor(!1))})})})},631:function(w){(function(Y,st){w.exports=st()})(this,function(){var Y=navigator.userAgent,st=navigator.platform,rt=/gecko\/\d/i.test(Y),lt=/MSIE \d/.test(Y),F=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Y),R=/Edge\/(\d+)/.exec(Y),M=lt||F||R,N=M&&(lt?document.documentMode||6:+(R||F)[1]),x=!R&&/WebKit\//.test(Y),j=x&&/Qt\/\d+\.\d+/.test(Y),L=!R&&/Chrome\/(\d+)/.exec(Y),D=L&&+L[1],H=/Opera\//.test(Y),G=/Apple Computer/.test(navigator.vendor),pt=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Y),xt=/PhantomJS/.test(Y),Nt=G&&(/Mobile\/\w+/.test(Y)||navigator.maxTouchPoints>2),jt=/Android/.test(Y),Tt=Nt||jt||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Y),yt=Nt||/Mac/.test(st),Kt=/\bCrOS\b/.test(Y),te=/win/i.test(st),ue=H&&Y.match(/Version\/(\d*\.\d*)/);ue&&(ue=Number(ue[1])),ue&&ue>=15&&(H=!1,x=!0);var Zt=yt&&(j||H&&(ue==null||ue<12.11)),dt=rt||M&&N>=9;function ot(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var X=function(i,s){var c=i.className,u=ot(s).exec(c);if(u){var p=c.slice(u.index+u[0].length);i.className=c.slice(0,u.index)+(p?u[1]+p:"")}};function z(i){for(var s=i.childNodes.length;s>0;--s)i.removeChild(i.firstChild);return i}function et(i,s){return z(i).appendChild(s)}function A(i,s,c,u){var p=document.createElement(i);if(c&&(p.className=c),u&&(p.style.cssText=u),typeof s=="string")p.appendChild(document.createTextNode(s));else if(s)for(var v=0;v<s.length;++v)p.appendChild(s[v]);return p}function tt(i,s,c,u){var p=A(i,s,c,u);return p.setAttribute("role","presentation"),p}var E;document.createRange?E=function(i,s,c,u){var p=document.createRange();return p.setEnd(u||i,c),p.setStart(i,s),p}:E=function(i,s,c){var u=document.body.createTextRange();try{u.moveToElementText(i.parentNode)}catch{return u}return u.collapse(!0),u.moveEnd("character",c),u.moveStart("character",s),u};function At(i,s){if(s.nodeType==3&&(s=s.parentNode),i.contains)return i.contains(s);do if(s.nodeType==11&&(s=s.host),s==i)return!0;while(s=s.parentNode)}function Pt(i){var s;try{s=i.activeElement}catch{s=i.body||null}for(;s&&s.shadowRoot&&s.shadowRoot.activeElement;)s=s.shadowRoot.activeElement;return s}function ct(i,s){var c=i.className;ot(s).test(c)||(i.className+=(c?" ":"")+s)}function Dt(i,s){for(var c=i.split(" "),u=0;u<c.length;u++)c[u]&&!ot(c[u]).test(s)&&(s+=" "+c[u]);return s}var Wt=function(i){i.select()};Nt?Wt=function(i){i.selectionStart=0,i.selectionEnd=i.value.length}:M&&(Wt=function(i){try{i.select()}catch{}});function oe(i){return i.display.wrapper.ownerDocument}function Pe(i){return oe(i).defaultView}function _e(i){var s=Array.prototype.slice.call(arguments,1);return function(){return i.apply(null,s)}}function ve(i,s,c){s||(s={});for(var u in i)i.hasOwnProperty(u)&&(c!==!1||!s.hasOwnProperty(u))&&(s[u]=i[u]);return s}function Ct(i,s,c,u,p){s==null&&(s=i.search(/[^\s\u00a0]/),s==-1&&(s=i.length));for(var v=u||0,m=p||0;;){var _=i.indexOf("	",v);if(_<0||_>=s)return m+(s-v);m+=_-v,m+=c-m%c,v=_+1}}var Rt=function(){this.id=null,this.f=null,this.time=0,this.handler=_e(this.onTimeout,this)};Rt.prototype.onTimeout=function(i){i.id=0,i.time<=+new Date?i.f():setTimeout(i.handler,i.time-+new Date)},Rt.prototype.set=function(i,s){this.f=s;var c=+new Date+i;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,i),this.time=c)};function zt(i,s){for(var c=0;c<i.length;++c)if(i[c]==s)return c;return-1}var ie=50,ne={toString:function(){return"CodeMirror.Pass"}},qt={scroll:!1},me={origin:"*mouse"},Ne={origin:"+move"};function cr(i,s,c){for(var u=0,p=0;;){var v=i.indexOf("	",u);v==-1&&(v=i.length);var m=v-u;if(v==i.length||p+m>=s)return u+Math.min(m,s-p);if(p+=v-u,p+=c-p%c,u=v+1,p>=s)return u}}var _r=[""];function ar(i){for(;_r.length<=i;)_r.push(he(_r)+" ");return _r[i]}function he(i){return i[i.length-1]}function T(i,s){for(var c=[],u=0;u<i.length;u++)c[u]=s(i[u],u);return c}function B(i,s,c){for(var u=0,p=c(s);u<i.length&&c(i[u])<=p;)u++;i.splice(u,0,s)}function nt(){}function ht(i,s){var c;return Object.create?c=Object.create(i):(nt.prototype=i,c=new nt),s&&ve(s,c),c}var Lt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Z(i){return/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||Lt.test(i))}function Et(i,s){return s?s.source.indexOf("\\w")>-1&&Z(i)?!0:s.test(i):Z(i)}function mt(i){for(var s in i)if(i.hasOwnProperty(s)&&i[s])return!1;return!0}var xe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function He(i){return i.charCodeAt(0)>=768&&xe.test(i)}function De(i,s,c){for(;(c<0?s>0:s<i.length)&&He(i.charAt(s));)s+=c;return s}function ee(i,s,c){for(var u=s>c?-1:1;;){if(s==c)return s;var p=(s+c)/2,v=u<0?Math.ceil(p):Math.floor(p);if(v==s)return i(v)?s:c;i(v)?c=v:s=v+u}}function Jt(i,s,c,u){if(!i)return u(s,c,"ltr",0);for(var p=!1,v=0;v<i.length;++v){var m=i[v];(m.from<c&&m.to>s||s==c&&m.to==s)&&(u(Math.max(m.from,s),Math.min(m.to,c),m.level==1?"rtl":"ltr",v),p=!0)}p||u(s,c,"ltr")}var Vt=null;function Te(i,s,c){var u;Vt=null;for(var p=0;p<i.length;++p){var v=i[p];if(v.from<s&&v.to>s)return p;v.to==s&&(v.from!=v.to&&c=="before"?u=p:Vt=p),v.from==s&&(v.from!=v.to&&c!="before"?u=p:Vt=p)}return u??Vt}var Be=function(){var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function c(P){return P<=247?i.charAt(P):1424<=P&&P<=1524?"R":1536<=P&&P<=1785?s.charAt(P-1536):1774<=P&&P<=2220?"r":8192<=P&&P<=8203?"w":P==8204?"b":"L"}var u=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,p=/[stwN]/,v=/[LRr]/,m=/[Lb1n]/,_=/[1n]/;function C(P,q,at){this.level=P,this.from=q,this.to=at}return function(P,q){var at=q=="ltr"?"L":"R";if(P.length==0||q=="ltr"&&!u.test(P))return!1;for(var bt=P.length,gt=[],It=0;It<bt;++It)gt.push(c(P.charCodeAt(It)));for(var Ut=0,Qt=at;Ut<bt;++Ut){var se=gt[Ut];se=="m"?gt[Ut]=Qt:Qt=se}for(var ye=0,le=at;ye<bt;++ye){var we=gt[ye];we=="1"&&le=="r"?gt[ye]="n":v.test(we)&&(le=we,we=="r"&&(gt[ye]="R"))}for(var Le=1,ke=gt[0];Le<bt-1;++Le){var Xe=gt[Le];Xe=="+"&&ke=="1"&&gt[Le+1]=="1"?gt[Le]="1":Xe==","&&ke==gt[Le+1]&&(ke=="1"||ke=="n")&&(gt[Le]=ke),ke=Xe}for(var dr=0;dr<bt;++dr){var zr=gt[dr];if(zr==",")gt[dr]="N";else if(zr=="%"){var wr=void 0;for(wr=dr+1;wr<bt&&gt[wr]=="%";++wr);for(var kn=dr&&gt[dr-1]=="!"||wr<bt&&gt[wr]=="1"?"1":"N",wn=dr;wn<wr;++wn)gt[wn]=kn;dr=wr-1}}for(var jr=0,dn=at;jr<bt;++jr){var Wr=gt[jr];dn=="L"&&Wr=="1"?gt[jr]="L":v.test(Wr)&&(dn=Wr)}for(var Ir=0;Ir<bt;++Ir)if(p.test(gt[Ir])){var Mr=void 0;for(Mr=Ir+1;Mr<bt&&p.test(gt[Mr]);++Mr);for(var Cr=(Ir?gt[Ir-1]:at)=="L",bn=(Mr<bt?gt[Mr]:at)=="L",xa=Cr==bn?Cr?"L":"R":at,si=Ir;si<Mr;++si)gt[si]=xa;Ir=Mr-1}for(var an=[],bo,Kr=0;Kr<bt;)if(m.test(gt[Kr])){var bu=Kr;for(++Kr;Kr<bt&&m.test(gt[Kr]);++Kr);an.push(new C(0,bu,Kr))}else{var Do=Kr,jo=an.length,Wi=q=="rtl"?1:0;for(++Kr;Kr<bt&&gt[Kr]!="L";++Kr);for(var hn=Do;hn<Kr;)if(_.test(gt[hn])){Do<hn&&(an.splice(jo,0,new C(1,Do,hn)),jo+=Wi);var Sa=hn;for(++hn;hn<Kr&&_.test(gt[hn]);++hn);an.splice(jo,0,new C(2,Sa,hn)),jo+=Wi,Do=hn}else++hn;Do<Kr&&an.splice(jo,0,new C(1,Do,Kr))}return q=="ltr"&&(an[0].level==1&&(bo=P.match(/^\s+/))&&(an[0].from=bo[0].length,an.unshift(new C(0,0,bo[0].length))),he(an).level==1&&(bo=P.match(/\s+$/))&&(he(an).to-=bo[0].length,an.push(new C(0,bt-bo[0].length,bt)))),q=="rtl"?an.reverse():an}}();function Ee(i,s){var c=i.order;return c==null&&(c=i.order=Be(i.text,s)),c}var Ke=[],ge=function(i,s,c){if(i.addEventListener)i.addEventListener(s,c,!1);else if(i.attachEvent)i.attachEvent("on"+s,c);else{var u=i._handlers||(i._handlers={});u[s]=(u[s]||Ke).concat(c)}};function fr(i,s){return i._handlers&&i._handlers[s]||Ke}function Me(i,s,c){if(i.removeEventListener)i.removeEventListener(s,c,!1);else if(i.detachEvent)i.detachEvent("on"+s,c);else{var u=i._handlers,p=u&&u[s];if(p){var v=zt(p,c);v>-1&&(u[s]=p.slice(0,v).concat(p.slice(v+1)))}}}function nr(i,s){var c=fr(i,s);if(c.length)for(var u=Array.prototype.slice.call(arguments,2),p=0;p<c.length;++p)c[p].apply(null,u)}function Qe(i,s,c){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),nr(i,c||s.type,i,s),wt(s)||s.codemirrorIgnore}function Xt(i){var s=i._handlers&&i._handlers.cursorActivity;if(s)for(var c=i.curOp.cursorActivityHandlers||(i.curOp.cursorActivityHandlers=[]),u=0;u<s.length;++u)zt(c,s[u])==-1&&c.push(s[u])}function Or(i,s){return fr(i,s).length>0}function Kn(i){i.prototype.on=function(s,c){ge(this,s,c)},i.prototype.off=function(s,c){Me(this,s,c)}}function U(i){i.preventDefault?i.preventDefault():i.returnValue=!1}function ft(i){i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}function wt(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==!1}function Ht(i){U(i),ft(i)}function de(i){return i.target||i.srcElement}function je(i){var s=i.which;return s==null&&(i.button&1?s=1:i.button&2?s=3:i.button&4&&(s=2)),yt&&i.ctrlKey&&s==1&&(s=3),s}var tr=function(){if(M&&N<9)return!1;var i=A("div");return"draggable"in i||"dragDrop"in i}(),Zr;function Jr(i){if(Zr==null){var s=A("span","​");et(i,A("span",[s,document.createTextNode("x")])),i.firstChild.offsetHeight!=0&&(Zr=s.offsetWidth<=1&&s.offsetHeight>2&&!(M&&N<8))}var c=Zr?A("span","​"):A("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}var Tr;function Co(i){if(Tr!=null)return Tr;var s=et(i,document.createTextNode("AخA")),c=E(s,0,1).getBoundingClientRect(),u=E(s,1,2).getBoundingClientRect();return z(i),!c||c.left==c.right?!1:Tr=u.right-c.right<3}var Qr=`

b`.split(/\n/).length!=3?function(i){for(var s=0,c=[],u=i.length;s<=u;){var p=i.indexOf(`
`,s);p==-1&&(p=i.length);var v=i.slice(s,i.charAt(p-1)=="\r"?p-1:p),m=v.indexOf("\r");m!=-1?(c.push(v.slice(0,m)),s+=m+1):(c.push(v),s=p+1)}return c}:function(i){return i.split(/\r\n?|\n/)},Cn=window.getSelection?function(i){try{return i.selectionStart!=i.selectionEnd}catch{return!1}}:function(i){var s;try{s=i.ownerDocument.selection.createRange()}catch{}return!s||s.parentElement()!=i?!1:s.compareEndPoints("StartToEnd",s)!=0},xo=function(){var i=A("div");return"oncopy"in i?!0:(i.setAttribute("oncopy","return;"),typeof i.oncopy=="function")}(),Er=null;function mr(i){if(Er!=null)return Er;var s=et(i,A("span","x")),c=s.getBoundingClientRect(),u=E(s,0,1).getBoundingClientRect();return Er=Math.abs(c.left-u.left)>1}var Rr={},xn={};function Gn(i,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),Rr[i]=s}function Ro(i,s){xn[i]=s}function Ln(i){if(typeof i=="string"&&xn.hasOwnProperty(i))i=xn[i];else if(i&&typeof i.name=="string"&&xn.hasOwnProperty(i.name)){var s=xn[i.name];typeof s=="string"&&(s={name:s}),i=ht(s,i),i.name=s.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i))return Ln("application/xml");if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i))return Ln("application/json")}return typeof i=="string"?{name:i}:i||{name:"null"}}function tn(i,s){s=Ln(s);var c=Rr[s.name];if(!c)return tn(i,"text/plain");var u=c(i,s);if(Nr.hasOwnProperty(s.name)){var p=Nr[s.name];for(var v in p)p.hasOwnProperty(v)&&(u.hasOwnProperty(v)&&(u["_"+v]=u[v]),u[v]=p[v])}if(u.name=s.name,s.helperType&&(u.helperType=s.helperType),s.modeProps)for(var m in s.modeProps)u[m]=s.modeProps[m];return u}var Nr={};function ho(i,s){var c=Nr.hasOwnProperty(i)?Nr[i]:Nr[i]={};ve(s,c)}function Sn(i,s){if(s===!0)return s;if(i.copyState)return i.copyState(s);var c={};for(var u in s){var p=s[u];p instanceof Array&&(p=p.concat([])),c[u]=p}return c}function On(i,s){for(var c;i.innerMode&&(c=i.innerMode(s),!(!c||c.mode==i));)s=c.state,i=c.mode;return c||{mode:i,state:s}}function So(i,s,c){return i.startState?i.startState(s,c):!0}var sr=function(i,s,c){this.pos=this.start=0,this.string=i,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};sr.prototype.eol=function(){return this.pos>=this.string.length},sr.prototype.sol=function(){return this.pos==this.lineStart},sr.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},sr.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},sr.prototype.eat=function(i){var s=this.string.charAt(this.pos),c;if(typeof i=="string"?c=s==i:c=s&&(i.test?i.test(s):i(s)),c)return++this.pos,s},sr.prototype.eatWhile=function(i){for(var s=this.pos;this.eat(i););return this.pos>s},sr.prototype.eatSpace=function(){for(var i=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>i},sr.prototype.skipToEnd=function(){this.pos=this.string.length},sr.prototype.skipTo=function(i){var s=this.string.indexOf(i,this.pos);if(s>-1)return this.pos=s,!0},sr.prototype.backUp=function(i){this.pos-=i},sr.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ct(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ct(this.string,this.lineStart,this.tabSize):0)},sr.prototype.indentation=function(){return Ct(this.string,null,this.tabSize)-(this.lineStart?Ct(this.string,this.lineStart,this.tabSize):0)},sr.prototype.match=function(i,s,c){if(typeof i=="string"){var u=function(m){return c?m.toLowerCase():m},p=this.string.substr(this.pos,i.length);if(u(p)==u(i))return s!==!1&&(this.pos+=i.length),!0}else{var v=this.string.slice(this.pos).match(i);return v&&v.index>0?null:(v&&s!==!1&&(this.pos+=v[0].length),v)}},sr.prototype.current=function(){return this.string.slice(this.start,this.pos)},sr.prototype.hideFirstChars=function(i,s){this.lineStart+=i;try{return s()}finally{this.lineStart-=i}},sr.prototype.lookAhead=function(i){var s=this.lineOracle;return s&&s.lookAhead(i)},sr.prototype.baseToken=function(){var i=this.lineOracle;return i&&i.baseToken(this.pos)};function Ce(i,s){if(s-=i.first,s<0||s>=i.size)throw new Error("There is no line "+(s+i.first)+" in the document.");for(var c=i;!c.lines;)for(var u=0;;++u){var p=c.children[u],v=p.chunkSize();if(s<v){c=p;break}s-=v}return c.lines[s]}function Tn(i,s,c){var u=[],p=s.line;return i.iter(s.line,c.line+1,function(v){var m=v.text;p==c.line&&(m=m.slice(0,c.ch)),p==s.line&&(m=m.slice(s.ch)),u.push(m),++p}),u}function Pr(i,s,c){var u=[];return i.iter(s,c,function(p){u.push(p.text)}),u}function vn(i,s){var c=s-i.height;if(c)for(var u=i;u;u=u.parent)u.height+=c}function qe(i){if(i.parent==null)return null;for(var s=i.parent,c=zt(s.lines,i),u=s.parent;u;s=u,u=u.parent)for(var p=0;u.children[p]!=s;++p)c+=u.children[p].chunkSize();return c+s.first}function $n(i,s){var c=i.first;t:do{for(var u=0;u<i.children.length;++u){var p=i.children[u],v=p.height;if(s<v){i=p;continue t}s-=v,c+=p.chunkSize()}return c}while(!i.lines);for(var m=0;m<i.lines.length;++m){var _=i.lines[m],C=_.height;if(s<C)break;s-=C}return c+m}function vo(i,s){return s>=i.first&&s<i.first+i.size}function io(i,s){return String(i.lineNumberFormatter(s+i.firstLineNumber))}function O(i,s,c){if(c===void 0&&(c=null),!(this instanceof O))return new O(i,s,c);this.line=i,this.ch=s,this.sticky=c}function K(i,s){return i.line-s.line||i.ch-s.ch}function Ft(i,s){return i.sticky==s.sticky&&K(i,s)==0}function Yt(i){return O(i.line,i.ch)}function Ae(i,s){return K(i,s)<0?s:i}function er(i,s){return K(i,s)<0?i:s}function or(i,s){return Math.max(i.first,Math.min(s,i.first+i.size-1))}function Se(i,s){if(s.line<i.first)return O(i.first,0);var c=i.first+i.size-1;return s.line>c?O(c,Ce(i,c).text.length):gn(s,Ce(i,s.line).text.length)}function gn(i,s){var c=i.ch;return c==null||c>s?O(i.line,s):c<0?O(i.line,0):i}function Ji(i,s){for(var c=[],u=0;u<s.length;u++)c[u]=Se(i,s[u]);return c}var qn=function(i,s){this.state=i,this.lookAhead=s},Yn=function(i,s,c,u){this.state=s,this.doc=i,this.line=c,this.maxLookAhead=u||0,this.baseTokens=null,this.baseTokenPos=1};Yn.prototype.lookAhead=function(i){var s=this.doc.getLine(this.line+i);return s!=null&&i>this.maxLookAhead&&(this.maxLookAhead=i),s},Yn.prototype.baseToken=function(i){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=i;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-i}},Yn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Yn.fromSaved=function(i,s,c){return s instanceof qn?new Yn(i,Sn(i.mode,s.state),c,s.lookAhead):new Yn(i,Sn(i.mode,s),c)},Yn.prototype.save=function(i){var s=i!==!1?Sn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new qn(s,this.maxLookAhead):s};function gi(i,s,c,u){var p=[i.state.modeGen],v={};un(i,s.text,i.doc.mode,c,function(P,q){return p.push(P,q)},v,u);for(var m=c.state,_=function(P){c.baseTokens=p;var q=i.state.overlays[P],at=1,bt=0;c.state=!0,un(i,s.text,q.mode,c,function(gt,It){for(var Ut=at;bt<gt;){var Qt=p[at];Qt>gt&&p.splice(at,1,gt,p[at+1],Qt),at+=2,bt=Math.min(gt,Qt)}if(It)if(q.opaque)p.splice(Ut,at-Ut,gt,"overlay "+It),at=Ut+2;else for(;Ut<at;Ut+=2){var se=p[Ut+1];p[Ut+1]=(se?se+" ":"")+"overlay "+It}},v),c.state=m,c.baseTokens=null,c.baseTokenPos=1},C=0;C<i.state.overlays.length;++C)_(C);return{styles:p,classes:v.bgClass||v.textClass?v:null}}function La(i,s,c){if(!s.styles||s.styles[0]!=i.state.modeGen){var u=No(i,qe(s)),p=s.text.length>i.options.maxHighlightLength&&Sn(i.doc.mode,u.state),v=gi(i,s,u);p&&(u.state=p),s.stateAfter=u.save(!p),s.styles=v.styles,v.classes?s.styleClasses=v.classes:s.styleClasses&&(s.styleClasses=null),c===i.doc.highlightFrontier&&(i.doc.modeFrontier=Math.max(i.doc.modeFrontier,++i.doc.highlightFrontier))}return s.styles}function No(i,s,c){var u=i.doc,p=i.display;if(!u.mode.startState)return new Yn(u,!0,s);var v=Xn(i,s,c),m=v>u.first&&Ce(u,v-1).stateAfter,_=m?Yn.fromSaved(u,m,v):new Yn(u,So(u.mode),v);return u.iter(v,s,function(C){Qi(i,C.text,_);var P=_.line;C.stateAfter=P==s-1||P%5==0||P>=p.viewFrom&&P<p.viewTo?_.save():null,_.nextLine()}),c&&(u.modeFrontier=_.line),_}function Qi(i,s,c,u){var p=i.doc.mode,v=new sr(s,i.options.tabSize,c);for(v.start=v.pos=u||0,s==""&&En(p,c.state);!v.eol();)mi(p,v,c.state),v.start=v.pos}function En(i,s){if(i.blankLine)return i.blankLine(s);if(i.innerMode){var c=On(i,s);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function mi(i,s,c,u){for(var p=0;p<10;p++){u&&(u[0]=On(i,c).mode);var v=i.token(s,c);if(s.pos>s.start)return v}throw new Error("Mode "+i.name+" failed to advance stream.")}var Fo=function(i,s,c){this.start=i.start,this.end=i.pos,this.string=i.current(),this.type=s||null,this.state=c};function Dn(i,s,c,u){var p=i.doc,v=p.mode,m;s=Se(p,s);var _=Ce(p,s.line),C=No(i,s.line,c),P=new sr(_.text,i.options.tabSize,C),q;for(u&&(q=[]);(u||P.pos<s.ch)&&!P.eol();)P.start=P.pos,m=mi(v,P,C.state),u&&q.push(new Fo(P,m,Sn(p.mode,C.state)));return u?q:new Fo(P,m,C.state)}function yi(i,s){if(i)for(;;){var c=i.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;i=i.slice(0,c.index)+i.slice(c.index+c[0].length);var u=c[1]?"bgClass":"textClass";s[u]==null?s[u]=c[2]:new RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(s[u])||(s[u]+=" "+c[2])}return i}function un(i,s,c,u,p,v,m){var _=c.flattenSpans;_==null&&(_=i.options.flattenSpans);var C=0,P=null,q=new sr(s,i.options.tabSize,u),at,bt=i.options.addModeClass&&[null];for(s==""&&yi(En(c,u.state),v);!q.eol();){if(q.pos>i.options.maxHighlightLength?(_=!1,m&&Qi(i,s,u,q.pos),q.pos=s.length,at=null):at=yi(mi(c,q,u.state,bt),v),bt){var gt=bt[0].name;gt&&(at="m-"+(at?gt+" "+at:gt))}if(!_||P!=at){for(;C<q.start;)C=Math.min(q.start,C+5e3),p(C,P);P=at}q.start=q.pos}for(;C<q.pos;){var It=Math.min(q.pos,C+5e3);p(It,P),C=It}}function Xn(i,s,c){for(var u,p,v=i.doc,m=c?-1:s-(i.doc.mode.innerMode?1e3:100),_=s;_>m;--_){if(_<=v.first)return v.first;var C=Ce(v,_-1),P=C.stateAfter;if(P&&(!c||_+(P instanceof qn?P.lookAhead:0)<=v.modeFrontier))return _;var q=Ct(C.text,null,i.options.tabSize);(p==null||u>q)&&(p=_-1,u=q)}return p}function Hs(i,s){if(i.modeFrontier=Math.min(i.modeFrontier,s),!(i.highlightFrontier<s-10)){for(var c=i.first,u=s-1;u>c;u--){var p=Ce(i,u).stateAfter;if(p&&(!(p instanceof qn)||u+p.lookAhead<s)){c=u+1;break}}i.highlightFrontier=Math.min(i.highlightFrontier,c)}}var Ho=!1,mn=!1;function Da(){Ho=!0}function $r(){mn=!0}function _i(i,s,c){this.marker=i,this.from=s,this.to=c}function Oo(i,s){if(i)for(var c=0;c<i.length;++c){var u=i[c];if(u.marker==s)return u}}function wi(i,s){for(var c,u=0;u<i.length;++u)i[u]!=s&&(c||(c=[])).push(i[u]);return c}function ao(i,s,c){var u=c&&window.WeakSet&&(c.markedSpans||(c.markedSpans=new WeakSet));u&&i.markedSpans&&u.has(i.markedSpans)?i.markedSpans.push(s):(i.markedSpans=i.markedSpans?i.markedSpans.concat([s]):[s],u&&u.add(i.markedSpans)),s.marker.attachLine(i)}function Bs(i,s,c){var u;if(i)for(var p=0;p<i.length;++p){var v=i[p],m=v.marker,_=v.from==null||(m.inclusiveLeft?v.from<=s:v.from<s);if(_||v.from==s&&m.type=="bookmark"&&(!c||!v.marker.insertLeft)){var C=v.to==null||(m.inclusiveRight?v.to>=s:v.to>s);(u||(u=[])).push(new _i(m,v.from,C?null:v.to))}}return u}function ta(i,s,c){var u;if(i)for(var p=0;p<i.length;++p){var v=i[p],m=v.marker,_=v.to==null||(m.inclusiveRight?v.to>=s:v.to>s);if(_||v.from==s&&m.type=="bookmark"&&(!c||v.marker.insertLeft)){var C=v.from==null||(m.inclusiveLeft?v.from<=s:v.from<s);(u||(u=[])).push(new _i(m,C?null:v.from-s,v.to==null?null:v.to-s))}}return u}function ea(i,s){if(s.full)return null;var c=vo(i,s.from.line)&&Ce(i,s.from.line).markedSpans,u=vo(i,s.to.line)&&Ce(i,s.to.line).markedSpans;if(!c&&!u)return null;var p=s.from.ch,v=s.to.ch,m=K(s.from,s.to)==0,_=Bs(c,p,m),C=ta(u,v,m),P=s.text.length==1,q=he(s.text).length+(P?p:0);if(_)for(var at=0;at<_.length;++at){var bt=_[at];if(bt.to==null){var gt=Oo(C,bt.marker);gt?P&&(bt.to=gt.to==null?null:gt.to+q):bt.to=p}}if(C)for(var It=0;It<C.length;++It){var Ut=C[It];if(Ut.to!=null&&(Ut.to+=q),Ut.from==null){var Qt=Oo(_,Ut.marker);Qt||(Ut.from=q,P&&(_||(_=[])).push(Ut))}else Ut.from+=q,P&&(_||(_=[])).push(Ut)}_&&(_=go(_)),C&&C!=_&&(C=go(C));var se=[_];if(!P){var ye=s.text.length-2,le;if(ye>0&&_)for(var we=0;we<_.length;++we)_[we].to==null&&(le||(le=[])).push(new _i(_[we].marker,null,null));for(var Le=0;Le<ye;++Le)se.push(le);se.push(C)}return se}function go(i){for(var s=0;s<i.length;++s){var c=i[s];c.from!=null&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&i.splice(s--,1)}return i.length?i:null}function ja(i,s,c){var u=null;if(i.iter(s.line,c.line+1,function(gt){if(gt.markedSpans)for(var It=0;It<gt.markedSpans.length;++It){var Ut=gt.markedSpans[It].marker;Ut.readOnly&&(!u||zt(u,Ut)==-1)&&(u||(u=[])).push(Ut)}}),!u)return null;for(var p=[{from:s,to:c}],v=0;v<u.length;++v)for(var m=u[v],_=m.find(0),C=0;C<p.length;++C){var P=p[C];if(!(K(P.to,_.from)<0||K(P.from,_.to)>0)){var q=[C,1],at=K(P.from,_.from),bt=K(P.to,_.to);(at<0||!m.inclusiveLeft&&!at)&&q.push({from:P.from,to:_.from}),(bt>0||!m.inclusiveRight&&!bt)&&q.push({from:_.to,to:P.to}),p.splice.apply(p,q),C+=q.length-3}}return p}function bi(i){var s=i.markedSpans;if(s){for(var c=0;c<s.length;++c)s[c].marker.detachLine(i);i.markedSpans=null}}function Ci(i,s){if(s){for(var c=0;c<s.length;++c)s[c].marker.attachLine(i);i.markedSpans=s}}function To(i){return i.inclusiveLeft?-1:0}function xi(i){return i.inclusiveRight?1:0}function Bo(i,s){var c=i.lines.length-s.lines.length;if(c!=0)return c;var u=i.find(),p=s.find(),v=K(u.from,p.from)||To(i)-To(s);if(v)return-v;var m=K(u.to,p.to)||xi(i)-xi(s);return m||s.id-i.id}function Si(i,s){var c=mn&&i.markedSpans,u;if(c)for(var p=void 0,v=0;v<c.length;++v)p=c[v],p.marker.collapsed&&(s?p.from:p.to)==null&&(!u||Bo(u,p.marker)<0)&&(u=p.marker);return u}function so(i){return Si(i,!0)}function Uo(i){return Si(i,!1)}function jn(i,s){var c=mn&&i.markedSpans,u;if(c)for(var p=0;p<c.length;++p){var v=c[p];v.marker.collapsed&&(v.from==null||v.from<s)&&(v.to==null||v.to>s)&&(!u||Bo(u,v.marker)<0)&&(u=v.marker)}return u}function yn(i,s,c,u,p){var v=Ce(i,s),m=mn&&v.markedSpans;if(m)for(var _=0;_<m.length;++_){var C=m[_];if(C.marker.collapsed){var P=C.marker.find(0),q=K(P.from,c)||To(C.marker)-To(p),at=K(P.to,u)||xi(C.marker)-xi(p);if(!(q>=0&&at<=0||q<=0&&at>=0)&&(q<=0&&(C.marker.inclusiveRight&&p.inclusiveLeft?K(P.to,c)>=0:K(P.to,c)>0)||q>=0&&(C.marker.inclusiveRight&&p.inclusiveLeft?K(P.from,u)<=0:K(P.from,u)<0)))return!0}}}function Pn(i){for(var s;s=so(i);)i=s.find(-1,!0).line;return i}function lo(i){for(var s;s=Uo(i);)i=s.find(1,!0).line;return i}function ra(i){for(var s,c;s=Uo(i);)i=s.find(1,!0).line,(c||(c=[])).push(i);return c}function Zn(i,s){var c=Ce(i,s),u=Pn(c);return c==u?s:qe(u)}function Ia(i,s){if(s>i.lastLine())return s;var c=Ce(i,s),u;if(!In(i,c))return s;for(;u=Uo(c);)c=u.find(1,!0).line;return qe(c)+1}function In(i,s){var c=mn&&s.markedSpans;if(c){for(var u=void 0,p=0;p<c.length;++p)if(u=c[p],!!u.marker.collapsed){if(u.from==null)return!0;if(!u.marker.widgetNode&&u.from==0&&u.marker.inclusiveLeft&&uo(i,s,u))return!0}}}function uo(i,s,c){if(c.to==null){var u=c.marker.find(1,!0);return uo(i,u.line,Oo(u.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==s.text.length)return!0;for(var p=void 0,v=0;v<s.markedSpans.length;++v)if(p=s.markedSpans[v],p.marker.collapsed&&!p.marker.widgetNode&&p.from==c.to&&(p.to==null||p.to!=c.from)&&(p.marker.inclusiveLeft||c.marker.inclusiveRight)&&uo(i,s,p))return!0}function Ar(i){i=Pn(i);for(var s=0,c=i.parent,u=0;u<c.lines.length;++u){var p=c.lines[u];if(p==i)break;s+=p.height}for(var v=c.parent;v;c=v,v=c.parent)for(var m=0;m<v.children.length;++m){var _=v.children[m];if(_==c)break;s+=_.height}return s}function Ge(i){if(i.height==0)return 0;for(var s=i.text.length,c,u=i;c=so(u);){var p=c.find(0,!0);u=p.from.line,s+=p.from.ch-p.to.ch}for(u=i;c=Uo(u);){var v=c.find(0,!0);s-=u.text.length-v.from.ch,u=v.to.line,s+=u.text.length-v.to.ch}return s}function zo(i){var s=i.display,c=i.doc;s.maxLine=Ce(c,c.first),s.maxLineLength=Ge(s.maxLine),s.maxLineChanged=!0,c.iter(function(u){var p=Ge(u);p>s.maxLineLength&&(s.maxLineLength=p,s.maxLine=u)})}var Dr=function(i,s,c){this.text=i,Ci(this,s),this.height=c?c(this):1};Dr.prototype.lineNo=function(){return qe(this)},Kn(Dr);function na(i,s,c,u){i.text=s,i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null),i.order!=null&&(i.order=null),bi(i),Ci(i,c);var p=u?u(i):1;p!=i.height&&vn(i,p)}function Wo(i){i.parent=null,bi(i)}var Va={},en={};function cn(i,s){if(!i||/^\s*$/.test(i))return null;var c=s.addModeClass?en:Va;return c[i]||(c[i]=i.replace(/\S+/g,"cm-$&"))}function Oi(i,s){var c=tt("span",null,null,x?"padding-right: .1px":null),u={pre:tt("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:i,trailingSpace:!1,splitSpaces:i.getOption("lineWrapping")};s.measure={};for(var p=0;p<=(s.rest?s.rest.length:0);p++){var v=p?s.rest[p-1]:s.line,m=void 0;u.pos=0,u.addToken=Ko,Co(i.display.measure)&&(m=Ee(v,i.doc.direction))&&(u.addToken=qr(u.addToken,m)),u.map=[];var _=s!=i.display.externalMeasured&&qe(v);Ei(v,u,La(i,v,_)),v.styleClasses&&(v.styleClasses.bgClass&&(u.bgClass=Dt(v.styleClasses.bgClass,u.bgClass||"")),v.styleClasses.textClass&&(u.textClass=Dt(v.styleClasses.textClass,u.textClass||""))),u.map.length==0&&u.map.push(0,0,u.content.appendChild(Jr(i.display.measure))),p==0?(s.measure.map=u.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(u.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(x){var C=u.content.lastChild;(/\bcm-tab\b/.test(C.className)||C.querySelector&&C.querySelector(".cm-tab"))&&(u.content.className="cm-tab-wrap-hack")}return nr(i,"renderLine",i,s.line,u.pre),u.pre.className&&(u.textClass=Dt(u.pre.className,u.textClass||"")),u}function Ti(i){var s=A("span","•","cm-invalidchar");return s.title="\\u"+i.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function Ko(i,s,c,u,p,v,m){if(s){var _=i.splitSpaces?Us(s,i.trailingSpace):s,C=i.cm.state.specialChars,P=!1,q;if(!C.test(s))i.col+=s.length,q=document.createTextNode(_),i.map.push(i.pos,i.pos+s.length,q),M&&N<9&&(P=!0),i.pos+=s.length;else{q=document.createDocumentFragment();for(var at=0;;){C.lastIndex=at;var bt=C.exec(s),gt=bt?bt.index-at:s.length-at;if(gt){var It=document.createTextNode(_.slice(at,at+gt));M&&N<9?q.appendChild(A("span",[It])):q.appendChild(It),i.map.push(i.pos,i.pos+gt,It),i.col+=gt,i.pos+=gt}if(!bt)break;at+=gt+1;var Ut=void 0;if(bt[0]=="	"){var Qt=i.cm.options.tabSize,se=Qt-i.col%Qt;Ut=q.appendChild(A("span",ar(se),"cm-tab")),Ut.setAttribute("role","presentation"),Ut.setAttribute("cm-text","	"),i.col+=se}else bt[0]=="\r"||bt[0]==`
`?(Ut=q.appendChild(A("span",bt[0]=="\r"?"␍":"␤","cm-invalidchar")),Ut.setAttribute("cm-text",bt[0]),i.col+=1):(Ut=i.cm.options.specialCharPlaceholder(bt[0]),Ut.setAttribute("cm-text",bt[0]),M&&N<9?q.appendChild(A("span",[Ut])):q.appendChild(Ut),i.col+=1);i.map.push(i.pos,i.pos+1,Ut),i.pos++}}if(i.trailingSpace=_.charCodeAt(s.length-1)==32,c||u||p||P||v||m){var ye=c||"";u&&(ye+=u),p&&(ye+=p);var le=A("span",[q],ye,v);if(m)for(var we in m)m.hasOwnProperty(we)&&we!="style"&&we!="class"&&le.setAttribute(we,m[we]);return i.content.appendChild(le)}i.content.appendChild(q)}}function Us(i,s){if(i.length>1&&!/  /.test(i))return i;for(var c=s,u="",p=0;p<i.length;p++){var v=i.charAt(p);v==" "&&c&&(p==i.length-1||i.charCodeAt(p+1)==32)&&(v=" "),u+=v,c=v==" "}return u}function qr(i,s){return function(c,u,p,v,m,_,C){p=p?p+" cm-force-border":"cm-force-border";for(var P=c.pos,q=P+u.length;;){for(var at=void 0,bt=0;bt<s.length&&(at=s[bt],!(at.to>P&&at.from<=P));bt++);if(at.to>=q)return i(c,u,p,v,m,_,C);i(c,u.slice(0,at.to-P),p,v,null,_,C),v=null,u=u.slice(at.to-P),P=at.to}}}function Ra(i,s,c,u){var p=!u&&c.widgetNode;p&&i.map.push(i.pos,i.pos+s,p),!u&&i.cm.display.input.needsContentAttribute&&(p||(p=i.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",c.id)),p&&(i.cm.display.input.setUneditable(p),i.content.appendChild(p)),i.pos+=s,i.trailingSpace=!1}function Ei(i,s,c){var u=i.markedSpans,p=i.text,v=0;if(!u){for(var m=1;m<c.length;m+=2)s.addToken(s,p.slice(v,v=c[m]),cn(c[m+1],s.cm.options));return}for(var _=p.length,C=0,P=1,q="",at,bt,gt=0,It,Ut,Qt,se,ye;;){if(gt==C){It=Ut=Qt=bt="",ye=null,se=null,gt=1/0;for(var le=[],we=void 0,Le=0;Le<u.length;++Le){var ke=u[Le],Xe=ke.marker;if(Xe.type=="bookmark"&&ke.from==C&&Xe.widgetNode)le.push(Xe);else if(ke.from<=C&&(ke.to==null||ke.to>C||Xe.collapsed&&ke.to==C&&ke.from==C)){if(ke.to!=null&&ke.to!=C&&gt>ke.to&&(gt=ke.to,Ut=""),Xe.className&&(It+=" "+Xe.className),Xe.css&&(bt=(bt?bt+";":"")+Xe.css),Xe.startStyle&&ke.from==C&&(Qt+=" "+Xe.startStyle),Xe.endStyle&&ke.to==gt&&(we||(we=[])).push(Xe.endStyle,ke.to),Xe.title&&((ye||(ye={})).title=Xe.title),Xe.attributes)for(var dr in Xe.attributes)(ye||(ye={}))[dr]=Xe.attributes[dr];Xe.collapsed&&(!se||Bo(se.marker,Xe)<0)&&(se=ke)}else ke.from>C&&gt>ke.from&&(gt=ke.from)}if(we)for(var zr=0;zr<we.length;zr+=2)we[zr+1]==gt&&(Ut+=" "+we[zr]);if(!se||se.from==C)for(var wr=0;wr<le.length;++wr)Ra(s,0,le[wr]);if(se&&(se.from||0)==C){if(Ra(s,(se.to==null?_+1:se.to)-C,se.marker,se.from==null),se.to==null)return;se.to==C&&(se=!1)}}if(C>=_)break;for(var kn=Math.min(_,gt);;){if(q){var wn=C+q.length;if(!se){var jr=wn>kn?q.slice(0,kn-C):q;s.addToken(s,jr,at?at+It:It,Qt,C+jr.length==gt?Ut:"",bt,ye)}if(wn>=kn){q=q.slice(kn-C),C=kn;break}C=wn,Qt=""}q=p.slice(v,v=c[P++]),at=cn(c[P++],s.cm.options)}}}function Na(i,s,c){this.line=s,this.rest=ra(s),this.size=this.rest?qe(he(this.rest))-c+1:1,this.node=this.text=null,this.hidden=In(i,s)}function Pi(i,s,c){for(var u=[],p,v=s;v<c;v=p){var m=new Na(i.doc,Ce(i.doc,v),v);p=v+m.size,u.push(m)}return u}var mo=null;function oa(i){mo?mo.ops.push(i):i.ownsGroup=mo={ops:[i],delayedCallbacks:[]}}function Fa(i){var s=i.delayedCallbacks,c=0;do{for(;c<s.length;c++)s[c].call(null);for(var u=0;u<i.ops.length;u++){var p=i.ops[u];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(c<s.length)}function Go(i,s){var c=i.ownsGroup;if(c)try{Fa(c)}finally{mo=null,s(c)}}var Vn=null;function yr(i,s){var c=fr(i,s);if(c.length){var u=Array.prototype.slice.call(arguments,2),p;mo?p=mo.delayedCallbacks:Vn?p=Vn:(p=Vn=[],setTimeout(ia,0));for(var v=function(_){p.push(function(){return c[_].apply(null,u)})},m=0;m<c.length;++m)v(m)}}function ia(){var i=Vn;Vn=null;for(var s=0;s<i.length;++s)i[s]()}function Ha(i,s,c,u){for(var p=0;p<s.changes.length;p++){var v=s.changes[p];v=="text"?Ba(i,s):v=="gutter"?yo(i,s,c,u):v=="class"?aa(i,s):v=="widget"&&Ws(i,s,u)}s.changes=null}function Eo(i){return i.node==i.text&&(i.node=A("div",null,null,"position: relative"),i.text.parentNode&&i.text.parentNode.replaceChild(i.node,i.text),i.node.appendChild(i.text),M&&N<8&&(i.node.style.zIndex=2)),i.node}function zs(i,s){var c=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),s.background)c?s.background.className=c:(s.background.parentNode.removeChild(s.background),s.background=null);else if(c){var u=Eo(s);s.background=u.insertBefore(A("div",null,c),u.firstChild),i.display.input.setUneditable(s.background)}}function co(i,s){var c=i.display.externalMeasured;return c&&c.line==s.line?(i.display.externalMeasured=null,s.measure=c.measure,c.built):Oi(i,s)}function Ba(i,s){var c=s.text.className,u=co(i,s);s.text==s.node&&(s.node=u.pre),s.text.parentNode.replaceChild(u.pre,s.text),s.text=u.pre,u.bgClass!=s.bgClass||u.textClass!=s.textClass?(s.bgClass=u.bgClass,s.textClass=u.textClass,aa(i,s)):c&&(s.text.className=c)}function aa(i,s){zs(i,s),s.line.wrapClass?Eo(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var c=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=c||""}function yo(i,s,c,u){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var p=Eo(s);s.gutterBackground=A("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(i.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px; width: "+u.gutterTotalWidth+"px"),i.display.input.setUneditable(s.gutterBackground),p.insertBefore(s.gutterBackground,s.text)}var v=s.line.gutterMarkers;if(i.options.lineNumbers||v){var m=Eo(s),_=s.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(i.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px");if(_.setAttribute("aria-hidden","true"),i.display.input.setUneditable(_),m.insertBefore(_,s.text),s.line.gutterClass&&(_.className+=" "+s.line.gutterClass),i.options.lineNumbers&&(!v||!v["CodeMirror-linenumbers"])&&(s.lineNumber=_.appendChild(A("div",io(i.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+u.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.display.lineNumInnerWidth+"px"))),v)for(var C=0;C<i.display.gutterSpecs.length;++C){var P=i.display.gutterSpecs[C].className,q=v.hasOwnProperty(P)&&v[P];q&&_.appendChild(A("div",[q],"CodeMirror-gutter-elt","left: "+u.gutterLeft[P]+"px; width: "+u.gutterWidth[P]+"px"))}}}function Ws(i,s,c){s.alignable&&(s.alignable=null);for(var u=ot("CodeMirror-linewidget"),p=s.node.firstChild,v=void 0;p;p=v)v=p.nextSibling,u.test(p.className)&&s.node.removeChild(p);Ua(i,s,c)}function Ai(i,s,c,u){var p=co(i,s);return s.text=s.node=p.pre,p.bgClass&&(s.bgClass=p.bgClass),p.textClass&&(s.textClass=p.textClass),aa(i,s),yo(i,s,c,u),Ua(i,s,u),s.node}function Ua(i,s,c){if(ki(i,s.line,s,c,!0),s.rest)for(var u=0;u<s.rest.length;u++)ki(i,s.rest[u],s,c,!1)}function ki(i,s,c,u,p){if(s.widgets)for(var v=Eo(c),m=0,_=s.widgets;m<_.length;++m){var C=_[m],P=A("div",[C.node],"CodeMirror-linewidget"+(C.className?" "+C.className:""));C.handleMouseEvents||P.setAttribute("cm-ignore-events","true"),za(C,P,c,u),i.display.input.setUneditable(P),p&&C.above?v.insertBefore(P,c.gutter||c.text):v.appendChild(P),yr(C,"redraw")}}function za(i,s,c,u){if(i.noHScroll){(c.alignable||(c.alignable=[])).push(s);var p=u.wrapperWidth;s.style.left=u.fixedPos+"px",i.coverGutter||(p-=u.gutterTotalWidth,s.style.paddingLeft=u.gutterTotalWidth+"px"),s.style.width=p+"px"}i.coverGutter&&(s.style.zIndex=5,s.style.position="relative",i.noHScroll||(s.style.marginLeft=-u.gutterTotalWidth+"px"))}function Jn(i){if(i.height!=null)return i.height;var s=i.doc.cm;if(!s)return 0;if(!At(document.body,i.node)){var c="position: relative;";i.coverGutter&&(c+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),i.noHScroll&&(c+="width: "+s.display.wrapper.clientWidth+"px;"),et(s.display.measure,A("div",[i.node],null,c))}return i.height=i.node.parentNode.offsetHeight}function Rn(i,s){for(var c=de(s);c!=i.wrapper;c=c.parentNode)if(!c||c.nodeType==1&&c.getAttribute("cm-ignore-events")=="true"||c.parentNode==i.sizer&&c!=i.mover)return!0}function $o(i){return i.lineSpace.offsetTop}function Wa(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function S(i){if(i.cachedPaddingH)return i.cachedPaddingH;var s=et(i.measure,A("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,u={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return!isNaN(u.left)&&!isNaN(u.right)&&(i.cachedPaddingH=u),u}function I(i){return ie-i.display.nativeBarWidth}function it(i){return i.display.scroller.clientWidth-I(i)-i.display.barWidth}function ut(i){return i.display.scroller.clientHeight-I(i)-i.display.barHeight}function Ot(i,s,c){var u=i.options.lineWrapping,p=u&&it(i);if(!s.measure.heights||u&&s.measure.width!=p){var v=s.measure.heights=[];if(u){s.measure.width=p;for(var m=s.text.firstChild.getClientRects(),_=0;_<m.length-1;_++){var C=m[_],P=m[_+1];Math.abs(C.bottom-P.bottom)>2&&v.push((C.bottom+P.top)/2-c.top)}}v.push(c.bottom-c.top)}}function _t(i,s,c){if(i.line==s)return{map:i.measure.map,cache:i.measure.cache};if(i.rest){for(var u=0;u<i.rest.length;u++)if(i.rest[u]==s)return{map:i.measure.maps[u],cache:i.measure.caches[u]};for(var p=0;p<i.rest.length;p++)if(qe(i.rest[p])>c)return{map:i.measure.maps[p],cache:i.measure.caches[p],before:!0}}}function Bt(i,s){s=Pn(s);var c=qe(s),u=i.display.externalMeasured=new Na(i.doc,s,c);u.lineN=c;var p=u.built=Oi(i,u);return u.text=p.pre,et(i.display.lineMeasure,p.pre),u}function ce(i,s,c,u){return lr(i,Ie(i,s),c,u)}function We(i,s){if(s>=i.display.viewFrom&&s<i.display.viewTo)return i.display.view[_o(i,s)];var c=i.display.externalMeasured;if(c&&s>=c.lineN&&s<c.lineN+c.size)return c}function Ie(i,s){var c=qe(s),u=We(i,c);u&&!u.text?u=null:u&&u.changes&&(Ha(i,u,c,ca(i)),i.curOp.forceUpdate=!0),u||(u=Bt(i,s));var p=_t(u,s,c);return{line:s,view:u,rect:null,map:p.map,cache:p.cache,before:p.before,hasHeights:!1}}function lr(i,s,c,u,p){s.before&&(c=-1);var v=c+(u||""),m;return s.cache.hasOwnProperty(v)?m=s.cache[v]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(Ot(i,s.view,s.rect),s.hasHeights=!0),m=Af(i,s,c,u),m.bogus||(s.cache[v]=m)),{left:m.left,right:m.right,top:p?m.rtop:m.top,bottom:p?m.rbottom:m.bottom}}var Fr={left:0,right:0,top:0,bottom:0};function Ka(i,s,c){for(var u,p,v,m,_,C,P=0;P<i.length;P+=3)if(_=i[P],C=i[P+1],s<_?(p=0,v=1,m="left"):s<C?(p=s-_,v=p+1):(P==i.length-3||s==C&&i[P+3]>s)&&(v=C-_,p=v-1,s>=C&&(m="right")),p!=null){if(u=i[P+2],_==C&&c==(u.insertLeft?"left":"right")&&(m=c),c=="left"&&p==0)for(;P&&i[P-2]==i[P-3]&&i[P-1].insertLeft;)u=i[(P-=3)+2],m="left";if(c=="right"&&p==C-_)for(;P<i.length-3&&i[P+3]==i[P+4]&&!i[P+5].insertLeft;)u=i[(P+=3)+2],m="right";break}return{node:u,start:p,end:v,collapse:m,coverStart:_,coverEnd:C}}function Ks(i,s){var c=Fr;if(s=="left")for(var u=0;u<i.length&&(c=i[u]).left==c.right;u++);else for(var p=i.length-1;p>=0&&(c=i[p]).left==c.right;p--);return c}function Af(i,s,c,u){var p=Ka(s.map,c,u),v=p.node,m=p.start,_=p.end,C=p.collapse,P;if(v.nodeType==3){for(var q=0;q<4;q++){for(;m&&He(s.line.text.charAt(p.coverStart+m));)--m;for(;p.coverStart+_<p.coverEnd&&He(s.line.text.charAt(p.coverStart+_));)++_;if(M&&N<9&&m==0&&_==p.coverEnd-p.coverStart?P=v.parentNode.getBoundingClientRect():P=Ks(E(v,m,_).getClientRects(),u),P.left||P.right||m==0)break;_=m,m=m-1,C="right"}M&&N<11&&(P=Gs(i.display.measure,P))}else{m>0&&(C=u="right");var at;i.options.lineWrapping&&(at=v.getClientRects()).length>1?P=at[u=="right"?at.length-1:0]:P=v.getBoundingClientRect()}if(M&&N<9&&!m&&(!P||!P.left&&!P.right)){var bt=v.parentNode.getClientRects()[0];bt?P={left:bt.left,right:bt.left+ua(i.display),top:bt.top,bottom:bt.bottom}:P=Fr}for(var gt=P.top-s.rect.top,It=P.bottom-s.rect.top,Ut=(gt+It)/2,Qt=s.view.measure.heights,se=0;se<Qt.length-1&&!(Ut<Qt[se]);se++);var ye=se?Qt[se-1]:0,le=Qt[se],we={left:(C=="right"?P.right:P.left)-s.rect.left,right:(C=="left"?P.left:P.right)-s.rect.left,top:ye,bottom:le};return!P.left&&!P.right&&(we.bogus=!0),i.options.singleCursorHeightPerLine||(we.rtop=gt,we.rbottom=It),we}function Gs(i,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!mr(i))return s;var c=screen.logicalXDPI/screen.deviceXDPI,u=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*c,right:s.right*c,top:s.top*u,bottom:s.bottom*u}}function $s(i){if(i.measure&&(i.measure.cache={},i.measure.heights=null,i.rest))for(var s=0;s<i.rest.length;s++)i.measure.caches[s]={}}function Bu(i){i.display.externalMeasure=null,z(i.display.lineMeasure);for(var s=0;s<i.display.view.length;s++)$s(i.display.view[s])}function sa(i){Bu(i),i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null,i.options.lineWrapping||(i.display.maxLineChanged=!0),i.display.lineNumChars=null}function Uu(i){return L&&jt?-(i.body.getBoundingClientRect().left-parseInt(getComputedStyle(i.body).marginLeft)):i.defaultView.pageXOffset||(i.documentElement||i.body).scrollLeft}function Ga(i){return L&&jt?-(i.body.getBoundingClientRect().top-parseInt(getComputedStyle(i.body).marginTop)):i.defaultView.pageYOffset||(i.documentElement||i.body).scrollTop}function Ml(i){var s=Pn(i),c=s.widgets,u=0;if(c)for(var p=0;p<c.length;++p)c[p].above&&(u+=Jn(c[p]));return u}function qs(i,s,c,u,p){if(!p){var v=Ml(s);c.top+=v,c.bottom+=v}if(u=="line")return c;u||(u="local");var m=Ar(s);if(u=="local"?m+=$o(i.display):m-=i.display.viewOffset,u=="page"||u=="window"){var _=i.display.lineSpace.getBoundingClientRect();m+=_.top+(u=="window"?0:Ga(oe(i)));var C=_.left+(u=="window"?0:Uu(oe(i)));c.left+=C,c.right+=C}return c.top+=m,c.bottom+=m,c}function zu(i,s,c){if(c=="div")return s;var u=s.left,p=s.top;if(c=="page")u-=Uu(oe(i)),p-=Ga(oe(i));else if(c=="local"||!c){var v=i.display.sizer.getBoundingClientRect();u+=v.left,p+=v.top}var m=i.display.lineSpace.getBoundingClientRect();return{left:u-m.left,top:p-m.top}}function Mi(i,s,c,u,p){return u||(u=Ce(i.doc,s.line)),qs(i,u,ce(i,u,s.ch,p),c)}function Nn(i,s,c,u,p,v){u=u||Ce(i.doc,s.line),p||(p=Ie(i,u));function m(It,Ut){var Qt=lr(i,p,It,Ut?"right":"left",v);return Ut?Qt.left=Qt.right:Qt.right=Qt.left,qs(i,u,Qt,c)}var _=Ee(u,i.doc.direction),C=s.ch,P=s.sticky;if(C>=u.text.length?(C=u.text.length,P="before"):C<=0&&(C=0,P="after"),!_)return m(P=="before"?C-1:C,P=="before");function q(It,Ut,Qt){var se=_[Ut],ye=se.level==1;return m(Qt?It-1:It,ye!=Qt)}var at=Te(_,C,P),bt=Vt,gt=q(C,at,P=="before");return bt!=null&&(gt.other=q(C,bt,P!="before")),gt}function Wu(i,s){var c=0;s=Se(i.doc,s),i.options.lineWrapping||(c=ua(i.display)*s.ch);var u=Ce(i.doc,s.line),p=Ar(u)+$o(i.display);return{left:c,right:c,top:p,bottom:p+u.height}}function Ll(i,s,c,u,p){var v=O(i,s,c);return v.xRel=p,u&&(v.outside=u),v}function Dl(i,s,c){var u=i.doc;if(c+=i.display.viewOffset,c<0)return Ll(u.first,0,null,-1,-1);var p=$n(u,c),v=u.first+u.size-1;if(p>v)return Ll(u.first+u.size-1,Ce(u,v).text.length,null,1,1);s<0&&(s=0);for(var m=Ce(u,p);;){var _=Il(i,m,p,s,c),C=jn(m,_.ch+(_.xRel>0||_.outside>0?1:0));if(!C)return _;var P=C.find(1);if(P.line==p)return P;m=Ce(u,p=P.line)}}function $a(i,s,c,u){u-=Ml(s);var p=s.text.length,v=ee(function(m){return lr(i,c,m-1).bottom<=u},p,0);return p=ee(function(m){return lr(i,c,m).top>u},v,p),{begin:v,end:p}}function Ys(i,s,c,u){c||(c=Ie(i,s));var p=qs(i,s,lr(i,c,u),"line").top;return $a(i,s,c,p)}function jl(i,s,c,u){return i.bottom<=c?!1:i.top>c?!0:(u?i.left:i.right)>s}function Il(i,s,c,u,p){p-=Ar(s);var v=Ie(i,s),m=Ml(s),_=0,C=s.text.length,P=!0,q=Ee(s,i.doc.direction);if(q){var at=(i.options.lineWrapping?Xs:kf)(i,s,c,v,q,u,p);P=at.level!=1,_=P?at.from:at.to-1,C=P?at.to:at.from-1}var bt=null,gt=null,It=ee(function(Le){var ke=lr(i,v,Le);return ke.top+=m,ke.bottom+=m,jl(ke,u,p,!1)?(ke.top<=p&&ke.left<=u&&(bt=Le,gt=ke),!0):!1},_,C),Ut,Qt,se=!1;if(gt){var ye=u-gt.left<gt.right-u,le=ye==P;It=bt+(le?0:1),Qt=le?"after":"before",Ut=ye?gt.left:gt.right}else{!P&&(It==C||It==_)&&It++,Qt=It==0?"after":It==s.text.length?"before":lr(i,v,It-(P?1:0)).bottom+m<=p==P?"after":"before";var we=Nn(i,O(c,It,Qt),"line",s,v);Ut=we.left,se=p<we.top?-1:p>=we.bottom?1:0}return It=De(s.text,It,1),Ll(c,It,Qt,se,u-Ut)}function kf(i,s,c,u,p,v,m){var _=ee(function(at){var bt=p[at],gt=bt.level!=1;return jl(Nn(i,O(c,gt?bt.to:bt.from,gt?"before":"after"),"line",s,u),v,m,!0)},0,p.length-1),C=p[_];if(_>0){var P=C.level!=1,q=Nn(i,O(c,P?C.from:C.to,P?"after":"before"),"line",s,u);jl(q,v,m,!0)&&q.top>m&&(C=p[_-1])}return C}function Xs(i,s,c,u,p,v,m){var _=$a(i,s,u,m),C=_.begin,P=_.end;/\s/.test(s.text.charAt(P-1))&&P--;for(var q=null,at=null,bt=0;bt<p.length;bt++){var gt=p[bt];if(!(gt.from>=P||gt.to<=C)){var It=gt.level!=1,Ut=lr(i,u,It?Math.min(P,gt.to)-1:Math.max(C,gt.from)).right,Qt=Ut<v?v-Ut+1e9:Ut-v;(!q||at>Qt)&&(q=gt,at=Qt)}}return q||(q=p[p.length-1]),q.from<C&&(q={from:C,to:q.to,level:q.level}),q.to>P&&(q={from:q.from,to:P,level:q.level}),q}var Li;function la(i){if(i.cachedTextHeight!=null)return i.cachedTextHeight;if(Li==null){Li=A("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)Li.appendChild(document.createTextNode("x")),Li.appendChild(A("br"));Li.appendChild(document.createTextNode("x"))}et(i.measure,Li);var c=Li.offsetHeight/50;return c>3&&(i.cachedTextHeight=c),z(i.measure),c||1}function ua(i){if(i.cachedCharWidth!=null)return i.cachedCharWidth;var s=A("span","xxxxxxxxxx"),c=A("pre",[s],"CodeMirror-line-like");et(i.measure,c);var u=s.getBoundingClientRect(),p=(u.right-u.left)/10;return p>2&&(i.cachedCharWidth=p),p||10}function ca(i){for(var s=i.display,c={},u={},p=s.gutters.clientLeft,v=s.gutters.firstChild,m=0;v;v=v.nextSibling,++m){var _=i.display.gutterSpecs[m].className;c[_]=v.offsetLeft+v.clientLeft+p,u[_]=v.clientWidth}return{fixedPos:qa(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:c,gutterWidth:u,wrapperWidth:s.wrapper.clientWidth}}function qa(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function Ku(i){var s=la(i.display),c=i.options.lineWrapping,u=c&&Math.max(5,i.display.scroller.clientWidth/ua(i.display)-3);return function(p){if(In(i.doc,p))return 0;var v=0;if(p.widgets)for(var m=0;m<p.widgets.length;m++)p.widgets[m].height&&(v+=p.widgets[m].height);return c?v+(Math.ceil(p.text.length/u)||1)*s:v+s}}function Vl(i){var s=i.doc,c=Ku(i);s.iter(function(u){var p=c(u);p!=u.height&&vn(u,p)})}function Di(i,s,c,u){var p=i.display;if(!c&&de(s).getAttribute("cm-not-content")=="true")return null;var v,m,_=p.lineSpace.getBoundingClientRect();try{v=s.clientX-_.left,m=s.clientY-_.top}catch{return null}var C=Dl(i,v,m),P;if(u&&C.xRel>0&&(P=Ce(i.doc,C.line).text).length==C.ch){var q=Ct(P,P.length,i.options.tabSize)-P.length;C=O(C.line,Math.max(0,Math.round((v-S(i.display).left)/ua(i.display))-q))}return C}function _o(i,s){if(s>=i.display.viewTo||(s-=i.display.viewFrom,s<0))return null;for(var c=i.display.view,u=0;u<c.length;u++)if(s-=c[u].size,s<0)return u}function rn(i,s,c,u){s==null&&(s=i.doc.first),c==null&&(c=i.doc.first+i.doc.size),u||(u=0);var p=i.display;if(u&&c<p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>s)&&(p.updateLineNumbers=s),i.curOp.viewChanged=!0,s>=p.viewTo)mn&&Zn(i.doc,s)<p.viewTo&&Yo(i);else if(c<=p.viewFrom)mn&&Ia(i.doc,c+u)>p.viewFrom?Yo(i):(p.viewFrom+=u,p.viewTo+=u);else if(s<=p.viewFrom&&c>=p.viewTo)Yo(i);else if(s<=p.viewFrom){var v=Zs(i,c,c+u,1);v?(p.view=p.view.slice(v.index),p.viewFrom=v.lineN,p.viewTo+=u):Yo(i)}else if(c>=p.viewTo){var m=Zs(i,s,s,-1);m?(p.view=p.view.slice(0,m.index),p.viewTo=m.lineN):Yo(i)}else{var _=Zs(i,s,s,-1),C=Zs(i,c,c+u,1);_&&C?(p.view=p.view.slice(0,_.index).concat(Pi(i,_.lineN,C.lineN)).concat(p.view.slice(C.index)),p.viewTo+=u):Yo(i)}var P=p.externalMeasured;P&&(c<P.lineN?P.lineN+=u:s<P.lineN+P.size&&(p.externalMeasured=null))}function qo(i,s,c){i.curOp.viewChanged=!0;var u=i.display,p=i.display.externalMeasured;if(p&&s>=p.lineN&&s<p.lineN+p.size&&(u.externalMeasured=null),!(s<u.viewFrom||s>=u.viewTo)){var v=u.view[_o(i,s)];if(v.node!=null){var m=v.changes||(v.changes=[]);zt(m,c)==-1&&m.push(c)}}}function Yo(i){i.display.viewFrom=i.display.viewTo=i.doc.first,i.display.view=[],i.display.viewOffset=0}function Zs(i,s,c,u){var p=_o(i,s),v,m=i.display.view;if(!mn||c==i.doc.first+i.doc.size)return{index:p,lineN:c};for(var _=i.display.viewFrom,C=0;C<p;C++)_+=m[C].size;if(_!=s){if(u>0){if(p==m.length-1)return null;v=_+m[p].size-s,p++}else v=_-s;s+=v,c+=v}for(;Zn(i.doc,c)!=c;){if(p==(u<0?0:m.length-1))return null;c+=u*m[p-(u<0?1:0)].size,p+=u}return{index:p,lineN:c}}function Js(i,s,c){var u=i.display,p=u.view;p.length==0||s>=u.viewTo||c<=u.viewFrom?(u.view=Pi(i,s,c),u.viewFrom=s):(u.viewFrom>s?u.view=Pi(i,s,u.viewFrom).concat(u.view):u.viewFrom<s&&(u.view=u.view.slice(_o(i,s))),u.viewFrom=s,u.viewTo<c?u.view=u.view.concat(Pi(i,u.viewTo,c)):u.viewTo>c&&(u.view=u.view.slice(0,_o(i,c)))),u.viewTo=c}function Rl(i){for(var s=i.display.view,c=0,u=0;u<s.length;u++){var p=s[u];!p.hidden&&(!p.node||p.changes)&&++c}return c}function Ya(i){i.display.input.showSelection(i.display.input.prepareSelection())}function Gu(i,s){s===void 0&&(s=!0);var c=i.doc,u={},p=u.cursors=document.createDocumentFragment(),v=u.selection=document.createDocumentFragment(),m=i.options.$customCursor;m&&(s=!0);for(var _=0;_<c.sel.ranges.length;_++)if(!(!s&&_==c.sel.primIndex)){var C=c.sel.ranges[_];if(!(C.from().line>=i.display.viewTo||C.to().line<i.display.viewFrom)){var P=C.empty();if(m){var q=m(i,C);q&&Nl(i,q,p)}else(P||i.options.showCursorWhenSelecting)&&Nl(i,C.head,p);P||Fl(i,C,v)}}return u}function Nl(i,s,c){var u=Nn(i,s,"div",null,null,!i.options.singleCursorHeightPerLine),p=c.appendChild(A("div"," ","CodeMirror-cursor"));if(p.style.left=u.left+"px",p.style.top=u.top+"px",p.style.height=Math.max(0,u.bottom-u.top)*i.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(i.getWrapperElement().className)){var v=Mi(i,s,"div",null,null),m=v.right-v.left;p.style.width=(m>0?m:i.defaultCharWidth())+"px"}if(u.other){var _=c.appendChild(A("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));_.style.display="",_.style.left=u.other.left+"px",_.style.top=u.other.top+"px",_.style.height=(u.other.bottom-u.other.top)*.85+"px"}}function ji(i,s){return i.top-s.top||i.left-s.left}function Fl(i,s,c){var u=i.display,p=i.doc,v=document.createDocumentFragment(),m=S(i.display),_=m.left,C=Math.max(u.sizerWidth,it(i)-u.sizer.offsetLeft)-m.right,P=p.direction=="ltr";function q(le,we,Le,ke){we<0&&(we=0),we=Math.round(we),ke=Math.round(ke),v.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+le+`px;
                             top: `+we+"px; width: "+(Le??C-le)+`px;
                             height: `+(ke-we)+"px"))}function at(le,we,Le){var ke=Ce(p,le),Xe=ke.text.length,dr,zr;function wr(jr,dn){return Mi(i,O(le,jr),"div",ke,dn)}function kn(jr,dn,Wr){var Ir=Ys(i,ke,null,jr),Mr=dn=="ltr"==(Wr=="after")?"left":"right",Cr=Wr=="after"?Ir.begin:Ir.end-(/\s/.test(ke.text.charAt(Ir.end-1))?2:1);return wr(Cr,Mr)[Mr]}var wn=Ee(ke,p.direction);return Jt(wn,we||0,Le??Xe,function(jr,dn,Wr,Ir){var Mr=Wr=="ltr",Cr=wr(jr,Mr?"left":"right"),bn=wr(dn-1,Mr?"right":"left"),xa=we==null&&jr==0,si=Le==null&&dn==Xe,an=Ir==0,bo=!wn||Ir==wn.length-1;if(bn.top-Cr.top<=3){var Kr=(P?xa:si)&&an,bu=(P?si:xa)&&bo,Do=Kr?_:(Mr?Cr:bn).left,jo=bu?C:(Mr?bn:Cr).right;q(Do,Cr.top,jo-Do,Cr.bottom)}else{var Wi,hn,Sa,Cu;Mr?(Wi=P&&xa&&an?_:Cr.left,hn=P?C:kn(jr,Wr,"before"),Sa=P?_:kn(dn,Wr,"after"),Cu=P&&si&&bo?C:bn.right):(Wi=P?kn(jr,Wr,"before"):_,hn=!P&&xa&&an?C:Cr.right,Sa=!P&&si&&bo?_:bn.left,Cu=P?kn(dn,Wr,"after"):C),q(Wi,Cr.top,hn-Wi,Cr.bottom),Cr.bottom<bn.top&&q(_,Cr.bottom,null,bn.top),q(Sa,bn.top,Cu-Sa,bn.bottom)}(!dr||ji(Cr,dr)<0)&&(dr=Cr),ji(bn,dr)<0&&(dr=bn),(!zr||ji(Cr,zr)<0)&&(zr=Cr),ji(bn,zr)<0&&(zr=bn)}),{start:dr,end:zr}}var bt=s.from(),gt=s.to();if(bt.line==gt.line)at(bt.line,bt.ch,gt.ch);else{var It=Ce(p,bt.line),Ut=Ce(p,gt.line),Qt=Pn(It)==Pn(Ut),se=at(bt.line,bt.ch,Qt?It.text.length+1:null).end,ye=at(gt.line,Qt?0:null,gt.ch).start;Qt&&(se.top<ye.top-2?(q(se.right,se.top,null,se.bottom),q(_,ye.top,ye.left,ye.bottom)):q(se.right,se.top,ye.left-se.right,se.bottom)),se.bottom<ye.top&&q(_,se.bottom,null,ye.top)}c.appendChild(v)}function Xo(i){if(i.state.focused){var s=i.display;clearInterval(s.blinker);var c=!0;s.cursorDiv.style.visibility="",i.options.cursorBlinkRate>0?s.blinker=setInterval(function(){i.hasFocus()||Jo(i),s.cursorDiv.style.visibility=(c=!c)?"":"hidden"},i.options.cursorBlinkRate):i.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function Ii(i){i.hasFocus()||(i.display.input.focus(),i.state.focused||Qs(i))}function Zo(i){i.state.delayingBlurEvent=!0,setTimeout(function(){i.state.delayingBlurEvent&&(i.state.delayingBlurEvent=!1,i.state.focused&&Jo(i))},100)}function Qs(i,s){i.state.delayingBlurEvent&&!i.state.draggingText&&(i.state.delayingBlurEvent=!1),i.options.readOnly!="nocursor"&&(i.state.focused||(nr(i,"focus",i,s),i.state.focused=!0,ct(i.display.wrapper,"CodeMirror-focused"),!i.curOp&&i.display.selForContextMenu!=i.doc.sel&&(i.display.input.reset(),x&&setTimeout(function(){return i.display.input.reset(!0)},20)),i.display.input.receivedFocus()),Xo(i))}function Jo(i,s){i.state.delayingBlurEvent||(i.state.focused&&(nr(i,"blur",i,s),i.state.focused=!1,X(i.display.wrapper,"CodeMirror-focused")),clearInterval(i.display.blinker),setTimeout(function(){i.state.focused||(i.display.shift=!1)},150))}function tl(i){for(var s=i.display,c=s.lineDiv.offsetTop,u=Math.max(0,s.scroller.getBoundingClientRect().top),p=s.lineDiv.getBoundingClientRect().top,v=0,m=0;m<s.view.length;m++){var _=s.view[m],C=i.options.lineWrapping,P=void 0,q=0;if(!_.hidden){if(p+=_.line.height,M&&N<8){var at=_.node.offsetTop+_.node.offsetHeight;P=at-c,c=at}else{var bt=_.node.getBoundingClientRect();P=bt.bottom-bt.top,!C&&_.text.firstChild&&(q=_.text.firstChild.getBoundingClientRect().right-bt.left-1)}var gt=_.line.height-P;if((gt>.005||gt<-.005)&&(p<u&&(v-=gt),vn(_.line,P),$u(_.line),_.rest))for(var It=0;It<_.rest.length;It++)$u(_.rest[It]);if(q>i.display.sizerWidth){var Ut=Math.ceil(q/ua(i.display));Ut>i.display.maxLineLength&&(i.display.maxLineLength=Ut,i.display.maxLine=_.line,i.display.maxLineChanged=!0)}}}Math.abs(v)>2&&(s.scroller.scrollTop+=v)}function $u(i){if(i.widgets)for(var s=0;s<i.widgets.length;++s){var c=i.widgets[s],u=c.node.parentNode;u&&(c.height=u.offsetHeight)}}function el(i,s,c){var u=c&&c.top!=null?Math.max(0,c.top):i.scroller.scrollTop;u=Math.floor(u-$o(i));var p=c&&c.bottom!=null?c.bottom:u+i.wrapper.clientHeight,v=$n(s,u),m=$n(s,p);if(c&&c.ensure){var _=c.ensure.from.line,C=c.ensure.to.line;_<v?(v=_,m=$n(s,Ar(Ce(s,_))+i.wrapper.clientHeight)):Math.min(C,s.lastLine())>=m&&(v=$n(s,Ar(Ce(s,C))-i.wrapper.clientHeight),m=C)}return{from:v,to:Math.max(m,v+1)}}function rl(i,s){if(!Qe(i,"scrollCursorIntoView")){var c=i.display,u=c.sizer.getBoundingClientRect(),p=null,v=c.wrapper.ownerDocument;if(s.top+u.top<0?p=!0:s.bottom+u.top>(v.defaultView.innerHeight||v.documentElement.clientHeight)&&(p=!1),p!=null&&!xt){var m=A("div","​",null,`position: absolute;
                         top: `+(s.top-c.viewOffset-$o(i.display))+`px;
                         height: `+(s.bottom-s.top+I(i)+c.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");i.display.lineSpace.appendChild(m),m.scrollIntoView(p),i.display.lineSpace.removeChild(m)}}}function Mf(i,s,c,u){u==null&&(u=0);var p;!i.options.lineWrapping&&s==c&&(c=s.sticky=="before"?O(s.line,s.ch+1,"before"):s,s=s.ch?O(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var v=0;v<5;v++){var m=!1,_=Nn(i,s),C=!c||c==s?_:Nn(i,c);p={left:Math.min(_.left,C.left),top:Math.min(_.top,C.top)-u,right:Math.max(_.left,C.left),bottom:Math.max(_.bottom,C.bottom)+u};var P=Hl(i,p),q=i.doc.scrollTop,at=i.doc.scrollLeft;if(P.scrollTop!=null&&(Za(i,P.scrollTop),Math.abs(i.doc.scrollTop-q)>1&&(m=!0)),P.scrollLeft!=null&&(Qo(i,P.scrollLeft),Math.abs(i.doc.scrollLeft-at)>1&&(m=!0)),!m)break}return p}function Lf(i,s){var c=Hl(i,s);c.scrollTop!=null&&Za(i,c.scrollTop),c.scrollLeft!=null&&Qo(i,c.scrollLeft)}function Hl(i,s){var c=i.display,u=la(i.display);s.top<0&&(s.top=0);var p=i.curOp&&i.curOp.scrollTop!=null?i.curOp.scrollTop:c.scroller.scrollTop,v=ut(i),m={};s.bottom-s.top>v&&(s.bottom=s.top+v);var _=i.doc.height+Wa(c),C=s.top<u,P=s.bottom>_-u;if(s.top<p)m.scrollTop=C?0:s.top;else if(s.bottom>p+v){var q=Math.min(s.top,(P?_:s.bottom)-v);q!=p&&(m.scrollTop=q)}var at=i.options.fixedGutter?0:c.gutters.offsetWidth,bt=i.curOp&&i.curOp.scrollLeft!=null?i.curOp.scrollLeft:c.scroller.scrollLeft-at,gt=it(i)-c.gutters.offsetWidth,It=s.right-s.left>gt;return It&&(s.right=s.left+gt),s.left<10?m.scrollLeft=0:s.left<bt?m.scrollLeft=Math.max(0,s.left+at-(It?0:10)):s.right>gt+bt-3&&(m.scrollLeft=s.right+(It?0:10)-gt),m}function Bl(i,s){s!=null&&(nl(i),i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+s)}function Vi(i){nl(i);var s=i.getCursor();i.curOp.scrollToPos={from:s,to:s,margin:i.options.cursorScrollMargin}}function Xa(i,s,c){(s!=null||c!=null)&&nl(i),s!=null&&(i.curOp.scrollLeft=s),c!=null&&(i.curOp.scrollTop=c)}function Po(i,s){nl(i),i.curOp.scrollToPos=s}function nl(i){var s=i.curOp.scrollToPos;if(s){i.curOp.scrollToPos=null;var c=Wu(i,s.from),u=Wu(i,s.to);Hr(i,c,u,s.margin)}}function Hr(i,s,c,u){var p=Hl(i,{left:Math.min(s.left,c.left),top:Math.min(s.top,c.top)-u,right:Math.max(s.right,c.right),bottom:Math.max(s.bottom,c.bottom)+u});Xa(i,p.scrollLeft,p.scrollTop)}function Za(i,s){Math.abs(i.doc.scrollTop-s)<2||(rt||zl(i,{top:s}),qu(i,s,!0),rt&&zl(i),es(i,100))}function qu(i,s,c){s=Math.max(0,Math.min(i.display.scroller.scrollHeight-i.display.scroller.clientHeight,s)),!(i.display.scroller.scrollTop==s&&!c)&&(i.doc.scrollTop=s,i.display.scrollbars.setScrollTop(s),i.display.scroller.scrollTop!=s&&(i.display.scroller.scrollTop=s))}function Qo(i,s,c,u){s=Math.max(0,Math.min(s,i.display.scroller.scrollWidth-i.display.scroller.clientWidth)),!((c?s==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-s)<2)&&!u)&&(i.doc.scrollLeft=s,ec(i),i.display.scroller.scrollLeft!=s&&(i.display.scroller.scrollLeft=s),i.display.scrollbars.setScrollLeft(s))}function Ja(i){var s=i.display,c=s.gutters.offsetWidth,u=Math.round(i.doc.height+Wa(i.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:i.options.fixedGutter?c:0,docHeight:u,scrollHeight:u+I(i)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:c}}var Ri=function(i,s,c){this.cm=c;var u=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");u.tabIndex=p.tabIndex=-1,i(u),i(p),ge(u,"scroll",function(){u.clientHeight&&s(u.scrollTop,"vertical")}),ge(p,"scroll",function(){p.clientWidth&&s(p.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,M&&N<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ri.prototype.update=function(i){var s=i.scrollWidth>i.clientWidth+1,c=i.scrollHeight>i.clientHeight+1,u=i.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=s?u+"px":"0";var p=i.viewHeight-(s?u:0);this.vert.firstChild.style.height=Math.max(0,i.scrollHeight-i.clientHeight+p)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=c?u+"px":"0",this.horiz.style.left=i.barLeft+"px";var v=i.viewWidth-i.barLeft-(c?u:0);this.horiz.firstChild.style.width=Math.max(0,i.scrollWidth-i.clientWidth+v)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&i.clientHeight>0&&(u==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?u:0,bottom:s?u:0}},Ri.prototype.setScrollLeft=function(i){this.horiz.scrollLeft!=i&&(this.horiz.scrollLeft=i),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ri.prototype.setScrollTop=function(i){this.vert.scrollTop!=i&&(this.vert.scrollTop=i),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ri.prototype.zeroWidthHack=function(){var i=yt&&!pt?"12px":"18px";this.horiz.style.height=this.vert.style.width=i,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Rt,this.disableVert=new Rt},Ri.prototype.enableZeroWidthBar=function(i,s,c){i.style.visibility="";function u(){var p=i.getBoundingClientRect(),v=c=="vert"?document.elementFromPoint(p.right-1,(p.top+p.bottom)/2):document.elementFromPoint((p.right+p.left)/2,p.bottom-1);v!=i?i.style.visibility="hidden":s.set(1e3,u)}s.set(1e3,u)},Ri.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz),i.removeChild(this.vert)};var Qa=function(){};Qa.prototype.update=function(){return{bottom:0,right:0}},Qa.prototype.setScrollLeft=function(){},Qa.prototype.setScrollTop=function(){},Qa.prototype.clear=function(){};function fa(i,s){s||(s=Ja(i));var c=i.display.barWidth,u=i.display.barHeight;Yu(i,s);for(var p=0;p<4&&c!=i.display.barWidth||u!=i.display.barHeight;p++)c!=i.display.barWidth&&i.options.lineWrapping&&tl(i),Yu(i,Ja(i)),c=i.display.barWidth,u=i.display.barHeight}function Yu(i,s){var c=i.display,u=c.scrollbars.update(s);c.sizer.style.paddingRight=(c.barWidth=u.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=u.bottom)+"px",c.heightForcer.style.borderBottom=u.bottom+"px solid transparent",u.right&&u.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=u.bottom+"px",c.scrollbarFiller.style.width=u.right+"px"):c.scrollbarFiller.style.display="",u.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=u.bottom+"px",c.gutterFiller.style.width=s.gutterWidth+"px"):c.gutterFiller.style.display=""}var Xu={native:Ri,null:Qa};function Zu(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass&&X(i.display.wrapper,i.display.scrollbars.addClass)),i.display.scrollbars=new Xu[i.options.scrollbarStyle](function(s){i.display.wrapper.insertBefore(s,i.display.scrollbarFiller),ge(s,"mousedown",function(){i.state.focused&&setTimeout(function(){return i.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,c){c=="horizontal"?Qo(i,s):Za(i,s)},i),i.display.scrollbars.addClass&&ct(i.display.wrapper,i.display.scrollbars.addClass)}var Df=0;function Ao(i){i.curOp={cm:i,viewChanged:!1,startHeight:i.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Df,markArrays:null},oa(i.curOp)}function Ni(i){var s=i.curOp;s&&Go(s,function(c){for(var u=0;u<c.ops.length;u++)c.ops[u].cm.curOp=null;ts(c)})}function ts(i){for(var s=i.ops,c=0;c<s.length;c++)ol(s[c]);for(var u=0;u<s.length;u++)il(s[u]);for(var p=0;p<s.length;p++)jf(s[p]);for(var v=0;v<s.length;v++)Ju(s[v]);for(var m=0;m<s.length;m++)If(s[m])}function ol(i){var s=i.cm,c=s.display;Rf(s),i.updateMaxLine&&zo(s),i.mustUpdate=i.viewChanged||i.forceUpdate||i.scrollTop!=null||i.scrollToPos&&(i.scrollToPos.from.line<c.viewFrom||i.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&s.options.lineWrapping,i.update=i.mustUpdate&&new al(s,i.mustUpdate&&{top:i.scrollTop,ensure:i.scrollToPos},i.forceUpdate)}function il(i){i.updatedDisplay=i.mustUpdate&&Ul(i.cm,i.update)}function jf(i){var s=i.cm,c=s.display;i.updatedDisplay&&tl(s),i.barMeasure=Ja(s),c.maxLineChanged&&!s.options.lineWrapping&&(i.adjustWidthTo=ce(s,c.maxLine,c.maxLine.text.length).left+3,s.display.sizerWidth=i.adjustWidthTo,i.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+i.adjustWidthTo+I(s)+s.display.barWidth),i.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+i.adjustWidthTo-it(s))),(i.updatedDisplay||i.selectionChanged)&&(i.preparedSelection=c.input.prepareSelection())}function Ju(i){var s=i.cm;i.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=i.adjustWidthTo+"px",i.maxScrollLeft<s.doc.scrollLeft&&Qo(s,Math.min(s.display.scroller.scrollLeft,i.maxScrollLeft),!0),s.display.maxLineChanged=!1);var c=i.focus&&i.focus==Pt(oe(s));i.preparedSelection&&s.display.input.showSelection(i.preparedSelection,c),(i.updatedDisplay||i.startHeight!=s.doc.height)&&fa(s,i.barMeasure),i.updatedDisplay&&Kl(s,i.barMeasure),i.selectionChanged&&Xo(s),s.state.focused&&i.updateInput&&s.display.input.reset(i.typing),c&&Ii(i.cm)}function If(i){var s=i.cm,c=s.display,u=s.doc;if(i.updatedDisplay&&Qu(s,i.update),c.wheelStartX!=null&&(i.scrollTop!=null||i.scrollLeft!=null||i.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),i.scrollTop!=null&&qu(s,i.scrollTop,i.forceScroll),i.scrollLeft!=null&&Qo(s,i.scrollLeft,!0,!0),i.scrollToPos){var p=Mf(s,Se(u,i.scrollToPos.from),Se(u,i.scrollToPos.to),i.scrollToPos.margin);rl(s,p)}var v=i.maybeHiddenMarkers,m=i.maybeUnhiddenMarkers;if(v)for(var _=0;_<v.length;++_)v[_].lines.length||nr(v[_],"hide");if(m)for(var C=0;C<m.length;++C)m[C].lines.length&&nr(m[C],"unhide");c.wrapper.offsetHeight&&(u.scrollTop=s.display.scroller.scrollTop),i.changeObjs&&nr(s,"changes",s,i.changeObjs),i.update&&i.update.finish()}function An(i,s){if(i.curOp)return s();Ao(i);try{return s()}finally{Ni(i)}}function Br(i,s){return function(){if(i.curOp)return s.apply(i,arguments);Ao(i);try{return s.apply(i,arguments)}finally{Ni(i)}}}function fn(i){return function(){if(this.curOp)return i.apply(this,arguments);Ao(this);try{return i.apply(this,arguments)}finally{Ni(this)}}}function Ur(i){return function(){var s=this.cm;if(!s||s.curOp)return i.apply(this,arguments);Ao(s);try{return i.apply(this,arguments)}finally{Ni(s)}}}function es(i,s){i.doc.highlightFrontier<i.display.viewTo&&i.state.highlight.set(s,_e(Vf,i))}function Vf(i){var s=i.doc;if(!(s.highlightFrontier>=i.display.viewTo)){var c=+new Date+i.options.workTime,u=No(i,s.highlightFrontier),p=[];s.iter(u.line,Math.min(s.first+s.size,i.display.viewTo+500),function(v){if(u.line>=i.display.viewFrom){var m=v.styles,_=v.text.length>i.options.maxHighlightLength?Sn(s.mode,u.state):null,C=gi(i,v,u,!0);_&&(u.state=_),v.styles=C.styles;var P=v.styleClasses,q=C.classes;q?v.styleClasses=q:P&&(v.styleClasses=null);for(var at=!m||m.length!=v.styles.length||P!=q&&(!P||!q||P.bgClass!=q.bgClass||P.textClass!=q.textClass),bt=0;!at&&bt<m.length;++bt)at=m[bt]!=v.styles[bt];at&&p.push(u.line),v.stateAfter=u.save(),u.nextLine()}else v.text.length<=i.options.maxHighlightLength&&Qi(i,v.text,u),v.stateAfter=u.line%5==0?u.save():null,u.nextLine();if(+new Date>c)return es(i,i.options.workDelay),!0}),s.highlightFrontier=u.line,s.modeFrontier=Math.max(s.modeFrontier,u.line),p.length&&An(i,function(){for(var v=0;v<p.length;v++)qo(i,p[v],"text")})}}var al=function(i,s,c){var u=i.display;this.viewport=s,this.visible=el(u,i.doc,s),this.editorIsHidden=!u.wrapper.offsetWidth,this.wrapperHeight=u.wrapper.clientHeight,this.wrapperWidth=u.wrapper.clientWidth,this.oldDisplayWidth=it(i),this.force=c,this.dims=ca(i),this.events=[]};al.prototype.signal=function(i,s){Or(i,s)&&this.events.push(arguments)},al.prototype.finish=function(){for(var i=0;i<this.events.length;i++)nr.apply(null,this.events[i])};function Rf(i){var s=i.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=I(i)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=I(i)+"px",s.scrollbarsClipped=!0)}function Nf(i){if(i.hasFocus())return null;var s=Pt(oe(i));if(!s||!At(i.display.lineDiv,s))return null;var c={activeElt:s};if(window.getSelection){var u=Pe(i).getSelection();u.anchorNode&&u.extend&&At(i.display.lineDiv,u.anchorNode)&&(c.anchorNode=u.anchorNode,c.anchorOffset=u.anchorOffset,c.focusNode=u.focusNode,c.focusOffset=u.focusOffset)}return c}function Ff(i){if(!(!i||!i.activeElt||i.activeElt==Pt(i.activeElt.ownerDocument))&&(i.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(i.activeElt.nodeName)&&i.anchorNode&&At(document.body,i.anchorNode)&&At(document.body,i.focusNode))){var s=i.activeElt.ownerDocument,c=s.defaultView.getSelection(),u=s.createRange();u.setEnd(i.anchorNode,i.anchorOffset),u.collapse(!1),c.removeAllRanges(),c.addRange(u),c.extend(i.focusNode,i.focusOffset)}}function Ul(i,s){var c=i.display,u=i.doc;if(s.editorIsHidden)return Yo(i),!1;if(!s.force&&s.visible.from>=c.viewFrom&&s.visible.to<=c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&Rl(i)==0)return!1;rc(i)&&(Yo(i),s.dims=ca(i));var p=u.first+u.size,v=Math.max(s.visible.from-i.options.viewportMargin,u.first),m=Math.min(p,s.visible.to+i.options.viewportMargin);c.viewFrom<v&&v-c.viewFrom<20&&(v=Math.max(u.first,c.viewFrom)),c.viewTo>m&&c.viewTo-m<20&&(m=Math.min(p,c.viewTo)),mn&&(v=Zn(i.doc,v),m=Ia(i.doc,m));var _=v!=c.viewFrom||m!=c.viewTo||c.lastWrapHeight!=s.wrapperHeight||c.lastWrapWidth!=s.wrapperWidth;Js(i,v,m),c.viewOffset=Ar(Ce(i.doc,c.viewFrom)),i.display.mover.style.top=c.viewOffset+"px";var C=Rl(i);if(!_&&C==0&&!s.force&&c.renderedView==c.view&&(c.updateLineNumbers==null||c.updateLineNumbers>=c.viewTo))return!1;var P=Nf(i);return C>4&&(c.lineDiv.style.display="none"),tc(i,c.updateLineNumbers,s.dims),C>4&&(c.lineDiv.style.display=""),c.renderedView=c.view,Ff(P),z(c.cursorDiv),z(c.selectionDiv),c.gutters.style.height=c.sizer.style.minHeight=0,_&&(c.lastWrapHeight=s.wrapperHeight,c.lastWrapWidth=s.wrapperWidth,es(i,400)),c.updateLineNumbers=null,!0}function Qu(i,s){for(var c=s.viewport,u=!0;;u=!1){if(!u||!i.options.lineWrapping||s.oldDisplayWidth==it(i)){if(c&&c.top!=null&&(c={top:Math.min(i.doc.height+Wa(i.display)-ut(i),c.top)}),s.visible=el(i.display,i.doc,c),s.visible.from>=i.display.viewFrom&&s.visible.to<=i.display.viewTo)break}else u&&(s.visible=el(i.display,i.doc,c));if(!Ul(i,s))break;tl(i);var p=Ja(i);Ya(i),fa(i,p),Kl(i,p),s.force=!1}s.signal(i,"update",i),(i.display.viewFrom!=i.display.reportedViewFrom||i.display.viewTo!=i.display.reportedViewTo)&&(s.signal(i,"viewportChange",i,i.display.viewFrom,i.display.viewTo),i.display.reportedViewFrom=i.display.viewFrom,i.display.reportedViewTo=i.display.viewTo)}function zl(i,s){var c=new al(i,s);if(Ul(i,c)){tl(i),Qu(i,c);var u=Ja(i);Ya(i),fa(i,u),Kl(i,u),c.finish()}}function tc(i,s,c){var u=i.display,p=i.options.lineNumbers,v=u.lineDiv,m=v.firstChild;function _(It){var Ut=It.nextSibling;return x&&yt&&i.display.currentWheelTarget==It?It.style.display="none":It.parentNode.removeChild(It),Ut}for(var C=u.view,P=u.viewFrom,q=0;q<C.length;q++){var at=C[q];if(!at.hidden)if(!at.node||at.node.parentNode!=v){var bt=Ai(i,at,P,c);v.insertBefore(bt,m)}else{for(;m!=at.node;)m=_(m);var gt=p&&s!=null&&s<=P&&at.lineNumber;at.changes&&(zt(at.changes,"gutter")>-1&&(gt=!1),Ha(i,at,P,c)),gt&&(z(at.lineNumber),at.lineNumber.appendChild(document.createTextNode(io(i.options,P)))),m=at.node.nextSibling}P+=at.size}for(;m;)m=_(m)}function Wl(i){var s=i.gutters.offsetWidth;i.sizer.style.marginLeft=s+"px",yr(i,"gutterChanged",i)}function Kl(i,s){i.display.sizer.style.minHeight=s.docHeight+"px",i.display.heightForcer.style.top=s.docHeight+"px",i.display.gutters.style.height=s.docHeight+i.display.barHeight+I(i)+"px"}function ec(i){var s=i.display,c=s.view;if(!(!s.alignWidgets&&(!s.gutters.firstChild||!i.options.fixedGutter))){for(var u=qa(s)-s.scroller.scrollLeft+i.doc.scrollLeft,p=s.gutters.offsetWidth,v=u+"px",m=0;m<c.length;m++)if(!c[m].hidden){i.options.fixedGutter&&(c[m].gutter&&(c[m].gutter.style.left=v),c[m].gutterBackground&&(c[m].gutterBackground.style.left=v));var _=c[m].alignable;if(_)for(var C=0;C<_.length;C++)_[C].style.left=v}i.options.fixedGutter&&(s.gutters.style.left=u+p+"px")}}function rc(i){if(!i.options.lineNumbers)return!1;var s=i.doc,c=io(i.options,s.first+s.size-1),u=i.display;if(c.length!=u.lineNumChars){var p=u.measure.appendChild(A("div",[A("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),v=p.firstChild.offsetWidth,m=p.offsetWidth-v;return u.lineGutter.style.width="",u.lineNumInnerWidth=Math.max(v,u.lineGutter.offsetWidth-m)+1,u.lineNumWidth=u.lineNumInnerWidth+m,u.lineNumChars=u.lineNumInnerWidth?c.length:-1,u.lineGutter.style.width=u.lineNumWidth+"px",Wl(i.display),!0}return!1}function Gl(i,s){for(var c=[],u=!1,p=0;p<i.length;p++){var v=i[p],m=null;if(typeof v!="string"&&(m=v.style,v=v.className),v=="CodeMirror-linenumbers")if(s)u=!0;else continue;c.push({className:v,style:m})}return s&&!u&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function nc(i){var s=i.gutters,c=i.gutterSpecs;z(s),i.lineGutter=null;for(var u=0;u<c.length;++u){var p=c[u],v=p.className,m=p.style,_=s.appendChild(A("div",null,"CodeMirror-gutter "+v));m&&(_.style.cssText=m),v=="CodeMirror-linenumbers"&&(i.lineGutter=_,_.style.width=(i.lineNumWidth||1)+"px")}s.style.display=c.length?"":"none",Wl(i)}function rs(i){nc(i.display),rn(i),ec(i)}function Hf(i,s,c,u){var p=this;this.input=c,p.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),p.scrollbarFiller.setAttribute("cm-not-content","true"),p.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),p.gutterFiller.setAttribute("cm-not-content","true"),p.lineDiv=tt("div",null,"CodeMirror-code"),p.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),p.cursorDiv=A("div",null,"CodeMirror-cursors"),p.measure=A("div",null,"CodeMirror-measure"),p.lineMeasure=A("div",null,"CodeMirror-measure"),p.lineSpace=tt("div",[p.measure,p.lineMeasure,p.selectionDiv,p.cursorDiv,p.lineDiv],null,"position: relative; outline: none");var v=tt("div",[p.lineSpace],"CodeMirror-lines");p.mover=A("div",[v],null,"position: relative"),p.sizer=A("div",[p.mover],"CodeMirror-sizer"),p.sizerWidth=null,p.heightForcer=A("div",null,null,"position: absolute; height: "+ie+"px; width: 1px;"),p.gutters=A("div",null,"CodeMirror-gutters"),p.lineGutter=null,p.scroller=A("div",[p.sizer,p.heightForcer,p.gutters],"CodeMirror-scroll"),p.scroller.setAttribute("tabIndex","-1"),p.wrapper=A("div",[p.scrollbarFiller,p.gutterFiller,p.scroller],"CodeMirror"),L&&D>=105&&(p.wrapper.style.clipPath="inset(0px)"),p.wrapper.setAttribute("translate","no"),M&&N<8&&(p.gutters.style.zIndex=-1,p.scroller.style.paddingRight=0),!x&&!(rt&&Tt)&&(p.scroller.draggable=!0),i&&(i.appendChild?i.appendChild(p.wrapper):i(p.wrapper)),p.viewFrom=p.viewTo=s.first,p.reportedViewFrom=p.reportedViewTo=s.first,p.view=[],p.renderedView=null,p.externalMeasured=null,p.viewOffset=0,p.lastWrapHeight=p.lastWrapWidth=0,p.updateLineNumbers=null,p.nativeBarWidth=p.barHeight=p.barWidth=0,p.scrollbarsClipped=!1,p.lineNumWidth=p.lineNumInnerWidth=p.lineNumChars=null,p.alignWidgets=!1,p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.maxLine=null,p.maxLineLength=0,p.maxLineChanged=!1,p.wheelDX=p.wheelDY=p.wheelStartX=p.wheelStartY=null,p.shift=!1,p.selForContextMenu=null,p.activeTouch=null,p.gutterSpecs=Gl(u.gutters,u.lineNumbers),nc(p),c.init(p)}var sl=0,ko=null;M?ko=-.53:rt?ko=15:L?ko=-.7:G&&(ko=-1/3);function oc(i){var s=i.wheelDeltaX,c=i.wheelDeltaY;return s==null&&i.detail&&i.axis==i.HORIZONTAL_AXIS&&(s=i.detail),c==null&&i.detail&&i.axis==i.VERTICAL_AXIS?c=i.detail:c==null&&(c=i.wheelDelta),{x:s,y:c}}function Bf(i){var s=oc(i);return s.x*=ko,s.y*=ko,s}function ic(i,s){L&&D==102&&(i.display.chromeScrollHack==null?i.display.sizer.style.pointerEvents="none":clearTimeout(i.display.chromeScrollHack),i.display.chromeScrollHack=setTimeout(function(){i.display.chromeScrollHack=null,i.display.sizer.style.pointerEvents=""},100));var c=oc(s),u=c.x,p=c.y,v=ko;s.deltaMode===0&&(u=s.deltaX,p=s.deltaY,v=1);var m=i.display,_=m.scroller,C=_.scrollWidth>_.clientWidth,P=_.scrollHeight>_.clientHeight;if(u&&C||p&&P){if(p&&yt&&x){t:for(var q=s.target,at=m.view;q!=_;q=q.parentNode)for(var bt=0;bt<at.length;bt++)if(at[bt].node==q){i.display.currentWheelTarget=q;break t}}if(u&&!rt&&!H&&v!=null){p&&P&&Za(i,Math.max(0,_.scrollTop+p*v)),Qo(i,Math.max(0,_.scrollLeft+u*v)),(!p||p&&P)&&U(s),m.wheelStartX=null;return}if(p&&v!=null){var gt=p*v,It=i.doc.scrollTop,Ut=It+m.wrapper.clientHeight;gt<0?It=Math.max(0,It+gt-50):Ut=Math.min(i.doc.height,Ut+gt+50),zl(i,{top:It,bottom:Ut})}sl<20&&s.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=_.scrollLeft,m.wheelStartY=_.scrollTop,m.wheelDX=u,m.wheelDY=p,setTimeout(function(){if(m.wheelStartX!=null){var Qt=_.scrollLeft-m.wheelStartX,se=_.scrollTop-m.wheelStartY,ye=se&&m.wheelDY&&se/m.wheelDY||Qt&&m.wheelDX&&Qt/m.wheelDX;m.wheelStartX=m.wheelStartY=null,ye&&(ko=(ko*sl+ye)/(sl+1),++sl)}},200)):(m.wheelDX+=u,m.wheelDY+=p))}}var Fn=function(i,s){this.ranges=i,this.primIndex=s};Fn.prototype.primary=function(){return this.ranges[this.primIndex]},Fn.prototype.equals=function(i){if(i==this)return!0;if(i.primIndex!=this.primIndex||i.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var c=this.ranges[s],u=i.ranges[s];if(!Ft(c.anchor,u.anchor)||!Ft(c.head,u.head))return!1}return!0},Fn.prototype.deepCopy=function(){for(var i=[],s=0;s<this.ranges.length;s++)i[s]=new ur(Yt(this.ranges[s].anchor),Yt(this.ranges[s].head));return new Fn(i,this.primIndex)},Fn.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return!0;return!1},Fn.prototype.contains=function(i,s){s||(s=i);for(var c=0;c<this.ranges.length;c++){var u=this.ranges[c];if(K(s,u.from())>=0&&K(i,u.to())<=0)return c}return-1};var ur=function(i,s){this.anchor=i,this.head=s};ur.prototype.from=function(){return er(this.anchor,this.head)},ur.prototype.to=function(){return Ae(this.anchor,this.head)},ur.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function fo(i,s,c){var u=i&&i.options.selectionsMayTouch,p=s[c];s.sort(function(bt,gt){return K(bt.from(),gt.from())}),c=zt(s,p);for(var v=1;v<s.length;v++){var m=s[v],_=s[v-1],C=K(_.to(),m.from());if(u&&!m.empty()?C>0:C>=0){var P=er(_.from(),m.from()),q=Ae(_.to(),m.to()),at=_.empty()?m.from()==m.head:_.from()==_.head;v<=c&&--c,s.splice(--v,2,new ur(at?q:P,at?P:q))}}return new Fn(s,c)}function ti(i,s){return new Fn([new ur(i,s||i)],0)}function ei(i){return i.text?O(i.from.line+i.text.length-1,he(i.text).length+(i.text.length==1?i.from.ch:0)):i.to}function ac(i,s){if(K(i,s.from)<0)return i;if(K(i,s.to)<=0)return ei(s);var c=i.line+s.text.length-(s.to.line-s.from.line)-1,u=i.ch;return i.line==s.to.line&&(u+=ei(s).ch-s.to.ch),O(c,u)}function $l(i,s){for(var c=[],u=0;u<i.sel.ranges.length;u++){var p=i.sel.ranges[u];c.push(new ur(ac(p.anchor,s),ac(p.head,s)))}return fo(i.cm,c,i.sel.primIndex)}function sc(i,s,c){return i.line==s.line?O(c.line,i.ch-s.ch+c.ch):O(c.line+(i.line-s.line),i.ch)}function Uf(i,s,c){for(var u=[],p=O(i.first,0),v=p,m=0;m<s.length;m++){var _=s[m],C=sc(_.from,p,v),P=sc(ei(_),p,v);if(p=_.to,v=P,c=="around"){var q=i.sel.ranges[m],at=K(q.head,q.anchor)<0;u[m]=new ur(at?P:C,at?C:P)}else u[m]=new ur(C,C)}return new Fn(u,i.sel.primIndex)}function ql(i){i.doc.mode=tn(i.options,i.doc.modeOption),ns(i)}function ns(i){i.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),i.doc.modeFrontier=i.doc.highlightFrontier=i.doc.first,es(i,100),i.state.modeGen++,i.curOp&&rn(i)}function lc(i,s){return s.from.ch==0&&s.to.ch==0&&he(s.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function pn(i,s,c,u){function p(ye){return c?c[ye]:null}function v(ye,le,we){na(ye,le,we,u),yr(ye,"change",ye,s)}function m(ye,le){for(var we=[],Le=ye;Le<le;++Le)we.push(new Dr(P[Le],p(Le),u));return we}var _=s.from,C=s.to,P=s.text,q=Ce(i,_.line),at=Ce(i,C.line),bt=he(P),gt=p(P.length-1),It=C.line-_.line;if(s.full)i.insert(0,m(0,P.length)),i.remove(P.length,i.size-P.length);else if(lc(i,s)){var Ut=m(0,P.length-1);v(at,at.text,gt),It&&i.remove(_.line,It),Ut.length&&i.insert(_.line,Ut)}else if(q==at)if(P.length==1)v(q,q.text.slice(0,_.ch)+bt+q.text.slice(C.ch),gt);else{var Qt=m(1,P.length-1);Qt.push(new Dr(bt+q.text.slice(C.ch),gt,u)),v(q,q.text.slice(0,_.ch)+P[0],p(0)),i.insert(_.line+1,Qt)}else if(P.length==1)v(q,q.text.slice(0,_.ch)+P[0]+at.text.slice(C.ch),p(0)),i.remove(_.line+1,It);else{v(q,q.text.slice(0,_.ch)+P[0],p(0)),v(at,bt+at.text.slice(C.ch),gt);var se=m(1,P.length-1);It>1&&i.remove(_.line+1,It-1),i.insert(_.line+1,se)}yr(i,"change",i,s)}function ri(i,s,c){function u(p,v,m){if(p.linked)for(var _=0;_<p.linked.length;++_){var C=p.linked[_];if(C.doc!=v){var P=m&&C.sharedHist;c&&!P||(s(C.doc,P),u(C.doc,p,P))}}}u(i,null,!0)}function pa(i,s){if(s.cm)throw new Error("This document is already in use.");i.doc=s,s.cm=i,Vl(i),ql(i),uc(i),i.options.direction=s.direction,i.options.lineWrapping||zo(i),i.options.mode=s.modeOption,rn(i)}function uc(i){(i.doc.direction=="rtl"?ct:X)(i.display.lineDiv,"CodeMirror-rtl")}function zf(i){An(i,function(){uc(i),rn(i)})}function ll(i){this.done=[],this.undone=[],this.undoDepth=i?i.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=i?i.maxGeneration:1}function Yl(i,s){var c={from:Yt(s.from),to:ei(s),text:Tn(i,s.from,s.to)};return da(i,c,s.from.line,s.to.line+1),ri(i,function(u){return da(u,c,s.from.line,s.to.line+1)},!0),c}function cc(i){for(;i.length;){var s=he(i);if(s.ranges)i.pop();else break}}function Wf(i,s){if(s)return cc(i.done),he(i.done);if(i.done.length&&!he(i.done).ranges)return he(i.done);if(i.done.length>1&&!i.done[i.done.length-2].ranges)return i.done.pop(),he(i.done)}function fc(i,s,c,u){var p=i.history;p.undone.length=0;var v=+new Date,m,_;if((p.lastOp==u||p.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&p.lastModTime>v-(i.cm?i.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(m=Wf(p,p.lastOp==u)))_=he(m.changes),K(s.from,s.to)==0&&K(s.from,_.to)==0?_.to=ei(s):m.changes.push(Yl(i,s));else{var C=he(p.done);for((!C||!C.ranges)&&ul(i.sel,p.done),m={changes:[Yl(i,s)],generation:p.generation},p.done.push(m);p.done.length>p.undoDepth;)p.done.shift(),p.done[0].ranges||p.done.shift()}p.done.push(c),p.generation=++p.maxGeneration,p.lastModTime=p.lastSelTime=v,p.lastOp=p.lastSelOp=u,p.lastOrigin=p.lastSelOrigin=s.origin,_||nr(i,"historyAdded")}function Kf(i,s,c,u){var p=s.charAt(0);return p=="*"||p=="+"&&c.ranges.length==u.ranges.length&&c.somethingSelected()==u.somethingSelected()&&new Date-i.history.lastSelTime<=(i.cm?i.cm.options.historyEventDelay:500)}function Gf(i,s,c,u){var p=i.history,v=u&&u.origin;c==p.lastSelOp||v&&p.lastSelOrigin==v&&(p.lastModTime==p.lastSelTime&&p.lastOrigin==v||Kf(i,v,he(p.done),s))?p.done[p.done.length-1]=s:ul(s,p.done),p.lastSelTime=+new Date,p.lastSelOrigin=v,p.lastSelOp=c,u&&u.clearRedo!==!1&&cc(p.undone)}function ul(i,s){var c=he(s);c&&c.ranges&&c.equals(i)||s.push(i)}function da(i,s,c,u){var p=s["spans_"+i.id],v=0;i.iter(Math.max(i.first,c),Math.min(i.first+i.size,u),function(m){m.markedSpans&&((p||(p=s["spans_"+i.id]={}))[v]=m.markedSpans),++v})}function $f(i){if(!i)return null;for(var s,c=0;c<i.length;++c)i[c].marker.explicitlyCleared?s||(s=i.slice(0,c)):s&&s.push(i[c]);return s?s.length?s:null:i}function Xl(i,s){var c=s["spans_"+i.id];if(!c)return null;for(var u=[],p=0;p<s.text.length;++p)u.push($f(c[p]));return u}function pc(i,s){var c=Xl(i,s),u=ea(i,s);if(!c)return u;if(!u)return c;for(var p=0;p<c.length;++p){var v=c[p],m=u[p];if(v&&m)t:for(var _=0;_<m.length;++_){for(var C=m[_],P=0;P<v.length;++P)if(v[P].marker==C.marker)continue t;v.push(C)}else m&&(c[p]=m)}return c}function Fi(i,s,c){for(var u=[],p=0;p<i.length;++p){var v=i[p];if(v.ranges){u.push(c?Fn.prototype.deepCopy.call(v):v);continue}var m=v.changes,_=[];u.push({changes:_});for(var C=0;C<m.length;++C){var P=m[C],q=void 0;if(_.push({from:P.from,to:P.to,text:P.text}),s)for(var at in P)(q=at.match(/^spans_(\d+)$/))&&zt(s,Number(q[1]))>-1&&(he(_)[at]=P[at],delete P[at])}}return u}function Zl(i,s,c,u){if(u){var p=i.anchor;if(c){var v=K(s,p)<0;v!=K(c,p)<0?(p=s,s=c):v!=K(s,c)<0&&(s=c)}return new ur(p,s)}else return new ur(c||s,s)}function os(i,s,c,u,p){p==null&&(p=i.cm&&(i.cm.display.shift||i.extend)),nn(i,new Fn([Zl(i.sel.primary(),s,c,p)],0),u)}function dc(i,s,c){for(var u=[],p=i.cm&&(i.cm.display.shift||i.extend),v=0;v<i.sel.ranges.length;v++)u[v]=Zl(i.sel.ranges[v],s[v],null,p);var m=fo(i.cm,u,i.sel.primIndex);nn(i,m,c)}function Jl(i,s,c,u){var p=i.sel.ranges.slice(0);p[s]=c,nn(i,fo(i.cm,p,i.sel.primIndex),u)}function ni(i,s,c,u){nn(i,ti(s,c),u)}function qf(i,s,c){var u={ranges:s.ranges,update:function(p){this.ranges=[];for(var v=0;v<p.length;v++)this.ranges[v]=new ur(Se(i,p[v].anchor),Se(i,p[v].head))},origin:c&&c.origin};return nr(i,"beforeSelectionChange",i,u),i.cm&&nr(i.cm,"beforeSelectionChange",i.cm,u),u.ranges!=s.ranges?fo(i.cm,u.ranges,u.ranges.length-1):s}function hc(i,s,c){var u=i.history.done,p=he(u);p&&p.ranges?(u[u.length-1]=s,cl(i,s,c)):nn(i,s,c)}function nn(i,s,c){cl(i,s,c),Gf(i,i.sel,i.cm?i.cm.curOp.id:NaN,c)}function cl(i,s,c){(Or(i,"beforeSelectionChange")||i.cm&&Or(i.cm,"beforeSelectionChange"))&&(s=qf(i,s,c));var u=c&&c.bias||(K(s.primary().head,i.sel.primary().head)<0?-1:1);vc(i,mc(i,s,u,!0)),!(c&&c.scroll===!1)&&i.cm&&i.cm.getOption("readOnly")!="nocursor"&&Vi(i.cm)}function vc(i,s){s.equals(i.sel)||(i.sel=s,i.cm&&(i.cm.curOp.updateInput=1,i.cm.curOp.selectionChanged=!0,Xt(i.cm)),yr(i,"cursorActivity",i))}function gc(i){vc(i,mc(i,i.sel,null,!1))}function mc(i,s,c,u){for(var p,v=0;v<s.ranges.length;v++){var m=s.ranges[v],_=s.ranges.length==i.sel.ranges.length&&i.sel.ranges[v],C=fl(i,m.anchor,_&&_.anchor,c,u),P=m.head==m.anchor?C:fl(i,m.head,_&&_.head,c,u);(p||C!=m.anchor||P!=m.head)&&(p||(p=s.ranges.slice(0,v)),p[v]=new ur(C,P))}return p?fo(i.cm,p,s.primIndex):s}function Hi(i,s,c,u,p){var v=Ce(i,s.line);if(v.markedSpans)for(var m=0;m<v.markedSpans.length;++m){var _=v.markedSpans[m],C=_.marker,P="selectLeft"in C?!C.selectLeft:C.inclusiveLeft,q="selectRight"in C?!C.selectRight:C.inclusiveRight;if((_.from==null||(P?_.from<=s.ch:_.from<s.ch))&&(_.to==null||(q?_.to>=s.ch:_.to>s.ch))){if(p&&(nr(C,"beforeCursorEnter"),C.explicitlyCleared))if(v.markedSpans){--m;continue}else break;if(!C.atomic)continue;if(c){var at=C.find(u<0?1:-1),bt=void 0;if((u<0?q:P)&&(at=Ql(i,at,-u,at&&at.line==s.line?v:null)),at&&at.line==s.line&&(bt=K(at,c))&&(u<0?bt<0:bt>0))return Hi(i,at,s,u,p)}var gt=C.find(u<0?-1:1);return(u<0?P:q)&&(gt=Ql(i,gt,u,gt.line==s.line?v:null)),gt?Hi(i,gt,s,u,p):null}}return s}function fl(i,s,c,u,p){var v=u||1,m=Hi(i,s,c,v,p)||!p&&Hi(i,s,c,v,!0)||Hi(i,s,c,-v,p)||!p&&Hi(i,s,c,-v,!0);return m||(i.cantEdit=!0,O(i.first,0))}function Ql(i,s,c,u){return c<0&&s.ch==0?s.line>i.first?Se(i,O(s.line-1)):null:c>0&&s.ch==(u||Ce(i,s.line)).text.length?s.line<i.first+i.size-1?O(s.line+1,0):null:new O(s.line,s.ch+c)}function is(i){i.setSelection(O(i.firstLine(),0),O(i.lastLine()),qt)}function as(i,s,c){var u={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return u.canceled=!0}};return c&&(u.update=function(p,v,m,_){p&&(u.from=Se(i,p)),v&&(u.to=Se(i,v)),m&&(u.text=m),_!==void 0&&(u.origin=_)}),nr(i,"beforeChange",i,u),i.cm&&nr(i.cm,"beforeChange",i.cm,u),u.canceled?(i.cm&&(i.cm.curOp.updateInput=2),null):{from:u.from,to:u.to,text:u.text,origin:u.origin}}function ha(i,s,c){if(i.cm){if(!i.cm.curOp)return Br(i.cm,ha)(i,s,c);if(i.cm.state.suppressEdits)return}if(!((Or(i,"beforeChange")||i.cm&&Or(i.cm,"beforeChange"))&&(s=as(i,s,!0),!s))){var u=Ho&&!c&&ja(i,s.from,s.to);if(u)for(var p=u.length-1;p>=0;--p)yc(i,{from:u[p].from,to:u[p].to,text:p?[""]:s.text,origin:s.origin});else yc(i,s)}}function yc(i,s){if(!(s.text.length==1&&s.text[0]==""&&K(s.from,s.to)==0)){var c=$l(i,s);fc(i,s,c,i.cm?i.cm.curOp.id:NaN),ss(i,s,c,ea(i,s));var u=[];ri(i,function(p,v){!v&&zt(u,p.history)==-1&&(ls(p.history,s),u.push(p.history)),ss(p,s,null,ea(p,s))})}}function pl(i,s,c){var u=i.cm&&i.cm.state.suppressEdits;if(!(u&&!c)){for(var p=i.history,v,m=i.sel,_=s=="undo"?p.done:p.undone,C=s=="undo"?p.undone:p.done,P=0;P<_.length&&(v=_[P],!(c?v.ranges&&!v.equals(i.sel):!v.ranges));P++);if(P!=_.length){for(p.lastOrigin=p.lastSelOrigin=null;;)if(v=_.pop(),v.ranges){if(ul(v,C),c&&!v.equals(i.sel)){nn(i,v,{clearRedo:!1});return}m=v}else if(u){_.push(v);return}else break;var q=[];ul(m,C),C.push({changes:q,generation:p.generation}),p.generation=v.generation||++p.maxGeneration;for(var at=Or(i,"beforeChange")||i.cm&&Or(i.cm,"beforeChange"),bt=function(Ut){var Qt=v.changes[Ut];if(Qt.origin=s,at&&!as(i,Qt,!1))return _.length=0,{};q.push(Yl(i,Qt));var se=Ut?$l(i,Qt):he(_);ss(i,Qt,se,pc(i,Qt)),!Ut&&i.cm&&i.cm.scrollIntoView({from:Qt.from,to:ei(Qt)});var ye=[];ri(i,function(le,we){!we&&zt(ye,le.history)==-1&&(ls(le.history,Qt),ye.push(le.history)),ss(le,Qt,null,pc(le,Qt))})},gt=v.changes.length-1;gt>=0;--gt){var It=bt(gt);if(It)return It.v}}}}function _c(i,s){if(s!=0&&(i.first+=s,i.sel=new Fn(T(i.sel.ranges,function(p){return new ur(O(p.anchor.line+s,p.anchor.ch),O(p.head.line+s,p.head.ch))}),i.sel.primIndex),i.cm)){rn(i.cm,i.first,i.first-s,s);for(var c=i.cm.display,u=c.viewFrom;u<c.viewTo;u++)qo(i.cm,u,"gutter")}}function ss(i,s,c,u){if(i.cm&&!i.cm.curOp)return Br(i.cm,ss)(i,s,c,u);if(s.to.line<i.first){_c(i,s.text.length-1-(s.to.line-s.from.line));return}if(!(s.from.line>i.lastLine())){if(s.from.line<i.first){var p=s.text.length-1-(i.first-s.from.line);_c(i,p),s={from:O(i.first,0),to:O(s.to.line+p,s.to.ch),text:[he(s.text)],origin:s.origin}}var v=i.lastLine();s.to.line>v&&(s={from:s.from,to:O(v,Ce(i,v).text.length),text:[s.text[0]],origin:s.origin}),s.removed=Tn(i,s.from,s.to),c||(c=$l(i,s)),i.cm?Yf(i.cm,s,u):pn(i,s,u),cl(i,c,qt),i.cantEdit&&fl(i,O(i.firstLine(),0))&&(i.cantEdit=!1)}}function Yf(i,s,c){var u=i.doc,p=i.display,v=s.from,m=s.to,_=!1,C=v.line;i.options.lineWrapping||(C=qe(Pn(Ce(u,v.line))),u.iter(C,m.line+1,function(gt){if(gt==p.maxLine)return _=!0,!0})),u.sel.contains(s.from,s.to)>-1&&Xt(i),pn(u,s,c,Ku(i)),i.options.lineWrapping||(u.iter(C,v.line+s.text.length,function(gt){var It=Ge(gt);It>p.maxLineLength&&(p.maxLine=gt,p.maxLineLength=It,p.maxLineChanged=!0,_=!1)}),_&&(i.curOp.updateMaxLine=!0)),Hs(u,v.line),es(i,400);var P=s.text.length-(m.line-v.line)-1;s.full?rn(i):v.line==m.line&&s.text.length==1&&!lc(i.doc,s)?qo(i,v.line,"text"):rn(i,v.line,m.line+1,P);var q=Or(i,"changes"),at=Or(i,"change");if(at||q){var bt={from:v,to:m,text:s.text,removed:s.removed,origin:s.origin};at&&yr(i,"change",i,bt),q&&(i.curOp.changeObjs||(i.curOp.changeObjs=[])).push(bt)}i.display.selForContextMenu=null}function Bi(i,s,c,u,p){var v;u||(u=c),K(u,c)<0&&(v=[u,c],c=v[0],u=v[1]),typeof s=="string"&&(s=i.splitLines(s)),ha(i,{from:c,to:u,text:s,origin:p})}function tu(i,s,c,u){c<i.line?i.line+=u:s<i.line&&(i.line=s,i.ch=0)}function wc(i,s,c,u){for(var p=0;p<i.length;++p){var v=i[p],m=!0;if(v.ranges){v.copied||(v=i[p]=v.deepCopy(),v.copied=!0);for(var _=0;_<v.ranges.length;_++)tu(v.ranges[_].anchor,s,c,u),tu(v.ranges[_].head,s,c,u);continue}for(var C=0;C<v.changes.length;++C){var P=v.changes[C];if(c<P.from.line)P.from=O(P.from.line+u,P.from.ch),P.to=O(P.to.line+u,P.to.ch);else if(s<=P.to.line){m=!1;break}}m||(i.splice(0,p+1),p=0)}}function ls(i,s){var c=s.from.line,u=s.to.line,p=s.text.length-(u-c)-1;wc(i.done,c,u,p),wc(i.undone,c,u,p)}function us(i,s,c,u){var p=s,v=s;return typeof s=="number"?v=Ce(i,or(i,s)):p=qe(s),p==null?null:(u(v,p)&&i.cm&&qo(i.cm,p,c),v)}function va(i){this.lines=i,this.parent=null;for(var s=0,c=0;c<i.length;++c)i[c].parent=this,s+=i[c].height;this.height=s}va.prototype={chunkSize:function(){return this.lines.length},removeInner:function(i,s){for(var c=i,u=i+s;c<u;++c){var p=this.lines[c];this.height-=p.height,Wo(p),yr(p,"delete")}this.lines.splice(i,s)},collapse:function(i){i.push.apply(i,this.lines)},insertInner:function(i,s,c){this.height+=c,this.lines=this.lines.slice(0,i).concat(s).concat(this.lines.slice(i));for(var u=0;u<s.length;++u)s[u].parent=this},iterN:function(i,s,c){for(var u=i+s;i<u;++i)if(c(this.lines[i]))return!0}};function cs(i){this.children=i;for(var s=0,c=0,u=0;u<i.length;++u){var p=i[u];s+=p.chunkSize(),c+=p.height,p.parent=this}this.size=s,this.height=c,this.parent=null}cs.prototype={chunkSize:function(){return this.size},removeInner:function(i,s){this.size-=s;for(var c=0;c<this.children.length;++c){var u=this.children[c],p=u.chunkSize();if(i<p){var v=Math.min(s,p-i),m=u.height;if(u.removeInner(i,v),this.height-=m-u.height,p==v&&(this.children.splice(c--,1),u.parent=null),(s-=v)==0)break;i=0}else i-=p}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof va))){var _=[];this.collapse(_),this.children=[new va(_)],this.children[0].parent=this}},collapse:function(i){for(var s=0;s<this.children.length;++s)this.children[s].collapse(i)},insertInner:function(i,s,c){this.size+=s.length,this.height+=c;for(var u=0;u<this.children.length;++u){var p=this.children[u],v=p.chunkSize();if(i<=v){if(p.insertInner(i,s,c),p.lines&&p.lines.length>50){for(var m=p.lines.length%25+25,_=m;_<p.lines.length;){var C=new va(p.lines.slice(_,_+=25));p.height-=C.height,this.children.splice(++u,0,C),C.parent=this}p.lines=p.lines.slice(0,m),this.maybeSpill()}break}i-=v}},maybeSpill:function(){if(!(this.children.length<=10)){var i=this;do{var s=i.children.splice(i.children.length-5,5),c=new cs(s);if(i.parent){i.size-=c.size,i.height-=c.height;var p=zt(i.parent.children,i);i.parent.children.splice(p+1,0,c)}else{var u=new cs(i.children);u.parent=i,i.children=[u,c],i=u}c.parent=i.parent}while(i.children.length>10);i.parent.maybeSpill()}},iterN:function(i,s,c){for(var u=0;u<this.children.length;++u){var p=this.children[u],v=p.chunkSize();if(i<v){var m=Math.min(s,v-i);if(p.iterN(i,m,c))return!0;if((s-=m)==0)break;i=0}else i-=v}}};var Qn=function(i,s,c){if(c)for(var u in c)c.hasOwnProperty(u)&&(this[u]=c[u]);this.doc=i,this.node=s};Qn.prototype.clear=function(){var i=this.doc.cm,s=this.line.widgets,c=this.line,u=qe(c);if(!(u==null||!s)){for(var p=0;p<s.length;++p)s[p]==this&&s.splice(p--,1);s.length||(c.widgets=null);var v=Jn(this);vn(c,Math.max(0,c.height-v)),i&&(An(i,function(){bc(i,c,-v),qo(i,u,"widget")}),yr(i,"lineWidgetCleared",i,this,u))}},Qn.prototype.changed=function(){var i=this,s=this.height,c=this.doc.cm,u=this.line;this.height=null;var p=Jn(this)-s;p&&(In(this.doc,u)||vn(u,u.height+p),c&&An(c,function(){c.curOp.forceUpdate=!0,bc(c,u,p),yr(c,"lineWidgetChanged",c,i,qe(u))}))},Kn(Qn);function bc(i,s,c){Ar(s)<(i.curOp&&i.curOp.scrollTop||i.doc.scrollTop)&&Bl(i,c)}function Xf(i,s,c,u){var p=new Qn(i,c,u),v=i.cm;return v&&p.noHScroll&&(v.display.alignWidgets=!0),us(i,s,"widget",function(m){var _=m.widgets||(m.widgets=[]);if(p.insertAt==null?_.push(p):_.splice(Math.min(_.length,Math.max(0,p.insertAt)),0,p),p.line=m,v&&!In(i,m)){var C=Ar(m)<i.scrollTop;vn(m,m.height+Jn(p)),C&&Bl(v,p.height),v.curOp.forceUpdate=!0}return!0}),v&&yr(v,"lineWidgetAdded",v,p,typeof s=="number"?s:qe(s)),p}var Cc=0,oi=function(i,s){this.lines=[],this.type=s,this.doc=i,this.id=++Cc};oi.prototype.clear=function(){if(!this.explicitlyCleared){var i=this.doc.cm,s=i&&!i.curOp;if(s&&Ao(i),Or(this,"clear")){var c=this.find();c&&yr(this,"clear",c.from,c.to)}for(var u=null,p=null,v=0;v<this.lines.length;++v){var m=this.lines[v],_=Oo(m.markedSpans,this);i&&!this.collapsed?qo(i,qe(m),"text"):i&&(_.to!=null&&(p=qe(m)),_.from!=null&&(u=qe(m))),m.markedSpans=wi(m.markedSpans,_),_.from==null&&this.collapsed&&!In(this.doc,m)&&i&&vn(m,la(i.display))}if(i&&this.collapsed&&!i.options.lineWrapping)for(var C=0;C<this.lines.length;++C){var P=Pn(this.lines[C]),q=Ge(P);q>i.display.maxLineLength&&(i.display.maxLine=P,i.display.maxLineLength=q,i.display.maxLineChanged=!0)}u!=null&&i&&this.collapsed&&rn(i,u,p+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,i&&gc(i.doc)),i&&yr(i,"markerCleared",i,this,u,p),s&&Ni(i),this.parent&&this.parent.clear()}},oi.prototype.find=function(i,s){i==null&&this.type=="bookmark"&&(i=1);for(var c,u,p=0;p<this.lines.length;++p){var v=this.lines[p],m=Oo(v.markedSpans,this);if(m.from!=null&&(c=O(s?v:qe(v),m.from),i==-1))return c;if(m.to!=null&&(u=O(s?v:qe(v),m.to),i==1))return u}return c&&{from:c,to:u}},oi.prototype.changed=function(){var i=this,s=this.find(-1,!0),c=this,u=this.doc.cm;!s||!u||An(u,function(){var p=s.line,v=qe(s.line),m=We(u,v);if(m&&($s(m),u.curOp.selectionChanged=u.curOp.forceUpdate=!0),u.curOp.updateMaxLine=!0,!In(c.doc,p)&&c.height!=null){var _=c.height;c.height=null;var C=Jn(c)-_;C&&vn(p,p.height+C)}yr(u,"markerChanged",u,i)})},oi.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(!s.maybeHiddenMarkers||zt(s.maybeHiddenMarkers,this)==-1)&&(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(i)},oi.prototype.detachLine=function(i){if(this.lines.splice(zt(this.lines,i),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Kn(oi);function ga(i,s,c,u,p){if(u&&u.shared)return eu(i,s,c,u,p);if(i.cm&&!i.cm.curOp)return Br(i.cm,ga)(i,s,c,u,p);var v=new oi(i,p),m=K(s,c);if(u&&ve(u,v,!1),m>0||m==0&&v.clearWhenEmpty!==!1)return v;if(v.replacedWith&&(v.collapsed=!0,v.widgetNode=tt("span",[v.replacedWith],"CodeMirror-widget"),u.handleMouseEvents||v.widgetNode.setAttribute("cm-ignore-events","true"),u.insertLeft&&(v.widgetNode.insertLeft=!0)),v.collapsed){if(yn(i,s.line,s,c,v)||s.line!=c.line&&yn(i,c.line,s,c,v))throw new Error("Inserting collapsed marker partially overlapping an existing one");$r()}v.addToHistory&&fc(i,{from:s,to:c,origin:"markText"},i.sel,NaN);var _=s.line,C=i.cm,P;if(i.iter(_,c.line+1,function(at){C&&v.collapsed&&!C.options.lineWrapping&&Pn(at)==C.display.maxLine&&(P=!0),v.collapsed&&_!=s.line&&vn(at,0),ao(at,new _i(v,_==s.line?s.ch:null,_==c.line?c.ch:null),i.cm&&i.cm.curOp),++_}),v.collapsed&&i.iter(s.line,c.line+1,function(at){In(i,at)&&vn(at,0)}),v.clearOnEnter&&ge(v,"beforeCursorEnter",function(){return v.clear()}),v.readOnly&&(Da(),(i.history.done.length||i.history.undone.length)&&i.clearHistory()),v.collapsed&&(v.id=++Cc,v.atomic=!0),C){if(P&&(C.curOp.updateMaxLine=!0),v.collapsed)rn(C,s.line,c.line+1);else if(v.className||v.startStyle||v.endStyle||v.css||v.attributes||v.title)for(var q=s.line;q<=c.line;q++)qo(C,q,"text");v.atomic&&gc(C.doc),yr(C,"markerAdded",C,v)}return v}var ma=function(i,s){this.markers=i,this.primary=s;for(var c=0;c<i.length;++c)i[c].parent=this};ma.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();yr(this,"clear")}},ma.prototype.find=function(i,s){return this.primary.find(i,s)},Kn(ma);function eu(i,s,c,u,p){u=ve(u),u.shared=!1;var v=[ga(i,s,c,u,p)],m=v[0],_=u.widgetNode;return ri(i,function(C){_&&(u.widgetNode=_.cloneNode(!0)),v.push(ga(C,Se(C,s),Se(C,c),u,p));for(var P=0;P<C.linked.length;++P)if(C.linked[P].isParent)return;m=he(v)}),new ma(v,m)}function xc(i){return i.findMarks(O(i.first,0),i.clipPos(O(i.lastLine())),function(s){return s.parent})}function Zf(i,s){for(var c=0;c<s.length;c++){var u=s[c],p=u.find(),v=i.clipPos(p.from),m=i.clipPos(p.to);if(K(v,m)){var _=ga(i,v,m,u.primary,u.primary.type);u.markers.push(_),_.parent=u}}}function Sc(i){for(var s=function(u){var p=i[u],v=[p.primary.doc];ri(p.primary.doc,function(C){return v.push(C)});for(var m=0;m<p.markers.length;m++){var _=p.markers[m];zt(v,_.doc)==-1&&(_.parent=null,p.markers.splice(m--,1))}},c=0;c<i.length;c++)s(c)}var Jf=0,_n=function(i,s,c,u,p){if(!(this instanceof _n))return new _n(i,s,c,u,p);c==null&&(c=0),cs.call(this,[new va([new Dr("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var v=O(c,0);this.sel=ti(v),this.history=new ll(null),this.id=++Jf,this.modeOption=s,this.lineSep=u,this.direction=p=="rtl"?"rtl":"ltr",this.extend=!1,typeof i=="string"&&(i=this.splitLines(i)),pn(this,{from:v,to:v,text:i}),nn(this,ti(v),qt)};_n.prototype=ht(cs.prototype,{constructor:_n,iter:function(i,s,c){c?this.iterN(i-this.first,s-i,c):this.iterN(this.first,this.first+this.size,i)},insert:function(i,s){for(var c=0,u=0;u<s.length;++u)c+=s[u].height;this.insertInner(i-this.first,s,c)},remove:function(i,s){this.removeInner(i-this.first,s)},getValue:function(i){var s=Pr(this,this.first,this.first+this.size);return i===!1?s:s.join(i||this.lineSeparator())},setValue:Ur(function(i){var s=O(this.first,0),c=this.first+this.size-1;ha(this,{from:s,to:O(c,Ce(this,c).text.length),text:this.splitLines(i),origin:"setValue",full:!0},!0),this.cm&&Xa(this.cm,0,0),nn(this,ti(s),qt)}),replaceRange:function(i,s,c,u){s=Se(this,s),c=c?Se(this,c):s,Bi(this,i,s,c,u)},getRange:function(i,s,c){var u=Tn(this,Se(this,i),Se(this,s));return c===!1?u:c===""?u.join(""):u.join(c||this.lineSeparator())},getLine:function(i){var s=this.getLineHandle(i);return s&&s.text},getLineHandle:function(i){if(vo(this,i))return Ce(this,i)},getLineNumber:function(i){return qe(i)},getLineHandleVisualStart:function(i){return typeof i=="number"&&(i=Ce(this,i)),Pn(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return Se(this,i)},getCursor:function(i){var s=this.sel.primary(),c;return i==null||i=="head"?c=s.head:i=="anchor"?c=s.anchor:i=="end"||i=="to"||i===!1?c=s.to():c=s.from(),c},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ur(function(i,s,c){ni(this,Se(this,typeof i=="number"?O(i,s||0):i),null,c)}),setSelection:Ur(function(i,s,c){ni(this,Se(this,i),Se(this,s||i),c)}),extendSelection:Ur(function(i,s,c){os(this,Se(this,i),s&&Se(this,s),c)}),extendSelections:Ur(function(i,s){dc(this,Ji(this,i),s)}),extendSelectionsBy:Ur(function(i,s){var c=T(this.sel.ranges,i);dc(this,Ji(this,c),s)}),setSelections:Ur(function(i,s,c){if(i.length){for(var u=[],p=0;p<i.length;p++)u[p]=new ur(Se(this,i[p].anchor),Se(this,i[p].head||i[p].anchor));s==null&&(s=Math.min(i.length-1,this.sel.primIndex)),nn(this,fo(this.cm,u,s),c)}}),addSelection:Ur(function(i,s,c){var u=this.sel.ranges.slice(0);u.push(new ur(Se(this,i),Se(this,s||i))),nn(this,fo(this.cm,u,u.length-1),c)}),getSelection:function(i){for(var s=this.sel.ranges,c,u=0;u<s.length;u++){var p=Tn(this,s[u].from(),s[u].to());c=c?c.concat(p):p}return i===!1?c:c.join(i||this.lineSeparator())},getSelections:function(i){for(var s=[],c=this.sel.ranges,u=0;u<c.length;u++){var p=Tn(this,c[u].from(),c[u].to());i!==!1&&(p=p.join(i||this.lineSeparator())),s[u]=p}return s},replaceSelection:function(i,s,c){for(var u=[],p=0;p<this.sel.ranges.length;p++)u[p]=i;this.replaceSelections(u,s,c||"+input")},replaceSelections:Ur(function(i,s,c){for(var u=[],p=this.sel,v=0;v<p.ranges.length;v++){var m=p.ranges[v];u[v]={from:m.from(),to:m.to(),text:this.splitLines(i[v]),origin:c}}for(var _=s&&s!="end"&&Uf(this,u,s),C=u.length-1;C>=0;C--)ha(this,u[C]);_?hc(this,_):this.cm&&Vi(this.cm)}),undo:Ur(function(){pl(this,"undo")}),redo:Ur(function(){pl(this,"redo")}),undoSelection:Ur(function(){pl(this,"undo",!0)}),redoSelection:Ur(function(){pl(this,"redo",!0)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){for(var i=this.history,s=0,c=0,u=0;u<i.done.length;u++)i.done[u].ranges||++s;for(var p=0;p<i.undone.length;p++)i.undone[p].ranges||++c;return{undo:s,redo:c}},clearHistory:function(){var i=this;this.history=new ll(this.history),ri(this,function(s){return s.history=i.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(i){return i&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:Fi(this.history.done),undone:Fi(this.history.undone)}},setHistory:function(i){var s=this.history=new ll(this.history);s.done=Fi(i.done.slice(0),null,!0),s.undone=Fi(i.undone.slice(0),null,!0)},setGutterMarker:Ur(function(i,s,c){return us(this,i,"gutter",function(u){var p=u.gutterMarkers||(u.gutterMarkers={});return p[s]=c,!c&&mt(p)&&(u.gutterMarkers=null),!0})}),clearGutter:Ur(function(i){var s=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[i]&&us(s,c,"gutter",function(){return c.gutterMarkers[i]=null,mt(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(i){var s;if(typeof i=="number"){if(!vo(this,i)||(s=i,i=Ce(this,i),!i))return null}else if(s=qe(i),s==null)return null;return{line:s,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:Ur(function(i,s,c){return us(this,i,s=="gutter"?"gutter":"class",function(u){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(!u[p])u[p]=c;else{if(ot(c).test(u[p]))return!1;u[p]+=" "+c}return!0})}),removeLineClass:Ur(function(i,s,c){return us(this,i,s=="gutter"?"gutter":"class",function(u){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",v=u[p];if(v)if(c==null)u[p]=null;else{var m=v.match(ot(c));if(!m)return!1;var _=m.index+m[0].length;u[p]=v.slice(0,m.index)+(!m.index||_==v.length?"":" ")+v.slice(_)||null}else return!1;return!0})}),addLineWidget:Ur(function(i,s,c){return Xf(this,i,s,c)}),removeLineWidget:function(i){i.clear()},markText:function(i,s,c){return ga(this,Se(this,i),Se(this,s),c,c&&c.type||"range")},setBookmark:function(i,s){var c={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return i=Se(this,i),ga(this,i,i,c,"bookmark")},findMarksAt:function(i){i=Se(this,i);var s=[],c=Ce(this,i.line).markedSpans;if(c)for(var u=0;u<c.length;++u){var p=c[u];(p.from==null||p.from<=i.ch)&&(p.to==null||p.to>=i.ch)&&s.push(p.marker.parent||p.marker)}return s},findMarks:function(i,s,c){i=Se(this,i),s=Se(this,s);var u=[],p=i.line;return this.iter(i.line,s.line+1,function(v){var m=v.markedSpans;if(m)for(var _=0;_<m.length;_++){var C=m[_];!(C.to!=null&&p==i.line&&i.ch>=C.to||C.from==null&&p!=i.line||C.from!=null&&p==s.line&&C.from>=s.ch)&&(!c||c(C.marker))&&u.push(C.marker.parent||C.marker)}++p}),u},getAllMarks:function(){var i=[];return this.iter(function(s){var c=s.markedSpans;if(c)for(var u=0;u<c.length;++u)c[u].from!=null&&i.push(c[u].marker)}),i},posFromIndex:function(i){var s,c=this.first,u=this.lineSeparator().length;return this.iter(function(p){var v=p.text.length+u;if(v>i)return s=i,!0;i-=v,++c}),Se(this,O(c,s))},indexFromPos:function(i){i=Se(this,i);var s=i.ch;if(i.line<this.first||i.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,i.line,function(u){s+=u.text.length+c}),s},copy:function(i){var s=new _n(Pr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,i&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(i){i||(i={});var s=this.first,c=this.first+this.size;i.from!=null&&i.from>s&&(s=i.from),i.to!=null&&i.to<c&&(c=i.to);var u=new _n(Pr(this,s,c),i.mode||this.modeOption,s,this.lineSep,this.direction);return i.sharedHist&&(u.history=this.history),(this.linked||(this.linked=[])).push({doc:u,sharedHist:i.sharedHist}),u.linked=[{doc:this,isParent:!0,sharedHist:i.sharedHist}],Zf(u,xc(this)),u},unlinkDoc:function(i){if(i instanceof gr&&(i=i.doc),this.linked)for(var s=0;s<this.linked.length;++s){var c=this.linked[s];if(c.doc==i){this.linked.splice(s,1),i.unlinkDoc(this),Sc(xc(this));break}}if(i.history==this.history){var u=[i.id];ri(i,function(p){return u.push(p.id)},!0),i.history=new ll(null),i.history.done=Fi(this.history.done,u),i.history.undone=Fi(this.history.undone,u)}},iterLinkedDocs:function(i){ri(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){return this.lineSep?i.split(this.lineSep):Qr(i)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ur(function(i){i!="rtl"&&(i="ltr"),i!=this.direction&&(this.direction=i,this.iter(function(s){return s.order=null}),this.cm&&zf(this.cm))})}),_n.prototype.eachLine=_n.prototype.iter;var ru=0;function Qf(i){var s=this;if(Oc(s),!(Qe(s,i)||Rn(s.display,i))){U(i),M&&(ru=+new Date);var c=Di(s,i,!0),u=i.dataTransfer.files;if(!(!c||s.isReadOnly()))if(u&&u.length&&window.FileReader&&window.File)for(var p=u.length,v=Array(p),m=0,_=function(){++m==p&&Br(s,function(){c=Se(s.doc,c);var gt={from:c,to:c,text:s.doc.splitLines(v.filter(function(It){return It!=null}).join(s.doc.lineSeparator())),origin:"paste"};ha(s.doc,gt),hc(s.doc,ti(Se(s.doc,c),Se(s.doc,ei(gt))))})()},C=function(gt,It){if(s.options.allowDropFileTypes&&zt(s.options.allowDropFileTypes,gt.type)==-1){_();return}var Ut=new FileReader;Ut.onerror=function(){return _()},Ut.onload=function(){var Qt=Ut.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Qt)){_();return}v[It]=Qt,_()},Ut.readAsText(gt)},P=0;P<u.length;P++)C(u[P],P);else{if(s.state.draggingText&&s.doc.sel.contains(c)>-1){s.state.draggingText(i),setTimeout(function(){return s.display.input.focus()},20);return}try{var q=i.dataTransfer.getData("Text");if(q){var at;if(s.state.draggingText&&!s.state.draggingText.copy&&(at=s.listSelections()),cl(s.doc,ti(c,c)),at)for(var bt=0;bt<at.length;++bt)Bi(s.doc,"",at[bt].anchor,at[bt].head,"drag");s.replaceSelection(q,"around","paste"),s.display.input.focus()}}catch{}}}}function fs(i,s){if(M&&(!i.state.draggingText||+new Date-ru<100)){Ht(s);return}if(!(Qe(i,s)||Rn(i.display,s))&&(s.dataTransfer.setData("Text",i.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!G)){var c=A("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",H&&(c.width=c.height=1,i.display.wrapper.appendChild(c),c._top=c.offsetTop),s.dataTransfer.setDragImage(c,0,0),H&&c.parentNode.removeChild(c)}}function tp(i,s){var c=Di(i,s);if(c){var u=document.createDocumentFragment();Nl(i,c,u),i.display.dragCursor||(i.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)),et(i.display.dragCursor,u)}}function Oc(i){i.display.dragCursor&&(i.display.lineSpace.removeChild(i.display.dragCursor),i.display.dragCursor=null)}function nu(i){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),c=[],u=0;u<s.length;u++){var p=s[u].CodeMirror;p&&c.push(p)}c.length&&c[0].operation(function(){for(var v=0;v<c.length;v++)i(c[v])})}}var ou=!1;function Tc(){ou||(Ec(),ou=!0)}function Ec(){var i;ge(window,"resize",function(){i==null&&(i=setTimeout(function(){i=null,nu(Pc)},100))}),ge(window,"blur",function(){return nu(Jo)})}function Pc(i){var s=i.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,i.setSize()}for(var ii={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Mo=0;Mo<10;Mo++)ii[Mo+48]=ii[Mo+96]=String(Mo);for(var ya=65;ya<=90;ya++)ii[ya]=String.fromCharCode(ya);for(var _a=1;_a<=12;_a++)ii[_a+111]=ii[_a+63235]="F"+_a;var wo={};wo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},wo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},wo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},wo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},wo.default=yt?wo.macDefault:wo.pcDefault;function Ac(i){var s=i.split(/-(?!$)/);i=s[s.length-1];for(var c,u,p,v,m=0;m<s.length-1;m++){var _=s[m];if(/^(cmd|meta|m)$/i.test(_))v=!0;else if(/^a(lt)?$/i.test(_))c=!0;else if(/^(c|ctrl|control)$/i.test(_))u=!0;else if(/^s(hift)?$/i.test(_))p=!0;else throw new Error("Unrecognized modifier name: "+_)}return c&&(i="Alt-"+i),u&&(i="Ctrl-"+i),v&&(i="Cmd-"+i),p&&(i="Shift-"+i),i}function ps(i){var s={};for(var c in i)if(i.hasOwnProperty(c)){var u=i[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if(u=="..."){delete i[c];continue}for(var p=T(c.split(" "),Ac),v=0;v<p.length;v++){var m=void 0,_=void 0;v==p.length-1?(_=p.join(" "),m=u):(_=p.slice(0,v+1).join(" "),m="...");var C=s[_];if(!C)s[_]=m;else if(C!=m)throw new Error("Inconsistent bindings for "+_)}delete i[c]}for(var P in s)i[P]=s[P];return i}function wa(i,s,c,u){s=dl(s);var p=s.call?s.call(i,u):s[i];if(p===!1)return"nothing";if(p==="...")return"multi";if(p!=null&&c(p))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return wa(i,s.fallthrough,c,u);for(var v=0;v<s.fallthrough.length;v++){var m=wa(i,s.fallthrough[v],c,u);if(m)return m}}}function kc(i){var s=typeof i=="string"?i:ii[i.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function iu(i,s,c){var u=i;return s.altKey&&u!="Alt"&&(i="Alt-"+i),(Zt?s.metaKey:s.ctrlKey)&&u!="Ctrl"&&(i="Ctrl-"+i),(Zt?s.ctrlKey:s.metaKey)&&u!="Mod"&&(i="Cmd-"+i),!c&&s.shiftKey&&u!="Shift"&&(i="Shift-"+i),i}function Mc(i,s){if(H&&i.keyCode==34&&i.char)return!1;var c=ii[i.keyCode];return c==null||i.altGraphKey?!1:(i.keyCode==3&&i.code&&(c=i.code),iu(c,i,s))}function dl(i){return typeof i=="string"?wo[i]:i}function Ui(i,s){for(var c=i.doc.sel.ranges,u=[],p=0;p<c.length;p++){for(var v=s(c[p]);u.length&&K(v.from,he(u).to)<=0;){var m=u.pop();if(K(m.from,v.from)<0){v.from=m.from;break}}u.push(v)}An(i,function(){for(var _=u.length-1;_>=0;_--)Bi(i.doc,"",u[_].from,u[_].to,"+delete");Vi(i)})}function au(i,s,c){var u=De(i.text,s+c,c);return u<0||u>i.text.length?null:u}function su(i,s,c){var u=au(i,s.ch,c);return u==null?null:new O(s.line,u,c<0?"after":"before")}function lu(i,s,c,u,p){if(i){s.doc.direction=="rtl"&&(p=-p);var v=Ee(c,s.doc.direction);if(v){var m=p<0?he(v):v[0],_=p<0==(m.level==1),C=_?"after":"before",P;if(m.level>0||s.doc.direction=="rtl"){var q=Ie(s,c);P=p<0?c.text.length-1:0;var at=lr(s,q,P).top;P=ee(function(bt){return lr(s,q,bt).top==at},p<0==(m.level==1)?m.from:m.to-1,P),C=="before"&&(P=au(c,P,1))}else P=p<0?m.to:m.from;return new O(u,P,C)}}return new O(u,p<0?c.text.length:0,p<0?"before":"after")}function ep(i,s,c,u){var p=Ee(s,i.doc.direction);if(!p)return su(s,c,u);c.ch>=s.text.length?(c.ch=s.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var v=Te(p,c.ch,c.sticky),m=p[v];if(i.doc.direction=="ltr"&&m.level%2==0&&(u>0?m.to>c.ch:m.from<c.ch))return su(s,c,u);var _=function(se,ye){return au(s,se instanceof O?se.ch:se,ye)},C,P=function(se){return i.options.lineWrapping?(C=C||Ie(i,s),Ys(i,s,C,se)):{begin:0,end:s.text.length}},q=P(c.sticky=="before"?_(c,-1):c.ch);if(i.doc.direction=="rtl"||m.level==1){var at=m.level==1==u<0,bt=_(c,at?1:-1);if(bt!=null&&(at?bt<=m.to&&bt<=q.end:bt>=m.from&&bt>=q.begin)){var gt=at?"before":"after";return new O(c.line,bt,gt)}}var It=function(se,ye,le){for(var we=function(dr,zr){return zr?new O(c.line,_(dr,1),"before"):new O(c.line,dr,"after")};se>=0&&se<p.length;se+=ye){var Le=p[se],ke=ye>0==(Le.level!=1),Xe=ke?le.begin:_(le.end,-1);if(Le.from<=Xe&&Xe<Le.to||(Xe=ke?Le.from:_(Le.to,-1),le.begin<=Xe&&Xe<le.end))return we(Xe,ke)}},Ut=It(v+u,u,q);if(Ut)return Ut;var Qt=u>0?q.end:_(q.begin,-1);return Qt!=null&&!(u>0&&Qt==s.text.length)&&(Ut=It(u>0?0:p.length-1,u,P(Qt)),Ut)?Ut:null}var ds={selectAll:is,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),qt)},killLine:function(i){return Ui(i,function(s){if(s.empty()){var c=Ce(i.doc,s.head.line).text.length;return s.head.ch==c&&s.head.line<i.lastLine()?{from:s.head,to:O(s.head.line+1,0)}:{from:s.head,to:O(s.head.line,c)}}else return{from:s.from(),to:s.to()}})},deleteLine:function(i){return Ui(i,function(s){return{from:O(s.from().line,0),to:Se(i.doc,O(s.to().line+1,0))}})},delLineLeft:function(i){return Ui(i,function(s){return{from:O(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(i){return Ui(i,function(s){var c=i.charCoords(s.head,"div").top+5,u=i.coordsChar({left:0,top:c},"div");return{from:u,to:s.from()}})},delWrappedLineRight:function(i){return Ui(i,function(s){var c=i.charCoords(s.head,"div").top+5,u=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:c},"div");return{from:s.from(),to:u}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(O(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(O(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(s){return to(i,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(s){return zi(i,s.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(s){return Hn(i,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(s){var c=i.cursorCoords(s.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:c},"div")},Ne)},goLineLeft:function(i){return i.extendSelectionsBy(function(s){var c=i.cursorCoords(s.head,"div").top+5;return i.coordsChar({left:0,top:c},"div")},Ne)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(s){var c=i.cursorCoords(s.head,"div").top+5,u=i.coordsChar({left:0,top:c},"div");return u.ch<i.getLine(u.line).search(/\S/)?zi(i,s.head):u},Ne)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"codepoint")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("	")},insertSoftTab:function(i){for(var s=[],c=i.listSelections(),u=i.options.tabSize,p=0;p<c.length;p++){var v=c[p].from(),m=Ct(i.getLine(v.line),v.ch,u);s.push(ar(u-m%u))}i.replaceSelections(s)},defaultTab:function(i){i.somethingSelected()?i.indentSelection("add"):i.execCommand("insertTab")},transposeChars:function(i){return An(i,function(){for(var s=i.listSelections(),c=[],u=0;u<s.length;u++)if(s[u].empty()){var p=s[u].head,v=Ce(i.doc,p.line).text;if(v){if(p.ch==v.length&&(p=new O(p.line,p.ch-1)),p.ch>0)p=new O(p.line,p.ch+1),i.replaceRange(v.charAt(p.ch-1)+v.charAt(p.ch-2),O(p.line,p.ch-2),p,"+transpose");else if(p.line>i.doc.first){var m=Ce(i.doc,p.line-1).text;m&&(p=new O(p.line,1),i.replaceRange(v.charAt(0)+i.doc.lineSeparator()+m.charAt(m.length-1),O(p.line-1,m.length-1),p,"+transpose"))}}c.push(new ur(p,p))}i.setSelections(c)})},newlineAndIndent:function(i){return An(i,function(){for(var s=i.listSelections(),c=s.length-1;c>=0;c--)i.replaceRange(i.doc.lineSeparator(),s[c].anchor,s[c].head,"+input");s=i.listSelections();for(var u=0;u<s.length;u++)i.indentLine(s[u].from().line,null,!0);Vi(i)})},openLine:function(i){return i.replaceSelection(`
`,"start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function to(i,s){var c=Ce(i.doc,s),u=Pn(c);return u!=c&&(s=qe(u)),lu(!0,i,u,s,1)}function Hn(i,s){var c=Ce(i.doc,s),u=lo(c);return u!=c&&(s=qe(u)),lu(!0,i,c,s,-1)}function zi(i,s){var c=to(i,s.line),u=Ce(i.doc,c.line),p=Ee(u,i.doc.direction);if(!p||p[0].level==0){var v=Math.max(c.ch,u.text.search(/\S/)),m=s.line==c.line&&s.ch<=v&&s.ch;return O(c.line,m?0:v,c.sticky)}return c}function hs(i,s,c){if(typeof s=="string"&&(s=ds[s],!s))return!1;i.display.input.ensurePolled();var u=i.display.shift,p=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),c&&(i.display.shift=!1),p=s(i)!=ne}finally{i.display.shift=u,i.state.suppressEdits=!1}return p}function uu(i,s,c){for(var u=0;u<i.state.keyMaps.length;u++){var p=wa(s,i.state.keyMaps[u],c,i);if(p)return p}return i.options.extraKeys&&wa(s,i.options.extraKeys,c,i)||wa(s,i.options.keyMap,c,i)}var rp=new Rt;function vs(i,s,c,u){var p=i.state.keySeq;if(p){if(kc(s))return"handled";if(/\'$/.test(s)?i.state.keySeq=null:rp.set(50,function(){i.state.keySeq==p&&(i.state.keySeq=null,i.display.input.reset())}),cu(i,p+" "+s,c,u))return!0}return cu(i,s,c,u)}function cu(i,s,c,u){var p=uu(i,s,u);return p=="multi"&&(i.state.keySeq=s),p=="handled"&&yr(i,"keyHandled",i,s,c),(p=="handled"||p=="multi")&&(U(c),Xo(i)),!!p}function Lc(i,s){var c=Mc(s,!0);return c?s.shiftKey&&!i.state.keySeq?vs(i,"Shift-"+c,s,function(u){return hs(i,u,!0)})||vs(i,c,s,function(u){if(typeof u=="string"?/^go[A-Z]/.test(u):u.motion)return hs(i,u)}):vs(i,c,s,function(u){return hs(i,u)}):!1}function Dc(i,s,c){return vs(i,"'"+c+"'",s,function(u){return hs(i,u,!0)})}var gs=null;function fu(i){var s=this;if(!(i.target&&i.target!=s.display.input.getField())&&(s.curOp.focus=Pt(oe(s)),!Qe(s,i))){M&&N<11&&i.keyCode==27&&(i.returnValue=!1);var c=i.keyCode;s.display.shift=c==16||i.shiftKey;var u=Lc(s,i);H&&(gs=u?c:null,!u&&c==88&&!xo&&(yt?i.metaKey:i.ctrlKey)&&s.replaceSelection("",null,"cut")),rt&&!yt&&!u&&c==46&&i.shiftKey&&!i.ctrlKey&&document.execCommand&&document.execCommand("cut"),c==18&&!/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)&&jc(s)}}function jc(i){var s=i.display.lineDiv;ct(s,"CodeMirror-crosshair");function c(u){(u.keyCode==18||!u.altKey)&&(X(s,"CodeMirror-crosshair"),Me(document,"keyup",c),Me(document,"mouseover",c))}ge(document,"keyup",c),ge(document,"mouseover",c)}function Ic(i){i.keyCode==16&&(this.doc.sel.shift=!1),Qe(this,i)}function Vc(i){var s=this;if(!(i.target&&i.target!=s.display.input.getField())&&!(Rn(s.display,i)||Qe(s,i)||i.ctrlKey&&!i.altKey||yt&&i.metaKey)){var c=i.keyCode,u=i.charCode;if(H&&c==gs){gs=null,U(i);return}if(!(H&&(!i.which||i.which<10)&&Lc(s,i))){var p=String.fromCharCode(u??c);p!="\b"&&(Dc(s,i,p)||s.display.input.onKeyPress(i))}}}var np=400,pu=function(i,s,c){this.time=i,this.pos=s,this.button=c};pu.prototype.compare=function(i,s,c){return this.time+np>i&&K(s,this.pos)==0&&c==this.button};var ms,ys;function op(i,s){var c=+new Date;return ys&&ys.compare(c,i,s)?(ms=ys=null,"triple"):ms&&ms.compare(c,i,s)?(ys=new pu(c,i,s),ms=null,"double"):(ms=new pu(c,i,s),ys=null,"single")}function Rc(i){var s=this,c=s.display;if(!(Qe(s,i)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=i.shiftKey,Rn(c,i)){x||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100));return}if(!du(s,i)){var u=Di(s,i),p=je(i),v=u?op(u,p):"single";Pe(s).focus(),p==1&&s.state.selectingText&&s.state.selectingText(i),!(u&&Nc(s,p,u,v,i))&&(p==1?u?ip(s,u,v,i):de(i)==c.scroller&&U(i):p==2?(u&&os(s.doc,u),setTimeout(function(){return c.input.focus()},20)):p==3&&(dt?s.display.input.onContextMenu(i):Zo(s)))}}}function Nc(i,s,c,u,p){var v="Click";return u=="double"?v="Double"+v:u=="triple"&&(v="Triple"+v),v=(s==1?"Left":s==2?"Middle":"Right")+v,vs(i,iu(v,p),p,function(m){if(typeof m=="string"&&(m=ds[m]),!m)return!1;var _=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),_=m(i,c)!=ne}finally{i.state.suppressEdits=!1}return _})}function Fc(i,s,c){var u=i.getOption("configureMouse"),p=u?u(i,s,c):{};if(p.unit==null){var v=Kt?c.shiftKey&&c.metaKey:c.altKey;p.unit=v?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(p.extend==null||i.doc.extend)&&(p.extend=i.doc.extend||c.shiftKey),p.addNew==null&&(p.addNew=yt?c.metaKey:c.ctrlKey),p.moveOnDrag==null&&(p.moveOnDrag=!(yt?c.altKey:c.ctrlKey)),p}function ip(i,s,c,u){M?setTimeout(_e(Ii,i),0):i.curOp.focus=Pt(oe(i));var p=Fc(i,c,u),v=i.doc.sel,m;i.options.dragDrop&&tr&&!i.isReadOnly()&&c=="single"&&(m=v.contains(s))>-1&&(K((m=v.ranges[m]).from(),s)<0||s.xRel>0)&&(K(m.to(),s)>0||s.xRel<0)?ap(i,u,s,p):sp(i,u,s,p)}function ap(i,s,c,u){var p=i.display,v=!1,m=Br(i,function(P){x&&(p.scroller.draggable=!1),i.state.draggingText=!1,i.state.delayingBlurEvent&&(i.hasFocus()?i.state.delayingBlurEvent=!1:Zo(i)),Me(p.wrapper.ownerDocument,"mouseup",m),Me(p.wrapper.ownerDocument,"mousemove",_),Me(p.scroller,"dragstart",C),Me(p.scroller,"drop",m),v||(U(P),u.addNew||os(i.doc,c,null,null,u.extend),x&&!G||M&&N==9?setTimeout(function(){p.wrapper.ownerDocument.body.focus({preventScroll:!0}),p.input.focus()},20):p.input.focus())}),_=function(P){v=v||Math.abs(s.clientX-P.clientX)+Math.abs(s.clientY-P.clientY)>=10},C=function(){return v=!0};x&&(p.scroller.draggable=!0),i.state.draggingText=m,m.copy=!u.moveOnDrag,ge(p.wrapper.ownerDocument,"mouseup",m),ge(p.wrapper.ownerDocument,"mousemove",_),ge(p.scroller,"dragstart",C),ge(p.scroller,"drop",m),i.state.delayingBlurEvent=!0,setTimeout(function(){return p.input.focus()},20),p.scroller.dragDrop&&p.scroller.dragDrop()}function ai(i,s,c){if(c=="char")return new ur(s,s);if(c=="word")return i.findWordAt(s);if(c=="line")return new ur(O(s.line,0),Se(i.doc,O(s.line+1,0)));var u=c(i,s);return new ur(u.from,u.to)}function sp(i,s,c,u){M&&Zo(i);var p=i.display,v=i.doc;U(s);var m,_,C=v.sel,P=C.ranges;if(u.addNew&&!u.extend?(_=v.sel.contains(c),_>-1?m=P[_]:m=new ur(c,c)):(m=v.sel.primary(),_=v.sel.primIndex),u.unit=="rectangle")u.addNew||(m=new ur(c,c)),c=Di(i,s,!0,!0),_=-1;else{var q=ai(i,c,u.unit);u.extend?m=Zl(m,q.anchor,q.head,u.extend):m=q}u.addNew?_==-1?(_=P.length,nn(v,fo(i,P.concat([m]),_),{scroll:!1,origin:"*mouse"})):P.length>1&&P[_].empty()&&u.unit=="char"&&!u.extend?(nn(v,fo(i,P.slice(0,_).concat(P.slice(_+1)),0),{scroll:!1,origin:"*mouse"}),C=v.sel):Jl(v,_,m,me):(_=0,nn(v,new Fn([m],0),me),C=v.sel);var at=c;function bt(le){if(K(at,le)!=0)if(at=le,u.unit=="rectangle"){for(var we=[],Le=i.options.tabSize,ke=Ct(Ce(v,c.line).text,c.ch,Le),Xe=Ct(Ce(v,le.line).text,le.ch,Le),dr=Math.min(ke,Xe),zr=Math.max(ke,Xe),wr=Math.min(c.line,le.line),kn=Math.min(i.lastLine(),Math.max(c.line,le.line));wr<=kn;wr++){var wn=Ce(v,wr).text,jr=cr(wn,dr,Le);dr==zr?we.push(new ur(O(wr,jr),O(wr,jr))):wn.length>jr&&we.push(new ur(O(wr,jr),O(wr,cr(wn,zr,Le))))}we.length||we.push(new ur(c,c)),nn(v,fo(i,C.ranges.slice(0,_).concat(we),_),{origin:"*mouse",scroll:!1}),i.scrollIntoView(le)}else{var dn=m,Wr=ai(i,le,u.unit),Ir=dn.anchor,Mr;K(Wr.anchor,Ir)>0?(Mr=Wr.head,Ir=er(dn.from(),Wr.anchor)):(Mr=Wr.anchor,Ir=Ae(dn.to(),Wr.head));var Cr=C.ranges.slice(0);Cr[_]=lp(i,new ur(Se(v,Ir),Mr)),nn(v,fo(i,Cr,_),me)}}var gt=p.wrapper.getBoundingClientRect(),It=0;function Ut(le){var we=++It,Le=Di(i,le,!0,u.unit=="rectangle");if(Le)if(K(Le,at)!=0){i.curOp.focus=Pt(oe(i)),bt(Le);var ke=el(p,v);(Le.line>=ke.to||Le.line<ke.from)&&setTimeout(Br(i,function(){It==we&&Ut(le)}),150)}else{var Xe=le.clientY<gt.top?-20:le.clientY>gt.bottom?20:0;Xe&&setTimeout(Br(i,function(){It==we&&(p.scroller.scrollTop+=Xe,Ut(le))}),50)}}function Qt(le){i.state.selectingText=!1,It=1/0,le&&(U(le),p.input.focus()),Me(p.wrapper.ownerDocument,"mousemove",se),Me(p.wrapper.ownerDocument,"mouseup",ye),v.history.lastSelOrigin=null}var se=Br(i,function(le){le.buttons===0||!je(le)?Qt(le):Ut(le)}),ye=Br(i,Qt);i.state.selectingText=ye,ge(p.wrapper.ownerDocument,"mousemove",se),ge(p.wrapper.ownerDocument,"mouseup",ye)}function lp(i,s){var c=s.anchor,u=s.head,p=Ce(i.doc,c.line);if(K(c,u)==0&&c.sticky==u.sticky)return s;var v=Ee(p);if(!v)return s;var m=Te(v,c.ch,c.sticky),_=v[m];if(_.from!=c.ch&&_.to!=c.ch)return s;var C=m+(_.from==c.ch==(_.level!=1)?0:1);if(C==0||C==v.length)return s;var P;if(u.line!=c.line)P=(u.line-c.line)*(i.doc.direction=="ltr"?1:-1)>0;else{var q=Te(v,u.ch,u.sticky),at=q-m||(u.ch-c.ch)*(_.level==1?-1:1);q==C-1||q==C?P=at<0:P=at>0}var bt=v[C+(P?-1:0)],gt=P==(bt.level==1),It=gt?bt.from:bt.to,Ut=gt?"after":"before";return c.ch==It&&c.sticky==Ut?s:new ur(new O(c.line,It,Ut),u)}function Hc(i,s,c,u){var p,v;if(s.touches)p=s.touches[0].clientX,v=s.touches[0].clientY;else try{p=s.clientX,v=s.clientY}catch{return!1}if(p>=Math.floor(i.display.gutters.getBoundingClientRect().right))return!1;u&&U(s);var m=i.display,_=m.lineDiv.getBoundingClientRect();if(v>_.bottom||!Or(i,c))return wt(s);v-=_.top-m.viewOffset;for(var C=0;C<i.display.gutterSpecs.length;++C){var P=m.gutters.childNodes[C];if(P&&P.getBoundingClientRect().right>=p){var q=$n(i.doc,v),at=i.display.gutterSpecs[C];return nr(i,c,i,q,at.className,s),wt(s)}}}function du(i,s){return Hc(i,s,"gutterClick",!0)}function hu(i,s){Rn(i.display,s)||up(i,s)||Qe(i,s,"contextmenu")||dt||i.display.input.onContextMenu(s)}function up(i,s){return Or(i,"gutterContextMenu")?Hc(i,s,"gutterContextMenu",!1):!1}function Bc(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-"),sa(i)}var ba={toString:function(){return"CodeMirror.Init"}},vu={},hl={};function cp(i){var s=i.optionHandlers;function c(u,p,v,m){i.defaults[u]=p,v&&(s[u]=m?function(_,C,P){P!=ba&&v(_,C,P)}:v)}i.defineOption=c,i.Init=ba,c("value","",function(u,p){return u.setValue(p)},!0),c("mode",null,function(u,p){u.doc.modeOption=p,ql(u)},!0),c("indentUnit",2,ql,!0),c("indentWithTabs",!1),c("smartIndent",!0),c("tabSize",4,function(u){ns(u),sa(u),rn(u)},!0),c("lineSeparator",null,function(u,p){if(u.doc.lineSep=p,!!p){var v=[],m=u.doc.first;u.doc.iter(function(C){for(var P=0;;){var q=C.text.indexOf(p,P);if(q==-1)break;P=q+p.length,v.push(O(m,q))}m++});for(var _=v.length-1;_>=0;_--)Bi(u.doc,p,v[_],O(v[_].line,v[_].ch+p.length))}}),c("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(u,p,v){u.state.specialChars=new RegExp(p.source+(p.test("	")?"":"|	"),"g"),v!=ba&&u.refresh()}),c("specialCharPlaceholder",Ti,function(u){return u.refresh()},!0),c("electricChars",!0),c("inputStyle",Tt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),c("spellcheck",!1,function(u,p){return u.getInputField().spellcheck=p},!0),c("autocorrect",!1,function(u,p){return u.getInputField().autocorrect=p},!0),c("autocapitalize",!1,function(u,p){return u.getInputField().autocapitalize=p},!0),c("rtlMoveVisually",!te),c("wholeLineUpdateBefore",!0),c("theme","default",function(u){Bc(u),rs(u)},!0),c("keyMap","default",function(u,p,v){var m=dl(p),_=v!=ba&&dl(v);_&&_.detach&&_.detach(u,m),m.attach&&m.attach(u,_||null)}),c("extraKeys",null),c("configureMouse",null),c("lineWrapping",!1,Uc,!0),c("gutters",[],function(u,p){u.display.gutterSpecs=Gl(p,u.options.lineNumbers),rs(u)},!0),c("fixedGutter",!0,function(u,p){u.display.gutters.style.left=p?qa(u.display)+"px":"0",u.refresh()},!0),c("coverGutterNextToScrollbar",!1,function(u){return fa(u)},!0),c("scrollbarStyle","native",function(u){Zu(u),fa(u),u.display.scrollbars.setScrollTop(u.doc.scrollTop),u.display.scrollbars.setScrollLeft(u.doc.scrollLeft)},!0),c("lineNumbers",!1,function(u,p){u.display.gutterSpecs=Gl(u.options.gutters,p),rs(u)},!0),c("firstLineNumber",1,rs,!0),c("lineNumberFormatter",function(u){return u},rs,!0),c("showCursorWhenSelecting",!1,Ya,!0),c("resetSelectionOnContextMenu",!0),c("lineWiseCopyCut",!0),c("pasteLinesPerSelection",!0),c("selectionsMayTouch",!1),c("readOnly",!1,function(u,p){p=="nocursor"&&(Jo(u),u.display.input.blur()),u.display.input.readOnlyChanged(p)}),c("screenReaderLabel",null,function(u,p){p=p===""?null:p,u.display.input.screenReaderLabelChanged(p)}),c("disableInput",!1,function(u,p){p||u.display.input.reset()},!0),c("dragDrop",!0,br),c("allowDropFileTypes",null),c("cursorBlinkRate",530),c("cursorScrollMargin",0),c("cursorHeight",1,Ya,!0),c("singleCursorHeightPerLine",!0,Ya,!0),c("workTime",100),c("workDelay",100),c("flattenSpans",!0,ns,!0),c("addModeClass",!1,ns,!0),c("pollInterval",100),c("undoDepth",200,function(u,p){return u.doc.history.undoDepth=p}),c("historyEventDelay",1250),c("viewportMargin",10,function(u){return u.refresh()},!0),c("maxHighlightLength",1e4,ns,!0),c("moveInputWithCursor",!0,function(u,p){p||u.display.input.resetPosition()}),c("tabindex",null,function(u,p){return u.display.input.getField().tabIndex=p||""}),c("autofocus",null),c("direction","ltr",function(u,p){return u.doc.setDirection(p)},!0),c("phrases",null)}function br(i,s,c){var u=c&&c!=ba;if(!s!=!u){var p=i.display.dragFunctions,v=s?ge:Me;v(i.display.scroller,"dragstart",p.start),v(i.display.scroller,"dragenter",p.enter),v(i.display.scroller,"dragover",p.over),v(i.display.scroller,"dragleave",p.leave),v(i.display.scroller,"drop",p.drop)}}function Uc(i){i.options.lineWrapping?(ct(i.display.wrapper,"CodeMirror-wrap"),i.display.sizer.style.minWidth="",i.display.sizerWidth=null):(X(i.display.wrapper,"CodeMirror-wrap"),zo(i)),Vl(i),rn(i),sa(i),setTimeout(function(){return fa(i)},100)}function gr(i,s){var c=this;if(!(this instanceof gr))return new gr(i,s);this.options=s=s?ve(s):{},ve(vu,s,!1);var u=s.value;typeof u=="string"?u=new _n(u,s.mode,null,s.lineSeparator,s.direction):s.mode&&(u.modeOption=s.mode),this.doc=u;var p=new gr.inputStyles[s.inputStyle](this),v=this.display=new Hf(i,u,p,s);v.wrapper.CodeMirror=this,Bc(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Zu(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Rt,keySeq:null,specialChars:null},s.autofocus&&!Tt&&v.input.focus(),M&&N<11&&setTimeout(function(){return c.display.input.reset(!0)},20),_s(this),Tc(),Ao(this),this.curOp.forceUpdate=!0,pa(this,u),s.autofocus&&!Tt||this.hasFocus()?setTimeout(function(){c.hasFocus()&&!c.state.focused&&Qs(c)},20):Jo(this);for(var m in hl)hl.hasOwnProperty(m)&&hl[m](this,s[m],ba);rc(this),s.finishInit&&s.finishInit(this);for(var _=0;_<ws.length;++_)ws[_](this);Ni(this),x&&s.lineWrapping&&getComputedStyle(v.lineDiv).textRendering=="optimizelegibility"&&(v.lineDiv.style.textRendering="auto")}gr.defaults=vu,gr.optionHandlers=hl;function _s(i){var s=i.display;ge(s.scroller,"mousedown",Br(i,Rc)),M&&N<11?ge(s.scroller,"dblclick",Br(i,function(C){if(!Qe(i,C)){var P=Di(i,C);if(!(!P||du(i,C)||Rn(i.display,C))){U(C);var q=i.findWordAt(P);os(i.doc,q.anchor,q.head)}}})):ge(s.scroller,"dblclick",function(C){return Qe(i,C)||U(C)}),ge(s.scroller,"contextmenu",function(C){return hu(i,C)}),ge(s.input.getField(),"contextmenu",function(C){s.scroller.contains(C.target)||hu(i,C)});var c,u={end:0};function p(){s.activeTouch&&(c=setTimeout(function(){return s.activeTouch=null},1e3),u=s.activeTouch,u.end=+new Date)}function v(C){if(C.touches.length!=1)return!1;var P=C.touches[0];return P.radiusX<=1&&P.radiusY<=1}function m(C,P){if(P.left==null)return!0;var q=P.left-C.left,at=P.top-C.top;return q*q+at*at>20*20}ge(s.scroller,"touchstart",function(C){if(!Qe(i,C)&&!v(C)&&!du(i,C)){s.input.ensurePolled(),clearTimeout(c);var P=+new Date;s.activeTouch={start:P,moved:!1,prev:P-u.end<=300?u:null},C.touches.length==1&&(s.activeTouch.left=C.touches[0].pageX,s.activeTouch.top=C.touches[0].pageY)}}),ge(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),ge(s.scroller,"touchend",function(C){var P=s.activeTouch;if(P&&!Rn(s,C)&&P.left!=null&&!P.moved&&new Date-P.start<300){var q=i.coordsChar(s.activeTouch,"page"),at;!P.prev||m(P,P.prev)?at=new ur(q,q):!P.prev.prev||m(P,P.prev.prev)?at=i.findWordAt(q):at=new ur(O(q.line,0),Se(i.doc,O(q.line+1,0))),i.setSelection(at.anchor,at.head),i.focus(),U(C)}p()}),ge(s.scroller,"touchcancel",p),ge(s.scroller,"scroll",function(){s.scroller.clientHeight&&(Za(i,s.scroller.scrollTop),Qo(i,s.scroller.scrollLeft,!0),nr(i,"scroll",i))}),ge(s.scroller,"mousewheel",function(C){return ic(i,C)}),ge(s.scroller,"DOMMouseScroll",function(C){return ic(i,C)}),ge(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(C){Qe(i,C)||Ht(C)},over:function(C){Qe(i,C)||(tp(i,C),Ht(C))},start:function(C){return fs(i,C)},drop:Br(i,Qf),leave:function(C){Qe(i,C)||Oc(i)}};var _=s.input.getField();ge(_,"keyup",function(C){return Ic.call(i,C)}),ge(_,"keydown",Br(i,fu)),ge(_,"keypress",Br(i,Vc)),ge(_,"focus",function(C){return Qs(i,C)}),ge(_,"blur",function(C){return Jo(i,C)})}var ws=[];gr.defineInitHook=function(i){return ws.push(i)};function bs(i,s,c,u){var p=i.doc,v;c==null&&(c="add"),c=="smart"&&(p.mode.indent?v=No(i,s).state:c="prev");var m=i.options.tabSize,_=Ce(p,s),C=Ct(_.text,null,m);_.stateAfter&&(_.stateAfter=null);var P=_.text.match(/^\s*/)[0],q;if(!u&&!/\S/.test(_.text))q=0,c="not";else if(c=="smart"&&(q=p.mode.indent(v,_.text.slice(P.length),_.text),q==ne||q>150)){if(!u)return;c="prev"}c=="prev"?s>p.first?q=Ct(Ce(p,s-1).text,null,m):q=0:c=="add"?q=C+i.options.indentUnit:c=="subtract"?q=C-i.options.indentUnit:typeof c=="number"&&(q=C+c),q=Math.max(0,q);var at="",bt=0;if(i.options.indentWithTabs)for(var gt=Math.floor(q/m);gt;--gt)bt+=m,at+="	";if(bt<q&&(at+=ar(q-bt)),at!=P)return Bi(p,at,O(s,0),O(s,P.length),"+input"),_.stateAfter=null,!0;for(var It=0;It<p.sel.ranges.length;It++){var Ut=p.sel.ranges[It];if(Ut.head.line==s&&Ut.head.ch<P.length){var Qt=O(s,P.length);Jl(p,It,new ur(Qt,Qt));break}}}var eo=null;function Ca(i){eo=i}function vl(i,s,c,u,p){var v=i.doc;i.display.shift=!1,u||(u=v.sel);var m=+new Date-200,_=p=="paste"||i.state.pasteIncoming>m,C=Qr(s),P=null;if(_&&u.ranges.length>1)if(eo&&eo.text.join(`
`)==s){if(u.ranges.length%eo.text.length==0){P=[];for(var q=0;q<eo.text.length;q++)P.push(v.splitLines(eo.text[q]))}}else C.length==u.ranges.length&&i.options.pasteLinesPerSelection&&(P=T(C,function(se){return[se]}));for(var at=i.curOp.updateInput,bt=u.ranges.length-1;bt>=0;bt--){var gt=u.ranges[bt],It=gt.from(),Ut=gt.to();gt.empty()&&(c&&c>0?It=O(It.line,It.ch-c):i.state.overwrite&&!_?Ut=O(Ut.line,Math.min(Ce(v,Ut.line).text.length,Ut.ch+he(C).length)):_&&eo&&eo.lineWise&&eo.text.join(`
`)==C.join(`
`)&&(It=Ut=O(It.line,0)));var Qt={from:It,to:Ut,text:P?P[bt%P.length]:C,origin:p||(_?"paste":i.state.cutIncoming>m?"cut":"+input")};ha(i.doc,Qt),yr(i,"inputRead",i,Qt)}s&&!_&&gu(i,s),Vi(i),i.curOp.updateInput<2&&(i.curOp.updateInput=at),i.curOp.typing=!0,i.state.pasteIncoming=i.state.cutIncoming=-1}function Cs(i,s){var c=i.clipboardData&&i.clipboardData.getData("Text");if(c)return i.preventDefault(),!s.isReadOnly()&&!s.options.disableInput&&s.hasFocus()&&An(s,function(){return vl(s,c,0,null,"paste")}),!0}function gu(i,s){if(!(!i.options.electricChars||!i.options.smartIndent))for(var c=i.doc.sel,u=c.ranges.length-1;u>=0;u--){var p=c.ranges[u];if(!(p.head.ch>100||u&&c.ranges[u-1].head.line==p.head.line)){var v=i.getModeAt(p.head),m=!1;if(v.electricChars){for(var _=0;_<v.electricChars.length;_++)if(s.indexOf(v.electricChars.charAt(_))>-1){m=bs(i,p.head.line,"smart");break}}else v.electricInput&&v.electricInput.test(Ce(i.doc,p.head.line).text.slice(0,p.head.ch))&&(m=bs(i,p.head.line,"smart"));m&&yr(i,"electricInput",i,p.head.line)}}}function mu(i){for(var s=[],c=[],u=0;u<i.doc.sel.ranges.length;u++){var p=i.doc.sel.ranges[u].head.line,v={anchor:O(p,0),head:O(p+1,0)};c.push(v),s.push(i.getRange(v.anchor,v.head))}return{text:s,ranges:c}}function yu(i,s,c,u){i.setAttribute("autocorrect",c?"on":"off"),i.setAttribute("autocapitalize",u?"on":"off"),i.setAttribute("spellcheck",!!s)}function zc(){var i=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=A("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?i.style.width="1000px":i.setAttribute("wrap","off"),Nt&&(i.style.border="1px solid black"),s}function _u(i){var s=i.optionHandlers,c=i.helpers={};i.prototype={constructor:i,focus:function(){Pe(this).focus(),this.display.input.focus()},setOption:function(u,p){var v=this.options,m=v[u];v[u]==p&&u!="mode"||(v[u]=p,s.hasOwnProperty(u)&&Br(this,s[u])(this,p,m),nr(this,"optionChange",this,u))},getOption:function(u){return this.options[u]},getDoc:function(){return this.doc},addKeyMap:function(u,p){this.state.keyMaps[p?"push":"unshift"](dl(u))},removeKeyMap:function(u){for(var p=this.state.keyMaps,v=0;v<p.length;++v)if(p[v]==u||p[v].name==u)return p.splice(v,1),!0},addOverlay:fn(function(u,p){var v=u.token?u:i.getMode(this.options,u);if(v.startState)throw new Error("Overlays may not be stateful.");B(this.state.overlays,{mode:v,modeSpec:u,opaque:p&&p.opaque,priority:p&&p.priority||0},function(m){return m.priority}),this.state.modeGen++,rn(this)}),removeOverlay:fn(function(u){for(var p=this.state.overlays,v=0;v<p.length;++v){var m=p[v].modeSpec;if(m==u||typeof u=="string"&&m.name==u){p.splice(v,1),this.state.modeGen++,rn(this);return}}}),indentLine:fn(function(u,p,v){typeof p!="string"&&typeof p!="number"&&(p==null?p=this.options.smartIndent?"smart":"prev":p=p?"add":"subtract"),vo(this.doc,u)&&bs(this,u,p,v)}),indentSelection:fn(function(u){for(var p=this.doc.sel.ranges,v=-1,m=0;m<p.length;m++){var _=p[m];if(_.empty())_.head.line>v&&(bs(this,_.head.line,u,!0),v=_.head.line,m==this.doc.sel.primIndex&&Vi(this));else{var C=_.from(),P=_.to(),q=Math.max(v,C.line);v=Math.min(this.lastLine(),P.line-(P.ch?0:1))+1;for(var at=q;at<v;++at)bs(this,at,u);var bt=this.doc.sel.ranges;C.ch==0&&p.length==bt.length&&bt[m].from().ch>0&&Jl(this.doc,m,new ur(C,bt[m].to()),qt)}}}),getTokenAt:function(u,p){return Dn(this,u,p)},getLineTokens:function(u,p){return Dn(this,O(u),p,!0)},getTokenTypeAt:function(u){u=Se(this.doc,u);var p=La(this,Ce(this.doc,u.line)),v=0,m=(p.length-1)/2,_=u.ch,C;if(_==0)C=p[2];else for(;;){var P=v+m>>1;if((P?p[P*2-1]:0)>=_)m=P;else if(p[P*2+1]<_)v=P+1;else{C=p[P*2+2];break}}var q=C?C.indexOf("overlay "):-1;return q<0?C:q==0?null:C.slice(0,q-1)},getModeAt:function(u){var p=this.doc.mode;return p.innerMode?i.innerMode(p,this.getTokenAt(u).state).mode:p},getHelper:function(u,p){return this.getHelpers(u,p)[0]},getHelpers:function(u,p){var v=[];if(!c.hasOwnProperty(p))return v;var m=c[p],_=this.getModeAt(u);if(typeof _[p]=="string")m[_[p]]&&v.push(m[_[p]]);else if(_[p])for(var C=0;C<_[p].length;C++){var P=m[_[p][C]];P&&v.push(P)}else _.helperType&&m[_.helperType]?v.push(m[_.helperType]):m[_.name]&&v.push(m[_.name]);for(var q=0;q<m._global.length;q++){var at=m._global[q];at.pred(_,this)&&zt(v,at.val)==-1&&v.push(at.val)}return v},getStateAfter:function(u,p){var v=this.doc;return u=or(v,u??v.first+v.size-1),No(this,u+1,p).state},cursorCoords:function(u,p){var v,m=this.doc.sel.primary();return u==null?v=m.head:typeof u=="object"?v=Se(this.doc,u):v=u?m.from():m.to(),Nn(this,v,p||"page")},charCoords:function(u,p){return Mi(this,Se(this.doc,u),p||"page")},coordsChar:function(u,p){return u=zu(this,u,p||"page"),Dl(this,u.left,u.top)},lineAtHeight:function(u,p){return u=zu(this,{top:u,left:0},p||"page").top,$n(this.doc,u+this.display.viewOffset)},heightAtLine:function(u,p,v){var m=!1,_;if(typeof u=="number"){var C=this.doc.first+this.doc.size-1;u<this.doc.first?u=this.doc.first:u>C&&(u=C,m=!0),_=Ce(this.doc,u)}else _=u;return qs(this,_,{top:0,left:0},p||"page",v||m).top+(m?this.doc.height-Ar(_):0)},defaultTextHeight:function(){return la(this.display)},defaultCharWidth:function(){return ua(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(u,p,v,m,_){var C=this.display;u=Nn(this,Se(this.doc,u));var P=u.bottom,q=u.left;if(p.style.position="absolute",p.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(p),C.sizer.appendChild(p),m=="over")P=u.top;else if(m=="above"||m=="near"){var at=Math.max(C.wrapper.clientHeight,this.doc.height),bt=Math.max(C.sizer.clientWidth,C.lineSpace.clientWidth);(m=="above"||u.bottom+p.offsetHeight>at)&&u.top>p.offsetHeight?P=u.top-p.offsetHeight:u.bottom+p.offsetHeight<=at&&(P=u.bottom),q+p.offsetWidth>bt&&(q=bt-p.offsetWidth)}p.style.top=P+"px",p.style.left=p.style.right="",_=="right"?(q=C.sizer.clientWidth-p.offsetWidth,p.style.right="0px"):(_=="left"?q=0:_=="middle"&&(q=(C.sizer.clientWidth-p.offsetWidth)/2),p.style.left=q+"px"),v&&Lf(this,{left:q,top:P,right:q+p.offsetWidth,bottom:P+p.offsetHeight})},triggerOnKeyDown:fn(fu),triggerOnKeyPress:fn(Vc),triggerOnKeyUp:Ic,triggerOnMouseDown:fn(Rc),execCommand:function(u){if(ds.hasOwnProperty(u))return ds[u].call(null,this)},triggerElectric:fn(function(u){gu(this,u)}),findPosH:function(u,p,v,m){var _=1;p<0&&(_=-1,p=-p);for(var C=Se(this.doc,u),P=0;P<p&&(C=on(this.doc,C,_,v,m),!C.hitSide);++P);return C},moveH:fn(function(u,p){var v=this;this.extendSelectionsBy(function(m){return v.display.shift||v.doc.extend||m.empty()?on(v.doc,m.head,u,p,v.options.rtlMoveVisually):u<0?m.from():m.to()},Ne)}),deleteH:fn(function(u,p){var v=this.doc.sel,m=this.doc;v.somethingSelected()?m.replaceSelection("",null,"+delete"):Ui(this,function(_){var C=on(m,_.head,u,p,!1);return u<0?{from:C,to:_.head}:{from:_.head,to:C}})}),findPosV:function(u,p,v,m){var _=1,C=m;p<0&&(_=-1,p=-p);for(var P=Se(this.doc,u),q=0;q<p;++q){var at=Nn(this,P,"div");if(C==null?C=at.left:at.left=C,P=Wc(this,at,_,v),P.hitSide)break}return P},moveV:fn(function(u,p){var v=this,m=this.doc,_=[],C=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(q){if(C)return u<0?q.from():q.to();var at=Nn(v,q.head,"div");q.goalColumn!=null&&(at.left=q.goalColumn),_.push(at.left);var bt=Wc(v,at,u,p);return p=="page"&&q==m.sel.primary()&&Bl(v,Mi(v,bt,"div").top-at.top),bt},Ne),_.length)for(var P=0;P<m.sel.ranges.length;P++)m.sel.ranges[P].goalColumn=_[P]}),findWordAt:function(u){var p=this.doc,v=Ce(p,u.line).text,m=u.ch,_=u.ch;if(v){var C=this.getHelper(u,"wordChars");(u.sticky=="before"||_==v.length)&&m?--m:++_;for(var P=v.charAt(m),q=Et(P,C)?function(at){return Et(at,C)}:/\s/.test(P)?function(at){return/\s/.test(at)}:function(at){return!/\s/.test(at)&&!Et(at)};m>0&&q(v.charAt(m-1));)--m;for(;_<v.length&&q(v.charAt(_));)++_}return new ur(O(u.line,m),O(u.line,_))},toggleOverwrite:function(u){u!=null&&u==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ct(this.display.cursorDiv,"CodeMirror-overwrite"):X(this.display.cursorDiv,"CodeMirror-overwrite"),nr(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Pt(oe(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:fn(function(u,p){Xa(this,u,p)}),getScrollInfo:function(){var u=this.display.scroller;return{left:u.scrollLeft,top:u.scrollTop,height:u.scrollHeight-I(this)-this.display.barHeight,width:u.scrollWidth-I(this)-this.display.barWidth,clientHeight:ut(this),clientWidth:it(this)}},scrollIntoView:fn(function(u,p){u==null?(u={from:this.doc.sel.primary().head,to:null},p==null&&(p=this.options.cursorScrollMargin)):typeof u=="number"?u={from:O(u,0),to:null}:u.from==null&&(u={from:u,to:null}),u.to||(u.to=u.from),u.margin=p||0,u.from.line!=null?Po(this,u):Hr(this,u.from,u.to,u.margin)}),setSize:fn(function(u,p){var v=this,m=function(C){return typeof C=="number"||/^\d+$/.test(String(C))?C+"px":C};u!=null&&(this.display.wrapper.style.width=m(u)),p!=null&&(this.display.wrapper.style.height=m(p)),this.options.lineWrapping&&Bu(this);var _=this.display.viewFrom;this.doc.iter(_,this.display.viewTo,function(C){if(C.widgets){for(var P=0;P<C.widgets.length;P++)if(C.widgets[P].noHScroll){qo(v,_,"widget");break}}++_}),this.curOp.forceUpdate=!0,nr(this,"refresh",this)}),operation:function(u){return An(this,u)},startOperation:function(){return Ao(this)},endOperation:function(){return Ni(this)},refresh:fn(function(){var u=this.display.cachedTextHeight;rn(this),this.curOp.forceUpdate=!0,sa(this),Xa(this,this.doc.scrollLeft,this.doc.scrollTop),Wl(this.display),(u==null||Math.abs(u-la(this.display))>.5||this.options.lineWrapping)&&Vl(this),nr(this,"refresh",this)}),swapDoc:fn(function(u){var p=this.doc;return p.cm=null,this.state.selectingText&&this.state.selectingText(),pa(this,u),sa(this),this.display.input.reset(),Xa(this,u.scrollLeft,u.scrollTop),this.curOp.forceScroll=!0,yr(this,"swapDoc",this,p),p}),phrase:function(u){var p=this.options.phrases;return p&&Object.prototype.hasOwnProperty.call(p,u)?p[u]:u},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Kn(i),i.registerHelper=function(u,p,v){c.hasOwnProperty(u)||(c[u]=i[u]={_global:[]}),c[u][p]=v},i.registerGlobalHelper=function(u,p,v,m){i.registerHelper(u,p,m),c[u]._global.push({pred:v,val:m})}}function on(i,s,c,u,p){var v=s,m=c,_=Ce(i,s.line),C=p&&i.direction=="rtl"?-c:c;function P(){var ye=s.line+C;return ye<i.first||ye>=i.first+i.size?!1:(s=new O(ye,s.ch,s.sticky),_=Ce(i,ye))}function q(ye){var le;if(u=="codepoint"){var we=_.text.charCodeAt(s.ch+(c>0?0:-1));if(isNaN(we))le=null;else{var Le=c>0?we>=55296&&we<56320:we>=56320&&we<57343;le=new O(s.line,Math.max(0,Math.min(_.text.length,s.ch+c*(Le?2:1))),-c)}}else p?le=ep(i.cm,_,s,c):le=su(_,s,c);if(le==null)if(!ye&&P())s=lu(p,i.cm,_,s.line,C);else return!1;else s=le;return!0}if(u=="char"||u=="codepoint")q();else if(u=="column")q(!0);else if(u=="word"||u=="group")for(var at=null,bt=u=="group",gt=i.cm&&i.cm.getHelper(s,"wordChars"),It=!0;!(c<0&&!q(!It));It=!1){var Ut=_.text.charAt(s.ch)||`
`,Qt=Et(Ut,gt)?"w":bt&&Ut==`
`?"n":!bt||/\s/.test(Ut)?null:"p";if(bt&&!It&&!Qt&&(Qt="s"),at&&at!=Qt){c<0&&(c=1,q(),s.sticky="after");break}if(Qt&&(at=Qt),c>0&&!q(!It))break}var se=fl(i,s,v,m,!0);return Ft(v,se)&&(se.hitSide=!0),se}function Wc(i,s,c,u){var p=i.doc,v=s.left,m;if(u=="page"){var _=Math.min(i.display.wrapper.clientHeight,Pe(i).innerHeight||p(i).documentElement.clientHeight),C=Math.max(_-.5*la(i.display),3);m=(c>0?s.bottom:s.top)+c*C}else u=="line"&&(m=c>0?s.bottom+3:s.top-3);for(var P;P=Dl(i,v,m),!!P.outside;){if(c<0?m<=0:m>=p.height){P.hitSide=!0;break}m+=c*5}return P}var ir=function(i){this.cm=i,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Rt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ir.prototype.init=function(i){var s=this,c=this,u=c.cm,p=c.div=i.lineDiv;p.contentEditable=!0,yu(p,u.options.spellcheck,u.options.autocorrect,u.options.autocapitalize);function v(_){for(var C=_.target;C;C=C.parentNode){if(C==p)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(C.className))break}return!1}ge(p,"paste",function(_){!v(_)||Qe(u,_)||Cs(_,u)||N<=11&&setTimeout(Br(u,function(){return s.updateFromDOM()}),20)}),ge(p,"compositionstart",function(_){s.composing={data:_.data,done:!1}}),ge(p,"compositionupdate",function(_){s.composing||(s.composing={data:_.data,done:!1})}),ge(p,"compositionend",function(_){s.composing&&(_.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),ge(p,"touchstart",function(){return c.forceCompositionEnd()}),ge(p,"input",function(){s.composing||s.readFromDOMSoon()});function m(_){if(!(!v(_)||Qe(u,_))){if(u.somethingSelected())Ca({lineWise:!1,text:u.getSelections()}),_.type=="cut"&&u.replaceSelection("",null,"cut");else if(u.options.lineWiseCopyCut){var C=mu(u);Ca({lineWise:!0,text:C.text}),_.type=="cut"&&u.operation(function(){u.setSelections(C.ranges,0,qt),u.replaceSelection("",null,"cut")})}else return;if(_.clipboardData){_.clipboardData.clearData();var P=eo.text.join(`
`);if(_.clipboardData.setData("Text",P),_.clipboardData.getData("Text")==P){_.preventDefault();return}}var q=zc(),at=q.firstChild;yu(at),u.display.lineSpace.insertBefore(q,u.display.lineSpace.firstChild),at.value=eo.text.join(`
`);var bt=Pt(p.ownerDocument);Wt(at),setTimeout(function(){u.display.lineSpace.removeChild(q),bt.focus(),bt==p&&c.showPrimarySelection()},50)}}ge(p,"copy",m),ge(p,"cut",m)},ir.prototype.screenReaderLabelChanged=function(i){i?this.div.setAttribute("aria-label",i):this.div.removeAttribute("aria-label")},ir.prototype.prepareSelection=function(){var i=Gu(this.cm,!1);return i.focus=Pt(this.div.ownerDocument)==this.div,i},ir.prototype.showSelection=function(i,s){!i||!this.cm.display.view.length||((i.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(i))},ir.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ir.prototype.showPrimarySelection=function(){var i=this.getSelection(),s=this.cm,c=s.doc.sel.primary(),u=c.from(),p=c.to();if(s.display.viewTo==s.display.viewFrom||u.line>=s.display.viewTo||p.line<s.display.viewFrom){i.removeAllRanges();return}var v=ml(s,i.anchorNode,i.anchorOffset),m=ml(s,i.focusNode,i.focusOffset);if(!(v&&!v.bad&&m&&!m.bad&&K(er(v,m),u)==0&&K(Ae(v,m),p)==0)){var _=s.display.view,C=u.line>=s.display.viewFrom&&gl(s,u)||{node:_[0].measure.map[2],offset:0},P=p.line<s.display.viewTo&&gl(s,p);if(!P){var q=_[_.length-1].measure,at=q.maps?q.maps[q.maps.length-1]:q.map;P={node:at[at.length-1],offset:at[at.length-2]-at[at.length-3]}}if(!C||!P){i.removeAllRanges();return}var bt=i.rangeCount&&i.getRangeAt(0),gt;try{gt=E(C.node,C.offset,P.offset,P.node)}catch{}gt&&(!rt&&s.state.focused?(i.collapse(C.node,C.offset),gt.collapsed||(i.removeAllRanges(),i.addRange(gt))):(i.removeAllRanges(),i.addRange(gt)),bt&&i.anchorNode==null?i.addRange(bt):rt&&this.startGracePeriod()),this.rememberSelection()}},ir.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){i.gracePeriod=!1,i.selectionChanged()&&i.cm.operation(function(){return i.cm.curOp.selectionChanged=!0})},20)},ir.prototype.showMultipleSelections=function(i){et(this.cm.display.cursorDiv,i.cursors),et(this.cm.display.selectionDiv,i.selection)},ir.prototype.rememberSelection=function(){var i=this.getSelection();this.lastAnchorNode=i.anchorNode,this.lastAnchorOffset=i.anchorOffset,this.lastFocusNode=i.focusNode,this.lastFocusOffset=i.focusOffset},ir.prototype.selectionInEditor=function(){var i=this.getSelection();if(!i.rangeCount)return!1;var s=i.getRangeAt(0).commonAncestorContainer;return At(this.div,s)},ir.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Pt(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},ir.prototype.blur=function(){this.div.blur()},ir.prototype.getField=function(){return this.div},ir.prototype.supportsTouch=function(){return!0},ir.prototype.receivedFocus=function(){var i=this,s=this;this.selectionInEditor()?setTimeout(function(){return i.pollSelection()},20):An(this.cm,function(){return s.cm.curOp.selectionChanged=!0});function c(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,c))}this.polling.set(this.cm.options.pollInterval,c)},ir.prototype.selectionChanged=function(){var i=this.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset},ir.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var i=this.getSelection(),s=this.cm;if(jt&&L&&this.cm.display.gutterSpecs.length&&wu(i.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var c=ml(s,i.anchorNode,i.anchorOffset),u=ml(s,i.focusNode,i.focusOffset);c&&u&&An(s,function(){nn(s.doc,ti(c,u),qt),(c.bad||u.bad)&&(s.curOp.selectionChanged=!0)})}}},ir.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var i=this.cm,s=i.display,c=i.doc.sel.primary(),u=c.from(),p=c.to();if(u.ch==0&&u.line>i.firstLine()&&(u=O(u.line-1,Ce(i.doc,u.line-1).length)),p.ch==Ce(i.doc,p.line).text.length&&p.line<i.lastLine()&&(p=O(p.line+1,0)),u.line<s.viewFrom||p.line>s.viewTo-1)return!1;var v,m,_;u.line==s.viewFrom||(v=_o(i,u.line))==0?(m=qe(s.view[0].line),_=s.view[0].node):(m=qe(s.view[v].line),_=s.view[v-1].node.nextSibling);var C=_o(i,p.line),P,q;if(C==s.view.length-1?(P=s.viewTo-1,q=s.lineDiv.lastChild):(P=qe(s.view[C+1].line)-1,q=s.view[C+1].node.previousSibling),!_)return!1;for(var at=i.doc.splitLines(Kc(i,_,q,m,P)),bt=Tn(i.doc,O(m,0),O(P,Ce(i.doc,P).text.length));at.length>1&&bt.length>1;)if(he(at)==he(bt))at.pop(),bt.pop(),P--;else if(at[0]==bt[0])at.shift(),bt.shift(),m++;else break;for(var gt=0,It=0,Ut=at[0],Qt=bt[0],se=Math.min(Ut.length,Qt.length);gt<se&&Ut.charCodeAt(gt)==Qt.charCodeAt(gt);)++gt;for(var ye=he(at),le=he(bt),we=Math.min(ye.length-(at.length==1?gt:0),le.length-(bt.length==1?gt:0));It<we&&ye.charCodeAt(ye.length-It-1)==le.charCodeAt(le.length-It-1);)++It;if(at.length==1&&bt.length==1&&m==u.line)for(;gt&&gt>u.ch&&ye.charCodeAt(ye.length-It-1)==le.charCodeAt(le.length-It-1);)gt--,It++;at[at.length-1]=ye.slice(0,ye.length-It).replace(/^\u200b+/,""),at[0]=at[0].slice(gt).replace(/\u200b+$/,"");var Le=O(m,gt),ke=O(P,bt.length?he(bt).length-It:0);if(at.length>1||at[0]||K(Le,ke))return Bi(i.doc,at,Le,ke,"+input"),!0},ir.prototype.ensurePolled=function(){this.forceCompositionEnd()},ir.prototype.reset=function(){this.forceCompositionEnd()},ir.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ir.prototype.readFromDOMSoon=function(){var i=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(i.readDOMTimeout=null,i.composing)if(i.composing.done)i.composing=null;else return;i.updateFromDOM()},80))},ir.prototype.updateFromDOM=function(){var i=this;(this.cm.isReadOnly()||!this.pollContent())&&An(this.cm,function(){return rn(i.cm)})},ir.prototype.setUneditable=function(i){i.contentEditable="false"},ir.prototype.onKeyPress=function(i){i.charCode==0||this.composing||(i.preventDefault(),this.cm.isReadOnly()||Br(this.cm,vl)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0))},ir.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")},ir.prototype.onContextMenu=function(){},ir.prototype.resetPosition=function(){},ir.prototype.needsContentAttribute=!0;function gl(i,s){var c=We(i,s.line);if(!c||c.hidden)return null;var u=Ce(i.doc,s.line),p=_t(c,u,s.line),v=Ee(u,i.doc.direction),m="left";if(v){var _=Te(v,s.ch);m=_%2?"right":"left"}var C=Ka(p.map,s.ch,m);return C.offset=C.collapse=="right"?C.end:C.start,C}function wu(i){for(var s=i;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function Lo(i,s){return s&&(i.bad=!0),i}function Kc(i,s,c,u,p){var v="",m=!1,_=i.doc.lineSeparator(),C=!1;function P(gt){return function(It){return It.id==gt}}function q(){m&&(v+=_,C&&(v+=_),m=C=!1)}function at(gt){gt&&(q(),v+=gt)}function bt(gt){if(gt.nodeType==1){var It=gt.getAttribute("cm-text");if(It){at(It);return}var Ut=gt.getAttribute("cm-marker"),Qt;if(Ut){var se=i.findMarks(O(u,0),O(p+1,0),P(+Ut));se.length&&(Qt=se[0].find(0))&&at(Tn(i.doc,Qt.from,Qt.to).join(_));return}if(gt.getAttribute("contenteditable")=="false")return;var ye=/^(pre|div|p|li|table|br)$/i.test(gt.nodeName);if(!/^br$/i.test(gt.nodeName)&&gt.textContent.length==0)return;ye&&q();for(var le=0;le<gt.childNodes.length;le++)bt(gt.childNodes[le]);/^(pre|p)$/i.test(gt.nodeName)&&(C=!0),ye&&(m=!0)}else gt.nodeType==3&&at(gt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;bt(s),s!=c;)s=s.nextSibling,C=!1;return v}function ml(i,s,c){var u;if(s==i.display.lineDiv){if(u=i.display.lineDiv.childNodes[c],!u)return Lo(i.clipPos(O(i.display.viewTo-1)),!0);s=null,c=0}else for(u=s;;u=u.parentNode){if(!u||u==i.display.lineDiv)return null;if(u.parentNode&&u.parentNode==i.display.lineDiv)break}for(var p=0;p<i.display.view.length;p++){var v=i.display.view[p];if(v.node==u)return fp(v,s,c)}}function fp(i,s,c){var u=i.text.firstChild,p=!1;if(!s||!At(u,s))return Lo(O(qe(i.line),0),!0);if(s==u&&(p=!0,s=u.childNodes[c],c=0,!s)){var v=i.rest?he(i.rest):i.line;return Lo(O(qe(v),v.text.length),p)}var m=s.nodeType==3?s:null,_=s;for(!m&&s.childNodes.length==1&&s.firstChild.nodeType==3&&(m=s.firstChild,c&&(c=m.nodeValue.length));_.parentNode!=u;)_=_.parentNode;var C=i.measure,P=C.maps;function q(Qt,se,ye){for(var le=-1;le<(P?P.length:0);le++)for(var we=le<0?C.map:P[le],Le=0;Le<we.length;Le+=3){var ke=we[Le+2];if(ke==Qt||ke==se){var Xe=qe(le<0?i.line:i.rest[le]),dr=we[Le]+ye;return(ye<0||ke!=Qt)&&(dr=we[Le+(ye?1:0)]),O(Xe,dr)}}}var at=q(m,_,c);if(at)return Lo(at,p);for(var bt=_.nextSibling,gt=m?m.nodeValue.length-c:0;bt;bt=bt.nextSibling){if(at=q(bt,bt.firstChild,0),at)return Lo(O(at.line,at.ch-gt),p);gt+=bt.textContent.length}for(var It=_.previousSibling,Ut=c;It;It=It.previousSibling){if(at=q(It,It.firstChild,-1),at)return Lo(O(at.line,at.ch+Ut),p);Ut+=It.textContent.length}}var kr=function(i){this.cm=i,this.prevInput="",this.pollingFast=!1,this.polling=new Rt,this.hasSelection=!1,this.composing=null,this.resetting=!1};kr.prototype.init=function(i){var s=this,c=this,u=this.cm;this.createField(i);var p=this.textarea;i.wrapper.insertBefore(this.wrapper,i.wrapper.firstChild),Nt&&(p.style.width="0px"),ge(p,"input",function(){M&&N>=9&&s.hasSelection&&(s.hasSelection=null),c.poll()}),ge(p,"paste",function(m){Qe(u,m)||Cs(m,u)||(u.state.pasteIncoming=+new Date,c.fastPoll())});function v(m){if(!Qe(u,m)){if(u.somethingSelected())Ca({lineWise:!1,text:u.getSelections()});else if(u.options.lineWiseCopyCut){var _=mu(u);Ca({lineWise:!0,text:_.text}),m.type=="cut"?u.setSelections(_.ranges,null,qt):(c.prevInput="",p.value=_.text.join(`
`),Wt(p))}else return;m.type=="cut"&&(u.state.cutIncoming=+new Date)}}ge(p,"cut",v),ge(p,"copy",v),ge(i.scroller,"paste",function(m){if(!(Rn(i,m)||Qe(u,m))){if(!p.dispatchEvent){u.state.pasteIncoming=+new Date,c.focus();return}var _=new Event("paste");_.clipboardData=m.clipboardData,p.dispatchEvent(_)}}),ge(i.lineSpace,"selectstart",function(m){Rn(i,m)||U(m)}),ge(p,"compositionstart",function(){var m=u.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:m,range:u.markText(m,u.getCursor("to"),{className:"CodeMirror-composing"})}}),ge(p,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},kr.prototype.createField=function(i){this.wrapper=zc(),this.textarea=this.wrapper.firstChild;var s=this.cm.options;yu(this.textarea,s.spellcheck,s.autocorrect,s.autocapitalize)},kr.prototype.screenReaderLabelChanged=function(i){i?this.textarea.setAttribute("aria-label",i):this.textarea.removeAttribute("aria-label")},kr.prototype.prepareSelection=function(){var i=this.cm,s=i.display,c=i.doc,u=Gu(i);if(i.options.moveInputWithCursor){var p=Nn(i,c.sel.primary().head,"div"),v=s.wrapper.getBoundingClientRect(),m=s.lineDiv.getBoundingClientRect();u.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,p.top+m.top-v.top)),u.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,p.left+m.left-v.left))}return u},kr.prototype.showSelection=function(i){var s=this.cm,c=s.display;et(c.cursorDiv,i.cursors),et(c.selectionDiv,i.selection),i.teTop!=null&&(this.wrapper.style.top=i.teTop+"px",this.wrapper.style.left=i.teLeft+"px")},kr.prototype.reset=function(i){if(!(this.contextMenuPending||this.composing&&i)){var s=this.cm;if(this.resetting=!0,s.somethingSelected()){this.prevInput="";var c=s.getSelection();this.textarea.value=c,s.state.focused&&Wt(this.textarea),M&&N>=9&&(this.hasSelection=c)}else i||(this.prevInput=this.textarea.value="",M&&N>=9&&(this.hasSelection=null));this.resetting=!1}},kr.prototype.getField=function(){return this.textarea},kr.prototype.supportsTouch=function(){return!1},kr.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!Tt||Pt(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},kr.prototype.blur=function(){this.textarea.blur()},kr.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},kr.prototype.receivedFocus=function(){this.slowPoll()},kr.prototype.slowPoll=function(){var i=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){i.poll(),i.cm.state.focused&&i.slowPoll()})},kr.prototype.fastPoll=function(){var i=!1,s=this;s.pollingFast=!0;function c(){var u=s.poll();!u&&!i?(i=!0,s.polling.set(60,c)):(s.pollingFast=!1,s.slowPoll())}s.polling.set(20,c)},kr.prototype.poll=function(){var i=this,s=this.cm,c=this.textarea,u=this.prevInput;if(this.contextMenuPending||this.resetting||!s.state.focused||Cn(c)&&!u&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var p=c.value;if(p==u&&!s.somethingSelected())return!1;if(M&&N>=9&&this.hasSelection===p||yt&&/[\uf700-\uf7ff]/.test(p))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var v=p.charCodeAt(0);if(v==8203&&!u&&(u="​"),v==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,_=Math.min(u.length,p.length);m<_&&u.charCodeAt(m)==p.charCodeAt(m);)++m;return An(s,function(){vl(s,p.slice(m),u.length-m,null,i.composing?"*compose":null),p.length>1e3||p.indexOf(`
`)>-1?c.value=i.prevInput="":i.prevInput=p,i.composing&&(i.composing.range.clear(),i.composing.range=s.markText(i.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},kr.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},kr.prototype.onKeyPress=function(){M&&N>=9&&(this.hasSelection=null),this.fastPoll()},kr.prototype.onContextMenu=function(i){var s=this,c=s.cm,u=c.display,p=s.textarea;s.contextMenuPending&&s.contextMenuPending();var v=Di(c,i),m=u.scroller.scrollTop;if(!v||H)return;var _=c.options.resetSelectionOnContextMenu;_&&c.doc.sel.contains(v)==-1&&Br(c,nn)(c.doc,ti(v),qt);var C=p.style.cssText,P=s.wrapper.style.cssText,q=s.wrapper.offsetParent.getBoundingClientRect();s.wrapper.style.cssText="position: static",p.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(i.clientY-q.top-5)+"px; left: "+(i.clientX-q.left-5)+`px;
      z-index: 1000; background: `+(M?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var at;x&&(at=p.ownerDocument.defaultView.scrollY),u.input.focus(),x&&p.ownerDocument.defaultView.scrollTo(null,at),u.input.reset(),c.somethingSelected()||(p.value=s.prevInput=" "),s.contextMenuPending=gt,u.selForContextMenu=c.doc.sel,clearTimeout(u.detectingSelectAll);function bt(){if(p.selectionStart!=null){var Ut=c.somethingSelected(),Qt="​"+(Ut?p.value:"");p.value="⇚",p.value=Qt,s.prevInput=Ut?"":"​",p.selectionStart=1,p.selectionEnd=Qt.length,u.selForContextMenu=c.doc.sel}}function gt(){if(s.contextMenuPending==gt&&(s.contextMenuPending=!1,s.wrapper.style.cssText=P,p.style.cssText=C,M&&N<9&&u.scrollbars.setScrollTop(u.scroller.scrollTop=m),p.selectionStart!=null)){(!M||M&&N<9)&&bt();var Ut=0,Qt=function(){u.selForContextMenu==c.doc.sel&&p.selectionStart==0&&p.selectionEnd>0&&s.prevInput=="​"?Br(c,is)(c):Ut++<10?u.detectingSelectAll=setTimeout(Qt,500):(u.selForContextMenu=null,u.input.reset())};u.detectingSelectAll=setTimeout(Qt,200)}}if(M&&N>=9&&bt(),dt){Ht(i);var It=function(){Me(window,"mouseup",It),setTimeout(gt,20)};ge(window,"mouseup",It)}else setTimeout(gt,50)},kr.prototype.readOnlyChanged=function(i){i||this.reset(),this.textarea.disabled=i=="nocursor",this.textarea.readOnly=!!i},kr.prototype.setUneditable=function(){},kr.prototype.needsContentAttribute=!1;function pp(i,s){if(s=s?ve(s):{},s.value=i.value,!s.tabindex&&i.tabIndex&&(s.tabindex=i.tabIndex),!s.placeholder&&i.placeholder&&(s.placeholder=i.placeholder),s.autofocus==null){var c=Pt(i.ownerDocument);s.autofocus=c==i||i.getAttribute("autofocus")!=null&&c==document.body}function u(){i.value=_.getValue()}var p;if(i.form&&(ge(i.form,"submit",u),!s.leaveSubmitMethodAlone)){var v=i.form;p=v.submit;try{var m=v.submit=function(){u(),v.submit=p,v.submit(),v.submit=m}}catch{}}s.finishInit=function(C){C.save=u,C.getTextArea=function(){return i},C.toTextArea=function(){C.toTextArea=isNaN,u(),i.parentNode.removeChild(C.getWrapperElement()),i.style.display="",i.form&&(Me(i.form,"submit",u),!s.leaveSubmitMethodAlone&&typeof i.form.submit=="function"&&(i.form.submit=p))}},i.style.display="none";var _=gr(function(C){return i.parentNode.insertBefore(C,i.nextSibling)},s);return _}function dp(i){i.off=Me,i.on=ge,i.wheelEventPixels=Bf,i.Doc=_n,i.splitLines=Qr,i.countColumn=Ct,i.findColumn=cr,i.isWordChar=Z,i.Pass=ne,i.signal=nr,i.Line=Dr,i.changeEnd=ei,i.scrollbarModel=Xu,i.Pos=O,i.cmpPos=K,i.modes=Rr,i.mimeModes=xn,i.resolveMode=Ln,i.getMode=tn,i.modeExtensions=Nr,i.extendMode=ho,i.copyState=Sn,i.startState=So,i.innerMode=On,i.commands=ds,i.keyMap=wo,i.keyName=Mc,i.isModifierKey=kc,i.lookupKey=wa,i.normalizeKeyMap=ps,i.StringStream=sr,i.SharedTextMarker=ma,i.TextMarker=oi,i.LineWidget=Qn,i.e_preventDefault=U,i.e_stopPropagation=ft,i.e_stop=Ht,i.addClass=ct,i.contains=At,i.rmClass=X,i.keyNames=ii}cp(gr),_u(gr);var xs="iter insert remove copy getEditor constructor".split(" ");for(var Ss in _n.prototype)_n.prototype.hasOwnProperty(Ss)&&zt(xs,Ss)<0&&(gr.prototype[Ss]=function(i){return function(){return i.apply(this.doc,arguments)}}(_n.prototype[Ss]));return Kn(_n),gr.inputStyles={textarea:kr,contenteditable:ir},gr.defineMode=function(i){!gr.defaults.mode&&i!="null"&&(gr.defaults.mode=i),Gn.apply(this,arguments)},gr.defineMIME=Ro,gr.defineMode("null",function(){return{token:function(i){return i.skipToEnd()}}}),gr.defineMIME("text/plain","null"),gr.defineExtension=function(i,s){gr.prototype[i]=s},gr.defineDocExtension=function(i,s){_n.prototype[i]=s},gr.fromTextArea=pp,dp(gr),gr.version="5.65.15",gr})},629:(w,Y,st)=>{(function(rt){rt(st(631))})(function(rt){rt.defineMode("css",function(X,z){var et=z.inline;z.propertyKeywords||(z=rt.resolveMode("text/css"));var A=X.indentUnit,tt=z.tokenHooks,E=z.documentTypes||{},At=z.mediaTypes||{},Pt=z.mediaFeatures||{},ct=z.mediaValueKeywords||{},Dt=z.propertyKeywords||{},Wt=z.nonStandardPropertyKeywords||{},oe=z.fontProperties||{},Pe=z.counterDescriptors||{},_e=z.colorKeywords||{},ve=z.valueKeywords||{},Ct=z.allowNested,Rt=z.lineComment,zt=z.supportsAtComponent===!0,ie=X.highlightNonStandardPropertyKeywords!==!1,ne,qt;function me(Z,Et){return ne=Et,Z}function Ne(Z,Et){var mt=Z.next();if(tt[mt]){var xe=tt[mt](Z,Et);if(xe!==!1)return xe}if(mt=="@")return Z.eatWhile(/[\w\\\-]/),me("def",Z.current());if(mt=="="||(mt=="~"||mt=="|")&&Z.eat("="))return me(null,"compare");if(mt=='"'||mt=="'")return Et.tokenize=cr(mt),Et.tokenize(Z,Et);if(mt=="#")return Z.eatWhile(/[\w\\\-]/),me("atom","hash");if(mt=="!")return Z.match(/^\s*\w*/),me("keyword","important");if(/\d/.test(mt)||mt=="."&&Z.eat(/\d/))return Z.eatWhile(/[\w.%]/),me("number","unit");if(mt==="-"){if(/[\d.]/.test(Z.peek()))return Z.eatWhile(/[\w.%]/),me("number","unit");if(Z.match(/^-[\w\\\-]*/))return Z.eatWhile(/[\w\\\-]/),Z.match(/^\s*:/,!1)?me("variable-2","variable-definition"):me("variable-2","variable");if(Z.match(/^\w+-/))return me("meta","meta")}else return/[,+>*\/]/.test(mt)?me(null,"select-op"):mt=="."&&Z.match(/^-?[_a-z][_a-z0-9-]*/i)?me("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(mt)?me(null,mt):Z.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(Z.current())&&(Et.tokenize=_r),me("variable callee","variable")):/[\w\\\-]/.test(mt)?(Z.eatWhile(/[\w\\\-]/),me("property","word")):me(null,null)}function cr(Z){return function(Et,mt){for(var xe=!1,He;(He=Et.next())!=null;){if(He==Z&&!xe){Z==")"&&Et.backUp(1);break}xe=!xe&&He=="\\"}return(He==Z||!xe&&Z!=")")&&(mt.tokenize=null),me("string","string")}}function _r(Z,Et){return Z.next(),Z.match(/^\s*[\"\')]/,!1)?Et.tokenize=null:Et.tokenize=cr(")"),me(null,"(")}function ar(Z,Et,mt){this.type=Z,this.indent=Et,this.prev=mt}function he(Z,Et,mt,xe){return Z.context=new ar(mt,Et.indentation()+(xe===!1?0:A),Z.context),mt}function T(Z){return Z.context.prev&&(Z.context=Z.context.prev),Z.context.type}function B(Z,Et,mt){return Lt[mt.context.type](Z,Et,mt)}function nt(Z,Et,mt,xe){for(var He=xe||1;He>0;He--)mt.context=mt.context.prev;return B(Z,Et,mt)}function ht(Z){var Et=Z.current().toLowerCase();ve.hasOwnProperty(Et)?qt="atom":_e.hasOwnProperty(Et)?qt="keyword":qt="variable"}var Lt={};return Lt.top=function(Z,Et,mt){if(Z=="{")return he(mt,Et,"block");if(Z=="}"&&mt.context.prev)return T(mt);if(zt&&/@component/i.test(Z))return he(mt,Et,"atComponentBlock");if(/^@(-moz-)?document$/i.test(Z))return he(mt,Et,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(Z))return he(mt,Et,"atBlock");if(/^@(font-face|counter-style)/i.test(Z))return mt.stateArg=Z,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(Z))return"keyframes";if(Z&&Z.charAt(0)=="@")return he(mt,Et,"at");if(Z=="hash")qt="builtin";else if(Z=="word")qt="tag";else{if(Z=="variable-definition")return"maybeprop";if(Z=="interpolation")return he(mt,Et,"interpolation");if(Z==":")return"pseudo";if(Ct&&Z=="(")return he(mt,Et,"parens")}return mt.context.type},Lt.block=function(Z,Et,mt){if(Z=="word"){var xe=Et.current().toLowerCase();return Dt.hasOwnProperty(xe)?(qt="property","maybeprop"):Wt.hasOwnProperty(xe)?(qt=ie?"string-2":"property","maybeprop"):Ct?(qt=Et.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(qt+=" error","maybeprop")}else return Z=="meta"?"block":!Ct&&(Z=="hash"||Z=="qualifier")?(qt="error","block"):Lt.top(Z,Et,mt)},Lt.maybeprop=function(Z,Et,mt){return Z==":"?he(mt,Et,"prop"):B(Z,Et,mt)},Lt.prop=function(Z,Et,mt){if(Z==";")return T(mt);if(Z=="{"&&Ct)return he(mt,Et,"propBlock");if(Z=="}"||Z=="{")return nt(Z,Et,mt);if(Z=="(")return he(mt,Et,"parens");if(Z=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(Et.current()))qt+=" error";else if(Z=="word")ht(Et);else if(Z=="interpolation")return he(mt,Et,"interpolation");return"prop"},Lt.propBlock=function(Z,Et,mt){return Z=="}"?T(mt):Z=="word"?(qt="property","maybeprop"):mt.context.type},Lt.parens=function(Z,Et,mt){return Z=="{"||Z=="}"?nt(Z,Et,mt):Z==")"?T(mt):Z=="("?he(mt,Et,"parens"):Z=="interpolation"?he(mt,Et,"interpolation"):(Z=="word"&&ht(Et),"parens")},Lt.pseudo=function(Z,Et,mt){return Z=="meta"?"pseudo":Z=="word"?(qt="variable-3",mt.context.type):B(Z,Et,mt)},Lt.documentTypes=function(Z,Et,mt){return Z=="word"&&E.hasOwnProperty(Et.current())?(qt="tag",mt.context.type):Lt.atBlock(Z,Et,mt)},Lt.atBlock=function(Z,Et,mt){if(Z=="(")return he(mt,Et,"atBlock_parens");if(Z=="}"||Z==";")return nt(Z,Et,mt);if(Z=="{")return T(mt)&&he(mt,Et,Ct?"block":"top");if(Z=="interpolation")return he(mt,Et,"interpolation");if(Z=="word"){var xe=Et.current().toLowerCase();xe=="only"||xe=="not"||xe=="and"||xe=="or"?qt="keyword":At.hasOwnProperty(xe)?qt="attribute":Pt.hasOwnProperty(xe)?qt="property":ct.hasOwnProperty(xe)?qt="keyword":Dt.hasOwnProperty(xe)?qt="property":Wt.hasOwnProperty(xe)?qt=ie?"string-2":"property":ve.hasOwnProperty(xe)?qt="atom":_e.hasOwnProperty(xe)?qt="keyword":qt="error"}return mt.context.type},Lt.atComponentBlock=function(Z,Et,mt){return Z=="}"?nt(Z,Et,mt):Z=="{"?T(mt)&&he(mt,Et,Ct?"block":"top",!1):(Z=="word"&&(qt="error"),mt.context.type)},Lt.atBlock_parens=function(Z,Et,mt){return Z==")"?T(mt):Z=="{"||Z=="}"?nt(Z,Et,mt,2):Lt.atBlock(Z,Et,mt)},Lt.restricted_atBlock_before=function(Z,Et,mt){return Z=="{"?he(mt,Et,"restricted_atBlock"):Z=="word"&&mt.stateArg=="@counter-style"?(qt="variable","restricted_atBlock_before"):B(Z,Et,mt)},Lt.restricted_atBlock=function(Z,Et,mt){return Z=="}"?(mt.stateArg=null,T(mt)):Z=="word"?(mt.stateArg=="@font-face"&&!oe.hasOwnProperty(Et.current().toLowerCase())||mt.stateArg=="@counter-style"&&!Pe.hasOwnProperty(Et.current().toLowerCase())?qt="error":qt="property","maybeprop"):"restricted_atBlock"},Lt.keyframes=function(Z,Et,mt){return Z=="word"?(qt="variable","keyframes"):Z=="{"?he(mt,Et,"top"):B(Z,Et,mt)},Lt.at=function(Z,Et,mt){return Z==";"?T(mt):Z=="{"||Z=="}"?nt(Z,Et,mt):(Z=="word"?qt="tag":Z=="hash"&&(qt="builtin"),"at")},Lt.interpolation=function(Z,Et,mt){return Z=="}"?T(mt):Z=="{"||Z==";"?nt(Z,Et,mt):(Z=="word"?qt="variable":Z!="variable"&&Z!="("&&Z!=")"&&(qt="error"),"interpolation")},{startState:function(Z){return{tokenize:null,state:et?"block":"top",stateArg:null,context:new ar(et?"block":"top",Z||0,null)}},token:function(Z,Et){if(!Et.tokenize&&Z.eatSpace())return null;var mt=(Et.tokenize||Ne)(Z,Et);return mt&&typeof mt=="object"&&(ne=mt[1],mt=mt[0]),qt=mt,ne!="comment"&&(Et.state=Lt[Et.state](ne,Z,Et)),qt},indent:function(Z,Et){var mt=Z.context,xe=Et&&Et.charAt(0),He=mt.indent;return mt.type=="prop"&&(xe=="}"||xe==")")&&(mt=mt.prev),mt.prev&&(xe=="}"&&(mt.type=="block"||mt.type=="top"||mt.type=="interpolation"||mt.type=="restricted_atBlock")?(mt=mt.prev,He=mt.indent):(xe==")"&&(mt.type=="parens"||mt.type=="atBlock_parens")||xe=="{"&&(mt.type=="at"||mt.type=="atBlock"))&&(He=Math.max(0,mt.indent-A))),He},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:Rt,fold:"brace"}});function lt(X){for(var z={},et=0;et<X.length;++et)z[X[et].toLowerCase()]=!0;return z}var F=["domain","regexp","url","url-prefix"],R=lt(F),M=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],N=lt(M),x=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],j=lt(x),L=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],D=lt(L),H=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],G=lt(H),pt=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],xt=lt(pt),Nt=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],jt=lt(Nt),Tt=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],yt=lt(Tt),Kt=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],te=lt(Kt),ue=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Zt=lt(ue),dt=F.concat(M).concat(x).concat(L).concat(H).concat(pt).concat(Kt).concat(ue);rt.registerHelper("hintWords","css",dt);function ot(X,z){for(var et=!1,A;(A=X.next())!=null;){if(et&&A=="/"){z.tokenize=null;break}et=A=="*"}return["comment","comment"]}rt.defineMIME("text/css",{documentTypes:R,mediaTypes:N,mediaFeatures:j,mediaValueKeywords:D,propertyKeywords:G,nonStandardPropertyKeywords:xt,fontProperties:jt,counterDescriptors:yt,colorKeywords:te,valueKeywords:Zt,tokenHooks:{"/":function(X,z){return X.eat("*")?(z.tokenize=ot,ot(X,z)):!1}},name:"css"}),rt.defineMIME("text/x-scss",{mediaTypes:N,mediaFeatures:j,mediaValueKeywords:D,propertyKeywords:G,nonStandardPropertyKeywords:xt,colorKeywords:te,valueKeywords:Zt,fontProperties:jt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(X,z){return X.eat("/")?(X.skipToEnd(),["comment","comment"]):X.eat("*")?(z.tokenize=ot,ot(X,z)):["operator","operator"]},":":function(X){return X.match(/^\s*\{/,!1)?[null,null]:!1},$:function(X){return X.match(/^[\w-]+/),X.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(X){return X.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),rt.defineMIME("text/x-less",{mediaTypes:N,mediaFeatures:j,mediaValueKeywords:D,propertyKeywords:G,nonStandardPropertyKeywords:xt,colorKeywords:te,valueKeywords:Zt,fontProperties:jt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(X,z){return X.eat("/")?(X.skipToEnd(),["comment","comment"]):X.eat("*")?(z.tokenize=ot,ot(X,z)):["operator","operator"]},"@":function(X){return X.eat("{")?[null,"interpolation"]:X.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(X.eatWhile(/[\w\\\-]/),X.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),rt.defineMIME("text/x-gss",{documentTypes:R,mediaTypes:N,mediaFeatures:j,propertyKeywords:G,nonStandardPropertyKeywords:xt,fontProperties:jt,counterDescriptors:yt,colorKeywords:te,valueKeywords:Zt,supportsAtComponent:!0,tokenHooks:{"/":function(X,z){return X.eat("*")?(z.tokenize=ot,ot(X,z)):!1}},name:"css",helperType:"gss"})})},531:(w,Y,st)=>{(function(rt){rt(st(631),st(589),st(876),st(629))})(function(rt){var lt={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function F(D,H,G){var pt=D.current(),xt=pt.search(H);return xt>-1?D.backUp(pt.length-xt):pt.match(/<\/?$/)&&(D.backUp(pt.length),D.match(H,!1)||D.match(pt)),G}var R={};function M(D){var H=R[D];return H||(R[D]=new RegExp("\\s+"+D+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function N(D,H){var G=D.match(M(H));return G?/^\s*(.*?)\s*$/.exec(G[2])[1]:""}function x(D,H){return new RegExp((H?"^":"")+"</\\s*"+D+"\\s*>","i")}function j(D,H){for(var G in D)for(var pt=H[G]||(H[G]=[]),xt=D[G],Nt=xt.length-1;Nt>=0;Nt--)pt.unshift(xt[Nt])}function L(D,H){for(var G=0;G<D.length;G++){var pt=D[G];if(!pt[0]||pt[1].test(N(H,pt[0])))return pt[2]}}rt.defineMode("htmlmixed",function(D,H){var G=rt.getMode(D,{name:"xml",htmlMode:!0,multilineTagIndentFactor:H.multilineTagIndentFactor,multilineTagIndentPastTag:H.multilineTagIndentPastTag,allowMissingTagName:H.allowMissingTagName}),pt={},xt=H&&H.tags,Nt=H&&H.scriptTypes;if(j(lt,pt),xt&&j(xt,pt),Nt)for(var jt=Nt.length-1;jt>=0;jt--)pt.script.unshift(["type",Nt[jt].matches,Nt[jt].mode]);function Tt(yt,Kt){var te=G.token(yt,Kt.htmlState),ue=/\btag\b/.test(te),Zt;if(ue&&!/[<>\s\/]/.test(yt.current())&&(Zt=Kt.htmlState.tagName&&Kt.htmlState.tagName.toLowerCase())&&pt.hasOwnProperty(Zt))Kt.inTag=Zt+" ";else if(Kt.inTag&&ue&&/>$/.test(yt.current())){var dt=/^([\S]+) (.*)/.exec(Kt.inTag);Kt.inTag=null;var ot=yt.current()==">"&&L(pt[dt[1]],dt[2]),X=rt.getMode(D,ot),z=x(dt[1],!0),et=x(dt[1],!1);Kt.token=function(A,tt){return A.match(z,!1)?(tt.token=Tt,tt.localState=tt.localMode=null,null):F(A,et,tt.localMode.token(A,tt.localState))},Kt.localMode=X,Kt.localState=rt.startState(X,G.indent(Kt.htmlState,"",""))}else Kt.inTag&&(Kt.inTag+=yt.current(),yt.eol()&&(Kt.inTag+=" "));return te}return{startState:function(){var yt=rt.startState(G);return{token:Tt,inTag:null,localMode:null,localState:null,htmlState:yt}},copyState:function(yt){var Kt;return yt.localState&&(Kt=rt.copyState(yt.localMode,yt.localState)),{token:yt.token,inTag:yt.inTag,localMode:yt.localMode,localState:Kt,htmlState:rt.copyState(G,yt.htmlState)}},token:function(yt,Kt){return Kt.token(yt,Kt)},indent:function(yt,Kt,te){return!yt.localMode||/^\s*<\//.test(Kt)?G.indent(yt.htmlState,Kt,te):yt.localMode.indent?yt.localMode.indent(yt.localState,Kt,te):rt.Pass},innerMode:function(yt){return{state:yt.localState||yt.htmlState,mode:yt.localMode||G}}}},"xml","javascript","css"),rt.defineMIME("text/html","htmlmixed")})},876:(w,Y,st)=>{(function(rt){rt(st(631))})(function(rt){rt.defineMode("javascript",function(lt,F){var R=lt.indentUnit,M=F.statementIndent,N=F.jsonld,x=F.json||N,j=F.trackScope!==!1,L=F.typescript,D=F.wordCharacters||/[\w$\xa1-\uffff]/,H=function(){function O(Se){return{type:Se,style:"keyword"}}var K=O("keyword a"),Ft=O("keyword b"),Yt=O("keyword c"),Ae=O("keyword d"),er=O("operator"),or={type:"atom",style:"atom"};return{if:O("if"),while:K,with:K,else:Ft,do:Ft,try:Ft,finally:Ft,return:Ae,break:Ae,continue:Ae,new:O("new"),delete:Yt,void:Yt,throw:Yt,debugger:O("debugger"),var:O("var"),const:O("var"),let:O("var"),function:O("function"),catch:O("catch"),for:O("for"),switch:O("switch"),case:O("case"),default:O("default"),in:er,typeof:er,instanceof:er,true:or,false:or,null:or,undefined:or,NaN:or,Infinity:or,this:O("this"),class:O("class"),super:O("atom"),yield:Yt,export:O("export"),import:O("import"),extends:Yt,await:Yt}}(),G=/[+\-*&%=<>!?|~^@]/,pt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function xt(O){for(var K=!1,Ft,Yt=!1;(Ft=O.next())!=null;){if(!K){if(Ft=="/"&&!Yt)return;Ft=="["?Yt=!0:Yt&&Ft=="]"&&(Yt=!1)}K=!K&&Ft=="\\"}}var Nt,jt;function Tt(O,K,Ft){return Nt=O,jt=Ft,K}function yt(O,K){var Ft=O.next();if(Ft=='"'||Ft=="'")return K.tokenize=Kt(Ft),K.tokenize(O,K);if(Ft=="."&&O.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Tt("number","number");if(Ft=="."&&O.match(".."))return Tt("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ft))return Tt(Ft);if(Ft=="="&&O.eat(">"))return Tt("=>","operator");if(Ft=="0"&&O.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Tt("number","number");if(/\d/.test(Ft))return O.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Tt("number","number");if(Ft=="/")return O.eat("*")?(K.tokenize=te,te(O,K)):O.eat("/")?(O.skipToEnd(),Tt("comment","comment")):io(O,K,1)?(xt(O),O.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Tt("regexp","string-2")):(O.eat("="),Tt("operator","operator",O.current()));if(Ft=="`")return K.tokenize=ue,ue(O,K);if(Ft=="#"&&O.peek()=="!")return O.skipToEnd(),Tt("meta","meta");if(Ft=="#"&&O.eatWhile(D))return Tt("variable","property");if(Ft=="<"&&O.match("!--")||Ft=="-"&&O.match("->")&&!/\S/.test(O.string.slice(0,O.start)))return O.skipToEnd(),Tt("comment","comment");if(G.test(Ft))return(Ft!=">"||!K.lexical||K.lexical.type!=">")&&(O.eat("=")?(Ft=="!"||Ft=="=")&&O.eat("="):/[<>*+\-|&?]/.test(Ft)&&(O.eat(Ft),Ft==">"&&O.eat(Ft))),Ft=="?"&&O.eat(".")?Tt("."):Tt("operator","operator",O.current());if(D.test(Ft)){O.eatWhile(D);var Yt=O.current();if(K.lastType!="."){if(H.propertyIsEnumerable(Yt)){var Ae=H[Yt];return Tt(Ae.type,Ae.style,Yt)}if(Yt=="async"&&O.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Tt("async","keyword",Yt)}return Tt("variable","variable",Yt)}}function Kt(O){return function(K,Ft){var Yt=!1,Ae;if(N&&K.peek()=="@"&&K.match(pt))return Ft.tokenize=yt,Tt("jsonld-keyword","meta");for(;(Ae=K.next())!=null&&!(Ae==O&&!Yt);)Yt=!Yt&&Ae=="\\";return Yt||(Ft.tokenize=yt),Tt("string","string")}}function te(O,K){for(var Ft=!1,Yt;Yt=O.next();){if(Yt=="/"&&Ft){K.tokenize=yt;break}Ft=Yt=="*"}return Tt("comment","comment")}function ue(O,K){for(var Ft=!1,Yt;(Yt=O.next())!=null;){if(!Ft&&(Yt=="`"||Yt=="$"&&O.eat("{"))){K.tokenize=yt;break}Ft=!Ft&&Yt=="\\"}return Tt("quasi","string-2",O.current())}var Zt="([{}])";function dt(O,K){K.fatArrowAt&&(K.fatArrowAt=null);var Ft=O.string.indexOf("=>",O.start);if(!(Ft<0)){if(L){var Yt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(O.string.slice(O.start,Ft));Yt&&(Ft=Yt.index)}for(var Ae=0,er=!1,or=Ft-1;or>=0;--or){var Se=O.string.charAt(or),gn=Zt.indexOf(Se);if(gn>=0&&gn<3){if(!Ae){++or;break}if(--Ae==0){Se=="("&&(er=!0);break}}else if(gn>=3&&gn<6)++Ae;else if(D.test(Se))er=!0;else if(/["'\/`]/.test(Se))for(;;--or){if(or==0)return;var Ji=O.string.charAt(or-1);if(Ji==Se&&O.string.charAt(or-2)!="\\"){or--;break}}else if(er&&!Ae){++or;break}}er&&!Ae&&(K.fatArrowAt=or)}}var ot={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function X(O,K,Ft,Yt,Ae,er){this.indented=O,this.column=K,this.type=Ft,this.prev=Ae,this.info=er,Yt!=null&&(this.align=Yt)}function z(O,K){if(!j)return!1;for(var Ft=O.localVars;Ft;Ft=Ft.next)if(Ft.name==K)return!0;for(var Yt=O.context;Yt;Yt=Yt.prev)for(var Ft=Yt.vars;Ft;Ft=Ft.next)if(Ft.name==K)return!0}function et(O,K,Ft,Yt,Ae){var er=O.cc;for(A.state=O,A.stream=Ae,A.marked=null,A.cc=er,A.style=K,O.lexical.hasOwnProperty("align")||(O.lexical.align=!0);;){var or=er.length?er.pop():x?me:ne;if(or(Ft,Yt)){for(;er.length&&er[er.length-1].lex;)er.pop()();return A.marked?A.marked:Ft=="variable"&&z(O,Yt)?"variable-2":K}}}var A={state:null,column:null,marked:null,cc:null};function tt(){for(var O=arguments.length-1;O>=0;O--)A.cc.push(arguments[O])}function E(){return tt.apply(null,arguments),!0}function At(O,K){for(var Ft=K;Ft;Ft=Ft.next)if(Ft.name==O)return!0;return!1}function Pt(O){var K=A.state;if(A.marked="def",!!j){if(K.context){if(K.lexical.info=="var"&&K.context&&K.context.block){var Ft=ct(O,K.context);if(Ft!=null){K.context=Ft;return}}else if(!At(O,K.localVars)){K.localVars=new oe(O,K.localVars);return}}F.globalVars&&!At(O,K.globalVars)&&(K.globalVars=new oe(O,K.globalVars))}}function ct(O,K){if(K)if(K.block){var Ft=ct(O,K.prev);return Ft?Ft==K.prev?K:new Wt(Ft,K.vars,!0):null}else return At(O,K.vars)?K:new Wt(K.prev,new oe(O,K.vars),!1);else return null}function Dt(O){return O=="public"||O=="private"||O=="protected"||O=="abstract"||O=="readonly"}function Wt(O,K,Ft){this.prev=O,this.vars=K,this.block=Ft}function oe(O,K){this.name=O,this.next=K}var Pe=new oe("this",new oe("arguments",null));function _e(){A.state.context=new Wt(A.state.context,A.state.localVars,!1),A.state.localVars=Pe}function ve(){A.state.context=new Wt(A.state.context,A.state.localVars,!0),A.state.localVars=null}_e.lex=ve.lex=!0;function Ct(){A.state.localVars=A.state.context.vars,A.state.context=A.state.context.prev}Ct.lex=!0;function Rt(O,K){var Ft=function(){var Yt=A.state,Ae=Yt.indented;if(Yt.lexical.type=="stat")Ae=Yt.lexical.indented;else for(var er=Yt.lexical;er&&er.type==")"&&er.align;er=er.prev)Ae=er.indented;Yt.lexical=new X(Ae,A.stream.column(),O,null,Yt.lexical,K)};return Ft.lex=!0,Ft}function zt(){var O=A.state;O.lexical.prev&&(O.lexical.type==")"&&(O.indented=O.lexical.indented),O.lexical=O.lexical.prev)}zt.lex=!0;function ie(O){function K(Ft){return Ft==O?E():O==";"||Ft=="}"||Ft==")"||Ft=="]"?tt():E(K)}return K}function ne(O,K){return O=="var"?E(Rt("vardef",K),je,ie(";"),zt):O=="keyword a"?E(Rt("form"),cr,ne,zt):O=="keyword b"?E(Rt("form"),ne,zt):O=="keyword d"?A.stream.match(/^\s*$/,!1)?E():E(Rt("stat"),ar,ie(";"),zt):O=="debugger"?E(ie(";")):O=="{"?E(Rt("}"),ve,Be,zt,Ct):O==";"?E():O=="if"?(A.state.lexical.info=="else"&&A.state.cc[A.state.cc.length-1]==zt&&A.state.cc.pop()(),E(Rt("form"),cr,ne,zt,Qr)):O=="function"?E(mr):O=="for"?E(Rt("form"),ve,Cn,ne,Ct,zt):O=="class"||L&&K=="interface"?(A.marked="keyword",E(Rt("form",O=="class"?O:K),Ln,zt)):O=="variable"?L&&K=="declare"?(A.marked="keyword",E(ne)):L&&(K=="module"||K=="enum"||K=="type")&&A.stream.match(/^\s*\w/,!1)?(A.marked="keyword",K=="enum"?E(qe):K=="type"?E(xn,ie("operator"),Me,ie(";")):E(Rt("form"),tr,ie("{"),Rt("}"),Be,zt,zt)):L&&K=="namespace"?(A.marked="keyword",E(Rt("form"),me,ne,zt)):L&&K=="abstract"?(A.marked="keyword",E(ne)):E(Rt("stat"),xe):O=="switch"?E(Rt("form"),cr,ie("{"),Rt("}","switch"),ve,Be,zt,zt,Ct):O=="case"?E(me,ie(":")):O=="default"?E(ie(":")):O=="catch"?E(Rt("form"),_e,qt,ne,zt,Ct):O=="export"?E(Rt("stat"),Sn,zt):O=="import"?E(Rt("stat"),So,zt):O=="async"?E(ne):K=="@"?E(me,ne):tt(Rt("stat"),me,ie(";"),zt)}function qt(O){if(O=="(")return E(Gn,ie(")"))}function me(O,K){return _r(O,K,!1)}function Ne(O,K){return _r(O,K,!0)}function cr(O){return O!="("?tt():E(Rt(")"),ar,ie(")"),zt)}function _r(O,K,Ft){if(A.state.fatArrowAt==A.stream.start){var Yt=Ft?Lt:ht;if(O=="(")return E(_e,Rt(")"),Vt(Gn,")"),zt,ie("=>"),Yt,Ct);if(O=="variable")return tt(_e,tr,ie("=>"),Yt,Ct)}var Ae=Ft?T:he;return ot.hasOwnProperty(O)?E(Ae):O=="function"?E(mr,Ae):O=="class"||L&&K=="interface"?(A.marked="keyword",E(Rt("form"),Ro,zt)):O=="keyword c"||O=="async"?E(Ft?Ne:me):O=="("?E(Rt(")"),ar,ie(")"),zt,Ae):O=="operator"||O=="spread"?E(Ft?Ne:me):O=="["?E(Rt("]"),vn,zt,Ae):O=="{"?Te(De,"}",null,Ae):O=="quasi"?tt(B,Ae):O=="new"?E(Z(Ft)):E()}function ar(O){return O.match(/[;\}\)\],]/)?tt():tt(me)}function he(O,K){return O==","?E(ar):T(O,K,!1)}function T(O,K,Ft){var Yt=Ft==!1?he:T,Ae=Ft==!1?me:Ne;if(O=="=>")return E(_e,Ft?Lt:ht,Ct);if(O=="operator")return/\+\+|--/.test(K)||L&&K=="!"?E(Yt):L&&K=="<"&&A.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?E(Rt(">"),Vt(Me,">"),zt,Yt):K=="?"?E(me,ie(":"),Ae):E(Ae);if(O=="quasi")return tt(B,Yt);if(O!=";"){if(O=="(")return Te(Ne,")","call",Yt);if(O==".")return E(He,Yt);if(O=="[")return E(Rt("]"),ar,ie("]"),zt,Yt);if(L&&K=="as")return A.marked="keyword",E(Me,Yt);if(O=="regexp")return A.state.lastType=A.marked="operator",A.stream.backUp(A.stream.pos-A.stream.start-1),E(Ae)}}function B(O,K){return O!="quasi"?tt():K.slice(K.length-2)!="${"?E(B):E(ar,nt)}function nt(O){if(O=="}")return A.marked="string-2",A.state.tokenize=ue,E(B)}function ht(O){return dt(A.stream,A.state),tt(O=="{"?ne:me)}function Lt(O){return dt(A.stream,A.state),tt(O=="{"?ne:Ne)}function Z(O){return function(K){return K=="."?E(O?mt:Et):K=="variable"&&L?E(wt,O?T:he):tt(O?Ne:me)}}function Et(O,K){if(K=="target")return A.marked="keyword",E(he)}function mt(O,K){if(K=="target")return A.marked="keyword",E(T)}function xe(O){return O==":"?E(zt,ne):tt(he,ie(";"),zt)}function He(O){if(O=="variable")return A.marked="property",E()}function De(O,K){if(O=="async")return A.marked="property",E(De);if(O=="variable"||A.style=="keyword"){if(A.marked="property",K=="get"||K=="set")return E(ee);var Ft;return L&&A.state.fatArrowAt==A.stream.start&&(Ft=A.stream.match(/^\s*:\s*/,!1))&&(A.state.fatArrowAt=A.stream.pos+Ft[0].length),E(Jt)}else{if(O=="number"||O=="string")return A.marked=N?"property":A.style+" property",E(Jt);if(O=="jsonld-keyword")return E(Jt);if(L&&Dt(K))return A.marked="keyword",E(De);if(O=="[")return E(me,Ee,ie("]"),Jt);if(O=="spread")return E(Ne,Jt);if(K=="*")return A.marked="keyword",E(De);if(O==":")return tt(Jt)}}function ee(O){return O!="variable"?tt(Jt):(A.marked="property",E(mr))}function Jt(O){if(O==":")return E(Ne);if(O=="(")return tt(mr)}function Vt(O,K,Ft){function Yt(Ae,er){if(Ft?Ft.indexOf(Ae)>-1:Ae==","){var or=A.state.lexical;return or.info=="call"&&(or.pos=(or.pos||0)+1),E(function(Se,gn){return Se==K||gn==K?tt():tt(O)},Yt)}return Ae==K||er==K?E():Ft&&Ft.indexOf(";")>-1?tt(O):E(ie(K))}return function(Ae,er){return Ae==K||er==K?E():tt(O,Yt)}}function Te(O,K,Ft){for(var Yt=3;Yt<arguments.length;Yt++)A.cc.push(arguments[Yt]);return E(Rt(K,Ft),Vt(O,K),zt)}function Be(O){return O=="}"?E():tt(ne,Be)}function Ee(O,K){if(L){if(O==":")return E(Me);if(K=="?")return E(Ee)}}function Ke(O,K){if(L&&(O==":"||K=="in"))return E(Me)}function ge(O){if(L&&O==":")return A.stream.match(/^\s*\w+\s+is\b/,!1)?E(me,fr,Me):E(Me)}function fr(O,K){if(K=="is")return A.marked="keyword",E()}function Me(O,K){if(K=="keyof"||K=="typeof"||K=="infer"||K=="readonly")return A.marked="keyword",E(K=="typeof"?Ne:Me);if(O=="variable"||K=="void")return A.marked="type",E(ft);if(K=="|"||K=="&")return E(Me);if(O=="string"||O=="number"||O=="atom")return E(ft);if(O=="[")return E(Rt("]"),Vt(Me,"]",","),zt,ft);if(O=="{")return E(Rt("}"),Qe,zt,ft);if(O=="(")return E(Vt(U,")"),nr,ft);if(O=="<")return E(Vt(Me,">"),Me);if(O=="quasi")return tt(Or,ft)}function nr(O){if(O=="=>")return E(Me)}function Qe(O){return O.match(/[\}\)\]]/)?E():O==","||O==";"?E(Qe):tt(Xt,Qe)}function Xt(O,K){if(O=="variable"||A.style=="keyword")return A.marked="property",E(Xt);if(K=="?"||O=="number"||O=="string")return E(Xt);if(O==":")return E(Me);if(O=="[")return E(ie("variable"),Ke,ie("]"),Xt);if(O=="(")return tt(Rr,Xt);if(!O.match(/[;\}\)\],]/))return E()}function Or(O,K){return O!="quasi"?tt():K.slice(K.length-2)!="${"?E(Or):E(Me,Kn)}function Kn(O){if(O=="}")return A.marked="string-2",A.state.tokenize=ue,E(Or)}function U(O,K){return O=="variable"&&A.stream.match(/^\s*[?:]/,!1)||K=="?"?E(U):O==":"?E(Me):O=="spread"?E(U):tt(Me)}function ft(O,K){if(K=="<")return E(Rt(">"),Vt(Me,">"),zt,ft);if(K=="|"||O=="."||K=="&")return E(Me);if(O=="[")return E(Me,ie("]"),ft);if(K=="extends"||K=="implements")return A.marked="keyword",E(Me);if(K=="?")return E(Me,ie(":"),Me)}function wt(O,K){if(K=="<")return E(Rt(">"),Vt(Me,">"),zt,ft)}function Ht(){return tt(Me,de)}function de(O,K){if(K=="=")return E(Me)}function je(O,K){return K=="enum"?(A.marked="keyword",E(qe)):tt(tr,Ee,Tr,Co)}function tr(O,K){if(L&&Dt(K))return A.marked="keyword",E(tr);if(O=="variable")return Pt(K),E();if(O=="spread")return E(tr);if(O=="[")return Te(Jr,"]");if(O=="{")return Te(Zr,"}")}function Zr(O,K){return O=="variable"&&!A.stream.match(/^\s*:/,!1)?(Pt(K),E(Tr)):(O=="variable"&&(A.marked="property"),O=="spread"?E(tr):O=="}"?tt():O=="["?E(me,ie("]"),ie(":"),Zr):E(ie(":"),tr,Tr))}function Jr(){return tt(tr,Tr)}function Tr(O,K){if(K=="=")return E(Ne)}function Co(O){if(O==",")return E(je)}function Qr(O,K){if(O=="keyword b"&&K=="else")return E(Rt("form","else"),ne,zt)}function Cn(O,K){if(K=="await")return E(Cn);if(O=="(")return E(Rt(")"),xo,zt)}function xo(O){return O=="var"?E(je,Er):O=="variable"?E(Er):tt(Er)}function Er(O,K){return O==")"?E():O==";"?E(Er):K=="in"||K=="of"?(A.marked="keyword",E(me,Er)):tt(me,Er)}function mr(O,K){if(K=="*")return A.marked="keyword",E(mr);if(O=="variable")return Pt(K),E(mr);if(O=="(")return E(_e,Rt(")"),Vt(Gn,")"),zt,ge,ne,Ct);if(L&&K=="<")return E(Rt(">"),Vt(Ht,">"),zt,mr)}function Rr(O,K){if(K=="*")return A.marked="keyword",E(Rr);if(O=="variable")return Pt(K),E(Rr);if(O=="(")return E(_e,Rt(")"),Vt(Gn,")"),zt,ge,Ct);if(L&&K=="<")return E(Rt(">"),Vt(Ht,">"),zt,Rr)}function xn(O,K){if(O=="keyword"||O=="variable")return A.marked="type",E(xn);if(K=="<")return E(Rt(">"),Vt(Ht,">"),zt)}function Gn(O,K){return K=="@"&&E(me,Gn),O=="spread"?E(Gn):L&&Dt(K)?(A.marked="keyword",E(Gn)):L&&O=="this"?E(Ee,Tr):tt(tr,Ee,Tr)}function Ro(O,K){return O=="variable"?Ln(O,K):tn(O,K)}function Ln(O,K){if(O=="variable")return Pt(K),E(tn)}function tn(O,K){if(K=="<")return E(Rt(">"),Vt(Ht,">"),zt,tn);if(K=="extends"||K=="implements"||L&&O==",")return K=="implements"&&(A.marked="keyword"),E(L?Me:me,tn);if(O=="{")return E(Rt("}"),Nr,zt)}function Nr(O,K){if(O=="async"||O=="variable"&&(K=="static"||K=="get"||K=="set"||L&&Dt(K))&&A.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return A.marked="keyword",E(Nr);if(O=="variable"||A.style=="keyword")return A.marked="property",E(ho,Nr);if(O=="number"||O=="string")return E(ho,Nr);if(O=="[")return E(me,Ee,ie("]"),ho,Nr);if(K=="*")return A.marked="keyword",E(Nr);if(L&&O=="(")return tt(Rr,Nr);if(O==";"||O==",")return E(Nr);if(O=="}")return E();if(K=="@")return E(me,Nr)}function ho(O,K){if(K=="!"||K=="?")return E(ho);if(O==":")return E(Me,Tr);if(K=="=")return E(Ne);var Ft=A.state.lexical.prev,Yt=Ft&&Ft.info=="interface";return tt(Yt?Rr:mr)}function Sn(O,K){return K=="*"?(A.marked="keyword",E(Pr,ie(";"))):K=="default"?(A.marked="keyword",E(me,ie(";"))):O=="{"?E(Vt(On,"}"),Pr,ie(";")):tt(ne)}function On(O,K){if(K=="as")return A.marked="keyword",E(ie("variable"));if(O=="variable")return tt(Ne,On)}function So(O){return O=="string"?E():O=="("?tt(me):O=="."?tt(he):tt(sr,Ce,Pr)}function sr(O,K){return O=="{"?Te(sr,"}"):(O=="variable"&&Pt(K),K=="*"&&(A.marked="keyword"),E(Tn))}function Ce(O){if(O==",")return E(sr,Ce)}function Tn(O,K){if(K=="as")return A.marked="keyword",E(sr)}function Pr(O,K){if(K=="from")return A.marked="keyword",E(me)}function vn(O){return O=="]"?E():tt(Vt(Ne,"]"))}function qe(){return tt(Rt("form"),tr,ie("{"),Rt("}"),Vt($n,"}"),zt,zt)}function $n(){return tt(tr,Tr)}function vo(O,K){return O.lastType=="operator"||O.lastType==","||G.test(K.charAt(0))||/[,.]/.test(K.charAt(0))}function io(O,K,Ft){return K.tokenize==yt&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(K.lastType)||K.lastType=="quasi"&&/\{\s*$/.test(O.string.slice(0,O.pos-(Ft||0)))}return{startState:function(O){var K={tokenize:yt,lastType:"sof",cc:[],lexical:new X((O||0)-R,0,"block",!1),localVars:F.localVars,context:F.localVars&&new Wt(null,null,!1),indented:O||0};return F.globalVars&&typeof F.globalVars=="object"&&(K.globalVars=F.globalVars),K},token:function(O,K){if(O.sol()&&(K.lexical.hasOwnProperty("align")||(K.lexical.align=!1),K.indented=O.indentation(),dt(O,K)),K.tokenize!=te&&O.eatSpace())return null;var Ft=K.tokenize(O,K);return Nt=="comment"?Ft:(K.lastType=Nt=="operator"&&(jt=="++"||jt=="--")?"incdec":Nt,et(K,Ft,Nt,jt,O))},indent:function(O,K){if(O.tokenize==te||O.tokenize==ue)return rt.Pass;if(O.tokenize!=yt)return 0;var Ft=K&&K.charAt(0),Yt=O.lexical,Ae;if(!/^\s*else\b/.test(K))for(var er=O.cc.length-1;er>=0;--er){var or=O.cc[er];if(or==zt)Yt=Yt.prev;else if(or!=Qr&&or!=Ct)break}for(;(Yt.type=="stat"||Yt.type=="form")&&(Ft=="}"||(Ae=O.cc[O.cc.length-1])&&(Ae==he||Ae==T)&&!/^[,\.=+\-*:?[\(]/.test(K));)Yt=Yt.prev;M&&Yt.type==")"&&Yt.prev.type=="stat"&&(Yt=Yt.prev);var Se=Yt.type,gn=Ft==Se;return Se=="vardef"?Yt.indented+(O.lastType=="operator"||O.lastType==","?Yt.info.length+1:0):Se=="form"&&Ft=="{"?Yt.indented:Se=="form"?Yt.indented+R:Se=="stat"?Yt.indented+(vo(O,K)?M||R:0):Yt.info=="switch"&&!gn&&F.doubleIndentSwitch!=!1?Yt.indented+(/^(?:case|default)\b/.test(K)?R:2*R):Yt.align?Yt.column+(gn?0:1):Yt.indented+(gn?0:R)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:x?null:"/*",blockCommentEnd:x?null:"*/",blockCommentContinue:x?null:" * ",lineComment:x?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:x?"json":"javascript",jsonldMode:N,jsonMode:x,expressionAllowed:io,skipExpression:function(O){et(O,"atom","atom","true",new rt.StringStream("",2,null))}}}),rt.registerHelper("wordChars","javascript",/[\w$]/),rt.defineMIME("text/javascript","javascript"),rt.defineMIME("text/ecmascript","javascript"),rt.defineMIME("application/javascript","javascript"),rt.defineMIME("application/x-javascript","javascript"),rt.defineMIME("application/ecmascript","javascript"),rt.defineMIME("application/json",{name:"javascript",json:!0}),rt.defineMIME("application/x-json",{name:"javascript",json:!0}),rt.defineMIME("application/manifest+json",{name:"javascript",json:!0}),rt.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),rt.defineMIME("text/typescript",{name:"javascript",typescript:!0}),rt.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},589:(w,Y,st)=>{(function(rt){rt(st(631))})(function(rt){var lt={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},F={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};rt.defineMode("xml",function(R,M){var N=R.indentUnit,x={},j=M.htmlMode?lt:F;for(var L in j)x[L]=j[L];for(var L in M)x[L]=M[L];var D,H;function G(E,At){function Pt(Wt){return At.tokenize=Wt,Wt(E,At)}var ct=E.next();if(ct=="<")return E.eat("!")?E.eat("[")?E.match("CDATA[")?Pt(Nt("atom","]]>")):null:E.match("--")?Pt(Nt("comment","-->")):E.match("DOCTYPE",!0,!0)?(E.eatWhile(/[\w\._\-]/),Pt(jt(1))):null:E.eat("?")?(E.eatWhile(/[\w\._\-]/),At.tokenize=Nt("meta","?>"),"meta"):(D=E.eat("/")?"closeTag":"openTag",At.tokenize=pt,"tag bracket");if(ct=="&"){var Dt;return E.eat("#")?E.eat("x")?Dt=E.eatWhile(/[a-fA-F\d]/)&&E.eat(";"):Dt=E.eatWhile(/[\d]/)&&E.eat(";"):Dt=E.eatWhile(/[\w\.\-:]/)&&E.eat(";"),Dt?"atom":"error"}else return E.eatWhile(/[^&<]/),null}G.isInText=!0;function pt(E,At){var Pt=E.next();if(Pt==">"||Pt=="/"&&E.eat(">"))return At.tokenize=G,D=Pt==">"?"endTag":"selfcloseTag","tag bracket";if(Pt=="=")return D="equals",null;if(Pt=="<"){At.tokenize=G,At.state=ue,At.tagName=At.tagStart=null;var ct=At.tokenize(E,At);return ct?ct+" tag error":"tag error"}else return/[\'\"]/.test(Pt)?(At.tokenize=xt(Pt),At.stringStartCol=E.column(),At.tokenize(E,At)):(E.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function xt(E){var At=function(Pt,ct){for(;!Pt.eol();)if(Pt.next()==E){ct.tokenize=pt;break}return"string"};return At.isInAttribute=!0,At}function Nt(E,At){return function(Pt,ct){for(;!Pt.eol();){if(Pt.match(At)){ct.tokenize=G;break}Pt.next()}return E}}function jt(E){return function(At,Pt){for(var ct;(ct=At.next())!=null;){if(ct=="<")return Pt.tokenize=jt(E+1),Pt.tokenize(At,Pt);if(ct==">")if(E==1){Pt.tokenize=G;break}else return Pt.tokenize=jt(E-1),Pt.tokenize(At,Pt)}return"meta"}}function Tt(E){return E&&E.toLowerCase()}function yt(E,At,Pt){this.prev=E.context,this.tagName=At||"",this.indent=E.indented,this.startOfLine=Pt,(x.doNotIndent.hasOwnProperty(At)||E.context&&E.context.noIndent)&&(this.noIndent=!0)}function Kt(E){E.context&&(E.context=E.context.prev)}function te(E,At){for(var Pt;;){if(!E.context||(Pt=E.context.tagName,!x.contextGrabbers.hasOwnProperty(Tt(Pt))||!x.contextGrabbers[Tt(Pt)].hasOwnProperty(Tt(At))))return;Kt(E)}}function ue(E,At,Pt){return E=="openTag"?(Pt.tagStart=At.column(),Zt):E=="closeTag"?dt:ue}function Zt(E,At,Pt){return E=="word"?(Pt.tagName=At.current(),H="tag",z):x.allowMissingTagName&&E=="endTag"?(H="tag bracket",z(E,At,Pt)):(H="error",Zt)}function dt(E,At,Pt){if(E=="word"){var ct=At.current();return Pt.context&&Pt.context.tagName!=ct&&x.implicitlyClosed.hasOwnProperty(Tt(Pt.context.tagName))&&Kt(Pt),Pt.context&&Pt.context.tagName==ct||x.matchClosing===!1?(H="tag",ot):(H="tag error",X)}else return x.allowMissingTagName&&E=="endTag"?(H="tag bracket",ot(E,At,Pt)):(H="error",X)}function ot(E,At,Pt){return E!="endTag"?(H="error",ot):(Kt(Pt),ue)}function X(E,At,Pt){return H="error",ot(E,At,Pt)}function z(E,At,Pt){if(E=="word")return H="attribute",et;if(E=="endTag"||E=="selfcloseTag"){var ct=Pt.tagName,Dt=Pt.tagStart;return Pt.tagName=Pt.tagStart=null,E=="selfcloseTag"||x.autoSelfClosers.hasOwnProperty(Tt(ct))?te(Pt,ct):(te(Pt,ct),Pt.context=new yt(Pt,ct,Dt==Pt.indented)),ue}return H="error",z}function et(E,At,Pt){return E=="equals"?A:(x.allowMissing||(H="error"),z(E,At,Pt))}function A(E,At,Pt){return E=="string"?tt:E=="word"&&x.allowUnquoted?(H="string",z):(H="error",z(E,At,Pt))}function tt(E,At,Pt){return E=="string"?tt:z(E,At,Pt)}return{startState:function(E){var At={tokenize:G,state:ue,indented:E||0,tagName:null,tagStart:null,context:null};return E!=null&&(At.baseIndent=E),At},token:function(E,At){if(!At.tagName&&E.sol()&&(At.indented=E.indentation()),E.eatSpace())return null;D=null;var Pt=At.tokenize(E,At);return(Pt||D)&&Pt!="comment"&&(H=null,At.state=At.state(D||Pt,E,At),H&&(Pt=H=="error"?Pt+" error":H)),Pt},indent:function(E,At,Pt){var ct=E.context;if(E.tokenize.isInAttribute)return E.tagStart==E.indented?E.stringStartCol+1:E.indented+N;if(ct&&ct.noIndent)return rt.Pass;if(E.tokenize!=pt&&E.tokenize!=G)return Pt?Pt.match(/^(\s*)/)[0].length:0;if(E.tagName)return x.multilineTagIndentPastTag!==!1?E.tagStart+E.tagName.length+2:E.tagStart+N*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(At))return 0;var Dt=At&&/^<(\/)?([\w_:\.-]*)/.exec(At);if(Dt&&Dt[1])for(;ct;)if(ct.tagName==Dt[2]){ct=ct.prev;break}else if(x.implicitlyClosed.hasOwnProperty(Tt(ct.tagName)))ct=ct.prev;else break;else if(Dt)for(;ct;){var Wt=x.contextGrabbers[Tt(ct.tagName)];if(Wt&&Wt.hasOwnProperty(Tt(Dt[2])))ct=ct.prev;else break}for(;ct&&ct.prev&&!ct.startOfLine;)ct=ct.prev;return ct?ct.indent+N:E.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(E){E.state==A&&(E.state=z)},xmlCurrentTag:function(E){return E.tagName?{name:E.tagName,close:E.type=="closeTag"}:null},xmlCurrentContext:function(E){for(var At=[],Pt=E.context;Pt;Pt=Pt.prev)At.push(Pt.tagName);return At.reverse()}}}),rt.defineMIME("text/xml","xml"),rt.defineMIME("application/xml","xml"),rt.mimeModes.hasOwnProperty("text/html")||rt.defineMIME("text/html",{name:"xml",htmlMode:!0})})},642:(w,Y,st)=>{st.d(Y,{Z:()=>R});var rt=st(346),lt=function(){var M=function(N,x){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,L){j.__proto__=L}||function(j,L){for(var D in L)Object.prototype.hasOwnProperty.call(L,D)&&(j[D]=L[D])},M(N,x)};return function(N,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");M(N,x);function j(){this.constructor=N}N.prototype=x===null?Object.create(x):(j.prototype=x.prototype,new j)}}(),F=function(M){lt(N,M);function N(x,j,L){var D=M.call(this,j,L)||this;return D._module=x,D}return Object.defineProperty(N.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),N}(rt.Hn);const R=F},675:(w,Y,st)=>{st.d(Y,{Z:()=>M,q:()=>F});var rt=st(642),lt=function(){var N=function(x,j){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,D){L.__proto__=D}||function(L,D){for(var H in D)Object.prototype.hasOwnProperty.call(D,H)&&(L[H]=D[H])},N(x,j)};return function(x,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");N(x,j);function L(){this.constructor=x}x.prototype=j===null?Object.create(j):(L.prototype=j.prototype,new L)}}(),F;(function(N){N.Select="select",N.Hover="hover",N.Spacing="spacing",N.Target="target",N.Resize="resize"})(F||(F={}));var R=function(N){lt(x,N);function x(){return N!==null&&N.apply(this,arguments)||this}return x.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(x.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"component",{get:function(){var j,L=this.get("component");return L||((j=this.get("componentView"))===null||j===void 0?void 0:j.model)},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"componentView",{get:function(){var j,L=this.get("componentView");return L||((j=this.get("component"))===null||j===void 0?void 0:j.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"el",{get:function(){var j;return(j=this.componentView)===null||j===void 0?void 0:j.el},enumerable:!1,configurable:!0}),x.prototype.getBoxRect=function(j){var L=this,D=L.el,H=L.em,G=H.Canvas.getCanvasView(),pt=this.get("boxRect");return pt||(D&&G?G.getElBoxRect(D,j):{x:0,y:0,width:0,height:0})},x.prototype.getStyle=function(j){j===void 0&&(j={});var L=j.boxRect||this.getBoxRect(j),D=L.width,H=L.height,G=L.x,pt=L.y;return{width:"".concat(D,"px"),height:"".concat(H,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(G,"px ").concat(pt,"px")}},x.prototype.isType=function(j){return this.type===j},x}(rt.Z);const M=R},713:(w,Y,st)=>{st.d(Y,{Z:()=>lt});var rt;(function(F){F.run="command:run",F._run="run",F.runCommand="command:run:",F._runCommand="run:",F.runBeforeCommand="command:run:before:",F.abort="command:abort:",F._abort="abort:",F.stop="command:stop",F._stop="stop",F.stopCommand="command:stop:",F._stopCommand="stop:",F.stopBeforeCommand="command:stop:before:"})(rt||(rt={}));const lt=rt},858:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>rt});const rt={run:function(lt){lt.Components.clear(),lt.Css.clear()}}},884:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>R});var rt=st(50),lt=st(668),F=st(491);const R={run:function(M){(0,rt.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=M,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(M){this.toggleMove(),this.disableDragger()},onKeyUp:function(M){(0,F.sN)(M)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(M){this.toggleDragger(1,M)},disableDragger:function(M){this.toggleDragger(0,M)},toggleDragger:function(M,N){var x=this,j=x.canvasModel,L=x.em,D=this.dragger,H=M?"add":"remove";this.getCanvas().classList[H]("".concat(this.ppfx,"is__grabbing")),D||(D=new lt.Z({getPosition:function(){return{x:j.get("x"),y:j.get("y")}},setPosition:function(G){var pt=G.x,xt=G.y;j.set({x:pt,y:xt})},onStart:function(G,pt){L.trigger("canvas:move:start",pt)},onDrag:function(G,pt){L.trigger("canvas:move",pt)},onEnd:function(G,pt){L.trigger("canvas:move:end",pt)}}),this.dragger=D),M?D.start(N):D.stop()},toggleMove:function(M){var N=this.ppfx,x=M?"add":"remove",j=M?"on":"off",L={on:F.on,off:F.S1},D=this.getCanvas(),H=["".concat(N,"is__grab")];!M&&H.push("".concat(N,"is__grabbing")),H.forEach(function(G){return D.classList[x](G)}),L[j](document,"keyup",this.onKeyUp),L[j](D,"mousedown",this.enableDragger),L[j](document,"mouseup",this.disableDragger)}}},790:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>N,defineCommand:()=>R});var rt=st(346),lt=st(713),F=function(){var x=function(j,L){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,H){D.__proto__=H}||function(D,H){for(var G in H)Object.prototype.hasOwnProperty.call(H,G)&&(D[G]=H[G])},x(j,L)};return function(j,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");x(j,L);function D(){this.constructor=j}j.prototype=L===null?Object.create(L):(D.prototype=L.prototype,new D)}}();function R(x){return x}var M=function(x){F(j,x);function j(L){var D=x.call(this,0)||this;D.config=L||{},D.em=D.config.em||{};var H=D.config.stylePrefix;return D.pfx=H,D.ppfx=D.config.pStylePrefix,D.hoverClass="".concat(H,"hover"),D.badgeClass="".concat(H,"badge"),D.plhClass="".concat(H,"placeholder"),D.freezClass="".concat(D.ppfx,"freezed"),D.canvas=D.em.Canvas,D.init(D.config),D}return j.prototype.onFrameScroll=function(L){},j.prototype.getCanvas=function(){return this.canvas.getElement()},j.prototype.getCanvasBody=function(){return this.canvas.getBody()},j.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},j.prototype.offset=function(L){var D=L.getBoundingClientRect();return{top:D.top+L.ownerDocument.body.scrollTop,left:D.left+L.ownerDocument.body.scrollLeft}},j.prototype.init=function(L){},j.prototype.callRun=function(L,D){D===void 0&&(D={});var H=this.id;if(L.trigger("".concat(lt.Z.runBeforeCommand).concat(H),{options:D}),L.trigger("".concat(lt.Z._runCommand).concat(H,":before"),D),D.abort){L.trigger("".concat(lt.Z.abort).concat(H),{options:D}),L.trigger("".concat(lt.Z._abort).concat(H),D);return}var G=D.sender||L,pt=this.run(L,G,D),xt={id:H,result:pt,options:D};return L.trigger("".concat(lt.Z.runCommand).concat(H),xt),L.trigger(lt.Z.run,xt),L.trigger("".concat(lt.Z._runCommand).concat(H),pt,D),L.trigger(lt.Z._run,H,pt,D),pt},j.prototype.callStop=function(L,D){D===void 0&&(D={});var H=this.id,G=D.sender||L;L.trigger("".concat(lt.Z.stopBeforeCommand).concat(H),{options:D}),L.trigger("".concat(lt.Z._stopCommand).concat(H,":before"),D);var pt=this.stop(L,G,D),xt={id:H,result:pt,options:D};return L.trigger("".concat(lt.Z.stopCommand).concat(H),xt),L.trigger(lt.Z.stop,xt),L.trigger("".concat(lt.Z._stopCommand).concat(H),pt,D),L.trigger(lt.Z._stop,H,pt,D),pt},j.prototype.stopCommand=function(L){this.em.Commands.stop(this.id,L)},j.prototype.run=function(L,D,H){},j.prototype.stop=function(L,D,H){},j}(rt.Hn);const N=M},180:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>R});var rt=st(50),lt=function(M,N,x){if(x||arguments.length===2)for(var j=0,L=N.length,D;j<L;j++)(D||!(j in N))&&(D||(D=Array.prototype.slice.call(N,0,j)),D[j]=N[j]);return M.concat(D||Array.prototype.slice.call(N))},F={run:function(M,N,x){var j=this;x===void 0&&(x={});var L=[],D=x.component||M.getSelectedAll();return D=(0,rt.isArray)(D)?lt([],D,!0):[D],D.filter(Boolean).forEach(function(H){var G,pt;if(!H.get("removable"))return j.em.logWarning("The element is not removable",{component:H});L.push(H);var xt=((pt=(G=H.delegate)===null||G===void 0?void 0:G.remove)===null||pt===void 0?void 0:pt.call(G,H))||H;xt.remove()}),M.selectRemove(L),L}};const R=F},544:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>M});var rt=st(50),lt=st(668),F=function(){return F=Object.assign||function(N){for(var x,j=1,L=arguments.length;j<L;j++){x=arguments[j];for(var D in x)Object.prototype.hasOwnProperty.call(x,D)&&(N[D]=x[D])}return N},F.apply(this,arguments)},R="dmode";const M={run:function(N,x,j){var L=this;j===void 0&&(j={}),(0,rt.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var D=j.target,H=j.event,G=j.mode,pt=j.dragger,xt=pt===void 0?{}:pt,Nt=D.getEl(),jt=F({doc:Nt.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return L.guidesStatic},guidesTarget:function(){return L.guidesTarget}},xt);this.setupGuides(),this.opts=j,this.editor=N,this.em=N.getModel(),this.target=D,this.isTran=G=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var Tt=this.dragger;return Tt?Tt.setOptions(jt):(Tt=new lt.Z(jt),this.dragger=Tt),H&&Tt.start(H),this.toggleDrag(1),this.em.trigger("".concat(R,":start"),this.getEventOpts()),Tt},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(N){var x=N.guide;x&&x.parentNode.removeChild(x)}),this.guides=[]},getGuidesContainer:function(){var N=this,x=this.guidesEl;if(!x){var j=this,L=j.editor,D=j.em,H=j.opts,G=L.getConfig().stylePrefix,pt=document.createElement("div"),xt=document.createElement("div"),Nt='<div class="'.concat(G,"guide-info__line ").concat(G,`danger-bg">
        <div class="`).concat(G,"guide-info__content ").concat(G,`danger-color"></div>
      </div>`);x=document.createElement("div"),x.className="".concat(G,"guides"),pt.className="".concat(G,"guide-info ").concat(G,"guide-info__x"),xt.className="".concat(G,"guide-info ").concat(G,"guide-info__y"),pt.innerHTML=Nt,xt.innerHTML=Nt,x.appendChild(pt),x.appendChild(xt),L.Canvas.getGlobalToolsEl().appendChild(x),this.guidesEl=x,this.elGuideInfoX=pt,this.elGuideInfoY=xt,this.elGuideInfoContentX=pt.querySelector(".".concat(G,"guide-info__content")),this.elGuideInfoContentY=xt.querySelector(".".concat(G,"guide-info__content")),D.on("canvas:update frame:scroll",(0,rt.debounce)(function(){var jt;N.updateGuides(),H.debug&&((jt=N.guides)===null||jt===void 0||jt.forEach(function(Tt){return N.renderGuide(Tt)}))},200))}return x},getGuidesStatic:function(){var N=this,x=[],j=this.target.getEl(),L=j.parentNode,D=L===void 0?{}:L;return(0,rt.each)(D.children,function(H){return x=x.concat(j!==H?N.getElementGuides(H):[])}),x.concat(this.getElementGuides(D))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(N){var x=this,j,L;(N||this.guides).forEach(function(D){var H=D.origin,G=j===H?L:x.getElementPos(H);j=H,L=G,(0,rt.each)(x.getGuidePosUpdate(D,G),function(pt,xt){return D[xt]=pt}),D.originRect=G})},getGuidePosUpdate:function(N,x){var j={},L=x.top,D=x.height,H=x.left,G=x.width;switch(N.type){case"t":j.y=L;break;case"b":j.y=L+D;break;case"l":j.x=H;break;case"r":j.x=H+G;break;case"x":j.x=H+G/2;break;case"y":j.y=L+D/2;break}return j},renderGuide:function(N){N===void 0&&(N={});var x=N.guide||document.createElement("div"),j="px",L=N.active?2:1,D=x.children[0];return x.style="position: absolute; background-color: ".concat(N.active?"green":"red",";"),x.children.length||(D=document.createElement("div"),D.style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",x.appendChild(D)),N.y?(x.style.width="100%",x.style.height="".concat(L).concat(j),x.style.top="".concat(N.y).concat(j),x.style.left=0):(x.style.width="".concat(L).concat(j),x.style.height="100%",x.style.left="".concat(N.x).concat(j),x.style.top="0".concat(j)),!N.guide&&this.guidesContainer.appendChild(x),x},getElementPos:function(N){return this.editor.Canvas.getElementPos(N,{noScroll:1})},getElementGuides:function(N){var x=this,j=this.opts,L=this.getElementPos(N),D=L.top,H=L.height,G=L.left,pt=L.width,xt=[{type:"t",y:D},{type:"b",y:D+H},{type:"l",x:G},{type:"r",x:G+pt},{type:"x",x:G+pt/2},{type:"y",y:D+H/2}].map(function(Nt){return F(F({},Nt),{origin:N,originRect:L,guide:j.debug&&x.renderGuide(Nt)})});return xt.forEach(function(Nt){var jt;return(jt=x.guides)===null||jt===void 0?void 0:jt.push(Nt)}),xt},getTranslate:function(N,x){x===void 0&&(x="x");var j=0;return(N||"").split(" ").forEach(function(L){var D=L.trim(),H="translate".concat(x.toUpperCase(),"(");D.indexOf(H)===0&&(j=parseFloat(D.replace(H,"")))}),j},setTranslate:function(N,x,j){var L="translate".concat(x.toUpperCase(),"("),D="".concat(L).concat(j,")"),H=(N||"").split(" ").map(function(G){var pt=G.trim();return pt.indexOf(L)===0&&(G=D),G}).join(" ");return H.indexOf(L)<0&&(H+=" ".concat(D)),H},getPosition:function(){var N=this,x=N.target,j=N.isTran,L=x.getStyle(),D=L.left,H=L.top,G=L.transform,pt=0,xt=0;return j?(pt=this.getTranslate(G),xt=this.getTranslate(G,"y")):(pt=parseFloat(D||0),xt=parseFloat(H||0)),{x:pt,y:xt}},setPosition:function(N){var x=N.x,j=N.y,L=N.end,D=N.position,H=N.width,G=N.height,pt=this,xt=pt.target,Nt=pt.isTran,jt=pt.em,Tt="px",yt=!L,Kt="".concat(parseInt(x,10)).concat(Tt),te="".concat(parseInt(j,10)).concat(Tt),ue={};if(Nt){var Zt=xt.getStyle().transform||"";Zt=this.setTranslate(Zt,"x",Kt),Zt=this.setTranslate(Zt,"y",te),ue={transform:Zt,__p:yt},xt.addStyle(ue,{avoidStore:!L})}else{var dt={position:D,width:H,height:G},ot={left:Kt,top:te,__p:yt};(0,rt.keys)(dt).forEach(function(X){var z=dt[X];z&&(ot[X]=z)}),ue=ot,xt.addStyle(ue,{avoidStore:!L})}jt==null||jt.Styles.__emitCmpStyleUpdate(ue,{components:jt.getSelected()})},_getDragData:function(){var N=this.target;return{target:N,parent:N.parent(),index:N.index()}},onStart:function(N){var x=this,j=x.target,L=x.editor,D=x.isTran,H=x.opts,G=H.center,pt=H.onStart,xt=L.Canvas,Nt=j.getStyle(),jt="absolute",Tt=[jt,"relative"];if(pt&&pt(this._getDragData()),!D&&Nt.position!==jt){var yt=xt.offset(j.getEl()),Kt=yt.left,te=yt.top,ue=yt.width,Zt=yt.height,dt=j.parent(),ot=void 0;do{var X=dt.getStyle();ot=Tt.indexOf(X.position)>=0?dt:null,dt=dt.parent()}while(dt&&!ot);if(G){var z=xt.getMouseRelativeCanvas(N),et=z.x,A=z.y;Kt=et,te=A}else if(ot){var tt=xt.offset(ot.getEl());Kt=Kt-tt.left,te=te-tt.top}this.setPosition({x:Kt,y:te,width:"".concat(ue,"px"),height:"".concat(Zt,"px"),position:jt})}},onDrag:function(){var N=this,x=this,j=x.guidesTarget,L=x.opts,D=L.onDrag;this.updateGuides(j),L.debug&&j.forEach(function(H){return N.renderGuide(H)}),L.guidesInfo&&this.renderGuideInfo(j.filter(function(H){return H.active})),D&&D(this._getDragData())},onEnd:function(N,x,j){j===void 0&&(j={});var L=this,D=L.editor,H=L.opts,G=L.id,pt=H.onEnd;pt&&pt(N,j,F(F({event:N},j),this._getDragData())),D.stopCommand(G),this.hideGuidesInfo(),this.em.trigger("".concat(R,":end"),this.getEventOpts())},hideGuidesInfo:function(){var N=this;["X","Y"].forEach(function(x){var j=N["elGuideInfo".concat(x)];j&&(j.style.display="none")})},renderGuideInfo:function(N){var x=this;N===void 0&&(N=[]);var j=this.guidesStatic;this.hideGuidesInfo(),N.forEach(function(L){var D=L.origin,H=L.x,G=x.getElementPos(D),pt=(0,rt.isUndefined)(H)?"y":"x",xt=pt==="y",Nt=G[xt?"left":"top"],jt=G.rect[xt?"left":"top"],Tt=xt?Nt+G.width:Nt+G.height,yt=xt?jt+G.rect.width:jt+G.rect.height,Kt=x["elGuideInfo".concat(pt.toUpperCase())],te=x["elGuideInfoContent".concat(pt.toUpperCase())],ue=Kt.style,Zt=j==null?void 0:j.filter(function(ve){return ve.type===L.type}).map(function(ve){var Ct=ve.originRect,Rt=Ct.left,zt=Ct.width,ie=Ct.top,ne=Ct.height,qt=xt?Rt:ie,me=xt?Rt+zt:ie+ne;return{gap:me<Nt?Nt-me:qt-Tt,guide:ve}}).filter(function(ve){return ve.gap>0}).sort(function(ve,Ct){return ve.gap-Ct.gap}).map(function(ve){return ve.guide})[0];if(Zt){var dt=Zt.originRect,ot=dt.left,X=dt.width,z=dt.top,et=dt.height,A=dt.rect,tt=xt?ot<G.left:z<G.top,E=xt?ot:z,At=xt?A.left:A.top,Pt=xt?ot+X:z+et,ct=xt?A.left+A.width:A.top+A.height,Dt=xt?L.y:L.x,Wt=tt?Pt:Tt,oe="".concat(Dt,"px"),Pe=tt?Nt-Pt:E-Tt,_e=tt?jt-ct:At-yt;ue.display="",ue[xt?"top":"left"]=oe,ue[xt?"left":"top"]="".concat(Wt,"px"),ue[xt?"width":"height"]="".concat(Pe,"px"),te.innerHTML="".concat(Math.round(_e),"px"),x.em.trigger("".concat(R,":active"),F(F({},x.getEventOpts()),{guide:L,guidesStatic:j,matched:Zt,posFirst:Dt,posSecond:Wt,size:Pe,sizeRaw:_e,elGuideInfo:Kt,elGuideInfoCnt:te}))}})},toggleDrag:function(N){var x=this,j=x.ppfx,L=x.editor,D=N?"add":"remove",H=["".concat(j,"is__grabbing")],G=L.Canvas,pt=G.getBody();H.forEach(function(xt){return pt.classList[D](xt)}),G[N?"startAutoscroll":"stopAutoscroll"]()}}},236:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>rt});const rt={run:function(lt){if(lt.Canvas.hasFocus()){var F=[];lt.getSelectedAll().forEach(function(R){var M=R.components(),N=M&&M.filter(function(x){return x.get("selectable")})[0];N&&F.push(N)}),F.length&&lt.select(F)}}}},368:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>rt});const rt={run:function(lt,F,R){if(R===void 0&&(R={}),!(!lt.Canvas.hasFocus()&&!R.force)){var M=[];lt.getSelectedAll().forEach(function(N){for(var x=N.parent();x&&!x.get("selectable");)x=x.parent();x&&M.push(x)}),M.length&&lt.select(M)}}}},243:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>rt});const rt={run:function(lt){if(lt.Canvas.hasFocus()){var F=[];lt.getSelectedAll().forEach(function(R){var M=R.parent();if(M){var N=M.components().length,x=0,j=0,L;do x++,j=R.index()+x,L=j<=N?M.getChildAt(j):null;while(L&&!L.get("selectable"));F.push(L||R)}}),F.length&&lt.select(F)}}}},400:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>rt});const rt={run:function(lt){if(lt.Canvas.hasFocus()){var F=[];lt.getSelectedAll().forEach(function(R){var M=R.parent();if(M){var N=0,x=0,j;do N++,x=R.index()-N,j=x>=0?M.getChildAt(x):null;while(j&&!j.get("selectable"));F.push(j||R)}}),F.length&&lt.select(F)}}}},910:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=st(50);const lt={run:function(F,R,M){M===void 0&&(M={});var N=M.target,x=[];if(!N.get("styles"))return x;var j=N.get("type"),L=F.Pages.getAllWrappers(),D=(0,rt.flatten)(L.map(function(G){return G.findType(j)})).length;if(!D){var H=F.CssComposer.getAll();x=H.filter(function(G){return G.get("group")==="cmp:".concat(j)}),H.remove(x)}return x}}},744:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=function(F,R,M){if(M||arguments.length===2)for(var N=0,x=R.length,j;N<x;N++)(j||!(N in R))&&(j||(j=Array.prototype.slice.call(R,0,N)),j[N]=R[N]);return F.concat(j||Array.prototype.slice.call(R))};const lt={run:function(F){var R=F.getModel(),M=rt([],F.getSelectedAll(),!0).map(function(N){var x,j;return((j=(x=N.delegate)===null||x===void 0?void 0:x.copy)===null||j===void 0?void 0:j.call(x,N))||N}).filter(Boolean);M.length&&R.set("clipboard",M)}}},457:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=st(491);const lt={run:function(F,R,M){var N=this;M===void 0&&(M={}),R&&R.set&&R.set("active",0);var x=F.getConfig(),j=F.Modal,L=x.stylePrefix;if(this.cm=F.CodeManager||null,!this.editors){var D=this.buildEditor("htmlmixed","hopscotch","HTML"),H=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=D.model,this.cssEditor=H.model;var G=(0,rt.ut)("div",{class:"".concat(L,"export-dl")});G.appendChild(D.el),G.appendChild(H.el),this.editors=G}j.open({title:x.textViewCode,content:this.editors}).getModel().once("change:open",function(){return F.stopCommand("".concat(N.id))}),this.htmlEditor.setContent(F.getHtml(M.optsHtml)),this.cssEditor.setContent(F.getCss(M.optsCss))},stop:function(F){var R=F.Modal;R&&R.close()},buildEditor:function(F,R,M){var N=this.em.CodeManager,x=N.createViewer({label:M,codeName:F,theme:R}),j=new N.EditorView({model:x,config:N.getConfig()}).render().el;return{model:x,el:j}}}},975:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=st(50);const lt={isEnabled:function(){var F=document;return!!(F.fullscreenElement||F.webkitFullscreenElement||F.mozFullScreenElement)},enable:function(F){var R="";return F.requestFullscreen?F.requestFullscreen():F.webkitRequestFullscreen?(R="webkit",F.webkitRequestFullscreen()):F.mozRequestFullScreen?(R="moz",F.mozRequestFullScreen()):F.msRequestFullscreen&&F.msRequestFullscreen(),R},disable:function(){var F=document;this.isEnabled()&&(F.exitFullscreen?F.exitFullscreen():F.webkitExitFullscreen?F.webkitExitFullscreen():F.mozCancelFullScreen?F.mozCancelFullScreen():F.msExitFullscreen&&F.msExitFullscreen())},fsChanged:function(F){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(F||"","fullscreenchange"),this.fsChanged))},run:function(F,R,M){M===void 0&&(M={}),this.sender=R;var N=M.target,x=(0,rt.isElement)(N)?N:document.querySelector(N),j=this.enable(x||F.getContainer());this.fsChanged=this.fsChanged.bind(this,j),document.addEventListener(j+"fullscreenchange",this.fsChanged)},stop:function(F,R){R&&R.set&&R.set("active",!1),this.disable()}}},191:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>N});var rt=st(50),lt=st(895),F=st(491),R=st(407),M=st(189);const N=(0,rt.extend)({},M.default,R.default,{init:function(x){R.default.init.apply(this,arguments),(0,rt.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=x,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var x=[],j=0;j<arguments.length;j++)x[j]=arguments[j];R.default.enable.apply(this,x),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var L=this.$wrapper;L.css("cursor","move"),L.on("mousedown",this.initSorter),L.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(x){var j=(0,lt.default)(x.target).data("model"),L=j.get("draggable");L&&(this.cacheEl=null,this.startSelectPosition(x.target,this.frameEl.contentDocument),this.sorter.draggable=L,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,F.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(x){var j=x.get("draggable");if(j){this.cacheEl=null;var L=x.view.el;this.startSelectPosition(L,this.frameEl.contentDocument),this.sorter.draggable=j,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,F.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(x){this.cacheEl=null;var j=x[x.length-1],L=this.em.getCurrentFrame(),D=j.getEl(L==null?void 0:L.model),H=D.ownerDocument;this.startSelectPosition(D,H,{onStart:this.onStart}),this.sorter.draggable=j.get("draggable"),this.sorter.toMove=x,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,F.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,F.S1)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,F.S1)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(x,j){},rollback:function(x,j){var L=x.which||x.keyCode;(L==27||j)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,lt.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,lt.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var x=[],j=0;j<arguments.length;j++)x[j]=arguments[j];R.default.stop.apply(this,x),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var L=this.$wrapper;L.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>F});var rt=st(50),lt=st(491);const F={open:function(R){var M=this,N=this,x=N.editor,j=N.title,L=N.config,D=N.am,H=L.custom;if((0,rt.isFunction)(H.open))return H.open(D.__customData());var G=x.Modal;G.open({title:j,content:R}).onceClose(function(){return x.stopCommand(M.id)})},close:function(){var R=this.config.custom;if((0,rt.isFunction)(R.close))return R.close(this.am.__customData());var M=this.editor.Modal;M&&M.close()},run:function(R,M,N){N===void 0&&(N={});var x=R.AssetManager,j=x.getConfig(),L=N.types,D=L===void 0?[]:L,H=N.accept,G=N.select;if(this.title=N.modalTitle||R.t("assetManager.modalTitle")||"",this.editor=R,this.config=j,this.am=x,x.setTarget(N.target),x.onClick(N.onClick),x.onDblClick(N.onDblClick),x.onSelect(N.onSelect),x.__behaviour({select:G,types:D,options:N}),j.custom)this.rendered=this.rendered||(0,lt.ut)("div"),this.rendered.className="".concat(j.stylePrefix,"custom-wrp"),x.__behaviour({container:this.rendered}),x.__trgCustom();else{if(!this.rendered||D){var pt=x.getAll().filter(function(Nt){return Nt});D&&D.length&&(pt=pt.filter(function(Nt){return D.indexOf(Nt.get("type"))!==-1})),x.render(pt),this.rendered=x.getContainer()}if(H){var xt=this.rendered.querySelector("input#".concat(j.stylePrefix,"uploadFile"));xt&&xt.setAttribute("accept",H)}}return this.open(this.rendered),this},stop:function(R){this.editor=R,this.close(this.rendered)}}},117:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>F});var rt=st(50),lt=st(491);const F={open:function(){var R=this,M=R.container,N=R.editor,x=R.bm,j=R.config,L=j.custom,D=j.appendTo;if((0,rt.isFunction)(L.open))return L.open(x.__customData());if(this.firstRender&&!D){var H="views-container",G=N.Panels,pt=G.getPanel(H)||G.addPanel({id:H});pt.set("appendContent",M).trigger("change:appendContent"),L||M.appendChild(x.render())}M&&(M.style.display="block")},close:function(){var R=this,M=R.container,N=R.config,x=N.custom;if((0,rt.isFunction)(x.close))return x.close(this.bm.__customData());M&&(M.style.display="none")},run:function(R){var M=R.Blocks;this.config=M.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,lt.ut)("div"),this.editor=R,this.bm=M;var N=this.container;M.__behaviour({container:N}),this.config.custom&&M.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>rt});const rt={run:function(lt){var F=lt.LayerManager,R=lt.Panels,M=F.getConfig();if(!M.appendTo){if(!this.layers){var N="views-container",x=document.createElement("div"),j=R.getPanel(N)||R.addPanel({id:N});M.custom?F.__trgCustom({container:x}):x.appendChild(F.render()),j.set("appendContent",x).trigger("change:appendContent"),this.layers=x}this.layers.style.display="block"}},stop:function(){var lt=this.layers;lt&&(lt.style.display="none")}}},801:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=st(895);const lt={run:function(F,R){if(this.sender=R,!this.$cnt){var M=F.getConfig(),N=F.Panels,x=F.DeviceManager,j=F.SelectorManager,L=F.StyleManager,D="change:appendContent",H=(0,rt.default)("<div></div>"),G=(0,rt.default)("<div></div>"),pt=(0,rt.default)("<div></div>"),xt=(0,rt.default)("<div></div>");if(this.$cnt=H,this.$cntInner=G,G.append(pt),G.append(xt),H.append(G),x&&M.showDevices){var Nt=N.addPanel({id:"devices-c"}),jt=x.render();Nt.set("appendContent",jt).trigger(D)}var Tt=j.getConfig();Tt.custom?j.__trgCustom({container:pt.get(0)}):Tt.appendTo||pt.append(j.render([])),this.sm=L;var yt=L.getConfig(),Kt=yt.stylePrefix;this.$header=(0,rt.default)('<div class="'.concat(Kt,'header">').concat(F.t("styleManager.empty"),"</div>")),H.append(this.$header),yt.custom?L.__trgCustom({container:xt.get(0)}):yt.appendTo||xt.append(L.render());var te="views-container",ue=N.getPanel(te)||N.addPanel({id:te});ue.set("appendContent",H).trigger(D);var Zt=F.getModel();this.listenTo(Zt,L.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var F=this,R=F.sender,M=F.sm,N=F.$cntInner,x=F.$header;R&&R.get&&!R.get("active")||!M||(M.getSelected()?(N==null||N.show(),x==null||x.hide()):(N==null||N.hide(),x==null||x.show()))},stop:function(){var F,R;(F=this.$cntInner)===null||F===void 0||F.hide(),(R=this.$header)===null||R===void 0||R.hide()}}},395:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=st(895);const lt={run:function(F,R){this.sender=R;var M=F.getModel(),N=F.Config,x=N.stylePrefix,j=F.TraitManager,L=j.getConfig(),D;if(!L.appendTo){if(!this.$cn){this.$cn=(0,rt.default)("<div></div>"),this.$cn2=(0,rt.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,rt.default)("<div>").append('<div class="'.concat(L.stylePrefix,'header">').concat(M.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),L.custom?j.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(x,'traits-label">').concat(M.t("traitManager.label"),"</div>")),this.$cn2.append(j.render()));var H=F.Panels;H.getPanel("views-container")?D=H.getPanel("views-container"):D=H.addPanel({id:"views-container"}),D==null||D.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=F.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var F=this.sender;F&&F.get&&!F.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=st(50);const lt={run:function(R,M,N){N===void 0&&(N={});var x=R.getModel(),j=x.get("clipboard"),L=R.getSelected();j!=null&&j.length&&L&&(R.getSelectedAll().forEach(function(D){var H,G,pt,xt=((G=(H=D.delegate)===null||H===void 0?void 0:H.copy)===null||G===void 0?void 0:G.call(H,D))||D,Nt=xt.collection,jt;if(Nt){var Tt=xt.index()+1,yt={at:Tt,action:N.action||"paste-component"};(0,rt.contains)(j,xt)&&xt.get("copyable")?jt=Nt.add(xt.clone(),yt):jt=F(R,j,xt.parent(),yt)}else{var Kt=(pt=x.Pages.getSelected())===null||pt===void 0?void 0:pt.getMainComponent(),yt={at:(Kt==null?void 0:Kt.components().length)||0,action:N.action||"paste-component"};jt=F(R,j,Kt,yt)}jt=(0,rt.isArray)(jt)?jt:[jt],jt.forEach(function(te){return R.trigger("component:paste",te)})}),L.emitUpdate())}};function F(R,M,N,x){var j=M.filter(function(D){return D.get("copyable")}),L=j.filter(function(D){return R.Components.canMove(N,D).result});return N.components().add(L.map(function(D){return D.clone()}),x)}},129:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>R});var rt=st(50),lt=function(M,N,x){if(x||arguments.length===2)for(var j=0,L=N.length,D;j<L;j++)(D||!(j in N))&&(D||(D=Array.prototype.slice.call(N,0,j)),D[j]=N[j]);return M.concat(D||Array.prototype.slice.call(N))},F="core:component-outline";const R={getPanels:function(M){return this.panels||(this.panels=M.Panels.getPanels()),this.panels},preventDrag:function(M){M.abort=1},tglEffects:function(M){var N=this.em,x=M?"on":"off";if(N){var j=N.Canvas,L=j.getBody(),D=j.getToolbarEl();D&&(D.style.display=M?"none":"");var H=L.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,rt.each)(H,function(G){return G.style.pointerEvents=M?"all":""}),N[x]("run:tlb-move:before",this.preventDrag)}},run:function(M,N){var x=this;this.sender=N,this.selected=lt([],M.getSelectedAll(),!0),M.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=M.Commands.isActive(F)),this.shouldRunSwVisibility&&M.stopCommand(F),M.getModel().stopDefault();var j=this.getPanels(M),L=M.Canvas.getElement(),D=M.getEl(),H=M.Config.stylePrefix;if(!this.helper){var G=document.createElement("span");G.className="".concat(H,"off-prv fa fa-eye-slash"),D.appendChild(G),G.onclick=function(){return x.stopCommand()},this.helper=G}this.helper.style.display="inline-block",j.forEach(function(xt){return xt.set("visible",!1)});var pt=L.style;pt.width="100%",pt.height="100%",pt.top="0",pt.left="0",pt.padding="0",pt.margin="0",M.refresh(),this.tglEffects(1)},stop:function(M){var N=this,x=N.sender,j=x===void 0?{}:x,L=N.selected;j.set&&j.set("active",0);var D=this.getPanels(M);this.shouldRunSwVisibility&&(M.runCommand(F),this.shouldRunSwVisibility=!1),M.getModel().runDefault(),D.forEach(function(G){return G.set("visible",!0)});var H=M.Canvas.getElement();H.setAttribute("style",""),L&&M.select(L),delete this.selected,this.helper&&(this.helper.style.display="none"),M.refresh(),this.tglEffects()}}},116:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=function(){return rt=Object.assign||function(F){for(var R,M=1,N=arguments.length;M<N;M++){R=arguments[M];for(var x in R)Object.prototype.hasOwnProperty.call(R,x)&&(F[x]=R[x])}return F},rt.apply(this,arguments)};const lt={run:function(F,R,M){var N=M||{},x=F.Canvas,j=x.getCanvasView(),L=rt({appendTo:x.getResizerEl(),prefix:F.getConfig().stylePrefix,posFetcher:j.getElementPos.bind(j),mousePosFetcher:x.getMouseRelativePos.bind(x)},N.options||{}),D=this.canvasResizer;return(!D||N.forceNew)&&(this.canvasResizer=new F.Utils.Resizer(L),D=this.canvasResizer),D.setOptions(L,!0),D.blur(),D.focus(N.el),D},stop:function(){var F;(F=this.canvasResizer)===null||F===void 0||F.blur()}}},407:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>dt});var rt=st(50),lt=st(346),F=function(){var ot=function(X,z){return ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,A){et.__proto__=A}||function(et,A){for(var tt in A)Object.prototype.hasOwnProperty.call(A,tt)&&(et[tt]=A[tt])},ot(X,z)};return function(X,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");ot(X,z);function et(){this.constructor=X}X.prototype=z===null?Object.create(z):(et.prototype=z.prototype,new et)}}(),R=function(ot){F(X,ot);function X(){return ot!==null&&ot.apply(this,arguments)||this}return X.prototype.defaults=function(){return{command:"",attributes:{}}},X}(lt.Hn);const M=R;var N=function(){var ot=function(X,z){return ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,A){et.__proto__=A}||function(et,A){for(var tt in A)Object.prototype.hasOwnProperty.call(A,tt)&&(et[tt]=A[tt])},ot(X,z)};return function(X,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");ot(X,z);function et(){this.constructor=X}X.prototype=z===null?Object.create(z):(et.prototype=z.prototype,new et)}}(),x=function(ot){N(X,ot);function X(){return ot!==null&&ot.apply(this,arguments)||this}return X}(lt.FE);const j=x;x.prototype.model=M;var L=st(330),D=function(){var ot=function(X,z){return ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,A){et.__proto__=A}||function(et,A){for(var tt in A)Object.prototype.hasOwnProperty.call(A,tt)&&(et[tt]=A[tt])},ot(X,z)};return function(X,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");ot(X,z);function et(){this.constructor=X}X.prototype=z===null?Object.create(z):(et.prototype=z.prototype,new et)}}(),H=function(){return H=Object.assign||function(ot){for(var X,z=1,et=arguments.length;z<et;z++){X=arguments[z];for(var A in X)Object.prototype.hasOwnProperty.call(X,A)&&(ot[A]=X[A])}return ot},H.apply(this,arguments)},G=function(ot){D(X,ot);function X(z){var et=ot.call(this,z)||this;return et.em=z.config.em,et}return X.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},X.prototype.attributes=function(){return this.model.get("attributes")},X.prototype.handleClick=function(z){z.preventDefault(),z.stopPropagation();var et=this.em,A=et.Canvas.getFrameEl().getBoundingClientRect(),tt=A.left,E=A.top,At=H(H({},z),{clientX:z.clientX-tt,clientY:z.clientY-E});et.trigger("toolbar:run:before",{event:At}),this.execCommand(At)},X.prototype.execCommand=function(z){var et=this,A=et.em,tt=et.model,E={event:z},At=tt.get("command"),Pt=A.Editor;(0,rt.isFunction)(At)&&At(Pt,null,E),(0,rt.isString)(At)&&Pt.runCommand(At,E)},X.prototype.render=function(){var z=this,et=z.em,A=z.$el,tt=z.model,E=tt.get("id"),At=tt.get("label"),Pt=et.getConfig().stylePrefix;return A.addClass("".concat(Pt,"toolbar-item")),E&&A.addClass("".concat(Pt,"toolbar-item__").concat(E)),At&&A.append(At),this},X}(lt.G7);const pt=G;var xt=function(){var ot=function(X,z){return ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,A){et.__proto__=A}||function(et,A){for(var tt in A)Object.prototype.hasOwnProperty.call(A,tt)&&(et[tt]=A[tt])},ot(X,z)};return function(X,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");ot(X,z);function et(){this.constructor=X}X.prototype=z===null?Object.create(z):(et.prototype=z.prototype,new et)}}(),Nt=function(ot){xt(X,ot);function X(z){var et=ot.call(this,z)||this,A=z.em;return et.em=A,et.config={em:A},et.listenTo(et.collection,"reset",et.render),et}return X.prototype.onRender=function(){var z=this.em.config.stylePrefix;this.el.className="".concat(z,"toolbar-items")},X}(L.Z);const jt=Nt;Nt.prototype.itemView=pt;var Tt=st(491),yt=st(163),Kt=st(675),te=function(){return te=Object.assign||function(ot){for(var X,z=1,et=arguments.length;z<et;z++){X=arguments[z];for(var A in X)Object.prototype.hasOwnProperty.call(X,A)&&(ot[A]=X[A])}return ot},te.apply(this,arguments)},ue=function(ot,X){var z={};for(var et in ot)Object.prototype.hasOwnProperty.call(ot,et)&&X.indexOf(et)<0&&(z[et]=ot[et]);if(ot!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,et=Object.getOwnPropertySymbols(ot);A<et.length;A++)X.indexOf(et[A])<0&&Object.prototype.propertyIsEnumerable.call(ot,et[A])&&(z[et[A]]=ot[et[A]]);return z},Zt;const dt={activeResizer:!1,init:function(){this.onSelect=(0,rt.debounce)(this.onSelect,0),(0,rt.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),Zt=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(ot){var X=this,z=this.em,et=z.getConfig().listenToEl,A=z.getContainer().parentNode,tt=ot?"on":"off",E={on:Tt.on,off:Tt.S1};!et.length&&A&&et.push(A);var At=function(Pt,ct){E[tt](ct,"mouseover",X.onHover),E[tt](ct,"mouseleave",X.onOut),E[tt](ct,"click",X.onClick),E[tt](Pt,"scroll",X.onFrameScroll,!0),E[tt](Pt,"resize",X.onFrameResize)};E[tt](window,"resize",this.onFrameUpdated),E[tt](et,"scroll",this.onContainerChange),z[tt]("component:toggled component:update undo redo",this.onSelect,this),z[tt]("change:componentHovered",this.onHovered,this),z[tt]("component:resize styleable:change component:input",this.updateGlobalPos,this),z[tt]("component:update:toolbar",this._upToolbar,this),z[tt]("frame:updated",this.onFrameUpdated,this),z[tt]("canvas:updateTools",this.onFrameUpdated,this),z[tt](z.Canvas.events.refresh,this.updateAttached,this),z.Canvas.getFrames().forEach(function(Pt){var ct=Pt.view,Dt=ct==null?void 0:ct.getWindow();Dt&&At(Dt,ct==null?void 0:ct.getBody())})},onHover:function(ot){ot.stopPropagation();var X=this.em,z=ot.target,et=(0,yt.getComponentView)(z),A=et==null?void 0:et.frameView,tt=et==null?void 0:et.model;if(!tt)for(var E=z.parentNode;!tt&&E&&!(0,Tt.Mx)(E);)tt=(0,yt.getComponentModel)(E),E=E.parentNode;this.currentDoc=z.ownerDocument,X.setHovered(tt,{useValid:!0}),A&&X.setCurrentFrame(A)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(ot,X){var z=this,et,A={};X?(et=X.views)===null||et===void 0||et.forEach(function(tt){var E=tt.el,At=z.getElementPos(E);A={el:E,pos:At,component:X,view:(0,yt.getViewEl)(E)},E.ownerDocument===z.currentDoc&&(z.elHovered=A),z.updateToolsLocal(A)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(tt){var E=tt.view,At=E&&E.getToolsEl();At&&z.toggleToolsEl(0,0,{el:At})}))},onSelect:function(){var ot=this.em,X=ot.getSelected(),z=ot.getCurrentFrame(),et=X&&X.getView(z==null?void 0:z.model),A=et&&et.el,tt={};if(A&&(0,Tt.pn)(A)){var E=this.getElementPos(A);tt={el:A,pos:E,component:X,view:(0,yt.getViewEl)(A)}}this.elSelected=tt,this.updateToolsGlobal(),this.updateLocalPos(tt),this.initResize(X)},updateGlobalPos:function(){var ot=this.getElSelected();ot.el&&(ot.pos=this.getElementPos(ot.el),this.updateToolsGlobal())},updateLocalPos:function(ot){var X=this.getElHovered();X.el&&(X.pos=this.getElementPos(X.el),this.updateToolsLocal(ot))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(ot,X,z){z===void 0&&(z={});var et=z.el||this.canvas.getToolsEl(X);return et&&(et.style.display=ot?"":"none"),et||{}},showElementOffset:function(ot,X,z){z===void 0&&(z={}),Zt&&this.editor.runCommand("show-offset",{el:ot,elPos:X,view:z.view,force:1,top:0,left:0})},hideElementOffset:function(ot){this.editor.stopCommand("show-offset",{view:ot})},showFixedElementOffset:function(ot,X){this.editor.runCommand("show-offset",{el:ot,elPos:X,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(ot){this.canvas.getHighlighter(ot).style.opacity=0},onClick:function(ot){ot.stopPropagation(),ot.preventDefault();var X=this.em;if(X.get("_cmpDrag"))return X.set("_cmpDrag");var z=ot.target,et=(0,yt.getComponentModel)(z);if(!et)for(var A=z.parentNode;!et&&A&&!(0,Tt.Mx)(A);)et=(0,yt.getComponentModel)(A),A=A.parentNode;if(et){if(X.isEditing()&&!et.get("textable")&&et.isChildOf("text"))return;this.select(et,ot)}},select:function(ot,X){X===void 0&&(X={}),ot&&(this.editor.select(ot,{event:X,useValid:!0}),this.initResize(ot))},updateBadge:function(ot,X,z){z===void 0&&(z={});var et=this.canvas,A=(0,yt.getComponentModel)(ot),tt=this.getBadge(z),E=tt.style;if(!A||!A.get("badgable")){E.display="none";return}if(!z.posOnly){var At=this.canvas.getConfig(),Pt=A.getIcon(),ct=At.pStylePrefix||"",Dt="".concat(ct,"badge"),Wt=At.customBadgeLabel,oe="".concat(Pt?'<div class="'.concat(Dt,'__icon">').concat(Pt,"</div>"):"",`
        <div class="`).concat(Dt,'__name">').concat(A.getName(),"</div>");tt.innerHTML=Wt?Wt(A):oe}var Pe="px";E.display="block";var _e=et.getTargetToElementFixed(ot,tt,{pos:X}),ve=_e.top,Ct=z.leftOff<0?-z.leftOff:0;E.top=ve+Pe,E.left=Ct+Pe},showHighlighter:function(ot){this.canvas.getHighlighter(ot).style.opacity=""},initResize:function(ot){var X=this,z=X.em,et=X.canvas,A=z.Editor,tt=!(0,rt.isElement)(ot)&&(0,Tt.o5)(ot)?ot:z.getSelected(),E=tt==null?void 0:tt.get("resizable"),At=Kt.q.Resize,Pt=et.hasCustomSpot(At);if(et.removeSpots({type:At}),tt&&E){et.addSpot({type:At,component:tt});var ct=(0,rt.isElement)(ot)?ot:tt.getEl(),Dt=(0,yt.isObject)(E)?E:{},Wt=Dt.onStart,oe=Wt===void 0?function(){}:Wt,Pe=Dt.onMove,_e=Pe===void 0?function(){}:Pe,ve=Dt.onEnd,Ct=ve===void 0?function(){}:ve,Rt=Dt.updateTarget,zt=Rt===void 0?function(){}:Rt,ie=ue(Dt,["onStart","onMove","onEnd","updateTarget"]);if(Pt||!ct||this.activeResizer)return;var ne,qt=z.config,me=qt.stylePrefix||"",Ne="".concat(me,"resizing"),cr=this,_r={component:tt,el:ct},ar=function(T,B,nt){var ht=nt.docs;ht&&ht.forEach(function(Lt){var Z=Lt.body,Et=Z.className||"";Z.className=(T=="add"?"".concat(Et," ").concat(Ne):Et.replace(Ne,"")).trim()})},he=te({onStart:function(T,B){oe(T,B);var nt=B.el,ht=B.config,Lt=B.resizer,Z=ht.keyHeight,Et=ht.keyWidth,mt=ht.currentUnit,xe=ht.keepAutoHeight,He=ht.keepAutoWidth;ar("add",T,B),ne=z.Styles.getModelToStyle(tt),et.toggleFramesEvents(!1);var De=getComputedStyle(nt),ee=ne.getStyle(),Jt=ee[Et];ht.autoWidth=He&&Jt==="auto",isNaN(parseFloat(Jt))&&(Jt=De[Et]);var Vt=ee[Z];ht.autoHeight=xe&&Vt==="auto",isNaN(parseFloat(Vt))&&(Vt=De[Z]),Lt.startDim.w=parseFloat(Jt),Lt.startDim.h=parseFloat(Vt),Zt=!1,mt&&(ht.unitHeight=(0,yt.getUnitFromValue)(Vt),ht.unitWidth=(0,yt.getUnitFromValue)(Jt)),cr.activeResizer=!0,A.trigger("component:resize",te(te({},_r),{type:"start"}))},onMove:function(T){_e(T),A.trigger("component:resize",te(te({},_r),{type:"move"}))},onEnd:function(T,B){Ct(T,B),ar("remove",T,B),A.trigger("component:resize",te(te({},_r),{type:"end"})),et.toggleFramesEvents(!0),Zt=!0,cr.activeResizer=!1},updateTarget:function(T,B,nt){if(zt(T,B,nt),!!ne){var ht=nt.store,Lt=nt.selectedHandler,Z=nt.config,Et=Z.keyHeight,mt=Z.keyWidth,xe=Z.autoHeight,He=Z.autoWidth,De=Z.unitWidth,ee=Z.unitHeight,Jt=["tc","bc"].indexOf(Lt)>=0,Vt=["cl","cr"].indexOf(Lt)>=0,Te={};if(!Jt){var Be=et.getBody().offsetWidth,Ee=B.w<Be?B.w:Be;Te[mt]=He?"auto":"".concat(Ee).concat(De)}Vt||(Te[Et]=xe?"auto":"".concat(B.h).concat(ee)),z.getDragMode(tt)&&(Te.top="".concat(B.t).concat(ee),Te.left="".concat(B.l).concat(De));var Ke=te(te({},Te),{__p:!ht});ne.addStyle(Ke,{avoidStore:!ht}),z.Styles.__emitCmpStyleUpdate(Ke,{components:z.getSelected()})}}},ie);this.resizer=A.runCommand("resize",{el:ct,options:he,force:1})}else{if(Pt)return;A.stopCommand("resize"),this.resizer=null}},updateToolbar:function(ot){var X=this.canvas,z=this.config.em,et=ot===z?z.getSelected():ot,A=X.getToolbarEl(),tt=A.style,E=et.get("toolbar"),At=z.config.showToolbar,Pt=!X.hasCustomSpot(Kt.q.Select);if(et&&At&&E&&E.length&&Pt){if(tt.display="",!this.toolbar){A.innerHTML="",this.toolbar=new j(E);var ct=new jt({collection:this.toolbar,em:z});A.appendChild(ct.render().el)}this.toolbar.reset(E),tt.top="-100px",tt.left="0"}else tt.display="none"},updateToolbarPos:function(ot){var X="px",z=this.canvas.getToolbarEl().style;z.top="".concat(ot.top).concat(X),z.left="".concat(ot.left).concat(X),z.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(ot){return ot===void 0&&(ot={}),this.canvas.getBadgeEl(ot.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(ot){return ot&&ot.get("status")==="selected"},updateToolsLocal:function(ot){var X=this.em.getConfig(),z=ot||this.getElHovered(),et=z.el,A=z.pos,tt=z.view,E=z.component;if(!et){this.lastHovered=0;return}var At=E.get("hoverable"),Pt=this.lastHovered!==et,ct=Pt?{}:{posOnly:1},Dt=this.canvas.hasCustomSpot(Kt.q.Hover);Pt&&At&&(this.lastHovered=et,Dt?this.hideHighlighter(tt):this.showHighlighter(tt),this.showElementOffset(et,A,{view:tt})),this.isCompSelected(E)&&(this.hideHighlighter(tt),!X.showOffsetsSelected&&this.hideElementOffset(tt));var Wt="px",oe=this.toggleToolsEl(1,tt),Pe=oe.style,_e=this.canvas.canvasRectOffset(et,A),ve=_e.top,Ct=_e.left;!Dt&&this.updateBadge(et,A,te(te({},ct),{view:tt,topOff:ve,leftOff:Ct})),Pe.top=ve+Wt,Pe.left=Ct+Wt,Pe.width=A.width+Wt,Pe.height=A.height+Wt,this._trgToolUp("local",{component:E,el:oe,top:ve,left:Ct,width:A.width,height:A.height})},_upToolbar:(0,rt.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(ot,X){X===void 0&&(X={}),this.em.trigger("canvas:tools:update",te({type:ot},X))},updateToolsGlobal:function(ot){ot===void 0&&(ot={});var X=this.getElSelected(),z=X.el,et=X.pos,A=X.component;if(!z){this.toggleToolsEl(),this.lastSelected=0;return}var tt=this.canvas,E=this.lastSelected!==z;(E||ot.force)&&(this.lastSelected=z,this.updateToolbar(A));var At="px",Pt=this.toggleToolsEl(1),ct=Pt.style,Dt=tt.getTargetToElementFixed(z,tt.getToolbarEl(),{pos:et}),Wt=Dt.canvasOffsetTop,oe=Dt.canvasOffsetLeft;ct.top=Wt+At,ct.left=oe+At,ct.width=et.width+At,ct.height=et.height+At,this.updateToolbarPos({top:Dt.top,left:Dt.left}),this._trgToolUp("global",{component:A,el:Pt,top:Wt,left:oe,width:et.width,height:et.height})},updateAttached:(0,rt.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,rt.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(ot){return this.canvas.getCanvasView().getElementPos(ot,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(ot){ot&&ot.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(ot){(0,yt.hasWin)()&&(this.editor=ot&&ot.get("Editor"),this.enable())},stop:function(ot,X,z){if(z===void 0&&(z={}),!!(0,yt.hasWin)()){var et=this,A=et.em,tt=et.editor;this.onHovered(),this.stopSelectComponent(),!z.preserveSelected&&A.setSelected(),this.toggleToolsEl(),tt&&tt.stopCommand("resize")}}}},189:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>lt});var rt=st(895);const lt={startSelectPosition:function(F,R,M){var N=this;M===void 0&&(M={}),this.isPointed=!1;var x=this.em.Utils,j=F.ownerDocument.body;x&&!this.sorter&&(this.sorter=new x.Sorter({container:j,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:R,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return N.em.getZoomDecimal()}})),M.onStart&&(this.sorter.onStart=M.onStart),F&&this.sorter.startSort(F,{container:j})},getOffsetDim:function(){var F=this.offset(this.canvas.getFrameEl()),R=this.offset(this.canvas.getElement()),M=F.top-R.top,N=F.left-R.left;return{top:M,left:N}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,rt.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,rt.default)(this.cDim[this.posIndex][5]).parent():(0,rt.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(F,R,M){var N=F||0,x=R||"before",j=M.length,L=j!==0&&x=="after"&&N==j;return j!==0&&(!L&&!M[N][4]||M[N-1]&&!M[N-1][4]||L&&!M[N-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>N});var rt=st(50),lt=st(675),F=st(895),R=st(491),M=function(){return M=Object.assign||function(x){for(var j,L=1,D=arguments.length;L<D;L++){j=arguments[L];for(var H in j)Object.prototype.hasOwnProperty.call(j,H)&&(x[H]=j[H])}return x},M.apply(this,arguments)};const N={getOffsetMethod:function(x){var j=x||"";return"get"+j+"OffsetViewerEl"},run:function(x,j,L){var D=this.canvas,H=L||{},G=H.state||"",pt=x.getConfig(),xt=this.em.getZoomDecimal(),Nt=H.el;if(!pt.showOffsets||!Nt||(0,R.BM)(Nt)||!pt.showOffsetsSelected&&G=="Fixed"){x.stopCommand("".concat(this.id),L);return}if(!D.hasCustomSpot(lt.q.Spacing)){var jt=M({},H.elPos||D.getElementPos(Nt));(0,rt.isUndefined)(H.top)||(jt.top=H.top),(0,rt.isUndefined)(H.left)||(jt.left=H.left);var Tt=window.getComputedStyle(Nt),yt=this.ppfx,Kt=G+"State",te=this.getOffsetMethod(G),ue=D[te](L.view);ue.style.opacity="";var Zt=this["marginT"+G],dt=this["marginB"+G],ot=this["marginL"+G],X=this["marginR"+G],z=this["padT"+G],et=this["padB"+G],A=this["padL"+G],tt=this["padR"+G];if(ue.childNodes.length&&(this[Kt]="1",Zt=ue.querySelector("[data-offset-m-t]"),dt=ue.querySelector("[data-offset-m-b]"),ot=ue.querySelector("[data-offset-m-l]"),X=ue.querySelector("[data-offset-m-r]"),z=ue.querySelector("[data-offset-p-t]"),et=ue.querySelector("[data-offset-p-b]"),A=ue.querySelector("[data-offset-p-l]"),tt=ue.querySelector("[data-offset-p-r]")),!this[Kt]){var E=G.toLowerCase(),At=E+"margin-v",Pt=E+"padding-v",ct=(0,F.default)('<div class="'.concat(yt,'marginName">')).get(0),Dt=(0,F.default)('<div class="'.concat(yt,'paddingName">')).get(0),Wt=yt+At+"-el",oe=yt+Pt+"-el",Pe="".concat(Wt," ").concat(yt+At),_e="".concat(oe," ").concat(yt+Pt);Zt=(0,F.default)('<div class="'.concat(Pe,'-top"></div>')).get(0),dt=(0,F.default)('<div class="'.concat(Pe,'-bottom"></div>')).get(0),ot=(0,F.default)('<div class="'.concat(Pe,'-left"></div>')).get(0),X=(0,F.default)('<div class="'.concat(Pe,'-right"></div>')).get(0),z=(0,F.default)('<div class="'.concat(_e,'-top"></div>')).get(0),et=(0,F.default)('<div class="'.concat(_e,'-bottom"></div>')).get(0),A=(0,F.default)('<div class="'.concat(_e,'-left"></div>')).get(0),tt=(0,F.default)('<div class="'.concat(_e,'-right"></div>')).get(0),this["marginT"+G]=Zt,this["marginB"+G]=dt,this["marginL"+G]=ot,this["marginR"+G]=X,this["padT"+G]=z,this["padB"+G]=et,this["padL"+G]=A,this["padR"+G]=tt,ct.appendChild(Zt),ct.appendChild(dt),ct.appendChild(ot),ct.appendChild(X),Dt.appendChild(z),Dt.appendChild(et),Dt.appendChild(A),Dt.appendChild(tt),ue.appendChild(ct),ue.appendChild(Dt),this[Kt]="1"}var ve="px",Ct=parseFloat(Tt.marginLeft.replace(ve,""))*xt,Rt=parseFloat(Tt.marginRight.replace(ve,""))*xt,zt=parseFloat(Tt.marginTop.replace(ve,""))*xt,ie=parseFloat(Tt.marginBottom.replace(ve,""))*xt,ne=Zt.style,qt=dt.style,me=ot.style,Ne=X.style,cr=z.style,_r=et.style,ar=A.style,he=tt.style,T=parseFloat(jt.left),B=parseFloat(Tt.width)*xt+ve;ne.height=zt+ve,ne.width=B,ne.top=jt.top-zt+ve,ne.left=T+ve,qt.height=ie+ve,qt.width=B,qt.top=jt.top+jt.height+ve,qt.left=T+ve;var nt=jt.height+zt+ie+ve,ht=jt.top-zt+ve;me.height=nt,me.width=Ct+ve,me.top=ht,me.left=T-Ct+ve,Ne.height=nt,Ne.width=Rt+ve,Ne.top=ht,Ne.left=T+jt.width+ve;var Lt=parseFloat(Tt.paddingTop)*xt;cr.height=Lt+ve;var Z=parseFloat(Tt.paddingBottom)*xt;_r.height=Z+ve;var Et=jt.height-Z-Lt+ve,mt=jt.top+Lt+ve;ar.height=Et,ar.width=parseFloat(Tt.paddingLeft)*xt+ve,ar.top=mt;var xe=parseFloat(Tt.paddingRight)*xt;he.height=Et,he.width=xe+ve,he.top=mt}},stop:function(x,j,L){L===void 0&&(L={});var D=L||{},H=D.state||"",G=this.getOffsetMethod(H),pt=L.view,xt=this.canvas,Nt=xt[G](pt);Nt.style.opacity=0}}},434:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>F});var rt=st(50),lt=st(163);const F={init:function(){(0,rt.bindAll)(this,"_onFramesChange")},run:function(R){this.toggleVis(R,!0)},stop:function(R){this.toggleVis(R,!1)},toggleVis:function(R,M){if(M===void 0&&(M=!0),!R.Commands.isActive("preview")){var N=R.Canvas,x=M?"on":"off",j=N.getModel();j[x]("change:frames",this._onFramesChange),this.handleFrames(N.getFrames(),M)}},handleFrames:function(R,M){var N=this;R.forEach(function(x){var j;!((j=x.view)===null||j===void 0)&&j.loaded&&N._upFrame(x,M),x.__ol||(x.on("loaded",function(){return N._upFrame(x)}),x.__ol=!0)})},_onFramesChange:function(R,M){this.handleFrames(M)},_upFrame:function(R,M){var N,x=this,j=x.ppfx,L=x.em,D=x.id,H=(0,lt.isDef)(M)?M:L.Commands.isActive(D),G=H?"add":"remove",pt="".concat(j,"dashed");(N=R.view)===null||N===void 0||N.getBody().classList[G](pt)}}},346:(w,Y,st)=>{st.d(Y,{FE:()=>N,G7:()=>x,Hn:()=>M,pH:()=>L,vA:()=>j});var rt=st(316),lt=st.n(rt),F=function(){var D=function(H,G){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,xt){pt.__proto__=xt}||function(pt,xt){for(var Nt in xt)Object.prototype.hasOwnProperty.call(xt,Nt)&&(pt[Nt]=xt[Nt])},D(H,G)};return function(H,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");D(H,G);function pt(){this.constructor=H}H.prototype=G===null?Object.create(G):(pt.prototype=G.prototype,new pt)}}(),R=function(){return R=Object.assign||function(D){for(var H,G=1,pt=arguments.length;G<pt;G++){H=arguments[G];for(var xt in H)Object.prototype.hasOwnProperty.call(H,xt)&&(D[xt]=H[xt])}return D},R.apply(this,arguments)},M=function(D){F(H,D);function H(){return D!==null&&D.apply(this,arguments)||this}return H}(lt().Model),N=function(D){F(H,D);function H(){return D!==null&&D.apply(this,arguments)||this}return H}(lt().Collection),x=function(D){F(H,D);function H(){return D!==null&&D.apply(this,arguments)||this}return H}(lt().View),j;(function(D){D.Screen="screen",D.World="world"})(j||(j={}));var L={x:0,y:0};R(R({},L),{width:0,height:0})},330:(w,Y,st)=>{st.d(Y,{Z:()=>M});var rt=st(50),lt=st(346),F=function(){var N=function(x,j){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,D){L.__proto__=D}||function(L,D){for(var H in D)Object.prototype.hasOwnProperty.call(D,H)&&(L[H]=D[H])},N(x,j)};return function(x,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");N(x,j);function L(){this.constructor=x}x.prototype=j===null?Object.create(j):(L.prototype=j.prototype,new L)}}(),R=function(N){F(x,N);function x(j,L,D){j===void 0&&(j={}),D===void 0&&(D=!1);var H=N.call(this,j)||this;return H.itemsView="",H.itemType="type",H.reuseView=!1,H.config=L||j.config||{},D&&H.listenTo(H.collection,"add",H.addTo),H.items=[],H}return x.prototype.addTo=function(j){this.add(j)},x.prototype.itemViewNotFound=function(j){var L=this,D=L.config,H=L.ns,G=D.em,pt="".concat(H?"[".concat(H,"]: "):"","'").concat(j,"' type not found");G&&G.logWarning(pt)},x.prototype.add=function(j,L){var D=this,H=D.config,G=D.reuseView,pt=D.items,xt=this.itemsView||{},Nt=["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],jt=L||null,Tt=this.itemView,yt=j.get(this.itemType),Kt;xt[yt]?Tt=xt[yt]:yt&&!xt[yt]&&!(0,rt.includes)(Nt,yt)&&this.itemViewNotFound(yt),j.view&&G?Kt=j.view:Kt=new Tt({model:j,config:H},H),pt&&pt.push(Kt);var te=Kt.render().el;jt?jt.appendChild(te):this.$el.append(te)},x.prototype.render=function(){var j=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(L){this.add(L,j)},this),this.$el.append(j),this.onRender(),this},x.prototype.onRender=function(){},x.prototype.onRemoveBefore=function(j,L){},x.prototype.onRemove=function(j,L){},x.prototype.remove=function(j){j===void 0&&(j={});var L=this.items;return this.onRemoveBefore(L,j),this.clearItems(),N.prototype.remove.call(this),this.onRemove(L,j),this},x.prototype.clearItems=function(){this.items},x}(lt.G7);const M=R;R.prototype.itemView=""},668:(w,Y,st)=>{st.d(Y,{Z:()=>x});var rt=st(50),lt=st(491),F=function(){return F=Object.assign||function(j){for(var L,D=1,H=arguments.length;D<H;D++){L=arguments[D];for(var G in L)Object.prototype.hasOwnProperty.call(L,G)&&(j[G]=L[G])}return j},F.apply(this,arguments)},R=function(){return{x:0,y:0}},M=["x","y"],N=function(){function j(L){return L===void 0&&(L={}),this.opts={snapOffset:5,scale:1},(0,rt.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(L),this.delta=R(),this.lastScroll=R(),this.lastScrollDiff=R(),this.startPointer=R(),this.startPosition=R(),this.globScrollDiff=R(),this.currentPointer=R(),this.position=R(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return j.prototype.setOptions=function(L){L===void 0&&(L={}),this.opts=F(F({},this.opts),L)},j.prototype.toggleDrag=function(L){var D=this.getDocumentEl(),H=this.getContainerEl(),G=this.getWindowEl(),pt=L?"on":"off",xt={on:lt.on,off:lt.S1};xt[pt](H,"mousemove dragover",this.drag),xt[pt](D,"mouseup dragend touchend",this.stop),xt[pt](D,"keydown",this.keyHandle),xt[pt](G,"scroll",this.handleScroll)},j.prototype.handleScroll=function(){var L=this,D=L.lastScroll,H=L.delta,G=this.getScrollInfo(),pt={x:G.x-D.x,y:G.y-D.y};this.move(H.x+pt.x,H.y+pt.y),this.lastScrollDiff=pt},j.prototype.start=function(L){var D=this.opts,H=D.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(L),this.guidesStatic=(0,rt.result)(D,"guidesStatic")||[],this.guidesTarget=(0,rt.result)(D,"guidesTarget")||[],(0,rt.isFunction)(H)&&H(L,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=R(),this.globScrollDiff=R(),this.drag(L)},j.prototype.drag=function(L){var D=this,H=this,G=H.opts,pt=H.lastScrollDiff,xt=H.globScrollDiff,Nt=G.onDrag,jt=this.startPointer,Tt=this.getPointerPos(L),yt={x:xt.x+pt.x,y:xt.y+pt.y};this.globScrollDiff=yt;var Kt={x:Tt.x-jt.x+yt.x,y:Tt.y-jt.y+yt.y};this.lastScrollDiff=R();var te=this.lockedAxis;L.shiftKey?te=!te&&this.detectAxisLock(Kt.x,Kt.y):te=null,te==="x"?Kt.x=jt.x:te==="y"&&(Kt.y=jt.y);var ue=function(et){M.forEach(function(A){return et[A]=et[A]*(0,rt.result)(G,"scale")}),D.delta=et,D.move(et.x,et.y),(0,rt.isFunction)(Nt)&&Nt(L,D)},Zt=F({},Kt);if(this.currentPointer=Tt,this.lockedAxis=te,this.lastScroll=this.getScrollInfo(),ue(Kt),this.guidesTarget.length){var dt=this.snapGuides(Zt),ot=dt.newDelta,X=dt.trgX,z=dt.trgY;(X||z)&&ue(ot)}L.which===0&&this.stop(L)},j.prototype.snapGuides=function(L){var D=this,H=L,G=this,pt=G.trgX,xt=G.trgY;return this.guidesTarget.forEach(function(Nt){Nt.x&&D.trgX||Nt.y&&D.trgY||(Nt.active=!1,D.guidesStatic.forEach(function(jt){if(!(Nt.y&&jt.x||Nt.x&&jt.y)){var Tt=Nt.y&&jt.y,yt=Tt?"y":"x",Kt=Nt[yt],te=jt[yt],ue=L[yt],Zt=Tt?xt:pt;if(D.isPointIn(Kt,te)&&(0,rt.isUndefined)(Zt)){var dt=ue-(Kt-te);D.setGuideLock(Nt,dt)}}}))}),pt=this.trgX,xt=this.trgY,M.forEach(function(Nt){var jt=Nt.toUpperCase(),Tt=D["trg".concat(jt)];Tt&&!D.isPointIn(L[Nt],Tt.lock)&&(D.setGuideLock(Tt,null),Tt=null),Tt&&!(0,rt.isUndefined)(Tt.lock)&&(H[Nt]=Tt.lock)}),{newDelta:H,trgX:this.trgX,trgY:this.trgY}},j.prototype.isPointIn=function(L,D,H){var G=H===void 0?{}:H,pt=G.offset,xt=pt||this.opts.snapOffset||0;return L>=D&&L<=D+xt||L<=D&&L>=D-xt},j.prototype.setGuideLock=function(L,D){var H=(0,rt.isUndefined)(L.x)?"Y":"X",G="trg".concat(H);return D!==null?(L.active=!0,L.lock=D,this[G]=L):(delete L.active,delete L.lock,delete this[G]),L},j.prototype.stop=function(L,D){D===void 0&&(D={});var H=this.delta,G=!!D.cancel,pt=G?0:H.x,xt=G?0:H.y;this.toggleDrag(),this.lockedAxis=null,this.move(pt,xt,!0);var Nt=this.opts.onEnd;(0,rt.isFunction)(Nt)&&Nt(L,this,{cancelled:G})},j.prototype.keyHandle=function(L){(0,lt.kl)(L)&&this.stop(L,{cancel:!0})},j.prototype.move=function(L,D,H){var G=this,pt=G.el,xt=G.opts,Nt=this.startPosition;if(Nt){var jt=xt.setPosition,Tt=Nt.x+L,yt=Nt.y+D;this.position={x:Tt,y:yt,end:H},(0,rt.isFunction)(jt)&&jt(this.position),pt&&(pt.style.left="".concat(Tt,"px"),pt.style.top="".concat(yt,"px"))}},j.prototype.getContainerEl=function(){var L=this.opts.container;return L?[L]:this.getDocumentEl()},j.prototype.getWindowEl=function(){var L=this.getContainerEl();return L.map(function(D){var H=D.ownerDocument||D;return H.defaultView||H.parentWindow})},j.prototype.getDocumentEl=function(L){var D=this.opts.doc;if(L=L||this.el,!this.docs.length){var H=[document];L&&H.push(L.ownerDocument),D&&H.push(D),this.docs=H}return this.docs},j.prototype.getPointerPos=function(L){var D=this.opts.getPointerPosition,H=(0,lt.VB)(L);return D?D(L):{x:H.clientX,y:H.clientY}},j.prototype.getStartPosition=function(){var L=this,D=L.el,H=L.opts,G=H.getPosition,pt=R();return(0,rt.isFunction)(G)?pt=G():D&&(pt={x:parseFloat(D.style.left),y:parseFloat(D.style.top)}),pt},j.prototype.getScrollInfo=function(){var L=this.opts.doc,D=L&&L.body;return{y:D?D.scrollTop:0,x:D?D.scrollLeft:0}},j.prototype.detectAxisLock=function(L,D){var H=L,G=D,pt=Math.abs(H),xt=Math.abs(G);if(G>=pt||G<=-pt)return"x";if(H>xt||H<-xt)return"y"},j}();const x=N},895:(w,Y,st)=>{st.r(Y),st.d(Y,{default:()=>Kn});var rt=typeof document<"u"?document:null,lt=typeof window<"u"?window:null,F=Array.prototype,R=F.filter,M=F.indexOf,N=F.map,x=F.push,j=F.reverse,L=F.slice,D=F.splice,H=/^#[\w-]*$/,G=/^\.[\w-]*$/,pt=/<.+>/,xt=/^\w+$/;function Nt(U,ft){return ft===void 0&&(ft=rt),G.test(U)?ft.getElementsByClassName(U.slice(1)):xt.test(U)?ft.getElementsByTagName(U):ft.querySelectorAll(U)}function jt(U,ft){if(ft===void 0&&(ft=rt),!!U){if(U.__cash)return U;var wt=U;if(et(U)){if(ft.__cash&&(ft=ft[0]),wt=H.test(U)?ft.getElementById(U.slice(1)):pt.test(U)?nr(U):Nt(U,ft),!wt)return}else if(z(U))return this.ready(U);(wt.nodeType||wt===lt)&&(wt=[wt]),this.length=wt.length;for(var Ht=0,de=this.length;Ht<de;Ht++)this[Ht]=wt[Ht]}}function Tt(U,ft){return new jt(U,ft)}var yt=Tt.fn=Tt.prototype=jt.prototype={constructor:Tt,__cash:!0,length:0,splice:D};yt.get=function(U){return U===void 0?L.call(this):this[U<0?U+this.length:U]},yt.eq=function(U){return Tt(this.get(U))},yt.first=function(){return this.eq(0)},yt.last=function(){return this.eq(-1)},yt.map=function(U){return Tt(N.call(this,function(ft,wt){return U.call(ft,wt,ft)}))},yt.slice=function(){return Tt(L.apply(this,arguments))};var Kt=/(?:^\w|[A-Z]|\b\w)/g,te=/[\s-_]+/g;function ue(U){return U.replace(Kt,function(ft,wt){return ft[wt?"toUpperCase":"toLowerCase"]()}).replace(te,"")}Tt.camelCase=ue;function Zt(U,ft){for(var wt=0,Ht=U.length;wt<Ht&&ft.call(U[wt],U[wt],wt,U)!==!1;wt++);}Tt.each=Zt,yt.each=function(U){return Zt(this,function(ft,wt){return U.call(ft,wt,ft)}),this},yt.removeProp=function(U){return this.each(function(ft,wt){delete wt[U]})};function dt(U){U===void 0&&(U=this);for(var ft=arguments,wt=ft.length,Ht=wt<2?0:1;Ht<wt;Ht++)for(var de in ft[Ht])U[de]=ft[Ht][de];return U}Tt.extend=yt.extend=dt;var ot=1;Tt.guid=ot;function X(U,ft){var wt=U&&(U.matches||U.webkitMatchesSelector||U.mozMatchesSelector||U.msMatchesSelector||U.oMatchesSelector);return!!wt&&wt.call(U,ft)}Tt.matches=X;function z(U){return typeof U=="function"}Tt.isFunction=z;function et(U){return typeof U=="string"}Tt.isString=et;function A(U){return!isNaN(parseFloat(U))&&isFinite(U)}Tt.isNumeric=A;var tt=Array.isArray;Tt.isArray=tt,yt.prop=function(U,ft){if(U){if(et(U))return arguments.length<2?this[0]&&this[0][U]:this.each(function(Ht,de){de[U]=ft});for(var wt in U)this.prop(wt,U[wt]);return this}};function E(U){return et(U)?function(ft,wt){return X(wt,U)}:U.__cash?function(ft,wt){return U.is(wt)}:function(ft,wt,Ht){return wt===Ht}}yt.filter=function(U){if(!U)return Tt();var ft=z(U)?U:E(U);return Tt(R.call(this,function(wt,Ht){return ft.call(wt,Ht,wt,U)}))};var At=/\S+/g;function Pt(U){return et(U)?U.match(At)||[]:[]}yt.hasClass=function(U){var ft=Pt(U),wt=!1;return ft.length&&this.each(function(Ht,de){return wt=de.classList.contains(ft[0]),!wt}),wt},yt.removeAttr=function(U){var ft=Pt(U);return ft.length?this.each(function(wt,Ht){Zt(ft,function(de){Ht.removeAttribute(de)})}):this},yt.attr=function(U,ft){if(U){if(et(U)){if(arguments.length<2){if(!this[0])return;var wt=this[0].getAttribute(U);return wt===null?void 0:wt}return ft===null?this.removeAttr(U):this.each(function(de,je){je.setAttribute(U,ft)})}for(var Ht in U)this.attr(Ht,U[Ht]);return this}},yt.toggleClass=function(U,ft){var wt=Pt(U),Ht=ft!==void 0;return wt.length?this.each(function(de,je){Zt(wt,function(tr){Ht?ft?je.classList.add(tr):je.classList.remove(tr):je.classList.toggle(tr)})}):this},yt.addClass=function(U){return this.toggleClass(U,!0)},yt.removeClass=function(U){return arguments.length?this.toggleClass(U,!1):this.attr("class","")};function ct(U){return U.filter(function(ft,wt,Ht){return Ht.indexOf(ft)===wt})}Tt.unique=ct,yt.add=function(U,ft){return Tt(ct(this.get().concat(Tt(U,ft).get())))};function Dt(U,ft,wt){if(U.nodeType===1){var Ht=lt.getComputedStyle(U,null);return ft?wt?Ht.getPropertyValue(ft):Ht[ft]:Ht}}function Wt(U,ft){return parseInt(Dt(U,ft),10)||0}var oe=/^--/;function Pe(U){return oe.test(U)}var _e={},ve=rt&&rt.createElement("div"),Ct=ve?ve.style:{},Rt=["webkit","moz","ms","o"];function zt(U,ft){if(ft===void 0&&(ft=Pe(U)),ft)return U;if(!_e[U]){var wt=ue(U),Ht=""+wt.charAt(0).toUpperCase()+wt.slice(1),de=(wt+" "+Rt.join(Ht+" ")+Ht).split(" ");Zt(de,function(je){if(je in Ct)return _e[U]=je,!1})}return _e[U]}Tt.prefixedProp=zt;var ie={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ne(U,ft,wt){return wt===void 0&&(wt=Pe(U)),!wt&&!ie[U]&&A(ft)?ft+"px":ft}yt.css=function(U,ft){if(et(U)){var wt=Pe(U);return U=zt(U,wt),arguments.length<2?this[0]&&Dt(this[0],U,wt):U?(ft=ne(U,ft,wt),this.each(function(de,je){je.nodeType===1&&(wt?je.style.setProperty(U,ft):je.style[U]=ft)})):this}for(var Ht in U)this.css(Ht,U[Ht]);return this};var qt="__cashData",me=/^data-(.*)/;Tt.hasData=function(U){return qt in U};function Ne(U){return U[qt]=U[qt]||{}}function cr(U,ft){var wt=Ne(U);if(ft){if(!(ft in wt)){var Ht=U.dataset?U.dataset[ft]||U.dataset[ue(ft)]:Tt(U).attr("data-"+ft);if(Ht!==void 0){try{Ht=JSON.parse(Ht)}catch{}wt[ft]=Ht}}return wt[ft]}return wt}function _r(U,ft){ft===void 0?delete U[qt]:delete Ne(U)[ft]}function ar(U,ft,wt){Ne(U)[ft]=wt}yt.data=function(U,ft){var wt=this;if(!U)return this[0]?(Zt(this[0].attributes,function(de){var je=de.name.match(me);je&&wt.data(je[1])}),cr(this[0])):void 0;if(et(U))return ft===void 0?this[0]&&cr(this[0],U):this.each(function(de,je){return ar(je,U,ft)});for(var Ht in U)this.data(Ht,U[Ht]);return this},yt.removeData=function(U){return this.each(function(ft,wt){return _r(wt,U)})};function he(U,ft){return Wt(U,"border"+(ft?"Left":"Top")+"Width")+Wt(U,"padding"+(ft?"Left":"Top"))+Wt(U,"padding"+(ft?"Right":"Bottom"))+Wt(U,"border"+(ft?"Right":"Bottom")+"Width")}Zt(["Width","Height"],function(U){yt["inner"+U]=function(){if(this[0])return this[0]===lt?lt["inner"+U]:this[0]["client"+U]}}),Zt(["width","height"],function(U,ft){yt[U]=function(wt){return this[0]?arguments.length?(wt=parseInt(wt,10),this.each(function(Ht,de){if(de.nodeType===1){var je=Dt(de,"boxSizing");de.style[U]=ne(U,wt+(je==="border-box"?he(de,!ft):0))}})):this[0]===lt?this[0][ue("outer-"+U)]:this[0].getBoundingClientRect()[U]-he(this[0],!ft):wt===void 0?void 0:this}}),Zt(["Width","Height"],function(U,ft){yt["outer"+U]=function(wt){if(this[0])return this[0]===lt?lt["outer"+U]:this[0]["offset"+U]+(wt?Wt(this[0],"margin"+(ft?"Top":"Left"))+Wt(this[0],"margin"+(ft?"Bottom":"Right")):0)}});function T(U,ft){for(var wt=0,Ht=ft.length;wt<Ht;wt++)if(U.indexOf(ft[wt])<0)return!1;return!0}function B(U,ft,wt){Zt(U[wt],function(Ht){Ht[0];var de=Ht[1];ft.removeEventListener(wt,de)}),delete U[wt]}var nt="__cashEvents",ht=".";function Lt(U){return U[nt]=U[nt]||{}}function Z(U,ft,wt,Ht){Ht.guid=Ht.guid||ot++;var de=Lt(U);de[ft]=de[ft]||[],de[ft].push([wt,Ht]),U.addEventListener(ft,Ht)}function Et(U){var ft=U.split(ht);return[ft[0],ft.slice(1).sort()]}function mt(U,ft,wt,Ht){var de=Lt(U);if(ft){var je=de[ft];if(!je)return;Ht&&(Ht.guid=Ht.guid||ot++),de[ft]=je.filter(function(tr){var Zr=tr[0],Jr=tr[1];if(Ht&&Jr.guid!==Ht.guid||!T(Zr,wt))return!0;U.removeEventListener(ft,Jr)})}else if(!wt||!wt.length)for(ft in de)B(de,U,ft);else for(ft in de)mt(U,ft,wt,Ht)}yt.off=function(U,ft){var wt=this;return U===void 0?this.each(function(Ht,de){return mt(de)}):Zt(Pt(U),function(Ht){var de=Et(Ht),je=de[0],tr=de[1];wt.each(function(Zr,Jr){return mt(Jr,je,tr,ft)})}),this},yt.on=function(U,ft,wt,Ht){var de=this;if(!et(U)){for(var je in U)this.on(je,ft,U[je]);return this}return z(ft)&&(wt=ft,ft=!1),Zt(Pt(U),function(tr){var Zr=Et(tr),Jr=Zr[0],Tr=Zr[1];de.each(function(Co,Qr){var Cn=function xo(Er){if(!(Er.namespace&&!T(Tr,Er.namespace.split(ht)))){var mr=Qr;if(ft){for(var Rr=Er.target;!X(Rr,ft);)if(Rr===Qr||(Rr=Rr.parentNode,!Rr))return;mr=Rr}Er.namespace=Er.namespace||"";var xn=wt.call(mr,Er,Er.data);Ht&&mt(Qr,Jr,Tr,xo),xn===!1&&(Er.preventDefault(),Er.stopPropagation())}};Cn.guid=wt.guid=wt.guid||ot++,Z(Qr,Jr,Tr,Cn)})}),this},yt.one=function(U,ft,wt){return this.on(U,ft,wt,!0)},yt.ready=function(U){var ft=function(){return U(Tt)};return rt.readyState!=="loading"?setTimeout(ft):rt.addEventListener("DOMContentLoaded",ft),this},yt.trigger=function(U,ft){var wt=U;if(et(U)){var Ht=Et(U),de=Ht[0],je=Ht[1];wt=rt.createEvent("HTMLEvents"),wt.initEvent(de,!0,!0),wt.namespace=je.join(ht)}return wt.data=ft,this.each(function(tr,Zr){Zr.dispatchEvent(wt)})};function xe(U){var ft=[];return Zt(U.options,function(wt){wt.selected&&!wt.disabled&&!wt.parentNode.disabled&&ft.push(wt.value)}),ft}function He(U){return U.selectedIndex<0?null:U.options[U.selectedIndex].value}var De=/select-one/i,ee=/select-multiple/i;function Jt(U){var ft=U.type;return De.test(ft)?He(U):ee.test(ft)?xe(U):U.value}var Vt=/%20/g;function Te(U,ft){return"&"+encodeURIComponent(U)+"="+encodeURIComponent(ft).replace(Vt,"+")}var Be=/file|reset|submit|button|image/i,Ee=/radio|checkbox/i;yt.serialize=function(){var U="";return this.each(function(ft,wt){Zt(wt.elements||[wt],function(Ht){if(!(Ht.disabled||!Ht.name||Ht.tagName==="FIELDSET")&&!Be.test(Ht.type)&&!(Ee.test(Ht.type)&&!Ht.checked)){var de=Jt(Ht);if(de!==void 0){var je=tt(de)?de:[de];Zt(je,function(tr){U+=Te(Ht.name,tr)})}}})}),U.substr(1)},yt.val=function(U){return U===void 0?this[0]&&Jt(this[0]):this.each(function(ft,wt){var Ht=ee.test(wt.type),de=U===null?Ht?[]:"":U;Ht&&tt(de)?Zt(wt.options,function(je){je.selected=de.indexOf(je.value)>=0}):wt.value=de})},yt.clone=function(){return this.map(function(U,ft){return ft.cloneNode(!0)})},yt.detach=function(){return this.each(function(U,ft){ft.parentNode&&ft.parentNode.removeChild(ft)})};var Ke=/^\s*<(\w+)[^>]*>/,ge=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/,fr;function Me(){if(!fr){var U=rt.createElement("table"),ft=rt.createElement("tr");fr={"*":rt.createElement("div"),tr:rt.createElement("tbody"),td:ft,th:ft,thead:U,tbody:U,tfoot:U}}}function nr(U){if(Me(),!et(U))return[];if(ge.test(U))return[rt.createElement(RegExp.$1)];var ft=Ke.test(U)&&RegExp.$1,wt=fr[ft]||fr["*"];return wt.innerHTML=U,Tt(wt.childNodes).detach().get()}Tt.parseHTML=nr,yt.empty=function(){var U=this[0];if(U)for(;U.firstChild;)U.removeChild(U.firstChild);return this};function Qe(U,ft,wt){wt?U.insertBefore(ft,U.childNodes[0]):U.appendChild(ft)}function Xt(U,ft,wt){if(ft!==void 0){var Ht=et(ft);!Ht&&ft.length?Zt(ft,function(de){return Xt(U,de,wt)}):Zt(U,Ht?function(de){de.insertAdjacentHTML(wt?"afterbegin":"beforeend",ft)}:function(de,je){return Qe(de,je?ft.cloneNode(!0):ft,wt)})}}yt.append=function(){var U=this;return Zt(arguments,function(ft){Xt(U,ft)}),this},yt.appendTo=function(U){return Xt(Tt(U),this),this},yt.html=function(U){if(U===void 0)return this[0]&&this[0].innerHTML;var ft=U.nodeType?U[0].outerHTML:U;return this.each(function(wt,Ht){Ht.innerHTML=ft})},yt.insertAfter=function(U){var ft=this;return Tt(U).each(function(wt,Ht){var de=Ht.parentNode;ft.each(function(je,tr){de.insertBefore(wt?tr.cloneNode(!0):tr,Ht.nextSibling)})}),this},yt.after=function(){var U=this;return Zt(j.apply(arguments),function(ft){j.apply(Tt(ft).slice()).insertAfter(U)}),this},yt.insertBefore=function(U){var ft=this;return Tt(U).each(function(wt,Ht){var de=Ht.parentNode;ft.each(function(je,tr){de.insertBefore(wt?tr.cloneNode(!0):tr,Ht)})}),this},yt.before=function(){var U=this;return Zt(arguments,function(ft){Tt(ft).insertBefore(U)}),this},yt.prepend=function(){var U=this;return Zt(arguments,function(ft){Xt(U,ft,!0)}),this},yt.prependTo=function(U){return Xt(Tt(U),j.apply(this.slice()),!0),this},yt.remove=function(){return this.detach().off()},yt.replaceWith=function(U){var ft=this;return this.each(function(wt,Ht){var de=Ht.parentNode;if(de){var je=wt?Tt(U).clone():Tt(U);if(!je[0])return ft.remove(),!1;de.replaceChild(je[0],Ht),Tt(je[0]).after(je.slice(1))}})},yt.replaceAll=function(U){return Tt(U).replaceWith(this),this},yt.text=function(U){return U===void 0?this[0]?this[0].textContent:"":this.each(function(ft,wt){wt.textContent=U})};var Or=rt&&rt.documentElement;yt.offset=function(){var U=this[0];if(U){var ft=U.getBoundingClientRect();return{top:ft.top+lt.pageYOffset-Or.clientTop,left:ft.left+lt.pageXOffset-Or.clientLeft}}},yt.offsetParent=function(){return Tt(this[0]&&this[0].offsetParent)},yt.position=function(){var U=this[0];if(U)return{left:U.offsetLeft,top:U.offsetTop}},yt.children=function(U){var ft=[];return this.each(function(wt,Ht){x.apply(ft,Ht.children)}),ft=Tt(ct(ft)),U?ft.filter(function(wt,Ht){return X(Ht,U)}):ft},yt.contents=function(){var U=[];return this.each(function(ft,wt){x.apply(U,wt.tagName==="IFRAME"?[wt.contentDocument]:wt.childNodes)}),Tt(U.length&&ct(U))},yt.find=function(U){for(var ft=[],wt=0,Ht=this.length;wt<Ht;wt++){var de=Nt(U,this[wt]);de.length&&x.apply(ft,de)}return Tt(ft.length&&ct(ft))},yt.has=function(U){var ft=et(U)?function(wt,Ht){return!!Nt(U,Ht).length}:function(wt,Ht){return Ht.contains(U)};return this.filter(ft)},yt.is=function(U){if(!U||!this[0])return!1;var ft=E(U),wt=!1;return this.each(function(Ht,de){return wt=ft(Ht,de,U),!wt}),wt},yt.next=function(){return Tt(this[0]&&this[0].nextElementSibling)},yt.not=function(U){if(!U||!this[0])return this;var ft=E(U);return this.filter(function(wt,Ht){return!ft(wt,Ht,U)})},yt.parent=function(){var U=[];return this.each(function(ft,wt){wt&&wt.parentNode&&U.push(wt.parentNode)}),Tt(ct(U))},yt.index=function(U){var ft=U?Tt(U)[0]:this[0],wt=U?this:Tt(ft).parent().children();return M.call(wt,ft)},yt.closest=function(U){return!U||!this[0]?Tt():this.is(U)?this.filter(U):this.parent().closest(U)},yt.parents=function(U){var ft=[],wt;return this.each(function(Ht,de){for(wt=de;wt&&wt.parentNode&&wt!==rt.body.parentNode;)wt=wt.parentNode,(!U||U&&X(wt,U))&&ft.push(wt)}),Tt(ct(ft))},yt.prev=function(){return Tt(this[0]&&this[0].previousElementSibling)},yt.siblings=function(){var U=this[0];return this.parent().children().filter(function(ft,wt){return wt!==U})};const Kn=Tt},491:(w,Y,st)=>{st.d(Y,{$Q:()=>pt,BM:()=>Kt,FW:()=>D,G1:()=>M,GX:()=>dt,L_:()=>x,Mx:()=>N,R3:()=>xt,S1:()=>Pt,SJ:()=>yt,Ut:()=>Zt,VB:()=>z,Vb:()=>E,cx:()=>j,dL:()=>G,kl:()=>et,o5:()=>ue,on:()=>At,pn:()=>H,r$:()=>A,rw:()=>jt,sE:()=>L,sN:()=>X,t3:()=>Tt,ut:()=>Nt});var rt=st(50),lt=function(ct,Dt,Wt){if(Wt||arguments.length===2)for(var oe=0,Pe=Dt.length,_e;oe<Pe;oe++)(_e||!(oe in Dt))&&(_e||(_e=Array.prototype.slice.call(Dt,0,oe)),_e[oe]=Dt[oe]);return ct.concat(_e||Array.prototype.slice.call(Dt))},F="tag",R="attributes",M="transitionend oTransitionEnd transitionend webkitTransitionEnd",N=function(ct){return(ct==null?void 0:ct.nodeType)===Node.DOCUMENT_NODE},x=function(ct){var Dt=ct&&ct.parentNode;Dt&&Dt.removeChild(ct)};function j(){for(var ct=[],Dt=0;Dt<arguments.length;Dt++)ct[Dt]=arguments[Dt];var Wt=Array.isArray(ct[0])?ct[0]:lt([],ct,!0);return Wt.filter(Boolean).join(" ")}var L=function(ct,Dt){return ct.querySelectorAll(Dt)},D=function(ct,Dt){return Dt===void 0&&(Dt={}),ct&&ct.setAttribute&&(0,rt.each)(Dt,function(Wt,oe){return ct.setAttribute(oe,Wt)})},H=function(ct){var Dt;return ct&&!!(ct.offsetWidth||ct.offsetHeight||!((Dt=ct.getClientRects)===null||Dt===void 0)&&Dt.call(ct).length)},G=function(ct,Dt){var Wt;(Wt=ct.parentNode)===null||Wt===void 0||Wt.replaceChild(Dt,ct)},pt=function(ct,Dt,Wt){var oe=ct.childNodes,Pe=oe.length,_e=(0,rt.isUndefined)(Wt)?Pe:Wt;(0,rt.isString)(Dt)&&(ct.insertAdjacentHTML("beforeEnd",Dt),Dt=ct.lastChild,ct.removeChild(Dt)),_e>=Pe?ct.appendChild(Dt):ct.insertBefore(Dt,oe[_e])},xt=function(ct,Dt){return pt(ct,Dt)},Nt=function(ct,Dt,Wt){Dt===void 0&&(Dt={});var oe=document.createElement(ct);return Dt&&(0,rt.each)(Dt,function(Pe,_e){return oe.setAttribute(_e,Pe)}),Wt&&((0,rt.isString)(Wt)?oe.innerHTML=Wt:oe.appendChild(Wt)),oe},jt=function(ct){return document.createTextNode(ct)},Tt=function(ct,Dt){var Wt,oe=ct.type;try{Wt=new window[Dt](oe,ct)}catch{Wt=document.createEvent(Dt),Wt.initEvent(oe,!0,!0)}return Wt._parentEvent=ct,oe.indexOf("key")===0&&(Wt.keyCodeVal=ct.keyCode,["keyCode","which"].forEach(function(Pe){Object.defineProperty(Wt,Pe,{get:function(){return this.keyCodeVal}})})),Wt},yt=function(ct,Dt){Dt===void 0&&(Dt=[]);var Wt=Array.isArray(Dt)?Dt:[Dt];Wt.forEach(function(oe){var Pe=oe[F]||"div",_e=oe[R]||{},ve=document.createElement(Pe);(0,rt.each)(_e,function(Ct,Rt){ve.setAttribute(Rt,Ct)}),ct.appendChild(ve)})},Kt=function(ct){return(ct==null?void 0:ct.nodeType)===Node.TEXT_NODE},te=function(ct){return(ct==null?void 0:ct.nodeType)===Node.COMMENT_NODE},ue=function(ct){return ct&&!Kt(ct)&&!te(ct)},Zt=function(ct){var Dt={top:0,left:0,width:0,height:0};if(!ct)return Dt;var Wt;if(Kt(ct)){var oe=document.createRange();oe.selectNode(ct),Wt=oe.getBoundingClientRect(),oe.detach()}return Wt||(ct.getBoundingClientRect?ct.getBoundingClientRect():Dt)},dt=function(ct){var Dt=(ct==null?void 0:ct.ownerDocument)||document,Wt=Dt.documentElement,oe=Dt.defaultView||window;return{x:(oe.pageXOffset||Wt.scrollLeft||0)-(Wt.clientLeft||0),y:(oe.pageYOffset||Wt.scrollTop||0)-(Wt.clientTop||0)}},ot=function(ct){return ct.which||ct.keyCode},X=function(ct){return String.fromCharCode(ot(ct))},z=function(ct){return ct.touches&&ct.touches[0]?ct.touches[0]:ct},et=function(ct){return ot(ct)===27},A=function(ct){return ot(ct)===13},tt=function(ct){return ct.ctrlKey},E=function(ct){return tt(ct)||ct.metaKey},At=function(ct,Dt,Wt,oe){var Pe=Dt.split(/\s+/),_e=(0,rt.isArray)(ct)?ct:[ct];Pe.forEach(function(ve){_e.forEach(function(Ct){return Ct==null?void 0:Ct.addEventListener(ve,Wt,oe)})})},Pt=function(ct,Dt,Wt,oe){var Pe=Dt.split(/\s+/),_e=(0,rt.isArray)(ct)?ct:[ct];Pe.forEach(function(ve){_e.forEach(function(Ct){return Ct==null?void 0:Ct.removeEventListener(ve,Wt,oe)})})}},163:(w,Y,st)=>{st.r(Y),st.d(Y,{appendStyles:()=>jt,buildBase64UrlFromSvg:()=>ve,camelCase:()=>te,capitalize:()=>At,createId:()=>_e,deepMerge:()=>et,escape:()=>X,escapeNodeContent:()=>z,find:()=>ot,getComponentModel:()=>oe,getComponentView:()=>Wt,getElement:()=>dt,getGlobal:()=>H,getModel:()=>A,getUiClass:()=>Nt,getUnitFromValue:()=>yt,getViewEl:()=>ct,hasDnd:()=>Zt,hasWin:()=>D,isBultInMethod:()=>N,isComponent:()=>Dt,isDef:()=>L,isEmptyObj:()=>E,isObject:()=>tt,isRule:()=>Pt,matches:()=>xt,normalizeFloat:()=>ue,normalizeKey:()=>x,setViewEl:()=>Pe,shallowDiff:()=>Tt,toLowerCase:()=>G,upFirst:()=>Kt,wait:()=>j});var rt=st(50),lt=st(491),F=function(){return F=Object.assign||function(Ct){for(var Rt,zt=1,ie=arguments.length;zt<ie;zt++){Rt=arguments[zt];for(var ne in Rt)Object.prototype.hasOwnProperty.call(Rt,ne)&&(Ct[ne]=Rt[ne])}return Ct},F.apply(this,arguments)},R=function(Ct,Rt,zt){if(zt||arguments.length===2)for(var ie=0,ne=Rt.length,qt;ie<ne;ie++)(qt||!(ie in Rt))&&(qt||(qt=Array.prototype.slice.call(Rt,0,ie)),qt[ie]=Rt[ie]);return Ct.concat(qt||Array.prototype.slice.call(Rt))},M={},N=function(Ct){return(0,rt.isFunction)(M[Ct])},x=function(Ct){return N(Ct)?"_".concat(Ct):Ct},j=function(Ct){return Ct===void 0&&(Ct=0),new Promise(function(Rt){return setTimeout(Rt,Ct)})},L=function(Ct){return typeof Ct<"u"},D=function(){return typeof window<"u"},H=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:st.g},G=function(Ct){return(Ct||"").toLowerCase()},pt=D()?window.Element.prototype:{},xt=pt.matches||pt.webkitMatchesSelector||pt.mozMatchesSelector||pt.msMatchesSelector,Nt=function(Ct,Rt){var zt=Ct.getConfig(),ie=zt.stylePrefix,ne=zt.customUI;return[ne&&"".concat(ie,"cui"),Rt].filter(function(qt){return qt}).join(" ")},jt=function(Ct,Rt){Rt===void 0&&(Rt={});var zt=(0,rt.isArray)(Ct)?R([],Ct,!0):[Ct];if(zt.length){var ie=zt.shift();if(ie&&(!Rt.unique||!document.querySelector('link[href="'.concat(ie,'"]')))){var ne=document.head,qt=document.createElement("link");qt.href=ie,qt.rel="stylesheet",Rt.prepand?ne.insertBefore(qt,ne.firstChild):ne.appendChild(qt)}jt(zt)}},Tt=function(Ct,Rt){var zt={},ie=(0,rt.keys)(Rt);for(var ne in Ct)if(Ct.hasOwnProperty(ne)){var qt=Ct[ne],me=Rt[ne];ie.indexOf(ne)>=0?qt!==me&&(zt[ne]=me):zt[ne]=null}for(var ne in Rt)Rt.hasOwnProperty(ne)&&(0,rt.isUndefined)(Ct[ne])&&(zt[ne]=Rt[ne]);return zt},yt=function(Ct){return Ct.replace(parseFloat(Ct),"")},Kt=function(Ct){return Ct[0].toUpperCase()+Ct.toLowerCase().slice(1)},te=function(Ct){return Ct.replace(/-./g,function(Rt){return Rt[1].toUpperCase()})},ue=function(Ct,Rt,zt){Rt===void 0&&(Rt=1),zt===void 0&&(zt=0);var ie=0;if(isNaN(Ct))return zt;if(Ct=parseFloat(Ct),Math.floor(Ct)!==Ct){var ne=Rt.toString().split(".")[1];ie=ne?ne.length:0}return ie?parseFloat(Ct.toFixed(ie)):Ct},Zt=function(Ct){return"draggable"in document.createElement("i")&&(Ct?Ct.config.nativeDnD:!0)},dt=function(Ct){if((0,rt.isElement)(Ct)||(0,lt.BM)(Ct))return Ct;if(Ct&&Ct.getEl)return Ct.getEl()},ot=function(Ct,Rt){var zt=null;return Ct.some(function(ie,ne){return Rt(ie,ne,Ct)?(zt=ie,1):0}),zt},X=function(Ct){return Ct===void 0&&(Ct=""),"".concat(Ct).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},z=function(Ct){return Ct===void 0&&(Ct=""),"".concat(Ct).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},et=function(){for(var Ct=[],Rt=0;Rt<arguments.length;Rt++)Ct[Rt]=arguments[Rt];for(var zt=F({},Ct[0]),ie=1;ie<Ct.length;ie++){var ne=F({},Ct[ie]);for(var qt in ne){var me=zt[qt],Ne=ne[qt];tt(me)&&tt(Ne)?zt[qt]=et(me,Ne):zt[qt]=Ne}}return zt},A=function(Ct,Rt){var zt;return!Rt&&Ct&&Ct.__cashData?zt=Ct.__cashData.model:Rt&&(0,rt.isElement)(Ct)&&(zt=Rt(Ct).data("model")),zt},tt=function(Ct){return Ct&&!Array.isArray(Ct)&&typeof Ct=="object"},E=function(Ct){return Object.keys(Ct).length<=0},At=function(Ct){return Ct===void 0&&(Ct=""),Ct&&Ct.charAt(0).toUpperCase()+Ct.substring(1)},Pt=function(Ct){return Ct&&Ct.toCSS},ct=function(Ct){return Ct==null?void 0:Ct.__gjsv},Dt=function(Ct){return!!(Ct!=null&&Ct.toHTML)},Wt=function(Ct){return ct(Ct)},oe=function(Ct){var Rt;return(Rt=Wt(Ct))===null||Rt===void 0?void 0:Rt.model},Pe=function(Ct,Rt){Ct.__gjsv=Rt},_e=function(Ct){Ct===void 0&&(Ct=16);for(var Rt="",zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ie=zt.length,ne=0;ne<Ct;ne++)Rt+=zt.charAt(Math.floor(Math.random()*ie));return Rt},ve=function(Ct){if(Ct&&Ct.substr(0,4)==="<svg"){var Rt="";return D()?Rt=window.btoa(Ct):typeof Buffer<"u"&&(Rt=Buffer.from(Ct,"utf8").toString("base64")),Rt?"data:image/svg+xml;base64,".concat(Rt):Ct}return Ct}},828:(w,Y,st)=>{var rt={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function lt(R){var M=F(R);return st(M)}function F(R){if(!st.o(rt,R)){var M=new Error("Cannot find module '"+R+"'");throw M.code="MODULE_NOT_FOUND",M}return rt[R]}lt.keys=function(){return Object.keys(rt)},lt.resolve=F,w.exports=lt,lt.id=828},50:(w,Y,st)=>{st.r(Y),st.d(Y,{VERSION:()=>lt,after:()=>Bs,all:()=>In,allKeys:()=>fr,any:()=>uo,assign:()=>Cn,before:()=>ta,bind:()=>yi,bindAll:()=>Hs,chain:()=>En,chunk:()=>ki,clone:()=>xn,collect:()=>yn,compact:()=>ia,compose:()=>ao,constant:()=>he,contains:()=>Ar,countBy:()=>Ra,create:()=>Rr,debounce:()=>_i,default:()=>Wa,defaults:()=>xo,defer:()=>Da,delay:()=>mn,detect:()=>so,difference:()=>Eo,drop:()=>Vn,each:()=>jn,escape:()=>Yt,every:()=>In,extend:()=>Qr,extendOwn:()=>Cn,filter:()=>Zn,find:()=>so,findIndex:()=>bi,findKey:()=>go,findLastIndex:()=>Ci,findWhere:()=>Uo,first:()=>Go,flatten:()=>Ha,foldl:()=>lo,foldr:()=>ra,forEach:()=>jn,functions:()=>Tr,get:()=>Nr,groupBy:()=>Us,has:()=>ho,head:()=>Go,identity:()=>Sn,include:()=>Ar,includes:()=>Ar,indexBy:()=>qr,indexOf:()=>Bo,initial:()=>Fa,inject:()=>lo,intersection:()=>aa,invert:()=>Jr,invoke:()=>Ge,isArguments:()=>cr,isArray:()=>qt,isArrayBuffer:()=>Wt,isBoolean:()=>z,isDataView:()=>ne,isDate:()=>At,isElement:()=>et,isEmpty:()=>ee,isEqual:()=>ge,isError:()=>ct,isFinite:()=>_r,isFunction:()=>_e,isMap:()=>wt,isMatch:()=>Jt,isNaN:()=>ar,isNull:()=>ot,isNumber:()=>E,isObject:()=>dt,isRegExp:()=>Pt,isSet:()=>de,isString:()=>tt,isSymbol:()=>Dt,isTypedArray:()=>Et,isUndefined:()=>X,isWeakMap:()=>Ht,isWeakSet:()=>je,iteratee:()=>Tn,keys:()=>De,last:()=>yr,lastIndexOf:()=>Si,map:()=>yn,mapObject:()=>vn,matcher:()=>On,matches:()=>On,max:()=>na,memoize:()=>Ho,methods:()=>Tr,min:()=>Wo,mixin:()=>Jn,negate:()=>wi,noop:()=>qe,now:()=>O,object:()=>Ai,omit:()=>oa,once:()=>ea,pairs:()=>Zr,partial:()=>Dn,partition:()=>Ei,pick:()=>mo,pluck:()=>zo,property:()=>So,propertyOf:()=>$n,random:()=>io,range:()=>Ua,reduce:()=>lo,reduceRight:()=>ra,reject:()=>Ia,rest:()=>Vn,restArguments:()=>Zt,result:()=>La,sample:()=>cn,select:()=>Zn,shuffle:()=>Oi,size:()=>Na,some:()=>uo,sortBy:()=>Ti,sortedIndex:()=>To,tail:()=>Vn,take:()=>Go,tap:()=>Gn,template:()=>gi,templateSettings:()=>or,throttle:()=>$r,times:()=>vo,toArray:()=>en,toPath:()=>Ro,transpose:()=>yo,unescape:()=>er,union:()=>Ba,uniq:()=>co,unique:()=>co,uniqueId:()=>Qi,unzip:()=>yo,values:()=>tr,where:()=>Dr,without:()=>zs,wrap:()=>Oo,zip:()=>Ws});var rt={};st.r(rt),st.d(rt,{VERSION:()=>lt,after:()=>Bs,all:()=>In,allKeys:()=>fr,any:()=>uo,assign:()=>Cn,before:()=>ta,bind:()=>yi,bindAll:()=>Hs,chain:()=>En,chunk:()=>ki,clone:()=>xn,collect:()=>yn,compact:()=>ia,compose:()=>ao,constant:()=>he,contains:()=>Ar,countBy:()=>Ra,create:()=>Rr,debounce:()=>_i,default:()=>Rn,defaults:()=>xo,defer:()=>Da,delay:()=>mn,detect:()=>so,difference:()=>Eo,drop:()=>Vn,each:()=>jn,escape:()=>Yt,every:()=>In,extend:()=>Qr,extendOwn:()=>Cn,filter:()=>Zn,find:()=>so,findIndex:()=>bi,findKey:()=>go,findLastIndex:()=>Ci,findWhere:()=>Uo,first:()=>Go,flatten:()=>Ha,foldl:()=>lo,foldr:()=>ra,forEach:()=>jn,functions:()=>Tr,get:()=>Nr,groupBy:()=>Us,has:()=>ho,head:()=>Go,identity:()=>Sn,include:()=>Ar,includes:()=>Ar,indexBy:()=>qr,indexOf:()=>Bo,initial:()=>Fa,inject:()=>lo,intersection:()=>aa,invert:()=>Jr,invoke:()=>Ge,isArguments:()=>cr,isArray:()=>qt,isArrayBuffer:()=>Wt,isBoolean:()=>z,isDataView:()=>ne,isDate:()=>At,isElement:()=>et,isEmpty:()=>ee,isEqual:()=>ge,isError:()=>ct,isFinite:()=>_r,isFunction:()=>_e,isMap:()=>wt,isMatch:()=>Jt,isNaN:()=>ar,isNull:()=>ot,isNumber:()=>E,isObject:()=>dt,isRegExp:()=>Pt,isSet:()=>de,isString:()=>tt,isSymbol:()=>Dt,isTypedArray:()=>Et,isUndefined:()=>X,isWeakMap:()=>Ht,isWeakSet:()=>je,iteratee:()=>Tn,keys:()=>De,last:()=>yr,lastIndexOf:()=>Si,map:()=>yn,mapObject:()=>vn,matcher:()=>On,matches:()=>On,max:()=>na,memoize:()=>Ho,methods:()=>Tr,min:()=>Wo,mixin:()=>Jn,negate:()=>wi,noop:()=>qe,now:()=>O,object:()=>Ai,omit:()=>oa,once:()=>ea,pairs:()=>Zr,partial:()=>Dn,partition:()=>Ei,pick:()=>mo,pluck:()=>zo,property:()=>So,propertyOf:()=>$n,random:()=>io,range:()=>Ua,reduce:()=>lo,reduceRight:()=>ra,reject:()=>Ia,rest:()=>Vn,restArguments:()=>Zt,result:()=>La,sample:()=>cn,select:()=>Zn,shuffle:()=>Oi,size:()=>Na,some:()=>uo,sortBy:()=>Ti,sortedIndex:()=>To,tail:()=>Vn,take:()=>Go,tap:()=>Gn,template:()=>gi,templateSettings:()=>or,throttle:()=>$r,times:()=>vo,toArray:()=>en,toPath:()=>Ro,transpose:()=>yo,unescape:()=>er,union:()=>Ba,uniq:()=>co,unique:()=>co,uniqueId:()=>Qi,unzip:()=>yo,values:()=>tr,where:()=>Dr,without:()=>zs,wrap:()=>Oo,zip:()=>Ws});var lt="1.13.6",F=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},R=Array.prototype,M=Object.prototype,N=typeof Symbol<"u"?Symbol.prototype:null,x=R.push,j=R.slice,L=M.toString,D=M.hasOwnProperty,H=typeof ArrayBuffer<"u",G=typeof DataView<"u",pt=Array.isArray,xt=Object.keys,Nt=Object.create,jt=H&&ArrayBuffer.isView,Tt=isNaN,yt=isFinite,Kt=!{toString:null}.propertyIsEnumerable("toString"),te=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ue=Math.pow(2,53)-1;function Zt(S,I){return I=I==null?S.length-1:+I,function(){for(var it=Math.max(arguments.length-I,0),ut=Array(it),Ot=0;Ot<it;Ot++)ut[Ot]=arguments[Ot+I];switch(I){case 0:return S.call(this,ut);case 1:return S.call(this,arguments[0],ut);case 2:return S.call(this,arguments[0],arguments[1],ut)}var _t=Array(I+1);for(Ot=0;Ot<I;Ot++)_t[Ot]=arguments[Ot];return _t[I]=ut,S.apply(this,_t)}}function dt(S){var I=typeof S;return I==="function"||I==="object"&&!!S}function ot(S){return S===null}function X(S){return S===void 0}function z(S){return S===!0||S===!1||L.call(S)==="[object Boolean]"}function et(S){return!!(S&&S.nodeType===1)}function A(S){var I="[object "+S+"]";return function(it){return L.call(it)===I}}const tt=A("String"),E=A("Number"),At=A("Date"),Pt=A("RegExp"),ct=A("Error"),Dt=A("Symbol"),Wt=A("ArrayBuffer");var oe=A("Function"),Pe=F.document&&F.document.childNodes;typeof Int8Array!="object"&&typeof Pe!="function"&&(oe=function(S){return typeof S=="function"||!1});const _e=oe,ve=A("Object");var Ct=G&&ve(new DataView(new ArrayBuffer(8))),Rt=typeof Map<"u"&&ve(new Map),zt=A("DataView");function ie(S){return S!=null&&_e(S.getInt8)&&Wt(S.buffer)}const ne=Ct?ie:zt,qt=pt||A("Array");function me(S,I){return S!=null&&D.call(S,I)}var Ne=A("Arguments");(function(){Ne(arguments)||(Ne=function(S){return me(S,"callee")})})();const cr=Ne;function _r(S){return!Dt(S)&&yt(S)&&!isNaN(parseFloat(S))}function ar(S){return E(S)&&Tt(S)}function he(S){return function(){return S}}function T(S){return function(I){var it=S(I);return typeof it=="number"&&it>=0&&it<=ue}}function B(S){return function(I){return I==null?void 0:I[S]}}const nt=B("byteLength"),ht=T(nt);var Lt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Z(S){return jt?jt(S)&&!ne(S):ht(S)&&Lt.test(L.call(S))}const Et=H?Z:he(!1),mt=B("length");function xe(S){for(var I={},it=S.length,ut=0;ut<it;++ut)I[S[ut]]=!0;return{contains:function(Ot){return I[Ot]===!0},push:function(Ot){return I[Ot]=!0,S.push(Ot)}}}function He(S,I){I=xe(I);var it=te.length,ut=S.constructor,Ot=_e(ut)&&ut.prototype||M,_t="constructor";for(me(S,_t)&&!I.contains(_t)&&I.push(_t);it--;)_t=te[it],_t in S&&S[_t]!==Ot[_t]&&!I.contains(_t)&&I.push(_t)}function De(S){if(!dt(S))return[];if(xt)return xt(S);var I=[];for(var it in S)me(S,it)&&I.push(it);return Kt&&He(S,I),I}function ee(S){if(S==null)return!0;var I=mt(S);return typeof I=="number"&&(qt(S)||tt(S)||cr(S))?I===0:mt(De(S))===0}function Jt(S,I){var it=De(I),ut=it.length;if(S==null)return!ut;for(var Ot=Object(S),_t=0;_t<ut;_t++){var Bt=it[_t];if(I[Bt]!==Ot[Bt]||!(Bt in Ot))return!1}return!0}function Vt(S){if(S instanceof Vt)return S;if(!(this instanceof Vt))return new Vt(S);this._wrapped=S}Vt.VERSION=lt,Vt.prototype.value=function(){return this._wrapped},Vt.prototype.valueOf=Vt.prototype.toJSON=Vt.prototype.value,Vt.prototype.toString=function(){return String(this._wrapped)};function Te(S){return new Uint8Array(S.buffer||S,S.byteOffset||0,nt(S))}var Be="[object DataView]";function Ee(S,I,it,ut){if(S===I)return S!==0||1/S===1/I;if(S==null||I==null)return!1;if(S!==S)return I!==I;var Ot=typeof S;return Ot!=="function"&&Ot!=="object"&&typeof I!="object"?!1:Ke(S,I,it,ut)}function Ke(S,I,it,ut){S instanceof Vt&&(S=S._wrapped),I instanceof Vt&&(I=I._wrapped);var Ot=L.call(S);if(Ot!==L.call(I))return!1;if(Ct&&Ot=="[object Object]"&&ne(S)){if(!ne(I))return!1;Ot=Be}switch(Ot){case"[object RegExp]":case"[object String]":return""+S==""+I;case"[object Number]":return+S!=+S?+I!=+I:+S==0?1/+S===1/I:+S==+I;case"[object Date]":case"[object Boolean]":return+S==+I;case"[object Symbol]":return N.valueOf.call(S)===N.valueOf.call(I);case"[object ArrayBuffer]":case Be:return Ke(Te(S),Te(I),it,ut)}var _t=Ot==="[object Array]";if(!_t&&Et(S)){var Bt=nt(S);if(Bt!==nt(I))return!1;if(S.buffer===I.buffer&&S.byteOffset===I.byteOffset)return!0;_t=!0}if(!_t){if(typeof S!="object"||typeof I!="object")return!1;var ce=S.constructor,We=I.constructor;if(ce!==We&&!(_e(ce)&&ce instanceof ce&&_e(We)&&We instanceof We)&&"constructor"in S&&"constructor"in I)return!1}it=it||[],ut=ut||[];for(var Ie=it.length;Ie--;)if(it[Ie]===S)return ut[Ie]===I;if(it.push(S),ut.push(I),_t){if(Ie=S.length,Ie!==I.length)return!1;for(;Ie--;)if(!Ee(S[Ie],I[Ie],it,ut))return!1}else{var lr=De(S),Fr;if(Ie=lr.length,De(I).length!==Ie)return!1;for(;Ie--;)if(Fr=lr[Ie],!(me(I,Fr)&&Ee(S[Fr],I[Fr],it,ut)))return!1}return it.pop(),ut.pop(),!0}function ge(S,I){return Ee(S,I)}function fr(S){if(!dt(S))return[];var I=[];for(var it in S)I.push(it);return Kt&&He(S,I),I}function Me(S){var I=mt(S);return function(it){if(it==null)return!1;var ut=fr(it);if(mt(ut))return!1;for(var Ot=0;Ot<I;Ot++)if(!_e(it[S[Ot]]))return!1;return S!==U||!_e(it[nr])}}var nr="forEach",Qe="has",Xt=["clear","delete"],Or=["get",Qe,"set"],Kn=Xt.concat(nr,Or),U=Xt.concat(Or),ft=["add"].concat(Xt,nr,Qe);const wt=Rt?Me(Kn):A("Map"),Ht=Rt?Me(U):A("WeakMap"),de=Rt?Me(ft):A("Set"),je=A("WeakSet");function tr(S){for(var I=De(S),it=I.length,ut=Array(it),Ot=0;Ot<it;Ot++)ut[Ot]=S[I[Ot]];return ut}function Zr(S){for(var I=De(S),it=I.length,ut=Array(it),Ot=0;Ot<it;Ot++)ut[Ot]=[I[Ot],S[I[Ot]]];return ut}function Jr(S){for(var I={},it=De(S),ut=0,Ot=it.length;ut<Ot;ut++)I[S[it[ut]]]=it[ut];return I}function Tr(S){var I=[];for(var it in S)_e(S[it])&&I.push(it);return I.sort()}function Co(S,I){return function(it){var ut=arguments.length;if(I&&(it=Object(it)),ut<2||it==null)return it;for(var Ot=1;Ot<ut;Ot++)for(var _t=arguments[Ot],Bt=S(_t),ce=Bt.length,We=0;We<ce;We++){var Ie=Bt[We];(!I||it[Ie]===void 0)&&(it[Ie]=_t[Ie])}return it}}const Qr=Co(fr),Cn=Co(De),xo=Co(fr,!0);function Er(){return function(){}}function mr(S){if(!dt(S))return{};if(Nt)return Nt(S);var I=Er();I.prototype=S;var it=new I;return I.prototype=null,it}function Rr(S,I){var it=mr(S);return I&&Cn(it,I),it}function xn(S){return dt(S)?qt(S)?S.slice():Qr({},S):S}function Gn(S,I){return I(S),S}function Ro(S){return qt(S)?S:[S]}Vt.toPath=Ro;function Ln(S){return Vt.toPath(S)}function tn(S,I){for(var it=I.length,ut=0;ut<it;ut++){if(S==null)return;S=S[I[ut]]}return it?S:void 0}function Nr(S,I,it){var ut=tn(S,Ln(I));return X(ut)?it:ut}function ho(S,I){I=Ln(I);for(var it=I.length,ut=0;ut<it;ut++){var Ot=I[ut];if(!me(S,Ot))return!1;S=S[Ot]}return!!it}function Sn(S){return S}function On(S){return S=Cn({},S),function(I){return Jt(I,S)}}function So(S){return S=Ln(S),function(I){return tn(I,S)}}function sr(S,I,it){if(I===void 0)return S;switch(it??3){case 1:return function(ut){return S.call(I,ut)};case 3:return function(ut,Ot,_t){return S.call(I,ut,Ot,_t)};case 4:return function(ut,Ot,_t,Bt){return S.call(I,ut,Ot,_t,Bt)}}return function(){return S.apply(I,arguments)}}function Ce(S,I,it){return S==null?Sn:_e(S)?sr(S,I,it):dt(S)&&!qt(S)?On(S):So(S)}function Tn(S,I){return Ce(S,I,1/0)}Vt.iteratee=Tn;function Pr(S,I,it){return Vt.iteratee!==Tn?Vt.iteratee(S,I):Ce(S,I,it)}function vn(S,I,it){I=Pr(I,it);for(var ut=De(S),Ot=ut.length,_t={},Bt=0;Bt<Ot;Bt++){var ce=ut[Bt];_t[ce]=I(S[ce],ce,S)}return _t}function qe(){}function $n(S){return S==null?qe:function(I){return Nr(S,I)}}function vo(S,I,it){var ut=Array(Math.max(0,S));I=sr(I,it,1);for(var Ot=0;Ot<S;Ot++)ut[Ot]=I(Ot);return ut}function io(S,I){return I==null&&(I=S,S=0),S+Math.floor(Math.random()*(I-S+1))}const O=Date.now||function(){return new Date().getTime()};function K(S){var I=function(_t){return S[_t]},it="(?:"+De(S).join("|")+")",ut=RegExp(it),Ot=RegExp(it,"g");return function(_t){return _t=_t==null?"":""+_t,ut.test(_t)?_t.replace(Ot,I):_t}}const Ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Yt=K(Ft),Ae=Jr(Ft),er=K(Ae),or=Vt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Se=/(.)^/,gn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ji=/\\|'|\r|\n|\u2028|\u2029/g;function qn(S){return"\\"+gn[S]}var Yn=/^\s*(\w|\$)+\s*$/;function gi(S,I,it){!I&&it&&(I=it),I=xo({},I,Vt.templateSettings);var ut=RegExp([(I.escape||Se).source,(I.interpolate||Se).source,(I.evaluate||Se).source].join("|")+"|$","g"),Ot=0,_t="__p+='";S.replace(ut,function(Ie,lr,Fr,Ka,Ks){return _t+=S.slice(Ot,Ks).replace(Ji,qn),Ot=Ks+Ie.length,lr?_t+=`'+
((__t=(`+lr+`))==null?'':_.escape(__t))+
'`:Fr?_t+=`'+
((__t=(`+Fr+`))==null?'':__t)+
'`:Ka&&(_t+=`';
`+Ka+`
__p+='`),Ie}),_t+=`';
`;var Bt=I.variable;if(Bt){if(!Yn.test(Bt))throw new Error("variable is not a bare identifier: "+Bt)}else _t=`with(obj||{}){
`+_t+`}
`,Bt="obj";_t=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+_t+`return __p;
`;var ce;try{ce=new Function(Bt,"_",_t)}catch(Ie){throw Ie.source=_t,Ie}var We=function(Ie){return ce.call(this,Ie,Vt)};return We.source="function("+Bt+`){
`+_t+"}",We}function La(S,I,it){I=Ln(I);var ut=I.length;if(!ut)return _e(it)?it.call(S):it;for(var Ot=0;Ot<ut;Ot++){var _t=S==null?void 0:S[I[Ot]];_t===void 0&&(_t=it,Ot=ut),S=_e(_t)?_t.call(S):_t}return S}var No=0;function Qi(S){var I=++No+"";return S?S+I:I}function En(S){var I=Vt(S);return I._chain=!0,I}function mi(S,I,it,ut,Ot){if(!(ut instanceof I))return S.apply(it,Ot);var _t=mr(S.prototype),Bt=S.apply(_t,Ot);return dt(Bt)?Bt:_t}var Fo=Zt(function(S,I){var it=Fo.placeholder,ut=function(){for(var Ot=0,_t=I.length,Bt=Array(_t),ce=0;ce<_t;ce++)Bt[ce]=I[ce]===it?arguments[Ot++]:I[ce];for(;Ot<arguments.length;)Bt.push(arguments[Ot++]);return mi(S,ut,this,this,Bt)};return ut});Fo.placeholder=Vt;const Dn=Fo,yi=Zt(function(S,I,it){if(!_e(S))throw new TypeError("Bind must be called on a function");var ut=Zt(function(Ot){return mi(S,ut,I,this,it.concat(Ot))});return ut}),un=T(mt);function Xn(S,I,it,ut){if(ut=ut||[],!I&&I!==0)I=1/0;else if(I<=0)return ut.concat(S);for(var Ot=ut.length,_t=0,Bt=mt(S);_t<Bt;_t++){var ce=S[_t];if(un(ce)&&(qt(ce)||cr(ce)))if(I>1)Xn(ce,I-1,it,ut),Ot=ut.length;else for(var We=0,Ie=ce.length;We<Ie;)ut[Ot++]=ce[We++];else it||(ut[Ot++]=ce)}return ut}const Hs=Zt(function(S,I){I=Xn(I,!1,!1);var it=I.length;if(it<1)throw new Error("bindAll must be passed function names");for(;it--;){var ut=I[it];S[ut]=yi(S[ut],S)}return S});function Ho(S,I){var it=function(ut){var Ot=it.cache,_t=""+(I?I.apply(this,arguments):ut);return me(Ot,_t)||(Ot[_t]=S.apply(this,arguments)),Ot[_t]};return it.cache={},it}const mn=Zt(function(S,I,it){return setTimeout(function(){return S.apply(null,it)},I)}),Da=Dn(mn,Vt,1);function $r(S,I,it){var ut,Ot,_t,Bt,ce=0;it||(it={});var We=function(){ce=it.leading===!1?0:O(),ut=null,Bt=S.apply(Ot,_t),ut||(Ot=_t=null)},Ie=function(){var lr=O();!ce&&it.leading===!1&&(ce=lr);var Fr=I-(lr-ce);return Ot=this,_t=arguments,Fr<=0||Fr>I?(ut&&(clearTimeout(ut),ut=null),ce=lr,Bt=S.apply(Ot,_t),ut||(Ot=_t=null)):!ut&&it.trailing!==!1&&(ut=setTimeout(We,Fr)),Bt};return Ie.cancel=function(){clearTimeout(ut),ce=0,ut=Ot=_t=null},Ie}function _i(S,I,it){var ut,Ot,_t,Bt,ce,We=function(){var lr=O()-Ot;I>lr?ut=setTimeout(We,I-lr):(ut=null,it||(Bt=S.apply(ce,_t)),ut||(_t=ce=null))},Ie=Zt(function(lr){return ce=this,_t=lr,Ot=O(),ut||(ut=setTimeout(We,I),it&&(Bt=S.apply(ce,_t))),Bt});return Ie.cancel=function(){clearTimeout(ut),ut=_t=ce=null},Ie}function Oo(S,I){return Dn(I,S)}function wi(S){return function(){return!S.apply(this,arguments)}}function ao(){var S=arguments,I=S.length-1;return function(){for(var it=I,ut=S[I].apply(this,arguments);it--;)ut=S[it].call(this,ut);return ut}}function Bs(S,I){return function(){if(--S<1)return I.apply(this,arguments)}}function ta(S,I){var it;return function(){return--S>0&&(it=I.apply(this,arguments)),S<=1&&(I=null),it}}const ea=Dn(ta,2);function go(S,I,it){I=Pr(I,it);for(var ut=De(S),Ot,_t=0,Bt=ut.length;_t<Bt;_t++)if(Ot=ut[_t],I(S[Ot],Ot,S))return Ot}function ja(S){return function(I,it,ut){it=Pr(it,ut);for(var Ot=mt(I),_t=S>0?0:Ot-1;_t>=0&&_t<Ot;_t+=S)if(it(I[_t],_t,I))return _t;return-1}}const bi=ja(1),Ci=ja(-1);function To(S,I,it,ut){it=Pr(it,ut,1);for(var Ot=it(I),_t=0,Bt=mt(S);_t<Bt;){var ce=Math.floor((_t+Bt)/2);it(S[ce])<Ot?_t=ce+1:Bt=ce}return _t}function xi(S,I,it){return function(ut,Ot,_t){var Bt=0,ce=mt(ut);if(typeof _t=="number")S>0?Bt=_t>=0?_t:Math.max(_t+ce,Bt):ce=_t>=0?Math.min(_t+1,ce):_t+ce+1;else if(it&&_t&&ce)return _t=it(ut,Ot),ut[_t]===Ot?_t:-1;if(Ot!==Ot)return _t=I(j.call(ut,Bt,ce),ar),_t>=0?_t+Bt:-1;for(_t=S>0?Bt:ce-1;_t>=0&&_t<ce;_t+=S)if(ut[_t]===Ot)return _t;return-1}}const Bo=xi(1,bi,To),Si=xi(-1,Ci);function so(S,I,it){var ut=un(S)?bi:go,Ot=ut(S,I,it);if(Ot!==void 0&&Ot!==-1)return S[Ot]}function Uo(S,I){return so(S,On(I))}function jn(S,I,it){I=sr(I,it);var ut,Ot;if(un(S))for(ut=0,Ot=S.length;ut<Ot;ut++)I(S[ut],ut,S);else{var _t=De(S);for(ut=0,Ot=_t.length;ut<Ot;ut++)I(S[_t[ut]],_t[ut],S)}return S}function yn(S,I,it){I=Pr(I,it);for(var ut=!un(S)&&De(S),Ot=(ut||S).length,_t=Array(Ot),Bt=0;Bt<Ot;Bt++){var ce=ut?ut[Bt]:Bt;_t[Bt]=I(S[ce],ce,S)}return _t}function Pn(S){var I=function(it,ut,Ot,_t){var Bt=!un(it)&&De(it),ce=(Bt||it).length,We=S>0?0:ce-1;for(_t||(Ot=it[Bt?Bt[We]:We],We+=S);We>=0&&We<ce;We+=S){var Ie=Bt?Bt[We]:We;Ot=ut(Ot,it[Ie],Ie,it)}return Ot};return function(it,ut,Ot,_t){var Bt=arguments.length>=3;return I(it,sr(ut,_t,4),Ot,Bt)}}const lo=Pn(1),ra=Pn(-1);function Zn(S,I,it){var ut=[];return I=Pr(I,it),jn(S,function(Ot,_t,Bt){I(Ot,_t,Bt)&&ut.push(Ot)}),ut}function Ia(S,I,it){return Zn(S,wi(Pr(I)),it)}function In(S,I,it){I=Pr(I,it);for(var ut=!un(S)&&De(S),Ot=(ut||S).length,_t=0;_t<Ot;_t++){var Bt=ut?ut[_t]:_t;if(!I(S[Bt],Bt,S))return!1}return!0}function uo(S,I,it){I=Pr(I,it);for(var ut=!un(S)&&De(S),Ot=(ut||S).length,_t=0;_t<Ot;_t++){var Bt=ut?ut[_t]:_t;if(I(S[Bt],Bt,S))return!0}return!1}function Ar(S,I,it,ut){return un(S)||(S=tr(S)),(typeof it!="number"||ut)&&(it=0),Bo(S,I,it)>=0}const Ge=Zt(function(S,I,it){var ut,Ot;return _e(I)?Ot=I:(I=Ln(I),ut=I.slice(0,-1),I=I[I.length-1]),yn(S,function(_t){var Bt=Ot;if(!Bt){if(ut&&ut.length&&(_t=tn(_t,ut)),_t==null)return;Bt=_t[I]}return Bt==null?Bt:Bt.apply(_t,it)})});function zo(S,I){return yn(S,So(I))}function Dr(S,I){return Zn(S,On(I))}function na(S,I,it){var ut=-1/0,Ot=-1/0,_t,Bt;if(I==null||typeof I=="number"&&typeof S[0]!="object"&&S!=null){S=un(S)?S:tr(S);for(var ce=0,We=S.length;ce<We;ce++)_t=S[ce],_t!=null&&_t>ut&&(ut=_t)}else I=Pr(I,it),jn(S,function(Ie,lr,Fr){Bt=I(Ie,lr,Fr),(Bt>Ot||Bt===-1/0&&ut===-1/0)&&(ut=Ie,Ot=Bt)});return ut}function Wo(S,I,it){var ut=1/0,Ot=1/0,_t,Bt;if(I==null||typeof I=="number"&&typeof S[0]!="object"&&S!=null){S=un(S)?S:tr(S);for(var ce=0,We=S.length;ce<We;ce++)_t=S[ce],_t!=null&&_t<ut&&(ut=_t)}else I=Pr(I,it),jn(S,function(Ie,lr,Fr){Bt=I(Ie,lr,Fr),(Bt<Ot||Bt===1/0&&ut===1/0)&&(ut=Ie,Ot=Bt)});return ut}var Va=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function en(S){return S?qt(S)?j.call(S):tt(S)?S.match(Va):un(S)?yn(S,Sn):tr(S):[]}function cn(S,I,it){if(I==null||it)return un(S)||(S=tr(S)),S[io(S.length-1)];var ut=en(S),Ot=mt(ut);I=Math.max(Math.min(I,Ot),0);for(var _t=Ot-1,Bt=0;Bt<I;Bt++){var ce=io(Bt,_t),We=ut[Bt];ut[Bt]=ut[ce],ut[ce]=We}return ut.slice(0,I)}function Oi(S){return cn(S,1/0)}function Ti(S,I,it){var ut=0;return I=Pr(I,it),zo(yn(S,function(Ot,_t,Bt){return{value:Ot,index:ut++,criteria:I(Ot,_t,Bt)}}).sort(function(Ot,_t){var Bt=Ot.criteria,ce=_t.criteria;if(Bt!==ce){if(Bt>ce||Bt===void 0)return 1;if(Bt<ce||ce===void 0)return-1}return Ot.index-_t.index}),"value")}function Ko(S,I){return function(it,ut,Ot){var _t=I?[[],[]]:{};return ut=Pr(ut,Ot),jn(it,function(Bt,ce){var We=ut(Bt,ce,it);S(_t,Bt,We)}),_t}}const Us=Ko(function(S,I,it){me(S,it)?S[it].push(I):S[it]=[I]}),qr=Ko(function(S,I,it){S[it]=I}),Ra=Ko(function(S,I,it){me(S,it)?S[it]++:S[it]=1}),Ei=Ko(function(S,I,it){S[it?0:1].push(I)},!0);function Na(S){return S==null?0:un(S)?S.length:De(S).length}function Pi(S,I,it){return I in it}const mo=Zt(function(S,I){var it={},ut=I[0];if(S==null)return it;_e(ut)?(I.length>1&&(ut=sr(ut,I[1])),I=fr(S)):(ut=Pi,I=Xn(I,!1,!1),S=Object(S));for(var Ot=0,_t=I.length;Ot<_t;Ot++){var Bt=I[Ot],ce=S[Bt];ut(ce,Bt,S)&&(it[Bt]=ce)}return it}),oa=Zt(function(S,I){var it=I[0],ut;return _e(it)?(it=wi(it),I.length>1&&(ut=I[1])):(I=yn(Xn(I,!1,!1),String),it=function(Ot,_t){return!Ar(I,_t)}),mo(S,it,ut)});function Fa(S,I,it){return j.call(S,0,Math.max(0,S.length-(I==null||it?1:I)))}function Go(S,I,it){return S==null||S.length<1?I==null||it?void 0:[]:I==null||it?S[0]:Fa(S,S.length-I)}function Vn(S,I,it){return j.call(S,I==null||it?1:I)}function yr(S,I,it){return S==null||S.length<1?I==null||it?void 0:[]:I==null||it?S[S.length-1]:Vn(S,Math.max(0,S.length-I))}function ia(S){return Zn(S,Boolean)}function Ha(S,I){return Xn(S,I,!1)}const Eo=Zt(function(S,I){return I=Xn(I,!0,!0),Zn(S,function(it){return!Ar(I,it)})}),zs=Zt(function(S,I){return Eo(S,I)});function co(S,I,it,ut){z(I)||(ut=it,it=I,I=!1),it!=null&&(it=Pr(it,ut));for(var Ot=[],_t=[],Bt=0,ce=mt(S);Bt<ce;Bt++){var We=S[Bt],Ie=it?it(We,Bt,S):We;I&&!it?((!Bt||_t!==Ie)&&Ot.push(We),_t=Ie):it?Ar(_t,Ie)||(_t.push(Ie),Ot.push(We)):Ar(Ot,We)||Ot.push(We)}return Ot}const Ba=Zt(function(S){return co(Xn(S,!0,!0))});function aa(S){for(var I=[],it=arguments.length,ut=0,Ot=mt(S);ut<Ot;ut++){var _t=S[ut];if(!Ar(I,_t)){var Bt;for(Bt=1;Bt<it&&Ar(arguments[Bt],_t);Bt++);Bt===it&&I.push(_t)}}return I}function yo(S){for(var I=S&&na(S,mt).length||0,it=Array(I),ut=0;ut<I;ut++)it[ut]=zo(S,ut);return it}const Ws=Zt(yo);function Ai(S,I){for(var it={},ut=0,Ot=mt(S);ut<Ot;ut++)I?it[S[ut]]=I[ut]:it[S[ut][0]]=S[ut][1];return it}function Ua(S,I,it){I==null&&(I=S||0,S=0),it||(it=I<S?-1:1);for(var ut=Math.max(Math.ceil((I-S)/it),0),Ot=Array(ut),_t=0;_t<ut;_t++,S+=it)Ot[_t]=S;return Ot}function ki(S,I){if(I==null||I<1)return[];for(var it=[],ut=0,Ot=S.length;ut<Ot;)it.push(j.call(S,ut,ut+=I));return it}function za(S,I){return S._chain?Vt(I).chain():I}function Jn(S){return jn(Tr(S),function(I){var it=Vt[I]=S[I];Vt.prototype[I]=function(){var ut=[this._wrapped];return x.apply(ut,arguments),za(this,it.apply(Vt,ut))}}),Vt}jn(["pop","push","reverse","shift","sort","splice","unshift"],function(S){var I=R[S];Vt.prototype[S]=function(){var it=this._wrapped;return it!=null&&(I.apply(it,arguments),(S==="shift"||S==="splice")&&it.length===0&&delete it[0]),za(this,it)}}),jn(["concat","join","slice"],function(S){var I=R[S];Vt.prototype[S]=function(){var it=this._wrapped;return it!=null&&(it=I.apply(it,arguments)),za(this,it)}});const Rn=Vt;var $o=Jn(rt);$o._=$o;const Wa=$o}},Rh={};function vr(w){var Y=Rh[w];if(Y!==void 0)return Y.exports;var st=Rh[w]={exports:{}};return h_[w].call(st.exports,st,st.exports,vr),st.exports}vr.n=w=>{var Y=w&&w.__esModule?()=>w.default:()=>w;return vr.d(Y,{a:Y}),Y};vr.d=(w,Y)=>{for(var st in Y)vr.o(Y,st)&&!vr.o(w,st)&&Object.defineProperty(w,st,{enumerable:!0,get:Y[st]})};vr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();vr.o=(w,Y)=>Object.prototype.hasOwnProperty.call(w,Y);vr.r=w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})};var Fh={};(()=>{vr.d(Fh,{ZP:()=>I0,kr:()=>wh,j7:()=>_h});var w=vr(50),Y=vr(163);function st(a){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var e=a.raw;return e.reduce(function(r,o,l){var f=n[l-1],d=e[l-1];return Array.isArray(f)?f=f.join(""):d&&d.slice(-1)==="$"?r=r.slice(0,-1):f=(0,Y.escape)(f),r+f+o})}var rt={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1};const lt=rt;var F=vr(316),R=vr.n(F),M=vr(895);const N=function(a){var n=a.$;if(n&&n.prototype&&n.prototype.constructor.name!=="jQuery"){var t=n.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var o=this.get(0);return o&&o.focus(),this},t.bind=function(o,l){return this.on(o,l)},t.unbind=function(o,l){if((0,w.isObject)(o)){for(var f in o)o.hasOwnProperty(f)&&this.off(f,o[f]);return this}else return this.off(o,l)},t.click=function(o){return o?this.on("click",o):this.trigger("click")},t.change=function(o){return o?this.on("change",o):this.trigger("change")},t.keydown=function(o){return o?this.on("keydown",o):this.trigger("keydown")},t.delegate=function(o,l,f,d){return d||(d=f),this.on(l,o,function(h){h.data=f,d(h)})},t.scrollLeft=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var l=o instanceof Window?o:null;return l?l.pageXOffset:o.scrollLeft||0},t.scrollTop=function(){var o=this.get(0);o=o.nodeType==9?o.defaultView:o;var l=o instanceof Window?o:null;return l?l.pageYOffset:o.scrollTop||0};var e=n.prototype.offset;t.offset=function(o){var l,f;return o&&(l=o.top,f=o.left),typeof l<"u"&&this.css("top","".concat(l,"px")),typeof f<"u"&&this.css("left","".concat(f,"px")),e.call(this)},n.map=function(o,l){for(var f=[],d=0;d<o.length;d++)f.push(l(o[d],d));return f};var r=Array.prototype.indexOf;n.inArray=function(o,l,f){return l==null?-1:r.call(l,o,f)},n.Event=function(o,l){if(!(this instanceof n.Event))return new n.Event(o,l);this.type=o,this.isDefaultPrevented=function(){return!1}}}};var x=vr(346),j=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),L=function(a){j(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(x.Hn),D=function(a){j(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getByComponent=function(t){var e=this;return this.filter(function(r){return e.getComponent(r)===t})[0]},n.prototype.addComponent=function(t,e){var r=this,o=((0,w.isArray)(t)?t:[t]).filter(function(l){return!r.hasComponent(l)}).map(function(l){return new L({component:l})})[0];return this.push(o,e)},n.prototype.getComponent=function(t){return t.get("component")},n.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},n.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},n.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},n.prototype.removeComponent=function(t,e){var r=this,o=((0,w.isArray)(t)?t:[t]).map(function(l){return r.getByComponent(l)});return this.remove(o,e)},n}(x.FE);const H=D;var G=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pt=function(){return pt=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pt.apply(this,arguments)},xt=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Nt=function(){function a(n,t,e){this.debounced=[],this.collections=[],this.cls=[],this._em=n,this._name=t;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),o=(0,w.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],l=o===!0?{}:o||{};l.pStylePrefix=n.config.pStylePrefix||"",!(0,w.isUndefined)(o)&&!o&&(l._disable=1),l.em=n,this._config=(0,Y.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.render=function(n){},a.prototype.postLoad=function(n){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return n?this.config[n]:this.config},a.prototype.__logWarn=function(n,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(n),t)},a.prototype.destroy=function(){this.__destroy()},a.prototype.__destroy=function(){var n,t,e;(n=this.view)===null||n===void 0||n.remove(),(t=this.state)===null||t===void 0||t.stopListening(),(e=this.state)===null||e===void 0||e.clear(),this.debounced.forEach(function(r){return r.cancel()}),this.collections.forEach(function(r){r.stopListening(),r.reset()})},a.prototype.__appendTo=function(){var n=this.getConfig().appendTo;if(n){var t=(0,w.isElement)(n)?n:document.querySelector(n);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const jt=Nt;var Tt=function(a){G(n,a);function n(t,e,r,o,l,f){f===void 0&&(f={});var d=a.call(this,t,e,l)||this;return d.cls=[],d.private=!1,d.all=r,d.events=o,!f.skipListen&&d.__initListen(),d}return n.prototype.postLoad=function(t){},n.prototype.render=function(t){},n.prototype.getProjectData=function(t){var e={},r=this.storageKey;return r&&(e[r]=t||this.getAll()),e},n.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.all,o=e.onResult,l=e.reset,f=this.storageKey,d={action:"load"},h=r||this.all,g=t[f];if(typeof g=="string")try{g=JSON.parse(g)}catch{this.__logWarn("Data parsing failed",{input:g})}return l&&g&&h.reset(void 0,d),o?g&&o(g,d):g&&(0,Y.isDef)(g.length)&&h.reset(g,d),g},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},n.prototype.getAll=function(){return xt([],this.all.models,!0)},n.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},n.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,r=e.all,o=e.em,l=e.events;r&&o&&r.on("add",function(f,d,h){return o.trigger(l.add,f,h)}).on("remove",function(f,d,h){return o.trigger(l.remove,f,h)}).on("change",function(f,d){return o.trigger(l.update,f,f.changedAttributes(),d)}).on("all",this.__catchAllEvent,this),this.cls=[r].concat(t.collections||[]),(t.propagate||[]).forEach(function(f){var d=f.entity,h=f.event;d.on("all",function(g,y,b,k){var V=k||b,$=pt({event:g},V);[o,r].map(function(Q){return Q.trigger(h,y,$)})})})},n.prototype.__remove=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,l=(0,w.isString)(t)?this.get(t):t,f=function(){return l&&r.all.remove(l,e),l};return!e.silent&&(o==null||o.trigger(this.events.removeBefore,l,f,e)),!e.abort&&f()},n.prototype.__catchAllEvent=function(t,e,r,o){var l=this,f=l.em,d=l.events,h=o||r;f&&d.all&&f.trigger(d.all,{event:t,model:e,options:h}),this.__onAllEvent()},n.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var r=(0,w.isElement)(e)?e:document.querySelector(e);if(!r)return this.__logWarn('"appendTo" element not found');r.appendChild(this.render(t))}},n.prototype.__onAllEvent=function(){},n.prototype._createId=function(t){t===void 0&&(t=16);var e=this.getAll(),r=e.length+t,o=this.getAllMap(),l;do l=(0,Y.createId)(r);while(o[l]);return l},n.prototype.__listenAdd=function(t,e){var r=this;t.on("add",function(o,l,f){return r.em.trigger(e,o,f)})},n.prototype.__listenRemove=function(t,e){var r=this;t.on("remove",function(o,l,f){return r.em.trigger(e,o,f)})},n.prototype.__listenUpdate=function(t,e){var r=this;t.on("change",function(o,l){return r.em.trigger(e,o,o.changedAttributes(),l)})},n.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},n}(Nt),yt={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0};const Kt=yt;var te=vr(642),ue={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};const Zt=ue;var dt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ot=function(a){dt(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},n.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0);var e=["width","height","widthMedia"];e.forEach(function(r){return t.checkUnit(r)})},n.prototype.checkUnit=function(t){var e=this.get(t)||"",r=(parseFloat(e)||0).toString()===e.toString();r&&this.set(t,"".concat(e,"px"))},n.prototype.getName=function(){return this.get("name")||this.get("id")},n.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},n}(x.Hn);const X=ot;var z=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),et=function(a){z(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(x.FE);const A=et;et.prototype.model=X;var tt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),E=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},At=function(a){tt(n,a);function n(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return n.prototype.template=function(t){var e=t.ppfx,r=t.label;return st(ct||(ct=E([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,r,e,e,e,e,e,e,e)},n.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},n.prototype.startAdd=function(){},n.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},n.prototype.updateSelect=function(){var t=this,e=t.em,r=t.devicesEl;if(e&&e.getDeviceModel&&r){var o=e.getDeviceModel();r.val(o?o.get("id"):"")}},n.prototype.getOptions=function(){var t=this,e=t.collection,r=t.em,o="";return e.forEach(function(l){var f=l.attributes,d=f.name,h=f.id,g=r&&r.t&&r.t("deviceManager.devices.".concat(h))||d;o+='<option value="'.concat(h||d,'">').concat(g,"</option>")}),o},n.prototype.render=function(){var t=this,e=t.em,r=t.ppfx,o=t.$el,l=t.el,f=e&&e.t&&e.t("deviceManager.device");return o.html(this.template({ppfx:r,label:f})),this.devicesEl=o.find(".".concat(r,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(r,"devices-c"),this},n}(x.G7);const Pt=At;var ct,Dt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wt=function(){return Wt=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Wt.apply(this,arguments)},oe="device",Pe="".concat(oe,":"),_e="".concat(Pe,"select"),ve="".concat(Pe,"update"),Ct="".concat(Pe,"add"),Rt="".concat(Pe,"remove"),zt="".concat(Rt,":before"),ie="change:device",ne={all:oe,select:_e,update:ve,add:Ct,remove:Rt,removeBefore:zt},qt=function(a){Dt(n,a);function n(t){var e,r=a.call(this,t,"DeviceManager",new A,ne,Zt)||this;return r.Device=X,r.Devices=A,r.storageKey="",r.devices=r.all,(e=r.config.devices)===null||e===void 0||e.forEach(function(o){return r.add(o,{silent:!0})}),r.select(r.config.default||r.devices.at(0)),t.on(ie,r._onSelect,r),r}return n.prototype._onSelect=function(t,e,r){var o=this,l=o.em,f=o.events,d=t.previous("device"),h=this.get(e),g=f.select;l.trigger(g,h,this.get(d)),this.__catchAllEvent(g,h,r)},n.prototype.add=function(t,e){e===void 0&&(e={});var r,o=e;if((0,w.isString)(t)){var l=e;o=arguments[2]||{},r=Wt(Wt({},o),{id:t,name:o.name||t,width:l})}else r=t;return r.id||(r.id=r.name||this._createId()),this.devices.add(r,o)},n.prototype.get=function(t){var e=this.getAll().filter(function(r){return r.get("name")===t})[0];return e||this.devices.get(t)||null},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(t,e){e===void 0&&(e={});var r=(0,w.isString)(t)?this.get(t):t;return r&&this.em.set("device",r.get("id"),e),this},n.prototype.getSelected=function(){return this.get(this.em.get("device"))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new Pt({collection:this.devices,config:Wt({em:e},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(Tt);const me=qt;var Ne;(function(a){a.add="page:add",a.addBefore="page:add:before",a.remove="page:remove",a.removeBefore="page:remove:before",a.select="page:select",a.selectBefore="page:select:before",a.update="page:update",a.all="page"})(Ne||(Ne={}));const cr=Ne;var _r=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ar=function(a){_r(n,a);function n(t,e,r){return a.call(this,e,{module:t,modelConstructor:r})||this}return n.prototype.add=function(t,e){var r=this,o,l=(0,w.isArray)(t)?t:(0,w.isUndefined)(t)?void 0:[t];return l=(o=l==null?void 0:l.map(function(f){return f instanceof r.newModel?f:new r.newModel(r.module,f)}))!==null&&o!==void 0?o:[void 0],a.prototype.add.call(this,(0,w.isArray)(t)?l:l[0],e)},n.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},n}(x.FE);const he=ar;var T=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),B=function(){return B=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},B.apply(this,arguments)},nt=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ht="__aw",Lt="__ah",Z=function(a,n){var t,e=a.get(n),r=(t=a.view)===null||t===void 0?void 0:t.el[n==="width"?"offsetWidth":"offsetHeight"];return(0,w.isNumber)(e)?e:(0,w.isString)(e)&&e.endsWith("px")?parseFloat(e):r||0},Et=function(a){T(n,a);function n(t,e){var r=a.call(this,t,e)||this,o=r.em,l=r.attributes,f=l.styles,d=l.component,h=o.Components,g=h.getConfig(),y=o.Css.getAll(),b={},k={em:o,config:g,frame:r,idMap:b};if(!(0,Y.isComponent)(d)){var V=(0,Y.isObject)(d)?d:{components:d};!V.type&&(V.type="wrapper");var $=h.getType("wrapper").model;r.set("component",new $(V,k))}if(!f)r.set("styles",y);else if(!(0,Y.isObject)(f)){var Q=f;(0,w.keys)(b).length&&(Q=(0,w.isString)(Q)?o.Parser.parseCss(Q):Q,o.Css.checkId(Q,{idMap:b})),y.add(Q),r.set("styles",y)}return!e.width&&r.set(ht,1),!e.height&&r.set(Lt,1),!r.id&&r.set("id",(0,Y.createId)()),r}return n.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(n.prototype,"width",{get:function(){return Z(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return Z(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){var t=this.refFrame;return(t==null?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),n.prototype.initRefs=function(){var t=this.refFrame;if((0,w.isString)(t)){var e=this.module.framesById[t];e&&this.set({refFrame:e},{silent:!0})}},n.prototype.getBoxRect=function(){var t=this.attributes,e=t.x,r=t.y,o=this,l=o.width,f=o.height;return{x:e,y:r,width:l,height:f}},n.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},n.prototype.changesUp=function(t){t===void 0&&(t={}),!(t.temporary||t.noCount||t.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},n.prototype.getComponent=function(){return this.get("component")},n.prototype.getStyles=function(){return this.get("styles")},n.prototype.disable=function(){this.trigger("disable")},n.prototype.remove=function(){var t;(t=this.view)===null||t===void 0||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},n.prototype.getHead=function(){return nt([],this.head,!0)},n.prototype.setHead=function(t){return this.set("head",nt([],t,!0))},n.prototype.addHeadItem=function(t){this.head.push(t)},n.prototype.getHeadByAttr=function(t,e,r){return this.head.filter(function(o){return o.attributes&&o.attributes[t]==e&&(!r||r===o.tag)})[0]},n.prototype.removeHeadByAttr=function(t,e,r){var o=this.getHeadByAttr(t,e,r),l=this.head.indexOf(o);l>=0&&this.head.splice(l,1)},n.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},n.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},n.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},n.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},n.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},n.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",B({frame:this},t))},n.prototype.hasAutoHeight=function(){var t=this.attributes.height;return!!(t==="auto"||this.config.infiniteCanvas)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=te.Z.prototype.toJSON.call(this,t),r=(0,w.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[ht]&&delete e.width,e[Lt]&&delete e.height,e.refFrame&&(e.refFrame=e.refFrame.id,delete e.component),(0,w.forEach)(e,function(o,l){l.indexOf("_")===0&&delete e[l]}),(0,w.forEach)(r,function(o,l){e[l]===o&&delete e[l]}),(0,w.forEach)(["attributes","head"],function(o){(0,w.isEmpty)(e[o])&&delete e[o]}),e},n}(te.Z);const mt=Et;var xe=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),He=function(a){xe(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,mt)||this;return r.loadedItems=0,r.itemsToLoad=0,(0,w.bindAll)(r,"itemLoaded"),r.on("add",r.onAdd),r.on("reset",r.onReset),r.on("remove",r.onRemove),r.forEach(function(o){return r.onAdd(o)}),r}return n.prototype.onAdd=function(t){this.module.framesById[t.id]=t},n.prototype.onReset=function(t,e){var r=this,o=(e==null?void 0:e.previousModels)||[];o.map(function(l){return r.onRemove(l)})},n.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},n.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(r){return r[t?"on":"off"]("loaded",e.itemLoaded)})},n}(he);const De=He;var ee=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jt=function(a){ee(n,a);function n(t){var e=this,r=t.em,o=t.config,l=o.scripts,f=o.styles;return e=a.call(this,t,{scripts:l,styles:f})||this,e.set("frames",new De(t)),e.on("change:zoom",e.onZoomChange),e.on("change:x change:y",e.onCoordsChange),e.on("change:pointer change:pointerScreen",e.onPointerChange),e.listenTo(r,"change:device ".concat(ve),e.updateDevice),e.listenTo(r,cr.select,e._pageUpdated),e}return n.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:x.pH,pointerScreen:x.pH}},Object.defineProperty(n.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),n.prototype.init=function(){var t=this.em,e=t.Pages._initPage();this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},n.prototype._pageUpdated=function(t,e){var r=this.em;r.setSelected(),r.get("readyCanvas")&&r.stopDefault(),e==null||e.getFrames().map(function(o){return o.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},n.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,r=e.getDeviceModel(),o=t.frame||e.getCurrentFrameModel();if(o&&r){var l=r.attributes,f=l.width,d=l.height;o.set({width:f,height:d},{noUndo:1})}},n.prototype.onZoomChange=function(){var t=this,e=t.em,r=t.module,o=this.get("zoom");o<1&&this.set("zoom",1),e.trigger(r.events.zoom)},n.prototype.onCoordsChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.coords)},n.prototype.onPointerChange=function(){var t=this,e=t.em,r=t.module;e.trigger(r.events.pointer)},n.prototype.getPointerCoords=function(t){t===void 0&&(t=x.vA.World);var e=this.attributes,r=e.pointer,o=e.pointerScreen;return t===x.vA.World?r:o},n}(te.Z);const Vt=Jt;var Te=vr(675),Be=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ee=function(a){Be(n,a);function n(t,e){e===void 0&&(e=[]);var r=a.call(this,t,e,Te.Z)||this;r.on("add",r.onAdd),r.on("change",r.onChange),r.on("remove",r.onRemove);var o=r.em;r.refreshDbn=(0,w.debounce)(function(){return r.refresh()},0);var l="component:resize styleable:change component:input component:update frame:updated undo redo";return r.listenTo(o,l,function(){return r.refreshDbn()}),r}return Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var t=this,e=t.em,r=t.events;e.trigger(r.spot)},n.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},n.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},n.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},n.prototype.__trgEvent=function(t,e){var r=this.module,o=r.em;o.trigger(t,e),this.refreshDbn()},n}(he);const Ke=Ee;var ge;(function(a){a.dragEnter="canvas:dragenter",a.dragOver="canvas:dragover",a.dragEnd="canvas:dragend",a.dragData="canvas:dragdata",a.drop="canvas:drop",a.spot="canvas:spot",a.spotAdd="canvas:spot:add",a.spotUpdate="canvas:spot:update",a.spotRemove="canvas:spot:remove",a.coords="canvas:coords",a.zoom="canvas:zoom",a.pointer="canvas:pointer",a.refresh="canvas:refresh",a.frameLoad="canvas:frame:load",a.frameLoadHead="canvas:frame:load:head",a.frameLoadBody="canvas:frame:load:body"})(ge||(ge={}));const fr=ge;var Me=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nr=function(a){Me(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),n.prototype.preinitialize=function(t){this.className=""},n}(x.G7);const Qe=nr;var Xt=vr(491),Or=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kn=function(a){Or(n,a);function n(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var r=a.call(this,t)||this;return r.itemsView="",r.itemType="type",r.reuseView=!1,r.viewCollection=[],e&&r.listenTo(r.collection,"add",r.addTo),r}return n.prototype.addTo=function(t){this.add(t)},n.prototype.itemViewNotFound=function(t){},n.prototype.add=function(t,e){var r=this,o=r.reuseView,l=r.viewCollection,f=e||null,d=t.get(this.itemType),h;t.view&&o?h=t.view:h=this.renderView(t,d),l.push(h);var g=h.render().el;f?f.appendChild(g):this.$el.append(g)},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(r){return t.add(r,e)}),this.$el.append(e),this.onRender(),this},n.prototype.onRender=function(){},n.prototype.onRemoveBefore=function(t,e){},n.prototype.onRemove=function(t,e){},n.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),x.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},n.prototype.clearItems=function(){this.viewCollection},n}(Qe);const U=Kn;var ft=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wt=function(a){ft(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var r=e.model;return e.listenTo(r,"change",e.render),e.listenTo(r,"destroy remove",e.remove),e.listenTo(r.get("selectors"),"change",e.render),e}return n.prototype.tagName=function(){return"style"},n.prototype.render=function(){var t=this,e=t.model,r=t.el,o=e.get("important");return r.innerHTML=e.toCSS({important:o}),this},n}(x.G7);const Ht=wt;var de=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),je=function(a){de(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},n}(Ht);const tr=je;var Zr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jr=function(a,n){return"".concat(a).concat(n?"-".concat(parseFloat(n)):"")},Tr=function(a){Zr(n,a);function n(t){var e=a.call(this,t)||this;(0,w.bindAll)(e,"sortRules");var r=t.config||{};e.atRules={},e.config=r,e.em=r.em,e.pfx=r.stylePrefix||"",e.className=e.pfx+"rules";var o=e.collection;return e.listenTo(o,"add",e.addTo),e.listenTo(o,"reset",e.render),e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){if(this.renderStarted){var r=e||null,o=this.config,l={model:t,config:o},f,d;if(t.get("atRuleType")==="keyframes"){var h=t.getAtRule(),g=this.atRules[h];if(!g){var y=document.createElement("style");g=document.createTextNode(""),y.appendChild(document.createTextNode("".concat(h,"{"))),y.appendChild(g),y.appendChild(document.createTextNode("}")),this.atRules[h]=g,f=y}d=new tr(l),g.appendData(d.render().el.textContent)}else d=new Ht(l),f=d.render().el;var b=this.className,k=t.get("mediaText"),V=Jr(b),$=V;if(k&&($=Jr(b,this.getMediaWidth(k))),f){var Q=r||this.el,vt=void 0;try{vt=Q.querySelector("#".concat($))}catch{}vt||(vt=Q.querySelector("#".concat(V))),vt==null||vt.appendChild(f)}return f}},n.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},n.prototype.sortRules=function(t,e){var r=this.em,o=(r.getConfig().mediaCondition||"").indexOf("min-width")!==-1;if(!o)return 0;var l=o?t:e,f=o?e:t;return l-f},n.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,r=e.em,o=e.$el,l=e.collection,f=this.className,d=document.createDocumentFragment();o.empty();var h=r.Devices.getAll().pluck("priority").sort(this.sortRules);return h.every(function(g){return g})&&h.unshift(0),h.forEach(function(g){return d.appendChild((0,Xt.ut)("div",{id:Jr(f,g)}))}),l.each(function(g){return t.addToCollection(g,d)}),o.append(d),o.attr("class",f),this},n}(x.G7);const Co=Tr;var Qr=function(){return Qr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qr.apply(this,arguments)},Cn=function(){function a(n,t){var e=this;this.em=n,this.canvas=n.Canvas;var r=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),o=Array.isArray(r)?r:[r];this.el=o[0],this.counter=0,(0,w.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),o.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(n,t){var e={on:Xt.on,off:Xt.S1},r=t?"on":"off";e[r](n,"dragenter",this.handleDragEnter),e[r](n,"dragover",this.handleDragOver),e[r](n,"drop",this.handleDrop),e[r](n,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(n){var t,e=n?Xt.on:Xt.S1,r=this.el.ownerDocument,o=(t=r.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=n?{onStart:function(l){var f=l.sorter;(0,Xt.on)(o,"pointermove",f.onMove)},onEnd:function(l){var f=l.sorter;(0,Xt.S1)(o,"pointermove",f.onMove)},customTarget:function(l){var f=l.event;return r.elementFromPoint(f.clientX,f.clientY)}}:null,e(o,"pointerenter",this.handleDragEnter),e(o,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(o,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(n){this.over?this.endDrop(n):this.__customTglEff(!1)},a.prototype.endDrop=function(n,t){var e=this,r=e.em,o=e.dragStop;this.counter=0,o&&o(n||!this.over),this.__customTglEff(!1),r.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(n){this.updateCounter(-1,n)},a.prototype.updateCounter=function(n,t){this.counter+=n,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(n){var t=this,e=this,r=e.em,o=e.canvas,l=n.dataTransfer,f=r.get("dragContent");if(!(!f&&!o.getConfig().allowExternalDrop)&&(this.updateCounter(1,n),!this.over)){this.over=!0;var d=r.Utils,h=f||"<br>",g,y;if(r.stopDefault(),r.inAbsoluteMode()){var b=r.Components.getWrapper(),k=b.append({})[0],V=r.Commands.run("core:component-drag",{event:n,guidesInfo:1,center:1,target:k,onEnd:function(Q,vt,Mt){var kt=Mt.cancelled,Gt;if(!kt){Gt=b.append(h)[0];var fe=o.getOffset(),Oe=k.getStyle(),Ve=Oe.top,pe=Oe.left,Ue=Oe.position,Ze=(0,Xt.GX)(Q.target),hr=parseInt("".concat(parseFloat(pe)+Ze.x-fe.left),10),ae=parseInt("".concat(parseFloat(Ve)+Ze.y-fe.top),10);Gt.addStyle({left:hr+"px",top:ae+"px",position:Ue})}t.handleDragEnd(Gt,l),k.remove()}});g=function(Q){return V.stop(n,{cancel:Q})},y=function(Q){return h=Q}}else{var $=new d.Sorter(Qr({em:r,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:o.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(Q){return t.handleDragEnd(Q,l)},document:this.el.ownerDocument},this.sortOpts||{}));$.setDropContent(h),$.startSort(),this.sorter=$,g=function(Q){Q&&($.moved=!1),$.endMove()},y=function(Q){return $.setDropContent(Q)}}this.dragStop=g,this.dragContent=y,r.trigger("canvas:dragenter",l,h)}},a.prototype.handleDragEnd=function(n,t){var e=this.em;this.over=!1,n&&(e.set("dragResult",n),e.trigger("canvas:drop",t,n)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(n){n.preventDefault(),this.em.trigger("canvas:dragover",n)},a.prototype.handleDrop=function(n){n.preventDefault();var t=this.dragContent,e=n.dataTransfer,r=this.getContentByData(e).content;n.target.style.border="",r&&t&&t(r),this.endDrop(!r,n)},a.prototype.getContentByData=function(n){var t=this.em,e=n&&n.types,r=n&&n.files||[],o=t.get("dragContent"),l=n&&n.getData("text");if(r.length){l=[];for(var f=0;f<r.length;f++){var d=r[f],h=d.type.split("/")[0];h=="image"&&l.push({type:h,file:d,attributes:{alt:d.name}})}}else if(o)l=o;else if((0,w.indexOf)(e,"text/html")>=0)l=n&&n.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,w.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,w.indexOf)(e,"text/json")>=0){var g=n&&n.getData("text/json");g&&(l=JSON.parse(g))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var y={content:l};return t.trigger("canvas:dragdata",n,y),y},a}();const xo=Cn;var Er=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mr=function(){return mr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},mr.apply(this,arguments)},Rr=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},xn=function(a){Er(n,a);function n(t,e){var r=a.call(this,{model:t})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,w.bindAll)(r,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var o=r.el;r.module._config=mr(mr({},r.config||{}),{frameView:r}),r.frameWrapView=e,r.showGlobalTools=(0,w.debounce)(r.showGlobalTools.bind(r),50);var l=r.getCanvasModel();return r.listenTo(t,"change:head",r.updateHead),r.listenTo(l,"change:styles",r.renderStyles),t.view=r,(0,Y.setViewEl)(o,r),r}return Object.defineProperty(n.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),n.prototype.getBoxRect=function(){var t=this,e=t.el,r=t.module,o=r.getCanvasView(),l=r.getCoords(),f=e.getBoundingClientRect(),d=o.getCanvasOffset(),h=o.getViewportDelta(),g=r.getZoomMultiplier(),y=(f.x-d.left-h.x-l.x)*g,b=(f.y-d.top-h.y-l.y)*g,k=f.width*g,V=f.height*g;return{x:y,y:b,width:k,height:V}},n.prototype.updateHead=function(){var t=this.model,e=this.getHead(),r=[],o=[],l=t.head,f=t.previous("head"),d=function(g){return g===void 0&&(g={}),Object.keys(g).sort().map(function(y){return"[".concat(y,'="').concat(g[y],'"]')}).join("")},h=function(g,y,b){g.forEach(function(k){var V=k.tag,$=k.attributes,Q=y.some(function(vt){return vt.tag===V&&d(vt.attributes)===d($)});!Q&&b.push(k)})};h(l,f,o),h(f,l,r),r.forEach(function(g){var y,b=e.querySelector("".concat(g.tag).concat(d(g.attributes)));(y=b==null?void 0:b.parentNode)===null||y===void 0||y.removeChild(b)}),(0,Xt.SJ)(e,o)},n.prototype.getEl=function(){return this.el},n.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},n.prototype.getWindow=function(){return this.getEl().contentWindow},n.prototype.getDoc=function(){return this.getEl().contentDocument},n.prototype.getHead=function(){return this.getDoc().querySelector("head")},n.prototype.getBody=function(){return this.getDoc().querySelector("body")},n.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},n.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Xt.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},n.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},n.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},n.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},n.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},n.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},n.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},n.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),r=e.scrollTop,o=e.scrollLeft,l=t.offsetHeight,f=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:f,scrollTop:r,scrollLeft:o,scrollBottom:r+l,scrollRight:o+f}},n.prototype._getTool=function(t){var e=this.tools,r=this.getToolsEl();return e[t]||(e[t]=r.querySelector(t)),e[t]},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._toggleEffects(!1),this.tools={},(t=this.wrapper)===null||t===void 0||t.remove(),Qe.prototype.remove.apply(this,e),this},n.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},n.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,r=this.getWindow(),o=r.pageYOffset,l=t||0,f=e.getConfig().autoscrollLimit,d=this.getRect().height-f,h=o;if(l<f&&(h-=f-l),l>d&&(h+=l-d),!(0,w.isUndefined)(t)&&h!==o&&h>0&&h<this.lastMaxHeight){var g=this.getGlobalToolsEl();g.style.opacity="0",this.showGlobalTools(),r.scrollTo(0,h),e.spots.refreshDbn()}requestAnimationFrame(this.autoscroll)}},n.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,Xt.VB)(t).clientY*this.em.getZoomDecimal()},n.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},n.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},n.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),r=t?"on":"off",o={on:Xt.on,off:Xt.S1};o[r](e,"mousemove dragover",this.updateClientY),o[r](e,"mouseup",this.stopAutoscroll)},n.prototype.render=function(){var t=this,e=t.$el,r=t.ppfx,o=t.em;return e.attr({class:"".concat(r,"frame")}),this.renderScripts(),o.trigger("frame:render",this),this},n.prototype.renderScripts=function(){var t=this,e=this,r=e.el,o=e.model,l=e.em,f="frame:load",d={el:r,model:o,view:this},h=this.getCanvasModel(),g=function(y){var b;if(y.length>0){var k=y.shift(),V=(0,Xt.ut)("script",mr({type:"text/javascript"},(0,w.isString)(k)?{src:k}:k));(b=r.contentDocument)===null||b===void 0||b.head.appendChild(V),V.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?g(y):V.onerror=V.onload=g.bind(null,y)}else l==null||l.trigger(fr.frameLoadHead,d),t.renderBody(),l==null||l.trigger(fr.frameLoadBody,d),l==null||l.trigger(f,d)};r.onload=function(){var y=t.config.frameContent;if(y){var b=t.getDoc();b.open(),b.write(y),b.close()}d.window=t.getWindow(),l==null||l.trigger("".concat(f,":before"),d),l==null||l.trigger(fr.frameLoad,d),g(Rr([],h.get("scripts"),!0))}},n.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),r=this.getCanvasModel(),o=function(y){return y.map(function(b){return{tag:"link",attributes:mr({rel:"stylesheet"},(0,w.isString)(b)?{href:b}:b)}})},l=o(t.prev||r.previous("styles")),f=o(r.get("styles")),d=[],h=[],g=function(y,b,k){y.forEach(function(V){var $=V.attributes.href,Q=b.some(function(vt){return vt.attributes.href===$});!Q&&k.push(V)})};g(f,l,h),g(l,f,d),d.forEach(function(y){var b,k=e.querySelector('link[href="'.concat(y.attributes.href,'"]'));(b=k==null?void 0:k.parentNode)===null||b===void 0||b.removeChild(k)}),(0,Xt.SJ)(e,h)},n.prototype.renderBody=function(){var t=this,e,r,o=this,l=o.config,f=o.em,d=o.model,h=o.ppfx,g=this.getDoc(),y=this.getBody(),b=this.getWindow(),k=d.hasAutoHeight(),V=f.config;b._isEditor=!0,this.renderStyles({prev:[]});var $="#ffca6f";(0,Xt.R3)(y,`<style>
      `.concat(V.baseCss||l.frameStyle||"",`

      `).concat(k?"body { overflow: hidden }":"",`

      [data-gjs-type="wrapper"] {
        `).concat(k?"":"min-height: 100vh;",`
        padding-top: 0.001em;
      }

      .`).concat(h,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(h,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(h,`selected-parent {
        outline: 2px solid `).concat($,` !important
      }

      .`).concat(h,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(h,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(h,`no-pointer {
        pointer-events: none;
      }

      .`).concat(h,`pointer-init {
        pointer-events: initial;
      }

      .`).concat(h,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(h,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(h,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(h,`is__grabbing,
      .`).concat(h,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(V.canvasCss||"",`
      `).concat(V.protectedCss||"",`
    </style>`));var Q=d.root,vt=f.Components.getType("wrapper").view;this.wrapper=new vt({model:Q,config:mr(mr({},Q.config),{em:f,frameView:this})}).render(),(0,Xt.R3)(y,(e=this.wrapper)===null||e===void 0?void 0:e.el),(0,Xt.R3)(y,new Co({collection:d.getStyles(),config:mr(mr({},f.Css.getConfig()),{frameView:this})}).render().el),(0,Xt.R3)(y,this.getJsContainer()),(0,Xt.on)(y,"click",function(Mt){var kt;return Mt&&((kt=Mt.target)===null||kt===void 0?void 0:kt.tagName)=="A"&&Mt.preventDefault()}),(0,Xt.on)(y,"submit",function(Mt){return Mt&&Mt.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!l.infiniteCanvas}}].forEach(function(Mt){return Mt.event.split(" ").forEach(function(kt){g.addEventListener(kt,function(Gt){return t.el.dispatchEvent((0,Xt.t3)(Gt,Mt.class))},Mt.opts)})}),this._toggleEffects(!0),(0,Y.hasDnd)(f)&&(this.droppable=new xo(f,(r=this.wrapper)===null||r===void 0?void 0:r.el)),this.loaded=!0,d.trigger("loaded")},n.prototype._toggleEffects=function(t){var e=t?Xt.on:Xt.S1,r=this.getWindow();r&&e(r,"".concat(Xt.G1," resize"),this._emitUpdate)},n.prototype._emitUpdate=function(){this.model._emitUpdated()},n}(Qe);const Gn=xn;var Ro=vr(668),Ln=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tn=function(){return tn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},tn.apply(this,arguments)},Nr=function(a){Ln(n,a);function n(t,e){var r=a.call(this,{model:t})||this;return(0,w.bindAll)(r,"onScroll","frameLoaded","updateOffset","remove","startDrag"),tn(tn({},t.config),{frameWrapView:r}),r.cv=e,r.frame=new Gn(t,r),r.classAnim="".concat(r.ppfx,"frame-wrapper--anim"),r.updateOffset=(0,w.debounce)(r.updateOffset.bind(r),0),r.updateSize=(0,w.debounce)(r.updateSize.bind(r),0),r.listenTo(t,"loaded",r.frameLoaded),r.listenTo(t,"change:x change:y",r.updatePos),r.listenTo(t,"change:width change:height",r.updateSize),r.listenTo(t,"destroy remove",r.remove),r.updatePos(),r.setupDragger(),r}return n.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},n.prototype.setupDragger=function(){var t=this,e=this,r=e.module,o=e.model,l,f,d,h=function(g){r.toggleFramesEvents(g)};this.dragger=new Ro.Z({onStart:function(){var g=o.attributes,y=g.x,b=g.y;d=t.em.getZoomMultiplier(),l=y,f=b,h(!1)},onEnd:function(){return h(!0)},setPosition:function(g){o.set({x:l+g.x*d,y:f+g.y*d})}})},n.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},n.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Xt.L_)(this.elTools)},n.prototype.remove=function(t){var e=this;return this.__clear(t),Qe.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(r){return e[r]=0}),this},n.prototype.updateOffset=function(){var t,e=this,r=e.em,o=e.$el,l=e.frame;!r||r.destroyed||(r.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),(t=l==null?void 0:l.model)===null||t===void 0||t._emitUpdated())},n.prototype.updatePos=function(t){var e=this,r=e.model,o=e.el,l=r.attributes,f=l.x,d=l.y,h=o.style;this.frame.rect=void 0,h.left=isNaN(f)?f:"".concat(f,"px"),h.top=isNaN(d)?d:"".concat(d,"px"),t&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var t=this,e=t.em,r=t.el,o=t.$el,l=t.model,f=t.classAnim,d=t.frame;if(d){d.rect=void 0,o.addClass(f);var h=this.__handleSize(),g=h.noChanges,y=h.width,b=h.height;((0,w.isNull)(y)||(0,w.isNull)(b))&&l.set(tn(tn({},y?{}:{width:r.offsetWidth}),b?{}:{height:r.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),g?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var t=this,e=t.frame,r=t.em;r.trigger("frame:scroll",{frame:e,body:e.getBody(),target:e.getWindow()})},n.prototype.frameLoaded=function(){var t=this,e=t.frame;t.config,e.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var t,e,r="px",o=this,l=o.model,f=o.el,d=f.style,h=l.attributes,g=h.width,y=h.height,b=d.width||"",k=d.height||"",V=g||"",$=y||"",Q=b==V&&k==$,vt=(0,w.isNumber)(V)?"".concat(V).concat(r):V,Mt=(0,w.isNumber)($)?"".concat($).concat(r):$;if(d.width=vt,l.hasAutoHeight()){var kt=this.frame.el;if(kt.contentDocument){var Gt=kt.contentDocument,fe=new ResizeObserver(function(){d.height="".concat(Gt.body.scrollHeight,"px")});fe.observe(Gt.body),(t=this.sizeObserver)===null||t===void 0||t.disconnect(),this.sizeObserver=fe}}else d.height=Mt,(e=this.sizeObserver)===null||e===void 0||e.disconnect(),delete this.sizeObserver;return{noChanges:Q,width:g,height:y,newW:V,newH:$}},n.prototype.render=function(){var t=this,e=t.frame,r=t.$el,o=t.ppfx,l=t.cv,f=t.model,d=t.el,h=f.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),r.empty().attr({class:"".concat(o,"frame-wrapper")}).append(`
      <div class="`.concat(o,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(o,`frame-wrapper__name" data-action-move>
          `).concat(f.get("name")||"",`
        </div>
        <div class="`).concat(o,`frame-wrapper__top-r">
          <div class="`).concat(o,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(o,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(o,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(o,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var g=(0,Xt.ut)("div",{class:"".concat(o,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(o,`highlighter" data-hl></div>
      <div class="`).concat(o,`badge" data-badge></div>
      <div class="`).concat(o,`placeholder">
        <div class="`).concat(o,`placeholder-int"></div>
      </div>
      <div class="`).concat(o,`ghost"></div>
      <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(o,`resizer"></div>
      <div class="`).concat(o,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(o,`offset-fixed-v"></div>
    `));this.elTools=g;var y=l==null?void 0:l.toolsWrapper;return y&&y.appendChild(g),h&&h({el:d,elTop:d.querySelector("[data-frame-top]"),elRight:d.querySelector("[data-frame-right]"),elBottom:d.querySelector("[data-frame-bottom]"),elLeft:d.querySelector("[data-frame-left]"),frame:f,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(Qe);const ho=Nr;var Sn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),On=function(a){Sn(n,a);function n(t,e){t===void 0&&(t={});var r=a.call(this,t,!0)||this;return r.listenTo(r.collection,"reset",r.render),r.canvasView=e.canvasView,r._module=e.module,r}return n.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(r){return r.remove(e)})},n.prototype.onRender=function(){var t=this,e=t.$el,r=t.ppfx;e.attr({class:"".concat(r,"frames")})},n.prototype.clearItems=function(){var t=this.viewCollection||[];t.forEach(function(e){return e.remove()}),this.viewCollection=[]},n.prototype.renderView=function(t,e){return new ho(t,this.canvasView)},n}(U);const So=On;var sr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ce=function(){return Ce=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ce.apply(this,arguments)},Tn=function(a){sr(n,a);function n(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,w.bindAll)(e,"clearOff","onKeyPress","onWheel","onPointer");var r=e,o=r.em,l=r.pfx,f=r.ppfx,d=e.module.events;return e.className="".concat(l,"canvas ").concat(f,"no-touch-actions").concat(o.config.customUI?"":" ".concat(l,"canvas-bg")),e.clsUnscale="".concat(l,"unscale"),e._initFrames(),e.listenTo(o,d.refresh,e.clearOff),e.listenTo(o,"component:selected",e.checkSelected),e.listenTo(o,"".concat(d.coords," ").concat(d.zoom),e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return n.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames>
        <div class="`).concat(t,`canvas__spots" data-spots></div>
      </div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
      <style data-canvas-style></style>
    `)},n.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},n.prototype._initFrames=function(){var t=this,e=t.frames,r=t.model,o=t.config,l=t.em,f=r.frames;l.set("readyCanvas",0),f.once("loaded:all",function(){return l.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new So({collection:f},Ce(Ce({},o),{canvasView:this}))},n.prototype.checkSelected=function(t,e){var r;e===void 0&&(e={});var o=e.scroll,l=this.em.getCurrentFrame();o&&((r=t.views)===null||r===void 0||r.forEach(function(f){f.frameView===l&&f.scrollIntoView(o)}))},n.prototype.remove=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,Qe.prototype.remove.apply(this,e),this.toggleListeners(!1),this},n.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},n.prototype.toggleListeners=function(t){var e=this,r=e.el,o=e.config,l=t?Xt.on:Xt.S1;l(document,"keypress",this.onKeyPress),l(window,"scroll resize",this.clearOff),l(r,"wheel",this.onWheel,{passive:!o.infiniteCanvas}),l(r,"pointermove",this.onPointer)},n.prototype.screenToWorld=function(t,e){var r=this.module,o=r.getCoords(),l=r.getZoomMultiplier(),f=this.getViewportDelta();return{x:(t-o.x-f.x)*l,y:(e-o.y-f.y)*l}},n.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),r=(0,Xt.GX)(),o={x:t.clientX-e.left+r.x,y:t.clientY-e.top+r.y};if(t._parentEvent){var l=t.target.getBoundingClientRect(),f=this.module.getZoomDecimal();o.x=l.left-e.left+r.x+t.clientX*f,o.y=l.top-e.top+r.y+t.clientY*f}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},n.prototype.onKeyPress=function(t){var e=this.em,r=(0,Xt.sN)(t);r===" "&&e.getZoomDecimal()!==1&&!e.Canvas.isInputFocused()&&(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},n.prototype.onWheel=function(t){var e=this,r=e.module,o=e.config;if(o.infiniteCanvas){this.preventDefault(t);var l=t.deltaX,f=t.deltaY,d=r.getZoomDecimal(),h=(0,Xt.Vb)(t),g=r.getCoords();if(h){var y=d-f*d*.01;r.setZoom(y*100);var b=this.model.getPointerCoords(x.vA.Screen),k=this.getCanvasOffset(),V=b.x-k.width/2,$=b.y-k.height/2,Q=y/d,vt=V-(V-g.x)*Q,Mt=$-($-g.y)*Q;r.setCoords(vt,Mt)}else this.onPointer(t),r.setCoords(g.x-l,g.y-f)}},n.prototype.updateFrames=function(t){var e=this.em,r=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),r.style.display="none",e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){e.stopDefault(o),e.runDefault(o),r.style.display=""},300)},n.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,r=t.model,o=t.module,l=t.cvStyle,f=t.clsUnscale,d=o.getZoomMultiplier();if(e){var h=r.attributes,g=h.x,y=h.y,b=o.getZoomDecimal();e.style.transform="scale(".concat(b,") translate(").concat(g*d,"px, ").concat(y*d,"px)")}l&&(l.innerHTML=`
        .`.concat(f," { scale: ").concat(d,` }
      `))},n.prototype.fitViewport=function(t){var e,r;t===void 0&&(t={});var o=this,l=o.em,f=o.module,d=o.model,h=this.getCanvasOffset(),g=t.el,y=g&&((e=(0,Y.getComponentView)(g))===null||e===void 0?void 0:e.frameView),b=y?y.model:t.frame||l.getCurrentFrameModel()||d.frames.at(0),k=b.attributes,V=k.x,$=k.y,Q={x:V??0,y:$??0,width:b.width,height:b.height};if(g){var vt=this.getElBoxRect(g);Q.x=Q.x+vt.x,Q.y=Q.y+vt.y,Q.width=vt.width,Q.height=vt.height}var Mt=t.ignoreHeight,kt=(r=t.gap)!==null&&r!==void 0?r:0,Gt=(0,w.isNumber)(kt),fe=Gt?kt:kt.x,Oe=Gt?kt:kt.y,Ve=Q.width+fe*2,pe=Q.height+Oe*2,Ue=h.width,Ze=h.height,hr=Ue/Ve,ae=Ze/pe,ln=Mt?hr:Math.min(hr,ae),qi=ln*100;f.setZoom(qi);var Yi=-Q.x+(b.width>=Ue?Ue/2-Ve/2:-fe),ui=-Q.y+Ze/2-pe/2,oo={x:(Yi+fe)*ln,y:(ui+Oe)*ln};if(Mt){var Ea=f.getZoomMultiplier(),ks=Ze*Ea,Ms=ks-Ze,Kp=Ms/2;oo.y=(-Q.y+Oe)*ln-Kp/Ea}f.setCoords(oo.x,oo.y)},n.prototype.isElInViewport=function(t){var e=(0,Y.getElement)(t),r=(0,Xt.Ut)(e),o=this.getFrameOffset(e),l=r.top,f=r.left;return l>=0&&f>=0&&l<=o.height&&f<=o.width},n.prototype.offset=function(t,e){e===void 0&&(e={});var r=e.noScroll,o=(0,Xt.Ut)(t),l=r?{x:0,y:0}:(0,Xt.GX)(t);return{top:o.top+l.y,left:o.left+l.x,width:o.width,height:o.height}},n.prototype.getRectToScreen=function(t){var e,r,o,l,f=this.module.getZoomDecimal(),d=this.module.getCoords(),h=this.getViewportDelta(),g=((e=t.x)!==null&&e!==void 0?e:0)*f+d.x+h.x||0,y=((r=t.y)!==null&&r!==void 0?r:0)*f+d.y+h.y||0;return{x:g,y,width:((o=t.width)!==null&&o!==void 0?o:0)*f,height:((l=t.height)!==null&&l!==void 0?l:0)*f}},n.prototype.getElBoxRect=function(t,e){var r,o,l;e===void 0&&(e={});var f=this.module,d=(0,Xt.Ut)(t),h=d.width,g=d.height,y=d.left,b=d.top,k=(r=(0,Y.getComponentView)(t))===null||r===void 0?void 0:r.frameView,V=k==null?void 0:k.getBoxRect(),$=f.getZoomMultiplier(),Q=(o=V==null?void 0:V.x)!==null&&o!==void 0?o:0,vt=(l=V==null?void 0:V.y)!==null&&l!==void 0?l:0,Mt=this.el,kt=(0,Xt.GX)(),Gt=y+Q+(Mt.scrollLeft+kt.x)*$,fe=b+vt+(Mt.scrollTop+kt.y)*$,Oe={x:Gt,y:fe,width:h,height:g};return e.local&&(Oe.x=y,Oe.y=b),e.toScreen?this.getRectToScreen(Oe):Oe},n.prototype.getViewportRect=function(t){t===void 0&&(t={});var e=this.getCanvasOffset(),r=e.top,o=e.left,l=e.width,f=e.height,d=this.module;if(t.toWorld){var h=d.getZoomMultiplier(),g=d.getCoords(),y=this.getViewportDelta(),b=-g.x-y.x||0,k=-g.y-y.y||0;return{x:b*h,y:k*h,width:l*h,height:f*h}}else return{x:o,y:r,width:l,height:f}},n.prototype.getViewportDelta=function(t){var e=this.module.getZoomMultiplier(),r=this.getCanvasOffset(),o=r.width,l=r.height,f=o*e,d=l*e,h=f-o,g=d-l;return{x:h/2/e,y:g/2/e}},n.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},n.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var r=(e=this.frame)===null||e===void 0?void 0:e.el,o=t==null?void 0:t.ownerDocument.defaultView,l=o?o.frameElement:r;this.frmOff=this.offset(l||r)}return this.frmOff},n.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},n.prototype.getElementPos=function(t,e){e===void 0&&(e={});var r=this.module.getZoomDecimal(),o=this.getFrameOffset(t),l=this.el,f=this.getCanvasOffset(),d=this.offset(t,e),h=e.avoidFrameOffset?0:o.top,g=e.avoidFrameOffset?0:o.left,y=e.avoidFrameZoom?d.top:d.top*r,b=e.avoidFrameZoom?d.left:d.left*r,k=e.avoidFrameOffset?y:y+h-f.top+l.scrollTop,V=e.avoidFrameOffset?b:b+g-f.left+l.scrollLeft,$=e.avoidFrameZoom?d.height:d.height*r,Q=e.avoidFrameZoom?d.width:d.width*r;return{top:k,left:V,height:$,width:Q,zoom:r,rect:d}},n.prototype.getElementOffsets=function(t){if(!t||(0,Xt.BM)(t))return{};var e={},r=window.getComputedStyle(t),o=this.module.getZoomDecimal(),l=["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"];return l.forEach(function(f){e[f]=parseFloat(r[f])*o}),e},n.prototype.getPosition=function(t){var e;t===void 0&&(t={});var r=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(!r)return{top:0,left:0,width:0,height:0};var o=r.body,l=this.module.getZoomDecimal(),f=this.getFrameOffset(),d=this.getCanvasOffset(),h=t.noScroll;return{top:f.top+(h?0:o.scrollTop)*l-d.top,left:f.left+(h?0:o.scrollLeft)*l-d.left,width:d.width,height:d.height}},n.prototype.updateScript=function(t){var e=t.model,r=e.getId();if(!t.scriptContainer){t.scriptContainer=(0,Xt.ut)("div",{"data-id":r});var o=this.getJsContainer();o==null||o.appendChild(t.scriptContainer)}t.el.id=r,t.scriptContainer.innerHTML="";var l=document.createElement("script"),f=e.getScriptString(),d=e.get("script-props")?f:`function(){
`.concat(f,`
;}`),h=JSON.stringify(e.__getScriptProps());l.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(r,`');
        if (!item) return;
        (`).concat(d,".bind(item))(").concat(h,`)
      }, 1);`),setTimeout(function(){var g=t.scriptContainer;g==null||g.appendChild(l)},0)},n.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e==null?void 0:e.getJsContainer()},n.prototype.getFrameView=function(t){return(t==null?void 0:t.frameView)||this.em.getCurrentFrame()},n.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,r=t.frames,o=t.em,l=t.framesArea,f=e.frames;f.listenToLoad(),r.render();var d=f.at(0),h=d==null?void 0:d.view;o.setCurrentFrame(h),l==null||l.appendChild(r.el),this.frame=h,this.updateFramesArea()}},n.prototype.renderFrames=function(){this._renderFrames()},n.prototype.render=function(){var t=this,e=t.el,r=t.$el,o=t.ppfx,l=t.config,f=t.em;r.html(this.template());var d=r.find("[data-frames]");this.framesArea=d.get(0);var h=r.find("[data-tools]");return this.toolsWrapper=h.get(0),h.append(`
      <div class="`.concat(o,"tools ").concat(o,`tools-gl" style="pointer-events:none">
        <div class="`).concat(o,`placeholder">
          <div class="`).concat(o,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(o,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(o,'highlighter-sel"></div>'):"",`
        <div class="`).concat(o,`badge"></div>
        <div class="`).concat(o,`ghost"></div>
        <div class="`).concat(o,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(o,`resizer"></div>
        <div class="`).concat(o,`offset-v"></div>
        <div class="`).concat(o,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(o,"tools")),this.hlEl=e.querySelector(".".concat(o,"highlighter")),this.badgeEl=e.querySelector(".".concat(o,"badge")),this.placerEl=e.querySelector(".".concat(o,"placeholder")),this.ghostEl=e.querySelector(".".concat(o,"ghost")),this.toolbarEl=e.querySelector(".".concat(o,"toolbar")),this.resizerEl=e.querySelector(".".concat(o,"resizer")),this.offsetEl=e.querySelector(".".concat(o,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(o,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(o,"tools-gl")),this.spotsEl=e.querySelector("[data-spots]"),this.cvStyle=e.querySelector("[data-canvas-style]"),this.el.className=(0,Y.getUiClass)(f,this.className),this.ready=!0,this._renderFrames(),this},n}(Qe);const Pr=Tn;var vn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qe=function(){return qe=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qe.apply(this,arguments)},$n=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},vo=function(a){vn(n,a);function n(t){var e=a.call(this,t,"Canvas",Kt)||this;return e.events=ge,e.framesById={},e.canvas=new Vt(e),e.spots=new Ke(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return n.prototype.getCanvasView=function(){return this.canvasView},n.prototype.postLoad=function(){this.model.init()},n.prototype.getModel=function(){return this.canvas},n.prototype.getElement=function(){return this.getCanvasView().el},n.prototype.getFrame=function(t){return this.getFrames()[t||0]},n.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},n.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},n.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},n.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},n.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},n.prototype._getLocalEl=function(t,e,r){var o=t,l=e==null?void 0:e.frameView;return o=l?l[r]():o,o},n.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},n.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},n.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},n.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},n.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},n.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},n.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},n.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},n.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},n.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},n.prototype.getSpotsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.spotsEl},n.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new Pr(this.canvas),this.canvasView.render().el},n.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},n.prototype.offset=function(t){return this.getCanvasView().offset(t)},n.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},n.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},n.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},n.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},r=e.top,o=r===void 0?0:r,l=e.left,f=l===void 0?0:l;return qe(qe({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:f})},n.prototype.getTargetToElementDim=function(t,e,r){r===void 0&&(r={});var o=r||{},l=this.getCanvasView().getPosition();if(l){var f=o.elPos||this.getCanvasView().getElementPos(e),d=r.toRight||0,h=o.targetHeight||t.offsetHeight,g=o.targetWidth||t.offsetWidth,y=o.event||null,b=f.top-h,k=f.left;k+=d?f.width:0,k=d?k-g:k;var V=k<l.left?l.left:k,$=b<l.top?l.top:b;$=$>f.top+f.height?f.top+f.height:$;var Q={top:$,left:V,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return y&&this.em&&this.em.trigger(y,Q),Q}},n.prototype.canvasRectOffset=function(t,e,r){var o=this;r===void 0&&(r={});var l=function(d){var h=d.defaultView;return h==null?void 0:h.frameElement},f=function(d,h,g){h===void 0&&(h=1);var y=o.em.getZoomDecimal(),b=h?"top":"left",k=d.ownerDocument,V=r.offset?l(k):{},$=V.offsetTop,Q=$===void 0?0:$,vt=V.offsetLeft,Mt=vt===void 0?0:vt,kt=k.body||{},Gt=kt.scrollTop,fe=Gt===void 0?0:Gt,Oe=kt.scrollLeft,Ve=Oe===void 0?0:Oe,pe=h?fe:Ve,Ue=h?Q:Mt;return g[b]-(pe-Ue)*y};return{top:f(t,1,e),left:f(t,0,e)}},n.prototype.getTargetToElementFixed=function(t,e,r){r===void 0&&(r={});var o=r.pos||this.getElementPos(t,{noScroll:!0}),l=r.canvasOff||this.canvasRectOffset(t,o),f=e.offsetHeight||0,d=e.offsetWidth||0,h=o.left+o.width,g=this.getCanvasView(),y=g.getPosition(),b=g.getFrameOffset(t),k=r.event,V=-f,$=(0,w.isUndefined)(r.left)?o.width-d:r.left;if($=o.left<-$?-o.left:$,$=h>y.width?$-(h-y.width):$,l.top<f){var Q=o.height+f,vt=Q<b.height;vt?V=V+Q:V=-l.top<o.height?-l.top:o.height}var Mt={top:V,left:$,canvasOffsetTop:l.top,canvasOffsetLeft:l.left,elRect:o,canvasOffset:l,canvasRect:y,targetWidth:d,targetHeight:f};return k&&this.em.trigger(k,Mt),Mt},n.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var r=e.subWinOffset,o=t.target.ownerDocument,l=o.defaultView||o.parentWindow,f=l.frameElement,d=r?l.pageYOffset:0,h=r?l.pageXOffset:0,g=this.getZoomMultiplier(),y=0,b=0;if(f){var k=f.getBoundingClientRect();y=k.top||0,b=k.left||0}return{y:(t.clientY+y-d)*g,x:(t.clientX+b-h)*g}},n.prototype.getMouseRelativeCanvas=function(t,e){var r,o=this.getZoomDecimal(),l=(r=this.getCanvasView().getPosition(e))!==null&&r!==void 0?r:{},f=l.top,d=f===void 0?0:f,h=l.left,g=h===void 0?0:h;return{y:t.clientY*o+d,x:t.clientX*o+g}},n.prototype.hasFocus=function(){return this.getDocument().hasFocus()},n.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),r=$n(["body"],this.config.notTextable,!0),o=e&&document.activeElement===e,l=o?t&&t.activeElement:document.activeElement;return l&&!r.some(function(f){return l.matches(f)})},n.prototype.scrollTo=function(t,e){e===void 0&&(e={});var r=(0,Y.getElement)(t),o=r&&(0,Y.getViewEl)(r);o&&o.scrollIntoView(e)},n.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},n.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},n.prototype.setZoom=function(t){return this.canvas.set("zoom",typeof t=="string"?parseFloat(t):t),this},n.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},n.prototype.setCoords=function(t,e,r){var o;r===void 0&&(r={});var l=t||t===0,f=e||e===0,d={x:this.canvas.get("x"),y:this.canvas.get("y")};if(l&&(d.x=parseFloat("".concat(t))),f&&(d.y=parseFloat("".concat(e))),r.toWorld){var h=(o=this.canvasView)===null||o===void 0?void 0:o.getViewportDelta();h&&(l&&(d.x=d.x-h.x),f&&(d.y=d.y-h.y))}return this.canvas.set(d),this},n.prototype.getCoords=function(){var t=this.canvas.attributes,e=t.x,r=t.y;return{x:e,y:r}},n.prototype.getPointer=function(t){var e=this.canvas.attributes,r=e.pointer,o=e.pointerScreen;return t?o:r},n.prototype.getZoomDecimal=function(){return this.getZoom()/100},n.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},n.prototype.fitViewport=function(t){var e;(e=this.canvasView)===null||e===void 0||e.fitViewport(t)},n.prototype.toggleFramesEvents=function(t){var e=this.getFramesEl().style;e.pointerEvents=t?"":"none"},n.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},n.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new mt(this,qe({},t)),e)},n.prototype.getLastDragResult=function(){return this.em.get("dragResult")},n.prototype.addSpot=function(t,e){var r;e===void 0&&(e={});var o=t,l=this.getSpots(o);if(l.length){var f=l[0];return f.set(o),f}var d=o.componentView||((r=o.component)===null||r===void 0?void 0:r.view),h=new Te.Z(this,qe(qe({},o),{id:o.id||"cs_".concat(o.type,"_").concat(d==null?void 0:d.cid),type:o.type||""}));return this.spots.add(h,e),h},n.prototype.getSpots=function(t){return t===void 0&&(t={}),this.spots.where(t.id?{id:t.id}:t)},n.prototype.removeSpots=function(t){t===void 0&&(t={});var e=(0,w.isArray)(t)?t:this.getSpots(t),r=this.spots.remove(e);return r},n.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(e===!0||e&&t&&e[t])},n.prototype.getWorldRectToScreen=function(t){var e;return(e=this.canvasView)===null||e===void 0?void 0:e.getRectToScreen(t)},n.prototype.refresh=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,l=e.canvasView;l==null||l.clearOff(),(t.spots||t.all)&&(this.refreshSpots(),r.trigger("canvas:updateTools")),r.set("canvasOffset",this.getOffset()),r.trigger(o.refresh,t)},n.prototype.refreshSpots=function(){this.spots.refresh()},n.prototype.destroy=function(){var t=this,e;this.canvas.stopListening(),(e=this.canvasView)===null||e===void 0||e.remove(),["model","droppable"].forEach(function(r){return t[r]={}})},n}(jt);const io=vo,O={stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var K="text/html",Ft=K;const Yt=function(a,n){n===void 0&&(n={});var t=new DOMParser,e=n.htmlType||Ft,r=e===K,o=r?a:"<div>".concat(a,"</div>"),l=t.parseFromString(o,e),f;if(r){var d=l.head,h=l.body,g=d.querySelectorAll("script");(0,w.each)(g,function(b){return h.appendChild(b)});var y=[];(0,w.each)(d.children,function(b){return y.push(b)}),(0,w.each)(y,function(b,k){return h.insertBefore(b,h.children[k])}),f=h}else f=l.firstChild;return f};var Ae=function(){return Ae=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ae.apply(this,arguments)},er="data-gjs-",or="parse:html",Se=function(a,n){return n===void 0&&(n={}),{compTypes:"",modelAttrStart:er,getPropAttribute:function(t,e){var r=t.replace(this.modelAttrStart,""),o=(e==null?void 0:e.length)||0,l=e==null?void 0:e.substring(0,1),f=e==null?void 0:e.substring(o-1),d=e==="true"?!0:e==="false"?!1:e;try{d=l=="{"&&f=="}"||l=="["&&f=="]"?JSON.parse(d):d}catch{}return{name:r,value:d}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var r={},o={};return(0,w.each)(t,function(l,f){if(f.indexOf(e.modelAttrStart)===0){var d=e.getPropAttribute(f,l);r[d.name]=d.value}else o[f]=l}),{props:r,attrs:o}},parseStyle:function(t){for(var e={};t.indexOf("/*")>=0;){var r=t.indexOf("/*"),o=t.indexOf("*/")+2;t=t.replace(t.slice(r,o),"")}for(var l=t.split(";"),f=0,d=l.length;f<d;f++){var h=l[f].trim();if(h){var g=h.split(":"),y=g[0].trim(),b=g.slice(1).join(":").trim();e[y]?((0,w.isArray)(e[y])||(e[y]=[e[y]]),e[y].push(b)):e[y]=b}}return e},parseClass:function(t){for(var e=[],r=t.split(" "),o=0,l=r.length;o<l;o++){var f=r[o].trim();f&&e.push(f)}return e},parseNode:function(t,e){e===void 0&&(e={});for(var r=[],o=t.childNodes,l=0,f=o.length;l<f;l++){var d=o[l],h=d.attributes||[],g=h.length,y=r[r.length-1],b=d.childNodes.length,k=this.compTypes,V={};if(k){var $="",Q=d.getAttribute&&d.getAttribute("".concat(this.modelAttrStart,"type"));if(Q)V={type:Q};else{for(var vt=0;vt<k.length;vt++){var Mt=k[vt];if($=Mt.model.isComponent(d,e),$){typeof $!="object"&&($={type:Mt.id});break}}V=$}}if(!V.tagName){var kt=d.tagName||"",Gt=d.namespaceURI||"";V.tagName=kt&&Gt==="http://www.w3.org/1999/xhtml"?kt.toLowerCase():kt}g&&(V.attributes={});for(var fe=0;fe<g;fe++){var Oe=h[fe].nodeName,Ve=h[fe].nodeValue;if(Oe=="style")V.style=this.parseStyle(Ve);else if(Oe=="class")V.classes=this.parseClass(Ve);else{if(Oe=="contenteditable")continue;if(Oe.indexOf(this.modelAttrStart)===0){var pe=this.getPropAttribute(Oe,Ve);V[pe.name]=pe.value}else Ve===""&&d[Oe]===!0&&(Ve=!0),V.attributes[Oe]=Ve}}if(b&&!V.components){var Ue=d.childNodes[0];b===1&&Ue.nodeType===3?(!V.type&&(V.type="text"),V.components={type:"textnode",content:Ue.nodeValue}):V.components=this.parseNode(d,Ae(Ae({},e),{inSvg:e.inSvg||V.type==="svg"}))}if(V.type=="textnode"){if(y&&y.type=="textnode"){y.content+=V.content;continue}if(!e.keepEmptyTextNodes){var Ze=d.nodeValue;if(Ze!=" "&&!Ze.trim())continue}}!b&&"".concat(d.outerHTML).slice(-2)==="/>"&&(V.void=!0);var hr=V.components;if(!V.type&&hr){for(var ae=n.textTypes,ln=ae===void 0?[]:ae,qi=n.textTags,Yi=qi===void 0?[]:qi,ui=1,oo=0,Ea=0;Ea<hr.length;Ea++){var ks=hr[Ea],Ms=ks.type;if(!ln.includes(Ms)&&!Yi.includes(ks.tagName)){ui=0;break}Ms==="textnode"&&(oo=1)}ui&&oo&&(V.type="text")}!V.tagName&&(0,w.isUndefined)(V.content)||r.push(V)}return r},parse:function(t,e,r){var o;r===void 0&&(r={});var l=(a==null?void 0:a.get("Config"))||{},f={html:[]},d=Ae(Ae({},n),r),h=Ae(Ae(Ae({},n.optionsHtml),{htmlType:((o=n.optionsHtml)===null||o===void 0?void 0:o.htmlType)||n.htmlType}),r),g=h.preParser,y=(0,w.isFunction)(g)?g(t,{editor:a==null?void 0:a.getEditor()}):t,b=(0,w.isFunction)(d.parserHtml)?d.parserHtml(y,h):Yt(y,h),k=b.querySelectorAll("script"),V=k.length,$=(0,w.isUndefined)(l.allowScripts)?h.allowScripts:l.allowScripts;if(!$)for(;V--;)k[V].parentNode.removeChild(k[V]);if((!h.allowUnsafeAttr||!h.allowUnsafeAttrValue)&&this.__sanitizeNode(b,h),e){for(var Q=b.querySelectorAll("style"),vt=Q.length,Mt="";vt--;)Mt=Q[vt].innerHTML+Mt,Q[vt].parentNode.removeChild(Q[vt]);Mt&&(f.css=e.parse(Mt))}a==null||a.trigger("".concat(or,":root"),{input:y,root:b});var kt=this.parseNode(b,d),Gt=kt.length===1&&!d.returnArray?kt[0]:kt;return f.html=Gt,a==null||a.trigger(or,{input:y,output:f}),f},__sanitizeNode:function(t,e){var r=this,o=t.attributes||[],l=t.childNodes||[],f=[];(0,w.each)(o,function(d){var h=d.nodeName||"",g=d.nodeValue||"";!e.allowUnsafeAttr&&h.startsWith("on")&&f.push(h),!e.allowUnsafeAttrValue&&g.startsWith("javascript:")&&f.push(h)}),f.map(function(d){return t.removeAttribute(d)}),(0,w.each)(l,function(d){return r.__sanitizeNode(d,e)})}}};const gn=Se;var Ji=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qn=function(){return qn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qn.apply(this,arguments)},Yn=gn(),gi=function(a){return(0,w.isArray)(a)?a[a.length-1]:a},La=function(a){Ji(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.parseStyle=function(t){return Yn.parseStyle(t)},n.prototype.extendStyle=function(t){return qn(qn({},this.getStyle()),t)},n.prototype.getStyle=function(t){var e=this.get("style")||{},r=qn({},e);return t&&(0,w.isString)(t)?r[t]:r},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,w.isString)(t)&&(t=this.parseStyle(t));var o=this.getStyle(e);e.partial||e.avoidStore?(e.avoidStore=!0,t.__p=!0):delete t.__p;var l=qn({},t),f=qn({},l);(0,w.keys)(f).forEach(function(h){f[h]===""&&delete f[h]}),this.set("style",f,e);var d=(0,Y.shallowDiff)(o,l);return delete d.__p,(0,w.keys)(d).forEach(function(h){var g=r.em;e.noEvent||(r.trigger("change:style:".concat(h)),g&&(g.trigger("styleable:change",r,h,e),g.trigger("styleable:change:".concat(h),r,h,e)))}),l},n.prototype.addStyle=function(t,e,r){var o;e===void 0&&(e=""),r===void 0&&(r={}),typeof t=="string"?t=(o={},o[t]=e,o):r=e||{},r.addStyle=t,t=this.extendStyle(t),this.setStyle(t,r)},n.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},n.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],r=this.getStyle(t),o=t.important,l=function(d){var h=(0,w.isArray)(o)?o.indexOf(d)>=0:o,g=d.substring(0,2),y=g==="__";if(y)return"continue";var b=r[d],k=(0,w.isArray)(b)?b:[b];k.forEach(function(V){var $="".concat(V).concat(h?" !important":"");$&&e.push("".concat(d,":").concat($,";"))})};for(var f in r)l(f);return e.join("")},n.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},n.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},n}(x.Hn);const No=La;var Qi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),En=function(){return En=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},En.apply(this,arguments)},mi=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Fo=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Dn=function(a,n){if(n===void 0&&(n=[]),!a)return[];var t=(0,w.isArray)(a)||(0,w.isFunction)(a.map)?a:[a];return t.map(function(e){n.push(e.getId()),Dn(e.components().models,n)}),n},yi=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps,r=(0,w.isArray)(a)?a:[a];return r.map(function(o){var l=o.attributes,f=l===void 0?{}:l,d=o.components,h=o.tagName,g=o.style,y=f.id;f.draggable;var b=mi(f,["id","draggable"]),k=o;if(y){if(e[y])e[y].push(k),y=qr.getNewId(n),k.attributes.id=y;else if(e[y]=[],n[y]){k=n[y];var V=k;h&&V.set({tagName:h},En(En({},t),{silent:!0})),(0,w.keys)(b).length&&V.addAttributes(b,En({},t)),(0,w.keys)(g).length&&V.addStyle(g,t)}}if(d){var $=yi(d,n);if((0,w.isFunction)(k.components)){var Q=k.components();Q.length>0&&Q.reset($,t)}else k.components=$}return k})},un=function(a){Qi(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.opt=e,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren);var r=e.em,o=e.config;this.config=o,this.em=r,this.domc=e.domc||(r==null?void 0:r.Components)},n.prototype.resetChildren=function(t,e){var r=this;e===void 0&&(e={});var o=this,l=e.previousModels||[],f=l.filter(function(g){return!t.get(g.cid)}),d=Dn(t),h=Dn(l).filter(function(g){return d.indexOf(g)>=0});e.keepIds=(e.keepIds||[]).concat(h),f.forEach(function(g){return r.removeChildren(g,o,e)}),t.each(function(g){return r.onAdd(g)})},n.prototype.resetFromString=function(t,e){var r,o;t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=Dn(this);var l=this,f=l.domc,d=l.em,h=l.parent,g=d==null?void 0:d.Css,y=(f==null?void 0:f.allById())||{},b=this.parseString(t,e),k=yi(b,y,e),V=e.visitedCmps,$=V===void 0?{}:V;Object.keys($).forEach(function(Q){var vt=$[Q];if(vt.length){var Mt=(g==null?void 0:g.getRules("#".concat(Q)))||[];Mt.length&&vt.forEach(function(kt){Mt.forEach(function(Gt){var fe=Gt.clone();fe.set("selectors",["#".concat(kt.attributes.id)]),g.getAll().add(fe)})})}}),this.reset(k,e),d==null||d.trigger("component:content",h,e,t),(o=(r=h).__checkInnerChilds)===null||o===void 0||o.call(r)},n.prototype.removeChildren=function(t,e,r){var o=this;if(r===void 0&&(r={}),!!t){var l=this,f=l.domc,d=l.em,h=r.temporary||r.fromUndo;if(t.prevColl=this,!h){var g=t.getId(),y=d.Selectors.getAll(),b=d.Css.getAll(),k=(r.keepIds||[]).indexOf(g)<0,V=f?f.allById():{};delete V[g];var $=k?b.remove(b.filter(function(Mt){return Mt.getSelectors().getFullString()==="#".concat(g)}),r):[];y.remove($.map(function(Mt){return Mt.getSelectors().at(0)})),t.opt.temporary||(d.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),d.trigger("component:remove",t));var Q=t.components();Q.forEach(function(Mt){return o.removeChildren(Mt,e,r)})}var vt=t.components();d.stopListening(vt),d.stopListening(t),d.stopListening(t.get("classes")),t.__postRemove()}},n.prototype.model=function(t,e){var r=e.collection.opt,o=r.em,l,f=o.Components.componentTypes;e.em=o,e.config=r.config,e.componentTypes=f,e.domc=r.domc;for(var d=0;d<f.length;d++){var h=f[d].id;if(h==t.type){l=f[d].model;break}}return l||(l=f[f.length-1].model,o&&t.type&&o.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new l(t,e)},n.prototype.parseString=function(t,e){e===void 0&&(e={});var r=this,o=r.em,l=r.domc,f=o.Css,d=o.Parser.parseHtml(t);if(qr.checkId(d.html,d.css,l.componentsById,e),d.css&&f&&!e.temporary){e.at;var h=mi(e,["at"]);f.addCollection(d.css,En(En({},h),{extend:1}))}return d.html},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={}),e.keepIds=Fo(Fo([],e.keepIds||[],!0),Dn(e.previousModels),!0),(0,w.isString)(t)?t=this.parseString(t,e):(0,w.isArray)(t)&&(t=Fo([],t,!0),t.forEach(function(f,d){if((0,w.isString)(f)){var h=r.parseString(f,e);t[d]=(0,w.isArray)(h)&&!h.length?null:h}}));var o=(0,w.isArray)(t);t=(o?t:[t]).filter(Boolean).map(function(f){return r.processDef(f)}),t=o?(0,w.flatten)(t,1):t[0];var l=x.FE.prototype.add.apply(this,[t,e]);return this.__firstAdd=l,l},n.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this,r=e.em,o=e.config,l=o===void 0?{}:o,f=l.processor,d=t;if(f){d=En({},d);var h=f(d);h&&((0,w.each)(d,function(Q,vt){return delete d[vt]}),(0,w.extend)(d,h))}if(d.$$typeof&&typeof d.props=="object"){d=En({},d),d.props=En({},d.props);var g=r.Components,y=r.Parser,b=y.parserHtml;(0,w.each)(d,function(Q,vt){(0,w.includes)(["props","type"],vt)||delete d[vt]});var k=d.props,V=k.children;delete k.children,delete d.props;var $=b.splitPropsFromAttr(k);d.attributes=$.attrs,V&&(d.components=V),d.type?g.getType(d.type)||(d.tagName=d.type,delete d.type):d.type="textnode",(0,w.extend)(d,$.props)}return d},n.prototype.onAdd=function(t,e,r){r===void 0&&(r={});var o=this,l=o.domc,f=o.em,d=t.getStyle(),h=f&&f.getConfig().avoidInlineStyle;if(l&&l.Component.ensureInList(t),!(0,w.isEmpty)(d)&&!h&&f&&f.get&&f.getConfig().forceClass&&!r.temporary){var g=t.cid;f.Css.setClassRule(g,d),t.setStyle({}),t.addClass(g)}t.__postAdd({recursive:!0})},n}(x.FE);const Xn=un;var Hs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ho=1,mn=2,Da=function(a){Hs(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,o=e.config,l=o===void 0?{}:o,f=r.get("name"),d=r.get("label");f?d||r.set("label",f):r.set("name",d);var h=r.get("name"),g=l.escapeName,y=g?g(h):n.escapeName(h);return r.set("name",y),r.em=e.em,r}return n.prototype.defaults=function(){return{name:"",label:"",type:Ho,active:!0,private:!1,protected:!1,_undo:!0}},n.prototype.isId=function(){return this.get("type")===mn},n.prototype.isClass=function(){return this.get("type")===Ho},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,r=this.get("name"),o="";switch(this.get("type")){case Ho:o=".";break;case mn:o="#";break}return o+(e?e(r):r)},n.prototype.toString=function(){return this.getFullName()},n.prototype.getName=function(){return this.get("name")||""},n.prototype.getLabel=function(){return this.get("label")||""},n.prototype.setLabel=function(t){return this.set("label",t)},n.prototype.getActive=function(){return!!this.get("active")},n.prototype.setActive=function(t){return this.set("active",t)},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,r=x.Hn.prototype.toJSON.call(this,[t]),o=(0,w.result)(this,"defaults");if(e&&e.getConfig().avoidDefaults){(0,w.forEach)(o,function(f,d){r[d]===f&&delete r[d]}),r.label===r.name&&delete r.label;var l=(0,w.keys)(r).length;l===1&&r.name&&(r=r.name),l===2&&r.name&&r.type&&(r=this.getFullName())}return r},n.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\\:@\\/]+)/gi,"-")},n.TYPE_CLASS=Ho,n.TYPE_ID=mn,n}(x.Hn);const $r=Da;Da.prototype.idAttribute="name";var _i=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Oo=function(a,n){return a.reduce(function(t,e,r){return t.concat(Oo(a.slice(r+1),"".concat(n).concat(e)))},[n])},wi=function(a){_i(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||$r.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,w.filter)(this.models,function(t){return t.getActive()&&!t.get("private")})},n.prototype.getValid=function(t){var e=t===void 0?{}:t,r=e.noDisabled;return(0,w.filter)(this.models,function(o){return!o.get("private")}).filter(function(o){return r?o.get("active"):1})},n.prototype.getFullString=function(t,e){e===void 0&&(e={});var r=[],o=t||this;return o.forEach(function(l){return r.push(l.getFullName(e))}),e.sort&&r.sort(),r.join("").trim()},n.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,r=t.array,o=[],l=this.map(function(f){return f.getFullName(t)}).sort();return e?l.forEach(function(f,d){o=o.concat(Oo(l.slice(d+1),f))}):o=l,r?o:e?o.join(","):o.join("")},n}(x.FE);const ao=wi;wi.prototype.model=$r;var Bs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ta=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ea=function(a){Bs(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},n.prototype.getId=function(){return this.get("id")},n.prototype.getLabel=function(){return this.get("label")},n}(x.Hn);const go=ea;function ja(a){var n=new Set,t=new Map,e={items:[]};a.forEach(function(o){var l=o.category;if(l){n.add(l);var f=t.get(l);f?f.push(o):t.set(l,[o])}else e.items.push(o)});var r=Array.from(n).map(function(o){return{category:o,items:t.get(o)||[]}});return ta(ta([],r,!0),[e],!1)}var bi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ci="category",To=function(a){bi(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initCategory=function(t){var e=t.get(Ci),r=e instanceof go;if(e&&!r){(0,w.isString)(e)?e={id:e,label:e}:(0,Y.isObject)(e)&&!e.id&&(e.id=e.label);var o=this.getCategories().add(e);return t.set(Ci,o,{silent:!0}),o}else if(r){var o=e;return this.getCategories().add(o),o}},n}(x.FE),xi=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bo=function(a){xi(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.add=function(t,e){var r=(0,w.isArray)(t)?t:[t];return r.forEach(function(o){return o&&(o.id=(0,Y.normalizeKey)("".concat(o.id)))}),a.prototype.add.call(this,t,e)},n.prototype.get=function(t){return a.prototype.get.call(this,(0,w.isString)(t)?(0,Y.normalizeKey)(t):t)},n}(x.FE);const Si=Bo;Bo.prototype.model=go;var so;(function(a){a.select="trait:select",a.value="trait:value",a.custom="trait:custom",a.all="trait"})(so||(so={}));const Uo=so;var jn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yn=function(){return yn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yn.apply(this,arguments)},Pn=function(a){jn(n,a);function n(t,e){var r=a.call(this,t)||this,o=r.attributes,l=o.target,f=o.name;return!r.get("id")&&r.set("id",f),l&&r.setTarget(l),r.em=e,r}return n.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get("category");return t instanceof go?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),n.prototype.setTarget=function(t){if(t){var e=this.attributes,r=e.name,o=e.changeProp,l=e.value,f=e.getValue;this.target=t,this.unset("target");var d=o?"change:".concat(r):"change:attributes:".concat(r);this.listenTo(t,d,this.targetUpdated);var h=l||(f?void 0:this.getValue());!(0,w.isUndefined)(h)&&this.set({value:h},{silent:!0})}},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,o=r===void 0?!0:r,l=this.getId(),f=this.get("label")||this.getName();return o&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||f},n.prototype.getValue=function(t){return this.getTargetValue(t)},n.prototype.setValue=function(t,e){var r=this;e===void 0&&(e={});var o=this,l=o.component,f=o.em,d=e.partial,h={},g=this.attributes.setValue;if(g){g({value:t,component:l,editor:f==null?void 0:f.getEditor(),trait:this,partial:!!d,options:e,emitUpdate:function(){return r.targetUpdated()}});return}d&&(h.avoidStore=!0),this.setTargetValue(t,h)},n.prototype.getDefault=function(){return this.get("default")},n.prototype.getOptions=function(){return this.get("options")||[]},n.prototype.getOption=function(t){var e=this,r=(0,Y.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===r})[0]},n.prototype.getOptionId=function(t){return t.id||t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var o=e.locale,l=o===void 0?!0:o,f=(0,w.isString)(t)?this.getOption(t):t,d=this.getOptionId(f),h=f.label||f.name||d,g=this.getName();return l&&((r=this.em)===null||r===void 0?void 0:r.t("traitManager.traits.options.".concat(g,".").concat(d)))||h},n.prototype.getCategoryLabel=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.category,l=t.locale,f=l===void 0?!0:l,d=o==null?void 0:o.getId(),h=o==null?void 0:o.getLabel();return f&&(r==null?void 0:r.t("traitManager.categories.".concat(d)))||h||""},n.prototype.runCommand=function(){var t=this.em,e=this.attributes.command;if(e&&t)return(0,w.isString)(e)?t.Commands.run(e):e(t.Editor,this)},n.prototype.props=function(){return this.attributes},n.prototype.targetUpdated=function(){var t=this,e=t.component,r=t.em,o=this.getTargetValue({useType:!0});this.set({value:o},{fromTarget:1});var l={trait:this,component:e,value:o};e.trigger(Uo.value,l),r==null||r.trigger(Uo.value,l),r==null||r.trigger("trait:update",l)},n.prototype.getTargetValue=function(t){t===void 0&&(t={});var e=this,r=e.component,o=e.em,l=this.getName(),f=this.get("getValue"),d;if(f?d=f({editor:o==null?void 0:o.getEditor(),trait:this,component:r}):this.changeProp?d=r.get(l):d=r.getAttributes()[l],t.useType){var h=this.getType();if(h==="checkbox"){var g=this.attributes,y=g.valueTrue,b=g.valueFalse;!(0,w.isUndefined)(y)&&y===d?d=!0:!(0,w.isUndefined)(b)&&b===d&&(d=!1)}}return(0,w.isUndefined)(d)?"":d},n.prototype.setTargetValue=function(t,e){var r;e===void 0&&(e={});var o=this,l=o.component,f=o.attributes,d=this.getName();if(!(0,w.isUndefined)(t)){var h=t;if(t==="false"?h=!1:t==="true"&&(h=!0),this.getType()==="checkbox"){var g=f.valueTrue,y=f.valueFalse;h&&!(0,w.isUndefined)(g)&&(h=g),!h&&!(0,w.isUndefined)(y)&&(h=y)}var b=(r={},r[d]=h,r);b.__p=e.avoidStore?null:void 0,this.changeProp?l.set(b,e):l.addAttributes(b,e)}},n.prototype.setValueFromInput=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var o={value:t};this.set(o,yn(yn({},r),{avoidStore:1})),e&&(this.set("value","",r),this.set(o,r))},n.prototype.getInitValue=function(){var t=this.component,e=this.getName(),r;if(t){var o=t.get("attributes");r=this.changeProp?t.get(e):o[e]}return r||this.get("value")||this.get("default")},n}(x.Hn);const lo=Pn;var ra=function(){function a(n){n===void 0&&(n={}),this.config=n}return a.prototype.build=function(n,t){return(0,w.isString)(n)?this.buildFromString(n,t):new lo(n,t)},a.prototype.buildFromString=function(n,t){var e={name:n,type:"text"};switch(n){case"target":e.type="select",e.default=!1,e.options=this.config.optionsTarget;break}return new lo(e,t)},a}();const Zn=ra;var Ia=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),In=function(a){Ia(n,a);function n(t,e){var r=a.call(this,t)||this;r.categories=new Si,r.em=e.em,r.on("add",r.handleAdd),r.on("reset",r.handleReset);var o=r.module,l=o==null?void 0:o.getConfig();return r.tf=new Zn(l),r}return Object.defineProperty(n.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),n.prototype.getCategories=function(){return this.categories},n.prototype.handleReset=function(t,e){var r=e===void 0?{}:e,o=r.previousModels,l=o===void 0?[]:o;l.forEach(function(f){return f.trigger("remove")})},n.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e),this.initCategory(t)},n.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(e){return e.setTarget(t)})},n.prototype.add=function(t,e){if(t!=null){var r=this,o=r.target,l=r.em;if((0,w.isArray)(t)){for(var f=[],d=0,h=t.length;d<h;d++){var g=t[d];f[d]=g instanceof lo?g:this.tf.build(g,l),f[d].setTarget(o)}return a.prototype.add.call(this,f,e)}var y=t instanceof lo?t:this.tf.build(t,l);return y.setTarget(o),a.prototype.add.call(this,y,e)}},n}(To);const uo=In;var Ar=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ge=function(){return Ge=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ge.apply(this,arguments)},zo=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Dr=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},na=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Wo=function(a){return!!(a!=null&&a.getConfig().avoidInlineStyle)},Va="component:drag",en="__symbols",cn="__symbol",Oi="__symbol_ovrd",Ti="component:update",Ko="".concat(Ti,"-inside"),Us=function(a){Ar(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t;return t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null},t[cn]=0,t[en]=0,t[Oi]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){var t;return(t=this.get("content"))!==null&&t!==void 0?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),n.prototype.init=function(){},n.prototype.updated=function(t,e,r){},n.prototype.removed=function(){},n.prototype.initialize=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,w.bindAll)(this,"__upSymbProps","__upSymbCls","__upSymbComps");var o=e.em,l=this.parent(),f=l==null?void 0:l.attributes,d=this.get("propagate");if(d&&this.set("propagate",(0,w.isArray)(d)?d:[d]),f&&f.propagate&&!d){var h={},g=f.propagate;g.forEach(function($){return h[$]=l.get($)}),h.propagate=g,this.set(Ge(Ge({},h),t))}if(e&&e.config&&e.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),e.em=o,this.opt=e,this.em=o,this.frame=e.frame,this.config=e.config||{},this.set("attributes",Ge(Ge({},(0,w.result)(this,"defaults").attributes||{}),this.get("attributes")||{})),this.ccid=n.createId(this,e),this.initClasses(),this.initComponents(),this.initTraits(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.on("change:toolbar",this.__emitUpdateTlb),this.on("change",this.__onChange),this.on(Ko,this.__propToParent),this.set("status",""),this.views=[],["classes","traits","components"].forEach(function($){var Q="add remove ".concat($!=="components"?"change":"");r.listenTo(r.get($),Q.trim(),function(){for(var vt=[],Mt=0;Mt<arguments.length;Mt++)vt[Mt]=arguments[Mt];return r.emitUpdate.apply(r,Dr([$],vt,!1))})}),!e.temporary){var y=o&&o.Css,b=this.attributes,k=b.styles,V=b.type;k&&y&&y.addCollection(k,{avoidUpdateStyle:!0},{group:"cmp:".concat(V)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),o&&o.trigger("component:create",this)}},n.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,r=e==null?void 0:e.UndoManager,o=this.components();r&&!this.__hasUm&&(r.add(o),r.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&o.map(function(l){return l.__postAdd(t)})},n.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.get("UndoManager");e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},n.prototype.__onChange=function(t,e){var r=this,o=this.changedAttributes()||{};(0,w.keys)(o).forEach(function(l){return r.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete o[l]}),(0,Y.isEmptyObj)(o)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:o,options:e}))},n.prototype.__onStyleChange=function(t){var e=this,r=this.em;if(r){var o="component:styleUpdate",l=(0,w.keys)(t),f={style:t};r.trigger(o,this,f),l.forEach(function(d){return r.trigger("".concat(o,":").concat(d),e,f)})}},n.prototype.__changesUp=function(t){var e=this,r=e.em,o=e.frame;[o,r].forEach(function(l){return l&&l.changesUp(t)})},n.prototype.__propSelfToParent=function(t){this.trigger(Ti,t),this.__propToParent(t)},n.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Ko,t)},n.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},n.prototype.is=function(t){return this.get("type")==t},n.prototype.props=function(){return this.attributes},n.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(){return this.get("dmode")||""},n.prototype.find=function(t){var e,r=[],o=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return o==null||o.each(function(l){var f=o.eq(l),d=f.data("model");d&&r.push(d)}),r},n.prototype.findType=function(t){var e=[],r=function(o){return o.forEach(function(l){l.is(t)&&e.push(l),r(l.components())})};return r(this.components()),e},n.prototype.closest=function(t){var e,r=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return r!=null&&r.length?r.data("model"):void 0},n.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},n.prototype.contains=function(t){var e=!1;if(!t)return e;var r=function(o){!e&&o.forEach(function(l){l===t&&(e=!0),!e&&r(l.components())})};return r(this.components()),e},n.prototype.tagUpdated=function(){this.trigger("rerender")},n.prototype.replaceWith=function(t,e){e===void 0&&(e={});var r=this.collection,o=r.indexOf(this);r.remove(this);var l=r.add(t,Ge(Ge({},e),{at:o}));return(0,w.isArray)(l)?l:[l]},n.prototype.attrUpdated=function(t,e,r){var o=this;r===void 0&&(r={});var l=this.get("attributes"),f=l.class;f&&this.setClass(f),delete l.class;var d=l.style;d&&this.setStyle(d),delete l.style;var h=Ge({},this.previous("attributes")),g=(0,Y.shallowDiff)(h,this.get("attributes"));(0,w.keys)(g).forEach(function(y){return o.trigger("change:attributes:".concat(y),o,g[y],r)})},n.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",Ge({},t),e),this},n.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(Ge(Ge({},this.getAttributes({noClass:!0})),t),e)},n.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.getAttributes();return r.map(function(l){return delete o[l]}),this.setAttributes(o,e)},n.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=this.em,o=(0,w.isString)(t)?t:"",l=o?e:t;if(Wo(r)&&!l.inline){var f=r.get("state"),d=r.Css,h=d.getIdRule(this.getId(),Ge({state:f},l));if(this.rule=h,h)return h.getStyle(o)}return a.prototype.getStyle.call(this,o)},n.prototype.setStyle=function(t,e){var r=this;t===void 0&&(t={}),e===void 0&&(e={});var o=this,l=o.opt,f=o.em;if(Wo(f)&&!l.temporary&&!e.inline){var d=this.get("style")||{};t=(0,w.isString)(t)?this.parseStyle(t):t,t=Ge(Ge({},t),d);var h=f.get("state"),g=f.Css,y=this.getStyle(e);this.rule=g.setIdRule(this.getId(),t,Ge({state:h},e));var b=(0,Y.shallowDiff)(y,t);this.set("style","",{silent:!0}),(0,w.keys)(b).forEach(function(k){return r.trigger("change:style:".concat(k))})}else t=a.prototype.setStyle.apply(this,arguments);return l.temporary||this.__onStyleChange(e.addStyle||t),t},n.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,r=[],o=Ge({},this.get("attributes")),l=e==null?void 0:e.Selectors,f=this.getId();if(t.noClass?delete o.class:(this.classes.forEach(function(g){return r.push((0,w.isString)(g)?g:g.getName())}),r.length&&(o.class=r.join(" "))),!t.noStyle){var d=this.get("style");(0,Y.isObject)(d)&&!(0,Y.isEmptyObj)(d)&&(o.style=this.styleToString({inline:1}))}if(!(0,w.has)(o,"id")){var h=!1;(Wo(e)||!(0,w.isEmpty)(this.getStyle()))&&(h=!!(l!=null&&l.get(f,l.Selector.TYPE_ID))),(this.__getSymbol()||this.__getSymbols()||this.get("script-export")||this.get("script"))&&(h=!0),h&&(o.id=f)}return o},n.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},n.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},n.prototype.removeClass=function(t){var e=[];t=(0,w.isArray)(t)?t:[t];var r=this.classes,o=$r.TYPE_CLASS;return t.forEach(function(l){var f=l.split(" ");f.forEach(function(d){var h=r.where({name:d,type:o})[0];h&&e.push(r.remove(h))})}),e},n.prototype.getClasses=function(){var t=this.getAttributes(),e=t.class;return e?e.split(" "):[]},n.prototype.__logSymbol=function(t,e,r){r===void 0&&(r={});var o=this.__getSymbol(),l=this.__getSymbols();!o&&!l||this.em.log(t,{model:this,toUp:e,context:"symbols",opts:r})},n.prototype.__initSymb=function(){this.__symbReady||(this.on("change",this.__upSymbProps),this.__symbReady=!0)},n.prototype.__isSymbol=function(){return(0,w.isArray)(this.get(en))},n.prototype.__isSymbolOrInst=function(){return!!(this.__isSymbol()||this.get(cn))},n.prototype.__isSymbolTop=function(){var t=this.parent(),e=this.__isSymbolOrInst();return e&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},n.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop(),r=e.__isSymbol()?e:e.__getSymbol();return r!==t},n.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},n.prototype.__getSymbol=function(){var t=this.get(cn);if(t&&(0,w.isString)(t)){var e=this.__getAllById()[t];e?(t=e,this.set(cn,e)):t=0}return t},n.prototype.__getSymbols=function(){var t=this,e=this.get(en);return e&&(0,w.isArray)(e)&&(e.forEach(function(r,o){r&&(0,w.isString)(r)&&(e[o]=t.__getAllById()[r])}),e=e.filter(function(r){return r&&!(0,w.isString)(r)})),e},n.prototype.__isSymbOvrd=function(t){t===void 0&&(t="");var e=this.get(Oi),r=t.split(":")[0],o=t!==r?[t,r]:[t];return e===!0||(0,w.isArray)(e)&&o.some(function(l){return e.indexOf(l)>=0})},n.prototype.__getSymbToUp=function(t){var e=this;t===void 0&&(t={});var r=[],o=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||o&&this.__isSymbOvrd(o))return r;var l=this.__getSymbols()||[],f=this.__getSymbol(),d=f?Dr([f],f.__getSymbols()||[],!0):l;return r=d.filter(function(h){return h!==e}).filter(function(h){return!(o&&h.__isSymbOvrd(o))}),r},n.prototype.__getSymbTop=function(t){for(var e=this,r=this.parent(t);r&&(r.__isSymbol()||r.__getSymbol());)e=r,r=r.parent(t);return e},n.prototype.__upSymbProps=function(t,e){var r=this;e===void 0&&(e={});var o=this.changedAttributes()||{},l=o.attributes||{};if(delete o.status,delete o.open,delete o[en],delete o[cn],delete o[Oi],delete o.attributes,delete l.id,(0,Y.isEmptyObj)(l)||(o.attributes=l),!(0,Y.isEmptyObj)(o)){var f=this.__getSymbToUp(e);(0,w.keys)(o).map(function(d){r.__isSymbOvrd(d)&&delete o[d]}),this.__logSymbol("props",f,{opts:e,changed:o}),f.forEach(function(d){var h=Ge({},o);(0,w.keys)(h).map(function(g){d.__isSymbOvrd(g)&&delete h[g]}),d.set(h,Ge({fromInstance:r},e))})}},n.prototype.__upSymbCls=function(t,e,r){var o=this;r===void 0&&(r={});var l=this.__getSymbToUp(r);this.__logSymbol("classes",l,{opts:r}),l.forEach(function(f){f.set("classes",o.get("classes"),{fromInstance:o})}),this.__changesUp(r)},n.prototype.__upSymbComps=function(t,e,r){var o=this,l=r||e||{},f=l.fromInstance,d=l.fromUndo,h={fromInstance:f,fromUndo:d},g=t.opt.temporary;if(r)if(r.add){var k=[],V=!!this.__getSymbols(),y=this.__getSymbToUp(Ge(Ge({},h),{changed:"components:add"}));if(y.length){var $=t.__getSymbol();k=($?$.__getSymbols():t.__getSymbols())||[],k=Dr([],k,!0),k.push($||t)}!g&&this.__logSymbol("add",y,{opts:r,addedInstances:k.map(function(pe){return pe.cid}),added:t.cid}),y.forEach(function(pe){var Ue=pe.__getSymbTop(),Ze=k.filter(function(ae){var ln=ae.__getSymbTop({prev:1});return Ue&&ln&&ln===Ue})[0],hr=Ze||t.clone({symbol:!0,symbolInv:V});pe.append(hr,Ge({fromInstance:o},r))})}else{var Q=t.__getSymbol();if(Q&&!r.temporary&&Q.set(en,Q.__getSymbols().filter(function(Ve){return Ve!==t})),!t.__isSymbolTop()){var vt="components:remove",Mt=r.index,kt=t.parent(),Gt=Ge({fromInstance:t},r),fe=t.__isSymbolNested(),Oe=function(pe){var Ue=pe.parent();Ue&&!Ue.__isSymbOvrd(vt)&&pe.remove(Gt)},y=kt!=null&&kt.__isSymbOvrd(vt)?[]:t.__getSymbToUp(h);fe&&(y=kt==null?void 0:kt.__getSymbToUp(Ge(Ge({},h),{changed:vt})),Oe=function(pe){var Ue=pe.components().at(Mt);Ue&&Ue.remove(Ge({fromInstance:kt},Gt))}),!g&&this.__logSymbol("remove",y,{opts:r,removed:t.cid,isSymbNested:fe}),y.forEach(Oe)}}else{var y=this.__getSymbToUp(Ge(Ge({},h),{changed:"components:reset"})),b=t.models;this.__logSymbol("reset",y,{components:b}),y.forEach(function(Ve){var pe=b.map(function(Ue){return Ue.clone({symbol:!0})});Ve.components().reset(pe,Ge({fromInstance:o},e))})}this.__changesUp(l)},n.prototype.initClasses=function(t,e,r){r===void 0&&(r={});var o="change:classes",l=this.get("attributes")||{},f=l.class,d=zo(l,["class"]),h=[this,o,this.initClasses],g=this.get("classes")||f||[],y=(0,w.isString)(g)?g.split(" "):g;this.stopListening.apply(this,h);var b=this.normalizeClasses(y),k=new ao([]);return this.set("classes",k,r),k.add(b),k.on("add remove reset",this.__upSymbCls),f&&b.length&&this.set("attributes",d),this.listenTo.apply(this,h),this},n.prototype.initComponents=function(){var t="change:components",e=[this,t,this.initComponents];this.stopListening.apply(this,e);var r=new Xn([],this.opt);r.parent=this;var o=this.get("components"),l=!this.opt.avoidChildren;return this.set("components",r),l&&o&&r.add((0,w.isFunction)(o)?o(this):o,this.opt),r.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,e),this},n.prototype.initTraits=function(t){var e=this.em,r="change:traits";this.off(r,this.initTraits),this.__loadTraits();var o=Ge({},this.get("attributes")),l=this.traits;return l.each(function(f){if(!f.changeProp){var d=f.getName(),h=f.getInitValue();d&&h&&(o[d]=h)}}),l.length&&this.set("attributes",o),this.on(r,this.initTraits),t&&e&&e.trigger("component:toggled"),this},n.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var r=this.previous(t)||[],o=this.get(t)||[],l=r.map(function(d){return"change:".concat(d)}).join(" "),f=o.map(function(d){return"change:".concat(d)}).join(" ");l&&this.off(l,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,e)}},n.prototype.__scriptPropsChange=function(t,e,r){r===void 0&&(r={}),!r.avoidStore&&this.trigger("rerender")},n.prototype.append=function(t,e){e===void 0&&(e={});var r=(0,w.isArray)(t)?Dr([],t,!0):[t],o=r.map(function(f){return(0,w.isString)(f)||f.collection&&f.collection.remove(f,{temporary:!0}),f}),l=this.components().add(o,e);return(0,w.isArray)(l)?l:[l]},n.prototype.components=function(t,e){e===void 0&&(e={});var r=this.get("components");return(0,w.isUndefined)(t)?r:(r.reset(void 0,e),t?this.append(t,e):[])},n.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},n.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},n.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},n.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},n.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},n.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},n.prototype.initToolbar=function(){var t=this.em,e=this,r=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var o=[];e.collection&&o.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&o.push({attributes:{class:"".concat(r,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&o.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&o.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",o)}},n.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var r=t||this.traits;if(!(r instanceof uo)){r=(0,w.isFunction)(r)?r(this):r;var o=new uo([],this.opt);o.setTarget(this),r.length&&(r.forEach(function(l){return l.attributes&&delete l.attributes.value}),o.add(r)),this.set({traits:o},e)}return this},n.prototype.getTraits=function(){return this.__loadTraits(),Dr([],this.traits.models,!0)},n.prototype.setTraits=function(t){var e=(0,w.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},n.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},n.prototype.updateTrait=function(t,e){var r,o=this.getTrait(t);return o&&o.set(e),(r=this.em)===null||r===void 0||r.trigger("component:toggled"),this},n.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},n.prototype.removeTrait=function(t){var e=this,r,o=(0,w.isArray)(t)?t:[t],l=o.map(function(h){return e.getTrait(h)}),f=this.traits,d=l.length?f.remove(l):[];return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,w.isArray)(d)?d:[d]},n.prototype.addTrait=function(t,e){var r;e===void 0&&(e={}),this.__loadTraits();var o=this.traits.add(t,e);return(r=this.em)===null||r===void 0||r.trigger("component:toggled"),(0,w.isArray)(o)?o:[o]},n.prototype.normalizeClasses=function(t){var e=[],r=this.em,o=r==null?void 0:r.Selectors;return o?t.models?Dr([],t.models,!0):(t.forEach(function(l){return e.push(o.add(l))}),e):[]},n.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,r=Ge({},this.attributes),o=Ge({},this.opt),l=this.getId(),f=e==null?void 0:e.Css;r.attributes=Ge({},r.attributes),delete r.attributes.id,r.components=[],r.classes=[],r.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get("components").each(function(V,$){r.components[$]=V.clone(Ge(Ge({},t),{_inner:1}))}),this.get("traits").each(function(V,$){r.traits[$]=V.clone()}),this.get("classes").each(function(V,$){r.classes[$]=V.get("name")}),r.status="",o.collection=null;var d=new this.constructor(r,o),h="#".concat(d.getId()),g=f?f.getRules("#".concat(l)):[];g.forEach(function(V){var $=V.clone();$.set("selectors",[h]),f.getAll().add($)}),d.set(en,0);var y=this.__getSymbol(),b=this.__getSymbols();!t.symbol&&(y||b)?(d.set(cn,0),d.set(en,0)):y?(y.set(en,Dr(Dr([],y.__getSymbols(),!0),[d],!1)),d.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(en,Dr(Dr([],b,!0),[d],!1)),d.set(cn,this),d.__initSymb()):t.symbolInv?(this.set(en,[d]),d.set(cn,this),[this,d].map(function(V){return V.__initSymb()})):(d.set(en,[this]),[this,d].map(function(V){return V.__initSymb()}),this.set(cn,d)));var k="component:clone";return e&&e.trigger(k,d),this.trigger(k,d),d},n.prototype.getName=function(t){t===void 0&&(t={});var e=this.em,r=this.attributes,o=r.type,l=r.tagName,f=r.name,d=o||l,h=o?"":l,g="domComponents.names.",y=f&&(e==null?void 0:e.t("".concat(g).concat(f))),b=h&&(e==null?void 0:e.t("".concat(g).concat(h))),k=e&&(e.t("".concat(g).concat(o))||e.t("".concat(g).concat(l))),V=this.get("custom-name");return(t.noCustom?"":V)||y||f||b||(0,Y.capitalize)(h)||k||(0,Y.capitalize)(d)},n.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},n.prototype.toHTML=function(t){t===void 0&&(t={});var e=this,r=[],o=t.tag,l=o||e.get("tagName"),f=e.get("void"),d=t.attributes,h=this.getAttrToHTML();if(delete t.tag,d&&((0,w.isFunction)(d)?h=d(e,h)||{}:(0,Y.isObject)(d)&&(h=d)),t.withProps){var g=this.toJSON();(0,w.forEach)(g,function(Mt,kt){var Gt=["classes","attributes","components"];kt[0]!=="_"&&Gt.indexOf(kt)<0&&(h["data-gjs-".concat(kt)]=(0,w.isArray)(Mt)||(0,Y.isObject)(Mt)?JSON.stringify(Mt):(0,w.isBoolean)(Mt)?"".concat(Mt):Mt)})}for(var y in h){var b=h[y];if(!(0,w.isUndefined)(b)&&b!==null)if((0,w.isBoolean)(b))b&&r.push(y);else{var k="";if(t.altQuoteAttr&&(0,w.isString)(b)&&b.indexOf('"')>=0)k="'".concat(b.replace(/'/g,"&apos;"),"'");else{var V=(0,w.isString)(b)?b.replace(/"/g,"&quot;"):b;k='"'.concat(V,'"')}r.push("".concat(y,"=").concat(k))}}var $=r.length?" ".concat(r.join(" ")):"",Q=e.getInnerHTML(t),vt="<".concat(l).concat($).concat(f?"/":"",">").concat(Q);return!f&&(vt+="</".concat(l,">")),vt},n.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},n.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(r){return r.toHTML(t)}).join(""):this.content},n.prototype.getAttrToHTML=function(){var t=this.getAttributes();return Wo(this.em)&&delete t.style,t},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=F.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,delete e.delegate,!t.fromUndo){var r=e[cn],o=e[en];o&&(0,w.isArray)(o)&&(e[en]=o.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),r&&!(0,w.isString)(r)&&(e[cn]=r.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},n.prototype.getChangedProps=function(t){var e=t||F.Model.prototype.toJSON.apply(this),r=(0,w.result)(this,"defaults");return(0,w.forEach)(r,function(o,l){["type"].indexOf(l)===-1&&e[l]===o&&delete e[l]}),(0,w.isEmpty)(e.type)&&delete e.type,(0,w.forEach)(["attributes","style"],function(o){(0,w.isEmpty)(r[o])&&(0,w.isEmpty)(e[o])&&delete e[o]}),(0,w.forEach)(["classes","components"],function(o){(!e[o]||(0,w.isEmpty)(r[o])&&!e[o].length)&&delete e[o]}),e},n.prototype.getId=function(){var t=this.get("attributes")||{};return t.id||this.ccid||this.cid},n.prototype.setId=function(t,e){var r=Ge({},this.get("attributes"));return r.id=t,this.set("attributes",r,e),this},n.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},n.prototype.getView=function(t){var e=this,r=e.view,o=e.views,l=e.em,f=t||(l==null?void 0:l.getCurrentFrameModel());return f&&(r=o.filter(function(d){return d.frameView===f.view})[0]),r},n.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=t==null?void 0:t.model;return this.getView(e)},n.prototype.__getScriptProps=function(){var t=this.props(),e=this.get("script-props")||[];return e.reduce(function(r,o){return r[o]=t[o],r},{})},n.prototype.getScriptString=function(t){var e=this,r=t||this.get("script")||"";if(!r)return r;if(this.get("script-props"))r=r.toString().trim();else{if((0,w.isFunction)(r)){var o=r.toString().trim();o=o.slice(o.indexOf("{")+1,o.lastIndexOf("}")),r=o.trim()}var l=this.em.getConfig(),f=na(l.tagVarStart||"{[ "),d=na(l.tagVarEnd||" ]}"),h=new RegExp("".concat(f,"([\\w\\d-]*)").concat(d),"g");r=r.replace(h,function(g,y){e.scriptUpdated();var b=e.attributes[y]||"";return(0,w.isArray)(b)||typeof b=="object"?JSON.stringify(b):b})}return r},n.prototype.emitUpdate=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var l=this.em,f=Ti+(t?":".concat(t):""),d=t&&this.get(t);t&&this.updated.apply(this,Dr([t,d,t&&this.previous(t)],r,!1)),this.trigger.apply(this,Dr([f],r,!1)),l&&l.trigger.apply(l,Dr([f,this],r,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=d,e),options:r[2]||r[1]||{}})},n.prototype.onAll=function(t){return(0,w.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},n.prototype.forEachChild=function(t){(0,w.isFunction)(t)&&this.components().forEach(function(e){t(e),e.forEachChild(t)})},n.prototype.remove=function(t){var e=this;t===void 0&&(t={});var r=this.em,o=this.collection,l=function(){o&&o.remove(e,Ge(Ge({},t),{action:"remove-component"})),o||(e.components("",t),e.components().removeChildren(e,void 0,t))},f=Ge({},t);return[this,r].map(function(d){return d.trigger("component:remove:before",e,l,f)}),!f.abort&&l(),this},n.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var r=e.at,o=this.index(),l=t===this.parent(),f=o===r||o===r-1;(!l||!f)&&(l&&r&&r>o&&(e.at=r-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},n.prototype.isInstanceOf=function(t){var e,r,o=(r=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||r===void 0?void 0:r.model;return o?this instanceof o:!1},n.prototype.isChildOf=function(t){for(var e=(0,w.isString)(t),r=this.parent();r;){if(e){if(r.isInstanceOf(t))return!0}else if(r===t)return!0;r=r.parent()}return!1},n.prototype.resetId=function(t){var e=this.em,r=this.getId();if(!r)return this;var o=n.createId(this);this.setId(o);var l=e==null?void 0:e.Css.getIdRule(r),f=l==null?void 0:l.get("selectors").at(0);return f==null||f.set("name",o),this},n.prototype._getStyleRule=function(t){var e=t===void 0?{}:t,r=e.id,o=this.em,l=r||this.getId();return o==null?void 0:o.Css.getIdRule(l)},n.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},n.prototype._idUpdated=function(t,e,r){if(r===void 0&&(r={}),!r.idUpdate){var o=this.ccid,l=(this.get("attributes")||{}).id,f=(this.previous("attributes")||{}).id||o,d=n.getList(this);if(d[l]||!l&&f)return this.setId(f,{idUpdate:!0});delete d[f],d[l]=this,this.ccid=l;var h=this._getStyleSelector({id:f});h&&h.set({name:l,label:l})}},n.getDefaults=function(){return(0,w.result)(this.prototype,"defaults")},n.isComponent=function(t){return{tagName:(0,Y.toLowerCase)(t.tagName)}},n.ensureInList=function(t){var e=n.getList(t),r=t.getId(),o=e[r];if(!o)e[r]=t;else if(o!==t){var l=n.getIncrementId(r,e);t.setId(l),e[l]=t}t.components().forEach(function(f){return n.ensureInList(f)})},n.createId=function(t,e){e===void 0&&(e={});var r=n.getList(t),o=e.idMap,l=o===void 0?{}:o,f=t.get("attributes").id,d;return f?(d=n.getIncrementId(f,r,e),t.setId(d),f!==d&&(l[f]=d)):d=n.getNewId(r),r[d]=t,d},n.getNewId=function(t){for(var e=Object.keys(t).length,r=e.toString().length+2,o=(Math.random()+1.1).toString(36).slice(-r),l="i".concat(o);t[l];)l=n.getNewId(t);return l},n.getIncrementId=function(t,e,r){r===void 0&&(r={});var o=r.keepIds,l=o===void 0?[]:o,f=1,d=t;if(l.indexOf(t)<0)for(;e[d];)f++,d="".concat(t,"-").concat(f);return d},n.getList=function(t){var e=t.opt,r=e===void 0?{}:e,o=r.domc,l=r.em,f=o||(l==null?void 0:l.Components);return f?f.componentsById:{}},n.checkId=function(t,e,r,o){e===void 0&&(e=[]),r===void 0&&(r={}),o===void 0&&(o={});var l=(0,w.isArray)(t)?t:[t],f=o.keepIds,d=f===void 0?[]:f,h=o.idMap,g=h===void 0?{}:h;l.forEach(function(y){y.attributes;var b=y.attributes,k=b===void 0?{}:b,V=y.components,$=k.id;if($&&r[$]&&d.indexOf($)<0){var Q=n.getIncrementId($,r);g[$]=Q,k.id=Q,(0,w.isArray)(e)&&e.forEach(function(vt){var Mt=vt.selectors;Mt.forEach(function(kt,Gt){kt==="#".concat($)&&(Mt[Gt]="#".concat(Q))})})}V&&n.checkId(V,e,r,o)})},n}(No);const qr=Us;var Ra=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ei=function(){return Ei=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ei.apply(this,arguments)},Na=function(a){Ra(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ei(Ei({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var t=this.content,e=this.parent();return e!=null&&e.is("script")?t:this.__escapeContent(t)},n.prototype.__escapeContent=function(t){return(0,Y.escapeNodeContent)(t)},n.isComponent=function(t){var e;if(t.nodeType===3)return{type:"textnode",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(qr);const Pi=Na;var mo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oa=function(){return oa=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},oa.apply(this,arguments)},Fa=function(a){mo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return oa({},a.prototype.defaults)},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){return"<!--".concat(this.content,"-->")},n.isComponent=function(t){var e;if(t.nodeType==8)return{type:"comment",content:(e=t.textContent)!==null&&e!==void 0?e:""}},n}(Pi);const Go=Fa;var Vn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yr=function(){return yr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yr.apply(this,arguments)},ia="iframe",Ha=function(a){Vn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return yr(yr({},a.prototype.defaults),{type:ia,tagName:ia,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===ia},n}(qr);const Eo=Ha;var zs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),co=function(){return co=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},co.apply(this,arguments)},Ba='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',aa=function(a){zs(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return co(co({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(Ba,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(Ba,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("attributes").src;r&&(0,Y.buildBase64UrlFromSvg)((0,w.result)(this,"defaults").src)!==r&&this.set("src",r,{silent:!0})},n.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e=t.Commands,r="image-editor";if(e.has(r)){for(var o=!1,l=this.get("toolbar"),f=0;f<l.length;f++)if(l[f].command==="image-editor"){o=!0;break}o||(l.push({attributes:{class:"fa fa-pencil"},command:r}),this.set("toolbar",l))}}},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},n.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",r=e;return e&&e.substr(0,4)==="<svg"&&(r=(0,Y.buildBase64UrlFromSvg)(e)),r},n.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,w.result)(this,"defaults").src;return t===e||t===(0,Y.buildBase64UrlFromSvg)(e)},n.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),r=e.attributes;return r&&e.src===r.src&&delete e.src,e},n.prototype.parseUri=function(t){var e={},r=function(o){o===void 0&&(o="");for(var l={},f=o.substring(1).split("&"),d=0;d<f.length;d++){var h=f[d].split("="),g=decodeURIComponent(h[0]);g&&(l[g]=decodeURIComponent(h[1]||""))}return l};if((0,Y.hasWin)())e=document.createElement("a"),e.href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:r(e.search)}},n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)==="img"},n}(qr);const yo=aa;var Ws=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ai=function(){return Ai=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ai.apply(this,arguments)},Ua=function(a){Ws(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ai(Ai({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e),this.__checkInnerChilds()},n.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var e=function(r){r.isInstanceOf("textnode")||r.set({locked:!0,layerable:!1})};(0,w.isFunction)(t)?this.forEachChild(function(r){t(r)&&e(r)}):this.forEachChild(e)}},n}(qr);const ki=Ua;var za=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jn=function(){return Jn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Jn.apply(this,arguments)},Rn="label",$o=function(a){za(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Jn(Jn({},a.prototype.defaults),{type:Rn,tagName:Rn,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===Rn},n}(ki);const Wa=$o;var S=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),I=function(){return I=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},I.apply(this,arguments)},it="link",ut=function(a){S(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return I(I({},a.prototype.defaults),{type:it,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){e===void 0&&(e={});var r;if((0,Y.toLowerCase)(t.tagName)==="a"){var o=e.textTags||[];r={type:it,editable:!1};var l=t.childNodes,f=l.length;f||delete r.editable,(0,w.forEach)(l,function(d){var h=d.tagName;(d.nodeType==3&&d.textContent.trim()!==""||h&&o.indexOf((0,Y.toLowerCase)(h))>=0)&&delete r.editable})}return r},n}(ki);const Ot=ut;var _t=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bt=function(){return Bt=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Bt.apply(this,arguments)},ce=function(a){_t(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return Bt(Bt({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){this.get("src")?this.parseFromSrc():this.updateSrc(),a.prototype.initialize.call(this,t,e),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},n.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},n.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),r=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",r=r?"&t="+r:"";var o=this.get("mapUrl")+"?"+t+e+r;return o+="&output=embed",o},n.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")),e=t.query;e.q&&this.set("address",e.q),e.z&&this.set("zoom",e.z),e.t&&this.set("mapType",e.t)},n.isComponent=function(t){if((0,Y.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},n}(yo);const We=ce;var Ie=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lr=function(){return lr=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},lr.apply(this,arguments)},Fr="script",Ka=function(a){Ie(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return lr(lr({},a.prototype.defaults),{type:Fr,tagName:Fr,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===Fr},n}(qr);const Ks=Ka;var Af=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gs=function(){return Gs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gs.apply(this,arguments)},$s="svg",Bu=function(a){Af(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Gs(Gs({},a.prototype.defaults),{type:$s,tagName:$s,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===$s},n}(qr);const sa=Bu;var Uu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ga=function(){return Ga=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ga.apply(this,arguments)},Ml=function(a){Uu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Ga(Ga({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},n}(sa);const qs=Ml;var zu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mi=function(){return Mi=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Mi.apply(this,arguments)},Nn="table",Wu=function(a){zu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Mi(Mi({},a.prototype.defaults),{type:Nn,tagName:Nn,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("components");!r.length&&r.add({type:"tbody"})},n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===Nn},n}(qr);const Ll=Wu;var Dl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$a=function(){return $a=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},$a.apply(this,arguments)},Ys="tbody",jl=function(a){Dl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return $a($a({},a.prototype.defaults),{type:Ys,tagName:Ys,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var r=this.get("components"),o=this.get("columns"),l=this.get("rows");if(!r.length){for(var f=[];l--;){for(var d=[],h=o;h--;)d.push({type:"cell",classes:["cell"]});f.push({type:"row",classes:["row"],components:d})}r.add(f)}},n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===Ys},n}(qr);const Il=jl;var kf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xs=function(){return Xs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Xs.apply(this,arguments)},Li=function(a){kf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Xs(Xs({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return["td","th"].indexOf((0,Y.toLowerCase)(t.tagName))>=0},n}(qr);const la=Li;var ua=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ca=function(){return ca=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ca.apply(this,arguments)},qa="tfoot",Ku=function(a){ua(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ca(ca({},a.prototype.defaults),{type:qa,tagName:qa})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===qa},n}(Il);const Vl=Ku;var Di=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_o=function(){return _o=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},_o.apply(this,arguments)},rn="thead",qo=function(a){Di(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return _o(_o({},a.prototype.defaults),{type:rn,tagName:rn})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===rn},n}(Il);const Yo=qo;var Zs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Js=function(){return Js=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Js.apply(this,arguments)},Rl="tr",Ya=function(a){Zs(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return Js(Js({},a.prototype.defaults),{tagName:Rl,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,Y.toLowerCase)(t.tagName)===Rl},n}(qr);const Gu=Ya;var Nl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ji=function(){return ji=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ji.apply(this,arguments)},Fl="video",Xo="yt",Ii="vi",Zo="ytnc",Qs="so",Jo=function(a){return a&&a!=="0"},tl=function(a){Nl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return ji(ji({},a.prototype.defaults),{type:Fl,tagName:Fl,videoId:"",void:!1,provider:Qs,ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){this.em=e.em,this.get("src")&&this.parseFromSrc(),this.updatePropsFromAttr(),this.updateTraits(),this.on("change:provider",this.updateTraits),this.on("change:videoId change:provider",this.updateSrc),a.prototype.initialize.call(this,t,e)},n.prototype.updatePropsFromAttr=function(){if(this.get("provider")===Qs){var t=this.get("attributes"),e=t.controls,r=t.autoplay,o=t.loop,l={};(0,Y.isDef)(e)&&(l.controls=!!e),(0,Y.isDef)(r)&&(l.autoplay=!!r),(0,Y.isDef)(o)&&(l.loop=!!o),(0,Y.isEmptyObj)(l)||this.set(l)}},n.prototype.updateTraits=function(){var t=this.em,e=this.get("provider"),r="iframe",o;switch(e){case Xo:case Zo:o=this.getYoutubeTraits();break;case Ii:o=this.getVimeoTraits();break;default:r="video",o=this.getSourceTraits()}this.set({tagName:r},{silent:!0}),this.set({traits:o}),t.get("ready")&&t.trigger("component:toggled")},n.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),r=e.query;switch(t){case Xo:case Zo:case Ii:this.set("videoId",e.pathname.split("/").pop()),r.list&&this.set("list",r.list),Jo(r.autoplay)&&this.set("autoplay",!0),Jo(r.loop)&&this.set("loop",!0),parseInt(r.controls)===0&&this.set("controls",!1),Jo(r.color)&&this.set("color",r.color),r.rel==="0"&&this.set("rel",0),r.modestbranding==="1"&&this.set("modestbranding",1);break}},n.prototype.updateSrc=function(){var t=this.get("provider"),e="";switch(t){case Xo:e=this.getYoutubeSrc();break;case Zo:e=this.getYoutubeNoCookieSrc();break;case Ii:e=this.getVimeoSrc();break}this.set({src:e})},n.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.get("provider");switch(e){case Xo:case Zo:case Ii:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls")}return t},n.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:Xo,name:"Youtube"},{value:Zo,name:"Youtube (no cookie)"},{value:Ii,name:"Vimeo"}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},n.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},n.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),r=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=r?"&list=".concat(r):"",e+=this.get("autoplay")?"&autoplay=1&mute=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":"",e},n.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl")),t},n.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1&muted=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):"",t},n.isComponent=function(t){var e=t.tagName,r=t.src,o=/youtube\.com\/embed/.test(r),l=/youtube-nocookie\.com\/embed/.test(r),f=/player\.vimeo\.com\/video/.test(r),d=o||l||f;if((0,Y.toLowerCase)(e)==Fl||(0,Y.toLowerCase)(e)=="iframe"&&d){var h={type:"video"};return r&&(h.src=r),d&&(o?h.provider=Xo:l?h.provider=Zo:f&&(h.provider=Ii)),h}},n}(yo);const $u=tl;var el=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rl=function(){return rl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},rl.apply(this,arguments)},Mf=function(a){el(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"defaults",{get:function(){return rl(rl({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),n.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},n.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},n.isComponent=function(){return!1},n}(qr);const Lf=Mf;var Hl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bl=function(a){Hl(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=Hr,t}return n.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},n.prototype.removeChildren=function(t,e,r){var o=this;r===void 0&&(r={}),t.views.forEach(function(f){if(f){var d=f.childrenView,h=f.scriptContainer;d&&d.stopListening(),(0,Xt.L_)(h),f.remove.apply(f)}});var l=t.components();l.forEach(function(f){return o.removeChildren(f,e,r)})},n.prototype.addTo=function(t,e,r){r===void 0&&(r={});var o=this.em,l=this.collection.indexOf(t);if(this.addToCollection(t,null,l),o&&!r.temporary){var f=function(d){o.trigger("component:add",d),d.components().forEach(function(h){return f(h)})};f(t)}},n.prototype.addToCollection=function(t,e,r){for(var o=this,l=o.config,f=o.opts,d=o.em,h=e||null,g=l.frameView,y=(g==null?void 0:g.model)&&t.getView(g.model),b=f.componentTypes||(d==null?void 0:d.Components.getTypes()),k=t.get("type")||"default",V=this.compView,$=0;$<b.length;$++)if(b[$].id==k){V=b[$].view;break}var Q=y||new V({model:t,config:l,componentTypes:b}),vt;try{vt=Q.render().el}catch(fe){vt=document.createTextNode(""),d.logError(fe)}if(h)h.appendChild(vt);else{var Mt=this.parentEl,kt=Mt.childNodes;if((0,w.isUndefined)(r))Mt.appendChild(vt);else{var Gt=kt.length==r;Gt&&r--,Gt||!kt.length?Mt.appendChild(vt):Mt.insertBefore(vt,kt[r])}}return t.opt.temporary||d==null||d.trigger("component:mount",t),vt},n.prototype.resetChildren=function(t,e){var r=this,o=e===void 0?{}:e,l=o.previousModels,f=l===void 0?[]:l;this.parentEl.innerHTML="",f.forEach(function(d){return r.removeChildren(d,r.collection)}),t.each(function(d){return r.addToCollection(d)})},n.prototype.render=function(t){var e=this,r=this.el,o=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,o)}),r.innerHTML="",r.appendChild(o),this},n}(x.G7);const Vi=Bl;var Xa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Po=function(){return Po=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Po.apply(this,arguments)},nl=function(a){Xa(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.className=function(){return this.getClasses()},n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.preinitialize=function(t){t===void 0&&(t={}),this.opts=t},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{},o=r.em,l=e.opt||{},f=this,d=f.$el,h=f.el;this.opts=t,this.modelOpt=l,this.config=r,this.em=o,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),d.data("model",e),(0,Y.setViewEl)(h,this),e.view=this,this.frameView&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Po(Po({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},Object.defineProperty(n.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createDoc",{get:function(){var t,e,r=((t=this.frameView)===null||t===void 0?void 0:t.getDoc())||document;return!((e=this.opts.config)===null||e===void 0)&&e.useFrameDoc?r:document},enumerable:!1,configurable:!0}),n.prototype.__isDraggable=function(){var t=this,e=t.model,r=t.config,o=e.attributes.draggable;return r.draggableComponents&&o},n.prototype._clbObj=function(){var t=this,e=t.em,r=t.model,o=t.el;return{editor:e==null?void 0:e.getEditor(),model:r,el:o}},n.prototype.init=function(t){},n.prototype.removed=function(t){},n.prototype.onRender=function(t){},n.prototype.onActive=function(t){},n.prototype.onDisable=function(t){},n.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this,r=e.model,o=e.$el,l=r.views,f=this.frameView||{};return r.components().forEach(function(d){var h=d.getView(f.model);h==null||h.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),l.splice(l.indexOf(this),1),this.removed(this._clbObj()),o.data({model:"",collection:"",view:""}),this},n.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},n.prototype.initClasses=function(){var t=this.model,e=t.classes,r="change:classes";e instanceof ao&&(this.stopListening(t,r,this.initClasses),this.listenTo(t,r,this.initClasses),this.listenTo(e,"add remove change reset",this.updateClasses),e.length&&this.importClasses())},n.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,r=e.model,o=e.$el,l=e.childrenView,f="change:components",d=r.get("components"),h=[r,f,this.initComponents];d instanceof Xn&&(o.data("collection",d),l&&l.remove(),this.stopListening.apply(this,h),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,h))},n.prototype.handleChange=function(){var t=this.model,e=(0,w.keys)(t.changed);if(!(e.length===1&&e[0]==="status")){t.emitUpdate();for(var r in t.changed)t.emitUpdate(r)}},n.prototype.importClasses=function(){var t=this,e=t.em,r=t.model,o=e.Selectors;o&&r.classes.forEach(function(l){return o.add(l.getName())})},n.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.el,l=e.ppfx,f=e.model,d=r==null?void 0:r.Canvas,h=d==null?void 0:d.config.extHl,g=f.get("status"),y="".concat(l,"selected"),b="".concat(y,"-parent"),k="".concat(l,"freezed"),V="".concat(l,"hovered"),$="".concat(l,"no-pointer"),Q="".concat(l,"pointer-init"),vt=[y,b,k,V,$],Mt=h&&!t.noExtHl?"":y;this.$el.removeClass(vt.join(" "));var kt=o.getAttribute("class")||"",Gt=[kt],fe=!(d!=null&&d.hasCustomSpot(Te.q.Select)),Oe=!(d!=null&&d.hasCustomSpot(Te.q.Target));switch(g){case"selected":fe&&Gt.push(Mt);break;case"selected-parent":Oe&&Gt.push(b);break;case"freezed":Gt.push(k);break;case"freezed-selected":Gt.push(k),fe&&Gt.push(Mt);break;case"hovered":!t.avoidHover&&Gt.push(V);break}(0,w.isBoolean)(f.locked)&&Gt.push(f.locked?$:Q);var Ve=Gt.filter(Boolean).join(" ");Ve&&o.setAttribute("class",Ve)},n.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),r=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",r?!0:"")},n.prototype.updateStyle=function(t,e,r){r===void 0&&(r={});var o=this,l=o.model,f=o.em;if(Wo(f)&&!r.inline){var d=this.__cmpStyleOpts,h=l.getStyle(d);!(0,w.isEmpty)(h)&&l.setStyle(h,d)}else this.setAttribute("style",l.styleToString(r))},n.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},n.prototype.setAttribute=function(t,e){var r=this.$el;e?r.attr(t,e):r.removeAttr(t)},n.prototype.getClasses=function(){return this.model.getClasses().join(" ")},n.prototype.updateAttributes=function(){var t=[],e=this,r=e.model,o=e.$el,l=e.el,f=r.attributes,d=f.textable,h=f.type,g=Po(Po({id:r.getId(),"data-gjs-type":h||"default"},this.__isDraggable()&&{draggable:!0}),d&&{contenteditable:"false"});(0,w.each)(l.attributes,function(b){return t.push(b.nodeName)}),t.forEach(function(b){return o.removeAttr(b)}),this.updateStyle(),this.updateHighlight();var y=Po(Po({},g),r.getAttributes());(0,w.keys)(y).forEach(function(b){return y[b]===!1&&delete y[b]}),o.attr(y)},n.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},n.prototype.prevDef=function(t){t.preventDefault()},n.prototype.updateScript=function(){var t=this,e=t.model,r=t.em;e.get("script")&&(r==null||r.Canvas.getCanvasView().updateScript(this))},n.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},n.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,r=0,o=0,l=function(f){var d=f.offsetParent;d?(r+=d.offsetTop,o+=d.offsetLeft,l(d)):(t.top=e.offsetTop+r,t.left=e.offsetLeft+o,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},n.prototype.isInViewport=function(){var t=this,e=t.el,r=t.em,o=t.frameView,l=r.Canvas.getCanvasView(),f=l.getElBoxRect(e,{local:!0}),d=o.el,h=d.clientHeight,g=d.clientWidth,y=f.y,b=f.x,k=y+f.height,V=b+f.width,$=y>=0&&y<h,Q=k>0&&k<h,vt=V>=0&&V<g,Mt=b>0&&b<=g,kt=($||Q)&&(vt||Mt);return kt},n.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var r=this.isInViewport();if(!r||t.force){var o=this.el;if(t.behavior!=="smooth"){var l=this.getOffsetRect();(e=o.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,l.top)}else o.scrollIntoView(Po({behavior:"smooth",block:"nearest"},t))}},n.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,Xt.dL)(t,this.el),this.render()},n.prototype._setData=function(){var t=this.model,e=t.components(),r=this;this.$el.data({model:t,collection:e,view:r})},n.prototype._createElement=function(t){return this.createDoc.createElement(t)},n.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new Vi({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var r=Array.prototype.slice.call(e.el.childNodes),o=0,l=r.length;o<l;o++)t.appendChild(r.shift())},n.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},n.prototype.onAttrUpdate=function(){},n.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary?this:(this.renderChildren(),this.updateScript(),(0,Y.setViewEl)(this.el,this),this.postRender(),this)},n.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},n.getEvents=function(){return(0,w.result)(this.prototype,"events")},n}(x.G7);const Hr=nl;var Za=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qu=function(a){Za(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._setAttributes=function(){},n.prototype.renderAttributes=function(){},n.prototype.updateStatus=function(){},n.prototype.updateClasses=function(){},n.prototype.setAttribute=function(){},n.prototype.updateAttributes=function(){},n.prototype.initClasses=function(){},n.prototype.initComponents=function(){},n.prototype.delegateEvents=function(){return this},n.prototype._createElement=function(){return document.createTextNode("")},n.prototype.render=function(){var t=this,e=t.model,r=t.el;return e.opt.temporary?this:(r.textContent=e.content,this)},n}(Hr);const Qo=qu;var Ja=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ri=function(a){Ja(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(){return document.createComment(this.model.content)},n}(Qo);const Qa=Ri;var fa=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yu=function(a){fa(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},n.prototype.updateSrc=function(){var t=(0,Xt.sE)(this.el,"iframe")[0];t&&(0,Xt.FW)(t,{src:this.__getSrc()})},n.prototype.render=function(){a.prototype.render.call(this);var t=(0,Xt.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},n.prototype.__getSrc=function(){return this.model.getAttributes().src||""},n}(Hr);const Xu=Yu;var Zu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Df=function(a){Zu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"img"},n.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this,e=t.model,r=t.em,o=e.get("file");if(o&&r){var l=r.Assets.FileUploader();l==null||l.uploadFile({dataTransfer:{files:[o]}},function(f){var d=f&&f.data&&f.data[0],h=d&&((0,w.isString)(d)?d:d.src);h&&e.set({src:h})}),e.set("file","")}}},n.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,r=t.classEmpty,o=t.model,l=o.getSrcResult()&&!o.isDefaultSrc(),f=l?"remove":"add";e.classList[f](r)},n.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.model,l=r==null?void 0:r.Assets;l&&o.get("editable")&&l.open({select:function(f,d){o.set({src:f.getSrc()}),d&&l.close()},target:o,types:["image"],accept:"image/*"})},n.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},n.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},n.prototype.noDrag=function(t){return t.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this,e=t.$el,r=t.model,o=e.attr("class")||"";return!r.get("src")&&e.attr("class","".concat(o," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(Hr);const Ao=Df;var Ni=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ts=function(){return ts=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ts.apply(this,arguments)},ol=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},il=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},jf=function(a){Ni(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,w.bindAll)(this,"disableEditing","onDisable");var e=this.model,r=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=r==null?void 0:r.RichTextEditor},n.prototype.updateContentText=function(t,e,r){r===void 0&&(r={}),!r.fromDisable&&this.disableEditing()},n.prototype.canActivate=function(){var t=this,e=t.model,r=t.rteEnabled,o=t.em,l=o==null?void 0:o.getEditing(),f=l===e,d=!0,h=!1,g;if((r||!e.get("editable")||f||(h=e.isChildOf("text")))&&(d=!1,h&&!e.get("textable"))){for(var y=e.parent();y&&!y.isInstanceOf("text");)y=y.parent();y&&y.get("editable")?g=y:d=!0}return{result:d,delegate:g}},n.prototype.onActive=function(t){var e,r;return ol(this,void 0,void 0,function(){var o,l,f,d,h,g,y,b,k;return il(this,function(V){switch(V.label){case 0:return o=this,l=o.rte,f=o.em,d=this.canActivate(),h=d.result,g=d.delegate,h?((r=t==null?void 0:t.stopPropagation)===null||r===void 0||r.call(t),y=this,[4,this.getContent()]):(g&&((e=t==null?void 0:t.stopPropagation)===null||e===void 0||e.call(t),f.setSelected(g),g.trigger("active",t)),[2]);case 1:if(y.lastContent=V.sent(),!l)return[3,5];V.label=2;case 2:return V.trys.push([2,4,,5]),b=this,[4,l.enable(this,this.activeRte,{event:t})];case 3:return b.activeRte=V.sent(),[3,5];case 4:return k=V.sent(),f.logError(k),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},n.prototype.onDisable=function(t){this.disableEditing(t)},n.prototype.disableEditing=function(t){return t===void 0&&(t={}),ol(this,void 0,void 0,function(){var e,r,o,l,f,d,h,g;return il(this,function(y){switch(y.label){case 0:if(e=this,r=e.model,o=e.rte,l=e.activeRte,f=e.em,d=r&&r.get("editable"),!o)return[3,8];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,o.disable(this,l,t)];case 2:return y.sent(),[3,4];case 3:return h=y.sent(),f.logError(h),[3,4];case 4:return g=d,g?[4,this.getContent()]:[3,6];case 5:g=y.sent()!==this.lastContent,y.label=6;case 6:return g?[4,this.syncContent(t)]:[3,8];case 7:y.sent(),this.lastContent="",y.label=8;case 8:return this.toggleEvents(),[2]}})})},n.prototype.getContent=function(){return ol(this,void 0,void 0,function(){var t,e,r,o;return il(this,function(l){switch(l.label){case 0:return t=this,e=t.rte,r=t.activeRte,o="",e?[4,e.getContent(this,r)]:[3,2];case 1:o=l.sent(),l.label=2;case 2:return[2,o]}})})},n.prototype.syncContent=function(t){return t===void 0&&(t={}),ol(this,void 0,void 0,function(){var e,r,o,l,f,d,h;return il(this,function(g){switch(g.label){case 0:return e=this,r=e.model,o=e.rte,l=e.rteEnabled,!l&&!t.force?[2]:[4,this.getContent()];case 1:return f=g.sent(),d=r.components(),h=ts({fromDisable:1},t),r.set("content","",h),o!=null&&o.customRte&&!o.customRte.parseContent?(d.length&&d.reset(void 0,ts(ts({},t),{keepIds:Dn(d)})),r.set("content",f,h)):d.resetFromString(f,t),[2]}})})},n.prototype.insertComponent=function(t,e){var r;e===void 0&&(e={});var o=this,l=o.model,f=o.el,d=f.ownerDocument,h=d.getSelection();if(h!=null&&h.rangeCount){var g=h.getRangeAt(0),y=g.startContainer,b=g.startOffset,k=(0,Y.getComponentModel)(y),V=[];if(k&&(!((r=k.is)===null||r===void 0)&&r.call(k,"textnode"))){var $=k.collection;$.forEach(function(Mt){if(Mt===k){var kt="textnode",Gt=e.useDomContent?y.textContent||"":Mt.content;V.push({type:kt,content:Gt.slice(0,b)}),V.push(t),V.push({type:kt,content:Gt.slice(b)})}else V.push(Mt)});var Q=V.filter(Boolean),vt=Q.indexOf(t);return $.reset(Q,e),$.at(vt)}}return l.append(t,e)},n.prototype.onInput=function(){var t=this.em,e="component",r=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(r,this.model)},n.prototype.disablePropagation=function(t){t.stopPropagation()},n.prototype.toggleEvents=function(t){var e=this,r=e.em,o=e.model,l=e.$el,f={on:Xt.on,off:Xt.S1},d=t?"on":"off";r.setEditing(t?this:!1),this.rteEnabled=!!t;var h=[this.el.ownerDocument,document];if(f.off(h,"mousedown",this.onDisable),f[d](h,"mousedown",this.onDisable),r[d]("toolbar:run:before",this.onDisable),o&&(o[d]("removed",this.onDisable),o.trigger("rte:".concat(t?"enable":"disable"))),l==null||l.off("mousedown",this.disablePropagation),l&&l[d]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var g=this.el;g;)g.draggable=!t,g=g.parentNode,g&&g.tagName=="BODY"&&(g=0)},n}(Hr);const Ju=jf;var If=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),An=function(a){If(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},n}(Ju);const Br=An;var fn=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ur=function(a){fn(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Br);const es=Ur;var Vf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),al=function(a){Vf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},n.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},n.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},n.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},n}(Ao);const Rf=al;var Nf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ff=function(a){Nf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"script"},n.prototype.events=function(){return{}},n}(Hr);const Ul=Ff;var Qu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zl=function(a){Qu(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},n}(Hr);const tc=zl;var Wl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kl=function(a){Wl(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Hr);const ec=Kl;var rc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gl=function(a){rc(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Hr);const nc=Gl;var rs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hf=function(a){rs(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Hr);const sl=Hf;var ko=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oc=function(a){ko(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Hr);const Bf=oc;var ic=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fn=function(a){ic(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Hr);const ur=Fn;var fo=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ti=function(a){fo(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{}},n}(Hr);const ei=ti;var ac=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$l=function(a){ac(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n.prototype.events=function(){return{}},n.prototype.initialize=function(){Hr.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],r=e.map(function(o){return"change:".concat(o)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,r,this.updateVideo)},n.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},n.prototype.updateSrc=function(){var t=this,e=t.model,r=t.videoEl;if(r){var o=e.get("provider"),l=e.get("src");switch(o){case"yt":l=e.getYoutubeSrc();break;case"ytnc":l=e.getYoutubeNoCookieSrc();break;case"vi":l=e.getVimeoSrc();break}r.src=l}},n.prototype.updateVideo=function(){var t=this,e=t.model,r=t.videoEl,o=e.get("provider");switch(o){case"yt":case"ytnc":case"vi":e.trigger("change:videoId");break;default:if(r){var l=r;l.loop=e.get("loop"),l.autoplay=e.get("autoplay"),l.controls=e.get("controls"),l.poster=e.get("poster")}}},n.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},n.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},n.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},n.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},n.prototype.render=function(){Hr.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},n}(Ao);const sc=$l;var Uf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ql=function(a){Uf(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.tagName=function(){return"div"},n}(Hr);const ns=ql;var lc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pn=function(){return pn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pn.apply(this,arguments)},ri=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},pa;(function(a){a[a.InvalidSource=0]="InvalidSource",a[a.SourceReject=1]="SourceReject",a[a.TargetReject=2]="TargetReject"})(pa||(pa={}));var uc=function(a){lc(n,a);function n(t){var e=a.call(this,t,"DomComponents",new Xn(void 0,{em:t}))||this;e.componentTypes=[{id:"cell",model:la,view:nc},{id:"row",model:Gu,view:ur},{id:"table",model:Ll,view:ei},{id:"thead",model:Yo,view:Bf},{id:"tbody",model:Il,view:ec},{id:"tfoot",model:Vl,view:sl},{id:"map",model:We,view:Rf},{id:"link",model:Ot,view:Br},{id:"label",model:Wa,view:es},{id:"video",model:$u,view:sc},{id:"image",model:yo,view:Ao},{id:"script",model:Ks,view:Ul},{id:"svg-in",model:qs,view:tc},{id:"svg",model:sa,view:tc},{id:"iframe",model:Eo,view:Xu},{id:"comment",model:Go,view:Qa},{id:"textnode",model:Pi,view:Qo},{id:"text",model:ki,view:Ju},{id:"wrapper",model:Lf,view:ns},{id:"default",model:qr,view:Hr}],e.componentsById={},e.Component=qr,e.Components=Xn,e.ComponentView=Hr,e.ComponentsView=Vi,e.storageKey="components",t&&(e.config.components=t.config.components||e.config.components);for(var r in O)r in e.config||(e.config[r]=O[r]);var o=e.config.pStylePrefix;if(o&&(e.config.stylePrefix=o+e.config.stylePrefix),t){t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var l=t.get("selected");t.listenTo(l,"add",function(f,d,h){return e.selectAdd(l.getComponent(f),h)}),t.listenTo(l,"remove",function(f,d,h){return e.selectRemove(l.getComponent(f),h)})}return e}return n.prototype.load=function(t){var e=this;return this.loadProjectData(t,{onResult:function(r){var o=e.getWrapper();if(o||(e.em.Pages.add({},{select:!0}),o=e.getWrapper()),(0,w.isArray)(r))r.length&&o.components(r);else{var l=r.components,f=l===void 0?[]:l,d=ri(r,["components"]);o.set(d),o.components(f)}}})},n.prototype.store=function(){return{}},n.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},n.prototype.getWrapper=function(){return this.getComponent()},n.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.components()},n.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},n.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},n.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(r){return r.remove(t)}),this},n.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},n.prototype.addType=function(t,e){var r=this.em,o=e.model,l=o===void 0?{}:o,f=e.view,d=f===void 0?{}:f,h=e.isComponent,g=e.extend,y=e.extendView,b=e.extendFn,k=b===void 0?[]:b,V=e.extendFnView,$=V===void 0?[]:V,Q=this.getType(t),vt=this.getType(g),Mt=this.getType(y),kt=vt||Q||this.getType("default"),Gt=kt.model,fe=Mt?Mt.view:kt.view,Oe=function(Ue,Ze,hr){return Ue.reduce(function(ae,ln){var qi=Ze[ln],Yi=hr.prototype[ln];return qi&&Yi&&(ae[ln]=function(){for(var ui=[],oo=0;oo<arguments.length;oo++)ui[oo]=arguments[oo];Yi.bind(this).apply(void 0,ui),qi.bind(this).apply(void 0,ui)}),ae},{})};if(typeof l=="object"){var Ve={defaults:l.defaults};delete l.defaults,e.model=Gt.extend(pn(pn({},l),Oe(k,l,Gt)),{isComponent:Q&&!vt&&!h?Gt.isComponent:h||function(){return 0}}),Object.defineProperty(e.model.prototype,"defaults",{get:function(){return pn(pn({},(0,w.result)(Gt.prototype,"defaults")||{}),(0,w.result)(Ve,"defaults")||{})}})}typeof d=="object"&&(e.view=fe.extend(pn(pn({},d),Oe($,d,fe)))),Q?(Q.model=e.model,Q.view=e.view):(e.id=t,this.componentTypes.unshift(e));var pe="component:type:".concat(Q?"update":"add");return r==null||r.trigger(pe,Q||e),this},n.prototype.getType=function(t){for(var e=this.componentTypes,r=0;r<e.length;r++){var o=e[r].id;if(o==t)return e[r]}},n.prototype.removeType=function(t){var e=this.componentTypes,r=this.getType(t);if(r){var o=e.indexOf(r);return e.splice(o,1),r}},n.prototype.getTypes=function(){return this.componentTypes},n.prototype.selectAdd=function(t,e){var r=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(o){return r.em.trigger(o,t,e)}))},n.prototype.selectRemove=function(t,e){var r=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(o){return r.em.trigger(o,t,e)}))},n.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),r=t.previous("componentHovered"),o="hovered";r&&r.get("status")==o&&r.set({status:"",state:""}),e&&(0,w.isEmpty)(e.get("status"))&&e.set("status",o)},n.prototype.getShallowWrapper=function(){var t=this,e=t.shallow,r=t.em;if(!e&&r){var o=r.shallow;if(!o)return;var l=o.Components;if(l.componentTypes=this.componentTypes,e=l.getWrapper(),e){var f=[Ti,Ko].join(" ");e.on(f,(0,w.debounce)(function(){return e==null?void 0:e.components("")},100))}this.shallow=e}return e},n.prototype.isComponent=function(t){return(0,Y.isComponent)(t)},n.prototype.canMove=function(t,e,r){var o={result:!1,reason:pa.InvalidSource,target:t,source:null};if(!e||!t)return o;var l=(0,Y.isComponent)(e)?e:null;if(!l){var f=this.getShallowWrapper();l=(f==null?void 0:f.append(e)[0])||null}if(o.source=l,!l)return o;var d=l.get("draggable");if((0,w.isFunction)(d))d=!!d(l,t,r);else{var h=t.getEl();d=(0,w.isArray)(d)?d.join(","):d,d=(0,w.isString)(d)?h==null?void 0:h.matches(d):d}if(!d)return pn(pn({},o),{reason:pa.SourceReject});var g=t.get("droppable");if((0,w.isFunction)(g))g=!!g(l,t,r);else if(g===!1&&t.isInstanceOf("text")&&l.get("textable"))g=!0;else{var h=l.getEl();g=(0,w.isArray)(g)?g.join(","):g,g=(0,w.isString)(g)?h==null?void 0:h.matches(g):g}var y=[t].concat(t.parents()).indexOf(l)>-1;return!g||y?pn(pn({},o),{reason:pa.TargetReject}):pn(pn({},o),{result:!0})},n.prototype.allById=function(){return this.componentsById},n.prototype.getById=function(t){return this.componentsById[t]||null},n.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(r){return e[r]&&e[r].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(r){return{}})},n}(Tt);const zf=uc;var ll={stylePrefix:"css-",rules:[]};const Yl=ll;var cc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wf=Number.MAX_VALUE,fc=function(a){var n=/(-?\d*\.?\d+)\w{0,}/.exec(a);return n?n[0]:""},Kf=function(a){cc(n,a);function n(){var t=a.call(this)||this;return(0,w.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return n.prototype.buildFromModel=function(t,e){var r=this;e===void 0&&(e={});var o="",l=this.em,f=l&&l.getConfig().avoidInlineStyle,d=t.styleToString(),h=t.classes;this.ids.push("#".concat(t.getId())),h.forEach(function(y){return r.compCls.push(y.getFullName())}),!f&&d&&(o="#".concat(t.getId(),"{").concat(d,"}"));var g=t.components();return g.forEach(function(y){return o+=r.buildFromModel(y,e)}),o},n.prototype.build=function(t,e){var r=this;e===void 0&&(e={});var o=e.json,l=e.em,f=e.cssc||(l==null?void 0:l.Css);this.em=l,this.compCls=[],this.ids=[],this.model=t;var d=[],h=t?this.buildFromModel(t,e):"",g=(0,w.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(f){var y=e.rules||f.getAll(),b={},k=[];e.onlyMatched&&t&&(0,Y.hasWin)()&&(y=this.matchedRules(t,y)),y.forEach(function(V){var $=V.getAtRule();if($){var Q=b[$];Q?Q.push(V):b[$]=[V];return}var vt=r.buildFromRule(V,k,e);o?d.push(vt):h+=vt}),this.sortMediaObject(b).forEach(function(V){var $="",Q=V.key,vt=V.value;vt.forEach(function(Mt){var kt=r.buildFromRule(Mt,k,e);Mt.get("singleAtRule")?h+="".concat(Q,"{").concat(kt,"}"):$+=kt,o&&d.push(kt)}),$&&(h+="".concat(Q,"{").concat($,"}"))}),l&&g&&y.remove&&y.remove(k)}return o?d.filter(function(V){return V}):h},n.prototype.buildFromRule=function(t,e,r){var o=this,l;r===void 0&&(r={});var f="",d=this.model,h=t.selectorsToString({skipAdd:1}),g=t.get("selectorsAdd"),y=t.get("singleAtRule"),b;if((l=t.get("selectors"))===null||l===void 0||l.forEach(function(V){var $=V.getFullName();(o.compCls.indexOf($)>=0||o.ids.indexOf($)>=0||r.keepUnusedStyles)&&(b=1)}),h&&b||g||y||!d){var k=t.getDeclaration({body:1});k&&(r.json?f=t:f+=k)}else e.push(t);return f},n.prototype.matchedRules=function(t,e){var r=this,o=t.getEl(),l=[];return e.forEach(function(f){try{f.selectorsToString().split(",").some(function(d){return o==null?void 0:o.matches(r.__cleanSelector(d))})&&l.push(f)}catch{}}),t.components().forEach(function(f){l=l.concat(r.matchedRules(f,e))}),l=l.filter(function(f,d){return l.indexOf(f)===d}),l},n.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):Wf},n.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var r=[];return(0,w.each)(t,function(o,l){return r.push({key:l,value:o})}),r.sort(function(o,l){var f=[o.key,l.key].every(function(g){return g.indexOf("min-width")!==-1}),d=f?o.key:l.key,h=f?l.key:o.key;return e.getQueryLength(d)-e.getQueryLength(h)})},n.prototype.sortRules=function(t,e){var r=function(d){return d.get("mediaText")||""},o=[r(t),r(e)].every(function(d){return d.indexOf("min-width")!==-1}),l=r(o?t:e),f=r(o?e:t);return this.getQueryLength(l)-this.getQueryLength(f)},n.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},n}(x.Hn);const Gf=Kf;var ul=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),da=function(){return da=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},da.apply(this,arguments)},$f=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Xl=((0,Y.hasWin)()?window:{}).CSS,pc=function(a){ul(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this;return r.config=t||{},r.opt=e,r.em=e.em,r.ensureSelectors(null,null,{}),r.on("change",r.__onChange),r}return n.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},n.prototype.__onChange=function(t,e){var r=this.em,o=this.changedAttributes();o&&!(0,Y.isEmptyObj)(o)&&(r==null||r.changesUp(e))},n.prototype.clone=function(){var t=da({},this.opt),e=da({},this.attributes);return e.selectors=this.get("selectors").map(function(r){return r.clone()}),new this.constructor(e,t)},n.prototype.ensureSelectors=function(t,e,r){var o=this.em,l=o==null?void 0:o.get("SelectorManager"),f=[this,"change:selectors",this.ensureSelectors],d=this.getSelectors();if(this.stopListening.apply(this,f),d.models&&(d=$f([],d.models,!0)),d=(0,w.isString)(d)?[d]:d,Array.isArray(d)){var h=d.filter(function(g){return g}).map(function(g){return l?l.add(g):g});d=new ao(h)}this.set("selectors",d,r),this.listenTo.apply(this,f)},n.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),r=t?"@".concat(t):e?"@media":"";return r+(e&&r?" ".concat(e):"")},n.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],r=this.get("state"),o=this.get("selectorsAdd"),l={escape:function(h){return Xl&&Xl.escape?Xl.escape(h):h}},f=this.get("selectors").getFullString(0,l),d=r&&!t.skipState?":".concat(r):"";return f&&e.push("".concat(f).concat(d)),o&&!t.skipAdd&&e.push(o),e.join(", ")},n.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",r=this.attributes.important,o=this.selectorsToString(t),l=this.styleToString(da({important:r},t)),f=this.get("singleAtRule");return(o||f)&&(l||t.allowEmpty)&&(e=f?l:"".concat(o,"{").concat(l,"}")),e},n.prototype.getDevice=function(){var t=this.em,e=this.attributes,r=e.atRuleType,o=e.mediaText,l=(t==null?void 0:t.get("DeviceManager").getDevices())||[],f=l.filter(function(d){return d.getWidthMedia()===""})[0];return r!=="media"||!o?f||null:l.filter(function(d){return d.getWidthMedia()===fc(o)})[0]||null},n.prototype.getState=function(){var t=this.em,e=this.get("state"),r=(t==null?void 0:t.get("SelectorManager").getStates())||[];return r.filter(function(o){return o.getName()===e})[0]||null},n.prototype.getComponent=function(){var t,e=this.getSelectors(),r=e.length==1&&e.at(0),o=r&&r.isId()&&r.get("name");return o&&((t=this.em)===null||t===void 0?void 0:t.Components.getById(o))||null},n.prototype.toCSS=function(t){t===void 0&&(t={});var e="",r=this.getAtRule(),o=this.getDeclaration(t);return(o||t.allowEmpty)&&(e=o),r&&e&&(e="".concat(r,"{").concat(e,"}")),e},n.prototype.toJSON=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=x.Hn.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,w.forEach)(l,function(f,d){o[d]===f&&delete o[d]}),delete o.style.__p,(0,w.isEmpty)(o.selectors)&&delete o.selectors,(0,w.isEmpty)(o.style)&&delete o.style}return o},n.prototype.compare=function(t,e,r,o){var l;o===void 0&&(o={});var f=e||"",d=r||"",h=o.selectorsAdd||"",g=o.atRuleType||"",y=!(0,w.isArray)(t)&&!t.models?[t]:t.models||t;d&&!g&&(g="media");var b=y.map(function(Q){return Q.getFullName()}),k=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(Q){return Q.getFullName()}),V=b.slice().sort(),$=k.slice().sort();return!(b.length!==k.length||!V.every(function(Q,vt){return Q===$[vt]})||this.get("state")!==f||this.get("mediaText")!==d||this.get("selectorsAdd")!==h||this.get("atRuleType")!==g)},n}(No);const Fi=pc;var Zl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),os=function(a){Zl(n,a);function n(t,e){var r=a.call(this,t)||this;return r.editor=e==null?void 0:e.em,setTimeout(function(){r.on("remove",r.onRemove),r.on("add",r.onAdd)}),r}return n.prototype.toJSON=function(t){var e=x.FE.prototype.toJSON.call(this,t);return e.filter(function(r){return r.style&&!r.shallow})},n.prototype.onAdd=function(t,e,r){t.ensureSelectors(t,e,r)},n.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,x.FE.prototype.add.apply(this,[t,e])},n}(x.FE);const dc=os;os.prototype.model=Fi;var Jl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ni=function(){return ni=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ni.apply(this,arguments)},qf=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},hc=function(a){Jl(n,a);function n(t){var e=a.call(this,t,"CssComposer",null,{},Yl)||this;e.Selectors=ao,e.storageKey="styles";var r=e.config,o=r.pStylePrefix;return o&&(r.stylePrefix=o+r.stylePrefix),r.rules=e.em.config.style||r.rules||"",e.rules=new dc([],r),e}return n.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},n.prototype.postLoad=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");e&&e.add(this.getAll())},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},n.prototype.add=function(t,e,r,o,l){o===void 0&&(o={}),l===void 0&&(l={});var f=e||"",d=r||"",h=ni({},o),g=this.get(t,f,d,h);return g&&g.config&&!g.config.singleAtRule||(h.state=f,h.mediaText=d,h.selectors=[],d&&!h.atRuleType&&(h.atRuleType="media"),g=new Fi(h,this.config),g.get("selectors").add(t,l),this.rules.add(g,l)),g},n.prototype.get=function(t,e,r,o){var l=t;if((0,w.isString)(t)){var f=this.em.Selectors,d=t.split(",")[0].trim(),h=this.em.Parser.parserCss.checkNode({selectors:d})[0];l=f.get(h.selectors)}return this.rules.find(function(g){return g.compare(l,e,r,o)})||null},n.prototype.getAll=function(){return this.rules},n.prototype.addCollection=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=this.em,l=[];(0,w.isString)(t)&&(t=o.Parser.parseCss(t));for(var f=t instanceof Array?t:[t],d=0,h=f.length;d<h;d++){var g=f[d]||{};if(g.selectors){var y=o==null?void 0:o.Selectors;y||console.warn("Selector Manager not found");for(var b=g.selectors,k=b instanceof Array?b:[b],V=[],$=0,Q=k.length;$<Q;$++){var vt=y.add(k[$]);V.push(vt)}var Mt=this.get(V,g.state,g.mediaText,g),kt=this.add(V,g.state,g.mediaText,g,e),Gt=!Mt||!e.avoidUpdateStyle,fe=g.style||{};if((0,Y.isObject)(r)&&kt.set(r,e),Gt){var Oe=e.extend?ni(ni({},kt.get("style")),fe):fe;kt.set("style",Oe,e)}l.push(kt)}}return l},n.prototype.addRules=function(t){return this.addCollection(t)},n.prototype.setRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.atRuleType,l=r.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],d=f.state,h=f.selectorsAdd,g=this.em.Selectors,y=g.add(f.selectors),b=this.add(y,d,l,{selectorsAdd:h,atRule:o});return r.addStyles?b.addStyle(e,r):b.setStyle(e,r),b},n.prototype.getRule=function(t,e){e===void 0&&(e={});var r=this.em,o=r.Selectors,l=r.Parser.parserCss.checkNode({selectors:t})[0],f=o.get(l.selectors),d=l.state,h=l.selectorsAdd,g=e.atRuleType,y=e.atRuleParams;return f?this.get(f,d,y,{selectorsAdd:h,atRuleType:g}):void 0},n.prototype.getRules=function(t){var e=this.getAll();if(!t)return qf([],e.models,!0);var r={sort:!0},o=(0,w.isString)(t)?t.split(",").map(function(f){return f.trim()}):t,l=e.filter(function(f){return o.indexOf(f.getSelectors().getFullString(null,r))>=0});return l},n.prototype.setIdRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.addOpts,l=o===void 0?{}:o,f=r.mediaText,d=r.state||"",h=(0,w.isUndefined)(f)?this.em.getCurrentMedia():f,g=this.em.Selectors,y=g.add({name:t,type:$r.TYPE_ID},l),b=this.add(y,d,h,{},l);return b.setStyle(e,ni(ni({},r),l)),b},n.prototype.getIdRule=function(t,e){e===void 0&&(e={});var r=e.mediaText,o=e.state||"",l=(0,w.isUndefined)(r)?this.em.getCurrentMedia():r,f=this.em.Selectors.get(t,$r.TYPE_ID);return f&&this.get(f,o,l)},n.prototype.setClassRule=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=r.state||"",l=r.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors,d=f.add({name:t,type:$r.TYPE_CLASS}),h=this.add(d,o,l);return h.setStyle(e,r),h},n.prototype.getClassRule=function(t,e){e===void 0&&(e={});var r=e.state||"",o=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,$r.TYPE_CLASS);return l&&this.get(l,r,o)},n.prototype.remove=function(t,e){var r=(0,w.isString)(t)?this.getRules(t):t,o=this.getAll().remove(r,e);return(0,w.isArray)(o)?o:[o]},n.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},n.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var r=e.state,o=e.mediaText,l=e.current;l&&(r=this.em.get("state")||"",o=this.em.getCurrentMedia());var f=t.getId(),d=this.getAll().filter(function(h){return!(0,w.isUndefined)(r)&&h.get("state")!==r||!(0,w.isUndefined)(o)&&h.get("mediaText")!==o?!1:h.getSelectorsString()==="#".concat(f)});return d},n.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new Co({collection:this.rules,config:this.config}),this.rulesView.render().el},n.prototype.checkId=function(t,e){e===void 0&&(e={});var r=e.idMap,o=r===void 0?{}:r,l=[];if(!Object.keys(o).length)return l;var f=Array.isArray(t)?t:[t];return f.forEach(function(d){var h=d.selectors;if(h&&h.length==1){var g=h[0];if((0,w.isString)(g)){if(g[0]==="#"){var y=g.substring(1),b=o[y];y&&b&&(h[0]="#".concat(b),l.push(d))}}else if(g.name&&g.type===$r.TYPE_ID){var b=o[g.name];b&&(g.name=b,l.push(d))}}}),l},n.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},n}(Tt);const nn=hc;var cl={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};const vc=cl;var gc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mc=function(a){gc(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},Object.defineProperty(n.prototype,"category",{get:function(){var t=this.get("category");return t instanceof go?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get("label")},n.prototype.getMedia=function(){return this.get("media")},n.prototype.getContent=function(){return this.get("content")},n.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,w.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},n}(x.Hn);const Hi=mc;var fl=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ql=function(a){fl(n,a);function n(t,e){var r=a.call(this,t)||this;return r.em=e.em,r.on("add",r.handleAdd),r}return n.prototype.getCategories=function(){return this.em.Blocks.getCategories()},n.prototype.handleAdd=function(t){this.initCategory(t)},n}(To);const is=Ql;Ql.prototype.model=Hi;var as;(function(a){a.add="block:add",a.remove="block:remove",a.removeBefore="block:remove:before",a.update="block:update",a.dragStart="block:drag:start",a.drag="block:drag",a.dragEnd="block:drag:stop",a.custom="block:custom",a.all="block"})(as||(as={}));var ha=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yc=function(a){ha(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,o=r.model;return r.em=e.em,r.config=e,r.endDrag=r.endDrag.bind(r),r.ppfx=e.pStylePrefix||"",r.listenTo(o,"destroy remove",r.remove),r.listenTo(o,"change",r.render),r}return n.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.handleClick=function(t){var e=this,r=e.config,o=e.model,l=e.em,f=o.get("onClick")||r.appendOnClick;if(l.trigger("block:click",o,t),f){if((0,w.isFunction)(f))return f(o,l==null?void 0:l.getEditor(),{event:t})}else return;var d=r.getSorter(),h=o.get("content"),g=l.getSelected();d.setDropContent(h);var y,b,k;if(g)if(b=d.validTarget(g.getEl(),h),b.valid)y=g;else{var V=g.parent();V&&(b=d.validTarget(V.getEl(),h),b.valid&&(y=V,k=V.components().indexOf(g)+1))}if(!y){var $=l.getWrapper();b=d.validTarget($.getEl(),h),b.valid&&(y=$)}var Q=y&&y.append(h,{at:k})[0];Q&&l.setSelected(Q,{scroll:1})},n.prototype.startDrag=function(t){var e=this,r=e.config,o=e.em,l=e.model,f=l.get("disable");if(!(t.button!==0||!r.getSorter||this.el.draggable||f)){o.refreshCanvas();var d=r.getSorter();d.__currentBlock=l,d.setDragHelper(this.el,t),d.setDropContent(this.model.get("content")),d.startSort(this.el),(0,Xt.on)(document,"mouseup",this.endDrag)}},n.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},n.prototype.handleDrag=function(t){this.__getModule().__drag(t)},n.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},n.prototype.endDrag=function(){(0,Xt.S1)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},n.prototype.render=function(){var t,e=this,r=e.em,o=e.el,l=e.$el,f=e.ppfx,d=e.model,h=d.get("disable"),g=d.get("attributes")||{},y=g.class||"",b="".concat(f,"block"),k=r&&r.t("blockManager.labels.".concat(d.id))||d.get("label"),V=d.get("render"),$=d.get("media"),Q=h?"".concat(b,"--disable"):"".concat(f,"four-color-h");l.attr(g),o.className="".concat(y," ").concat(b," ").concat(f,"one-bg ").concat(Q).trim(),o.innerHTML=`
      `.concat($?'<div class="'.concat(b,'__media">').concat($,"</div>"):"",`
      <div class="`).concat(b,'-label">').concat(k,`</div>
    `),o.title=g.title||((t=o.textContent)===null||t===void 0?void 0:t.trim()),o.setAttribute("draggable","".concat(!!((0,Y.hasDnd)(r)&&!h)));var vt=V&&V({el:o,model:d,className:b,prefix:f});return vt&&(o.innerHTML=vt),this},n}(x.G7);const pl=yc;var _c=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ss=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Yf=function(a){_c(n,a);function n(t,e,r){var o=a.call(this,t)||this;o.config=e;var l=e.pStylePrefix||"";return o.em=e.em,o.catName=r,o.pfx=l,o.caretR="fa fa-caret-right",o.caretD="fa fa-caret-down",o.iconClass="".concat(l,"caret-icon"),o.activeClass="".concat(l,"open"),o.className="".concat(l).concat(r,"-category"),o.listenTo(o.model,"change:open",o.updateVisibility),o.model.view=o,o}return n.prototype.events=function(){return{"click [data-title]":"toggle"}},n.prototype.template=function(t){var e=t.pfx,r=t.label,o=t.catName;return st(tu||(tu=ss([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,"",`s-c"></div>
    `])),e,e,r,e,o)},n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},n.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},n.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},n.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},n.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},n.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},n.prototype.append=function(t){this.getTypeEl().appendChild(t)},n.prototype.render=function(){var t=this,e=t.em,r=t.el,o=t.$el,l=t.model,f=t.pfx,d=t.catName,h=e.t("".concat(d,"Manager.categories.").concat(l.id))||l.get("label");return r.innerHTML=this.template({pfx:f,label:h,catName:d}),o.addClass(this.className),o.css({order:l.get("order")}),this.updateVisibility(),this},n}(x.G7);const Bi=Yf;var tu,wc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ls=function(){return ls=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ls.apply(this,arguments)},us=function(a){wc(n,a);function n(t,e){var r=a.call(this,t)||this;r.renderedCategories=new Map,(0,w.bindAll)(r,"getSorter","onDrag","onDrop","onMove"),r.config=e||{},r.categories=t.categories||"";var o=r.config.pStylePrefix||"";r.ppfx=o,r.noCatClass="".concat(o,"blocks-no-cat"),r.blockContClass="".concat(o,"blocks-c"),r.catsClass="".concat(o,"block-categories");var l=r.collection;return r.listenTo(l,"add",r.addTo),r.listenTo(l,"reset",r.render),r.em=r.config.em,r.em&&(r.config.getSorter=r.getSorter),r}return n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=ls(ls({},this.config),t)},n.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,r=t.Canvas;this.sorter=new e.Sorter({container:r.getBody(),placer:r.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:r.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},n.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},n.prototype.onMove=function(t){this.__getModule().__drag(t)},n.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},n.prototype.addTo=function(t){this.add(t)},n.prototype.add=function(t,e){var r=this,o=r.config,l=r.renderedCategories,f=t.get("attributes"),d=new pl({model:t,attributes:f},o),h=d.render().el,g=t.parent.initCategory(t);if(g&&this.categories&&!o.ignoreCategories){var y=g.getId(),b=this.getCategoriesEl(),k=l.get(y);!k&&b&&(k=new Bi({model:g},o,"block").render(),l.set(y,k),b.appendChild(k.el)),k==null||k.append(h);return}e?e.appendChild(h):this.append(h)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},n.prototype.render=function(){var t=this,e=this.ppfx,r=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,r)}),this.append(r);var o="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(o),this.rendered=!0,this},n}(x.G7);const va=us;var cs=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qn=function(){return Qn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Qn.apply(this,arguments)},bc=function(a){cs(n,a);function n(t){var e,r=a.call(this,t,"BlockManager",new is(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[],{em:t}),as,vc)||this;return r.events=as,r.Block=Hi,r.Blocks=is,r.Category=go,r.Categories=Si,r.storageKey="",r.blocks=r.all,r.blocksVisible=new is(r.blocks.models,{em:t}),r.categories=new Si,r.blocks.on("add",function(o){return r.blocksVisible.add(o)}),r.blocks.on("remove",function(o){return r.blocksVisible.remove(o)}),r.blocks.on("reset",function(o){return r.blocksVisible.reset(o.models)}),r.__onAllEvent=(0,w.debounce)(function(){return r.__trgCustom()},0),r}return n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(r,o){return t.startDrag(r,o)},drag:function(r){return t.__drag(r)},dragStop:function(r){return t.endDrag(r)}}},n.prototype.__startDrag=function(t,e){var r=this,o=r.em,l=r.events,f=r.blocks,d=t.getContent?t.getContent():t;this._dragBlock=t,o.set({dragResult:null,dragContent:d}),[o,f].map(function(h){return h.trigger(l.dragStart,t,e)})},n.prototype.__drag=function(t){var e=this,r=e.em,o=e.events,l=e.blocks,f=this._dragBlock;[r,l].map(function(d){return d.trigger(o.drag,f,t)})},n.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,l=e.blocks,f=this._dragBlock,d=t.component||r.get("dragResult");if(delete this._dragBlock,d&&f){var h="activeOnRender",g=d.get&&d.get(h),y=f.get("activate")||g,b=f.get("select"),k=(0,w.isArray)(d)?d[0]:d;(b||y&&b!==!1)&&r.setSelected(k),y&&(k.trigger("active"),g&&k.unset(h)),f.get("resetId")&&k.onAll(function(V){return V.resetId()})}r.set({dragResult:null,dragContent:null}),f&&[r,l].map(function(V){return V.trigger(o.dragEnd,d,f)})},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=Qn(Qn({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(r){var o;return(o=r.droppable)===null||o===void 0?void 0:o.startCustom()})},n.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){var r;return(r=e.droppable)===null||r===void 0?void 0:r.endCustom(t)}),this.__endDrag()},n.prototype.postRender=function(){var t=this,e=t.categories,r=t.config,o=t.em,l=this.blocksVisible;this.blocksView=new va({collection:l,categories:e},Qn(Qn({},r),{em:o})),this.__appendTo(l.models),this.__trgCustom()},n.prototype.add=function(t,e,r){r===void 0&&(r={});var o=e||{};return o.id=t,this.blocks.add(o,r)},n.prototype.get=function(t){return this.blocks.get(t)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.getBlocksByCategory=function(t){return ja(t||this.getAll().models)},n.prototype.render=function(t,e){e===void 0&&(e={});var r=this,o=r.categories,l=r.config,f=r.em,d=t||this.getAll().models;if(e.external){var h=new is(d,{em:f});return new va({collection:h,categories:o},Qn(Qn({em:f},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(d),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(r){return r.stopListening()}),e.map(function(r){return r.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},n}(Tt);const Xf=bc;var Cc={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};const oi=Cc;var ga=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ma=function(a){ga(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{name:"",label:""}},n.prototype.getName=function(){return this.get("name")},n.prototype.getLabel=function(){return this.get("label")||this.getName()},n}(x.Hn);const eu=ma;ma.prototype.idAttribute="name";var xc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zf=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Sc="contentEditable",Jf=function(a){xc(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.config||{};return e.config=r,e.module=t.module,e.coll=t.coll||null,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return n.prototype.template=function(){var t=this,e=t.pfx,r=t.model,o=t.config,l=r.get("label")||"";return st(ru||(ru=Zf([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,o.iconTagRemove)},n.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},n.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},n.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[Sc]="true",e.focus(),t==null||t.setEditing(!0)},n.prototype.endEditTag=function(){var t=this,e=t.model,r=t.em,o=this.getInputEl(),l=o.textContent||"",f=r==null?void 0:r.Selectors;o[Sc]="false",r==null||r.setEditing(!1),f&&f.rename(e,l)!==e&&(o.innerText=e.getLabel())},n.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.getActive())},n.prototype.removeTag=function(){this.module.removeSelected(this.model)},n.prototype.updateStatus=function(){var t=this,e=t.model,r=t.$el,o=t.config,l=o.iconTagOn,f=o.iconTagOff,d=r.find("[data-tag-status]");e.get("active")?(d.html(l),r.removeClass("opac50")):(d.html(f),r.addClass("opac50"))},n.prototype.render=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.$el,l=t.model,f="".concat(e,"tag"),d=["".concat(f," ").concat(r,"three-bg")];return l.get("protected")&&d.push("".concat(f,"-protected")),o.html(this.template()),o.attr("class",d.join(" ")),this.updateStatus(),this},n}(x.G7);const _n=Jf;var ru,Qf=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fs=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},tp=function(a){Qf(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var r=e.config.em,o=e.collection;e.target=r;var l=r.Selectors;e.module=l,e.em=r,e.componentChanged=(0,w.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,w.debounce)(e.checkSync.bind(e),0);var f="component:toggled component:update:classes",d="component:update:classes change:state";return e.listenTo(r,f,e.componentChanged),e.listenTo(r,"styleManager:update",e.componentChanged),e.listenTo(r,d,e.__handleStateChange),e.listenTo(r,"styleable:change change:device",e.checkSync),e.listenTo(o,"add",e.addNew),e.listenTo(o,"reset",e.renderClasses),e.listenTo(o,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,w.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.labelInfo,r=t.labelHead,o=t.iconSync,l=t.iconAdd,f=t.pfx,d=t.ppfx;return st(nu||(nu=fs([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),f,f,f,f,r,f,f,f,d,d,d,f,d,d,f,d,f,f,f,f,f,l,f,f,o,f,f,e,f)},n.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},n.prototype.syncStyle=function(){var t=this.em,e=this.getTarget(),r=t.Css,o={noDisabled:1},l=this.getCommonSelectors({opts:o}),f=t.get("state"),d=t.getCurrentMedia(),h=[],g=r.get(l,f,d)||r.add(l,f,d),y;this.getTargets().forEach(function(b){var k=r.getIdRule(b.getId(),{state:f,mediaText:d});y=k.getStyle(),k.setStyle({}),h.push(k)}),y&&g.addStyle(y),t.trigger("component:toggled"),t.trigger("component:sync-style",{component:e,selectors:l,mediaText:d,rule:g,ruleComponents:h,state:f})},n.prototype.tagRemoved=function(t){this.updateStateVis()},n.prototype.addNew=function(t){this.addToClasses(t)},n.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},n.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},n.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},n.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},n.prototype.componentChanged=function(t){var e=t===void 0?{}:t,r=e.targets;this.updateSelection(r)},n.prototype.updateSelection=function(t){var e=t||this.getTargets();e=(0,w.isArray)(e)?e:[e];var r=[];return e&&e.length&&(r=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:r})),this.collection.reset(r),this.updateStateVis(e),this.module.__trgCustom(),r},n.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,r=e.targets,o=e.opts,l=o===void 0?{}:o,f=r||this.getTargets();return this.module.__getCommonSelectors(f,l)},n.prototype._commonSelectors=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(t=this.module).__common.apply(t,e)},n.prototype.checkSync=function(){var t=this,e=t.$btnSyncEl,r=t.config,o=t.collection,l=this.getTarget(),f;if(l&&r.componentFirst&&o.length){var d=l.getStyle();f=!(0,w.isEmpty)(d)}e&&e[f?"show":"hide"]()},n.prototype.getTarget=function(){return this.target.getSelected()},n.prototype.getTargets=function(){return this.target.getSelectedAll()},n.prototype.updateStateVis=function(t){var e=this.em,r=e&&e.getConfig().avoidInlineStyle,o=this.collection.length||r?"":"none";this.getStatesC().css("display",o),this.updateSelector(t)},n.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},n.prototype.updateSelector=function(t){var e=this,r=this.el.querySelector("[data-selected]"),o=[],l=t||this.getTargets();l=(0,w.isArray)(l)?l:[l],l.forEach(function(f){return o.push(e.__getName(f))}),r&&(r.innerHTML=o.join(", ")),this.checkStates()},n.prototype.__getName=function(t){var e=this,r=e.pfx,o=e.config,l=e.em,f=o.selectedName,d=o.componentFirst,h;if((0,w.isString)(t))h=st(ou||(ou=fs(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),r,t);else{var g=t==null?void 0:t.getSelectors();if(!g)return"";var y=g.getStyleable(),b=l.get("state"),k=t.getId?st(Tc||(Tc=fs(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),r,t.getName(),r,t.getId()):"";h=this.collection.getFullString(y),h=h?st(Ec||(Ec=fs(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),r,h):t.get("selectorsAdd")||k,h=d&&k?k:h,h+=b?st(Pc||(Pc=fs(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),r,b):"",h=f?f({result:h,state:b,target:t}):h}return h&&'<span class="'.concat(r,'sel">').concat(h,"</span>")},n.prototype.stateChanged=function(t){var e=this.em,r=t.target.value;e.set("state",r)},n.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},n.prototype.addToClasses=function(t,e){var r=e,o=this.getClasses(),l=new _n({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return r?r.appendChild(l):o.append(l),l},n.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),r=this.getClasses();r.empty(),this.collection.each(function(o){return t.addToClasses(o,e)}),r.append(e)},n.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},n.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},n.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},n.prototype.renderStates=function(){var t=this,e=t.module,r=t.em,o=r.t("selectorManager.emptyState"),l=e.getStates().map(function(d){var h=r.t("selectorManager.states.".concat(d.id))||d.getLabel()||d.id;return'<option value="'.concat(d.id,'">').concat(h,"</option>")}).join(""),f=this.getStates();f&&f.html('<option value="">'.concat(o,"</option>").concat(l)),this.checkStates()},n.prototype.render=function(){var t=this,e=t.em,r=t.pfx,o=t.ppfx,l=t.config,f=t.$el,d=t.el,h=l.render,g=l.iconSync,y=l.iconAdd,b={iconSync:g,iconAdd:y,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:o,pfx:r,el:d};f.html(this.template(b));var k=h&&h(b);return k&&k!==d&&f.empty().append(k),this.$input=f.find("[data-input]"),this.$addBtn=f.find("[data-add]"),this.$classes=f.find("#"+r+"tags-c"),this.$btnSyncEl=f.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),f.attr("class","".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},n}(x.G7);const Oc=tp;var nu,ou,Tc,Ec,Pc,ii=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mo=function(){return Mo=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Mo.apply(this,arguments)},ya=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},_a=function(a){return(0,w.isString)(a)&&a[0]=="#"},wo=function(a){return(0,w.isString)(a)&&a[0]=="."},Ac="selector",ps="".concat(Ac,":"),wa="".concat(ps,"add"),kc="".concat(ps,"update"),iu="".concat(ps,"remove"),Mc="".concat(iu,":before"),dl="".concat(ps,"custom"),Ui="".concat(ps,"state"),au={all:Ac,update:kc,add:wa,remove:iu,removeBefore:Mc,state:Ui,custom:dl},su=function(a){ii(n,a);function n(t){var e=a.call(this,t,"SelectorManager",new ao([]),au,oi,{skipListen:!0})||this;e.Selector=$r,e.Selectors=ao,e.storageKey="",(0,w.bindAll)(e,"__updateSelectedByComponents");var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.all=new ao(r.selectors),e.selected=new ao([],{em:t,config:r}),e.states=new x.FE(r.states.map(function(f){return new eu(f)}),{model:eu}),e.model=new x.Hn({cFirst:r.componentFirst,_undo:!0}),e.__update=(0,w.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(f,d){return t.trigger(Ui,d)}),e.model.on("change:cFirst",function(f,d){return t.trigger("selector:type",d)}),t.on("component:toggled component:update:classes",e.__updateSelectedByComponents);var l="component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target";return e.model.listenTo(t,l,function(){return e.__update()}),e}return n.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},n.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?ya([],this.all.models,!0):this.all:[]},n.prototype.__customData=function(t){return t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},n.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},n.prototype.select=function(t,e){e===void 0&&(e={});var r=Array.isArray(t)?t:[t],o=this.em.Styles.select(r,e);this.selected.reset(this.__getCommonSelectors(o));var l=this.selectorTags,f=o.filter(function(d){return d}).map(function(d){return(0,Y.isComponent)(d)||(0,Y.isRule)(d)&&!d.get("selectorsAdd")?d:d.getSelectorsString()});return l&&l.componentChanged({targets:f}),this},n.prototype.addSelector=function(t,e,r){e===void 0&&(e={}),r===void 0&&(r={});var o=Mo({},e);(0,w.isObject)(t)?o=t:o.name=t,_a(o.name)?(o.name=o.name.substr(1),o.type=$r.TYPE_ID):wo(o.name)&&(o.name=o.name.substr(1)),o.label&&!o.name&&(o.name=this.escapeName(o.label));var l=o.name,f=this.getConfig(),d=this,h=d.all,g=d.em,y=l?this.get(l,o.type):h.where(o)[0];if(!y){var b=o instanceof $r?o:new $r(o,Mo(Mo({},r),{config:f,em:g}));return h.add(b,r)}return y},n.prototype.getSelector=function(t,e){return e===void 0&&(e=$r.TYPE_CLASS),_a(t)?(t=t.substr(1),e=$r.TYPE_ID):wo(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var o=(0,w.isString)(t)?{}:e;return(0,w.isArray)(t)?t.map(function(l){return r.addSelector(l,e,o)}):this.addSelector(t,e,o)},n.prototype.addClass=function(t){var e=this,r=[];return(0,w.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(o){return r.push(e.addSelector(o))}),r},n.prototype.get=function(t,e){var r=this;if((0,w.isArray)(t)){var o=[],l=t.map(function(f){return r.getSelector(f)}).filter(Boolean);return l.forEach(function(f){return o.indexOf(f)<0&&o.push(f)}),o}else return this.getSelector(t,e)},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.rename=function(t,e,r){var o=this.escapeName(e),l=this.get(o);return l||t.set({name:o,label:e},r)},n.prototype.setState=function(t){return this.em.setState(t),this},n.prototype.getState=function(){return this.em.getState()},n.prototype.getStates=function(){return ya([],this.states.models,!0)},n.prototype.setStates=function(t,e){return this.states.reset(t.map(function(r){return new eu(r)}),e)},n.prototype.getSelected=function(){return this.__getCommon()},n.prototype.getSelectedAll=function(){return ya([],this.selected.models,!0)},n.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(r){r.getSelectors().add(e)})},n.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},n.prototype.duplicateSelected=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,l=this.getSelected();if(!(l.indexOf(t)<0)){var f=this.getState(),d=o.getCurrentMedia(),h=o.Css.get(l,f,d),g=h==null?void 0:h.getStyle();if(o.getSelectedAll().forEach(function(b){var k=b.getSelectors();if(k.includes(t)){var V=e.suffix||" copy",$=t.getLabel(),Q=r.addSelector("".concat($).concat(V)),vt=k.indexOf(t);k.remove(t),k.add(Q,{at:vt})}}),g){var y=o.Css.add(this.getSelected(),f,d);y.setStyle(g)}}},n.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},n.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},n.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},n.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):$r.escapeName(t)},n.prototype.render=function(t){var e=this.selectorTags,r=this.getConfig(),o=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new Oc({el:o,collection:this.selected,module:this,config:r}),this.selectorTags.render().el},n.prototype.destroy=function(){var t=this,e=t.selectorTags,r=t.model;r.stopListening(),this.__update.cancel(),this.__destroy(),e==null||e.remove(),this.selectorTags=void 0},n.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},n.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var r=t.map(function(o){return o.getSelectors&&o.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,r)},n.prototype.__common=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(o){return e[1].indexOf(o)>=0}):e.slice(1).reduce(function(o,l){return t.__common(o,l)},e[0]):[]},n.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},n}(Tt);const lu=su;var ep={textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1}};const ds=ep;var to,Hn={STYLE_RULE:1,CHARSET_RULE:2,IMPORT_RULE:3,MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,KEYFRAME_RULE:8,NAMESPACE_RULE:10,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15,REGION_STYLE_RULE:16},zi=(to={},to[Hn.MEDIA_RULE]="media",to[Hn.FONT_FACE_RULE]="font-face",to[Hn.PAGE_RULE]="page",to[Hn.KEYFRAMES_RULE]="keyframes",to[Hn.COUNTER_STYLE_RULE]="counter-style",to[Hn.SUPPORTS_RULE]="supports",to[Hn.DOCUMENT_RULE]="document",to[Hn.FONT_FEATURE_VALUES_RULE]="font-feature-values",to[Hn.VIEWPORT_RULE]="viewport",to),hs=(0,w.keys)(zi),uu=[Hn.FONT_FACE_RULE,Hn.PAGE_RULE,Hn.COUNTER_STYLE_RULE,Hn.VIEWPORT_RULE],rp=hs.filter(function(a){return uu.indexOf(Number(a))<0}).map(function(a){return zi[a]}).concat(["container","layer"]),vs=uu.map(function(a){return zi[a]}),cu=function(a){a===void 0&&(a="");for(var n=[],t=[],e=a.split(","),r=0,o=e.length;r<o;r++){var l=e[r].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var f=l.split(".").filter(Boolean);t.push(f)}else n.push(l)}return{result:t,add:n}},Lc=function(a){for(var n=a.style,t={},e=0,r=n.length;e<r;e++){var o=n[e],l=n.getPropertyValue(o),f=n.getPropertyPriority(o);t[o]="".concat(l).concat(f?" !".concat(f):"")}return t},Dc=function(a){var n=a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"";return n.trim()},gs=function(a,n,t){n===void 0&&(n={}),t===void 0&&(t={});var e={},r=a.length,o=a[r-1],l=o?o.split(/:(.+)/):[],f=l[1],d=t.atRule,h=t.selectorsAdd,g=t.mediaText,y=vs.indexOf(d)>=0;return y&&(e.singleAtRule=!0),d&&(e.atRuleType=d),h&&(e.selectorsAdd=h),g&&(e.mediaText=g),f&&(a[r-1]=l[0],e.state=f,l.splice(l.length-1,1)),e.selectors=a,e.style=n,e},fu=function(a){var n=a.cssText,t=n===void 0?"":n;return rp.find(function(e){return t.indexOf("@".concat(e))===0})},jc=function(a){for(var n=[],t=a.cssRules||[],e=0,r=t.length;e<r;e++){var o=t[e],l=o.type,f=!1,d="",h="",g=o.selectorText||o.keyText||"",y=uu.indexOf(l)>=0;if(y)f=!0,d=zi[l],h=Dc(o);else if(hs.indexOf("".concat(l))>=0||!l&&fu(o)){var b=jc(o),k=zi[l]||fu(o);h=Dc(o);for(var V=0,$=b.length;V<$;V++){var Q=b[V];h&&(Q.mediaText=h),Q.atRuleType=k}n=n.concat(b)}if(!(!g&&!y)){for(var vt=Lc(o),Mt=cu(g),kt=Mt.add,Gt=Mt.result,fe=void 0,Oe=0,Ve=Gt.length;Oe<Ve;Oe++){var pe=gs(Gt[Oe],vt,{atRule:zi[l]});n.push(pe),fe=pe}if(kt.length){var Ue=kt.join(", ");if(fe)fe.selectorsAdd=Ue;else{var pe={selectors:[],selectorsAdd:Ue,style:vt};f&&(pe.singleAtRule=f),d&&(pe.atRuleType=d),h&&(pe.mediaText=h),n.push(pe)}}}}return n};const Ic=function(a){var n=document.createElement("style");n.innerHTML=a,document.head.appendChild(n);var t=n.sheet;return document.head.removeChild(n),t?jc(t):[]};var Vc=function(a,n){return n===void 0&&(n={}),{parse:function(t){var e=this,r=[],o=n.parserCss,l=a==null?void 0:a.Editor,f=o?o(t,l):Ic(t);return f.forEach(function(d){return r=r.concat(e.checkNode(d))}),a==null||a.trigger("parse:css",{input:t,output:r,nodes:f}),r},checkNode:function(t){var e=t.selectors,r=t.style,o=[t];if((0,w.isString)(e)){var l=[],f=t,d=cu(e),h=d.result,g=d.add.join(", "),y={atRule:f.atRule,mediaText:f.params};if(h.length?h.forEach(function(k){l.push(gs(k,r,y))}):l.push(gs([],r,y)),g){var b=l[l.length-1];b.selectorsAdd=g}o=l}return o}}};const np=Vc;var pu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ms=function(a){pu(n,a);function n(t){var e=a.call(this,t,"Parser",ds)||this,r=e.config;return e.parserCss=np(t,r),e.parserHtml=gn(t,r),e}return n.prototype.parseHtml=function(t,e){e===void 0&&(e={});var r=this,o=r.em,l=r.parserHtml;return l.compTypes=o.Components.getTypes()||{},l.parse(t,this.parserCss,e)},n.prototype.parseCss=function(t){return this.parserCss.parse(t)},n.prototype.destroy=function(){},n}(jt);const ys=ms;var op={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}};const Rc=op;var Nc=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},Fc=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},ip=function(){function a(){}return a.prototype.store=function(n,t){return t===void 0&&(t={}),Nc(this,void 0,void 0,function(){return Fc(this,function(e){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(n)),[2,n]})})},a.prototype.load=function(n){return n===void 0&&(n={}),Nc(this,void 0,void 0,function(){var t;return Fc(this,function(e){return t={},this.hasLocal(n,!0)&&(t=JSON.parse(localStorage.getItem(n.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(n,t){if(n===void 0&&(n={}),n.checkLocal&&(!(0,Y.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();const ap=ip;function ai(a){"@babel/helpers - typeof";return ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ai(a)}function sp(a){var n=this.constructor;return this.then(function(t){return n.resolve(a()).then(function(){return t})},function(t){return n.resolve(a()).then(function(){return n.reject(t)})})}const lp=sp;function Hc(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError(ai(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(a);if(r.length===0)return t([]);var o=r.length;function l(d,h){if(h&&(ai(h)==="object"||typeof h=="function")){var g=h.then;if(typeof g=="function"){g.call(h,function(y){l(d,y)},function(y){r[d]={status:"rejected",reason:y},--o===0&&t(r)});return}}r[d]={status:"fulfilled",value:h},--o===0&&t(r)}for(var f=0;f<r.length;f++)l(f,r[f])})}const du=Hc;function hu(a,n){this.name="AggregateError",this.errors=a,this.message=n||""}hu.prototype=Error.prototype;function up(a){var n=this;return new n(function(t,e){if(!(a&&typeof a.length<"u"))return e(new TypeError("Promise.any accepts an array"));var r=Array.prototype.slice.call(a);if(r.length===0)return e();for(var o=[],l=0;l<r.length;l++)try{n.resolve(r[l]).then(t).catch(function(f){o.push(f),o.length===r.length&&e(new hu(o,"All promises were rejected"))})}catch(f){e(f)}})}const Bc=up;var ba=setTimeout;function vu(a){return!!(a&&typeof a.length<"u")}function hl(){}function cp(a,n){return function(){a.apply(n,arguments)}}function br(a){if(!(this instanceof br))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],eo(a,this)}function Uc(a,n){for(;a._state===3;)a=a._value;if(a._state===0){a._deferreds.push(n);return}a._handled=!0,br._immediateFn(function(){var t=a._state===1?n.onFulfilled:n.onRejected;if(t===null){(a._state===1?gr:_s)(n.promise,a._value);return}var e;try{e=t(a._value)}catch(r){_s(n.promise,r);return}gr(n.promise,e)})}function gr(a,n){try{if(n===a)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(ai(n)==="object"||typeof n=="function")){var t=n.then;if(n instanceof br){a._state=3,a._value=n,ws(a);return}else if(typeof t=="function"){eo(cp(t,n),a);return}}a._state=1,a._value=n,ws(a)}catch(e){_s(a,e)}}function _s(a,n){a._state=2,a._value=n,ws(a)}function ws(a){a._state===2&&a._deferreds.length===0&&br._immediateFn(function(){a._handled||br._unhandledRejectionFn(a._value)});for(var n=0,t=a._deferreds.length;n<t;n++)Uc(a,a._deferreds[n]);a._deferreds=null}function bs(a,n,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof n=="function"?n:null,this.promise=t}function eo(a,n){var t=!1;try{a(function(e){t||(t=!0,gr(n,e))},function(e){t||(t=!0,_s(n,e))})}catch(e){if(t)return;t=!0,_s(n,e)}}br.prototype.catch=function(a){return this.then(null,a)},br.prototype.then=function(a,n){var t=new this.constructor(hl);return Uc(this,new bs(a,n,t)),t},br.prototype.finally=lp,br.all=function(a){return new br(function(n,t){if(!vu(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return n([]);var r=e.length;function o(f,d){try{if(d&&(ai(d)==="object"||typeof d=="function")){var h=d.then;if(typeof h=="function"){h.call(d,function(g){o(f,g)},t);return}}e[f]=d,--r===0&&n(e)}catch(g){t(g)}}for(var l=0;l<e.length;l++)o(l,e[l])})},br.any=Bc,br.allSettled=du,br.resolve=function(a){return a&&ai(a)==="object"&&a.constructor===br?a:new br(function(n){n(a)})},br.reject=function(a){return new br(function(n,t){t(a)})},br.race=function(a){return new br(function(n,t){if(!vu(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,r=a.length;e<r;e++)br.resolve(a[e]).then(n,t)})},br._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){ba(a,0)},br._unhandledRejectionFn=function(n){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};const Ca=br;(0,Y.hasWin)()&&(window.Promise=window.Promise||Ca);const vl=typeof fetch=="function"?fetch.bind():function(a,n){return new Ca(function(t,e){var r=new XMLHttpRequest;r.open(n.method||"get",a),r.withCredentials=n.credentials=="include";for(var o in n.headers||{})r.setRequestHeader(o,n.headers[o]);r.onload=function(l){return t({status:r.status,statusText:r.statusText,text:function(){return Ca.resolve(r.responseText)}})},r.onerror=e,r.upload&&n.onProgress&&(r.upload.onprogress=n.onProgress),n.body?r.send(n.body):r.send()})};var Cs=function(){return Cs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Cs.apply(this,arguments)},gu=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},mu=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},yu=function(){function a(){}return a.prototype.store=function(n,t){return t===void 0&&(t={}),gu(this,void 0,void 0,function(){return mu(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlStore,this.__props(t,n),t)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(n){return n===void 0&&(n={}),gu(this,void 0,void 0,function(){return mu(this,function(t){switch(t.label){case 0:return[4,this.request(n.urlLoad,this.__props(n),n)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(n,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),vl(n,t).then(function(r){var o=r.text(),l=(r.status/200|0)===1;return l?o:o.then(Promise.reject)}).then(function(r){var o=r&&(0,w.isString)(r);return e.contentTypeJson&&o?JSON.parse(r):r})},a.prototype.__props=function(n,t){n===void 0&&(n={});var e=n.contentTypeJson,r=n.headers||{},o=n.fetchOptions||{},l="X-Requested-With",f="Content-Type",d;if((0,w.isUndefined)(r[l])&&(r[l]="XMLHttpRequest"),(0,w.isUndefined)(r[f])&&e&&(r[f]="application/json; charset=utf-8"),t)if(e)d=JSON.stringify(t);else{d=new FormData;for(var h in t)d.append(h,t[h])}var g={method:d?"POST":"GET",credentials:n.credentials,headers:r,body:d};return Cs(Cs({},g),(0,w.isFunction)(o)?o(g):o)},a}();const zc=yu;var _u;(function(a){a.start="storage:start",a.startStore="storage:start:store",a.startLoad="storage:start:load",a.load="storage:load",a.store="storage:store",a.after="storage:after",a.afterStore="storage:after:store",a.afterLoad="storage:after:load",a.end="storage:end",a.endStore="storage:end:store",a.endLoad="storage:end:load",a.error="storage:error",a.errorStore="storage:error:store",a.errorLoad="storage:error:load"})(_u||(_u={}));const on=_u;var Wc=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ir=function(){return ir=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ir.apply(this,arguments)},gl=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},wu=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Lo="local",Kc="remote",ml=function(a){Wc(n,a);function n(t){var e=a.call(this,t,"StorageManager",Rc)||this;e.storages={},e.events=on;var r=e.config;return r._disable&&(r.type=void 0),e.storages={},e.add(Lo,new ap),e.add(Kc,new zc),e.setCurrent(r.type),e}return n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},n.prototype.add=function(t,e){return this.storages[t]=e,this},n.prototype.get=function(t){return this.storages[t]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},n.prototype.store=function(t,e){return e===void 0&&(e={}),gl(this,void 0,void 0,function(){var r,o,l,f,d,h;return wu(this,function(g){switch(g.label){case 0:r=this.getCurrentStorage(),o=ir(ir({},this.getCurrentOptions()),e),l=this.getRecoveryStorage(),f=this.getCurrentOptions(Lo),g.label=1;case 1:return g.trys.push([1,5,,9]),[4,this.__exec(r,o,t)];case 2:return g.sent(),d=l,d?[4,this.__exec(l,f,{})]:[3,4];case 3:d=g.sent(),g.label=4;case 4:return[3,9];case 5:return h=g.sent(),l?[4,this.__exec(l,f,t)]:[3,7];case 6:return g.sent(),[3,8];case 7:throw h;case 8:return[3,9];case 9:return[2,t]}})})},n.prototype.load=function(t){return t===void 0&&(t={}),gl(this,void 0,void 0,function(){var e,r,o,l,f;return wu(this,function(d){switch(d.label){case 0:return e=this.getCurrentStorage(),r=ir(ir({},this.getCurrentOptions()),t),o=this.getRecoveryStorage(),o?[4,this.__exec(o,this.getCurrentOptions(Lo))]:[3,5];case 1:if(f=d.sent(),(0,w.isEmpty)(f))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return d.sent(),l=f,[3,5];case 4:return d.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,r)];case 6:l=d.sent(),d.label=7;case 7:return[2,l||{}]}})})},n.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(r,o){(0,w.isFunction)(e)?e(r,o,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?r(null):o()})},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){var t=this.getRecovery();return t&&this.getCurrent()===Kc&&this.get(Lo)},n.prototype.__exec=function(t,e,r){var o;return gl(this,void 0,void 0,function(){var l,f,d,h,g,y,b,k,V,$,Q,vt,Mt;return wu(this,function(kt){switch(kt.label){case 0:if(l=r?"store":"load",f=this.getConfig(),d=f.onStore,h=f.onLoad,this.onStart(l,r),!t)return[2,r||{}];kt.label=1;case 1:return kt.trys.push([1,14,,15]),y=(o=this.em)===null||o===void 0?void 0:o.getEditor(),b=void 0,r?(V=d,V?[4,d(r,y)]:[3,3]):[3,7];case 2:V=kt.sent(),kt.label=3;case 3:return k=V||r,$=e.onStore,$?[4,e.onStore(k,y)]:[3,5];case 4:$=kt.sent(),kt.label=5;case 5:return k=$||k,[4,t.store(k,e)];case 6:return b=kt.sent(),g=r,[3,13];case 7:return[4,t.load(e)];case 8:return b=kt.sent(),g=this.__clearKeys(b),Q=e.onLoad,Q?[4,e.onLoad(g,y)]:[3,10];case 9:Q=kt.sent(),kt.label=10;case 10:return g=Q||g,vt=h,vt?[4,h(g,y)]:[3,12];case 11:vt=kt.sent(),kt.label=12;case 12:g=vt||g,kt.label=13;case 13:return this.onAfter(l,g,b),this.onEnd(l,g,b),[3,15];case 14:throw Mt=kt.sent(),this.onError(l,Mt),Mt;case 15:return[2,g]}})})},n.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),r=new RegExp("^".concat(e.id)),o={};for(var l in t){var f=l.replace(r,"");o[f]=t[l]}return o},n.prototype.getCurrentOptions=function(t){var e=this.getConfig(),r=t||this.getCurrent();return e.options[r]||{}},n.prototype.onStart=function(t,e){var r=this.em;if(r){var o=t==="load"?on.startLoad:on.startStore;r.trigger(on.start,t,e),r.trigger(o,e)}},n.prototype.onAfter=function(t,e,r){var o=this.em;if(o){var l=t==="load"?on.afterLoad:on.afterStore;o.trigger(on.after),o.trigger(l,e,r);var f=t==="load"?on.load:on.store;o.trigger(f,e,r)}},n.prototype.onEnd=function(t,e,r){var o=this.em;if(o){var l=t==="load"?on.endLoad:on.endStore;o.trigger(on.end,t,e,r),o.trigger(l,e,r)}},n.prototype.onError=function(t,e){var r=this.em;if(r){var o=t==="load"?on.errorLoad:on.errorStore;r.trigger(on.error,e,t),r.trigger(o,e),this.onEnd(t,e)}},n.prototype.canAutoload=function(){var t=this.getCurrentStorage();return!!t&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}(jt);const fp=ml;var kr={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1};const pp=kr;var dp=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xs=function(){return xs=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},xs.apply(this,arguments)},Ss=function(a){dp(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var r=t.config,o=r===void 0?{}:r,l=e,f=l.model,d=l.eventCapture,h=f.target,g=f.attributes.type;e.config=o,e.em=o.em,e.pfx=o.stylePrefix||"",e.ppfx=o.pStylePrefix||"",e.target=h,e.className=e.pfx+"trait",e.clsField="".concat(e.ppfx,"field ").concat(e.ppfx,"field-").concat(g);var y=[["change:value",e.onValueChange],["remove",e.removeView]];return y.forEach(function(b){var k=b[0],V=b[1];f.off(k,V),e.listenTo(f,k,V)}),f.view=e,e.listenTo(f,"change:label",e.render),e.listenTo(f,"change:placeholder",e.rerender),e.events={},d.forEach(function(b){return e.events[b]="onChange"}),e.delegateEvents(),e.init(),e}return n.prototype.attributes=function(){return this.model.get("attributes")||{}},n.prototype.templateLabel=function(t){var e=this.ppfx,r=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(r,'">').concat(r,"</div>")},n.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},n.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},n.prototype.removeView=function(){this.remove(),this.removed()},n.prototype.init=function(){},n.prototype.removed=function(){},n.prototype.onRender=function(t){},n.prototype.onUpdate=function(t){},n.prototype.onEvent=function(t){},n.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,w.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(xs(xs({},this.getClbOpts()),{event:t}))},n.prototype.getValueForTarget=function(){return this.model.get("value")},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},n.prototype.onValueChange=function(t,e,r){if(r===void 0&&(r={}),r.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var o=this.getValueForTarget();t.setTargetValue(o,r)}},n.prototype.renderLabel=function(){var t=this,e=t.$el,r=t.target,o=this.getLabel(),l=this.templateLabel(r);this.createLabel&&(l=this.createLabel({label:o,component:r,trait:this})||""),e.find("[data-label]").append(l)},n.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,r=e.label,o=e.name;return t.t("traitManager.traits.labels.".concat(o))||(0,Y.capitalize)(r||o).replace(/-/g," ")},n.prototype.getComponent=function(){return this.target},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.em,r=t.model,o=r,l=r.attributes.name,f=o.get("placeholder")||o.get("default")||"",d=o.get("type")||"text",h=o.get("min"),g=o.get("max"),y=this.getModelValue(),b=(0,M.default)('<input type="'.concat(d,'">')),k=e.t("traitManager.traits.attributes.".concat(l))||{};b.attr(xs({placeholder:f},k)),(0,w.isUndefined)(y)||(o.set({value:y},{silent:!0}),b.prop("value",y)),h&&b.prop("min",h),g&&b.prop("max",g),this.$input=b}return this.$input.get(0)},n.prototype.getInputElem=function(){var t=this,e=t.input,r=t.$input;return e||r&&r.get&&r.get(0)||this.getElInput()},n.prototype.getModelValue=function(){return this.model.getValue()},n.prototype.getElInput=function(){return this.elInput},n.prototype.renderField=function(){var t=this,e=t.$el,r=t.appendInput,o=t.model,l=e.find("[data-input]"),f=l[l.length-1],d=o.el;d||(d=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,w.isString)(d)?(f.innerHTML=d,this.elInput=f.firstChild):(r?f.appendChild(d):f.insertBefore(d,f.firstChild),this.elInput=d),o.el=this.elInput},n.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},n.prototype.rerender=function(){delete this.model.el,this.render()},n.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,o=t.ppfx,l=t.model,f=l.attributes,d=f.type,h=f.id,g=this.hasLabel&&this.hasLabel(),y="".concat(r,"trait");delete this.$input;var b='<div class="'.concat(y," ").concat(y,"--").concat(d,`">
      `).concat(g?'<div class="'.concat(o,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(o,"field-wrp ").concat(o,"field-wrp--").concat(d,`" data-input>
        `).concat(this.templateInput?(0,w.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(b),g&&this.renderLabel(),this.renderField(),this.el.className="".concat(y,"__wrp ").concat(y,"__wrp-").concat(h),this.postUpdate(),this.onRender(this.getClbOpts()),this},n}(x.G7);const i=Ss;Ss.prototype.eventCapture=["change"];var s=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),c=function(a){s(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.onChange=function(){this.handleClick()},n.prototype.handleClick=function(){this.model.runCommand()},n.prototype.renderLabel=function(){this.model.get("label")&&i.prototype.renderLabel.apply(this)},n.prototype.getInputEl=function(){var t=this,e=t.model,r=t.ppfx,o=e.props(),l=o.labelButton,f=o.text,d=o.full,h=l||f,g="".concat(r,"btn"),y='<button type="button" class="'.concat(g,"-prim").concat(d?" ".concat(g,"--full"):"",'">').concat(h,"</button>");return y},n}(i);const u=c;c.prototype.eventCapture=["click button"];var p=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),v=function(a){p(n,a);function n(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<label class="'.concat(r,`" data-input>
    <i class="`).concat(e,`chk-icon"></i>
  </label>`)},n.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},n.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.checked=!!t)},n.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!this.$input,o=i.prototype.getInputEl.apply(this,t);if(r){var l=void 0,f=void 0,d=this,h=d.model,g=d.target,y=h.attributes.valueFalse,b=h.getName();h.changeProp?(l=g.get(b),f=l):(f=g.get("attributes")[b],l=!!(f||f==="")),!(0,w.isUndefined)(y)&&f===y&&(l=!1),o.checked=l}return o},n}(i);const m=v;function _(a,n){if(!(0,Y.hasWin)())return;var t={beforeShow:k,move:k,change:k,show:k,hide:k,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function J($t,re){return!!~(""+$t).indexOf(re)}var St=document.createElement("div"),W=St.style;return W.cssText="background-color:rgba(0,0,0,.5)",J(W.backgroundColor,"rgba")||J(W.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),f=function(){var J="";if(r)for(var St=1;St<=6;St++)J+="<div class='sp-"+St+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",J,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function d(J,St,W,$t){for(var re=[],be=0;be<J.length;be++){var $e=J[be];if($e){var Je=ae($e),ze=Je.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";ze+=ae.equals(St,$e)?" sp-thumb-active":"";var Vr=Je.toString($t.preferredFormat||"rgb"),Yr=o?"background-color:"+Je.toRgbString():"filter:"+Je.toFilter();re.push('<span title="'+Vr+'" data-color="'+Je.toRgbString()+'" class="'+ze+'"><span class="sp-thumb-inner" style="'+Yr+';"></span></span>')}else{var Gr="sp-clear-display";re.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="'+Gr+'"></span>').attr("title",$t.noColorSelectedText)).html())}}return"<div class='sp-cf "+W+"'>"+re.join("")+"</div>"}function h(){for(var J=0;J<e.length;J++)e[J]&&e[J].hide()}function g(J,St){var W=a.extend({},t,J);return W.callbacks={move:$(W.move,St),change:$(W.change,St),show:$(W.show,St),hide:$(W.hide,St),beforeShow:$(W.beforeShow,St)},W}function y(J,St){var W=g(St,J),$t=W.flat,re=W.showSelectionPalette,be=W.localStorageKey,$e=W.theme,Je=W.callbacks,ze=vt(Ns,10),Vr=!1,Yr=!1,Gr=!0,Zi=0,Io=0,fi=0,Sr=0,pi=0,gf=0,mf=0,Ds=0,js=0,Lu=0,di=1,yf=[],Du=[],_f={},hi=W.selectionPalette.slice(0),e_=W.maxSelectionSize,Ch="sp-dragging",Pa=null,ju=J.ownerDocument;ju.body;var Xr=a(J),$p=!1,rr=a(f,ju).addClass($e),r_=rr.find(".sp-picker-container"),wf=rr.find(".sp-color"),bf=rr.find(".sp-dragger"),qp=rr.find(".sp-hue"),Cf=rr.find(".sp-slider"),Iu=rr.find(".sp-alpha-inner"),xh=rr.find(".sp-alpha"),xf=rr.find(".sp-alpha-handle"),vi=rr.find(".sp-input"),Sh=rr.find(".sp-palette"),Oh=rr.find(".sp-initial"),Th=rr.find(".sp-cancel"),Yp=rr.find(".sp-clear"),Eh=rr.find(".sp-choose"),Xp=rr.find(".sp-palette-toggle"),Sf=Xr.is("input"),n_=Sf&&Xr.attr("type")==="color"&&Mt(),Zp=Sf&&!$t,Ol=Zp?a(l).addClass($e).addClass(W.className).addClass(W.replacerClassName):a([]),Vu=Zp?Ol:Xr,Tl=Ol.find(".sp-preview-inner"),Ru=W.color||Sf&&Xr.val(),El=!1,Pl=W.preferredFormat,o_=!W.showButtons||W.clickoutFiresChange,Aa=!Ru,Is=W.allowEmpty&&!n_;function Jp(){if(W.showPaletteOnly&&(W.showPalette=!0),Xp.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),W.palette){yf=W.palette.slice(0),Du=a.isArray(yf[0])?yf:[yf],_f={};for(var Re=0;Re<Du.length;Re++)for(var Fe=0;Fe<Du[Re].length;Fe++){var pr=ae(Du[Re][Fe]).toRgbString();_f[pr]=!0}}rr.toggleClass("sp-flat",$t),rr.toggleClass("sp-input-disabled",!W.showInput),rr.toggleClass("sp-alpha-enabled",W.showAlpha),rr.toggleClass("sp-clear-enabled",Is),rr.toggleClass("sp-buttons-disabled",!W.showButtons),rr.toggleClass("sp-palette-buttons-disabled",!W.togglePaletteOnly),rr.toggleClass("sp-palette-disabled",!W.showPalette),rr.toggleClass("sp-palette-only",W.showPaletteOnly),rr.toggleClass("sp-initial-disabled",!W.showInitial),rr.addClass(W.className).addClass(W.containerClassName),Ns()}function i_(){if(r&&rr.find("*:not(input)").attr("unselectable","on"),Jp(),Zp&&Xr.after(Ol).hide(),Is||Yp.hide(),$t)Xr.after(rr).hide();else{var Re=W.appendTo==="parent"?Xr.parent():a(W.appendTo);Re.length!==1&&(Re=a("body")),Re.append(rr)}Ph(),Vu.bind("click.spectrum touchstart.spectrum",function(Ye){$p||Mh(),Ye.stopPropagation(),a(Ye.target).is("input")||Ye.preventDefault()}),(Xr.is(":disabled")||W.disabled===!0)&&Vh(),rr.click(V),vi.change(rd),vi.bind("paste",function(){setTimeout(rd,1)}),vi.keydown(function(Ye){Ye.keyCode==13&&rd()}),Th.text(W.cancelText),Th.bind("click.spectrum",function(Ye){Ye.stopPropagation(),Ye.preventDefault(),jh(),ka()}),Yp.attr("title",W.clearText),Yp.bind("click.spectrum",function(Ye){Ye.stopPropagation(),Ye.preventDefault(),Aa=!0,Al(),$t&&Rs(!0)}),Eh.text(W.chooseText),Eh.bind("click.spectrum",function(Ye){Ye.stopPropagation(),Ye.preventDefault(),r&&vi.is(":focus")&&vi.trigger("change"),s_()&&(Rs(!0),ka())}),Xp.text(W.showPaletteOnly?W.togglePaletteMoreText:W.togglePaletteLessText),Xp.bind("click.spectrum",function(Ye){Ye.stopPropagation(),Ye.preventDefault(),W.showPaletteOnly=!W.showPaletteOnly,!W.showPaletteOnly&&!$t&&rr.css("left","-="+(r_.outerWidth(!0)+5)),Jp()}),Q(xh,function(Ye,Vo,Fs){di=Ye/pi,Aa=!1,Fs.shiftKey&&(di=Math.round(di*10)/10),Al()},td,ed),Q(qp,function(Ye,Vo){Ds=parseFloat(Vo/Sr),Aa=!1,W.showAlpha||(di=1),Al()},td,ed),Q(wf,function(Ye,Vo,Fs){if(!Fs.shiftKey)Pa=null;else if(!Pa){var Tf=js*Zi,Nu=Io-Lu*Io,Fu=Math.abs(Ye-Tf)>Math.abs(Vo-Nu);Pa=Fu?"x":"y"}var p_=!Pa||Pa==="x",d_=!Pa||Pa==="y";p_&&(js=parseFloat(Ye/Zi)),d_&&(Lu=parseFloat((Io-Vo)/Io)),Aa=!1,W.showAlpha||(di=1),Al()},td,ed),Ru?(Vs(Ru),kl(),Pl=W.preferredFormat||ae(Ru).getFormat(),Qp(Ru)):kl(),$t&&nd();function Fe(Ye){return Ye.data&&Ye.data.ignore?(Vs(a(Ye.target).closest(".sp-thumb-el").data("color")),Al()):(Vs(a(Ye.target).closest(".sp-thumb-el").data("color")),Al(),W.hideAfterPaletteSelect&&(Rs(!0),ka())),!1}var pr=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Sh.delegate(".sp-thumb-el",pr,Fe),Oh.delegate(".sp-thumb-el:nth-child(1)",pr,{ignore:!0},Fe)}function Ph(){if(be&&window.localStorage){try{var Re=window.localStorage[be].split(",#");Re.length>1&&(delete window.localStorage[be],a.each(Re,function(Fe,pr){Qp(pr)}))}catch{}try{hi=window.localStorage[be].split(";")}catch{}}}function Qp(Re){if(re){var Fe=ae(Re).toRgbString();if(!_f[Fe]&&a.inArray(Fe,hi)===-1)for(hi.push(Fe);hi.length>e_;)hi.shift();if(be&&window.localStorage)try{window.localStorage[be]=hi.join(";")}catch{}}}function a_(){var Re=[];if(W.showPalette)for(var Fe=0;Fe<hi.length;Fe++){var pr=ae(hi[Fe]).toRgbString();_f[pr]||Re.push(hi[Fe])}return Re.reverse().slice(0,W.maxSelectionSize)}function Ah(){var Re=Wn(),Fe=a.map(Du,function(pr,Ye){return d(pr,Re,"sp-palette-row sp-palette-row-"+Ye,W)});Ph(),hi&&Fe.push(d(a_(),Re,"sp-palette-row sp-palette-row-selection",W)),Sh.html(Fe.join(""))}function kh(){if(W.showInitial){var Re=El,Fe=Wn();Oh.html(d([Re,Fe],Fe,"sp-palette-row-initial",W))}}function td(){(Io<=0||Zi<=0||Sr<=0)&&Ns(),Yr=!0,rr.addClass(Ch),Pa=null,Xr.trigger("dragstart.spectrum",[Wn()])}function ed(){Yr=!1,rr.removeClass(Ch),Xr.trigger("dragstop.spectrum",[Wn()])}function rd(){var Re=vi.val();if((Re===null||Re==="")&&Is)Vs(null),Rs(!0);else{var Fe=ae(Re);Fe.isValid()?(Vs(Fe),Rs(!0)):vi.addClass("sp-validation-error")}}function Mh(){Vr?ka():nd()}function nd(){var Re=a.Event("beforeShow.spectrum");if(Vr){Ns();return}if(Xr.trigger("beforeShow.spectrum",[Wn()]),!(Je.beforeShow(Wn())===!1||Re.isDefaultPrevented())){h(),Vr=!0;var Fe=a(ju);Fe.bind("keydown.spectrum",Lh),Fe.bind("click.spectrum",Dh),a(window).bind("resize.spectrum",ze),Ol.addClass("sp-active"),rr.removeClass("sp-hidden"),Ns(),kl(),El=Wn(),kh(),Je.show(El),Xr.trigger("show.spectrum",[El])}}function Lh(Re){Re.keyCode===27&&ka()}function Dh(Re){Re.button!=2&&(Yr||(o_?Rs(!0):jh(),ka()))}function ka(){!Vr||$t||(Vr=!1,a(ju).unbind("keydown.spectrum",Lh),a(ju).unbind("click.spectrum",Dh),a(window).unbind("resize.spectrum",ze),Ol.removeClass("sp-active"),rr.addClass("sp-hidden"),Je.hide(Wn()),Xr.trigger("hide.spectrum",[Wn()]))}function jh(){Vs(El,!0)}function Vs(Re,Fe){if(ae.equals(Re,Wn())){kl();return}var pr,Ye;!Re&&Is?Aa=!0:(Aa=!1,Gr=!Re,pr=ae(Re),Ye=pr.toHsv(),Ds=Ye.h%360/360,js=Ye.s,Lu=Ye.v,di=Ye.a),kl(),pr&&pr.isValid()&&!Fe&&(Pl=W.preferredFormat||pr.getFormat())}function Wn(Re){return Re=Re||{},Is&&Aa?null:ae.fromRatio({h:Ds,s:js,v:Lu,a:Math.round(di*100)/100},{format:Re.format||Pl})}function s_(){return!vi.hasClass("sp-validation-error")}function Al(){kl(),Je.move(Wn()),Xr.trigger("move.spectrum",[Wn()])}function kl(){vi.removeClass("sp-validation-error"),Ih();var Re=ae.fromRatio({h:Ds,s:1,v:1});wf.css("background-color",Re.toHexString());var Fe=Pl;di<1&&!(di===0&&Fe==="name")&&(Fe==="hex"||Fe==="hex3"||Fe==="hex6"||Fe==="name")&&(Fe="rgb");var pr=Wn({format:Fe}),Ye="";if(Tl.removeClass("sp-clear-display"),Tl.css("background-color","transparent"),!pr&&Is)Tl.addClass("sp-clear-display");else{var Vo=pr.toHexString(),Fs=pr.toRgbString();if(o||pr.alpha===1?Tl.css("background-color",Fs):(Tl.css("background-color","transparent"),Tl.css("filter",pr.toFilter())),W.showAlpha){var Tf=pr.toRgb();Tf.a=0;var Nu=ae(Tf).toRgbString(),Fu="linear-gradient(left, "+Nu+", "+Vo+")";r?Iu.css("filter",ae(Nu).toFilter({gradientType:1},Vo)):(Iu.css("background","-webkit-"+Fu),Iu.css("background","-moz-"+Fu),Iu.css("background","-ms-"+Fu),Iu.css("background","linear-gradient(to right, "+Nu+", "+Vo+")"))}Ye=pr.toString(Fe)}W.showInput&&vi.val(Ye),W.showPalette&&Ah(),kh()}function Ih(){var Re=js,Fe=Lu;if(Is&&Aa)xf.hide(),Cf.hide(),bf.hide();else{xf.show(),Cf.show(),bf.show();var pr=Re*Zi,Ye=Io-Fe*Io;pr=Math.max(-fi,Math.min(Zi-fi,pr-fi)),Ye=Math.max(-fi,Math.min(Io-fi,Ye-fi)),bf.css({top:Ye+"px",left:pr+"px"});var Vo=di*pi;xf.css({left:Vo-gf/2+"px"});var Fs=Ds*Sr;Cf.css({top:Fs-mf+"px"})}}function Rs(Re){var Fe=Wn(),pr="",Ye=Gr?!0:!ae.equals(Fe,El);Fe&&(pr=Fe.toString(Pl),!Vr&&Qp(Fe)),Sf&&Xr.val(pr),Re&&Ye&&(Je.change(Fe),Xr.trigger("change",[Fe]))}function Ns(){Vr&&(Zi=wf.width(),Io=wf.height(),fi=bf.height(),qp.width(),Sr=qp.height(),mf=Cf.height(),pi=xh.width(),gf=xf.width(),$t||(rr.css("position","absolute"),W.offset?rr.offset(W.offset):rr.offset(b(rr,Vu))),Ih(),W.showPalette&&Ah(),Xr.trigger("reflow.spectrum"))}function l_(){Xr.show(),Vu.unbind("click.spectrum touchstart.spectrum"),rr.remove(),Ol.remove(),e[Of.id]=null}function u_(Re,Fe){if(Re===n)return a.extend({},W);if(Fe===n)return W[Re];W[Re]=Fe,Re==="preferredFormat"&&(Pl=W.preferredFormat),Jp()}function c_(){$p=!1,Xr.attr("disabled",!1),Vu.removeClass("sp-disabled")}function Vh(){ka(),$p=!0,Xr.attr("disabled",!0),Vu.addClass("sp-disabled")}function f_(Re){W.offset=Re,Ns()}i_();var Of={show:nd,hide:ka,toggle:Mh,reflow:Ns,option:u_,enable:c_,disable:Vh,offset:f_,set:function(Re){Vs(Re),Rs()},get:Wn,destroy:l_,container:rr};return Of.id=e.push(Of)-1,Of}function b(J,St){for(var W=St[0],$t=J[0],re=$t.parentElement,be=W.getBoundingClientRect(),$e=$t.offsetWidth,Je=$t.offsetHeight,ze={top:0,left:0,width:W.offsetWidth,height:W.offsetHeight};W&&(ze.top+=W.offsetTop-W.scrollTop,ze.left+=W.offsetLeft-W.scrollLeft,!(W===re||!re.contains(W.offsetParent)));)W=W.offsetParent;return be.right+$e>window.innerWidth-window.scrollX&&be.right-$e>0&&(ze.left-=$e-ze.width),be.bottom+Je<window.innerHeight-window.scrollY?ze.top+=ze.height:ze.top-=Je,ze}function k(){}function V(J){J.stopPropagation()}function $(J,St){var W=Array.prototype.slice,$t=W.call(arguments,2);return function(){return J.apply(St,$t.concat(W.call(arguments)))}}function Q(J,St,W,$t){St=St||function(){},W=W||function(){},$t=$t||function(){};var re=document,be=!1,$e={},Je=0,ze=0,Vr="ontouchstart"in window,Yr={};Yr.selectstart=Gr,Yr.dragstart=Gr,Yr["touchmove mousemove"]=Zi,Yr["touchend mouseup"]=fi;function Gr(Sr){Sr.stopPropagation&&Sr.stopPropagation(),Sr.preventDefault&&Sr.preventDefault(),Sr.returnValue=!1}function Zi(Sr){if(be){if(r&&re.documentMode<9&&!Sr.button)return fi();var pi=Sr&&Sr.touches&&Sr.touches[0],gf=pi&&pi.pageX||Sr.pageX,mf=pi&&pi.pageY||Sr.pageY,Ds=Math.max(0,Math.min(gf-$e.left,ze)),js=Math.max(0,Math.min(mf-$e.top,Je));Vr&&Gr(Sr),St.apply(J,[Ds,js,Sr])}}function Io(Sr){var pi=Sr.which?Sr.which==3:Sr.button==2;!pi&&!be&&W.apply(J,arguments)!==!1&&(be=!0,Je=a(J).height(),ze=a(J).width(),$e=a(J).offset(),a(re).bind(Yr),a(re.body).addClass("sp-dragging"),Zi(Sr),Gr(Sr))}function fi(){be&&(a(re).unbind(Yr),a(re.body).removeClass("sp-dragging"),setTimeout(function(){$t.apply(J,arguments)},0)),be=!1}a(J).bind("touchstart mousedown",Io)}function vt(J,St,W){var $t;return function(){var re=this,be=arguments,$e=function(){$t=null,J.apply(re,be)};W&&clearTimeout($t),(W||!$t)&&($t=setTimeout($e,St))}}function Mt(){return a.fn.spectrum.inputTypeColorSupport()}var kt="spectrum.id";a.fn.spectrum=function(J,St){if(typeof J=="string"){var W=this,$t=Array.prototype.slice.call(arguments,1);return this.each(function(){var re=e[a(this).data(kt)];if(re){var be=re[J];if(!be)throw new Error("Spectrum: no such method: '"+J+"'");J=="get"?W=re.get():J=="container"?W=re.container:J=="option"?W=re.option.apply(re,$t):J=="destroy"?(re.destroy(),a(this).removeData(kt)):be.apply(re,$t)}}),W}return this.spectrum("destroy").each(function(){var re=a.extend({},J,a(this).data()),be=y(this,re);a(this).data(kt,be.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=Q,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function J(){if(typeof J._cachedResult>"u"){var St=a("<input type='color'/>")[0];J._cachedResult=St.type==="color"&&St.value!==""}return J._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var J=a("input[type=color]");J.length&&!Mt()&&J.spectrum({preferredFormat:"hex6"})};var Gt=/^[\s,#]+/,fe=/\s+$/,Oe=0,Ve=Math,pe=Ve.round,Ue=Ve.min,Ze=Ve.max,hr=Ve.random,ae=function(J,St){if(J=J||"",St=St||{},J instanceof ae)return J;if(!(this instanceof ae))return new ae(J,St);var W=ln(J);this._originalInput=J,this._r=W.r,this._g=W.g,this._b=W.b,this._a=W.a,this._roundA=pe(100*this._a)/100,this._format=St.format||W.format,this._gradientType=St.gradientType,this._r<1&&(this._r=pe(this._r)),this._g<1&&(this._g=pe(this._g)),this._b<1&&(this._b=pe(this._b)),this._ok=W.ok,this._tc_id=Oe++};ae.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var J=this.toRgb();return(J.r*299+J.g*587+J.b*114)/1e3},setAlpha:function(J){return this._a=bh(J),this._roundA=pe(100*this._a)/100,this},toHsv:function(){var J=oo(this._r,this._g,this._b);return{h:J.h*360,s:J.s,v:J.v,a:this._a}},toHsvString:function(){var J=oo(this._r,this._g,this._b),St=pe(J.h*360),W=pe(J.s*100),$t=pe(J.v*100);return this._a==1?"hsv("+St+", "+W+"%, "+$t+"%)":"hsva("+St+", "+W+"%, "+$t+"%, "+this._roundA+")"},toHsl:function(){var J=Yi(this._r,this._g,this._b);return{h:J.h*360,s:J.s,l:J.l,a:this._a}},toHslString:function(){var J=Yi(this._r,this._g,this._b),St=pe(J.h*360),W=pe(J.s*100),$t=pe(J.l*100);return this._a==1?"hsl("+St+", "+W+"%, "+$t+"%)":"hsla("+St+", "+W+"%, "+$t+"%, "+this._roundA+")"},toHex:function(J){return ks(this._r,this._g,this._b,J)},toHexString:function(J){return"#"+this.toHex(J)},toHex8:function(){return Ms(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:pe(this._r),g:pe(this._g),b:pe(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+pe(this._r)+", "+pe(this._g)+", "+pe(this._b)+")":"rgba("+pe(this._r)+", "+pe(this._g)+", "+pe(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:pe(Lr(this._r,255)*100)+"%",g:pe(Lr(this._g,255)*100)+"%",b:pe(Lr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+pe(Lr(this._r,255)*100)+"%, "+pe(Lr(this._g,255)*100)+"%, "+pe(Lr(this._b,255)*100)+"%)":"rgba("+pe(Lr(this._r,255)*100)+"%, "+pe(Lr(this._g,255)*100)+"%, "+pe(Lr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:q0[ks(this._r,this._g,this._b,!0)]||!1},toFilter:function(J){var St="#"+Ms(this._r,this._g,this._b,this._a),W=St,$t=this._gradientType?"GradientType = 1, ":"";if(J){var re=ae(J);W=re.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+$t+"startColorstr="+St+",endColorstr="+W+")"},toString:function(J){var St=!!J;J=J||this._format;var W=!1,$t=this._a<1&&this._a>=0,re=!St&&$t&&(J==="hex"||J==="hex6"||J==="hex3"||J==="name");return re?J==="name"&&this._a===0?this.toName():this.toRgbString():(J==="rgb"&&(W=this.toRgbString()),J==="prgb"&&(W=this.toPercentageRgbString()),(J==="hex"||J==="hex6")&&(W=this.toHexString()),J==="hex3"&&(W=this.toHexString(!0)),J==="hex8"&&(W=this.toHex8String()),J==="name"&&(W=this.toName()),J==="hsl"&&(W=this.toHslString()),J==="hsv"&&(W=this.toHsvString()),W||this.toHexString())},_applyModification:function(J,St){var W=J.apply(null,[this].concat([].slice.call(St)));return this._r=W._r,this._g=W._g,this._b=W._b,this.setAlpha(W._a),this},lighten:function(){return this._applyModification(N0,arguments)},brighten:function(){return this._applyModification(F0,arguments)},darken:function(){return this._applyModification(H0,arguments)},desaturate:function(){return this._applyModification(Kp,arguments)},saturate:function(){return this._applyModification(V0,arguments)},greyscale:function(){return this._applyModification(R0,arguments)},spin:function(){return this._applyModification(B0,arguments)},_applyCombination:function(J,St){return J.apply(null,[this].concat([].slice.call(St)))},analogous:function(){return this._applyCombination(G0,arguments)},complement:function(){return this._applyCombination(U0,arguments)},monochromatic:function(){return this._applyCombination($0,arguments)},splitcomplement:function(){return this._applyCombination(K0,arguments)},triad:function(){return this._applyCombination(z0,arguments)},tetrad:function(){return this._applyCombination(W0,arguments)}},ae.fromRatio=function(J,St){if(typeof J=="object"){var W={};for(var $t in J)J.hasOwnProperty($t)&&($t==="a"?W[$t]=J[$t]:W[$t]=Mu(J[$t]));J=W}return ae(J,St)};function ln(J){var St={r:0,g:0,b:0},W=1,$t=!1,re=!1;return typeof J=="string"&&(J=t_(J)),typeof J=="object"&&(J.hasOwnProperty("r")&&J.hasOwnProperty("g")&&J.hasOwnProperty("b")?(St=qi(J.r,J.g,J.b),$t=!0,re=String(J.r).substr(-1)==="%"?"prgb":"rgb"):J.hasOwnProperty("h")&&J.hasOwnProperty("s")&&J.hasOwnProperty("v")?(J.s=Mu(J.s),J.v=Mu(J.v),St=Ea(J.h,J.s,J.v),$t=!0,re="hsv"):J.hasOwnProperty("h")&&J.hasOwnProperty("s")&&J.hasOwnProperty("l")&&(J.s=Mu(J.s),J.l=Mu(J.l),St=ui(J.h,J.s,J.l),$t=!0,re="hsl"),J.hasOwnProperty("a")&&(W=J.a)),W=bh(W),{ok:$t,format:J.format||re,r:Ue(255,Ze(St.r,0)),g:Ue(255,Ze(St.g,0)),b:Ue(255,Ze(St.b,0)),a:W}}function qi(J,St,W){return{r:Lr(J,255)*255,g:Lr(St,255)*255,b:Lr(W,255)*255}}function Yi(J,St,W){J=Lr(J,255),St=Lr(St,255),W=Lr(W,255);var $t=Ze(J,St,W),re=Ue(J,St,W),be,$e,Je=($t+re)/2;if($t==re)be=$e=0;else{var ze=$t-re;switch($e=Je>.5?ze/(2-$t-re):ze/($t+re),$t){case J:be=(St-W)/ze+(St<W?6:0);break;case St:be=(W-J)/ze+2;break;case W:be=(J-St)/ze+4;break}be/=6}return{h:be,s:$e,l:Je}}function ui(J,St,W){var $t,re,be;J=Lr(J,360),St=Lr(St,100),W=Lr(W,100);function $e(Vr,Yr,Gr){return Gr<0&&(Gr+=1),Gr>1&&(Gr-=1),Gr<1/6?Vr+(Yr-Vr)*6*Gr:Gr<1/2?Yr:Gr<2/3?Vr+(Yr-Vr)*(2/3-Gr)*6:Vr}if(St===0)$t=re=be=W;else{var Je=W<.5?W*(1+St):W+St-W*St,ze=2*W-Je;$t=$e(ze,Je,J+1/3),re=$e(ze,Je,J),be=$e(ze,Je,J-1/3)}return{r:$t*255,g:re*255,b:be*255}}function oo(J,St,W){J=Lr(J,255),St=Lr(St,255),W=Lr(W,255);var $t=Ze(J,St,W),re=Ue(J,St,W),be,$e,Je=$t,ze=$t-re;if($e=$t===0?0:ze/$t,$t==re)be=0;else{switch($t){case J:be=(St-W)/ze+(St<W?6:0);break;case St:be=(W-J)/ze+2;break;case W:be=(J-St)/ze+4;break}be/=6}return{h:be,s:$e,v:Je}}function Ea(J,St,W){J=Lr(J,360)*6,St=Lr(St,100),W=Lr(W,100);var $t=Ve.floor(J),re=J-$t,be=W*(1-St),$e=W*(1-re*St),Je=W*(1-(1-re)*St),ze=$t%6,Vr=[W,$e,be,be,Je,W][ze],Yr=[Je,W,W,$e,be,be][ze],Gr=[be,be,Je,W,W,$e][ze];return{r:Vr*255,g:Yr*255,b:Gr*255}}function ks(J,St,W,$t){var re=[Ls(pe(J).toString(16)),Ls(pe(St).toString(16)),Ls(pe(W).toString(16))];return $t&&re[0].charAt(0)==re[0].charAt(1)&&re[1].charAt(0)==re[1].charAt(1)&&re[2].charAt(0)==re[2].charAt(1)?re[0].charAt(0)+re[1].charAt(0)+re[2].charAt(0):re.join("")}function Ms(J,St,W,$t){var re=[Ls(J0($t)),Ls(pe(J).toString(16)),Ls(pe(St).toString(16)),Ls(pe(W).toString(16))];return re.join("")}ae.equals=function(J,St){return!J||!St?!1:ae(J).toRgbString()==ae(St).toRgbString()},ae.random=function(){return ae.fromRatio({r:hr(),g:hr(),b:hr()})};function Kp(J,St){St=St===0?0:St||10;var W=ae(J).toHsl();return W.s-=St/100,W.s=vf(W.s),ae(W)}function V0(J,St){St=St===0?0:St||10;var W=ae(J).toHsl();return W.s+=St/100,W.s=vf(W.s),ae(W)}function R0(J){return ae(J).desaturate(100)}function N0(J,St){St=St===0?0:St||10;var W=ae(J).toHsl();return W.l+=St/100,W.l=vf(W.l),ae(W)}function F0(J,St){St=St===0?0:St||10;var W=ae(J).toRgb();return W.r=Ze(0,Ue(255,W.r-pe(255*-(St/100)))),W.g=Ze(0,Ue(255,W.g-pe(255*-(St/100)))),W.b=Ze(0,Ue(255,W.b-pe(255*-(St/100)))),ae(W)}function H0(J,St){St=St===0?0:St||10;var W=ae(J).toHsl();return W.l-=St/100,W.l=vf(W.l),ae(W)}function B0(J,St){var W=ae(J).toHsl(),$t=(pe(W.h)+St)%360;return W.h=$t<0?360+$t:$t,ae(W)}function U0(J){var St=ae(J).toHsl();return St.h=(St.h+180)%360,ae(St)}function z0(J){var St=ae(J).toHsl(),W=St.h;return[ae(J),ae({h:(W+120)%360,s:St.s,l:St.l}),ae({h:(W+240)%360,s:St.s,l:St.l})]}function W0(J){var St=ae(J).toHsl(),W=St.h;return[ae(J),ae({h:(W+90)%360,s:St.s,l:St.l}),ae({h:(W+180)%360,s:St.s,l:St.l}),ae({h:(W+270)%360,s:St.s,l:St.l})]}function K0(J){var St=ae(J).toHsl(),W=St.h;return[ae(J),ae({h:(W+72)%360,s:St.s,l:St.l}),ae({h:(W+216)%360,s:St.s,l:St.l})]}function G0(J,St,W){St=St||6,W=W||30;var $t=ae(J).toHsl(),re=360/W,be=[ae(J)];for($t.h=($t.h-(re*St>>1)+720)%360;--St;)$t.h=($t.h+re)%360,be.push(ae($t));return be}function $0(J,St){St=St||6;for(var W=ae(J).toHsv(),$t=W.h,re=W.s,be=W.v,$e=[],Je=1/St;St--;)$e.push(ae({h:$t,s:re,v:be})),be=(be+Je)%1;return $e}ae.mix=function(J,St,W){W=W===0?0:W||50;var $t=ae(J).toRgb(),re=ae(St).toRgb(),be=W/100,$e=be*2-1,Je=re.a-$t.a,ze;$e*Je==-1?ze=$e:ze=($e+Je)/(1+$e*Je),ze=(ze+1)/2;var Vr=1-ze,Yr={r:re.r*ze+$t.r*Vr,g:re.g*ze+$t.g*Vr,b:re.b*ze+$t.b*Vr,a:re.a*be+$t.a*(1-be)};return ae(Yr)},ae.readability=function(J,St){var W=ae(J),$t=ae(St),re=W.toRgb(),be=$t.toRgb(),$e=W.getBrightness(),Je=$t.getBrightness(),ze=Math.max(re.r,be.r)-Math.min(re.r,be.r)+Math.max(re.g,be.g)-Math.min(re.g,be.g)+Math.max(re.b,be.b)-Math.min(re.b,be.b);return{brightness:Math.abs($e-Je),color:ze}},ae.isReadable=function(J,St){var W=ae.readability(J,St);return W.brightness>125&&W.color>500},ae.mostReadable=function(J,St){for(var W=null,$t=0,re=!1,be=0;be<St.length;be++){var $e=ae.readability(J,St[be]),Je=$e.brightness>125&&$e.color>500,ze=3*($e.brightness/125)+$e.color/500;(Je&&!re||Je&&re&&ze>$t||!Je&&!re&&ze>$t)&&(re=Je,$t=ze,W=ae(St[be]))}return W};var Gp=ae.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},q0=ae.hexNames=Y0(Gp);function Y0(J){var St={};for(var W in J)J.hasOwnProperty(W)&&(St[J[W]]=W);return St}function bh(J){return J=parseFloat(J),(isNaN(J)||J<0||J>1)&&(J=1),J}function Lr(J,St){X0(J)&&(J="100%");var W=Z0(J);return J=Ue(St,Ze(0,parseFloat(J))),W&&(J=parseInt(J*St,10)/100),Ve.abs(J-St)<1e-6?1:J%St/parseFloat(St)}function vf(J){return Ue(1,Ze(0,J))}function ci(J){return parseInt(J,16)}function X0(J){return typeof J=="string"&&J.indexOf(".")!=-1&&parseFloat(J)===1}function Z0(J){return typeof J=="string"&&J.indexOf("%")!=-1}function Ls(J){return J.length==1?"0"+J:""+J}function Mu(J){return J<=1&&(J=J*100+"%"),J}function J0(J){return Math.round(parseFloat(J)*255).toString(16)}function Q0(J){return ci(J)/255}var Xi=function(){var J="[-\\+]?\\d+%?",St="[-\\+]?\\d*\\.\\d+%?",W="(?:"+St+")|(?:"+J+")",$t="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",re="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?";return{rgb:new RegExp("rgb"+$t),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+$t),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+$t),hsva:new RegExp("hsva"+re),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function t_(J){J=J.replace(Gt,"").replace(fe,"").toLowerCase();var St=!1;if(Gp[J])J=Gp[J],St=!0;else if(J=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var W;return(W=Xi.rgb.exec(J))?{r:W[1],g:W[2],b:W[3]}:(W=Xi.rgba.exec(J))?{r:W[1],g:W[2],b:W[3],a:W[4]}:(W=Xi.hsl.exec(J))?{h:W[1],s:W[2],l:W[3]}:(W=Xi.hsla.exec(J))?{h:W[1],s:W[2],l:W[3],a:W[4]}:(W=Xi.hsv.exec(J))?{h:W[1],s:W[2],v:W[3]}:(W=Xi.hsva.exec(J))?{h:W[1],s:W[2],v:W[3],a:W[4]}:(W=Xi.hex8.exec(J))?{a:Q0(W[1]),r:ci(W[2]),g:ci(W[3]),b:ci(W[4]),format:St?"name":"hex8"}:(W=Xi.hex6.exec(J))?{r:ci(W[1]),g:ci(W[2]),b:ci(W[3]),format:St?"name":"hex"}:(W=Xi.hex3.exec(J))?{r:ci(W[1]+""+W[1]),g:ci(W[2]+""+W[2]),b:ci(W[3]+""+W[3]),format:St?"name":"hex"}:!1}window.tinycolor=ae,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}var C=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),P=function(a){C(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.ppfx||"";return e.opts=t,e.ppfx=r,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return n.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},n.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.setValue=function(t,e){var r=this.model,o=t||r.get("defaults"),l=this.getInputEl();l&&(l.value=o)},n.prototype.handleModelChange=function(t,e,r){this.setValue(e,r)},n.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},n.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},n.prototype.getInputEl=function(){if(!this.inputEl){var t=this,e=t.model,r=t.opts,o=r.type||"text",l=e.get("placeholder")||e.get("defaults")||e.get("default")||"";this.inputEl=(0,M.default)('<input type="'.concat(o,'" placeholder="').concat(l,'">'))}return this.inputEl.get(0)},n.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},n}(x.G7);const q=P;P.prototype.events={change:"handleChange"};var at=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bt=function(){return bt=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},bt.apply(this,arguments)};M.default&&_(M.default);var gt=function(a){var n=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return n||t.replace(/ /g,"")},It=function(a){at(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},n.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,w.isUndefined)(e)||this.__onInputChange(e)},n.prototype.__onInputChange=function(t){var e=this,r=e.model,o=e.opts,l=o.onChange,f=t,d=this.getColorEl();if(d){d.spectrum("set",f);var h=d.spectrum("get"),g=f&&gt(h);g&&(f=g)}l?l(f):r.set({value:f},{fromInput:1})},n.prototype.setValue=function(t,e){e===void 0&&(e={});var r=this.model,o=(0,w.isUndefined)(e.def)?r.get("defaults"):e.def,l=(0,w.isUndefined)(t)?(0,w.isUndefined)(o)?"":o:t,f=this.getInputEl(),d=this.getColorEl(),h=l!="none"?l:"";f.value=l,d.get(0).style.backgroundColor=h,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(d.spectrum("set",h),this.noneColor=l=="none",this.movedColor=h)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,r=e.em,o=e.model,l=e.opts,f=this.ppfx,d=l.onChange,h=(0,M.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),g=h.get(0).style,y=r&&r.getConfig&&r.getConfig().colorPicker||{};this.movedColor="";var b=!1,k;this.$el.find("[data-colorp-c]").append(h);var V=function($,Q){Q===void 0&&(Q=!0),d?d($,!Q):(Q&&o.setValueFromInput(0,!1),o.setValueFromInput($,Q))};h.spectrum(bt(bt(bt({color:o.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color ").concat(f,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},y),o.get("colorPicker")||{}),{move:function($){var Q=gt($);t.movedColor=Q,g.backgroundColor=Q,V(Q,!1)},change:function($){b=!0;var Q=gt($);g.backgroundColor=Q,V(Q),t.noneColor=!1},show:function($){b=!1,t.movedColor="",k=d?o.getValue({noDefault:!0}):gt($)},hide:function(){!b&&(k||d)&&(t.noneColor&&(k=""),g.backgroundColor=k,h.spectrum("set",k),V(k,!1))}})),r&&r.on&&this.listenTo(r,"component:selected",function(){t.movedColor&&V(t.movedColor),b=!0,t.movedColor="",h.spectrum("hide")}),this.colorEl=h}return this.colorEl},n.prototype.render=function(){return q.prototype.render.call(this),this.getColorEl(),this},n}(q);const Ut=It;var Qt=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),se=function(a){Qt(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){return""},n.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),r=new Ut({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}),o=r.render();o.setValue(e,{fromTarget:1}),this.input=o.el}return this.input},n}(i);const ye=se;var le=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),we=function(a){le(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,w.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return n.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},n.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},n.prototype.setValue=function(t,e){var r=e||{},o=this.validateInputValue(t,{deepCheck:1}),l={value:o.value,unit:""};(o.unit||o.force)&&(l.unit=o.unit),this.model.set(l,r),r.silent&&this.handleModelChange()},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},n.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger("el:change")},n.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},n.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var r=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var f=l==t.get("unit")?"selected":"";r.push("<option ".concat(f,">").concat(l,"</option>"))});var o=document.createElement("div");o.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(r.join(""),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(t.get("value"));this.setValue(this.normalizeValue(r+e)),this.elementUpdated()},n.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),r=parseFloat(t.get("value"));this.setValue(this.normalizeValue(r-e)),this.elementUpdated()},n.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,Xt.on)(this.doc,"mousemove",this.moveIncrement),(0,Xt.on)(this.doc,"mouseup",this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,r=e.get("step"),o=this.current,l=this.normalizeValue(o.val+(o.y-t.pageY)*r),f=this.validateInputValue(l),d=f.value,h=f.unit;return this.prValue=d,e.set({value:d,unit:h},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,Xt.S1)(this.doc,"mouseup",this.upIncrement),(0,Xt.S1)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var r=this.prValue-e;t.set("value",r,{avoidStore:1}).set("value",r+e),this.elementUpdated()}},n.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var r=this.model,o=r.get("step"),l=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var f=o.toString().split(".")[1];l=f?f.length:0}return l?parseFloat(t.toFixed(l)):t},n.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var r=0,o=e||{},l=this.model,f="",d=(0,w.isUndefined)(t)?f:t,h=e.units||l.get("units")||[],g=l.get("unit")||h.length&&h[0]||"",y=(0,w.isUndefined)(e.max)?l.get("max"):e.max,b=(0,w.isUndefined)(e.min)?l.get("min"):e.min,k=!!l.get("limitlessMax"),V=!!l.get("limitlessMin");if(o.deepCheck){var $=l.get("fixedValues")||[];if(d===""&&(g=""),d){var Q=new RegExp("^"+$.join("|"),"g");if($.length&&Q.test(d))d=d.match(Q)[0],g="",r=1;else{var vt=d+"";d+="",d=parseFloat(d.replace(",",".")),d=isNaN(d)?f:d;var Mt=vt.replace(d,"");(0,w.indexOf)(h,Mt)>=0&&(g=Mt)}}}return!k&&!(0,w.isUndefined)(y)&&y!==""&&(d=d>y?y:d),!V&&!(0,w.isUndefined)(b)&&b!==""&&(d=d<b?b:d),{force:r,value:d,unit:g}},n.prototype.render=function(){q.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},n}(q);const Le=we;we.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var ke=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xe=function(a){ke(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,r=e.value,o=e.unit;return!(0,w.isUndefined)(r)&&r!==""?r+o:t.get("default")},n.prototype.getInputEl=function(){if(!this.input){var t=this,e=t.ppfx,r=t.model,o=this.getModelValue(),l=new Le({contClass:"".concat(e,"field-int"),type:"number",model:r,ppfx:e});l.render(),this.$input=l.inputEl,this.$unit=l.unitEl,r.set("value",o,{fromTarget:!0}),this.$input.val(o),this.input=l.el}return this.input},n}(i);const dr=Xe;var zr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wr=function(a){zr(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return n.prototype.templateInput=function(){var t=this,e=t.ppfx,r=t.clsField;return'<div class="'.concat(r,`">
      <div data-input></div>
      <div class="`).concat(e,`sel-arrow">
        <div class="`).concat(e,`d-s-arrow"></div>
      </div>
    </div>`)},n.prototype.getInputEl=function(){if(!this.$input){var t=this,e=t.model,r=t.em,o=e.get("name"),l=e.get("options")||[],f=[],d="<select>";l.forEach(function(y){var b="",k,V,$;(0,w.isString)(y)?(k=y,V=y):(k=y.name||y.label||y.value,V="".concat((0,w.isUndefined)(y.value)?y.id:y.value).replace(/"/g,"&quot;"),$=y.style?y.style.replace(/"/g,"&quot;"):"",b+=$?' style="'.concat($,'"'):"");var Q=r.t("traitManager.traits.options.".concat(o,".").concat(V))||k;d+='<option value="'.concat(V,'"').concat(b,">").concat(Q,"</option>"),f.push(V)}),d+="</select>",this.$input=(0,M.default)(d);var h=e.getTargetValue(),g=f.indexOf(h)>=0?h:e.get("default");!(0,w.isUndefined)(g)&&this.$input.val(g)}return this.$input.get(0)},n}(i);const kn=wr;var wn=vr(330),jr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dn="data-categories",Wr="data-no-categories",Ir=function(a){jr(n,a);function n(t,e){var r=a.call(this,t)||this;r.reuseView=!0,r.renderedCategories=new Map,r.itemsView=e;var o=t.config||{};r.config=o;var l=t.editor;r.em=l;var f=o.pStylePrefix||"";return r.ppfx=f,r.pfx=f+o.stylePrefix||"",r.className="".concat(r.pfx,"traits"),r.traitContClass="".concat(f,"traits-c"),r.classNoCat="".concat(f,"traits-empty-c"),r.catsClass="".concat(f,"trait-categories"),r.collection=new uo([],{em:l}),r.listenTo(l,"component:toggled",r.updatedCollection),r.updatedCollection(),r}return n.prototype.updatedCollection=function(){var t=this,e=t.ppfx,r=t.em,o=r.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=(o==null?void 0:o.traits)||new uo([],{em:r}),this.render()},n.prototype.add=function(t,e){var r=this,o=r.config,l=r.renderedCategories,f=this.itemView,d=t.get(this.itemType);this.itemsView&&this.itemsView[d]&&(f=this.itemsView[d]);var h=new f({config:o,model:t,attributes:t.get("attributes")}),g=h.render().el,y=t.parent.initCategory(t);if(y){var b=y.getId(),k=this.getCategoriesEl(),V=l.get(b);!V&&k&&(V=new Bi({model:y},o,"trait").render(),l.set(b,V),k.appendChild(V.el)),V==null||V.append(g);return}e?e.appendChild(g):this.append(g)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(dn,"]"))),this.catsEl},n.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(Wr,"]"))),this.traitsEl},n.prototype.append=function(t){var e=this.getTraitsEl();e==null||e.appendChild(t)},n.prototype.render=function(){var t=this,e=this,r=e.el,o=e.ppfx,l=e.catsClass,f=e.traitContClass,d=e.classNoCat,h=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,r.innerHTML=`
      <div class="`.concat(l,'" ').concat(dn,`></div>
      <div class="`).concat(d," ").concat(f,'" ').concat(Wr,`></div>
    `),this.collection.forEach(function(y){return t.add(y,h)}),this.append(h);var g="".concat(f,"s ").concat(o,"one-bg ").concat(o,"two-color");return this.$el.addClass(g),this.rendered=!0,this},n}(wn.Z);const Mr=Ir;Ir.prototype.itemView=i;var Cr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bn=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},xa=function(a){Cr(n,a);function n(t){var e=a.call(this,t,"TraitManager",pp)||this;e.TraitsView=Mr,e.events=so,e.state=new x.Hn({traits:[]}),e.types={text:i,number:dr,select:kn,checkbox:m,color:ye,button:u};var r=e,o=r.state,l=r.config,f=r.events,d=l.pStylePrefix;d&&(l.stylePrefix="".concat(d).concat(l.stylePrefix)),(0,w.bindAll)(e,"__onSelect");var h=(0,w.debounce)(function(){return e.__upSel()},0),g=(0,w.debounce)(function(){return e.__onUp()},0);return o.listenTo(t,"component:toggled",h),o.listenTo(t,f.value,g),o.on("change:traits",e.__onSelect),e.debounced=[h,g],e}return n.prototype.select=function(t){var e=(t==null?void 0:t.getTraits())||[];this.state.set({component:t,traits:e}),this.__trgCustom()},n.prototype.getCategories=function(){var t,e=this.getComponent(),r=((t=e==null?void 0:e.traits.categories)===null||t===void 0?void 0:t.models)||[];return bn([],r,!0)},n.prototype.getTraits=function(){return this.getCurrent()},n.prototype.getTraitsByCategory=function(t){return ja(t||this.getTraits())},n.prototype.getComponent=function(){return this.state.attributes.component},n.prototype.addType=function(t,e){var r=this.getType("text");this.types[t]=r.extend(e)},n.prototype.getType=function(t){return this.getTypes()[t]},n.prototype.getTypes=function(){return this.types},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.getCurrent=function(){return this.state.get("traits")||[]},n.prototype.render=function(){var t=this.view,e=this.em;return t=new Mr({el:t==null?void 0:t.el,collection:[],editor:e,config:this.getConfig()},this.getTypes()),this.view=t,t.el},n.prototype.postRender=function(){this.__appendTo()},n.prototype.__onSelect=function(){var t=this,e=t.em,r=t.events,o=t.state,l=o.attributes,f=l.component,d=l.traits;e.trigger(r.select,{component:f,traits:d})},n.prototype.__trgCustom=function(t){t===void 0&&(t={});var e=this,r=e.em,o=e.events,l=e.__ctn;this.__ctn=l||t.container,r.trigger(o.custom,this.__customData())},n.prototype.__customData=function(){return{container:this.__ctn}},n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getComponent())},n}(jt);const si=xa;var an={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};const bo=an;var Kr=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bu=function(a){Kr(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var r=t.config||{};e.config=r,e.parentView=t.parentView;var o=r.stylePrefix||"",l=r.pStylePrefix||"",f=e.collection;e.listenTo(f,"add",e.addTo),e.listenTo(f,"reset resetNavigator",e.render),e.listenTo(f,"remove",e.removeChildren),e.className="".concat(o,"layers");var d=r.em;if(r.sortable&&!e.opt.sorter){var h=d.Utils;e.opt.sorter=new h.Sorter({container:r.sortContainer||e.el,containerSel:".".concat(e.className),itemSel:".".concat(o,"layer"),ignoreViewChildren:1,avoidSelectOnEnd:1,nested:1,ppfx:l,pfx:o,em:d})}return e.$el.data("collection",f),t.parent&&e.$el.data("model",t.parent),e}return n.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var o=this,l=o.parentView,f=o.opt,d=o.config,h=f.ItemView,g=f.opened,y=f.module,b=f.level,k=f.sorter,V=e||null,$=new h({ItemView:h,level:b,model:t,parentView:l,config:d,sorter:k,opened:g,module:y}),Q=$.render().el;if(V)V.appendChild(Q);else if(typeof r<"u"){var vt="before";this.$el.children().length==r&&(r--,vt="after"),r<0?this.$el.append(Q):this.$el.children().eq(r)[vt](Q)}else this.$el.append(Q);return this.items.push($),Q},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x.G7.prototype.remove.apply(this,t),this.items.map(function(r){return r.remove()}),this},n.prototype.render=function(){var t=this,e=document.createDocumentFragment(),r=this.el;return r.innerHTML="",this.collection.each(function(o){return t.addToCollection(o,e)}),r.appendChild(e),r.className=this.className,this},n}(x.G7);const Do=bu;var jo=vr(790),Wi={stylePrefix:"com-",defaults:{},strict:!0};const hn=Wi;var Sa=vr(713),Cu=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gc=function(){return Gc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Gc.apply(this,arguments)},cd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},fd=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],pd={preserveSelected:1},dd=function(a){return function(n){return a.trigger("".concat(Va,":start"),n)}},hd=function(a){return function(n){return a.trigger(Va,n)}},vd=function(a,n,t){return t===void 0&&(t={}),function(e,r,o){n.forEach(function(l){return l.set("status",l.get("selectable")?"selected":"")}),a.setSelected(n),n[0].emitUpdate(),a.trigger("".concat(Va,":end"),o),setTimeout(function(){return a.runDefault(pd)}),(t.altMode||o.cancelled)&&a.set("_cmpDrag",1)}},zh=function(a){Cu(n,a);function n(t){var e=a.call(this,t,"Commands",hn)||this;e.CommandAbstract=jo.default,e.defaultCommands={},e.commands={},e.active={},e.events=Sa.Z;var r=e.config,o=r.pStylePrefix,l=e.defaultCommands;o&&(r.stylePrefix=o+r.stylePrefix),Object.keys(r.defaults).forEach(function(d){var h=r.defaults[d];h.id&&e.add(h.id,h)}),l["tlb-delete"]={run:function(d){return d.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(d){d.runCommand("core:copy"),d.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(d,h,g){var y;g===void 0&&(g={});var b=d.getModel(),k=g.event,V=g.target,$=V?[V]:cd([],d.getSelectedAll(),!0),Q=$.map(function(hr){var ae,ln;return((ln=(ae=hr.delegate)===null||ae===void 0?void 0:ae.move)===null||ln===void 0?void 0:ln.call(ae,hr))||hr}).filter(Boolean),vt=Q[0],Mt=(k==null?void 0:k.type)==="dragstart",kt=["absolute","translate"];if(!(vt!=null&&vt.get("draggable")))return b.logWarning("The element is not draggable");var Gt=vt.get("dmode")||b.get("dmode"),fe=function(){return b.stopDefault(pd)},Oe=(0,w.includes)(kt,Gt);Q.forEach(function(hr){return hr.trigger("disable",{fromMove:!0})}),Mt?setTimeout(fe,0):fe();var Ve=dd(b),pe=hd(b),Ue=vd(b,Q,{altMode:Oe});if(Oe)d.runCommand("core:component-drag",{guidesInfo:1,mode:Gt,target:vt,onStart:Ve,onDrag:pe,onEnd:Ue,event:k});else{Mt&&k.dataTransfer.setDragImage((y=vt.view)===null||y===void 0?void 0:y.el,0,0);var Ze=d.Commands.get("move-comp");Ze.onStart=Ve,Ze.onDrag=pe,Ze.onEndMoveFromModel=Ue,Ze.initSorterFromModels(Q)}Q.filter(function(hr){return hr.get("selectable")}).forEach(function(hr){return hr.set("status","freezed-selected")})}},l["core:undo"]=function(d){return d.UndoManager.undo()},l["core:redo"]=function(d){return d.UndoManager.redo()},fd.forEach(function(d){var h=d[2],g=vr(828)("./".concat(d[1])).default,y="core:".concat(d[0]);l[y]=g,h&&(l[h]=g,["run","stop"].forEach(function(b){t.on("".concat(b,":").concat(h),function(){for(var k=[],V=0;V<arguments.length;V++)k[V]=arguments[V];return t.trigger.apply(t,cd(["".concat(b,":").concat(y)],k,!1))})}))}),r.model=t.Canvas;for(var f in l)e.add(f,l[f]);return e}return n.prototype.add=function(t,e){var r=(0,w.isFunction)(e)?{run:e}:e;return r.stop||(r.noStop=!0),delete r.initialize,r.id=t,this.commands[t]=jo.default.extend(r),this},n.prototype.get=function(t){var e=this.commands[t];return(0,w.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},n.prototype.extend=function(t,e){e===void 0&&(e={});var r=this.get(t);if(r){var o=Gc(Gc({},r.constructor.prototype),e);this.add(t,o);var l=fd.filter(function(f){return"core:".concat(f[0])===t&&f[2]})[0];l&&this.add(l[2],o)}return this},n.prototype.has=function(t){return!!this.commands[t]},n.prototype.getAll=function(){return this.commands},n.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},n.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},n.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},n.prototype.getActive=function(){return this.active},n.prototype.runCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var o=this,l=o.em,f=o.config,d=t.id,h=l.Editor;(!this.isActive(d)||e.force||!f.strict)&&(r=h&&t.callRun(h,e),d&&t.stop&&!t.noStop&&!e.abort&&(this.active[d]=r))}return r},n.prototype.stopCommand=function(t,e){e===void 0&&(e={});var r;if(t&&t.run){var o=this,l=o.em,f=o.config,d=t.id,h=l.Editor;(this.isActive(d)||e.force||!f.strict)&&(d&&delete this.active[d],r=t.callStop(h,e))}return r},n.prototype.create=function(t){t.stop||(t.noStop=!0);var e=jo.default.extend(t);return new e(this.config)},n.prototype.__onRun=function(t,e){var r=this,o=r.em,l=r.events;o.on("".concat(l.runCommand).concat(t),e)},n.prototype.__onStop=function(t,e){var r=this,o=r.em,l=r.events;o.on("".concat(l.stopCommand).concat(t),e)},n.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},n}(jt);const Wh=zh;var Kh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gd="contentEditable",Gh=function(a){Kh(n,a);function n(t){var e=a.call(this,t)||this;(0,w.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var r=e,o=r.model,l=r.pfx,f=r.ppfx,d=o.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(d," no-select ").concat(f,"two-color"),e.inputNameCls="".concat(f,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return n.prototype.events=function(){return{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-open]":"toggleOpening","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","mouseout [data-toggle-select]":"handleHoverOut","dblclick [data-name]":"handleEdit","keydown [data-name]":"handleEditKey","focusout [data-name]":"handleEditEnd"}},n.prototype.template=function(t){var e=this,r=e.pfx,o=e.ppfx,l=e.config,f=e.clsNoEdit,d=e.module,h=e.opt,g=e.em,y=l.hidable,b=d.getComponents(t).length,k=b?"":this.clsNoChild,V="".concat(this.clsTitle," ").concat(k),$="".concat(this.clsTitleC),Q="".concat(this.inputNameCls," ").concat(f," ").concat(o,"no-app"),vt=h.level||0,Mt="".concat(vt*10,"px"),kt=t.getName(),Gt=t.getIcon(),fe="".concat(r,"layer"),Oe=(g==null?void 0:g.getConfig()).icons,Ve=Oe,pe=Ve.move,Ue=Ve.eye,Ze=Ve.eyeOff,hr=Ve.chevron;return`
      <div class="`.concat(r,"layer-item ").concat(o,`one-bg" data-toggle-select>
        <div class="`).concat(r,`layer-item-left">
          `).concat(y?'<i class="'.concat(r,`layer-vis" data-toggle-visible>
                <i class="`).concat(r,'layer-vis-on">').concat(Ue,`</i>
                <i class="`).concat(r,'layer-vis-off">').concat(Ze,`</i>
              </i>`):"",`
          <div class="`).concat($,`">
            <div class="`).concat(V,'" style="padding-left: ').concat(Mt,`">
              <div class="`).concat(r,'layer-title-inn" title="').concat(kt,`">
                <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(hr,`</i>
                  `).concat(Gt?'<span class="'.concat(fe,'__icon">').concat(Gt,"</span>"):"",`
                <span class="`).concat(Q,'" data-name>').concat(kt,`</span>
              </div>
            </div>
          </div>
        </div>
        <div class="`).concat(r,`layer-item-right">
          <div class="`).concat(this.clsCount,'" data-count>').concat(b||"",`</div>
          <div class="`).concat(this.clsMove,'" data-toggle-move>').concat(pe||"",`</div>
        </div>
      </div>
      <div class="`).concat(this.clsChildren,`"></div>
    `)},Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),n.prototype.initComponent=function(){var t=this,e=this,r=e.model,o=e.config,l=o.onInit,f=r.components();this.listenTo(f,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(d){return t.listenTo(r,d[0],d[1])}),this.$el.data("model",r),this.$el.data("collection",f),r.viewLayer=this,l.bind(this)({component:r,render:this.__render,listenTo:this.listenTo})},n.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},n.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},n.prototype.updateVisibility=function(){var t=this,e=t.pfx,r=t.model,o=t.module,l="".concat(e,"layer-hidden"),f=!o.isVisible(r),d=f?"addClass":"removeClass";this.$el[d](l),this.getVisibilityEl()[d]("".concat(e,"layer-off"))},n.prototype.toggleVisibility=function(t){t==null||t.stopImmediatePropagation();var e=this,r=e.module,o=e.model;r.setVisible(o,!r.isVisible(o))},n.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName();d[gd]="true",d.focus(),document.execCommand("selectAll",!1),r.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(l).addClass(f)},n.prototype.handleEditKey=function(t){t.stopPropagation(),((0,Xt.kl)(t)||(0,Xt.r$)(t))&&this.handleEditEnd(t)},n.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,r=e.em,o=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName(),h=d.textContent;d.scrollLeft=0,d[gd]="false",this.setName(h,{component:this.model,propName:"custom-name"}),r.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(l).removeClass(f),this.updateName()},n.prototype.setName=function(t,e){var r=e.propName;this.model.set(r,t)},n.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},n.prototype.updateOpening=function(){var t=this,e=t.$el,r=t.model,o=t.pfx,l="open",f="".concat(o,"layer-open"),d=this.getCaret();this.module.isOpen(r)?(e.addClass(l),d.addClass(f)):(e.removeClass(l),d.removeClass(f))},n.prototype.toggleOpening=function(t){var e=this,r=e.model,o=e.module;t==null||t.stopImmediatePropagation(),r.get("components").length&&o.setOpen(r,!o.isOpen(r))},n.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{selected:!0},{event:t})},n.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{hovered:!0})},n.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this,r=e.module,o=e.model;r.setLayerData(o,{hovered:!1})},n.prototype.startSort=function(t){var e,r,o;t.stopPropagation();var l=this,f=l.em,d=l.sorter,h=l.model;if(!(t.button&&t.button!==0)&&d){var g=((r=(e=h.delegate)===null||e===void 0?void 0:e.move)===null||r===void 0?void 0:r.call(e,h))||h;d.onStart=dd(f),d.onMoveClb=hd(f),d.onEndMove=vd(f,[g]);var y=((o=g.viewLayer)===null||o===void 0?void 0:o.el)||t.target;d.startSort(y)}},n.prototype.updateStatus=function(){Hr.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},n.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},n.prototype.checkChildren=function(){var t=this,e=t.model,r=t.clsNoChild,o=t.module,l=o.getComponents(e).length,f=this.getItemContainer(),d=f.find(".".concat(this.clsTitle)),h=f.find("[data-count]");d[l?"removeClass":"addClass"](r),h.html("".concat(l||"")),!l&&o.setOpen(e,!1)},n.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},n.prototype.setRoot=function(t){var e,r=(0,w.isString)(t)?(e=this.em.getWrapper())===null||e===void 0?void 0:e.find(t)[0]:t;r&&(this.stopListening(),this.model=r,this.initComponent(),this._rendered&&this.render())},n.prototype.updateLayerable=function(){var t=this.parentView,e=t||this;e.render()},n.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},n.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x.G7.prototype.remove.apply(this,t),this.__clearItems(),this},n.prototype.render=function(){var t=this,e=t.model,r=t.config,o=t.pfx,l=t.ppfx,f=t.opt,d=t.sorter;this.__clearItems();var h=f.opened,g=f.module,y=f.ItemView,b=!g.__isLayerable(e),k=this.$el.empty(),V=f.level+1;delete this.inputName,this.items=new Do({ItemView:y,collection:e.get("components"),config:r,sorter:d,opened:h,parentView:this,parent:e,level:V,module:g});var $=this.items.render().$el;return!r.showWrapper&&V===1?k.append($):(k.html(this.template(e)),k.find(".".concat(this.clsChildren)).append($)),(!e.get("draggable")||!r.sortable)&&k.children(".".concat(this.clsMove)).remove(),!g.isVisible(e)&&(this.className+=" ".concat(o,"hide")),b&&(this.className+=" ".concat(l,"hidden")),k.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},n.prototype.__render=function(){var t=this,e=t.model,r=t.config,o=t.el,l=r.onRender,f={component:e,el:o};l.bind(this)(f),this.em.trigger("layer:render",f)},n}(x.G7);const $h=Gh;var qh=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hp=function(){return hp=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},hp.apply(this,arguments)},md="layer",vp="".concat(md,":"),yd="".concat(vp,"root"),_d="".concat(vp,"component"),Yh="".concat(vp,"custom"),Xh={all:md,root:yd,component:_d,custom:Yh},gp={mediaText:""},Zh=["open","status","locked","custom-name","components","classes"].map(function(a){return"component:update:".concat(a)}).join(" "),Jh=function(a){return a===void 0&&(a={}),(a.display||"").trim().indexOf("none")===0},Qh=function(a){qh(n,a);function n(t){var e=a.call(this,t,"LayerManager",bo)||this;return e.events=Xh,(0,w.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new te.Z(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return n.prototype.onLoad=function(){var t=this,e=this,r=e.em,o=e.config,l=e.model;l.listenTo(r,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(r,Zh,this.__onComponent),this.componentChanged(),l.listenToOnce(r,"load",function(){t.setRoot(o.root),t.__appendTo()})},n.prototype.setRoot=function(t){var e=this.em.getWrapper(),r=(0,Y.isComponent)(t)?t:e;return t&&(0,w.isString)(t)&&(0,Y.hasWin)()&&(r=e.find(t)[0]||e),this.model.set("root",r),r},n.prototype.getRoot=function(){return this.model.get("root")},n.prototype.getComponents=function(t){var e=this;return t.components().filter(function(r){return e.__isLayerable(r)})},n.prototype.setOpen=function(t,e){t.set("open",e)},n.prototype.isOpen=function(t){return!!t.get("open")},n.prototype.setVisible=function(t,e){var r="__prev-display",o=t.getStyle(gp),l=o.display;if(e){var f=t.get(r);delete o.display,f&&(o.display=f,t.unset(r))}else l&&t.set(r,l),o.display="none";t.setStyle(o,gp),this.updateLayer(t),this.em.trigger("component:toggled")},n.prototype.isVisible=function(t){return!Jh(t.getStyle(gp))},n.prototype.setLocked=function(t,e){t.set("locked",e)},n.prototype.isLocked=function(t){return!!t.get("locked")},n.prototype.setName=function(t,e){t.set("custom-name",e)},n.prototype.getName=function(t){return t.getName()},n.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},n.prototype.setLayerData=function(t,e,r){var o;r===void 0&&(r={});var l=this,f=l.em,d=l.config,h=e.open,g=e.selected,y=e.hovered,b=e.visible,k=e.locked,V=e.name,$=hp({fromLayers:!0},r);if((0,Y.isDef)(h)&&this.setOpen(t,h),(0,Y.isDef)(g))if(g){f.setSelected(t,$);var Q=d.scrollCanvas;Q&&((o=t.views)===null||o===void 0||o.forEach(function(vt){return vt.scrollIntoView(Q)}))}else f.removeSelected(t,$);(0,Y.isDef)(y)&&d.showHover&&(y?f.setHovered(t,$):f.setHovered(null,$)),(0,Y.isDef)(b)&&b!==this.isVisible(t)&&this.setVisible(t,b),(0,Y.isDef)(k)&&this.setLocked(t,k),(0,Y.isDef)(V)&&this.setName(t,V)},n.prototype.componentChanged=function(t,e){var r;if(e===void 0&&(e={}),!e.fromLayers){var o=this,l=o.em,f=o.config,d=f.scrollLayers,h=this.model.get("opened"),g=l.getSelected(),y=g==null?void 0:g.parent();for(var b in h)h[b].set("open",!1),delete h[b];for(;y;)y.set("open",!0),h[y.cid]=y,y=y.parent();if(g&&d){var k=(r=g.viewLayer)===null||r===void 0?void 0:r.el;k==null||k.scrollIntoView(d)}}},n.prototype.getAll=function(){return this.view},n.prototype.render=function(){var t,e,r=this,o=r.config,l=r.model,f=$h.extend(o.extend);return this.view=new f({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:f,level:0,config:o,opened:l.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},n.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},n.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(yd,e),this.__trgCustom()},n.prototype.__onComponent=function(t){this.updateLayer(t)},n.prototype.__isLayerable=function(t){var e=t.get("tagName"),r=this.config.hideTextnode,o=!r||!t.isInstanceOf("textnode")&&e!=="br";return o&&t.get("layerable")},n.prototype.__trgCustom=function(t){var e=this,r=e.__ctn,o=e.em,l=e.events;this.__ctn=r||(t==null?void 0:t.container),o.trigger(l.custom,{container:this.__ctn,root:this.getRoot()})},n.prototype.updateLayer=function(t,e){this.em.trigger(_d,t,e)},n}(jt);const tv=Qh;var ev={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};const rv=ev;var nv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wd=function(a){nv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,w.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{type:"",src:""}},n.prototype.getType=function(){return this.get("type")},n.prototype.getSrc=function(){return this.get("src")},n.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},n.prototype.getExtension=function(){return this.getFilename().split(".").pop()},n}(x.Hn);const mp=wd;wd.prototype.idAttribute="src";var ov=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$c=function(){return $c=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},$c.apply(this,arguments)},iv=function(a){ov(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return $c($c({},mp.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},n}(mp);const av=iv;var sv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lv=function(a){sv(n,a);function n(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var r=t.config||{};e.config=r,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.em=r.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var o=e.init&&e.init.bind(e);return o&&o(t),e}return n.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},n.prototype.template=function(t,e){var r=this.pfx;return`
      <div class="`.concat(r,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(r,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(r,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},n.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,w.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},n.prototype.getPreview=function(){return""},n.prototype.getInfo=function(){return""},n.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},n}(x.G7);const uv=lv;var cv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bd=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},Cd=function(a){cv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getPreview=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.model,l=o.get("src");return st(xd||(xd=bd([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,l,e,r)},n.prototype.getInfo=function(){var t=this,e=t.pfx,r=t.model,o=r.get("name"),l=r.get("width"),f=r.get("height"),d=r.get("unitDim"),h=l&&f?"".concat(l,"x").concat(f).concat(d):"";return o=o||r.getFilename(),st(Sd||(Sd=bd([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),e,o,e,h)},n.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},n.prototype.onClick=function(){var t=this,e=t.model,r=t.pfx,o=this.__getBhv().select,l=this.config.onClick,f=this.collection;f.trigger("deselectAll"),this.$el.addClass(r+"highlight"),(0,w.isFunction)(o)?o(e,!1):(0,w.isFunction)(l)?l(e):this.updateTarget(f.target)},n.prototype.onDblClick=function(){var t=this,e=t.em,r=t.model,o=this.__getBhv().select,l=this.config.onDblClick,f=this.collection,d=f.target,h=f.onSelect;(0,w.isFunction)(o)?o(r,!0):(0,w.isFunction)(l)?l(r):(this.updateTarget(d),e==null||e.Modal.close()),(0,w.isFunction)(h)&&h(r)},n.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},n}(uv);const fv=Cd;Cd.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var xd,Sd,qc=function(){return qc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},qc.apply(this,arguments)},pv={types:[],initialize:function(a,n){var t=this;n===void 0&&(n={});var e=n.em;this.em=e,this.opts=n,this.model=function(o,l){o===void 0&&(o={}),l===void 0&&(l={});var f,d,h;if(o&&o.type){var g=t.getBaseType();h=t.getType(o.type),f=h?h.model:g.model,d=h?h.view:g.view}else{var y=t.recognizeType(o);h=y.type,f=h.model,d=h.view,o=y.attributes}var b=new f(o,qc(qc({},l),{em:e}));return b.typeView=d,b};var r=this.init&&this.init.bind(this);r&&r()},recognizeType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t],r=e.isType(a);if(r=typeof r=="boolean"&&r?{type:e.id}:r,r)return{type:e,attributes:r}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var n=this.getTypes(),t=0;t<n.length;t++){var e=n[t];if(e.id===a)return e}},addType:function(a,n){var t=this.getType(a),e=this.getBaseType(),r=t?t.model:e.model,o=t?t.view:e.view,l=n.model,f=n.view,d=n.isType;l=l instanceof x.Hn||(0,w.isFunction)(l)?l:r.extend(l||{}),f=f instanceof x.G7||(0,w.isFunction)(f)?f:o.extend(f||{}),this.extendViewApi&&!n.model&&!n.view&&(f=f.extend(n)),t?(t.model=l,t.view=f,t.isType=d||t.isType):(n.id=a,n.model=l,n.view=f,n.isType=d||function(h){if(h&&h.type==a)return!0},this.getTypes().unshift(n))}};const Od=pv;var dv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hv=x.FE.extend(Od),Td=function(a){dv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(hv);const yp=Td;Td.prototype.types=[{id:"image",model:av,view:fv,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var _p;(function(a){a.add="asset:add",a.remove="asset:remove",a.removeBefore="asset:remove:before",a.update="asset:update",a.open="asset:open",a.close="asset:close",a.uploadStart="asset:upload:start",a.uploadEnd="asset:upload:end",a.uploadError="asset:upload:error",a.uploadResponse="asset:upload:response",a.custom="asset:custom",a.all="asset"})(_p||(_p={}));const Ed=_p;var vv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pd=function(a){vv(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var r=e.collection;return e.listenTo(r,"reset",e.renderAssets),e.listenTo(r,"add",e.addToAsset),e.listenTo(r,"remove",e.removedAsset),e.listenTo(r,"deselectAll",e.deselectAll),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,o=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(r,"field ").concat(e,`add-field">
              <input placeholder="`).concat(o==null?void 0:o.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(r,'btn-prim">').concat(o==null?void 0:o.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},n.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),r=e&&e.value.trim(),o=this.config.handleAdd;if(r){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),o?o.bind(this)(r):this.options.globalCollection.add(r,{at:0})}},n.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},n.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},n.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},n.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},n.prototype.addAsset=function(t,e){e===void 0&&(e=null);var r=e,o=this.collection,l=this.config,f=new t.typeView({model:t,collection:o,config:l}).render().el;if(r)r.appendChild(f);else{var d=this.getAssetsEl();d&&d.insertBefore(f,d.firstChild)}return f},n.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var r=this.config.noAssets;r&&e.append(r)}},n.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},n.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),r=this.$el.find(".".concat(this.pfx,"assets"));r.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(o){return t.addAsset(o,e)}),r.append(e)},n.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},n}(x.G7);const gv=Pd;Pd.prototype.events={submit:"handleSubmit"};var mv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yv=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},_v=function(a){mv(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var r=t.config||{};e.module=t.module,e.config=r,e.em=e.config.em,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=r.disableUpload!==void 0?r.disableUpload:!r.upload&&!r.embedAsBase64,e.multiUpload=r.multiUpload!==void 0?r.multiUpload:!0;var o=r.uploadFile;return o?e.uploadFile=o.bind(e):!r.upload&&r.embedAsBase64&&(e.uploadFile=n.embedAsBase64),e.delegateEvents(),e}return n.prototype.template=function(t){var e=t.pfx,r=t.title,o=t.uploadId,l=t.disabled,f=t.multiUpload;return st(Ad||(Ad=yv([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,r,o,l?"disabled":"",f?"multiple":"")},n.prototype.events=function(){return{"change [data-input]":"uploadFile"}},n.prototype.onUploadStart=function(){var t=this.module;t==null||t.__propEv(t.events.uploadStart)},n.prototype.onUploadEnd=function(t){var e=this,r=e.$el,o=e.module;o==null||o.__propEv(o.events.uploadEnd,t);var l=r.find("input");l&&l.val("")},n.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e==null||e.__propEv(e.events.uploadError,t)},n.prototype.onUploadResponse=function(t,e){var r=this,o=r.module,l=r.config,f=r.target,d;try{d=typeof t=="string"?JSON.parse(t):t}catch{d=t}o==null||o.__propEv(o.events.uploadResponse,d),l.autoAdd&&f&&f.add(d.data,{at:0}),this.onUploadEnd(t),e==null||e(d)},n.prototype.uploadFile=function(t,e){var r=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,f=l.beforeUpload,d=f&&f(o);if(d!==!1){var h=new FormData,g=l.params,y=l.customFetch,b=l.fetchOptions;for(var k in g)h.append(k,g[k]);if(this.multiUpload)for(var V=0;V<o.length;V++)h.append("".concat(l.uploadName).concat(l.multiUploadSuffix),o[V]);else o.length&&h.append(l.uploadName,o[0]);var $=l.upload,Q=l.headers,vt="X-Requested-With";if(typeof Q[vt]>"u"&&(Q[vt]="XMLHttpRequest"),$){this.onUploadStart();var Mt={method:"post",credentials:l.credentials||"include",headers:Q,body:h},kt=(b==null?void 0:b(Mt))||Mt,Gt=y?y($,kt):vl($,kt).then(function(fe){return(fe.status/200|0)==1?fe.text():fe.text().then(function(Oe){return Promise.reject(Oe)})});return Gt.then(function(fe){return r.onUploadResponse(fe,e)}).catch(function(fe){return r.onUploadError(fe)})}}},n.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(r){e.className="",r.preventDefault(),t.uploadFile(r)})}},n.prototype.initDropzone=function(t){var e=this,r=0,o=this.config,l=t.model,f=t.el,d=l.Editor,h=l.Canvas.getBody(),g=this.ppfx,y="".concat(g,"dropzone-active"),b="".concat(g,"dropzone"),k=function(){f.className=f.className.replace(y,"").trim(),r=0},V=function(){return r||(f.className+=" ".concat(y),r=1),!1},$=function(){return k(),!1},Q=function(vt){if(k(),vt.preventDefault(),vt.stopPropagation(),e.uploadFile(vt),o.openAssetsOnDrop&&d){var Mt=d.getSelected();d.runCommand("open-assets",{target:Mt,onSelect:function(){d.Modal.close(),d.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(b,'">').concat(o.dropzoneContent,"</div>")),k(),"draggable"in f&&[f,h].forEach(function(vt){vt.ondragover=V,vt.ondragleave=$,vt.ondrop=Q})},n.prototype.render=function(){var t=this,e=t.$el,r=t.pfx,o=t.em;return e.html(this.template({title:o&&o.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:r})),this.initDrop(),e.attr("class",r+"file-uploader"),this},n.embedAsBase64=function(t,e){var r=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(!FileReader){this.onUploadError(new Error("Unsupported platform, FileReader is not defined"));return}for(var f=[],d=/^(.+)\/(.+)$/,h=function(k){var V=new Promise(function($,Q){var vt=new FileReader;vt.addEventListener("load",function(Mt){var kt,Gt=k.name,fe=d.exec(k.type);if(fe?kt=fe[1]:kt=k.type,kt==="image"){var Oe={src:vt.result,name:Gt,type:kt,height:0,width:0},Ve=new Image;Ve.addEventListener("error",function(pe){Q(pe)}),Ve.addEventListener("load",function(){Oe.height=Ve.height,Oe.width=Ve.width,$(Oe)}),Ve.src=Oe.src}else $(kt?{src:vt.result,name:Gt,type:kt}:vt.result)}),vt.addEventListener("error",function(Mt){Q(Mt)}),vt.addEventListener("abort",function(Mt){Q("Aborted")}),vt.readAsDataURL(k)});f.push(V)},g=0,y=o;g<y.length;g++){var b=y[g];h(b)}return Promise.all(f).then(function(k){l.data=k,r.onUploadResponse(l,e)},function(k){r.onUploadError(k)})},n}(x.G7);const wv=_v;var Ad,bv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yl=function(){return yl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},yl.apply(this,arguments)},kd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},xu="open-assets",Cv=function(a){bv(n,a);function n(t){var e=a.call(this,t,"AssetManager",new yp([],t),Ed,rv)||this;e.storageKey="assets",e.Asset=mp,e.Assets=yp,e.events=Ed;var r=e,o=r.all,l=r.config;e.assetsVis=new yp([]);var f=l.pStylePrefix;return f&&(l.stylePrefix="".concat(f).concat(l.stylePrefix)),o.on("add",function(d){return e.getAllVisible().add(d)}),o.on("remove",function(d){return e.getAllVisible().remove(d)}),e.__onAllEvent=(0,w.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.open=function(t){t===void 0&&(t={});var e=this.em.Commands;e.run(xu,yl({types:["image"],select:function(){}},t))},n.prototype.close=function(){var t=this.em.Commands;t.stop(xu)},n.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(xu))},n.prototype.add=function(t,e){return e===void 0&&(e={}),typeof e.at>"u"&&(e.at=0),this.all.add(t,e)},n.prototype.get=function(t){return this.all.where({src:t})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.getContainer=function(){var t,e=this.__getBehaviour();return e.container||((t=this.am)===null||t===void 0?void 0:t.el)},n.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},n.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var r=this.__viewParams();r.fu=this.FileUploader(),this.am=new gv(yl({},r)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(t,e){this.getAll().addType(t,e)},n.prototype.getType=function(t){return this.getAll().getType(t)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new wv(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this,r=e.em,o=e.events;r.Commands.__onRun(xu,function(){return t.__propEv(o.open)}),r.Commands.__onStop(xu,function(){return t.__propEv(o.close)})},n.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},n.prototype.setTarget=function(t){this.assetsVis.target=t},n.prototype.onSelect=function(t){this.assetsVis.onSelect=t},n.prototype.onClick=function(t){this.config.onClick=t},n.prototype.onDblClick=function(t){this.config.onDblClick=t},n.prototype.__propEv=function(t){for(var e,r,o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];(e=this.em).trigger.apply(e,kd([t],o,!1)),(r=this.getAll()).trigger.apply(r,kd([t],o,!1))},n.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;!t.container&&!e.open||this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(r,o){return t.remove(r,o)},select:function(r,o){var l=t.add(r);(0,w.isFunction)(e.select)&&e.select(l,o)},options:e.options||{}}},n.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=yl(yl({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(t){return this._bhv||{}},n.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},n}(Tt);const xv=Cv;var Sv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ov=function(a){Sv(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t,e)||this,o=e.em,l={};r.em=o,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(h){return r.unset(h)}));var f=t.frames||[l],d=new De(o.Canvas,f);return d.page=r,r.set("frames",d),!r.getId()&&r.set("id",o==null?void 0:o.Pages._createId()),o==null||o.UndoManager.add(d),r}return n.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get("frames")},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get("name")},n.prototype.setName=function(t){return this.set({name:t})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},n.prototype.toJSON=function(t){t===void 0&&(t={});var e=x.Hn.prototype.toJSON.call(this,t),r=(0,w.result)(this,"defaults");return(0,w.forEach)(e,function(o,l){l.indexOf("_")===0&&delete e[l]}),(0,w.forEach)(r,function(o,l){e[l]===o&&delete e[l]}),e},n}(x.Hn);const wp=Ov;var Tv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yc=function(){return Yc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Yc.apply(this,arguments)},Ev=function(a){Tv(n,a);function n(t,e){var r=a.call(this,t)||this;return r.on("reset",r.onReset),r.on("remove",r.onRemove),r.model=function(o,l){return l===void 0&&(l={}),new wp(o,Yc(Yc({},l),{em:e}))},r}return n.prototype.onReset=function(t,e){var r=this,o;(o=e==null?void 0:e.previousModels)===null||o===void 0||o.map(function(l){return r.onRemove(l)})},n.prototype.onRemove=function(t){t==null||t.onRemove()},n}(x.FE);const Pv=Ev;var Av=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kv=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Md="change:selected",Ld="main",Mv=function(a){Av(n,a);function n(t){var e=a.call(this,t,"PageManager",new Pv([],t),cr)||this;e.events=cr,e.storageKey="pages",(0,w.bindAll)(e,"_onPageChange");var r=new te.Z({_undo:!0});return e.model=r,e.pages.on("reset",function(o){return o.at(0)&&e.select(o.at(0))}),e.pages.on("all",e.__onChange,e),r.on(Md,e._onPageChange),e}return Object.defineProperty(n.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),n.prototype.getAll=function(){return kv([],this.all.models,!0)},n.prototype.__onChange=function(t,e,r,o){var l=this,f=l.em,d=l.events,h=o||r;f.trigger(d.all,{event:t,page:e,options:h})},n.prototype.onLoad=function(){var t,e=this,r=e.pages,o=e.config,l=e.em,f={silent:!0},d=((t=o.pages)===null||t===void 0?void 0:t.map(function(g){return new wp(g,{em:l,config:o})}))||[];r.add(d,f);var h=r.length?this._initPage():this.add({type:Ld},f);h&&this.select(h,f)},n.prototype._onPageChange=function(t,e,r){var o=this,l=o.em,f=o.events,d=l.Layers,h=e.getMainComponent();d&&h&&d.setRoot(h),l.trigger(f.select,e,t.previous("selected")),this.__onChange(Md,e,r)},n.prototype.postLoad=function(){var t=this,e=t.em,r=t.model,o=t.pages,l=e.UndoManager;l.add(r),l.add(o),o.on("add remove reset change",function(f,d,h){return e.changesUp(h||d)})},n.prototype.add=function(t,e){var r=this;e===void 0&&(e={});var o=this,l=o.em,f=o.events;t.id=t.id||this._createId();var d=function(){var h=r.pages.add(new wp(t,{em:r.em,config:r.config}),e);return e.select&&r.select(h),h};return!e.silent&&l.trigger(f.addBefore,t,d,e),e.abort?void 0:d()},n.prototype.remove=function(t,e){var r=this;e===void 0&&(e={});var o=this,l=o.em,f=o.events,d=(0,w.isString)(t)?this.get(t):t,h=function(){return d&&r.pages.remove(d,e),d};return!e.silent&&l.trigger(f.removeBefore,d,h,e),!e.abort&&h()},n.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},n.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===Ld})[0]||t.at(0)},n.prototype.getAllWrappers=function(){var t=this.getAll();return(0,w.unique)((0,w.flatten)(t.map(function(e){return e.getAllFrames().map(function(r){return r.getComponent()})})))},n.prototype.select=function(t,e){e===void 0&&(e={});var r=this,o=r.em,l=r.model,f=r.events,d=(0,w.isString)(t)?this.get(t):t;return d&&(o.trigger(f.selectBefore,d,e),l.set("selected",d,e)),this},n.prototype.getSelected=function(){return this.model.get("selected")},n.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){var e=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach(function(r){return r.getFrames().initRefs()}),e},n.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},n.prototype._createId=function(){var t=this.getAll(),e=t.length+16,r=this.getAllMap(),o;do o=(0,Y.createId)(e);while(r[o]);return o},n}(Tt);const Lv=Mv;var bp={placeholder:"eg. Text here"},Dv={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:bp,alt:bp,title:bp,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};const jv=Dv;var Cp;(function(a){a.add="i18n:add",a.update="i18n:update",a.locale="i18n:locale"})(Cp||(Cp={}));const Iv=Cp;var Vv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rv=function(a){Vv(n,a);function n(t){var e=a.call(this,t,"I18n",jv)||this;e.events=Iv;var r=e.config.messagesAdd;return r&&e.addMessages(r),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return n.prototype.setLocale=function(t){var e=this,r=e.em,o=e.config,l=e.events;return r.trigger(l.locale,{value:t,valuePrev:o.locale}),o.locale=t,this},n.prototype.getLocale=function(){return this.config.locale},n.prototype.getMessages=function(t,e){e===void 0&&(e={});var r=this.config.messages;return t&&!r[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?r[t]:r},n.prototype.setMessages=function(t){var e=this,r=e.em,o=e.config,l=e.events;return o.messages=t,r.trigger(l.update,t),this},n.prototype.addMessages=function(t){var e=this,r=e.em,o=e.events,l=e.config,f=l.messages;return r.trigger(o.add,t),this.setMessages((0,Y.deepMerge)(f,t)),this},n.prototype.t=function(t,e){e===void 0&&(e={});var r=this.config,o=e.params||{},l=e.l||this.getLocale(),f=e.lFlb||r.localeFallback,d=this._getMsg(t,l,e);return d||(d=this._getMsg(t,f,e)),!d&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),d=d&&(0,w.isString)(d)?this._addParams(d,o):d,d},n.prototype._localLang=function(){var t=(0,Y.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},n.prototype._addParams=function(t,e){var r=new RegExp("{([\\w\\d-]*)}","g");return t.replace(r,function(o,l){return e[l]||""}).trim()},n.prototype._getMsg=function(t,e,r){r===void 0&&(r={});var o=this.getMessages(e,r);if(o){var l=o[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(f,d){if(!(0,w.isUndefined)(f))return f[d]},o)),l}},n.prototype._debug=function(t,e){e===void 0&&(e={});var r=this,o=r.em,l=r.config;(e.debug||l.debug)&&o&&o.logWarning(t)},n.prototype.destroy=function(){},n}(jt);const Nv=Rv;var Fv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),li=function(){return li=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},li.apply(this,arguments)},Hv=function(){},Bv=Te.q.Target,Dd={id:"sorter-target",type:Bv},Uv=function(a){Fv(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,w.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var r=e.container;this.el=typeof r=="string"?document.querySelector(r):r,this.$el=(0,M.default)(this.el),this.containerSel=e.containerSel||"div",this.itemSel=e.itemSel||"div",this.draggable=e.draggable||!0,this.nested=!!e.nested,this.pfx=e.pfx||"",this.ppfx=e.ppfx||"",this.freezeClass=e.freezeClass||this.pfx+"freezed",this.onStart=e.onStart||Hv,this.onEndMove=e.onEndMove,this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||"v",this.onMoveClb=e.onMove,this.relative=e.relative||!1,this.ignoreViewChildren=!!e.ignoreViewChildren,this.plh=e.placer,this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.em=e.em,this.canvasRelative=!!e.canvasRelative,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale;var o=this.em;o!=null&&o.on&&(o.on(o.Canvas.events.refresh,this.updateOffset),this.updateOffset())},n.prototype.getScale=function(){return(0,w.result)(this,"scale")||1},n.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el=typeof e=="string"?document.querySelector(e):e,this.$el=(0,M.default)(this.el)}return this.el},n.prototype.getDocuments=function(t){var e=this.em,r=t?t.ownerDocument:e==null?void 0:e.Canvas.getBody().ownerDocument,o=[document];return r&&o.push(r),o},n.prototype.updateOffset=function(){var t,e=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=e.top,this.offLeft=e.left},n.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},n.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var r=e.Canvas,o=r.getDocument(),l=null;if(o.caretRangeFromPoint){var f=(0,Xt.VB)(t);l=o.caretRangeFromPoint(f.clientX,f.clientY)}else t.rangeParent&&(l=o.createRange(),l.setStart(t.rangeParent,t.rangeOffset));var d=r.getWindow().getSelection();r.getFrameEl().focus(),d==null||d.removeAllRanges(),l&&(d==null||d.addRange(l)),this.setContentEditable(this.activeTextModel,!0)}},n.prototype.setContentEditable=function(t,e){if(t){var r=t.getEl();r.contentEditable!=e&&(r.contentEditable=e)}},n.prototype.toggleSortCursor=function(t){var e=this.em,r=e==null?void 0:e.Canvas;r&&(t?r.startAutoscroll():r.stopAutoscroll())},n.prototype.setDragHelper=function(t,e){for(var r=e||"",o=t.cloneNode(!0),l=t.getBoundingClientRect(),f=getComputedStyle(t),d="",h=0;h<f.length;h++){var g=f[h];d+="".concat(g,":").concat(f.getPropertyValue(g),";")}if(document.body.appendChild(o),o.className+=" ".concat(this.pfx,"bdrag"),o.setAttribute("style",d),this.dragHelper=o,o.style.width="".concat(l.width,"px"),o.style.height="".concat(l.height,"px"),r&&this.moveDragHelper(r),this.em){var y=(0,M.default)(this.em.Canvas.getBody().ownerDocument);y.off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)}(0,M.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},n.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(!(!this.dragHelper||!e)){var r=t.pageY,o=t.pageX,l=0,f=0,d=e.defaultView||e.parentWindow,h=d.frameElement,g=this.dragHelper.style;if(h){var y=h.getBoundingClientRect();l=y.top+document.documentElement.scrollTop,f=y.left+document.documentElement.scrollLeft,r=t.clientY,o=t.clientX}g.top=r+l+"px",g.left=o+f+"px"}},n.prototype.matches=function(t,e){return Y.matches.call(t,e)},n.prototype.closest=function(t,e){if(t)for(var r=t.parentNode;r&&r.nodeType===1;){if(this.matches(r,e))return r;r=r.parentNode}},n.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},n.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement("div"),r=document.createElement("div");return e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",r.className=t+"placeholder-int",e.appendChild(r),e},n.prototype.startSort=function(t,e){var r,o;e===void 0&&(e={});var l=this,f=l.em,d=l.itemSel,h=l.containerSel,g=l.plh,y=this.getContainerEl(e.container),b=this.getDocuments(t),k;delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(d,", ").concat(h))&&(t=this.closest(t,d)),this.sourceEl=t,g||(this.plh=this.createPlaceholder(),y.appendChild(this.plh)),t&&(k=this.getSourceModel(t),k!=null&&k.set&&k.set("status","freezed"),this.srcModel=k),(0,Xt.on)(y,"mousemove dragover",this.onMove),(0,Xt.on)(b,"mouseup dragend touchend",this.endMove),(0,Xt.on)(b,"keydown",this.rollback),this.onStart({sorter:this,target:k,parent:k&&((r=k.parent)===null||r===void 0?void 0:r.call(k)),index:k&&((o=k.index)===null||o===void 0?void 0:o.call(k))}),f==null||f.clearSelection(),this.toggleSortCursor(!0),f==null||f.trigger("sorter:drag:start",t,k)},n.prototype.getTargetModel=function(t){var e=t||this.target;return(0,M.default)(e).data("model")},n.prototype.getSourceModel=function(t,e){var r=this,o=e===void 0?{}:e,l=o.target,f=o.avoidChildren,d=f===void 0?1:f,h=this,g=h.em,y=h.sourceEl,b=t||y,k=this,V=k.dropModel,$=k.dropContent,Q=function(Gt){return Gt&&l&&Gt.opt&&Gt.opt.avoidChildren&&r.isTextableActive(Gt,l)};if($&&g){if(Q(V)&&(V=void 0),!V){var vt=g.Components.getComponents(),Mt={avoidChildren:d,avoidStore:1,avoidUpdateStyle:1},kt=vt.add($,li(li({},Mt),{temporary:!0}));if(V=vt.remove(kt,Mt),V=V instanceof Array?V[0]:V,this.dropModel=V,Q(V))return this.getSourceModel(b,{target:l,avoidChildren:0})}return V}return b&&(0,M.default)(b).data("model")},n.prototype.selectTargetModel=function(t,e){if(!(t instanceof x.FE)&&!(e&&e===t)){var r=this.targetModel;if(r&&r!==this.srcModel&&r.set("status",""),t!=null&&t.set){var o=this.em.Canvas,l=Te.q.Select,f=Te.q.Hover,d=Te.q.Spacing;[l,f,d].forEach(function(h){return o.removeSpots({type:h})}),o.addSpot(li(li({},Dd),{component:t})),t.set("status","selected-parent"),this.targetModel=t}}},n.prototype.onMove=function(t){var e=t,r=this,o=r.em,l=r.onMoveClb,f=r.plh,d=r.customTarget;this.moved=!0;var h=f.style.display;(!h||h==="none")&&(f.style.display="block");var g=this.offset(this.el);this.elT=this.wmargin?Math.abs(g.top):g.top,this.elL=this.wmargin?Math.abs(g.left):g.left;var y=t.pageY-this.elT+this.el.scrollTop,b=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&o){var k=o.Canvas.getMouseRelativeCanvas(t,{noScroll:1});b=k.x,y=k.y}this.rX=b,this.rY=y,this.eventMove=t;var V=this.getSourceModel(),$=d?d({sorter:this,event:t}):t.target,Q=this.dimsFromTarget($,b,y),vt=this.target,Mt=vt&&this.getTargetModel(vt);if(this.selectTargetModel(Mt,V),Mt||(f.style.display="none"),!!vt){this.lastDims=Q;var kt=this.findPosition(Q,b,y);this.isTextableActive(V,Mt)?(this.activeTextModel=Mt,f.style.display="none",this.lastPos=kt,this.updateTextViewCursorPosition(e)):(this.disableTextable(),delete this.activeTextModel,(!this.lastPos||this.lastPos.index!=kt.index||this.lastPos.method!=kt.method)&&(this.movePlaceholder(this.plh,Q,kt,this.prevTargetDim),this.$plh||(this.$plh=(0,M.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=kt)),(0,w.isFunction)(l)&&l({event:t,target:V,parent:Mt,index:kt.index+(kt.method=="after"?1:0)}),o&&o.trigger("sorter:drag",{target:vt,targetModel:Mt,sourceModel:V,dims:Q,pos:kt,x:b,y})}},n.prototype.isTextableActive=function(t,e){var r;return((r=t==null?void 0:t.get)===null||r===void 0?void 0:r.call(t,"textable"))&&(e==null?void 0:e.isInstanceOf("text"))},n.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},n.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var r=t;return r.offsetHeight,!!this.styleInFlow(r,e)},n.prototype.styleInFlow=function(t,e){if(!(0,Xt.BM)(t)){var r=t.style||{},o=(0,M.default)(t),l=e&&(0,M.default)(e);if(!(r.overflow&&r.overflow!=="visible")){var f=o.css("float");if(!(f&&f!=="none")&&!(l&&l.css("display")=="flex"&&l.css("flex-direction")!=="column")){switch(r.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(o.css("display")){case"block":case"list-item":case"table":case"flex":case"grid":return!0}}}}},n.prototype.validTarget=function(t,e){var r=this.getTargetModel(t),o=this.getSourceModel(e,{target:r});e=o&&o.view&&o.view.el,t=r&&r.view&&r.view.el;var l={valid:!0,src:e,srcModel:o,trg:t,trgModel:r,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!e||!t)return l.valid=!1,l;var f=o.get("draggable");if((0,w.isFunction)(f)){var d=f(o,r);l.dragInfo=d,l.draggable=d,f=d}else f=f instanceof Array?f.join(", "):f,l.dragInfo=f,f=(0,w.isString)(f)?this.matches(t,f):f,l.draggable=f;var h=r.get("droppable");if((0,w.isFunction)(h)){var d=h(o,r);l.droppable=d,l.dropInfo=d,h=d}else h=h instanceof x.FE?1:h,h=h instanceof Array?h.join(", "):h,l.dropInfo=h,h=(0,w.isString)(h)?this.matches(e,h):h,h=f&&this.isTextableActive(o,r)?1:h,l.droppable=h;return(!h||!f)&&(l.valid=!1),l},n.prototype.dimsFromTarget=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var o=this.em,l=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return l;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var f=this.validTarget(t);if(o&&o.trigger("sorter:drag:validation",f),!f.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,r);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(l=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,r)||!this.nested&&!this.cacheDims.length){var d=this.targetP;d&&this.validTarget(d).valid&&(l=this.cacheDimsP,this.target=d)}return delete this.lastPos,l},n.prototype.getTargetFromEl=function(t){var e=t,r,o=this.targetPrev,l=this.em,f=this.containerSel,d=this.itemSel;if(this.matches(e,"".concat(d,", ").concat(f))||(e=this.closest(e,d)),this.draggable instanceof Array&&(e=this.closest(e,this.draggable.join(","))),o&&o!=e&&delete this.targetPrev,!this.targetPrev){r=this.closest(e,f);var h=this.validTarget(e);if(l&&l.trigger("sorter:drag:validation",h),!h.valid&&r)return this.getTargetFromEl(r);this.targetPrev=e}return this.nearElBorders(e)&&(r=this.closest(e,f),r&&this.validTarget(r).valid&&(e=r)),e},n.prototype.nearElBorders=function(t){var e=10,r=t.getBoundingClientRect(),o=t.ownerDocument.body,l=this.getCurrentPos(),f=l.x,d=l.y,h=r.top+o.scrollTop,g=r.left+o.scrollLeft,y=r.width,b=r.height;if(d<h+e||d>h+b-e||f<g+e||f>g+y-e)return 1},n.prototype.getCurrentPos=function(){var t=this.eventMove,e=(t==null?void 0:t.pageX)||0,r=(t==null?void 0:t.pageY)||0;return{x:e,y:r}},n.prototype.getDim=function(t){var e=this,r=e.em,o=e.canvasRelative,l=r==null?void 0:r.Canvas,f=l?l.getElementOffsets(t):{},d,h,g,y;if(o&&r){var b=l.getElementPos(t,{noScroll:1});d=b.top,h=b.left,g=b.height,y=b.width}else{var k=this.offset(t);d=this.relative?t.offsetTop:k.top-(this.wmargin?-1:1)*this.elT,h=this.relative?t.offsetLeft:k.left-(this.wmargin?-1:1)*this.elL,g=t.offsetHeight,y=t.offsetWidth}return{top:d,left:h,height:g,width:y,offsets:f}},n.prototype.getChildrenDim=function(t){var e=this,r=[];if(!t)return r;var o=this.getTargetModel(t);if(o&&o.view&&!this.ignoreViewChildren){var l=o.getCurrentView?o.getCurrentView():o.view;t=l.getChildrenContainer()}return(0,w.each)(t.children,function(f,d){var h=f,g=(0,Y.getModel)(h,M.default),y=g&&g.index?g.index():d;if(!(!(0,Xt.BM)(h)&&!e.matches(h,e.itemSel))){var b=e.getDim(h),k=e.direction,V;k=="v"?V=!0:k=="h"?V=!1:V=e.isInFlow(h,t),b.dir=V,b.el=h,b.indexEl=y,r.push(b)}}),r},n.prototype.nearBorders=function(t,e,r){var o=!1,l=this.borderOffset,f=e||0,d=r||0,h=t.top,g=t.left,y=t.height,b=t.width;return(h+l>d||d>h+y-l||g+l>f||f>g+b-l)&&(o=!0),o},n.prototype.findPosition=function(t,e,r){for(var o={index:0,indexEl:0,method:"before"},l=0,f=0,d=0,h=0,g=0,y=0,b=0,k,V=0,$=t.length;V<$;V++){k=t[V];var Q=k.top,vt=k.left,Mt=k.height,kt=k.width;if(d=vt+kt,b=Q+Mt,g=vt+kt/2,y=Q+Mt/2,!(f&&vt>f||h&&y>=h||l&&d<l))if(o.index=V,o.indexEl=k.indexEl,!k.dir)r<b&&(h=b),e<g?(f=g,o.method="before"):(l=g,o.method="after");else if(r<y){o.method="before";break}else o.method="after"}return o},n.prototype.movePlaceholder=function(t,e,r,o){var l=0,f=0,d=0,h="",g="",y="px",b=5,k=r.method,V=e[r.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),V){var $=V.top,Q=V.left,vt=V.height,Mt=V.width;V.dir?(h=Mt+y,g="auto",f=k=="before"?$-l:$+vt-l,d=Q):(h="auto",g=vt-l*2+y,f=$+l,d=k=="before"?Q-l:Q+Mt-l,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested){t.style.display="none";return}if(o){var kt=o.offsets||{},Gt=kt.paddingTop||b,fe=kt.paddingLeft||b,Oe=kt.borderTopWidth||0,Ve=kt.borderLeftWidth||0,pe=kt.borderRightWidth||0,Ue=Ve+pe;f=o.top+Gt+Oe,d=o.left+fe+Ve,h=parseInt("".concat(o.width))-fe*2-Ue+y,g="auto"}}t.style.top=f+y,t.style.left=d+y,h&&(t.style.width=h),g&&(t.style.height=g)},n.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},n.prototype.sort=function(t,e){var r=t.parents.filter(function(d){return e.parents.includes(d)}),o=r[0];if(!o)return e.model.index()-t.model.index();var l=t.parents[t.parents.indexOf(o)-1],f=e.parents[e.parents.indexOf(o)-1];return f.index()-l.index()},n.prototype.endMove=function(){var t=this,e,r=this.sourceEl,o=[],l=this.getDocuments(),f=this.getContainerEl(),d=this.onEndMove,h=this.onEnd,g=this,y=g.target,b=g.lastPos,k;if((0,Xt.S1)(f,"mousemove dragover",this.onMove),(0,Xt.S1)(l,"mouseup dragend touchend",this.endMove),(0,Xt.S1)(l,"keydown",this.rollback),this.plh.style.display="none",r&&(k=this.getSourceModel()),this.moved&&y){var V=this.toMove,$=(0,w.isArray)(V)?V:V?[V]:[r],Q=0;$.length===1?o.push(this.move(y,$[0],b)):$.map(function(kt){return{model:kt,parents:t.parents(kt)}}).sort(this.sort).forEach(function(kt){var Gt=kt.model,fe=Gt.index(),Oe=Gt.parent().getEl();o.push(t.move(y,Gt,li(li({},b),{indexEl:b.indexEl-Q,index:b.index-Q}))),Oe===y&&fe<=b.index&&Q++})}this.plh&&(this.plh.style.display="none");var vt=this.dragHelper;if(vt&&(vt.parentNode.removeChild(vt),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),(e=this.em)===null||e===void 0||e.Canvas.removeSpots(Dd),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,w.isFunction)(d)){var Mt={target:k,parent:k&&k.parent(),index:k&&k.index()};o.length?o.forEach(function(kt){return d(kt,t,Mt)}):d(null,this,li(li({},Mt),{cancelled:1}))}(0,w.isFunction)(h)&&h({sorter:this})},n.prototype.move=function(t,e,r){var o=this,l=o.em,f=o.dropContent,d=(0,Y.getElement)(e),h=[],g=r.method==="after"?r.indexEl+1:r.indexEl,y=this.validTarget(t,d),b=(0,M.default)(t).data("collection"),k=y.trgModel,V=y.srcModel,$=y.draggable,Q=k instanceof x.FE?1:y.droppable,vt,Mt;if(b&&Q&&$){var kt={at:g,action:"move-component"},Gt=this.isTextableActive(V,k);if(f)vt=(0,w.isFunction)(f)?f():f,kt.avoidUpdateStyle=!0,kt.action="add-component";else{var fe=V.collection.indexOf(V),Oe=b===V.collection,Ve=fe===g||fe===g-1,pe=!Oe||!Ve||Gt;pe&&(vt=V.collection.remove(V,{temporary:!0}),Oe&&g>fe&&(kt.at=g-1))}vt&&(Gt?(delete kt.at,Mt=k.getView().insertComponent(vt,kt)):Mt=b.add(vt,kt)),delete this.dropContent,delete this.prevTarget}else if(l){var Ue=y.dropInfo||(k==null?void 0:k.get("droppable")),Ze=y.dragInfo||(V==null?void 0:V.get("draggable"));!b&&h.push("Target collection not found"),!Q&&Ue&&h.push("Target is not droppable, accepts [".concat(Ue,"]")),!$&&Ze&&h.push("Component not draggable, acceptable by [".concat(Ze,"]")),l.logWarning("Invalid target position",{errors:h,model:V,context:"sorter",target:k})}return l==null||l.trigger("sorter:drag:end",{targetCollection:b,modelToDrop:vt,warns:h,validResult:y,dst:t,srcEl:d}),Mt},n.prototype.rollback=function(t){(0,Xt.S1)(this.getDocuments(),"keydown",this.rollback);var e=t.which||t.keyCode;e==27&&(this.moved=!1,this.endMove())},n}(x.G7);const zv=Uv;var Os=function(){return Os=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Os.apply(this,arguments)},Wv=function(a,n){n===void 0&&(n={});var t=n.prefix||"",e=document.createElement("i");return e.className=t+"resizer-h "+t+"resizer-h-"+a,e.setAttribute("data-"+t+"handler",a),e},Kv=function(a,n){var t=n||window,e=a.getBoundingClientRect();return{left:e.left+t.pageXOffset,top:e.top+t.pageYOffset,width:e.width,height:e.height}},Gv=function(){function a(n){n===void 0&&(n={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=Os({},this.defOpts),this.setOptions(n),(0,w.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(n,t){n===void 0&&(n={}),this.opts=Os(Os({},t?this.defOpts:this.opts),n),this.setup()},a.prototype.setup=function(){var n=this.opts,t=n.prefix||"",e=n.appendTo||document.body,r=this.container;for(r||(r=document.createElement("div"),r.className="".concat(t,"resizer-c"),e.appendChild(r),this.container=r);r.firstChild;)r.removeChild(r.firstChild);var o={};["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(d){return o[d]=n[d]?Wv(d,n):null});for(var l in o){var f=o[l];f&&r.appendChild(f)}this.handlers=o,this.mousePosFetcher=n.mousePosFetcher,this.updateTarget=n.updateTarget,this.posFetcher=n.posFetcher,this.onStart=n.onStart,this.onMove=n.onMove,this.onEnd=n.onEnd,this.onUpdateContainer=n.onUpdateContainer},a.prototype.toggleFrames=function(n){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,w.each)(t,function(e){return e.style.pointerEvents=n?"none":""})}},a.prototype.isHandler=function(n){var t=this.handlers;for(var e in t)if(t[e]===n)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var n;return(n=this.el)===null||n===void 0?void 0:n.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(n,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(n,t):Kv(n)},a.prototype.focus=function(n){n&&n===this.el||(this.el=n,this.updateContainer({forceShow:!0}),(0,Xt.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Xt.S1)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(n){var t=n;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,r=this.getParentEl(),o=this,l=this.opts||{},f=this.mousePosFetcher,d="data-"+l.prefix+"handler",h=this.getElementPos(e,{avoidFrameZoom:!0,avoidFrameOffset:!0}),g=this.getElementPos(r),y=t.target;this.handlerAttr=y.getAttribute(d),this.clickedHandler=y,this.startDim={t:h.top,l:h.left,w:h.width,h:h.height},this.rectDim={t:h.top,l:h.left,w:h.width,h:h.height},this.startPos=f?f(t):{x:t.clientX,y:t.clientY},this.parentDim={t:g.top,l:g.left,w:g.width,h:g.height};var b=this.getDocumentEl();this.docs=b,(0,Xt.on)(b,"pointermove",this.move),(0,Xt.on)(b,"keydown",this.handleKeyDown),(0,Xt.on)(b,"pointerup",this.stop),(0,w.isFunction)(this.onStart)&&this.onStart(t,{docs:b,config:l,el:e,resizer:o}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(n){var t=n,e=this.onMove,r=this.mousePosFetcher,o=r?r(t):{x:t.clientX,y:t.clientY};this.currentPos=o,this.delta={x:o.x-this.startPos.x,y:o.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(n){var t=this.el,e=this.opts,r=this.docs||this.getDocumentEl();(0,Xt.S1)(r,"pointermove",this.move),(0,Xt.S1)(r,"keydown",this.handleKeyDown),(0,Xt.S1)(r,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,w.isFunction)(this.onEnd)&&this.onEnd(n,{docs:r,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(n){var t=this.el,e=this,r=this.opts,o=this.rectDim,l=this.updateTarget,f=this.getSelectedHandler(),d=r.unitHeight,h=r.unitWidth,g=r.keyWidth,y=r.keyHeight;if((0,w.isFunction)(l))l(t,o,{store:n,selectedHandler:f,resizer:e,config:r});else{var b=t.style;b[g]=o.w+h,b[y]=o.h+d}this.updateContainer()},a.prototype.updateContainer=function(n){var t;n===void 0&&(n={});var e=this,r=e.opts,o=e.container,l=e.el,f=o.style;!r.avoidContainerUpdate&&l&&n.forceShow&&(f.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:o,resizer:this,opts:Os(Os({},r),n)})},a.prototype.getSelectedHandler=function(){var n=this.handlers;if(this.selectedHandler){for(var t in n)if(n[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(n){n.keyCode===27&&(this.rectDim=this.startDim,this.stop(n))},a.prototype.handleMouseDown=function(n){var t=n.target;this.isHandler(t)?(this.selectedHandler=t,this.start(n)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(n){var t,e=this.opts||{},r=e.step,o=this.startDim,l=e.minDim,f=e.maxDim,d=n.delta.x,h=n.delta.y,g=this.parentDim.w,y=this.parentDim.h,b=this.opts.unitWidth,k=this.opts.unitHeight,V=b==="%"?o.w/100*g:o.w,$=k==="%"?o.h/100*y:o.h,Q={t:o.t,l:o.l,w:V,h:$};if(n){var vt=n.handlerAttr;~vt.indexOf("r")&&(t=b==="%"?(0,Y.normalizeFloat)((V+d*r)/g*100,.01):(0,Y.normalizeFloat)(V+d*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),Q.w=t),~vt.indexOf("b")&&(t=k==="%"?(0,Y.normalizeFloat)(($+h*r)/y*100,.01):(0,Y.normalizeFloat)($+h*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),Q.h=t),~vt.indexOf("l")&&(t=b==="%"?(0,Y.normalizeFloat)((V-d*r)/g*100,.01):(0,Y.normalizeFloat)(V-d*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),Q.w=t),~vt.indexOf("t")&&(t=k==="%"?(0,Y.normalizeFloat)(($-h*r)/y*100,.01):(0,Y.normalizeFloat)($-h*r,r),t=Math.max(l,t),f&&(t=Math.min(f,t)),Q.h=t);var Mt=e.ratioDefault?!n.keys.shift:n.keys.shift;if(vt.indexOf("c")<0&&Mt){var kt=o.w/o.h;Q.w/Q.h>kt?Q.h=Math.round(Q.w/kt):Q.w=Math.round(Q.h*kt)}~vt.indexOf("l")&&(Q.l+=o.w-Q.w),~vt.indexOf("t")&&(Q.t+=o.h-Q.h);for(var Gt in Q){var fe=Gt;Q[fe]=parseInt("".concat(Q[fe]),10)}return Q}},a}();const $v=Gv;var qv=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xp=function(){return xp=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},xp.apply(this,arguments)},Yv=function(a){qv(n,a);function n(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=zv,e.Resizer=$v,e.Dragger=Ro.Z,e.helpers=xp({},Y),e}return n.prototype.destroy=function(){},n}(jt);const Xv=Yv;var ro,po={},Bn={16:!1,18:!1,17:!1,91:!1},jd="all",Ts={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},Id={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},Sp=function(a){return Id[a]||a.toUpperCase().charCodeAt(0)},_l=[];for(ro=1;ro<20;ro++)Id["f"+ro]=111+ro;function Su(a,n){for(var t=a.length;t--;)if(a[t]===n)return t;return-1}function Zv(a,n){if(a.length!=n.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==n[t])return!1;return!0}var Jv={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function Qv(a){for(ro in Bn)Bn[ro]=a[Jv[ro]]}function tg(a){var n,t,e,r,o,l;if(n=a.keyCode,Su(_l,n)==-1&&_l.push(n),(n==93||n==224)&&(n=91),n in Bn){Bn[n]=!0;for(e in Ts)Ts[e]==n&&(Un[e]=!0);return}if(Qv(a),!!Un.filter.call(this,a)&&n in po){for(l=Op(),r=0;r<po[n].length;r++)if(t=po[n][r],t.scope==l||t.scope=="all"){o=t.mods.length>0;for(e in Bn)(!Bn[e]&&Su(t.mods,+e)>-1||Bn[e]&&Su(t.mods,+e)==-1)&&(o=!1);(t.mods.length==0&&!Bn[16]&&!Bn[18]&&!Bn[17]&&!Bn[91]||o)&&t.method(a,t)===!1&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}function eg(a){var n=a.keyCode,t,e=Su(_l,n);if(e>=0&&_l.splice(e,1),(n==93||n==224)&&(n=91),n in Bn){Bn[n]=!1;for(t in Ts)Ts[t]==n&&(Un[t]=!1)}}function rg(){for(ro in Bn)Bn[ro]=!1;for(ro in Ts)Un[ro]=!1}function Un(a,n,t){var e,r;e=Vd(a),t===void 0&&(t=n,n="all");for(var o=0;o<e.length;o++)r=[],a=e[o].split("+"),a.length>1&&(r=Rd(a),a=[a[a.length-1]]),a=a[0],a=Sp(a),a in po||(po[a]=[]),po[a].push({shortcut:e[o],scope:n,method:t,key:e[o],mods:r})}function ng(a,n){var t,e,r=[],o,l,f;for(t=Vd(a),l=0;l<t.length;l++){if(e=t[l].split("+"),e.length>1&&(r=Rd(e)),a=e[e.length-1],a=Sp(a),n===void 0&&(n=Op()),!po[a])return;for(o=0;o<po[a].length;o++)f=po[a][o],f.scope===n&&Zv(f.mods,r)&&(po[a][o]={})}}function og(a){return typeof a=="string"&&(a=Sp(a)),Su(_l,a)!=-1}function ig(){return _l.slice(0)}function ag(a){var n=(a.target||a.srcElement).tagName;return!(n=="INPUT"||n=="SELECT"||n=="TEXTAREA")}for(ro in Ts)Un[ro]=!1;function sg(a){jd=a||"all"}function Op(){return jd||"all"}function lg(a){var n,t,e;for(n in po)for(t=po[n],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++}function Vd(a){var n;return a=a.replace(/\s/g,""),n=a.split(","),n[n.length-1]==""&&(n[n.length-2]+=","),n}function Rd(a){for(var n=a.slice(0,a.length-1),t=0;t<n.length;t++)n[t]=Ts[n[t]];return n}function Tp(a,n,t){a.addEventListener?a.addEventListener(n,t,!1):a.attachEvent&&a.attachEvent("on"+n,function(){t(window.event)})}Un.setScope=sg,Un.getScope=Op,Un.deleteScope=lg,Un.filter=ag,Un.isPressed=og,Un.getPressedKeyCodes=ig,Un.unbind=ng,Un.handlers=po,Un.init=function(a){Tp(a.document,"keydown",function(n){tg(n)}),Tp(a.document,"keyup",eg),Tp(a,"focus",rg)};const Ou=Un;var ug={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};const cg=ug;var fg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nd=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))};(0,Y.hasWin)()&&Ou.init(window);var pg=function(a){fg(n,a);function n(t){var e=a.call(this,t,"Keymaps",cg)||this;return e.keymaster=Ou,e.keymaps={},e}return n.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var r=t[e];this.add(e,r.keys,r.handler,r.opts||{})}},n.prototype.add=function(t,e,r,o){o===void 0&&(o={});var l=this.em,f=l.Commands,d=l.getEditor(),h=l.Canvas,g={id:t,keys:e,handler:r},y=this.keymaps[t];return y&&this.remove(t),this.keymaps[t]=g,Ou(e,function(b,k){var V={event:b,h:k},$=(0,w.isString)(r)?f.get(r):r,Q=!l.isEditing()&&!d.Canvas.isInputFocused();if(Q||o.force){o.prevent&&h.getCanvasView().preventDefault(b),(0,w.isFunction)($)?$(d,0,V):f.runCommand($,V);var vt=[t,k.shortcut,b];l.trigger.apply(l,Nd(["keymap:emit"],vt,!1)),l.trigger.apply(l,Nd(["keymap:emit:".concat(t)],vt,!1))}},void 0),l.trigger("keymap:add",g),g},n.prototype.get=function(t){return this.keymaps[t]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(t){var e=this.em,r=this.get(t);if(r)return delete this.keymaps[t],r.keys.split(", ").forEach(function(o){Ou.unbind(o.trim())}),e==null||e.trigger("keymap:remove",r),r},n.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),Ou.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}(jt);const dg=pg;var hg={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};const vg=hg;var gg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mg=function(a){gg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},n.prototype.open=function(){this.set("open",!0)},n.prototype.close=function(){this.set("open",!1)},n}(te.Z);const yg=mg;var _g=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xc=function(){return Xc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Xc.apply(this,arguments)},wg=function(a){_g(n,a);function n(t){var e=a.call(this,t)||this,r=e.model;return e.listenTo(r,"change:open",e.updateOpen),e.listenTo(r,"change:title",e.updateTitle),e.listenTo(r,"change:content",e.updateContent),e}return n.prototype.template=function(t){var e=t.pfx,r=t.ppfx,o=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(r,"one-bg ").concat(r,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(o,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},n.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},n.prototype.onClick=function(t){var e=this.config.backdrop;e&&t.target===this.el&&this.hide()},n.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},n.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},n.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},n.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),r=this.getCollector(),o=this.model.get("content");e.length&&r.append(e),t.empty().append(o)},n.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},n.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},n.prototype.hide=function(){this.model.close()},n.prototype.show=function(){this.model.open()},n.prototype.updateAttr=function(t){var e=this,r=e.pfx,o=e.$el,l=e.el,f=[].slice.call(l.attributes).map(function(d){return d.name});o.removeAttr(f.join(" ")),o.attr(Xc(Xc({},t||{}),{class:"".concat(r,"container ").concat(t&&t.class||"").trim()}))},n.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},n}(Qe);const bg=wg;var Cg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xg=function(a){Cg(n,a);function n(t){var e=a.call(this,t,"Modal",vg)||this;return e.model=new yg(e),e.model.on("change:open",function(r,o){t.trigger("modal:".concat(o?"open":"close"))}),e.model.on("change",(0,w.debounce)(function(){var r=e._evData(),o=e.config.custom;(0,w.isFunction)(o)&&o(r),t.trigger("modal",r)},0)),e}return n.prototype._evData=function(){var t=this,e=this.getTitle(),r=this.getContent(),o=this.model.attributes,l=o.open,f=o.attributes;return{open:l,attributes:f,title:(0,w.isString)(e)?(0,Xt.rw)(e):e,content:(0,w.isString)(r)?(0,Xt.rw)(r):r.get?r.get(0):r,close:function(){t.close()}}},n.prototype.postRender=function(t){var e=t.model.config.el||t.el,r=this.render();r&&(e==null||e.appendChild(r))},n.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},n.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},n.prototype.isOpen=function(){return!!this.model.get("open")},n.prototype.setTitle=function(t){return this.model.set("title",t),this},n.prototype.getTitle=function(){return this.model.get("title")},n.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},n.prototype.getContent=function(){return this.model.get("content")},n.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var t;if(!this.config.custom){var e=bg.extend(this.config.extend),r=this.modal&&this.modal.el;return this.modal=new e({el:r,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},n.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},n}(jt);const Sg=xg;var Fd="sw-visibility",Hd="export-template",Bd="open-sm",Ud="open-tm",zd="open-layers",Wd="open-blocks",Ep="fullscreen",Pp="preview",Og={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Fd,className:"fa fa-square-o",command:"core:component-outline",context:Fd,attributes:{title:"View components"}},{id:Pp,className:"fa fa-eye",command:Pp,context:Pp,attributes:{title:"Preview"}},{id:Ep,className:"fa fa-arrows-alt",command:Ep,context:Ep,attributes:{title:"Fullscreen"}},{id:Hd,className:"fa fa-code",command:Hd,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Bd,className:"fa fa-paint-brush",command:Bd,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Ud,className:"fa fa-cog",command:Ud,togglable:!1,attributes:{title:"Settings"}},{id:zd,className:"fa fa-bars",command:zd,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Wd,className:"fa fa-th-large",command:Wd,togglable:!1,attributes:{title:"Open Blocks"}}]}]};const Ap=Og;var Tg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Eg=function(a){Tg(n,a);function n(t,e){var r=a.call(this,t,e)||this;return r.get("buttons").length&&r.set("buttons",new $d(r.module,r.get("buttons"))),r}return n.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(n.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),n}(te.Z);const Kd=Eg;var Pg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gd=function(a){Pg(n,a);function n(t,e){return a.call(this,t,e,Kd)||this}return n.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(r,o){r!==t&&(r.set("active",!1),e&&r.get("buttons").length&&r.get("buttons").deactivateAllExceptOne(t,e))})},n.prototype.deactivateAll=function(t,e){var r=t||"";this.forEach(function(o){o.get("context")==r&&o!==e&&o.set("active",!1,{fromCollection:!0})})},n.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(r,o){r.get("context")==e&&r.set("disable",!0)})},n.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(r,o){r!==t&&(r.set("disable",!0),e&&r.get("buttons").length&&r.get("buttons").disableAllButtonsExceptOne(t,e))})},n}(he);const $d=Gd;Gd.prototype.model=Kd;var Ag=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kg=function(a){Ag(n,a);function n(t,e){var r=a.call(this,t,e)||this,o=r.get("buttons")||[];return r.buttons=new $d(t,o),r}return n.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(n.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),n}(te.Z);const qd=kg;var Mg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yd=function(a){Mg(n,a);function n(t,e){return a.call(this,t,e,qd)||this}return n}(he);const Lg=Yd;Yd.prototype.model=qd;var Dg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wl=function(){return wl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},wl.apply(this,arguments)},jg=function(a){Dg(n,a);function n(t){var e=a.call(this,t)||this,r=e,o=r.model,l=r.em,f=r.pfx,d=r.ppfx,h=o.className,g=o.attributes,y=g.command,b=g.listen;if(e.id=f+o.get("id"),e.activeCls="".concat(f,"active ").concat(d,"four-color"),e.disableCls="".concat(d,"disabled"),e.btnsVisCls="".concat(f,"visible"),e.className=f+"btn"+(h?" "+h:""),e.listenTo(o,"change",e.render),e.listenTo(o,"change:active updateActive",e.updateActive),e.listenTo(o,"checkActive",e.checkActive),e.listenTo(o,"change:bntsVis",e.updateBtnsVis),e.listenTo(o,"change:attributes",e.updateAttributes),e.listenTo(o,"change:className",e.updateClassName),e.listenTo(o,"change:disable",e.updateDisable),l&&(0,w.isString)(y)&&b){var k={fromListen:!0};e.listenTo(l,"run:".concat(y),function(){return o.set("active",!0,k)}),e.listenTo(l,"stop:".concat(y),function(){return o.set("active",!1,k)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return n.prototype.tagName=function(){return this.model.get("tagName")},n.prototype.events=function(){return{click:"clicked"}},n.prototype.updateClassName=function(){var t=this,e=t.model,r=t.pfx,o=e.className,l=e.get("attributes").class,f="".concat(l||""," ").concat(r,"btn ").concat(o||"");this.$el.attr("class",f.trim())},n.prototype.updateAttributes=function(){var t=this,e=t.em,r=t.model,o=t.$el,l=r.get("attributes")||{},f=e&&e.t&&e.t("panels.buttons.titles.".concat(r.id));o.attr(l),f&&o.attr({title:f}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(t,e,r){var o;r===void 0&&(r={});var l=this,f=l.model,d=l.commands,h=l.$el,g=l.activeCls,y=r.fromCollection,b=r.fromListen,k=f.get("context"),V=f.get("options"),$=f.command,Q={};$&&(d&&(0,w.isString)($)?Q=d.get($)||{}:(0,w.isFunction)($)?Q=d.create({run:$}):$!==null&&(0,w.isObject)($)&&(Q=d.create($)),f.active?(!y&&((o=f.collection)===null||o===void 0||o.deactivateAll(k,f)),f.set("active",!0,{silent:!0}).trigger("checkActive"),!b&&d.runCommand(Q,wl(wl({},V),{sender:f})),Q.noStop&&f.set("active",!1)):(h.removeClass(g),!b&&d.stopCommand(Q,wl(wl({},V),{sender:f,force:1}))))},n.prototype.updateDisable=function(){var t=this,e=t.disableCls,r=t.model,o=r.disable;this.$el[o?"addClass":"removeClass"](e)},n.prototype.checkActive=function(){var t=this,e=t.model,r=t.$el,o=t.activeCls;e.active?r.addClass(o):r.removeClass(o)},n.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},n.prototype.toggleActive=function(){var t=this,e=t.model,r=t.em,o=e.active,l=e.togglable;o&&!l||(e.active=!o,o?e.runDefaultCommand&&r.runDefault():e.stopDefaultCommand&&r.stopDefault())},n.prototype.render=function(){var t=this.model,e=t.get("label"),r=this.$el;return!t.get("el")&&r.empty(),this.updateAttributes(),e&&r.append(e),this.checkActive(),this.updateDisable(),this},n}(Qe);const Ig=jg;var Vg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rg=function(a){Vg(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,o=t.get("el"),l=new Ig({el:o,model:t}),f=l.render().el;return r?r.appendChild(f):this.$el.append(f),f},n.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(r){return t.addToCollection(r,e)}),this.$el.append(e),this.$el.attr("class",(0,w.result)(this,"className")),this},n}(Qe);const Ng=Rg;var Fg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kp=function(){return kp=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},kp.apply(this,arguments)},Hg=function(a){Fg(n,a);function n(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return n.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},n.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},n.prototype.toggleVisible=function(){if(!this.model.get("visible")){this.$el.addClass("".concat(this.ppfx,"hidden"));return}this.$el.removeClass("".concat(this.ppfx,"hidden"))},n.prototype.attributes=function(){return this.model.get("attributes")},n.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,r=this.model.get("resizable");if(e&&r){var o=r===!0?[!0,!0,!0,!0]:r,l=o.length,f=void 0,d=void 0,h=void 0,g=!1;if(l==2){var y=o;f=y[0],h=y[0],d=y[1],g=y[1]}else if(l==4){var y=o;f=y[0],d=y[1],h=y[2],g=y[3]}var b=new e.Utils.Resizer(kp({tc:f,cr:d,bc:h,cl:g,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t.Canvas.refresh({all:!0})},posFetcher:function(k,V){var $=V.target,Q=k.style,vt=b.getConfig(),Mt=vt.keyWidth,kt=vt.keyHeight,Gt=k.getBoundingClientRect(),fe=$=="container",Oe=Q[Mt],Ve=Q[kt],pe=Oe&&!fe?parseFloat(Oe):Gt.width,Ue=Ve&&!fe?parseFloat(Ve):Gt.height;return{left:0,top:0,width:pe,height:Ue}}},r&&typeof r!="boolean"?r:{}));b.blur=function(){},b.focus(this.el)}},n.prototype.render=function(){var t=this.model.buttons,e=this.$el,r=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(r,"one-bg ").concat(r,"two-color");if(e.addClass(o),this.toggleVisible(),t.length){var l=new Ng(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},n}(Qe);const Bg=Hg;var Ug=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zg=function(a){Ug(n,a);function n(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return n.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var r=e||null,o=t.get("el"),l=new Bg(t),f=l.render().el,d=t.get("appendTo");if(!o)if(d){var h=document.querySelector(d);h==null||h.appendChild(f)}else r?r.appendChild(f):this.$el.append(f);return l.initResize(),f},n.prototype.render=function(){var t=this,e=this.$el,r=document.createDocumentFragment();return e.empty(),this.collection.each(function(o){return t.addToCollection(o,r)}),e.append(r),e.attr("class",this.className),this},n}(Qe);const Wg=zg;var Kg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gg=function(a){Kg(n,a);function n(t){var e=a.call(this,t,"Panels",Ap)||this;e.panels=new Lg(e,e.config.defaults);for(var r in Ap)r in e.config||(e.config[r]=Ap[r]);return e}return n.prototype.getPanels=function(){return this.panels},n.prototype.getPanelsEl=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0?void 0:t.el},n.prototype.addPanel=function(t){return this.panels.add(t)},n.prototype.removePanel=function(t){return this.panels.remove(t)},n.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},n.prototype.addButton=function(t,e){var r=this.getPanel(t);return r?r.buttons.add(e):null},n.prototype.removeButton=function(t,e){var r=this.getPanel(t);return r&&r.buttons.remove(e)},n.prototype.getButton=function(t,e){var r=this.getPanel(t);if(r){var o=r.buttons.where({id:e});return o.length?o[0]:null}return null},n.prototype.render=function(){var t;return(t=this.PanelsViewObj)===null||t===void 0||t.remove(),this.PanelsViewObj=new Wg(this.panels),this.PanelsViewObj.render().el},n.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("active")&&e.trigger("updateActive")})})},n.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(e){e.get("disable")&&e.trigger("change:disable")})})},n.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},n}(jt);const $g=Gg;var qg={stylePrefix:"cm-",optsCodeViewer:{}};const Yg=qg;var Xg=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zg=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Jg=function(a){Xg(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t,e){e===void 0&&(e={});var r=e.em,o=Zg(e,["em"]),l=o;if(e.cleanId&&r){var f=r.Css.getAll(),d=f.toJSON().map(function(h){var g=h.selectors,y=g&&g.length===1&&g.models[0];return y&&y.isId()&&y.get("name")}).filter(Boolean);l.attributes||(l.attributes=function(h,g){var y=g.id;return y&&y[0]==="i"&&!h.get("script")&&!h.get("attributes").id&&d.indexOf(y)<0&&delete g.id,g})}return t.toHTML(l)},n}(x.Hn);const Qg=Jg;var tm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),em=function(a){tm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.build=function(t){var e=this,r=t.toJSON();return this.beforeEach(r),(0,w.each)(r,function(o,l){var f=r[l];if(f instanceof x.Hn)r[l]=e.build(f);else if(f instanceof x.FE){var d=f;r[l]=[],d.length&&d.forEach(function(h,g){r[l][g]=e.build(h)})}}),r},n.prototype.beforeEach=function(t){delete t.status},n}(x.Hn);const rm=em;var nm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();function om(a){var n,t=((n=a.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"";return t.replace(/^\s*\/\/.*$/gm,"").trim().length===0}var im=function(a){nm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.mapModel=function(t){var e,r=this,o="",l=t.get("script-export")||t.get("script"),f=t.get("type"),d=t.get("components"),h=t.getId();if(l){var g=t.get("attributes");g=(0,w.extend)({},g,{id:h}),t.set("attributes",g,{silent:!0});var y=t.getScriptString(l),b=t.get("script-props");if(t.get("scriptUpdated")&&!b)this.mapJs[f+"-"+h]={ids:[h],code:y};else{var k=void 0,V=this.mapJs[f];if(b&&(k=t.__getScriptProps()),V)V.ids.push(h),k&&(V.props[h]=k);else{var $={ids:[h],code:y};k&&($.props=(e={},e[h]=k,e)),this.mapJs[f]=$}}}return d.forEach(function(Q){o+=r.mapModel(Q)}),o},n.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e="";for(var r in this.mapJs){var o=this.mapJs[r];if(o.code)if(o.props){if(om(o.code))continue;e+=`
          var props = `.concat(JSON.stringify(o.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(o.code,`.bind(el))(props[el.id]);
          }`)}else{var l="#"+o.ids.join(", #");e+=`
          var items = document.querySelectorAll('`.concat(l,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(o.code,`
}.bind(items[i]))();
          }`)}}return e},n}(x.Hn);const am=im;var sm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mp=function(){return Mp=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Mp.apply(this,arguments)},Tu;(0,Y.hasWin)()&&(Tu=vr(631),vr(531),vr(629),vr(210));var Xd=function(a){sm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},n.prototype.init=function(t){return(0,w.bindAll)(this,"onChange"),this.editor=Tu.fromTextArea(t,Mp({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},n.prototype.onChange=function(){this.trigger("update",this)},n.prototype.getEditor=function(){return this.editor},n.prototype.getElement=function(){return this.element},n.prototype.setElement=function(t){return this.element=t,this},n.prototype.refresh=function(){return this.getEditor().refresh(),this},n.prototype.focus=function(){return this.getEditor().focus(),this},n.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},n.prototype.setContent=function(t,e){var r=this;e===void 0&&(e={});var o=this.editor;if(o){o.setValue(t);var l=this.get("autoFormat"),f=o.autoFormatRange&&(l===!0||Array.isArray(l)&&l.includes(this.get("codeName")));f&&(Tu.commands.selectAll(o),o.autoFormatRange(o.getCursor(!0),o.getCursor(!1)),Tu.commands.goDocStart(o)),!e.noRefresh&&setTimeout(function(){return r.refresh()})}},n}(x.Hn);const lm=Xd;Xd.prototype.CodeMirror=Tu;var um=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cm=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},fm=function(a){um(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.template=function(t){var e=t.pfx,r=t.codeName,o=t.label;return st(Zd||(Zd=cm([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,r,e,o,e)},n.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},n.prototype.render=function(){var t,e,r=this,o=r.model,l=r.pfx,f=r.$el,d=o.toJSON(),h=o.get("input")||((e=(t=o).getElement)===null||e===void 0?void 0:e.call(t));return d.pfx=l,f.html(this.template(d)),f.attr("class","".concat(l,"editor-c")),f.find("#".concat(l,"code")).append(h),this},n}(x.G7);const pm=fm;var Zd,dm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zc=function(){return Zc=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Zc.apply(this,arguments)},hm="CodeMirror",vm=function(a){dm(n,a);function n(t){var e=a.call(this,t,"CodeManager",Yg)||this;e.EditorView=pm;var r=e.config,o=r.pStylePrefix;return o&&(r.stylePrefix=o+r.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new Qg,css:new Gf,json:new rm,js:new am},e.defViewers={CodeMirror:new lm},e.loadDefaultGenerators().loadDefaultViewers(),e}return n.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},n.prototype.getGenerator=function(t){return this.generators[t]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},n.prototype.getViewer=function(t){return this.viewers[t]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,w.isUndefined)(t.type)?hm:t.type,r=this.getViewer(e)&&this.getViewer(e).clone(),o=document.createElement("div"),l=document.createElement("textarea");return o.appendChild(l),r.set(Zc(Zc({},this.config.optsCodeViewer),t)),r.init(l),r.setElement(o),r},n.prototype.updateViewer=function(t,e){t.setContent(e)},n.prototype.getCode=function(t,e,r){r===void 0&&(r={}),r.em=this.em;var o=this.getGenerator(e);return o?o.build(t,r):""},n.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},n.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},n.prototype.destroy=function(){},n}(jt);const gm=vm;var mm=vr(410),ym=vr.n(mm),_m={maximumStackLength:500,trackSelection:!0};const wm=_m;var bm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ki=function(){return Ki=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ki.apply(this,arguments)},Cm=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Jc=function(a){return a.avoidStore||a.noUndo},Jd=function(a){return Object.keys(a.changedAttributes())},xm=function(a){bm(n,a);function n(t){var e=a.call(this,t,"UndoManager",wm)||this;e.config._disable&&(e.config.maximumStackLength=0);var r=!0;return e.um=new(ym())(Ki({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(o){var l=o.get("_undo");if(l){var f=o.get("_undoexc");if((0,w.isArray)(f)&&Jd(o).some(function(d){return f.indexOf(d)>=0}))return!1;if((0,w.isBoolean)(l)||(0,w.isArray)(l)&&Jd(o).some(function(d){return l.indexOf(d)>=0}))return!0}return!1},on:function(o,l,f){var d=this;!this.beforeCache&&(this.beforeCache=o.previousAttributes());var h=f||l||{};if(h.noUndo&&setTimeout(function(){d.beforeCache=null}),!Jc(h)){var g=o.toJSON({fromUndo:r}),y={object:o,before:this.beforeCache,after:g};return this.beforeCache=null,(0,w.isEmpty)(g)?void 0:y}}}),e.um.changeUndoType("add",{on:function(o,l,f){if(f===void 0&&(f={}),!(Jc(f)||!e.isRegistered(l)))return{object:l,before:void 0,after:o,options:Ki(Ki({},f),{fromUndo:r})}}}),e.um.changeUndoType("remove",{on:function(o,l,f){if(f===void 0&&(f={}),!(Jc(f)||!e.isRegistered(l)))return{object:l,before:o,after:void 0,options:Ki(Ki({},f),{fromUndo:r})}}}),e.um.changeUndoType("reset",{undo:function(o,l){o.reset(l,{fromUndo:r})},redo:function(o,l,f){o.reset(f,{fromUndo:r})},on:function(o,l){if(l===void 0&&(l={}),!(Jc(l)||!e.isRegistered(o)))return{object:o,before:l.previousModels,after:Cm([],o.models,!0),options:Ki(Ki({},l),{fromUndo:r})}}}),e.um.on("undo redo",function(){t.getSelectedAll().map(function(o){return o.trigger("rerender:layer")})}),["undo","redo"].forEach(function(o){return e.um.on(o,function(){return t.trigger(o)})}),e}return n.prototype.postLoad=function(){var t=this,e=t.config,r=t.em;e.trackSelection&&r&&this.add(r.get("selected"))},n.prototype.add=function(t){return this.um.register(t),this},n.prototype.remove=function(t){return this.um.unregister(t),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,o=e.um;return!r.isEditing()&&o.undo(t),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(t){t===void 0&&(t=!0);var e=this,r=e.em,o=e.um;return!r.isEditing()&&o.redo(t),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},n.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},n.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(r){var o=r.get("magicFusionIndex");e.indexOf(o)<0&&(e.push(o),t.push(r))}),t},n.prototype.skip=function(t){var e=!!this.um.isTracking();e&&this.stop(),t(),e&&this.start()},n.prototype.getGroupedStack=function(){var t={},e=this.getStack(),r=function(o,l){var f=o.attributes,d=f.type,h=f.after,g=f.before,y=f.object,b=f.options,k=b===void 0?{}:b;return{index:l,type:d,after:h,before:g,object:y,options:k}};return e.forEach(function(o,l){var f=o.get("magicFusionIndex"),d=r(o,l);t[f]?t[f].push(d):t[f]=[d]}),Object.keys(t).map(function(o){var l=t[o];return{index:l[l.length-1].index,actions:l,labels:(0,w.unique)(l.reduce(function(f,d){var h,g=(h=d.options)===null||h===void 0?void 0:h.action;return g&&f.push(g),f},[]))}})},n.prototype.goToGroup=function(t){var e=this;if(t){var r=this.getPointer(),o=t.index-r;(0,w.times)(Math.abs(o),function(){e[o<0?"undo":"redo"](!1)})}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}(jt);const Sm=xm;var Om={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1};const Tm=Om;var bl=function(){return bl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},bl.apply(this,arguments)},Qc;(function(a){a[a.ACTIVE=1]="ACTIVE",a[a.INACTIVE=0]="INACTIVE",a[a.DISABLED=-1]="DISABLED"})(Qc||(Qc={}));var Lp="_rte",Es={ACTIVE:1,INACTIVE:0,DISABLED:-1},tf=function(a,n){n===void 0&&(n="A");var t=a.selection()||{},e=t.anchorNode,r=t.focusNode,o=e==null?void 0:e.parentNode,l=r==null?void 0:r.parentNode;return(o==null?void 0:o.nodeName)==n||(l==null?void 0:l.nodeName)==n},ef="data-selectme",Eu={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&tf(a)?Es.ACTIVE:Es.INACTIVE},result:function(a){tf(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(ef,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a!=null&&a.selection()&&tf(a,"SPAN")?Es.DISABLED:Es.INACTIVE},result:function(a){!tf(a,"SPAN")&&a.insertHTML("<span ".concat(ef,">").concat(a.selection(),"</span>"),{select:!0})}}},Em=function(){function a(n,t,e){var r=this;if(e===void 0&&(e={}),this.em=n,this.settings=e,t[Lp])return t[Lp];t[Lp]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var o=(e.actions||[]).map(function(g){var y=g;return(0,w.isString)(g)?y=bl({},Eu[g]):Eu[g.name]&&(y=bl(bl({},Eu[g.name]),g)),y}),l=o.length?o:Object.keys(Eu).map(function(g){return Eu[g]});e.classes=bl({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var f=e.classes,d=e.actionbar;if(this.actionbar=d,this.classes=f,this.actions=l,!d){if(!this.isCustom(e.module)){var h=e.actionbarContainer;d=document.createElement("div"),d.className=f.actionbar,h==null||h.appendChild(d),this.actionbar=d}l.forEach(function(g){return r.addAction(g)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.isCustom=function(n){var t=n||this.em.RichTextEditor;return!!(t!=null&&t.config.custom||t!=null&&t.customRte)},a.prototype.destroy=function(){},a.prototype.setEl=function(n){this.el=n,this.doc=n.ownerDocument},a.prototype.updateActiveActions=function(){var n=this,t=this.getActions();t.forEach(function(e){var r=e.update,o=e.btn,l=n.classes,f=l.active,d=l.inactive,h=l.disabled,g=e.state,y=e.name,b=n.doc,k=Qc.INACTIVE;if(o&&(o.className=o.className.replace(f,"").trim(),o.className=o.className.replace(d,"").trim(),o.className=o.className.replace(h,"").trim()),g){var V=g(n,b);if(k=V,o)switch(V){case Es.ACTIVE:o.className+=" ".concat(f);break;case Es.INACTIVE:o.className+=" ".concat(d);break;case Es.DISABLED:o.className+=" ".concat(h);break}}else b.queryCommandSupported(y)&&b.queryCommandState(y)&&(o&&(o.className+=" ".concat(f)),k=Qc.ACTIVE);e.currentState=k,r==null||r(n,e)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},a.prototype.enable=function(n){return this.enabled?this:this.__toggleEffects(!0,n)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(n,t){n===void 0&&(n=!1),t===void 0&&(t={});var e=n?Xt.on:Xt.S1,r=this,o=r.el,l=r.doc,f=this.actionbarEl();if(f&&(f.style.display=n?"":"none"),o.contentEditable="".concat(!!n),e(o,"mouseup keyup",this.updateActiveActions),e(l,"keydown",this.__onKeydown),e(l,"paste",this.__onPaste),this.enabled=n,n){var d=t.event;if(this.syncActions(),this.updateActiveActions(),d){var h=null;if(l.caretRangeFromPoint){var g=(0,Xt.VB)(d);h=l.caretRangeFromPoint(g.clientX,g.clientY)}else d.rangeParent&&(h=l.createRange(),h.setStart(d.rangeParent,d.rangeOffset));var y=l.getSelection();y==null||y.removeAllRanges(),h&&(y==null||y.addRange(h))}o.focus()}return this},a.prototype.__onKeydown=function(n){var t=this.em,e=t.RichTextEditor.getConfig().onKeydown;if(e)return e({ev:n,rte:this,editor:t.getEditor()});var r=this.doc,o=["insertOrderedList","insertUnorderedList"];n.key==="Enter"&&!o.some(function(l){return r.queryCommandState(l)})&&(r.execCommand("insertLineBreak"),n.preventDefault())},a.prototype.__onPaste=function(n){var t=this.em,e=t.RichTextEditor.getConfig().onPaste;if(e)return e({ev:n,rte:this,editor:t.getEditor()});var r=n.clipboardData,o=r.getData("text"),l=r.getData("text/html");if(o&&!l){n.preventDefault();var f=o.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,f)}},a.prototype.syncActions=function(){var n=this;this.getActions().forEach(function(t){if(n.actionbar&&(!t.state||t.state&&t.state(n,n.doc)>=0)){var e=t.event||"click",r=t.btn;r&&(r["on".concat(e)]=function(){t.result(n,t),n.updateActiveActions()})}})},a.prototype.addAction=function(n,t){t===void 0&&(t={});var e=t.sync,r=this.actionbarEl();if(r){var o=n.icon,l=n.attributes,f=l===void 0?{}:l,d=document.createElement("span");d.className=this.classes.button,n.btn=d;for(var h in f)d.setAttribute(h,f[h]);typeof o=="string"?d.innerHTML=o:d.appendChild(o),r.appendChild(d)}e&&(this.actions.push(n),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(n,t){this.doc.execCommand(n,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(n,t){var e=t===void 0?{}:t,r=e.select,o=this,l=o.em,f=o.doc,d=o.el,h=f.getSelection();if(h&&h.rangeCount){var g=(0,Y.getComponentModel)(d)||l.getSelected(),y=f.createElement("div"),b=h.getRangeAt(0);b.deleteContents(),(0,w.isString)(n)?y.innerHTML=n:n&&y.appendChild(n),Array.prototype.slice.call(y.childNodes).forEach(function(k){b.insertNode(k)}),h.removeAllRanges(),h.addRange(b),d.focus(),r&&g&&(g.once("rte:disable",function(){var k=g.find("[".concat(ef,"]"))[0];k&&(l.setSelected(k),k.removeAttributes(ef))}),g.trigger("disable"))}},a}();const Pm=Em;var Am=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qd=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},th=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},km=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Dp="".concat(fr.refresh," frame:scroll component:update"),Mm="rte:enable",Lm="rte:disable",Dm="rte:custom",jm={enable:Mm,disable:Lm,custom:Dm},Im=function(a){Am(n,a);function n(t){var e=a.call(this,t,"RichTextEditor",Tm)||this;e.events=jm;var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.pfx=r.stylePrefix,e.actions=r.actions||[];var l=new x.Hn;return e.model=l,l.on("change:currentView",e.__trgCustom,e),e.__dbdTrgCustom=(0,w.debounce)(function(){return e.__trgCustom()},0),e}return n.prototype.onLoad=function(){if((0,Y.hasWin)()){var t=this.config,e=t.pStylePrefix,r=t.custom,o=(0,Xt.ut)("div",{class:(0,Xt.cx)("".concat(e,"rte-toolbar"),!r&&"".concat(e,"one-bg ").concat(e,"rte-toolbar-ui"))});this.toolbar=o,this.initRte((0,Xt.ut)("div")),(0,Xt.on)(o,"mousedown",function(l){return l.stopPropagation()})}},n.prototype.__trgCustom=function(){var t=this,e=t.model,r=t.em,o=t.events;r.trigger(o.custom,{enabled:!!e.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},n.prototype.destroy=function(){var t,e,r;(t=this.globalRte)===null||t===void 0||t.destroy(),(r=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||r===void 0||r.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Xt.L_)(this.toolbar)},n.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},n.prototype.initRte=function(t){var e=this.globalRte,r=this,o=r.em,l=r.pfx,f=r.actionbar,d=r.config,h=this.actions||km([],d.actions,!0),g={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=o,e.setEl(t)):(e=new Pm(o,t,{classes:g,actions:h,actionbar:f,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},n.prototype.add=function(t,e){var r;e===void 0&&(e={}),e.name=t,(r=this.globalRte)===null||r===void 0||r.addAction(e,{sync:!0})},n.prototype.get=function(t){var e,r;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(o){o.name==t&&(r=o)}),r},n.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},n.prototype.remove=function(t){var e,r=this.getAll(),o=this.get(t);if(o){var l=o.btn,f=r.indexOf(o);(e=l==null?void 0:l.parentNode)===null||e===void 0||e.removeChild(l),r.splice(f,1)}return o},n.prototype.run=function(t){var e=this.globalRte,r=(0,w.isString)(t)?this.get(t):t;e&&r&&(r.result(e,r),e.updateActiveActions())},n.prototype.getToolbarEl=function(){return this.toolbar},n.prototype.updatePosition=function(){var t=this,e=t.em,r=t.toolbar,o="px",l=e.Canvas,f=r.style,d=l.getTargetToElementFixed(this.lastEl,r,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(h){var g=d[h];(0,Y.isDef)(g)&&(f[h]=(0,w.isString)(g)?g:(g||0)+o)})},n.prototype.enable=function(t,e,r){return r===void 0&&(r={}),Qd(this,void 0,void 0,function(){var o,l,f,d,h;return th(this,function(g){switch(g.label){case 0:return this.lastEl=t.el,o=this,l=o.customRte,f=o.em,d=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(d,e):this.initRte(d).enable(r)];case 1:return h=g.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(Dp,this.updatePosition,this),f.on(Dp,this.updatePosition,this),f.trigger("rte:enable",t,h)),this.model.set({currentView:t}),[2,h]}})})},n.prototype.getContent=function(t,e){return Qd(this,void 0,void 0,function(){var r;return th(this,function(o){switch(o.label){case 0:return r=this.customRte,r&&e&&(0,w.isFunction)(r.getContent)?[4,r.getContent(t.el,e)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,t.getChildrenContainer().innerHTML]}})})},n.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},n.prototype.disable=function(t,e,r){r===void 0&&(r={});var o=this.em,l=this.customRte,f=t.getChildrenContainer();l?l.disable(f,e):e&&e.disable(),this.hideToolbar(),o&&(o.off(Dp,this.updatePosition,this),!r.fromMove&&o.trigger("rte:disable",t,e)),this.model.unset("currentView")},n}(jt);const Vm=Im,Rm={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var Nm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zn=function(){return zn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},zn.apply(this,arguments)},Fm=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},eh=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},jp=function(a){Nm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.getDefaults=function(){return(0,w.result)(this.prototype,"defaults")},n.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var r=this.getId()||"",o=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(o||r).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!o&&this.set("name",(0,Y.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),n.callInit(this,t,e)},n.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},n.prototype.__upTargets=function(t,e){var r,o=this;e===void 0&&(e={});var l=this.em,f=l.Styles,d=this.getName(),h=e.__clear,g=h?"":this.__getFullValue(e),y=this.__getParentProp(),b=this.changedAttributes(),k=(0,w.keys)(b).reduce(function(kt,Gt){return kt[Gt]=o.previous(Gt),kt},{}),V=eh(eh([],(0,w.keys)(this.__getClearProps()),!0),["__p"],!1),$=(0,w.keys)(b),Q=!e.__up&&!y&&(h||V.some(function(kt){return $.indexOf(kt)>=0})),vt=this.get("onChange"),Mt={property:this,from:k,to:b,value:g,opts:e};f.__trgEv(f.events.propertyUpdate,Mt),vt&&vt(Mt),Q&&this.__upTargetsStyle((r={},r[d]=g,r),e)},n.prototype.__upTargetsStyle=function(t,e){var r,o=(r=this.em)===null||r===void 0?void 0:r.get("StyleManager");o==null||o.addStyleTargets(zn(zn({},t),{__p:!!e.avoidStore}),e)},n.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var r=e.partial,o=Fm(e,["partial"]);return t.__p=!!(o.avoidStore||r),this.set(t,zn(zn({},o),{avoidStore:t.__p}))},n.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,zn(zn({},e),{__up:!0}))},n.prototype.init=function(){},n.prototype.getId=function(){return this.get("id")},n.prototype.getType=function(){return this.get("type")},n.prototype.getName=function(){return this.get("property")},n.prototype.getLabel=function(t){var e;t===void 0&&(t={});var r=t.locale,o=r===void 0?!0:r,l=this.getId(),f=this.get("name")||this.get("label");return o&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||f},n.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,r=this.get("value");return!this.hasValue()&&!e?this.getDefaultValue():r},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget(),o=this.get("value");return!(0,w.isUndefined)(o)&&o!==""&&!r},n.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},n.prototype.getStyle=function(t){var e;t===void 0&&(t={});var r=this.getName(),o=t.camelCase?(0,Y.camelCase)(r):r;return e={},e[o]=this.__getFullValue(t),e},n.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,w.isUndefined)(t)?this.get("defaults"):t)},n.prototype.upValue=function(t,e){e===void 0&&(e={});var r=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(r,e)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),zn(zn({},t),{__clear:!0})),this},n.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},n.prototype.getParent=function(){return this.__getParentProp()},n.prototype.isFull=function(){return!!this.get("full")},n.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},n.prototype.__getClearProps=function(){return{value:""}},n.prototype.setValue=function(t,e,r){e===void 0&&(e=!0),r===void 0&&(r={});var o=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(o,zn({avoidStore:l},r))},n.prototype.setValueFromInput=function(t,e,r){r===void 0&&(r={}),this.setValue(t,e,zn(zn({},r),{fromInput:1}))},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r={value:t},o="!important",l=this.get("functionName")||"";if((0,w.isString)(t)&&t.indexOf(o)!==-1&&(r.value=t.replace(o,"").trim(),r.important=!0),!l&&!e.complete)return r;var f=[],d="".concat(r.value).trim(),h=d.indexOf("(")+1,g=l||d.substring(0,h-1);if(g&&(r.functionName=g),!l||d.indexOf("".concat(l,"("))===0){var y=d.lastIndexOf(")");f.push(h),y>=0&&f.push(y),r.value=String.prototype.substring.apply(d,f)}if(e.numeric){var b=parseFloat(r.value);r.unit=r.value.replace(b,""),r.value=b}return r},n.prototype.__getFullValue=function(t){var e=t===void 0?{}:t,r=e.withDefault;return!this.hasValue()&&r?this.getDefaultValue():this.getFullValue()},n.prototype.getFullValue=function(t,e){e===void 0&&(e={});var r=this.get("functionName"),o=this.getDefaultValue(),l=(0,w.isUndefined)(t)?this.get("value"):t,f=!(0,w.isUndefined)(l)&&l!=="";if(l&&o&&l===o)return o;if(r&&f){var d=r==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(r,"(").concat(d,")")}return f&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},n.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},n.prototype.getParentTarget=function(){return this.get("parentTarget")||null},n.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,r=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,r>=0?r:void 0]).trim()}},n.prototype.__checkVisibility=function(t){var e=t.target,r=t.component,o=t.sectors,l=r||e;if(!l)return!1;var f=this.getId(),d=this.getName(),h=this.get("toRequire"),g=this.get("requires"),y=this.get("requiresParent"),b=l.get("unstylable"),k=l.get("stylable-require"),V=l.get("stylable");if((0,w.isArray)(V)&&(V=V.indexOf(d)>=0),(0,w.isArray)(b)&&(V=b.indexOf(d)<0),h&&(V=!e||k&&(k.indexOf(f)>=0||k.indexOf(d)>=0)),o&&g){var $=(0,w.keys)(g);o.forEach(function(kt){kt.getProperties().forEach(function(Gt){if((0,w.includes)($,Gt.id)){var fe=g[Gt.id];V=V&&(0,w.includes)(fe,Gt.get("value"))}})})}if(y){var Q=r&&r.parent(),vt=Q&&Q.getEl();if(vt){var Mt=(0,Y.hasWin)()?window.getComputedStyle(vt):{};(0,w.each)(y,function(kt,Gt){V=V&&Mt[Gt]&&(0,w.includes)(kt,Mt[Gt])})}else V=!1}return!!V},n}(x.Hn);const xr=jp;jp.callParentInit=function(a,n,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(n,[t,zn(zn({},e),{skipInit:1})])},jp.callInit=function(a,n,t){t===void 0&&(t={}),!t.skipInit&&a.init(n,t)};var Hm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rf=function(){return rf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},rf.apply(this,arguments)},Bm=function(a){Hm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},n.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(r,o){return r[(0,Y.camelCase)(o)]=e[o],r},{}):e},n.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},n.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},n.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},n.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},n.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},n.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},n.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},n.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",rf(rf({},this.getValues()),t))},n}(x.Hn);const Um=Bm;var zm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rh=function(a){zm(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},n}(x.FE);const Wm=rh;rh.prototype.model=Um;var Km=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cl=function(){return Cl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Cl.apply(this,arguments)},nh=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},oh=function(a){return a==="integer"||a==="number"},Gm=function(a){Km(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Cl(Cl({},xr.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),xr.callParentInit(xr,this,t,e);var r=this.em,o=new Np(this.get("properties")||[],{em:r,parentProp:this});this.set("properties",o,{silent:!0}),this.listenTo(o,"change",this.__upProperties),xr.callInit(this,t,e)},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),n.prototype.getProperties=function(){return nh([],this.get("properties").models,!0)},n.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},n.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},n.prototype.isDetached=function(){return!!this.get("detached")},n.prototype.getValues=function(t){var e=t===void 0?{}:t,r=e.byName;return this.getProperties().reduce(function(o,l){var f=r?l.getName():l.getId();return o[f]="".concat(l.__getFullValue()),o},{})},n.prototype.getSeparator=function(){return this.getSplitSeparator()},n.prototype.getJoin=function(){return this.__getJoin()},n.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var r=this.getName(),o=this.__getJoin(),l=this.get("toStyle"),f=this.getValues(),d={};if(l)d=l(f,{join:o,name:r,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())d=f;else{var h=this.getProperties().map(function(g){return g.__getFullValue({withDefault:1})}).filter(Boolean).join(o);d=(e={},e[r]=h,e)}return this.isDetached()?d[r]="":(d[r]=d[r]||"",d=Cl(Cl({},d),this.getProperties().reduce(function(g,y){return g[y.getName()]="",g},{}))),t.camelCase?Object.keys(d).reduce(function(g,y){return g[(0,Y.camelCase)(y)]=d[y],g},{}):d},n.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},n.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!(e.__up||e.__clearIn)){var r=this.__getParentProp();if(r)return r.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},n.prototype.__upTargetsStyleProps=function(t,e){var r;t===void 0&&(t={});var o=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();o=(r={},r[l]=o[l],r)}this.__upTargetsStyle(o,t)},n.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),xr.prototype._up.call(this,t,e),this},n.prototype.getStyle=function(t){return this.getStyleFromProps(t)},n.prototype.__getFullValue=function(t){if(t===void 0&&(t={}),this.isDetached()||t.__clear)return"";var e=this.getStyleFromProps()[this.getName()]||"";return gi(e)},n.prototype.__getJoin=function(){var t=this.get("join");return(0,w.isString)(t)?t:this.get("separator")},n.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),r=this.getProperties(),o=r.map(function(f){return f.getName()}),l=nh([e],o,!0);return l.some(function(f){return!(0,w.isUndefined)(t[f])&&t[f]!==""})},n.prototype.__splitValue=function(t,e){return gi(t).split(e).map(function(r){return r.trim()}).filter(Boolean)},n.prototype.__splitStyleName=function(t,e,r){return this.__splitValue(t[e]||"",r)},n.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var r=e===void 0?{}:e,o=r.byName,l=this.getProperties(),f=l.length===4&&l.every(function(g){return oh(g.getType())}),d=this.__splitValue(t,this.getSplitSeparator()),h={};return l.forEach(function(g,y){var b=d[y],k=(0,w.isUndefined)(b)?"":b;if(f){var V=d.length;k=d[y]||d[y%V+(V!=1&&V%2?1:0)]||k}var $=o?g.getName():g.getId();h[$]=k||""}),h},n.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var r=e.byName,o=this.getName(),l=this.getProperties(),f=this.getSplitSeparator(),d=this.get("fromStyle"),h=d?d(t,{property:this,name:o,separator:f}):{};return d||(h=this.__getSplitValue(t[o]||"",{byName:r}),l.forEach(function(g){var y=t[g.getName()],b=r?g.getName():g.getId();!(0,w.isUndefined)(y)&&y!==""&&(h[b]=y)})),h},n.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(o){var l=t[o.getId()];o.__getFullValue()!==l&&o.upValue(l,e)});var r=(0,w.keys)(t).map(function(o){return t[o]}).join(" ");this.set("value",r,{silent:!0})},n.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),xr.prototype.clear.call(this),this},n.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},n.prototype.getFullValue=function(){return this.__getFullValue()},n.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},n}(xr);const xl=Gm;var $m=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),no=function(){return no=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},no.apply(this,arguments)},qm=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Ym=/,(?![^\(]*\))/,Xm=/\s(?![^(]*\))/,Zm=function(a){$m(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return no(no({},xl.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),xl.callParentInit(xl,this,t,e);var r=this.get("layers"),o=new Wm(r,{prop:this});o.property=this,o.properties=this.get("properties"),this.set("layers",o,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(o,"add remove",this.__upLayers),xl.callInit(this,t,e)},Object.defineProperty(n.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),n.prototype.getLayers=function(){return this.layers.models},n.prototype.hasLayers=function(){return this.getLayers().length>0},n.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers.at(t)||void 0},n.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},n.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},n.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},n.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var r=this.layers,o=t?t.getIndex():-1;o>=0&&(0,w.isNumber)(e)&&e>=0&&e<r.length&&o!==e&&(this.removeLayer(t),r.add(t,{at:e}))},n.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var r={};this.getProperties().forEach(function(l){var f=l.getId(),d=t[f];r[f]=(0,w.isUndefined)(d)?l.getDefaultValue():d});var o=this.layers.push({values:r},e);return o},n.prototype.removeLayer=function(t){return this.layers.remove(t)},n.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},n.prototype.getLayerLabel=function(t){var e="";if(t){var r=this.get("layerLabel"),o=t.getValues(),l=t.getIndex();if(r)e=r(t,{index:l,values:o,property:this});else{var f=[];this.getProperties().map(function(d){f.push(o[d.getId()])}),e=f.filter(Boolean).join(" ")}}return e},n.prototype.getStyleFromLayer=function(t,e){var r;e===void 0&&(e={});var o=this.__getJoin(),l=this.__getJoinLayers(),f=this.get("toStyle"),d=this.getName(),h=t.getValues(),g;if(f)g=f(h,{join:o,joinLayers:l,name:d,layer:t,property:this});else{var y=this.getProperties().map(function(b){var k=b.getName(),V=h[b.getId()],$=(0,w.isUndefined)(V)?b.getDefaultValue():V;if(e.number&&oh(b.getType())){var Q=b.parseValue(V,e.number);$="".concat(Q.value).concat(Q.unit)}return{name:k,value:$}});g=this.isDetached()?y.reduce(function(b,k){return b[k.name]=k.value,b},{}):(r={},r[this.getName()]=y.map(function(b){return b.value}).join(o),r)}return e.camelCase?Object.keys(g).reduce(function(b,k){return b[(0,Y.camelCase)(k)]=g[k],b},{}):g},n.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var r={},o=this.get("preview");return o&&(r=this.getStyleFromLayer(t,e)),r},n.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,w.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},n.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},n.prototype.__upProperties=function(t,e){var r;e===void 0&&(e={});var o=this.getSelectedLayer();o&&(o.upValues((r={},r[t.getId()]=t.__getFullValue(),r)),!e.__up&&this.__upTargetsStyleProps(e))},n.prototype.__upLayers=function(t,e,r){this.__upTargetsStyleProps(r||e)},n.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return xr.prototype.__upTargets.call(this,t,e)},n.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},n.prototype.__upTargetsStyle=function(t,e){return xr.prototype.__upTargetsStyle.call(this,t,e)},n.prototype.__upSelected=function(t,e){var r=t===void 0?{}:t,o=r.noEvent;e===void 0&&(e={});var l=this.em.Styles,f=this.getSelectedLayer(),d=f==null?void 0:f.getValues();d&&this.getProperties().forEach(function(h){var g,y=(g=d[h.getId()])!==null&&g!==void 0?g:"";h.__getFullValue()!==y&&h.upValue(y,no(no({},e),{__up:!0}))}),!o&&l.__trgEv(l.events.layerSelect,{property:this})},n.prototype._up=function(t,e){e===void 0&&(e={});var r=t.__layers,o=r===void 0?[]:r,l=qm(t,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},e),xr.prototype._up.call(this,l,e),this},n.prototype.__setLayers=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var r=this.layers,o=t.map(function(l){return{values:l}});r.length===o.length?o.map(function(l,f){var d;return(d=r.at(f))===null||d===void 0?void 0:d.upValues(l.values)}):r.reset(o),this.set({isEmptyValue:!!e.isEmptyValue}),this.__upSelected({noEvent:!0})},n.prototype.__parseValue=function(t){var e=this,r=this.parseValue(t);return r.__layers=t.split(Ym).map(function(o){return o.trim()}).map(function(o){return e.__parseLayer(o)}).filter(Boolean),r},n.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),r=t.split(Xm),o=this.getProperties();return e?e({value:t,values:r}):o.reduce(function(l,f,d){var h=r[d];return l[f.getId()]=(0,w.isUndefined)(h)?f.getDefaultValue():h,l},{})},n.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;if(this.isEmptyValueStyle(t))return[];var r=this.getName(),o=this.getProperties(),l=this.getLayerSeparator(),f=this.attributes.fromStyle,d=f?f(t,{property:this,name:r,separatorLayers:l}):[];if(!f){var h=this.__splitStyleName(t,r,l).map(function(g){return g.split(e.getSplitSeparator())}).map(function(g){var y={};return o.forEach(function(b,k){var V=g[k];y[b.getId()]=(0,w.isUndefined)(V)?b.getDefaultValue():V}),y});o.forEach(function(g){var y=g.getId();e.__splitStyleName(t,g.getName(),l).map(function(b){var k;return k={},k[y]=b||g.getDefaultValue(),k}).forEach(function(b,k){h[k]=h[k]?no(no({},h[k]),b):b})}),d=h}return(0,w.isArray)(d)?d:[d]},n.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},n.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var r={},o=this.getName(),l=this.getLayers(),f=this.getProperties(),d=l.map(function(g){return e.getStyleFromLayer(g,t)});if(d.forEach(function(g){(0,w.keys)(g).map(function(y){r[y]||(r[y]=[]),r[y].push(g[y])})}),(0,w.keys)(r).map(function(g){r[g]=r[g].join(e.__getJoinLayers())}),this.isDetached())r[o]="",!l.length&&f.map(function(g){r[g.getName()]=""});else{var h=f.reduce(function(g,y){return g[y.getName()]="",g},{});r[o]=r[o]||"",r=no(no({},r),h)}return no(no({},r),t.__clear?{}:this.getEmptyValueStyle())},n.prototype.isEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.getEmptyValueStyle({force:!0}),r=(0,w.keys)(e);return!!r.length&&r.every(function(o){return e[o]===t[o]})},n.prototype.getEmptyValueStyle=function(t){t===void 0&&(t={});var e=this.attributes.emptyValue;if(e&&(!this.hasLayers()||t.force)){var r=this.getName(),o=this.getProperties(),l=(0,w.isString)(e)?e:e({property:this});if((0,w.isString)(l)){var f={};return this.isDetached()?o.map(function(d){f[d.getName()]=l}):f[r]=l,f}else return l}else return{}},n.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,w.isString)(e)?e:t)},n.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return gi(t[this.getName()])},n.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent,r=e&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!r},n.prototype.clear=function(t){return t===void 0&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(no(no({},t),{__clear:!0})),xr.prototype.clear.call(this),this},n.prototype.__canClearProp=function(){return!1},n.prototype.__getLayers=function(){return this.layers},n}(xl);const Jm=Zm;var Qm=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nf=function(){return nf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},nf.apply(this,arguments)},ty=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},ey=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Ip="data-clear-style",ry=function(a){Qm(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,w.bindAll)(e,"__change","__updateStyle");var r=t.config||{},o=r.em;e.config=r,e.em=o,e.pfx=r.stylePrefix||"",e.ppfx=r.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,w.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,w.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(o,"change:device",e.onValueChange);var f=e.init&&e.init.bind(e);return f&&f(),e}return n.prototype.events=function(){var t;return t={change:"inputValueChanged"},t["click [".concat(Ip,"]")]="clear",t},n.prototype.template=function(t){var e=this,r=e.pfx,o=e.ppfx;return`
      <div class="`.concat(r,`label" data-sm-label></div>
      <div class="`).concat(o,`fields" data-sm-fields></div>
    `)},n.prototype.templateLabel=function(t){var e=this,r=e.pfx,o=e.em,l=t.parent,f=t.attributes,d=f.icon,h=d===void 0?"":d,g=f.info,y=g===void 0?"":g,b=o==null?void 0:o.getConfig().icons,k=(b==null?void 0:b.close)||"";return`
      <span class="`.concat(r,"icon ").concat(h,'" title="').concat(y,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(l?"":'<div class="'.concat(r,'clear" style="display: none" ').concat(Ip,">").concat(k,"</div>"),`
    `)},n.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},n.prototype.remove=function(){var t=this;return x.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},n.prototype.updateStatus=function(){var t,e=this,r=e.model,o=e.pfx,l=e.ppfx,f=e.config,d="".concat(l,"four-color"),h="".concat(l,"color-warn"),g=this.$el.children(".".concat(o,"label")),y=this.getClearEl(),b=y?y.style:{};g.removeClass("".concat(d," ").concat(h)),b.display="none",r.hasValue({noParent:!0})&&f.highlightChanged?(g.addClass(d),f.clearProperties&&(b.display="")):r.hasValue()&&f.highlightComputed&&g.addClass(h),(t=this.parent)===null||t===void 0||t.updateStatus()},n.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},n.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(Ip,"]"))),this.clearEl},n.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),!this.emit&&this.model.upValue(t.target.value)},n.prototype.onValueChange=function(t,e,r){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},n.prototype.setValue=function(t){var e=this.model,r=(0,w.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(r);this.__setValueInput(r)},n.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},n.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},n.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},n.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(nf(nf({},this._getClbOpts()),{value:t}))},n.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.emit&&this.emit.bind(this);r&&r.apply(void 0,ey([this._getClbOpts()],t,!1))},n.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var r=e.complete,o=e.partial;ty(e,["complete","partial"]);var l=this.model,f=r!==!1&&o!==!0;(0,Y.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!f}):l.upValue(t,{partial:!f})},n.prototype._getClbOpts=function(){var t=this,e=t.model,r=t.el,o=t.createdEl;return{el:r,createdEl:o,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},n.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,r=t.model,o=t.el,l=t.$el,f=r.getName(),d=r.getType(),h=r.get("className")||"",g="".concat(e,"property"),y=d==="number"?"".concat(e).concat(d," ").concat(e,"integer"):"".concat(e).concat(d);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(r)),l.find("[data-sm-label]").append(this.templateLabel(r));var b=this.create&&this.create.bind(this);this.createdEl=b&&b(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(r)),o.className="".concat(g," ").concat(y," ").concat(g,"__").concat(f," ").concat(h).trim(),o.className+=r.isFull()?" ".concat(g,"--full"):"";var k=this.onRender&&this.onRender.bind(this);return k&&k(),this.setValue(r.getValue()),this},n.prototype.onRender=function(){},n}(x.G7);const Gi=ry;var ny=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oy=function(a){ny(n,a);function n(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var r=e.collection;return e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.render),e}return n.prototype.addTo=function(t,e,r){this.add(t,null,r)},n.prototype.add=function(t,e,r){r===void 0&&(r={});var o=this,l=o.parent,f=o.config,d=e||this.el,h=new t.typeView({model:t,config:f});l&&(h.parent=l),h.render();var g=h.el;this.properties.push(h),(0,Xt.$Q)(d,g,r.at)},n.prototype.remove=function(){return x.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},n.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.pfx;this.clearItems();var l=document.createDocumentFragment();return this.collection.forEach(function(f){return t.add(f,l)}),r.empty(),r.append(l),r.attr("class","".concat(o,"properties")),this},n}(x.G7);const Vp=oy;var iy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),of=function(){return of=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},of.apply(this,arguments)},ay=function(a){iy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},n.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),Gi.prototype.remove.apply(this,arguments),this},n.prototype.onValueChange=function(){},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.get("properties");if(r.length&&!this.props){var o=e.isDetached(),l=new Vp({config:of(of({},this.config),{highlightComputed:o,highlightChanged:o}),collection:r,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},n.prototype.clearCached=function(){Gi.prototype.clearCached.apply(this,arguments),delete this.props},n}(Gi);const Pu=ay;var sy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ly=function(a){sy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},n.prototype.template=function(){var t=this,e=t.pfx,r=t.ppfx,o=t.em,l=o==null?void 0:o.getConfig().icons,f=(l==null?void 0:l.close)||"",d=(l==null?void 0:l.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(r,`no-touch-actions" data-move-layer>
          `).concat(d,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(f,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},n.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,r=t.config||{};this.em=r.em,this.config=r,this.sorter=t.sorter,this.pfx=r.stylePrefix||"",this.ppfx=r.pStylePrefix||"",this.propertyView=t.propertyView;var o=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(o,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},n.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},n.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},n.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var r=this.getPreviewEl(),o=t.getStylePreview({number:{min:-3,max:3}}),l=(0,w.keys)(o).map(function(f){return"".concat(f,":").concat(o[f])}).join(";");r.setAttribute("style",l)}},n.prototype.updateVisibility=function(){var t,e=this,r=e.pfx,o=e.model,l=e.propertyView,f=this.getPropertiesWrapper(),d=o.isSelected();f.style.display=d?"":"none",this.$el[d?"addClass":"removeClass"]("".concat(r,"active")),d&&f.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},n.prototype.render=function(){var t=this,e=t.el,r=t.pfx,o=t.model;return e.innerHTML=this.template(),e.className="".concat(r,"layer"),o.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},n}(x.G7);const uy=ly;var cy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fy=function(a){cy(n,a);function n(t){var e=a.call(this,t)||this,r=e.collection,o=t.config||{},l=o.em,f=o.stylePrefix||"",d=o.pStylePrefix||"";e.config=o,e.pfx=f,e.ppfx=d,e.propertyView=t.propertyView,e.className="".concat(f,"layers ").concat(d,"field"),e.listenTo(r,"add",e.addTo),e.listenTo(r,"reset",e.reset),e.items=[];var h=l==null?void 0:l.Utils;return e.sorter=h?new h.Sorter({container:e.el,ignoreViewChildren:1,containerSel:".".concat(f,"layers"),itemSel:".".concat(f,"layer"),pfx:o.pStylePrefix,em:l}):"",r.view=e,e.$el.data("model",r),e.$el.data("collection",r),e}return n.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},n.prototype.addToCollection=function(t,e,r){var o=e||null,l=this,f=l.propertyView,d=l.config,h=l.sorter,g=l.$el,y=new uy({model:t,config:d,sorter:h,propertyView:f}),b=y.render().el;if(this.items.push(y),o)o.appendChild(b);else if(typeof r<"u"){var k="before";g.children().length===r&&(r--,k="after"),r<0?g.append(b):g.children().eq(r)[k](b)}else g.append(b);return b},n.prototype.reset=function(t,e){this.clearItems(),this.render()},n.prototype.remove=function(){return this.clearItems(),x.G7.prototype.remove.apply(this,arguments),this},n.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.sorter,l=document.createDocumentFragment();return r.empty(),this.collection.forEach(function(f){return t.addToCollection(f,l)}),r.append(l),r.attr("class",this.className),o&&(o.plh=null),this},n}(x.G7);const py=fy;var dy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sl=function(){return Sl=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Sl.apply(this,arguments)},hy=function(a){dy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return Sl(Sl({},Pu.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.em,o=r==null?void 0:r.getConfig().icons,l=(o==null?void 0:o.plus)||"+";return`
      <div class="`.concat(e,"field ").concat(e,`stack">
        <button type="button" id="`).concat(e,`add" data-add-layer>
          `).concat(l,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},n.prototype.init=function(){var t=this.model;this.listenTo(t.layers,"change reset",this.updateStatus),this.listenTo(t,"change:isEmptyValue",this.updateStatus)},n.prototype.addLayer=function(){this.model.addLayer({},{at:0})},n.prototype.setValue=function(){},n.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),Pu.prototype.remove.apply(this,arguments),this},n.prototype.clearCached=function(){Pu.prototype.clearCached.apply(this,arguments),delete this.layersView},n.prototype.onRender=function(){var t=this,e=t.model,r=t.el,o=t.config,l=e.get("properties");if(l.length&&!this.props){var f=new Vp({config:Sl(Sl({},o),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});f.render();var d=new py({collection:e.layers,config:o,propertyView:this});d.render();var h=r.querySelector("[data-layers-wrapper]");h.appendChild(d.el),this.props=f,this.layersView=d}},n}(Pu);const vy=hy;var gy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),af=function(){return af=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},af.apply(this,arguments)},my=function(a){gy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return af(af({},Gi.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},n.prototype.templateInput=function(){var t,e=this,r=e.pfx,o=e.em,l=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,f=l==null?void 0:l.close;return`
      <div class="`.concat(r,"field ").concat(r,`file">
        <div id='`).concat(r,`input-holder'>
          <div class="`).concat(r,`btn-c">
            <button class="`).concat(r,'btn" id="').concat(r,`images" type="button" data-open-assets>
              `).concat(o.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(r,'preview-box" class="').concat(r,`preview-file" data-preview-box>
          <div id="`).concat(r,'preview-file" class="').concat(r,`preview-file-cnt" data-preview></div>
          <div id="`).concat(r,'close" class="').concat(r,'preview-file-close" data-clear-asset>').concat(f,`</div>
        </div>
      </div>
    `)},n.prototype.__setValueInput=function(t){var e=this,r=e.model,o=e.el,l=r.getDefaultValue(),f=o.querySelector("[data-preview-box]"),d=o.querySelector("[data-preview]");f.style.display=!t||t===l?"none":"",d.style.backgroundImage=t||r.getDefaultValue()},n.prototype.openAssetManager=function(){var t=this,e,r=(e=this.em)===null||e===void 0?void 0:e.Assets;r==null||r.open({select:function(o,l){var f=(0,w.isString)(o)?o:o.get("src");t.model.upValue(f,{partial:!l}),l&&r.close()},types:["image"],accept:"image/*"})},n}(Gi);const yy=my;var _y=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wy=function(a){_y(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(t){return""},n.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},n.prototype.setValue=function(t){},n.prototype.onRender=function(){var t=this,e=t.ppfx,r=t.model,o=t.el;if(!this.inputInst){var l=r.input;l.ppfx=e,l.render();var f=o.querySelector(".".concat(e,"fields"));f.appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},n.prototype.clearCached=function(){Gi.prototype.clearCached.apply(this,arguments),this.inputInst=null},n}(Gi);const $i=wy;var by=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cy=function(a){by(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},n.prototype.remove=function(){var t=this;$i.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(r){return t[r]=null}),this},n.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},n.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,r=e.ppfx,o=e.model,l=e.em,f=e.el,d=new Ut({target:l,model:o,ppfx:r,onChange:this.__handleChange}),h=d.render();f.querySelector(".".concat(r,"fields")).appendChild(h.el),this.input=(t=h.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=h}},n}($i);const xy=Cy;var Sy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sf=function(){return sf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},sf.apply(this,arguments)},ih=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},Oy=function(a){Sy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return sf(sf({},xr.getDefaults()),{options:[],full:0})},n.prototype.getOptions=function(){var t=this.attributes,e=t.options,r=t.list;return(e&&e.length?e:r)||[]},n.prototype.getOption=function(t){var e=this,r=(0,Y.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(o){return e.getOptionId(o)===r})[0]||null},n.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},n.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(ih(ih([],e,!0),[t],!1))}return this},n.prototype.getOptionId=function(t){return(0,Y.isDef)(t.id)?t.id:t.value},n.prototype.getOptionLabel=function(t,e){var r;e===void 0&&(e={});var o=e.locale,l=o===void 0?!0:o,f=((0,w.isString)(t)?this.getOption(t):t)||{},d=this.getOptionId(f),h=f.label||f.name||d,g=e.property||this.getId();return l&&((r=this.em)===null||r===void 0?void 0:r.t("styleManager.options.".concat(g,".").concat(d)))||h},n.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];xr.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},n.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},n}(xr);const Rp=Oy;var Ty=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ey=function(a){Ty(n,a);function n(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return n.prototype.templateInput=function(){var t=this,e=t.pfx,r=t.ppfx;return`
      <div class="`.concat(r,"field ").concat(r,`select">
        <span id="`).concat(e,`input-holder"></span>
        <div class="`).concat(r,`sel-arrow">
          <div class="`).concat(r,`d-s-arrow"></div>
        </div>
      </div>
    `)},n.prototype.updateOptions=function(){delete this.input,this.onRender()},n.prototype.onRender=function(){var t=this.pfx,e=this.model,r=e.getOptions();if(!this.input){var o=[];r.forEach(function(f){var d=e.getOptionId(f),h=e.getOptionLabel(d),g=f.style?f.style.replace(/"/g,"&quot;"):"",y=g?'style="'.concat(g,'"'):"",b=d.replace(/"/g,"&quot;");o.push('<option value="'.concat(b,'" ').concat(y,">").concat(h,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(o.join(""),"</select>"),this.input=l.firstChild}},n.prototype.__setValueInput=function(t){var e=this.model,r=this.getInputEl(),o=e.getOptions()[0],l=o?e.getOptionId(o):"";r&&(r.value=t||l)},n}(Gi);const ah=Ey;var Py=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lf=function(){return lf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},lf.apply(this,arguments)},Ay=function(a){Py(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return lf(lf({},Rp.getDefaults()),{full:1})},n}(Rp);const ky=Ay;var My=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ly=function(a){My(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},n.prototype.onRender=function(){var t=this,e=t.pfx,r=t.ppfx,o=this.model,l="".concat(r,"radio-item-label"),f=o.getName(),d=o.getOptions(),h="".concat(e,"radio ").concat(e,"radio-").concat(f),g=o.cid;if(!this.input){var y=[];d.forEach(function(k){var V=k.className?"".concat(k.className," ").concat(e,"icon ").concat(l):"",$=o.getOptionId(k),Q="".concat(f,"-").concat($,"-").concat(g),vt=V?"":o.getOptionLabel($),Mt=k.title?'title="'.concat(k.title,'"'):"",kt=o.getValue()===$?"checked":"";y.push(`
          <div class="`.concat(r,`radio-item">
            <input type="radio" class="`).concat(h,'" id="').concat(Q,'" name="').concat(f,"-").concat(g,'" value="').concat($,'" ').concat(kt,`/>
            <label class="`).concat(V||l,'" ').concat(Mt,' for="').concat(Q,'">').concat(vt,`</label>
          </div>
        `))});var b=this.el.querySelector(".".concat(r,"field"));b.innerHTML='<div class="'.concat(r,'radio-items">').concat(y.join(""),"</div>"),this.input=b.firstChild}},n.prototype.__setValueInput=function(t){var e,r=this.model,o=t||r.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(o,'"]'));l&&(l.checked=!0)},n}(ah);const Dy=Ly;var jy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ps=function(){return Ps=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ps.apply(this,arguments)},Iy=function(a){jy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return Ps(Ps({},xr.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},n.prototype.getUnits=function(){return this.get("units")||[]},n.prototype.getUnit=function(){return this.get("unit")},n.prototype.getMin=function(){return this.get("min")},n.prototype.getMax=function(){return this.get("max")},n.prototype.getStep=function(){return this.get("step")},n.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},n.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),xr.callParentInit(xr,this,t,e);var r=this.get("unit"),o=this.getUnits();this.input=(0,Y.hasWin)()?new Le({model:this}):void 0,o.length&&!r&&this.set("unit",o[0],{silent:!0}),xr.callInit(this,t,e)},n.prototype.__getClearProps=function(){return Ps(Ps({},xr.prototype.__getClearProps()),{unit:""})},n.prototype.parseValue=function(t,e){e===void 0&&(e={});var r=xr.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(r.value,Ps({deepCheck:1},e)),l=o.value,f=o.unit;return r.value=l,r.unit=f,r},n.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),r=(0,w.isUndefined)(t)?"":"".concat(t),o=!(0,w.isUndefined)(e)&&r?e:"",l="".concat(r).concat(o);return xr.prototype.getFullValue.apply(this,[l])},n}(xr);const uf=Iy;var Vy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cf=function(){return cf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},cf.apply(this,arguments)},Ry=function(a){Vy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.defaults=function(){return cf(cf({},uf.getDefaults()),{showInput:1})},n}(uf);const Ny=Ry;var Fy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ff=function(){return ff=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ff.apply(this,arguments)},Hy=function(a){Fy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.events=function(){return ff(ff({},$i.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},n.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},n.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},n.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},n.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},n.prototype.setValue=function(t){var e=this.model,r=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(r.value),$i.prototype.setValue.apply(this,arguments)},n.prototype.onRender=function(){$i.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},n.prototype.clearCached=function(){$i.prototype.clearCached.apply(this,arguments),delete this.slider},n}($i);const By=Hy;var Uy=x.FE.extend(Od),zy=Uy.extend({extendViewApi:1,init:function(){var a=this,n=a.opts,t=a.em,e=n.module||(t==null?void 0:t.get("StyleManager"));e&&(e.__listenAdd(this,e.events.propertyAdd),e.__listenRemove(this,e.events.propertyRemove))},types:[{id:"stack",model:Jm,view:vy,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:xl,view:Pu,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:xr,view:yy,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:xr,view:xy,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:Rp,view:ah,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:ky,view:Dy,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:Ny,view:By,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:uf,view:$i,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:uf,view:$i,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:xr,view:Gi,isType:function(a){return a.type="base",a}}]});const Np=zy;var Wy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pf=function(){return pf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},pf.apply(this,arguments)},Ky=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},Gy=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},$y=function(a){Wy(n,a);function n(t,e){e===void 0&&(e={});var r=a.call(this,t)||this,o=e.em;r.em=o;var l=t||{},f=r.buildProperties(l.buildProps),d=r.get("name")||"",h=[];!r.get("id")&&r.set("id",d.replace(/ /g,"_").toLowerCase()),f?h=r.extendProperties(f):h=r.get("properties").map(function(y){return(0,w.isString)(y)?r.buildProperties(y)[0]:y}).filter(Boolean),h=h.map(function(y){return r.checkExtend(y)});var g=new Np(h,{em:o});return g.sector=r,r.set("properties",g),r}return n.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get("id")},n.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},n.prototype.setName=function(t){return this.set("name",t)},n.prototype.isOpen=function(){return!!this.get("open")},n.prototype.setOpen=function(t){return this.set("open",t)},n.prototype.isVisible=function(){return!!this.get("visible")},n.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.properties,r=e.models?Gy([],e.models,!0):e;return r.filter(function(o){var l=!0;if(t.withValue&&(l=o.hasValue({noParent:!0})),t.withParentValue){var f=o.hasValue({noParent:!0});l=!f&&o.hasValue()}return l})},n.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},n.prototype.addProperty=function(t,e){return this.properties.add(this.checkExtend(t),e)},n.prototype.extendProperties=function(t,e,r){r===void 0&&(r=!1);for(var o=t.length,l=e||this.get("properties"),f=this.get("extendBuilded"),d=[],h=0,g=l.length;h<g;h++){for(var y=l[h],b=0,k=0;k<o;k++){var V=t[k];if(y.property==V.property||y.id==V.property){var $=y.properties;$&&$.length&&(y.properties=this.extendProperties(V.properties||[],$,1)),t[k]=f?(0,w.extend)(V,y):y,d[k]=t[k],b=1;continue}}b||(t.push(y),d.push(y))}return r?d.filter(function(Q){return Q}):t},n.prototype.checkExtend=function(t){var e=((0,w.isString)(t)?{extend:t}:t)||{},r=e.extend,o=Ky(e,["extend"]);return r?pf(pf({},this.buildProperties([r])[0]||{}),o):t},n.prototype.buildProperties=function(t){var e,r=t||[];if(!r.length)return[];var o=(e=this.em)===null||e===void 0?void 0:e.Styles.builtIn;return o==null?void 0:o.build(r)},n}(x.Hn);const sh=$y;var qy=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),df=function(){return df=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},df.apply(this,arguments)},Yy=function(a){qy(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.initialize=function(t,e){e===void 0&&(e={});var r=e.module,o=e.em;this.em=o,this.module=r,this.listenTo(this,"reset",this.onReset)},n.prototype.model=function(t,e){e===void 0&&(e={});var r=e.collection.em;return new sh(t,df(df({},e),{em:r}))},n.prototype.onReset=function(t,e){e===void 0&&(e={});var r=e.previousModels||[];r.forEach(function(o){return o.get("properties").reset()})},n}(x.FE);const Xy=Yy;var Oa=function(){return Oa=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Oa.apply(this,arguments)},Zy=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},As=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},sn=function(a){return a.map(function(n){return{id:n}})},Jy=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var n=", sans-serif",t=["flex-start","flex-end","center"],e=As(As([],t,!0),["baseline","stretch"],!1);this.optsBgSize=sn(["auto","cover","contain"]),this.optsBgAttach=sn(["scroll","fixed","local"]),this.optsBgRepeat=sn(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=sn(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=sn(["visible","hidden","scroll","auto"]),this.optsDir=sn(["row","row-reverse","column","column-reverse"]),this.opstDisplay=sn(["block","inline","inline-block","flex","none"]),this.optsTransitFn=sn(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=sn(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=sn(["none","left","right"]),this.optsPos=sn(["static","relative","absolute","fixed"]),this.optsTextAlign=sn(["left","center","right","justify"]),this.optsFlexAlign=sn(e),this.optsJustCont=sn(As(As([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=sn(As(As([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=sn(As(["auto"],e,!0)),this.optsTransitProp=sn(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=sn(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=sn(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+n,"Arial Black, Gadget"+n,"Brush Script MT"+n,"Comic Sans MS, cursive"+n,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+n,"Impact, Charcoal"+n,"Lucida Sans Unicode, Lucida Grande"+n,"Tahoma, Geneva"+n,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+n,"Verdana, Geneva"+n].map(function(r){return{id:r,label:r.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(n){var t=this;return function(){return n.map(function(e){if((0,w.isString)(e))return t.get(e);var r=e.extend,o=Zy(e,["extend"]);return Oa(Oa({},t.get(r)),o)})}},a.prototype.init=function(){var n=this,t=this,e=t.fixedValues,r=t.requireFlex,o=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:o,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:r},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:o,default:"0",requiresParent:r}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:r},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:r},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(f,d){var h=d.values,g=h["box-shadow-h"],y=h["box-shadow-v"],b=h["box-shadow-blur"],k=h["box-shadow-spread"];return"".concat(g," ").concat(y," ").concat(b," ").concat(k)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(f,d){var h=d.values,g=h["text-shadow-h"],y=h["text-shadow-v"],b=h["text-shadow-blur"];return"".concat(g," ").concat(y," ").concat(b)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(f,d){var h=d.values,g=h["background-repeat-sub"]||"",y=h["background-position-sub"]||"",b=h["background-attachment-sub"]||"",k=h["background-size-sub"]||"";return[g,y,b,k].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(f,d){var h=d.property,g=d.name,y=f[g]||"",b=h.getLayerSeparator();return y?y.split(b).map(function(k){var V=h.__parseFn(k),$=V.name,Q=V.value;return{"transform-type":$,"transform-value":Q}}):[]},toStyle:function(f,d){var h,g=d.name;return h={},h[g]="".concat(f["transform-type"],"(").concat(f["transform-value"],")"),h},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(f){var d=f.property,h=f.to;if(h.value){var g=d.getOption(),y=Oa({},g.propValue||{}),b=d.getParent().getProperty("transform-value"),k=b.getUnit();(!k||(y==null?void 0:y.units.indexOf(k))<0)&&(y.unit=(y==null?void 0:y.units[0])||""),b.up(y)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(f){var d=f[0],h=f[1],g=f[2];n.add(d,h||{},{from:g})}),this},a.prototype.add=function(n,t,e){t===void 0&&(t={}),e===void 0&&(e={});var r=e.from||"",o=this.props[r||n]||{},l=Oa(Oa(Oa({},o),{property:n}),t);return l.properties&&(0,w.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[n]=l,l},a.prototype.get=function(n){return this.props[n]},a.prototype.build=function(n){var t=this,e=[],r=(0,w.isString)(n)?[n]:n;return r.forEach(function(o){e.push(t.get(o)||{property:o})}),e},a}();const Qy=Jy;var t0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),e0=function(a,n){return Object.defineProperty?Object.defineProperty(a,"raw",{value:n}):a.raw=n,a},r0=function(a){t0(n,a);function n(t){var e=a.call(this,t)||this,r=t.config||{},o=e.model,l=r.em;return e.config=r,e.em=l,e.pfx=r.stylePrefix||"",e.listenTo(o,"destroy remove",e.remove),e.listenTo(o,"change:open",e.updateOpen),e.listenTo(o,"change:visible",e.updateVisibility),e}return n.prototype.template=function(t){var e,r=t.pfx,o=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,f=(l==null?void 0:l.caret)||"",d="".concat(r,"sector-");return st(lh||(lh=e0([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),d,d,f,d,o)},n.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},n.prototype.updateOpen=function(){var t=this,e=t.$el,r=t.model,o=t.pfx,l=r.isOpen();e[l?"addClass":"removeClass"]("".concat(o,"open")),this.getPropertiesEl().style.display=l?"":"none"},n.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},n.prototype.getPropertiesEl=function(){var t=this,e=t.$el,r=t.pfx;return e.find(".".concat(r,"properties")).get(0)},n.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},n.prototype.renderProperties=function(){var t=this,e=t.model,r=t.config,o=e.get("properties");if(o){var l=new Vp({collection:o,config:r});this.$el.append(l.render().el)}},n.prototype.render=function(){var t=this,e=t.pfx,r=t.model,o=t.$el,l=r.getId(),f=r.getName();return o.html(this.template({pfx:e,label:f})),this.renderProperties(),o.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},n}(x.G7);const n0=r0;var lh,o0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),i0=function(a){o0(n,a);function n(t){t===void 0&&(t={});var e=a.call(this,t)||this,r=t.module,o=t.config,l=e.collection;return e.pfx=(o==null?void 0:o.stylePrefix)||"",e.ppfx=(o==null?void 0:o.pStylePrefix)||"",e.config=o,e.module=r,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return n.prototype.remove=function(){var t=this;return x.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},n.prototype.addTo=function(t,e,r){r===void 0&&(r={}),this.addToCollection(t,null,r)},n.prototype.addToCollection=function(t,e,r){r===void 0&&(r={});var o=this,l=o.config,f=o.el,d=e||f,h=new n0({model:t,config:l}).render().el;return(0,Xt.$Q)(d,h,r.at),h},n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.pfx,l=e.ppfx;r.empty();var f=document.createDocumentFragment();return this.collection.each(function(d){return t.addToCollection(d,f)}),r.append(f),r.addClass("".concat(o,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},n}(x.G7);const a0=i0;var s0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ta=function(){return Ta=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Ta.apply(this,arguments)},uh=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},ch="style",Au="".concat(ch,":"),Fp="".concat(Au,"sector"),l0="".concat(Fp,":add"),u0="".concat(Fp,":remove"),c0="".concat(Fp,":update"),Hp="".concat(Au,"property"),f0="".concat(Hp,":add"),p0="".concat(Hp,":remove"),d0="".concat(Hp,":update"),fh="".concat(Au,"layer:select"),Bp="".concat(Au,"target"),h0="".concat(Au,"custom"),ph=function(a){return a||a===0},v0={all:ch,sectorAdd:l0,sectorRemove:u0,sectorUpdate:c0,propertyAdd:f0,propertyRemove:p0,propertyUpdate:d0,layerSelect:fh,target:Bp,custom:h0},g0=function(a){s0(n,a);function n(t){var e=a.call(this,t,"StyleManager",new Xy([],{em:t}),v0,Rm)||this;e.Sector=sh,e.storageKey="",(0,w.bindAll)(e,"__clearStateTarget");var r=e.config,o=r.pStylePrefix;o&&(r.stylePrefix=o+r.stylePrefix),e.builtIn=new Qy,e.properties=new Np([],{em:t,module:e}),e.sectors=e.all;var l=new x.Hn({targets:[]});e.model=l;var f="component:toggled component:update:classes change:state change:device frame:resized selector:type";e.upAll=(0,w.debounce)(function(){return e.__upSel()},0),l.listenTo(t,f,e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var d=(0,w.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",d);var h=(0,w.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(fh," ").concat(Bp),h),l.on("change:lastTarget",function(){return t.trigger(Bp,e.getSelected())}),e}return n.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},n.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.__trgEv=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];(e=this.em).trigger.apply(e,uh([t],r,!1))},n.prototype.__clearStateTarget=function(){var t=this,e=this.em,r=this.__getStateTarget();r&&(e==null||e.skip(function(){e.Css.remove(r),t.model.set({stateTarget:null})}))},n.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.addSector=function(t,e,r){r===void 0&&(r={});var o=this.getSector(t);return o||(e.id=t,o=this.sectors.add(e,r)),o},n.prototype.getSector=function(t,e){e===void 0&&(e={});var r=this.sectors.where({id:t})[0];return!r&&e.warn&&this._logNoSector(t),r||null},n.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,r=e&&e.models?t.array?uh([],e.models,!0):e:[];return t.visible?r.filter(function(o){return o.isVisible()}):r},n.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},n.prototype.addProperty=function(t,e,r){r===void 0&&(r={});var o=this.getSector(t,{warn:!0}),l;return o&&(l=o.addProperty(e,r)),l},n.prototype.getProperty=function(t,e){var r=this.getSector(t,{warn:!0}),o;return r&&(o=r.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),o},n.prototype.getProperties=function(t){var e,r=this.getSector(t,{warn:!0});return r&&(e=r.properties),e},n.prototype.removeProperty=function(t,e){var r=this.getProperties(t);return r?r.remove(this.getProperty(t,e)):null},n.prototype.select=function(t,e){var r=this;e===void 0&&(e={});var o=this.em,l=(0,w.isArray)(t)?t:[t],f=e.stylable,d=o.Css,h=[];l.filter(Boolean).forEach(function($){var Q=$;if((0,w.isString)($)){var vt=d.getRule($)||d.setRule($);!(0,w.isUndefined)(f)&&vt.set({stylable:f}),Q=vt}h.push(Q)});var g=e.component||h.filter(function($){return(0,Y.isComponent)($)}).reverse()[0];h=h.map(function($){return r.getModelToStyle($)});var y=o.getState(),b=h.slice().reverse()[0],k=this.getParentRules(b,{state:y,component:g}),V=this.__getStateTarget();return o.skip(function(){var $;if(y&&(!(($=b==null?void 0:b.getState)===null||$===void 0)&&$.call(b))){var Q=b.getStyle();V?V.setStyle(Q):V=d.getAll().add({selectors:"gjs-selected",style:Q,shallow:!0,important:!0})}else V&&(d.remove(V),V=void 0)}),this.model.set({targets:h,lastTarget:b,lastTargetParents:k,stateTarget:V,component:g}),this.__upProps(e),h},n.prototype.getSelected=function(){return this.model.get("lastTarget")},n.prototype.getSelectedAll=function(){return this.model.get("targets")},n.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},n.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},n.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var r=this.getSelected();r&&this.__emitCmpStyleUpdate(t);var o=this.__getStateTarget();r&&(o==null||o.setStyle(r.getStyle(),e))},n.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},n.prototype.getBuiltInAll=function(){return this.builtIn.props},n.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},n.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var r=this.em,o=e.skipAdd;if(r&&(t!=null&&t.toHTML)){var l=r.getConfig(),f=r.UndoManager,d=r.Css,h=r.Selectors,g=h?h.getConfig():{},y=l.devicePreviewMode?"":r.get("state"),b=t.get("classes"),k=b.getStyleable(),V=k.length,$=!g.componentFirst||e.useClasses,Q={noCount:1},vt={state:y,addOpts:Q};f.skip(function(){var Mt;if(V&&$){var kt=r.getCurrentMedia();Mt=d.get(k,y,kt),!Mt&&!o&&(Mt=d.add(k,y,kt,{},Q))}else if(l.avoidInlineStyle){var Gt=t.getId();Mt=d.getIdRule(Gt,vt),!Mt&&!o&&(Mt=d.setIdRule(Gt,{},vt)),t.is("wrapper")&&Mt.set("wrapper",1,Q)}Mt&&(t=Mt)})}return t},n.prototype.getParentRules=function(t,e){var r=e===void 0?{}:e,o=r.state,l=r.component,f=this.em,d=[];if(f&&t){var h=l,g=f.Css,y=f.CodeManager.getGenerator("css"),b=t.toHTML?t:t.getComponent(),k={array:!0},V=[],$=[],Q=[],vt=function(kt){return kt.length?g.getRules().filter(function(Gt){var fe=Gt.getSelectors().map(function(Oe){return Oe.getFullName()});return!!fe.length&&fe.every(function(Oe){return kt.indexOf(Oe)>=0})}):[]};b?(V=g.getRules("#".concat(b.getId())),$=h?vt(h.getSelectors().getFullName(k)):[],Q=$.concat(V)):(V=h?g.getRules("#".concat(h.getId())):[],$=vt(t.getSelectors().getFullName(k)),Q=V.concat($));var Mt=Q.filter(function(kt){return(0,w.isUndefined)(o)?1:kt.get("state")===o}).sort(y.sortRules).reverse();d=Mt.slice(Mt.indexOf(t)+1)}return d},n.prototype.addType=function(t,e){this.properties.addType(t,e)},n.prototype.getType=function(t){return this.properties.getType(t)},n.prototype.getTypes=function(){return this.properties.getTypes()},n.prototype.createType=function(t,e){var r=e===void 0?{}:e,o=r.model,l=o===void 0?{}:o,f=r.view,d=f===void 0?{}:f,h=this.config,g=this.getType(t);if(g)return new g.view(Ta({model:new g.model(l),config:h},d))},n.prototype.render=function(){var t=this,e=t.config,r=t.em,o=t.SectView,l=o&&o.el;return this.SectView=new a0({el:l,em:r,config:e,module:this,collection:this.sectors}),this.SectView.render().el},n.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},n.prototype.__emitCmpStyleUpdate=function(t,e){e===void 0&&(e={});var r=this.em;if(!t.__p){var o=this.getSelectedAll(),l=e.components||r.getSelectedAll(),f=Array.isArray(l)?l:[l],d=Ta({},t);delete d.__p,f.forEach(function(h){return!o.includes(h)&&h.__onStyleChange(d)})}},n.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var r=this.getSelected();if(r){var o=this.sectors,l=this.model.get("component"),f=this.getSelectedParents(),d=r.getStyle(),h=f.map(function(g){return{target:g,style:g.getStyle()}});o.map(function(g){g.getProperties().map(function(y){e.__upProp(y,d,h,t)})}),o.forEach(function(g){var y=g.getProperties();y.forEach(function(k){var V=k.__checkVisibility({target:r,component:l,sectors:o});k.set("visible",V)});var b=y.some(function(k){return k.isVisible()});g.set("visible",b)})}},n.prototype.__upProp=function(t,e,r,o){var l=this,f=t.getName(),d=e[f],h=ph(d),g=t.getType()==="stack",y=t.getType()==="composite",b=Ta(Ta({},o),{__up:!0}),k=!y&&!g,V=t,$=t,Q=g?V.__getLayersFromStyle(e):[],vt=y?$.__getPropsFromStyle(e):{},Mt=h?d:null,kt=null;if(g&&Q===null||y&&vt===null){var Gt=g?"__getLayersFromStyle":"__getPropsFromStyle",fe=r.filter(function(Ze){return V[Gt](Ze.style)!==null})[0];if(fe){Mt=fe.style[f],kt=fe.target;var Oe=V[Gt](fe.style);g?Q=Oe:vt=Oe}}else if(!h){Mt=null;var fe=r.filter(function(hr){return ph(hr.style[f])})[0];fe&&(Mt=fe.style[f],kt=fe.target)}if(t.__setParentTarget(kt),k&&t.__getFullValue()!==Mt&&t.upValue(Mt,b),g&&V.__setLayers(Q||[],{isEmptyValue:V.isEmptyValueStyle(e)}),y){var Ve=$.getProperties();if($.isDetached()){var pe=$.__getPropsFromStyle(e,{byName:!0})||{},Ue=r.map(function(Ze){return Ta(Ta({},Ze),{style:$.__getPropsFromStyle(Ze.style,{byName:!0})||{}})});Ve.map(function(Ze){return l.__upProp(Ze,pe,Ue,o)})}else $.__setProperties(vt||{},b),$.getProperties().map(function(Ze){return Ze.__setParentTarget(kt)})}},n.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},n}(Tt);const m0=g0;var y0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mn=function(){return Mn=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},Mn.apply(this,arguments)},Up=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},zp=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},_0=function(a,n){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&n.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(a);r<e.length;r++)n.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(a,e[r])&&(t[e[r]]=a[e[r]]);return t},w0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))};R().$=M.default;var b0=[Xv,Nv,dg,Sm,fp,me,ys,m0,lu,Sg,gm,$g,Vm,si,tv,io,Wh,Xf],C0=[xv,nn,Lv,zf];N({$:M.default});var dh={debug:console.log,info:console.info,warning:console.warn,error:console.error},x0=function(a){y0(n,a);function n(t){t===void 0&&(t={});var e=a.call(this)||this;e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var r=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new H),e.set("dmode",r.dragMode);var o=r.el,l=r.log,f=l===!0?(0,w.keys)(dh):(0,w.isArray)(l)?l:[];return(0,w.bindAll)(e,"initBaseColorPicker"),o&&r.fromElement&&(r.components=o.innerHTML),e.attrsOrig=o?(0,w.toArray)(o.attributes).reduce(function(d,h){return d[h.nodeName]=h.nodeValue,d},{}):"",r.components&&!r.pageManager&&(r.pageManager={pages:[{component:r.components}]}),b0.forEach(function(d){return e.loadModule(d)}),C0.forEach(function(d){return e.loadStorableModule(d)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),f.forEach(function(d){return e.listenLog(d)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(d){var h=d.from,g=d.to;e.listenTo(e,h,function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];e.trigger.apply(e,w0([g],y,!1)),e.logWarning("The event '".concat(h,"' is deprecated, replace it with '").concat(g,"'"))})}),e}return n.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(n.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),n.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},n.prototype.getContainer=function(){return this.config.el},n.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),dh[t])},Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),n.prototype.getConfig=function(t){var e=this.config;return(0,w.isUndefined)(t)?e:e[t]},n.prototype.loadOnStart=function(){var t=this,e=this.config,r=e.projectData,o=e.headless,l=this.Storage;this.toLoad.reverse().forEach(function(h){return h.onLoad()});var f=function(){t.modules.forEach(function(h){return h.postLoad&&h.postLoad(t)}),t.set("readyLoad",1)};o?(r&&this.loadData(r),f()):this._storageTimeout=setTimeout(function(){return Up(t,void 0,void 0,function(){var h;return zp(this,function(g){switch(g.label){case 0:return r?(this.loadData(r),[3,5]):[3,1];case 1:if(!(l!=null&&l.canAutoload()))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.load()];case 3:return g.sent(),[3,5];case 4:return h=g.sent(),this.logError(h),[3,5];case 5:return f(),[2]}})})});var d=new n({noticeOnUnload:!1,storageManager:!1,undoManager:!1});d.Pages.onLoad(),d.Canvas.postLoad(),this.set("shallow",d)},n.prototype.updateChanges=function(t,e,r){var o=this,l=this.Storage,f=this.getDirtyCount();r.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return o.trigger("update")})),this.config.noticeOnUnload&&(window.onbeforeunload=f?function(){return!0}:null),l.isAutosave()&&f>=l.getStepsBeforeSave()&&this.store().catch(function(d){return o.logError(d)})},n.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},n.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},n.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},n.prototype.getEditor=function(){return this.get("Editor")},n.prototype.handleUpdates=function(t,e,r){var o=this;r===void 0&&(r={}),!(this.__skip||r.temporary||r.noCount||r.avoidStore||!this.get("ready"))&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=o.getDirtyCount()||0;r.unset;var f=_0(r,["unset"]);o.set("changesCount",l+1,f)},0))},n.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},n.prototype.componentHovered=function(t,e,r){var o=this.previous("componentHovered");o&&this.trigger("component:unhovered",o,r),e&&this.trigger("component:hovered",e,r)},n.prototype.getSelected=function(){return this.selected.lastComponent()},n.prototype.getSelectedAll=function(){return this.selected.allComponents()},n.prototype.setSelected=function(t,e){var r=this;e===void 0&&(e={});var o=e.event,l=o&&(o.ctrlKey||o.metaKey),f=(o||{}).shiftKey,d=((0,w.isArray)(t)?t:[t]).map(function(b){var k,V;return((V=(k=b==null?void 0:b.delegate)===null||k===void 0?void 0:k.select)===null||V===void 0?void 0:V.call(k,b))||b}).filter(Boolean),h=this.getSelectedAll(),g=this.getConfig().multipleSelection,y=(0,w.isArray)(t);(y||!t)&&this.removeSelected(h.filter(function(b){return!(0,w.contains)(d,b)})),d.forEach(function(b){if(b&&(r.trigger("component:select:before",b,e),!b.get("selectable")||e.abort))if(e.useValid){for(var k=b.parent();k&&!k.get("selectable");)k=k.parent();b=k}else return;if(l&&g)return r.toggleSelected(b);if(f&&g){r.clearSelection(r.Canvas.getWindow());var V=b.collection,$=b.index(),Q,vt;if(r.getSelectedAll().forEach(function(Mt){var kt=Mt.collection,Gt=Mt.index();kt===V&&(Gt<$?Q=(0,w.isUndefined)(Q)?Gt:Math.max(Q,Gt):Gt>$&&(vt=(0,w.isUndefined)(vt)?Gt:Math.min(vt,Gt)))}),!(0,w.isUndefined)(Q))for(;Q!==$;)r.addSelected(V.at(Q)),Q++;if(!(0,w.isUndefined)(vt))for(;vt!==$;)r.addSelected(V.at(vt)),vt--;return r.addSelected(b)}!y&&r.removeSelected(h.filter(function(Mt){return Mt!==b})),r.addSelected(b,e)})},n.prototype.addSelected=function(t,e){var r=this;e===void 0&&(e={});var o=(0,w.isArray)(t)?t:[t];o.forEach(function(l){var f=r.selected;if(!(!l||!l.get("selectable")||l.parents().some(function(h){return f.hasComponent(h)}))){e.forceChange&&r.removeSelected(l,e);var d=f.allComponents().filter(function(h){return(0,w.contains)(h.parents(),l)});d.forEach(function(h){return r.removeSelected(h,e)}),f.addComponent(l,e),r.trigger("component:select",l,e),r.Canvas.addSpot({type:Te.q.Select,component:l})}})},n.prototype.removeSelected=function(t,e){var r=this;e===void 0&&(e={}),this.selected.removeComponent(t,e);var o=(0,w.isArray)(t)?t:[t];o.forEach(function(l){return r.Canvas.removeSpots({type:Te.q.Select,component:l})})},n.prototype.toggleSelected=function(t,e){var r=this;e===void 0&&(e={});var o=(0,w.isArray)(t)?t:[t];o.forEach(function(l){r.selected.hasComponent(l)?r.removeSelected(l,e):r.addSelected(l,e)})},n.prototype.setHovered=function(t,e){var r=this;e===void 0&&(e={});var o=function(d,h){var g=r,y=g.config,b=g.Canvas,k=r.getHovered(),V=r.getSelectedAll(),$=Te.q.Hover,Q=Te.q.Spacing;r.set("componentHovered",d||null,h),k&&(b.removeSpots({type:$,component:k}),b.removeSpots({type:Q,component:k})),d&&(b.addSpot({type:$,component:d}),(!V.includes(d)||y.showOffsetsSelected)&&b.addSpot({type:Q,component:d}))};if(!t)return o();var l="component:hover";if(e.forceChange&&o(),this.trigger("".concat(l,":before"),t,e),!t.get("hoverable"))if(e.useValid&&!e.abort){for(var f=t.parent();f&&!f.get("hoverable");)f=f.parent();t=f}else return;e.abort||(o(t,e),this.trigger(l,t,e))},n.prototype.getHovered=function(){return this.get("componentHovered")},n.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.Components.setComponents(t,e)},n.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(!(!t||!e)){var r=t.getComponents();return e.getCode(r,"json")}},n.prototype.setStyle=function(t,e){e===void 0&&(e={});var r=this.Css;return r.clear(e),r.getAll().add(t,e),this},n.prototype.addStyle=function(t,e){e===void 0&&(e={});var r=this.getStyle().add(t,e);return(0,w.isArray)(r)?r:[r]},n.prototype.getStyle=function(){return this.Css.getAll()},n.prototype.setState=function(t){return this.set("state",t),this},n.prototype.getState=function(){return this.get("state")||""},n.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,r=e.optsHtml,o=e.jsInHtml?this.getJs(t):"",l=t.component||this.Components.getComponent(),f=l?this.CodeManager.getCode(l,"html",Mn(Mn({},r),t)):"";return f+=o?"<script>".concat(o,"<\/script>"):"",f},n.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,r=e.optsCss,o=t.avoidProtected,l=(0,w.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,f=this.Css,d=t.component||this.Components.getComponent(),h=o?"":e.protectedCss,g=d&&this.CodeManager.getCode(d,"css",Mn(Mn({cssc:f,keepUnusedStyles:l},r),t));return d?t.json?g:h+g:""},n.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},n.prototype.store=function(t){return Up(this,void 0,void 0,function(){var e;return zp(this,function(r){switch(r.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return r.sent(),this.clearDirtyCount(),[2,e]}})})},n.prototype.load=function(t,e){return e===void 0&&(e={}),Up(this,void 0,void 0,function(){var r;return zp(this,function(o){switch(o.label){case 0:return[4,this.Storage.load(t)];case 1:return r=o.sent(),this.loadData(r),[4,(0,Y.wait)()];case 2:return o.sent(),e.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,r]}})})},n.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(r){t=Mn(Mn({},t),r.store(1))}),JSON.parse(JSON.stringify(t))},n.prototype.loadData=function(t){return t===void 0&&(t={}),(0,Y.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},n.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},n.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);!e||this.defaultRunning||(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},n.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands"),r=e.get(this.config.defaultCommand);!r||!this.defaultRunning||(r.stop(this,this,t),this.defaultRunning=!1)},n.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.Canvas.refresh({spots:t.tools})},n.prototype.clearSelection=function(t){var e,r=t||window;(e=r.getSelection())===null||e===void 0||e.removeAllRanges()},n.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),r=t.mediaCondition,o=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!o?"(".concat(r,": ").concat(l,")"):""},n.prototype.getWrapper=function(){return this.Components.getWrapper()},n.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},n.prototype.getCurrentFrame=function(){return this.get("currentFrame")},n.prototype.getCurrentFrameModel=function(){var t;return(t=this.getCurrentFrame()||{})===null||t===void 0?void 0:t.model},n.prototype.getIcon=function(t){var e=this.config.icons||{};return e[t]||""},n.prototype.getDirtyCount=function(){return this.get("changesCount")},n.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},n.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},n.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},n.prototype.setDragMode=function(t){return this.set("dmode",t)},n.prototype.getDragMode=function(t){var e=(t==null?void 0:t.getDragMode())||this.get("dmode");return e||""},n.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.get("I18n");return r==null?void 0:r.t.apply(r,t)},n.prototype.inAbsoluteMode=function(t){return this.getDragMode(t)==="absolute"},n.prototype.destroyAll=function(){var t=this,e=this,r=e.config,o=e.view,l=this.getEditor(),f=(r.grapesjs||{}).editors,d=f===void 0?[]:f,h=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),h==null||h.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(g){return g.destroy()}),o&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(g){return t[g]={}}),d.splice(d.indexOf(l),1),(0,Y.hasWin)()&&(0,M.default)(r.el).empty().attr(this.attrsOrig)},n.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},n.prototype.setEditing=function(t){return this.set("editing",t),this},n.prototype.isEditing=function(){return!!this.get("editing")},n.prototype.log=function(t,e){e===void 0&&(e={});var r=e.ns,o=e.level,l=o===void 0?"debug":o;if(this.trigger("log",t,e),l&&this.trigger("log:".concat(l),t,e),r){var f="log-".concat(r);this.trigger(f,t,e),l&&this.trigger("".concat(f,":").concat(l),t,e)}},n.prototype.logInfo=function(t,e){this.log(t,Mn(Mn({},e),{level:"info"}))},n.prototype.logWarning=function(t,e){this.log(t,Mn(Mn({},e),{level:"warning"}))},n.prototype.logError=function(t,e){this.log(t,Mn(Mn({},e),{level:"error"}))},n.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var r=this.config,o=r.colorPicker,l=o===void 0?{}:o,f=r.el,d=r.stylePrefix;return(0,M.default)(t).spectrum(Mn(Mn({containerClassName:"".concat(d,"one-bg ").concat(d,"two-color"),appendTo:f||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),l))},n.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},n.prototype.data=function(t,e,r){var o="_gjs-data";if(t[o]||(t[o]={}),(0,w.isUndefined)(r))return t[o][e];t[o][e]=r},n}(x.Hn);const S0=x0;var O0=function(){var a=function(n,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])},a(n,t)};return function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),T0=function(a){O0(n,a);function n(t){var e=a.call(this,{model:t})||this,r=t.attributes,o=r.Panels,l=r.UndoManager;return t.view=e,t.once("change:ready",function(){o.active(),o.disableButtons(),l.clear(),setTimeout(function(){t.trigger("load",t.get("Editor")),t.clearDirtyCount()})}),e}return n.prototype.render=function(){var t=this,e=this,r=e.$el,o=e.model,l=o.attributes,f=l.Panels,d=l.Canvas,h=o.config,g=o.modules,y=h.stylePrefix,b=["".concat(y,"editor")];!h.customUI&&b.push("".concat(y,"one-bg ").concat(y,"two-color"));var k=(0,M.default)(h.el||"body ".concat(h.container));h.cssIcons&&(0,Y.appendStyles)(h.cssIcons,{unique:!0,prepand:!0}),r.empty(),h.width&&k.css("width",h.width),h.height&&k.css("height",h.height),r.append(d.render()),r.append(f.render());var V=o.get("shallow"),$=V.get("Canvas").render();return $.style.display="none",r.append($),r.attr("class",b.join(" ")),k.addClass("".concat(y,"editor-cont")).empty().append(r),g.forEach(function(Q){return Q.postRender&&Q.postRender(t)}),this},n}(x.G7);const E0=T0;var ku=function(){return ku=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ku.apply(this,arguments)},hh=function(a,n,t,e){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function f(g){try{h(e.next(g))}catch(y){l(y)}}function d(g){try{h(e.throw(g))}catch(y){l(y)}}function h(g){g.done?o(g.value):r(g.value).then(f,d)}h((e=e.apply(a,n||[])).next())})},vh=function(a,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},e,r,o,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(h){return function(g){return d([h,g])}}function d(h){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(t=0)),t;)try{if(e=1,r&&(o=h[0]&2?r.return:h[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,h[1])).done)return o;switch(r=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=n.call(a,t)}catch(g){h=[6,g],r=0}finally{e=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},P0=function(a,n,t){if(t||arguments.length===2)for(var e=0,r=n.length,o;e<r;e++)(o||!(e in n))&&(o||(o=Array.prototype.slice.call(n,0,e)),o[e]=n[e]);return a.concat(o||Array.prototype.slice.call(n))},A0=function(){function a(n,t){n===void 0&&(n={}),t===void 0&&(t={});var e;this.html=st,this.config=ku(ku(ku({},lt),n),{pStylePrefix:(e=n.stylePrefix)!==null&&e!==void 0?e:lt.stylePrefix}),this.em=new S0(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(n){return this.em.getConfig(n)},a.prototype.getHtml=function(n){return this.em.getHtml(n)},a.prototype.getCss=function(n){return this.em.getCss(n)},a.prototype.getJs=function(n){return this.em.getJs(n)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(n,t){return t===void 0&&(t={}),this.em.setComponents(n,t),this},a.prototype.addComponents=function(n,t){return this.getWrapper().append(n,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(n,t){return t===void 0&&(t={}),this.em.setStyle(n,t),this},a.prototype.addStyle=function(n,t){return t===void 0&&(t={}),this.em.addStyle(n,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var n=this.em.getSelected();if(n)return this.StyleManager.getModelToStyle(n)},a.prototype.select=function(n,t){return this.em.setSelected(n,t),this},a.prototype.selectAdd=function(n){return this.em.addSelected(n),this},a.prototype.selectRemove=function(n){return this.em.removeSelected(n),this},a.prototype.selectToggle=function(n){return this.em.toggleSelected(n),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(n){return this.em.set("device",n),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(n,t){return t===void 0&&(t={}),this.Commands.run(n,t)},a.prototype.stopCommand=function(n,t){return t===void 0&&(t={}),this.Commands.stop(n,t)},a.prototype.store=function(n){return hh(this,void 0,void 0,function(){return vh(this,function(t){switch(t.label){case 0:return[4,this.em.store(n)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(n,t){return t===void 0&&(t={}),hh(this,void 0,void 0,function(){return vh(this,function(e){switch(e.label){case 0:return[4,this.em.load(n,t)];case 1:return[2,e.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(n){return this.em.loadData(n)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(n){return this.em.loadData(n)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(n){this.em.refreshCanvas(n)},a.prototype.setCustomRte=function(n){this.RichTextEditor.customRte=n},a.prototype.setCustomParserCss=function(n){return this.Parser.getConfig().parserCss=n,this},a.prototype.setDragMode=function(n){return this.em.setDragMode(n),this},a.prototype.log=function(n,t){return t===void 0&&(t={}),this.em.log(n,t),this},a.prototype.t=function(){for(var n,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(n=this.em).t.apply(n,t)},a.prototype.on=function(n,t){return this.em.on(n,t),this},a.prototype.once=function(n,t){return this.em.once(n,t),this},a.prototype.off=function(n,t){return this.em.off(n,t),this},a.prototype.trigger=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,P0([n],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var n;return(n=this.editorView)===null||n===void 0?void 0:n.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var n;return(n=this.editorView)===null||n===void 0||n.remove(),this.editorView=new E0(this.em),this.editorView.render().el},a.prototype.onReady=function(n){this.em.get("ready")?n(this):this.em.on("load",n)},a}();const k0=A0;var M0=function(a,n){var t=n.get(a);if(!t){var e=(0,Y.getGlobal)()[a];t=(e==null?void 0:e.default)||e}return t},gh=function(a,n){return(0,w.isString)(a)?M0(a,n):(a==null?void 0:a.default)||a},mh=function(a,n){a.getModel().logWarning("Plugin ".concat(n," not found"),{context:"plugins",plugin:n})},L0=function(){function a(){this.plugins={}}return a.prototype.add=function(n,t){var e=this.get(n);return e||(this.plugins[n]=t,t)},a.prototype.get=function(n){return this.plugins[n]},a.prototype.getAll=function(){return this.plugins},a}();const D0=L0,j0=function(){var a=function(){for(var t,e=window.navigator.userAgent,r=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<r.length;o++){var l=r[o];if(t=l[1].exec(e),t)break}return!!t};if((0,Y.hasWin)()&&a()){var n=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(t){return t||(t=""),n.apply(document.implementation,[t])}}};var hf=function(){return hf=Object.assign||function(a){for(var n,t=1,e=arguments.length;t<e;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},hf.apply(this,arguments)};j0();var Wp=new D0,yh=[],_h=function(a,n){var t=gh(a,Wp);return function(e){t?t(e,n||{}):mh(e,a)}},wh={$:M.default,editors:yh,plugins:Wp,usePlugin:_h,version:"0.21.10",init:function(a){a===void 0&&(a={});var n=a.headless,t=a.container;if(!t&&!n)throw new Error("'container' is required");var e=hf(hf({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:n?void 0:(0,w.isElement)(t)?t:document.querySelector(t)}),r=new k0(e,{$:M.default}),o=r.getModel();return e.plugins.forEach(function(l){var f=gh(l,Wp),d=e.pluginsOpts[l]||{};f?f(r,d):mh(r,l)}),o.loadOnStart(),e.autorender&&!n&&r.render(),yh.push(r),r}};const I0=wh})();var v_=Fh.ZP;const Ef="gjs-open-import-webpage",od="set-device-desktop",id="set-device-tablet",ad="set-device-mobile",sd="canvas-clear",ld="save-data",ud="load-data",g_=(w,Y)=>{const st=w.getConfig("stylePrefix"),rt=w.Modal,lt=document.createElement("div"),F=Y.modalImportLabel,R=Y.modalImportContent,M=w.CodeManager.getViewer("CodeMirror").clone();let N=M.editor;const x=document.createElement("button");return x.type="button",x.innerHTML=Y.modalImportButton,x.className=`${st}btn-prim ${st}btn-import`,x.onclick=j=>{w.Css.clear(),w.setComponents(N.getValue().trim()),rt.close()},M.set({codeName:"htmlmixed",theme:"hopscotch",readOnly:0,...Y.importViewerOptions}),{run(j){if(!N){const D=document.createElement("textarea");if(F){const H=document.createElement("div");H.className=`${st}import-label`,H.innerHTML=F,lt.appendChild(H)}lt.appendChild(D),lt.appendChild(x),M.init(D),N=M.editor}rt.setTitle(Y.modalImportTitle),rt.setContent(lt);const L=typeof R=="function"?R(j):R;M.setContent(L||""),rt.open().onceClose(()=>j.stopCommand(Ef)),N.refresh()},stop(){rt.close()}}},m_=async()=>{await Hu.get("/config").then(w=>{const Y=w.data,st=Y.primaryColor,rt=Y.secondaryColor,lt=Y.tertiaryColor,F=Y.quaternaryColor,R="gjs-";let M="";[["one",st],["two",rt],["three",lt],["four",F]].forEach(([x,j])=>{M+=`
            .${R}${x}-bg {
            background-color: ${j};
            }

            .${R}${x}-color {
            color: ${j};
            }

            .${R}${x}-color-h:hover {
            color: ${j};
            }
        `});const N=document.createElement("style");N.innerText=M,document.head.appendChild(N)})},y_=async()=>{try{return await Hu.get("/site-styles").then(w=>w.data)}catch{Ma.fire({icon:"error",title:"Oops...",text:"Something went wrong loading the site styles!😭"})}},__=async w=>{w.Panels.addPanel({id:"views"}).get("buttons").add([{attributes:{title:"Open Code"},className:"fa fa-file-code-o",command:"open-code",togglable:!1,id:"open-code"}])},w_=async w=>{await Hu.get("/load/blocks").then(Y=>{Y.data.blocks.forEach(rt=>{w.BlockManager.add(rt.componentId,{label:rt.label,media:rt.media,category:rt.category,content:rt.content,attributes:{component_sync:rt.component_sync}})})})},Hh=async(w,Y=!1)=>{let st=JSON.parse(localStorage.getItem("onix-data"));const rt=w.Storage,lt=w.getProjectData();let F=await rt.store(lt),R=null;switch(st.mode){case"page":R="/save/page";break;case"block":R="/save/block"}await Hu.post(R,{slug:st.slug,data:F,preview:w.getHtml(),just_content:w.getHtml().replace(/<body[^>]*>/g,"").replace(/<\/body>/g,""),preview_no_body:w.getHtml().replace(/<body/g,'<div data-onix="onix-resuable-block-'+st.componentId+'"').replace(/body>/g,"div>")}).then(M=>{Y?Ma.fire({icon:"success",title:"Success",text:M.data.message,toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:N=>{N.addEventListener("mouseenter",Ma.stopTimer),N.addEventListener("mouseleave",Ma.resumeTimer)}}):Ma.fire({icon:"success",title:"Success",text:M.data.message})}).catch(M=>{if(M.response.status===422){const N=M.response.data.errors;let x=[];for(const[j,L]of Object.entries(N))x.push("<p>"+L+"</p>");Ma.fire({icon:"error",title:"Oops...",html:x.join("")})}else Ma.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},b_=async(w,Y="page",st)=>{localStorage.removeItem("onix-data");let rt=null;await Hu.get("/load/"+Y+"/"+st).then(F=>{var R,M;F.data.data.content&&(rt=JSON.parse(F.data.data.content)),localStorage.setItem("onix-data",JSON.stringify({slug:st,mode:Y,componentId:(M=(R=F.data)==null?void 0:R.data)==null?void 0:M.componentId}))}).catch(F=>{Ma.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}),rt&&w.loadProjectData(rt),await m_(),await w_(w),w.BlockManager.getAll().forEach(F=>{const R=F.id;if(F.attributes.attributes.component_sync){const M=w.DomComponents.getWrapper().find(`[data-onix="onix-resuable-block-${R}"]`);if(M.length)for(const[N,x]of Object.entries(M));}})},C_=(w,Y)=>{const{Commands:st}=w,rt=Y.textCleanCanvas;st.add(Ef,g_(w,Y)),st.add(od,{run:lt=>lt.setDevice("Desktop"),stop:()=>{}}),st.add(id,{run:lt=>lt.setDevice("Tablet"),stop:()=>{}}),st.add(ad,{run:lt=>lt.setDevice("Mobile portrait"),stop:()=>{}}),st.add(sd,lt=>confirm(rt)&&lt.runCommand("core:canvas-clear")),st.add(ld,lt=>{Hh(lt)}),st.add(ud,lt=>{lt.runCommand("onix-grape-save")})},x_=(w,Y)=>{w.BlockManager.add("input",{label:"Input",media:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-1 16H6V6h12v13z"/><path d="M8 9h8v2H8zM8 13h8v2H8z"/></svg>',category:"onix-basics",content:{type:"input"}}),w.BlockManager.add("form",{label:"Form",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>',category:"onix-basics",content:{type:"form",components:`
            @csrf
            <div class="flex flex-col gap-4 w-full items-center">
                <div class="form-control w-full">
                    <label class="label">
                    <span class="label-text">What is your name?</span>
                    <span class="label-text-alt">Top Right label</span>
                    </label>
                    <input type="text" placeholder="Type here" class="input input-bordered input-lg w-full">
                    <label class="label">
                    <span class="label-text-alt">Bottom Left label</span>
                    <span class="label-text-alt">Bottom Right label</span>
                    </label>
                </div>
            </div>
            `}})},S_=(w,Y)=>{const{Panels:st}=w,rt=w.getConfig(),lt="sw-visibility",F="export-template",R="open-sm",M="open-tm",N="open-layers",x="open-blocks",j="fullscreen",L="preview",D='style="display: block; max-width:22px"';rt.showDevices=!1,st.getPanels().reset([{id:"commands",buttons:[{}]},{id:"devices-c",buttons:[{id:od,command:od,active:!0,label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" />
        </svg>`},{id,command:id,label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />
        </svg>`},{id:ad,command:ad,label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
        </svg>`}]},{id:"options",buttons:[{id:lt,command:lt,context:lt,label:`<svg ${D} viewBox="0 0 24 24">
        <path fill="currentColor" d="M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z" />
    </svg>`},{id:L,context:L,command:()=>w.runCommand(L),label:`<svg ${D} viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"></path></svg>`},{id:j,command:j,context:j,label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
        </svg>`},{id:F,command:()=>w.runCommand(F),label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z" />
        </svg>`},{id:"undo",command:()=>w.runCommand("core:undo"),label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z" />
        </svg>`},{id:"redo",command:()=>w.runCommand("core:redo"),label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z" />
        </svg>`},{id:Ef,command:()=>w.runCommand(Ef),label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
        </svg>`},{id:sd,command:()=>w.runCommand(sd),label:`<svg ${D} viewBox="0 0 24 24">
              <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
          </svg>`},{id:ld,command:()=>w.runCommand(ld),label:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                </svg>`},{id:ud,command:()=>w.runCommand(ud),label:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                  </svg>
                  `}]},{id:"views",buttons:[{id:R,command:R,active:!0,label:`<svg ${D} viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`},{id:M,command:M,label:`<svg ${D} viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
      </svg>`},{id:N,command:N,label:`<svg ${D} viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" />
      </svg>`},{id:x,command:x,label:`<svg ${D} viewBox="0 0 24 24">
          <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z" />
      </svg>`}]}]);const H=st.getButton("views",x);w.on("load",()=>H==null?void 0:H.set("active",!0)),Y.showStylesOnChange&&w.on("component:selected",()=>{const G=st.getButton("views",R),pt=st.getButton("views",N);(!pt||!pt.get("active"))&&w.getSelected()&&(G==null||G.set("active",!0))})},O_=(w,Y)=>{w.DomComponents.addType("form",{model:{defaults:{name:"Form",tagName:"form",draggable:!0,droppable:!0,editable:!0,stylable:!0,highlightable:!0,copyable:!0,removable:!0,layerable:!0,resizable:!0,classes:["p-10"],traits:[{type:"text",label:"Action",name:"action",placeholder:"https://example.com"},{type:"select",label:"Method",name:"method",options:[{value:"get",name:"GET"},{value:"post",name:"POST"},{value:"put",name:"PUT"},{value:"delete",name:"DELETE"}]},{type:"text",label:"Class",name:"class",placeholder:"form-control"},{type:"text",label:"ID",name:"id",placeholder:"form-id"}]}},view:{tagName:"form",events:{dblclick:"dblclick"},init(){this.listenTo(this.model,"change:action",this.updateAction),this.listenTo(this.model,"change:method",this.updateMethod),this.listenTo(this.model,"change:class",this.updateClass),this.listenTo(this.model,"change:id",this.updateId)},updateAction(){this.el.action=this.model.get("action")},updateMethod(){this.el.method=this.model.get("method")},updateClass(){this.el.className=this.model.get("class")},updateId(){this.el.id=this.model.get("id")}}}),w.DomComponents.addType("input",{model:{defaults:{name:"Input",tagName:"input",draggable:!0,droppable:!0,editable:!0,stylable:!0,highlightable:!0,copyable:!0,removable:!0,layerable:!0,resizable:!0,classes:["input","input-bordered","w-full","max-w-xs"],traits:[{type:"text",label:"Name",name:"name",placeholder:"name"},{type:"checkbox",label:"Required",name:"required"},{type:"text",label:"Placeholder",name:"placeholder",placeholder:"Placeholder"},{type:"select",label:"Type",name:"type",options:[{value:"text",name:"Text"},{value:"email",name:"Email"},{value:"password",name:"Password"},{value:"number",name:"Number"},{value:"date",name:"Date"},{value:"time",name:"Time"},{value:"datetime-local",name:"Date Time"},{value:"month",name:"Month"},{value:"week",name:"Week"},{value:"url",name:"URL"},{value:"tel",name:"Telephone"},{value:"search",name:"Search"},{value:"color",name:"Color"},{value:"range",name:"Range"},{value:"file",name:"File"},{value:"hidden",name:"Hidden"}]},{type:"text",label:"Min",name:"min",placeholder:"0"},{type:"text",label:"Max",name:"max",placeholder:"100"},{type:"text",label:"Class",name:"class",placeholder:"form-control"},{type:"text",label:"ID",name:"id",placeholder:"form-id"},{type:"dusk",label:"Dusk",name:"dusk",placeholder:"dusk-id"}]}},view:{tagName:"input",events:{dblclick:"dblclick"},init(){this.listenTo(this.model,"change:name",this.updateName),this.listenTo(this.model,"change:required",this.updateRequired),this.listenTo(this.model,"change:placeholder",this.updatePlaceholder),this.listenTo(this.model,"change:type",this.updateType),this.listenTo(this.model,"change:class",this.updateClass),this.listenTo(this.model,"change:id",this.updateId),this.listenTo(this.model,"change:min",this.updateMin),this.listenTo(this.model,"change:max",this.updateMax),this.listenTo(this.model,"change:dusk",this.updateDusk)},updateName(){this.el.name=this.model.get("name")},updateRequired(){this.el.required=this.model.get("required")},updatePlaceholder(){this.el.placeholder=this.model.get("placeholder")},updateType(){this.el.type=this.model.get("type")},updateClass(){this.el.className=this.model.get("class")},updateId(){this.el.id=this.model.get("id")},updateMin(){this.el.min=this.model.get("min")},updateMax(){this.el.max=this.model.get("max")},updateDusk(){this.el.dataset.dusk=this.model.get("dusk")}}})},T_=(w,Y={})=>{const st={modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure you want to clear the canvas?",showStylesOnChange:!0,useCustomTheme:!0,...Y};O_(w),x_(w),C_(w,st),S_(w,st)};var Bh={exports:{}};/*! grapesjs-script-editor - 1.0.3 */(function(w,Y){(function(st,rt){w.exports=rt()})(window,function(){return function(st){var rt={};function lt(F){if(rt[F])return rt[F].exports;var R=rt[F]={i:F,l:!1,exports:{}};return st[F].call(R.exports,R,R.exports,lt),R.l=!0,R.exports}return lt.m=st,lt.c=rt,lt.d=function(F,R,M){lt.o(F,R)||Object.defineProperty(F,R,{enumerable:!0,get:M})},lt.r=function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})},lt.t=function(F,R){if(1&R&&(F=lt(F)),8&R||4&R&&typeof F=="object"&&F&&F.__esModule)return F;var M=Object.create(null);if(lt.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:F}),2&R&&typeof F!="string")for(var N in F)lt.d(M,N,(function(x){return F[x]}).bind(null,N));return M},lt.n=function(F){var R=F&&F.__esModule?function(){return F.default}:function(){return F};return lt.d(R,"a",R),R},lt.o=function(F,R){return Object.prototype.hasOwnProperty.call(F,R)},lt.p="",lt(lt.s=1)}([function(st,rt){st.exports=function(lt,F,R){return F in lt?Object.defineProperty(lt,F,{value:R,enumerable:!0,configurable:!0,writable:!0}):lt[F]=R,lt}},function(st,rt,lt){lt.r(rt);var F=lt(0),R=lt.n(F),M="edit-script";function N(H,G){var pt=Object.keys(H);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(H);G&&(xt=xt.filter(function(Nt){return Object.getOwnPropertyDescriptor(H,Nt).enumerable})),pt.push.apply(pt,xt)}return pt}function x(H){for(var G=1;G<arguments.length;G++){var pt=arguments[G]!=null?arguments[G]:{};G%2?N(Object(pt),!0).forEach(function(xt){R()(H,xt,pt[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(pt)):N(Object(pt)).forEach(function(xt){Object.defineProperty(H,xt,Object.getOwnPropertyDescriptor(pt,xt))})}return H}var j=function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pt=H.Commands,xt=H.Modal,Nt=H.Components,jt=G.modalTitle,Tt=G.codeViewOptions,yt=G.commandAttachScript,Kt=G.toolbarIcon,te=G.onRun,ue=G.onError,Zt=G.starter,dt=G.scriptTypesSupport,ot=null,X=function(z,et){et instanceof HTMLElement?z.appendChild(et):et&&z.insertAdjacentHTML("beforeend",et)};H.$.isString(dt)&&(dt=dt.split(",")),H.$.isArray(dt)&&(dt=dt.includes("*")?Nt.getTypes().map(function(z){return z.id}):dt),dt&&dt.forEach(function(z){var et=Nt.getType(z).model;Nt.addType(z,{model:{initToolbar:function(){et.prototype.initToolbar.apply(this,arguments);var A=this.get("toolbar"),tt=A.some(function(E){return E.command===M});tt||(A.unshift(x({command:M,label:Kt},G.toolbarBtnCustomScript)),this.set("toolbar",A))}}})}),pt.add(M,x({run:function(z,et){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.editor=z,this.options=A,this.target=A.target||z.getSelected();var tt=this.target;tt&&this.showCustomCode(tt)},stop:function(z){xt.close()},showCustomCode:function(z){var et=this,A=this.editor,tt=this.options.title||jt;ot||(ot=this.getContent());var E=z.getScriptString()||Zt;xt.open({title:tt,content:ot}).getModel().once("change:open",function(){return A.stopCommand(et.id)}),this.getCodeViewer().setContent(E)},getPreContent:function(){},getPostContent:function(){},getContent:function(){var z=this.editor,et=document.createElement("div"),A=z.getConfig("stylePrefix");et.className="".concat(A,"attach-script"),X(et,this.getPreContent());var tt=this.getCodeViewer();return tt.refresh(),setTimeout(function(){return tt.focus()},0),et.appendChild(tt.getElement()),X(et,this.getPostContent()),X(et,this.getContentActions()),et},getContentActions:function(){var z=this,et=this.editor,A=document.createElement("div");A.id="actns";var tt=document.createElement("button"),E=et.getConfig("stylePrefix");tt.innerHTML=G.buttonLabel,tt.className="".concat(E,"btn-prim ").concat(E,"btn-save__inject-logic"),tt.onclick=function(){return z.handleSave()};var At=document.createElement("div");return At.id="logic-toolbar",At.className="fa fa-bug",At.style="margin:5px;padding:10px;background:rgba(0,0,0,0.2);border-radius:3px;border:1px solid rgba(0,0,0,0.2);cursor:pointer",At.onclick=function(){return z.runCode()},A.appendChild(At),A.appendChild(tt),A},handleSave:function(){var z=this.editor,et=this.target,A=this.getCodeViewer().getContent();et.set("script",A),z.Modal.close()},getCodeViewer:function(){var z=this.editor;return this.codeViewer||(this.codeViewer=z.CodeManager.createViewer(x({codeName:"javascript",theme:"hopscotch",readOnly:0,autoBeautify:1},Tt))),this.codeViewer},runCode:function(){try{var z=this.getCodeViewer().getContent();Function('"use strict";'+z)(),te&&te()}catch(et){console.log("error",et),ue&&ue(et)}}},yt))};function L(H,G){var pt=Object.keys(H);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(H);G&&(xt=xt.filter(function(Nt){return Object.getOwnPropertyDescriptor(H,Nt).enumerable})),pt.push.apply(pt,xt)}return pt}function D(H){for(var G=1;G<arguments.length;G++){var pt=arguments[G]!=null?arguments[G]:{};G%2?L(Object(pt),!0).forEach(function(xt){R()(H,xt,pt[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(pt)):L(Object(pt)).forEach(function(xt){Object.defineProperty(H,xt,Object.getOwnPropertyDescriptor(pt,xt))})}return H}rt.default=function(H){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pt=D(D({},{starter:"let el = this",toolbarIcon:'<i class="fa fa-file-code-o"></i>',scriptTypesSupport:["default","wrapper","text","textnode","image","video","svg"],toolbarBtnCustomScript:{},onRun:function(){return console.log("valid syntax")},onError:function(xt){return console.log("error",xt)},modalTitle:"Script",codeLabel:"JS",codeViewOptions:{},buttonLabel:"Save",commandAttachScript:{}}),G);j(H,pt)}}])})})(Bh);var E_=Bh.exports;const P_=Nh(E_);var Uh={exports:{}};/*! grapesjs-component-code-editor - 1.0.20 */(function(w,Y){(function(st,rt){w.exports=rt()})(window,function(){return function(st){var rt={};function lt(F){if(rt[F])return rt[F].exports;var R=rt[F]={i:F,l:!1,exports:{}};return st[F].call(R.exports,R,R.exports,lt),R.l=!0,R.exports}return lt.m=st,lt.c=rt,lt.d=function(F,R,M){lt.o(F,R)||Object.defineProperty(F,R,{enumerable:!0,get:M})},lt.r=function(F){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})},lt.t=function(F,R){if(1&R&&(F=lt(F)),8&R||4&R&&typeof F=="object"&&F&&F.__esModule)return F;var M=Object.create(null);if(lt.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:F}),2&R&&typeof F!="string")for(var N in F)lt.d(M,N,(function(x){return F[x]}).bind(null,N));return M},lt.n=function(F){var R=F&&F.__esModule?function(){return F.default}:function(){return F};return lt.d(R,"a",R),R},lt.o=function(F,R){return Object.prototype.hasOwnProperty.call(F,R)},lt.p="",lt(lt.s=3)}([function(st,rt){st.exports=function(lt,F,R){return F in lt?Object.defineProperty(lt,F,{value:R,enumerable:!0,configurable:!0,writable:!0}):lt[F]=R,lt}},function(st,rt){st.exports=function(lt,F){if(!(lt instanceof F))throw new TypeError("Cannot call a class as a function")}},function(st,rt){function lt(F,R){for(var M=0;M<R.length;M++){var N=R[M];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(F,N.key,N)}}st.exports=function(F,R,M){return R&&lt(F.prototype,R),M&&lt(F,M),F}},function(st,rt,lt){lt.r(rt);var F=lt(0),R=lt.n(F),M=lt(1),N=lt.n(M),x=lt(2),j=lt.n(x),L=typeof window<"u"?window:null,D=L===null,H=D?void 0:L.document,G=function(){return!1},pt=D?"calc":["","-webkit-","-moz-","-o-"].filter(function(et){var A=H.createElement("div");return A.style.cssText="width:"+et+"calc(9px)",!!A.style.length}).shift()+"calc",xt=function(et){return typeof et=="string"||et instanceof String},Nt=function(et){if(xt(et)){var A=H.querySelector(et);if(!A)throw new Error("Selector "+et+" did not match a DOM element");return A}return et},jt=function(et,A,tt){var E=et[A];return E!==void 0?E:tt},Tt=function(et,A,tt,E){if(A){if(E==="end")return 0;if(E==="center")return et/2}else if(tt){if(E==="start")return 0;if(E==="center")return et/2}return et},yt=function(et,A){var tt=H.createElement("div");return tt.className="gutter gutter-"+A,tt},Kt=function(et,A,tt){var E={};return xt(A)?E[et]=A:E[et]=pt+"("+A+"% - "+tt+"px)",E},te=function(et,A){var tt;return(tt={})[et]=A+"px",tt},ue=function(et,A){if(A===void 0&&(A={}),D)return{};var tt,E,At,Pt,ct,Dt,Wt=et;Array.from&&(Wt=Array.from(Wt));var oe=Nt(Wt[0]).parentNode,Pe=getComputedStyle?getComputedStyle(oe):null,_e=Pe?Pe.flexDirection:null,ve=jt(A,"sizes")||Wt.map(function(){return 100/Wt.length}),Ct=jt(A,"minSize",100),Rt=Array.isArray(Ct)?Ct:Wt.map(function(){return Ct}),zt=jt(A,"expandToMin",!1),ie=jt(A,"gutterSize",10),ne=jt(A,"gutterAlign","center"),qt=jt(A,"snapOffset",30),me=jt(A,"dragInterval",1),Ne=jt(A,"direction","horizontal"),cr=jt(A,"cursor",Ne==="horizontal"?"col-resize":"row-resize"),_r=jt(A,"gutter",yt),ar=jt(A,"elementStyle",Kt),he=jt(A,"gutterStyle",te);function T(ee,Jt,Vt,Te){var Be=ar(tt,Jt,Vt,Te);Object.keys(Be).forEach(function(Ee){ee.style[Ee]=Be[Ee]})}function B(){return Dt.map(function(ee){return ee.size})}function nt(ee){return"touches"in ee?ee.touches[0][E]:ee[E]}function ht(ee){var Jt=Dt[this.a],Vt=Dt[this.b],Te=Jt.size+Vt.size;Jt.size=ee/this.size*Te,Vt.size=Te-ee/this.size*Te,T(Jt.element,Jt.size,this._b,Jt.i),T(Vt.element,Vt.size,this._c,Vt.i)}function Lt(ee){var Jt,Vt=Dt[this.a],Te=Dt[this.b];this.dragging&&(Jt=nt(ee)-this.start+(this._b-this.dragOffset),me>1&&(Jt=Math.round(Jt/me)*me),Jt<=Vt.minSize+qt+this._b?Jt=Vt.minSize+this._b:Jt>=this.size-(Te.minSize+qt+this._c)&&(Jt=this.size-(Te.minSize+this._c)),ht.call(this,Jt),jt(A,"onDrag",G)(B()))}function Z(){var ee=Dt[this.a].element,Jt=Dt[this.b].element,Vt=ee.getBoundingClientRect(),Te=Jt.getBoundingClientRect();this.size=Vt[tt]+Te[tt]+this._b+this._c,this.start=Vt[At],this.end=Vt[Pt]}function Et(ee){var Jt=function(Ee){if(!getComputedStyle)return null;var Ke=getComputedStyle(Ee);if(!Ke)return null;var ge=Ee[ct];return ge===0?null:ge-=Ne==="horizontal"?parseFloat(Ke.paddingLeft)+parseFloat(Ke.paddingRight):parseFloat(Ke.paddingTop)+parseFloat(Ke.paddingBottom)}(oe);if(Jt===null||Rt.reduce(function(Ee,Ke){return Ee+Ke},0)>Jt)return ee;var Vt=0,Te=[],Be=ee.map(function(Ee,Ke){var ge=Jt*Ee/100,fr=Tt(ie,Ke===0,Ke===ee.length-1,ne),Me=Rt[Ke]+fr;return ge<Me?(Vt+=Me-ge,Te.push(0),Me):(Te.push(ge-Me),ge)});return Vt===0?ee:Be.map(function(Ee,Ke){var ge=Ee;if(Vt>0&&Te[Ke]-Vt>0){var fr=Math.min(Vt,Te[Ke]-Vt);Vt-=fr,ge=Ee-fr}return ge/Jt*100})}function mt(){var ee=Dt[this.a].element,Jt=Dt[this.b].element;this.dragging&&jt(A,"onDragEnd",G)(B()),this.dragging=!1,L.removeEventListener("mouseup",this.stop),L.removeEventListener("touchend",this.stop),L.removeEventListener("touchcancel",this.stop),L.removeEventListener("mousemove",this.move),L.removeEventListener("touchmove",this.move),this.stop=null,this.move=null,ee.removeEventListener("selectstart",G),ee.removeEventListener("dragstart",G),Jt.removeEventListener("selectstart",G),Jt.removeEventListener("dragstart",G),ee.style.userSelect="",ee.style.webkitUserSelect="",ee.style.MozUserSelect="",ee.style.pointerEvents="",Jt.style.userSelect="",Jt.style.webkitUserSelect="",Jt.style.MozUserSelect="",Jt.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor="",H.body.style.cursor=""}function xe(ee){if(!("button"in ee)||ee.button===0){var Jt=Dt[this.a].element,Vt=Dt[this.b].element;this.dragging||jt(A,"onDragStart",G)(B()),ee.preventDefault(),this.dragging=!0,this.move=Lt.bind(this),this.stop=mt.bind(this),L.addEventListener("mouseup",this.stop),L.addEventListener("touchend",this.stop),L.addEventListener("touchcancel",this.stop),L.addEventListener("mousemove",this.move),L.addEventListener("touchmove",this.move),Jt.addEventListener("selectstart",G),Jt.addEventListener("dragstart",G),Vt.addEventListener("selectstart",G),Vt.addEventListener("dragstart",G),Jt.style.userSelect="none",Jt.style.webkitUserSelect="none",Jt.style.MozUserSelect="none",Jt.style.pointerEvents="none",Vt.style.userSelect="none",Vt.style.webkitUserSelect="none",Vt.style.MozUserSelect="none",Vt.style.pointerEvents="none",this.gutter.style.cursor=cr,this.parent.style.cursor=cr,H.body.style.cursor=cr,Z.call(this),this.dragOffset=nt(ee)-this.end}}Ne==="horizontal"?(tt="width",E="clientX",At="left",Pt="right",ct="clientWidth"):Ne==="vertical"&&(tt="height",E="clientY",At="top",Pt="bottom",ct="clientHeight"),ve=Et(ve);var He=[];function De(ee){var Jt=ee.i===He.length,Vt=Jt?He[ee.i-1]:He[ee.i];Z.call(Vt);var Te=Jt?Vt.size-ee.minSize-Vt._c:ee.minSize+Vt._b;ht.call(Vt,Te)}return(Dt=Wt.map(function(ee,Jt){var Vt,Te={element:Nt(ee),size:ve[Jt],minSize:Rt[Jt],i:Jt};if(Jt>0&&((Vt={a:Jt-1,b:Jt,dragging:!1,direction:Ne,parent:oe})._b=Tt(ie,Jt-1==0,!1,ne),Vt._c=Tt(ie,!1,Jt===Wt.length-1,ne),_e==="row-reverse"||_e==="column-reverse")){var Be=Vt.a;Vt.a=Vt.b,Vt.b=Be}if(Jt>0){var Ee=_r(Jt,Ne,Te.element);(function(Ke,ge,fr){var Me=he(tt,ge,fr);Object.keys(Me).forEach(function(nr){Ke.style[nr]=Me[nr]})})(Ee,ie,Jt),Vt._a=xe.bind(Vt),Ee.addEventListener("mousedown",Vt._a),Ee.addEventListener("touchstart",Vt._a),oe.insertBefore(Ee,Te.element),Vt.gutter=Ee}return T(Te.element,Te.size,Tt(ie,Jt===0,Jt===Wt.length-1,ne),Jt),Jt>0&&He.push(Vt),Te})).forEach(function(ee){var Jt=ee.element.getBoundingClientRect()[tt];Jt<ee.minSize&&(zt?De(ee):ee.minSize=Jt)}),{setSizes:function(ee){var Jt=Et(ee);Jt.forEach(function(Vt,Te){if(Te>0){var Be=He[Te-1],Ee=Dt[Be.a],Ke=Dt[Be.b];Ee.size=Jt[Te-1],Ke.size=Vt,T(Ee.element,Ee.size,Be._b,Ee.i),T(Ke.element,Ke.size,Be._c,Ke.i)}})},getSizes:B,collapse:function(ee){De(Dt[ee])},destroy:function(ee,Jt){He.forEach(function(Vt){if(Jt!==!0?Vt.parent.removeChild(Vt.gutter):(Vt.gutter.removeEventListener("mousedown",Vt._a),Vt.gutter.removeEventListener("touchstart",Vt._a)),ee!==!0){var Te=ar(tt,Vt.a.size,Vt._b);Object.keys(Te).forEach(function(Be){Dt[Vt.a].element.style[Be]="",Dt[Vt.b].element.style[Be]=""})}})},parent:oe,pairs:He}};function Zt(et,A){var tt=Object.keys(et);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(et);A&&(E=E.filter(function(At){return Object.getOwnPropertyDescriptor(et,At).enumerable})),tt.push.apply(tt,E)}return tt}var dt=function(){function et(A,tt){N()(this,et),this.editor=A,this.$=A.$,this.pfx=A.getConfig("stylePrefix"),this.opts=tt,this.canvas=this.findWithinEditor(".".concat(this.pfx,"cv-canvas")),this.panelViews=tt.appendTo?this.$(tt.appendTo):this.findWithinEditor(".".concat(this.pfx,"pn-").concat(tt.panelId)),this.isShowing=!0}return j()(et,[{key:"findPanel",value:function(){var A=this.editor.Panels,tt=this.opts.panelId;return A.getPanel(tt)||A.addPanel({id:tt})}},{key:"findWithinEditor",value:function(A){return this.$(A,this.editor.getEl())}},{key:"buildCodeEditor",value:function(A){var tt=this.editor,E=this.opts;return tt.CodeManager.createViewer(function(At){for(var Pt=1;Pt<arguments.length;Pt++){var ct=arguments[Pt]!=null?arguments[Pt]:{};Pt%2?Zt(Object(ct),!0).forEach(function(Dt){R()(At,Dt,ct[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(At,Object.getOwnPropertyDescriptors(ct)):Zt(Object(ct)).forEach(function(Dt){Object.defineProperty(At,Dt,Object.getOwnPropertyDescriptor(ct,Dt))})}return At}({codeName:A==="html"?"htmlmixed":"css",theme:"hopscotch",readOnly:0,autoBeautify:1,autoCloseTags:1,autoCloseBrackets:1,styleActiveLine:1,smartIndent:1},E.codeViewOptions))}},{key:"buildSection",value:function(A,tt){var E=this.$,At=this.pfx,Pt=this.opts,ct=E("<section></section>"),Dt=A==="html"?Pt.htmlBtnText:Pt.cssBtnText,Wt=Pt.cleanCssBtn&&A==="css"?'<button class="cp-delete-'.concat(A," ").concat(At,'btn-prim">').concat(Pt.cleanCssBtnText,"</button>"):"";ct.append(E(`
            <div class="codepanel-separator">
                <div class="codepanel-label">`.concat(A,`</div>
                <div class="cp-btn-container">
                    `).concat(Wt,`
                    <button class="cp-apply-`).concat(A," ").concat(At,'btn-prim">').concat(Dt,`</button>
                </div>
            </div>`)));var oe=tt.getElement();return oe.style.height="calc(100% - 30px)",ct.append(oe),this.codePanel.append(ct),ct.get(0)}},{key:"buildCodePanel",value:function(){var A=this,tt=this.$,E=this.editor,At=this.opts.panelId?this.findPanel():0;this.codePanel=tt("<div></div>"),this.codePanel.addClass("code-panel"),this.htmlCodeEditor=this.buildCodeEditor("html"),this.cssCodeEditor=this.buildCodeEditor("css");var Pt=[this.buildSection("html",this.htmlCodeEditor),this.buildSection("css",this.cssCodeEditor)];At&&!this.opts.appendTo&&At.set("appendContent",this.codePanel).trigger("change:appendContent"),this.opts.appendTo&&tt(this.opts.appendTo).append(this.codePanel),this.updateEditorContents(),this.codePanel.find(".cp-apply-html").on("click",this.updateHtml.bind(this)),this.codePanel.find(".cp-apply-css").on("click",this.updateCss.bind(this)),this.opts.cleanCssBtn&&this.codePanel.find(".cp-delete-css").on("click",this.deleteSelectedCss.bind(this)),ue(Pt,{direction:"vertical",sizes:[50,50],minSize:100,gutterSize:1,onDragEnd:this.refreshEditors.bind(this)}),E.on("component:update",function(ct){return A.updateEditorContents()}),E.on("stop:preview",function(){A.isShowing&&!A.opts.preserveWidth&&A.canvas.css("width",A.opts.openState.cv)})}},{key:"showCodePanel",value:function(){this.isShowing=!0,this.updateEditorContents(),this.codePanel.css("display","block"),setTimeout(this.refreshEditors.bind(this),320),this.opts.preserveWidth||(this.panelViews.css("width",this.opts.openState.pn),this.canvas.css("width",this.opts.openState.cv))}},{key:"hideCodePanel",value:function(){this.codePanel&&this.codePanel.css("display","none"),this.isShowing=!1,this.opts.preserveWidth||(this.panelViews.css("width",this.opts.closedState.pn),this.canvas.css("width",this.opts.closedState.cv))}},{key:"refreshEditors",value:function(){this.htmlCodeEditor.refresh(),this.cssCodeEditor.refresh()}},{key:"updateHtml",value:function(A){A==null||A.preventDefault();var tt=this.editor,E=this.component,At=this.htmlCodeEditor.getContent().trim();if(At&&At!==this.previousHtmlCode){this.previousHtmlCode=At;var Pt="";this.cssCodeEditor.getContent().split(`}
`).filter(function(ct){return!!ct.trim()}).map(function(ct){if(!/}$/.test(ct))return"".concat(ct,"}")}).forEach(function(ct){/^#/.test(ct)&&(Pt+=ct)}),At+="<style>".concat(Pt,"</style>"),E.attributes.type==="wrapper"?tt.setComponents(At):tt.select(E.replaceWith(At))}}},{key:"updateCss",value:function(A){A==null||A.preventDefault();var tt=this.cssCodeEditor.getContent().trim();tt&&tt!==this.previousCssCode&&(this.previousCssCode=tt,this.editor.Css.addRules(tt))}},{key:"deleteSelectedCss",value:function(A){var tt=this;A==null||A.preventDefault(),this.cssCodeEditor.editor.getSelections().forEach(function(E){return tt.parseRemove(E)}),this.cssCodeEditor.editor.deleteH()}},{key:"parseRemove",value:function(A){var tt=this.editor;tt.Css.remove(this.getRules(tt.Parser.parseCss(A)))}},{key:"getRules",value:function(A){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=this.editor,At=E.Selectors;return A.map(function(Pt){var ct=At.get(Pt.selectors),Dt=Pt.state,Wt=Pt.selectorsAdd,oe=tt.atRuleType,Pe=tt.atRuleParams;return ct&&E.Css.get(ct,Dt,Pe,{selectorsAdd:Wt,atRule:oe})})}},{key:"updateEditorContents",value:function(){this.isShowing&&(this.component=this.editor.getSelected(),this.component&&(this.htmlCodeEditor.setContent(this.getComponentHtml(this.component)),this.cssCodeEditor.setContent(this.editor.CodeManager.getCode(this.component,"css",{cssc:this.editor.Css}))))}},{key:"getComponentHtml",value:function(A){var tt=this.pfx,E=this.opts,At="",Pt=A.getEl();!E.clearData&&Pt.classList.remove("".concat(tt,"selected"));var ct=E.clearData?A.toHTML():A.attributes.type==="wrapper"?Pt.innerHTML:Pt.outerHTML;!E.clearData&&Pt.classList.add("".concat(tt,"selected")),At+=ct;var Dt=E.editJs?A.getScriptString():"";return At+=Dt?"<script>".concat(Dt,"<\/script>"):""}}]),et}(),ot=function(et,A){var tt=et.Commands,E=null;tt.add("open-code",{run:function(At){!E&&(E=new dt(At,A))&&E.buildCodePanel(),E.showCodePanel()},stop:function(At){E&&E.hideCodePanel()}}),tt.add("code-editor-object",function(){return E}),tt.add("code-editor-constructor",function(){return dt})};function X(et,A){var tt=Object.keys(et);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(et);A&&(E=E.filter(function(At){return Object.getOwnPropertyDescriptor(et,At).enumerable})),tt.push.apply(tt,E)}return tt}function z(et){for(var A=1;A<arguments.length;A++){var tt=arguments[A]!=null?arguments[A]:{};A%2?X(Object(tt),!0).forEach(function(E){R()(et,E,tt[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(tt)):X(Object(tt)).forEach(function(E){Object.defineProperty(et,E,Object.getOwnPropertyDescriptor(tt,E))})}return et}rt.default=function(et){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},tt=z(z({},{panelId:"views-container",appendTo:"",openState:{cv:"65%",pn:"35%"},closedState:{cv:"85%",pn:"15%"},codeViewOptions:{},preserveWidth:!1,editJs:!1,clearData:!1,cleanCssBtn:!0,htmlBtnText:"Apply",cssBtnText:"Apply",cleanCssBtnText:"Delete"}),A);ot(et,tt)}}])})})(Uh);var A_=Uh.exports;const k_=Nh(A_);let Pf=null;const M_=async(w=[],Y=[])=>{Pf=v_.init({container:"#gjs",width:"auto",height:"1000px",showOffsets:!0,noticeOnUnload:!1,storageManager:!1,fromElement:!0,plugins:[T_,k_,P_],canvas:{styles:w,scripts:Y}}),__(Pf)};window.startEditor=async function(w,Y){const st=await y_();await M_(st.css,st.js),await b_(Pf,w,Y)};window.saveEditorData=function(){Hh(Pf,!0)};

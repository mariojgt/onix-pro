import{g as Ld,c as Xc,S as Ha}from"./sweetalert2-e4475c8a.js";var wd={},e0={get exports(){return wd},set exports(T){wd=T}};/*! grapesjs - 0.20.4 */(function(T,F){(function(G,J){T.exports=J()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:Xc,()=>(()=>{var G={410:(m,Y,j)=>{var U,dt,K;dt=[j(50),j(316)],(K=typeof(U=function(Z,z){var C=Array.prototype.slice;function O(E,R,X){return X.length<=4?E.call(R,X[0],X[1],X[2],X[3]):E.apply(R,X)}function M(E,R){return C.call(E,R)}function D(E,R){return E!=null&&(Z.isArray(R)||(R=M(arguments,1)),Z.all(R,function(X){return X in E}))}var N=function(){var E=!1,R=-1;function X(){R++,E=!0,Z.defer(function(){E=!1})}return function(){return E||X(),R}}();function ut(){this.registeredObjects=[],this.cidIndexes=[]}function ht(E,R,X,it){for(var Tt,st=0,Ct=R.length;st<Ct;st++)if(Tt=R[st]){if(E==="on"){if(!it.objectRegistry.register(Tt))continue}else if(!it.objectRegistry.unregister(Tt))continue;Z.isFunction(Tt[E])&&Tt[E]("all",X,it)}}function Dt(E,R){var X=R.type,it=R.undoTypes,Tt=!it[X]||it[X][E];Z.isFunction(Tt)&&Tt(R.object,R.before,R.after,R.options)}function Rt(E,R,X,it,Tt){if(!(X.isCurrentlyUndoRedoing||E==="undo"&&X.pointer===-1||E==="redo"&&X.pointer===X.length-1)){X.isCurrentlyUndoRedoing=!0;var st,Ct,H=E==="undo";for(Tt?Ct=H&&X.pointer===X.length-1||!H&&X.pointer===-1?Z.clone(X.models):C.apply(X.models,H?[0,X.pointer]:[X.pointer,X.length-1]):(st=X.at(H?X.pointer:X.pointer+1),Ct=it?X.where({magicFusionIndex:st.get("magicFusionIndex")}):[st]),X.pointer+=(H?-1:1)*Ct.length;st=H?Ct.pop():Ct.shift();)st[E]();X.isCurrentlyUndoRedoing=!1,R.trigger(E,R)}}function zt(E,R){var X=E.condition,it=typeof X;return it==="function"?!!O(X,E,R):it!=="boolean"||X}function ae(E,R,X,it){if(E.track&&!E.isCurrentlyUndoRedoing&&R in it&&zt(it[R],X)){var Tt=O(it[R].on,it[R],X);if(D(Tt,"object","before","after")){if(Tt.type=R,Tt.magicFusionIndex=N(),Tt.undoTypes=it,E.pointer<E.length-1)for(var st=E.length-E.pointer-1;st--;)E.pop();E.pointer=E.length,E.add(Tt),E.length>E.maximumStackLength&&(E.shift(),E.pointer--)}}}ut.prototype={isRegistered:function(E){return E&&E.cid?this.registeredObjects[E.cid]:Z.contains(this.registeredObjects,E)},register:function(E){return!this.isRegistered(E)&&(E&&E.cid?(this.registeredObjects[E.cid]=E,this.cidIndexes.push(E.cid)):this.registeredObjects.push(E),!0)},unregister:function(E){if(this.isRegistered(E)){if(E&&E.cid)delete this.registeredObjects[E.cid],this.cidIndexes.splice(Z.indexOf(this.cidIndexes,E.cid),1);else{var R=Z.indexOf(this.registeredObjects,E);this.registeredObjects.splice(R,1)}return!0}return!1},get:function(){return Z.map(this.cidIndexes,function(E){return this.registeredObjects[E]},this).concat(this.registeredObjects)}};var mt={add:{undo:function(E,R,X,it){E.remove(X,it)},redo:function(E,R,X,it){it.index&&(it.at=it.index),E.add(X,it)},on:function(E,R,X){return{object:R,before:void 0,after:E,options:Z.clone(X)}}},remove:{undo:function(E,R,X,it){"index"in it&&(it.at=it.index),E.add(R,it)},redo:function(E,R,X,it){E.remove(R,it)},on:function(E,R,X){return{object:R,before:E,after:void 0,options:Z.clone(X)}}},change:{undo:function(E,R,X,it){Z.isEmpty(R)?Z.each(Z.keys(X),E.unset,E):(E.set(R),it&&it.unsetData&&it.unsetData.before&&it.unsetData.before.length&&Z.each(it.unsetData.before,E.unset,E))},redo:function(E,R,X,it){Z.isEmpty(X)?Z.each(Z.keys(R),E.unset,E):(E.set(X),it&&it.unsetData&&it.unsetData.after&&it.unsetData.after.length&&Z.each(it.unsetData.after,E.unset,E))},on:function(E,R){var X=E.changedAttributes(),it=Z.keys(X),Tt=Z.pick(E.previousAttributes(),it),st=Z.keys(Tt),Ct=(R||(R={})).unsetData={after:[],before:[]};return it.length!=st.length&&(it.length>st.length?Z.each(it,function(H){H in Tt||Ct.before.push(H)},this):Z.each(st,function(H){H in X||Ct.after.push(H)})),{object:E,before:Tt,after:X,options:Z.clone(R)}}},reset:{undo:function(E,R,X){E.reset(R)},redo:function(E,R,X){E.reset(X)},on:function(E,R){return{object:E,before:R.previousModels,after:Z.clone(E.models)}}}};function yt(){}function Ht(E,R,X,it){if(typeof R=="object")return Z.each(R,function(Tt,st){E===2?Ht(E,Tt,X,it):Ht(E,st,Tt,X)});switch(E){case 0:D(X,"undo","redo","on")&&Z.all(Z.pick(X,"undo","redo","on"),Z.isFunction)&&(it[R]=X);break;case 1:it[R]&&Z.isObject(X)&&(it[R]=Z.extend({},it[R],X));break;case 2:delete it[R]}return this}yt.prototype=mt;var Kt=z.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(E){Dt("undo",this.attributes)},redo:function(E){Dt("redo",this.attributes)}}),Lt=z.Collection.extend({model:Kt,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(E){this.maximumStackLength=E}}),$=z.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(E){this.stack=new Lt,this.objectRegistry=new ut,this.undoTypes=new yt,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(R,X){this.stack.setMaxLength(X)},this),E&&E.track&&this.startTracking(),E&&E.register&&(Z.isArray(E.register)||Z.isArguments(E.register)?O(this.register,this,E.register):this.register(E.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(E){ae(this.stack,E,M(arguments,1),this.undoTypes)},register:function(){ht("on",arguments,this._addToStack,this)},unregister:function(){ht("off",arguments,this._addToStack,this)},unregisterAll:function(){O(this.unregister,this,this.objectRegistry.get())},undo:function(E){Rt("undo",this,this.stack,E)},undoAll:function(){Rt("undo",this,this.stack,!1,!0)},redo:function(E){Rt("redo",this,this.stack,E)},redoAll:function(){Rt("redo",this,this.stack,!1,!0)},isAvailable:function(E){var R=this.stack,X=R.length;switch(E){case"undo":return X>0&&R.pointer>-1;case"redo":return X>0&&R.pointer<X-1;default:return!1}},merge:function(E){for(var R,X=Z.isArray(E)?E:M(arguments);R=X.pop();)R instanceof $&&R.stack instanceof Lt&&(R.stack=this.stack)},addUndoType:function(E,R){Ht(0,E,R,this.undoTypes)},changeUndoType:function(E,R){Ht(1,E,R,this.undoTypes)},removeUndoType:function(E){Ht(2,E,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return Z.extend($,{defaults:function(E){Z.extend($.prototype.defaults,E)},addUndoType:function(E,R){Ht(0,E,R,mt)},changeUndoType:function(E,R){Ht(1,E,R,mt)},removeUndoType:function(E){Ht(2,E,void 0,mt)}}),z.UndoManager=$})=="function"?U.apply(Y,dt):U)===void 0||(m.exports=K)},316:(m,Y,j)=>{var U,dt;(function(K){var Z=typeof self=="object"&&self.self===self&&self||typeof j.g=="object"&&j.g.global===j.g&&j.g;U=[j(50),j(895),Y],dt=function(z,C,O){Z.Backbone=function(M,D,N,ut){var ht=M.Backbone,Dt=Array.prototype.slice;D.VERSION="1.4.1",D.$=ut,D.noConflict=function(){return M.Backbone=ht,this},D.emulateHTTP=!1,D.emulateJSON=!1;var Rt,zt=D.Events={},ae=/\s+/,mt=function(b,L,B,vt,At){var Pt,ne=0;if(B&&typeof B=="object")for(vt!==void 0&&("context"in At)&&At.context===void 0&&(At.context=vt),Pt=N.keys(B);ne<Pt.length;ne++)L=mt(b,L,Pt[ne],B[Pt[ne]],At);else if(B&&ae.test(B))for(Pt=B.split(ae);ne<Pt.length;ne++)L=b(L,Pt[ne],vt,At);else L=b(L,B,vt,At);return L};zt.on=function(b,L,B){return this._events=mt(yt,this._events||{},b,L,{context:B,ctx:this,listening:Rt}),Rt&&((this._listeners||(this._listeners={}))[Rt.id]=Rt,Rt.interop=!1),this},zt.listenTo=function(b,L,B){if(!b)return this;var vt=b._listenId||(b._listenId=N.uniqueId("l")),At=this._listeningTo||(this._listeningTo={}),Pt=Rt=At[vt];Pt||(this._listenId||(this._listenId=N.uniqueId("l")),Pt=Rt=At[vt]=new R(this,b));var ne=Ht(b,L,B,this);if(Rt=void 0,ne)throw ne;return Pt.interop&&Pt.on(L,B),this};var yt=function(b,L,B,vt){if(B){var At=b[L]||(b[L]=[]),Pt=vt.context,ne=vt.ctx,we=vt.listening;we&&we.count++,At.push({callback:B,context:Pt,ctx:Pt||ne,listening:we})}return b},Ht=function(b,L,B,vt){try{b.on(L,B,vt)}catch(At){return At}};zt.off=function(b,L,B){return this._events?(this._events=mt(Kt,this._events,b,L,{context:B,listeners:this._listeners}),this):this},zt.stopListening=function(b,L,B){var vt=this._listeningTo;if(!vt)return this;for(var At=b?[b._listenId]:N.keys(vt),Pt=0;Pt<At.length;Pt++){var ne=vt[At[Pt]];if(!ne)break;ne.obj.off(L,B,this),ne.interop&&ne.off(L,B)}return N.isEmpty(vt)&&(this._listeningTo=void 0),this};var Kt=function(b,L,B,vt){if(b){var At,Pt=vt.context,ne=vt.listeners,we=0;if(L||Pt||B){for(At=L?[L]:N.keys(b);we<At.length;we++){var ze=b[L=At[we]];if(!ze)break;for(var Ue=[],on=0;on<ze.length;on++){var oe=ze[on];if(B&&B!==oe.callback&&B!==oe.callback._callback||Pt&&Pt!==oe.context)Ue.push(oe);else{var W=oe.listening;W&&W.off(L,B)}}Ue.length?b[L]=Ue:delete b[L]}return b}for(At=N.keys(ne);we<At.length;we++)ne[At[we]].cleanup()}};zt.once=function(b,L,B){var vt=mt(Lt,{},b,L,this.off.bind(this));return typeof b=="string"&&B==null&&(L=void 0),this.on(vt,L,B)},zt.listenToOnce=function(b,L,B){var vt=mt(Lt,{},L,B,this.stopListening.bind(this,b));return this.listenTo(b,vt)};var Lt=function(b,L,B,vt){if(B){var At=b[L]=N.once(function(){vt(L,At),B.apply(this,arguments)});At._callback=B}return b};zt.trigger=function(b){if(!this._events)return this;for(var L=Math.max(0,arguments.length-1),B=Array(L),vt=0;vt<L;vt++)B[vt]=arguments[vt+1];return mt($,this._events,b,void 0,B),this};var $=function(b,L,B,vt){if(b){var At=b[L],Pt=b.all;At&&Pt&&(Pt=Pt.slice()),At&&E(At,vt),Pt&&E(Pt,[L].concat(vt))}return b},E=function(b,L){var B,vt=-1,At=b.length,Pt=L[0],ne=L[1],we=L[2];switch(L.length){case 0:for(;++vt<At;)(B=b[vt]).callback.call(B.ctx);return;case 1:for(;++vt<At;)(B=b[vt]).callback.call(B.ctx,Pt);return;case 2:for(;++vt<At;)(B=b[vt]).callback.call(B.ctx,Pt,ne);return;case 3:for(;++vt<At;)(B=b[vt]).callback.call(B.ctx,Pt,ne,we);return;default:for(;++vt<At;)(B=b[vt]).callback.apply(B.ctx,L);return}},R=function(b,L){this.id=b._listenId,this.listener=b,this.obj=L,this.interop=!0,this.count=0,this._events=void 0};R.prototype.on=zt.on,R.prototype.off=function(b,L){var B;this.interop?(this._events=mt(Kt,this._events,b,L,{context:void 0,listeners:void 0}),B=!this._events):(this.count--,B=this.count===0),B&&this.cleanup()},R.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},zt.bind=zt.on,zt.unbind=zt.off,N.extend(D,zt);var X=D.Model=function(b,L){var B=b||{};L||(L={}),this.preinitialize.apply(this,arguments),this.cid=N.uniqueId(this.cidPrefix),this.attributes={},L.collection&&(this.collection=L.collection),L.parse&&(B=this.parse(B,L)||{});var vt=N.result(this,"defaults");B=N.defaults(N.extend({},vt,B),vt),this.set(B,L),this.changed={},this.initialize.apply(this,arguments)};N.extend(X.prototype,zt,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(b){return N.clone(this.attributes)},sync:function(){return D.sync.apply(this,arguments)},get:function(b){return this.attributes[b]},escape:function(b){return N.escape(this.get(b))},has:function(b){return this.get(b)!=null},matches:function(b){return!!N.iteratee(b,this)(this.attributes)},set:function(b,L,B){if(b==null)return this;var vt;if(typeof b=="object"?(vt=b,B=L):(vt={})[b]=L,B||(B={}),!this._validate(vt,B))return!1;var At=B.unset,Pt=B.silent,ne=[],we=this._changing;this._changing=!0,we||(this._previousAttributes=N.clone(this.attributes),this.changed={});var ze=this.attributes,Ue=this.changed,on=this._previousAttributes;for(var oe in vt)L=vt[oe],N.isEqual(ze[oe],L)||ne.push(oe),N.isEqual(on[oe],L)?delete Ue[oe]:Ue[oe]=L,At?delete ze[oe]:ze[oe]=L;if(this.idAttribute in vt){var W=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,W,B)}if(!Pt){ne.length&&(this._pending=B);for(var pt=0;pt<ne.length;pt++)this.trigger("change:"+ne[pt],this,ze[ne[pt]],B)}if(we)return this;if(!Pt)for(;this._pending;)B=this._pending,this._pending=!1,this.trigger("change",this,B);return this._pending=!1,this._changing=!1,this},unset:function(b,L){return this.set(b,void 0,N.extend({},L,{unset:!0}))},clear:function(b){var L={};for(var B in this.attributes)L[B]=void 0;return this.set(L,N.extend({},b,{unset:!0}))},hasChanged:function(b){return b==null?!N.isEmpty(this.changed):N.has(this.changed,b)},changedAttributes:function(b){if(!b)return!!this.hasChanged()&&N.clone(this.changed);var L,B=this._changing?this._previousAttributes:this.attributes,vt={};for(var At in b){var Pt=b[At];N.isEqual(B[At],Pt)||(vt[At]=Pt,L=!0)}return!!L&&vt},previous:function(b){return b!=null&&this._previousAttributes?this._previousAttributes[b]:null},previousAttributes:function(){return N.clone(this._previousAttributes)},fetch:function(b){b=N.extend({parse:!0},b);var L=this,B=b.success;return b.success=function(vt){var At=b.parse?L.parse(vt,b):vt;if(!L.set(At,b))return!1;B&&B.call(b.context,L,vt,b),L.trigger("sync",L,vt,b)},qt(this,b),this.sync("read",this,b)},save:function(b,L,B){var vt;b==null||typeof b=="object"?(vt=b,B=L):(vt={})[b]=L;var At=(B=N.extend({validate:!0,parse:!0},B)).wait;if(vt&&!At){if(!this.set(vt,B))return!1}else if(!this._validate(vt,B))return!1;var Pt=this,ne=B.success,we=this.attributes;B.success=function(on){Pt.attributes=we;var oe=B.parse?Pt.parse(on,B):on;if(At&&(oe=N.extend({},vt,oe)),oe&&!Pt.set(oe,B))return!1;ne&&ne.call(B.context,Pt,on,B),Pt.trigger("sync",Pt,on,B)},qt(this,B),vt&&At&&(this.attributes=N.extend({},we,vt));var ze=this.isNew()?"create":B.patch?"patch":"update";ze!=="patch"||B.attrs||(B.attrs=vt);var Ue=this.sync(ze,this,B);return this.attributes=we,Ue},destroy:function(b){b=b?N.clone(b):{};var L=this,B=b.success,vt=b.wait,At=function(){L.stopListening(),L.trigger("destroy",L,L.collection,b)};b.success=function(ne){vt&&At(),B&&B.call(b.context,L,ne,b),L.isNew()||L.trigger("sync",L,ne,b)};var Pt=!1;return this.isNew()?N.defer(b.success):(qt(this,b),Pt=this.sync("delete",this,b)),vt||At(),Pt},url:function(){var b=N.result(this,"urlRoot")||N.result(this.collection,"url")||Ot();if(this.isNew())return b;var L=this.get(this.idAttribute);return b.replace(/[^\/]$/,"$&/")+encodeURIComponent(L)},parse:function(b,L){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(b){return this._validate({},N.extend({},b,{validate:!0}))},_validate:function(b,L){if(!L.validate||!this.validate)return!0;b=N.extend({},this.attributes,b);var B=this.validationError=this.validate(b,L)||null;return!B||(this.trigger("invalid",this,B,N.extend(L,{validationError:B})),!1)}});var it=D.Collection=function(b,L){L||(L={}),this.preinitialize.apply(this,arguments),L.model&&(this.model=L.model),L.comparator!==void 0&&(this.comparator=L.comparator),this._reset(),this.initialize.apply(this,arguments),b&&this.reset(b,N.extend({silent:!0},L))},Tt={add:!0,remove:!0,merge:!0},st={add:!0,remove:!1},Ct=function(b,L,B){B=Math.min(Math.max(B,0),b.length);var vt,At=Array(b.length-B),Pt=L.length;for(vt=0;vt<At.length;vt++)At[vt]=b[vt+B];for(vt=0;vt<Pt;vt++)b[vt+B]=L[vt];for(vt=0;vt<At.length;vt++)b[vt+Pt+B]=At[vt]};N.extend(it.prototype,zt,{model:X,preinitialize:function(){},initialize:function(){},toJSON:function(b){return this.map(function(L){return L.toJSON(b)})},sync:function(){return D.sync.apply(this,arguments)},add:function(b,L){return this.set(b,N.extend({merge:!1},L,st))},remove:function(b,L){L=N.extend({},L);var B=!N.isArray(b);b=B?[b]:b.slice();var vt=this._removeModels(b,L);return!L.silent&&vt.length&&(L.changes={added:[],merged:[],removed:vt},this.trigger("update",this,L)),B?vt[0]:vt},set:function(b,L){if(b!=null){(L=N.extend({},Tt,L)).parse&&!this._isModel(b)&&(b=this.parse(b,L)||[]);var B=!N.isArray(b);b=B?[b]:b.slice();var vt=L.at;vt!=null&&(vt=+vt),vt>this.length&&(vt=this.length),vt<0&&(vt+=this.length+1);var At,Pt,ne=[],we=[],ze=[],Ue=[],on={},oe=L.add,W=L.merge,pt=L.remove,_t=!1,kt=this.comparator&&vt==null&&L.sort!==!1,ie=N.isString(this.comparator)?this.comparator:null;for(Pt=0;Pt<b.length;Pt++){At=b[Pt];var xe=this.get(At);if(xe){if(W&&At!==xe){var $e=this._isModel(At)?At.attributes:At;L.parse&&($e=xe.parse($e,L)),xe.set($e,L),ze.push(xe),kt&&!_t&&(_t=xe.hasChanged(ie))}on[xe.cid]||(on[xe.cid]=!0,ne.push(xe)),b[Pt]=xe}else oe&&(At=b[Pt]=this._prepareModel(At,L))&&(we.push(At),this._addReference(At,L),on[At.cid]=!0,ne.push(At))}if(pt){for(Pt=0;Pt<this.length;Pt++)on[(At=this.models[Pt]).cid]||Ue.push(At);Ue.length&&this._removeModels(Ue,L)}var Qe=!1,zn=!kt&&oe&&pt;if(ne.length&&zn?(Qe=this.length!==ne.length||N.some(this.models,function(wn,Ge){return wn!==ne[Ge]}),this.models.length=0,Ct(this.models,ne,0),this.length=this.models.length):we.length&&(kt&&(_t=!0),Ct(this.models,we,vt??this.length),this.length=this.models.length),_t&&this.sort({silent:!0}),!L.silent){for(Pt=0;Pt<we.length;Pt++)vt!=null&&(L.index=vt+Pt),(At=we[Pt]).trigger("add",At,this,L);(_t||Qe)&&this.trigger("sort",this,L),(we.length||Ue.length||ze.length)&&(L.changes={added:we,removed:Ue,merged:ze},this.trigger("update",this,L))}return B?b[0]:b}},reset:function(b,L){L=L?N.clone(L):{};for(var B=0;B<this.models.length;B++)this._removeReference(this.models[B],L);return L.previousModels=this.models,this._reset(),b=this.add(b,N.extend({silent:!0},L)),L.silent||this.trigger("reset",this,L),b},push:function(b,L){return this.add(b,N.extend({at:this.length},L))},pop:function(b){var L=this.at(this.length-1);return this.remove(L,b)},unshift:function(b,L){return this.add(b,N.extend({at:0},L))},shift:function(b){var L=this.at(0);return this.remove(L,b)},slice:function(){return Dt.apply(this.models,arguments)},get:function(b){if(b!=null)return this._byId[b]||this._byId[this.modelId(this._isModel(b)?b.attributes:b,b.idAttribute)]||b.cid&&this._byId[b.cid]},has:function(b){return this.get(b)!=null},at:function(b){return b<0&&(b+=this.length),this.models[b]},where:function(b,L){return this[L?"find":"filter"](b)},findWhere:function(b){return this.where(b,!0)},sort:function(b){var L=this.comparator;if(!L)throw new Error("Cannot sort a set without a comparator");b||(b={});var B=L.length;return N.isFunction(L)&&(L=L.bind(this)),B===1||N.isString(L)?this.models=this.sortBy(L):this.models.sort(L),b.silent||this.trigger("sort",this,b),this},pluck:function(b){return this.map(b+"")},fetch:function(b){var L=(b=N.extend({parse:!0},b)).success,B=this;return b.success=function(vt){var At=b.reset?"reset":"set";B[At](vt,b),L&&L.call(b.context,B,vt,b),B.trigger("sync",B,vt,b)},qt(this,b),this.sync("read",this,b)},create:function(b,L){var B=(L=L?N.clone(L):{}).wait;if(!(b=this._prepareModel(b,L)))return!1;B||this.add(b,L);var vt=this,At=L.success;return L.success=function(Pt,ne,we){B&&vt.add(Pt,we),At&&At.call(we.context,Pt,ne,we)},b.save(null,L),b},parse:function(b,L){return b},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(b,L){return b[L||this.model.prototype.idAttribute||"id"]},values:function(){return new Vt(this,Nt)},keys:function(){return new Vt(this,te)},entries:function(){return new Vt(this,De)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(b,L){return this._isModel(b)?(b.collection||(b.collection=this),b):((L=L?N.clone(L):{}).collection=this,(B=this.model.prototype?new this.model(b,L):this.model(b,L)).validationError?(this.trigger("invalid",this,B.validationError,L),!1):B);var B},_removeModels:function(b,L){for(var B=[],vt=0;vt<b.length;vt++){var At=this.get(b[vt]);if(At){var Pt=this.indexOf(At);this.models.splice(Pt,1),this.length--,delete this._byId[At.cid];var ne=this.modelId(At.attributes,At.idAttribute);ne!=null&&delete this._byId[ne],L.silent||(L.index=Pt,At.trigger("remove",At,this,L)),B.push(At),this._removeReference(At,L)}}return B},_isModel:function(b){return b instanceof X},_addReference:function(b,L){this._byId[b.cid]=b;var B=this.modelId(b.attributes,b.idAttribute);B!=null&&(this._byId[B]=b),b.on("all",this._onModelEvent,this)},_removeReference:function(b,L){delete this._byId[b.cid];var B=this.modelId(b.attributes,b.idAttribute);B!=null&&delete this._byId[B],this===b.collection&&delete b.collection,b.off("all",this._onModelEvent,this)},_onModelEvent:function(b,L,B,vt){if(L){if((b==="add"||b==="remove")&&B!==this)return;if(b==="destroy"&&this.remove(L,vt),b==="changeId"){var At=this.modelId(L.previousAttributes(),L.idAttribute),Pt=this.modelId(L.attributes,L.idAttribute);At!=null&&delete this._byId[At],Pt!=null&&(this._byId[Pt]=L)}}this.trigger.apply(this,arguments)}});var H=typeof Symbol=="function"&&Symbol.iterator;H&&(it.prototype[H]=it.prototype.values);var Vt=function(b,L){this._collection=b,this._kind=L,this._index=0},Nt=1,te=2,De=3;H&&(Vt.prototype[H]=function(){return this}),Vt.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var b,L=this._collection.at(this._index);if(this._index++,this._kind===Nt)b=L;else{var B=this._collection.modelId(L.attributes,L.idAttribute);b=this._kind===te?B:[B,L]}return{value:b,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var je=D.View=function(b){this.cid=N.uniqueId("view"),this.preinitialize.apply(this,arguments),N.extend(this,N.pick(b,He)),this._ensureElement(),this.initialize.apply(this,arguments)},Pe=/^(\S+)\s*(.*)$/,He=["model","collection","el","id","attributes","className","tagName","events"];N.extend(je.prototype,zt,{tagName:"div",$:function(b){return this.$el.find(b)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(b){return this.undelegateEvents(),this._setElement(b),this.delegateEvents(),this},_setElement:function(b){this.$el=b instanceof D.$?b:D.$(b),this.el=this.$el[0]},delegateEvents:function(b){if(b||(b=N.result(this,"events")),!b)return this;for(var L in this.undelegateEvents(),b){var B=b[L];if(N.isFunction(B)||(B=this[B]),B){var vt=L.match(Pe);this.delegate(vt[1],vt[2],B.bind(this))}}return this},delegate:function(b,L,B){return this.$el.on(b+".delegateEvents"+this.cid,L,B),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(b,L,B){return this.$el.off(b+".delegateEvents"+this.cid,L,B),this},_createElement:function(b){return document.createElement(b)},_ensureElement:function(){if(this.el)this.setElement(N.result(this,"el"));else{var b=N.extend({},N.result(this,"attributes"));this.id&&(b.id=N.result(this,"id")),this.className&&(b.class=N.result(this,"className")),this.setElement(this._createElement(N.result(this,"tagName"))),this._setAttributes(b)}},_setAttributes:function(b){this.$el.attr(b)}});var Ee=function(b,L,B,vt){switch(L){case 1:return function(){return b[B](this[vt])};case 2:return function(At){return b[B](this[vt],At)};case 3:return function(At,Pt){return b[B](this[vt],Ce(At,this),Pt)};case 4:return function(At,Pt,ne){return b[B](this[vt],Ce(At,this),Pt,ne)};default:return function(){var At=Dt.call(arguments);return At.unshift(this[vt]),b[B].apply(b,At)}}},Le=function(b,L,B,vt){N.each(B,function(At,Pt){L[Pt]&&(b.prototype[Pt]=Ee(L,At,Pt,vt))})},Ce=function(b,L){return N.isFunction(b)?b:N.isObject(b)&&!L._isModel(b)?fe(b):N.isString(b)?function(B){return B.get(b)}:b},fe=function(b){var L=N.matches(b);return function(B){return L(B.attributes)}},he={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},ge={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};N.each([[it,he,"models"],[X,ge,"attributes"]],function(b){var L=b[0],B=b[1],vt=b[2];L.mixin=function(At){var Pt=N.reduce(N.functions(At),function(ne,we){return ne[we]=0,ne},{});Le(L,At,Pt,vt)},Le(L,N,B,vt)}),D.sync=function(b,L,B){var vt=gt[b];N.defaults(B||(B={}),{emulateHTTP:D.emulateHTTP,emulateJSON:D.emulateJSON});var At={type:vt,dataType:"json"};if(B.url||(At.url=N.result(L,"url")||Ot()),B.data!=null||!L||b!=="create"&&b!=="update"&&b!=="patch"||(At.contentType="application/json",At.data=JSON.stringify(B.attrs||L.toJSON(B))),B.emulateJSON&&(At.contentType="application/x-www-form-urlencoded",At.data=At.data?{model:At.data}:{}),B.emulateHTTP&&(vt==="PUT"||vt==="DELETE"||vt==="PATCH")){At.type="POST",B.emulateJSON&&(At.data._method=vt);var Pt=B.beforeSend;B.beforeSend=function(ze){if(ze.setRequestHeader("X-HTTP-Method-Override",vt),Pt)return Pt.apply(this,arguments)}}At.type==="GET"||B.emulateJSON||(At.processData=!1);var ne=B.error;B.error=function(ze,Ue,on){B.textStatus=Ue,B.errorThrown=on,ne&&ne.call(B.context,ze,Ue,on)};var we=B.xhr=D.ajax(N.extend(At,B));return L.trigger("request",L,we,B),we};var gt={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};D.ajax=function(){return D.$.ajax.apply(D.$,arguments)};var re=D.Router=function(b){b||(b={}),this.preinitialize.apply(this,arguments),b.routes&&(this.routes=b.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Zt=/\((.*?)\)/g,ue=/(\(\?)?:\w+/g,ve=/\*\w+/g,se=/[\-{}\[\]+?.,\\\^$|#\s]/g;N.extend(re.prototype,zt,{preinitialize:function(){},initialize:function(){},route:function(b,L,B){N.isRegExp(b)||(b=this._routeToRegExp(b)),N.isFunction(L)&&(B=L,L=""),B||(B=this[L]);var vt=this;return D.history.route(b,function(At){var Pt=vt._extractParameters(b,At);vt.execute(B,Pt,L)!==!1&&(vt.trigger.apply(vt,["route:"+L].concat(Pt)),vt.trigger("route",L,Pt),D.history.trigger("route",vt,L,Pt))}),this},execute:function(b,L,B){b&&b.apply(this,L)},navigate:function(b,L){return D.history.navigate(b,L),this},_bindRoutes:function(){if(this.routes){this.routes=N.result(this,"routes");for(var b,L=N.keys(this.routes);(b=L.pop())!=null;)this.route(b,this.routes[b])}},_routeToRegExp:function(b){return b=b.replace(se,"\\$&").replace(Zt,"(?:$1)?").replace(ue,function(L,B){return B?L:"([^/?]+)"}).replace(ve,"([^?]*?)"),new RegExp("^"+b+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(b,L){var B=b.exec(L).slice(1);return N.map(B,function(vt,At){return At===B.length-1?vt||null:vt?decodeURIComponent(vt):null})}});var Ne=D.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},Ze=/^[#\/]|\s+$/g,Ye=/^\/+|\/+$/g,hn=/#.*$/;Ne.started=!1,N.extend(Ne.prototype,zt,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(b){return decodeURI(b.replace(/%25/g,"%2525"))},getSearch:function(){var b=this.location.href.replace(/#.*/,"").match(/\?.+/);return b?b[0]:""},getHash:function(b){var L=(b||this).location.href.match(/#(.*)$/);return L?L[1]:""},getPath:function(){var b=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return b.charAt(0)==="/"?b.slice(1):b},getFragment:function(b){return b==null&&(b=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),b.replace(Ze,"")},start:function(b){if(Ne.started)throw new Error("Backbone.history has already been started");if(Ne.started=!0,this.options=N.extend({root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ye,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var L=this.root.slice(0,-1)||"/";return this.location.replace(L+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var B=document.body,vt=B.insertBefore(this.iframe,B.firstChild).contentWindow;vt.document.open(),vt.document.close(),vt.location.hash="#"+this.fragment}var At=window.addEventListener||function(Pt,ne){return attachEvent("on"+Pt,ne)};if(this._usePushState?At("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?At("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var b=window.removeEventListener||function(L,B){return detachEvent("on"+L,B)};this._usePushState?b("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&b("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Ne.started=!1},route:function(b,L){this.handlers.unshift({route:b,callback:L})},checkUrl:function(b){var L=this.getFragment();if(L===this.fragment&&this.iframe&&(L=this.getHash(this.iframe.contentWindow)),L===this.fragment)return!1;this.iframe&&this.navigate(L),this.loadUrl()},loadUrl:function(b){return!!this.matchRoot()&&(b=this.fragment=this.getFragment(b),N.some(this.handlers,function(L){if(L.route.test(b))return L.callback(b),!0}))},navigate:function(b,L){if(!Ne.started)return!1;L&&L!==!0||(L={trigger:!!L}),b=this.getFragment(b||"");var B=this.root;b!==""&&b.charAt(0)!=="?"||(B=B.slice(0,-1)||"/");var vt=B+b;b=b.replace(hn,"");var At=this.decodeFragment(b);if(this.fragment!==At){if(this.fragment=At,this._usePushState)this.history[L.replace?"replaceState":"pushState"]({},document.title,vt);else{if(!this._wantsHashChange)return this.location.assign(vt);if(this._updateHash(this.location,b,L.replace),this.iframe&&b!==this.getHash(this.iframe.contentWindow)){var Pt=this.iframe.contentWindow;L.replace||(Pt.document.open(),Pt.document.close()),this._updateHash(Pt.location,b,L.replace)}}return L.trigger?this.loadUrl(b):void 0}},_updateHash:function(b,L,B){if(B){var vt=b.href.replace(/(javascript:|#).*$/,"");b.replace(vt+"#"+L)}else b.hash="#"+L}}),D.history=new Ne;var Ln=function(b,L){var B,vt=this;return B=b&&N.has(b,"constructor")?b.constructor:function(){return vt.apply(this,arguments)},N.extend(B,vt,L),B.prototype=N.create(vt.prototype,b),B.prototype.constructor=B,B.__super__=vt.prototype,B};X.extend=it.extend=re.extend=je.extend=Ne.extend=Ln;var Ot=function(){throw new Error('A "url" property or function must be specified')},qt=function(b,L){var B=L.error;L.error=function(vt){B&&B.call(L.context,b,vt,L),b.trigger("error",b,vt,L)}};return D}(Z,O,z,C)}.apply(Y,U),dt===void 0||(m.exports=dt)})()},210:(m,Y,j)=>{(function(U){U.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(K,Z){return/^[;{}]$/.test(Z)}}),U.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(K,Z,z,C){return this.jsonMode?/^[\[,{]$/.test(Z)||/^}/.test(z):(Z!=";"||!C.lexical||C.lexical.type!=")")&&/^[;{}]$/.test(Z)&&!/^;/.test(z)}});var dt=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;U.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(K,Z,z,C){var O=!1;return this.configuration=="html"&&(O=!!C.context&&dt.test(C.context.tagName)),!O&&(K=="tag"&&/>$/.test(Z)&&C.context||/^</.test(z))}}),U.defineExtension("commentRange",function(K,Z,z){var C=this,O=U.innerMode(C.getMode(),C.getTokenAt(Z).state).mode;C.operation(function(){if(K)C.replaceRange(O.commentEnd,z),C.replaceRange(O.commentStart,Z),Z.line==z.line&&Z.ch==z.ch&&C.setCursor(Z.line,Z.ch+O.commentStart.length);else{var M=C.getRange(Z,z),D=M.indexOf(O.commentStart),N=M.lastIndexOf(O.commentEnd);D>-1&&N>-1&&N>D&&(M=M.substr(0,D)+M.substring(D+O.commentStart.length,N)+M.substr(N+O.commentEnd.length)),C.replaceRange(M,Z,z)}})}),U.defineExtension("autoIndentRange",function(K,Z){var z=this;this.operation(function(){for(var C=K.line;C<=Z.line;C++)z.indentLine(C,"smart")})}),U.defineExtension("autoFormatRange",function(K,Z){var z=this,C=z.getMode(),O=z.getRange(K,Z).split(`
`),M=U.copyState(C,z.getTokenAt(K).state),D=z.getOption("tabSize"),N="",ut=0,ht=K.ch===0;function Dt(){N+=`
`,ht=!0,++ut}for(var Rt=0;Rt<O.length;++Rt){for(var zt=new U.StringStream(O[Rt],D);!zt.eol();){var ae=U.innerMode(C,M),mt=C.token(zt,M),yt=zt.current();zt.start=zt.pos,ht&&!/\S/.test(yt)||(N+=yt,ht=!1),!ht&&ae.mode.newlineAfterToken&&ae.mode.newlineAfterToken(mt,yt,zt.string.slice(zt.pos)||O[Rt+1]||"",ae.state)&&Dt()}!zt.pos&&C.blankLine&&C.blankLine(M),!ht&&Rt<O.length-1&&Dt()}z.operation(function(){z.replaceRange(N,K,Z);for(var Ht=K.line+1,Kt=K.line+ut;Ht<=Kt;++Ht)z.indentLine(Ht,"smart");z.setSelection(K,z.getCursor(!1))})})})(j(631))},631:function(m){m.exports=function(){var Y=navigator.userAgent,j=navigator.platform,U=/gecko\/\d/i.test(Y),dt=/MSIE \d/.test(Y),K=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Y),Z=/Edge\/(\d+)/.exec(Y),z=dt||K||Z,C=z&&(dt?document.documentMode||6:+(Z||K)[1]),O=!Z&&/WebKit\//.test(Y),M=O&&/Qt\/\d+\.\d+/.test(Y),D=!Z&&/Chrome\/(\d+)/.exec(Y),N=D&&+D[1],ut=/Opera\//.test(Y),ht=/Apple Computer/.test(navigator.vendor),Dt=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Y),Rt=/PhantomJS/.test(Y),zt=ht&&(/Mobile\/\w+/.test(Y)||navigator.maxTouchPoints>2),ae=/Android/.test(Y),mt=zt||ae||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Y),yt=zt||/Mac/.test(j),Ht=/\bCrOS\b/.test(Y),Kt=/win/i.test(j),Lt=ut&&Y.match(/Version\/(\d*\.\d*)/);Lt&&(Lt=Number(Lt[1])),Lt&&Lt>=15&&(ut=!1,O=!0);var $=yt&&(M||ut&&(Lt==null||Lt<12.11)),E=U||z&&C>=9;function R(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}var X,it=function(o,s){var u=o.className,c=R(s).exec(u);if(c){var p=u.slice(c.index+c[0].length);o.className=u.slice(0,c.index)+(p?c[1]+p:"")}};function Tt(o){for(var s=o.childNodes.length;s>0;--s)o.removeChild(o.firstChild);return o}function st(o,s){return Tt(o).appendChild(s)}function Ct(o,s,u,c){var p=document.createElement(o);if(u&&(p.className=u),c&&(p.style.cssText=c),typeof s=="string")p.appendChild(document.createTextNode(s));else if(s)for(var h=0;h<s.length;++h)p.appendChild(s[h]);return p}function H(o,s,u,c){var p=Ct(o,s,u,c);return p.setAttribute("role","presentation"),p}function Vt(o,s){if(s.nodeType==3&&(s=s.parentNode),o.contains)return o.contains(s);do if(s.nodeType==11&&(s=s.host),s==o)return!0;while(s=s.parentNode)}function Nt(){var o;try{o=document.activeElement}catch{o=document.body||null}for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;return o}function te(o,s){var u=o.className;R(s).test(u)||(o.className+=(u?" ":"")+s)}function De(o,s){for(var u=o.split(" "),c=0;c<u.length;c++)u[c]&&!R(u[c]).test(s)&&(s+=" "+u[c]);return s}X=document.createRange?function(o,s,u,c){var p=document.createRange();return p.setEnd(c||o,u),p.setStart(o,s),p}:function(o,s,u){var c=document.body.createTextRange();try{c.moveToElementText(o.parentNode)}catch{return c}return c.collapse(!0),c.moveEnd("character",u),c.moveStart("character",s),c};var je=function(o){o.select()};function Pe(o){var s=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,s)}}function He(o,s,u){for(var c in s||(s={}),o)!o.hasOwnProperty(c)||u===!1&&s.hasOwnProperty(c)||(s[c]=o[c]);return s}function Ee(o,s,u,c,p){s==null&&(s=o.search(/[^\s\u00a0]/))==-1&&(s=o.length);for(var h=c||0,y=p||0;;){var w=o.indexOf("	",h);if(w<0||w>=s)return y+(s-h);y+=w-h,y+=u-y%u,h=w+1}}zt?je=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:z&&(je=function(o){try{o.select()}catch{}});var Le=function(){this.id=null,this.f=null,this.time=0,this.handler=Pe(this.onTimeout,this)};function Ce(o,s){for(var u=0;u<o.length;++u)if(o[u]==s)return u;return-1}Le.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},Le.prototype.set=function(o,s){this.f=s;var u=+new Date+o;(!this.id||u<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=u)};var fe=50,he={toString:function(){return"CodeMirror.Pass"}},ge={scroll:!1},gt={origin:"*mouse"},re={origin:"+move"};function Zt(o,s,u){for(var c=0,p=0;;){var h=o.indexOf("	",c);h==-1&&(h=o.length);var y=h-c;if(h==o.length||p+y>=s)return c+Math.min(y,s-p);if(p+=h-c,c=h+1,(p+=u-p%u)>=s)return c}}var ue=[""];function ve(o){for(;ue.length<=o;)ue.push(se(ue)+" ");return ue[o]}function se(o){return o[o.length-1]}function Ne(o,s){for(var u=[],c=0;c<o.length;c++)u[c]=s(o[c],c);return u}function Ze(o,s,u){for(var c=0,p=u(s);c<o.length&&u(o[c])<=p;)c++;o.splice(c,0,s)}function Ye(){}function hn(o,s){var u;return Object.create?u=Object.create(o):(Ye.prototype=o,u=new Ye),s&&He(s,u),u}var Ln=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ot(o){return/\w/.test(o)||o>""&&(o.toUpperCase()!=o.toLowerCase()||Ln.test(o))}function qt(o,s){return s?!!(s.source.indexOf("\\w")>-1&&Ot(o))||s.test(o):Ot(o)}function b(o){for(var s in o)if(o.hasOwnProperty(s)&&o[s])return!1;return!0}var L=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function B(o){return o.charCodeAt(0)>=768&&L.test(o)}function vt(o,s,u){for(;(u<0?s>0:s<o.length)&&B(o.charAt(s));)s+=u;return s}function At(o,s,u){for(var c=s>u?-1:1;;){if(s==u)return s;var p=(s+u)/2,h=c<0?Math.ceil(p):Math.floor(p);if(h==s)return o(h)?s:u;o(h)?u=h:s=h+c}}function Pt(o,s,u,c){if(!o)return c(s,u,"ltr",0);for(var p=!1,h=0;h<o.length;++h){var y=o[h];(y.from<u&&y.to>s||s==u&&y.to==s)&&(c(Math.max(y.from,s),Math.min(y.to,u),y.level==1?"rtl":"ltr",h),p=!0)}p||c(s,u,"ltr")}var ne=null;function we(o,s,u){var c;ne=null;for(var p=0;p<o.length;++p){var h=o[p];if(h.from<s&&h.to>s)return p;h.to==s&&(h.from!=h.to&&u=="before"?c=p:ne=p),h.from==s&&(h.from!=h.to&&u!="before"?c=p:ne=p)}return c??ne}var ze=function(){var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function u(P){return P<=247?o.charAt(P):1424<=P&&P<=1524?"R":1536<=P&&P<=1785?s.charAt(P-1536):1774<=P&&P<=2220?"r":8192<=P&&P<=8203?"w":P==8204?"b":"L"}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,p=/[stwN]/,h=/[LRr]/,y=/[Lb1n]/,w=/[1n]/;function S(P,tt,et){this.level=P,this.from=tt,this.to=et}return function(P,tt){var et=tt=="ltr"?"L":"R";if(P.length==0||tt=="ltr"&&!c.test(P))return!1;for(var xt=P.length,St=[],jt=0;jt<xt;++jt)St.push(u(P.charCodeAt(jt)));for(var Gt=0,Qt=et;Gt<xt;++Gt){var pe=St[Gt];pe=="m"?St[Gt]=Qt:Qt=pe}for(var me=0,le=et;me<xt;++me){var ke=St[me];ke=="1"&&le=="r"?St[me]="n":h.test(ke)&&(le=ke,ke=="r"&&(St[me]="R"))}for(var Oe=1,Me=St[0];Oe<xt-1;++Oe){var gn=St[Oe];gn=="+"&&Me=="1"&&St[Oe+1]=="1"?St[Oe]="1":gn!=","||Me!=St[Oe+1]||Me!="1"&&Me!="n"||(St[Oe]=Me),Me=gn}for(var vn=0;vn<xt;++vn){var xr=St[vn];if(xr==",")St[vn]="N";else if(xr=="%"){var Cn=void 0;for(Cn=vn+1;Cn<xt&&St[Cn]=="%";++Cn);for(var dr=vn&&St[vn-1]=="!"||Cn<xt&&St[Cn]=="1"?"1":"N",Sr=vn;Sr<Cn;++Sr)St[Sr]=dr;vn=Cn-1}}for(var Pn=0,Fn=et;Pn<xt;++Pn){var _r=St[Pn];Fn=="L"&&_r=="1"?St[Pn]="L":h.test(_r)&&(Fn=_r)}for(var qn=0;qn<xt;++qn)if(p.test(St[qn])){var Rn=void 0;for(Rn=qn+1;Rn<xt&&p.test(St[Rn]);++Rn);for(var Vn=(qn?St[qn-1]:et)=="L",Or=Vn==((Rn<xt?St[Rn]:et)=="L")?Vn?"L":"R":et,ui=qn;ui<Rn;++ui)St[ui]=Or;qn=Rn-1}for(var wo,hr=[],An=0;An<xt;)if(y.test(St[An])){var Dc=An;for(++An;An<xt&&y.test(St[An]);++An);hr.push(new S(0,Dc,An))}else{var $o=An,zi=hr.length,Bi=tt=="rtl"?1:0;for(++An;An<xt&&St[An]!="L";++An);for(var Kn=$o;Kn<An;)if(w.test(St[Kn])){$o<Kn&&(hr.splice(zi,0,new S(1,$o,Kn)),zi+=Bi);var Ls=Kn;for(++Kn;Kn<An&&w.test(St[Kn]);++Kn);hr.splice(zi,0,new S(2,Ls,Kn)),zi+=Bi,$o=Kn}else++Kn;$o<An&&hr.splice(zi,0,new S(1,$o,An))}return tt=="ltr"&&(hr[0].level==1&&(wo=P.match(/^\s+/))&&(hr[0].from=wo[0].length,hr.unshift(new S(0,0,wo[0].length))),se(hr).level==1&&(wo=P.match(/\s+$/))&&(se(hr).to-=wo[0].length,hr.push(new S(0,xt-wo[0].length,xt)))),tt=="rtl"?hr.reverse():hr}}();function Ue(o,s){var u=o.order;return u==null&&(u=o.order=ze(o.text,s)),u}var on=[],oe=function(o,s,u){if(o.addEventListener)o.addEventListener(s,u,!1);else if(o.attachEvent)o.attachEvent("on"+s,u);else{var c=o._handlers||(o._handlers={});c[s]=(c[s]||on).concat(u)}};function W(o,s){return o._handlers&&o._handlers[s]||on}function pt(o,s,u){if(o.removeEventListener)o.removeEventListener(s,u,!1);else if(o.detachEvent)o.detachEvent("on"+s,u);else{var c=o._handlers,p=c&&c[s];if(p){var h=Ce(p,u);h>-1&&(c[s]=p.slice(0,h).concat(p.slice(h+1)))}}}function _t(o,s){var u=W(o,s);if(u.length)for(var c=Array.prototype.slice.call(arguments,2),p=0;p<u.length;++p)u[p].apply(null,c)}function kt(o,s,u){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),_t(o,u||s.type,o,s),wn(s)||s.codemirrorIgnore}function ie(o){var s=o._handlers&&o._handlers.cursorActivity;if(s)for(var u=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),c=0;c<s.length;++c)Ce(u,s[c])==-1&&u.push(s[c])}function xe(o,s){return W(o,s).length>0}function $e(o){o.prototype.on=function(s,u){oe(this,s,u)},o.prototype.off=function(s,u){pt(this,s,u)}}function Qe(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function zn(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function wn(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==0}function Ge(o){Qe(o),zn(o)}function Rr(o){return o.target||o.srcElement}function nr(o){var s=o.which;return s==null&&(1&o.button?s=1:2&o.button?s=3:4&o.button&&(s=2)),yt&&o.ctrlKey&&s==1&&(s=3),s}var Vr,_n,kn=function(){if(z&&C<9)return!1;var o=Ct("div");return"draggable"in o||"dragDrop"in o}();function Yn(o){if(Vr==null){var s=Ct("span","​");st(o,Ct("span",[s,document.createTextNode("x")])),o.firstChild.offsetHeight!=0&&(Vr=s.offsetWidth<=1&&s.offsetHeight>2&&!(z&&C<8))}var u=Vr?Ct("span","​"):Ct("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return u.setAttribute("cm-text",""),u}function Hr(o){if(_n!=null)return _n;var s=st(o,document.createTextNode("AخA")),u=X(s,0,1).getBoundingClientRect(),c=X(s,1,2).getBoundingClientRect();return Tt(o),!(!u||u.left==u.right)&&(_n=c.right-u.right<3)}var Bn,Po=`

b`.split(/\n/).length!=3?function(o){for(var s=0,u=[],c=o.length;s<=c;){var p=o.indexOf(`
`,s);p==-1&&(p=o.length);var h=o.slice(s,o.charAt(p-1)=="\r"?p-1:p),y=h.indexOf("\r");y!=-1?(u.push(h.slice(0,y)),s+=y+1):(u.push(h),s=p+1)}return u}:function(o){return o.split(/\r\n?|\n/)},qo=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){var s;try{s=o.ownerDocument.selection.createRange()}catch{}return!(!s||s.parentElement()!=o)&&s.compareEndPoints("StartToEnd",s)!=0},Ao="oncopy"in(Bn=Ct("div"))||(Bn.setAttribute("oncopy","return;"),typeof Bn.oncopy=="function"),Go=null;function po(o){if(Go!=null)return Go;var s=st(o,Ct("span","x")),u=s.getBoundingClientRect(),c=X(s,0,1).getBoundingClientRect();return Go=Math.abs(u.left-c.left)>1}var yr={},mn={};function Ko(o,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),yr[o]=s}function zr(o,s){mn[o]=s}function jo(o){if(typeof o=="string"&&mn.hasOwnProperty(o))o=mn[o];else if(o&&typeof o.name=="string"&&mn.hasOwnProperty(o.name)){var s=mn[o.name];typeof s=="string"&&(s={name:s}),(o=hn(s,o)).name=s.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return jo("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return jo("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function io(o,s){s=jo(s);var u=yr[s.name];if(!u)return io(o,"text/plain");var c=u(o,s);if(Xn.hasOwnProperty(s.name)){var p=Xn[s.name];for(var h in p)p.hasOwnProperty(h)&&(c.hasOwnProperty(h)&&(c["_"+h]=c[h]),c[h]=p[h])}if(c.name=s.name,s.helperType&&(c.helperType=s.helperType),s.modeProps)for(var y in s.modeProps)c[y]=s.modeProps[y];return c}var Xn={};function Un(o,s){He(s,Xn.hasOwnProperty(o)?Xn[o]:Xn[o]={})}function Zn(o,s){if(s===!0)return s;if(o.copyState)return o.copyState(s);var u={};for(var c in s){var p=s[c];p instanceof Array&&(p=p.concat([])),u[c]=p}return u}function Jo(o,s){for(var u;o.innerMode&&(u=o.innerMode(s))&&u.mode!=o;)s=u.state,o=u.mode;return u||{mode:o,state:s}}function So(o,s,u){return!o.startState||o.startState(s,u)}var en=function(o,s,u){this.pos=this.start=0,this.string=o,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=u};function Se(o,s){if((s-=o.first)<0||s>=o.size)throw new Error("There is no line "+(s+o.first)+" in the document.");for(var u=o;!u.lines;)for(var c=0;;++c){var p=u.children[c],h=p.chunkSize();if(s<h){u=p;break}s-=h}return u.lines[s]}function ur(o,s,u){var c=[],p=s.line;return o.iter(s.line,u.line+1,function(h){var y=h.text;p==u.line&&(y=y.slice(0,u.ch)),p==s.line&&(y=y.slice(s.ch)),c.push(y),++p}),c}function Yo(o,s,u){var c=[];return o.iter(s,u,function(p){c.push(p.text)}),c}function pr(o,s){var u=s-o.height;if(u)for(var c=o;c;c=c.parent)c.height+=u}function rn(o){if(o.parent==null)return null;for(var s=o.parent,u=Ce(s.lines,o),c=s.parent;c;s=c,c=c.parent)for(var p=0;c.children[p]!=s;++p)u+=c.children[p].chunkSize();return u+s.first}function Wn(o,s){var u=o.first;t:do{for(var c=0;c<o.children.length;++c){var p=o.children[c],h=p.height;if(s<h){o=p;continue t}s-=h,u+=p.chunkSize()}return u}while(!o.lines);for(var y=0;y<o.lines.length;++y){var w=o.lines[y].height;if(s<w)break;s-=w}return u+y}function Oo(o,s){return s>=o.first&&s<o.first+o.size}function Xo(o,s){return String(o.lineNumberFormatter(s+o.firstLineNumber))}function Xt(o,s,u){if(u===void 0&&(u=null),!(this instanceof Xt))return new Xt(o,s,u);this.line=o,this.ch=s,this.sticky=u}function A(o,s){return o.line-s.line||o.ch-s.ch}function nt(o,s){return o.sticky==s.sticky&&A(o,s)==0}function Bt(o){return Xt(o.line,o.ch)}function ce(o,s){return A(o,s)<0?s:o}function _e(o,s){return A(o,s)<0?o:s}function tn(o,s){return Math.max(o.first,Math.min(s,o.first+o.size-1))}function de(o,s){if(s.line<o.first)return Xt(o.first,0);var u=o.first+o.size-1;return s.line>u?Xt(u,Se(o,u).text.length):Gn(s,Se(o,s.line).text.length)}function Gn(o,s){var u=o.ch;return u==null||u>s?Xt(o.line,s):u<0?Xt(o.line,0):o}function Dn(o,s){for(var u=[],c=0;c<s.length;c++)u[c]=de(o,s[c]);return u}en.prototype.eol=function(){return this.pos>=this.string.length},en.prototype.sol=function(){return this.pos==this.lineStart},en.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},en.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},en.prototype.eat=function(o){var s=this.string.charAt(this.pos);if(typeof o=="string"?s==o:s&&(o.test?o.test(s):o(s)))return++this.pos,s},en.prototype.eatWhile=function(o){for(var s=this.pos;this.eat(o););return this.pos>s},en.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},en.prototype.skipToEnd=function(){this.pos=this.string.length},en.prototype.skipTo=function(o){var s=this.string.indexOf(o,this.pos);if(s>-1)return this.pos=s,!0},en.prototype.backUp=function(o){this.pos-=o},en.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ee(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ee(this.string,this.lineStart,this.tabSize):0)},en.prototype.indentation=function(){return Ee(this.string,null,this.tabSize)-(this.lineStart?Ee(this.string,this.lineStart,this.tabSize):0)},en.prototype.match=function(o,s,u){if(typeof o!="string"){var c=this.string.slice(this.pos).match(o);return c&&c.index>0?null:(c&&s!==!1&&(this.pos+=c[0].length),c)}var p=function(h){return u?h.toLowerCase():h};if(p(this.string.substr(this.pos,o.length))==p(o))return s!==!1&&(this.pos+=o.length),!0},en.prototype.current=function(){return this.string.slice(this.start,this.pos)},en.prototype.hideFirstChars=function(o,s){this.lineStart+=o;try{return s()}finally{this.lineStart-=o}},en.prototype.lookAhead=function(o){var s=this.lineOracle;return s&&s.lookAhead(o)},en.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};var Yi=function(o,s){this.state=o,this.lookAhead=s},Ar=function(o,s,u,c){this.state=s,this.doc=o,this.line=u,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};function Ws(o,s,u,c){var p=[o.state.modeGen],h={};Mo(o,s.text,o.doc.mode,u,function(P,tt){return p.push(P,tt)},h,c);for(var y=u.state,w=function(P){u.baseTokens=p;var tt=o.state.overlays[P],et=1,xt=0;u.state=!0,Mo(o,s.text,tt.mode,u,function(St,jt){for(var Gt=et;xt<St;){var Qt=p[et];Qt>St&&p.splice(et,1,St,p[et+1],Qt),et+=2,xt=Math.min(St,Qt)}if(jt)if(tt.opaque)p.splice(Gt,et-Gt,St,"overlay "+jt),et=Gt+2;else for(;Gt<et;Gt+=2){var pe=p[Gt+1];p[Gt+1]=(pe?pe+" ":"")+"overlay "+jt}},h),u.state=y,u.baseTokens=null,u.baseTokenPos=1},S=0;S<o.state.overlays.length;++S)w(S);return{styles:p,classes:h.bgClass||h.textClass?h:null}}function jr(o,s,u){if(!s.styles||s.styles[0]!=o.state.modeGen){var c=To(o,rn(s)),p=s.text.length>o.options.maxHighlightLength&&Zn(o.doc.mode,c.state),h=Ws(o,s,c);p&&(c.state=p),s.stateAfter=c.save(!p),s.styles=h.styles,h.classes?s.styleClasses=h.classes:s.styleClasses&&(s.styleClasses=null),u===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return s.styles}function To(o,s,u){var c=o.doc,p=o.display;if(!c.mode.startState)return new Ar(c,!0,s);var h=Xi(o,s,u),y=h>c.first&&Se(c,h-1).stateAfter,w=y?Ar.fromSaved(c,y,h):new Ar(c,So(c.mode),h);return c.iter(h,s,function(S){fo(o,S.text,w);var P=w.line;S.stateAfter=P==s-1||P%5==0||P>=p.viewFrom&&P<p.viewTo?w.save():null,w.nextLine()}),u&&(c.modeFrontier=w.line),w}function fo(o,s,u,c){var p=o.doc.mode,h=new en(s,o.options.tabSize,u);for(h.start=h.pos=c||0,s==""&&Eo(p,u.state);!h.eol();)rr(p,h,u.state),h.start=h.pos}function Eo(o,s){if(o.blankLine)return o.blankLine(s);if(o.innerMode){var u=Jo(o,s);return u.mode.blankLine?u.mode.blankLine(u.state):void 0}}function rr(o,s,u,c){for(var p=0;p<10;p++){c&&(c[0]=Jo(o,u).mode);var h=o.token(s,u);if(s.pos>s.start)return h}throw new Error("Mode "+o.name+" failed to advance stream.")}Ar.prototype.lookAhead=function(o){var s=this.doc.getLine(this.line+o);return s!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),s},Ar.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},Ar.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Ar.fromSaved=function(o,s,u){return s instanceof Yi?new Ar(o,Zn(o.mode,s.state),u,s.lookAhead):new Ar(o,Zn(o.mode,s),u)},Ar.prototype.save=function(o){var s=o!==!1?Zn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Yi(s,this.maxLookAhead):s};var ko=function(o,s,u){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=s||null,this.state=u};function Zo(o,s,u,c){var p,h,y=o.doc,w=y.mode,S=Se(y,(s=de(y,s)).line),P=To(o,s.line,u),tt=new en(S.text,o.options.tabSize,P);for(c&&(h=[]);(c||tt.pos<s.ch)&&!tt.eol();)tt.start=tt.pos,p=rr(w,tt,P.state),c&&h.push(new ko(tt,p,Zn(y.mode,P.state)));return c?h:new ko(tt,p,P.state)}function $s(o,s){if(o)for(;;){var u=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!u)break;o=o.slice(0,u.index)+o.slice(u.index+u[0].length);var c=u[1]?"bgClass":"textClass";s[c]==null?s[c]=u[2]:new RegExp("(?:^|\\s)"+u[2]+"(?:$|\\s)").test(s[c])||(s[c]+=" "+u[2])}return o}function Mo(o,s,u,c,p,h,y){var w=u.flattenSpans;w==null&&(w=o.options.flattenSpans);var S,P=0,tt=null,et=new en(s,o.options.tabSize,c),xt=o.options.addModeClass&&[null];for(s==""&&$s(Eo(u,c.state),h);!et.eol();){if(et.pos>o.options.maxHighlightLength?(w=!1,y&&fo(o,s,c,et.pos),et.pos=s.length,S=null):S=$s(rr(u,et,c.state,xt),h),xt){var St=xt[0].name;St&&(S="m-"+(S?St+" "+S:St))}if(!w||tt!=S){for(;P<et.start;)p(P=Math.min(et.start,P+5e3),tt);tt=S}et.start=et.pos}for(;P<et.pos;){var jt=Math.min(et.pos,P+5e3);p(jt,tt),P=jt}}function Xi(o,s,u){for(var c,p,h=o.doc,y=u?-1:s-(o.doc.mode.innerMode?1e3:100),w=s;w>y;--w){if(w<=h.first)return h.first;var S=Se(h,w-1),P=S.stateAfter;if(P&&(!u||w+(P instanceof Yi?P.lookAhead:0)<=h.modeFrontier))return w;var tt=Ee(S.text,null,o.options.tabSize);(p==null||c>tt)&&(p=w-1,c=tt)}return p}function qs(o,s){if(o.modeFrontier=Math.min(o.modeFrontier,s),!(o.highlightFrontier<s-10)){for(var u=o.first,c=s-1;c>u;c--){var p=Se(o,c).stateAfter;if(p&&(!(p instanceof Yi)||c+p.lookAhead<s)){u=c+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,u)}}var or=!1,so=!1;function wi(){or=!0}function Gs(){so=!0}function Mr(o,s,u){this.marker=o,this.from=s,this.to=u}function Lo(o,s){if(o)for(var u=0;u<o.length;++u){var c=o[u];if(c.marker==s)return c}}function _i(o,s){for(var u,c=0;c<o.length;++c)o[c]!=s&&(u||(u=[])).push(o[c]);return u}function Ks(o,s,u){var c=u&&window.WeakSet&&(u.markedSpans||(u.markedSpans=new WeakSet));c&&o.markedSpans&&c.has(o.markedSpans)?o.markedSpans.push(s):(o.markedSpans=o.markedSpans?o.markedSpans.concat([s]):[s],c&&c.add(o.markedSpans)),s.marker.attachLine(o)}function za(o,s,u){var c;if(o)for(var p=0;p<o.length;++p){var h=o[p],y=h.marker;if(h.from==null||(y.inclusiveLeft?h.from<=s:h.from<s)||h.from==s&&y.type=="bookmark"&&(!u||!h.marker.insertLeft)){var w=h.to==null||(y.inclusiveRight?h.to>=s:h.to>s);(c||(c=[])).push(new Mr(y,h.from,w?null:h.to))}}return c}function Ci(o,s,u){var c;if(o)for(var p=0;p<o.length;++p){var h=o[p],y=h.marker;if(h.to==null||(y.inclusiveRight?h.to>=s:h.to>s)||h.from==s&&y.type=="bookmark"&&(!u||h.marker.insertLeft)){var w=h.from==null||(y.inclusiveLeft?h.from<=s:h.from<s);(c||(c=[])).push(new Mr(y,w?null:h.from-s,h.to==null?null:h.to-s))}}return c}function Qo(o,s){if(s.full)return null;var u=Oo(o,s.from.line)&&Se(o,s.from.line).markedSpans,c=Oo(o,s.to.line)&&Se(o,s.to.line).markedSpans;if(!u&&!c)return null;var p=s.from.ch,h=s.to.ch,y=A(s.from,s.to)==0,w=za(u,p,y),S=Ci(c,h,y),P=s.text.length==1,tt=se(s.text).length+(P?p:0);if(w)for(var et=0;et<w.length;++et){var xt=w[et];if(xt.to==null){var St=Lo(S,xt.marker);St?P&&(xt.to=St.to==null?null:St.to+tt):xt.to=p}}if(S)for(var jt=0;jt<S.length;++jt){var Gt=S[jt];Gt.to!=null&&(Gt.to+=tt),Gt.from==null?Lo(w,Gt.marker)||(Gt.from=tt,P&&(w||(w=[])).push(Gt)):(Gt.from+=tt,P&&(w||(w=[])).push(Gt))}w&&(w=Zi(w)),S&&S!=w&&(S=Zi(S));var Qt=[w];if(!P){var pe,me=s.text.length-2;if(me>0&&w)for(var le=0;le<w.length;++le)w[le].to==null&&(pe||(pe=[])).push(new Mr(w[le].marker,null,null));for(var ke=0;ke<me;++ke)Qt.push(pe);Qt.push(S)}return Qt}function Zi(o){for(var s=0;s<o.length;++s){var u=o[s];u.from!=null&&u.from==u.to&&u.marker.clearWhenEmpty!==!1&&o.splice(s--,1)}return o.length?o:null}function Xe(o,s,u){var c=null;if(o.iter(s.line,u.line+1,function(St){if(St.markedSpans)for(var jt=0;jt<St.markedSpans.length;++jt){var Gt=St.markedSpans[jt].marker;!Gt.readOnly||c&&Ce(c,Gt)!=-1||(c||(c=[])).push(Gt)}}),!c)return null;for(var p=[{from:s,to:u}],h=0;h<c.length;++h)for(var y=c[h],w=y.find(0),S=0;S<p.length;++S){var P=p[S];if(!(A(P.to,w.from)<0||A(P.from,w.to)>0)){var tt=[S,1],et=A(P.from,w.from),xt=A(P.to,w.to);(et<0||!y.inclusiveLeft&&!et)&&tt.push({from:P.from,to:w.from}),(xt>0||!y.inclusiveRight&&!xt)&&tt.push({from:w.to,to:P.to}),p.splice.apply(p,tt),S+=tt.length-3}}return p}function ir(o){var s=o.markedSpans;if(s){for(var u=0;u<s.length;++u)s[u].marker.detachLine(o);o.markedSpans=null}}function Qi(o,s){if(s){for(var u=0;u<s.length;++u)s[u].marker.attachLine(o);o.markedSpans=s}}function Cr(o){return o.inclusiveLeft?-1:0}function Qn(o){return o.inclusiveRight?1:0}function xn(o,s){var u=o.lines.length-s.lines.length;if(u!=0)return u;var c=o.find(),p=s.find(),h=A(c.from,p.from)||Cr(o)-Cr(s);if(h)return-h;var y=A(c.to,p.to)||Qn(o)-Qn(s);return y||s.id-o.id}function Lr(o,s){var u,c=so&&o.markedSpans;if(c)for(var p=void 0,h=0;h<c.length;++h)(p=c[h]).marker.collapsed&&(s?p.from:p.to)==null&&(!u||xn(u,p.marker)<0)&&(u=p.marker);return u}function ti(o){return Lr(o,!0)}function Br(o){return Lr(o,!1)}function ts(o,s){var u,c=so&&o.markedSpans;if(c)for(var p=0;p<c.length;++p){var h=c[p];h.marker.collapsed&&(h.from==null||h.from<s)&&(h.to==null||h.to>s)&&(!u||xn(u,h.marker)<0)&&(u=h.marker)}return u}function Sn(o,s,u,c,p){var h=Se(o,s),y=so&&h.markedSpans;if(y)for(var w=0;w<y.length;++w){var S=y[w];if(S.marker.collapsed){var P=S.marker.find(0),tt=A(P.from,u)||Cr(S.marker)-Cr(p),et=A(P.to,c)||Qn(S.marker)-Qn(p);if(!(tt>=0&&et<=0||tt<=0&&et>=0)&&(tt<=0&&(S.marker.inclusiveRight&&p.inclusiveLeft?A(P.to,u)>=0:A(P.to,u)>0)||tt>=0&&(S.marker.inclusiveRight&&p.inclusiveLeft?A(P.from,c)<=0:A(P.from,c)<0)))return!0}}}function Dr(o){for(var s;s=ti(o);)o=s.find(-1,!0).line;return o}function es(o){for(var s;s=Br(o);)o=s.find(1,!0).line;return o}function xi(o){for(var s,u;s=Br(o);)o=s.find(1,!0).line,(u||(u=[])).push(o);return u}function br(o,s){var u=Se(o,s),c=Dr(u);return u==c?s:rn(c)}function Ur(o,s){if(s>o.lastLine())return s;var u,c=Se(o,s);if(!Wr(o,c))return s;for(;u=Br(c);)c=u.find(1,!0).line;return rn(c)+1}function Wr(o,s){var u=so&&s.markedSpans;if(u){for(var c=void 0,p=0;p<u.length;++p)if((c=u[p]).marker.collapsed&&(c.from==null||!c.marker.widgetNode&&c.from==0&&c.marker.inclusiveLeft&&Nn(o,s,c)))return!0}}function Nn(o,s,u){if(u.to==null){var c=u.marker.find(1,!0);return Nn(o,c.line,Lo(c.line.markedSpans,u.marker))}if(u.marker.inclusiveRight&&u.to==s.text.length)return!0;for(var p=void 0,h=0;h<s.markedSpans.length;++h)if((p=s.markedSpans[h]).marker.collapsed&&!p.marker.widgetNode&&p.from==u.to&&(p.to==null||p.to!=u.from)&&(p.marker.inclusiveLeft||u.marker.inclusiveRight)&&Nn(o,s,p))return!0}function $r(o){for(var s=0,u=(o=Dr(o)).parent,c=0;c<u.lines.length;++c){var p=u.lines[c];if(p==o)break;s+=p.height}for(var h=u.parent;h;h=(u=h).parent)for(var y=0;y<h.children.length;++y){var w=h.children[y];if(w==u)break;s+=w.height}return s}function Si(o){if(o.height==0)return 0;for(var s,u=o.text.length,c=o;s=ti(c);){var p=s.find(0,!0);c=p.from.line,u+=p.from.ch-p.to.ch}for(c=o;s=Br(c);){var h=s.find(0,!0);u-=c.text.length-h.from.ch,u+=(c=h.to.line).text.length-h.to.ch}return u}function Js(o){var s=o.display,u=o.doc;s.maxLine=Se(u,u.first),s.maxLineLength=Si(s.maxLine),s.maxLineChanged=!0,u.iter(function(c){var p=Si(c);p>s.maxLineLength&&(s.maxLineLength=p,s.maxLine=c)})}var qr=function(o,s,u){this.text=o,Qi(this,s),this.height=u?u(this):1};function Ys(o,s,u,c){o.text=s,o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null),o.order!=null&&(o.order=null),ir(o),Qi(o,u);var p=c?c(o):1;p!=o.height&&pr(o,p)}function Ba(o){o.parent=null,ir(o)}qr.prototype.lineNo=function(){return rn(this)},$e(qr);var Ua={},ns={};function ei(o,s){if(!o||/^\s*$/.test(o))return null;var u=s.addModeClass?ns:Ua;return u[o]||(u[o]=o.replace(/\S+/g,"cm-$&"))}function rs(o,s){var u=H("span",null,null,O?"padding-right: .1px":null),c={pre:H("pre",[u],"CodeMirror-line"),content:u,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")};s.measure={};for(var p=0;p<=(s.rest?s.rest.length:0);p++){var h=p?s.rest[p-1]:s.line,y=void 0;c.pos=0,c.addToken=$a,Hr(o.display.measure)&&(y=Ue(h,o.doc.direction))&&(c.addToken=Ul(c.addToken,y)),c.map=[],os(h,c,jr(o,h,s!=o.display.externalMeasured&&rn(h))),h.styleClasses&&(h.styleClasses.bgClass&&(c.bgClass=De(h.styleClasses.bgClass,c.bgClass||"")),h.styleClasses.textClass&&(c.textClass=De(h.styleClasses.textClass,c.textClass||""))),c.map.length==0&&c.map.push(0,0,c.content.appendChild(Yn(o.display.measure))),p==0?(s.measure.map=c.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(c.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(O){var w=c.content.lastChild;(/\bcm-tab\b/.test(w.className)||w.querySelector&&w.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack")}return _t(o,"renderLine",o,s.line,c.pre),c.pre.className&&(c.textClass=De(c.pre.className,c.textClass||"")),c}function Wa(o){var s=Ct("span","•","cm-invalidchar");return s.title="\\u"+o.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function $a(o,s,u,c,p,h,y){if(s){var w,S=o.splitSpaces?qa(s,o.trailingSpace):s,P=o.cm.state.specialChars,tt=!1;if(P.test(s)){w=document.createDocumentFragment();for(var et=0;;){P.lastIndex=et;var xt=P.exec(s),St=xt?xt.index-et:s.length-et;if(St){var jt=document.createTextNode(S.slice(et,et+St));z&&C<9?w.appendChild(Ct("span",[jt])):w.appendChild(jt),o.map.push(o.pos,o.pos+St,jt),o.col+=St,o.pos+=St}if(!xt)break;et+=St+1;var Gt=void 0;if(xt[0]=="	"){var Qt=o.cm.options.tabSize,pe=Qt-o.col%Qt;(Gt=w.appendChild(Ct("span",ve(pe),"cm-tab"))).setAttribute("role","presentation"),Gt.setAttribute("cm-text","	"),o.col+=pe}else xt[0]=="\r"||xt[0]==`
`?((Gt=w.appendChild(Ct("span",xt[0]=="\r"?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",xt[0]),o.col+=1):((Gt=o.cm.options.specialCharPlaceholder(xt[0])).setAttribute("cm-text",xt[0]),z&&C<9?w.appendChild(Ct("span",[Gt])):w.appendChild(Gt),o.col+=1);o.map.push(o.pos,o.pos+1,Gt),o.pos++}}else o.col+=s.length,w=document.createTextNode(S),o.map.push(o.pos,o.pos+s.length,w),z&&C<9&&(tt=!0),o.pos+=s.length;if(o.trailingSpace=S.charCodeAt(s.length-1)==32,u||c||p||tt||h||y){var me=u||"";c&&(me+=c),p&&(me+=p);var le=Ct("span",[w],me,h);if(y)for(var ke in y)y.hasOwnProperty(ke)&&ke!="style"&&ke!="class"&&le.setAttribute(ke,y[ke]);return o.content.appendChild(le)}o.content.appendChild(w)}}function qa(o,s){if(o.length>1&&!/  /.test(o))return o;for(var u=s,c="",p=0;p<o.length;p++){var h=o.charAt(p);h!=" "||!u||p!=o.length-1&&o.charCodeAt(p+1)!=32||(h=" "),c+=h,u=h==" "}return c}function Ul(o,s){return function(u,c,p,h,y,w,S){p=p?p+" cm-force-border":"cm-force-border";for(var P=u.pos,tt=P+c.length;;){for(var et=void 0,xt=0;xt<s.length&&!((et=s[xt]).to>P&&et.from<=P);xt++);if(et.to>=tt)return o(u,c,p,h,y,w,S);o(u,c.slice(0,et.to-P),p,h,null,w,S),h=null,c=c.slice(et.to-P),P=et.to}}}function Do(o,s,u,c){var p=!c&&u.widgetNode;p&&o.map.push(o.pos,o.pos+s,p),!c&&o.cm.display.input.needsContentAttribute&&(p||(p=o.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",u.id)),p&&(o.cm.display.input.setUneditable(p),o.content.appendChild(p)),o.pos+=s,o.trailingSpace=!1}function os(o,s,u){var c=o.markedSpans,p=o.text,h=0;if(c)for(var y,w,S,P,tt,et,xt,St=p.length,jt=0,Gt=1,Qt="",pe=0;;){if(pe==jt){S=P=tt=w="",xt=null,et=null,pe=1/0;for(var me=[],le=void 0,ke=0;ke<c.length;++ke){var Oe=c[ke],Me=Oe.marker;if(Me.type=="bookmark"&&Oe.from==jt&&Me.widgetNode)me.push(Me);else if(Oe.from<=jt&&(Oe.to==null||Oe.to>jt||Me.collapsed&&Oe.to==jt&&Oe.from==jt)){if(Oe.to!=null&&Oe.to!=jt&&pe>Oe.to&&(pe=Oe.to,P=""),Me.className&&(S+=" "+Me.className),Me.css&&(w=(w?w+";":"")+Me.css),Me.startStyle&&Oe.from==jt&&(tt+=" "+Me.startStyle),Me.endStyle&&Oe.to==pe&&(le||(le=[])).push(Me.endStyle,Oe.to),Me.title&&((xt||(xt={})).title=Me.title),Me.attributes)for(var gn in Me.attributes)(xt||(xt={}))[gn]=Me.attributes[gn];Me.collapsed&&(!et||xn(et.marker,Me)<0)&&(et=Oe)}else Oe.from>jt&&pe>Oe.from&&(pe=Oe.from)}if(le)for(var vn=0;vn<le.length;vn+=2)le[vn+1]==pe&&(P+=" "+le[vn]);if(!et||et.from==jt)for(var xr=0;xr<me.length;++xr)Do(s,0,me[xr]);if(et&&(et.from||0)==jt){if(Do(s,(et.to==null?St+1:et.to)-jt,et.marker,et.from==null),et.to==null)return;et.to==jt&&(et=!1)}}if(jt>=St)break;for(var Cn=Math.min(St,pe);;){if(Qt){var dr=jt+Qt.length;if(!et){var Sr=dr>Cn?Qt.slice(0,Cn-jt):Qt;s.addToken(s,Sr,y?y+S:S,tt,jt+Sr.length==pe?P:"",w,xt)}if(dr>=Cn){Qt=Qt.slice(Cn-jt),jt=Cn;break}jt=dr,tt=""}Qt=p.slice(h,h=u[Gt++]),y=ei(u[Gt++],s.cm.options)}}else for(var Pn=1;Pn<u.length;Pn+=2)s.addToken(s,p.slice(h,h=u[Pn]),ei(u[Pn+1],s.cm.options))}function is(o,s,u){this.line=s,this.rest=xi(s),this.size=this.rest?rn(se(this.rest))-u+1:1,this.node=this.text=null,this.hidden=Wr(o,s)}function ho(o,s,u){for(var c,p=[],h=s;h<u;h=c){var y=new is(o.doc,Se(o.doc,h),h);c=h+y.size,p.push(y)}return p}var Nr=null;function Oi(o){Nr?Nr.ops.push(o):o.ownsGroup=Nr={ops:[o],delayedCallbacks:[]}}function ss(o){var s=o.delayedCallbacks,u=0;do{for(;u<s.length;u++)s[u].call(null);for(var c=0;c<o.ops.length;c++){var p=o.ops[c];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(u<s.length)}function as(o,s){var u=o.ownsGroup;if(u)try{ss(u)}finally{Nr=null,s(u)}}var No=null;function On(o,s){var u=W(o,s);if(u.length){var c,p=Array.prototype.slice.call(arguments,2);Nr?c=Nr.delayedCallbacks:No?c=No:(c=No=[],setTimeout(Io,0));for(var h=function(w){c.push(function(){return u[w].apply(null,p)})},y=0;y<u.length;++y)h(y)}}function Io(){var o=No;No=null;for(var s=0;s<o.length;++s)o[s]()}function Xs(o,s,u,c){for(var p=0;p<s.changes.length;p++){var h=s.changes[p];h=="text"?Ga(o,s):h=="gutter"?ri(o,s,u,c):h=="class"?ls(o,s):h=="widget"&&Ei(o,s,c)}s.changes=null}function ni(o){return o.node==o.text&&(o.node=Ct("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),z&&C<8&&(o.node.style.zIndex=2)),o.node}function Ti(o,s){var u=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(u&&(u+=" CodeMirror-linebackground"),s.background)u?s.background.className=u:(s.background.parentNode.removeChild(s.background),s.background=null);else if(u){var c=ni(s);s.background=c.insertBefore(Ct("div",null,u),c.firstChild),o.display.input.setUneditable(s.background)}}function Zs(o,s){var u=o.display.externalMeasured;return u&&u.line==s.line?(o.display.externalMeasured=null,s.measure=u.measure,u.built):rs(o,s)}function Ga(o,s){var u=s.text.className,c=Zs(o,s);s.text==s.node&&(s.node=c.pre),s.text.parentNode.replaceChild(c.pre,s.text),s.text=c.pre,c.bgClass!=s.bgClass||c.textClass!=s.textClass?(s.bgClass=c.bgClass,s.textClass=c.textClass,ls(o,s)):u&&(s.text.className=u)}function ls(o,s){Ti(o,s),s.line.wrapClass?ni(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var u=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=u||""}function ri(o,s,u,c){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var p=ni(s);s.gutterBackground=Ct("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),o.display.input.setUneditable(s.gutterBackground),p.insertBefore(s.gutterBackground,s.text)}var h=s.line.gutterMarkers;if(o.options.lineNumbers||h){var y=ni(s),w=s.gutter=Ct("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(w.setAttribute("aria-hidden","true"),o.display.input.setUneditable(w),y.insertBefore(w,s.text),s.line.gutterClass&&(w.className+=" "+s.line.gutterClass),!o.options.lineNumbers||h&&h["CodeMirror-linenumbers"]||(s.lineNumber=w.appendChild(Ct("div",Xo(o.options,u),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),h)for(var S=0;S<o.display.gutterSpecs.length;++S){var P=o.display.gutterSpecs[S].className,tt=h.hasOwnProperty(P)&&h[P];tt&&w.appendChild(Ct("div",[tt],"CodeMirror-gutter-elt","left: "+c.gutterLeft[P]+"px; width: "+c.gutterWidth[P]+"px"))}}}function Ei(o,s,u){s.alignable&&(s.alignable=null);for(var c=R("CodeMirror-linewidget"),p=s.node.firstChild,h=void 0;p;p=h)h=p.nextSibling,c.test(p.className)&&s.node.removeChild(p);Ka(o,s,u)}function Qs(o,s,u,c){var p=Zs(o,s);return s.text=s.node=p.pre,p.bgClass&&(s.bgClass=p.bgClass),p.textClass&&(s.textClass=p.textClass),ls(o,s),ri(o,s,u,c),Ka(o,s,c),s.node}function Ka(o,s,u){if(cs(o,s.line,s,u,!0),s.rest)for(var c=0;c<s.rest.length;c++)cs(o,s.rest[c],s,u,!1)}function cs(o,s,u,c,p){if(s.widgets)for(var h=ni(u),y=0,w=s.widgets;y<w.length;++y){var S=w[y],P=Ct("div",[S.node],"CodeMirror-linewidget"+(S.className?" "+S.className:""));S.handleMouseEvents||P.setAttribute("cm-ignore-events","true"),Wl(S,P,u,c),o.display.input.setUneditable(P),p&&S.above?h.insertBefore(P,u.gutter||u.text):h.appendChild(P),On(S,"redraw")}}function Wl(o,s,u,c){if(o.noHScroll){(u.alignable||(u.alignable=[])).push(s);var p=c.wrapperWidth;s.style.left=c.fixedPos+"px",o.coverGutter||(p-=c.gutterTotalWidth,s.style.paddingLeft=c.gutterTotalWidth+"px"),s.style.width=p+"px"}o.coverGutter&&(s.style.zIndex=5,s.style.position="relative",o.noHScroll||(s.style.marginLeft=-c.gutterTotalWidth+"px"))}function x(o){if(o.height!=null)return o.height;var s=o.doc.cm;if(!s)return 0;if(!Vt(document.body,o.node)){var u="position: relative;";o.coverGutter&&(u+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),o.noHScroll&&(u+="width: "+s.display.wrapper.clientWidth+"px;"),st(s.display.measure,Ct("div",[o.node],null,u))}return o.height=o.node.parentNode.offsetHeight}function I(o,s){for(var u=Rr(s);u!=o.wrapper;u=u.parentNode)if(!u||u.nodeType==1&&u.getAttribute("cm-ignore-events")=="true"||u.parentNode==o.sizer&&u!=o.mover)return!0}function rt(o){return o.lineSpace.offsetTop}function ct(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function Et(o){if(o.cachedPaddingH)return o.cachedPaddingH;var s=st(o.measure,Ct("pre","x","CodeMirror-line-like")),u=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,c={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight)};return isNaN(c.left)||isNaN(c.right)||(o.cachedPaddingH=c),c}function bt(o){return fe-o.display.nativeBarWidth}function Ut(o){return o.display.scroller.clientWidth-bt(o)-o.display.barWidth}function ee(o){return o.display.scroller.clientHeight-bt(o)-o.display.barHeight}function Re(o,s,u){var c=o.options.lineWrapping,p=c&&Ut(o);if(!s.measure.heights||c&&s.measure.width!=p){var h=s.measure.heights=[];if(c){s.measure.width=p;for(var y=s.text.firstChild.getClientRects(),w=0;w<y.length-1;w++){var S=y[w],P=y[w+1];Math.abs(S.bottom-P.bottom)>2&&h.push((S.bottom+P.top)/2-u.top)}}h.push(u.bottom-u.top)}}function Ke(o,s,u){if(o.line==s)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var c=0;c<o.rest.length;c++)if(o.rest[c]==s)return{map:o.measure.maps[c],cache:o.measure.caches[c]};for(var p=0;p<o.rest.length;p++)if(rn(o.rest[p])>u)return{map:o.measure.maps[p],cache:o.measure.caches[p],before:!0}}}function yn(o,s){var u=rn(s=Dr(s)),c=o.display.externalMeasured=new is(o.doc,s,u);c.lineN=u;var p=c.built=rs(o,c);return c.text=p.pre,st(o.display.lineMeasure,p.pre),c}function Gr(o,s,u,c){return Kr(o,Fo(o,s),u,c)}function us(o,s){if(s>=o.display.viewFrom&&s<o.display.viewTo)return o.display.view[Pi(o,s)];var u=o.display.externalMeasured;return u&&s>=u.lineN&&s<u.lineN+u.size?u:void 0}function Fo(o,s){var u=rn(s),c=us(o,u);c&&!c.text?c=null:c&&c.changes&&(Xs(o,c,u,Yl(o)),o.curOp.forceUpdate=!0),c||(c=yn(o,s));var p=Ke(c,s,u);return{line:s,view:c,rect:null,map:p.map,cache:p.cache,before:p.before,hasHeights:!1}}function Kr(o,s,u,c,p){s.before&&(u=-1);var h,y=u+(c||"");return s.cache.hasOwnProperty(y)?h=s.cache[y]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(Re(o,s.view,s.rect),s.hasHeights=!0),(h=qp(o,s,u,c)).bogus||(s.cache[y]=h)),{left:h.left,right:h.right,top:p?h.rtop:h.top,bottom:p?h.rbottom:h.bottom}}var Ro,nu={left:0,right:0,top:0,bottom:0};function ta(o,s,u){for(var c,p,h,y,w,S,P=0;P<o.length;P+=3)if(w=o[P],S=o[P+1],s<w?(p=0,h=1,y="left"):s<S?h=(p=s-w)+1:(P==o.length-3||s==S&&o[P+3]>s)&&(p=(h=S-w)-1,s>=S&&(y="right")),p!=null){if(c=o[P+2],w==S&&u==(c.insertLeft?"left":"right")&&(y=u),u=="left"&&p==0)for(;P&&o[P-2]==o[P-3]&&o[P-1].insertLeft;)c=o[(P-=3)+2],y="left";if(u=="right"&&p==S-w)for(;P<o.length-3&&o[P+3]==o[P+4]&&!o[P+5].insertLeft;)c=o[(P+=3)+2],y="right";break}return{node:c,start:p,end:h,collapse:y,coverStart:w,coverEnd:S}}function ru(o,s){var u=nu;if(s=="left")for(var c=0;c<o.length&&(u=o[c]).left==u.right;c++);else for(var p=o.length-1;p>=0&&(u=o[p]).left==u.right;p--);return u}function qp(o,s,u,c){var p,h=ta(s.map,u,c),y=h.node,w=h.start,S=h.end,P=h.collapse;if(y.nodeType==3){for(var tt=0;tt<4;tt++){for(;w&&B(s.line.text.charAt(h.coverStart+w));)--w;for(;h.coverStart+S<h.coverEnd&&B(s.line.text.charAt(h.coverStart+S));)++S;if((p=z&&C<9&&w==0&&S==h.coverEnd-h.coverStart?y.parentNode.getBoundingClientRect():ru(X(y,w,S).getClientRects(),c)).left||p.right||w==0)break;S=w,w-=1,P="right"}z&&C<11&&(p=Gp(o.display.measure,p))}else{var et;w>0&&(P=c="right"),p=o.options.lineWrapping&&(et=y.getClientRects()).length>1?et[c=="right"?et.length-1:0]:y.getBoundingClientRect()}if(z&&C<9&&!w&&(!p||!p.left&&!p.right)){var xt=y.parentNode.getClientRects()[0];p=xt?{left:xt.left,right:xt.left+oi(o.display),top:xt.top,bottom:xt.bottom}:nu}for(var St=p.top-s.rect.top,jt=p.bottom-s.rect.top,Gt=(St+jt)/2,Qt=s.view.measure.heights,pe=0;pe<Qt.length-1&&!(Gt<Qt[pe]);pe++);var me=pe?Qt[pe-1]:0,le=Qt[pe],ke={left:(P=="right"?p.right:p.left)-s.rect.left,right:(P=="left"?p.left:p.right)-s.rect.left,top:me,bottom:le};return p.left||p.right||(ke.bogus=!0),o.options.singleCursorHeightPerLine||(ke.rtop=St,ke.rbottom=jt),ke}function Gp(o,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!po(o))return s;var u=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*u,right:s.right*u,top:s.top*c,bottom:s.bottom*c}}function ou(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var s=0;s<o.rest.length;s++)o.measure.caches[s]={}}function Ja(o){o.display.externalMeasure=null,Tt(o.display.lineMeasure);for(var s=0;s<o.display.view.length;s++)ou(o.display.view[s])}function ps(o){Ja(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function $l(){return D&&ae?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function iu(){return D&&ae?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ya(o){var s=Dr(o).widgets,u=0;if(s)for(var c=0;c<s.length;++c)s[c].above&&(u+=x(s[c]));return u}function Xa(o,s,u,c,p){if(!p){var h=Ya(s);u.top+=h,u.bottom+=h}if(c=="line")return u;c||(c="local");var y=$r(s);if(c=="local"?y+=rt(o.display):y-=o.display.viewOffset,c=="page"||c=="window"){var w=o.display.lineSpace.getBoundingClientRect();y+=w.top+(c=="window"?0:iu());var S=w.left+(c=="window"?0:$l());u.left+=S,u.right+=S}return u.top+=y,u.bottom+=y,u}function ql(o,s,u){if(u=="div")return s;var c=s.left,p=s.top;if(u=="page")c-=$l(),p-=iu();else if(u=="local"||!u){var h=o.display.sizer.getBoundingClientRect();c+=h.left,p+=h.top}var y=o.display.lineSpace.getBoundingClientRect();return{left:c-y.left,top:p-y.top}}function Za(o,s,u,c,p){return c||(c=Se(o.doc,s.line)),Xa(o,c,Gr(o,c,s.ch,p),u)}function Ir(o,s,u,c,p,h){function y(jt,Gt){var Qt=Kr(o,p,jt,Gt?"right":"left",h);return Gt?Qt.left=Qt.right:Qt.right=Qt.left,Xa(o,c,Qt,u)}c=c||Se(o.doc,s.line),p||(p=Fo(o,c));var w=Ue(c,o.doc.direction),S=s.ch,P=s.sticky;if(S>=c.text.length?(S=c.text.length,P="before"):S<=0&&(S=0,P="after"),!w)return y(P=="before"?S-1:S,P=="before");function tt(jt,Gt,Qt){return y(Qt?jt-1:jt,w[Gt].level==1!=Qt)}var et=we(w,S,P),xt=ne,St=tt(S,et,P=="before");return xt!=null&&(St.other=tt(S,xt,P!="before")),St}function Qa(o,s){var u=0;s=de(o.doc,s),o.options.lineWrapping||(u=oi(o.display)*s.ch);var c=Se(o.doc,s.line),p=$r(c)+rt(o.display);return{left:u,right:u,top:p,bottom:p+c.height}}function Gl(o,s,u,c,p){var h=Xt(o,s,u);return h.xRel=p,c&&(h.outside=c),h}function Kl(o,s,u){var c=o.doc;if((u+=o.display.viewOffset)<0)return Gl(c.first,0,null,-1,-1);var p=Wn(c,u),h=c.first+c.size-1;if(p>h)return Gl(c.first+c.size-1,Se(c,h).text.length,null,1,1);s<0&&(s=0);for(var y=Se(c,p);;){var w=Jl(o,y,p,s,u),S=ts(y,w.ch+(w.xRel>0||w.outside>0?1:0));if(!S)return w;var P=S.find(1);if(P.line==p)return P;y=Se(c,p=P.line)}}function su(o,s,u,c){c-=Ya(s);var p=s.text.length,h=At(function(y){return Kr(o,u,y-1).bottom<=c},p,0);return{begin:h,end:p=At(function(y){return Kr(o,u,y).top>c},h,p)}}function au(o,s,u,c){return u||(u=Fo(o,s)),su(o,s,u,Xa(o,s,Kr(o,u,c),"line").top)}function fs(o,s,u,c){return!(o.bottom<=u)&&(o.top>u||(c?o.left:o.right)>s)}function Jl(o,s,u,c,p){p-=$r(s);var h=Fo(o,s),y=Ya(s),w=0,S=s.text.length,P=!0,tt=Ue(s,o.doc.direction);if(tt){var et=(o.options.lineWrapping?hs:ds)(o,s,u,h,tt,c,p);w=(P=et.level!=1)?et.from:et.to-1,S=P?et.to:et.from-1}var xt,St,jt=null,Gt=null,Qt=At(function(Oe){var Me=Kr(o,h,Oe);return Me.top+=y,Me.bottom+=y,!!fs(Me,c,p,!1)&&(Me.top<=p&&Me.left<=c&&(jt=Oe,Gt=Me),!0)},w,S),pe=!1;if(Gt){var me=c-Gt.left<Gt.right-c,le=me==P;Qt=jt+(le?0:1),St=le?"after":"before",xt=me?Gt.left:Gt.right}else{P||Qt!=S&&Qt!=w||Qt++,St=Qt==0?"after":Qt==s.text.length?"before":Kr(o,h,Qt-(P?1:0)).bottom+y<=p==P?"after":"before";var ke=Ir(o,Xt(u,Qt,St),"line",s,h);xt=ke.left,pe=p<ke.top?-1:p>=ke.bottom?1:0}return Gl(u,Qt=vt(s.text,Qt,1),St,pe,c-xt)}function ds(o,s,u,c,p,h,y){var w=At(function(et){var xt=p[et],St=xt.level!=1;return fs(Ir(o,Xt(u,St?xt.to:xt.from,St?"before":"after"),"line",s,c),h,y,!0)},0,p.length-1),S=p[w];if(w>0){var P=S.level!=1,tt=Ir(o,Xt(u,P?S.from:S.to,P?"after":"before"),"line",s,c);fs(tt,h,y,!0)&&tt.top>y&&(S=p[w-1])}return S}function hs(o,s,u,c,p,h,y){var w=su(o,s,c,y),S=w.begin,P=w.end;/\s/.test(s.text.charAt(P-1))&&P--;for(var tt=null,et=null,xt=0;xt<p.length;xt++){var St=p[xt];if(!(St.from>=P||St.to<=S)){var jt=Kr(o,c,St.level!=1?Math.min(P,St.to)-1:Math.max(S,St.from)).right,Gt=jt<h?h-jt+1e9:jt-h;(!tt||et>Gt)&&(tt=St,et=Gt)}}return tt||(tt=p[p.length-1]),tt.from<S&&(tt={from:S,to:tt.to,level:tt.level}),tt.to>P&&(tt={from:tt.from,to:P,level:tt.level}),tt}function go(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(Ro==null){Ro=Ct("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)Ro.appendChild(document.createTextNode("x")),Ro.appendChild(Ct("br"));Ro.appendChild(document.createTextNode("x"))}st(o.measure,Ro);var u=Ro.offsetHeight/50;return u>3&&(o.cachedTextHeight=u),Tt(o.measure),u||1}function oi(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var s=Ct("span","xxxxxxxxxx"),u=Ct("pre",[s],"CodeMirror-line-like");st(o.measure,u);var c=s.getBoundingClientRect(),p=(c.right-c.left)/10;return p>2&&(o.cachedCharWidth=p),p||10}function Yl(o){for(var s=o.display,u={},c={},p=s.gutters.clientLeft,h=s.gutters.firstChild,y=0;h;h=h.nextSibling,++y){var w=o.display.gutterSpecs[y].className;u[w]=h.offsetLeft+h.clientLeft+p,c[w]=h.clientWidth}return{fixedPos:Xl(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:u,gutterWidth:c,wrapperWidth:s.wrapper.clientWidth}}function Xl(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function lu(o){var s=go(o.display),u=o.options.lineWrapping,c=u&&Math.max(5,o.display.scroller.clientWidth/oi(o.display)-3);return function(p){if(Wr(o.doc,p))return 0;var h=0;if(p.widgets)for(var y=0;y<p.widgets.length;y++)p.widgets[y].height&&(h+=p.widgets[y].height);return u?h+(Math.ceil(p.text.length/c)||1)*s:h+s}}function Zl(o){var s=o.doc,u=lu(o);s.iter(function(c){var p=u(c);p!=c.height&&pr(c,p)})}function ki(o,s,u,c){var p=o.display;if(!u&&Rr(s).getAttribute("cm-not-content")=="true")return null;var h,y,w=p.lineSpace.getBoundingClientRect();try{h=s.clientX-w.left,y=s.clientY-w.top}catch{return null}var S,P=Kl(o,h,y);if(c&&P.xRel>0&&(S=Se(o.doc,P.line).text).length==P.ch){var tt=Ee(S,S.length,o.options.tabSize)-S.length;P=Xt(P.line,Math.max(0,Math.round((h-Et(o.display).left)/oi(o.display))-tt))}return P}function Pi(o,s){if(s>=o.display.viewTo||(s-=o.display.viewFrom)<0)return null;for(var u=o.display.view,c=0;c<u.length;c++)if((s-=u[c].size)<0)return c}function sr(o,s,u,c){s==null&&(s=o.doc.first),u==null&&(u=o.doc.first+o.doc.size),c||(c=0);var p=o.display;if(c&&u<p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>s)&&(p.updateLineNumbers=s),o.curOp.viewChanged=!0,s>=p.viewTo)so&&br(o.doc,s)<p.viewTo&&ii(o);else if(u<=p.viewFrom)so&&Ur(o.doc,u+c)>p.viewFrom?ii(o):(p.viewFrom+=c,p.viewTo+=c);else if(s<=p.viewFrom&&u>=p.viewTo)ii(o);else if(s<=p.viewFrom){var h=tl(o,u,u+c,1);h?(p.view=p.view.slice(h.index),p.viewFrom=h.lineN,p.viewTo+=c):ii(o)}else if(u>=p.viewTo){var y=tl(o,s,s,-1);y?(p.view=p.view.slice(0,y.index),p.viewTo=y.lineN):ii(o)}else{var w=tl(o,s,s,-1),S=tl(o,u,u+c,1);w&&S?(p.view=p.view.slice(0,w.index).concat(ho(o,w.lineN,S.lineN)).concat(p.view.slice(S.index)),p.viewTo+=c):ii(o)}var P=p.externalMeasured;P&&(u<P.lineN?P.lineN+=c:s<P.lineN+P.size&&(p.externalMeasured=null))}function vo(o,s,u){o.curOp.viewChanged=!0;var c=o.display,p=o.display.externalMeasured;if(p&&s>=p.lineN&&s<p.lineN+p.size&&(c.externalMeasured=null),!(s<c.viewFrom||s>=c.viewTo)){var h=c.view[Pi(o,s)];if(h.node!=null){var y=h.changes||(h.changes=[]);Ce(y,u)==-1&&y.push(u)}}}function ii(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function tl(o,s,u,c){var p,h=Pi(o,s),y=o.display.view;if(!so||u==o.doc.first+o.doc.size)return{index:h,lineN:u};for(var w=o.display.viewFrom,S=0;S<h;S++)w+=y[S].size;if(w!=s){if(c>0){if(h==y.length-1)return null;p=w+y[h].size-s,h++}else p=w-s;s+=p,u+=p}for(;br(o.doc,u)!=u;){if(h==(c<0?0:y.length-1))return null;u+=c*y[h-(c<0?1:0)].size,h+=c}return{index:h,lineN:u}}function Kp(o,s,u){var c=o.display;c.view.length==0||s>=c.viewTo||u<=c.viewFrom?(c.view=ho(o,s,u),c.viewFrom=s):(c.viewFrom>s?c.view=ho(o,s,c.viewFrom).concat(c.view):c.viewFrom<s&&(c.view=c.view.slice(Pi(o,s))),c.viewFrom=s,c.viewTo<u?c.view=c.view.concat(ho(o,c.viewTo,u)):c.viewTo>u&&(c.view=c.view.slice(0,Pi(o,u)))),c.viewTo=u}function cu(o){for(var s=o.display.view,u=0,c=0;c<s.length;c++){var p=s[c];p.hidden||p.node&&!p.changes||++u}return u}function ea(o){o.display.input.showSelection(o.display.input.prepareSelection())}function na(o,s){s===void 0&&(s=!0);var u=o.doc,c={},p=c.cursors=document.createDocumentFragment(),h=c.selection=document.createDocumentFragment(),y=o.options.$customCursor;y&&(s=!0);for(var w=0;w<u.sel.ranges.length;w++)if(s||w!=u.sel.primIndex){var S=u.sel.ranges[w];if(!(S.from().line>=o.display.viewTo||S.to().line<o.display.viewFrom)){var P=S.empty();if(y){var tt=y(o,S);tt&&ra(o,tt,p)}else(P||o.options.showCursorWhenSelecting)&&ra(o,S.head,p);P||Jp(o,S,h)}}return c}function ra(o,s,u){var c=Ir(o,s,"div",null,null,!o.options.singleCursorHeightPerLine),p=u.appendChild(Ct("div"," ","CodeMirror-cursor"));if(p.style.left=c.left+"px",p.style.top=c.top+"px",p.style.height=Math.max(0,c.bottom-c.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)){var h=Za(o,s,"div",null,null),y=h.right-h.left;p.style.width=(y>0?y:o.defaultCharWidth())+"px"}if(c.other){var w=u.appendChild(Ct("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));w.style.display="",w.style.left=c.other.left+"px",w.style.top=c.other.top+"px",w.style.height=.85*(c.other.bottom-c.other.top)+"px"}}function oa(o,s){return o.top-s.top||o.left-s.left}function Jp(o,s,u){var c=o.display,p=o.doc,h=document.createDocumentFragment(),y=Et(o.display),w=y.left,S=Math.max(c.sizerWidth,Ut(o)-c.sizer.offsetLeft)-y.right,P=p.direction=="ltr";function tt(le,ke,Oe,Me){ke<0&&(ke=0),ke=Math.round(ke),Me=Math.round(Me),h.appendChild(Ct("div",null,"CodeMirror-selected","position: absolute; left: "+le+`px;
                             top: `+ke+"px; width: "+(Oe??S-le)+`px;
                             height: `+(Me-ke)+"px"))}function et(le,ke,Oe){var Me,gn,vn=Se(p,le),xr=vn.text.length;function Cn(Pn,Fn){return Za(o,Xt(le,Pn),"div",vn,Fn)}function dr(Pn,Fn,_r){var qn=au(o,vn,null,Pn),Rn=Fn=="ltr"==(_r=="after")?"left":"right";return Cn(_r=="after"?qn.begin:qn.end-(/\s/.test(vn.text.charAt(qn.end-1))?2:1),Rn)[Rn]}var Sr=Ue(vn,p.direction);return Pt(Sr,ke||0,Oe??xr,function(Pn,Fn,_r,qn){var Rn=_r=="ltr",Vn=Cn(Pn,Rn?"left":"right"),Or=Cn(Fn-1,Rn?"right":"left"),ui=ke==null&&Pn==0,wo=Oe==null&&Fn==xr,hr=qn==0,An=!Sr||qn==Sr.length-1;if(Or.top-Vn.top<=3){var Dc=(P?wo:ui)&&An,$o=(P?ui:wo)&&hr?w:(Rn?Vn:Or).left,zi=Dc?S:(Rn?Or:Vn).right;tt($o,Vn.top,zi-$o,Vn.bottom)}else{var Bi,Kn,Ls,Nc;Rn?(Bi=P&&ui&&hr?w:Vn.left,Kn=P?S:dr(Pn,_r,"before"),Ls=P?w:dr(Fn,_r,"after"),Nc=P&&wo&&An?S:Or.right):(Bi=P?dr(Pn,_r,"before"):w,Kn=!P&&ui&&hr?S:Vn.right,Ls=!P&&wo&&An?w:Or.left,Nc=P?dr(Fn,_r,"after"):S),tt(Bi,Vn.top,Kn-Bi,Vn.bottom),Vn.bottom<Or.top&&tt(w,Vn.bottom,null,Or.top),tt(Ls,Or.top,Nc-Ls,Or.bottom)}(!Me||oa(Vn,Me)<0)&&(Me=Vn),oa(Or,Me)<0&&(Me=Or),(!gn||oa(Vn,gn)<0)&&(gn=Vn),oa(Or,gn)<0&&(gn=Or)}),{start:Me,end:gn}}var xt=s.from(),St=s.to();if(xt.line==St.line)et(xt.line,xt.ch,St.ch);else{var jt=Se(p,xt.line),Gt=Se(p,St.line),Qt=Dr(jt)==Dr(Gt),pe=et(xt.line,xt.ch,Qt?jt.text.length+1:null).end,me=et(St.line,Qt?0:null,St.ch).start;Qt&&(pe.top<me.top-2?(tt(pe.right,pe.top,null,pe.bottom),tt(w,me.top,me.left,me.bottom)):tt(pe.right,pe.top,me.left-pe.right,pe.bottom)),pe.bottom<me.top&&tt(w,pe.bottom,null,me.top)}u.appendChild(h)}function gs(o){if(o.state.focused){var s=o.display;clearInterval(s.blinker);var u=!0;s.cursorDiv.style.visibility="",o.options.cursorBlinkRate>0?s.blinker=setInterval(function(){o.hasFocus()||Ai(o),s.cursorDiv.style.visibility=(u=!u)?"":"hidden"},o.options.cursorBlinkRate):o.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function uu(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||tc(o))}function Ql(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&Ai(o))},100)}function tc(o,s){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||(_t(o,"focus",o,s),o.state.focused=!0,te(o.display.wrapper,"CodeMirror-focused"),o.curOp||o.display.selForContextMenu==o.doc.sel||(o.display.input.reset(),O&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),gs(o))}function Ai(o,s){o.state.delayingBlurEvent||(o.state.focused&&(_t(o,"blur",o,s),o.state.focused=!1,it(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function el(o){for(var s=o.display,u=s.lineDiv.offsetTop,c=Math.max(0,s.scroller.getBoundingClientRect().top),p=s.lineDiv.getBoundingClientRect().top,h=0,y=0;y<s.view.length;y++){var w=s.view[y],S=o.options.lineWrapping,P=void 0,tt=0;if(!w.hidden){if(p+=w.line.height,z&&C<8){var et=w.node.offsetTop+w.node.offsetHeight;P=et-u,u=et}else{var xt=w.node.getBoundingClientRect();P=xt.bottom-xt.top,!S&&w.text.firstChild&&(tt=w.text.firstChild.getBoundingClientRect().right-xt.left-1)}var St=w.line.height-P;if((St>.005||St<-.005)&&(p<c&&(h-=St),pr(w.line,P),ia(w.line),w.rest))for(var jt=0;jt<w.rest.length;jt++)ia(w.rest[jt]);if(tt>o.display.sizerWidth){var Gt=Math.ceil(tt/oi(o.display));Gt>o.display.maxLineLength&&(o.display.maxLineLength=Gt,o.display.maxLine=w.line,o.display.maxLineChanged=!0)}}}Math.abs(h)>2&&(s.scroller.scrollTop+=h)}function ia(o){if(o.widgets)for(var s=0;s<o.widgets.length;++s){var u=o.widgets[s],c=u.node.parentNode;c&&(u.height=c.offsetHeight)}}function sa(o,s,u){var c=u&&u.top!=null?Math.max(0,u.top):o.scroller.scrollTop;c=Math.floor(c-rt(o));var p=u&&u.bottom!=null?u.bottom:c+o.wrapper.clientHeight,h=Wn(s,c),y=Wn(s,p);if(u&&u.ensure){var w=u.ensure.from.line,S=u.ensure.to.line;w<h?(h=w,y=Wn(s,$r(Se(s,w))+o.wrapper.clientHeight)):Math.min(S,s.lastLine())>=y&&(h=Wn(s,$r(Se(s,S))-o.wrapper.clientHeight),y=S)}return{from:h,to:Math.max(y,h+1)}}function Yp(o,s){if(!kt(o,"scrollCursorIntoView")){var u=o.display,c=u.sizer.getBoundingClientRect(),p=null;if(s.top+c.top<0?p=!0:s.bottom+c.top>(window.innerHeight||document.documentElement.clientHeight)&&(p=!1),p!=null&&!Rt){var h=Ct("div","​",null,`position: absolute;
                         top: `+(s.top-u.viewOffset-rt(o.display))+`px;
                         height: `+(s.bottom-s.top+bt(o)+u.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");o.display.lineSpace.appendChild(h),h.scrollIntoView(p),o.display.lineSpace.removeChild(h)}}}function ec(o,s,u,c){var p;c==null&&(c=0),o.options.lineWrapping||s!=u||(u=s.sticky=="before"?Xt(s.line,s.ch+1,"before"):s,s=s.ch?Xt(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var h=0;h<5;h++){var y=!1,w=Ir(o,s),S=u&&u!=s?Ir(o,u):w,P=nc(o,p={left:Math.min(w.left,S.left),top:Math.min(w.top,S.top)-c,right:Math.max(w.left,S.left),bottom:Math.max(w.bottom,S.bottom)+c}),tt=o.doc.scrollTop,et=o.doc.scrollLeft;if(P.scrollTop!=null&&(la(o,P.scrollTop),Math.abs(o.doc.scrollTop-tt)>1&&(y=!0)),P.scrollLeft!=null&&(Vo(o,P.scrollLeft),Math.abs(o.doc.scrollLeft-et)>1&&(y=!0)),!y)break}return p}function Xp(o,s){var u=nc(o,s);u.scrollTop!=null&&la(o,u.scrollTop),u.scrollLeft!=null&&Vo(o,u.scrollLeft)}function nc(o,s){var u=o.display,c=go(o.display);s.top<0&&(s.top=0);var p=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:u.scroller.scrollTop,h=ee(o),y={};s.bottom-s.top>h&&(s.bottom=s.top+h);var w=o.doc.height+ct(u),S=s.top<c,P=s.bottom>w-c;if(s.top<p)y.scrollTop=S?0:s.top;else if(s.bottom>p+h){var tt=Math.min(s.top,(P?w:s.bottom)-h);tt!=p&&(y.scrollTop=tt)}var et=o.options.fixedGutter?0:u.gutters.offsetWidth,xt=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:u.scroller.scrollLeft-et,St=Ut(o)-u.gutters.offsetWidth,jt=s.right-s.left>St;return jt&&(s.right=s.left+St),s.left<10?y.scrollLeft=0:s.left<xt?y.scrollLeft=Math.max(0,s.left+et-(jt?0:10)):s.right>St+xt-3&&(y.scrollLeft=s.right+(jt?0:10)-St),y}function nl(o,s){s!=null&&(ji(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+s)}function vs(o){ji(o);var s=o.getCursor();o.curOp.scrollToPos={from:s,to:s,margin:o.options.cursorScrollMargin}}function aa(o,s,u){s==null&&u==null||ji(o),s!=null&&(o.curOp.scrollLeft=s),u!=null&&(o.curOp.scrollTop=u)}function Zp(o,s){ji(o),o.curOp.scrollToPos=s}function ji(o){var s=o.curOp.scrollToPos;s&&(o.curOp.scrollToPos=null,pu(o,Qa(o,s.from),Qa(o,s.to),s.margin))}function pu(o,s,u,c){var p=nc(o,{left:Math.min(s.left,u.left),top:Math.min(s.top,u.top)-c,right:Math.max(s.right,u.right),bottom:Math.max(s.bottom,u.bottom)+c});aa(o,p.scrollLeft,p.scrollTop)}function la(o,s){Math.abs(o.doc.scrollTop-s)<2||(U||oc(o,{top:s}),ca(o,s,!0),U&&oc(o),ys(o,100))}function ca(o,s,u){s=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,s)),(o.display.scroller.scrollTop!=s||u)&&(o.doc.scrollTop=s,o.display.scrollbars.setScrollTop(s),o.display.scroller.scrollTop!=s&&(o.display.scroller.scrollTop=s))}function Vo(o,s,u,c){s=Math.max(0,Math.min(s,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),(u?s==o.doc.scrollLeft:Math.abs(o.doc.scrollLeft-s)<2)&&!c||(o.doc.scrollLeft=s,da(o),o.display.scroller.scrollLeft!=s&&(o.display.scroller.scrollLeft=s),o.display.scrollbars.setScrollLeft(s))}function ua(o){var s=o.display,u=s.gutters.offsetWidth,c=Math.round(o.doc.height+ct(o.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:o.options.fixedGutter?u:0,docHeight:c,scrollHeight:c+bt(o)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:u}}var Mi=function(o,s,u){this.cm=u;var c=this.vert=Ct("div",[Ct("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=Ct("div",[Ct("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=p.tabIndex=-1,o(c),o(p),oe(c,"scroll",function(){c.clientHeight&&s(c.scrollTop,"vertical")}),oe(p,"scroll",function(){p.clientWidth&&s(p.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,z&&C<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Mi.prototype.update=function(o){var s=o.scrollWidth>o.clientWidth+1,u=o.scrollHeight>o.clientHeight+1,c=o.nativeBarWidth;if(u){this.vert.style.display="block",this.vert.style.bottom=s?c+"px":"0";var p=o.viewHeight-(s?c:0);this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+p)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=u?c+"px":"0",this.horiz.style.left=o.barLeft+"px";var h=o.viewWidth-o.barLeft-(u?c:0);this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+h)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&o.clientHeight>0&&(c==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:u?c:0,bottom:s?c:0}},Mi.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Mi.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Mi.prototype.zeroWidthHack=function(){var o=yt&&!Dt?"12px":"18px";this.horiz.style.height=this.vert.style.width=o,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Le,this.disableVert=new Le},Mi.prototype.enableZeroWidthBar=function(o,s,u){function c(){var p=o.getBoundingClientRect();(u=="vert"?document.elementFromPoint(p.right-1,(p.top+p.bottom)/2):document.elementFromPoint((p.right+p.left)/2,p.bottom-1))!=o?o.style.visibility="hidden":s.set(1e3,c)}o.style.visibility="",s.set(1e3,c)},Mi.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var pa=function(){};function ms(o,s){s||(s=ua(o));var u=o.display.barWidth,c=o.display.barHeight;Jr(o,s);for(var p=0;p<4&&u!=o.display.barWidth||c!=o.display.barHeight;p++)u!=o.display.barWidth&&o.options.lineWrapping&&el(o),Jr(o,ua(o)),u=o.display.barWidth,c=o.display.barHeight}function Jr(o,s){var u=o.display,c=u.scrollbars.update(s);u.sizer.style.paddingRight=(u.barWidth=c.right)+"px",u.sizer.style.paddingBottom=(u.barHeight=c.bottom)+"px",u.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(u.scrollbarFiller.style.display="block",u.scrollbarFiller.style.height=c.bottom+"px",u.scrollbarFiller.style.width=c.right+"px"):u.scrollbarFiller.style.display="",c.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(u.gutterFiller.style.display="block",u.gutterFiller.style.height=c.bottom+"px",u.gutterFiller.style.width=s.gutterWidth+"px"):u.gutterFiller.style.display=""}pa.prototype.update=function(){return{bottom:0,right:0}},pa.prototype.setScrollLeft=function(){},pa.prototype.setScrollTop=function(){},pa.prototype.clear=function(){};var fu={native:Mi,null:pa};function du(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&it(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new fu[o.options.scrollbarStyle](function(s){o.display.wrapper.insertBefore(s,o.display.scrollbarFiller),oe(s,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,u){u=="horizontal"?Vo(o,s):la(o,s)},o),o.display.scrollbars.addClass&&te(o.display.wrapper,o.display.scrollbars.addClass)}var Qp=0;function Li(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Qp,markArrays:null},Oi(o.curOp)}function Di(o){var s=o.curOp;s&&as(s,function(u){for(var c=0;c<u.ops.length;c++)u.ops[c].cm.curOp=null;tf(u)})}function tf(o){for(var s=o.ops,u=0;u<s.length;u++)ef(s[u]);for(var c=0;c<s.length;c++)nf(s[c]);for(var p=0;p<s.length;p++)rf(s[p]);for(var h=0;h<s.length;h++)fa(s[h]);for(var y=0;y<s.length;y++)of(s[y])}function ef(o){var s=o.cm,u=s.display;Ni(s),o.updateMaxLine&&Js(s),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<u.viewFrom||o.scrollToPos.to.line>=u.viewTo)||u.maxLineChanged&&s.options.lineWrapping,o.update=o.mustUpdate&&new rl(s,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}function nf(o){o.updatedDisplay=o.mustUpdate&&rc(o.cm,o.update)}function rf(o){var s=o.cm,u=s.display;o.updatedDisplay&&el(s),o.barMeasure=ua(s),u.maxLineChanged&&!s.options.lineWrapping&&(o.adjustWidthTo=Gr(s,u.maxLine,u.maxLine.text.length).left+3,s.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(u.scroller.clientWidth,u.sizer.offsetLeft+o.adjustWidthTo+bt(s)+s.display.barWidth),o.maxScrollLeft=Math.max(0,u.sizer.offsetLeft+o.adjustWidthTo-Ut(s))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=u.input.prepareSelection())}function fa(o){var s=o.cm;o.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<s.doc.scrollLeft&&Vo(s,Math.min(s.display.scroller.scrollLeft,o.maxScrollLeft),!0),s.display.maxLineChanged=!1);var u=o.focus&&o.focus==Nt();o.preparedSelection&&s.display.input.showSelection(o.preparedSelection,u),(o.updatedDisplay||o.startHeight!=s.doc.height)&&ms(s,o.barMeasure),o.updatedDisplay&&ol(s,o.barMeasure),o.selectionChanged&&gs(s),s.state.focused&&o.updateInput&&s.display.input.reset(o.typing),u&&uu(o.cm)}function of(o){var s=o.cm,u=s.display,c=s.doc;o.updatedDisplay&&hu(s,o.update),u.wheelStartX==null||o.scrollTop==null&&o.scrollLeft==null&&!o.scrollToPos||(u.wheelStartX=u.wheelStartY=null),o.scrollTop!=null&&ca(s,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&Vo(s,o.scrollLeft,!0,!0),o.scrollToPos&&Yp(s,ec(s,de(c,o.scrollToPos.from),de(c,o.scrollToPos.to),o.scrollToPos.margin));var p=o.maybeHiddenMarkers,h=o.maybeUnhiddenMarkers;if(p)for(var y=0;y<p.length;++y)p[y].lines.length||_t(p[y],"hide");if(h)for(var w=0;w<h.length;++w)h[w].lines.length&&_t(h[w],"unhide");u.wrapper.offsetHeight&&(c.scrollTop=s.display.scroller.scrollTop),o.changeObjs&&_t(s,"changes",s,o.changeObjs),o.update&&o.update.finish()}function wr(o,s){if(o.curOp)return s();Li(o);try{return s()}finally{Di(o)}}function tr(o,s){return function(){if(o.curOp)return s.apply(o,arguments);Li(o);try{return s.apply(o,arguments)}finally{Di(o)}}}function fr(o){return function(){if(this.curOp)return o.apply(this,arguments);Li(this);try{return o.apply(this,arguments)}finally{Di(this)}}}function er(o){return function(){var s=this.cm;if(!s||s.curOp)return o.apply(this,arguments);Li(s);try{return o.apply(this,arguments)}finally{Di(s)}}}function ys(o,s){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(s,Pe(sf,o))}function sf(o){var s=o.doc;if(!(s.highlightFrontier>=o.display.viewTo)){var u=+new Date+o.options.workTime,c=To(o,s.highlightFrontier),p=[];s.iter(c.line,Math.min(s.first+s.size,o.display.viewTo+500),function(h){if(c.line>=o.display.viewFrom){var y=h.styles,w=h.text.length>o.options.maxHighlightLength?Zn(s.mode,c.state):null,S=Ws(o,h,c,!0);w&&(c.state=w),h.styles=S.styles;var P=h.styleClasses,tt=S.classes;tt?h.styleClasses=tt:P&&(h.styleClasses=null);for(var et=!y||y.length!=h.styles.length||P!=tt&&(!P||!tt||P.bgClass!=tt.bgClass||P.textClass!=tt.textClass),xt=0;!et&&xt<y.length;++xt)et=y[xt]!=h.styles[xt];et&&p.push(c.line),h.stateAfter=c.save(),c.nextLine()}else h.text.length<=o.options.maxHighlightLength&&fo(o,h.text,c),h.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>u)return ys(o,o.options.workDelay),!0}),s.highlightFrontier=c.line,s.modeFrontier=Math.max(s.modeFrontier,c.line),p.length&&wr(o,function(){for(var h=0;h<p.length;h++)vo(o,p[h],"text")})}}var rl=function(o,s,u){var c=o.display;this.viewport=s,this.visible=sa(c,o.doc,s),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=Ut(o),this.force=u,this.dims=Yl(o),this.events=[]};function Ni(o){var s=o.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=bt(o)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=bt(o)+"px",s.scrollbarsClipped=!0)}function af(o){if(o.hasFocus())return null;var s=Nt();if(!s||!Vt(o.display.lineDiv,s))return null;var u={activeElt:s};if(window.getSelection){var c=window.getSelection();c.anchorNode&&c.extend&&Vt(o.display.lineDiv,c.anchorNode)&&(u.anchorNode=c.anchorNode,u.anchorOffset=c.anchorOffset,u.focusNode=c.focusNode,u.focusOffset=c.focusOffset)}return u}function lf(o){if(o&&o.activeElt&&o.activeElt!=Nt()&&(o.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(o.activeElt.nodeName)&&o.anchorNode&&Vt(document.body,o.anchorNode)&&Vt(document.body,o.focusNode))){var s=window.getSelection(),u=document.createRange();u.setEnd(o.anchorNode,o.anchorOffset),u.collapse(!1),s.removeAllRanges(),s.addRange(u),s.extend(o.focusNode,o.focusOffset)}}function rc(o,s){var u=o.display,c=o.doc;if(s.editorIsHidden)return ii(o),!1;if(!s.force&&s.visible.from>=u.viewFrom&&s.visible.to<=u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo)&&u.renderedView==u.view&&cu(o)==0)return!1;vu(o)&&(ii(o),s.dims=Yl(o));var p=c.first+c.size,h=Math.max(s.visible.from-o.options.viewportMargin,c.first),y=Math.min(p,s.visible.to+o.options.viewportMargin);u.viewFrom<h&&h-u.viewFrom<20&&(h=Math.max(c.first,u.viewFrom)),u.viewTo>y&&u.viewTo-y<20&&(y=Math.min(p,u.viewTo)),so&&(h=br(o.doc,h),y=Ur(o.doc,y));var w=h!=u.viewFrom||y!=u.viewTo||u.lastWrapHeight!=s.wrapperHeight||u.lastWrapWidth!=s.wrapperWidth;Kp(o,h,y),u.viewOffset=$r(Se(o.doc,u.viewFrom)),o.display.mover.style.top=u.viewOffset+"px";var S=cu(o);if(!w&&S==0&&!s.force&&u.renderedView==u.view&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo))return!1;var P=af(o);return S>4&&(u.lineDiv.style.display="none"),gu(o,u.updateLineNumbers,s.dims),S>4&&(u.lineDiv.style.display=""),u.renderedView=u.view,lf(P),Tt(u.cursorDiv),Tt(u.selectionDiv),u.gutters.style.height=u.sizer.style.minHeight=0,w&&(u.lastWrapHeight=s.wrapperHeight,u.lastWrapWidth=s.wrapperWidth,ys(o,400)),u.updateLineNumbers=null,!0}function hu(o,s){for(var u=s.viewport,c=!0;;c=!1){if(c&&o.options.lineWrapping&&s.oldDisplayWidth!=Ut(o))c&&(s.visible=sa(o.display,o.doc,u));else if(u&&u.top!=null&&(u={top:Math.min(o.doc.height+ct(o.display)-ee(o),u.top)}),s.visible=sa(o.display,o.doc,u),s.visible.from>=o.display.viewFrom&&s.visible.to<=o.display.viewTo)break;if(!rc(o,s))break;el(o);var p=ua(o);ea(o),ms(o,p),ol(o,p),s.force=!1}s.signal(o,"update",o),o.display.viewFrom==o.display.reportedViewFrom&&o.display.viewTo==o.display.reportedViewTo||(s.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function oc(o,s){var u=new rl(o,s);if(rc(o,u)){el(o),hu(o,u);var c=ua(o);ea(o),ms(o,c),ol(o,c),u.finish()}}function gu(o,s,u){var c=o.display,p=o.options.lineNumbers,h=c.lineDiv,y=h.firstChild;function w(jt){var Gt=jt.nextSibling;return O&&yt&&o.display.currentWheelTarget==jt?jt.style.display="none":jt.parentNode.removeChild(jt),Gt}for(var S=c.view,P=c.viewFrom,tt=0;tt<S.length;tt++){var et=S[tt];if(!et.hidden)if(et.node&&et.node.parentNode==h){for(;y!=et.node;)y=w(y);var xt=p&&s!=null&&s<=P&&et.lineNumber;et.changes&&(Ce(et.changes,"gutter")>-1&&(xt=!1),Xs(o,et,P,u)),xt&&(Tt(et.lineNumber),et.lineNumber.appendChild(document.createTextNode(Xo(o.options,P)))),y=et.node.nextSibling}else{var St=Qs(o,et,P,u);h.insertBefore(St,y)}P+=et.size}for(;y;)y=w(y)}function ic(o){var s=o.gutters.offsetWidth;o.sizer.style.marginLeft=s+"px",On(o,"gutterChanged",o)}function ol(o,s){o.display.sizer.style.minHeight=s.docHeight+"px",o.display.heightForcer.style.top=s.docHeight+"px",o.display.gutters.style.height=s.docHeight+o.display.barHeight+bt(o)+"px"}function da(o){var s=o.display,u=s.view;if(s.alignWidgets||s.gutters.firstChild&&o.options.fixedGutter){for(var c=Xl(s)-s.scroller.scrollLeft+o.doc.scrollLeft,p=s.gutters.offsetWidth,h=c+"px",y=0;y<u.length;y++)if(!u[y].hidden){o.options.fixedGutter&&(u[y].gutter&&(u[y].gutter.style.left=h),u[y].gutterBackground&&(u[y].gutterBackground.style.left=h));var w=u[y].alignable;if(w)for(var S=0;S<w.length;S++)w[S].style.left=h}o.options.fixedGutter&&(s.gutters.style.left=c+p+"px")}}function vu(o){if(!o.options.lineNumbers)return!1;var s=o.doc,u=Xo(o.options,s.first+s.size-1),c=o.display;if(u.length!=c.lineNumChars){var p=c.measure.appendChild(Ct("div",[Ct("div",u)],"CodeMirror-linenumber CodeMirror-gutter-elt")),h=p.firstChild.offsetWidth,y=p.offsetWidth-h;return c.lineGutter.style.width="",c.lineNumInnerWidth=Math.max(h,c.lineGutter.offsetWidth-y)+1,c.lineNumWidth=c.lineNumInnerWidth+y,c.lineNumChars=c.lineNumInnerWidth?u.length:-1,c.lineGutter.style.width=c.lineNumWidth+"px",ic(o.display),!0}return!1}function il(o,s){for(var u=[],c=!1,p=0;p<o.length;p++){var h=o[p],y=null;if(typeof h!="string"&&(y=h.style,h=h.className),h=="CodeMirror-linenumbers"){if(!s)continue;c=!0}u.push({className:h,style:y})}return s&&!c&&u.push({className:"CodeMirror-linenumbers",style:null}),u}function mu(o){var s=o.gutters,u=o.gutterSpecs;Tt(s),o.lineGutter=null;for(var c=0;c<u.length;++c){var p=u[c],h=p.className,y=p.style,w=s.appendChild(Ct("div",null,"CodeMirror-gutter "+h));y&&(w.style.cssText=y),h=="CodeMirror-linenumbers"&&(o.lineGutter=w,w.style.width=(o.lineNumWidth||1)+"px")}s.style.display=u.length?"":"none",ic(o)}function bs(o){mu(o.display),sr(o),da(o)}function yu(o,s,u,c){var p=this;this.input=u,p.scrollbarFiller=Ct("div",null,"CodeMirror-scrollbar-filler"),p.scrollbarFiller.setAttribute("cm-not-content","true"),p.gutterFiller=Ct("div",null,"CodeMirror-gutter-filler"),p.gutterFiller.setAttribute("cm-not-content","true"),p.lineDiv=H("div",null,"CodeMirror-code"),p.selectionDiv=Ct("div",null,null,"position: relative; z-index: 1"),p.cursorDiv=Ct("div",null,"CodeMirror-cursors"),p.measure=Ct("div",null,"CodeMirror-measure"),p.lineMeasure=Ct("div",null,"CodeMirror-measure"),p.lineSpace=H("div",[p.measure,p.lineMeasure,p.selectionDiv,p.cursorDiv,p.lineDiv],null,"position: relative; outline: none");var h=H("div",[p.lineSpace],"CodeMirror-lines");p.mover=Ct("div",[h],null,"position: relative"),p.sizer=Ct("div",[p.mover],"CodeMirror-sizer"),p.sizerWidth=null,p.heightForcer=Ct("div",null,null,"position: absolute; height: "+fe+"px; width: 1px;"),p.gutters=Ct("div",null,"CodeMirror-gutters"),p.lineGutter=null,p.scroller=Ct("div",[p.sizer,p.heightForcer,p.gutters],"CodeMirror-scroll"),p.scroller.setAttribute("tabIndex","-1"),p.wrapper=Ct("div",[p.scrollbarFiller,p.gutterFiller,p.scroller],"CodeMirror"),p.wrapper.setAttribute("translate","no"),z&&C<8&&(p.gutters.style.zIndex=-1,p.scroller.style.paddingRight=0),O||U&&mt||(p.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(p.wrapper):o(p.wrapper)),p.viewFrom=p.viewTo=s.first,p.reportedViewFrom=p.reportedViewTo=s.first,p.view=[],p.renderedView=null,p.externalMeasured=null,p.viewOffset=0,p.lastWrapHeight=p.lastWrapWidth=0,p.updateLineNumbers=null,p.nativeBarWidth=p.barHeight=p.barWidth=0,p.scrollbarsClipped=!1,p.lineNumWidth=p.lineNumInnerWidth=p.lineNumChars=null,p.alignWidgets=!1,p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.maxLine=null,p.maxLineLength=0,p.maxLineChanged=!1,p.wheelDX=p.wheelDY=p.wheelStartX=p.wheelStartY=null,p.shift=!1,p.selForContextMenu=null,p.activeTouch=null,p.gutterSpecs=il(c.gutters,c.lineNumbers),mu(p),u.init(p)}rl.prototype.signal=function(o,s){xe(o,s)&&this.events.push(arguments)},rl.prototype.finish=function(){for(var o=0;o<this.events.length;o++)_t.apply(null,this.events[o])};var sl=0,Ho=null;function bu(o){var s=o.wheelDeltaX,u=o.wheelDeltaY;return s==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(s=o.detail),u==null&&o.detail&&o.axis==o.VERTICAL_AXIS?u=o.detail:u==null&&(u=o.wheelDelta),{x:s,y:u}}function cf(o){var s=bu(o);return s.x*=Ho,s.y*=Ho,s}function wu(o,s){D&&N>=102&&(o.display.chromeScrollHack==null?o.display.sizer.style.pointerEvents="none":clearTimeout(o.display.chromeScrollHack),o.display.chromeScrollHack=setTimeout(function(){o.display.chromeScrollHack=null,o.display.sizer.style.pointerEvents=""},100));var u=bu(s),c=u.x,p=u.y,h=Ho;s.deltaMode===0&&(c=s.deltaX,p=s.deltaY,h=1);var y=o.display,w=y.scroller,S=w.scrollWidth>w.clientWidth,P=w.scrollHeight>w.clientHeight;if(c&&S||p&&P){if(p&&yt&&O){t:for(var tt=s.target,et=y.view;tt!=w;tt=tt.parentNode)for(var xt=0;xt<et.length;xt++)if(et[xt].node==tt){o.display.currentWheelTarget=tt;break t}}if(c&&!U&&!ut&&h!=null)return p&&P&&la(o,Math.max(0,w.scrollTop+p*h)),Vo(o,Math.max(0,w.scrollLeft+c*h)),(!p||p&&P)&&Qe(s),void(y.wheelStartX=null);if(p&&h!=null){var St=p*h,jt=o.doc.scrollTop,Gt=jt+y.wrapper.clientHeight;St<0?jt=Math.max(0,jt+St-50):Gt=Math.min(o.doc.height,Gt+St+50),oc(o,{top:jt,bottom:Gt})}sl<20&&s.deltaMode!==0&&(y.wheelStartX==null?(y.wheelStartX=w.scrollLeft,y.wheelStartY=w.scrollTop,y.wheelDX=c,y.wheelDY=p,setTimeout(function(){if(y.wheelStartX!=null){var Qt=w.scrollLeft-y.wheelStartX,pe=w.scrollTop-y.wheelStartY,me=pe&&y.wheelDY&&pe/y.wheelDY||Qt&&y.wheelDX&&Qt/y.wheelDX;y.wheelStartX=y.wheelStartY=null,me&&(Ho=(Ho*sl+me)/(sl+1),++sl)}},200)):(y.wheelDX+=c,y.wheelDY+=p))}}z?Ho=-.53:U?Ho=15:D?Ho=-.7:ht&&(Ho=-.3333333333333333);var Yr=function(o,s){this.ranges=o,this.primIndex=s};Yr.prototype.primary=function(){return this.ranges[this.primIndex]},Yr.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var u=this.ranges[s],c=o.ranges[s];if(!nt(u.anchor,c.anchor)||!nt(u.head,c.head))return!1}return!0},Yr.prototype.deepCopy=function(){for(var o=[],s=0;s<this.ranges.length;s++)o[s]=new ln(Bt(this.ranges[s].anchor),Bt(this.ranges[s].head));return new Yr(o,this.primIndex)},Yr.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},Yr.prototype.contains=function(o,s){s||(s=o);for(var u=0;u<this.ranges.length;u++){var c=this.ranges[u];if(A(s,c.from())>=0&&A(o,c.to())<=0)return u}return-1};var ln=function(o,s){this.anchor=o,this.head=s};function ao(o,s,u){var c=o&&o.options.selectionsMayTouch,p=s[u];s.sort(function(xt,St){return A(xt.from(),St.from())}),u=Ce(s,p);for(var h=1;h<s.length;h++){var y=s[h],w=s[h-1],S=A(w.to(),y.from());if(c&&!y.empty()?S>0:S>=0){var P=_e(w.from(),y.from()),tt=ce(w.to(),y.to()),et=w.empty()?y.from()==y.head:w.from()==w.head;h<=u&&--u,s.splice(--h,2,new ln(et?tt:P,et?P:tt))}}return new Yr(s,u)}function si(o,s){return new Yr([new ln(o,s||o)],0)}function mo(o){return o.text?Xt(o.from.line+o.text.length-1,se(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function _u(o,s){if(A(o,s.from)<0)return o;if(A(o,s.to)<=0)return mo(s);var u=o.line+s.text.length-(s.to.line-s.from.line)-1,c=o.ch;return o.line==s.to.line&&(c+=mo(s).ch-s.to.ch),Xt(u,c)}function al(o,s){for(var u=[],c=0;c<o.sel.ranges.length;c++){var p=o.sel.ranges[c];u.push(new ln(_u(p.anchor,s),_u(p.head,s)))}return ao(o.cm,u,o.sel.primIndex)}function Cu(o,s,u){return o.line==s.line?Xt(u.line,o.ch-s.ch+u.ch):Xt(u.line+(o.line-s.line),o.ch)}function ai(o,s,u){for(var c=[],p=Xt(o.first,0),h=p,y=0;y<s.length;y++){var w=s[y],S=Cu(w.from,p,h),P=Cu(mo(w),p,h);if(p=w.to,h=P,u=="around"){var tt=o.sel.ranges[y],et=A(tt.head,tt.anchor)<0;c[y]=new ln(et?P:S,et?S:P)}else c[y]=new ln(S,S)}return new Yr(c,o.sel.primIndex)}function ll(o){o.doc.mode=io(o.options,o.doc.modeOption),zo(o)}function zo(o){o.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,ys(o,100),o.state.modeGen++,o.curOp&&sr(o)}function xu(o,s){return s.from.ch==0&&s.to.ch==0&&se(s.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function sc(o,s,u,c){function p(me){return u?u[me]:null}function h(me,le,ke){Ys(me,le,ke,c),On(me,"change",me,s)}function y(me,le){for(var ke=[],Oe=me;Oe<le;++Oe)ke.push(new qr(P[Oe],p(Oe),c));return ke}var w=s.from,S=s.to,P=s.text,tt=Se(o,w.line),et=Se(o,S.line),xt=se(P),St=p(P.length-1),jt=S.line-w.line;if(s.full)o.insert(0,y(0,P.length)),o.remove(P.length,o.size-P.length);else if(xu(o,s)){var Gt=y(0,P.length-1);h(et,et.text,St),jt&&o.remove(w.line,jt),Gt.length&&o.insert(w.line,Gt)}else if(tt==et)if(P.length==1)h(tt,tt.text.slice(0,w.ch)+xt+tt.text.slice(S.ch),St);else{var Qt=y(1,P.length-1);Qt.push(new qr(xt+tt.text.slice(S.ch),St,c)),h(tt,tt.text.slice(0,w.ch)+P[0],p(0)),o.insert(w.line+1,Qt)}else if(P.length==1)h(tt,tt.text.slice(0,w.ch)+P[0]+et.text.slice(S.ch),p(0)),o.remove(w.line+1,jt);else{h(tt,tt.text.slice(0,w.ch)+P[0],p(0)),h(et,xt+et.text.slice(S.ch),St);var pe=y(1,P.length-1);jt>1&&o.remove(w.line+1,jt-1),o.insert(w.line+1,pe)}On(o,"change",o,s)}function Bo(o,s,u){function c(p,h,y){if(p.linked)for(var w=0;w<p.linked.length;++w){var S=p.linked[w];if(S.doc!=h){var P=y&&S.sharedHist;u&&!P||(s(S.doc,P),c(S.doc,p,P))}}}c(o,null,!0)}function Su(o,s){if(s.cm)throw new Error("This document is already in use.");o.doc=s,s.cm=o,Zl(o),ll(o),cl(o),o.options.direction=s.direction,o.options.lineWrapping||Js(o),o.options.mode=s.modeOption,sr(o)}function cl(o){(o.doc.direction=="rtl"?te:it)(o.display.lineDiv,"CodeMirror-rtl")}function uf(o){wr(o,function(){cl(o),sr(o)})}function ul(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function ac(o,s){var u={from:Bt(s.from),to:mo(s),text:ur(o,s.from,s.to)};return uc(o,u,s.from.line,s.to.line+1),Bo(o,function(c){return uc(c,u,s.from.line,s.to.line+1)},!0),u}function Ou(o){for(;o.length&&se(o).ranges;)o.pop()}function pf(o,s){return s?(Ou(o.done),se(o.done)):o.done.length&&!se(o.done).ranges?se(o.done):o.done.length>1&&!o.done[o.done.length-2].ranges?(o.done.pop(),se(o.done)):void 0}function lc(o,s,u,c){var p=o.history;p.undone.length=0;var h,y,w=+new Date;if((p.lastOp==c||p.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&p.lastModTime>w-(o.cm?o.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(h=pf(p,p.lastOp==c)))y=se(h.changes),A(s.from,s.to)==0&&A(s.from,y.to)==0?y.to=mo(s):h.changes.push(ac(o,s));else{var S=se(p.done);for(S&&S.ranges||pl(o.sel,p.done),h={changes:[ac(o,s)],generation:p.generation},p.done.push(h);p.done.length>p.undoDepth;)p.done.shift(),p.done[0].ranges||p.done.shift()}p.done.push(u),p.generation=++p.maxGeneration,p.lastModTime=p.lastSelTime=w,p.lastOp=p.lastSelOp=c,p.lastOrigin=p.lastSelOrigin=s.origin,y||_t(o,"historyAdded")}function cc(o,s,u,c){var p=s.charAt(0);return p=="*"||p=="+"&&u.ranges.length==c.ranges.length&&u.somethingSelected()==c.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}function ff(o,s,u,c){var p=o.history,h=c&&c.origin;u==p.lastSelOp||h&&p.lastSelOrigin==h&&(p.lastModTime==p.lastSelTime&&p.lastOrigin==h||cc(o,h,se(p.done),s))?p.done[p.done.length-1]=s:pl(s,p.done),p.lastSelTime=+new Date,p.lastSelOrigin=h,p.lastSelOp=u,c&&c.clearRedo!==!1&&Ou(p.undone)}function pl(o,s){var u=se(s);u&&u.ranges&&u.equals(o)||s.push(o)}function uc(o,s,u,c){var p=s["spans_"+o.id],h=0;o.iter(Math.max(o.first,u),Math.min(o.first+o.size,c),function(y){y.markedSpans&&((p||(p=s["spans_"+o.id]={}))[h]=y.markedSpans),++h})}function df(o){if(!o)return null;for(var s,u=0;u<o.length;++u)o[u].marker.explicitlyCleared?s||(s=o.slice(0,u)):s&&s.push(o[u]);return s?s.length?s:null:o}function hf(o,s){var u=s["spans_"+o.id];if(!u)return null;for(var c=[],p=0;p<s.text.length;++p)c.push(df(u[p]));return c}function pc(o,s){var u=hf(o,s),c=Qo(o,s);if(!u)return c;if(!c)return u;for(var p=0;p<u.length;++p){var h=u[p],y=c[p];if(h&&y)t:for(var w=0;w<y.length;++w){for(var S=y[w],P=0;P<h.length;++P)if(h[P].marker==S.marker)continue t;h.push(S)}else y&&(u[p]=y)}return u}function ws(o,s,u){for(var c=[],p=0;p<o.length;++p){var h=o[p];if(h.ranges)c.push(u?Yr.prototype.deepCopy.call(h):h);else{var y=h.changes,w=[];c.push({changes:w});for(var S=0;S<y.length;++S){var P=y[S],tt=void 0;if(w.push({from:P.from,to:P.to,text:P.text}),s)for(var et in P)(tt=et.match(/^spans_(\d+)$/))&&Ce(s,Number(tt[1]))>-1&&(se(w)[et]=P[et],delete P[et])}}}return c}function Ii(o,s,u,c){if(c){var p=o.anchor;if(u){var h=A(s,p)<0;h!=A(u,p)<0?(p=s,s=u):h!=A(s,u)<0&&(s=u)}return new ln(p,s)}return new ln(u||s,s)}function fl(o,s,u,c,p){p==null&&(p=o.cm&&(o.cm.display.shift||o.extend)),ar(o,new Yr([Ii(o.sel.primary(),s,u,p)],0),c)}function Tu(o,s,u){for(var c=[],p=o.cm&&(o.cm.display.shift||o.extend),h=0;h<o.sel.ranges.length;h++)c[h]=Ii(o.sel.ranges[h],s[h],null,p);ar(o,ao(o.cm,c,o.sel.primIndex),u)}function dl(o,s,u,c){var p=o.sel.ranges.slice(0);p[s]=u,ar(o,ao(o.cm,p,o.sel.primIndex),c)}function fc(o,s,u,c){ar(o,si(s,u),c)}function Eu(o,s,u){var c={ranges:s.ranges,update:function(p){this.ranges=[];for(var h=0;h<p.length;h++)this.ranges[h]=new ln(de(o,p[h].anchor),de(o,p[h].head))},origin:u&&u.origin};return _t(o,"beforeSelectionChange",o,c),o.cm&&_t(o.cm,"beforeSelectionChange",o.cm,c),c.ranges!=s.ranges?ao(o.cm,c.ranges,c.ranges.length-1):s}function dc(o,s,u){var c=o.history.done,p=se(c);p&&p.ranges?(c[c.length-1]=s,hl(o,s,u)):ar(o,s,u)}function ar(o,s,u){hl(o,s,u),ff(o,o.sel,o.cm?o.cm.curOp.id:NaN,u)}function hl(o,s,u){(xe(o,"beforeSelectionChange")||o.cm&&xe(o.cm,"beforeSelectionChange"))&&(s=Eu(o,s,u));var c=u&&u.bias||(A(s.primary().head,o.sel.primary().head)<0?-1:1);_s(o,hc(o,s,c,!0)),u&&u.scroll===!1||!o.cm||o.cm.getOption("readOnly")=="nocursor"||vs(o.cm)}function _s(o,s){s.equals(o.sel)||(o.sel=s,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,ie(o.cm)),On(o,"cursorActivity",o))}function gl(o){_s(o,hc(o,o.sel,null,!1))}function hc(o,s,u,c){for(var p,h=0;h<s.ranges.length;h++){var y=s.ranges[h],w=s.ranges.length==o.sel.ranges.length&&o.sel.ranges[h],S=ha(o,y.anchor,w&&w.anchor,u,c),P=y.head==y.anchor?S:ha(o,y.head,w&&w.head,u,c);(p||S!=y.anchor||P!=y.head)&&(p||(p=s.ranges.slice(0,h)),p[h]=new ln(S,P))}return p?ao(o.cm,p,s.primIndex):s}function Fi(o,s,u,c,p){var h=Se(o,s.line);if(h.markedSpans)for(var y=0;y<h.markedSpans.length;++y){var w=h.markedSpans[y],S=w.marker,P="selectLeft"in S?!S.selectLeft:S.inclusiveLeft,tt="selectRight"in S?!S.selectRight:S.inclusiveRight;if((w.from==null||(P?w.from<=s.ch:w.from<s.ch))&&(w.to==null||(tt?w.to>=s.ch:w.to>s.ch))){if(p&&(_t(S,"beforeCursorEnter"),S.explicitlyCleared)){if(h.markedSpans){--y;continue}break}if(!S.atomic)continue;if(u){var et=S.find(c<0?1:-1),xt=void 0;if((c<0?tt:P)&&(et=Cs(o,et,-c,et&&et.line==s.line?h:null)),et&&et.line==s.line&&(xt=A(et,u))&&(c<0?xt<0:xt>0))return Fi(o,et,s,c,p)}var St=S.find(c<0?-1:1);return(c<0?P:tt)&&(St=Cs(o,St,c,St.line==s.line?h:null)),St?Fi(o,St,s,c,p):null}}return s}function ha(o,s,u,c,p){var h=c||1,y=Fi(o,s,u,h,p)||!p&&Fi(o,s,u,h,!0)||Fi(o,s,u,-h,p)||!p&&Fi(o,s,u,-h,!0);return y||(o.cantEdit=!0,Xt(o.first,0))}function Cs(o,s,u,c){return u<0&&s.ch==0?s.line>o.first?de(o,Xt(s.line-1)):null:u>0&&s.ch==(c||Se(o,s.line)).text.length?s.line<o.first+o.size-1?Xt(s.line+1,0):null:new Xt(s.line,s.ch+u)}function ku(o){o.setSelection(Xt(o.firstLine(),0),Xt(o.lastLine()),ge)}function Pu(o,s,u){var c={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return c.canceled=!0}};return u&&(c.update=function(p,h,y,w){p&&(c.from=de(o,p)),h&&(c.to=de(o,h)),y&&(c.text=y),w!==void 0&&(c.origin=w)}),_t(o,"beforeChange",o,c),o.cm&&_t(o.cm,"beforeChange",o.cm,c),c.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function Ri(o,s,u){if(o.cm){if(!o.cm.curOp)return tr(o.cm,Ri)(o,s,u);if(o.cm.state.suppressEdits)return}if(!(xe(o,"beforeChange")||o.cm&&xe(o.cm,"beforeChange"))||(s=Pu(o,s,!0))){var c=or&&!u&&Xe(o,s.from,s.to);if(c)for(var p=c.length-1;p>=0;--p)Au(o,{from:c[p].from,to:c[p].to,text:p?[""]:s.text,origin:s.origin});else Au(o,s)}}function Au(o,s){if(s.text.length!=1||s.text[0]!=""||A(s.from,s.to)!=0){var u=al(o,s);lc(o,s,u,o.cm?o.cm.curOp.id:NaN),ga(o,s,u,Qo(o,s));var c=[];Bo(o,function(p,h){h||Ce(c,p.history)!=-1||(Mu(p.history,s),c.push(p.history)),ga(p,s,null,Qo(p,s))})}}function vl(o,s,u){var c=o.cm&&o.cm.state.suppressEdits;if(!c||u){for(var p,h=o.history,y=o.sel,w=s=="undo"?h.done:h.undone,S=s=="undo"?h.undone:h.done,P=0;P<w.length&&(p=w[P],u?!p.ranges||p.equals(o.sel):p.ranges);P++);if(P!=w.length){for(h.lastOrigin=h.lastSelOrigin=null;;){if(!(p=w.pop()).ranges){if(c)return void w.push(p);break}if(pl(p,S),u&&!p.equals(o.sel))return void ar(o,p,{clearRedo:!1});y=p}var tt=[];pl(y,S),S.push({changes:tt,generation:h.generation}),h.generation=p.generation||++h.maxGeneration;for(var et=xe(o,"beforeChange")||o.cm&&xe(o.cm,"beforeChange"),xt=function(Gt){var Qt=p.changes[Gt];if(Qt.origin=s,et&&!Pu(o,Qt,!1))return w.length=0,{};tt.push(ac(o,Qt));var pe=Gt?al(o,Qt):se(w);ga(o,Qt,pe,pc(o,Qt)),!Gt&&o.cm&&o.cm.scrollIntoView({from:Qt.from,to:mo(Qt)});var me=[];Bo(o,function(le,ke){ke||Ce(me,le.history)!=-1||(Mu(le.history,Qt),me.push(le.history)),ga(le,Qt,null,pc(le,Qt))})},St=p.changes.length-1;St>=0;--St){var jt=xt(St);if(jt)return jt.v}}}}function gc(o,s){if(s!=0&&(o.first+=s,o.sel=new Yr(Ne(o.sel.ranges,function(p){return new ln(Xt(p.anchor.line+s,p.anchor.ch),Xt(p.head.line+s,p.head.ch))}),o.sel.primIndex),o.cm)){sr(o.cm,o.first,o.first-s,s);for(var u=o.cm.display,c=u.viewFrom;c<u.viewTo;c++)vo(o.cm,c,"gutter")}}function ga(o,s,u,c){if(o.cm&&!o.cm.curOp)return tr(o.cm,ga)(o,s,u,c);if(s.to.line<o.first)gc(o,s.text.length-1-(s.to.line-s.from.line));else if(!(s.from.line>o.lastLine())){if(s.from.line<o.first){var p=s.text.length-1-(o.first-s.from.line);gc(o,p),s={from:Xt(o.first,0),to:Xt(s.to.line+p,s.to.ch),text:[se(s.text)],origin:s.origin}}var h=o.lastLine();s.to.line>h&&(s={from:s.from,to:Xt(h,Se(o,h).text.length),text:[s.text[0]],origin:s.origin}),s.removed=ur(o,s.from,s.to),u||(u=al(o,s)),o.cm?gf(o.cm,s,c):sc(o,s,c),hl(o,u,ge),o.cantEdit&&ha(o,Xt(o.firstLine(),0))&&(o.cantEdit=!1)}}function gf(o,s,u){var c=o.doc,p=o.display,h=s.from,y=s.to,w=!1,S=h.line;o.options.lineWrapping||(S=rn(Dr(Se(c,h.line))),c.iter(S,y.line+1,function(St){if(St==p.maxLine)return w=!0,!0})),c.sel.contains(s.from,s.to)>-1&&ie(o),sc(c,s,u,lu(o)),o.options.lineWrapping||(c.iter(S,h.line+s.text.length,function(St){var jt=Si(St);jt>p.maxLineLength&&(p.maxLine=St,p.maxLineLength=jt,p.maxLineChanged=!0,w=!1)}),w&&(o.curOp.updateMaxLine=!0)),qs(c,h.line),ys(o,400);var P=s.text.length-(y.line-h.line)-1;s.full?sr(o):h.line!=y.line||s.text.length!=1||xu(o.doc,s)?sr(o,h.line,y.line+1,P):vo(o,h.line,"text");var tt=xe(o,"changes"),et=xe(o,"change");if(et||tt){var xt={from:h,to:y,text:s.text,removed:s.removed,origin:s.origin};et&&On(o,"change",o,xt),tt&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(xt)}o.display.selForContextMenu=null}function xs(o,s,u,c,p){var h;c||(c=u),A(c,u)<0&&(u=(h=[c,u])[0],c=h[1]),typeof s=="string"&&(s=o.splitLines(s)),Ri(o,{from:u,to:c,text:s,origin:p})}function ju(o,s,u,c){u<o.line?o.line+=c:s<o.line&&(o.line=s,o.ch=0)}function va(o,s,u,c){for(var p=0;p<o.length;++p){var h=o[p],y=!0;if(h.ranges){h.copied||((h=o[p]=h.deepCopy()).copied=!0);for(var w=0;w<h.ranges.length;w++)ju(h.ranges[w].anchor,s,u,c),ju(h.ranges[w].head,s,u,c)}else{for(var S=0;S<h.changes.length;++S){var P=h.changes[S];if(u<P.from.line)P.from=Xt(P.from.line+c,P.from.ch),P.to=Xt(P.to.line+c,P.to.ch);else if(s<=P.to.line){y=!1;break}}y||(o.splice(0,p+1),p=0)}}}function Mu(o,s){var u=s.from.line,c=s.to.line,p=s.text.length-(c-u)-1;va(o.done,u,c,p),va(o.undone,u,c,p)}function ma(o,s,u,c){var p=s,h=s;return typeof s=="number"?h=Se(o,tn(o,s)):p=rn(s),p==null?null:(c(h,p)&&o.cm&&vo(o.cm,p,u),h)}function ya(o){this.lines=o,this.parent=null;for(var s=0,u=0;u<o.length;++u)o[u].parent=this,s+=o[u].height;this.height=s}function Ss(o){this.children=o;for(var s=0,u=0,c=0;c<o.length;++c){var p=o[c];s+=p.chunkSize(),u+=p.height,p.parent=this}this.size=s,this.height=u,this.parent=null}ln.prototype.from=function(){return _e(this.anchor,this.head)},ln.prototype.to=function(){return ce(this.anchor,this.head)},ln.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ya.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,s){for(var u=o,c=o+s;u<c;++u){var p=this.lines[u];this.height-=p.height,Ba(p),On(p,"delete")}this.lines.splice(o,s)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,s,u){this.height+=u,this.lines=this.lines.slice(0,o).concat(s).concat(this.lines.slice(o));for(var c=0;c<s.length;++c)s[c].parent=this},iterN:function(o,s,u){for(var c=o+s;o<c;++o)if(u(this.lines[o]))return!0}},Ss.prototype={chunkSize:function(){return this.size},removeInner:function(o,s){this.size-=s;for(var u=0;u<this.children.length;++u){var c=this.children[u],p=c.chunkSize();if(o<p){var h=Math.min(s,p-o),y=c.height;if(c.removeInner(o,h),this.height-=y-c.height,p==h&&(this.children.splice(u--,1),c.parent=null),(s-=h)==0)break;o=0}else o-=p}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof ya))){var w=[];this.collapse(w),this.children=[new ya(w)],this.children[0].parent=this}},collapse:function(o){for(var s=0;s<this.children.length;++s)this.children[s].collapse(o)},insertInner:function(o,s,u){this.size+=s.length,this.height+=u;for(var c=0;c<this.children.length;++c){var p=this.children[c],h=p.chunkSize();if(o<=h){if(p.insertInner(o,s,u),p.lines&&p.lines.length>50){for(var y=p.lines.length%25+25,w=y;w<p.lines.length;){var S=new ya(p.lines.slice(w,w+=25));p.height-=S.height,this.children.splice(++c,0,S),S.parent=this}p.lines=p.lines.slice(0,y),this.maybeSpill()}break}o-=h}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var s=new Ss(o.children.splice(o.children.length-5,5));if(o.parent){o.size-=s.size,o.height-=s.height;var u=Ce(o.parent.children,o);o.parent.children.splice(u+1,0,s)}else{var c=new Ss(o.children);c.parent=o,o.children=[c,s],o=c}s.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,s,u){for(var c=0;c<this.children.length;++c){var p=this.children[c],h=p.chunkSize();if(o<h){var y=Math.min(s,h-o);if(p.iterN(o,y,u))return!0;if((s-=y)==0)break;o=0}else o-=h}}};var ba=function(o,s,u){if(u)for(var c in u)u.hasOwnProperty(c)&&(this[c]=u[c]);this.doc=o,this.node=s};function vc(o,s,u){$r(s)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&nl(o,u)}function mc(o,s,u,c){var p=new ba(o,u,c),h=o.cm;return h&&p.noHScroll&&(h.display.alignWidgets=!0),ma(o,s,"widget",function(y){var w=y.widgets||(y.widgets=[]);if(p.insertAt==null?w.push(p):w.splice(Math.min(w.length,Math.max(0,p.insertAt)),0,p),p.line=y,h&&!Wr(o,y)){var S=$r(y)<o.scrollTop;pr(y,y.height+x(p)),S&&nl(h,p.height),h.curOp.forceUpdate=!0}return!0}),h&&On(h,"lineWidgetAdded",h,p,typeof s=="number"?s:rn(s)),p}ba.prototype.clear=function(){var o=this.doc.cm,s=this.line.widgets,u=this.line,c=rn(u);if(c!=null&&s){for(var p=0;p<s.length;++p)s[p]==this&&s.splice(p--,1);s.length||(u.widgets=null);var h=x(this);pr(u,Math.max(0,u.height-h)),o&&(wr(o,function(){vc(o,u,-h),vo(o,c,"widget")}),On(o,"lineWidgetCleared",o,this,c))}},ba.prototype.changed=function(){var o=this,s=this.height,u=this.doc.cm,c=this.line;this.height=null;var p=x(this)-s;p&&(Wr(this.doc,c)||pr(c,c.height+p),u&&wr(u,function(){u.curOp.forceUpdate=!0,vc(u,c,p),On(u,"lineWidgetChanged",u,o,rn(c))}))},$e(ba);var yc=0,li=function(o,s){this.lines=[],this.type=s,this.doc=o,this.id=++yc};function Os(o,s,u,c,p){if(c&&c.shared)return vf(o,s,u,c,p);if(o.cm&&!o.cm.curOp)return tr(o.cm,Os)(o,s,u,c,p);var h=new li(o,p),y=A(s,u);if(c&&He(c,h,!1),y>0||y==0&&h.clearWhenEmpty!==!1)return h;if(h.replacedWith&&(h.collapsed=!0,h.widgetNode=H("span",[h.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||h.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(h.widgetNode.insertLeft=!0)),h.collapsed){if(Sn(o,s.line,s,u,h)||s.line!=u.line&&Sn(o,u.line,s,u,h))throw new Error("Inserting collapsed marker partially overlapping an existing one");Gs()}h.addToHistory&&lc(o,{from:s,to:u,origin:"markText"},o.sel,NaN);var w,S=s.line,P=o.cm;if(o.iter(S,u.line+1,function(et){P&&h.collapsed&&!P.options.lineWrapping&&Dr(et)==P.display.maxLine&&(w=!0),h.collapsed&&S!=s.line&&pr(et,0),Ks(et,new Mr(h,S==s.line?s.ch:null,S==u.line?u.ch:null),o.cm&&o.cm.curOp),++S}),h.collapsed&&o.iter(s.line,u.line+1,function(et){Wr(o,et)&&pr(et,0)}),h.clearOnEnter&&oe(h,"beforeCursorEnter",function(){return h.clear()}),h.readOnly&&(wi(),(o.history.done.length||o.history.undone.length)&&o.clearHistory()),h.collapsed&&(h.id=++yc,h.atomic=!0),P){if(w&&(P.curOp.updateMaxLine=!0),h.collapsed)sr(P,s.line,u.line+1);else if(h.className||h.startStyle||h.endStyle||h.css||h.attributes||h.title)for(var tt=s.line;tt<=u.line;tt++)vo(P,tt,"text");h.atomic&&gl(P.doc),On(P,"markerAdded",P,h)}return h}li.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,s=o&&!o.curOp;if(s&&Li(o),xe(this,"clear")){var u=this.find();u&&On(this,"clear",u.from,u.to)}for(var c=null,p=null,h=0;h<this.lines.length;++h){var y=this.lines[h],w=Lo(y.markedSpans,this);o&&!this.collapsed?vo(o,rn(y),"text"):o&&(w.to!=null&&(p=rn(y)),w.from!=null&&(c=rn(y))),y.markedSpans=_i(y.markedSpans,w),w.from==null&&this.collapsed&&!Wr(this.doc,y)&&o&&pr(y,go(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(var S=0;S<this.lines.length;++S){var P=Dr(this.lines[S]),tt=Si(P);tt>o.display.maxLineLength&&(o.display.maxLine=P,o.display.maxLineLength=tt,o.display.maxLineChanged=!0)}c!=null&&o&&this.collapsed&&sr(o,c,p+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&gl(o.doc)),o&&On(o,"markerCleared",o,this,c,p),s&&Di(o),this.parent&&this.parent.clear()}},li.prototype.find=function(o,s){var u,c;o==null&&this.type=="bookmark"&&(o=1);for(var p=0;p<this.lines.length;++p){var h=this.lines[p],y=Lo(h.markedSpans,this);if(y.from!=null&&(u=Xt(s?h:rn(h),y.from),o==-1))return u;if(y.to!=null&&(c=Xt(s?h:rn(h),y.to),o==1))return c}return u&&{from:u,to:c}},li.prototype.changed=function(){var o=this,s=this.find(-1,!0),u=this,c=this.doc.cm;s&&c&&wr(c,function(){var p=s.line,h=rn(s.line),y=us(c,h);if(y&&(ou(y),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!Wr(u.doc,p)&&u.height!=null){var w=u.height;u.height=null;var S=x(u)-w;S&&pr(p,p.height+S)}On(c,"markerChanged",c,o)})},li.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;s.maybeHiddenMarkers&&Ce(s.maybeHiddenMarkers,this)!=-1||(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},li.prototype.detachLine=function(o){if(this.lines.splice(Ce(this.lines,o),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},$e(li);var wa=function(o,s){this.markers=o,this.primary=s;for(var u=0;u<o.length;++u)o[u].parent=this};function vf(o,s,u,c,p){(c=He(c)).shared=!1;var h=[Os(o,s,u,c,p)],y=h[0],w=c.widgetNode;return Bo(o,function(S){w&&(c.widgetNode=w.cloneNode(!0)),h.push(Os(S,de(S,s),de(S,u),c,p));for(var P=0;P<S.linked.length;++P)if(S.linked[P].isParent)return;y=se(h)}),new wa(h,y)}function Lu(o){return o.findMarks(Xt(o.first,0),o.clipPos(Xt(o.lastLine())),function(s){return s.parent})}function Du(o,s){for(var u=0;u<s.length;u++){var c=s[u],p=c.find(),h=o.clipPos(p.from),y=o.clipPos(p.to);if(A(h,y)){var w=Os(o,h,y,c.primary,c.primary.type);c.markers.push(w),w.parent=c}}}function Nu(o){for(var s=function(c){var p=o[c],h=[p.primary.doc];Bo(p.primary.doc,function(S){return h.push(S)});for(var y=0;y<p.markers.length;y++){var w=p.markers[y];Ce(h,w.doc)==-1&&(w.parent=null,p.markers.splice(y--,1))}},u=0;u<o.length;u++)s(u)}wa.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();On(this,"clear")}},wa.prototype.find=function(o,s){return this.primary.find(o,s)},$e(wa);var mf=0,$n=function(o,s,u,c,p){if(!(this instanceof $n))return new $n(o,s,u,c,p);u==null&&(u=0),Ss.call(this,[new ya([new qr("",null)])]),this.first=u,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=u;var h=Xt(u,0);this.sel=si(h),this.history=new ul(null),this.id=++mf,this.modeOption=s,this.lineSep=c,this.direction=p=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),sc(this,{from:h,to:h,text:o}),ar(this,si(h),ge)};$n.prototype=hn(Ss.prototype,{constructor:$n,iter:function(o,s,u){u?this.iterN(o-this.first,s-o,u):this.iterN(this.first,this.first+this.size,o)},insert:function(o,s){for(var u=0,c=0;c<s.length;++c)u+=s[c].height;this.insertInner(o-this.first,s,u)},remove:function(o,s){this.removeInner(o-this.first,s)},getValue:function(o){var s=Yo(this,this.first,this.first+this.size);return o===!1?s:s.join(o||this.lineSeparator())},setValue:er(function(o){var s=Xt(this.first,0),u=this.first+this.size-1;Ri(this,{from:s,to:Xt(u,Se(this,u).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&aa(this.cm,0,0),ar(this,si(s),ge)}),replaceRange:function(o,s,u,c){xs(this,o,s=de(this,s),u=u?de(this,u):s,c)},getRange:function(o,s,u){var c=ur(this,de(this,o),de(this,s));return u===!1?c:u===""?c.join(""):c.join(u||this.lineSeparator())},getLine:function(o){var s=this.getLineHandle(o);return s&&s.text},getLineHandle:function(o){if(Oo(this,o))return Se(this,o)},getLineNumber:function(o){return rn(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=Se(this,o)),Dr(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return de(this,o)},getCursor:function(o){var s=this.sel.primary();return o==null||o=="head"?s.head:o=="anchor"?s.anchor:o=="end"||o=="to"||o===!1?s.to():s.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:er(function(o,s,u){fc(this,de(this,typeof o=="number"?Xt(o,s||0):o),null,u)}),setSelection:er(function(o,s,u){fc(this,de(this,o),de(this,s||o),u)}),extendSelection:er(function(o,s,u){fl(this,de(this,o),s&&de(this,s),u)}),extendSelections:er(function(o,s){Tu(this,Dn(this,o),s)}),extendSelectionsBy:er(function(o,s){Tu(this,Dn(this,Ne(this.sel.ranges,o)),s)}),setSelections:er(function(o,s,u){if(o.length){for(var c=[],p=0;p<o.length;p++)c[p]=new ln(de(this,o[p].anchor),de(this,o[p].head||o[p].anchor));s==null&&(s=Math.min(o.length-1,this.sel.primIndex)),ar(this,ao(this.cm,c,s),u)}}),addSelection:er(function(o,s,u){var c=this.sel.ranges.slice(0);c.push(new ln(de(this,o),de(this,s||o))),ar(this,ao(this.cm,c,c.length-1),u)}),getSelection:function(o){for(var s,u=this.sel.ranges,c=0;c<u.length;c++){var p=ur(this,u[c].from(),u[c].to());s=s?s.concat(p):p}return o===!1?s:s.join(o||this.lineSeparator())},getSelections:function(o){for(var s=[],u=this.sel.ranges,c=0;c<u.length;c++){var p=ur(this,u[c].from(),u[c].to());o!==!1&&(p=p.join(o||this.lineSeparator())),s[c]=p}return s},replaceSelection:function(o,s,u){for(var c=[],p=0;p<this.sel.ranges.length;p++)c[p]=o;this.replaceSelections(c,s,u||"+input")},replaceSelections:er(function(o,s,u){for(var c=[],p=this.sel,h=0;h<p.ranges.length;h++){var y=p.ranges[h];c[h]={from:y.from(),to:y.to(),text:this.splitLines(o[h]),origin:u}}for(var w=s&&s!="end"&&ai(this,c,s),S=c.length-1;S>=0;S--)Ri(this,c[S]);w?dc(this,w):this.cm&&vs(this.cm)}),undo:er(function(){vl(this,"undo")}),redo:er(function(){vl(this,"redo")}),undoSelection:er(function(){vl(this,"undo",!0)}),redoSelection:er(function(){vl(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,s=0,u=0,c=0;c<o.done.length;c++)o.done[c].ranges||++s;for(var p=0;p<o.undone.length;p++)o.undone[p].ranges||++u;return{undo:s,redo:u}},clearHistory:function(){var o=this;this.history=new ul(this.history),Bo(this,function(s){return s.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:ws(this.history.done),undone:ws(this.history.undone)}},setHistory:function(o){var s=this.history=new ul(this.history);s.done=ws(o.done.slice(0),null,!0),s.undone=ws(o.undone.slice(0),null,!0)},setGutterMarker:er(function(o,s,u){return ma(this,o,"gutter",function(c){var p=c.gutterMarkers||(c.gutterMarkers={});return p[s]=u,!u&&b(p)&&(c.gutterMarkers=null),!0})}),clearGutter:er(function(o){var s=this;this.iter(function(u){u.gutterMarkers&&u.gutterMarkers[o]&&ma(s,u,"gutter",function(){return u.gutterMarkers[o]=null,b(u.gutterMarkers)&&(u.gutterMarkers=null),!0})})}),lineInfo:function(o){var s;if(typeof o=="number"){if(!Oo(this,o)||(s=o,!(o=Se(this,o))))return null}else if((s=rn(o))==null)return null;return{line:s,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:er(function(o,s,u){return ma(this,o,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(c[p]){if(R(u).test(c[p]))return!1;c[p]+=" "+u}else c[p]=u;return!0})}),removeLineClass:er(function(o,s,u){return ma(this,o,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",h=c[p];if(!h)return!1;if(u==null)c[p]=null;else{var y=h.match(R(u));if(!y)return!1;var w=y.index+y[0].length;c[p]=h.slice(0,y.index)+(y.index&&w!=h.length?" ":"")+h.slice(w)||null}return!0})}),addLineWidget:er(function(o,s,u){return mc(this,o,s,u)}),removeLineWidget:function(o){o.clear()},markText:function(o,s,u){return Os(this,de(this,o),de(this,s),u,u&&u.type||"range")},setBookmark:function(o,s){var u={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return Os(this,o=de(this,o),o,u,"bookmark")},findMarksAt:function(o){var s=[],u=Se(this,(o=de(this,o)).line).markedSpans;if(u)for(var c=0;c<u.length;++c){var p=u[c];(p.from==null||p.from<=o.ch)&&(p.to==null||p.to>=o.ch)&&s.push(p.marker.parent||p.marker)}return s},findMarks:function(o,s,u){o=de(this,o),s=de(this,s);var c=[],p=o.line;return this.iter(o.line,s.line+1,function(h){var y=h.markedSpans;if(y)for(var w=0;w<y.length;w++){var S=y[w];S.to!=null&&p==o.line&&o.ch>=S.to||S.from==null&&p!=o.line||S.from!=null&&p==s.line&&S.from>=s.ch||u&&!u(S.marker)||c.push(S.marker.parent||S.marker)}++p}),c},getAllMarks:function(){var o=[];return this.iter(function(s){var u=s.markedSpans;if(u)for(var c=0;c<u.length;++c)u[c].from!=null&&o.push(u[c].marker)}),o},posFromIndex:function(o){var s,u=this.first,c=this.lineSeparator().length;return this.iter(function(p){var h=p.text.length+c;if(h>o)return s=o,!0;o-=h,++u}),de(this,Xt(u,s))},indexFromPos:function(o){var s=(o=de(this,o)).ch;if(o.line<this.first||o.ch<0)return 0;var u=this.lineSeparator().length;return this.iter(this.first,o.line,function(c){s+=c.text.length+u}),s},copy:function(o){var s=new $n(Yo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,o&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(o){o||(o={});var s=this.first,u=this.first+this.size;o.from!=null&&o.from>s&&(s=o.from),o.to!=null&&o.to<u&&(u=o.to);var c=new $n(Yo(this,s,u),o.mode||this.modeOption,s,this.lineSep,this.direction);return o.sharedHist&&(c.history=this.history),(this.linked||(this.linked=[])).push({doc:c,sharedHist:o.sharedHist}),c.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],Du(c,Lu(this)),c},unlinkDoc:function(o){if(o instanceof Tn&&(o=o.doc),this.linked){for(var s=0;s<this.linked.length;++s)if(this.linked[s].doc==o){this.linked.splice(s,1),o.unlinkDoc(this),Nu(Lu(this));break}}if(o.history==this.history){var u=[o.id];Bo(o,function(c){return u.push(c.id)},!0),o.history=new ul(null),o.history.done=ws(this.history.done,u),o.history.undone=ws(this.history.undone,u)}},iterLinkedDocs:function(o){Bo(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):Po(o)},lineSeparator:function(){return this.lineSep||`
`},setDirection:er(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(s){return s.order=null}),this.cm&&uf(this.cm))})}),$n.prototype.eachLine=$n.prototype.iter;var Iu=0;function yf(o){var s=this;if(Ru(s),!kt(s,o)&&!I(s.display,o)){Qe(o),z&&(Iu=+new Date);var u=ki(s,o,!0),c=o.dataTransfer.files;if(u&&!s.isReadOnly())if(c&&c.length&&window.FileReader&&window.File)for(var p=c.length,h=Array(p),y=0,w=function(){++y==p&&tr(s,function(){var St={from:u=de(s.doc,u),to:u,text:s.doc.splitLines(h.filter(function(jt){return jt!=null}).join(s.doc.lineSeparator())),origin:"paste"};Ri(s.doc,St),dc(s.doc,si(de(s.doc,u),de(s.doc,mo(St))))})()},S=function(St,jt){if(s.options.allowDropFileTypes&&Ce(s.options.allowDropFileTypes,St.type)==-1)w();else{var Gt=new FileReader;Gt.onerror=function(){return w()},Gt.onload=function(){var Qt=Gt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Qt)||(h[jt]=Qt),w()},Gt.readAsText(St)}},P=0;P<c.length;P++)S(c[P],P);else{if(s.state.draggingText&&s.doc.sel.contains(u)>-1)return s.state.draggingText(o),void setTimeout(function(){return s.display.input.focus()},20);try{var tt=o.dataTransfer.getData("Text");if(tt){var et;if(s.state.draggingText&&!s.state.draggingText.copy&&(et=s.listSelections()),hl(s.doc,si(u,u)),et)for(var xt=0;xt<et.length;++xt)xs(s.doc,"",et[xt].anchor,et[xt].head,"drag");s.replaceSelection(tt,"around","paste"),s.display.input.focus()}}catch{}}}}function Fu(o,s){if(z&&(!o.state.draggingText||+new Date-Iu<100))Ge(s);else if(!kt(o,s)&&!I(o.display,s)&&(s.dataTransfer.setData("Text",o.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!ht)){var u=Ct("img",null,null,"position: fixed; left: 0; top: 0;");u.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ut&&(u.width=u.height=1,o.display.wrapper.appendChild(u),u._top=u.offsetTop),s.dataTransfer.setDragImage(u,0,0),ut&&u.parentNode.removeChild(u)}}function bf(o,s){var u=ki(o,s);if(u){var c=document.createDocumentFragment();ra(o,u,c),o.display.dragCursor||(o.display.dragCursor=Ct("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),st(o.display.dragCursor,c)}}function Ru(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function bc(o){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),u=[],c=0;c<s.length;c++){var p=s[c].CodeMirror;p&&u.push(p)}u.length&&u[0].operation(function(){for(var h=0;h<u.length;h++)o(u[h])})}}var Vu=!1;function jn(){Vu||(Hu(),Vu=!0)}function Hu(){var o;oe(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,bc(wc)},100))}),oe(window,"blur",function(){return bc(Ai)})}function wc(o){var s=o.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,o.setSize()}for(var lo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Vi=0;Vi<10;Vi++)lo[Vi+48]=lo[Vi+96]=String(Vi);for(var ml=65;ml<=90;ml++)lo[ml]=String.fromCharCode(ml);for(var Ts=1;Ts<=12;Ts++)lo[Ts+111]=lo[Ts+63235]="F"+Ts;var yo={};function zu(o){var s,u,c,p,h=o.split(/-(?!$)/);o=h[h.length-1];for(var y=0;y<h.length-1;y++){var w=h[y];if(/^(cmd|meta|m)$/i.test(w))p=!0;else if(/^a(lt)?$/i.test(w))s=!0;else if(/^(c|ctrl|control)$/i.test(w))u=!0;else{if(!/^s(hift)?$/i.test(w))throw new Error("Unrecognized modifier name: "+w);c=!0}}return s&&(o="Alt-"+o),u&&(o="Ctrl-"+o),p&&(o="Cmd-"+o),c&&(o="Shift-"+o),o}function yl(o){var s={};for(var u in o)if(o.hasOwnProperty(u)){var c=o[u];if(/^(name|fallthrough|(de|at)tach)$/.test(u))continue;if(c=="..."){delete o[u];continue}for(var p=Ne(u.split(" "),zu),h=0;h<p.length;h++){var y=void 0,w=void 0;h==p.length-1?(w=p.join(" "),y=c):(w=p.slice(0,h+1).join(" "),y="...");var S=s[w];if(S){if(S!=y)throw new Error("Inconsistent bindings for "+w)}else s[w]=y}delete o[u]}for(var P in s)o[P]=s[P];return o}function Hi(o,s,u,c){var p=(s=Uo(s)).call?s.call(o,c):s[o];if(p===!1)return"nothing";if(p==="...")return"multi";if(p!=null&&u(p))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return Hi(o,s.fallthrough,u,c);for(var h=0;h<s.fallthrough.length;h++){var y=Hi(o,s.fallthrough[h],u,c);if(y)return y}}}function _c(o){var s=typeof o=="string"?o:lo[o.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function Bu(o,s,u){var c=o;return s.altKey&&c!="Alt"&&(o="Alt-"+o),($?s.metaKey:s.ctrlKey)&&c!="Ctrl"&&(o="Ctrl-"+o),($?s.ctrlKey:s.metaKey)&&c!="Mod"&&(o="Cmd-"+o),!u&&s.shiftKey&&c!="Shift"&&(o="Shift-"+o),o}function Uu(o,s){if(ut&&o.keyCode==34&&o.char)return!1;var u=lo[o.keyCode];return u!=null&&!o.altGraphKey&&(o.keyCode==3&&o.code&&(u=o.code),Bu(u,o,s))}function Uo(o){return typeof o=="string"?yo[o]:o}function ci(o,s){for(var u=o.doc.sel.ranges,c=[],p=0;p<u.length;p++){for(var h=s(u[p]);c.length&&A(h.from,se(c).to)<=0;){var y=c.pop();if(A(y.from,h.from)<0){h.from=y.from;break}}c.push(h)}wr(o,function(){for(var w=c.length-1;w>=0;w--)xs(o.doc,"",c[w].from,c[w].to,"+delete");vs(o)})}function _a(o,s,u){var c=vt(o.text,s+u,u);return c<0||c>o.text.length?null:c}function bl(o,s,u){var c=_a(o,s.ch,u);return c==null?null:new Xt(s.line,c,u<0?"after":"before")}function wl(o,s,u,c,p){if(o){s.doc.direction=="rtl"&&(p=-p);var h=Ue(u,s.doc.direction);if(h){var y,w=p<0?se(h):h[0],S=p<0==(w.level==1)?"after":"before";if(w.level>0||s.doc.direction=="rtl"){var P=Fo(s,u);y=p<0?u.text.length-1:0;var tt=Kr(s,P,y).top;y=At(function(et){return Kr(s,P,et).top==tt},p<0==(w.level==1)?w.from:w.to-1,y),S=="before"&&(y=_a(u,y,1))}else y=p<0?w.to:w.from;return new Xt(c,y,S)}}return new Xt(c,p<0?u.text.length:0,p<0?"before":"after")}function Wu(o,s,u,c){var p=Ue(s,o.doc.direction);if(!p)return bl(s,u,c);u.ch>=s.text.length?(u.ch=s.text.length,u.sticky="before"):u.ch<=0&&(u.ch=0,u.sticky="after");var h=we(p,u.ch,u.sticky),y=p[h];if(o.doc.direction=="ltr"&&y.level%2==0&&(c>0?y.to>u.ch:y.from<u.ch))return bl(s,u,c);var w,S=function(pe,me){return _a(s,pe instanceof Xt?pe.ch:pe,me)},P=function(pe){return o.options.lineWrapping?(w=w||Fo(o,s),au(o,s,w,pe)):{begin:0,end:s.text.length}},tt=P(u.sticky=="before"?S(u,-1):u.ch);if(o.doc.direction=="rtl"||y.level==1){var et=y.level==1==c<0,xt=S(u,et?1:-1);if(xt!=null&&(et?xt<=y.to&&xt<=tt.end:xt>=y.from&&xt>=tt.begin)){var St=et?"before":"after";return new Xt(u.line,xt,St)}}var jt=function(pe,me,le){for(var ke=function(vn,xr){return xr?new Xt(u.line,S(vn,1),"before"):new Xt(u.line,vn,"after")};pe>=0&&pe<p.length;pe+=me){var Oe=p[pe],Me=me>0==(Oe.level!=1),gn=Me?le.begin:S(le.end,-1);if(Oe.from<=gn&&gn<Oe.to||(gn=Me?Oe.from:S(Oe.to,-1),le.begin<=gn&&gn<le.end))return ke(gn,Me)}},Gt=jt(h+c,c,tt);if(Gt)return Gt;var Qt=c>0?tt.end:S(tt.begin,-1);return Qt==null||c>0&&Qt==s.text.length||!(Gt=jt(c>0?0:p.length-1,c,P(Qt)))?null:Gt}yo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},yo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},yo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},yo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},yo.default=yt?yo.macDefault:yo.pcDefault;var Es={selectAll:ku,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),ge)},killLine:function(o){return ci(o,function(s){if(s.empty()){var u=Se(o.doc,s.head.line).text.length;return s.head.ch==u&&s.head.line<o.lastLine()?{from:s.head,to:Xt(s.head.line+1,0)}:{from:s.head,to:Xt(s.head.line,u)}}return{from:s.from(),to:s.to()}})},deleteLine:function(o){return ci(o,function(s){return{from:Xt(s.from().line,0),to:de(o.doc,Xt(s.to().line+1,0))}})},delLineLeft:function(o){return ci(o,function(s){return{from:Xt(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(o){return ci(o,function(s){var u=o.charCoords(s.head,"div").top+5;return{from:o.coordsChar({left:0,top:u},"div"),to:s.from()}})},delWrappedLineRight:function(o){return ci(o,function(s){var u=o.charCoords(s.head,"div").top+5,c=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div");return{from:s.from(),to:c}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection(Xt(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection(Xt(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(s){return Ca(o,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(s){return qu(o,s.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(s){return $u(o,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div")},re)},goLineLeft:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:0,top:u},"div")},re)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5,c=o.coordsChar({left:0,top:u},"div");return c.ch<o.getLine(c.line).search(/\S/)?qu(o,s.head):c},re)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var s=[],u=o.listSelections(),c=o.options.tabSize,p=0;p<u.length;p++){var h=u[p].from(),y=Ee(o.getLine(h.line),h.ch,c);s.push(ve(c-y%c))}o.replaceSelections(s)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return wr(o,function(){for(var s=o.listSelections(),u=[],c=0;c<s.length;c++)if(s[c].empty()){var p=s[c].head,h=Se(o.doc,p.line).text;if(h){if(p.ch==h.length&&(p=new Xt(p.line,p.ch-1)),p.ch>0)p=new Xt(p.line,p.ch+1),o.replaceRange(h.charAt(p.ch-1)+h.charAt(p.ch-2),Xt(p.line,p.ch-2),p,"+transpose");else if(p.line>o.doc.first){var y=Se(o.doc,p.line-1).text;y&&(p=new Xt(p.line,1),o.replaceRange(h.charAt(0)+o.doc.lineSeparator()+y.charAt(y.length-1),Xt(p.line-1,y.length-1),p,"+transpose"))}}u.push(new ln(p,p))}o.setSelections(u)})},newlineAndIndent:function(o){return wr(o,function(){for(var s=o.listSelections(),u=s.length-1;u>=0;u--)o.replaceRange(o.doc.lineSeparator(),s[u].anchor,s[u].head,"+input");s=o.listSelections();for(var c=0;c<s.length;c++)o.indentLine(s[c].from().line,null,!0);vs(o)})},openLine:function(o){return o.replaceSelection(`
`,"start")},toggleOverwrite:function(o){return o.toggleOverwrite()}};function Ca(o,s){var u=Se(o.doc,s),c=Dr(u);return c!=u&&(s=rn(c)),wl(!0,o,c,s,1)}function $u(o,s){var u=Se(o.doc,s),c=es(u);return c!=u&&(s=rn(c)),wl(!0,o,u,s,-1)}function qu(o,s){var u=Ca(o,s.line),c=Se(o.doc,u.line),p=Ue(c,o.doc.direction);if(!p||p[0].level==0){var h=Math.max(u.ch,c.text.search(/\S/)),y=s.line==u.line&&s.ch<=h&&s.ch;return Xt(u.line,y?0:h,u.sticky)}return u}function _l(o,s,u){if(typeof s=="string"&&!(s=Es[s]))return!1;o.display.input.ensurePolled();var c=o.display.shift,p=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),u&&(o.display.shift=!1),p=s(o)!=he}finally{o.display.shift=c,o.state.suppressEdits=!1}return p}function wf(o,s,u){for(var c=0;c<o.state.keyMaps.length;c++){var p=Hi(s,o.state.keyMaps[c],u,o);if(p)return p}return o.options.extraKeys&&Hi(s,o.options.extraKeys,u,o)||Hi(s,o.options.keyMap,u,o)}var _f=new Le;function xa(o,s,u,c){var p=o.state.keySeq;if(p){if(_c(s))return"handled";if(/\'$/.test(s)?o.state.keySeq=null:_f.set(50,function(){o.state.keySeq==p&&(o.state.keySeq=null,o.display.input.reset())}),ks(o,p+" "+s,u,c))return!0}return ks(o,s,u,c)}function ks(o,s,u,c){var p=wf(o,s,c);return p=="multi"&&(o.state.keySeq=s),p=="handled"&&On(o,"keyHandled",o,s,u),p!="handled"&&p!="multi"||(Qe(u),gs(o)),!!p}function Cc(o,s){var u=Uu(s,!0);return!!u&&(s.shiftKey&&!o.state.keySeq?xa(o,"Shift-"+u,s,function(c){return _l(o,c,!0)})||xa(o,u,s,function(c){if(typeof c=="string"?/^go[A-Z]/.test(c):c.motion)return _l(o,c)}):xa(o,u,s,function(c){return _l(o,c)}))}function Wo(o,s,u){return xa(o,"'"+u+"'",s,function(c){return _l(o,c,!0)})}var xc=null;function Sc(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField()||(s.curOp.focus=Nt(),kt(s,o)))){z&&C<11&&o.keyCode==27&&(o.returnValue=!1);var u=o.keyCode;s.display.shift=u==16||o.shiftKey;var c=Cc(s,o);ut&&(xc=c?u:null,c||u!=88||Ao||!(yt?o.metaKey:o.ctrlKey)||s.replaceSelection("",null,"cut")),U&&!yt&&!c&&u==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),u!=18||/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)||Gu(s)}}function Gu(o){var s=o.display.lineDiv;function u(c){c.keyCode!=18&&c.altKey||(it(s,"CodeMirror-crosshair"),pt(document,"keyup",u),pt(document,"mouseover",u))}te(s,"CodeMirror-crosshair"),oe(document,"keyup",u),oe(document,"mouseover",u)}function Ku(o){o.keyCode==16&&(this.doc.sel.shift=!1),kt(this,o)}function Ju(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField()||I(s.display,o)||kt(s,o)||o.ctrlKey&&!o.altKey||yt&&o.metaKey)){var u=o.keyCode,c=o.charCode;if(ut&&u==xc)return xc=null,void Qe(o);if(!ut||o.which&&!(o.which<10)||!Cc(s,o)){var p=String.fromCharCode(c??u);p!="\b"&&(Wo(s,o,p)||s.display.input.onKeyPress(o))}}}var Sa,Oa,Cf=400,Cl=function(o,s,u){this.time=o,this.pos=s,this.button=u};function xl(o,s){var u=+new Date;return Oa&&Oa.compare(u,o,s)?(Sa=Oa=null,"triple"):Sa&&Sa.compare(u,o,s)?(Oa=new Cl(u,o,s),Sa=null,"double"):(Sa=new Cl(u,o,s),Oa=null,"single")}function Yu(o){var s=this,u=s.display;if(!(kt(s,o)||u.activeTouch&&u.input.supportsTouch())){if(u.input.ensurePolled(),u.shift=o.shiftKey,I(u,o))O||(u.scroller.draggable=!1,setTimeout(function(){return u.scroller.draggable=!0},100));else if(!Tc(s,o)){var c=ki(s,o),p=nr(o),h=c?xl(c,p):"single";window.focus(),p==1&&s.state.selectingText&&s.state.selectingText(o),c&&Xu(s,p,c,h,o)||(p==1?c?xf(s,c,h,o):Rr(o)==u.scroller&&Qe(o):p==2?(c&&fl(s.doc,c),setTimeout(function(){return u.input.focus()},20)):p==3&&(E?s.display.input.onContextMenu(o):Ql(s)))}}}function Xu(o,s,u,c,p){var h="Click";return c=="double"?h="Double"+h:c=="triple"&&(h="Triple"+h),xa(o,Bu(h=(s==1?"Left":s==2?"Middle":"Right")+h,p),p,function(y){if(typeof y=="string"&&(y=Es[y]),!y)return!1;var w=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),w=y(o,u)!=he}finally{o.state.suppressEdits=!1}return w})}function Zu(o,s,u){var c=o.getOption("configureMouse"),p=c?c(o,s,u):{};if(p.unit==null){var h=Ht?u.shiftKey&&u.metaKey:u.altKey;p.unit=h?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(p.extend==null||o.doc.extend)&&(p.extend=o.doc.extend||u.shiftKey),p.addNew==null&&(p.addNew=yt?u.metaKey:u.ctrlKey),p.moveOnDrag==null&&(p.moveOnDrag=!(yt?u.altKey:u.ctrlKey)),p}function xf(o,s,u,c){z?setTimeout(Pe(uu,o),0):o.curOp.focus=Nt();var p,h=Zu(o,u,c),y=o.doc.sel;o.options.dragDrop&&kn&&!o.isReadOnly()&&u=="single"&&(p=y.contains(s))>-1&&(A((p=y.ranges[p]).from(),s)<0||s.xRel>0)&&(A(p.to(),s)>0||s.xRel<0)?Sf(o,c,s,h):Ta(o,c,s,h)}function Sf(o,s,u,c){var p=o.display,h=!1,y=tr(o,function(P){O&&(p.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:Ql(o)),pt(p.wrapper.ownerDocument,"mouseup",y),pt(p.wrapper.ownerDocument,"mousemove",w),pt(p.scroller,"dragstart",S),pt(p.scroller,"drop",y),h||(Qe(P),c.addNew||fl(o.doc,u,null,null,c.extend),O&&!ht||z&&C==9?setTimeout(function(){p.wrapper.ownerDocument.body.focus({preventScroll:!0}),p.input.focus()},20):p.input.focus())}),w=function(P){h=h||Math.abs(s.clientX-P.clientX)+Math.abs(s.clientY-P.clientY)>=10},S=function(){return h=!0};O&&(p.scroller.draggable=!0),o.state.draggingText=y,y.copy=!c.moveOnDrag,oe(p.wrapper.ownerDocument,"mouseup",y),oe(p.wrapper.ownerDocument,"mousemove",w),oe(p.scroller,"dragstart",S),oe(p.scroller,"drop",y),o.state.delayingBlurEvent=!0,setTimeout(function(){return p.input.focus()},20),p.scroller.dragDrop&&p.scroller.dragDrop()}function Qu(o,s,u){if(u=="char")return new ln(s,s);if(u=="word")return o.findWordAt(s);if(u=="line")return new ln(Xt(s.line,0),de(o.doc,Xt(s.line+1,0)));var c=u(o,s);return new ln(c.from,c.to)}function Ta(o,s,u,c){z&&Ql(o);var p=o.display,h=o.doc;Qe(s);var y,w,S=h.sel,P=S.ranges;if(c.addNew&&!c.extend?(w=h.sel.contains(u),y=w>-1?P[w]:new ln(u,u)):(y=h.sel.primary(),w=h.sel.primIndex),c.unit=="rectangle")c.addNew||(y=new ln(u,u)),u=ki(o,s,!0,!0),w=-1;else{var tt=Qu(o,u,c.unit);y=c.extend?Ii(y,tt.anchor,tt.head,c.extend):tt}c.addNew?w==-1?(w=P.length,ar(h,ao(o,P.concat([y]),w),{scroll:!1,origin:"*mouse"})):P.length>1&&P[w].empty()&&c.unit=="char"&&!c.extend?(ar(h,ao(o,P.slice(0,w).concat(P.slice(w+1)),0),{scroll:!1,origin:"*mouse"}),S=h.sel):dl(h,w,y,gt):(w=0,ar(h,new Yr([y],0),gt),S=h.sel);var et=u;function xt(le){if(A(et,le)!=0)if(et=le,c.unit=="rectangle"){for(var ke=[],Oe=o.options.tabSize,Me=Ee(Se(h,u.line).text,u.ch,Oe),gn=Ee(Se(h,le.line).text,le.ch,Oe),vn=Math.min(Me,gn),xr=Math.max(Me,gn),Cn=Math.min(u.line,le.line),dr=Math.min(o.lastLine(),Math.max(u.line,le.line));Cn<=dr;Cn++){var Sr=Se(h,Cn).text,Pn=Zt(Sr,vn,Oe);vn==xr?ke.push(new ln(Xt(Cn,Pn),Xt(Cn,Pn))):Sr.length>Pn&&ke.push(new ln(Xt(Cn,Pn),Xt(Cn,Zt(Sr,xr,Oe))))}ke.length||ke.push(new ln(u,u)),ar(h,ao(o,S.ranges.slice(0,w).concat(ke),w),{origin:"*mouse",scroll:!1}),o.scrollIntoView(le)}else{var Fn,_r=y,qn=Qu(o,le,c.unit),Rn=_r.anchor;A(qn.anchor,Rn)>0?(Fn=qn.head,Rn=_e(_r.from(),qn.anchor)):(Fn=qn.anchor,Rn=ce(_r.to(),qn.head));var Vn=S.ranges.slice(0);Vn[w]=Sl(o,new ln(de(h,Rn),Fn)),ar(h,ao(o,Vn,w),gt)}}var St=p.wrapper.getBoundingClientRect(),jt=0;function Gt(le){var ke=++jt,Oe=ki(o,le,!0,c.unit=="rectangle");if(Oe)if(A(Oe,et)!=0){o.curOp.focus=Nt(),xt(Oe);var Me=sa(p,h);(Oe.line>=Me.to||Oe.line<Me.from)&&setTimeout(tr(o,function(){jt==ke&&Gt(le)}),150)}else{var gn=le.clientY<St.top?-20:le.clientY>St.bottom?20:0;gn&&setTimeout(tr(o,function(){jt==ke&&(p.scroller.scrollTop+=gn,Gt(le))}),50)}}function Qt(le){o.state.selectingText=!1,jt=1/0,le&&(Qe(le),p.input.focus()),pt(p.wrapper.ownerDocument,"mousemove",pe),pt(p.wrapper.ownerDocument,"mouseup",me),h.history.lastSelOrigin=null}var pe=tr(o,function(le){le.buttons!==0&&nr(le)?Gt(le):Qt(le)}),me=tr(o,Qt);o.state.selectingText=me,oe(p.wrapper.ownerDocument,"mousemove",pe),oe(p.wrapper.ownerDocument,"mouseup",me)}function Sl(o,s){var u=s.anchor,c=s.head,p=Se(o.doc,u.line);if(A(u,c)==0&&u.sticky==c.sticky)return s;var h=Ue(p);if(!h)return s;var y=we(h,u.ch,u.sticky),w=h[y];if(w.from!=u.ch&&w.to!=u.ch)return s;var S,P=y+(w.from==u.ch==(w.level!=1)?0:1);if(P==0||P==h.length)return s;if(c.line!=u.line)S=(c.line-u.line)*(o.doc.direction=="ltr"?1:-1)>0;else{var tt=we(h,c.ch,c.sticky),et=tt-y||(c.ch-u.ch)*(w.level==1?-1:1);S=tt==P-1||tt==P?et<0:et>0}var xt=h[P+(S?-1:0)],St=S==(xt.level==1),jt=St?xt.from:xt.to,Gt=St?"after":"before";return u.ch==jt&&u.sticky==Gt?s:new ln(new Xt(u.line,jt,Gt),c)}function Oc(o,s,u,c){var p,h;if(s.touches)p=s.touches[0].clientX,h=s.touches[0].clientY;else try{p=s.clientX,h=s.clientY}catch{return!1}if(p>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;c&&Qe(s);var y=o.display,w=y.lineDiv.getBoundingClientRect();if(h>w.bottom||!xe(o,u))return wn(s);h-=w.top-y.viewOffset;for(var S=0;S<o.display.gutterSpecs.length;++S){var P=y.gutters.childNodes[S];if(P&&P.getBoundingClientRect().right>=p)return _t(o,u,o,Wn(o.doc,h),o.display.gutterSpecs[S].className,s),wn(s)}}function Tc(o,s){return Oc(o,s,"gutterClick",!0)}function tp(o,s){I(o.display,s)||Of(o,s)||kt(o,s,"contextmenu")||E||o.display.input.onContextMenu(s)}function Of(o,s){return!!xe(o,"gutterContextMenu")&&Oc(o,s,"gutterContextMenu",!1)}function Ec(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ps(o)}Cl.prototype.compare=function(o,s,u){return this.time+Cf>o&&A(s,this.pos)==0&&u==this.button};var Ps={toString:function(){return"CodeMirror.Init"}},ep={},As={};function np(o){var s=o.optionHandlers;function u(c,p,h,y){o.defaults[c]=p,h&&(s[c]=y?function(w,S,P){P!=Ps&&h(w,S,P)}:h)}o.defineOption=u,o.Init=Ps,u("value","",function(c,p){return c.setValue(p)},!0),u("mode",null,function(c,p){c.doc.modeOption=p,ll(c)},!0),u("indentUnit",2,ll,!0),u("indentWithTabs",!1),u("smartIndent",!0),u("tabSize",4,function(c){zo(c),ps(c),sr(c)},!0),u("lineSeparator",null,function(c,p){if(c.doc.lineSep=p,p){var h=[],y=c.doc.first;c.doc.iter(function(S){for(var P=0;;){var tt=S.text.indexOf(p,P);if(tt==-1)break;P=tt+p.length,h.push(Xt(y,tt))}y++});for(var w=h.length-1;w>=0;w--)xs(c.doc,p,h[w],Xt(h[w].line,h[w].ch+p.length))}}),u("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(c,p,h){c.state.specialChars=new RegExp(p.source+(p.test("	")?"":"|	"),"g"),h!=Ps&&c.refresh()}),u("specialCharPlaceholder",Wa,function(c){return c.refresh()},!0),u("electricChars",!0),u("inputStyle",mt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),u("spellcheck",!1,function(c,p){return c.getInputField().spellcheck=p},!0),u("autocorrect",!1,function(c,p){return c.getInputField().autocorrect=p},!0),u("autocapitalize",!1,function(c,p){return c.getInputField().autocapitalize=p},!0),u("rtlMoveVisually",!Kt),u("wholeLineUpdateBefore",!0),u("theme","default",function(c){Ec(c),bs(c)},!0),u("keyMap","default",function(c,p,h){var y=Uo(p),w=h!=Ps&&Uo(h);w&&w.detach&&w.detach(c,y),y.attach&&y.attach(c,w||null)}),u("extraKeys",null),u("configureMouse",null),u("lineWrapping",!1,Ef,!0),u("gutters",[],function(c,p){c.display.gutterSpecs=il(p,c.options.lineNumbers),bs(c)},!0),u("fixedGutter",!0,function(c,p){c.display.gutters.style.left=p?Xl(c.display)+"px":"0",c.refresh()},!0),u("coverGutterNextToScrollbar",!1,function(c){return ms(c)},!0),u("scrollbarStyle","native",function(c){du(c),ms(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),u("lineNumbers",!1,function(c,p){c.display.gutterSpecs=il(c.options.gutters,p),bs(c)},!0),u("firstLineNumber",1,bs,!0),u("lineNumberFormatter",function(c){return c},bs,!0),u("showCursorWhenSelecting",!1,ea,!0),u("resetSelectionOnContextMenu",!0),u("lineWiseCopyCut",!0),u("pasteLinesPerSelection",!0),u("selectionsMayTouch",!1),u("readOnly",!1,function(c,p){p=="nocursor"&&(Ai(c),c.display.input.blur()),c.display.input.readOnlyChanged(p)}),u("screenReaderLabel",null,function(c,p){p=p===""?null:p,c.display.input.screenReaderLabelChanged(p)}),u("disableInput",!1,function(c,p){p||c.display.input.reset()},!0),u("dragDrop",!0,Tf),u("allowDropFileTypes",null),u("cursorBlinkRate",530),u("cursorScrollMargin",0),u("cursorHeight",1,ea,!0),u("singleCursorHeightPerLine",!0,ea,!0),u("workTime",100),u("workDelay",100),u("flattenSpans",!0,zo,!0),u("addModeClass",!1,zo,!0),u("pollInterval",100),u("undoDepth",200,function(c,p){return c.doc.history.undoDepth=p}),u("historyEventDelay",1250),u("viewportMargin",10,function(c){return c.refresh()},!0),u("maxHighlightLength",1e4,zo,!0),u("moveInputWithCursor",!0,function(c,p){p||c.display.input.resetPosition()}),u("tabindex",null,function(c,p){return c.display.input.getField().tabIndex=p||""}),u("autofocus",null),u("direction","ltr",function(c,p){return c.doc.setDirection(p)},!0),u("phrases",null)}function Tf(o,s,u){if(!s!=!(u&&u!=Ps)){var c=o.display.dragFunctions,p=s?oe:pt;p(o.display.scroller,"dragstart",c.start),p(o.display.scroller,"dragenter",c.enter),p(o.display.scroller,"dragover",c.over),p(o.display.scroller,"dragleave",c.leave),p(o.display.scroller,"drop",c.drop)}}function Ef(o){o.options.lineWrapping?(te(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(it(o.display.wrapper,"CodeMirror-wrap"),Js(o)),Zl(o),sr(o),ps(o),setTimeout(function(){return ms(o)},100)}function Tn(o,s){var u=this;if(!(this instanceof Tn))return new Tn(o,s);this.options=s=s?He(s):{},He(ep,s,!1);var c=s.value;typeof c=="string"?c=new $n(c,s.mode,null,s.lineSeparator,s.direction):s.mode&&(c.modeOption=s.mode),this.doc=c;var p=new Tn.inputStyles[s.inputStyle](this),h=this.display=new yu(o,c,p,s);for(var y in h.wrapper.CodeMirror=this,Ec(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),du(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Le,keySeq:null,specialChars:null},s.autofocus&&!mt&&h.input.focus(),z&&C<11&&setTimeout(function(){return u.display.input.reset(!0)},20),kf(this),jn(),Li(this),this.curOp.forceUpdate=!0,Su(this,c),s.autofocus&&!mt||this.hasFocus()?setTimeout(function(){u.hasFocus()&&!u.state.focused&&tc(u)},20):Ai(this),As)As.hasOwnProperty(y)&&As[y](this,s[y],Ps);vu(this),s.finishInit&&s.finishInit(this);for(var w=0;w<kc.length;++w)kc[w](this);Di(this),O&&s.lineWrapping&&getComputedStyle(h.lineDiv).textRendering=="optimizelegibility"&&(h.lineDiv.style.textRendering="auto")}function kf(o){var s=o.display;oe(s.scroller,"mousedown",tr(o,Yu)),oe(s.scroller,"dblclick",z&&C<11?tr(o,function(S){if(!kt(o,S)){var P=ki(o,S);if(P&&!Tc(o,S)&&!I(o.display,S)){Qe(S);var tt=o.findWordAt(P);fl(o.doc,tt.anchor,tt.head)}}}):function(S){return kt(o,S)||Qe(S)}),oe(s.scroller,"contextmenu",function(S){return tp(o,S)}),oe(s.input.getField(),"contextmenu",function(S){s.scroller.contains(S.target)||tp(o,S)});var u,c={end:0};function p(){s.activeTouch&&(u=setTimeout(function(){return s.activeTouch=null},1e3),(c=s.activeTouch).end=+new Date)}function h(S){if(S.touches.length!=1)return!1;var P=S.touches[0];return P.radiusX<=1&&P.radiusY<=1}function y(S,P){if(P.left==null)return!0;var tt=P.left-S.left,et=P.top-S.top;return tt*tt+et*et>400}oe(s.scroller,"touchstart",function(S){if(!kt(o,S)&&!h(S)&&!Tc(o,S)){s.input.ensurePolled(),clearTimeout(u);var P=+new Date;s.activeTouch={start:P,moved:!1,prev:P-c.end<=300?c:null},S.touches.length==1&&(s.activeTouch.left=S.touches[0].pageX,s.activeTouch.top=S.touches[0].pageY)}}),oe(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),oe(s.scroller,"touchend",function(S){var P=s.activeTouch;if(P&&!I(s,S)&&P.left!=null&&!P.moved&&new Date-P.start<300){var tt,et=o.coordsChar(s.activeTouch,"page");tt=!P.prev||y(P,P.prev)?new ln(et,et):!P.prev.prev||y(P,P.prev.prev)?o.findWordAt(et):new ln(Xt(et.line,0),de(o.doc,Xt(et.line+1,0))),o.setSelection(tt.anchor,tt.head),o.focus(),Qe(S)}p()}),oe(s.scroller,"touchcancel",p),oe(s.scroller,"scroll",function(){s.scroller.clientHeight&&(la(o,s.scroller.scrollTop),Vo(o,s.scroller.scrollLeft,!0),_t(o,"scroll",o))}),oe(s.scroller,"mousewheel",function(S){return wu(o,S)}),oe(s.scroller,"DOMMouseScroll",function(S){return wu(o,S)}),oe(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(S){kt(o,S)||Ge(S)},over:function(S){kt(o,S)||(bf(o,S),Ge(S))},start:function(S){return Fu(o,S)},drop:tr(o,yf),leave:function(S){kt(o,S)||Ru(o)}};var w=s.input.getField();oe(w,"keyup",function(S){return Ku.call(o,S)}),oe(w,"keydown",tr(o,Sc)),oe(w,"keypress",tr(o,Ju)),oe(w,"focus",function(S){return tc(o,S)}),oe(w,"blur",function(S){return Ai(o,S)})}Tn.defaults=ep,Tn.optionHandlers=As;var kc=[];function Ea(o,s,u,c){var p,h=o.doc;u==null&&(u="add"),u=="smart"&&(h.mode.indent?p=To(o,s).state:u="prev");var y=o.options.tabSize,w=Se(h,s),S=Ee(w.text,null,y);w.stateAfter&&(w.stateAfter=null);var P,tt=w.text.match(/^\s*/)[0];if(c||/\S/.test(w.text)){if(u=="smart"&&((P=h.mode.indent(p,w.text.slice(tt.length),w.text))==he||P>150)){if(!c)return;u="prev"}}else P=0,u="not";u=="prev"?P=s>h.first?Ee(Se(h,s-1).text,null,y):0:u=="add"?P=S+o.options.indentUnit:u=="subtract"?P=S-o.options.indentUnit:typeof u=="number"&&(P=S+u),P=Math.max(0,P);var et="",xt=0;if(o.options.indentWithTabs)for(var St=Math.floor(P/y);St;--St)xt+=y,et+="	";if(xt<P&&(et+=ve(P-xt)),et!=tt)return xs(h,et,Xt(s,0),Xt(s,tt.length),"+input"),w.stateAfter=null,!0;for(var jt=0;jt<h.sel.ranges.length;jt++){var Gt=h.sel.ranges[jt];if(Gt.head.line==s&&Gt.head.ch<tt.length){var Qt=Xt(s,tt.length);dl(h,jt,new ln(Qt,Qt));break}}}Tn.defineInitHook=function(o){return kc.push(o)};var bo=null;function Ol(o){bo=o}function Pc(o,s,u,c,p){var h=o.doc;o.display.shift=!1,c||(c=h.sel);var y=+new Date-200,w=p=="paste"||o.state.pasteIncoming>y,S=Po(s),P=null;if(w&&c.ranges.length>1)if(bo&&bo.text.join(`
`)==s){if(c.ranges.length%bo.text.length==0){P=[];for(var tt=0;tt<bo.text.length;tt++)P.push(h.splitLines(bo.text[tt]))}}else S.length==c.ranges.length&&o.options.pasteLinesPerSelection&&(P=Ne(S,function(pe){return[pe]}));for(var et=o.curOp.updateInput,xt=c.ranges.length-1;xt>=0;xt--){var St=c.ranges[xt],jt=St.from(),Gt=St.to();St.empty()&&(u&&u>0?jt=Xt(jt.line,jt.ch-u):o.state.overwrite&&!w?Gt=Xt(Gt.line,Math.min(Se(h,Gt.line).text.length,Gt.ch+se(S).length)):w&&bo&&bo.lineWise&&bo.text.join(`
`)==S.join(`
`)&&(jt=Gt=Xt(jt.line,0)));var Qt={from:jt,to:Gt,text:P?P[xt%P.length]:S,origin:p||(w?"paste":o.state.cutIncoming>y?"cut":"+input")};Ri(o.doc,Qt),On(o,"inputRead",o,Qt)}s&&!w&&Ac(o,s),vs(o),o.curOp.updateInput<2&&(o.curOp.updateInput=et),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function rp(o,s){var u=o.clipboardData&&o.clipboardData.getData("Text");if(u)return o.preventDefault(),s.isReadOnly()||s.options.disableInput||!s.hasFocus()||wr(s,function(){return Pc(s,u,0,null,"paste")}),!0}function Ac(o,s){if(o.options.electricChars&&o.options.smartIndent)for(var u=o.doc.sel,c=u.ranges.length-1;c>=0;c--){var p=u.ranges[c];if(!(p.head.ch>100||c&&u.ranges[c-1].head.line==p.head.line)){var h=o.getModeAt(p.head),y=!1;if(h.electricChars){for(var w=0;w<h.electricChars.length;w++)if(s.indexOf(h.electricChars.charAt(w))>-1){y=Ea(o,p.head.line,"smart");break}}else h.electricInput&&h.electricInput.test(Se(o.doc,p.head.line).text.slice(0,p.head.ch))&&(y=Ea(o,p.head.line,"smart"));y&&On(o,"electricInput",o,p.head.line)}}}function op(o){for(var s=[],u=[],c=0;c<o.doc.sel.ranges.length;c++){var p=o.doc.sel.ranges[c].head.line,h={anchor:Xt(p,0),head:Xt(p+1,0)};u.push(h),s.push(o.getRange(h.anchor,h.head))}return{text:s,ranges:u}}function ip(o,s,u,c){o.setAttribute("autocorrect",u?"":"off"),o.setAttribute("autocapitalize",c?"":"off"),o.setAttribute("spellcheck",!!s)}function sp(){var o=Ct("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=Ct("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return O?o.style.width="1000px":o.setAttribute("wrap","off"),zt&&(o.style.border="1px solid black"),ip(o),s}function jc(o){var s=o.optionHandlers,u=o.helpers={};o.prototype={constructor:o,focus:function(){window.focus(),this.display.input.focus()},setOption:function(c,p){var h=this.options,y=h[c];h[c]==p&&c!="mode"||(h[c]=p,s.hasOwnProperty(c)&&tr(this,s[c])(this,p,y),_t(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,p){this.state.keyMaps[p?"push":"unshift"](Uo(c))},removeKeyMap:function(c){for(var p=this.state.keyMaps,h=0;h<p.length;++h)if(p[h]==c||p[h].name==c)return p.splice(h,1),!0},addOverlay:fr(function(c,p){var h=c.token?c:o.getMode(this.options,c);if(h.startState)throw new Error("Overlays may not be stateful.");Ze(this.state.overlays,{mode:h,modeSpec:c,opaque:p&&p.opaque,priority:p&&p.priority||0},function(y){return y.priority}),this.state.modeGen++,sr(this)}),removeOverlay:fr(function(c){for(var p=this.state.overlays,h=0;h<p.length;++h){var y=p[h].modeSpec;if(y==c||typeof c=="string"&&y.name==c)return p.splice(h,1),this.state.modeGen++,void sr(this)}}),indentLine:fr(function(c,p,h){typeof p!="string"&&typeof p!="number"&&(p=p==null?this.options.smartIndent?"smart":"prev":p?"add":"subtract"),Oo(this.doc,c)&&Ea(this,c,p,h)}),indentSelection:fr(function(c){for(var p=this.doc.sel.ranges,h=-1,y=0;y<p.length;y++){var w=p[y];if(w.empty())w.head.line>h&&(Ea(this,w.head.line,c,!0),h=w.head.line,y==this.doc.sel.primIndex&&vs(this));else{var S=w.from(),P=w.to(),tt=Math.max(h,S.line);h=Math.min(this.lastLine(),P.line-(P.ch?0:1))+1;for(var et=tt;et<h;++et)Ea(this,et,c);var xt=this.doc.sel.ranges;S.ch==0&&p.length==xt.length&&xt[y].from().ch>0&&dl(this.doc,y,new ln(S,xt[y].to()),ge)}}}),getTokenAt:function(c,p){return Zo(this,c,p)},getLineTokens:function(c,p){return Zo(this,Xt(c),p,!0)},getTokenTypeAt:function(c){c=de(this.doc,c);var p,h=jr(this,Se(this.doc,c.line)),y=0,w=(h.length-1)/2,S=c.ch;if(S==0)p=h[2];else for(;;){var P=y+w>>1;if((P?h[2*P-1]:0)>=S)w=P;else{if(!(h[2*P+1]<S)){p=h[2*P+2];break}y=P+1}}var tt=p?p.indexOf("overlay "):-1;return tt<0?p:tt==0?null:p.slice(0,tt-1)},getModeAt:function(c){var p=this.doc.mode;return p.innerMode?o.innerMode(p,this.getTokenAt(c).state).mode:p},getHelper:function(c,p){return this.getHelpers(c,p)[0]},getHelpers:function(c,p){var h=[];if(!u.hasOwnProperty(p))return h;var y=u[p],w=this.getModeAt(c);if(typeof w[p]=="string")y[w[p]]&&h.push(y[w[p]]);else if(w[p])for(var S=0;S<w[p].length;S++){var P=y[w[p][S]];P&&h.push(P)}else w.helperType&&y[w.helperType]?h.push(y[w.helperType]):y[w.name]&&h.push(y[w.name]);for(var tt=0;tt<y._global.length;tt++){var et=y._global[tt];et.pred(w,this)&&Ce(h,et.val)==-1&&h.push(et.val)}return h},getStateAfter:function(c,p){var h=this.doc;return To(this,(c=tn(h,c??h.first+h.size-1))+1,p).state},cursorCoords:function(c,p){var h=this.doc.sel.primary();return Ir(this,c==null?h.head:typeof c=="object"?de(this.doc,c):c?h.from():h.to(),p||"page")},charCoords:function(c,p){return Za(this,de(this.doc,c),p||"page")},coordsChar:function(c,p){return Kl(this,(c=ql(this,c,p||"page")).left,c.top)},lineAtHeight:function(c,p){return c=ql(this,{top:c,left:0},p||"page").top,Wn(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,p,h){var y,w=!1;if(typeof c=="number"){var S=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>S&&(c=S,w=!0),y=Se(this.doc,c)}else y=c;return Xa(this,y,{top:0,left:0},p||"page",h||w).top+(w?this.doc.height-$r(y):0)},defaultTextHeight:function(){return go(this.display)},defaultCharWidth:function(){return oi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,p,h,y,w){var S=this.display,P=(c=Ir(this,de(this.doc,c))).bottom,tt=c.left;if(p.style.position="absolute",p.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(p),S.sizer.appendChild(p),y=="over")P=c.top;else if(y=="above"||y=="near"){var et=Math.max(S.wrapper.clientHeight,this.doc.height),xt=Math.max(S.sizer.clientWidth,S.lineSpace.clientWidth);(y=="above"||c.bottom+p.offsetHeight>et)&&c.top>p.offsetHeight?P=c.top-p.offsetHeight:c.bottom+p.offsetHeight<=et&&(P=c.bottom),tt+p.offsetWidth>xt&&(tt=xt-p.offsetWidth)}p.style.top=P+"px",p.style.left=p.style.right="",w=="right"?(tt=S.sizer.clientWidth-p.offsetWidth,p.style.right="0px"):(w=="left"?tt=0:w=="middle"&&(tt=(S.sizer.clientWidth-p.offsetWidth)/2),p.style.left=tt+"px"),h&&Xp(this,{left:tt,top:P,right:tt+p.offsetWidth,bottom:P+p.offsetHeight})},triggerOnKeyDown:fr(Sc),triggerOnKeyPress:fr(Ju),triggerOnKeyUp:Ku,triggerOnMouseDown:fr(Yu),execCommand:function(c){if(Es.hasOwnProperty(c))return Es[c].call(null,this)},triggerElectric:fr(function(c){Ac(this,c)}),findPosH:function(c,p,h,y){var w=1;p<0&&(w=-1,p=-p);for(var S=de(this.doc,c),P=0;P<p&&!(S=Tl(this.doc,S,w,h,y)).hitSide;++P);return S},moveH:fr(function(c,p){var h=this;this.extendSelectionsBy(function(y){return h.display.shift||h.doc.extend||y.empty()?Tl(h.doc,y.head,c,p,h.options.rtlMoveVisually):c<0?y.from():y.to()},re)}),deleteH:fr(function(c,p){var h=this.doc.sel,y=this.doc;h.somethingSelected()?y.replaceSelection("",null,"+delete"):ci(this,function(w){var S=Tl(y,w.head,c,p,!1);return c<0?{from:S,to:w.head}:{from:w.head,to:S}})}),findPosV:function(c,p,h,y){var w=1,S=y;p<0&&(w=-1,p=-p);for(var P=de(this.doc,c),tt=0;tt<p;++tt){var et=Ir(this,P,"div");if(S==null?S=et.left:et.left=S,(P=El(this,et,w,h)).hitSide)break}return P},moveV:fr(function(c,p){var h=this,y=this.doc,w=[],S=!this.display.shift&&!y.extend&&y.sel.somethingSelected();if(y.extendSelectionsBy(function(tt){if(S)return c<0?tt.from():tt.to();var et=Ir(h,tt.head,"div");tt.goalColumn!=null&&(et.left=tt.goalColumn),w.push(et.left);var xt=El(h,et,c,p);return p=="page"&&tt==y.sel.primary()&&nl(h,Za(h,xt,"div").top-et.top),xt},re),w.length)for(var P=0;P<y.sel.ranges.length;P++)y.sel.ranges[P].goalColumn=w[P]}),findWordAt:function(c){var p=Se(this.doc,c.line).text,h=c.ch,y=c.ch;if(p){var w=this.getHelper(c,"wordChars");c.sticky!="before"&&y!=p.length||!h?++y:--h;for(var S=p.charAt(h),P=qt(S,w)?function(tt){return qt(tt,w)}:/\s/.test(S)?function(tt){return/\s/.test(tt)}:function(tt){return!/\s/.test(tt)&&!qt(tt)};h>0&&P(p.charAt(h-1));)--h;for(;y<p.length&&P(p.charAt(y));)++y}return new ln(Xt(c.line,h),Xt(c.line,y))},toggleOverwrite:function(c){c!=null&&c==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?te(this.display.cursorDiv,"CodeMirror-overwrite"):it(this.display.cursorDiv,"CodeMirror-overwrite"),_t(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Nt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:fr(function(c,p){aa(this,c,p)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-bt(this)-this.display.barHeight,width:c.scrollWidth-bt(this)-this.display.barWidth,clientHeight:ee(this),clientWidth:Ut(this)}},scrollIntoView:fr(function(c,p){c==null?(c={from:this.doc.sel.primary().head,to:null},p==null&&(p=this.options.cursorScrollMargin)):typeof c=="number"?c={from:Xt(c,0),to:null}:c.from==null&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=p||0,c.from.line!=null?Zp(this,c):pu(this,c.from,c.to,c.margin)}),setSize:fr(function(c,p){var h=this,y=function(S){return typeof S=="number"||/^\d+$/.test(String(S))?S+"px":S};c!=null&&(this.display.wrapper.style.width=y(c)),p!=null&&(this.display.wrapper.style.height=y(p)),this.options.lineWrapping&&Ja(this);var w=this.display.viewFrom;this.doc.iter(w,this.display.viewTo,function(S){if(S.widgets){for(var P=0;P<S.widgets.length;P++)if(S.widgets[P].noHScroll){vo(h,w,"widget");break}}++w}),this.curOp.forceUpdate=!0,_t(this,"refresh",this)}),operation:function(c){return wr(this,c)},startOperation:function(){return Li(this)},endOperation:function(){return Di(this)},refresh:fr(function(){var c=this.display.cachedTextHeight;sr(this),this.curOp.forceUpdate=!0,ps(this),aa(this,this.doc.scrollLeft,this.doc.scrollTop),ic(this.display),(c==null||Math.abs(c-go(this.display))>.5||this.options.lineWrapping)&&Zl(this),_t(this,"refresh",this)}),swapDoc:fr(function(c){var p=this.doc;return p.cm=null,this.state.selectingText&&this.state.selectingText(),Su(this,c),ps(this),this.display.input.reset(),aa(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,On(this,"swapDoc",this,p),p}),phrase:function(c){var p=this.options.phrases;return p&&Object.prototype.hasOwnProperty.call(p,c)?p[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},$e(o),o.registerHelper=function(c,p,h){u.hasOwnProperty(c)||(u[c]=o[c]={_global:[]}),u[c][p]=h},o.registerGlobalHelper=function(c,p,h,y){o.registerHelper(c,p,y),u[c]._global.push({pred:h,val:y})}}function Tl(o,s,u,c,p){var h=s,y=u,w=Se(o,s.line),S=p&&o.direction=="rtl"?-u:u;function P(){var me=s.line+S;return!(me<o.first||me>=o.first+o.size)&&(s=new Xt(me,s.ch,s.sticky),w=Se(o,me))}function tt(me){var le;if(c=="codepoint"){var ke=w.text.charCodeAt(s.ch+(u>0?0:-1));if(isNaN(ke))le=null;else{var Oe=u>0?ke>=55296&&ke<56320:ke>=56320&&ke<57343;le=new Xt(s.line,Math.max(0,Math.min(w.text.length,s.ch+u*(Oe?2:1))),-u)}}else le=p?Wu(o.cm,w,s,u):bl(w,s,u);if(le==null){if(me||!P())return!1;s=wl(p,o.cm,w,s.line,S)}else s=le;return!0}if(c=="char"||c=="codepoint")tt();else if(c=="column")tt(!0);else if(c=="word"||c=="group")for(var et=null,xt=c=="group",St=o.cm&&o.cm.getHelper(s,"wordChars"),jt=!0;!(u<0)||tt(!jt);jt=!1){var Gt=w.text.charAt(s.ch)||`
`,Qt=qt(Gt,St)?"w":xt&&Gt==`
`?"n":!xt||/\s/.test(Gt)?null:"p";if(!xt||jt||Qt||(Qt="s"),et&&et!=Qt){u<0&&(u=1,tt(),s.sticky="after");break}if(Qt&&(et=Qt),u>0&&!tt(!jt))break}var pe=ha(o,s,h,y,!0);return nt(h,pe)&&(pe.hitSide=!0),pe}function El(o,s,u,c){var p,h,y=o.doc,w=s.left;if(c=="page"){var S=Math.min(o.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),P=Math.max(S-.5*go(o.display),3);p=(u>0?s.bottom:s.top)+u*P}else c=="line"&&(p=u>0?s.bottom+3:s.top-3);for(;(h=Kl(o,w,p)).outside;){if(u<0?p<=0:p>=y.height){h.hitSide=!0;break}p+=5*u}return h}var pn=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Le,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Mc(o,s){var u=us(o,s.line);if(!u||u.hidden)return null;var c=Se(o.doc,s.line),p=Ke(u,c,s.line),h=Ue(c,o.doc.direction),y="left";h&&(y=we(h,s.ch)%2?"right":"left");var w=ta(p.map,s.ch,y);return w.offset=w.collapse=="right"?w.end:w.start,w}function Pf(o){for(var s=o;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function js(o,s){return s&&(o.bad=!0),o}function Lc(o,s,u,c,p){var h="",y=!1,w=o.doc.lineSeparator(),S=!1;function P(St){return function(jt){return jt.id==St}}function tt(){y&&(h+=w,S&&(h+=w),y=S=!1)}function et(St){St&&(tt(),h+=St)}function xt(St){if(St.nodeType==1){var jt=St.getAttribute("cm-text");if(jt)return void et(jt);var Gt,Qt=St.getAttribute("cm-marker");if(Qt){var pe=o.findMarks(Xt(c,0),Xt(p+1,0),P(+Qt));return void(pe.length&&(Gt=pe[0].find(0))&&et(ur(o.doc,Gt.from,Gt.to).join(w)))}if(St.getAttribute("contenteditable")=="false")return;var me=/^(pre|div|p|li|table|br)$/i.test(St.nodeName);if(!/^br$/i.test(St.nodeName)&&St.textContent.length==0)return;me&&tt();for(var le=0;le<St.childNodes.length;le++)xt(St.childNodes[le]);/^(pre|p)$/i.test(St.nodeName)&&(S=!0),me&&(y=!0)}else St.nodeType==3&&et(St.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;xt(s),s!=u;)s=s.nextSibling,S=!1;return h}function kl(o,s,u){var c;if(s==o.display.lineDiv){if(!(c=o.display.lineDiv.childNodes[u]))return js(o.clipPos(Xt(o.display.viewTo-1)),!0);s=null,u=0}else for(c=s;;c=c.parentNode){if(!c||c==o.display.lineDiv)return null;if(c.parentNode&&c.parentNode==o.display.lineDiv)break}for(var p=0;p<o.display.view.length;p++){var h=o.display.view[p];if(h.node==c)return Af(h,s,u)}}function Af(o,s,u){var c=o.text.firstChild,p=!1;if(!s||!Vt(c,s))return js(Xt(rn(o.line),0),!0);if(s==c&&(p=!0,s=c.childNodes[u],u=0,!s)){var h=o.rest?se(o.rest):o.line;return js(Xt(rn(h),h.text.length),p)}var y=s.nodeType==3?s:null,w=s;for(y||s.childNodes.length!=1||s.firstChild.nodeType!=3||(y=s.firstChild,u&&(u=y.nodeValue.length));w.parentNode!=c;)w=w.parentNode;var S=o.measure,P=S.maps;function tt(Qt,pe,me){for(var le=-1;le<(P?P.length:0);le++)for(var ke=le<0?S.map:P[le],Oe=0;Oe<ke.length;Oe+=3){var Me=ke[Oe+2];if(Me==Qt||Me==pe){var gn=rn(le<0?o.line:o.rest[le]),vn=ke[Oe]+me;return(me<0||Me!=Qt)&&(vn=ke[Oe+(me?1:0)]),Xt(gn,vn)}}}var et=tt(y,w,u);if(et)return js(et,p);for(var xt=w.nextSibling,St=y?y.nodeValue.length-u:0;xt;xt=xt.nextSibling){if(et=tt(xt,xt.firstChild,0))return js(Xt(et.line,et.ch-St),p);St+=xt.textContent.length}for(var jt=w.previousSibling,Gt=u;jt;jt=jt.previousSibling){if(et=tt(jt,jt.firstChild,-1))return js(Xt(et.line,et.ch+Gt),p);Gt+=jt.textContent.length}}pn.prototype.init=function(o){var s=this,u=this,c=u.cm,p=u.div=o.lineDiv;function h(w){for(var S=w.target;S;S=S.parentNode){if(S==p)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(S.className))break}return!1}function y(w){if(h(w)&&!kt(c,w)){if(c.somethingSelected())Ol({lineWise:!1,text:c.getSelections()}),w.type=="cut"&&c.replaceSelection("",null,"cut");else{if(!c.options.lineWiseCopyCut)return;var S=op(c);Ol({lineWise:!0,text:S.text}),w.type=="cut"&&c.operation(function(){c.setSelections(S.ranges,0,ge),c.replaceSelection("",null,"cut")})}if(w.clipboardData){w.clipboardData.clearData();var P=bo.text.join(`
`);if(w.clipboardData.setData("Text",P),w.clipboardData.getData("Text")==P)return void w.preventDefault()}var tt=sp(),et=tt.firstChild;c.display.lineSpace.insertBefore(tt,c.display.lineSpace.firstChild),et.value=bo.text.join(`
`);var xt=Nt();je(et),setTimeout(function(){c.display.lineSpace.removeChild(tt),xt.focus(),xt==p&&u.showPrimarySelection()},50)}}p.contentEditable=!0,ip(p,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize),oe(p,"paste",function(w){!h(w)||kt(c,w)||rp(w,c)||C<=11&&setTimeout(tr(c,function(){return s.updateFromDOM()}),20)}),oe(p,"compositionstart",function(w){s.composing={data:w.data,done:!1}}),oe(p,"compositionupdate",function(w){s.composing||(s.composing={data:w.data,done:!1})}),oe(p,"compositionend",function(w){s.composing&&(w.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),oe(p,"touchstart",function(){return u.forceCompositionEnd()}),oe(p,"input",function(){s.composing||s.readFromDOMSoon()}),oe(p,"copy",y),oe(p,"cut",y)},pn.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},pn.prototype.prepareSelection=function(){var o=na(this.cm,!1);return o.focus=Nt()==this.div,o},pn.prototype.showSelection=function(o,s){o&&this.cm.display.view.length&&((o.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(o))},pn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},pn.prototype.showPrimarySelection=function(){var o=this.getSelection(),s=this.cm,u=s.doc.sel.primary(),c=u.from(),p=u.to();if(s.display.viewTo==s.display.viewFrom||c.line>=s.display.viewTo||p.line<s.display.viewFrom)o.removeAllRanges();else{var h=kl(s,o.anchorNode,o.anchorOffset),y=kl(s,o.focusNode,o.focusOffset);if(!h||h.bad||!y||y.bad||A(_e(h,y),c)!=0||A(ce(h,y),p)!=0){var w=s.display.view,S=c.line>=s.display.viewFrom&&Mc(s,c)||{node:w[0].measure.map[2],offset:0},P=p.line<s.display.viewTo&&Mc(s,p);if(!P){var tt=w[w.length-1].measure,et=tt.maps?tt.maps[tt.maps.length-1]:tt.map;P={node:et[et.length-1],offset:et[et.length-2]-et[et.length-3]}}if(S&&P){var xt,St=o.rangeCount&&o.getRangeAt(0);try{xt=X(S.node,S.offset,P.offset,P.node)}catch{}xt&&(!U&&s.state.focused?(o.collapse(S.node,S.offset),xt.collapsed||(o.removeAllRanges(),o.addRange(xt))):(o.removeAllRanges(),o.addRange(xt)),St&&o.anchorNode==null?o.addRange(St):U&&this.startGracePeriod()),this.rememberSelection()}else o.removeAllRanges()}}},pn.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},pn.prototype.showMultipleSelections=function(o){st(this.cm.display.cursorDiv,o.cursors),st(this.cm.display.selectionDiv,o.selection)},pn.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},pn.prototype.selectionInEditor=function(){var o=this.getSelection();if(!o.rangeCount)return!1;var s=o.getRangeAt(0).commonAncestorContainer;return Vt(this.div,s)},pn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&Nt()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},pn.prototype.blur=function(){this.div.blur()},pn.prototype.getField=function(){return this.div},pn.prototype.supportsTouch=function(){return!0},pn.prototype.receivedFocus=function(){var o=this,s=this;function u(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,u))}this.selectionInEditor()?setTimeout(function(){return o.pollSelection()},20):wr(this.cm,function(){return s.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,u)},pn.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},pn.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var o=this.getSelection(),s=this.cm;if(ae&&D&&this.cm.display.gutterSpecs.length&&Pf(o.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var u=kl(s,o.anchorNode,o.anchorOffset),c=kl(s,o.focusNode,o.focusOffset);u&&c&&wr(s,function(){ar(s.doc,si(u,c),ge),(u.bad||c.bad)&&(s.curOp.selectionChanged=!0)})}}},pn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o,s,u,c=this.cm,p=c.display,h=c.doc.sel.primary(),y=h.from(),w=h.to();if(y.ch==0&&y.line>c.firstLine()&&(y=Xt(y.line-1,Se(c.doc,y.line-1).length)),w.ch==Se(c.doc,w.line).text.length&&w.line<c.lastLine()&&(w=Xt(w.line+1,0)),y.line<p.viewFrom||w.line>p.viewTo-1)return!1;y.line==p.viewFrom||(o=Pi(c,y.line))==0?(s=rn(p.view[0].line),u=p.view[0].node):(s=rn(p.view[o].line),u=p.view[o-1].node.nextSibling);var S,P,tt=Pi(c,w.line);if(tt==p.view.length-1?(S=p.viewTo-1,P=p.lineDiv.lastChild):(S=rn(p.view[tt+1].line)-1,P=p.view[tt+1].node.previousSibling),!u)return!1;for(var et=c.doc.splitLines(Lc(c,u,P,s,S)),xt=ur(c.doc,Xt(s,0),Xt(S,Se(c.doc,S).text.length));et.length>1&&xt.length>1;)if(se(et)==se(xt))et.pop(),xt.pop(),S--;else{if(et[0]!=xt[0])break;et.shift(),xt.shift(),s++}for(var St=0,jt=0,Gt=et[0],Qt=xt[0],pe=Math.min(Gt.length,Qt.length);St<pe&&Gt.charCodeAt(St)==Qt.charCodeAt(St);)++St;for(var me=se(et),le=se(xt),ke=Math.min(me.length-(et.length==1?St:0),le.length-(xt.length==1?St:0));jt<ke&&me.charCodeAt(me.length-jt-1)==le.charCodeAt(le.length-jt-1);)++jt;if(et.length==1&&xt.length==1&&s==y.line)for(;St&&St>y.ch&&me.charCodeAt(me.length-jt-1)==le.charCodeAt(le.length-jt-1);)St--,jt++;et[et.length-1]=me.slice(0,me.length-jt).replace(/^\u200b+/,""),et[0]=et[0].slice(St).replace(/\u200b+$/,"");var Oe=Xt(s,St),Me=Xt(S,xt.length?se(xt).length-jt:0);return et.length>1||et[0]||A(Oe,Me)?(xs(c.doc,et,Oe,Me,"+input"),!0):void 0},pn.prototype.ensurePolled=function(){this.forceCompositionEnd()},pn.prototype.reset=function(){this.forceCompositionEnd()},pn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},pn.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing){if(!o.composing.done)return;o.composing=null}o.updateFromDOM()},80))},pn.prototype.updateFromDOM=function(){var o=this;!this.cm.isReadOnly()&&this.pollContent()||wr(this.cm,function(){return sr(o.cm)})},pn.prototype.setUneditable=function(o){o.contentEditable="false"},pn.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||tr(this.cm,Pc)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},pn.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},pn.prototype.onContextMenu=function(){},pn.prototype.resetPosition=function(){},pn.prototype.needsContentAttribute=!0;var In=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new Le,this.hasSelection=!1,this.composing=null};function jf(o,s){if((s=s?He(s):{}).value=o.value,!s.tabindex&&o.tabIndex&&(s.tabindex=o.tabIndex),!s.placeholder&&o.placeholder&&(s.placeholder=o.placeholder),s.autofocus==null){var u=Nt();s.autofocus=u==o||o.getAttribute("autofocus")!=null&&u==document.body}function c(){o.value=w.getValue()}var p;if(o.form&&(oe(o.form,"submit",c),!s.leaveSubmitMethodAlone)){var h=o.form;p=h.submit;try{var y=h.submit=function(){c(),h.submit=p,h.submit(),h.submit=y}}catch{}}s.finishInit=function(S){S.save=c,S.getTextArea=function(){return o},S.toTextArea=function(){S.toTextArea=isNaN,c(),o.parentNode.removeChild(S.getWrapperElement()),o.style.display="",o.form&&(pt(o.form,"submit",c),s.leaveSubmitMethodAlone||typeof o.form.submit!="function"||(o.form.submit=p))}},o.style.display="none";var w=Tn(function(S){return o.parentNode.insertBefore(S,o.nextSibling)},s);return w}function Mf(o){o.off=pt,o.on=oe,o.wheelEventPixels=cf,o.Doc=$n,o.splitLines=Po,o.countColumn=Ee,o.findColumn=Zt,o.isWordChar=Ot,o.Pass=he,o.signal=_t,o.Line=qr,o.changeEnd=mo,o.scrollbarModel=fu,o.Pos=Xt,o.cmpPos=A,o.modes=yr,o.mimeModes=mn,o.resolveMode=jo,o.getMode=io,o.modeExtensions=Xn,o.extendMode=Un,o.copyState=Zn,o.startState=So,o.innerMode=Jo,o.commands=Es,o.keyMap=yo,o.keyName=Uu,o.isModifierKey=_c,o.lookupKey=Hi,o.normalizeKeyMap=yl,o.StringStream=en,o.SharedTextMarker=wa,o.TextMarker=li,o.LineWidget=ba,o.e_preventDefault=Qe,o.e_stopPropagation=zn,o.e_stop=Ge,o.addClass=te,o.contains=Vt,o.rmClass=it,o.keyNames=lo}In.prototype.init=function(o){var s=this,u=this,c=this.cm;this.createField(o);var p=this.textarea;function h(y){if(!kt(c,y)){if(c.somethingSelected())Ol({lineWise:!1,text:c.getSelections()});else{if(!c.options.lineWiseCopyCut)return;var w=op(c);Ol({lineWise:!0,text:w.text}),y.type=="cut"?c.setSelections(w.ranges,null,ge):(u.prevInput="",p.value=w.text.join(`
`),je(p))}y.type=="cut"&&(c.state.cutIncoming=+new Date)}}o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),zt&&(p.style.width="0px"),oe(p,"input",function(){z&&C>=9&&s.hasSelection&&(s.hasSelection=null),u.poll()}),oe(p,"paste",function(y){kt(c,y)||rp(y,c)||(c.state.pasteIncoming=+new Date,u.fastPoll())}),oe(p,"cut",h),oe(p,"copy",h),oe(o.scroller,"paste",function(y){if(!I(o,y)&&!kt(c,y)){if(!p.dispatchEvent)return c.state.pasteIncoming=+new Date,void u.focus();var w=new Event("paste");w.clipboardData=y.clipboardData,p.dispatchEvent(w)}}),oe(o.lineSpace,"selectstart",function(y){I(o,y)||Qe(y)}),oe(p,"compositionstart",function(){var y=c.getCursor("from");u.composing&&u.composing.range.clear(),u.composing={start:y,range:c.markText(y,c.getCursor("to"),{className:"CodeMirror-composing"})}}),oe(p,"compositionend",function(){u.composing&&(u.poll(),u.composing.range.clear(),u.composing=null)})},In.prototype.createField=function(o){this.wrapper=sp(),this.textarea=this.wrapper.firstChild},In.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},In.prototype.prepareSelection=function(){var o=this.cm,s=o.display,u=o.doc,c=na(o);if(o.options.moveInputWithCursor){var p=Ir(o,u.sel.primary().head,"div"),h=s.wrapper.getBoundingClientRect(),y=s.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,p.top+y.top-h.top)),c.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,p.left+y.left-h.left))}return c},In.prototype.showSelection=function(o){var s=this.cm.display;st(s.cursorDiv,o.cursors),st(s.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},In.prototype.reset=function(o){if(!this.contextMenuPending&&!this.composing){var s=this.cm;if(s.somethingSelected()){this.prevInput="";var u=s.getSelection();this.textarea.value=u,s.state.focused&&je(this.textarea),z&&C>=9&&(this.hasSelection=u)}else o||(this.prevInput=this.textarea.value="",z&&C>=9&&(this.hasSelection=null))}},In.prototype.getField=function(){return this.textarea},In.prototype.supportsTouch=function(){return!1},In.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!mt||Nt()!=this.textarea))try{this.textarea.focus()}catch{}},In.prototype.blur=function(){this.textarea.blur()},In.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},In.prototype.receivedFocus=function(){this.slowPoll()},In.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},In.prototype.fastPoll=function(){var o=!1,s=this;function u(){s.poll()||o?(s.pollingFast=!1,s.slowPoll()):(o=!0,s.polling.set(60,u))}s.pollingFast=!0,s.polling.set(20,u)},In.prototype.poll=function(){var o=this,s=this.cm,u=this.textarea,c=this.prevInput;if(this.contextMenuPending||!s.state.focused||qo(u)&&!c&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var p=u.value;if(p==c&&!s.somethingSelected())return!1;if(z&&C>=9&&this.hasSelection===p||yt&&/[\uf700-\uf7ff]/.test(p))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var h=p.charCodeAt(0);if(h!=8203||c||(c="​"),h==8666)return this.reset(),this.cm.execCommand("undo")}for(var y=0,w=Math.min(c.length,p.length);y<w&&c.charCodeAt(y)==p.charCodeAt(y);)++y;return wr(s,function(){Pc(s,p.slice(y),c.length-y,null,o.composing?"*compose":null),p.length>1e3||p.indexOf(`
`)>-1?u.value=o.prevInput="":o.prevInput=p,o.composing&&(o.composing.range.clear(),o.composing.range=s.markText(o.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},In.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},In.prototype.onKeyPress=function(){z&&C>=9&&(this.hasSelection=null),this.fastPoll()},In.prototype.onContextMenu=function(o){var s=this,u=s.cm,c=u.display,p=s.textarea;s.contextMenuPending&&s.contextMenuPending();var h=ki(u,o),y=c.scroller.scrollTop;if(h&&!ut){u.options.resetSelectionOnContextMenu&&u.doc.sel.contains(h)==-1&&tr(u,ar)(u.doc,si(h),ge);var w,S=p.style.cssText,P=s.wrapper.style.cssText,tt=s.wrapper.offsetParent.getBoundingClientRect();if(s.wrapper.style.cssText="position: static",p.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(o.clientY-tt.top-5)+"px; left: "+(o.clientX-tt.left-5)+`px;
      z-index: 1000; background: `+(z?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,O&&(w=window.scrollY),c.input.focus(),O&&window.scrollTo(null,w),c.input.reset(),u.somethingSelected()||(p.value=s.prevInput=" "),s.contextMenuPending=St,c.selForContextMenu=u.doc.sel,clearTimeout(c.detectingSelectAll),z&&C>=9&&xt(),E){Ge(o);var et=function(){pt(window,"mouseup",et),setTimeout(St,20)};oe(window,"mouseup",et)}else setTimeout(St,50)}function xt(){if(p.selectionStart!=null){var jt=u.somethingSelected(),Gt="​"+(jt?p.value:"");p.value="⇚",p.value=Gt,s.prevInput=jt?"":"​",p.selectionStart=1,p.selectionEnd=Gt.length,c.selForContextMenu=u.doc.sel}}function St(){if(s.contextMenuPending==St&&(s.contextMenuPending=!1,s.wrapper.style.cssText=P,p.style.cssText=S,z&&C<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=y),p.selectionStart!=null)){(!z||z&&C<9)&&xt();var jt=0,Gt=function(){c.selForContextMenu==u.doc.sel&&p.selectionStart==0&&p.selectionEnd>0&&s.prevInput=="​"?tr(u,ku)(u):jt++<10?c.detectingSelectAll=setTimeout(Gt,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout(Gt,200)}}},In.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},In.prototype.setUneditable=function(){},In.prototype.needsContentAttribute=!1,np(Tn),jc(Tn);var ap="iter insert remove copy getEditor constructor".split(" ");for(var Ms in $n.prototype)$n.prototype.hasOwnProperty(Ms)&&Ce(ap,Ms)<0&&(Tn.prototype[Ms]=function(o){return function(){return o.apply(this.doc,arguments)}}($n.prototype[Ms]));return $e($n),Tn.inputStyles={textarea:In,contenteditable:pn},Tn.defineMode=function(o){Tn.defaults.mode||o=="null"||(Tn.defaults.mode=o),Ko.apply(this,arguments)},Tn.defineMIME=zr,Tn.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),Tn.defineMIME("text/plain","null"),Tn.defineExtension=function(o,s){Tn.prototype[o]=s},Tn.defineDocExtension=function(o,s){$n.prototype[o]=s},Tn.fromTextArea=jf,Mf(Tn),Tn.version="5.65.6",Tn}()},629:(m,Y,j)=>{(function(U){function dt(E){for(var R={},X=0;X<E.length;++X)R[E[X].toLowerCase()]=!0;return R}U.defineMode("css",function(E,R){var X=R.inline;R.propertyKeywords||(R=U.resolveMode("text/css"));var it,Tt,st=E.indentUnit,Ct=R.tokenHooks,H=R.documentTypes||{},Vt=R.mediaTypes||{},Nt=R.mediaFeatures||{},te=R.mediaValueKeywords||{},De=R.propertyKeywords||{},je=R.nonStandardPropertyKeywords||{},Pe=R.fontProperties||{},He=R.counterDescriptors||{},Ee=R.colorKeywords||{},Le=R.valueKeywords||{},Ce=R.allowNested,fe=R.lineComment,he=R.supportsAtComponent===!0,ge=E.highlightNonStandardPropertyKeywords!==!1;function gt(Ot,qt){return it=qt,Ot}function re(Ot,qt){var b=Ot.next();if(Ct[b]){var L=Ct[b](Ot,qt);if(L!==!1)return L}return b=="@"?(Ot.eatWhile(/[\w\\\-]/),gt("def",Ot.current())):b=="="||(b=="~"||b=="|")&&Ot.eat("=")?gt(null,"compare"):b=='"'||b=="'"?(qt.tokenize=Zt(b),qt.tokenize(Ot,qt)):b=="#"?(Ot.eatWhile(/[\w\\\-]/),gt("atom","hash")):b=="!"?(Ot.match(/^\s*\w*/),gt("keyword","important")):/\d/.test(b)||b=="."&&Ot.eat(/\d/)?(Ot.eatWhile(/[\w.%]/),gt("number","unit")):b!=="-"?/[,+>*\/]/.test(b)?gt(null,"select-op"):b=="."&&Ot.match(/^-?[_a-z][_a-z0-9-]*/i)?gt("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(b)?gt(null,b):Ot.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(Ot.current())&&(qt.tokenize=ue),gt("variable callee","variable")):/[\w\\\-]/.test(b)?(Ot.eatWhile(/[\w\\\-]/),gt("property","word")):gt(null,null):/[\d.]/.test(Ot.peek())?(Ot.eatWhile(/[\w.%]/),gt("number","unit")):Ot.match(/^-[\w\\\-]*/)?(Ot.eatWhile(/[\w\\\-]/),Ot.match(/^\s*:/,!1)?gt("variable-2","variable-definition"):gt("variable-2","variable")):Ot.match(/^\w+-/)?gt("meta","meta"):void 0}function Zt(Ot){return function(qt,b){for(var L,B=!1;(L=qt.next())!=null;){if(L==Ot&&!B){Ot==")"&&qt.backUp(1);break}B=!B&&L=="\\"}return(L==Ot||!B&&Ot!=")")&&(b.tokenize=null),gt("string","string")}}function ue(Ot,qt){return Ot.next(),Ot.match(/^\s*[\"\')]/,!1)?qt.tokenize=null:qt.tokenize=Zt(")"),gt(null,"(")}function ve(Ot,qt,b){this.type=Ot,this.indent=qt,this.prev=b}function se(Ot,qt,b,L){return Ot.context=new ve(b,qt.indentation()+(L===!1?0:st),Ot.context),b}function Ne(Ot){return Ot.context.prev&&(Ot.context=Ot.context.prev),Ot.context.type}function Ze(Ot,qt,b){return Ln[b.context.type](Ot,qt,b)}function Ye(Ot,qt,b,L){for(var B=L||1;B>0;B--)b.context=b.context.prev;return Ze(Ot,qt,b)}function hn(Ot){var qt=Ot.current().toLowerCase();Tt=Le.hasOwnProperty(qt)?"atom":Ee.hasOwnProperty(qt)?"keyword":"variable"}var Ln={top:function(Ot,qt,b){if(Ot=="{")return se(b,qt,"block");if(Ot=="}"&&b.context.prev)return Ne(b);if(he&&/@component/i.test(Ot))return se(b,qt,"atComponentBlock");if(/^@(-moz-)?document$/i.test(Ot))return se(b,qt,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(Ot))return se(b,qt,"atBlock");if(/^@(font-face|counter-style)/i.test(Ot))return b.stateArg=Ot,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(Ot))return"keyframes";if(Ot&&Ot.charAt(0)=="@")return se(b,qt,"at");if(Ot=="hash")Tt="builtin";else if(Ot=="word")Tt="tag";else{if(Ot=="variable-definition")return"maybeprop";if(Ot=="interpolation")return se(b,qt,"interpolation");if(Ot==":")return"pseudo";if(Ce&&Ot=="(")return se(b,qt,"parens")}return b.context.type},block:function(Ot,qt,b){if(Ot=="word"){var L=qt.current().toLowerCase();return De.hasOwnProperty(L)?(Tt="property","maybeprop"):je.hasOwnProperty(L)?(Tt=ge?"string-2":"property","maybeprop"):Ce?(Tt=qt.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Tt+=" error","maybeprop")}return Ot=="meta"?"block":Ce||Ot!="hash"&&Ot!="qualifier"?Ln.top(Ot,qt,b):(Tt="error","block")},maybeprop:function(Ot,qt,b){return Ot==":"?se(b,qt,"prop"):Ze(Ot,qt,b)},prop:function(Ot,qt,b){if(Ot==";")return Ne(b);if(Ot=="{"&&Ce)return se(b,qt,"propBlock");if(Ot=="}"||Ot=="{")return Ye(Ot,qt,b);if(Ot=="(")return se(b,qt,"parens");if(Ot!="hash"||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(qt.current())){if(Ot=="word")hn(qt);else if(Ot=="interpolation")return se(b,qt,"interpolation")}else Tt+=" error";return"prop"},propBlock:function(Ot,qt,b){return Ot=="}"?Ne(b):Ot=="word"?(Tt="property","maybeprop"):b.context.type},parens:function(Ot,qt,b){return Ot=="{"||Ot=="}"?Ye(Ot,qt,b):Ot==")"?Ne(b):Ot=="("?se(b,qt,"parens"):Ot=="interpolation"?se(b,qt,"interpolation"):(Ot=="word"&&hn(qt),"parens")},pseudo:function(Ot,qt,b){return Ot=="meta"?"pseudo":Ot=="word"?(Tt="variable-3",b.context.type):Ze(Ot,qt,b)},documentTypes:function(Ot,qt,b){return Ot=="word"&&H.hasOwnProperty(qt.current())?(Tt="tag",b.context.type):Ln.atBlock(Ot,qt,b)},atBlock:function(Ot,qt,b){if(Ot=="(")return se(b,qt,"atBlock_parens");if(Ot=="}"||Ot==";")return Ye(Ot,qt,b);if(Ot=="{")return Ne(b)&&se(b,qt,Ce?"block":"top");if(Ot=="interpolation")return se(b,qt,"interpolation");if(Ot=="word"){var L=qt.current().toLowerCase();Tt=L=="only"||L=="not"||L=="and"||L=="or"?"keyword":Vt.hasOwnProperty(L)?"attribute":Nt.hasOwnProperty(L)?"property":te.hasOwnProperty(L)?"keyword":De.hasOwnProperty(L)?"property":je.hasOwnProperty(L)?ge?"string-2":"property":Le.hasOwnProperty(L)?"atom":Ee.hasOwnProperty(L)?"keyword":"error"}return b.context.type},atComponentBlock:function(Ot,qt,b){return Ot=="}"?Ye(Ot,qt,b):Ot=="{"?Ne(b)&&se(b,qt,Ce?"block":"top",!1):(Ot=="word"&&(Tt="error"),b.context.type)},atBlock_parens:function(Ot,qt,b){return Ot==")"?Ne(b):Ot=="{"||Ot=="}"?Ye(Ot,qt,b,2):Ln.atBlock(Ot,qt,b)},restricted_atBlock_before:function(Ot,qt,b){return Ot=="{"?se(b,qt,"restricted_atBlock"):Ot=="word"&&b.stateArg=="@counter-style"?(Tt="variable","restricted_atBlock_before"):Ze(Ot,qt,b)},restricted_atBlock:function(Ot,qt,b){return Ot=="}"?(b.stateArg=null,Ne(b)):Ot=="word"?(Tt=b.stateArg=="@font-face"&&!Pe.hasOwnProperty(qt.current().toLowerCase())||b.stateArg=="@counter-style"&&!He.hasOwnProperty(qt.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(Ot,qt,b){return Ot=="word"?(Tt="variable","keyframes"):Ot=="{"?se(b,qt,"top"):Ze(Ot,qt,b)},at:function(Ot,qt,b){return Ot==";"?Ne(b):Ot=="{"||Ot=="}"?Ye(Ot,qt,b):(Ot=="word"?Tt="tag":Ot=="hash"&&(Tt="builtin"),"at")},interpolation:function(Ot,qt,b){return Ot=="}"?Ne(b):Ot=="{"||Ot==";"?Ye(Ot,qt,b):(Ot=="word"?Tt="variable":Ot!="variable"&&Ot!="("&&Ot!=")"&&(Tt="error"),"interpolation")}};return{startState:function(Ot){return{tokenize:null,state:X?"block":"top",stateArg:null,context:new ve(X?"block":"top",Ot||0,null)}},token:function(Ot,qt){if(!qt.tokenize&&Ot.eatSpace())return null;var b=(qt.tokenize||re)(Ot,qt);return b&&typeof b=="object"&&(it=b[1],b=b[0]),Tt=b,it!="comment"&&(qt.state=Ln[qt.state](it,Ot,qt)),Tt},indent:function(Ot,qt){var b=Ot.context,L=qt&&qt.charAt(0),B=b.indent;return b.type!="prop"||L!="}"&&L!=")"||(b=b.prev),b.prev&&(L!="}"||b.type!="block"&&b.type!="top"&&b.type!="interpolation"&&b.type!="restricted_atBlock"?(L!=")"||b.type!="parens"&&b.type!="atBlock_parens")&&(L!="{"||b.type!="at"&&b.type!="atBlock")||(B=Math.max(0,b.indent-st)):B=(b=b.prev).indent),B},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:fe,fold:"brace"}});var K=["domain","regexp","url","url-prefix"],Z=dt(K),z=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],C=dt(z),O=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],M=dt(O),D=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],N=dt(D),ut=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],ht=dt(ut),Dt=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],Rt=dt(Dt),zt=dt(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),ae=dt(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),mt=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],yt=dt(mt),Ht=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Kt=dt(Ht),Lt=K.concat(z).concat(O).concat(D).concat(ut).concat(Dt).concat(mt).concat(Ht);function $(E,R){for(var X,it=!1;(X=E.next())!=null;){if(it&&X=="/"){R.tokenize=null;break}it=X=="*"}return["comment","comment"]}U.registerHelper("hintWords","css",Lt),U.defineMIME("text/css",{documentTypes:Z,mediaTypes:C,mediaFeatures:M,mediaValueKeywords:N,propertyKeywords:ht,nonStandardPropertyKeywords:Rt,fontProperties:zt,counterDescriptors:ae,colorKeywords:yt,valueKeywords:Kt,tokenHooks:{"/":function(E,R){return!!E.eat("*")&&(R.tokenize=$,$(E,R))}},name:"css"}),U.defineMIME("text/x-scss",{mediaTypes:C,mediaFeatures:M,mediaValueKeywords:N,propertyKeywords:ht,nonStandardPropertyKeywords:Rt,colorKeywords:yt,valueKeywords:Kt,fontProperties:zt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(E,R){return E.eat("/")?(E.skipToEnd(),["comment","comment"]):E.eat("*")?(R.tokenize=$,$(E,R)):["operator","operator"]},":":function(E){return!!E.match(/^\s*\{/,!1)&&[null,null]},$:function(E){return E.match(/^[\w-]+/),E.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(E){return!!E.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),U.defineMIME("text/x-less",{mediaTypes:C,mediaFeatures:M,mediaValueKeywords:N,propertyKeywords:ht,nonStandardPropertyKeywords:Rt,colorKeywords:yt,valueKeywords:Kt,fontProperties:zt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(E,R){return E.eat("/")?(E.skipToEnd(),["comment","comment"]):E.eat("*")?(R.tokenize=$,$(E,R)):["operator","operator"]},"@":function(E){return E.eat("{")?[null,"interpolation"]:!E.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(E.eatWhile(/[\w\\\-]/),E.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),U.defineMIME("text/x-gss",{documentTypes:Z,mediaTypes:C,mediaFeatures:M,propertyKeywords:ht,nonStandardPropertyKeywords:Rt,fontProperties:zt,counterDescriptors:ae,colorKeywords:yt,valueKeywords:Kt,supportsAtComponent:!0,tokenHooks:{"/":function(E,R){return!!E.eat("*")&&(R.tokenize=$,$(E,R))}},name:"css",helperType:"gss"})})(j(631))},531:(m,Y,j)=>{(function(U){var dt={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function K(N,ut,ht){var Dt=N.current(),Rt=Dt.search(ut);return Rt>-1?N.backUp(Dt.length-Rt):Dt.match(/<\/?$/)&&(N.backUp(Dt.length),N.match(ut,!1)||N.match(Dt)),ht}var Z={};function z(N){var ut=Z[N];return ut||(Z[N]=new RegExp("\\s+"+N+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function C(N,ut){var ht=N.match(z(ut));return ht?/^\s*(.*?)\s*$/.exec(ht[2])[1]:""}function O(N,ut){return new RegExp((ut?"^":"")+"</\\s*"+N+"\\s*>","i")}function M(N,ut){for(var ht in N)for(var Dt=ut[ht]||(ut[ht]=[]),Rt=N[ht],zt=Rt.length-1;zt>=0;zt--)Dt.unshift(Rt[zt])}function D(N,ut){for(var ht=0;ht<N.length;ht++){var Dt=N[ht];if(!Dt[0]||Dt[1].test(C(ut,Dt[0])))return Dt[2]}}U.defineMode("htmlmixed",function(N,ut){var ht=U.getMode(N,{name:"xml",htmlMode:!0,multilineTagIndentFactor:ut.multilineTagIndentFactor,multilineTagIndentPastTag:ut.multilineTagIndentPastTag,allowMissingTagName:ut.allowMissingTagName}),Dt={},Rt=ut&&ut.tags,zt=ut&&ut.scriptTypes;if(M(dt,Dt),Rt&&M(Rt,Dt),zt)for(var ae=zt.length-1;ae>=0;ae--)Dt.script.unshift(["type",zt[ae].matches,zt[ae].mode]);function mt(yt,Ht){var Kt,Lt=ht.token(yt,Ht.htmlState),$=/\btag\b/.test(Lt);if($&&!/[<>\s\/]/.test(yt.current())&&(Kt=Ht.htmlState.tagName&&Ht.htmlState.tagName.toLowerCase())&&Dt.hasOwnProperty(Kt))Ht.inTag=Kt+" ";else if(Ht.inTag&&$&&/>$/.test(yt.current())){var E=/^([\S]+) (.*)/.exec(Ht.inTag);Ht.inTag=null;var R=yt.current()==">"&&D(Dt[E[1]],E[2]),X=U.getMode(N,R),it=O(E[1],!0),Tt=O(E[1],!1);Ht.token=function(st,Ct){return st.match(it,!1)?(Ct.token=mt,Ct.localState=Ct.localMode=null,null):K(st,Tt,Ct.localMode.token(st,Ct.localState))},Ht.localMode=X,Ht.localState=U.startState(X,ht.indent(Ht.htmlState,"",""))}else Ht.inTag&&(Ht.inTag+=yt.current(),yt.eol()&&(Ht.inTag+=" "));return Lt}return{startState:function(){return{token:mt,inTag:null,localMode:null,localState:null,htmlState:U.startState(ht)}},copyState:function(yt){var Ht;return yt.localState&&(Ht=U.copyState(yt.localMode,yt.localState)),{token:yt.token,inTag:yt.inTag,localMode:yt.localMode,localState:Ht,htmlState:U.copyState(ht,yt.htmlState)}},token:function(yt,Ht){return Ht.token(yt,Ht)},indent:function(yt,Ht,Kt){return!yt.localMode||/^\s*<\//.test(Ht)?ht.indent(yt.htmlState,Ht,Kt):yt.localMode.indent?yt.localMode.indent(yt.localState,Ht,Kt):U.Pass},innerMode:function(yt){return{state:yt.localState||yt.htmlState,mode:yt.localMode||ht}}}},"xml","javascript","css"),U.defineMIME("text/html","htmlmixed")})(j(631),j(589),j(876),j(629))},876:(m,Y,j)=>{(function(U){U.defineMode("javascript",function(dt,K){var Z,z,C=dt.indentUnit,O=K.statementIndent,M=K.jsonld,D=K.json||M,N=K.trackScope!==!1,ut=K.typescript,ht=K.wordCharacters||/[\w$\xa1-\uffff]/,Dt=function(){function A(Gn){return{type:Gn,style:"keyword"}}var nt=A("keyword a"),Bt=A("keyword b"),ce=A("keyword c"),_e=A("keyword d"),tn=A("operator"),de={type:"atom",style:"atom"};return{if:A("if"),while:nt,with:nt,else:Bt,do:Bt,try:Bt,finally:Bt,return:_e,break:_e,continue:_e,new:A("new"),delete:ce,void:ce,throw:ce,debugger:A("debugger"),var:A("var"),const:A("var"),let:A("var"),function:A("function"),catch:A("catch"),for:A("for"),switch:A("switch"),case:A("case"),default:A("default"),in:tn,typeof:tn,instanceof:tn,true:de,false:de,null:de,undefined:de,NaN:de,Infinity:de,this:A("this"),class:A("class"),super:A("atom"),yield:ce,export:A("export"),import:A("import"),extends:ce,await:ce}}(),Rt=/[+\-*&%=<>!?|~^@]/,zt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ae(A){for(var nt,Bt=!1,ce=!1;(nt=A.next())!=null;){if(!Bt){if(nt=="/"&&!ce)return;nt=="["?ce=!0:ce&&nt=="]"&&(ce=!1)}Bt=!Bt&&nt=="\\"}}function mt(A,nt,Bt){return Z=A,z=Bt,nt}function yt(A,nt){var Bt=A.next();if(Bt=='"'||Bt=="'")return nt.tokenize=Ht(Bt),nt.tokenize(A,nt);if(Bt=="."&&A.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return mt("number","number");if(Bt=="."&&A.match(".."))return mt("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Bt))return mt(Bt);if(Bt=="="&&A.eat(">"))return mt("=>","operator");if(Bt=="0"&&A.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return mt("number","number");if(/\d/.test(Bt))return A.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),mt("number","number");if(Bt=="/")return A.eat("*")?(nt.tokenize=Kt,Kt(A,nt)):A.eat("/")?(A.skipToEnd(),mt("comment","comment")):Xt(A,nt,1)?(ae(A),A.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),mt("regexp","string-2")):(A.eat("="),mt("operator","operator",A.current()));if(Bt=="`")return nt.tokenize=Lt,Lt(A,nt);if(Bt=="#"&&A.peek()=="!")return A.skipToEnd(),mt("meta","meta");if(Bt=="#"&&A.eatWhile(ht))return mt("variable","property");if(Bt=="<"&&A.match("!--")||Bt=="-"&&A.match("->")&&!/\S/.test(A.string.slice(0,A.start)))return A.skipToEnd(),mt("comment","comment");if(Rt.test(Bt))return Bt==">"&&nt.lexical&&nt.lexical.type==">"||(A.eat("=")?Bt!="!"&&Bt!="="||A.eat("="):/[<>*+\-|&?]/.test(Bt)&&(A.eat(Bt),Bt==">"&&A.eat(Bt))),Bt=="?"&&A.eat(".")?mt("."):mt("operator","operator",A.current());if(ht.test(Bt)){A.eatWhile(ht);var ce=A.current();if(nt.lastType!="."){if(Dt.propertyIsEnumerable(ce)){var _e=Dt[ce];return mt(_e.type,_e.style,ce)}if(ce=="async"&&A.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return mt("async","keyword",ce)}return mt("variable","variable",ce)}}function Ht(A){return function(nt,Bt){var ce,_e=!1;if(M&&nt.peek()=="@"&&nt.match(zt))return Bt.tokenize=yt,mt("jsonld-keyword","meta");for(;(ce=nt.next())!=null&&(ce!=A||_e);)_e=!_e&&ce=="\\";return _e||(Bt.tokenize=yt),mt("string","string")}}function Kt(A,nt){for(var Bt,ce=!1;Bt=A.next();){if(Bt=="/"&&ce){nt.tokenize=yt;break}ce=Bt=="*"}return mt("comment","comment")}function Lt(A,nt){for(var Bt,ce=!1;(Bt=A.next())!=null;){if(!ce&&(Bt=="`"||Bt=="$"&&A.eat("{"))){nt.tokenize=yt;break}ce=!ce&&Bt=="\\"}return mt("quasi","string-2",A.current())}var $="([{}])";function E(A,nt){nt.fatArrowAt&&(nt.fatArrowAt=null);var Bt=A.string.indexOf("=>",A.start);if(!(Bt<0)){if(ut){var ce=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(A.string.slice(A.start,Bt));ce&&(Bt=ce.index)}for(var _e=0,tn=!1,de=Bt-1;de>=0;--de){var Gn=A.string.charAt(de),Dn=$.indexOf(Gn);if(Dn>=0&&Dn<3){if(!_e){++de;break}if(--_e==0){Gn=="("&&(tn=!0);break}}else if(Dn>=3&&Dn<6)++_e;else if(ht.test(Gn))tn=!0;else if(/["'\/`]/.test(Gn))for(;;--de){if(de==0)return;if(A.string.charAt(de-1)==Gn&&A.string.charAt(de-2)!="\\"){de--;break}}else if(tn&&!_e){++de;break}}tn&&!_e&&(nt.fatArrowAt=de)}}var R={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function X(A,nt,Bt,ce,_e,tn){this.indented=A,this.column=nt,this.type=Bt,this.prev=_e,this.info=tn,ce!=null&&(this.align=ce)}function it(A,nt){if(!N)return!1;for(var Bt=A.localVars;Bt;Bt=Bt.next)if(Bt.name==nt)return!0;for(var ce=A.context;ce;ce=ce.prev)for(Bt=ce.vars;Bt;Bt=Bt.next)if(Bt.name==nt)return!0}function Tt(A,nt,Bt,ce,_e){var tn=A.cc;for(st.state=A,st.stream=_e,st.marked=null,st.cc=tn,st.style=nt,A.lexical.hasOwnProperty("align")||(A.lexical.align=!0);;)if((tn.length?tn.pop():D?Zt:gt)(Bt,ce)){for(;tn.length&&tn[tn.length-1].lex;)tn.pop()();return st.marked?st.marked:Bt=="variable"&&it(A,ce)?"variable-2":nt}}var st={state:null,column:null,marked:null,cc:null};function Ct(){for(var A=arguments.length-1;A>=0;A--)st.cc.push(arguments[A])}function H(){return Ct.apply(null,arguments),!0}function Vt(A,nt){for(var Bt=nt;Bt;Bt=Bt.next)if(Bt.name==A)return!0;return!1}function Nt(A){var nt=st.state;if(st.marked="def",N){if(nt.context){if(nt.lexical.info=="var"&&nt.context&&nt.context.block){var Bt=te(A,nt.context);if(Bt!=null)return void(nt.context=Bt)}else if(!Vt(A,nt.localVars))return void(nt.localVars=new Pe(A,nt.localVars))}K.globalVars&&!Vt(A,nt.globalVars)&&(nt.globalVars=new Pe(A,nt.globalVars))}}function te(A,nt){if(nt){if(nt.block){var Bt=te(A,nt.prev);return Bt?Bt==nt.prev?nt:new je(Bt,nt.vars,!0):null}return Vt(A,nt.vars)?nt:new je(nt.prev,new Pe(A,nt.vars),!1)}return null}function De(A){return A=="public"||A=="private"||A=="protected"||A=="abstract"||A=="readonly"}function je(A,nt,Bt){this.prev=A,this.vars=nt,this.block=Bt}function Pe(A,nt){this.name=A,this.next=nt}var He=new Pe("this",new Pe("arguments",null));function Ee(){st.state.context=new je(st.state.context,st.state.localVars,!1),st.state.localVars=He}function Le(){st.state.context=new je(st.state.context,st.state.localVars,!0),st.state.localVars=null}function Ce(){st.state.localVars=st.state.context.vars,st.state.context=st.state.context.prev}function fe(A,nt){var Bt=function(){var ce=st.state,_e=ce.indented;if(ce.lexical.type=="stat")_e=ce.lexical.indented;else for(var tn=ce.lexical;tn&&tn.type==")"&&tn.align;tn=tn.prev)_e=tn.indented;ce.lexical=new X(_e,st.stream.column(),A,null,ce.lexical,nt)};return Bt.lex=!0,Bt}function he(){var A=st.state;A.lexical.prev&&(A.lexical.type==")"&&(A.indented=A.lexical.indented),A.lexical=A.lexical.prev)}function ge(A){function nt(Bt){return Bt==A?H():A==";"||Bt=="}"||Bt==")"||Bt=="]"?Ct():H(nt)}return nt}function gt(A,nt){return A=="var"?H(fe("vardef",nt),_n,ge(";"),he):A=="keyword a"?H(fe("form"),ve,gt,he):A=="keyword b"?H(fe("form"),gt,he):A=="keyword d"?st.stream.match(/^\s*$/,!1)?H():H(fe("stat"),Ne,ge(";"),he):A=="debugger"?H(ge(";")):A=="{"?H(fe("}"),Le,on,he,Ce):A==";"?H():A=="if"?(st.state.lexical.info=="else"&&st.state.cc[st.state.cc.length-1]==he&&st.state.cc.pop()(),H(fe("form"),ve,gt,he,qo)):A=="function"?H(yr):A=="for"?H(fe("form"),Le,Ao,gt,Ce,he):A=="class"||ut&&nt=="interface"?(st.marked="keyword",H(fe("form",A=="class"?A:nt),io,he)):A=="variable"?ut&&nt=="declare"?(st.marked="keyword",H(gt)):ut&&(nt=="module"||nt=="enum"||nt=="type")&&st.stream.match(/^\s*\w/,!1)?(st.marked="keyword",nt=="enum"?H(Wn):nt=="type"?H(Ko,ge("operator"),kt,ge(";")):H(fe("form"),kn,ge("{"),fe("}"),on,he,he)):ut&&nt=="namespace"?(st.marked="keyword",H(fe("form"),Zt,gt,he)):ut&&nt=="abstract"?(st.marked="keyword",H(gt)):H(fe("stat"),vt):A=="switch"?H(fe("form"),ve,ge("{"),fe("}","switch"),Le,on,he,he,Ce):A=="case"?H(Zt,ge(":")):A=="default"?H(ge(":")):A=="catch"?H(fe("form"),Ee,re,gt,he,Ce):A=="export"?H(fe("stat"),Jo,he):A=="import"?H(fe("stat"),en,he):A=="async"?H(gt):nt=="@"?H(Zt,gt):Ct(fe("stat"),Zt,ge(";"),he)}function re(A){if(A=="(")return H(zr,ge(")"))}function Zt(A,nt){return se(A,nt,!1)}function ue(A,nt){return se(A,nt,!0)}function ve(A){return A!="("?Ct():H(fe(")"),Ne,ge(")"),he)}function se(A,nt,Bt){if(st.state.fatArrowAt==st.stream.start){var ce=Bt?qt:Ot;if(A=="(")return H(Ee,fe(")"),ze(zr,")"),he,ge("=>"),ce,Ce);if(A=="variable")return Ct(Ee,kn,ge("=>"),ce,Ce)}var _e=Bt?Ye:Ze;return R.hasOwnProperty(A)?H(_e):A=="function"?H(yr,_e):A=="class"||ut&&nt=="interface"?(st.marked="keyword",H(fe("form"),jo,he)):A=="keyword c"||A=="async"?H(Bt?ue:Zt):A=="("?H(fe(")"),Ne,ge(")"),he,_e):A=="operator"||A=="spread"?H(Bt?ue:Zt):A=="["?H(fe("]"),rn,he,_e):A=="{"?Ue(Pt,"}",null,_e):A=="quasi"?Ct(hn,_e):A=="new"?H(b(Bt)):H()}function Ne(A){return A.match(/[;\}\)\],]/)?Ct():Ct(Zt)}function Ze(A,nt){return A==","?H(Ne):Ye(A,nt,!1)}function Ye(A,nt,Bt){var ce=Bt==0?Ze:Ye,_e=Bt==0?Zt:ue;return A=="=>"?H(Ee,Bt?qt:Ot,Ce):A=="operator"?/\+\+|--/.test(nt)||ut&&nt=="!"?H(ce):ut&&nt=="<"&&st.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?H(fe(">"),ze(kt,">"),he,ce):nt=="?"?H(Zt,ge(":"),_e):H(_e):A=="quasi"?Ct(hn,ce):A!=";"?A=="("?Ue(ue,")","call",ce):A=="."?H(At,ce):A=="["?H(fe("]"),Ne,ge("]"),he,ce):ut&&nt=="as"?(st.marked="keyword",H(kt,ce)):A=="regexp"?(st.state.lastType=st.marked="operator",st.stream.backUp(st.stream.pos-st.stream.start-1),H(_e)):void 0:void 0}function hn(A,nt){return A!="quasi"?Ct():nt.slice(nt.length-2)!="${"?H(hn):H(Ne,Ln)}function Ln(A){if(A=="}")return st.marked="string-2",st.state.tokenize=Lt,H(hn)}function Ot(A){return E(st.stream,st.state),Ct(A=="{"?gt:Zt)}function qt(A){return E(st.stream,st.state),Ct(A=="{"?gt:ue)}function b(A){return function(nt){return nt=="."?H(A?B:L):nt=="variable"&&ut?H(Rr,A?Ye:Ze):Ct(A?ue:Zt)}}function L(A,nt){if(nt=="target")return st.marked="keyword",H(Ze)}function B(A,nt){if(nt=="target")return st.marked="keyword",H(Ye)}function vt(A){return A==":"?H(he,gt):Ct(Ze,ge(";"),he)}function At(A){if(A=="variable")return st.marked="property",H()}function Pt(A,nt){return A=="async"?(st.marked="property",H(Pt)):A=="variable"||st.style=="keyword"?(st.marked="property",nt=="get"||nt=="set"?H(ne):(ut&&st.state.fatArrowAt==st.stream.start&&(Bt=st.stream.match(/^\s*:\s*/,!1))&&(st.state.fatArrowAt=st.stream.pos+Bt[0].length),H(we))):A=="number"||A=="string"?(st.marked=M?"property":st.style+" property",H(we)):A=="jsonld-keyword"?H(we):ut&&De(nt)?(st.marked="keyword",H(Pt)):A=="["?H(Zt,oe,ge("]"),we):A=="spread"?H(ue,we):nt=="*"?(st.marked="keyword",H(Pt)):A==":"?Ct(we):void 0;var Bt}function ne(A){return A!="variable"?Ct(we):(st.marked="property",H(yr))}function we(A){return A==":"?H(ue):A=="("?Ct(yr):void 0}function ze(A,nt,Bt){function ce(_e,tn){if(Bt?Bt.indexOf(_e)>-1:_e==","){var de=st.state.lexical;return de.info=="call"&&(de.pos=(de.pos||0)+1),H(function(Gn,Dn){return Gn==nt||Dn==nt?Ct():Ct(A)},ce)}return _e==nt||tn==nt?H():Bt&&Bt.indexOf(";")>-1?Ct(A):H(ge(nt))}return function(_e,tn){return _e==nt||tn==nt?H():Ct(A,ce)}}function Ue(A,nt,Bt){for(var ce=3;ce<arguments.length;ce++)st.cc.push(arguments[ce]);return H(fe(nt,Bt),ze(A,nt),he)}function on(A){return A=="}"?H():Ct(gt,on)}function oe(A,nt){if(ut){if(A==":")return H(kt);if(nt=="?")return H(oe)}}function W(A,nt){if(ut&&(A==":"||nt=="in"))return H(kt)}function pt(A){if(ut&&A==":")return st.stream.match(/^\s*\w+\s+is\b/,!1)?H(Zt,_t,kt):H(kt)}function _t(A,nt){if(nt=="is")return st.marked="keyword",H()}function kt(A,nt){return nt=="keyof"||nt=="typeof"||nt=="infer"||nt=="readonly"?(st.marked="keyword",H(nt=="typeof"?ue:kt)):A=="variable"||nt=="void"?(st.marked="type",H(Ge)):nt=="|"||nt=="&"?H(kt):A=="string"||A=="number"||A=="atom"?H(Ge):A=="["?H(fe("]"),ze(kt,"]",","),he,Ge):A=="{"?H(fe("}"),xe,he,Ge):A=="("?H(ze(wn,")"),ie,Ge):A=="<"?H(ze(kt,">"),kt):A=="quasi"?Ct(Qe,Ge):void 0}function ie(A){if(A=="=>")return H(kt)}function xe(A){return A.match(/[\}\)\]]/)?H():A==","||A==";"?H(xe):Ct($e,xe)}function $e(A,nt){return A=="variable"||st.style=="keyword"?(st.marked="property",H($e)):nt=="?"||A=="number"||A=="string"?H($e):A==":"?H(kt):A=="["?H(ge("variable"),W,ge("]"),$e):A=="("?Ct(mn,$e):A.match(/[;\}\)\],]/)?void 0:H()}function Qe(A,nt){return A!="quasi"?Ct():nt.slice(nt.length-2)!="${"?H(Qe):H(kt,zn)}function zn(A){if(A=="}")return st.marked="string-2",st.state.tokenize=Lt,H(Qe)}function wn(A,nt){return A=="variable"&&st.stream.match(/^\s*[?:]/,!1)||nt=="?"?H(wn):A==":"?H(kt):A=="spread"?H(wn):Ct(kt)}function Ge(A,nt){return nt=="<"?H(fe(">"),ze(kt,">"),he,Ge):nt=="|"||A=="."||nt=="&"?H(kt):A=="["?H(kt,ge("]"),Ge):nt=="extends"||nt=="implements"?(st.marked="keyword",H(kt)):nt=="?"?H(kt,ge(":"),kt):void 0}function Rr(A,nt){if(nt=="<")return H(fe(">"),ze(kt,">"),he,Ge)}function nr(){return Ct(kt,Vr)}function Vr(A,nt){if(nt=="=")return H(kt)}function _n(A,nt){return nt=="enum"?(st.marked="keyword",H(Wn)):Ct(kn,oe,Bn,Po)}function kn(A,nt){return ut&&De(nt)?(st.marked="keyword",H(kn)):A=="variable"?(Nt(nt),H()):A=="spread"?H(kn):A=="["?Ue(Hr,"]"):A=="{"?Ue(Yn,"}"):void 0}function Yn(A,nt){return A!="variable"||st.stream.match(/^\s*:/,!1)?(A=="variable"&&(st.marked="property"),A=="spread"?H(kn):A=="}"?Ct():A=="["?H(Zt,ge("]"),ge(":"),Yn):H(ge(":"),kn,Bn)):(Nt(nt),H(Bn))}function Hr(){return Ct(kn,Bn)}function Bn(A,nt){if(nt=="=")return H(ue)}function Po(A){if(A==",")return H(_n)}function qo(A,nt){if(A=="keyword b"&&nt=="else")return H(fe("form","else"),gt,he)}function Ao(A,nt){return nt=="await"?H(Ao):A=="("?H(fe(")"),Go,he):void 0}function Go(A){return A=="var"?H(_n,po):A=="variable"?H(po):Ct(po)}function po(A,nt){return A==")"?H():A==";"?H(po):nt=="in"||nt=="of"?(st.marked="keyword",H(Zt,po)):Ct(Zt,po)}function yr(A,nt){return nt=="*"?(st.marked="keyword",H(yr)):A=="variable"?(Nt(nt),H(yr)):A=="("?H(Ee,fe(")"),ze(zr,")"),he,pt,gt,Ce):ut&&nt=="<"?H(fe(">"),ze(nr,">"),he,yr):void 0}function mn(A,nt){return nt=="*"?(st.marked="keyword",H(mn)):A=="variable"?(Nt(nt),H(mn)):A=="("?H(Ee,fe(")"),ze(zr,")"),he,pt,Ce):ut&&nt=="<"?H(fe(">"),ze(nr,">"),he,mn):void 0}function Ko(A,nt){return A=="keyword"||A=="variable"?(st.marked="type",H(Ko)):nt=="<"?H(fe(">"),ze(nr,">"),he):void 0}function zr(A,nt){return nt=="@"&&H(Zt,zr),A=="spread"?H(zr):ut&&De(nt)?(st.marked="keyword",H(zr)):ut&&A=="this"?H(oe,Bn):Ct(kn,oe,Bn)}function jo(A,nt){return A=="variable"?io(A,nt):Xn(A,nt)}function io(A,nt){if(A=="variable")return Nt(nt),H(Xn)}function Xn(A,nt){return nt=="<"?H(fe(">"),ze(nr,">"),he,Xn):nt=="extends"||nt=="implements"||ut&&A==","?(nt=="implements"&&(st.marked="keyword"),H(ut?kt:Zt,Xn)):A=="{"?H(fe("}"),Un,he):void 0}function Un(A,nt){return A=="async"||A=="variable"&&(nt=="static"||nt=="get"||nt=="set"||ut&&De(nt))&&st.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(st.marked="keyword",H(Un)):A=="variable"||st.style=="keyword"?(st.marked="property",H(Zn,Un)):A=="number"||A=="string"?H(Zn,Un):A=="["?H(Zt,oe,ge("]"),Zn,Un):nt=="*"?(st.marked="keyword",H(Un)):ut&&A=="("?Ct(mn,Un):A==";"||A==","?H(Un):A=="}"?H():nt=="@"?H(Zt,Un):void 0}function Zn(A,nt){if(nt=="!"||nt=="?")return H(Zn);if(A==":")return H(kt,Bn);if(nt=="=")return H(ue);var Bt=st.state.lexical.prev;return Ct(Bt&&Bt.info=="interface"?mn:yr)}function Jo(A,nt){return nt=="*"?(st.marked="keyword",H(pr,ge(";"))):nt=="default"?(st.marked="keyword",H(Zt,ge(";"))):A=="{"?H(ze(So,"}"),pr,ge(";")):Ct(gt)}function So(A,nt){return nt=="as"?(st.marked="keyword",H(ge("variable"))):A=="variable"?Ct(ue,So):void 0}function en(A){return A=="string"?H():A=="("?Ct(Zt):A=="."?Ct(Ze):Ct(Se,ur,pr)}function Se(A,nt){return A=="{"?Ue(Se,"}"):(A=="variable"&&Nt(nt),nt=="*"&&(st.marked="keyword"),H(Yo))}function ur(A){if(A==",")return H(Se,ur)}function Yo(A,nt){if(nt=="as")return st.marked="keyword",H(Se)}function pr(A,nt){if(nt=="from")return st.marked="keyword",H(Zt)}function rn(A){return A=="]"?H():Ct(ze(ue,"]"))}function Wn(){return Ct(fe("form"),kn,ge("{"),fe("}"),ze(Oo,"}"),he,he)}function Oo(){return Ct(kn,Bn)}function Xo(A,nt){return A.lastType=="operator"||A.lastType==","||Rt.test(nt.charAt(0))||/[,.]/.test(nt.charAt(0))}function Xt(A,nt,Bt){return nt.tokenize==yt&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(nt.lastType)||nt.lastType=="quasi"&&/\{\s*$/.test(A.string.slice(0,A.pos-(Bt||0)))}return Ee.lex=Le.lex=!0,Ce.lex=!0,he.lex=!0,{startState:function(A){var nt={tokenize:yt,lastType:"sof",cc:[],lexical:new X((A||0)-C,0,"block",!1),localVars:K.localVars,context:K.localVars&&new je(null,null,!1),indented:A||0};return K.globalVars&&typeof K.globalVars=="object"&&(nt.globalVars=K.globalVars),nt},token:function(A,nt){if(A.sol()&&(nt.lexical.hasOwnProperty("align")||(nt.lexical.align=!1),nt.indented=A.indentation(),E(A,nt)),nt.tokenize!=Kt&&A.eatSpace())return null;var Bt=nt.tokenize(A,nt);return Z=="comment"?Bt:(nt.lastType=Z!="operator"||z!="++"&&z!="--"?Z:"incdec",Tt(nt,Bt,Z,z,A))},indent:function(A,nt){if(A.tokenize==Kt||A.tokenize==Lt)return U.Pass;if(A.tokenize!=yt)return 0;var Bt,ce=nt&&nt.charAt(0),_e=A.lexical;if(!/^\s*else\b/.test(nt))for(var tn=A.cc.length-1;tn>=0;--tn){var de=A.cc[tn];if(de==he)_e=_e.prev;else if(de!=qo&&de!=Ce)break}for(;(_e.type=="stat"||_e.type=="form")&&(ce=="}"||(Bt=A.cc[A.cc.length-1])&&(Bt==Ze||Bt==Ye)&&!/^[,\.=+\-*:?[\(]/.test(nt));)_e=_e.prev;O&&_e.type==")"&&_e.prev.type=="stat"&&(_e=_e.prev);var Gn=_e.type,Dn=ce==Gn;return Gn=="vardef"?_e.indented+(A.lastType=="operator"||A.lastType==","?_e.info.length+1:0):Gn=="form"&&ce=="{"?_e.indented:Gn=="form"?_e.indented+C:Gn=="stat"?_e.indented+(Xo(A,nt)?O||C:0):_e.info!="switch"||Dn||K.doubleIndentSwitch==0?_e.align?_e.column+(Dn?0:1):_e.indented+(Dn?0:C):_e.indented+(/^(?:case|default)\b/.test(nt)?C:2*C)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:D?null:"/*",blockCommentEnd:D?null:"*/",blockCommentContinue:D?null:" * ",lineComment:D?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:D?"json":"javascript",jsonldMode:M,jsonMode:D,expressionAllowed:Xt,skipExpression:function(A){Tt(A,"atom","atom","true",new U.StringStream("",2,null))}}}),U.registerHelper("wordChars","javascript",/[\w$]/),U.defineMIME("text/javascript","javascript"),U.defineMIME("text/ecmascript","javascript"),U.defineMIME("application/javascript","javascript"),U.defineMIME("application/x-javascript","javascript"),U.defineMIME("application/ecmascript","javascript"),U.defineMIME("application/json",{name:"javascript",json:!0}),U.defineMIME("application/x-json",{name:"javascript",json:!0}),U.defineMIME("application/manifest+json",{name:"javascript",json:!0}),U.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),U.defineMIME("text/typescript",{name:"javascript",typescript:!0}),U.defineMIME("application/typescript",{name:"javascript",typescript:!0})})(j(631))},589:(m,Y,j)=>{(function(U){var dt={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},K={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};U.defineMode("xml",function(Z,z){var C,O,M=Z.indentUnit,D={},N=z.htmlMode?dt:K;for(var ut in N)D[ut]=N[ut];for(var ut in z)D[ut]=z[ut];function ht(H,Vt){function Nt(De){return Vt.tokenize=De,De(H,Vt)}var te=H.next();return te=="<"?H.eat("!")?H.eat("[")?H.match("CDATA[")?Nt(zt("atom","]]>")):null:H.match("--")?Nt(zt("comment","-->")):H.match("DOCTYPE",!0,!0)?(H.eatWhile(/[\w\._\-]/),Nt(ae(1))):null:H.eat("?")?(H.eatWhile(/[\w\._\-]/),Vt.tokenize=zt("meta","?>"),"meta"):(C=H.eat("/")?"closeTag":"openTag",Vt.tokenize=Dt,"tag bracket"):te=="&"?(H.eat("#")?H.eat("x")?H.eatWhile(/[a-fA-F\d]/)&&H.eat(";"):H.eatWhile(/[\d]/)&&H.eat(";"):H.eatWhile(/[\w\.\-:]/)&&H.eat(";"))?"atom":"error":(H.eatWhile(/[^&<]/),null)}function Dt(H,Vt){var Nt=H.next();if(Nt==">"||Nt=="/"&&H.eat(">"))return Vt.tokenize=ht,C=Nt==">"?"endTag":"selfcloseTag","tag bracket";if(Nt=="=")return C="equals",null;if(Nt=="<"){Vt.tokenize=ht,Vt.state=Lt,Vt.tagName=Vt.tagStart=null;var te=Vt.tokenize(H,Vt);return te?te+" tag error":"tag error"}return/[\'\"]/.test(Nt)?(Vt.tokenize=Rt(Nt),Vt.stringStartCol=H.column(),Vt.tokenize(H,Vt)):(H.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Rt(H){var Vt=function(Nt,te){for(;!Nt.eol();)if(Nt.next()==H){te.tokenize=Dt;break}return"string"};return Vt.isInAttribute=!0,Vt}function zt(H,Vt){return function(Nt,te){for(;!Nt.eol();){if(Nt.match(Vt)){te.tokenize=ht;break}Nt.next()}return H}}function ae(H){return function(Vt,Nt){for(var te;(te=Vt.next())!=null;){if(te=="<")return Nt.tokenize=ae(H+1),Nt.tokenize(Vt,Nt);if(te==">"){if(H==1){Nt.tokenize=ht;break}return Nt.tokenize=ae(H-1),Nt.tokenize(Vt,Nt)}}return"meta"}}function mt(H){return H&&H.toLowerCase()}function yt(H,Vt,Nt){this.prev=H.context,this.tagName=Vt||"",this.indent=H.indented,this.startOfLine=Nt,(D.doNotIndent.hasOwnProperty(Vt)||H.context&&H.context.noIndent)&&(this.noIndent=!0)}function Ht(H){H.context&&(H.context=H.context.prev)}function Kt(H,Vt){for(var Nt;;){if(!H.context||(Nt=H.context.tagName,!D.contextGrabbers.hasOwnProperty(mt(Nt))||!D.contextGrabbers[mt(Nt)].hasOwnProperty(mt(Vt))))return;Ht(H)}}function Lt(H,Vt,Nt){return H=="openTag"?(Nt.tagStart=Vt.column(),$):H=="closeTag"?E:Lt}function $(H,Vt,Nt){return H=="word"?(Nt.tagName=Vt.current(),O="tag",it):D.allowMissingTagName&&H=="endTag"?(O="tag bracket",it(H,Vt,Nt)):(O="error",$)}function E(H,Vt,Nt){if(H=="word"){var te=Vt.current();return Nt.context&&Nt.context.tagName!=te&&D.implicitlyClosed.hasOwnProperty(mt(Nt.context.tagName))&&Ht(Nt),Nt.context&&Nt.context.tagName==te||D.matchClosing===!1?(O="tag",R):(O="tag error",X)}return D.allowMissingTagName&&H=="endTag"?(O="tag bracket",R(H,Vt,Nt)):(O="error",X)}function R(H,Vt,Nt){return H!="endTag"?(O="error",R):(Ht(Nt),Lt)}function X(H,Vt,Nt){return O="error",R(H,Vt,Nt)}function it(H,Vt,Nt){if(H=="word")return O="attribute",Tt;if(H=="endTag"||H=="selfcloseTag"){var te=Nt.tagName,De=Nt.tagStart;return Nt.tagName=Nt.tagStart=null,H=="selfcloseTag"||D.autoSelfClosers.hasOwnProperty(mt(te))?Kt(Nt,te):(Kt(Nt,te),Nt.context=new yt(Nt,te,De==Nt.indented)),Lt}return O="error",it}function Tt(H,Vt,Nt){return H=="equals"?st:(D.allowMissing||(O="error"),it(H,Vt,Nt))}function st(H,Vt,Nt){return H=="string"?Ct:H=="word"&&D.allowUnquoted?(O="string",it):(O="error",it(H,Vt,Nt))}function Ct(H,Vt,Nt){return H=="string"?Ct:it(H,Vt,Nt)}return ht.isInText=!0,{startState:function(H){var Vt={tokenize:ht,state:Lt,indented:H||0,tagName:null,tagStart:null,context:null};return H!=null&&(Vt.baseIndent=H),Vt},token:function(H,Vt){if(!Vt.tagName&&H.sol()&&(Vt.indented=H.indentation()),H.eatSpace())return null;C=null;var Nt=Vt.tokenize(H,Vt);return(Nt||C)&&Nt!="comment"&&(O=null,Vt.state=Vt.state(C||Nt,H,Vt),O&&(Nt=O=="error"?Nt+" error":O)),Nt},indent:function(H,Vt,Nt){var te=H.context;if(H.tokenize.isInAttribute)return H.tagStart==H.indented?H.stringStartCol+1:H.indented+M;if(te&&te.noIndent)return U.Pass;if(H.tokenize!=Dt&&H.tokenize!=ht)return Nt?Nt.match(/^(\s*)/)[0].length:0;if(H.tagName)return D.multilineTagIndentPastTag!==!1?H.tagStart+H.tagName.length+2:H.tagStart+M*(D.multilineTagIndentFactor||1);if(D.alignCDATA&&/<!\[CDATA\[/.test(Vt))return 0;var De=Vt&&/^<(\/)?([\w_:\.-]*)/.exec(Vt);if(De&&De[1])for(;te;){if(te.tagName==De[2]){te=te.prev;break}if(!D.implicitlyClosed.hasOwnProperty(mt(te.tagName)))break;te=te.prev}else if(De)for(;te;){var je=D.contextGrabbers[mt(te.tagName)];if(!je||!je.hasOwnProperty(mt(De[2])))break;te=te.prev}for(;te&&te.prev&&!te.startOfLine;)te=te.prev;return te?te.indent+M:H.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:D.htmlMode?"html":"xml",helperType:D.htmlMode?"html":"xml",skipAttribute:function(H){H.state==st&&(H.state=it)},xmlCurrentTag:function(H){return H.tagName?{name:H.tagName,close:H.type=="closeTag"}:null},xmlCurrentContext:function(H){for(var Vt=[],Nt=H.context;Nt;Nt=Nt.prev)Vt.push(Nt.tagName);return Vt.reverse()}}}),U.defineMIME("text/xml","xml"),U.defineMIME("application/xml","xml"),U.mimeModes.hasOwnProperty("text/html")||U.defineMIME("text/html",{name:"xml",htmlMode:!0})})(j(631))},858:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>U});const U={run:function(dt){dt.DomComponents.clear(),dt.CssComposer.clear()}}},884:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>Z});var U=j(50),dt=j(163),K=j(668);const Z={run:function(z){(0,U.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=z,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(z){this.toggleMove(),this.disableDragger()},onKeyUp:function(z){(0,dt.getKeyChar)(z)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(z){this.toggleDragger(1,z)},disableDragger:function(z){this.toggleDragger(0,z)},toggleDragger:function(z,C){var O=this.canvasModel,M=this.em,D=this.dragger,N=z?"add":"remove";this.getCanvas().classList[N]("".concat(this.ppfx,"is__grabbing")),D||(D=new K.Z({getPosition:function(){return{x:O.get("x"),y:O.get("y")}},setPosition:function(ut){var ht=ut.x,Dt=ut.y;O.set({x:ht,y:Dt})},onStart:function(ut,ht){M.trigger("canvas:move:start",ht)},onDrag:function(ut,ht){M.trigger("canvas:move",ht)},onEnd:function(ut,ht){M.trigger("canvas:move:end",ht)}}),this.dragger=D),z?D.start(C):D.stop()},toggleMove:function(z){var C=this.ppfx,O=z?"add":"remove",M=z?"on":"off",D={on:dt.on,off:dt.off},N=this.getCanvas(),ut=["".concat(C,"is__grab")];!z&&ut.push("".concat(C,"is__grabbing")),ut.forEach(function(ht){return N.classList[O](ht)}),D[M](document,"keyup",this.onKeyUp),D[M](N,"mousedown",this.enableDragger),D[M](document,"mouseup",this.disableDragger)}}},790:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>z,defineCommand:()=>Z});var U,dt=j(346),K=(U=function(C,O){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,D){M.__proto__=D}||function(M,D){for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(M[N]=D[N])},U(C,O)},function(C,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function M(){this.constructor=C}U(C,O),C.prototype=O===null?Object.create(O):(M.prototype=O.prototype,new M)});function Z(C){return C}const z=function(C){function O(M){var D=C.call(this,0)||this;D.config=M||{},D.em=D.config.em||{};var N=D.config.stylePrefix;return D.pfx=N,D.ppfx=D.config.pStylePrefix,D.hoverClass="".concat(N,"hover"),D.badgeClass="".concat(N,"badge"),D.plhClass="".concat(N,"placeholder"),D.freezClass="".concat(D.ppfx,"freezed"),D.canvas=D.em.Canvas,D.init(D.config),D}return K(O,C),O.prototype.onFrameScroll=function(M){},O.prototype.getCanvas=function(){return this.canvas.getElement()},O.prototype.getCanvasBody=function(){return this.canvas.getBody()},O.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},O.prototype.offset=function(M){var D=M.getBoundingClientRect();return{top:D.top+M.ownerDocument.body.scrollTop,left:D.left+M.ownerDocument.body.scrollLeft}},O.prototype.init=function(M){},O.prototype.callRun=function(M,D){D===void 0&&(D={});var N=this.id;if(M.trigger("run:".concat(N,":before"),D),!D||!D.abort){var ut=D.sender||M,ht=this.run(M,ut,D);return M.trigger("run:".concat(N),ht,D),M.trigger("run",N,ht,D),ht}M.trigger("abort:".concat(N),D)},O.prototype.callStop=function(M,D){D===void 0&&(D={});var N=this.id,ut=D.sender||M;M.trigger("stop:".concat(N,":before"),D);var ht=this.stop(M,ut,D);return M.trigger("stop:".concat(N),ht,D),M.trigger("stop",N,ht,D),ht},O.prototype.stopCommand=function(M){this.em.Commands.stop(this.id,M)},O.prototype.run=function(M,D,N){},O.prototype.stop=function(M,D,N){},O}(dt.Hn)},180:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>K});var U=j(50),dt=function(Z,z,C){if(C||arguments.length===2)for(var O,M=0,D=z.length;M<D;M++)!O&&M in z||(O||(O=Array.prototype.slice.call(z,0,M)),O[M]=z[M]);return Z.concat(O||Array.prototype.slice.call(z))};const K={run:function(Z,z,C){var O=this;C===void 0&&(C={});var M=[],D=C.component||Z.getSelectedAll();return(D=(0,U.isArray)(D)?dt([],D,!0):[D]).filter(Boolean).forEach(function(N){if(!N.get("removable"))return M.push(N),O.em.logWarning("The element is not removable",{component:N});N.remove()}),Z.select(M),D}}},544:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>z});var U=j(50),dt=j(668),K=function(){return K=Object.assign||function(C){for(var O,M=1,D=arguments.length;M<D;M++)for(var N in O=arguments[M])Object.prototype.hasOwnProperty.call(O,N)&&(C[N]=O[N]);return C},K.apply(this,arguments)},Z="dmode";const z={run:function(C,O,M){var D=this;M===void 0&&(M={}),(0,U.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var N=M.target,ut=M.event,ht=M.mode,Dt=M.dragger,Rt=Dt===void 0?{}:Dt,zt=N.getEl(),ae=K({doc:zt.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return D.guidesStatic},guidesTarget:function(){return D.guidesTarget}},Rt);this.setupGuides(),this.opts=M,this.editor=C,this.em=C.getModel(),this.target=N,this.isTran=ht=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var mt=this.dragger;return mt?mt.setOptions(ae):(mt=new dt.Z(ae),this.dragger=mt),ut&&mt.start(ut),this.toggleDrag(1),this.em.trigger("".concat(Z,":start"),this.getEventOpts()),mt},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(C){var O=C.guide;O&&O.parentNode.removeChild(O)}),this.guides=[]},getGuidesContainer:function(){var C=this,O=this.guidesEl;if(!O){var M=this,D=M.editor,N=M.em,ut=M.opts,ht=D.getConfig().stylePrefix,Dt=document.createElement("div"),Rt=document.createElement("div"),zt='<div class="'.concat(ht,"guide-info__line ").concat(ht,`danger-bg">
        <div class="`).concat(ht,"guide-info__content ").concat(ht,`danger-color"></div>
      </div>`);(O=document.createElement("div")).className="".concat(ht,"guides"),Dt.className="".concat(ht,"guide-info ").concat(ht,"guide-info__x"),Rt.className="".concat(ht,"guide-info ").concat(ht,"guide-info__y"),Dt.innerHTML=zt,Rt.innerHTML=zt,O.appendChild(Dt),O.appendChild(Rt),D.Canvas.getGlobalToolsEl().appendChild(O),this.guidesEl=O,this.elGuideInfoX=Dt,this.elGuideInfoY=Rt,this.elGuideInfoContentX=Dt.querySelector(".".concat(ht,"guide-info__content")),this.elGuideInfoContentY=Rt.querySelector(".".concat(ht,"guide-info__content")),N.on("canvas:update frame:scroll",(0,U.debounce)(function(){var ae;C.updateGuides(),ut.debug&&((ae=C.guides)===null||ae===void 0||ae.forEach(function(mt){return C.renderGuide(mt)}))},200))}return O},getGuidesStatic:function(){var C=this,O=[],M=this.target.getEl(),D=M.parentNode,N=D===void 0?{}:D;return(0,U.each)(N.children,function(ut){return O=O.concat(M!==ut?C.getElementGuides(ut):[])}),O.concat(this.getElementGuides(N))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(C){var O,M,D=this;(C||this.guides).forEach(function(N){var ut=N.origin,ht=O===ut?M:D.getElementPos(ut);O=ut,M=ht,(0,U.each)(D.getGuidePosUpdate(N,ht),function(Dt,Rt){return N[Rt]=Dt}),N.originRect=ht})},getGuidePosUpdate:function(C,O){var M={},D=O.top,N=O.height,ut=O.left,ht=O.width;switch(C.type){case"t":M.y=D;break;case"b":M.y=D+N;break;case"l":M.x=ut;break;case"r":M.x=ut+ht;break;case"x":M.x=ut+ht/2;break;case"y":M.y=D+N/2}return M},renderGuide:function(C){C===void 0&&(C={});var O=C.guide||document.createElement("div"),M="px",D=C.active?2:1,N=O.children[0];return O.style="position: absolute; background-color: ".concat(C.active?"green":"red",";"),O.children.length||((N=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",O.appendChild(N)),C.y?(O.style.width="100%",O.style.height="".concat(D).concat(M),O.style.top="".concat(C.y).concat(M),O.style.left=0):(O.style.width="".concat(D).concat(M),O.style.height="100%",O.style.left="".concat(C.x).concat(M),O.style.top="0".concat(M)),!C.guide&&this.guidesContainer.appendChild(O),O},getElementPos:function(C){return this.editor.Canvas.getElementPos(C,{noScroll:1})},getElementGuides:function(C){var O=this,M=this.opts,D=this.getElementPos(C),N=D.top,ut=D.height,ht=D.left,Dt=D.width,Rt=[{type:"t",y:N},{type:"b",y:N+ut},{type:"l",x:ht},{type:"r",x:ht+Dt},{type:"x",x:ht+Dt/2},{type:"y",y:N+ut/2}].map(function(zt){return K(K({},zt),{origin:C,originRect:D,guide:M.debug&&O.renderGuide(zt)})});return Rt.forEach(function(zt){var ae;return(ae=O.guides)===null||ae===void 0?void 0:ae.push(zt)}),Rt},getTranslate:function(C,O){O===void 0&&(O="x");var M=0;return(C||"").split(" ").forEach(function(D){var N=D.trim(),ut="translate".concat(O.toUpperCase(),"(");N.indexOf(ut)===0&&(M=parseFloat(N.replace(ut,"")))}),M},setTranslate:function(C,O,M){var D="translate".concat(O.toUpperCase(),"("),N="".concat(D).concat(M,")"),ut=(C||"").split(" ").map(function(ht){return ht.trim().indexOf(D)===0&&(ht=N),ht}).join(" ");return ut.indexOf(D)<0&&(ut+=" ".concat(N)),ut},getPosition:function(){var C=this.target,O=this.isTran,M=C.getStyle(),D=M.left,N=M.top,ut=M.transform,ht=0,Dt=0;return O?(ht=this.getTranslate(ut),Dt=this.getTranslate(ut,"y")):(ht=parseFloat(D||0),Dt=parseFloat(N||0)),{x:ht,y:Dt}},setPosition:function(C){var O=C.x,M=C.y,D=C.end,N=C.position,ut=C.width,ht=C.height,Dt=this,Rt=Dt.target,zt=Dt.isTran,ae=Dt.em,mt="px",yt=D?"":1,Ht="".concat(O).concat(mt),Kt="".concat(M).concat(mt),Lt={};if(zt){var $=Rt.getStyle().transform||"";$=this.setTranslate($,"x",Ht),Lt={transform:$=this.setTranslate($,"y",Kt),en:yt},Rt.addStyle(Lt,{avoidStore:!D})}else{var E={position:N,width:ut,height:ht},R={left:Ht,top:Kt,en:yt};(0,U.keys)(E).forEach(function(X){var it=E[X];it&&(R[X]=it)}),Lt=R,Rt.addStyle(Lt,{avoidStore:!D})}ae.getSelected()&&(0,U.keys)(Lt).forEach(function(X){return ae.trigger("update:component:style:".concat(X))})},_getDragData:function(){var C=this.target;return{target:C,parent:C.parent(),index:C.index()}},onStart:function(C){var O=this,M=O.target,D=O.editor,N=O.isTran,ut=O.opts,ht=ut.center,Dt=ut.onStart,Rt=D.Canvas,zt=M.getStyle(),ae="absolute",mt=[ae,"relative"];if(Dt&&Dt(this._getDragData()),!N&&zt.position!==ae){var yt=Rt.offset(M.getEl()),Ht=yt.left,Kt=yt.top,Lt=yt.width,$=yt.height,E=M.parent(),R=void 0;do{var X=E.getStyle();R=mt.indexOf(X.position)>=0?E:null,E=E.parent()}while(E&&!R);if(ht){var it=Rt.getMouseRelativeCanvas(C);Ht=it.x,Kt=it.y}else if(R){var Tt=Rt.offset(R.getEl());Ht-=Tt.left,Kt-=Tt.top}this.setPosition({x:Ht,y:Kt,width:"".concat(Lt,"px"),height:"".concat($,"px"),position:ae})}},onDrag:function(){for(var C=this,O=[],M=0;M<arguments.length;M++)O[M]=arguments[M];var D=this,N=D.guidesTarget,ut=D.opts,ht=ut.onDrag;this.updateGuides(N),ut.debug&&N.forEach(function(Dt){return C.renderGuide(Dt)}),ut.guidesInfo&&this.renderGuideInfo(N.filter(function(Dt){return Dt.active})),ht&&ht(this._getDragData())},onEnd:function(C,O,M){M===void 0&&(M={});var D=this,N=D.editor,ut=D.opts,ht=D.id,Dt=ut.onEnd;Dt&&Dt(C,M,K(K({event:C},M),this._getDragData())),N.stopCommand(ht),this.hideGuidesInfo(),this.em.trigger("".concat(Z,":end"),this.getEventOpts())},hideGuidesInfo:function(){var C=this;["X","Y"].forEach(function(O){var M=C["elGuideInfo".concat(O)];M&&(M.style.display="none")})},renderGuideInfo:function(C){var O=this;C===void 0&&(C=[]);var M=this.guidesStatic;this.hideGuidesInfo(),C.forEach(function(D){var N=D.origin,ut=D.x,ht=O.getElementPos(N),Dt=(0,U.isUndefined)(ut)?"y":"x",Rt=Dt==="y",zt=ht[Rt?"left":"top"],ae=ht.rect[Rt?"left":"top"],mt=Rt?zt+ht.width:zt+ht.height,yt=Rt?ae+ht.rect.width:ae+ht.rect.height,Ht=O["elGuideInfo".concat(Dt.toUpperCase())],Kt=O["elGuideInfoContent".concat(Dt.toUpperCase())],Lt=Ht.style,$=M==null?void 0:M.filter(function(Le){return Le.type===D.type}).map(function(Le){var Ce=Le.originRect,fe=Ce.left,he=Ce.width,ge=Ce.top,gt=Ce.height,re=Rt?fe+he:ge+gt;return{gap:re<zt?zt-re:(Rt?fe:ge)-mt,guide:Le}}).filter(function(Le){return Le.gap>0}).sort(function(Le,Ce){return Le.gap-Ce.gap}).map(function(Le){return Le.guide})[0];if($){var E=$.originRect,R=E.left,X=E.width,it=E.top,Tt=E.height,st=E.rect,Ct=Rt?R<ht.left:it<ht.top,H=Rt?R:it,Vt=Rt?st.left:st.top,Nt=Rt?R+X:it+Tt,te=Rt?st.left+st.width:st.top+st.height,De=Rt?D.y:D.x,je=Ct?Nt:mt,Pe="".concat(De,"px"),He=Ct?zt-Nt:H-mt,Ee=Ct?ae-te:Vt-yt;Lt.display="",Lt[Rt?"top":"left"]=Pe,Lt[Rt?"left":"top"]="".concat(je,"px"),Lt[Rt?"width":"height"]="".concat(He,"px"),Kt.innerHTML="".concat(Math.round(Ee),"px"),O.em.trigger("".concat(Z,":active"),K(K({},O.getEventOpts()),{guide:D,guidesStatic:M,matched:$,posFirst:De,posSecond:je,size:He,sizeRaw:Ee,elGuideInfo:Ht,elGuideInfoCnt:Kt}))}})},toggleDrag:function(C){var O=this.ppfx,M=this.editor,D=C?"add":"remove",N=["".concat(O,"is__grabbing")],ut=M.Canvas,ht=ut.getBody();N.forEach(function(Dt){return ht.classList[D](Dt)}),ut[C?"startAutoscroll":"stopAutoscroll"]()}}},236:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>U});const U={run:function(dt){if(dt.Canvas.hasFocus()){var K=[];dt.getSelectedAll().forEach(function(Z){var z=Z.components(),C=z&&z.filter(function(O){return O.get("selectable")})[0];C&&K.push(C)}),K.length&&dt.select(K)}}}},368:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>U});const U={run:function(dt,K,Z){if(Z===void 0&&(Z={}),dt.Canvas.hasFocus()||Z.force){var z=[];dt.getSelectedAll().forEach(function(C){for(var O=C.parent();O&&!O.get("selectable");)O=O.parent();O&&z.push(O)}),z.length&&dt.select(z)}}}},243:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>U});const U={run:function(dt){if(dt.Canvas.hasFocus()){var K=[];dt.getSelectedAll().forEach(function(Z){var z=Z.parent();if(z){var C,O=z.components().length,M=0,D=0;do M++,C=(D=Z.index()+M)<=O?z.getChildAt(D):null;while(C&&!C.get("selectable"));K.push(C||Z)}}),K.length&&dt.select(K)}}}},400:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>U});const U={run:function(dt){if(dt.Canvas.hasFocus()){var K=[];dt.getSelectedAll().forEach(function(Z){var z=Z.parent();if(z){var C,O=0,M=0;do O++,C=(M=Z.index()-O)>=0?z.getChildAt(M):null;while(C&&!C.get("selectable"));K.push(C||Z)}}),K.length&&dt.select(K)}}}},910:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=j(50);const dt={run:function(K,Z,z){z===void 0&&(z={});var C=z.target,O=[];if(!C.get("styles"))return O;var M=C.get("type"),D=K.Pages.getAllWrappers();if(!(0,U.flatten)(D.map(function(ut){return ut.findType(M)})).length){var N=K.CssComposer.getAll();O=N.filter(function(ut){return ut.get("group")==="cmp:".concat(M)}),N.remove(O)}return O}}},744:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=function(K,Z,z){if(z||arguments.length===2)for(var C,O=0,M=Z.length;O<M;O++)!C&&O in Z||(C||(C=Array.prototype.slice.call(Z,0,O)),C[O]=Z[O]);return K.concat(C||Array.prototype.slice.call(Z))};const dt={run:function(K){var Z=K.getModel(),z=U([],K.getSelectedAll(),!0);z.length&&Z.set("clipboard",z)}}},517:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>Z});var U=j(50),dt=j(895),K=j(407);const Z=(0,U.extend)({},K.default,{init:function(){(0,U.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(z){z.stopPropagation();var C=(0,dt.default)(z.target);C.data("model").get("removable")&&(C.addClass(this.hoverClass),this.attachBadge(C.get(0)))},stopDelete:function(z){z.stopPropagation(),(0,dt.default)(z.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(z){z.stopPropagation();var C=(0,dt.default)(z.target);C.data("model").get("removable")&&(C.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(z){this.badge.html("Remove "+z.getName())}})},457:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=j(895);const dt={run:function(K,Z){var z=this;Z&&Z.set&&Z.set("active",0);var C=K.getConfig(),O=K.Modal,M=C.stylePrefix;if(this.cm=K.CodeManager||null,!this.$editors){var D=this.buildEditor("htmlmixed","hopscotch","HTML"),N=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=D.el,this.cssEditor=N.el;var ut=(0,U.default)('<div class="'.concat(M,'export-dl"></div>'));ut.append(D.$el).append(N.$el),this.$editors=ut}O.open({title:C.textViewCode,content:this.$editors}).getModel().once("change:open",function(){return K.stopCommand("".concat(z.id))}),this.htmlEditor.setContent(K.getHtml()),this.cssEditor.setContent(K.getCss())},stop:function(K){var Z=K.Modal;Z&&Z.close()},buildEditor:function(K,Z,z){var C=document.createElement("textarea");!this.codeMirror&&(this.codeMirror=this.cm.getViewer("CodeMirror"));var O=this.codeMirror.clone().set({label:z,codeName:K,theme:Z,input:C}),M=new this.cm.EditorView({model:O,config:this.cm.getConfig()}).render().$el;return O.init(C),{el:O,$el:M}}}},975:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=j(50);const dt={isEnabled:function(){var K=document;return!!(K.fullscreenElement||K.webkitFullscreenElement||K.mozFullScreenElement)},enable:function(K){var Z="";return K.requestFullscreen?K.requestFullscreen():K.webkitRequestFullscreen?(Z="webkit",K.webkitRequestFullscreen()):K.mozRequestFullScreen?(Z="moz",K.mozRequestFullScreen()):K.msRequestFullscreen&&K.msRequestFullscreen(),Z},disable:function(){var K=document;this.isEnabled()&&(K.exitFullscreen?K.exitFullscreen():K.webkitExitFullscreen?K.webkitExitFullscreen():K.mozCancelFullScreen?K.mozCancelFullScreen():K.msExitFullscreen&&K.msExitFullscreen())},fsChanged:function(K){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(K||"","fullscreenchange"),this.fsChanged))},run:function(K,Z,z){z===void 0&&(z={}),this.sender=Z;var C=z.target,O=(0,U.isElement)(C)?C:document.querySelector(C),M=this.enable(O||K.getContainer());this.fsChanged=this.fsChanged.bind(this,M),document.addEventListener(M+"fullscreenchange",this.fsChanged),K.trigger("change:canvasOffset")},stop:function(K,Z){Z&&Z.set&&Z.set("active",!1),this.disable(),K&&K.trigger("change:canvasOffset")}}},191:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>C});var U=j(50),dt=j(895),K=j(163),Z=j(407),z=j(189);const C=(0,U.extend)({},z.default,Z.default,{init:function(O){Z.default.init.apply(this,arguments),(0,U.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=O,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var O=[],M=0;M<arguments.length;M++)O[M]=arguments[M];Z.default.enable.apply(this,O),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var D=this.$wrapper;D.css("cursor","move"),D.on("mousedown",this.initSorter),D.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(O){var M=(0,dt.default)(O.target).data("model").get("draggable");M&&(this.cacheEl=null,this.startSelectPosition(O.target,this.frameEl.contentDocument),this.sorter.draggable=M,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,K.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(O){var M=O.get("draggable");if(M){this.cacheEl=null;var D=O.view.el;this.startSelectPosition(D,this.frameEl.contentDocument),this.sorter.draggable=M,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,K.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(O){this.cacheEl=null;var M=O[O.length-1],D=(this.em.get("currentFrame")||{}).model,N=M.getEl(D),ut=N.ownerDocument;this.startSelectPosition(N,ut,{onStart:this.onStart}),this.sorter.draggable=M.get("draggable"),this.sorter.toMove=O,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,K.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,K.off)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,K.off)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(O,M){},rollback:function(O,M){((O.which||O.keyCode)==27||M)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,dt.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,dt.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var O=[],M=0;M<arguments.length;M++)O[M]=arguments[M];Z.default.stop.apply(this,O),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var D=this.$wrapper;D.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>K});var U=j(50),dt=j(491);const K={open:function(Z){var z=this,C=this,O=C.editor,M=C.title,D=C.config,N=C.am,ut=D.custom;if((0,U.isFunction)(ut.open))return ut.open(N.__customData());O.Modal.open({title:M,content:Z}).onceClose(function(){return O.stopCommand(z.id)})},close:function(){var Z=this.config.custom;if((0,U.isFunction)(Z.close))return Z.close(this.am.__customData());var z=this.editor.Modal;z&&z.close()},run:function(Z,z,C){C===void 0&&(C={});var O=Z.AssetManager,M=O.getConfig(),D=C.types,N=D===void 0?[]:D,ut=C.accept,ht=C.select;if(this.title=C.modalTitle||Z.t("assetManager.modalTitle")||"",this.editor=Z,this.config=M,this.am=O,O.setTarget(C.target),O.onClick(C.onClick),O.onDblClick(C.onDblClick),O.onSelect(C.onSelect),O.__behaviour({select:ht,types:N,options:C}),M.custom)this.rendered=this.rendered||(0,dt.ut)("div"),this.rendered.className="".concat(M.stylePrefix,"custom-wrp"),O.__behaviour({container:this.rendered}),O.__trgCustom();else{if(!this.rendered||N){var Dt=O.getAll().filter(function(zt){return zt});N&&N.length&&(Dt=Dt.filter(function(zt){return N.indexOf(zt.get("type"))!==-1})),O.render(Dt),this.rendered=O.getContainer()}if(ut){var Rt=this.rendered.querySelector("input#".concat(M.stylePrefix,"uploadFile"));Rt&&Rt.setAttribute("accept",ut)}}return this.open(this.rendered),this},stop:function(Z){this.editor=Z,this.close(this.rendered)}}},117:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>K});var U=j(50),dt=j(491);const K={open:function(){var Z=this,z=Z.container,C=Z.editor,O=Z.bm,M=Z.config,D=M.custom,N=M.appendTo;if((0,U.isFunction)(D.open))return D.open(O.__customData());if(this.firstRender&&!N){var ut="views-container",ht=C.Panels;(ht.getPanel(ut)||ht.addPanel({id:ut})).set("appendContent",z).trigger("change:appendContent"),D||z.appendChild(O.render())}z&&(z.style.display="block")},close:function(){var Z=this.container,z=this.config.custom;if((0,U.isFunction)(z.close))return z.close(this.bm.__customData());Z&&(Z.style.display="none")},run:function(Z){var z=Z.Blocks;this.config=z.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,dt.ut)("div"),this.editor=Z,this.bm=z;var C=this.container;z.__behaviour({container:C}),this.config.custom&&z.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>U});const U={run:function(dt){var K=dt.LayerManager,Z=dt.Panels,z=K.getConfig();if(!z.appendTo){if(!this.layers){var C="views-container",O=document.createElement("div"),M=Z.getPanel(C)||Z.addPanel({id:C});z.custom?K.__trgCustom({container:O}):O.appendChild(K.render()),M.set("appendContent",O).trigger("change:appendContent"),this.layers=O}this.layers.style.display="block"}},stop:function(){var dt=this.layers;dt&&(dt.style.display="none")}}},801:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=j(895);const dt={run:function(K,Z){if(this.sender=Z,!this.$cn){var z=K.getConfig(),C=K.Panels,O="change:appendContent";this.$cn=(0,U.default)("<div></div>"),this.$cn2=(0,U.default)("<div></div>"),this.$cn.append(this.$cn2);var M=K.DeviceManager;if(M&&z.showDevices){var D=C.addPanel({id:"devices-c"}),N=M.render();D.set("appendContent",N).trigger(O)}var ut=K.SelectorManager;this.slm=ut;var ht=ut.getConfig();ht.custom?ut.__trgCustom({container:this.$cn2.get(0)}):ht.appendTo||this.$cn2.append(ut.render([]));var Dt=K.StyleManager;this.sm=Dt;var Rt=Dt.getConfig(),zt=Rt.stylePrefix;this.$header=(0,U.default)('<div class="'.concat(zt,'header">').concat(K.t("styleManager.empty"),"</div>")),this.$cn.append(this.$header),Rt.custom?Dt.__trgCustom({container:this.$cn2.get(0)}):Rt.appendTo||this.$cn2.append(Dt.render());var ae="views-container";this.panel=C.getPanel(ae),this.panel||(this.panel=C.addPanel({id:ae})),this.panel.set("appendContent",this.$cn).trigger(O),this.em=K.getModel(),this.listenTo(this.em,Dt.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var K,Z,z,C,O=this.sender,M=this.sm;O&&O.get&&!O.get("active")||!M||(M.getSelected()?((K=this.$cn2)===null||K===void 0||K.show(),(Z=this.$header)===null||Z===void 0||Z.hide()):((z=this.$cn2)===null||z===void 0||z.hide(),(C=this.$header)===null||C===void 0||C.show()))},stop:function(){var K,Z;(K=this.$cn2)===null||K===void 0||K.hide(),(Z=this.$header)===null||Z===void 0||Z.hide()}}},395:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=j(895);const dt={run:function(K,Z){this.sender=Z;var z,C=K.getModel(),O=K.Config.stylePrefix,M=K.TraitManager,D=M.getConfig();if(!D.appendTo){if(!this.$cn){this.$cn=(0,U.default)("<div></div>"),this.$cn2=(0,U.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,U.default)("<div>").append('<div class="'.concat(D.stylePrefix,'header">').concat(C.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),this.$cn2.append('<div class="'.concat(O,'traits-label">').concat(C.t("traitManager.label"),"</div>")),this.$cn2.append(M.render());var N=K.Panels;(z=N.getPanel("views-container")?N.getPanel("views-container"):N.addPanel({id:"views-container"}))==null||z.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=K.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var K=this.sender;K&&K.get&&!K.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=j(50);const dt={run:function(K,Z,z){z===void 0&&(z={});var C=K.getModel().get("clipboard"),O=K.getSelected();C&&O&&(K.getSelectedAll().forEach(function(M){var D=M.collection;if(D){var N,ut={at:M.index()+1,action:z.action||"paste-component"};if((0,U.contains)(C,M)&&M.get("copyable"))N=D.add(M.clone(),ut);else{var ht=C.filter(function(Dt){return Dt.get("copyable")}).filter(function(Dt){return K.Components.canMove(M.parent(),Dt).result});N=D.add(ht.map(function(Dt){return Dt.clone()}),ut)}(N=(0,U.isArray)(N)?N:[N]).forEach(function(Dt){return K.trigger("component:paste",Dt)})}}),O.emitUpdate())}}},129:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>Z});var U=j(50),dt=function(z,C,O){if(O||arguments.length===2)for(var M,D=0,N=C.length;D<N;D++)!M&&D in C||(M||(M=Array.prototype.slice.call(C,0,D)),M[D]=C[D]);return z.concat(M||Array.prototype.slice.call(C))},K="core:component-outline";const Z={getPanels:function(z){return this.panels||(this.panels=z.Panels.getPanels()),this.panels},preventDrag:function(z){z.abort=1},tglEffects:function(z){var C=this.em,O=z?"on":"off";if(C){var M=C.Canvas,D=M.getBody(),N=M.getToolbarEl();N&&(N.style.display=z?"none":"");var ut=D.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,U.each)(ut,function(ht){return ht.style.pointerEvents=z?"all":""}),C[O]("run:tlb-move:before",this.preventDrag)}},run:function(z,C){var O=this;this.sender=C,this.selected=dt([],z.getSelectedAll(),!0),z.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=z.Commands.isActive(K)),this.shouldRunSwVisibility&&z.stopCommand(K),z.getModel().stopDefault();var M=this.getPanels(z),D=z.Canvas.getElement(),N=z.getEl(),ut=z.Config.stylePrefix;if(!this.helper){var ht=document.createElement("span");ht.className="".concat(ut,"off-prv fa fa-eye-slash"),N.appendChild(ht),ht.onclick=function(){return O.stopCommand()},this.helper=ht}this.helper.style.display="inline-block",M.forEach(function(Rt){return Rt.set("visible",!1)});var Dt=D.style;Dt.width="100%",Dt.height="100%",Dt.top="0",Dt.left="0",Dt.padding="0",Dt.margin="0",z.refresh(),this.tglEffects(1)},stop:function(z){var C=this.sender,O=C===void 0?{}:C,M=this.selected;O.set&&O.set("active",0);var D=this.getPanels(z);this.shouldRunSwVisibility&&(z.runCommand(K),this.shouldRunSwVisibility=!1),z.getModel().runDefault(),D.forEach(function(N){return N.set("visible",!0)}),z.Canvas.getElement().setAttribute("style",""),M&&z.select(M),delete this.selected,this.helper&&(this.helper.style.display="none"),z.refresh(),this.tglEffects()}}},116:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=function(){return U=Object.assign||function(K){for(var Z,z=1,C=arguments.length;z<C;z++)for(var O in Z=arguments[z])Object.prototype.hasOwnProperty.call(Z,O)&&(K[O]=Z[O]);return K},U.apply(this,arguments)};const dt={run:function(K,Z,z){var C=z||{},O=K.Canvas,M=O.getCanvasView(),D=U({appendTo:O.getResizerEl(),prefix:K.getConfig().stylePrefix,posFetcher:M.getElementPos.bind(M),mousePosFetcher:O.getMouseRelativePos},C.options||{}),N=this.canvasResizer;return N&&!C.forceNew||(this.canvasResizer=new K.Utils.Resizer(D),N=this.canvasResizer),N.setOptions(D,!0),N.blur(),N.focus(C.el),N},stop:function(){var K;(K=this.canvasResizer)===null||K===void 0||K.blur()}}},407:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>Lt});var U,dt=j(50),K=j(895),Z=j(346),z=(U=function($,E){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,X){R.__proto__=X}||function(R,X){for(var it in X)Object.prototype.hasOwnProperty.call(X,it)&&(R[it]=X[it])},U($,E)},function($,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function R(){this.constructor=$}U($,E),$.prototype=E===null?Object.create(E):(R.prototype=E.prototype,new R)});const C=function($){function E(){return $!==null&&$.apply(this,arguments)||this}return z(E,$),E.prototype.defaults=function(){return{command:"",attributes:{}}},E}(Z.Hn);var O=function(){var $=function(E,R){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,it){X.__proto__=it}||function(X,it){for(var Tt in it)Object.prototype.hasOwnProperty.call(it,Tt)&&(X[Tt]=it[Tt])},$(E,R)};return function(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function X(){this.constructor=E}$(E,R),E.prototype=R===null?Object.create(R):(X.prototype=R.prototype,new X)}}(),M=function($){function E(){return $!==null&&$.apply(this,arguments)||this}return O(E,$),E}(Z.FE);const D=M;M.prototype.model=C;var N=j(330),ut=function(){var $=function(E,R){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,it){X.__proto__=it}||function(X,it){for(var Tt in it)Object.prototype.hasOwnProperty.call(it,Tt)&&(X[Tt]=it[Tt])},$(E,R)};return function(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function X(){this.constructor=E}$(E,R),E.prototype=R===null?Object.create(R):(X.prototype=R.prototype,new X)}}(),ht=function(){return ht=Object.assign||function($){for(var E,R=1,X=arguments.length;R<X;R++)for(var it in E=arguments[R])Object.prototype.hasOwnProperty.call(E,it)&&($[it]=E[it]);return $},ht.apply(this,arguments)};const Dt=function($){function E(R){var X=$.call(this,R)||this;return X.em=R.config.em,X}return ut(E,$),E.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},E.prototype.attributes=function(){return this.model.get("attributes")},E.prototype.handleClick=function(R){R.preventDefault(),R.stopPropagation();var X=this.em,it=X.Canvas.getFrameEl().getBoundingClientRect(),Tt=it.left,st=it.top,Ct=ht(ht({},R),{clientX:R.clientX-Tt,clientY:R.clientY-st});X.trigger("toolbar:run:before",{event:Ct}),this.execCommand(Ct)},E.prototype.execCommand=function(R){var X=this.em,it={event:R},Tt=this.model.get("command"),st=X.Editor;(0,dt.isFunction)(Tt)&&Tt(st,null,it),(0,dt.isString)(Tt)&&st.runCommand(Tt,it)},E.prototype.render=function(){var R=this,X=R.em,it=R.$el,Tt=R.model,st=Tt.get("id"),Ct=Tt.get("label"),H=X.getConfig().stylePrefix;return it.addClass("".concat(H,"toolbar-item")),st&&it.addClass("".concat(H,"toolbar-item__").concat(st)),Ct&&it.append(Ct),this},E}(Z.G7);var Rt=function(){var $=function(E,R){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,it){X.__proto__=it}||function(X,it){for(var Tt in it)Object.prototype.hasOwnProperty.call(it,Tt)&&(X[Tt]=it[Tt])},$(E,R)};return function(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function X(){this.constructor=E}$(E,R),E.prototype=R===null?Object.create(R):(X.prototype=R.prototype,new X)}}(),zt=function($){function E(R){var X=$.call(this,R)||this,it=R.em;return X.em=it,X.config={em:it},X.listenTo(X.collection,"reset",X.render),X}return Rt(E,$),E.prototype.onRender=function(){var R=this.em.config.stylePrefix;this.el.className="".concat(R,"toolbar-items")},E}(N.Z);const ae=zt;zt.prototype.itemView=Dt;var mt,yt=j(491),Ht=j(163),Kt=function(){return Kt=Object.assign||function($){for(var E,R=1,X=arguments.length;R<X;R++)for(var it in E=arguments[R])Object.prototype.hasOwnProperty.call(E,it)&&($[it]=E[it]);return $},Kt.apply(this,arguments)};const Lt={init:function($){(0,dt.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),mt=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function($){var E=this,R=this.em,X=R.getConfig().listenToEl,it=R.getContainer().parentNode,Tt=$?"on":"off",st={on:Ht.on,off:Ht.off};!X.length&&it&&X.push(it),st[Tt](window,"resize",this.onFrameUpdated),st[Tt](X,"scroll",this.onContainerChange),R[Tt]("component:toggled component:update undo redo",this.onSelect,this),R[Tt]("change:componentHovered",this.onHovered,this),R[Tt]("component:resize styleable:change component:input",this.updateGlobalPos,this),R[Tt]("component:update:toolbar",this._upToolbar,this),R[Tt]("change:canvasOffset",this.updateAttached,this),R[Tt]("frame:updated",this.onFrameUpdated,this),R[Tt]("canvas:updateTools",this.onFrameUpdated,this),R.Canvas.getFrames().forEach(function(Ct){var H=Ct.view,Vt=H==null?void 0:H.getWindow();Vt&&function(Nt,te){st[Tt](te,"mouseover",E.onHover),st[Tt](te,"mouseleave",E.onOut),st[Tt](te,"click",E.onClick),st[Tt](Nt,"scroll",E.onFrameScroll,!0)}(Vt,H==null?void 0:H.getBody())})},onHover:function($){$.stopPropagation();var E=this.em,R=$.target,X=(0,Ht.getViewEl)(R),it=X&&X._getFrame(),Tt=(0,K.default)(R),st=Tt.data("model");if(!st)for(var Ct=Tt.parent();!st&&Ct.length&&!(0,yt.Mx)(Ct[0]);)st=Ct.data("model"),Ct=Ct.parent();this.currentDoc=R.ownerDocument,E.setHovered(st,{useValid:!0}),it&&E.set("currentFrame",it)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function($,E){var R,X=this,it={};E?(R=E.views)===null||R===void 0||R.forEach(function(Tt){var st=Tt.el,Ct=X.getElementPos(st);it={el:st,pos:Ct,component:E,view:(0,Ht.getViewEl)(st)},X.updateToolsLocal(it),st.ownerDocument===X.currentDoc&&(X.elHovered=it)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(Tt){var st=Tt.view,Ct=st&&st.getToolsEl();Ct&&X.toggleToolsEl(0,0,{el:Ct})}))},onSelect:(0,dt.debounce)(function(){var $=this.em,E=$.getSelected(),R=$.get("currentFrame")||{},X=E&&E.getView(R.model),it=X&&X.el,Tt={};it&&(0,yt.pn)(it)&&(Tt={el:it,pos:this.getElementPos(it),component:E,view:(0,Ht.getViewEl)(it)}),this.elSelected=Tt,this.updateToolsGlobal(),this.updateLocalPos(Tt),this.initResize(E)},0),updateGlobalPos:function(){var $=this.getElSelected();$.el&&($.pos=this.getElementPos($.el),this.updateToolsGlobal())},updateLocalPos:function($){var E=this.getElHovered();E.el&&(E.pos=this.getElementPos(E.el),this.updateToolsLocal($))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered(0)},toggleToolsEl:function($,E,R){R===void 0&&(R={});var X=R.el||this.canvas.getToolsEl(E);return X&&(X.style.display=$?"":"none"),X||{}},showElementOffset:function($,E,R){R===void 0&&(R={}),mt&&this.editor.runCommand("show-offset",{el:$,elPos:E,view:R.view,force:1,top:0,left:0})},hideElementOffset:function($){this.editor.stopCommand("show-offset",{view:$})},showFixedElementOffset:function($,E){this.editor.runCommand("show-offset",{el:$,elPos:E,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function($){this.canvas.getHighlighter($).style.opacity=0},onClick:function($){$.stopPropagation(),$.preventDefault();var E=this.em;if(E.get("_cmpDrag"))return E.set("_cmpDrag");var R=(0,K.default)($.target),X=R.data("model");if(!X)for(var it=R.parent();!X&&it.length&&!(0,yt.Mx)(it[0]);)X=it.data("model"),it=it.parent();if(X){if(E.isEditing()&&!X.get("textable")&&X.isChildOf("text"))return;this.select(X,$)}},select:function($,E){E===void 0&&(E={}),$&&(this.editor.select($,{event:E,useValid:!0}),this.initResize($))},updateBadge:function($,E,R){R===void 0&&(R={});var X=this.canvas,it=(0,K.default)($).data("model");if(it&&it.get("badgable")){var Tt=this.getBadge(R);if(!R.posOnly){var st=this.canvas.getConfig(),Ct=it.getIcon(),H=st.pStylePrefix||"",Vt="".concat(H,"badge"),Nt=st.customBadgeLabel,te="".concat(Ct?'<div class="'.concat(Vt,'__icon">').concat(Ct,"</div>"):"",`
        <div class="`).concat(Vt,'__name">').concat(it.getName(),"</div>");Tt.innerHTML=Nt?Nt(it):te}var De="px",je=Tt.style;je.display="block";var Pe=X.getTargetToElementFixed($,Tt,{pos:E}).top,He=R.leftOff<0?-R.leftOff:0;je.top=Pe+De,je.left=He+De}},showHighlighter:function($){this.canvas.getHighlighter($).style.opacity=""},initResize:function($){var E,R=this.em,X=this.canvas,it=R==null?void 0:R.Editor,Tt=(R==null?void 0:R.config).stylePrefix||"",st="".concat(Tt,"resizing"),Ct=!(0,dt.isElement)($)&&(0,Ht.isTaggableNode)($)?$:R.getSelected(),H=Ct&&Ct.get("resizable"),Vt={},Nt=function(De,je,Pe){var He=Pe.docs;He&&He.forEach(function(Ee){var Le=Ee.body,Ce=Le.className||"";Le.className=(De=="add"?"".concat(Ce," ").concat(st):Ce.replace(st,"")).trim()})};if(it&&H){var te=(0,dt.isElement)($)?$:Ct.getEl();Vt={onStart:function(De,je){je===void 0&&(je={});var Pe=je.el,He=je.config,Ee=je.resizer,Le=He.keyHeight,Ce=He.keyWidth,fe=He.currentUnit,he=He.keepAutoHeight,ge=He.keepAutoWidth;Nt("add",0,je),E=R.Styles.getModelToStyle(Ct),X.toggleFramesEvents(!1);var gt=getComputedStyle(Pe),re=E.getStyle(),Zt=re[Ce];He.autoWidth=ge&&Zt==="auto",isNaN(parseFloat(Zt))&&(Zt=gt[Ce]);var ue=re[Le];He.autoHeight=he&&ue==="auto",isNaN(parseFloat(ue))&&(ue=gt[Le]),Ee.startDim.w=parseFloat(Zt),Ee.startDim.h=parseFloat(ue),mt=!1,fe&&(He.unitHeight=(0,Ht.getUnitFromValue)(ue),He.unitWidth=(0,Ht.getUnitFromValue)(Zt))},onMove:function(){it.trigger("component:resize")},onEnd:function(De,je){Nt("remove",0,je),it.trigger("component:resize"),X.toggleFramesEvents(!0),mt=!0},updateTarget:function(De,je,Pe){if(Pe===void 0&&(Pe={}),E){var He=Pe.store,Ee=Pe.selectedHandler,Le=Pe.config,Ce=Le.keyHeight,fe=Le.keyWidth,he=Le.autoHeight,ge=Le.autoWidth,gt=Le.unitWidth,re=Le.unitHeight,Zt=["tc","bc"].indexOf(Ee)>=0,ue=["cl","cr"].indexOf(Ee)>=0,ve={},se=He?"":1;if(!Zt){var Ne=X.getBody().offsetWidth,Ze=je.w<Ne?je.w:Ne;ve[fe]=ge?"auto":"".concat(Ze).concat(gt)}ue||(ve[Ce]=he?"auto":"".concat(je.h).concat(re)),E.addStyle(Kt(Kt({},ve),{en:se}),{avoidStore:!He});var Ye="update:component:style",hn="".concat(Ye,":").concat(Ce," ").concat(Ye,":").concat(fe);R&&R.trigger(hn,null,null,{noEmit:1})}}},typeof H=="object"&&(Vt=Kt(Kt(Kt({},Vt),H),{parent:Vt})),this.resizer=it.runCommand("resize",{el:te,options:Vt,force:1})}else it.stopCommand("resize"),this.resizer=null},updateToolbar:function($){var E=this.config.em,R=$==E?E.getSelected():$,X=this.canvas.getToolbarEl(),it=X.style,Tt=R.get("toolbar"),st=E.config.showToolbar;if(R&&st&&Tt&&Tt.length){if(it.display="",!this.toolbar){X.innerHTML="",this.toolbar=new D(Tt);var Ct=new ae({collection:this.toolbar,em:E});X.appendChild(Ct.render().el)}this.toolbar.reset(Tt),it.top="-100px",it.left="0"}else it.display="none"},updateToolbarPos:function($){var E="px",R=this.canvas.getToolbarEl().style;R.top="".concat($.top).concat(E),R.left="".concat($.left).concat(E),R.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function($){return $===void 0&&($={}),this.canvas.getBadgeEl($.view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function($){return $&&$.get("status")==="selected"},updateToolsLocal:function($){var E=$||this.getElHovered(),R=E.el,X=E.pos,it=E.view,Tt=E.component;if(R){var st=Tt.get("hoverable"),Ct=this.lastHovered!==R,H=Ct?{}:{posOnly:1};Ct&&st&&(this.lastHovered=R,this.showHighlighter(it),this.showElementOffset(R,X,{view:it})),this.isCompSelected(Tt)&&(this.hideHighlighter(it),this.hideElementOffset(it));var Vt="px",Nt=this.toggleToolsEl(1,it),te=Nt.style,De=this.canvas.canvasRectOffset(R,X),je=De.top,Pe=De.left;this.updateBadge(R,X,Kt(Kt({},H),{view:it,topOff:je,leftOff:Pe})),te.top=je+Vt,te.left=Pe+Vt,te.width=X.width+Vt,te.height=X.height+Vt,this._trgToolUp("local",{component:Tt,el:Nt,top:je,left:Pe,width:X.width,height:X.height})}else this.lastHovered=0},_upToolbar:(0,dt.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function($,E){E===void 0&&(E={}),this.em.trigger("canvas:tools:update",Kt({type:$},E))},updateToolsGlobal:function($){$===void 0&&($={});var E=this.getElSelected(),R=E.el,X=E.pos,it=E.component;if(!R)return this.toggleToolsEl(),void(this.lastSelected=0);var Tt=this.canvas;(this.lastSelected!==R||$.force)&&(this.lastSelected=R,this.updateToolbar(it));var st="px",Ct=this.toggleToolsEl(1),H=Ct.style,Vt=Tt.getTargetToElementFixed(R,Tt.getToolbarEl(),{pos:X}),Nt=Vt.canvasOffsetTop,te=Vt.canvasOffsetLeft;H.top=Nt+st,H.left=te+st,H.width=X.width+st,H.height=X.height+st,this.updateToolbarPos({top:Vt.top,left:Vt.left}),this._trgToolUp("global",{component:it,el:Ct,top:Nt,left:te,width:X.width,height:X.height})},updateAttached:(0,dt.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,dt.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function($){return this.canvas.getCanvasView().getElementPos($)},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function($){$&&$.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function($){(0,Ht.hasWin)()&&(this.editor=$&&$.get("Editor"),this.enable())},stop:function($,E,R){if(R===void 0&&(R={}),(0,Ht.hasWin)()){var X=this.em,it=this.editor;this.onHovered(),this.stopSelectComponent(),!R.preserveSelected&&X.setSelected(),this.toggleToolsEl(),it&&it.stopCommand("resize")}}}},189:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=j(895);const dt={startSelectPosition:function(K,Z,z){var C=this;z===void 0&&(z={}),this.isPointed=!1;var O=this.em.Utils,M=K.ownerDocument.body;O&&!this.sorter&&(this.sorter=new O.Sorter({container:M,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:Z,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return C.em.getZoomDecimal()}})),z.onStart&&(this.sorter.onStart=z.onStart),K&&this.sorter.startSort(K,{container:M})},getOffsetDim:function(){var K=this.offset(this.canvas.getFrameEl()),Z=this.offset(this.canvas.getElement());return{top:K.top-Z.top,left:K.left-Z.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,U.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,U.default)(this.cDim[this.posIndex][5]).parent():(0,U.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(K,Z,z){var C=K||0,O=Z||"before",M=z.length,D=M!==0&&O=="after"&&C==M;return M!==0&&(!D&&!z[C][4]||z[C-1]&&!z[C-1][4]||D&&!z[C-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>z});var U=j(50),dt=j(895),K=j(163),Z=function(){return Z=Object.assign||function(C){for(var O,M=1,D=arguments.length;M<D;M++)for(var N in O=arguments[M])Object.prototype.hasOwnProperty.call(O,N)&&(C[N]=O[N]);return C},Z.apply(this,arguments)};const z={getOffsetMethod:function(C){return"get"+(C||"")+"OffsetViewerEl"},run:function(C,O,M){var D=M||{},N=D.state||"",ut=C.getConfig(),ht=this.em.getZoomDecimal(),Dt=D.el||"";if(!ut.showOffsets||(0,K.isTextNode)(Dt)||!ut.showOffsetsSelected&&N=="Fixed")C.stopCommand("".concat(this.id),M);else{var Rt=C.Canvas,zt=Z({},D.elPos||Rt.getElementPos(Dt));(0,U.isUndefined)(D.top)||(zt.top=D.top),(0,U.isUndefined)(D.left)||(zt.left=D.left);var ae=window.getComputedStyle(Dt),mt=this.ppfx,yt=N+"State",Ht=Rt[this.getOffsetMethod(N)](M.view);Ht.style.opacity="";var Kt=this["marginT"+N],Lt=this["marginB"+N],$=this["marginL"+N],E=this["marginR"+N],R=this["padT"+N],X=this["padB"+N],it=this["padL"+N],Tt=this["padR"+N];if(Ht.childNodes.length&&(this[yt]="1",Kt=Ht.querySelector("[data-offset-m-t]"),Lt=Ht.querySelector("[data-offset-m-b]"),$=Ht.querySelector("[data-offset-m-l]"),E=Ht.querySelector("[data-offset-m-r]"),R=Ht.querySelector("[data-offset-p-t]"),X=Ht.querySelector("[data-offset-p-b]"),it=Ht.querySelector("[data-offset-p-l]"),Tt=Ht.querySelector("[data-offset-p-r]")),!this[yt]){var st=N.toLowerCase(),Ct=st+"margin-v",H=st+"padding-v",Vt=(0,dt.default)('<div class="'.concat(mt,'marginName">')).get(0),Nt=(0,dt.default)('<div class="'.concat(mt,'paddingName">')).get(0),te=mt+H+"-el",De="".concat(mt+Ct+"-el"," ").concat(mt+Ct),je="".concat(te," ").concat(mt+H);Kt=(0,dt.default)('<div class="'.concat(De,'-top"></div>')).get(0),Lt=(0,dt.default)('<div class="'.concat(De,'-bottom"></div>')).get(0),$=(0,dt.default)('<div class="'.concat(De,'-left"></div>')).get(0),E=(0,dt.default)('<div class="'.concat(De,'-right"></div>')).get(0),R=(0,dt.default)('<div class="'.concat(je,'-top"></div>')).get(0),X=(0,dt.default)('<div class="'.concat(je,'-bottom"></div>')).get(0),it=(0,dt.default)('<div class="'.concat(je,'-left"></div>')).get(0),Tt=(0,dt.default)('<div class="'.concat(je,'-right"></div>')).get(0),this["marginT"+N]=Kt,this["marginB"+N]=Lt,this["marginL"+N]=$,this["marginR"+N]=E,this["padT"+N]=R,this["padB"+N]=X,this["padL"+N]=it,this["padR"+N]=Tt,Vt.appendChild(Kt),Vt.appendChild(Lt),Vt.appendChild($),Vt.appendChild(E),Nt.appendChild(R),Nt.appendChild(X),Nt.appendChild(it),Nt.appendChild(Tt),Ht.appendChild(Vt),Ht.appendChild(Nt),this[yt]="1"}var Pe="px",He=parseFloat(ae.marginLeft.replace(Pe,""))*ht,Ee=parseFloat(ae.marginRight.replace(Pe,""))*ht,Le=parseFloat(ae.marginTop.replace(Pe,""))*ht,Ce=parseFloat(ae.marginBottom.replace(Pe,""))*ht,fe=Kt.style,he=Lt.style,ge=$.style,gt=E.style,re=R.style,Zt=X.style,ue=it.style,ve=Tt.style,se=parseFloat(zt.left),Ne=parseFloat(ae.width)*ht+Pe;fe.height=Le+Pe,fe.width=Ne,fe.top=zt.top-Le+Pe,fe.left=se+Pe,he.height=Ce+Pe,he.width=Ne,he.top=zt.top+zt.height+Pe,he.left=se+Pe;var Ze=zt.height+Le+Ce+Pe,Ye=zt.top-Le+Pe;ge.height=Ze,ge.width=He+Pe,ge.top=Ye,ge.left=se-He+Pe,gt.height=Ze,gt.width=Ee+Pe,gt.top=Ye,gt.left=se+zt.width+Pe;var hn=parseFloat(ae.paddingTop)*ht;re.height=hn+Pe;var Ln=parseFloat(ae.paddingBottom)*ht;Zt.height=Ln+Pe;var Ot=zt.height-Ln-hn+Pe,qt=zt.top+hn+Pe;ue.height=Ot,ue.width=parseFloat(ae.paddingLeft)*ht+Pe,ue.top=qt;var b=parseFloat(ae.paddingRight)*ht;ve.height=Ot,ve.width=b+Pe,ve.top=qt}},stop:function(C,O,M){M===void 0&&(M={});var D=(M||{}).state||"",N=this.getOffsetMethod(D);C.Canvas[N](M.view).style.opacity=0}}},434:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>dt});var U=j(50);const dt={init:function(){(0,U.bindAll)(this,"_onFramesChange")},run:function(K){this.toggleVis(K)},stop:function(K){this.toggleVis(K,0)},toggleVis:function(K,Z){var z=this;if(Z===void 0&&(Z=1),!K.Commands.isActive("preview")){var C=K.Canvas,O=Z?"on":"off";C.getFrames().forEach(function(M){return z._upFrame(M,Z)}),C.getModel()[O]("change:frames",this._onFramesChange)}},_onFramesChange:function(K,Z){var z=this;Z.forEach(function(C){return C.once("loaded",function(){return z._upFrame(C,!0)})})},_upFrame:function(K,Z){var z,C=Z?"add":"remove";(z=K.view)===null||z===void 0||z.getBody().classList[C]("".concat(this.ppfx,"dashed"))}}},346:(m,Y,j)=>{j.d(Y,{FE:()=>C,G7:()=>O,Hn:()=>z});var U,dt=j(316),K=j.n(dt),Z=(U=function(M,D){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,ut){N.__proto__=ut}||function(N,ut){for(var ht in ut)Object.prototype.hasOwnProperty.call(ut,ht)&&(N[ht]=ut[ht])},U(M,D)},function(M,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function N(){this.constructor=M}U(M,D),M.prototype=D===null?Object.create(D):(N.prototype=D.prototype,new N)}),z=function(M){function D(){return M!==null&&M.apply(this,arguments)||this}return Z(D,M),D}(K().Model),C=function(M){function D(){return M!==null&&M.apply(this,arguments)||this}return Z(D,M),D}(K().Collection),O=function(M){function D(){return M!==null&&M.apply(this,arguments)||this}return Z(D,M),D}(K().View)},330:(m,Y,j)=>{j.d(Y,{Z:()=>C});var U,dt=j(50),K=j(346),Z=(U=function(O,M){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,N){D.__proto__=N}||function(D,N){for(var ut in N)Object.prototype.hasOwnProperty.call(N,ut)&&(D[ut]=N[ut])},U(O,M)},function(O,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function D(){this.constructor=O}U(O,M),O.prototype=M===null?Object.create(M):(D.prototype=M.prototype,new D)}),z=function(O){function M(D,N,ut){D===void 0&&(D={}),ut===void 0&&(ut=!1);var ht=O.call(this,D)||this;return ht.itemsView="",ht.itemType="type",ht.reuseView=!1,ht.config=N||D.config||{},ut&&ht.listenTo(ht.collection,"add",ht.addTo),ht.items=[],ht}return Z(M,O),M.prototype.addTo=function(D){this.add(D)},M.prototype.itemViewNotFound=function(D){var N=this.config,ut=this.ns,ht=N.em,Dt="".concat(ut?"[".concat(ut,"]: "):"","'").concat(D,"' type not found");ht&&ht.logWarning(Dt)},M.prototype.add=function(D,N){var ut,ht=this,Dt=ht.config,Rt=ht.reuseView,zt=ht.items,ae=this.itemsView||{},mt=N||null,yt=this.itemView,Ht=D.get(this.itemType);ae[Ht]?yt=ae[Ht]:!Ht||ae[Ht]||(0,dt.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],Ht)||this.itemViewNotFound(Ht),ut=D.view&&Rt?D.view:new yt({model:D,config:Dt},Dt),zt&&zt.push(ut);var Kt=ut.render().el;mt?mt.appendChild(Kt):this.$el.append(Kt)},M.prototype.render=function(){var D=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(N){this.add(N,D)},this),this.$el.append(D),this.onRender(),this},M.prototype.onRender=function(){},M.prototype.onRemoveBefore=function(D,N){},M.prototype.onRemove=function(D,N){},M.prototype.remove=function(D){D===void 0&&(D={});var N=this.items;return this.onRemoveBefore(N,D),this.clearItems(),O.prototype.remove.call(this),this.onRemove(N,D),this},M.prototype.clearItems=function(){this.items},M}(K.G7);const C=z;z.prototype.itemView=""},668:(m,Y,j)=>{j.d(Y,{Z:()=>z});var U=j(50),dt=j(163),K=function(){return K=Object.assign||function(C){for(var O,M=1,D=arguments.length;M<D;M++)for(var N in O=arguments[M])Object.prototype.hasOwnProperty.call(O,N)&&(C[N]=O[N]);return C},K.apply(this,arguments)},Z=["x","y"];const z=function(){function C(O){return O===void 0&&(O={}),this.opts={snapOffset:5,scale:1},(0,U.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(O),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return C.prototype.setOptions=function(O){O===void 0&&(O={}),this.opts=K(K({},this.opts),O)},C.prototype.toggleDrag=function(O){var M=this.getDocumentEl(),D=this.getContainerEl(),N=this.getWindowEl(),ut=O?"on":"off",ht={on:dt.on,off:dt.off};ht[ut](D,"mousemove dragover",this.drag),ht[ut](M,"mouseup dragend touchend",this.stop),ht[ut](M,"keydown",this.keyHandle),ht[ut](N,"scroll",this.handleScroll)},C.prototype.handleScroll=function(){var O=this.lastScroll,M=this.delta,D=this.getScrollInfo(),N={x:D.x-O.x,y:D.y-O.y};this.move(M.x+N.x,M.y+N.y),this.lastScrollDiff=N},C.prototype.start=function(O){var M=this.opts,D=M.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(O),this.guidesStatic=(0,U.result)(M,"guidesStatic")||[],this.guidesTarget=(0,U.result)(M,"guidesTarget")||[],(0,U.isFunction)(D)&&D(O,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(O)},C.prototype.drag=function(O){var M=this,D=this,N=D.opts,ut=D.lastScrollDiff,ht=D.globScrollDiff,Dt=N.onDrag,Rt=this.startPointer,zt=this.getPointerPos(O),ae={x:ht.x+ut.x,y:ht.y+ut.y};this.globScrollDiff=ae;var mt={x:zt.x-Rt.x+ae.x,y:zt.y-Rt.y+ae.y};this.lastScrollDiff={x:0,y:0};var yt=this.lockedAxis;(yt=O.shiftKey?!yt&&this.detectAxisLock(mt.x,mt.y):null)==="x"?mt.x=Rt.x:yt==="y"&&(mt.y=Rt.y);var Ht=function(X){Z.forEach(function(it){return X[it]=X[it]*(0,U.result)(N,"scale")}),M.delta=X,M.move(X.x,X.y),(0,U.isFunction)(Dt)&&Dt(O,M)},Kt=K({},mt);if(this.currentPointer=zt,this.lockedAxis=yt,this.lastScroll=this.getScrollInfo(),Ht(mt),this.guidesTarget.length){var Lt=this.snapGuides(Kt),$=Lt.newDelta,E=Lt.trgX,R=Lt.trgY;(E||R)&&Ht($)}O.which===0&&this.stop(O)},C.prototype.snapGuides=function(O){var M=this,D=O,N=this.trgX,ut=this.trgY;return this.guidesTarget.forEach(function(ht){ht.x&&M.trgX||ht.y&&M.trgY||(ht.active=!1,M.guidesStatic.forEach(function(Dt){if(!(ht.y&&Dt.x||ht.x&&Dt.y)){var Rt=ht.y&&Dt.y,zt=Rt?"y":"x",ae=ht[zt],mt=Dt[zt],yt=O[zt],Ht=Rt?ut:N;if(M.isPointIn(ae,mt)&&(0,U.isUndefined)(Ht)){var Kt=yt-(ae-mt);M.setGuideLock(ht,Kt)}}}))}),N=this.trgX,ut=this.trgY,Z.forEach(function(ht){var Dt=ht.toUpperCase(),Rt=M["trg".concat(Dt)];Rt&&!M.isPointIn(O[ht],Rt.lock)&&(M.setGuideLock(Rt,null),Rt=null),Rt&&!(0,U.isUndefined)(Rt.lock)&&(D[ht]=Rt.lock)}),{newDelta:D,trgX:this.trgX,trgY:this.trgY}},C.prototype.isPointIn=function(O,M,D){var N=(D===void 0?{}:D).offset||this.opts.snapOffset||0;return O>=M&&O<=M+N||O<=M&&O>=M-N},C.prototype.setGuideLock=function(O,M){var D=(0,U.isUndefined)(O.x)?"Y":"X",N="trg".concat(D);return M!==null?(O.active=!0,O.lock=M,this[N]=O):(delete O.active,delete O.lock,delete this[N]),O},C.prototype.stop=function(O,M){M===void 0&&(M={});var D=this.delta,N=!!M.cancel,ut=N?0:D.x,ht=N?0:D.y;this.toggleDrag(),this.lockedAxis=null,this.move(ut,ht,!0);var Dt=this.opts.onEnd;(0,U.isFunction)(Dt)&&Dt(O,this,{cancelled:N})},C.prototype.keyHandle=function(O){(0,dt.isEscKey)(O)&&this.stop(O,{cancel:!0})},C.prototype.move=function(O,M,D){var N=this.el,ut=this.opts,ht=this.startPosition;if(ht){var Dt=ut.setPosition,Rt=ht.x+O,zt=ht.y+M;this.position={x:Rt,y:zt,end:D},(0,U.isFunction)(Dt)&&Dt(this.position),N&&(N.style.left="".concat(Rt,"px"),N.style.top="".concat(zt,"px"))}},C.prototype.getContainerEl=function(){var O=this.opts.container;return O?[O]:this.getDocumentEl()},C.prototype.getWindowEl=function(){return this.getContainerEl().map(function(O){var M=O.ownerDocument||O;return M.defaultView||M.parentWindow})},C.prototype.getDocumentEl=function(O){var M=this.opts.doc;if(O=O||this.el,!this.docs.length){var D=[document];O&&D.push(O.ownerDocument),M&&D.push(M),this.docs=D}return this.docs},C.prototype.getPointerPos=function(O){var M=this.opts.getPointerPosition,D=(0,dt.getPointerEvent)(O);return M?M(O):{x:D.clientX,y:D.clientY}},C.prototype.getStartPosition=function(){var O=this.el,M=this.opts.getPosition,D={x:0,y:0};return(0,U.isFunction)(M)?D=M():O&&(D={x:parseFloat(O.style.left),y:parseFloat(O.style.top)}),D},C.prototype.getScrollInfo=function(){var O=this.opts.doc,M=O&&O.body;return{y:M?M.scrollTop:0,x:M?M.scrollLeft:0}},C.prototype.detectAxisLock=function(O,M){var D=O,N=M,ut=Math.abs(D),ht=Math.abs(N);return N>=ut||N<=-ut?"x":D>ht||D<-ht?"y":void 0},C}()},895:(m,Y,j)=>{j.r(Y),j.d(Y,{default:()=>oe});var U=typeof document<"u"?document:null,dt=typeof window<"u"?window:null,K=Array.prototype,Z=K.filter,z=K.indexOf,C=K.map,O=K.push,M=K.reverse,D=K.slice,N=K.splice,ut=/^#[\w-]*$/,ht=/^\.[\w-]*$/,Dt=/<.+>/,Rt=/^\w+$/;function zt(W,pt){return pt===void 0&&(pt=U),ht.test(W)?pt.getElementsByClassName(W.slice(1)):Rt.test(W)?pt.getElementsByTagName(W):pt.querySelectorAll(W)}function ae(W,pt){if(pt===void 0&&(pt=U),W){if(W.__cash)return W;var _t=W;if(it(W)){if(pt.__cash&&(pt=pt[0]),!(_t=ut.test(W)?pt.getElementById(W.slice(1)):Dt.test(W)?ze(W):zt(W,pt)))return}else if(X(W))return this.ready(W);(_t.nodeType||_t===dt)&&(_t=[_t]),this.length=_t.length;for(var kt=0,ie=this.length;kt<ie;kt++)this[kt]=_t[kt]}}function mt(W,pt){return new ae(W,pt)}var yt=mt.fn=mt.prototype=ae.prototype={constructor:mt,__cash:!0,length:0,splice:N};yt.get=function(W){return W===void 0?D.call(this):this[W<0?W+this.length:W]},yt.eq=function(W){return mt(this.get(W))},yt.first=function(){return this.eq(0)},yt.last=function(){return this.eq(-1)},yt.map=function(W){return mt(C.call(this,function(pt,_t){return W.call(pt,_t,pt)}))},yt.slice=function(){return mt(D.apply(this,arguments))};var Ht=/(?:^\w|[A-Z]|\b\w)/g,Kt=/[\s-_]+/g;function Lt(W){return W.replace(Ht,function(pt,_t){return pt[_t?"toUpperCase":"toLowerCase"]()}).replace(Kt,"")}function $(W,pt){for(var _t=0,kt=W.length;_t<kt&&pt.call(W[_t],W[_t],_t,W)!==!1;_t++);}mt.camelCase=Lt,mt.each=$,yt.each=function(W){return $(this,function(pt,_t){return W.call(pt,_t,pt)}),this},yt.removeProp=function(W){return this.each(function(pt,_t){delete _t[W]})},mt.extend=yt.extend=function(W){W===void 0&&(W=this);for(var pt=arguments,_t=pt.length,kt=_t<2?0:1;kt<_t;kt++)for(var ie in pt[kt])W[ie]=pt[kt][ie];return W};var E=1;function R(W,pt){var _t=W&&(W.matches||W.webkitMatchesSelector||W.mozMatchesSelector||W.msMatchesSelector||W.oMatchesSelector);return!!_t&&_t.call(W,pt)}function X(W){return typeof W=="function"}function it(W){return typeof W=="string"}function Tt(W){return!isNaN(parseFloat(W))&&isFinite(W)}mt.guid=E,mt.matches=R,mt.isFunction=X,mt.isString=it,mt.isNumeric=Tt;var st=Array.isArray;function Ct(W){return it(W)?function(pt,_t){return R(_t,W)}:W.__cash?function(pt,_t){return W.is(_t)}:function(pt,_t,kt){return _t===kt}}mt.isArray=st,yt.prop=function(W,pt){if(W){if(it(W))return arguments.length<2?this[0]&&this[0][W]:this.each(function(kt,ie){ie[W]=pt});for(var _t in W)this.prop(_t,W[_t]);return this}},yt.filter=function(W){if(!W)return mt();var pt=X(W)?W:Ct(W);return mt(Z.call(this,function(_t,kt){return pt.call(_t,kt,_t,W)}))};var H=/\S+/g;function Vt(W){return it(W)&&W.match(H)||[]}function Nt(W){return W.filter(function(pt,_t,kt){return kt.indexOf(pt)===_t})}function te(W,pt,_t){if(W.nodeType===1){var kt=dt.getComputedStyle(W,null);return pt?_t?kt.getPropertyValue(pt):kt[pt]:kt}}function De(W,pt){return parseInt(te(W,pt),10)||0}yt.hasClass=function(W){var pt=Vt(W),_t=!1;return pt.length&&this.each(function(kt,ie){return!(_t=ie.classList.contains(pt[0]))}),_t},yt.removeAttr=function(W){var pt=Vt(W);return pt.length?this.each(function(_t,kt){$(pt,function(ie){kt.removeAttribute(ie)})}):this},yt.attr=function(W,pt){if(W){if(it(W)){if(arguments.length<2){if(!this[0])return;var _t=this[0].getAttribute(W);return _t===null?void 0:_t}return pt===null?this.removeAttr(W):this.each(function(ie,xe){xe.setAttribute(W,pt)})}for(var kt in W)this.attr(kt,W[kt]);return this}},yt.toggleClass=function(W,pt){var _t=Vt(W),kt=pt!==void 0;return _t.length?this.each(function(ie,xe){$(_t,function($e){kt?pt?xe.classList.add($e):xe.classList.remove($e):xe.classList.toggle($e)})}):this},yt.addClass=function(W){return this.toggleClass(W,!0)},yt.removeClass=function(W){return arguments.length?this.toggleClass(W,!1):this.attr("class","")},mt.unique=Nt,yt.add=function(W,pt){return mt(Nt(this.get().concat(mt(W,pt).get())))};var je=/^--/;function Pe(W){return je.test(W)}var He={},Ee=U&&U.createElement("div"),Le=Ee?Ee.style:{},Ce=["webkit","moz","ms","o"];function fe(W,pt){if(pt===void 0&&(pt=Pe(W)),pt)return W;if(!He[W]){var _t=Lt(W),kt=""+_t.charAt(0).toUpperCase()+_t.slice(1);$((_t+" "+Ce.join(kt+" ")+kt).split(" "),function(ie){if(ie in Le)return He[W]=ie,!1})}return He[W]}mt.prefixedProp=fe;var he={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ge(W,pt,_t){return _t===void 0&&(_t=Pe(W)),_t||he[W]||!Tt(pt)?pt:pt+"px"}yt.css=function(W,pt){if(it(W)){var _t=Pe(W);return W=fe(W,_t),arguments.length<2?this[0]&&te(this[0],W,_t):W?(pt=ge(W,pt,_t),this.each(function(ie,xe){xe.nodeType===1&&(_t?xe.style.setProperty(W,pt):xe.style[W]=pt)})):this}for(var kt in W)this.css(kt,W[kt]);return this};var gt="__cashData",re=/^data-(.*)/;function Zt(W){return W[gt]=W[gt]||{}}function ue(W,pt){var _t=Zt(W);if(pt){if(!(pt in _t)){var kt=W.dataset?W.dataset[pt]||W.dataset[Lt(pt)]:mt(W).attr("data-"+pt);if(kt!==void 0){try{kt=JSON.parse(kt)}catch{}_t[pt]=kt}}return _t[pt]}return _t}function ve(W,pt){return De(W,"border"+(pt?"Left":"Top")+"Width")+De(W,"padding"+(pt?"Left":"Top"))+De(W,"padding"+(pt?"Right":"Bottom"))+De(W,"border"+(pt?"Right":"Bottom")+"Width")}function se(W,pt){for(var _t=0,kt=pt.length;_t<kt;_t++)if(W.indexOf(pt[_t])<0)return!1;return!0}function Ne(W,pt,_t){$(W[_t],function(kt){kt[0];var ie=kt[1];pt.removeEventListener(_t,ie)}),delete W[_t]}mt.hasData=function(W){return gt in W},yt.data=function(W,pt){var _t=this;if(!W)return this[0]?($(this[0].attributes,function(ie){var xe=ie.name.match(re);xe&&_t.data(xe[1])}),ue(this[0])):void 0;if(it(W))return pt===void 0?this[0]&&ue(this[0],W):this.each(function(ie,xe){return function($e,Qe,zn){Zt($e)[Qe]=zn}(xe,W,pt)});for(var kt in W)this.data(kt,W[kt]);return this},yt.removeData=function(W){return this.each(function(pt,_t){return function(kt,ie){ie===void 0?delete kt[gt]:delete Zt(kt)[ie]}(_t,W)})},$(["Width","Height"],function(W){yt["inner"+W]=function(){if(this[0])return this[0]===dt?dt["inner"+W]:this[0]["client"+W]}}),$(["width","height"],function(W,pt){yt[W]=function(_t){return this[0]?arguments.length?(_t=parseInt(_t,10),this.each(function(kt,ie){if(ie.nodeType===1){var xe=te(ie,"boxSizing");ie.style[W]=ge(W,_t+(xe==="border-box"?ve(ie,!pt):0))}})):this[0]===dt?this[0][Lt("outer-"+W)]:this[0].getBoundingClientRect()[W]-ve(this[0],!pt):_t===void 0?void 0:this}}),$(["Width","Height"],function(W,pt){yt["outer"+W]=function(_t){if(this[0])return this[0]===dt?dt["outer"+W]:this[0]["offset"+W]+(_t?De(this[0],"margin"+(pt?"Top":"Left"))+De(this[0],"margin"+(pt?"Bottom":"Right")):0)}});var Ze="__cashEvents",Ye=".";function hn(W){return W[Ze]=W[Ze]||{}}function Ln(W){var pt=W.split(Ye);return[pt[0],pt.slice(1).sort()]}function Ot(W,pt,_t,kt){var ie=hn(W);if(pt){var xe=ie[pt];if(!xe)return;kt&&(kt.guid=kt.guid||E++),ie[pt]=xe.filter(function($e){var Qe=$e[0],zn=$e[1];if(kt&&zn.guid!==kt.guid||!se(Qe,_t))return!0;W.removeEventListener(pt,zn)})}else if(_t&&_t.length)for(pt in ie)Ot(W,pt,_t,kt);else for(pt in ie)Ne(ie,W,pt)}yt.off=function(W,pt){var _t=this;return W===void 0?this.each(function(kt,ie){return Ot(ie)}):$(Vt(W),function(kt){var ie=Ln(kt),xe=ie[0],$e=ie[1];_t.each(function(Qe,zn){return Ot(zn,xe,$e,pt)})}),this},yt.on=function(W,pt,_t,kt){var ie=this;if(!it(W)){for(var xe in W)this.on(xe,pt,W[xe]);return this}return X(pt)&&(_t=pt,pt=!1),$(Vt(W),function($e){var Qe=Ln($e),zn=Qe[0],wn=Qe[1];ie.each(function(Ge,Rr){var nr=function Vr(_n){if(!_n.namespace||se(wn,_n.namespace.split(Ye))){var kn=Rr;if(pt){for(var Yn=_n.target;!R(Yn,pt);)if(Yn===Rr||!(Yn=Yn.parentNode))return;kn=Yn}_n.namespace=_n.namespace||"";var Hr=_t.call(kn,_n,_n.data);kt&&Ot(Rr,zn,wn,Vr),Hr===!1&&(_n.preventDefault(),_n.stopPropagation())}};nr.guid=_t.guid=_t.guid||E++,function(Vr,_n,kn,Yn){Yn.guid=Yn.guid||E++;var Hr=hn(Vr);Hr[_n]=Hr[_n]||[],Hr[_n].push([kn,Yn]),Vr.addEventListener(_n,Yn)}(Rr,zn,wn,nr)})}),this},yt.one=function(W,pt,_t){return this.on(W,pt,_t,!0)},yt.ready=function(W){var pt=function(){return W(mt)};return U.readyState!=="loading"?setTimeout(pt):U.addEventListener("DOMContentLoaded",pt),this},yt.trigger=function(W,pt){var _t=W;if(it(W)){var kt=Ln(W),ie=kt[0],xe=kt[1];(_t=U.createEvent("HTMLEvents")).initEvent(ie,!0,!0),_t.namespace=xe.join(Ye)}return _t.data=pt,this.each(function($e,Qe){Qe.dispatchEvent(_t)})};var qt=/select-one/i,b=/select-multiple/i;function L(W){var pt=W.type;return qt.test(pt)?function(_t){return _t.selectedIndex<0?null:_t.options[_t.selectedIndex].value}(W):b.test(pt)?function(_t){var kt=[];return $(_t.options,function(ie){!ie.selected||ie.disabled||ie.parentNode.disabled||kt.push(ie.value)}),kt}(W):W.value}var B=/%20/g,vt=/file|reset|submit|button|image/i,At=/radio|checkbox/i;yt.serialize=function(){var W="";return this.each(function(pt,_t){$(_t.elements||[_t],function(kt){if(!kt.disabled&&kt.name&&kt.tagName!=="FIELDSET"&&!vt.test(kt.type)&&(!At.test(kt.type)||kt.checked)){var ie=L(kt);ie!==void 0&&$(st(ie)?ie:[ie],function(xe){W+=function($e,Qe){return"&"+encodeURIComponent($e)+"="+encodeURIComponent(Qe).replace(B,"+")}(kt.name,xe)})}})}),W.substr(1)},yt.val=function(W){return W===void 0?this[0]&&L(this[0]):this.each(function(pt,_t){var kt=b.test(_t.type),ie=W===null?kt?[]:"":W;kt&&st(ie)?$(_t.options,function(xe){xe.selected=ie.indexOf(xe.value)>=0}):_t.value=ie})},yt.clone=function(){return this.map(function(W,pt){return pt.cloneNode(!0)})},yt.detach=function(){return this.each(function(W,pt){pt.parentNode&&pt.parentNode.removeChild(pt)})};var Pt,ne=/^\s*<(\w+)[^>]*>/,we=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function ze(W){if(function(){if(!Pt){var kt=U.createElement("table"),ie=U.createElement("tr");Pt={"*":U.createElement("div"),tr:U.createElement("tbody"),td:ie,th:ie,thead:kt,tbody:kt,tfoot:kt}}}(),!it(W))return[];if(we.test(W))return[U.createElement(RegExp.$1)];var pt=ne.test(W)&&RegExp.$1,_t=Pt[pt]||Pt["*"];return _t.innerHTML=W,mt(_t.childNodes).detach().get()}function Ue(W,pt,_t){if(pt!==void 0){var kt=it(pt);!kt&&pt.length?$(pt,function(ie){return Ue(W,ie,_t)}):$(W,kt?function(ie){ie.insertAdjacentHTML(_t?"afterbegin":"beforeend",pt)}:function(ie,xe){return function($e,Qe,zn){zn?$e.insertBefore(Qe,$e.childNodes[0]):$e.appendChild(Qe)}(ie,xe?pt.cloneNode(!0):pt,_t)})}}mt.parseHTML=ze,yt.empty=function(){var W=this[0];if(W)for(;W.firstChild;)W.removeChild(W.firstChild);return this},yt.append=function(){var W=this;return $(arguments,function(pt){Ue(W,pt)}),this},yt.appendTo=function(W){return Ue(mt(W),this),this},yt.html=function(W){if(W===void 0)return this[0]&&this[0].innerHTML;var pt=W.nodeType?W[0].outerHTML:W;return this.each(function(_t,kt){kt.innerHTML=pt})},yt.insertAfter=function(W){var pt=this;return mt(W).each(function(_t,kt){var ie=kt.parentNode;pt.each(function(xe,$e){ie.insertBefore(_t?$e.cloneNode(!0):$e,kt.nextSibling)})}),this},yt.after=function(){var W=this;return $(M.apply(arguments),function(pt){M.apply(mt(pt).slice()).insertAfter(W)}),this},yt.insertBefore=function(W){var pt=this;return mt(W).each(function(_t,kt){var ie=kt.parentNode;pt.each(function(xe,$e){ie.insertBefore(_t?$e.cloneNode(!0):$e,kt)})}),this},yt.before=function(){var W=this;return $(arguments,function(pt){mt(pt).insertBefore(W)}),this},yt.prepend=function(){var W=this;return $(arguments,function(pt){Ue(W,pt,!0)}),this},yt.prependTo=function(W){return Ue(mt(W),M.apply(this.slice()),!0),this},yt.remove=function(){return this.detach().off()},yt.replaceWith=function(W){var pt=this;return this.each(function(_t,kt){var ie=kt.parentNode;if(ie){var xe=_t?mt(W).clone():mt(W);if(!xe[0])return pt.remove(),!1;ie.replaceChild(xe[0],kt),mt(xe[0]).after(xe.slice(1))}})},yt.replaceAll=function(W){return mt(W).replaceWith(this),this},yt.text=function(W){return W===void 0?this[0]?this[0].textContent:"":this.each(function(pt,_t){_t.textContent=W})};var on=U&&U.documentElement;yt.offset=function(){var W=this[0];if(W){var pt=W.getBoundingClientRect();return{top:pt.top+dt.pageYOffset-on.clientTop,left:pt.left+dt.pageXOffset-on.clientLeft}}},yt.offsetParent=function(){return mt(this[0]&&this[0].offsetParent)},yt.position=function(){var W=this[0];if(W)return{left:W.offsetLeft,top:W.offsetTop}},yt.children=function(W){var pt=[];return this.each(function(_t,kt){O.apply(pt,kt.children)}),pt=mt(Nt(pt)),W?pt.filter(function(_t,kt){return R(kt,W)}):pt},yt.contents=function(){var W=[];return this.each(function(pt,_t){O.apply(W,_t.tagName==="IFRAME"?[_t.contentDocument]:_t.childNodes)}),mt(W.length&&Nt(W))},yt.find=function(W){for(var pt=[],_t=0,kt=this.length;_t<kt;_t++){var ie=zt(W,this[_t]);ie.length&&O.apply(pt,ie)}return mt(pt.length&&Nt(pt))},yt.has=function(W){var pt=it(W)?function(_t,kt){return!!zt(W,kt).length}:function(_t,kt){return kt.contains(W)};return this.filter(pt)},yt.is=function(W){if(!W||!this[0])return!1;var pt=Ct(W),_t=!1;return this.each(function(kt,ie){return!(_t=pt(kt,ie,W))}),_t},yt.next=function(){return mt(this[0]&&this[0].nextElementSibling)},yt.not=function(W){if(!W||!this[0])return this;var pt=Ct(W);return this.filter(function(_t,kt){return!pt(_t,kt,W)})},yt.parent=function(){var W=[];return this.each(function(pt,_t){_t&&_t.parentNode&&W.push(_t.parentNode)}),mt(Nt(W))},yt.index=function(W){var pt=W?mt(W)[0]:this[0],_t=W?this:mt(pt).parent().children();return z.call(_t,pt)},yt.closest=function(W){return W&&this[0]?this.is(W)?this.filter(W):this.parent().closest(W):mt()},yt.parents=function(W){var pt,_t=[];return this.each(function(kt,ie){for(pt=ie;pt&&pt.parentNode&&pt!==U.body.parentNode;)pt=pt.parentNode,(!W||W&&R(pt,W))&&_t.push(pt)}),mt(Nt(_t))},yt.prev=function(){return mt(this[0]&&this[0].previousElementSibling)},yt.siblings=function(){var W=this[0];return this.parent().children().filter(function(pt,_t){return _t!==W})};const oe=mt},491:(m,Y,j)=>{j.d(Y,{$Q:()=>ut,FW:()=>M,G1:()=>Z,L_:()=>C,Mx:()=>z,R3:()=>ht,SJ:()=>ae,dL:()=>N,pn:()=>D,rw:()=>Rt,sE:()=>O,t3:()=>zt,ut:()=>Dt});var U=j(50),dt="tag",K="attributes",Z="transitionend oTransitionEnd transitionend webkitTransitionEnd",z=function(mt){return mt&&mt.nodeType===9},C=function(mt){var yt=mt&&mt.parentNode;yt&&yt.removeChild(mt)},O=function(mt,yt){return mt.querySelectorAll(yt)},M=function(mt,yt){return yt===void 0&&(yt={}),mt&&mt.setAttribute&&(0,U.each)(yt,function(Ht,Kt){return mt.setAttribute(Kt,Ht)})},D=function(mt){return mt&&!!(mt.offsetWidth||mt.offsetHeight||mt.getClientRects().length)},N=function(mt,yt){var Ht;(Ht=mt.parentNode)===null||Ht===void 0||Ht.replaceChild(yt,mt)},ut=function(mt,yt,Ht){var Kt=mt.childNodes,Lt=Kt.length,$=(0,U.isUndefined)(Ht)?Lt:Ht;(0,U.isString)(yt)&&(mt.insertAdjacentHTML("beforeEnd",yt),yt=mt.lastChild,mt.removeChild(yt)),$>=Lt?mt.appendChild(yt):mt.insertBefore(yt,Kt[$])},ht=function(mt,yt){return ut(mt,yt)},Dt=function(mt,yt,Ht){yt===void 0&&(yt={});var Kt=document.createElement(mt);return yt&&(0,U.each)(yt,function(Lt,$){return Kt.setAttribute($,Lt)}),Ht&&((0,U.isString)(Ht)?Kt.innerHTML=Ht:Kt.appendChild(Ht)),Kt},Rt=function(mt){return document.createTextNode(mt)},zt=function(mt,yt){var Ht,Kt=mt.type;try{Ht=new window[yt](Kt,mt)}catch{(Ht=document.createEvent(yt)).initEvent(Kt,!0,!0)}return Ht._parentEvent=mt,Kt.indexOf("key")===0&&(Ht.keyCodeVal=mt.keyCode,["keyCode","which"].forEach(function(Lt){Object.defineProperty(Ht,Lt,{get:function(){return this.keyCodeVal}})})),Ht},ae=function(mt,yt){yt===void 0&&(yt=[]),(Array.isArray(yt)?yt:[yt]).forEach(function(Ht){var Kt=Ht[dt]||"div",Lt=Ht[K]||{},$=document.createElement(Kt);(0,U.each)(Lt,function(E,R){$.setAttribute(R,E)}),mt.appendChild($)})}},163:(m,Y,j)=>{j.r(Y),j.d(Y,{appendStyles:()=>ut,buildBase64UrlFromSvg:()=>ge,camelCase:()=>mt,capitalize:()=>He,createId:()=>he,deepMerge:()=>Tt,escape:()=>X,escapeNodeContent:()=>it,find:()=>R,getElRect:()=>Ct,getElement:()=>Kt,getGlobal:()=>C,getKeyChar:()=>Nt,getKeyCode:()=>Vt,getModel:()=>st,getPointerEvent:()=>H,getUiClass:()=>N,getUnitFromValue:()=>zt,getViewEl:()=>Ce,hasDnd:()=>Ht,hasWin:()=>z,isCommentNode:()=>$,isComponent:()=>Ee,isDef:()=>Z,isEmptyObj:()=>Pe,isEnterKey:()=>De,isEscKey:()=>te,isObject:()=>je,isRule:()=>Le,isTaggableNode:()=>E,isTextNode:()=>Lt,matches:()=>D,normalizeFloat:()=>yt,off:()=>Rt,on:()=>Dt,setViewEl:()=>fe,shallowDiff:()=>ht,toLowerCase:()=>O,upFirst:()=>ae});var U=j(50),dt=function(){return dt=Object.assign||function(gt){for(var re,Zt=1,ue=arguments.length;Zt<ue;Zt++)for(var ve in re=arguments[Zt])Object.prototype.hasOwnProperty.call(re,ve)&&(gt[ve]=re[ve]);return gt},dt.apply(this,arguments)},K=function(gt,re,Zt){if(Zt||arguments.length===2)for(var ue,ve=0,se=re.length;ve<se;ve++)!ue&&ve in re||(ue||(ue=Array.prototype.slice.call(re,0,ve)),ue[ve]=re[ve]);return gt.concat(ue||Array.prototype.slice.call(re))},Z=function(gt){return gt!==void 0},z=function(){return typeof window<"u"},C=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:j.g},O=function(gt){return(gt||"").toLowerCase()},M=z()?window.Element.prototype:{},D=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.msMatchesSelector,N=function(gt,re){var Zt=gt.getConfig(),ue=Zt.stylePrefix;return[Zt.customUI&&"".concat(ue,"cui"),re].filter(function(ve){return ve}).join(" ")},ut=function(gt,re){re===void 0&&(re={});var Zt=(0,U.isArray)(gt)?K([],gt,!0):[gt];if(Zt.length){var ue=Zt.shift();if(ue&&(!re.unique||!document.querySelector('link[href="'.concat(ue,'"]')))){var ve=document.head,se=document.createElement("link");se.href=ue,se.rel="stylesheet",re.prepand?ve.insertBefore(se,ve.firstChild):ve.appendChild(se)}ut(Zt)}},ht=function(gt,re){var Zt={},ue=(0,U.keys)(re);for(var ve in gt)if(gt.hasOwnProperty(ve)){var se=gt[ve],Ne=re[ve];ue.indexOf(ve)>=0?se!==Ne&&(Zt[ve]=Ne):Zt[ve]=null}for(var ve in re)re.hasOwnProperty(ve)&&(0,U.isUndefined)(gt[ve])&&(Zt[ve]=re[ve]);return Zt},Dt=function(gt,re,Zt,ue){var ve=re.split(/\s+/);gt=gt instanceof Array?gt:[gt];for(var se=function(Ze){gt.forEach(function(Ye){return Ye&&Ye.addEventListener(ve[Ze],Zt,ue)})},Ne=0;Ne<ve.length;++Ne)se(Ne)},Rt=function(gt,re,Zt,ue){var ve=re.split(/\s+/);gt=gt instanceof Array?gt:[gt];for(var se=function(Ze){gt.forEach(function(Ye){return Ye&&Ye.removeEventListener(ve[Ze],Zt,ue)})},Ne=0;Ne<ve.length;++Ne)se(Ne)},zt=function(gt){return gt.replace(parseFloat(gt),"")},ae=function(gt){return gt[0].toUpperCase()+gt.toLowerCase().slice(1)},mt=function(gt){return gt.replace(/-./g,function(re){return re[1].toUpperCase()})},yt=function(gt,re,Zt){re===void 0&&(re=1),Zt===void 0&&(Zt=0);var ue=0;if(isNaN(gt))return Zt;if(gt=parseFloat(gt),Math.floor(gt)!==gt){var ve=re.toString().split(".")[1];ue=ve?ve.length:0}return ue?parseFloat(gt.toFixed(ue)):gt},Ht=function(gt){return"draggable"in document.createElement("i")&&(!gt||gt.config.nativeDnD)},Kt=function(gt){return(0,U.isElement)(gt)||Lt(gt)?gt:gt&&gt.getEl?gt.getEl():void 0},Lt=function(gt){return gt&&gt.nodeType===3},$=function(gt){return gt&&gt.nodeType===8},E=function(gt){return gt&&!Lt(gt)&&!$(gt)},R=function(gt,re){var Zt=null;return gt.some(function(ue,ve){return re(ue,ve,gt)?(Zt=ue,1):0}),Zt},X=function(gt){return gt===void 0&&(gt=""),"".concat(gt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},it=function(gt){return gt===void 0&&(gt=""),"".concat(gt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Tt=function(){for(var gt=[],re=0;re<arguments.length;re++)gt[re]=arguments[re];for(var Zt=dt({},gt[0]),ue=1;ue<gt.length;ue++){var ve=dt({},gt[ue]);for(var se in ve){var Ne=Zt[se],Ze=ve[se];je(Ne)&&je(Ze)?Zt[se]=Tt(Ne,Ze):Zt[se]=Ze}}return Zt},st=function(gt,re){var Zt=gt;return!re&&gt&&gt.__cashData?Zt=gt.__cashData.model:(0,U.isElement)(gt)&&(Zt=re(gt).data("model")),Zt},Ct=function(gt){var re,Zt={top:0,left:0,width:0,height:0};if(!gt)return Zt;if(Lt(gt)){var ue=document.createRange();ue.selectNode(gt),re=ue.getBoundingClientRect(),ue.detach()}return re||(gt.getBoundingClientRect?gt.getBoundingClientRect():Zt)},H=function(gt){return gt.touches&&gt.touches[0]?gt.touches[0]:gt},Vt=function(gt){return gt.which||gt.keyCode},Nt=function(gt){return String.fromCharCode(Vt(gt))},te=function(gt){return Vt(gt)===27},De=function(gt){return Vt(gt)===13},je=function(gt){return gt!==null&&!Array.isArray(gt)&&typeof gt=="object"},Pe=function(gt){return Object.keys(gt).length<=0},He=function(gt){return gt===void 0&&(gt=""),gt&&gt.charAt(0).toUpperCase()+gt.substring(1)},Ee=function(gt){return gt&&gt.toHTML},Le=function(gt){return gt&&gt.toCSS},Ce=function(gt){return gt.__gjsv},fe=function(gt,re){gt.__gjsv=re},he=function(gt){gt===void 0&&(gt=16);for(var re="",Zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ue=Zt.length,ve=0;ve<gt;ve++)re+=Zt.charAt(Math.floor(Math.random()*ue));return re},ge=function(gt){if(gt&&gt.substr(0,4)==="<svg"){var re="";return z()?re=window.btoa(gt):typeof Buffer<"u"&&(re=Buffer.from(gt,"utf8").toString("base64")),re?"data:image/svg+xml;base64,".concat(re):gt}return gt}},828:(m,Y,j)=>{var U={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./DeleteComponent":517,"./DeleteComponent.ts":517,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function dt(Z){var z=K(Z);return j(z)}function K(Z){if(!j.o(U,Z)){var z=new Error("Cannot find module '"+Z+"'");throw z.code="MODULE_NOT_FOUND",z}return U[Z]}dt.keys=function(){return Object.keys(U)},dt.resolve=K,m.exports=dt,dt.id=828},50:(m,Y,j)=>{j.r(Y),j.d(Y,{VERSION:()=>dt,after:()=>Mr,all:()=>es,allKeys:()=>oe,any:()=>xi,assign:()=>Bn,before:()=>Lo,bind:()=>Eo,bindAll:()=>Zo,chain:()=>Ws,chunk:()=>ri,clone:()=>Go,collect:()=>Lr,compact:()=>ss,compose:()=>Gs,constant:()=>Ne,contains:()=>br,countBy:()=>Wa,create:()=>Ao,debounce:()=>or,default:()=>Wl,defaults:()=>Po,defer:()=>Xi,delay:()=>Mo,detect:()=>Cr,difference:()=>No,drop:()=>Nr,each:()=>xn,escape:()=>Xt,every:()=>es,extend:()=>Hr,extendOwn:()=>Bn,filter:()=>Sn,find:()=>Cr,findIndex:()=>Ci,findKey:()=>Ks,findLastIndex:()=>Qo,findWhere:()=>Qn,first:()=>ho,flatten:()=>as,foldl:()=>Br,foldr:()=>ts,forEach:()=>xn,functions:()=>kn,get:()=>zr,groupBy:()=>ei,has:()=>jo,head:()=>ho,identity:()=>io,include:()=>br,includes:()=>br,indexBy:()=>rs,indexOf:()=>ir,initial:()=>is,inject:()=>Br,intersection:()=>ni,invert:()=>_n,invoke:()=>Ur,isArguments:()=>ue,isArray:()=>gt,isArrayBuffer:()=>je,isBoolean:()=>it,isDataView:()=>ge,isDate:()=>Vt,isElement:()=>Tt,isEmpty:()=>vt,isEqual:()=>on,isError:()=>te,isFinite:()=>ve,isFunction:()=>Ee,isMap:()=>zn,isMatch:()=>At,isNaN:()=>se,isNull:()=>R,isNumber:()=>H,isObject:()=>E,isRegExp:()=>Nt,isSet:()=>Ge,isString:()=>Ct,isSymbol:()=>De,isTypedArray:()=>qt,isUndefined:()=>X,isWeakMap:()=>wn,isWeakSet:()=>Rr,iteratee:()=>So,keys:()=>B,last:()=>Oi,lastIndexOf:()=>Qi,map:()=>Lr,mapObject:()=>Se,matcher:()=>Xn,matches:()=>Xn,max:()=>$r,memoize:()=>$s,methods:()=>kn,min:()=>Si,mixin:()=>Qs,negate:()=>wi,noop:()=>ur,now:()=>Wn,object:()=>Ga,omit:()=>os,once:()=>_i,pairs:()=>Vr,partial:()=>fo,partition:()=>$a,pick:()=>Do,pluck:()=>Wr,property:()=>Un,propertyOf:()=>Yo,random:()=>rn,range:()=>ls,reduce:()=>Br,reduceRight:()=>ts,reject:()=>Dr,rest:()=>Nr,restArguments:()=>$,result:()=>Dn,sample:()=>Ys,select:()=>Sn,shuffle:()=>Ba,size:()=>qa,some:()=>xi,sortBy:()=>Ua,sortedIndex:()=>Zi,tail:()=>Nr,take:()=>ho,tap:()=>po,template:()=>Gn,templateSettings:()=>nt,throttle:()=>qs,times:()=>pr,toArray:()=>qr,toPath:()=>yr,transpose:()=>Ti,unescape:()=>A,union:()=>Xs,uniq:()=>Io,unique:()=>Io,uniqueId:()=>Ar,unzip:()=>Ti,values:()=>nr,where:()=>Nn,without:()=>On,wrap:()=>so,zip:()=>Zs});var U={};j.r(U),j.d(U,{VERSION:()=>dt,after:()=>Mr,all:()=>es,allKeys:()=>oe,any:()=>xi,assign:()=>Bn,before:()=>Lo,bind:()=>Eo,bindAll:()=>Zo,chain:()=>Ws,chunk:()=>ri,clone:()=>Go,collect:()=>Lr,compact:()=>ss,compose:()=>Gs,constant:()=>Ne,contains:()=>br,countBy:()=>Wa,create:()=>Ao,debounce:()=>or,default:()=>Ka,defaults:()=>Po,defer:()=>Xi,delay:()=>Mo,detect:()=>Cr,difference:()=>No,drop:()=>Nr,each:()=>xn,escape:()=>Xt,every:()=>es,extend:()=>Hr,extendOwn:()=>Bn,filter:()=>Sn,find:()=>Cr,findIndex:()=>Ci,findKey:()=>Ks,findLastIndex:()=>Qo,findWhere:()=>Qn,first:()=>ho,flatten:()=>as,foldl:()=>Br,foldr:()=>ts,forEach:()=>xn,functions:()=>kn,get:()=>zr,groupBy:()=>ei,has:()=>jo,head:()=>ho,identity:()=>io,include:()=>br,includes:()=>br,indexBy:()=>rs,indexOf:()=>ir,initial:()=>is,inject:()=>Br,intersection:()=>ni,invert:()=>_n,invoke:()=>Ur,isArguments:()=>ue,isArray:()=>gt,isArrayBuffer:()=>je,isBoolean:()=>it,isDataView:()=>ge,isDate:()=>Vt,isElement:()=>Tt,isEmpty:()=>vt,isEqual:()=>on,isError:()=>te,isFinite:()=>ve,isFunction:()=>Ee,isMap:()=>zn,isMatch:()=>At,isNaN:()=>se,isNull:()=>R,isNumber:()=>H,isObject:()=>E,isRegExp:()=>Nt,isSet:()=>Ge,isString:()=>Ct,isSymbol:()=>De,isTypedArray:()=>qt,isUndefined:()=>X,isWeakMap:()=>wn,isWeakSet:()=>Rr,iteratee:()=>So,keys:()=>B,last:()=>Oi,lastIndexOf:()=>Qi,map:()=>Lr,mapObject:()=>Se,matcher:()=>Xn,matches:()=>Xn,max:()=>$r,memoize:()=>$s,methods:()=>kn,min:()=>Si,mixin:()=>Qs,negate:()=>wi,noop:()=>ur,now:()=>Wn,object:()=>Ga,omit:()=>os,once:()=>_i,pairs:()=>Vr,partial:()=>fo,partition:()=>$a,pick:()=>Do,pluck:()=>Wr,property:()=>Un,propertyOf:()=>Yo,random:()=>rn,range:()=>ls,reduce:()=>Br,reduceRight:()=>ts,reject:()=>Dr,rest:()=>Nr,restArguments:()=>$,result:()=>Dn,sample:()=>Ys,select:()=>Sn,shuffle:()=>Ba,size:()=>qa,some:()=>xi,sortBy:()=>Ua,sortedIndex:()=>Zi,tail:()=>Nr,take:()=>ho,tap:()=>po,template:()=>Gn,templateSettings:()=>nt,throttle:()=>qs,times:()=>pr,toArray:()=>qr,toPath:()=>yr,transpose:()=>Ti,unescape:()=>A,union:()=>Xs,uniq:()=>Io,unique:()=>Io,uniqueId:()=>Ar,unzip:()=>Ti,values:()=>nr,where:()=>Nn,without:()=>On,wrap:()=>so,zip:()=>Zs});var dt="1.13.4",K=typeof self=="object"&&self.self===self&&self||typeof Xc=="object"&&Xc.global===Xc&&Xc||Function("return this")()||{},Z=Array.prototype,z=Object.prototype,C=typeof Symbol<"u"?Symbol.prototype:null,O=Z.push,M=Z.slice,D=z.toString,N=z.hasOwnProperty,ut=typeof ArrayBuffer<"u",ht=typeof DataView<"u",Dt=Array.isArray,Rt=Object.keys,zt=Object.create,ae=ut&&ArrayBuffer.isView,mt=isNaN,yt=isFinite,Ht=!{toString:null}.propertyIsEnumerable("toString"),Kt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Lt=Math.pow(2,53)-1;function $(x,I){return I=I==null?x.length-1:+I,function(){for(var rt=Math.max(arguments.length-I,0),ct=Array(rt),Et=0;Et<rt;Et++)ct[Et]=arguments[Et+I];switch(I){case 0:return x.call(this,ct);case 1:return x.call(this,arguments[0],ct);case 2:return x.call(this,arguments[0],arguments[1],ct)}var bt=Array(I+1);for(Et=0;Et<I;Et++)bt[Et]=arguments[Et];return bt[I]=ct,x.apply(this,bt)}}function E(x){var I=typeof x;return I==="function"||I==="object"&&!!x}function R(x){return x===null}function X(x){return x===void 0}function it(x){return x===!0||x===!1||D.call(x)==="[object Boolean]"}function Tt(x){return!(!x||x.nodeType!==1)}function st(x){var I="[object "+x+"]";return function(rt){return D.call(rt)===I}}const Ct=st("String"),H=st("Number"),Vt=st("Date"),Nt=st("RegExp"),te=st("Error"),De=st("Symbol"),je=st("ArrayBuffer");var Pe=st("Function"),He=K.document&&K.document.childNodes;typeof Int8Array!="object"&&typeof He!="function"&&(Pe=function(x){return typeof x=="function"||!1});const Ee=Pe,Le=st("Object");var Ce=ht&&Le(new DataView(new ArrayBuffer(8))),fe=typeof Map<"u"&&Le(new Map),he=st("DataView");const ge=Ce?function(x){return x!=null&&Ee(x.getInt8)&&je(x.buffer)}:he,gt=Dt||st("Array");function re(x,I){return x!=null&&N.call(x,I)}var Zt=st("Arguments");(function(){Zt(arguments)||(Zt=function(x){return re(x,"callee")})})();const ue=Zt;function ve(x){return!De(x)&&yt(x)&&!isNaN(parseFloat(x))}function se(x){return H(x)&&mt(x)}function Ne(x){return function(){return x}}function Ze(x){return function(I){var rt=x(I);return typeof rt=="number"&&rt>=0&&rt<=Lt}}function Ye(x){return function(I){return I==null?void 0:I[x]}}const hn=Ye("byteLength"),Ln=Ze(hn);var Ot=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const qt=ut?function(x){return ae?ae(x)&&!ge(x):Ln(x)&&Ot.test(D.call(x))}:Ne(!1),b=Ye("length");function L(x,I){I=function(Ut){for(var ee={},Re=Ut.length,Ke=0;Ke<Re;++Ke)ee[Ut[Ke]]=!0;return{contains:function(yn){return ee[yn]===!0},push:function(yn){return ee[yn]=!0,Ut.push(yn)}}}(I);var rt=Kt.length,ct=x.constructor,Et=Ee(ct)&&ct.prototype||z,bt="constructor";for(re(x,bt)&&!I.contains(bt)&&I.push(bt);rt--;)(bt=Kt[rt])in x&&x[bt]!==Et[bt]&&!I.contains(bt)&&I.push(bt)}function B(x){if(!E(x))return[];if(Rt)return Rt(x);var I=[];for(var rt in x)re(x,rt)&&I.push(rt);return Ht&&L(x,I),I}function vt(x){if(x==null)return!0;var I=b(x);return typeof I=="number"&&(gt(x)||Ct(x)||ue(x))?I===0:b(B(x))===0}function At(x,I){var rt=B(I),ct=rt.length;if(x==null)return!ct;for(var Et=Object(x),bt=0;bt<ct;bt++){var Ut=rt[bt];if(I[Ut]!==Et[Ut]||!(Ut in Et))return!1}return!0}function Pt(x){return x instanceof Pt?x:this instanceof Pt?void(this._wrapped=x):new Pt(x)}function ne(x){return new Uint8Array(x.buffer||x,x.byteOffset||0,hn(x))}Pt.VERSION=dt,Pt.prototype.value=function(){return this._wrapped},Pt.prototype.valueOf=Pt.prototype.toJSON=Pt.prototype.value,Pt.prototype.toString=function(){return String(this._wrapped)};var we="[object DataView]";function ze(x,I,rt,ct){if(x===I)return x!==0||1/x==1/I;if(x==null||I==null)return!1;if(x!=x)return I!=I;var Et=typeof x;return(Et==="function"||Et==="object"||typeof I=="object")&&Ue(x,I,rt,ct)}function Ue(x,I,rt,ct){x instanceof Pt&&(x=x._wrapped),I instanceof Pt&&(I=I._wrapped);var Et=D.call(x);if(Et!==D.call(I))return!1;if(Ce&&Et=="[object Object]"&&ge(x)){if(!ge(I))return!1;Et=we}switch(Et){case"[object RegExp]":case"[object String]":return""+x==""+I;case"[object Number]":return+x!=+x?+I!=+I:+x==0?1/+x==1/I:+x==+I;case"[object Date]":case"[object Boolean]":return+x==+I;case"[object Symbol]":return C.valueOf.call(x)===C.valueOf.call(I);case"[object ArrayBuffer]":case we:return Ue(ne(x),ne(I),rt,ct)}var bt=Et==="[object Array]";if(!bt&&qt(x)){if(hn(x)!==hn(I))return!1;if(x.buffer===I.buffer&&x.byteOffset===I.byteOffset)return!0;bt=!0}if(!bt){if(typeof x!="object"||typeof I!="object")return!1;var Ut=x.constructor,ee=I.constructor;if(Ut!==ee&&!(Ee(Ut)&&Ut instanceof Ut&&Ee(ee)&&ee instanceof ee)&&"constructor"in x&&"constructor"in I)return!1}ct=ct||[];for(var Re=(rt=rt||[]).length;Re--;)if(rt[Re]===x)return ct[Re]===I;if(rt.push(x),ct.push(I),bt){if((Re=x.length)!==I.length)return!1;for(;Re--;)if(!ze(x[Re],I[Re],rt,ct))return!1}else{var Ke,yn=B(x);if(Re=yn.length,B(I).length!==Re)return!1;for(;Re--;)if(!re(I,Ke=yn[Re])||!ze(x[Ke],I[Ke],rt,ct))return!1}return rt.pop(),ct.pop(),!0}function on(x,I){return ze(x,I)}function oe(x){if(!E(x))return[];var I=[];for(var rt in x)I.push(rt);return Ht&&L(x,I),I}function W(x){var I=b(x);return function(rt){if(rt==null)return!1;var ct=oe(rt);if(b(ct))return!1;for(var Et=0;Et<I;Et++)if(!Ee(rt[x[Et]]))return!1;return x!==$e||!Ee(rt[pt])}}var pt="forEach",_t="has",kt=["clear","delete"],ie=["get",_t,"set"],xe=kt.concat(pt,ie),$e=kt.concat(ie),Qe=["add"].concat(kt,pt,_t);const zn=fe?W(xe):st("Map"),wn=fe?W($e):st("WeakMap"),Ge=fe?W(Qe):st("Set"),Rr=st("WeakSet");function nr(x){for(var I=B(x),rt=I.length,ct=Array(rt),Et=0;Et<rt;Et++)ct[Et]=x[I[Et]];return ct}function Vr(x){for(var I=B(x),rt=I.length,ct=Array(rt),Et=0;Et<rt;Et++)ct[Et]=[I[Et],x[I[Et]]];return ct}function _n(x){for(var I={},rt=B(x),ct=0,Et=rt.length;ct<Et;ct++)I[x[rt[ct]]]=rt[ct];return I}function kn(x){var I=[];for(var rt in x)Ee(x[rt])&&I.push(rt);return I.sort()}function Yn(x,I){return function(rt){var ct=arguments.length;if(I&&(rt=Object(rt)),ct<2||rt==null)return rt;for(var Et=1;Et<ct;Et++)for(var bt=arguments[Et],Ut=x(bt),ee=Ut.length,Re=0;Re<ee;Re++){var Ke=Ut[Re];I&&rt[Ke]!==void 0||(rt[Ke]=bt[Ke])}return rt}}const Hr=Yn(oe),Bn=Yn(B),Po=Yn(oe,!0);function qo(x){if(!E(x))return{};if(zt)return zt(x);var I=function(){};I.prototype=x;var rt=new I;return I.prototype=null,rt}function Ao(x,I){var rt=qo(x);return I&&Bn(rt,I),rt}function Go(x){return E(x)?gt(x)?x.slice():Hr({},x):x}function po(x,I){return I(x),x}function yr(x){return gt(x)?x:[x]}function mn(x){return Pt.toPath(x)}function Ko(x,I){for(var rt=I.length,ct=0;ct<rt;ct++){if(x==null)return;x=x[I[ct]]}return rt?x:void 0}function zr(x,I,rt){var ct=Ko(x,mn(I));return X(ct)?rt:ct}function jo(x,I){for(var rt=(I=mn(I)).length,ct=0;ct<rt;ct++){var Et=I[ct];if(!re(x,Et))return!1;x=x[Et]}return!!rt}function io(x){return x}function Xn(x){return x=Bn({},x),function(I){return At(I,x)}}function Un(x){return x=mn(x),function(I){return Ko(I,x)}}function Zn(x,I,rt){if(I===void 0)return x;switch(rt??3){case 1:return function(ct){return x.call(I,ct)};case 3:return function(ct,Et,bt){return x.call(I,ct,Et,bt)};case 4:return function(ct,Et,bt,Ut){return x.call(I,ct,Et,bt,Ut)}}return function(){return x.apply(I,arguments)}}function Jo(x,I,rt){return x==null?io:Ee(x)?Zn(x,I,rt):E(x)&&!gt(x)?Xn(x):Un(x)}function So(x,I){return Jo(x,I,1/0)}function en(x,I,rt){return Pt.iteratee!==So?Pt.iteratee(x,I):Jo(x,I,rt)}function Se(x,I,rt){I=en(I,rt);for(var ct=B(x),Et=ct.length,bt={},Ut=0;Ut<Et;Ut++){var ee=ct[Ut];bt[ee]=I(x[ee],ee,x)}return bt}function ur(){}function Yo(x){return x==null?ur:function(I){return zr(x,I)}}function pr(x,I,rt){var ct=Array(Math.max(0,x));I=Zn(I,rt,1);for(var Et=0;Et<x;Et++)ct[Et]=I(Et);return ct}function rn(x,I){return I==null&&(I=x,x=0),x+Math.floor(Math.random()*(I-x+1))}Pt.toPath=yr,Pt.iteratee=So;const Wn=Date.now||function(){return new Date().getTime()};function Oo(x){var I=function(bt){return x[bt]},rt="(?:"+B(x).join("|")+")",ct=RegExp(rt),Et=RegExp(rt,"g");return function(bt){return bt=bt==null?"":""+bt,ct.test(bt)?bt.replace(Et,I):bt}}const Xo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Xt=Oo(Xo),A=Oo(_n(Xo)),nt=Pt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Bt=/(.)^/,ce={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},_e=/\\|'|\r|\n|\u2028|\u2029/g;function tn(x){return"\\"+ce[x]}var de=/^\s*(\w|\$)+\s*$/;function Gn(x,I,rt){!I&&rt&&(I=rt),I=Po({},I,Pt.templateSettings);var ct=RegExp([(I.escape||Bt).source,(I.interpolate||Bt).source,(I.evaluate||Bt).source].join("|")+"|$","g"),Et=0,bt="__p+='";x.replace(ct,function(Ke,yn,Gr,us,Fo){return bt+=x.slice(Et,Fo).replace(_e,tn),Et=Fo+Ke.length,yn?bt+=`'+
((__t=(`+yn+`))==null?'':_.escape(__t))+
'`:Gr?bt+=`'+
((__t=(`+Gr+`))==null?'':__t)+
'`:us&&(bt+=`';
`+us+`
__p+='`),Ke}),bt+=`';
`;var Ut,ee=I.variable;if(ee){if(!de.test(ee))throw new Error("variable is not a bare identifier: "+ee)}else bt=`with(obj||{}){
`+bt+`}
`,ee="obj";bt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+bt+`return __p;
`;try{Ut=new Function(ee,"_",bt)}catch(Ke){throw Ke.source=bt,Ke}var Re=function(Ke){return Ut.call(this,Ke,Pt)};return Re.source="function("+ee+`){
`+bt+"}",Re}function Dn(x,I,rt){var ct=(I=mn(I)).length;if(!ct)return Ee(rt)?rt.call(x):rt;for(var Et=0;Et<ct;Et++){var bt=x==null?void 0:x[I[Et]];bt===void 0&&(bt=rt,Et=ct),x=Ee(bt)?bt.call(x):bt}return x}var Yi=0;function Ar(x){var I=++Yi+"";return x?x+I:I}function Ws(x){var I=Pt(x);return I._chain=!0,I}function jr(x,I,rt,ct,Et){if(!(ct instanceof I))return x.apply(rt,Et);var bt=qo(x.prototype),Ut=x.apply(bt,Et);return E(Ut)?Ut:bt}var To=$(function(x,I){var rt=To.placeholder,ct=function(){for(var Et=0,bt=I.length,Ut=Array(bt),ee=0;ee<bt;ee++)Ut[ee]=I[ee]===rt?arguments[Et++]:I[ee];for(;Et<arguments.length;)Ut.push(arguments[Et++]);return jr(x,ct,this,this,Ut)};return ct});To.placeholder=Pt;const fo=To,Eo=$(function(x,I,rt){if(!Ee(x))throw new TypeError("Bind must be called on a function");var ct=$(function(Et){return jr(x,ct,I,this,rt.concat(Et))});return ct}),rr=Ze(b);function ko(x,I,rt,ct){if(ct=ct||[],I||I===0){if(I<=0)return ct.concat(x)}else I=1/0;for(var Et=ct.length,bt=0,Ut=b(x);bt<Ut;bt++){var ee=x[bt];if(rr(ee)&&(gt(ee)||ue(ee)))if(I>1)ko(ee,I-1,rt,ct),Et=ct.length;else for(var Re=0,Ke=ee.length;Re<Ke;)ct[Et++]=ee[Re++];else rt||(ct[Et++]=ee)}return ct}const Zo=$(function(x,I){var rt=(I=ko(I,!1,!1)).length;if(rt<1)throw new Error("bindAll must be passed function names");for(;rt--;){var ct=I[rt];x[ct]=Eo(x[ct],x)}return x});function $s(x,I){var rt=function(ct){var Et=rt.cache,bt=""+(I?I.apply(this,arguments):ct);return re(Et,bt)||(Et[bt]=x.apply(this,arguments)),Et[bt]};return rt.cache={},rt}const Mo=$(function(x,I,rt){return setTimeout(function(){return x.apply(null,rt)},I)}),Xi=fo(Mo,Pt,1);function qs(x,I,rt){var ct,Et,bt,Ut,ee=0;rt||(rt={});var Re=function(){ee=rt.leading===!1?0:Wn(),ct=null,Ut=x.apply(Et,bt),ct||(Et=bt=null)},Ke=function(){var yn=Wn();ee||rt.leading!==!1||(ee=yn);var Gr=I-(yn-ee);return Et=this,bt=arguments,Gr<=0||Gr>I?(ct&&(clearTimeout(ct),ct=null),ee=yn,Ut=x.apply(Et,bt),ct||(Et=bt=null)):ct||rt.trailing===!1||(ct=setTimeout(Re,Gr)),Ut};return Ke.cancel=function(){clearTimeout(ct),ee=0,ct=Et=bt=null},Ke}function or(x,I,rt){var ct,Et,bt,Ut,ee,Re=function(){var yn=Wn()-Et;I>yn?ct=setTimeout(Re,I-yn):(ct=null,rt||(Ut=x.apply(ee,bt)),ct||(bt=ee=null))},Ke=$(function(yn){return ee=this,bt=yn,Et=Wn(),ct||(ct=setTimeout(Re,I),rt&&(Ut=x.apply(ee,bt))),Ut});return Ke.cancel=function(){clearTimeout(ct),ct=bt=ee=null},Ke}function so(x,I){return fo(I,x)}function wi(x){return function(){return!x.apply(this,arguments)}}function Gs(){var x=arguments,I=x.length-1;return function(){for(var rt=I,ct=x[I].apply(this,arguments);rt--;)ct=x[rt].call(this,ct);return ct}}function Mr(x,I){return function(){if(--x<1)return I.apply(this,arguments)}}function Lo(x,I){var rt;return function(){return--x>0&&(rt=I.apply(this,arguments)),x<=1&&(I=null),rt}}const _i=fo(Lo,2);function Ks(x,I,rt){I=en(I,rt);for(var ct,Et=B(x),bt=0,Ut=Et.length;bt<Ut;bt++)if(I(x[ct=Et[bt]],ct,x))return ct}function za(x){return function(I,rt,ct){rt=en(rt,ct);for(var Et=b(I),bt=x>0?0:Et-1;bt>=0&&bt<Et;bt+=x)if(rt(I[bt],bt,I))return bt;return-1}}const Ci=za(1),Qo=za(-1);function Zi(x,I,rt,ct){for(var Et=(rt=en(rt,ct,1))(I),bt=0,Ut=b(x);bt<Ut;){var ee=Math.floor((bt+Ut)/2);rt(x[ee])<Et?bt=ee+1:Ut=ee}return bt}function Xe(x,I,rt){return function(ct,Et,bt){var Ut=0,ee=b(ct);if(typeof bt=="number")x>0?Ut=bt>=0?bt:Math.max(bt+ee,Ut):ee=bt>=0?Math.min(bt+1,ee):bt+ee+1;else if(rt&&bt&&ee)return ct[bt=rt(ct,Et)]===Et?bt:-1;if(Et!=Et)return(bt=I(M.call(ct,Ut,ee),se))>=0?bt+Ut:-1;for(bt=x>0?Ut:ee-1;bt>=0&&bt<ee;bt+=x)if(ct[bt]===Et)return bt;return-1}}const ir=Xe(1,Ci,Zi),Qi=Xe(-1,Qo);function Cr(x,I,rt){var ct=(rr(x)?Ci:Ks)(x,I,rt);if(ct!==void 0&&ct!==-1)return x[ct]}function Qn(x,I){return Cr(x,Xn(I))}function xn(x,I,rt){var ct,Et;if(I=Zn(I,rt),rr(x))for(ct=0,Et=x.length;ct<Et;ct++)I(x[ct],ct,x);else{var bt=B(x);for(ct=0,Et=bt.length;ct<Et;ct++)I(x[bt[ct]],bt[ct],x)}return x}function Lr(x,I,rt){I=en(I,rt);for(var ct=!rr(x)&&B(x),Et=(ct||x).length,bt=Array(Et),Ut=0;Ut<Et;Ut++){var ee=ct?ct[Ut]:Ut;bt[Ut]=I(x[ee],ee,x)}return bt}function ti(x){var I=function(rt,ct,Et,bt){var Ut=!rr(rt)&&B(rt),ee=(Ut||rt).length,Re=x>0?0:ee-1;for(bt||(Et=rt[Ut?Ut[Re]:Re],Re+=x);Re>=0&&Re<ee;Re+=x){var Ke=Ut?Ut[Re]:Re;Et=ct(Et,rt[Ke],Ke,rt)}return Et};return function(rt,ct,Et,bt){var Ut=arguments.length>=3;return I(rt,Zn(ct,bt,4),Et,Ut)}}const Br=ti(1),ts=ti(-1);function Sn(x,I,rt){var ct=[];return I=en(I,rt),xn(x,function(Et,bt,Ut){I(Et,bt,Ut)&&ct.push(Et)}),ct}function Dr(x,I,rt){return Sn(x,wi(en(I)),rt)}function es(x,I,rt){I=en(I,rt);for(var ct=!rr(x)&&B(x),Et=(ct||x).length,bt=0;bt<Et;bt++){var Ut=ct?ct[bt]:bt;if(!I(x[Ut],Ut,x))return!1}return!0}function xi(x,I,rt){I=en(I,rt);for(var ct=!rr(x)&&B(x),Et=(ct||x).length,bt=0;bt<Et;bt++){var Ut=ct?ct[bt]:bt;if(I(x[Ut],Ut,x))return!0}return!1}function br(x,I,rt,ct){return rr(x)||(x=nr(x)),(typeof rt!="number"||ct)&&(rt=0),ir(x,I,rt)>=0}const Ur=$(function(x,I,rt){var ct,Et;return Ee(I)?Et=I:(I=mn(I),ct=I.slice(0,-1),I=I[I.length-1]),Lr(x,function(bt){var Ut=Et;if(!Ut){if(ct&&ct.length&&(bt=Ko(bt,ct)),bt==null)return;Ut=bt[I]}return Ut==null?Ut:Ut.apply(bt,rt)})});function Wr(x,I){return Lr(x,Un(I))}function Nn(x,I){return Sn(x,Xn(I))}function $r(x,I,rt){var ct,Et,bt=-1/0,Ut=-1/0;if(I==null||typeof I=="number"&&typeof x[0]!="object"&&x!=null)for(var ee=0,Re=(x=rr(x)?x:nr(x)).length;ee<Re;ee++)(ct=x[ee])!=null&&ct>bt&&(bt=ct);else I=en(I,rt),xn(x,function(Ke,yn,Gr){((Et=I(Ke,yn,Gr))>Ut||Et===-1/0&&bt===-1/0)&&(bt=Ke,Ut=Et)});return bt}function Si(x,I,rt){var ct,Et,bt=1/0,Ut=1/0;if(I==null||typeof I=="number"&&typeof x[0]!="object"&&x!=null)for(var ee=0,Re=(x=rr(x)?x:nr(x)).length;ee<Re;ee++)(ct=x[ee])!=null&&ct<bt&&(bt=ct);else I=en(I,rt),xn(x,function(Ke,yn,Gr){((Et=I(Ke,yn,Gr))<Ut||Et===1/0&&bt===1/0)&&(bt=Ke,Ut=Et)});return bt}var Js=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function qr(x){return x?gt(x)?M.call(x):Ct(x)?x.match(Js):rr(x)?Lr(x,io):nr(x):[]}function Ys(x,I,rt){if(I==null||rt)return rr(x)||(x=nr(x)),x[rn(x.length-1)];var ct=qr(x),Et=b(ct);I=Math.max(Math.min(I,Et),0);for(var bt=Et-1,Ut=0;Ut<I;Ut++){var ee=rn(Ut,bt),Re=ct[Ut];ct[Ut]=ct[ee],ct[ee]=Re}return ct.slice(0,I)}function Ba(x){return Ys(x,1/0)}function Ua(x,I,rt){var ct=0;return I=en(I,rt),Wr(Lr(x,function(Et,bt,Ut){return{value:Et,index:ct++,criteria:I(Et,bt,Ut)}}).sort(function(Et,bt){var Ut=Et.criteria,ee=bt.criteria;if(Ut!==ee){if(Ut>ee||Ut===void 0)return 1;if(Ut<ee||ee===void 0)return-1}return Et.index-bt.index}),"value")}function ns(x,I){return function(rt,ct,Et){var bt=I?[[],[]]:{};return ct=en(ct,Et),xn(rt,function(Ut,ee){var Re=ct(Ut,ee,rt);x(bt,Ut,Re)}),bt}}const ei=ns(function(x,I,rt){re(x,rt)?x[rt].push(I):x[rt]=[I]}),rs=ns(function(x,I,rt){x[rt]=I}),Wa=ns(function(x,I,rt){re(x,rt)?x[rt]++:x[rt]=1}),$a=ns(function(x,I,rt){x[rt?0:1].push(I)},!0);function qa(x){return x==null?0:rr(x)?x.length:B(x).length}function Ul(x,I,rt){return I in rt}const Do=$(function(x,I){var rt={},ct=I[0];if(x==null)return rt;Ee(ct)?(I.length>1&&(ct=Zn(ct,I[1])),I=oe(x)):(ct=Ul,I=ko(I,!1,!1),x=Object(x));for(var Et=0,bt=I.length;Et<bt;Et++){var Ut=I[Et],ee=x[Ut];ct(ee,Ut,x)&&(rt[Ut]=ee)}return rt}),os=$(function(x,I){var rt,ct=I[0];return Ee(ct)?(ct=wi(ct),I.length>1&&(rt=I[1])):(I=Lr(ko(I,!1,!1),String),ct=function(Et,bt){return!br(I,bt)}),Do(x,ct,rt)});function is(x,I,rt){return M.call(x,0,Math.max(0,x.length-(I==null||rt?1:I)))}function ho(x,I,rt){return x==null||x.length<1?I==null||rt?void 0:[]:I==null||rt?x[0]:is(x,x.length-I)}function Nr(x,I,rt){return M.call(x,I==null||rt?1:I)}function Oi(x,I,rt){return x==null||x.length<1?I==null||rt?void 0:[]:I==null||rt?x[x.length-1]:Nr(x,Math.max(0,x.length-I))}function ss(x){return Sn(x,Boolean)}function as(x,I){return ko(x,I,!1)}const No=$(function(x,I){return I=ko(I,!0,!0),Sn(x,function(rt){return!br(I,rt)})}),On=$(function(x,I){return No(x,I)});function Io(x,I,rt,ct){it(I)||(ct=rt,rt=I,I=!1),rt!=null&&(rt=en(rt,ct));for(var Et=[],bt=[],Ut=0,ee=b(x);Ut<ee;Ut++){var Re=x[Ut],Ke=rt?rt(Re,Ut,x):Re;I&&!rt?(Ut&&bt===Ke||Et.push(Re),bt=Ke):rt?br(bt,Ke)||(bt.push(Ke),Et.push(Re)):br(Et,Re)||Et.push(Re)}return Et}const Xs=$(function(x){return Io(ko(x,!0,!0))});function ni(x){for(var I=[],rt=arguments.length,ct=0,Et=b(x);ct<Et;ct++){var bt=x[ct];if(!br(I,bt)){var Ut;for(Ut=1;Ut<rt&&br(arguments[Ut],bt);Ut++);Ut===rt&&I.push(bt)}}return I}function Ti(x){for(var I=x&&$r(x,b).length||0,rt=Array(I),ct=0;ct<I;ct++)rt[ct]=Wr(x,ct);return rt}const Zs=$(Ti);function Ga(x,I){for(var rt={},ct=0,Et=b(x);ct<Et;ct++)I?rt[x[ct]]=I[ct]:rt[x[ct][0]]=x[ct][1];return rt}function ls(x,I,rt){I==null&&(I=x||0,x=0),rt||(rt=I<x?-1:1);for(var ct=Math.max(Math.ceil((I-x)/rt),0),Et=Array(ct),bt=0;bt<ct;bt++,x+=rt)Et[bt]=x;return Et}function ri(x,I){if(I==null||I<1)return[];for(var rt=[],ct=0,Et=x.length;ct<Et;)rt.push(M.call(x,ct,ct+=I));return rt}function Ei(x,I){return x._chain?Pt(I).chain():I}function Qs(x){return xn(kn(x),function(I){var rt=Pt[I]=x[I];Pt.prototype[I]=function(){var ct=[this._wrapped];return O.apply(ct,arguments),Ei(this,rt.apply(Pt,ct))}}),Pt}xn(["pop","push","reverse","shift","sort","splice","unshift"],function(x){var I=Z[x];Pt.prototype[x]=function(){var rt=this._wrapped;return rt!=null&&(I.apply(rt,arguments),x!=="shift"&&x!=="splice"||rt.length!==0||delete rt[0]),Ei(this,rt)}}),xn(["concat","join","slice"],function(x){var I=Z[x];Pt.prototype[x]=function(){var rt=this._wrapped;return rt!=null&&(rt=I.apply(rt,arguments)),Ei(this,rt)}});const Ka=Pt;var cs=Qs(U);cs._=cs;const Wl=cs}},J={};function Q(m){var Y=J[m];if(Y!==void 0)return Y.exports;var j=J[m]={exports:{}};return G[m].call(j.exports,j,j.exports,Q),j.exports}Q.n=m=>{var Y=m&&m.__esModule?()=>m.default:()=>m;return Q.d(Y,{a:Y}),Y},Q.d=(m,Y)=>{for(var j in Y)Q.o(Y,j)&&!Q.o(m,j)&&Object.defineProperty(m,j,{enumerable:!0,get:Y[j]})},Q.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Q.o=(m,Y)=>Object.prototype.hasOwnProperty.call(m,Y),Q.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var lt={};return(()=>{Q.d(lt,{default:()=>Dy});var m=Q(50),Y=Q(895),j=Q(163);function U(a){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var e=a.raw;return e.reduce(function(n,i,l){var f=r[l-1],d=e[l-1];return Array.isArray(f)?f=f.join(""):d&&d.slice(-1)==="$"?n=n.slice(0,-1):f=(0,j.escape)(f),n+f+i})}const dt={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,multiFrames:!1,customUI:!1};var K=Q(316),Z=Q.n(K),z,C=Q(346),O=(z=function(a,r){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},z(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=a}z(a,r),a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),M=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return O(r,a),r}(C.Hn);const D=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return O(r,a),r.prototype.getByComponent=function(t){var e=this;return this.filter(function(n){return e.getComponent(n)===t})[0]},r.prototype.addComponent=function(t,e){var n=this,i=((0,m.isArray)(t)?t:[t]).filter(function(l){return!n.hasComponent(l)}).map(function(l){return new M({component:l})})[0];return this.push(i,e)},r.prototype.getComponent=function(t){return t.get("component")},r.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},r.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},r.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},r.prototype.removeComponent=function(t,e){var n=this,i=((0,m.isArray)(t)?t:[t]).map(function(l){return n.getByComponent(l)});return this.remove(i,e)},r}(C.FE);var N=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ut=function(){return ut=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ut.apply(this,arguments)},ht=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Dt=function(){function a(r,t,e){this.cls=[],this.isPrivate=!1,this._em=r,this._name=t;var n=this.name.charAt(0).toLowerCase()+this.name.slice(1),i=(0,m.isUndefined)(r.config[n])?r.config[this.name]:r.config[n],l=i===!0?{}:i||{};l.pStylePrefix=r.config.pStylePrefix||"",(0,m.isUndefined)(i)||i||(l._disable=1),l.em=r,this._config=(0,j.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.init=function(r){},a.prototype.render=function(r){},a.prototype.postLoad=function(r){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return r?this.config[r]:this.config},a.prototype.__logWarn=function(r,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(r),t)},a.prototype.__appendTo=function(){var r=this.getConfig().appendTo;if(r){var t=(0,m.isElement)(r)?r:document.querySelector(r);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const Rt=Dt;var zt=function(a){function r(t,e,n,i,l,f){f===void 0&&(f={});var d=a.call(this,t,e,l)||this;return d.cls=[],d.private=!1,d.all=n,d.events=i,!f.skipListen&&d.__initListen(),d}return N(r,a),r.prototype.postLoad=function(t){},r.prototype.render=function(t){},r.prototype.getProjectData=function(t){var e={},n=this.storageKey;return n&&(e[n]=t||this.getAll()),e},r.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.all,i=e.onResult,l=e.reset,f=this.storageKey,d={action:"load"},v=n||this.all,g=t[f];if(typeof g=="string")try{g=JSON.parse(g)}catch{this.__logWarn("Data parsing failed",{input:g})}return l&&g&&v.reset(void 0,d),i?g&&i(g,d):g&&(0,j.isDef)(g.length)&&v.reset(g,d),g},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},r.prototype.getAll=function(){return ht([],this.all.models,!0)},r.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},r.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,n=e.all,i=e.em,l=e.events;n&&i&&n.on("add",function(f,d,v){return i.trigger(l.add,f,v)}).on("remove",function(f,d,v){return i.trigger(l.remove,f,v)}).on("change",function(f,d){return i.trigger(l.update,f,f.changedAttributes(),d)}).on("all",this.__catchAllEvent,this),this.cls=[n].concat(t.collections||[]),(t.propagate||[]).forEach(function(f){var d=f.entity,v=f.event;d.on("all",function(g,_,k,V){var q=ut({event:g},V||k);[i,n].map(function(ot){return ot.trigger(v,_,q)})})})},r.prototype.__remove=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,m.isString)(t)?this.get(t):t,f=function(){return l&&n.all.remove(l,e),l};return!e.silent&&(i==null||i.trigger(this.events.removeBefore,l,f,e)),!e.abort&&f()},r.prototype.__catchAllEvent=function(t,e,n,i){var l=this.em,f=this.events,d=i||n;l&&f.all&&l.trigger(f.all,{event:t,model:e,options:d}),this.__onAllEvent()},r.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var n=(0,m.isElement)(e)?e:document.querySelector(e);if(!n)return this.__logWarn('"appendTo" element not found');n.appendChild(this.render(t))}},r.prototype.__onAllEvent=function(){},r.prototype._createId=function(t){t===void 0&&(t=16);var e,n=this.getAll().length+t,i=this.getAllMap();do e=(0,j.createId)(n);while(i[e]);return e},r.prototype.__listenAdd=function(t,e){var n=this;t.on("add",function(i,l,f){return n.em.trigger(e,i,f)})},r.prototype.__listenRemove=function(t,e){var n=this;t.on("remove",function(i,l,f){return n.em.trigger(e,i,f)})},r.prototype.__listenUpdate=function(t,e){var n=this;t.on("change",function(i,l){return n.em.trigger(e,i,i.changedAttributes(),l)})},r.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},r}(Dt);const ae={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"]};var mt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const yt=function(a){function r(t,e,n){var i=a.call(this,e,n)||this;return i._module=t,i}return mt(r,a),Object.defineProperty(r.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),r}(C.Hn);var Ht=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Kt=function(a){function r(t,e,n){return a.call(this,e,{module:t,modelConstructor:n})||this}return Ht(r,a),r.prototype.add=function(t,e){var n,i=this,l=(0,m.isArray)(t)?t:(0,m.isUndefined)(t)?void 0:[t];return l=(n=l==null?void 0:l.map(function(f){return f instanceof i.newModel?f:new i.newModel(i.module,f)}))!==null&&n!==void 0?n:[void 0],a.prototype.add.call(this,(0,m.isArray)(t)?l:l[0],e)},r.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},r}(C.FE);var Lt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$=function(){return $=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},$.apply(this,arguments)},E=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},R="__aw",X="__ah",it=function(a){function r(t,e){var n=a.call(this,t,e)||this,i=n.em,l=n.attributes,f=l.styles,d=l.component,v=i.Components,g=v.getConfig(),_=i.Css.getAll(),k={},V={em:i,config:g,frame:n,idMap:k};if(!(0,j.isComponent)(d)){var q=(0,j.isObject)(d)?d:{components:d};!q.type&&(q.type="wrapper");var ot=v.getType("wrapper").model;n.set("component",new ot(q,V))}return f?(0,j.isObject)(f)||(Object.keys(k).length&&Array.isArray(f)&&f.forEach(function(ft){var at=ft.selectors;if(at&&at.length==1){var It=at[0],Wt=It.name&&It.type===2&&It;if(Wt&&k[Wt.name])Wt.name=k[Wt.name];else if((0,m.isString)(It)&&It[0]==="#"){var ye=It.substring(1);ye&&k[ye]&&(at[0]="#".concat(k[ye]))}}}),_.add(f),n.set("styles",_)):n.set("styles",_),!e.width&&n.set(R,1),!e.height&&n.set(X,1),n}return Lt(r,a),r.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),r.prototype.onRemove=function(){this.getComponent().remove({root:1})},r.prototype.changesUp=function(t){t===void 0&&(t={}),t.temporary||t.noCount||t.avoidStore||this.set("changesCount",this.get("changesCount")+1)},r.prototype.getComponent=function(){return this.get("component")},r.prototype.getStyles=function(){return this.get("styles")},r.prototype.disable=function(){this.trigger("disable")},r.prototype.remove=function(){this.view=void 0;var t=this.collection;return t&&t.remove(this)},r.prototype.getHead=function(){return E([],this.head,!0)},r.prototype.setHead=function(t){return this.set("head",E([],t,!0))},r.prototype.addHeadItem=function(t){this.head.push(t)},r.prototype.getHeadByAttr=function(t,e,n){return this.head.filter(function(i){return i.attributes&&i.attributes[t]==e&&(!n||n===i.tag)})[0]},r.prototype.removeHeadByAttr=function(t,e,n){var i=this.getHeadByAttr(t,e,n),l=this.head.indexOf(i);l>=0&&this.head.splice(l,1)},r.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},r.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},r.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},r.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},r.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},r.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",$({frame:this},t))},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=yt.prototype.toJSON.call(this,t),n=(0,m.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[R]&&delete e.width,e[X]&&delete e.height,(0,m.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,m.forEach)(n,function(i,l){e[l]===i&&delete e[l]}),(0,m.forEach)(["attributes","head"],function(i){(0,m.isEmpty)(e[i])&&delete e[i]}),e},r}(yt);const Tt=it;var st=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ct=function(a){function r(t,e){e===void 0&&(e=[]);var n=a.call(this,t,e,Tt)||this;return n.loadedItems=0,n.itemsToLoad=0,(0,m.bindAll)(n,"itemLoaded"),n.on("reset",n.onReset),n.on("remove",n.onRemove),n}return st(r,a),r.prototype.onReset=function(t,e){var n=this;((e==null?void 0:e.previousModels)||[]).map(function(i){return n.onRemove(i)})},r.prototype.onRemove=function(t){t==null||t.onRemove()},r.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},r.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},r.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(n){return n[t?"on":"off"]("loaded",e.itemLoaded)})},r}(Kt);var H=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Vt=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,i=e.em,l={};n.em=i,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(g){return n.unset(g)}));var f=t.frames||[l],d=new Ct(i.Canvas,f);d.page=n,n.set("frames",d),!n.getId()&&n.set("id",i==null?void 0:i.get("PageManager")._createId());var v=i==null?void 0:i.get("UndoManager");return v==null||v.add(d),n}return H(r,a),r.prototype.defaults=function(){return{frames:[],_undo:!0}},r.prototype.onRemove=function(){this.getFrames().reset()},r.prototype.getFrames=function(){return this.get("frames")},r.prototype.getId=function(){return this.id},r.prototype.getName=function(){return this.get("name")},r.prototype.setName=function(t){return this.set({name:t})},r.prototype.getAllFrames=function(){return this.getFrames().models||[]},r.prototype.getMainFrame=function(){return this.getFrames().at(0)},r.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=C.Hn.prototype.toJSON.call(this,t),n=(0,m.result)(this,"defaults");return(0,m.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,m.forEach)(n,function(i,l){e[l]===i&&delete e[l]}),e},r}(C.Hn);var Nt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),te=function(){return te=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},te.apply(this,arguments)};const De=function(a){function r(t,e){var n=a.call(this,t)||this;return n.on("reset",n.onReset),n.on("remove",n.onRemove),n.model=function(i,l){return l===void 0&&(l={}),new Vt(i,te(te({},l),{em:e}))},n}return Nt(r,a),r.prototype.onReset=function(t,e){var n,i=this;(n=e==null?void 0:e.previousModels)===null||n===void 0||n.map(function(l){return i.onRemove(l)})},r.prototype.onRemove=function(t){t==null||t.onRemove()},r}(C.FE);var je=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pe=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},He="page",Ee="".concat(He,":"),Le="".concat(Ee,"select"),Ce="".concat(Le,":before"),fe="".concat(Ee,"update"),he="".concat(Ee,"add"),ge="".concat(he,":before"),gt="".concat(Ee,"remove"),re="".concat(gt,":before"),Zt="change:selected",ue="main",ve={all:He,select:Le,selectBefore:Ce,update:fe,add:he,addBefore:ge,remove:gt,removeBefore:re},se=function(a){function r(t){var e=a.call(this,t,"PageManager",new De([],t),ve)||this;e.storageKey="pages",(0,m.bindAll)(e,"_onPageChange");var n=new yt({_undo:!0});return e.model=n,e.pages.on("reset",function(i){return i.at(0)&&e.select(i.at(0))}),e.pages.on("all",e.__onChange,e),n.on(Zt,e._onPageChange),e}return je(r,a),Object.defineProperty(r.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),r.prototype.getAll=function(){return Pe([],this.all.models,!0)},r.prototype.__onChange=function(t,e,n,i){var l=i||n;this.em.trigger(He,{event:t,page:e,options:l})},r.prototype.onLoad=function(){var t,e=this,n=this.pages,i={silent:!0};n.add(((t=this.config.pages)===null||t===void 0?void 0:t.map(function(f){return new Vt(f,{em:e.em,config:e.config})}))||[],i);var l=n.length?this.getMain():this.add({type:ue},i);l&&this.select(l,i)},r.prototype._onPageChange=function(t,e,n){var i=this.em,l=i.Layers,f=e.getMainComponent();l&&f&&l.setRoot(f),i.trigger(Le,e,t.previous("selected")),this.__onChange(Zt,e,n)},r.prototype.postLoad=function(){var t=this,e=t.em,n=t.model,i=t.pages,l=e.UndoManager;l.add(n),l.add(i),i.on("add remove reset change",function(f,d,v){return e.changesUp(v||d)})},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var i=this.em;t.id=t.id||this._createId();var l=function(){var f=n.pages.add(new Vt(t,{em:n.em,config:n.config}),e);return e.select&&n.select(f),f};return!e.silent&&i.trigger(ge,t,l,e),!e.abort&&l()},r.prototype.remove=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,m.isString)(t)?this.get(t):t,f=function(){return l&&n.pages.remove(l,e),l};return!e.silent&&i.trigger(re,l,f,e),!e.abort&&f()},r.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},r.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===ue})[0]||t.at(0)},r.prototype.getAllWrappers=function(){var t=this.getAll();return(0,m.unique)((0,m.flatten)(t.map(function(e){return e.getAllFrames().map(function(n){return n.getComponent()})})))},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,m.isString)(t)?this.get(t):t;return n&&(this.em.trigger(Ce,n,e),this.model.set("selected",n,e)),this},r.prototype.getSelected=function(){return this.model.get("selected")},r.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.pages,reset:!0})},r.prototype._createId=function(){var t,e=this.getAll().length+16,n=this.getAllMap();do t=(0,j.createId)(e);while(n[t]);return t},r}(zt);const Ne=se,Ze={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};var Ye=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const hn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ye(r,a),r.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},r.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(e){return t.checkUnit(e)})},r.prototype.checkUnit=function(t){var e=this.get(t)||"";(parseFloat(e)||0).toString()===e.toString()&&this.set(t,"".concat(e,"px"))},r.prototype.getName=function(){return this.get("name")||this.get("id")},r.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},r}(C.Hn);var Ln=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ot=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ln(r,a),r}(C.FE);const qt=Ot;Ot.prototype.model=hn;var b=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),L=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a};const B=function(a){function r(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return b(r,a),r.prototype.template=function(t){var e=t.ppfx,n=t.label;return U(vt||(vt=L([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,n,e,e,e,e,e,e,e)},r.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},r.prototype.startAdd=function(){},r.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},r.prototype.updateSelect=function(){var t=this.em,e=this.devicesEl;if(t&&t.getDeviceModel&&e){var n=t.getDeviceModel();e.val(n?n.get("id"):"")}},r.prototype.getOptions=function(){var t=this.collection,e=this.em,n="";return t.forEach(function(i){var l=i.attributes,f=l.name,d=l.id,v=e&&e.t&&e.t("deviceManager.devices.".concat(d))||f;n+='<option value="'.concat(d||f,'">').concat(v,"</option>")}),n},r.prototype.render=function(){var t=this,e=t.em,n=t.ppfx,i=t.$el,l=t.el,f=e&&e.t&&e.t("deviceManager.device");return i.html(this.template({ppfx:n,label:f})),this.devicesEl=i.find(".".concat(n,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(n,"devices-c"),this},r}(C.G7);var vt,At=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pt=function(){return Pt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Pt.apply(this,arguments)},ne="device",we="".concat(ne,":"),ze="".concat(we,"select"),Ue="".concat(we,"update"),on="".concat(we,"add"),oe="".concat(we,"remove"),W="".concat(oe,":before"),pt="change:device",_t={all:ne,select:ze,update:Ue,add:on,remove:oe,removeBefore:W},kt=function(a){function r(t){var e,n=this;return(n=a.call(this,t,"DeviceManager",new qt,_t,Ze)||this).Device=hn,n.Devices=qt,n.storageKey="",n.devices=n.all,(e=n.config.devices)===null||e===void 0||e.forEach(function(i){return n.add(i,{silent:!0})}),n.select(n.config.default||n.devices.at(0)),t.on(pt,n._onSelect,n),n}return At(r,a),r.prototype._onSelect=function(t,e,n){var i=this.em,l=this.events,f=t.previous("device"),d=this.get(e),v=l.select;i.trigger(v,d,this.get(f)),this.__catchAllEvent(v,d,n)},r.prototype.add=function(t,e){var n;e===void 0&&(e={});var i=e;if((0,m.isString)(t)){var l=e;n=Pt(Pt({},i=arguments[2]||{}),{id:t,name:i.name||t,width:l})}else n=t;return n.id||(n.id=n.name||this._createId()),this.devices.add(n,i)},r.prototype.get=function(t){return this.getAll().filter(function(e){return e.get("name")===t})[0]||this.devices.get(t)||null},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getDevices=function(){return this.devices.models},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,m.isString)(t)?this.get(t):t;return n&&this.em.set("device",n.get("id"),e),this},r.prototype.getSelected=function(){return this.get(this.em.get("device"))},r.prototype.getAll=function(){return this.devices},r.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new B({collection:this.devices,config:Pt({em:e},this.config)}),this.view.render().el},r.prototype.destroy=function(){this.__destroy()},r}(zt);const ie=kt;var xe=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$e=function(a){function r(t){var e=this,n=t.em,i=t.config,l=i.scripts,f=i.styles;return(e=a.call(this,t,{scripts:l,styles:f})||this).set("frames",new Ct(t)),e.listenTo(e,"change:zoom",e.onZoomChange),e.listenTo(n,"change:device ".concat(Ue),e.updateDevice),e.listenTo(n,Le,e._pageUpdated),e}return xe(r,a),r.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[]}},Object.defineProperty(r.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),r.prototype.init=function(){var t=this.em.Pages.getMain();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype._pageUpdated=function(t,e){var n=this.em;n.setSelected(),n.get("readyCanvas")&&n.stopDefault(),e==null||e.getFrames().map(function(i){return i.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,n=e.getDeviceModel(),i=t.frame||e.getCurrentFrameModel();if(i&&n){var l=n.attributes,f=l.width,d=l.height;i.set({width:f,height:d},{noUndo:1})}},r.prototype.onZoomChange=function(){this.get("zoom")<1&&this.set("zoom",1)},r}(yt);const Qe=$e;var zn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const wn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return zn(r,a),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),r.prototype.preinitialize=function(t){this.className=""},r}(C.G7);var Ge=Q(491),Rr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const nr=function(a){function r(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var n=a.call(this,t)||this;return n.itemsView="",n.itemType="type",n.reuseView=!1,n.viewCollection=[],e&&n.listenTo(n.collection,"add",n.addTo),n}return Rr(r,a),r.prototype.addTo=function(t){this.add(t)},r.prototype.itemViewNotFound=function(t){},r.prototype.add=function(t,e){var n,i=this,l=i.reuseView,f=i.viewCollection,d=(i.itemsView,e||null),v=t.get(this.itemType);n=t.view&&l?t.view:this.renderView(t,v),f.push(n);var g=n.render().el;d?d.appendChild(g):this.$el.append(g)},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(n){return t.add(n,e)}),this.$el.append(e),this.onRender(),this},r.prototype.onRender=function(){},r.prototype.onRemoveBefore=function(t,e){},r.prototype.onRemove=function(t,e){},r.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),C.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},r.prototype.clearItems=function(){this.viewCollection},r}(wn);var Vr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const _n=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var n=e.model;return e.listenTo(n,"change",e.render),e.listenTo(n,"destroy remove",e.remove),e.listenTo(n.get("selectors"),"change",e.render),e}return Vr(r,a),r.prototype.tagName=function(){return"style"},r.prototype.render=function(){var t=this.model,e=this.el,n=t.get("important");return e.innerHTML=t.toCSS({important:n}),this},r}(C.G7);var kn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Yn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return kn(r,a),r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},r}(_n);var Hr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bn=function(a,r){return"".concat(a).concat(r?"-".concat(parseFloat(r)):"")},Po=function(a){function r(t){var e=a.call(this,t)||this;(0,m.bindAll)(e,"sortRules");var n=t.config||{};e.atRules={},e.config=n,e.em=n.em,e.pfx=n.stylePrefix||"",e.className=e.pfx+"rules";var i=e.collection;return e.listenTo(i,"add",e.addTo),e.listenTo(i,"reset",e.render),e}return Hr(r,a),r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){if(this.renderStarted){var n,i,l=e||null,f={model:t,config:this.config};if(t.get("atRuleType")==="keyframes"){var d=t.getAtRule(),v=this.atRules[d];if(!v){var g=document.createElement("style");v=document.createTextNode(""),g.appendChild(document.createTextNode("".concat(d,"{"))),g.appendChild(v),g.appendChild(document.createTextNode("}")),this.atRules[d]=v,n=g}i=new Yn(f),v.appendData(i.render().el.textContent)}else n=(i=new _n(f)).render().el;var _=this.className,k=t.get("mediaText"),V=Bn(_),q=V;if(k&&(q=Bn(_,this.getMediaWidth(k))),n){var ot=l||this.el,ft=void 0;try{ft=ot.querySelector("#".concat(q))}catch{}ft||(ft=ot.querySelector("#".concat(V))),ft==null||ft.appendChild(n)}return n}},r.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},r.prototype.sortRules=function(t,e){var n=(this.em.getConfig().mediaCondition||"").indexOf("min-width")!==-1;return n?(n?t:e)-(n?e:t):0},r.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,n=e.em,i=e.$el,l=e.collection,f=this.className,d=document.createDocumentFragment();i.empty();var v=n.Devices.getAll().pluck("priority").sort(this.sortRules);return v.every(function(g){return g})&&v.unshift(0),v.forEach(function(g){return d.appendChild((0,Ge.ut)("div",{id:Bn(f,g)}))}),l.each(function(g){return t.addToCollection(g,d)}),i.append(d),i.attr("class",f),this},r}(C.G7);const qo=Po;var Ao=function(){return Ao=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ao.apply(this,arguments)},Go=function(){function a(r,t){var e=this;this.em=r,this.canvas=r.Canvas;var n=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),i=Array.isArray(n)?n:[n];this.el=i[0],this.counter=0,(0,m.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),i.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(r,t){var e={on:j.on,off:j.off},n=t?"on":"off";e[n](r,"dragenter",this.handleDragEnter),e[n](r,"dragover",this.handleDragOver),e[n](r,"drop",this.handleDrop),e[n](r,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(r){var t,e=r?j.on:j.off,n=this.el.ownerDocument,i=(t=n.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=r?{onStart:function(l){var f=l.sorter;(0,j.on)(i,"pointermove",f.onMove)},onEnd:function(l){var f=l.sorter;(0,j.off)(i,"pointermove",f.onMove)},customTarget:function(l){var f=l.event;return n.elementFromPoint(f.clientX,f.clientY)}}:null,e(i,"pointerenter",this.handleDragEnter),e(i,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(i,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(r){this.over?this.endDrop(r):this.__customTglEff(!1)},a.prototype.endDrop=function(r,t){var e=this.em,n=this.dragStop;this.counter=0,n&&n(r),this.__customTglEff(!1),e.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(r){this.updateCounter(-1,r)},a.prototype.updateCounter=function(r,t){this.counter+=r,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(r){var t=this,e=this.em,n=this.canvas,i=r.dataTransfer;if(this.updateCounter(1,r),!this.over){this.over=!0;var l,f,d=e.Utils,v=e.get("dragContent")||"<br>";if(e.stopDefault(),e.inAbsoluteMode()){var g=e.Components.getWrapper(),_=g.append({})[0],k=e.Commands.run("core:component-drag",{event:r,guidesInfo:1,center:1,target:_,onEnd:function(q,ot,ft){var at;if(!ft.cancelled){at=g.append(v)[0];var It=n.getOffset(),Wt=_.getStyle(),ye=Wt.top,Te=Wt.left,Ve=Wt.position;at.addStyle({left:parseFloat(Te)-It.left+"px",top:parseFloat(ye)-It.top+"px",position:Ve})}t.handleDragEnd(at,i),_.remove()}});l=function(q){return k.stop(r,{cancel:q})},f=function(q){return v=q}}else{var V=new d.Sorter(Ao({em:e,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:n.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(q){return t.handleDragEnd(q,i)},document:this.el.ownerDocument},this.sortOpts||{}));V.setDropContent(v),V.startSort(),this.sorter=V,l=function(q){q&&(V.moved=!1),V.endMove()},f=function(q){return V.setDropContent(q)}}this.dragStop=l,this.dragContent=f,e.trigger("canvas:dragenter",i,v)}},a.prototype.handleDragEnd=function(r,t){var e=this.em;this.over=!1,r&&(e.set("dragResult",r),e.trigger("canvas:drop",t,r)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(r){r.preventDefault(),this.em.trigger("canvas:dragover",r)},a.prototype.handleDrop=function(r){r.preventDefault();var t=this.dragContent,e=r.dataTransfer,n=this.getContentByData(e).content;r.target.style.border="",n&&t&&t(n),this.endDrop(!n,r)},a.prototype.getContentByData=function(r){var t=this.em,e=r&&r.types,n=r&&r.files||[],i=t.get("dragContent"),l=r&&r.getData("text");if(n.length){l=[];for(var f=0;f<n.length;f++){var d=n[f],v=d.type.split("/")[0];v=="image"&&l.push({type:v,file:d,attributes:{alt:d.name}})}}else if(i)l=i;else if((0,m.indexOf)(e,"text/html")>=0)l=r&&r.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,m.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,m.indexOf)(e,"text/json")>=0){var g=r&&r.getData("text/json");g&&(l=JSON.parse(g))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var _={content:l};return t.trigger("canvas:dragdata",r,_),_},a}();const po=Go;var yr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mn=function(){return mn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},mn.apply(this,arguments)},Ko=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},zr=function(a){function r(t,e){var n=a.call(this,{model:t})||this;n.dragging=!1,n.lastMaxHeight=0,n.tools={},(0,m.bindAll)(n,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var i=n,l=i.el;i.em,n.module._config=mn(mn({},n.config||{}),{frameView:n}),n.frameWrapView=e,n.showGlobalTools=(0,m.debounce)(n.showGlobalTools.bind(n),50);var f=n.getCanvasModel();return n.listenTo(t,"change:head",n.updateHead),n.listenTo(f,"change:styles",n.renderStyles),t.view=n,(0,j.setViewEl)(l,n),n}return yr(r,a),Object.defineProperty(r.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),r.prototype.updateHead=function(){var t=this.model,e=this.getHead(),n=[],i=[],l=t.head,f=t.previous("head"),d=function(g){return g===void 0&&(g={}),Object.keys(g).sort().map(function(_){return"[".concat(_,'="').concat(g[_],'"]')}).join("")},v=function(g,_,k){g.forEach(function(V){var q=V.tag,ot=V.attributes;!_.some(function(ft){return ft.tag===q&&d(ft.attributes)===d(ot)})&&k.push(V)})};v(l,f,i),v(f,l,n),n.forEach(function(g){var _,k=e.querySelector("".concat(g.tag).concat(d(g.attributes)));(_=k==null?void 0:k.parentNode)===null||_===void 0||_.removeChild(k)}),(0,Ge.SJ)(e,i)},r.prototype.getEl=function(){return this.el},r.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},r.prototype.getWindow=function(){return this.getEl().contentWindow},r.prototype.getDoc=function(){return this.getEl().contentDocument},r.prototype.getHead=function(){return this.getDoc().querySelector("head")},r.prototype.getBody=function(){return this.getDoc().querySelector("body")},r.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},r.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Ge.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},r.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},r.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},r.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},r.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},r.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},r.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},r.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),n=e.scrollTop,i=e.scrollLeft,l=t.offsetHeight,f=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:f,scrollTop:n,scrollLeft:i,scrollBottom:n+l,scrollRight:i+f}},r.prototype._getTool=function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.wrapper;return this._toggleEffects(!1),this.tools={},n&&n.remove(),wn.prototype.remove.apply(this,t),this},r.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},r.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,n=this.getWindow(),i=n.pageYOffset,l=t||0,f=e.getConfig().autoscrollLimit,d=this.getRect().height-f,v=i;l<f&&(v-=f-l),l>d&&(v+=l-d),!(0,m.isUndefined)(t)&&v!==i&&v>0&&v<this.lastMaxHeight&&(this.getGlobalToolsEl().style.opacity="0",this.showGlobalTools(),n.scrollTo(0,v)),requestAnimationFrame(this.autoscroll)}},r.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,j.getPointerEvent)(t).clientY*this.em.getZoomDecimal()},r.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},r.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},r.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),n=t?"on":"off",i={on:j.on,off:j.off};i[n](e,"mousemove dragover",this.updateClientY),i[n](e,"mouseup",this.stopAutoscroll)},r.prototype.render=function(){var t=this.$el,e=this.ppfx;return t.attr({class:"".concat(e,"frame")}),this.renderScripts(),this},r.prototype.renderScripts=function(){var t=this,e=this,n=e.el,i=e.model,l=e.em,f="frame:load",d={el:n,model:i,view:this},v=this.getCanvasModel(),g=function(_){var k;if(_.length>0){var V=_.shift(),q=(0,Ge.ut)("script",mn({type:"text/javascript"},(0,m.isString)(V)?{src:V}:V));q.onerror=q.onload=g.bind(null,_),(k=n.contentDocument)===null||k===void 0||k.head.appendChild(q)}else t.renderBody(),l&&l.trigger(f,d)};n.onload=function(){var _=t.config.frameContent;if(_){var k=t.getDoc();k.open(),k.write(_),k.close()}l&&l.trigger("".concat(f,":before"),d),g(Ko([],v.get("scripts"),!0))}},r.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),n=this.getCanvasModel(),i=function(_){return _.map(function(k){return{tag:"link",attributes:mn({rel:"stylesheet"},(0,m.isString)(k)?{href:k}:k)}})},l=i(t.prev||n.previous("styles")),f=i(n.get("styles")),d=[],v=[],g=function(_,k,V){_.forEach(function(q){var ot=q.attributes.href;!k.some(function(ft){return ft.attributes.href===ot})&&V.push(q)})};g(f,l,v),g(l,f,d),d.forEach(function(_){var k,V=e.querySelector('link[href="'.concat(_.attributes.href,'"]'));(k=V==null?void 0:V.parentNode)===null||k===void 0||k.removeChild(V)}),(0,Ge.SJ)(e,v)},r.prototype.renderBody=function(){var t,e,n=this,i=this,l=i.config,f=i.em,d=i.model,v=i.ppfx,g=this.getDoc(),_=this.getBody(),k=this.getWindow(),V=f.config;k._isEditor=!0,this.renderStyles({prev:[]}),(0,Ge.R3)(_,`<style>
      `.concat(V.baseCss||l.frameStyle||"",`

      [data-gjs-type="wrapper"] {
        min-height: 100vh;
        padding-top: 0.001em;
      }

      .`).concat(v,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(v,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(v,`selected-parent {
        outline: 2px solid `).concat("#ffca6f",` !important
      }

      .`).concat(v,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(v,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(v,`no-pointer {
        pointer-events: none;
      }

      .`).concat(v,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(v,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(v,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(v,`is__grabbing,
      .`).concat(v,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(V.canvasCss||"",`
      `).concat(V.protectedCss||"",`
    </style>`));var q=d.getComponent(),ot=f.Components.getType("wrapper").view;this.wrapper=new ot({model:q,config:mn(mn({},q.config),{em:f,frameView:this})}).render(),(0,Ge.R3)(_,(t=this.wrapper)===null||t===void 0?void 0:t.el),(0,Ge.R3)(_,new qo({collection:d.getStyles(),config:mn(mn({},f.Css.getConfig()),{frameView:this})}).render().el),(0,Ge.R3)(_,this.getJsContainer()),(0,j.on)(_,"click",function(ft){var at;return ft&&((at=ft.target)===null||at===void 0?void 0:at.tagName)=="A"&&ft.preventDefault()}),(0,j.on)(_,"submit",function(ft){return ft&&ft.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent"}].forEach(function(ft){return ft.event.split(" ").forEach(function(at){g.addEventListener(at,function(It){return n.el.dispatchEvent((0,Ge.t3)(It,ft.class))})})}),this._toggleEffects(!0),(0,j.hasDnd)(f)&&(this.droppable=new po(f,(e=this.wrapper)===null||e===void 0?void 0:e.el)),d.trigger("loaded")},r.prototype._toggleEffects=function(t){var e=t?j.on:j.off,n=this.getWindow();n&&e(n,"".concat(Ge.G1," resize"),this._emitUpdate)},r.prototype._emitUpdate=function(){this.model._emitUpdated()},r}(wn);const jo=zr;var io=Q(668),Xn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Un=function(){return Un=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Un.apply(this,arguments)};const Zn=function(a){function r(t,e){var n=a.call(this,{model:t})||this;return(0,m.bindAll)(n,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Un(Un({},t.config),{frameWrapView:n}),n.cv=e,n.frame=new jo(t,n),n.classAnim="".concat(n.ppfx,"frame-wrapper--anim"),n.updateOffset=(0,m.debounce)(n.updateOffset.bind(n),0),n.updateSize=(0,m.debounce)(n.updateSize.bind(n),0),n.listenTo(t,"loaded",n.frameLoaded),n.listenTo(t,"change:x change:y",n.updatePos),n.listenTo(t,"change:width change:height",n.updateSize),n.listenTo(t,"destroy remove",n.remove),n.updatePos(),n.setupDragger(),n}return Xn(r,a),r.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},r.prototype.setupDragger=function(){var t,e,n,i=this,l=this.module,f=this.model,d=function(v){l.toggleFramesEvents(v)};this.dragger=new io.Z({onStart:function(){var v=f.attributes,g=v.x,_=v.y;n=i.em.getZoomMultiplier(),t=g,e=_,d(!1)},onEnd:function(){return d(!0)},setPosition:function(v){f.set({x:t+v.x*n,y:e+v.y*n})}})},r.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},r.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Ge.L_)(this.elTools)},r.prototype.remove=function(t){var e=this;return this.__clear(t),wn.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(n){return e[n]=0}),this},r.prototype.updateOffset=function(){var t,e=this,n=e.em,i=e.$el,l=e.frame;n&&(n.runDefault({preserveSelected:1}),i.removeClass(this.classAnim),(t=l==null?void 0:l.model)===null||t===void 0||t._emitUpdated())},r.prototype.updatePos=function(t){var e=this.model,n=this.el,i=e.attributes,l=i.x,f=i.y,d=n.style;this.frame.rect=void 0,d.left=isNaN(l)?l:"".concat(l,"px"),d.top=isNaN(f)?f:"".concat(f,"px"),t&&this.updateOffset()},r.prototype.updateSize=function(){this.updateDim()},r.prototype.updateDim=function(){var t=this,e=t.em,n=t.el,i=t.$el,l=t.model,f=t.classAnim,d=t.frame;if(d){d.rect=void 0,i.addClass(f);var v=this.__handleSize(),g=v.noChanges,_=v.width,k=v.height;((0,m.isNull)(_)||(0,m.isNull)(k))&&l.set(Un(Un({},_?{}:{width:n.offsetWidth}),k?{}:{height:n.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),g?this.updateOffset():setTimeout(this.updateOffset,350)}},r.prototype.onScroll=function(){var t=this.frame;this.em.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},r.prototype.frameLoaded=function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},r.prototype.__handleSize=function(){var t="px",e=this.model,n=this.el.style,i=e.attributes,l=i.width,f=i.height,d=n.width||"",v=n.height||"",g=l||"",_=f||"",k=d==g&&v==_;return n.width=(0,m.isNumber)(g)?"".concat(g).concat(t):g,n.height=(0,m.isNumber)(_)?"".concat(_).concat(t):_,{noChanges:k,width:l,height:f,newW:g,newH:_}},r.prototype.render=function(){var t=this,e=t.frame,n=t.$el,i=t.ppfx,l=t.cv,f=t.model,d=t.el,v=f.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),n.empty().attr({class:"".concat(i,"frame-wrapper")}).append(`
      <div class="`.concat(i,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(i,`frame-wrapper__name" data-action-move>
          `).concat(f.get("name")||"",`
        </div>
        <div class="`).concat(i,`frame-wrapper__top-r">
          <div class="`).concat(i,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(i,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(i,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(i,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var g=(0,Ge.ut)("div",{class:"".concat(i,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(i,`highlighter" data-hl></div>
      <div class="`).concat(i,`badge" data-badge></div>
      <div class="`).concat(i,`placeholder">
        <div class="`).concat(i,`placeholder-int"></div>
      </div>
      <div class="`).concat(i,`ghost"></div>
      <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(i,`resizer"></div>
      <div class="`).concat(i,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(i,`offset-fixed-v"></div>
    `));this.elTools=g;var _=l==null?void 0:l.toolsWrapper;return _&&_.appendChild(g),v&&v({el:d,elTop:d.querySelector("[data-frame-top]"),elRight:d.querySelector("[data-frame-right]"),elBottom:d.querySelector("[data-frame-bottom]"),elLeft:d.querySelector("[data-frame-left]"),frame:f,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},r}(wn);var Jo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),So=function(a){function r(t,e){t===void 0&&(t={});var n=a.call(this,t,!0)||this;return n.listenTo(n.collection,"reset",n.render),n.canvasView=e.canvasView,n._module=e.module,n}return Jo(r,a),r.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(n){return n.remove(e)})},r.prototype.onRender=function(){var t=this.$el,e=this.ppfx;t.attr({class:"".concat(e,"frames")})},r.prototype.renderView=function(t,e){return new Zn(t,this.canvasView)},r}(nr);const en=So;var Se=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ur=function(){return ur=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ur.apply(this,arguments)},Yo=function(a){function r(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,m.bindAll)(e,"clearOff","onKeyPress","onCanvasMove"),e.className=e.pfx+"canvas";var n=e.em;return e._initFrames(),e.listenTo(n,"change:canvasOffset",e.clearOff),e.listenTo(n,"component:selected",e.checkSelected),e.listenTo(t,"change:zoom change:x change:y",e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return Se(r,a),r.prototype.events=function(){return{wheel:"onWheel"}},r.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames></div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
    `)},r.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},r.prototype._initFrames=function(){var t=this,e=t.frames,n=t.model,i=t.config,l=t.em,f=n.frames;l.set("readyCanvas",0),f.once("loaded:all",function(){return l.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new en({collection:f},ur(ur({},i),{canvasView:this}))},r.prototype.checkSelected=function(t,e){var n;e===void 0&&(e={});var i=e.scroll,l=this.em.get("currentFrame");i&&((n=t.views)===null||n===void 0||n.forEach(function(f){f._getFrame()===l&&f.scrollIntoView(i)}))},r.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,wn.prototype.remove.apply(this,e),this.toggleListeners(!1),this},r.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},r.prototype.onCanvasMove=function(t){},r.prototype.toggleListeners=function(t){this.el;var e=t?j.on:j.off;e(document,"keypress",this.onKeyPress),e(window,"scroll resize",this.clearOff)},r.prototype.onKeyPress=function(t){var e=this.em;(0,j.getKeyChar)(t)!==" "||e.getZoomDecimal()===1||e.Canvas.isInputFocused()||(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},r.prototype.onWheel=function(t){if((t.ctrlKey||t.metaKey)&&this.em.getConfig().multiFrames){this.preventDefault(t);var e=this.model,n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),i=e.get("zoom");e.set("zoom",i+2*n)}},r.prototype.updateFrames=function(t){var e=this.em,n=this.model.attributes,i=n.x,l=n.y,f=this.getZoom(),d={preserveSelected:1},v=f?1/f:1;this.framesArea.style.transform="scale(".concat(f,") translate(").concat(i*v,"px, ").concat(l*v,"px)"),this.clearOff(),e.stopDefault(d),e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){return e.runDefault(d)},300)},r.prototype.getZoom=function(){return this.em.getZoomDecimal()},r.prototype.isElInViewport=function(t){var e=(0,j.getElement)(t),n=(0,j.getElRect)(e),i=this.getFrameOffset(e),l=n.top,f=n.left;return l>=0&&f>=0&&l<=i.height&&f<=i.width},r.prototype.offset=function(t,e){var n,i;e===void 0&&(e={});var l=(0,j.getElRect)(t),f=t==null?void 0:t.ownerDocument.body,d=e.noScroll;return{top:l.top+(d?0:(n=f==null?void 0:f.scrollTop)!==null&&n!==void 0?n:0),left:l.left+(d?0:(i=f==null?void 0:f.scrollLeft)!==null&&i!==void 0?i:0),width:l.width,height:l.height}},r.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},r.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var n=(e=this.frame)===null||e===void 0?void 0:e.el,i=t==null?void 0:t.ownerDocument.defaultView,l=i?i.frameElement:n;this.frmOff=this.offset(l||n)}return this.frmOff},r.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},r.prototype.getElementPos=function(t,e){e===void 0&&(e={});var n=this.getZoom(),i=e||{},l=this.getFrameOffset(t),f=this.el,d=this.getCanvasOffset(),v=this.offset(t,e),g=i.avoidFrameOffset?0:l.top,_=i.avoidFrameOffset?0:l.left;return{top:v.top*n+g-d.top+f.scrollTop,left:v.left*n+_-d.left+f.scrollLeft,height:v.height*n,width:v.width*n,zoom:n,rect:v}},r.prototype.getElementOffsets=function(t){var e=this;if(!t||(0,j.isTextNode)(t))return{};var n={},i=window.getComputedStyle(t);return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"].forEach(function(l){n[l]=parseFloat(i[l])*e.getZoom()}),n},r.prototype.getPosition=function(t){var e;t===void 0&&(t={});var n=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(n){var i=n.body,l=this.getZoom(),f=this.getFrameOffset(),d=this.getCanvasOffset(),v=t.noScroll;return{top:f.top+(v?0:i.scrollTop)*l-d.top,left:f.left+(v?0:i.scrollLeft)*l-d.left,width:d.width,height:d.height}}},r.prototype.updateScript=function(t){var e=t.model,n=e.getId();t.scriptContainer||(t.scriptContainer=(0,Ge.ut)("div",{"data-id":n}),this.getJsContainer().appendChild(t.scriptContainer)),t.el.id=n,t.scriptContainer.innerHTML="";var i=document.createElement("script"),l=e.getScriptString(),f=e.get("script-props")?l:`function(){
`.concat(l,`
;}`),d=JSON.stringify(e.__getScriptProps());i.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(n,`');
        if (!item) return;
        (`).concat(f,".bind(item))(").concat(d,`)
      }, 1);`),setTimeout(function(){var v=t.scriptContainer;v==null||v.appendChild(i)},0)},r.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e&&e.getJsContainer()},r.prototype.getFrameView=function(t){return(t==null?void 0:t._getFrame())||this.em.get("currentFrame")},r.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,n=t.frames,i=t.em,l=t.framesArea,f=e.frames;f.listenToLoad(),n.render();var d=f.at(0),v=d==null?void 0:d.view;i.setCurrentFrame(v),l==null||l.appendChild(n.el),this.frame=v}},r.prototype.render=function(){var t=this,e=t.el,n=t.$el,i=t.ppfx,l=t.config,f=t.em;n.html(this.template());var d=n.find("[data-frames]");this.framesArea=d.get(0);var v=n.find("[data-tools]");return this.toolsWrapper=v.get(0),v.append(`
      <div class="`.concat(i,"tools ").concat(i,`tools-gl" style="pointer-events:none">
        <div class="`).concat(i,`placeholder">
          <div class="`).concat(i,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(i,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(i,'highlighter-sel"></div>'):"",`
        <div class="`).concat(i,`badge"></div>
        <div class="`).concat(i,`ghost"></div>
        <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(i,`resizer"></div>
        <div class="`).concat(i,`offset-v"></div>
        <div class="`).concat(i,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(i,"tools")),this.hlEl=e.querySelector(".".concat(i,"highlighter")),this.badgeEl=e.querySelector(".".concat(i,"badge")),this.placerEl=e.querySelector(".".concat(i,"placeholder")),this.ghostEl=e.querySelector(".".concat(i,"ghost")),this.toolbarEl=e.querySelector(".".concat(i,"toolbar")),this.resizerEl=e.querySelector(".".concat(i,"resizer")),this.offsetEl=e.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(i,"tools-gl")),this.el.className=(0,j.getUiClass)(f,this.className),this.ready=!0,this._renderFrames(),this},r}(wn);const pr=Yo;var rn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wn=function(){return Wn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Wn.apply(this,arguments)},Oo=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Xo=function(a){function r(t){var e=a.call(this,t,"Canvas",ae)||this;return e.canvas=new Qe(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return rn(r,a),r.prototype.getCanvasView=function(){return this.canvasView},r.prototype.init=function(){},r.prototype.onLoad=function(){this.model.init()},r.prototype.getModel=function(){return this.canvas},r.prototype.getElement=function(){return this.getCanvasView().el},r.prototype.getFrame=function(t){return this.getFrames()[t||0]},r.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},r.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},r.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},r.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},r.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},r.prototype._getLocalEl=function(t,e,n){var i=t,l=e==null?void 0:e._getFrame();return i=l?l[n]():i},r.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},r.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},r.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},r.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},r.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},r.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},r.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},r.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},r.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},r.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},r.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new pr(this.canvas),this.canvasView.render().el},r.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},r.prototype.offset=function(t){return this.getCanvasView().offset(t)},r.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},r.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},r.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},r.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},n=e.top,i=n===void 0?0:n,l=e.left,f=l===void 0?0:l;return Wn(Wn({},this.getCanvasView().getCanvasOffset()),{topScroll:i,leftScroll:f})},r.prototype.getTargetToElementDim=function(t,e,n){n===void 0&&(n={});var i=n||{},l=this.getCanvasView().getPosition();if(l){var f=i.elPos||this.getCanvasView().getElementPos(e),d=n.toRight||0,v=i.targetHeight||t.offsetHeight,g=i.targetWidth||t.offsetWidth,_=i.event||null,k=f.top-v,V=f.left;V+=d?f.width:0;var q=(V=d?V-g:V)<l.left?l.left:V,ot=k<l.top?l.top:k,ft={top:ot=ot>f.top+f.height?f.top+f.height:ot,left:q,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return _&&this.em&&this.em.trigger(_,ft),ft}},r.prototype.canvasRectOffset=function(t,e,n){var i=this;n===void 0&&(n={});var l=function(f,d,v){d===void 0&&(d=1);var g=i.em.getZoomDecimal(),_=d?"top":"left",k=f.ownerDocument,V=n.offset?function(an){var En=an.defaultView;return En==null?void 0:En.frameElement}(k):{},q=V.offsetTop,ot=q===void 0?0:q,ft=V.offsetLeft,at=ft===void 0?0:ft,It=k.body||{},Wt=It.scrollTop,ye=Wt===void 0?0:Wt,Te=It.scrollLeft,Ve=d?ye:Te===void 0?0:Te,qe=d?ot:at;return v[_]-(Ve-qe)*g};return{top:l(t,1,e),left:l(t,0,e)}},r.prototype.getTargetToElementFixed=function(t,e,n){var i;n===void 0&&(n={});var l=n.pos||this.getElementPos(t),f=n.canvasOff||this.canvasRectOffset(t,l),d=e.offsetHeight||0,v=e.offsetWidth||0,g=l.left+l.width,_=this.getCanvasView(),k=_.getPosition(),V=_.getFrameOffset(t),q=n.event,ot=-d,ft=(0,m.isUndefined)(n.left)?l.width-v:n.left;ft=l.left<-ft?-l.left:ft;var at=(i=k==null?void 0:k.width)!==null&&i!==void 0?i:0;ft=g>at?ft-(g-at):ft;var It=l.height+d,Wt=It<V.height;f.top<d&&(Wt?ot+=It:ot=-f.top<l.height?-f.top:l.height);var ye={top:ot,left:ft,canvasOffsetTop:f.top,canvasOffsetLeft:f.left};return q&&this.em.trigger(q,ye),ye},r.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var n=0,i=0,l=e.subWinOffset,f=t.target.ownerDocument,d=f.defaultView||f.parentWindow,v=d.frameElement,g=l?d.pageYOffset:0,_=l?d.pageXOffset:0;if(v){var k=v.getBoundingClientRect();n=k.top||0,i=k.left||0}return{y:t.clientY+n-g,x:t.clientX+i-_}},r.prototype.getMouseRelativeCanvas=function(t,e){var n,i=this.getZoomDecimal(),l=(n=this.getCanvasView().getPosition(e))!==null&&n!==void 0?n:{},f=l.top,d=f===void 0?0:f,v=l.left,g=v===void 0?0:v;return{y:t.clientY*i+d,x:t.clientX*i+g}},r.prototype.hasFocus=function(){return this.getDocument().hasFocus()},r.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),n=Oo(["body"],this.config.notTextable,!0),i=e&&document.activeElement===e?t&&t.activeElement:document.activeElement;return i&&!n.some(function(l){return i.matches(l)})},r.prototype.scrollTo=function(t,e){e===void 0&&(e={});var n=(0,j.getElement)(t),i=n&&(0,j.getViewEl)(n);i&&i.scrollIntoView(e)},r.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},r.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},r.prototype.setZoom=function(t){return this.canvas.set("zoom",parseFloat(t)),this},r.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},r.prototype.setCoords=function(t,e){return this.canvas.set({x:parseFloat(t),y:parseFloat(e)}),this},r.prototype.getCoords=function(){var t=this.canvas.attributes;return{x:t.x,y:t.y}},r.prototype.getZoomDecimal=function(){return this.getZoom()/100},r.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},r.prototype.toggleFramesEvents=function(t){this.getFramesEl().style.pointerEvents=t?"":"none"},r.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},r.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new Tt(this,Wn({},t)),e)},r.prototype.destroy=function(){var t,e=this;this.canvas.stopListening(),(t=this.canvasView)===null||t===void 0||t.remove(),["model","droppable"].forEach(function(n){return e[n]={}})},r}(Rt);const Xt=Xo,A={stylePrefix:"comp-",components:[],draggableComponents:!0,processor:void 0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var nt="text/html",Bt=nt,ce=function(){return ce=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ce.apply(this,arguments)},_e="data-gjs-",tn="parse:html";const de=function(a,r){return r===void 0&&(r={}),{compTypes:"",modelAttrStart:_e,getPropAttribute:function(t,e){var n=t.replace(this.modelAttrStart,""),i=(e==null?void 0:e.length)||0,l=e==null?void 0:e.substring(0,1),f=e==null?void 0:e.substring(i-1),d=e==="true"||e!=="false"&&e;try{d=l=="{"&&f=="}"||l=="["&&f=="]"?JSON.parse(d):d}catch{}return{name:n,value:d}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var n={},i={};return(0,m.each)(t,function(l,f){if(f.indexOf(e.modelAttrStart)===0){var d=e.getPropAttribute(f,l);n[d.name]=d.value}else i[f]=l}),{props:n,attrs:i}},parseStyle:function(t){for(var e={},n=t.split(";"),i=0,l=n.length;i<l;i++){var f=n[i].trim();if(f){var d=f.split(":");e[d[0].trim()]=d.slice(1).join(":").trim()}}return e},parseClass:function(t){for(var e=[],n=t.split(" "),i=0,l=n.length;i<l;i++){var f=n[i].trim();f&&e.push(f)}return e},parseNode:function(t,e){e===void 0&&(e={});for(var n=[],i=t.childNodes,l=0,f=i.length;l<f;l++){var d=i[l],v=d.attributes||[],g=v.length,_=n[n.length-1],k=d.childNodes.length,V=this.compTypes,q={};if(V){var ot="",ft=d.getAttribute&&d.getAttribute("".concat(this.modelAttrStart,"type"));if(ft)q={type:ft};else{for(var at=0;at<V.length;at++){var It=V[at];if(ot=It.model.isComponent(d,e)){typeof ot!="object"&&(ot={type:It.id});break}}q=ot}}if(!q.tagName){var Wt=d.tagName||"",ye=d.namespaceURI||"";q.tagName=Wt&&ye==="http://www.w3.org/1999/xhtml"?Wt.toLowerCase():Wt}g&&(q.attributes={});for(var Te=0;Te<g;Te++){var Ve=v[Te].nodeName,qe=v[Te].nodeValue;if(Ve=="style")q.style=this.parseStyle(qe);else if(Ve=="class")q.classes=this.parseClass(qe);else{if(Ve=="contenteditable")continue;if(Ve.indexOf(this.modelAttrStart)===0){var an=this.getPropAttribute(Ve,qe);q[an.name]=an.value}else qe===""&&d[Ve]===!0&&(qe=!0),q.attributes[Ve]=qe}}if(k&&!q.components){var En=d.childNodes[0];k===1&&En.nodeType===3?(!q.type&&(q.type="text"),q.components={type:"textnode",content:En.nodeValue}):q.components=this.parseNode(d,ce(ce({},e),{inSvg:e.inSvg||q.type==="svg"}))}if(q.type=="textnode"){if(_&&_.type=="textnode"){_.content+=q.content;continue}if(!e.keepEmptyTextNodes){var Fr=d.nodeValue;if(Fr!=" "&&!Fr.trim())continue}}k||"".concat(d.outerHTML).slice(-2)!=="/>"||(q.void=!0);var to=q.components;if(!q.type&&to){for(var eo=1,uo=0,no=0;no<to.length;no++){var fi=to[no],qi=fi.type;if(["text","textnode"].indexOf(qi)<0&&r.textTags.indexOf(fi.tagName)<0){eo=0;break}qi=="textnode"&&(uo=1)}eo&&uo&&(q.type="text")}(q.tagName||q.type=="textnode")&&n.push(q)}return n},parse:function(t,e,n){var i;n===void 0&&(n={});var l=(a==null?void 0:a.get("Config"))||{},f={},d=ce(ce({},r),n),v=ce(ce(ce({},r.optionsHtml),{htmlType:((i=r.optionsHtml)===null||i===void 0?void 0:i.htmlType)||r.htmlType}),n),g=(0,m.isFunction)(d.parserHtml)?d.parserHtml(t,v):function(It,Wt){Wt===void 0&&(Wt={});var ye,Te=new DOMParser,Ve=Wt.htmlType||Bt,qe=Ve===nt,an=qe?It:"<div>".concat(It,"</div>"),En=Te.parseFromString(an,Ve);if(qe){var Fr=En.head,to=En.body,eo=Fr.querySelectorAll("script");(0,m.each)(eo,function(no){return to.appendChild(no)});var uo=[];(0,m.each)(Fr.children,function(no){return uo.push(no)}),(0,m.each)(uo,function(no,fi){return to.insertBefore(no,to.children[fi])}),ye=to}else ye=En.firstChild;return ye}(t,v),_=g.querySelectorAll("script"),k=_.length;if(!((0,m.isUndefined)(l.allowScripts)?v.allowScripts:l.allowScripts))for(;k--;)_[k].parentNode.removeChild(_[k]);if(v.allowUnsafeAttr||this.__clearUnsafeAttr(g),e){for(var V=g.querySelectorAll("style"),q=V.length,ot="";q--;)ot=V[q].innerHTML+ot,V[q].parentNode.removeChild(V[q]);ot&&(f.css=e.parse(ot))}a&&a.trigger("".concat(tn,":root"),{input:t,root:g});var ft=this.parseNode(g,d),at=ft.length!==1||d.returnArray?ft:ft[0];return f.html=at,a&&a.trigger(tn,{input:t,output:f}),f},__clearUnsafeAttr:function(t){var e=this,n=t.attributes||[],i=t.childNodes||[],l=[];(0,m.each)(n,function(f){var d=f.nodeName||"";d.indexOf("on")===0&&l.push(d)}),l.map(function(f){return t.removeAttribute(f)}),(0,m.each)(i,function(f){return e.__clearUnsafeAttr(f)})}}};var Gn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dn=function(){return Dn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Dn.apply(this,arguments)},Yi=de();const Ar=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Gn(r,a),r.prototype.parseStyle=function(t){return Yi.parseStyle(t)},r.prototype.extendStyle=function(t){return Dn(Dn({},this.getStyle()),t)},r.prototype.getStyle=function(t){var e=this.get("style")||{},n=Dn({},e);return t&&(0,m.isString)(t)?n[t]:n},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,m.isString)(t)&&(t=this.parseStyle(t));var i=this.getStyle(e),l=Dn({},t),f=Dn({},l);(0,m.keys)(f).forEach(function(v){f[v]===""&&delete f[v]}),this.set("style",f,e);var d=(0,j.shallowDiff)(i,l);return delete d.__p,(0,m.keys)(d).forEach(function(v){var g=n.em;e.noEvent||(n.trigger("change:style:".concat(v)),g&&(g.trigger("styleable:change",n,v,e),g.trigger("styleable:change:".concat(v),n,v,e)))}),l},r.prototype.addStyle=function(t,e,n){e===void 0&&(e=""),n===void 0&&(n={}),typeof t=="string"?t={prop:e}:n=e||{},t=this.extendStyle(t),this.setStyle(t,n)},r.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},r.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],n=this.getStyle(t);for(var i in n){var l=t.important,f=(0,m.isArray)(l)?l.indexOf(i)>=0:l,d="".concat(n[i]).concat(f?" !important":""),v=i.substr(0,2)=="__";d&&!v&&e.push("".concat(i,":").concat(d,";"))}return e.join("")},r.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},r.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},r}(C.Hn);var Ws=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jr=function(){return jr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},jr.apply(this,arguments)},To=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},fo=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Eo=function(a,r){return r===void 0&&(r=[]),a?(((0,m.isArray)(a)||(0,m.isFunction)(a.map)?a:[a]).map(function(t){r.push(t.getId()),Eo(t.components().models,r)}),r):[]},rr=function(a,r,t){r===void 0&&(r={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps;return((0,m.isArray)(a)?a:[a]).map(function(n){var i=n.attributes,l=i===void 0?{}:i,f=n.components,d=n.tagName,v=l.id,g=(l.draggable,To(l,["id","draggable"])),_=n;if(v&&(e[v]?(e[v].push(_),v=Sn.getNewId(r),_.attributes.id=v):(e[v]=[],r[v]&&(_=r[v],d&&_.set({tagName:d},jr(jr({},t),{silent:!0})),(0,m.keys)(g).length&&_.addAttributes(g,jr({},t))))),f){var k=rr(f,r);if((0,m.isFunction)(_.components)){var V=_.components();V.length>0&&V.reset(k,t)}else _.components=k}return _})},ko=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ws(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.opt=e,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren);var n=e.em,i=e.config;this.config=i,this.em=n,this.domc=e.domc||(n==null?void 0:n.Components)},r.prototype.resetChildren=function(t,e){var n=this;e===void 0&&(e={});var i=this,l=e.previousModels||[],f=l.filter(function(v){return!t.get(v.cid)}),d=Eo(t);e.keepIds=Eo(l).filter(function(v){return d.indexOf(v)>=0}),f.forEach(function(v){return n.removeChildren(v,i,e)}),t.each(function(v){return n.onAdd(v)})},r.prototype.resetFromString=function(t,e){t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=Eo(this);var n=this,i=n.domc,l=n.em,f=n.parent,d=l==null?void 0:l.Css,v=(i==null?void 0:i.allById())||{},g=this.parseString(t,e),_=rr(g,v,e),k=e.visitedCmps,V=k===void 0?{}:k;Object.keys(V).forEach(function(q){var ot=V[q];if(ot.length){var ft=(d==null?void 0:d.getRules("#".concat(q)))||[];ft.length&&ot.forEach(function(at){ft.forEach(function(It){var Wt=It.clone();Wt.set("selectors",["#".concat(at.attributes.id)]),d.getAll().add(Wt)})})}}),this.reset(_,e),l==null||l.trigger("component:content",f,e,t)},r.prototype.removeChildren=function(t,e,n){var i=this;if(n===void 0&&(n={}),t){var l=this.domc,f=this.em,d=n.temporary||n.fromUndo;if(t.prevColl=this,!d){var v=t.getId(),g=f.Selectors.getAll(),_=f.Css.getAll(),k=(n.keepIds||[]).indexOf(v)<0;delete(l?l.allById():{})[v];var V=k?_.remove(_.filter(function(ot){return ot.getSelectors().getFullString()==="#".concat(v)}),n):[];g.remove(V.map(function(ot){return ot.getSelectors().at(0)})),t.opt.temporary||(f.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),f.trigger("component:remove",t)),t.components().forEach(function(ot){return i.removeChildren(ot,e,n)})}var q=t.components();f.stopListening(q),f.stopListening(t),f.stopListening(t.get("classes")),t.__postRemove()}},r.prototype.model=function(t,e){var n,i=e.collection.opt,l=i.em,f=l.Components.componentTypes;e.em=l,e.config=i.config,e.componentTypes=f,e.domc=i.domc;for(var d=0;d<f.length;d++)if(f[d].id==t.type){n=f[d].model;break}return n||(n=f[f.length-1].model,l&&t.type&&l.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new n(t,e)},r.prototype.parseString=function(t,e){e===void 0&&(e={});var n=this.em,i=this.domc,l=n.Css,f=n.Parser.parseHtml(t);if(Sn.checkId(f.html,f.css,i.componentsById,e),f.css&&l&&!e.temporary){e.at;var d=To(e,["at"]);l.addCollection(f.css,jr(jr({},d),{extend:1}))}return f.html},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={}),e.keepIds=fo(fo([],e.keepIds||[],!0),Eo(e.previousModels),!0),(0,m.isString)(t)?t=this.parseString(t,e):(0,m.isArray)(t)&&(t=fo([],t,!0)).forEach(function(f,d){if((0,m.isString)(f)){var v=n.parseString(f,e);t[d]=(0,m.isArray)(v)&&!v.length?null:v}});var i=(0,m.isArray)(t);t=(i?t:[t]).filter(Boolean).map(function(f){return n.processDef(f)}),t=i?(0,m.flatten)(t,1):t[0];var l=C.FE.prototype.add.apply(this,[t,e]);return this.__firstAdd=l,l},r.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this.em,n=this.config,i=(n===void 0?{}:n).processor,l=t;if(i){var f=i(l=jr({},l));f&&((0,m.each)(l,function(V,q){return delete l[q]}),(0,m.extend)(l,f))}if(l.$$typeof&&typeof l.props=="object"){(l=jr({},l)).props=jr({},l.props);var d=e.Components,v=e.Parser.parserHtml;(0,m.each)(l,function(V,q){(0,m.includes)(["props","type"],q)||delete l[q]});var g=l.props,_=g.children;delete g.children,delete l.props;var k=v.splitPropsFromAttr(g);l.attributes=k.attrs,_&&(l.components=_),l.type?d.getType(l.type)||(l.tagName=l.type,delete l.type):l.type="textnode",(0,m.extend)(l,k.props)}return l},r.prototype.onAdd=function(t,e,n){n===void 0&&(n={});var i=this.domc,l=this.em,f=t.getStyle(),d=l&&l.getConfig().avoidInlineStyle;if(i&&i.Component.ensureInList(t),!(0,m.isEmpty)(f)&&!d&&l&&l.get&&l.getConfig().forceClass&&!n.temporary){var v=t.cid;l.Css.setClassRule(v,f),t.setStyle({}),t.addClass(v)}t.__postAdd({recursive:!0})},r}(C.FE);const Zo=ko;var $s=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mo=1,Xi=2,qs=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,i=e.config,l=i===void 0?{}:i,f=n.get("name"),d=n.get("label");f?d||n.set("label",f):n.set("name",d);var v=n.get("name"),g=l.escapeName,_=g?g(v):r.escapeName(v);return n.set("name",_),n.em=e.em,n}return $s(r,a),r.prototype.defaults=function(){return{name:"",label:"",type:Mo,active:!0,private:!1,protected:!1,_undo:!0}},r.prototype.isId=function(){return this.get("type")===Xi},r.prototype.isClass=function(){return this.get("type")===Mo},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,n=this.get("name"),i="";switch(this.get("type")){case Mo:i=".";break;case Xi:i="#"}return i+(e?e(n):n)},r.prototype.toString=function(){return this.getFullName()},r.prototype.getLabel=function(){return this.get("label")},r.prototype.setLabel=function(t){return this.set("label",t)},r.prototype.getActive=function(){return this.get("active")},r.prototype.setActive=function(t){return this.set("active",t)},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,n=C.Hn.prototype.toJSON.call(this,[t]),i=(0,m.result)(this,"defaults");if(e&&e.getConfig().avoidDefaults){(0,m.forEach)(i,function(f,d){n[d]===f&&delete n[d]}),n.label===n.name&&delete n.label;var l=(0,m.keys)(n).length;l===1&&n.name&&(n=n.name),l===2&&n.name&&n.type&&(n=this.getFullName())}return n},r.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\:@]+)/gi,"-")},r.TYPE_CLASS=Mo,r.TYPE_ID=Xi,r}(C.Hn);const or=qs;qs.prototype.idAttribute="name";var so=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wi=function(a,r){return a.reduce(function(t,e,n){return t.concat(wi(a.slice(n+1),"".concat(r).concat(e)))},[r])},Gs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return so(r,a),r.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||or.TYPE_CLASS)},r.prototype.getStyleable=function(){return(0,m.filter)(this.models,function(t){return t.get("active")&&!t.get("private")})},r.prototype.getValid=function(t){var e=(t===void 0?{}:t).noDisabled;return(0,m.filter)(this.models,function(n){return!n.get("private")}).filter(function(n){return e?n.get("active"):1})},r.prototype.getFullString=function(t,e){e===void 0&&(e={});var n=[];return(t||this).forEach(function(i){return n.push(i.getFullName(e))}),e.sort&&n.sort(),n.join("").trim()},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,n=t.array,i=[],l=this.map(function(f){return f.getFullName(t)}).sort();return e?l.forEach(function(f,d){i=i.concat(wi(l.slice(d+1),f))}):i=l,n?i:e?i.join(","):i.join("")},r}(C.FE);const Mr=Gs;Gs.prototype.model=or;var Lo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_i=function(){return _i=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_i.apply(this,arguments)};const Ks=function(a){function r(t){var e=a.call(this,t)||this,n=e.attributes,i=n.target,l=n.name,f=n.changeProp,d=n.value;if(!e.get("id")&&e.set("id",l),i){e.target=i,e.unset("target");var v=f?"change:".concat(l):"change:attributes:".concat(l);e.listenTo(i,v,e.targetUpdated);var g=d||e.getValue();!(0,m.isUndefined)(g)&&e.set({value:g},{silent:!0})}return e}return Lo(r,a),r.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",changeProp:!1,options:[]}},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,i=n===void 0||n,l=this.getId(),f=this.get("label")||this.getName();return i&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||f},r.prototype.getValue=function(){return this.getTargetValue()},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n={};e.partial&&(n.avoidStore=!0),this.setTargetValue(t,n),e.partial===!1&&(this.setTargetValue(""),this.setTargetValue(t))},r.prototype.props=function(){return this.attributes},r.prototype.targetUpdated=function(){var t,e=this.getTargetValue();this.set({value:e},{fromTarget:1}),(t=this.em)===null||t===void 0||t.trigger("trait:update",{trait:this,component:this.target})},r.prototype.getTargetValue=function(){var t,e=this.getName(),n=this.target;return t=this.get("changeProp")?n.get(e):n.getAttributes()[e],(0,m.isUndefined)(t)?"":t},r.prototype.setTargetValue=function(t,e){var n;e===void 0&&(e={});var i=this.target,l=this.attributes,f=this.getName();if(!(0,m.isUndefined)(t)){var d=t;if(t==="false"?d=!1:t==="true"&&(d=!0),this.getType()==="checkbox"){var v=l.valueTrue,g=l.valueFalse;d&&!(0,m.isUndefined)(v)&&(d=v),d||(0,m.isUndefined)(g)||(d=g)}this.get("changeProp")?i.set(f,d,e):i.addAttributes(((n={})[f]=d,n),e)}},r.prototype.setValueFromInput=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var i={value:t};this.set(i,_i(_i({},n),{avoidStore:1})),e&&(this.set("value","",n),this.set(i,n))},r.prototype.getInitValue=function(){var t,e=this.target,n=this.getName();if(e){var i=e.get("attributes");t=this.get("changeProp")?e.get(n):i[n]}return t||this.get("value")||this.get("default")},r}(C.Hn);var za=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ci=function(a){function r(t,e){var n=a.call(this,t)||this;return n.em=e.em,n.listenTo(n,"add",n.handleAdd),n.listenTo(n,"reset",n.handleReset),n}return za(r,a),r.prototype.handleReset=function(t,e){var n=(e===void 0?{}:e).previousModels;(n===void 0?[]:n).forEach(function(i){return i.trigger("remove")})},r.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e)},r.prototype.setTarget=function(t){this.target=t},r.prototype.add=function(t,e){var n=this.em;if((0,m.isString)(t)||(0,m.isArray)(t)){var i=n&&n.get&&n.Traits,l=function(_){return _===void 0&&(_={}),{build:function(k){var V=[];typeof k=="string"&&(k=[k]);for(var q=0;q<k.length;q++){var ot=k[q],ft={name:ot,type:"text"};ot==="target"&&(ft.type="select",ft.default=!1,ft.options=_.optionsTarget),V.push(ft)}return V}}}(i&&i.getConfig());(0,m.isString)(t)&&(t=[t]);for(var f=0,d=t.length;f<d;f++){var v=t[f],g=(0,m.isString)(v)?l.build(v)[0]:v;g.target=this.target,t[f]=g}}return C.FE.prototype.add.apply(this,[t,e])},r}(C.FE);const Qo=Ci;Ci.prototype.model=Ks;var Zi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xe=function(){return Xe=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Xe.apply(this,arguments)},ir=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Qi=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Cr="component:drag",Qn="__symbols",xn="__symbol",Lr="__symbol_ovrd",ti="component:update",Br="".concat(ti,"-inside"),ts=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){var t;return(t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,locked:!1,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null})[xn]=0,t[Qn]=0,t[Lr]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.updated=function(t,e,n){},r.prototype.removed=function(){},r.prototype.initialize=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,m.bindAll)(this,"__upSymbProps","__upSymbCls","__upSymbComps");var i=e.em,l=this.parent(),f=l==null?void 0:l.attributes,d=this.get("propagate");if(d&&this.set("propagate",(0,m.isArray)(d)?d:[d]),f&&f.propagate&&!d){var v={},g=f.propagate;g.forEach(function(ot){return v[ot]=l.get(ot)}),v.propagate=g,this.set(Xe(Xe({},v),t))}if(e&&e.config&&e.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),e.em=i,this.opt=e,this.em=i,this.frame=e.frame,this.config=e.config||{},this.set("attributes",Xe(Xe({},(0,m.result)(this,"defaults").attributes||{}),this.get("attributes")||{})),this.ccid=r.createId(this,e),this.initClasses(),this.initTraits(),this.initComponents(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.on("change:toolbar",this.__emitUpdateTlb),this.on("change",this.__onChange),this.on(Br,this.__propToParent),this.set("status",""),this.views=[],["classes","traits","components"].forEach(function(ot){var ft="add remove ".concat(ot!=="components"?"change":"");n.listenTo(n.get(ot),ft.trim(),function(){for(var at=[],It=0;It<arguments.length;It++)at[It]=arguments[It];return n.emitUpdate.apply(n,ir([ot],at,!1))})}),!e.temporary){var _=i&&i.Css,k=this.attributes,V=k.styles,q=k.type;V&&_&&_.addCollection(V,{avoidUpdateStyle:!0},{group:"cmp:".concat(q)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),i&&i.trigger("component:create",this)}},r.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,n=e==null?void 0:e.UndoManager,i=this.components();n&&!this.__hasUm&&(n.add(i),n.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&i.map(function(l){return l.__postAdd(t)})},r.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.get("UndoManager");e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},r.prototype.__onChange=function(t,e){var n=this,i=this.changedAttributes()||{};(0,m.keys)(i).forEach(function(l){return n.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete i[l]}),(0,j.isEmptyObj)(i)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:i,options:e}))},r.prototype.__changesUp=function(t){var e=this.em;[this.frame,e].forEach(function(n){return n&&n.changesUp(t)})},r.prototype.__propSelfToParent=function(t){this.trigger(ti,t),this.__propToParent(t)},r.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Br,t)},r.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},r.prototype.is=function(t){return this.get("type")==t},r.prototype.props=function(){return this.attributes},r.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.find=function(t){var e,n=[],i=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return i==null||i.each(function(l){var f=i.eq(l).data("model");f&&n.push(f)}),n},r.prototype.findType=function(t){var e=[],n=function(i){return i.forEach(function(l){l.is(t)&&e.push(l),n(l.components())})};return n(this.components()),e},r.prototype.closest=function(t){var e,n=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return n!=null&&n.length?n.data("model"):void 0},r.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},r.prototype.contains=function(t){var e=!1;if(!t)return e;var n=function(i){!e&&i.forEach(function(l){l===t&&(e=!0),!e&&n(l.components())})};return n(this.components()),e},r.prototype.tagUpdated=function(){this.trigger("rerender")},r.prototype.replaceWith=function(t){var e=this.collection,n=e.indexOf(this);return e.remove(this),e.add(t,{at:n})},r.prototype.attrUpdated=function(t,e,n){var i=this;n===void 0&&(n={});var l=this.get("attributes"),f=l.class;f&&this.setClass(f),delete l.class;var d=l.style;d&&this.setStyle(d),delete l.style;var v=Xe({},this.previous("attributes")),g=(0,j.shallowDiff)(v,this.get("attributes"));(0,m.keys)(g).forEach(function(_){return i.trigger("change:attributes:".concat(_),i,g[_],n)})},r.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",Xe({},t),e),this},r.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(Xe(Xe({},this.getAttributes({noClass:!0})),t),e)},r.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var n=Array.isArray(t)?t:[t],i=this.getAttributes();return n.map(function(l){return delete i[l]}),this.setAttributes(i,e)},r.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=this.em,i=(0,m.isString)(t)?t:"",l=i?e:t;if(n&&n.getConfig().avoidInlineStyle&&!l.inline){var f=n.get("state"),d=n.Css.getIdRule(this.getId(),Xe({state:f},l));if(this.rule=d,d)return d.getStyle(i)}return a.prototype.getStyle.call(this,i)},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={});var i=this,l=i.opt,f=i.em;if(f&&f.getConfig().avoidInlineStyle&&!l.temporary&&!e.inline){var d=this.get("style")||{};t=(0,m.isString)(t)?this.parseStyle(t):t,t=Xe(Xe({},t),d);var v=f.get("state"),g=f.Css,_=this.getStyle(e);this.rule=g.setIdRule(this.getId(),t,Xe(Xe({},e),{state:v}));var k=(0,j.shallowDiff)(_,t);this.set("style","",{silent:!0}),(0,m.keys)(k).forEach(function(V){return n.trigger("change:style:".concat(V))})}else t=a.prototype.setStyle.apply(this,arguments);return t},r.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,n=[],i=Xe({},this.get("attributes")),l=e==null?void 0:e.Selectors,f=this.getId();if(t.noClass?delete i.class:(this.classes.forEach(function(g){return n.push((0,m.isString)(g)?g:g.get("name"))}),n.length&&(i.class=n.join(" "))),!t.noStyle){var d=this.get("style");(0,j.isObject)(d)&&!(0,j.isEmptyObj)(d)&&(i.style=this.styleToString({inline:1}))}if(!(0,m.has)(i,"id")){var v=void 0;(function(g){return g&&g.getConfig().avoidInlineStyle})(e)?v=l&&l.get(f,l.Selector.TYPE_ID):(0,m.isEmpty)(this.getStyle())||(v=1),(this.__getSymbol()||this.__getSymbols())&&(v=1),v&&(i.id=f)}return i},r.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},r.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},r.prototype.removeClass=function(t){var e=[];t=(0,m.isArray)(t)?t:[t];var n=this.classes,i=or.TYPE_CLASS;return t.forEach(function(l){l.split(" ").forEach(function(f){var d=n.where({name:f,type:i})[0];d&&e.push(n.remove(d))})}),e},r.prototype.getClasses=function(){var t=this.getAttributes().class;return t?t.split(" "):[]},r.prototype.__logSymbol=function(t,e,n){n===void 0&&(n={});var i=this.__getSymbol(),l=this.__getSymbols();(i||l)&&this.em.log(t,{model:this,toUp:e,context:"symbols",opts:n})},r.prototype.__initSymb=function(){this.__symbReady||(this.on("change",this.__upSymbProps),this.__symbReady=!0)},r.prototype.__isSymbol=function(){return(0,m.isArray)(this.get(Qn))},r.prototype.__isSymbolOrInst=function(){return!(!this.__isSymbol()&&!this.get(xn))},r.prototype.__isSymbolTop=function(){var t=this.parent();return this.__isSymbolOrInst()&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},r.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop();return(e.__isSymbol()?e:e.__getSymbol())!==t},r.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},r.prototype.__getSymbol=function(){var t=this.get(xn);if(t&&(0,m.isString)(t)){var e=this.__getAllById()[t];e?(t=e,this.set(xn,e)):t=0}return t},r.prototype.__getSymbols=function(){var t=this,e=this.get(Qn);return e&&(0,m.isArray)(e)&&(e.forEach(function(n,i){n&&(0,m.isString)(n)&&(e[i]=t.__getAllById()[n])}),e=e.filter(function(n){return n&&!(0,m.isString)(n)})),e},r.prototype.__isSymbOvrd=function(t){t===void 0&&(t="");var e=this.get(Lr),n=t.split(":")[0],i=t!==n?[t,n]:[t];return e===!0||(0,m.isArray)(e)&&i.some(function(l){return e.indexOf(l)>=0})},r.prototype.__getSymbToUp=function(t){var e=this;t===void 0&&(t={});var n=[],i=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||i&&this.__isSymbOvrd(i))return n;var l=this.__getSymbols()||[],f=this.__getSymbol();return n=(f?ir([f],f.__getSymbols()||[],!0):l).filter(function(d){return d!==e}).filter(function(d){return!(i&&d.__isSymbOvrd(i))})},r.prototype.__getSymbTop=function(t){for(var e=this,n=this.parent(t);n&&(n.__isSymbol()||n.__getSymbol());)e=n,n=n.parent(t);return e},r.prototype.__upSymbProps=function(t,e){var n=this;e===void 0&&(e={});var i=this.changedAttributes()||{},l=i.attributes||{};if(delete i.status,delete i.open,delete i[Qn],delete i[xn],delete i[Lr],delete i.attributes,delete l.id,(0,j.isEmptyObj)(l)||(i.attributes=l),!(0,j.isEmptyObj)(i)){var f=this.__getSymbToUp(e);(0,m.keys)(i).map(function(d){n.__isSymbOvrd(d)&&delete i[d]}),this.__logSymbol("props",f,{opts:e,changed:i}),f.forEach(function(d){var v=Xe({},i);(0,m.keys)(v).map(function(g){d.__isSymbOvrd(g)&&delete v[g]}),d.set(v,Xe({fromInstance:n},e))})}},r.prototype.__upSymbCls=function(t,e,n){var i=this;n===void 0&&(n={});var l=this.__getSymbToUp(n);this.__logSymbol("classes",l,{opts:n}),l.forEach(function(f){f.set("classes",i.get("classes"),{fromInstance:i})}),this.__changesUp(n)},r.prototype.__upSymbComps=function(t,e,n){var i=this,l=n||e||{},f={fromInstance:l.fromInstance,fromUndo:l.fromUndo},d=t.opt.temporary;if(n)if(n.add){var v=[],g=!!this.__getSymbols();if((Wt=this.__getSymbToUp(Xe(Xe({},f),{changed:"components:add"}))).length){var _=t.__getSymbol();v=(_?_.__getSymbols():t.__getSymbols())||[],(v=ir([],v,!0)).push(_||t)}!d&&this.__logSymbol("add",Wt,{opts:n,addedInstances:v.map(function(Te){return Te.cid}),added:t.cid}),Wt.forEach(function(Te){var Ve=Te.__getSymbTop(),qe=v.filter(function(an){var En=an.__getSymbTop({prev:1});return Ve&&En&&En===Ve})[0]||t.clone({symbol:!0,symbolInv:g});Te.append(qe,Xe({fromInstance:i},n))})}else{var k=t.__getSymbol();if(k&&!n.temporary&&k.set(Qn,k.__getSymbols().filter(function(Te){return Te!==t})),!t.__isSymbolTop()){var V="components:remove",q=n.index,ot=t.parent(),ft=Xe({fromInstance:t},n),at=t.__isSymbolNested(),It=function(Te){var Ve=Te.parent();Ve&&!Ve.__isSymbOvrd(V)&&Te.remove(ft)};Wt=ot!=null&&ot.__isSymbOvrd(V)?[]:t.__getSymbToUp(f),at&&(Wt=ot==null?void 0:ot.__getSymbToUp(Xe(Xe({},f),{changed:V})),It=function(Te){var Ve=Te.components().at(q);Ve&&Ve.remove(Xe({fromInstance:ot},ft))}),!d&&this.__logSymbol("remove",Wt,{opts:n,removed:t.cid,isSymbNested:at}),Wt.forEach(It)}}else{var Wt=this.__getSymbToUp(Xe(Xe({},f),{changed:"components:reset"})),ye=t.models;this.__logSymbol("reset",Wt,{components:ye}),Wt.forEach(function(Te){var Ve=ye.map(function(qe){return qe.clone({symbol:!0})});Te.components().reset(Ve,Xe({fromInstance:i},e))})}this.__changesUp(l)},r.prototype.initClasses=function(t,e,n){n===void 0&&(n={});var i=this.get("attributes").class||[],l=[this,"change:classes",this.initClasses],f=this.get("classes")||i,d=(0,m.isString)(f)?f.split(" "):f;this.stopListening.apply(this,l);var v=this.normalizeClasses(d),g=new Mr([]);return this.set("classes",g,n),g.add(v),g.on("add remove reset",this.__upSymbCls),this.listenTo.apply(this,l),this},r.prototype.initComponents=function(){var t=[this,"change:components",this.initComponents];this.stopListening.apply(this,t);var e=new Zo([],this.opt);e.parent=this;var n=this.get("components"),i=!this.opt.avoidChildren;return this.set("components",e),i&&n&&e.add((0,m.isFunction)(n)?n(this):n,this.opt),e.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},r.prototype.initTraits=function(t){var e=this.em,n="change:traits";this.off(n,this.initTraits),this.__loadTraits();var i=Xe({},this.get("attributes")),l=this.traits;return l.each(function(f){if(!f.get("changeProp")){var d=f.get("name"),v=f.getInitValue();d&&v&&(i[d]=v)}}),l.length&&this.set("attributes",i),this.on(n,this.initTraits),t&&e&&e.trigger("component:toggled"),this},r.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var n=this.previous(t)||[],i=this.get(t)||[],l=n.map(function(d){return"change:".concat(d)}).join(" "),f=i.map(function(d){return"change:".concat(d)}).join(" ");l&&this.off(l,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,e)}},r.prototype.__scriptPropsChange=function(t,e,n){n===void 0&&(n={}),n.avoidStore||this.trigger("rerender")},r.prototype.append=function(t,e){e===void 0&&(e={});var n=((0,m.isArray)(t)?ir([],t,!0):[t]).map(function(l){return(0,m.isString)(l)||l.collection&&l.collection.remove(l,{temporary:!0}),l}),i=this.components().add(n,e);return(0,m.isArray)(i)?i:[i]},r.prototype.components=function(t,e){e===void 0&&(e={});var n=this.get("components");return(0,m.isUndefined)(t)?n:(n.reset(void 0,e),t?this.append(t,e):[])},r.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},r.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},r.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},r.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},r.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},r.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},r.prototype.initToolbar=function(){var t=this.em,e=this,n=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var i=[];e.collection&&i.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&i.push({attributes:{class:"".concat(n,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&i.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&i.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",i)}},r.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var n=t||this.traits;if(!(n instanceof Qo)){n=(0,m.isFunction)(n)?n(this):n;var i=new Qo([],this.opt);i.setTarget(this),n.length&&(n.forEach(function(l){return l.attributes&&delete l.attributes.value}),i.add(n)),this.set({traits:i},e)}return this},r.prototype.getTraits=function(){return this.__loadTraits(),ir([],this.traits.models,!0)},r.prototype.setTraits=function(t){var e=(0,m.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},r.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},r.prototype.updateTrait=function(t,e){var n,i=this.getTrait(t);return i&&i.set(e),(n=this.em)===null||n===void 0||n.trigger("component:toggled"),this},r.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},r.prototype.removeTrait=function(t){var e,n=this,i=((0,m.isArray)(t)?t:[t]).map(function(d){return n.getTrait(d)}),l=this.traits,f=i.length?l.remove(i):[];return(e=this.em)===null||e===void 0||e.trigger("component:toggled"),(0,m.isArray)(f)?f:[f]},r.prototype.addTrait=function(t,e){var n;e===void 0&&(e={}),this.__loadTraits();var i=this.traits.add(t,e);return(n=this.em)===null||n===void 0||n.trigger("component:toggled"),(0,m.isArray)(i)?i:[i]},r.prototype.normalizeClasses=function(t){var e=[],n=this.em,i=n==null?void 0:n.Selectors;return i?t.models?ir([],t.models,!0):(t.forEach(function(l){return e.push(i.add(l))}),e):[]},r.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,n=Xe({},this.attributes),i=Xe({},this.opt),l=this.getId(),f=e==null?void 0:e.Css;n.attributes=Xe({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get("components").each(function(V,q){n.components[q]=V.clone(Xe(Xe({},t),{_inner:1}))}),this.get("traits").each(function(V,q){n.traits[q]=V.clone()}),this.get("classes").each(function(V,q){n.classes[q]=V.get("name")}),n.status="",i.collection=null;var d=new this.constructor(n,i),v="#".concat(d.getId());(f?f.getRules("#".concat(l)):[]).forEach(function(V){var q=V.clone();q.set("selectors",[v]),f.getAll().add(q)}),d.set(Qn,0);var g=this.__getSymbol(),_=this.__getSymbols();t.symbol||!g&&!_?g?(g.set(Qn,ir(ir([],g.__getSymbols(),!0),[d],!1)),d.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(Qn,ir(ir([],_,!0),[d],!1)),d.set(xn,this),d.__initSymb()):t.symbolInv?(this.set(Qn,[d]),d.set(xn,this),[this,d].map(function(V){return V.__initSymb()})):(d.set(Qn,[this]),[this,d].map(function(V){return V.__initSymb()}),this.set(xn,d))):(d.set(xn,0),d.set(Qn,0));var k="component:clone";return e&&e.trigger(k,d),this.trigger(k,d),d},r.prototype.getName=function(){var t=this.em,e=this.attributes,n=e.type,i=e.tagName,l=e.name,f=n||i,d=n?"":i,v="domComponents.names.",g=l&&(t==null?void 0:t.t("".concat(v).concat(l))),_=d&&(t==null?void 0:t.t("".concat(v).concat(d))),k=t&&(t.t("".concat(v).concat(n))||t.t("".concat(v).concat(i)));return this.get("custom-name")||g||l||_||(0,j.capitalize)(d)||k||(0,j.capitalize)(f)},r.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},r.prototype.toHTML=function(t){t===void 0&&(t={});var e=this,n=[],i=t.tag||e.get("tagName"),l=e.get("void"),f=t.attributes,d=this.getAttrToHTML();if(delete t.tag,f&&((0,m.isFunction)(f)?d=f(e,d)||{}:(0,j.isObject)(f)&&(d=f)),t.withProps){var v=this.toJSON();(0,m.forEach)(v,function(at,It){It[0]!=="_"&&["classes","attributes","components"].indexOf(It)<0&&(d["data-gjs-".concat(It)]=(0,m.isArray)(at)||(0,j.isObject)(at)?JSON.stringify(at):at)})}for(var g in d){var _=d[g];if(!(0,m.isUndefined)(_)&&_!==null)if((0,m.isBoolean)(_))_&&n.push(g);else{var k="";if(t.altQuoteAttr&&(0,m.isString)(_)&&_.indexOf('"')>=0)k="'".concat(_.replace(/'/g,"&apos;"),"'");else{var V=(0,m.isString)(_)?_.replace(/"/g,"&quot;"):_;k='"'.concat(V,'"')}n.push("".concat(g,"=").concat(k))}}var q=n.length?" ".concat(n.join(" ")):"",ot=e.getInnerHTML(t),ft="<".concat(i).concat(q).concat(l?"/":"",">").concat(ot);return!l&&(ft+="</".concat(i,">")),ft},r.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},r.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(n){return n.toHTML(t)}).join(""):this.get("content")},r.prototype.getAttrToHTML=function(){var t=this.getAttributes();return delete t.style,t},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=K.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,!t.fromUndo){var n=e[xn],i=e[Qn];i&&(0,m.isArray)(i)&&(e[Qn]=i.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),n&&!(0,m.isString)(n)&&(e[xn]=n.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},r.prototype.getChangedProps=function(t){var e=t||K.Model.prototype.toJSON.apply(this),n=(0,m.result)(this,"defaults");return(0,m.forEach)(n,function(i,l){["type"].indexOf(l)===-1&&e[l]===i&&delete e[l]}),(0,m.isEmpty)(e.type)&&delete e.type,(0,m.forEach)(["attributes","style"],function(i){(0,m.isEmpty)(n[i])&&(0,m.isEmpty)(e[i])&&delete e[i]}),(0,m.forEach)(["classes","components"],function(i){(!e[i]||(0,m.isEmpty)(n[i])&&!e[i].length)&&delete e[i]}),e},r.prototype.getId=function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},r.prototype.setId=function(t,e){var n=Xe({},this.get("attributes"));return n.id=t,this.set("attributes",n,e),this},r.prototype.getEl=function(t){t===void 0&&(t=void 0);var e=this.getView(t);return e&&e.el},r.prototype.getView=function(t){var e=this.view,n=this.views;return t&&(e=n.filter(function(i){return i._getFrame()===t.view})[0]),e},r.prototype.getCurrentView=function(){var t=(this.em.get("currentFrame")||{}).model;return this.getView(t)},r.prototype.__getScriptProps=function(){var t=this.props();return(this.get("script-props")||[]).reduce(function(e,n){return e[n]=t[n],e},{})},r.prototype.getScriptString=function(t){var e=this,n=t||this.get("script")||"";if(!n)return n;if(this.get("script-props"))n=n.toString().trim();else{if(typeof n=="function"){var i=n.toString().trim();n=(i=i.replace(/^function[\s\w]*\(\)\s?\{/,"").replace(/\}$/,"")).trim()}var l=this.em.getConfig(),f=Qi(l.tagVarStart||"{[ "),d=Qi(l.tagVarEnd||" ]}"),v=new RegExp("".concat(f,"([\\w\\d-]*)").concat(d),"g");n=n.replace(v,function(g,_){e.scriptUpdated();var k=e.attributes[_]||"";return(0,m.isArray)(k)||typeof k=="object"?JSON.stringify(k):k})}return n},r.prototype.emitUpdate=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var l=this.em,f=ti+(t?":".concat(t):""),d=t&&this.get(t);t&&this.updated.apply(this,ir([t,d,t&&this.previous(t)],n,!1)),this.trigger.apply(this,ir([f],n,!1)),l&&l.trigger.apply(l,ir([f,this],n,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=d,e),options:n[2]||n[1]||{}})},r.prototype.onAll=function(t){return(0,m.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},r.prototype.remove=function(t){var e=this;t===void 0&&(t={});var n=this.em,i=this.collection,l=function(){i&&i.remove(e,Xe(Xe({},t),{action:"remove-component"})),i||(e.components("",t),e.components().removeChildren(e,void 0,t))},f=Xe({},t);return[this,n].map(function(d){return d.trigger("component:remove:before",e,l,f)}),!f.abort&&l(),this},r.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var n=e.at,i=this.index(),l=t===this.parent();l&&(i===n||i===n-1)||(l&&n&&n>i&&(e.at=n-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},r.prototype.isInstanceOf=function(t){var e,n,i=(n=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||n===void 0?void 0:n.model;return!!i&&this instanceof i},r.prototype.isChildOf=function(t){for(var e=(0,m.isString)(t),n=this.parent();n;){if(e){if(n.isInstanceOf(t))return!0}else if(n===t)return!0;n=n.parent()}return!1},r.prototype.resetId=function(t){var e=this.em,n=this.getId();if(!n)return this;var i=r.createId(this);this.setId(i);var l=e==null?void 0:e.Css.getIdRule(n),f=l==null?void 0:l.get("selectors").at(0);return f==null||f.set("name",i),this},r.prototype._getStyleRule=function(t){var e=(t===void 0?{}:t).id,n=this.em,i=e||this.getId();return n==null?void 0:n.Css.getIdRule(i)},r.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},r.prototype._idUpdated=function(t,e,n){if(n===void 0&&(n={}),!n.idUpdate){var i=this.ccid,l=(this.get("attributes")||{}).id,f=(this.previous("attributes")||{}).id||i,d=r.getList(this);if(d[l]||!l&&f)return this.setId(f,{idUpdate:!0});delete d[f],d[l]=this,this.ccid=l;var v=this._getStyleSelector({id:f});v&&v.set({name:l,label:l})}},r.getDefaults=function(){return(0,m.result)(this.prototype,"defaults")},r.isComponent=function(t){return{tagName:(0,j.toLowerCase)(t.tagName)}},r.ensureInList=function(t){var e=r.getList(t),n=t.getId(),i=e[n];if(i){if(i!==t){var l=r.getIncrementId(n,e);t.setId(l),e[l]=t}}else e[n]=t;t.components().forEach(function(f){return r.ensureInList(f)})},r.createId=function(t,e){e===void 0&&(e={});var n,i=r.getList(t),l=e.idMap,f=l===void 0?{}:l,d=t.get("attributes").id;return d?(n=r.getIncrementId(d,i,e),t.setId(n),d!==n&&(f[d]=n)):n=r.getNewId(i),i[n]=t,n},r.getNewId=function(t){for(var e=Object.keys(t).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-e),i="i".concat(n);t[i];)i=r.getNewId(t);return i},r.getIncrementId=function(t,e,n){n===void 0&&(n={});var i=n.keepIds,l=1,f=t;if((i===void 0?[]:i).indexOf(t)<0)for(;e[f];)l++,f="".concat(t,"-").concat(l);return f},r.getList=function(t){var e=t.opt,n=e===void 0?{}:e,i=n.domc,l=n.em,f=i||(l==null?void 0:l.Components);return f?f.componentsById:{}},r.checkId=function(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n={}),i===void 0&&(i={});var l=(0,m.isArray)(t)?t:[t],f=i.keepIds,d=f===void 0?[]:f;l.forEach(function(v){v.attributes;var g=v.attributes,_=g===void 0?{}:g,k=v.components,V=_.id;if(V&&n[V]&&d.indexOf(V)<0){var q=r.getIncrementId(V,n);_.id=q,(0,m.isArray)(e)&&e.forEach(function(ot){var ft=ot.selectors;ft.forEach(function(at,It){at==="#".concat(V)&&(ft[It]="#".concat(q))})})}k&&r.checkId(k,e,n,i)})},r}(Ar);const Sn=ts;var Dr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),es=function(a){function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=Nn,t}return Dr(r,a),r.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},r.prototype.removeChildren=function(t,e,n){var i=this;n===void 0&&(n={}),t.views.forEach(function(l){if(l){var f=l.childrenView,d=l.scriptContainer;f&&f.stopListening(),(0,Ge.L_)(d),l.remove.apply(l)}}),t.components().forEach(function(l){return i.removeChildren(l,e,n)})},r.prototype.addTo=function(t,e,n){n===void 0&&(n={});var i=this.em,l=this.collection.indexOf(t);if(this.addToCollection(t,null,l),i&&!n.temporary){var f=function(d){i.trigger("component:add",d),d.components().forEach(function(v){return f(v)})};f(t)}},r.prototype.addToCollection=function(t,e,n){for(var i=this,l=i.config,f=i.opts,d=i.em,v=e||null,g=l.frameView,_=(g==null?void 0:g.model)&&t.getView(g.model),k=f.componentTypes||(d==null?void 0:d.Components.getTypes()),V=t.get("type")||"default",q=this.compView,ot=0;ot<k.length;ot++)if(k[ot].id==V){q=k[ot].view;break}var ft,at=_||new q({model:t,config:l,componentTypes:k});try{ft=at.render().el}catch(Te){ft=document.createTextNode(""),d.logError(Te)}if(v)v.appendChild(ft);else{var It=this.parentEl,Wt=It.childNodes;if((0,m.isUndefined)(n))It.appendChild(ft);else{var ye=Wt.length==n;ye&&n--,ye||!Wt.length?It.appendChild(ft):It.insertBefore(ft,Wt[n])}}return t.opt.temporary||d==null||d.trigger("component:mount",t),ft},r.prototype.resetChildren=function(t,e){var n=this,i=(e===void 0?{}:e).previousModels,l=i===void 0?[]:i;this.parentEl.innerHTML="",l.forEach(function(f){return n.removeChildren(f,n.collection)}),t.each(function(f){return n.addToCollection(f)})},r.prototype.render=function(t){var e=this,n=this.el,i=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,i)}),n.innerHTML="",n.appendChild(i),this},r}(C.G7);const xi=es;var br=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ur=function(){return Ur=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ur.apply(this,arguments)},Wr=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return br(r,a),r.prototype.className=function(){return this.getClasses()},r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{},i=n.em,l=e.opt||{},f=this.$el,d=this.el;this.opts=t,this.modelOpt=l,this.config=n,this.em=i,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),f.data("model",e),(0,j.setViewEl)(d,this),e.view=this,this._getFrame()&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Ur(Ur({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},r.prototype.__isDraggable=function(){var t=this.model,e=this.config,n=t.attributes.draggable;return e.draggableComponents&&n},r.prototype._clbObj=function(){var t=this,e=t.em,n=t.model,i=t.el;return{editor:e==null?void 0:e.getEditor(),model:n,el:i}},r.prototype.init=function(t){},r.prototype.removed=function(t){},r.prototype.onRender=function(t){},r.prototype.onActive=function(t){},r.prototype.onDisable=function(){},r.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this.model,n=this.$el,i=e.views,l=this._getFrame()||{};return e.components().forEach(function(f){var d=f.getView(l.model);d==null||d.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),i.splice(i.indexOf(this),1),this.removed(this._clbObj()),n.data({model:"",collection:"",view:""}),this},r.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},r.prototype.initClasses=function(){var t=this.model,e="change:classes",n=t.get("classes");n instanceof Mr&&(this.stopListening(t,e,this.initClasses),this.listenTo(t,e,this.initClasses),this.listenTo(n,"add remove change",this.updateClasses),n.length&&this.importClasses())},r.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,n=e.model,i=e.$el,l=e.childrenView,f=n.get("components"),d=[n,"change:components",this.initComponents];f instanceof Zo&&(i.data("collection",f),l&&l.remove(),this.stopListening.apply(this,d),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,d))},r.prototype.handleChange=function(){var t=this.model,e=(0,m.keys)(t.changed);if(e.length!==1||e[0]!=="status")for(var n in t.emitUpdate(),t.changed)t.emitUpdate(n)},r.prototype.importClasses=function(){var t=this.em.Selectors;t&&this.model.classes.each(function(e){t.add(e.get("name"))})},r.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,n=e.em,i=e.el,l=e.ppfx,f=e.model,d=n==null?void 0:n.Canvas.getConfig().extHl,v=f.get("status"),g="".concat(l,"selected"),_="".concat(g,"-parent"),k="".concat(l,"freezed"),V="".concat(l,"hovered"),q="".concat(l,"no-pointer"),ot=[g,_,k,V,q],ft=d&&!t.noExtHl?"":g;this.$el.removeClass(ot.join(" "));var at=[i.getAttribute("class")||""];switch(v){case"selected":at.push(ft);break;case"selected-parent":at.push(_);break;case"freezed":at.push(k);break;case"freezed-selected":at.push(k,ft);break;case"hovered":!t.avoidHover&&at.push(V)}f.get("locked")&&at.push(q);var It=at.filter(Boolean).join(" ");It&&i.setAttribute("class",It)},r.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),n=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!n||"")},r.prototype.updateStyle=function(t,e,n){n===void 0&&(n={});var i=this.model,l=this.em;if(l&&l.getConfig().avoidInlineStyle&&!n.inline){var f=i.getStyle();!(0,m.isEmpty)(f)&&i.setStyle(f)}else this.setAttribute("style",i.styleToString(n))},r.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},r.prototype.setAttribute=function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},r.prototype.getClasses=function(){return this.model.getClasses().join(" ")},r.prototype.updateAttributes=function(){var t=[],e=this,n=e.model,i=e.$el,l=e.el,f=n.attributes,d=f.textable,v=f.type,g=Ur(Ur({id:n.getId(),"data-gjs-type":v||"default"},this.__isDraggable()&&{draggable:!0}),d&&{contenteditable:"false"});(0,m.each)(l.attributes,function(k){return t.push(k.nodeName)}),t.forEach(function(k){return i.removeAttr(k)}),this.updateStyle(),this.updateHighlight();var _=Ur(Ur({},g),n.getAttributes());(0,m.keys)(_).forEach(function(k){return _[k]===!1&&delete _[k]}),i.attr(_)},r.prototype.updateContent=function(){var t=this.model.get("content"),e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},r.prototype.prevDef=function(t){t.preventDefault()},r.prototype.updateScript=function(){var t=this.model,e=this.em;t.get("script")&&(e==null||e.Canvas.getCanvasView().updateScript(this))},r.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},r.prototype.getOffsetRect=function(){var t={},e=this.el,n=0,i=0,l=function(f){var d=f.offsetParent;d?(n+=d.offsetTop,i+=d.offsetLeft,l(d)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+i,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},r.prototype.isInViewport=function(t){var e,n=(t===void 0?{}:t).rect,i=this.el.ownerDocument,l=i.body,f=(e=i.defaultView)===null||e===void 0?void 0:e.frameElement,d=n||this.getOffsetRect(),v=d.top,g=d.left,_=this._getFrame().getOffsetRect();return v>=_.scrollTop&&g>=_.scrollLeft&&v<=_.scrollBottom&&g<=(f==null?void 0:f.offsetWidth)+l.scrollLeft},r.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var n=this.getOffsetRect();if(!this.isInViewport({rect:n})||t.force){var i=this.el;t.behavior!=="smooth"?(e=i.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,n.top):i.scrollIntoView(Ur({behavior:"smooth",block:"nearest"},t))}},r.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,Ge.dL)(t,this.el),this.render()},r.prototype._setData=function(){var t=this.model,e=t.components();this.$el.data({model:t,collection:e,view:this})},r.prototype._getFrame=function(){var t;return(t=this.em)===null||t===void 0?void 0:t.get("Canvas").config.frameView},r.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new xi({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),i=0,l=n.length;i<l;i++)t.appendChild(n.shift())},r.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},r.prototype.onAttrUpdate=function(){},r.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,j.setViewEl)(this.el,this),this.postRender()),this},r.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},r.getEvents=function(){return(0,m.result)(this.prototype,"events")},r}(C.G7);const Nn=Wr;var $r=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Si=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $r(r,a),r.prototype.tagName=function(){return"div"},r}(Nn);var Js=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qr=function(){return qr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},qr.apply(this,arguments)};const Ys=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Js(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return qr(qr({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return["td","th"].indexOf((0,j.toLowerCase)(t.tagName))>=0},r}(Sn);var Ba=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ua=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ba(r,a),r}(Nn);var ns=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ei=function(){return ei=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ei.apply(this,arguments)},rs="tr";const Wa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ns(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ei(ei({},a.prototype.defaults),{tagName:rs,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)===rs},r}(Sn);var $a=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const qa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $a(r,a),r}(Nn);var Ul=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Do=function(){return Do=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Do.apply(this,arguments)},os="table";const is=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ul(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Do(Do({},a.prototype.defaults),{type:os,tagName:os,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("components");!n.length&&n.add({type:"tbody"})},r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)===os},r}(Sn),ho=Nn.extend({events:{}});var Nr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Oi=function(){return Oi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Oi.apply(this,arguments)},ss="tbody";const as=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Nr(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Oi(Oi({},a.prototype.defaults),{type:ss,tagName:ss,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("components"),i=this.get("columns"),l=this.get("rows");if(!n.length){for(var f=[];l--;){for(var d=[],v=i;v--;)d.push({type:"cell",classes:["cell"]});f.push({type:"row",classes:["row"],components:d})}n.add(f)}},r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)===ss},r}(Sn);var No=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),On=function(){return On=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},On.apply(this,arguments)},Io="thead";const Xs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return No(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return On(On({},a.prototype.defaults),{type:Io,tagName:Io})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)===Io},r}(as);var ni=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ti=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ni(r,a),r}(Nn);var Zs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ga=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zs(r,a),r}(Nn);var ls=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ri=function(){return ri=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ri.apply(this,arguments)},Ei="tfoot";const Qs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ls(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ri(ri({},a.prototype.defaults),{type:Ei,tagName:Ei})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)===Ei},r}(as);var Ka=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const cs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ka(r,a),r}(Nn);var Wl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),x=function(){return x=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},x.apply(this,arguments)},I='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',rt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Wl(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return x(x({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(I,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(I,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("attributes").src;n&&(0,j.buildBase64UrlFromSvg)((0,m.result)(this,"defaults").src)!==n&&this.set("src",n,{silent:!0})},r.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e="image-editor";if(t.Commands.has(e)){for(var n=!1,i=this.get("toolbar"),l=0;l<i.length;l++)if(i[l].command==="image-editor"){n=!0;break}n||(i.push({attributes:{class:"fa fa-pencil"},command:e}),this.set("toolbar",i))}}},r.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},r.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",n=e;return e&&e.substr(0,4)==="<svg"&&(n=(0,j.buildBase64UrlFromSvg)(e)),n},r.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,m.result)(this,"defaults").src;return t===e||t===(0,j.buildBase64UrlFromSvg)(e)},r.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),n=e.attributes;return n&&e.src===n.src&&delete e.src,e},r.prototype.parseUri=function(t){var e={};if((0,j.hasWin)())(e=document.createElement("a")).href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:function(n){n===void 0&&(n="");for(var i={},l=n.substring(1).split("&"),f=0;f<l.length;f++){var d=l[f].split("="),v=decodeURIComponent(d[0]);v&&(i[v]=decodeURIComponent(d[1]||""))}return i}(e.search)}},r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)==="img"},r}(Sn);const ct=rt;var Et=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bt=function(){return bt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},bt.apply(this,arguments)},Ut=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Et(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return bt(bt({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){this.get("src")?this.parseFromSrc():this.updateSrc(),a.prototype.initialize.call(this,t,e),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},r.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},r.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),n=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",n=n?"&t="+n:"";var i=this.get("mapUrl")+"?"+t+e+n;return i+="&output=embed"},r.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")).query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},r.isComponent=function(t){if((0,j.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},r}(ct);const ee=Ut;var Re=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ke=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Re(r,a),r.prototype.tagName=function(){return"img"},r.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},r.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this.model,e=this.em,n=t.get("file");if(n&&e){var i=e.Assets.FileUploader();i==null||i.uploadFile({dataTransfer:{files:[n]}},function(l){var f=l&&l.data&&l.data[0],d=f&&((0,m.isString)(f)?f:f.src);d&&t.set({src:d})}),t.set("file","")}}},r.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},r.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,n=t.classEmpty,i=t.model,l=i.getSrcResult()&&!i.isDefaultSrc()?"remove":"add";e.classList[l](n)},r.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this.em,n=this.model,i=e==null?void 0:e.Assets;i&&n.get("editable")&&i.open({select:function(l,f){n.set({src:l.getSrc()}),f&&i.close()},target:n,types:["image"],accept:"image/*"})},r.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},r.prototype.onLoad=function(){this.em.trigger("change:canvasOffset")},r.prototype.noDrag=function(t){return t.preventDefault(),!1},r.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,e=this.model,n=t.attr("class")||"";return!e.get("src")&&t.attr("class","".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this},r}(Nn);const yn=Ke;var Gr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const us=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Gr(r,a),r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},r.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},r.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},r.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},r}(yn);var Fo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kr=function(){return Kr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Kr.apply(this,arguments)};const Ro=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Fo(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Kr(Kr({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),r}(Sn);var nu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ta=function(){return ta=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ta.apply(this,arguments)},ru="link",qp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return nu(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ta(ta({},a.prototype.defaults),{type:ru,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){var n;if(e===void 0&&(e={}),(0,j.toLowerCase)(t.tagName)==="a"){var i=e.textTags||[];n={type:ru,editable:!1};var l=t.childNodes;l.length||delete n.editable,(0,m.forEach)(l,function(f){var d=f.tagName;(f.nodeType==3&&f.textContent.trim()!==""||d&&i.indexOf((0,j.toLowerCase)(d))>=0)&&delete n.editable})}return n},r}(Ro);const Gp=qp;var ou=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ja=function(){return Ja=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ja.apply(this,arguments)},ps=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(_){_(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},$l=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(_){g=[6,_],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},iu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ou(r,a),r.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,m.bindAll)(this,"disableEditing","onDisable");var e=this.model,n=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=n==null?void 0:n.RichTextEditor},r.prototype.updateContentText=function(t,e,n){n===void 0&&(n={}),!n.fromDisable&&this.disableEditing()},r.prototype.canActivate=function(){var t,e=this,n=e.model,i=e.rteEnabled,l=e.em,f=(l==null?void 0:l.getEditing())===n,d=!0,v=!1;if((i||!n.get("editable")||f||(v=n.isChildOf("text")))&&(d=!1,v&&!n.get("textable"))){for(var g=n.parent();g&&!g.isInstanceOf("text");)g=g.parent();g&&g.get("editable")?t=g:d=!0}return{result:d,delegate:t}},r.prototype.onActive=function(t){var e,n;return ps(this,void 0,void 0,function(){var i,l,f,d,v,g,_,k;return $l(this,function(V){switch(V.label){case 0:if(l=(i=this).rte,f=i.em,d=this.canActivate(),v=d.result,g=d.delegate,!v)return g&&((e=t==null?void 0:t.stopPropagation)===null||e===void 0||e.call(t),f.setSelected(g),g.trigger("active",t)),[2];if((n=t==null?void 0:t.stopPropagation)===null||n===void 0||n.call(t),this.lastContent=this.getContent(),!l)return[3,4];V.label=1;case 1:return V.trys.push([1,3,,4]),_=this,[4,l.enable(this,this.activeRte,{event:t})];case 2:return _.activeRte=V.sent(),[3,4];case 3:return k=V.sent(),f.logError(k),[3,4];case 4:return this.toggleEvents(!0),[2]}})})},r.prototype.onDisable=function(){this.disableEditing()},r.prototype.disableEditing=function(t){return t===void 0&&(t={}),ps(this,void 0,void 0,function(){var e,n,i,l,f,d,v;return $l(this,function(g){switch(g.label){case 0:if(n=(e=this).model,i=e.rte,l=e.activeRte,f=e.em,d=n&&n.get("editable"),!i)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,i.disable(this,l)];case 2:return g.sent(),[3,4];case 3:return v=g.sent(),f.logError(v),[3,4];case 4:d&&this.getContent()!==this.lastContent&&(this.syncContent(t),this.lastContent=""),g.label=5;case 5:return this.toggleEvents(),[2]}})})},r.prototype.getContent=function(){var t=this.activeRte;return typeof(t==null?void 0:t.getContent)=="function"?t.getContent():this.getChildrenContainer().innerHTML},r.prototype.syncContent=function(t){t===void 0&&(t={});var e=this,n=e.model,i=e.rte;if(e.rteEnabled||t.force){var l=this.getContent(),f=n.components(),d=Ja({fromDisable:1},t);n.set("content","",d),i!=null&&i.customRte?(f.length&&f.reset(void 0,t),n.set("content",l,d)):f.resetFromString(l,t)}},r.prototype.insertComponent=function(t,e){var n;e===void 0&&(e={});var i=this.model,l=this.el.ownerDocument.getSelection();if(l!=null&&l.rangeCount){var f=l.getRangeAt(0),d=f.startContainer,v=f.startOffset,g=(0,j.getModel)(d),_=[];if(g&&(!((n=g.is)===null||n===void 0)&&n.call(g,"textnode"))){var k=g.collection;k.forEach(function(ot){if(ot===g){var ft="textnode",at=ot.get("content")||"";_.push({type:ft,content:at.slice(0,v)}),_.push(t),_.push({type:ft,content:at.slice(v)})}else _.push(ot)});var V=_.filter(Boolean),q=V.indexOf(t);return k.reset(V,e),k.at(q)}}return i.append(t,e)},r.prototype.onInput=function(){var t=this.em,e="component",n=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(n,this.model)},r.prototype.disablePropagation=function(t){t.stopPropagation()},r.prototype.toggleEvents=function(t){var e=this,n=e.em,i=e.model,l=e.$el,f={on:j.on,off:j.off},d=t?"on":"off";n.setEditing(!!t&&this),this.rteEnabled=!!t;var v=[this.el.ownerDocument,document];if(f.off(v,"mousedown",this.onDisable),f[d](v,"mousedown",this.onDisable),n[d]("toolbar:run:before",this.onDisable),i&&(i[d]("removed",this.onDisable),i.trigger("rte:".concat(t?"enable":"disable"))),l==null||l.off("mousedown",this.disablePropagation),l&&l[d]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var g=this.el;g;)g.draggable=!t,(g=g.parentNode)&&g.tagName=="BODY"&&(g=0)},r}(Nn);const Ya=iu;var Xa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ql=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Xa(r,a),r.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},r}(Ya);var Za=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ir=function(){return Ir=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ir.apply(this,arguments)},Qa="label";const Gl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Za(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Ir(Ir({},a.prototype.defaults),{type:Qa,tagName:Qa,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)===Qa},r}(Ro);var Kl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const su=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Kl(r,a),r.prototype.tagName=function(){return"span"},r}(ql);var au=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fs=function(){return fs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},fs.apply(this,arguments)},Jl="video",ds="yt",hs="vi",go="ytnc",oi=function(a){return a&&a!=="0"},Yl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return au(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return fs(fs({},a.prototype.defaults),{type:Jl,tagName:Jl,videoId:"",void:!1,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,poster:"",muted:0,autoplay:0,controls:1,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){this.em=e.em,this.get("src")&&this.parseFromSrc(),this.updateTraits(),this.listenTo(this,"change:provider",this.updateTraits),this.listenTo(this,"change:videoId change:provider",this.updateSrc),a.prototype.initialize.call(this,t,e)},r.prototype.updateTraits=function(){var t,e=this.em,n="iframe";switch(this.get("provider")){case ds:case go:t=this.getYoutubeTraits();break;case hs:t=this.getVimeoTraits();break;default:n="video",t=this.getSourceTraits()}this.set({tagName:n},{silent:!0}),this.set({traits:t}),e.get("ready")&&e.trigger("component:toggled")},r.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),n=e.query;switch(t){case ds:case go:case hs:this.set("videoId",e.pathname.split("/").pop()),n.list&&this.set("list",n.list),oi(n.autoplay)&&this.set("autoplay",1),oi(n.loop)&&this.set("loop",1),parseInt(n.controls)===0&&this.set("controls",0),oi(n.color)&&this.set("color",n.color),n.rel==="0"&&this.set("rel",0),n.modestbranding==="1"&&this.set("modestbranding",1)}},r.prototype.updateSrc=function(){var t="";switch(this.get("provider")){case ds:t=this.getYoutubeSrc();break;case go:t=this.getYoutubeNoCookieSrc();break;case hs:t=this.getVimeoSrc()}this.set({src:t})},r.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case ds:case go:case hs:break;default:this.get("loop")&&(t.loop="loop"),this.get("autoplay")&&(t.autoplay="autoplay"),this.get("controls")&&(t.controls="controls")}return t},r.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:ds,name:"Youtube"},{value:go,name:"Youtube (no cookie)"},{value:hs,name:"Vimeo"}]}},r.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},r.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},r.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},r.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},r.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},r.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},r.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),n=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=n?"&list=".concat(n):"",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":""},r.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl"))},r.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):""},r.isComponent=function(t){var e=t.tagName,n=t.src,i=/youtube\.com\/embed/.test(n),l=/youtube-nocookie\.com\/embed/.test(n),f=/player\.vimeo\.com\/video/.test(n),d=i||l||f;if((0,j.toLowerCase)(e)==Jl||(0,j.toLowerCase)(e)=="iframe"&&d){var v={type:"video"};return n&&(v.src=n),d&&(i?v.provider=ds:l?v.provider=go:f&&(v.provider=hs)),v}},r}(ct);const Xl=Yl;var lu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return lu(r,a),r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(){Nn.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],n=e.map(function(i){return"change:".concat(i)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,n,this.updateVideo)},r.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},r.prototype.updateSrc=function(){var t=this.model,e=this.videoEl;if(e){var n=t.get("provider"),i=t.get("src");switch(n){case"yt":i=t.getYoutubeSrc();break;case"ytnc":i=t.getYoutubeNoCookieSrc();break;case"vi":i=t.getVimeoSrc()}e.src=i}},r.prototype.updateVideo=function(){var t=this.model,e=this.videoEl;switch(t.get("provider")){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(e){var n=e;n.loop=t.get("loop"),n.autoplay=t.get("autoplay"),n.controls=t.get("controls"),n.poster=t.get("poster")}}},r.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},r.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},r.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},r.prototype.render=function(){Nn.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},r}(yn);const ki=Zl;var Pi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sr=function(){return sr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},sr.apply(this,arguments)},vo="script";const ii=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Pi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return sr(sr({},a.prototype.defaults),{type:vo,tagName:vo,droppable:!1,draggable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t){if((0,j.toLowerCase)(t.tagName)==vo){var e={type:vo};return t.src&&(e.src=t.src,e.onload=t.onload),e}},r}(Sn);var tl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return tl(r,a),r.prototype.tagName=function(){return"script"},r.prototype.events=function(){return{}},r.prototype.render=function(){var t=this.model,e=this.em,n=t.get("src"),i=e&&e.get("scriptCount"),l=i||0,f="";if(n){var d=t.get("onload"),v="script".concat(l),g="script".concat(l+1),_="".concat(v,"Start"),k="".concat(g,"Start");f=`
        var `.concat(v,` = document.createElement('script');
        `).concat(v,`.onload = function() {
          `).concat(d?"".concat(d,`();
`):"",`
          typeof `).concat(k," == 'function' && ").concat(k,`();
        };
        `).concat(v,".src = '").concat(n,`';
        function `).concat(_,"() { document.body.appendChild(").concat(v,`); };
        `).concat(l?"":"".concat(_,"();"),`
      `),e&&e.set("scriptCount",l+1)}else f=t.__innerHTML();return this.el.innerHTML=f,this.postRender(),this},r}(yn);const cu=Kp;var ea=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),na=function(){return na=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},na.apply(this,arguments)},ra="svg";const oa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ea(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return na(na({},a.prototype.defaults),{type:ra,tagName:ra,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),r.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)===ra},r}(Sn);var Jp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gs=function(){return gs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},gs.apply(this,arguments)};const uu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Jp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return gs(gs({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},r}(oa);var Ql=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ql(r,a),r.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},r}(Nn);const Ai=tc;var el=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ia=function(){return ia=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ia.apply(this,arguments)};const sa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return el(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ia(ia({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){var t=this.parent(),e=this.get("content");return t!=null&&t.is("script")?e:this.__escapeContent(e)},r.prototype.__escapeContent=function(t){return(0,j.escapeNodeContent)(t)},r.isComponent=function(t){if(t.nodeType===3)return{type:"textnode",content:t.textContent}},r}(Sn);var Yp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ec=function(){return ec=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ec.apply(this,arguments)};const Xp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Yp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ec({},a.prototype.defaults)},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){return"<!--".concat(this.get("content"),"-->")},r.isComponent=function(t){if(t.nodeType==8)return{tagName:"NULL",type:"comment",content:t.textContent}},r}(sa);var nc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const nl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return nc(r,a),r.prototype._setAttributes=function(){},r.prototype.renderAttributes=function(){},r.prototype.updateStatus=function(){},r.prototype.updateClasses=function(){},r.prototype.setAttribute=function(){},r.prototype.updateAttributes=function(){},r.prototype.initClasses=function(){},r.prototype.initComponents=function(){},r.prototype.delegateEvents=function(){return this},r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=this.el;return t.opt.temporary||(e.textContent=t.get("content")),this},r}(Nn);var vs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const aa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return vs(r,a),r.prototype._createElement=function(){return document.createComment(this.model.get("content"))},r}(nl);var Zp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ji=function(){return ji=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ji.apply(this,arguments)};const pu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ji(ji({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),r.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},r.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},r.isComponent=function(){return!1},r}(Sn);var la=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ca=function(){return ca=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ca.apply(this,arguments)},Vo="iframe";const ua=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return la(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ca(ca({},a.prototype.defaults),{type:Vo,tagName:Vo,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,j.toLowerCase)(t.tagName)===Vo},r}(Sn);var Mi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const pa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Mi(r,a),r.prototype.tagName=function(){return"div"},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},r.prototype.updateSrc=function(){var t=(0,Ge.sE)(this.el,"iframe")[0];t&&(0,Ge.FW)(t,{src:this.__getSrc()})},r.prototype.render=function(){a.prototype.render.call(this);var t=(0,Ge.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},r.prototype.__getSrc=function(){return this.model.getAttributes().src||""},r}(Nn);var ms=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jr=function(){return Jr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Jr.apply(this,arguments)},fu=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},du=function(a){function r(t){var e=a.call(this,t,"DomComponents",new Zo(void 0,{em:t}))||this;for(var n in e.componentTypes=[{id:"cell",model:Ys,view:Ua},{id:"row",model:Wa,view:qa},{id:"table",model:is,view:ho},{id:"thead",model:Xs,view:Ti},{id:"tbody",model:as,view:Ga},{id:"tfoot",model:Qs,view:cs},{id:"map",model:ee,view:us},{id:"link",model:Gp,view:ql},{id:"label",model:Gl,view:su},{id:"video",model:Xl,view:ki},{id:"image",model:ct,view:yn},{id:"script",model:ii,view:cu},{id:"svg-in",model:uu,view:Ai},{id:"svg",model:oa,view:Ai},{id:"iframe",model:ua,view:pa},{id:"comment",model:Xp,view:aa},{id:"textnode",model:sa,view:nl},{id:"text",model:Ro,view:Ya},{id:"wrapper",model:pu,view:Si},{id:"default",model:Sn,view:Nn}],e.componentsById={},e.Component=Sn,e.Components=Zo,e.ComponentsView=xi,e.storageKey="components",t&&(e.config.components=t.config.components||e.config.components),A)n in e.config||(e.config[n]=A[n]);var i=e.config.pStylePrefix;if(i&&(e.config.stylePrefix=i+e.config.stylePrefix),t){e.config.modal=t.Modal||"",e.config.am=t.Assets||"",t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var l=t.get("selected");t.listenTo(l,"add",function(f,d,v){return e.selectAdd(l.getComponent(f),v)}),t.listenTo(l,"remove",function(f,d,v){return e.selectRemove(l.getComponent(f),v)})}return e}return ms(r,a),r.prototype.load=function(t){var e=this;return this.loadProjectData(t,{onResult:function(n){var i=e.getWrapper();if(i||(e.em.Pages.add({},{select:!0}),i=e.getWrapper()),(0,m.isArray)(n))n.length&&i.components(n);else{var l=n.components,f=l===void 0?[]:l,d=fu(n,["components"]);i.set(d),i.components(f)}}})},r.prototype.store=function(){return{}},r.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},r.prototype.getWrapper=function(){return this.getComponent()},r.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.get("components")},r.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},r.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(n){return n.remove(t)}),this},r.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},r.prototype.addType=function(t,e){var n=this.em,i=e.model,l=i===void 0?{}:i,f=e.view,d=f===void 0?{}:f,v=e.isComponent,g=e.extend,_=e.extendView,k=e.extendFn,V=k===void 0?[]:k,q=e.extendFnView,ot=q===void 0?[]:q,ft=this.getType(t),at=this.getType(g),It=this.getType(_),Wt=at||ft||this.getType("default"),ye=Wt.model,Te=It?It.view:Wt.view,Ve=function(En,Fr,to){return En.reduce(function(eo,uo){var no=Fr[uo],fi=to.prototype[uo];return no&&fi&&(eo[uo]=function(){for(var qi=[],La=0;La<arguments.length;La++)qi[La]=arguments[La];fi.bind(this).apply(void 0,qi),no.bind(this).apply(void 0,qi)}),eo},{})};if(typeof l=="object"){var qe=(0,m.result)(l,"defaults");delete l.defaults,e.model=ye.extend(Jr(Jr({},l),Ve(V,l,ye)),{isComponent:!ft||at||v?v||function(){return 0}:ye.isComponent}),Object.defineProperty(e.model.prototype,"defaults",{value:Jr(Jr({},(0,m.result)(ye.prototype,"defaults")||{}),qe||{})})}typeof d=="object"&&(e.view=Te.extend(Jr(Jr({},d),Ve(ot,d,Te)))),ft?(ft.model=e.model,ft.view=e.view):(e.id=t,this.componentTypes.unshift(e));var an="component:type:".concat(ft?"update":"add");return n==null||n.trigger(an,ft||e),this},r.prototype.getType=function(t){for(var e=this.componentTypes,n=0;n<e.length;n++)if(e[n].id==t)return e[n]},r.prototype.removeType=function(t){var e=this.componentTypes,n=this.getType(t);if(n){var i=e.indexOf(n);return e.splice(i,1),n}},r.prototype.getTypes=function(){return this.componentTypes},r.prototype.selectAdd=function(t,e){var n=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(i){return n.em.trigger(i,t,e)}))},r.prototype.selectRemove=function(t,e){var n=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(i){return n.em.trigger(i,t,e)}))},r.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),n=t.previous("componentHovered"),i="hovered";n&&n.get("status")==i&&n.set({status:"",state:""}),e&&(0,m.isEmpty)(e.get("status"))&&e.set("status",i)},r.prototype.getShallowWrapper=function(){var t=this.shallow,e=this.em;if(!t&&e){var n=e.shallow;if(!n)return;var i=n.Components;if(i.componentTypes=this.componentTypes,t=i.getWrapper()){var l=[ti,Br].join(" ");t.on(l,(0,m.debounce)(function(){return t==null?void 0:t.components("")},100))}this.shallow=t}return t},r.prototype.canMove=function(t,e,n){var i=n||n===0?n:null,l={result:!1,reason:0,target:t,source:null};if(!e||!t)return l;var f=e.toHTML?e:null;if(!f){var d=this.getShallowWrapper();f=(d==null?void 0:d.append(e)[0])||null}if(l.source=f,!f)return l;var v=f.get("draggable");if((0,m.isFunction)(v))v=!!v(f,t,i);else{var g=t.getEl();v=(0,m.isArray)(v)?v.join(","):v,v=(0,m.isString)(v)?g==null?void 0:g.matches(v):v}if(!v)return Jr(Jr({},l),{reason:1});var _=t.get("droppable");(0,m.isFunction)(_)?_=!!_(f,t,i):_===!1&&t.isInstanceOf("text")&&f.get("textable")?_=!0:(g=f.getEl(),_=(0,m.isArray)(_)?_.join(","):_,_=(0,m.isString)(_)?g==null?void 0:g.matches(_):_);var k=[t].concat(t.parents()).indexOf(f)>-1;return Jr(Jr({},l),!_||k?{reason:2}:{result:!0})},r.prototype.allById=function(){return this.componentsById},r.prototype.getById=function(t){return this.componentsById[t]||null},r.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(n){return e[n]&&e[n].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(n){return{}})},r}(zt);const Qp=du,Li={stylePrefix:"css-",rules:[]};var Di=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tf=Number.MAX_VALUE,ef=function(a){function r(){var t=a.call(this)||this;return(0,m.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return Di(r,a),r.prototype.buildFromModel=function(t,e){var n=this;e===void 0&&(e={});var i="",l=this.em,f=l&&l.getConfig().avoidInlineStyle,d=t.styleToString(),v=t.classes;return this.ids.push("#".concat(t.getId())),v.forEach(function(g){return n.compCls.push(g.getFullName())}),!f&&d&&(i="#".concat(t.getId(),"{").concat(d,"}")),t.components().forEach(function(g){return i+=n.buildFromModel(g,e)}),i},r.prototype.build=function(t,e){var n=this;e===void 0&&(e={});var i=e.json,l=e.em,f=e.cssc||(l==null?void 0:l.Css);this.em=l,this.compCls=[],this.ids=[],this.model=t;var d=[],v=t?this.buildFromModel(t,e):"",g=(0,m.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(f){var _=e.rules||f.getAll(),k={},V=[];e.onlyMatched&&t&&(0,j.hasWin)()&&(_=this.matchedRules(t,_)),_.forEach(function(q){var ot=q.getAtRule();if(ot){var ft=k[ot];ft?ft.push(q):k[ot]=[q]}else{var at=n.buildFromRule(q,V,e);i?d.push(at):v+=at}}),this.sortMediaObject(k).forEach(function(q){var ot="",ft=q.key;q.value.forEach(function(at){var It=n.buildFromRule(at,V,e);at.get("singleAtRule")?v+="".concat(ft,"{").concat(It,"}"):ot+=It,i&&d.push(It)}),ot&&(v+="".concat(ft,"{").concat(ot,"}"))}),l&&g&&_.remove&&_.remove(V)}return i?d.filter(function(q){return q}):v},r.prototype.buildFromRule=function(t,e,n){var i,l=this;n===void 0&&(n={});var f,d="",v=this.model,g=t.selectorsToString({skipAdd:1}),_=t.get("selectorsAdd"),k=t.get("singleAtRule");if((i=t.get("selectors"))===null||i===void 0||i.forEach(function(q){var ot=q.getFullName();(l.compCls.indexOf(ot)>=0||l.ids.indexOf(ot)>=0||n.keepUnusedStyles)&&(f=1)}),g&&f||_||k||!v){var V=t.getDeclaration({body:1});V&&(n.json?d=t:d+=V)}else e.push(t);return d},r.prototype.matchedRules=function(t,e){var n=this,i=t.getEl(),l=[];return e.forEach(function(f){try{f.selectorsToString().split(",").some(function(d){return i==null?void 0:i.matches(n.__cleanSelector(d))})&&l.push(f)}catch{}}),t.components().forEach(function(f){l=l.concat(n.matchedRules(f,e))}),l=l.filter(function(f,d){return l.indexOf(f)===d})},r.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):tf},r.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var n=[];return(0,m.each)(t,function(i,l){return n.push({key:l,value:i})}),n.sort(function(i,l){var f=[i.key,l.key].every(function(g){return g.indexOf("min-width")!==-1}),d=f?i.key:l.key,v=f?l.key:i.key;return e.getQueryLength(d)-e.getQueryLength(v)})},r.prototype.sortRules=function(t,e){var n=function(d){return d.get("mediaText")||""},i=[n(t),n(e)].every(function(d){return d.indexOf("min-width")!==-1}),l=n(i?t:e),f=n(i?e:t);return this.getQueryLength(l)-this.getQueryLength(f)},r.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},r}(C.Hn);const nf=ef;var rf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fa=function(){return fa=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},fa.apply(this,arguments)},of=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},wr=((0,j.hasWin)()?window:{}).CSS,tr=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this;return n.config=t||{},n.opt=e,n.em=e.em,n.ensureSelectors(null,null,{}),n.on("change",n.__onChange),n}return rf(r,a),r.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},r.prototype.__onChange=function(t,e){var n=this.em,i=this.changedAttributes();i&&!(0,j.isEmptyObj)(i)&&(n==null||n.changesUp(e))},r.prototype.clone=function(){var t=fa({},this.opt),e=fa({},this.attributes);return e.selectors=this.get("selectors").map(function(n){return n.clone()}),new this.constructor(e,t)},r.prototype.ensureSelectors=function(t,e,n){var i=this.em,l=i==null?void 0:i.get("SelectorManager"),f=[this,"change:selectors",this.ensureSelectors],d=this.getSelectors();if(this.stopListening.apply(this,f),d.models&&(d=of([],d.models,!0)),d=(0,m.isString)(d)?[d]:d,Array.isArray(d)){var v=d.filter(function(g){return g}).map(function(g){return l?l.add(g):g});d=new Mr(v)}this.set("selectors",d,n),this.listenTo.apply(this,f)},r.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),n=t?"@".concat(t):e?"@media":"";return n+(e&&n?" ".concat(e):"")},r.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],n=this.get("state"),i=this.get("selectorsAdd"),l={escape:function(v){return wr&&wr.escape?wr.escape(v):v}},f=this.get("selectors").getFullString(0,l),d=n&&!t.skipState?":".concat(n):"";return f&&e.push("".concat(f).concat(d)),i&&!t.skipAdd&&e.push(i),e.join(", ")},r.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",n=this.attributes.important,i=this.selectorsToString(t),l=this.styleToString(fa({important:n},t)),f=this.get("singleAtRule");return(i||f)&&(l||t.allowEmpty)&&(e=f?l:"".concat(i,"{").concat(l,"}")),e},r.prototype.getDevice=function(){var t=this.em,e=this.attributes,n=e.atRuleType,i=e.mediaText,l=(t==null?void 0:t.get("DeviceManager").getDevices())||[],f=l.filter(function(d){return d.getWidthMedia()===""})[0];return n==="media"&&i?l.filter(function(d){return d.getWidthMedia()===((v=/(-?\d*\.?\d+)\w{0,}/.exec(i))?v[0]:"");var v})[0]||null:f||null},r.prototype.getState=function(){var t=this.em,e=this.get("state");return((t==null?void 0:t.get("SelectorManager").getStates())||[]).filter(function(n){return n.getName()===e})[0]||null},r.prototype.getComponent=function(){var t,e=this.getSelectors(),n=e.length==1&&e.at(0),i=n&&n.isId()&&n.get("name");return i&&((t=this.em)===null||t===void 0?void 0:t.get("DomComponents").getById(i))||null},r.prototype.toCSS=function(t){t===void 0&&(t={});var e="",n=this.getAtRule(),i=this.getDeclaration(t);return(i||t.allowEmpty)&&(e=i),n&&e&&(e="".concat(n,"{").concat(e,"}")),e},r.prototype.toJSON=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=C.Hn.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,m.forEach)(l,function(f,d){i[d]===f&&delete i[d]}),delete i.style.__p,(0,m.isEmpty)(i.selectors)&&delete i.selectors,(0,m.isEmpty)(i.style)&&delete i.style}return i},r.prototype.compare=function(t,e,n,i){var l;i===void 0&&(i={});var f=e||"",d=n||"",v=i.selectorsAdd||"",g=i.atRuleType||"";d&&!g&&(g="media");var _=((0,m.isArray)(t)||t.models?t.models||t:[t]).map(function(ot){return ot.getFullName()}),k=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(ot){return ot.getFullName()}),V=_.slice().sort(),q=k.slice().sort();return!(_.length!==k.length||!V.every(function(ot,ft){return ot===q[ft]}))&&this.get("state")===f&&this.get("mediaText")===d&&this.get("selectorsAdd")===v&&this.get("atRuleType")===g},r}(Ar);const fr=tr;var er=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ys=function(a){function r(t,e){var n=a.call(this,t)||this;return n.editor=e==null?void 0:e.em,setTimeout(function(){n.on("remove",n.onRemove),n.on("add",n.onAdd)}),n}return er(r,a),r.prototype.toJSON=function(t){return C.FE.prototype.toJSON.call(this,t).filter(function(e){return e.style&&!e.shallow})},r.prototype.onAdd=function(t,e,n){t.ensureSelectors(t,e,n)},r.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},r.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,C.FE.prototype.add.apply(this,[t,e])},r}(C.FE);const sf=ys;ys.prototype.model=fr;var rl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ni=function(){return Ni=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ni.apply(this,arguments)},af=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},lf=function(a){function r(t){var e=a.call(this,t,"CssComposer",null,{},Li)||this;e.Selectors=Mr,e.storageKey="styles";var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),n.rules=e.em.config.style||n.rules||"",e.rules=new sf([],n),e}return rl(r,a),r.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},r.prototype.postLoad=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");e&&e.add(this.getAll())},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},r.prototype.add=function(t,e,n,i,l){i===void 0&&(i={}),l===void 0&&(l={});var f=e||"",d=n||"",v=Ni({},i),g=this.get(t,f,d,v);return g&&g.config&&!g.config.singleAtRule||(v.state=f,v.mediaText=d,v.selectors=[],d&&!v.atRuleType&&(v.atRuleType="media"),(g=new fr(v,this.config)).get("selectors").add(t,l),this.rules.add(g,l)),g},r.prototype.get=function(t,e,n,i){var l=t;if((0,m.isString)(t)){var f=this.em.Selectors,d=t.split(",")[0].trim(),v=this.em.Parser.parserCss.checkNode({selectors:d})[0];l=f.get(v.selectors)}return this.rules.find(function(g){return g.compare(l,e,n,i)})||null},r.prototype.getAll=function(){return this.rules},r.prototype.addCollection=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=this.em,l=[];(0,m.isString)(t)&&(t=i.Parser.parseCss(t));for(var f=t instanceof Array?t:[t],d=0,v=f.length;d<v;d++){var g=f[d]||{};if(g.selectors){var _=i==null?void 0:i.Selectors;_||console.warn("Selector Manager not found");for(var k=g.selectors,V=k instanceof Array?k:[k],q=[],ot=0,ft=V.length;ot<ft;ot++){var at=_.add(V[ot]);q.push(at)}var It=this.get(q,g.state,g.mediaText,g),Wt=this.add(q,g.state,g.mediaText,g,e),ye=!It||!e.avoidUpdateStyle,Te=g.style||{};if((0,j.isObject)(n)&&Wt.set(n,e),ye){var Ve=e.extend?Ni(Ni({},Wt.get("style")),Te):Te;Wt.set("style",Ve,e)}l.push(Wt)}}return l},r.prototype.addRules=function(t){return this.addCollection(t)},r.prototype.setRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.atRuleType,l=n.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],d=f.state,v=f.selectorsAdd,g=this.em.Selectors.add(f.selectors),_=this.add(g,d,l,{selectorsAdd:v,atRule:i});return _.setStyle(e,n),_},r.prototype.getRule=function(t,e){e===void 0&&(e={});var n=this.em,i=n.Selectors,l=n.Parser.parserCss.checkNode({selectors:t})[0],f=i.get(l.selectors),d=l.state,v=l.selectorsAdd,g=e.atRuleType,_=e.atRuleParams;return f?this.get(f,d,_,{selectorsAdd:v,atRuleType:g}):void 0},r.prototype.getRules=function(t){var e=this.getAll();if(!t)return af([],e.models,!0);var n={sort:!0},i=(0,m.isString)(t)?t.split(",").map(function(l){return l.trim()}):t;return e.filter(function(l){return i.indexOf(l.getSelectors().getFullString(null,n))>=0})},r.prototype.setIdRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.addOpts,l=i===void 0?{}:i,f=n.mediaText,d=n.state||"",v=(0,m.isUndefined)(f)?this.em.getCurrentMedia():f,g=this.em.Selectors.add({name:t,type:or.TYPE_ID},l),_=this.add(g,d,v,{},l);return _.setStyle(e,Ni(Ni({},n),l)),_},r.prototype.getIdRule=function(t,e){e===void 0&&(e={});var n=e.mediaText,i=e.state||"",l=(0,m.isUndefined)(n)?this.em.getCurrentMedia():n,f=this.em.Selectors.get(t,or.TYPE_ID);return f&&this.get(f,i,l)},r.prototype.setClassRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.state||"",l=n.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors.add({name:t,type:or.TYPE_CLASS}),d=this.add(f,i,l);return d.setStyle(e,n),d},r.prototype.getClassRule=function(t,e){e===void 0&&(e={});var n=e.state||"",i=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,or.TYPE_CLASS);return l&&this.get(l,n,i)},r.prototype.remove=function(t,e){var n=(0,m.isString)(t)?this.getRules(t):t,i=this.getAll().remove(n,e);return(0,m.isArray)(i)?i:[i]},r.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},r.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var n=e.state,i=e.mediaText;e.current&&(n=this.em.get("state")||"",i=this.em.getCurrentMedia());var l=t.getId();return this.getAll().filter(function(f){return!(!(0,m.isUndefined)(n)&&f.get("state")!==n)&&!(!(0,m.isUndefined)(i)&&f.get("mediaText")!==i)&&f.getSelectorsString()==="#".concat(l)})},r.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new qo({collection:this.rules,config:this.config}),this.rulesView.render().el},r.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},r}(zt);const rc=lf,hu={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};var oc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const gu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return oc(r,a),r.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},r.prototype.getId=function(){return this.id},r.prototype.getLabel=function(){return this.get("label")},r.prototype.getMedia=function(){return this.get("media")},r.prototype.getContent=function(){return this.get("content")},r.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,m.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},r}(C.Hn);var ic=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ol=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ic(r,a),r}(C.FE);const da=ol;ol.prototype.model=gu;var vu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const il=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return vu(r,a),r.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},r}(C.Hn);var mu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return mu(r,a),r}(C.FE);const yu=bs;bs.prototype.model=il;var sl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ho=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,i=n.model;return n.em=e.em,n.config=e,n.endDrag=n.endDrag.bind(n),n.ppfx=e.pStylePrefix||"",n.listenTo(i,"destroy remove",n.remove),n.listenTo(i,"change",n.render),n}return sl(r,a),r.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.handleClick=function(t){var e=this,n=e.config,i=e.model,l=e.em,f=i.get("onClick")||n.appendOnClick;if(l.trigger("block:click",i,t),f){if((0,m.isFunction)(f))return f(i,l==null?void 0:l.getEditor(),{event:t});var d,v,g=n.getSorter(),_=i.get("content"),k=l.getSelected();if(g.setDropContent(_),k)if(g.validTarget(k.getEl(),_).valid)d=k;else{var V=k.parent();V&&g.validTarget(V.getEl(),_).valid&&(d=V,v=V.components().indexOf(k)+1)}if(!d){var q=l.getWrapper();g.validTarget(q.getEl(),_).valid&&(d=q)}var ot=d&&d.append(_,{at:v})[0];ot&&l.setSelected(ot,{scroll:1})}},r.prototype.startDrag=function(t){var e=this,n=e.config,i=e.em,l=e.model,f=l.get("disable");if(t.button===0&&n.getSorter&&!this.el.draggable&&!f){i.refreshCanvas();var d=n.getSorter();d.__currentBlock=l,d.setDragHelper(this.el,t),d.setDropContent(this.model.get("content")),d.startSort(this.el),(0,j.on)(document,"mouseup",this.endDrag)}},r.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},r.prototype.handleDrag=function(t){this.__getModule().__drag(t)},r.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},r.prototype.endDrag=function(){(0,j.off)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},r.prototype.render=function(){var t,e=this,n=e.em,i=e.el,l=e.$el,f=e.ppfx,d=e.model,v=d.get("disable"),g=d.get("attributes")||{},_=g.class||"",k="".concat(f,"block"),V=n&&n.t("blockManager.labels.".concat(d.id))||d.get("label"),q=d.get("render"),ot=d.get("media"),ft=v?"".concat(k,"--disable"):"".concat(f,"four-color-h");l.attr(g),i.className="".concat(_," ").concat(k," ").concat(f,"one-bg ").concat(ft).trim(),i.innerHTML=`
      `.concat(ot?'<div class="'.concat(k,'__media">').concat(ot,"</div>"):"",`
      <div class="`).concat(k,'-label">').concat(V,`</div>
    `),i.title=g.title||((t=i.textContent)===null||t===void 0?void 0:t.trim()),i.setAttribute("draggable","".concat(!(!(0,j.hasDnd)(n)||v)));var at=q&&q({el:i,model:d,className:k,prefix:f});return at&&(i.innerHTML=at),this},r}(C.G7);const bu=Ho;var cf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wu=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Yr=function(a){function r(t,e){var n=a.call(this,t)||this;n.config=e;var i=e.pStylePrefix||"";return n.em=e.em,n.pfx=i,n.caretR="fa fa-caret-right",n.caretD="fa fa-caret-down",n.iconClass="".concat(i,"caret-icon"),n.activeClass="".concat(i,"open"),n.className="".concat(i,"block-category"),n.listenTo(n.model,"change:open",n.updateVisibility),n.model.view=n,n}return cf(r,a),r.prototype.events=function(){return{"click [data-title]":"toggle"}},r.prototype.template=function(t){var e=t.pfx,n=t.label;return U(ao||(ao=wu([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `])),e,e,n,e)},r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},r.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},r.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},r.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},r.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.pfx,"blocks-c"))),this.blocksEl},r.prototype.append=function(t){this.getBlocksEl().appendChild(t)},r.prototype.render=function(){var t=this,e=t.em,n=t.el,i=t.$el,l=t.model,f=t.pfx,d=e.t("blockManager.categories.".concat(l.id))||l.get("label");return n.innerHTML=this.template({pfx:f,label:d}),i.addClass(this.className),i.css({order:l.get("order")}),this.updateVisibility(),this},r}(C.G7);const ln=Yr;var ao,si=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mo=function(){return mo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},mo.apply(this,arguments)},_u=function(a){function r(t,e){var n=a.call(this,t)||this;(0,m.bindAll)(n,"getSorter","onDrag","onDrop","onMove"),n.config=e||{},n.categories=t.categories||"",n.renderedCategories={};var i=n.config.pStylePrefix||"";n.ppfx=i,n.noCatClass="".concat(i,"blocks-no-cat"),n.blockContClass="".concat(i,"blocks-c"),n.catsClass="".concat(i,"block-categories");var l=n.collection;return n.listenTo(l,"add",n.addTo),n.listenTo(l,"reset",n.render),n.em=n.config.em,n.em&&(n.config.getSorter=n.getSorter),n}return si(r,a),r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=mo(mo({},this.config),t)},r.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,n=t.Canvas;this.sorter=new e.Sorter({container:n.getBody(),placer:n.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:n.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},r.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},r.prototype.onMove=function(t){this.__getModule().__drag(t),this.em.trigger("block:drag:move",t)},r.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},r.prototype.addTo=function(t){this.add(t)},r.prototype.add=function(t,e){var n=this.config,i=new bu({model:t,attributes:t.get("attributes")},n).render().el,l=t.get("category");if(l&&this.categories&&!n.ignoreCategories){(0,m.isString)(l)?l={id:l,label:l}:(0,m.isObject)(l)&&!l.id&&(l.id=l.label);var f=this.categories.add(l),d=f.get("id"),v=this.getCategoriesEl(),g=this.renderedCategories[d];return t.set("category",f,{silent:!0}),!g&&v&&(g=new ln({model:f},n).render(),this.renderedCategories[d]=g,v.appendChild(g.el)),void(g&&g.append(i))}e?e.appendChild(i):this.append(i)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},r.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},r.prototype.render=function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories={},this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,n)}),this.append(n);var i="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(i),this.rendered=!0,this},r}(C.G7);const al=_u;var Cu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ai=function(){return ai=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ai.apply(this,arguments)},ll="block",zo="".concat(ll,":"),xu="".concat(zo,"add"),sc="".concat(zo,"update"),Bo="".concat(zo,"remove"),Su="".concat(Bo,":before"),cl="".concat(zo,"drag"),uf={all:ll,update:sc,add:xu,remove:Bo,removeBefore:Su,drag:cl,dragStart:"".concat(cl,":start"),dragEnd:"".concat(cl,":stop"),custom:"".concat(zo,"custom")},ul=function(a){function r(t){var e,n=this;return(n=a.call(this,t,"BlockManager",new da(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[]),uf,hu)||this).Block=gu,n.Blocks=da,n.Category=il,n.Categories=yu,n.storageKey="",n.blocks=n.all,n.blocksVisible=new da(n.blocks.models),n.categories=new yu,n.blocks.on("add",function(i){return n.blocksVisible.add(i)}),n.blocks.on("remove",function(i){return n.blocksVisible.remove(i)}),n.blocks.on("reset",function(i){return n.blocksVisible.reset(i.models)}),n}return Cu(r,a),r.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(n,i){return t.startDrag(n,i)},drag:function(n){return t.__drag(n)},dragStop:function(n){return t.endDrag(n)}}},r.prototype.__startDrag=function(t,e){var n=this,i=n.em,l=n.events,f=n.blocks,d=t.getContent?t.getContent():t;this._dragBlock=t,i.set({dragResult:null,dragContent:d}),[i,f].map(function(v){return v.trigger(l.dragStart,t,e)})},r.prototype.__drag=function(t){var e=this,n=e.em,i=e.events,l=e.blocks,f=this._dragBlock;[n,l].map(function(d){return d.trigger(i.drag,f,t)})},r.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,n=e.em,i=e.events,l=e.blocks,f=this._dragBlock,d=t.component||n.get("dragResult");if(delete this._dragBlock,d&&f){var v="activeOnRender",g=d.get&&d.get(v),_=f.get("activate")||g,k=f.get("select"),V=(0,m.isArray)(d)?d[0]:d;(k||_&&k!==!1)&&n.setSelected(V),_&&(V.trigger("active"),g&&V.unset(v)),f.get("resetId")&&V.onAll(function(q){return q.resetId()})}n.set({dragResult:null,dragContent:null}),f&&[n,l].map(function(q){return q.trigger(i.dragEnd,d,f)})},r.prototype.__getFrameViews=function(){return this.em.get("Canvas").getFrames().map(function(t){return t.view})},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=ai(ai({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(){return this._bhv||{}},r.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(n){return n.droppable.startCustom()})},r.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){return e.droppable.endCustom(t)}),this.__endDrag()},r.prototype.postRender=function(){var t=this,e=t.categories,n=t.config,i=t.em,l=this.blocksVisible;this.blocksView=new al({collection:l,categories:e},ai(ai({},n),{em:i})),this.__appendTo(l.models),this.__trgCustom()},r.prototype.add=function(t,e,n){n===void 0&&(n={});var i=e||{};return i.id=t,this.blocks.add(i,n)},r.prototype.get=function(t){return this.blocks.get(t)},r.prototype.getAll=function(){return this.blocks},r.prototype.getAllVisible=function(){return this.blocksVisible},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getCategories=function(){return this.categories},r.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},r.prototype.render=function(t,e){e===void 0&&(e={});var n=this,i=n.categories,l=n.config,f=n.em,d=t||this.getAll().models;if(e.external){var v=new da(d);return new al({collection:v,categories:i},ai(ai({em:f},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(d),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},r.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(n){return n.stopListening()}),e.map(function(n){return n.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},r}(zt);const ac=ul,Ou={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};var pf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return pf(r,a),r.prototype.defaults=function(){return{name:"",label:""}},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(){return this.get("label")||this.getName()},r}(C.Hn);const cc=lc;lc.prototype.idAttribute="name";var ff=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pl=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},uc="contentEditable",df=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.config||{};return e.config=n,e.module=t.module,e.coll=t.coll||null,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return ff(r,a),r.prototype.template=function(){var t=this,e=t.pfx,n=t.model,i=t.config,l=n.get("label")||"";return U(pc||(pc=pl([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,i.iconTagRemove)},r.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},r.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},r.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[uc]="true",e.focus(),t==null||t.setEditing(!0)},r.prototype.endEditTag=function(){var t=this.model,e=this.getInputEl(),n=e.textContent||"",i=this.em,l=i==null?void 0:i.Selectors;if(e[uc]="false",i==null||i.setEditing(!1),l){var f=l.escapeName(n);l.get(f)?e.innerText=t.get("label"):t.set({name:f,label:n})}},r.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.get("active"))},r.prototype.removeTag=function(){this.module.removeSelected(this.model)},r.prototype.updateStatus=function(){var t=this,e=t.model,n=t.$el,i=t.config,l=i.iconTagOn,f=i.iconTagOff,d=n.find("[data-tag-status]");e.get("active")?(d.html(l),n.removeClass("opac50")):(d.html(f),n.addClass("opac50"))},r.prototype.render=function(){var t=this.pfx,e=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(t,"tag ").concat(e,"three-bg")),this.updateStatus(),this},r}(C.G7);const hf=df;var pc,ws=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ii=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},fl=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var n=e.config.em,i=e.collection;e.target=n;var l=n.Selectors;return e.module=l,e.em=n,e.componentChanged=(0,m.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,m.debounce)(e.checkSync.bind(e),0),e.listenTo(n,"component:toggled component:update:classes",e.componentChanged),e.listenTo(n,"styleManager:update",e.componentChanged),e.listenTo(n,"component:update:classes change:state",e.__handleStateChange),e.listenTo(n,"styleable:change change:device",e.checkSync),e.listenTo(i,"add",e.addNew),e.listenTo(i,"reset",e.renderClasses),e.listenTo(i,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,m.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return ws(r,a),r.prototype.template=function(t){var e=t.labelInfo,n=t.labelHead,i=t.iconSync,l=t.iconAdd,f=t.pfx,d=t.ppfx;return U(dl||(dl=Ii([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),f,f,f,f,n,f,f,f,d,d,d,f,d,d,f,d,f,f,f,f,f,l,f,f,i,f,f,e,f)},r.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},r.prototype.syncStyle=function(){var t,e=this.em,n=this.getTarget(),i=e.Css,l=this.getCommonSelectors({opts:{noDisabled:1}}),f=e.get("state"),d=e.getCurrentMedia(),v=[],g=i.get(l,f,d)||i.add(l,f,d);this.getTargets().forEach(function(_){var k=i.getIdRule(_.getId(),{state:f,mediaText:d});t=k.getStyle(),k.setStyle({}),v.push(k)}),t&&g.addStyle(t),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:n,selectors:l,mediaText:d,rule:g,ruleComponents:v,state:f})},r.prototype.tagRemoved=function(t){this.updateStateVis()},r.prototype.addNew=function(t){this.addToClasses(t)},r.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},r.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},r.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},r.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},r.prototype.componentChanged=function(t){var e=(t===void 0?{}:t).targets;this.updateSelection(e)},r.prototype.updateSelection=function(t){var e=t||this.getTargets(),n=[];return(e=(0,m.isArray)(e)?e:[e])&&e.length&&(n=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(e),this.module.__trgCustom(),n},r.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,n=e.targets,i=e.opts,l=i===void 0?{}:i,f=n||this.getTargets();return this.module.__getCommonSelectors(f,l)},r.prototype._commonSelectors=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.module).__common.apply(t,e)},r.prototype.checkSync=function(){var t,e=this,n=e.$btnSyncEl,i=e.config,l=e.collection,f=this.getTarget();if(f&&i.componentFirst&&l.length){var d=f.getStyle();t=!(0,m.isEmpty)(d)}n&&n[t?"show":"hide"]()},r.prototype.getTarget=function(){return this.target.getSelected()},r.prototype.getTargets=function(){return this.target.getSelectedAll()},r.prototype.updateStateVis=function(t){var e=this.em,n=e&&e.getConfig().avoidInlineStyle,i=this.collection.length||n?"":"none";this.getStatesC().css("display",i),this.updateSelector(t)},r.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},r.prototype.updateSelector=function(t){var e=this,n=this.el.querySelector("[data-selected]"),i=[],l=t||this.getTargets();(l=(0,m.isArray)(l)?l:[l]).forEach(function(f){return i.push(e.__getName(f))}),n&&(n.innerHTML=i.join(", ")),this.checkStates()},r.prototype.__getName=function(t){var e,n=this,i=n.pfx,l=n.config,f=n.em,d=l.selectedName,v=l.componentFirst;if((0,m.isString)(t))e=U(fc||(fc=Ii(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),i,t);else{var g=t==null?void 0:t.getSelectors();if(!g)return"";var _=g.getStyleable(),k=f.get("state"),V=t.getId?U(Eu||(Eu=Ii(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),i,t.getName(),i,t.getId()):"";e=(e=this.collection.getFullString(_))?U(dc||(dc=Ii(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),i,e):t.get("selectorsAdd")||V,e=v&&V?V:e,e+=k?U(ar||(ar=Ii(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),i,k):"",e=d?d({result:e,state:k,target:t}):e}return e&&'<span class="'.concat(i,'sel">').concat(e,"</span>")},r.prototype.stateChanged=function(t){var e=this.em,n=t.target.value;e.set("state",n)},r.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},r.prototype.addToClasses=function(t,e){var n=e,i=this.getClasses(),l=new hf({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(l):i.append(l),l},r.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each(function(i){return t.addToClasses(i,e)}),n.append(e)},r.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},r.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},r.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},r.prototype.renderStates=function(){var t=this.module,e=this.em,n=e.t("selectorManager.emptyState"),i=t.getStates().map(function(f){var d=e.t("selectorManager.states.".concat(f.id))||f.getLabel()||f.id;return'<option value="'.concat(f.id,'">').concat(d,"</option>")}).join(""),l=this.getStates();l&&l.html('<option value="">'.concat(n,"</option>").concat(i)),this.checkStates()},r.prototype.render=function(){var t=this,e=t.em,n=t.pfx,i=t.ppfx,l=t.config,f=t.$el,d=t.el,v=l.render,g={iconSync:l.iconSync,iconAdd:l.iconAdd,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:i,pfx:n,el:d};f.html(this.template(g));var _=v&&v(g);return _&&_!==d&&f.empty().append(_),this.$input=f.find("[data-input]"),this.$addBtn=f.find("[data-add]"),this.$classes=f.find("#"+n+"tags-c"),this.$btnSyncEl=f.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),f.attr("class","".concat(this.className," ").concat(i,"one-bg ").concat(i,"two-color")),this},r}(C.G7);const Tu=fl;var dl,fc,Eu,dc,ar,hl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_s=function(){return _s=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_s.apply(this,arguments)},gl=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},hc=function(a){return(0,m.isString)(a)&&a[0]=="#"},Fi=function(a){return(0,m.isString)(a)&&a[0]=="."},ha="selector",Cs="".concat(ha,":"),ku="".concat(Cs,"add"),Pu="".concat(Cs,"update"),Ri="".concat(Cs,"remove"),Au="".concat(Ri,":before"),vl="".concat(Cs,"custom"),gc="".concat(Cs,"state"),ga={all:ha,update:Pu,add:ku,remove:Ri,removeBefore:Au,state:gc,custom:vl},gf=function(a){function r(t){var e=a.call(this,t,"SelectorManager",new Mr([]),ga,Ou,{skipListen:!0})||this;e.Selector=or,e.Selectors=Mr,e.storageKey="",(0,m.bindAll)(e,"__updateSelectedByComponents");var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),e.all=new Mr(n.selectors),e.selected=new Mr([],{em:t,config:n}),e.states=new C.FE(n.states.map(function(l){return new cc(l)}),{model:cc}),e.model=new C.Hn({cFirst:n.componentFirst,_undo:!0}),e.__update=(0,m.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(l,f){return t.trigger(gc,f)}),e.model.on("change:cFirst",function(l,f){return t.trigger("selector:type",f)}),t.on("component:toggled component:update:classes",e.__updateSelectedByComponents),e.model.listenTo(t,"component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target",function(){return e.__update()}),e}return hl(r,a),r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},r.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?gl([],this.all.models,!0):this.all:[]},r.prototype.__customData=function(t){t===void 0&&(t={});var e=t.container;return{states:this.getStates(),selected:this.getSelected(),container:e}},r.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},r.prototype.select=function(t,e){e===void 0&&(e={});var n=Array.isArray(t)?t:[t],i=this.em.Styles.select(n,e);this.selected.reset(this.__getCommonSelectors(i));var l=this.selectorTags,f=i.filter(function(d){return d}).map(function(d){return(0,j.isComponent)(d)||(0,j.isRule)(d)&&!d.get("selectorsAdd")?d:d.getSelectorsString()});return l&&l.componentChanged({targets:f}),this},r.prototype.addSelector=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=_s({},e);(0,m.isObject)(t)?i=t:i.name=t,hc(i.name)?(i.name=i.name.substr(1),i.type=or.TYPE_ID):Fi(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var l=i.name,f=this.getConfig(),d=this.all,v=this.em,g=l?this.get(l,i.type):d.where(i)[0];if(!g){var _=i instanceof or?i:new or(i,_s(_s({},n),{config:f,em:v}));return d.add(_,n)}return g},r.prototype.getSelector=function(t,e){return e===void 0&&(e=or.TYPE_CLASS),hc(t)?(t=t.substr(1),e=or.TYPE_ID):Fi(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var i=(0,m.isString)(t)?{}:e;return(0,m.isArray)(t)?t.map(function(l){return n.addSelector(l,e,i)}):this.addSelector(t,e,i)},r.prototype.addClass=function(t){var e=this,n=[];return(0,m.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(i){return n.push(e.addSelector(i))}),n},r.prototype.get=function(t,e){var n=this;if((0,m.isArray)(t)){var i=[];return t.map(function(l){return n.getSelector(l)}).filter(Boolean).forEach(function(l){return i.indexOf(l)<0&&i.push(l)}),i}return this.getSelector(t,e)},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.setState=function(t){return this.em.setState(t),this},r.prototype.getState=function(){return this.em.getState()},r.prototype.getStates=function(){return gl([],this.states.models,!0)},r.prototype.setStates=function(t,e){return this.states.reset(t.map(function(n){return new cc(n)}),e)},r.prototype.getSelected=function(){return this.__getCommon()},r.prototype.getSelectedAll=function(){return gl([],this.selected.models,!0)},r.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(n){n.getSelectors().add(e)})},r.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},r.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},r.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},r.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},r.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):or.escapeName(t)},r.prototype.render=function(t){var e=this.selectorTags,n=this.getConfig(),i=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new Tu({el:i,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},r.prototype.destroy=function(){var t=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),t==null||t.remove(),this.selectorTags=void 0},r.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},r.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var n=t.map(function(i){return i.getSelectors&&i.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,n)},r.prototype.__common=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(i){return e[1].indexOf(i)>=0}):e.slice(1).reduce(function(i,l){return t.__common(i,l)},e[0]):[]},r.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},r}(zt);const xs=gf,ju={textTags:["br","b","i","u","a","ul","ol"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};var va={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},Mu=(0,m.keys)(va),ma=["5","6","11","15"],ya=["font-face","page","counter-style","viewport"],Ss=function(a){a===void 0&&(a="");for(var r=[],t=[],e=a.split(","),n=0,i=e.length;n<i;n++){var l=e[n].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var f=l.split(".").filter(Boolean);t.push(f)}else r.push(l)}return{result:t,add:r}},ba=function(a){for(var r=a.style,t={},e=0,n=r.length;e<n;e++){var i=r[e],l=r.getPropertyValue(i),f=r.getPropertyPriority(i);t[i]="".concat(l).concat(f?" !".concat(f):"")}return t},vc=function(a){return(a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"").trim()},mc=function(a,r,t){r===void 0&&(r={}),t===void 0&&(t={});var e={},n=a.length,i=a[n-1],l=i?i.split(/:(.+)/):[],f=l[1],d=t.atRule,v=t.selectorsAdd,g=t.mediaText;return ya.indexOf(d)>=0&&(e.singleAtRule=!0),d&&(e.atRuleType=d),v&&(e.selectorsAdd=v),g&&(e.mediaText=g),f&&(a[n-1]=l[0],e.state=f,l.splice(l.length-1,1)),e.selectors=a,e.style=r,e},yc=function(a){for(var r=[],t=a.cssRules||[],e=0,n=t.length;e<n;e++){var i=t[e],l=i.type.toString(),f=!1,d="",v="",g=i.selectorText||i.keyText,_=ma.indexOf(l)>=0;if(_)f=!0,d=va[l],v=vc(i);else if(Mu.indexOf(l)>=0){var k=yc(i);v=vc(i);for(var V=0,q=k.length;V<q;V++){var ot=k[V];v&&(ot.mediaText=v),ot.atRuleType=va[l]}r=r.concat(k)}if(g||_){for(var ft=ba(i),at=Ss(g),It=at.add,Wt=at.result,ye=void 0,Te=0,Ve=Wt.length;Te<Ve;Te++){var qe=mc(Wt[Te],ft,{atRule:va[l]});r.push(qe),ye=qe}if(It.length){var an=It.join(", ");ye?ye.selectorsAdd=an:(qe={selectors:[],selectorsAdd:an,style:ft},f&&(qe.singleAtRule=f),d&&(qe.atRuleType=d),v&&(qe.mediaText=v),r.push(qe))}}}return r};const li=function(a,r){return r===void 0&&(r={}),{parse:function(t){var e=this,n=[],i=r.parserCss,l=a==null?void 0:a.Editor,f=i?i(t,l):function(d){var v=document.createElement("style");v.innerHTML=d,document.head.appendChild(v);var g=v.sheet;return document.head.removeChild(v),yc(g)}(t);return f.forEach(function(d){return n=n.concat(e.checkNode(d))}),a==null||a.trigger("parse:css",{input:t,output:n}),n},checkNode:function(t){var e=t.selectors,n=t.style,i=[t];if((0,m.isString)(e)){var l=[],f=t,d=Ss(e),v=d.result,g=d.add.join(", "),_={atRule:f.atRule,mediaText:f.params};v.length?v.forEach(function(k){l.push(mc(k,n,_))}):l.push(mc([],n,_)),g&&(l[l.length-1].selectorsAdd=g),i=l}return i}}};var Os=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wa=function(a){function r(t){var e=a.call(this,t,"Parser",ju)||this,n=e.config;return e.parserCss=li(t,n),e.parserHtml=de(t,n),e}return Os(r,a),r.prototype.parseHtml=function(t,e){e===void 0&&(e={});var n=this.em,i=this.parserHtml;return i.compTypes=n.Components.getTypes()||{},i.parse(t,this.parserCss,e)},r.prototype.parseCss=function(t){return this.parserCss.parse(t)},r.prototype.destroy=function(){},r}(Rt);const vf=wa,Lu={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}};var Du=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(_){_(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Nu=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(_){g=[6,_],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}};const mf=function(){function a(){}return a.prototype.store=function(r,t){return t===void 0&&(t={}),Du(this,void 0,void 0,function(){return Nu(this,function(e){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(r)),[2,r]})})},a.prototype.load=function(r){return r===void 0&&(r={}),Du(this,void 0,void 0,function(){var t;return Nu(this,function(e){return t={},this.hasLocal(r,!0)&&(t=JSON.parse(localStorage.getItem(r.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(r,t){if(r===void 0&&(r={}),r.checkLocal&&(!(0,j.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();function $n(a){return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$n(a)}const Iu=function(a){var r=this.constructor;return this.then(function(t){return r.resolve(a()).then(function(){return t})},function(t){return r.resolve(a()).then(function(){return r.reject(t)})})},yf=function(a){return new this(function(r,t){if(!a||a.length===void 0)return t(new TypeError($n(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var e=Array.prototype.slice.call(a);if(e.length===0)return r([]);var n=e.length;function i(f,d){if(d&&($n(d)==="object"||typeof d=="function")){var v=d.then;if(typeof v=="function")return void v.call(d,function(g){i(f,g)},function(g){e[f]={status:"rejected",reason:g},--n==0&&r(e)})}e[f]={status:"fulfilled",value:d},--n==0&&r(e)}for(var l=0;l<e.length;l++)i(l,e[l])})};function Fu(a,r){this.name="AggregateError",this.errors=a,this.message=r||""}Fu.prototype=Error.prototype;const bf=function(a){var r=this;return new r(function(t,e){if(!a||a.length===void 0)return e(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(a);if(n.length===0)return e();for(var i=[],l=0;l<n.length;l++)try{r.resolve(n[l]).then(t).catch(function(f){i.push(f),i.length===n.length&&e(new Fu(i,"All promises were rejected"))})}catch(f){e(f)}})};var Ru=setTimeout;function bc(a){return Boolean(a&&a.length!==void 0)}function Vu(){}function jn(a){if(!(this instanceof jn))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Ts(a,this)}function Hu(a,r){for(;a._state===3;)a=a._value;a._state!==0?(a._handled=!0,jn._immediateFn(function(){var t=a._state===1?r.onFulfilled:r.onRejected;if(t!==null){var e;try{e=t(a._value)}catch(n){return void lo(r.promise,n)}wc(r.promise,e)}else(a._state===1?wc:lo)(r.promise,a._value)})):a._deferreds.push(r)}function wc(a,r){try{if(r===a)throw new TypeError("A promise cannot be resolved with itself.");if(r&&($n(r)==="object"||typeof r=="function")){var t=r.then;if(r instanceof jn)return a._state=3,a._value=r,void Vi(a);if(typeof t=="function")return void Ts((e=t,n=r,function(){e.apply(n,arguments)}),a)}a._state=1,a._value=r,Vi(a)}catch(i){lo(a,i)}var e,n}function lo(a,r){a._state=2,a._value=r,Vi(a)}function Vi(a){a._state===2&&a._deferreds.length===0&&jn._immediateFn(function(){a._handled||jn._unhandledRejectionFn(a._value)});for(var r=0,t=a._deferreds.length;r<t;r++)Hu(a,a._deferreds[r]);a._deferreds=null}function ml(a,r,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof r=="function"?r:null,this.promise=t}function Ts(a,r){var t=!1;try{a(function(e){t||(t=!0,wc(r,e))},function(e){t||(t=!0,lo(r,e))})}catch(e){if(t)return;t=!0,lo(r,e)}}jn.prototype.catch=function(a){return this.then(null,a)},jn.prototype.then=function(a,r){var t=new this.constructor(Vu);return Hu(this,new ml(a,r,t)),t},jn.prototype.finally=Iu,jn.all=function(a){return new jn(function(r,t){if(!bc(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return r([]);var n=e.length;function i(f,d){try{if(d&&($n(d)==="object"||typeof d=="function")){var v=d.then;if(typeof v=="function")return void v.call(d,function(g){i(f,g)},t)}e[f]=d,--n==0&&r(e)}catch(g){t(g)}}for(var l=0;l<e.length;l++)i(l,e[l])})},jn.any=bf,jn.allSettled=yf,jn.resolve=function(a){return a&&$n(a)==="object"&&a.constructor===jn?a:new jn(function(r){r(a)})},jn.reject=function(a){return new jn(function(r,t){t(a)})},jn.race=function(a){return new jn(function(r,t){if(!bc(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,n=a.length;e<n;e++)jn.resolve(a[e]).then(r,t)})},jn._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){Ru(a,0)},jn._unhandledRejectionFn=function(a){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};const yo=jn;(0,j.hasWin)()&&(window.Promise=window.Promise||yo);const zu=typeof fetch=="function"?fetch.bind():function(a,r){return new yo(function(t,e){var n=new XMLHttpRequest;for(var i in n.open(r.method||"get",a),n.withCredentials=r.credentials=="include",r.headers||{})n.setRequestHeader(i,r.headers[i]);n.onload=function(l){return t({status:n.status,statusText:n.statusText,text:function(){return yo.resolve(n.responseText)}})},n.onerror=e,n.upload&&r.onProgress&&(n.upload.onprogress=r.onProgress),r.body?n.send(r.body):n.send()})};var yl=function(){return yl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},yl.apply(this,arguments)},Hi=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(_){_(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},_c=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(_){g=[6,_],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}};const Bu=function(){function a(){}return a.prototype.store=function(r,t){return t===void 0&&(t={}),Hi(this,void 0,void 0,function(){return _c(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlStore,this.__props(t,r),t)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(r){return r===void 0&&(r={}),Hi(this,void 0,void 0,function(){return _c(this,function(t){switch(t.label){case 0:return[4,this.request(r.urlLoad,this.__props(r),r)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(r,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),zu(r,t).then(function(n){var i=n.text();return(n.status/200|0)==1?i:i.then(Promise.reject)}).then(function(n){var i=n&&(0,m.isString)(n);return e.contentTypeJson&&i?JSON.parse(n):n})},a.prototype.__props=function(r,t){r===void 0&&(r={});var e,n=r.contentTypeJson,i=r.headers||{},l=r.fetchOptions||{},f="X-Requested-With",d="Content-Type";if((0,m.isUndefined)(i[f])&&(i[f]="XMLHttpRequest"),(0,m.isUndefined)(i[d])&&n&&(i[d]="application/json; charset=utf-8"),t)if(n)e=JSON.stringify(t);else for(var v in e=new FormData,t)e.append(v,t[v]);var g={method:e?"POST":"GET",credentials:r.credentials,headers:i,body:e};return yl(yl({},g),(0,m.isFunction)(l)?l(g):l)},a}();var Uu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Uo=function(){return Uo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Uo.apply(this,arguments)},ci=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(_){_(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},_a=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(_){g=[6,_],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},bl="storage:start",wl="storage:after",Wu="storage:end",Es="storage:error",Ca="local",$u="remote",qu=function(a){function r(t){var e=a.call(this,t,"StorageManager",Lu)||this;e.storages={};var n=e.config;return n._disable&&(n.type=""),e.storages={},e.add(Ca,new mf),e.add($u,new Bu),e.setCurrent(n.type),e}return Uu(r,a),r.prototype.isAutosave=function(){return!!this.config.autosave},r.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},r.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},r.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},r.prototype.add=function(t,e){return this.storages[t]=e,this},r.prototype.get=function(t){return this.storages[t]},r.prototype.getStorages=function(){return this.storages},r.prototype.getCurrent=function(){return this.config.currentStorage},r.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},r.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},r.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},r.prototype.store=function(t,e){return e===void 0&&(e={}),ci(this,void 0,void 0,function(){var n,i,l,f,d;return _a(this,function(v){switch(v.label){case 0:n=this.getCurrentStorage(),i=Uo(Uo({},this.getCurrentOptions()),e),l=this.getRecoveryStorage(),f=this.getCurrentOptions(Ca),v.label=1;case 1:return v.trys.push([1,5,,9]),[4,this.__exec(n,i,t)];case 2:return v.sent(),l?[4,this.__exec(l,f,{})]:[3,4];case 3:v.sent(),v.label=4;case 4:return[3,9];case 5:return d=v.sent(),l?[4,this.__exec(l,f,t)]:[3,7];case 6:return v.sent(),[3,8];case 7:throw d;case 8:return[3,9];case 9:return[2,t]}})})},r.prototype.load=function(t){return t===void 0&&(t={}),ci(this,void 0,void 0,function(){var e,n,i,l,f;return _a(this,function(d){switch(d.label){case 0:return e=this.getCurrentStorage(),n=Uo(Uo({},this.getCurrentOptions()),t),(i=this.getRecoveryStorage())?[4,this.__exec(i,this.getCurrentOptions(Ca))]:[3,5];case 1:if(f=d.sent(),(0,m.isEmpty)(f))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return d.sent(),l=f,[3,5];case 4:return d.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,n)];case 6:l=d.sent(),d.label=7;case 7:return[2,l||{}]}})})},r.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(n,i){(0,m.isFunction)(e)?e(n,i,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?n(null):i()})},r.prototype.getRecovery=function(){return this.config.recovery},r.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===$u&&this.get(Ca)},r.prototype.__exec=function(t,e,n){var i;return ci(this,void 0,void 0,function(){var l,f,d,v,g,_,k,V,q,ot,ft,at,It;return _a(this,function(Wt){switch(Wt.label){case 0:if(l=n?"store":"load",f=this.getConfig(),d=f.onStore,v=f.onLoad,this.onStart(l,n),!t)return[2,n||{}];Wt.label=1;case 1:return Wt.trys.push([1,14,,15]),_=(i=this.em)===null||i===void 0?void 0:i.getEditor(),k=void 0,n?(q=d)?[4,d(n,_)]:[3,3]:[3,7];case 2:q=Wt.sent(),Wt.label=3;case 3:return V=q||n,(ot=e.onStore)?[4,e.onStore(V,_)]:[3,5];case 4:ot=Wt.sent(),Wt.label=5;case 5:return V=ot||V,[4,t.store(V,e)];case 6:return k=Wt.sent(),g=n,[3,13];case 7:return[4,t.load(e)];case 8:return k=Wt.sent(),g=this.__clearKeys(k),(ft=e.onLoad)?[4,e.onLoad(g,_)]:[3,10];case 9:ft=Wt.sent(),Wt.label=10;case 10:return g=ft||g,(at=v)?[4,v(g,_)]:[3,12];case 11:at=Wt.sent(),Wt.label=12;case 12:g=at||g,Wt.label=13;case 13:return this.onAfter(l,g,k),this.onEnd(l,g),[3,15];case 14:throw It=Wt.sent(),this.onError(l,It),It;case 15:return[2,g]}})})},r.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),n=new RegExp("^".concat(e.id)),i={};for(var l in t)i[l.replace(n,"")]=t[l];return i},r.prototype.getCurrentOptions=function(t){var e=this.getConfig(),n=t||this.getCurrent();return e.options[n]||{}},r.prototype.onStart=function(t,e){var n=this.em;n&&(n.trigger(bl),t&&n.trigger("".concat(bl,":").concat(t),e))},r.prototype.onAfter=function(t,e,n){var i=this.em;i&&(i.trigger(wl),i.trigger("".concat(wl,":").concat(t),e,n),i.trigger("storage:".concat(t),e,n))},r.prototype.onEnd=function(t,e){var n=this.em;n&&(n.trigger(Wu),t&&n.trigger("".concat(Wu,":").concat(t),e))},r.prototype.onError=function(t,e){var n=this.em;n&&(n.trigger(Es,e),t&&n.trigger("".concat(Es,":").concat(t),e),this.onEnd(t,e))},r.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},r.prototype.destroy=function(){this.storages={}},r}(Rt);const _l=qu,wf={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}]};var _f=Q(330),xa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ks=function(){return ks=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ks.apply(this,arguments)},Cc=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var n=t.config,i=n===void 0?{}:n,l=e,f=l.model,d=l.eventCapture,v=f.target,g=f.attributes.type;e.config=i,e.em=i.em,e.pfx=i.stylePrefix||"",e.ppfx=i.pStylePrefix||"",e.target=v;var _=e.ppfx;return e.clsField="".concat(_,"field ").concat(_,"field-").concat(g),[["change:value",e.onValueChange],["remove",e.removeView]].forEach(function(k){var V=k[0],q=k[1];f.off(V,q),e.listenTo(f,V,q)}),f.view=e,e.listenTo(f,"change:label",e.render),e.listenTo(f,"change:placeholder",e.rerender),e.events={},d.forEach(function(k){return e.events[k]="onChange"}),e.delegateEvents(),e.init(),e}return xa(r,a),r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.templateLabel=function(t){var e=this.ppfx,n=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(n,'">').concat(n,"</div>")},r.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},r.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},r.prototype.removeView=function(){this.remove(),this.removed()},r.prototype.init=function(){},r.prototype.removed=function(){},r.prototype.onRender=function(t){},r.prototype.onUpdate=function(t){},r.prototype.onEvent=function(t){},r.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,m.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(ks(ks({},this.getClbOpts()),{event:t}))},r.prototype.getValueForTarget=function(){return this.model.get("value")},r.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},r.prototype.onValueChange=function(t,e,n){if(n===void 0&&(n={}),n.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var i=this.getValueForTarget();t.setTargetValue(i,n)}},r.prototype.renderLabel=function(){var t=this.$el,e=this.target,n=this.getLabel(),i=this.templateLabel(e);this.createLabel&&(i=this.createLabel({label:n,component:e,trait:this})||""),t.find("[data-label]").append(i)},r.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,n=e.label,i=e.name;return t.t("traitManager.traits.labels.".concat(i))||(0,j.capitalize)(n||i).replace(/-/g," ")},r.prototype.getComponent=function(){return this.target},r.prototype.getInputEl=function(){if(!this.$input){var t=this.em,e=this.model,n=e,i=e.attributes.name,l=n.get("placeholder")||n.get("default")||"",f=n.get("type")||"text",d=n.get("min"),v=n.get("max"),g=this.getModelValue(),_=(0,Y.default)('<input type="'.concat(f,'">')),k=t.t("traitManager.traits.attributes.".concat(i))||{};_.attr(ks({placeholder:l},k)),(0,m.isUndefined)(g)||(n.set({value:g},{silent:!0}),_.prop("value",g)),d&&_.prop("min",d),v&&_.prop("max",v),this.$input=_}return this.$input.get(0)},r.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},r.prototype.getModelValue=function(){var t,e=this.model,n=this.target,i=e.getName();if(e.get("changeProp"))t=n.get(i);else{var l=n.get("attributes");t=e.get("value")||l[i]}return(0,m.isUndefined)(t)?"":t},r.prototype.getElInput=function(){return this.elInput},r.prototype.renderField=function(){var t=this,e=t.$el,n=t.appendInput,i=t.model,l=e.find("[data-input]"),f=l[l.length-1],d=i.el;d||(d=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,m.isString)(d)?(f.innerHTML=d,this.elInput=f.firstChild):(n?f.appendChild(d):f.insertBefore(d,f.firstChild),this.elInput=d),i.el=this.elInput},r.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},r.prototype.rerender=function(){delete this.model.el,this.render()},r.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,i=t.ppfx,l=t.model.attributes,f=l.type,d=l.id,v=this.hasLabel&&this.hasLabel(),g="".concat(n,"trait");delete this.$input;var _='<div class="'.concat(g," ").concat(g,"--").concat(f,`">
      `).concat(v?'<div class="'.concat(i,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(i,"field-wrp ").concat(i,"field-wrp--").concat(f,`" data-input>
        `).concat(this.templateInput?(0,m.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(_),v&&this.renderLabel(),this.renderField(),this.el.className="".concat(g,"__wrp ").concat(g,"__wrp-").concat(d),this.postUpdate(),this.onRender(this.getClbOpts()),this},r}(C.G7);const Wo=Cc;Cc.prototype.eventCapture=["change"];var xc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sc=function(a){function r(t,e){t===void 0&&(t={});var n=a.call(this,t)||this;n.reuseView=!0,n.itemsView=e;var i=t.config||{},l=i.stylePrefix||"",f=t.editor;return n.config=i,n.em=f,n.pfx=l,n.ppfx=i.pStylePrefix||"",n.className="".concat(l,"traits"),n.listenTo(f,"component:toggled",n.updatedCollection),n.updatedCollection(),n}return xc(r,a),r.prototype.updatedCollection=function(){var t=this,e=t.ppfx,n=t.className,i=t.em.getSelected();this.el.className="".concat(n," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=i?i.traits:[],this.render()},r}(_f.Z);const Gu=Sc;Sc.prototype.itemView=Wo;var Ku=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ju=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return Ku(r,a),r.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<div class="'.concat(e,`">
      <div data-input></div>
      <div class="`).concat(t,`sel-arrow">
        <div class="`).concat(t,`d-s-arrow"></div>
      </div>
    </div>`)},r.prototype.getInputEl=function(){if(!this.$input){var t=this.model,e=this.em,n=t.get("name"),i=t.get("options")||[],l=[],f="<select>";i.forEach(function(g){var _,k,V,q="";(0,m.isString)(g)?(_=g,k=g):(_=g.name||g.label||g.value,k="".concat((0,m.isUndefined)(g.value)?g.id:g.value).replace(/"/g,"&quot;"),q+=(V=g.style?g.style.replace(/"/g,"&quot;"):"")?' style="'.concat(V,'"'):"");var ot=e.t("traitManager.traits.options.".concat(n,".").concat(k))||_;f+='<option value="'.concat(k,'"').concat(q,">").concat(ot,"</option>"),l.push(k)}),f+="</select>",this.$input=(0,Y.default)(f);var d=t.getTargetValue(),v=l.indexOf(d)>=0?d:t.get("default");!(0,m.isUndefined)(v)&&this.$input.val(v)}return this.$input.get(0)},r}(Wo);var Sa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Oa=function(a){function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return Sa(r,a),r.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<label class="'.concat(e,`" data-input>
    <i class="`).concat(t,`chk-icon"></i>
  </label>`)},r.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},r.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!this.$input,i=Wo.prototype.getInputEl.apply(this,t);if(n){var l=void 0,f=void 0,d=this,v=d.model,g=d.target,_=v.attributes.valueFalse,k=v.getName();v.get("changeProp")?f=l=g.get(k):l=!(!(f=g.get("attributes")[k])&&f!==""),(0,m.isUndefined)(_)||f!==_||(l=!1),i.checked=l}return i},r}(Wo);var Cf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cl=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.ppfx||"";return e.opts=t,e.ppfx=n,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return Cf(r,a),r.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},r.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.setValue=function(t,e){var n=this.model,i=t||n.get("defaults"),l=this.getInputEl();l&&(l.value=i)},r.prototype.handleModelChange=function(t,e,n){this.setValue(e,n)},r.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},r.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},r.prototype.getInputEl=function(){if(!this.inputEl){var t=this.model,e=this.opts.type||"text",n=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,Y.default)('<input type="'.concat(e,'" placeholder="').concat(n,'">'))}return this.inputEl.get(0)},r.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},r}(C.G7);const xl=Cl;Cl.prototype.events={change:"handleChange"};var Yu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xu=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,m.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return Yu(r,a),r.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},r.prototype.setValue=function(t,e){var n=e||{},i=this.validateInputValue(t,{deepCheck:1}),l={value:i.value,unit:""};(i.unit||i.force)&&(l.unit=i.unit),this.model.set(l,n),n.silent&&this.handleModelChange()},r.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},r.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},r.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},r.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var f=l==t.get("unit")?"selected":"";n.push("<option ".concat(f,">").concat(l,"</option>"))});var i=document.createElement("div");i.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=i.firstChild}}return this.unitEl},r.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(t.get("value"));this.setValue(this.normalizeValue(n+e)),this.elementUpdated()},r.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(t.get("value"));this.setValue(this.normalizeValue(n-e)),this.elementUpdated()},r.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,j.on)(this.doc,"mousemove",this.moveIncrement),(0,j.on)(this.doc,"mouseup",this.upIncrement)},r.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,n=e.get("step"),i=this.current,l=this.normalizeValue(i.val+(i.y-t.pageY)*n),f=this.validateInputValue(l),d=f.value,v=f.unit;return this.prValue=d,e.set({value:d,unit:v},{avoidStore:1}),!1},r.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,j.off)(this.doc,"mouseup",this.upIncrement),(0,j.off)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set("value",n,{avoidStore:1}).set("value",n+e),this.elementUpdated()}},r.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var n=this.model.get("step"),i=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var l=n.toString().split(".")[1];i=l?l.length:0}return i?parseFloat(t.toFixed(i)):t},r.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var n=0,i=e||{},l=this.model,f="",d=(0,m.isUndefined)(t)?f:t,v=e.units||l.get("units")||[],g=l.get("unit")||v.length&&v[0]||"",_=(0,m.isUndefined)(e.max)?l.get("max"):e.max,k=(0,m.isUndefined)(e.min)?l.get("min"):e.min,V=!!l.get("limitlessMax"),q=!!l.get("limitlessMin");if(i.deepCheck){var ot=l.get("fixedValues")||[];if(d===""&&(g=""),d){var ft=new RegExp("^"+ot.join("|"),"g");if(ot.length&&ft.test(d))d=d.match(ft)[0],g="",n=1;else{var at=d+"";d+="",d=parseFloat(d.replace(",",".")),d=isNaN(d)?f:d;var It=at.replace(d,"");(0,m.indexOf)(v,It)>=0&&(g=It)}}}return V||(0,m.isUndefined)(_)||_===""||(d=d>_?_:d),q||(0,m.isUndefined)(k)||k===""||(d=d<k?k:d),{force:n,value:d,unit:g}},r.prototype.render=function(){xl.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},r}(xl);const Zu=Xu;Xu.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var xf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Sf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return xf(r,a),r.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,n=e.value,i=e.unit;return(0,m.isUndefined)(n)||n===""?t.get("default"):n+i},r.prototype.getInputEl=function(){if(!this.input){var t=this.ppfx,e=this.model,n=this.getModelValue(),i=new Zu({contClass:"".concat(t,"field-int"),type:"number",model:e,ppfx:t});i.render(),this.$input=i.inputEl,this.$unit=i.unitEl,e.set("value",n,{fromTarget:!0}),this.$input.val(n),this.input=i.el}return this.input},r}(Wo);var Qu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ta=function(){return Ta=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ta.apply(this,arguments)};Y.default&&function(a,r){if((0,j.hasWin)()){var t={beforeShow:Fr,move:Fr,change:Fr,show:Fr,hide:Fr,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],n=!!/msie/i.exec(window.navigator.userAgent),i=function(){function wt(Ft,Jt){return!!~(""+Ft).indexOf(Jt)}var Mt=document.createElement("div").style;return Mt.cssText="background-color:rgba(0,0,0,.5)",wt(Mt.backgroundColor,"rgba")||wt(Mt.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),f=function(){var wt="";if(n)for(var Mt=1;Mt<=6;Mt++)wt+="<div class='sp-"+Mt+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",wt,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),d="spectrum.id";a.fn.spectrum=function(wt,Mt){if(typeof wt=="string"){var Ft=this,Jt=Array.prototype.slice.call(arguments,1);return this.each(function(){var be=e[a(this).data(d)];if(be){var $t=be[wt];if(!$t)throw new Error("Spectrum: no such method: '"+wt+"'");wt=="get"?Ft=be.get():wt=="container"?Ft=be.container:wt=="option"?Ft=be.option.apply(be,Jt):wt=="destroy"?(be.destroy(),a(this).removeData(d)):$t.apply(be,Jt)}}),Ft}return this.spectrum("destroy").each(function(){var be=En(this,a.extend({},wt,a(this).data()));a(this).data(d,be.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=uo,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function wt(){if(wt._cachedResult===void 0){var Mt=a("<input type='color'/>")[0];wt._cachedResult=Mt.type==="color"&&Mt.value!==""}return wt._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var wt=a("input[type=color]");wt.length&&!no()&&wt.spectrum({preferredFormat:"hex6"})};var v=/^[\s,#]+/,g=/\s+$/,_=0,k=Math,V=k.round,q=k.min,ot=k.max,ft=k.random,at=function(wt,Mt){if(Mt=Mt||{},(wt=wt||"")instanceof at)return wt;if(!(this instanceof at))return new at(wt,Mt);var Ft=function(Jt){var be={r:0,g:0,b:0},$t=1,Je=!1,cn=!1;typeof Jt=="string"&&(Jt=function(un){un=un.replace(v,"").replace(g,"").toLowerCase();var Ae,dn=!1;if(Te[un])un=Te[un],dn=!0;else if(un=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ae=qe.rgb.exec(un))?{r:Ae[1],g:Ae[2],b:Ae[3]}:(Ae=qe.rgba.exec(un))?{r:Ae[1],g:Ae[2],b:Ae[3],a:Ae[4]}:(Ae=qe.hsl.exec(un))?{h:Ae[1],s:Ae[2],l:Ae[3]}:(Ae=qe.hsla.exec(un))?{h:Ae[1],s:Ae[2],l:Ae[3],a:Ae[4]}:(Ae=qe.hsv.exec(un))?{h:Ae[1],s:Ae[2],v:Ae[3]}:(Ae=qe.hsva.exec(un))?{h:Ae[1],s:Ae[2],v:Ae[3],a:Ae[4]}:(Ae=qe.hex8.exec(un))?{a:Ky(Ae[1]),r:di(Ae[2]),g:di(Ae[3]),b:di(Ae[4]),format:dn?"name":"hex8"}:(Ae=qe.hex6.exec(un))?{r:di(Ae[1]),g:di(Ae[2]),b:di(Ae[3]),format:dn?"name":"hex"}:(Ae=qe.hex3.exec(un))?{r:di(Ae[1]+""+Ae[1]),g:di(Ae[2]+""+Ae[2]),b:di(Ae[3]+""+Ae[3]),format:dn?"name":"hex"}:!1}(Jt)),typeof Jt=="object"&&(Jt.hasOwnProperty("r")&&Jt.hasOwnProperty("g")&&Jt.hasOwnProperty("b")?(sn=Jt.r,Co=Jt.g,vr=Jt.b,be={r:255*Hn(sn,255),g:255*Hn(Co,255),b:255*Hn(vr,255)},Je=!0,cn=String(Jt.r).substr(-1)==="%"?"prgb":"rgb"):Jt.hasOwnProperty("h")&&Jt.hasOwnProperty("s")&&Jt.hasOwnProperty("v")?(Jt.s=Uc(Jt.s),Jt.v=Uc(Jt.v),be=function(un,Ae,dn){un=6*Hn(un,360),Ae=Hn(Ae,100),dn=Hn(dn,100);var bn=k.floor(un),lr=un-bn,Jn=dn*(1-Ae),Er=dn*(1-lr*Ae),ro=dn*(1-(1-lr)*Ae),xo=bn%6,hi=[dn,Er,Jn,Jn,ro,dn][xo],Is=[ro,dn,dn,Er,Jn,Jn][xo],kr=[Jn,Jn,ro,dn,dn,Er][xo];return{r:255*hi,g:255*Is,b:255*kr}}(Jt.h,Jt.s,Jt.v),Je=!0,cn="hsv"):Jt.hasOwnProperty("h")&&Jt.hasOwnProperty("s")&&Jt.hasOwnProperty("l")&&(Jt.s=Uc(Jt.s),Jt.l=Uc(Jt.l),be=function(un,Ae,dn){var bn,lr,Jn;function Er(hi,Is,kr){return kr<0&&(kr+=1),kr>1&&(kr-=1),kr<1/6?hi+6*(Is-hi)*kr:kr<1/2?Is:kr<2/3?hi+(Is-hi)*(2/3-kr)*6:hi}if(un=Hn(un,360),Ae=Hn(Ae,100),dn=Hn(dn,100),Ae===0)bn=lr=Jn=dn;else{var ro=dn<.5?dn*(1+Ae):dn+Ae-dn*Ae,xo=2*dn-ro;bn=Er(xo,ro,un+1/3),lr=Er(xo,ro,un),Jn=Er(xo,ro,un-1/3)}return{r:255*bn,g:255*lr,b:255*Jn}}(Jt.h,Jt.s,Jt.l),Je=!0,cn="hsl"),Jt.hasOwnProperty("a")&&($t=Jt.a));var sn,Co,vr;return $t=kh($t),{ok:Je,format:Jt.format||cn,r:q(255,ot(be.r,0)),g:q(255,ot(be.g,0)),b:q(255,ot(be.b,0)),a:$t}}(wt);this._originalInput=wt,this._r=Ft.r,this._g=Ft.g,this._b=Ft.b,this._a=Ft.a,this._roundA=V(100*this._a)/100,this._format=Mt.format||Ft.format,this._gradientType=Mt.gradientType,this._r<1&&(this._r=V(this._r)),this._g<1&&(this._g=V(this._g)),this._b<1&&(this._b=V(this._b)),this._ok=Ft.ok,this._tc_id=_++};at.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var wt=this.toRgb();return(299*wt.r+587*wt.g+114*wt.b)/1e3},setAlpha:function(wt){return this._a=kh(wt),this._roundA=V(100*this._a)/100,this},toHsv:function(){var wt=qi(this._r,this._g,this._b);return{h:360*wt.h,s:wt.s,v:wt.v,a:this._a}},toHsvString:function(){var wt=qi(this._r,this._g,this._b),Mt=V(360*wt.h),Ft=V(100*wt.s),Jt=V(100*wt.v);return this._a==1?"hsv("+Mt+", "+Ft+"%, "+Jt+"%)":"hsva("+Mt+", "+Ft+"%, "+Jt+"%, "+this._roundA+")"},toHsl:function(){var wt=fi(this._r,this._g,this._b);return{h:360*wt.h,s:wt.s,l:wt.l,a:this._a}},toHslString:function(){var wt=fi(this._r,this._g,this._b),Mt=V(360*wt.h),Ft=V(100*wt.s),Jt=V(100*wt.l);return this._a==1?"hsl("+Mt+", "+Ft+"%, "+Jt+"%)":"hsla("+Mt+", "+Ft+"%, "+Jt+"%, "+this._roundA+")"},toHex:function(wt){return La(this._r,this._g,this._b,wt)},toHexString:function(wt){return"#"+this.toHex(wt)},toHex8:function(){return Eh(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:V(this._r),g:V(this._g),b:V(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+V(this._r)+", "+V(this._g)+", "+V(this._b)+")":"rgba("+V(this._r)+", "+V(this._g)+", "+V(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:V(100*Hn(this._r,255))+"%",g:V(100*Hn(this._g,255))+"%",b:V(100*Hn(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+V(100*Hn(this._r,255))+"%, "+V(100*Hn(this._g,255))+"%, "+V(100*Hn(this._b,255))+"%)":"rgba("+V(100*Hn(this._r,255))+"%, "+V(100*Hn(this._g,255))+"%, "+V(100*Hn(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Ve[La(this._r,this._g,this._b,!0)]||!1)},toFilter:function(wt){var Mt="#"+Eh(this._r,this._g,this._b,this._a),Ft=Mt,Jt=this._gradientType?"GradientType = 1, ":"";return wt&&(Ft=at(wt).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+Jt+"startColorstr="+Mt+",endColorstr="+Ft+")"},toString:function(wt){var Mt=!!wt;wt=wt||this._format;var Ft=!1,Jt=this._a<1&&this._a>=0;return Mt||!Jt||wt!=="hex"&&wt!=="hex6"&&wt!=="hex3"&&wt!=="name"?(wt==="rgb"&&(Ft=this.toRgbString()),wt==="prgb"&&(Ft=this.toPercentageRgbString()),wt!=="hex"&&wt!=="hex6"||(Ft=this.toHexString()),wt==="hex3"&&(Ft=this.toHexString(!0)),wt==="hex8"&&(Ft=this.toHex8String()),wt==="name"&&(Ft=this.toName()),wt==="hsl"&&(Ft=this.toHslString()),wt==="hsv"&&(Ft=this.toHsvString()),Ft||this.toHexString()):wt==="name"&&this._a===0?this.toName():this.toRgbString()},_applyModification:function(wt,Mt){var Ft=wt.apply(null,[this].concat([].slice.call(Mt)));return this._r=Ft._r,this._g=Ft._g,this._b=Ft._b,this.setAlpha(Ft._a),this},lighten:function(){return this._applyModification(Ry,arguments)},brighten:function(){return this._applyModification(Vy,arguments)},darken:function(){return this._applyModification(Hy,arguments)},desaturate:function(){return this._applyModification(Ny,arguments)},saturate:function(){return this._applyModification(Iy,arguments)},greyscale:function(){return this._applyModification(Fy,arguments)},spin:function(){return this._applyModification(zy,arguments)},_applyCombination:function(wt,Mt){return wt.apply(null,[this].concat([].slice.call(Mt)))},analogous:function(){return this._applyCombination(qy,arguments)},complement:function(){return this._applyCombination(By,arguments)},monochromatic:function(){return this._applyCombination(Gy,arguments)},splitcomplement:function(){return this._applyCombination($y,arguments)},triad:function(){return this._applyCombination(Uy,arguments)},tetrad:function(){return this._applyCombination(Wy,arguments)}},at.fromRatio=function(wt,Mt){if(typeof wt=="object"){var Ft={};for(var Jt in wt)wt.hasOwnProperty(Jt)&&(Ft[Jt]=Jt==="a"?wt[Jt]:Uc(wt[Jt]));wt=Ft}return at(wt,Mt)},at.equals=function(wt,Mt){return!(!wt||!Mt)&&at(wt).toRgbString()==at(Mt).toRgbString()},at.random=function(){return at.fromRatio({r:ft(),g:ft(),b:ft()})},at.mix=function(wt,Mt,Ft){Ft=Ft===0?0:Ft||50;var Jt,be=at(wt).toRgb(),$t=at(Mt).toRgb(),Je=Ft/100,cn=2*Je-1,sn=$t.a-be.a,Co=1-(Jt=((Jt=cn*sn==-1?cn:(cn+sn)/(1+cn*sn))+1)/2),vr={r:$t.r*Jt+be.r*Co,g:$t.g*Jt+be.g*Co,b:$t.b*Jt+be.b*Co,a:$t.a*Je+be.a*(1-Je)};return at(vr)},at.readability=function(wt,Mt){var Ft=at(wt),Jt=at(Mt),be=Ft.toRgb(),$t=Jt.toRgb(),Je=Ft.getBrightness(),cn=Jt.getBrightness(),sn=Math.max(be.r,$t.r)-Math.min(be.r,$t.r)+Math.max(be.g,$t.g)-Math.min(be.g,$t.g)+Math.max(be.b,$t.b)-Math.min(be.b,$t.b);return{brightness:Math.abs(Je-cn),color:sn}},at.isReadable=function(wt,Mt){var Ft=at.readability(wt,Mt);return Ft.brightness>125&&Ft.color>500},at.mostReadable=function(wt,Mt){for(var Ft=null,Jt=0,be=!1,$t=0;$t<Mt.length;$t++){var Je=at.readability(wt,Mt[$t]),cn=Je.brightness>125&&Je.color>500,sn=3*(Je.brightness/125)+Je.color/500;(cn&&!be||cn&&be&&sn>Jt||!cn&&!be&&sn>Jt)&&(be=cn,Jt=sn,Ft=at(Mt[$t]))}return Ft};var It,Wt,ye,Te=at.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ve=at.hexNames=function(wt){var Mt={};for(var Ft in wt)wt.hasOwnProperty(Ft)&&(Mt[wt[Ft]]=Ft);return Mt}(Te),qe=(Wt="[\\s|\\(]+("+(It="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+It+")[,|\\s]+("+It+")\\s*\\)?",ye="[\\s|\\(]+("+It+")[,|\\s]+("+It+")[,|\\s]+("+It+")[,|\\s]+("+It+")\\s*\\)?",{rgb:new RegExp("rgb"+Wt),rgba:new RegExp("rgba"+ye),hsl:new RegExp("hsl"+Wt),hsla:new RegExp("hsla"+ye),hsv:new RegExp("hsv"+Wt),hsva:new RegExp("hsva"+ye),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=at,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}function an(wt,Mt,Ft,Jt){for(var be=[],$t=0;$t<wt.length;$t++){var Je=wt[$t];if(Je){var cn=at(Je),sn=cn.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";sn+=at.equals(Mt,Je)?" sp-thumb-active":"";var Co=cn.toString(Jt.preferredFormat||"rgb"),vr=i?"background-color:"+cn.toRgbString():"filter:"+cn.toFilter();be.push('<span title="'+Co+'" data-color="'+cn.toRgbString()+'" class="'+sn+'"><span class="sp-thumb-inner" style="'+vr+';"></span></span>')}else be.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",Jt.noColorSelectedText)).html())}return"<div class='sp-cf "+Ft+"'>"+be.join("")+"</div>"}function En(wt,Mt){var Ft,Jt,be,$t=function(Ie,Fe){var We=a.extend({},t,Ie);return We.callbacks={move:eo(We.move,Fe),change:eo(We.change,Fe),show:eo(We.show,Fe),hide:eo(We.hide,Fe),beforeShow:eo(We.beforeShow,Fe)},We}(Mt,wt),Je=$t.flat,cn=$t.showSelectionPalette,sn=$t.localStorageKey,Co=$t.theme,vr=$t.callbacks,un=(Ft=Ra,Jt=10,function(){var Ie=this,Fe=arguments,We=function(){be=null,Ft.apply(Ie,Fe)};be||(be=setTimeout(We,Jt))}),Ae=!1,dn=!1,bn=!0,lr=0,Jn=0,Er=0,ro=0,xo=0,hi=0,Is=0,kr=0,Wc=0,$c=0,gi=1,Tp=[],qc=[],Ep={},vi=$t.selectionPalette.slice(0),Jy=$t.maxSelectionSize,Ph="sp-dragging",Fs=null,Gc=wt.ownerDocument,cr=(Gc.body,a(wt)),rd=!1,nn=a(f,Gc).addClass(Co),Yy=nn.find(".sp-picker-container"),kp=nn.find(".sp-color"),Pp=nn.find(".sp-dragger"),od=nn.find(".sp-hue"),Ap=nn.find(".sp-slider"),Kc=nn.find(".sp-alpha-inner"),Ah=nn.find(".sp-alpha"),jp=nn.find(".sp-alpha-handle"),mi=nn.find(".sp-input"),jh=nn.find(".sp-palette"),Mh=nn.find(".sp-initial"),Lh=nn.find(".sp-cancel"),id=nn.find(".sp-clear"),Dh=nn.find(".sp-choose"),sd=nn.find(".sp-palette-toggle"),Mp=cr.is("input"),Xy=Mp&&cr.attr("type")==="color"&&no(),ad=Mp&&!Je,Nl=ad?a(l).addClass(Co).addClass($t.className).addClass($t.replacerClassName):a([]),Jc=ad?Nl:cr,Il=Nl.find(".sp-preview-inner"),Yc=$t.color||Mp&&cr.val(),Fl=!1,Rl=$t.preferredFormat,Zy=!$t.showButtons||$t.clickoutFiresChange,Rs=!Yc,Na=$t.allowEmpty&&!Xy;function ld(){if($t.showPaletteOnly&&($t.showPalette=!0),sd.text($t.showPaletteOnly?$t.togglePaletteMoreText:$t.togglePaletteLessText),$t.palette){Tp=$t.palette.slice(0),qc=a.isArray(Tp[0])?Tp:[Tp],Ep={};for(var Ie=0;Ie<qc.length;Ie++)for(var Fe=0;Fe<qc[Ie].length;Fe++){var We=at(qc[Ie][Fe]).toRgbString();Ep[We]=!0}}nn.toggleClass("sp-flat",Je),nn.toggleClass("sp-input-disabled",!$t.showInput),nn.toggleClass("sp-alpha-enabled",$t.showAlpha),nn.toggleClass("sp-clear-enabled",Na),nn.toggleClass("sp-buttons-disabled",!$t.showButtons),nn.toggleClass("sp-palette-buttons-disabled",!$t.togglePaletteOnly),nn.toggleClass("sp-palette-disabled",!$t.showPalette),nn.toggleClass("sp-palette-only",$t.showPaletteOnly),nn.toggleClass("sp-initial-disabled",!$t.showInitial),nn.addClass($t.className).addClass($t.containerClassName),Ra()}function Nh(){if(sn&&window.localStorage){try{var Ie=window.localStorage[sn].split(",#");Ie.length>1&&(delete window.localStorage[sn],a.each(Ie,function(Fe,We){cd(We)}))}catch{}try{vi=window.localStorage[sn].split(";")}catch{}}}function cd(Ie){if(cn){var Fe=at(Ie).toRgbString();if(!Ep[Fe]&&a.inArray(Fe,vi)===-1)for(vi.push(Fe);vi.length>Jy;)vi.shift();if(sn&&window.localStorage)try{window.localStorage[sn]=vi.join(";")}catch{}}}function Ih(){var Ie=oo(),Fe=a.map(qc,function(We,Be){return an(We,Ie,"sp-palette-row sp-palette-row-"+Be,$t)});Nh(),vi&&Fe.push(an(function(){var We=[];if($t.showPalette)for(var Be=0;Be<vi.length;Be++){var Pr=at(vi[Be]).toRgbString();Ep[Pr]||We.push(vi[Be])}return We.reverse().slice(0,$t.maxSelectionSize)}(),Ie,"sp-palette-row sp-palette-row-selection",$t)),jh.html(Fe.join(""))}function Fh(){if($t.showInitial){var Ie=Fl,Fe=oo();Mh.html(an([Ie,Fe],Fe,"sp-palette-row-initial",$t))}}function ud(){(Jn<=0||lr<=0||ro<=0)&&Ra(),dn=!0,nn.addClass(Ph),Fs=null,cr.trigger("dragstart.spectrum",[oo()])}function pd(){dn=!1,nn.removeClass(Ph),cr.trigger("dragstop.spectrum",[oo()])}function fd(){var Ie=mi.val();if(Ie!==null&&Ie!==""||!Na){var Fe=at(Ie);Fe.isValid()?(Ia(Fe),Fa(!0)):mi.addClass("sp-validation-error")}else Ia(null),Fa(!0)}function Rh(){Ae?Vs():dd()}function dd(){var Ie=a.Event("beforeShow.spectrum");if(Ae)Ra();else if(cr.trigger("beforeShow.spectrum",[oo()]),vr.beforeShow(oo())!==!1&&!Ie.isDefaultPrevented()){(function(){for(var We=0;We<e.length;We++)e[We]&&e[We].hide()})(),Ae=!0;var Fe=a(Gc);Fe.bind("keydown.spectrum",Vh),Fe.bind("click.spectrum",Hh),a(window).bind("resize.spectrum",un),Nl.addClass("sp-active"),nn.removeClass("sp-hidden"),Ra(),Hl(),Fl=oo(),Fh(),vr.show(Fl),cr.trigger("show.spectrum",[Fl])}}function Vh(Ie){Ie.keyCode===27&&Vs()}function Hh(Ie){Ie.button!=2&&(dn||(Zy?Fa(!0):zh(),Vs()))}function Vs(){Ae&&!Je&&(Ae=!1,a(Gc).unbind("keydown.spectrum",Vh),a(Gc).unbind("click.spectrum",Hh),a(window).unbind("resize.spectrum",un),Nl.removeClass("sp-active"),nn.addClass("sp-hidden"),vr.hide(oo()),cr.trigger("hide.spectrum",[oo()]))}function zh(){Ia(Fl,!0)}function Ia(Ie,Fe){var We,Be;at.equals(Ie,oo())?Hl():(!Ie&&Na?Rs=!0:(Rs=!1,bn=!Ie,Be=(We=at(Ie)).toHsv(),kr=Be.h%360/360,Wc=Be.s,$c=Be.v,gi=Be.a),Hl(),We&&We.isValid()&&!Fe&&(Rl=$t.preferredFormat||We.getFormat()))}function oo(Ie){return Ie=Ie||{},Na&&Rs?null:at.fromRatio({h:kr,s:Wc,v:$c,a:Math.round(100*gi)/100},{format:Ie.format||Rl})}function Vl(){Hl(),vr.move(oo()),cr.trigger("move.spectrum",[oo()])}function Hl(){mi.removeClass("sp-validation-error"),Bh();var Ie=at.fromRatio({h:kr,s:1,v:1});kp.css("background-color",Ie.toHexString());var Fe=Rl;gi<1&&(gi!==0||Fe!=="name")&&(Fe!=="hex"&&Fe!=="hex3"&&Fe!=="hex6"&&Fe!=="name"||(Fe="rgb"));var We=oo({format:Fe}),Be="";if(Il.removeClass("sp-clear-display"),Il.css("background-color","transparent"),!We&&Na)Il.addClass("sp-clear-display");else{var Pr=We.toHexString(),yi=We.toRgbString();if(i||We.alpha===1?Il.css("background-color",yi):(Il.css("background-color","transparent"),Il.css("filter",We.toFilter())),$t.showAlpha){var Hs=We.toRgb();Hs.a=0;var zs=at(Hs).toRgbString(),Va="linear-gradient(left, "+zs+", "+Pr+")";n?Kc.css("filter",at(zs).toFilter({gradientType:1},Pr)):(Kc.css("background","-webkit-"+Va),Kc.css("background","-moz-"+Va),Kc.css("background","-ms-"+Va),Kc.css("background","linear-gradient(to right, "+zs+", "+Pr+")"))}Be=We.toString(Fe)}$t.showInput&&mi.val(Be),$t.showPalette&&Ih(),Fh()}function Bh(){var Ie=Wc,Fe=$c;if(Na&&Rs)jp.hide(),Ap.hide(),Pp.hide();else{jp.show(),Ap.show(),Pp.show();var We=Ie*lr,Be=Jn-Fe*Jn;We=Math.max(-Er,Math.min(lr-Er,We-Er)),Be=Math.max(-Er,Math.min(Jn-Er,Be-Er)),Pp.css({top:Be+"px",left:We+"px"});var Pr=gi*xo;jp.css({left:Pr-hi/2+"px"});var yi=kr*ro;Ap.css({top:yi-Is+"px"})}}function Fa(Ie){var Fe=oo(),We="",Be=!!bn||!at.equals(Fe,Fl);Fe&&(We=Fe.toString(Rl),!Ae&&cd(Fe)),Mp&&cr.val(We),Ie&&Be&&(vr.change(Fe),cr.trigger("change",[Fe]))}function Ra(){Ae&&(lr=kp.width(),Jn=kp.height(),Er=Pp.height(),od.width(),ro=od.height(),Is=Ap.height(),xo=Ah.width(),hi=jp.width(),Je||(nn.css("position","absolute"),$t.offset?nn.offset($t.offset):nn.offset(function(Ie,Fe){var We=0,Be=Ie.outerWidth(),Pr=Ie.outerHeight(),yi=Fe.outerHeight(),Hs=Ie[0].ownerDocument,zs=Hs.documentElement,Va=zs.clientWidth,hd=zs.clientHeight,Qy=a(Hs).scrollLeft(),t0=a(Hs).scrollTop(),gd=Va+Qy,Wh=hd+t0,Gi=Fe.offset();return Gi.top+=yi,Gi.left-=Math.min(Gi.left,Gi.left+Be>gd&&gd>Be?Math.abs(Gi.left+Be-gd):0),Gi.top-=Math.min(Gi.top,Gi.top+Pr>Wh&&Wh>Pr?Math.abs(Pr+yi-We):We),Gi}(nn,Jc))),Bh(),$t.showPalette&&Ih(),cr.trigger("reflow.spectrum"))}function Uh(){Vs(),rd=!0,cr.attr("disabled",!0),Jc.addClass("sp-disabled")}(function(){if(n&&nn.find("*:not(input)").attr("unselectable","on"),ld(),ad&&cr.after(Nl).hide(),Na||id.hide(),Je)cr.after(nn).hide();else{var Ie=$t.appendTo==="parent"?cr.parent():a($t.appendTo);Ie.length!==1&&(Ie=a("body")),Ie.append(nn)}function Fe(Be){return Be.data&&Be.data.ignore?(Ia(a(Be.target).closest(".sp-thumb-el").data("color")),Vl()):(Ia(a(Be.target).closest(".sp-thumb-el").data("color")),Vl(),$t.hideAfterPaletteSelect&&(Fa(!0),Vs())),!1}Nh(),Jc.bind("click.spectrum touchstart.spectrum",function(Be){rd||Rh(),Be.stopPropagation(),a(Be.target).is("input")||Be.preventDefault()}),(cr.is(":disabled")||$t.disabled===!0)&&Uh(),nn.click(to),mi.change(fd),mi.bind("paste",function(){setTimeout(fd,1)}),mi.keydown(function(Be){Be.keyCode==13&&fd()}),Lh.text($t.cancelText),Lh.bind("click.spectrum",function(Be){Be.stopPropagation(),Be.preventDefault(),zh(),Vs()}),id.attr("title",$t.clearText),id.bind("click.spectrum",function(Be){Be.stopPropagation(),Be.preventDefault(),Rs=!0,Vl(),Je&&Fa(!0)}),Dh.text($t.chooseText),Dh.bind("click.spectrum",function(Be){Be.stopPropagation(),Be.preventDefault(),n&&mi.is(":focus")&&mi.trigger("change"),mi.hasClass("sp-validation-error")||(Fa(!0),Vs())}),sd.text($t.showPaletteOnly?$t.togglePaletteMoreText:$t.togglePaletteLessText),sd.bind("click.spectrum",function(Be){Be.stopPropagation(),Be.preventDefault(),$t.showPaletteOnly=!$t.showPaletteOnly,$t.showPaletteOnly||Je||nn.css("left","-="+(Yy.outerWidth(!0)+5)),ld()}),uo(Ah,function(Be,Pr,yi){gi=Be/xo,Rs=!1,yi.shiftKey&&(gi=Math.round(10*gi)/10),Vl()},ud,pd),uo(od,function(Be,Pr){kr=parseFloat(Pr/ro),Rs=!1,$t.showAlpha||(gi=1),Vl()},ud,pd),uo(kp,function(Be,Pr,yi){if(yi.shiftKey){if(!Fs){var Hs=Wc*lr,zs=Jn-$c*Jn,Va=Math.abs(Be-Hs)>Math.abs(Pr-zs);Fs=Va?"x":"y"}}else Fs=null;var hd=!Fs||Fs==="y";(!Fs||Fs==="x")&&(Wc=parseFloat(Be/lr)),hd&&($c=parseFloat((Jn-Pr)/Jn)),Rs=!1,$t.showAlpha||(gi=1),Vl()},ud,pd),Yc?(Ia(Yc),Hl(),Rl=$t.preferredFormat||at(Yc).getFormat(),cd(Yc)):Hl(),Je&&dd();var We=n?"mousedown.spectrum":"click.spectrum touchstart.spectrum";jh.delegate(".sp-thumb-el",We,Fe),Mh.delegate(".sp-thumb-el:nth-child(1)",We,{ignore:!0},Fe)})();var Lp={show:dd,hide:Vs,toggle:Rh,reflow:Ra,option:function(Ie,Fe){return Ie===r?a.extend({},$t):Fe===r?$t[Ie]:($t[Ie]=Fe,Ie==="preferredFormat"&&(Rl=$t.preferredFormat),void ld())},enable:function(){rd=!1,cr.attr("disabled",!1),Jc.removeClass("sp-disabled")},disable:Uh,offset:function(Ie){$t.offset=Ie,Ra()},set:function(Ie){Ia(Ie),Fa()},get:oo,destroy:function(){cr.show(),Jc.unbind("click.spectrum touchstart.spectrum"),nn.remove(),Nl.remove(),e[Lp.id]=null},container:nn};return Lp.id=e.push(Lp)-1,Lp}function Fr(){}function to(wt){wt.stopPropagation()}function eo(wt,Mt){var Ft=Array.prototype.slice,Jt=Ft.call(arguments,2);return function(){return wt.apply(Mt,Jt.concat(Ft.call(arguments)))}}function uo(wt,Mt,Ft,Jt){Mt=Mt||function(){},Ft=Ft||function(){},Jt=Jt||function(){};var be=document,$t=!1,Je={},cn=0,sn=0,Co="ontouchstart"in window,vr={};function un(bn){bn.stopPropagation&&bn.stopPropagation(),bn.preventDefault&&bn.preventDefault(),bn.returnValue=!1}function Ae(bn){if($t){if(n&&be.documentMode<9&&!bn.button)return dn();var lr=bn&&bn.touches&&bn.touches[0],Jn=lr&&lr.pageX||bn.pageX,Er=lr&&lr.pageY||bn.pageY,ro=Math.max(0,Math.min(Jn-Je.left,sn)),xo=Math.max(0,Math.min(Er-Je.top,cn));Co&&un(bn),Mt.apply(wt,[ro,xo,bn])}}function dn(){$t&&(a(be).unbind(vr),a(be.body).removeClass("sp-dragging"),setTimeout(function(){Jt.apply(wt,arguments)},0)),$t=!1}vr.selectstart=un,vr.dragstart=un,vr["touchmove mousemove"]=Ae,vr["touchend mouseup"]=dn,a(wt).bind("touchstart mousedown",function(bn){var lr=bn.which?bn.which==3:bn.button==2;lr||$t||Ft.apply(wt,arguments)!==!1&&($t=!0,cn=a(wt).height(),sn=a(wt).width(),Je=a(wt).offset(),a(be).bind(vr),a(be.body).addClass("sp-dragging"),Ae(bn),un(bn))})}function no(){return a.fn.spectrum.inputTypeColorSupport()}function fi(wt,Mt,Ft){wt=Hn(wt,255),Mt=Hn(Mt,255),Ft=Hn(Ft,255);var Jt,be,$t=ot(wt,Mt,Ft),Je=q(wt,Mt,Ft),cn=($t+Je)/2;if($t==Je)Jt=be=0;else{var sn=$t-Je;switch(be=cn>.5?sn/(2-$t-Je):sn/($t+Je),$t){case wt:Jt=(Mt-Ft)/sn+(Mt<Ft?6:0);break;case Mt:Jt=(Ft-wt)/sn+2;break;case Ft:Jt=(wt-Mt)/sn+4}Jt/=6}return{h:Jt,s:be,l:cn}}function qi(wt,Mt,Ft){wt=Hn(wt,255),Mt=Hn(Mt,255),Ft=Hn(Ft,255);var Jt,be,$t=ot(wt,Mt,Ft),Je=q(wt,Mt,Ft),cn=$t,sn=$t-Je;if(be=$t===0?0:sn/$t,$t==Je)Jt=0;else{switch($t){case wt:Jt=(Mt-Ft)/sn+(Mt<Ft?6:0);break;case Mt:Jt=(Ft-wt)/sn+2;break;case Ft:Jt=(wt-Mt)/sn+4}Jt/=6}return{h:Jt,s:be,v:cn}}function La(wt,Mt,Ft,Jt){var be=[Da(V(wt).toString(16)),Da(V(Mt).toString(16)),Da(V(Ft).toString(16))];return Jt&&be[0].charAt(0)==be[0].charAt(1)&&be[1].charAt(0)==be[1].charAt(1)&&be[2].charAt(0)==be[2].charAt(1)?be[0].charAt(0)+be[1].charAt(0)+be[2].charAt(0):be.join("")}function Eh(wt,Mt,Ft,Jt){var be;return[Da((be=Jt,Math.round(255*parseFloat(be)).toString(16))),Da(V(wt).toString(16)),Da(V(Mt).toString(16)),Da(V(Ft).toString(16))].join("")}function Ny(wt,Mt){Mt=Mt===0?0:Mt||10;var Ft=at(wt).toHsl();return Ft.s-=Mt/100,Ft.s=Op(Ft.s),at(Ft)}function Iy(wt,Mt){Mt=Mt===0?0:Mt||10;var Ft=at(wt).toHsl();return Ft.s+=Mt/100,Ft.s=Op(Ft.s),at(Ft)}function Fy(wt){return at(wt).desaturate(100)}function Ry(wt,Mt){Mt=Mt===0?0:Mt||10;var Ft=at(wt).toHsl();return Ft.l+=Mt/100,Ft.l=Op(Ft.l),at(Ft)}function Vy(wt,Mt){Mt=Mt===0?0:Mt||10;var Ft=at(wt).toRgb();return Ft.r=ot(0,q(255,Ft.r-V(255*(-Mt/100)))),Ft.g=ot(0,q(255,Ft.g-V(255*(-Mt/100)))),Ft.b=ot(0,q(255,Ft.b-V(255*(-Mt/100)))),at(Ft)}function Hy(wt,Mt){Mt=Mt===0?0:Mt||10;var Ft=at(wt).toHsl();return Ft.l-=Mt/100,Ft.l=Op(Ft.l),at(Ft)}function zy(wt,Mt){var Ft=at(wt).toHsl(),Jt=(V(Ft.h)+Mt)%360;return Ft.h=Jt<0?360+Jt:Jt,at(Ft)}function By(wt){var Mt=at(wt).toHsl();return Mt.h=(Mt.h+180)%360,at(Mt)}function Uy(wt){var Mt=at(wt).toHsl(),Ft=Mt.h;return[at(wt),at({h:(Ft+120)%360,s:Mt.s,l:Mt.l}),at({h:(Ft+240)%360,s:Mt.s,l:Mt.l})]}function Wy(wt){var Mt=at(wt).toHsl(),Ft=Mt.h;return[at(wt),at({h:(Ft+90)%360,s:Mt.s,l:Mt.l}),at({h:(Ft+180)%360,s:Mt.s,l:Mt.l}),at({h:(Ft+270)%360,s:Mt.s,l:Mt.l})]}function $y(wt){var Mt=at(wt).toHsl(),Ft=Mt.h;return[at(wt),at({h:(Ft+72)%360,s:Mt.s,l:Mt.l}),at({h:(Ft+216)%360,s:Mt.s,l:Mt.l})]}function qy(wt,Mt,Ft){Mt=Mt||6,Ft=Ft||30;var Jt=at(wt).toHsl(),be=360/Ft,$t=[at(wt)];for(Jt.h=(Jt.h-(be*Mt>>1)+720)%360;--Mt;)Jt.h=(Jt.h+be)%360,$t.push(at(Jt));return $t}function Gy(wt,Mt){Mt=Mt||6;for(var Ft=at(wt).toHsv(),Jt=Ft.h,be=Ft.s,$t=Ft.v,Je=[],cn=1/Mt;Mt--;)Je.push(at({h:Jt,s:be,v:$t})),$t=($t+cn)%1;return Je}function kh(wt){return wt=parseFloat(wt),(isNaN(wt)||wt<0||wt>1)&&(wt=1),wt}function Hn(wt,Mt){(function(Jt){return typeof Jt=="string"&&Jt.indexOf(".")!=-1&&parseFloat(Jt)===1})(wt)&&(wt="100%");var Ft=function(Jt){return typeof Jt=="string"&&Jt.indexOf("%")!=-1}(wt);return wt=q(Mt,ot(0,parseFloat(wt))),Ft&&(wt=parseInt(wt*Mt,10)/100),k.abs(wt-Mt)<1e-6?1:wt%Mt/parseFloat(Mt)}function Op(wt){return q(1,ot(0,wt))}function di(wt){return parseInt(wt,16)}function Da(wt){return wt.length==1?"0"+wt:""+wt}function Uc(wt){return wt<=1&&(wt=100*wt+"%"),wt}function Ky(wt){return di(wt)/255}}(Y.default);var Sl=function(a){var r=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return r||t.replace(/ /g,"")};const Oc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Qu(r,a),r.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},r.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,m.isUndefined)(e)||this.__onInputChange(e)},r.prototype.__onInputChange=function(t){var e=this.model,n=this.opts.onChange,i=t,l=this.getColorEl();if(l){l.spectrum("set",i);var f=l.spectrum("get"),d=i&&Sl(f);d&&(i=d)}n?n(i):e.set({value:i},{fromInput:1})},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n=this.model,i=(0,m.isUndefined)(e.def)?n.get("defaults"):e.def,l=(0,m.isUndefined)(t)?(0,m.isUndefined)(i)?"":i:t,f=this.getInputEl(),d=this.getColorEl(),v=l!="none"?l:"";f.value=l,d.get(0).style.backgroundColor=v,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(d.spectrum("set",v),this.noneColor=l=="none",this.movedColor=v)},r.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,n=e.em,i=e.model,l=e.opts,f=this.ppfx,d=l.onChange,v=(0,Y.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),g=v.get(0).style,_=n&&n.config?n.config.el:"",k=n&&n.getConfig&&n.getConfig().colorPicker||{};this.movedColor="";var V,q=!1;this.$el.find("[data-colorp-c]").append(v);var ot=function(ft,at){at===void 0&&(at=!0),d?d(ft,!at):(at&&i.setValueFromInput(0,!1),i.setValueFromInput(ft,at))};v.spectrum(Ta(Ta(Ta({color:i.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color"),appendTo:_||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},k),i.get("colorPicker")||{}),{move:function(ft){var at=Sl(ft);t.movedColor=at,g.backgroundColor=at,ot(at,!1)},change:function(ft){q=!0;var at=Sl(ft);g.backgroundColor=at,ot(at),t.noneColor=!1},show:function(ft){q=!1,t.movedColor="",V=d?i.getValue({noDefault:!0}):Sl(ft)},hide:function(){q||!V&&!d||(t.noneColor&&(V=""),g.backgroundColor=V,v.spectrum("set",V),ot(V,!1))}})),n&&n.on&&this.listenTo(n,"component:selected",function(){t.movedColor&&ot(t.movedColor),q=!0,t.movedColor="",v.spectrum("hide")}),this.colorEl=v}return this.colorEl},r.prototype.render=function(){return xl.prototype.render.call(this),this.getColorEl(),this},r}(xl);var Tc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const tp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Tc(r,a),r.prototype.templateInput=function(){return""},r.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),n=new Oc({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();n.setValue(e,{fromTarget:1}),this.input=n.el}return this.input},r}(Wo);var Of=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ec=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Of(r,a),r.prototype.templateInput=function(){return""},r.prototype.onChange=function(){this.handleClick()},r.prototype.handleClick=function(){var t=this.model,e=this.em,n=t.get("command");n&&((0,m.isString)(n)?e.Commands.run(n):n(e.Editor,t))},r.prototype.renderLabel=function(){this.model.get("label")&&Wo.prototype.renderLabel.apply(this)},r.prototype.getInputEl=function(){var t=this.model,e=this.ppfx,n=t.props(),i=n.labelButton,l=n.text,f=n.full,d=i||l,v="".concat(e,"btn");return'<button type="button" class="'.concat(v,"-prim").concat(f?" ".concat(v,"--full"):"",'">').concat(d,"</button>")},r}(Wo);const Ps=Ec;Ec.prototype.eventCapture=["click button"];var ep=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),As=function(){return As=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},As.apply(this,arguments)},np="trait",Tf="".concat(np,":"),Ef="".concat(Tf,"custom"),Tn={text:Wo,number:Sf,select:Ju,checkbox:Oa,color:tp,button:Ps},kf=function(a){function r(t){var e=a.call(this,t,"TraitManager",wf)||this;e.TraitsView=Gu,e.events={all:np,custom:Ef};var n=e.config,i=new C.Hn;e.model=i;var l=n.pStylePrefix;e.types=As({},Tn),l&&(n.stylePrefix="".concat(l).concat(n.stylePrefix));var f=(0,m.debounce)(function(){return e.__upSel()},0);i.listenTo(t,"component:toggled",f);var d=(0,m.debounce)(function(){return e.__onUp()},0);return i.listenTo(t,"trait:update",d),e}return ep(r,a),r.prototype.__upSel=function(){this.select(this.em.getSelected())},r.prototype.__onUp=function(){this.select(this.getSelected())},r.prototype.select=function(t){var e=t?t.getTraits():[];this.model.set({component:t,traits:e}),this.__trgCustom()},r.prototype.getSelected=function(){return this.model.get("component")||null},r.prototype.getCurrent=function(){return this.model.get("traits")||[]},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.getTraitsViewer=function(){return this.view},r.prototype.addType=function(t,e){var n=this.getType("text");this.types[t]=n.extend(e)},r.prototype.getType=function(t){return this.getTypes()[t]},r.prototype.getTypes=function(){return this.types},r.prototype.render=function(){var t=this.view,e=this.em,n=this.getConfig(),i=t&&t.el;return t=new Gu({el:i,collection:[],editor:e,config:n},this.getTypes()),this.view=t,t.el},r.prototype.destroy=function(){this.model.stopListening(),this.model.clear()},r}(Rt);const kc=kf,Ea={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};var bo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ol=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var n=t.config||{};e.config=n,e.parentView=t.parentView;var i=n.stylePrefix||"",l=n.pStylePrefix||"",f=e.collection;e.listenTo(f,"add",e.addTo),e.listenTo(f,"reset resetNavigator",e.render),e.listenTo(f,"remove",e.removeChildren),e.className="".concat(i,"layers");var d=n.em;if(n.sortable&&!e.opt.sorter){var v=d.Utils;e.opt.sorter=new v.Sorter({container:n.sortContainer||e.el,containerSel:".".concat(e.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,onEndMove:function(g,_,k){var V=_.getSourceModel();d.setSelected(V,{forceChange:1}),d.trigger("".concat(Cr,":end"),k)},avoidSelectOnEnd:1,nested:1,ppfx:l,pfx:i})}return e.$el.data("collection",f),t.parent&&e.$el.data("model",t.parent),e}return bo(r,a),r.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var i=this,l=i.parentView,f=i.opt,d=i.config,v=f.ItemView,g=f.opened,_=f.module,k=e||null,V=new v({ItemView:v,level:f.level,model:t,parentView:l,config:d,sorter:f.sorter,opened:g,module:_}),q=V.render().el;if(k)k.appendChild(q);else if(n!==void 0){var ot="before";this.$el.children().length==n&&(n--,ot="after"),n<0?this.$el.append(q):this.$el.children().eq(n)[ot](q)}else this.$el.append(q);return this.items.push(V),q},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return C.G7.prototype.remove.apply(this,t),this.items.map(function(n){return n.remove()}),this},r.prototype.render=function(){var t=this,e=document.createDocumentFragment(),n=this.el;return n.innerHTML="",this.collection.each(function(i){return t.addToCollection(i,e)}),n.appendChild(e),n.className=this.className,this},r}(C.G7);const Pc=Ol;var rp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ac="contentEditable",op=function(a){function r(t){var e=a.call(this,t)||this;(0,m.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var n=e,i=n.model,l=n.pfx,f=n.ppfx,d=i.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(d," no-select ").concat(f,"two-color"),e.inputNameCls="".concat(f,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return rp(r,a),r.prototype.events=function(){return{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-open]":"toggleOpening","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","mouseout [data-toggle-select]":"handleHoverOut","dblclick [data-name]":"handleEdit","keydown [data-name]":"handleEditKey","focusout [data-name]":"handleEditEnd"}},r.prototype.template=function(t){var e=this,n=e.pfx,i=e.ppfx,l=e.config,f=e.clsNoEdit,d=e.module,v=e.opt,g=e.em,_=l.hidable,k=d.getComponents(t).length,V=k?"":this.clsNoChild,q="".concat(this.clsTitle," ").concat(V),ot="".concat(this.clsTitleC," ").concat(i,"one-bg"),ft="".concat(this.inputNameCls," ").concat(f," ").concat(i,"no-app"),at=v.level+1,It="".concat(30+10*at,"px"),Wt=t.getName(),ye=t.getIcon(),Te="".concat(n,"layer"),Ve=(g==null?void 0:g.getConfig()).icons,qe=Ve.move,an=Ve.eye,En=Ve.eyeOff,Fr=Ve.chevron;return`
      `.concat(_?'<i class="'.concat(n,`layer-vis" data-toggle-visible>
            <i class="`).concat(n,'layer-vis-on">').concat(an,`</i>
            <i class="`).concat(n,'layer-vis-off">').concat(En,`</i>
          </i>`):"",`
      <div class="`).concat(ot,`">
        <div class="`).concat(q,'" style="padding-left: ').concat(It,`" data-toggle-select>
          <div class="`).concat(n,'layer-title-inn" title="').concat(Wt,`">
            <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(Fr,`</i>
            `).concat(ye?'<span class="'.concat(Te,'__icon">').concat(ye,"</span>"):"",`
            <span class="`).concat(ft,'" data-name>').concat(Wt,`</span>
          </div>
        </div>
      </div>
      <div class="`).concat(this.clsCount,'" data-count>').concat(k||"",`</div>
      <div class="`).concat(this.clsMove,'" data-toggle-move>').concat(qe||"",`</div>
      <div class="`).concat(this.clsChildren,'"></div>')},Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),r.prototype.initComponent=function(){var t=this,e=this.model,n=this.config.onInit,i=e.components();this.listenTo(i,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(l){return t.listenTo(e,l[0],l[1])}),this.$el.data("model",e),this.$el.data("collection",i),e.viewLayer=this,n.bind(this)({component:e,render:this.__render,listenTo:this.listenTo})},r.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},r.prototype.getVisibilityEl=function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},r.prototype.updateVisibility=function(){var t=this,e=t.pfx,n=t.model,i=t.module,l="".concat(e,"layer-hidden"),f=i.isVisible(n)?"removeClass":"addClass";this.$el[f](l),this.getVisibilityEl()[f]("".concat(e,"layer-off"))},r.prototype.toggleVisibility=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setVisible(n,!e.isVisible(n))},r.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,n=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName();d[Ac]="true",d.focus(),document.execCommand("selectAll",!1),n.setEditing(!0),i.find(".".concat(this.inputNameCls)).removeClass(l).addClass(f)},r.prototype.handleEditKey=function(t){t.stopPropagation(),((0,j.isEscKey)(t)||(0,j.isEnterKey)(t))&&this.handleEditEnd(t)},r.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,n=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName(),v=d.textContent;d.scrollLeft=0,d[Ac]="false",this.setName(v,{component:this.model,propName:"custom-name"}),n.setEditing(!1),i.find(".".concat(this.inputNameCls)).addClass(l).removeClass(f),this.updateName()},r.prototype.setName=function(t,e){var n=e.propName;this.model.set(n,t)},r.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},r.prototype.updateOpening=function(){var t=this,e=t.$el,n=t.model,i=t.pfx,l="open",f="".concat(i,"layer-open"),d=this.getCaret();this.module.isOpen(n)?(e.addClass(l),d.addClass(f)):(e.removeClass(l),d.removeClass(f))},r.prototype.toggleOpening=function(t){var e=this.model,n=this.module;t==null||t.stopImmediatePropagation(),e.get("components").length&&n.setOpen(e,!n.isOpen(e))},r.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{selected:!0},{event:t})},r.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!0})},r.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!1})},r.prototype.startSort=function(t){t.stopPropagation();var e=this.em,n=this.sorter;t.button&&t.button!==0||n&&(n.onStart=function(i){return e.trigger("".concat(Cr,":start"),i)},n.onMoveClb=function(i){return e.trigger(Cr,i)},n.startSort(t.target))},r.prototype.updateStatus=function(){Nn.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},r.prototype.checkChildren=function(){var t=this,e=t.model,n=t.clsNoChild,i=t.$el,l=t.module,f=l.getComponents(e).length,d=i.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),v=this.cnt;v||(v=i.children("[data-count]").get(0),this.cnt=v),d[f?"removeClass":"addClass"](n),v&&(v.innerHTML=f||""),!f&&l.setOpen(e,!1)},r.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},r.prototype.setRoot=function(t){t=(0,m.isString)(t)?this.em.getWrapper().find(t)[0]:t;var e=(0,j.getModel)(t,0);e&&(this.stopListening(),this.model=e,this.initComponent(),this._rendered&&this.render())},r.prototype.updateLayerable=function(){(this.parentView||this).render()},r.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return C.G7.prototype.remove.apply(this,t),this.__clearItems(),this},r.prototype.render=function(){var t=this,e=t.model,n=t.config,i=t.pfx,l=t.ppfx,f=t.opt,d=t.sorter;this.__clearItems();var v=f.opened,g=f.module,_=f.ItemView,k=!g.__isLayerable(e),V=this.$el.empty(),q=f.level+1;delete this.inputName,this.items=new Pc({ItemView:_,collection:e.get("components"),config:n,sorter:d,opened:v,parentView:this,parent:e,level:q,module:g});var ot=this.items.render().$el;return n.showWrapper||q!==1?(V.html(this.template(e)),V.find(".".concat(this.clsChildren)).append(ot)):V.append(ot),e.get("draggable")&&n.sortable||V.children(".".concat(this.clsMove)).remove(),!g.isVisible(e)&&(this.className+=" ".concat(i,"hide")),k&&(this.className+=" ".concat(l,"hidden")),V.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},r.prototype.__render=function(){var t=this,e=t.model,n=t.config,i={component:e,el:t.el};n.onRender.bind(this)(i),this.em.trigger("layer:render",i)},r}(C.G7);const ip=op;var sp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jc=function(){return jc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},jc.apply(this,arguments)},Tl="layer",El="".concat(Tl,":"),pn="".concat(El,"root"),Mc="".concat(El,"component"),Pf="".concat(El,"custom"),js={all:Tl,root:pn,component:Mc,custom:Pf},Lc={mediaText:""},kl=["open","status","locked","custom-name","components","classes"].map(function(a){return"component:update:".concat(a)}).join(" "),Af=function(a){function r(t){var e=a.call(this,t,"LayerManager",Ea)||this;return e.events=js,(0,m.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new yt(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return sp(r,a),r.prototype.onLoad=function(){var t=this,e=this,n=e.em,i=e.config,l=e.model;l.listenTo(n,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(n,kl,this.__onComponent),this.componentChanged(),l.listenToOnce(n,"load",function(){t.setRoot(i.root),t.__appendTo()})},r.prototype.setRoot=function(t){var e=this.em.getWrapper(),n=(0,j.isComponent)(t)?t:e;return t&&(0,m.isString)(t)&&(0,j.hasWin)()&&(n=e.find(t)[0]||e),this.model.set("root",n),n},r.prototype.getRoot=function(){return this.model.get("root")},r.prototype.getComponents=function(t){var e=this;return t.components().filter(function(n){return e.__isLayerable(n)})},r.prototype.setOpen=function(t,e){t.set("open",e)},r.prototype.isOpen=function(t){return!!t.get("open")},r.prototype.setVisible=function(t,e){var n="__prev-display",i=t.getStyle(Lc),l=i.display;if(e){var f=t.get(n);delete i.display,f&&(i.display=f,t.unset(n))}else l&&t.set(n,l),i.display="none";t.setStyle(i,Lc),this.updateLayer(t),this.em.trigger("component:toggled")},r.prototype.isVisible=function(t){return(e=t.getStyle(Lc))===void 0&&(e={}),(e.display||"").trim().indexOf("none")!==0;var e},r.prototype.setLocked=function(t,e){t.set("locked",e)},r.prototype.isLocked=function(t){return t.get("locked")},r.prototype.setName=function(t,e){t.set("custom-name",e)},r.prototype.getName=function(t){return t.getName()},r.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},r.prototype.setLayerData=function(t,e,n){var i;n===void 0&&(n={});var l=this.em,f=this.config,d=e.open,v=e.selected,g=e.hovered,_=e.visible,k=e.locked,V=e.name,q=jc({fromLayers:!0},n);if((0,j.isDef)(d)&&this.setOpen(t,d),(0,j.isDef)(v))if(v){l.setSelected(t,q);var ot=f.scrollCanvas;ot&&((i=t.views)===null||i===void 0||i.forEach(function(ft){return ft.scrollIntoView(ot)}))}else l.removeSelected(t,q);(0,j.isDef)(g)&&f.showHover&&(g?l.setHovered(t,q):l.setHovered(null,q)),(0,j.isDef)(_)&&_!==this.isVisible(t)&&this.setVisible(t,_),(0,j.isDef)(k)&&this.setLocked(t,k),(0,j.isDef)(V)&&this.setName(t,V)},r.prototype.componentChanged=function(t,e){var n;if(e===void 0&&(e={}),!e.fromLayers){var i=this.em,l=this.config.scrollLayers,f=this.model.get("opened"),d=i.getSelected(),v=d==null?void 0:d.parent();for(var g in f)f[g].set("open",!1),delete f[g];for(;v;)v.set("open",!0),f[v.cid]=v,v=v.parent();if(d&&l){var _=(n=d.viewLayer)===null||n===void 0?void 0:n.el;_==null||_.scrollIntoView(l)}}},r.prototype.getAll=function(){return this.view},r.prototype.render=function(){var t,e,n=this.config,i=this.model,l=ip.extend(n.extend);return this.view=new l({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:l,level:0,config:n,opened:i.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},r.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},r.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(pn,e)},r.prototype.__onComponent=function(t){this.updateLayer(t)},r.prototype.__isLayerable=function(t){var e=t.get("tagName");return(!this.config.hideTextnode||!t.is("textnode")&&e!=="br")&&t.get("layerable")},r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,{container:t.container,root:this.getRoot()})},r.prototype.updateLayer=function(t,e){this.em.trigger(Mc,t,e)},r}(Rt);const In=Af,jf={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};var Mf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ap=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Mf(r,a),r.getDefaults=function(){return(0,m.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{type:"",src:""}},r.prototype.getType=function(){return this.get("type")},r.prototype.getSrc=function(){return this.get("src")},r.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},r.prototype.getExtension=function(){return this.getFilename().split(".").pop()},r}(C.Hn);const Ms=ap;ap.prototype.idAttribute="src";var o=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),s=function(){return s=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},s.apply(this,arguments)};const u=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return o(r,a),r.prototype.defaults=function(){return s(s({},Ms.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},r}(Ms);var c=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),p=function(a){function r(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var n=t.config||{};e.config=n,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var i=e.init&&e.init.bind(e);return i&&i(t),e}return c(r,a),r.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},r.prototype.template=function(t,e){var n=this.pfx;return`
      <div class="`.concat(n,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(n,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(n,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},r.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,m.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},r.prototype.getPreview=function(){return""},r.prototype.getInfo=function(){return""},r.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},r}(C.G7);const h=p;var y=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),w=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},S=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return y(r,a),r.prototype.getPreview=function(){var t=this,e=t.pfx,n=t.ppfx,i=t.model.get("src");return U(tt||(tt=w([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,i,e,n)},r.prototype.getInfo=function(){var t=this.pfx,e=this.model,n=e.get("name"),i=e.get("width"),l=e.get("height"),f=e.get("unitDim"),d=i&&l?"".concat(i,"x").concat(l).concat(f):"";return n=n||e.getFilename(),U(et||(et=w([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),t,n,t,d)},r.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},r.prototype.onClick=function(){var t=this.model,e=this.pfx,n=this.__getBhv().select,i=this.config.onClick,l=this.collection;l.trigger("deselectAll"),this.$el.addClass(e+"highlight"),(0,m.isFunction)(n)?n(t,!1):(0,m.isFunction)(i)?i(t):this.updateTarget(l.target)},r.prototype.onDblClick=function(){var t=this.em,e=this.model,n=this.__getBhv().select,i=this.config.onDblClick,l=this.collection,f=l.target,d=l.onSelect;(0,m.isFunction)(n)?n(e,!0):(0,m.isFunction)(i)?i(e):(this.updateTarget(f),t==null||t.Modal.close()),(0,m.isFunction)(d)&&d(e)},r.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},r}(h);const P=S;var tt,et;S.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var xt=function(){return xt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xt.apply(this,arguments)},St={types:[],initialize:function(a,r){var t=this;r===void 0&&(r={});var e=r.em;this.em=e,this.opts=r,this.model=function(i,l){var f,d,v;if(i===void 0&&(i={}),l===void 0&&(l={}),i&&i.type){var g=t.getBaseType();f=(v=t.getType(i.type))?v.model:g.model,d=v?v.view:g.view}else{var _=t.recognizeType(i);f=(v=_.type).model,d=v.view,i=_.attributes}var k=new f(i,xt(xt({},l),{em:e}));return k.typeView=d,k};var n=this.init&&this.init.bind(this);n&&n()},recognizeType:function(a){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t],n=e.isType(a);if(n=typeof n=="boolean"&&n?{type:e.id}:n)return{type:e,attributes:n}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t];if(e.id===a)return e}},addType:function(a,r){var t=this.getType(a),e=this.getBaseType(),n=t?t.model:e.model,i=t?t.view:e.view,l=r.model,f=r.view,d=r.isType;l=l instanceof C.Hn||(0,m.isFunction)(l)?l:n.extend(l||{}),f=f instanceof C.G7||(0,m.isFunction)(f)?f:i.extend(f||{}),!this.extendViewApi||r.model||r.view||(f=f.extend(r)),t?(t.model=l,t.view=f,t.isType=d||t.isType):(r.id=a,r.model=l,r.view=f,r.isType=d||function(v){if(v&&v.type==a)return!0},this.getTypes().unshift(r))}};const jt=St;var Gt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Gt(r,a),r}(C.FE.extend(jt));const pe=Qt;Qt.prototype.types=[{id:"image",model:u,view:P,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var me=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),le=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var n=e.collection;return e.listenTo(n,"reset",e.renderAssets),e.listenTo(n,"add",e.addToAsset),e.listenTo(n,"remove",e.removedAsset),e.listenTo(n,"deselectAll",e.deselectAll),e}return me(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,i=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(n,"field ").concat(e,`add-field">
              <input placeholder="`).concat(i==null?void 0:i.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(n,'btn-prim">').concat(i==null?void 0:i.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},r.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim(),i=this.config.handleAdd;if(n){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),i?i.bind(this)(n):this.options.globalCollection.add(n,{at:0})}},r.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},r.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},r.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},r.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},r.prototype.addAsset=function(t,e){e===void 0&&(e=null);var n=e,i=this.collection,l=this.config,f=new t.typeView({model:t,collection:i,config:l}).render().el;if(n)n.appendChild(f);else{var d=this.getAssetsEl();d&&d.insertBefore(f,d.firstChild)}return f},r.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},r.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},r.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(i){return t.addAsset(i,e)}),n.append(e)},r.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},r}(C.G7);const ke=le;le.prototype.events={submit:"handleSubmit"};var Oe=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Me=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},gn=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var n=t.config||{};e.module=t.module,e.config=n,e.em=e.config.em,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=n.disableUpload!==void 0?n.disableUpload:!n.upload&&!n.embedAsBase64,e.multiUpload=n.multiUpload===void 0||n.multiUpload;var i=n.uploadFile;return i?e.uploadFile=i.bind(e):!n.upload&&n.embedAsBase64&&(e.uploadFile=r.embedAsBase64),e.delegateEvents(),e}return Oe(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.title,i=t.uploadId,l=t.disabled,f=t.multiUpload;return U(xr||(xr=Me([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,n,i,l?"disabled":"",f?"multiple":"")},r.prototype.events=function(){return{"change [data-input]":"uploadFile"}},r.prototype.onUploadStart=function(){var t=this.module;t&&t.__propEv("asset:upload:start")},r.prototype.onUploadEnd=function(t){var e=this.$el,n=this.module;n&&n.__propEv("asset:upload:end",t);var i=e.find("input");i&&i.val("")},r.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv("asset:upload:error",t)},r.prototype.onUploadResponse=function(t,e){var n,i=this,l=i.module,f=i.config,d=i.target;try{n=typeof t=="string"?JSON.parse(t):t}catch{n=t}l&&l.__propEv("asset:upload:response",n),f.autoAdd&&d&&d.add(n.data,{at:0}),this.onUploadEnd(t),e==null||e(n)},r.prototype.uploadFile=function(t,e){var n=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,f=l.beforeUpload;if((f&&f(i))!==!1){var d=new FormData,v=l.params,g=l.customFetch;for(var _ in v)d.append(_,v[_]);if(this.multiUpload)for(var k=0;k<i.length;k++)d.append("".concat(l.uploadName,"[]"),i[k]);else i.length&&d.append(l.uploadName,i[0]);this.target;var V=l.upload,q=l.headers,ot="X-Requested-With";if(q[ot]===void 0&&(q[ot]="XMLHttpRequest"),V){this.onUploadStart();var ft={method:"post",credentials:l.credentials||"include",headers:q,body:d};return(g?g(V,ft):zu(V,ft).then(function(at){return(at.status/200|0)==1?at.text():at.text().then(function(It){return Promise.reject(It)})})).then(function(at){return n.onUploadResponse(at,e)}).catch(function(at){return n.onUploadError(at)})}}},r.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(n){e.className="",n.preventDefault(),t.uploadFile(n)})}},r.prototype.initDropzone=function(t){var e=this,n=0,i=this.config,l=t.model,f=t.el,d=l.Editor,v=l.Canvas.getBody(),g=this.ppfx,_="".concat(g,"dropzone-active"),k="".concat(g,"dropzone"),V=function(){f.className=f.className.replace(_,"").trim(),n=0},q=function(){return n||(f.className+=" ".concat(_),n=1),!1},ot=function(){return V(),!1},ft=function(at){if(V(),at.preventDefault(),at.stopPropagation(),e.uploadFile(at),i.openAssetsOnDrop&&d){var It=d.getSelected();d.runCommand("open-assets",{target:It,onSelect:function(){d.Modal.close(),d.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(k,'">').concat(i.dropzoneContent,"</div>")),V(),"draggable"in f&&[f,v].forEach(function(at){at.ondragover=q,at.ondragleave=ot,at.ondrop=ft})},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,i=t.em;return e.html(this.template({title:i&&i.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:n})),this.initDrop(),e.attr("class",n+"file-uploader"),this},r.embedAsBase64=function(t,e){var n=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(FileReader){for(var f=[],d=/^(.+)\/(.+)$/,v=function(k){var V=new Promise(function(q,ot){var ft=new FileReader;ft.addEventListener("load",function(at){var It,Wt=k.name,ye=d.exec(k.type);if((It=ye?ye[1]:k.type)==="image"){var Te={src:ft.result,name:Wt,type:It,height:0,width:0},Ve=new Image;Ve.addEventListener("error",function(qe){ot(qe)}),Ve.addEventListener("load",function(){Te.height=Ve.height,Te.width=Ve.width,q(Te)}),Ve.src=Te.src}else q(It?{src:ft.result,name:Wt,type:It}:ft.result)}),ft.addEventListener("error",function(at){ot(at)}),ft.addEventListener("abort",function(at){ot("Aborted")}),ft.readAsDataURL(k)});f.push(V)},g=0,_=i;g<_.length;g++)v(_[g]);return Promise.all(f).then(function(k){l.data=k,n.onUploadResponse(l,e)},function(k){n.onUploadError(k)})}this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))},r}(C.G7);const vn=gn;var xr,Cn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dr=function(){return dr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},dr.apply(this,arguments)},Sr=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Pn="asset",Fn="".concat(Pn,":"),_r="".concat(Fn,"select"),qn="".concat(Fn,"update"),Rn="".concat(Fn,"add"),Vn="".concat(Fn,"remove"),Or="".concat(Vn,":before"),ui="".concat(Fn,"custom"),wo="".concat(Fn,"open"),hr="".concat(Fn,"close"),An="".concat(Fn,"upload"),Dc="".concat(An,":start"),$o="".concat(An,":end"),zi="".concat(An,":error"),Bi="".concat(An,":response"),Kn="open-assets",Ls={all:Pn,select:_r,update:qn,add:Rn,remove:Vn,removeBefore:Or,custom:ui,open:wo,close:hr,uploadStart:Dc,uploadEnd:$o,uploadError:zi,uploadResponse:Bi},Nc=function(a){function r(t){var e=a.call(this,t,"AssetManager",new pe([],t),Ls,jf)||this;e.storageKey="assets",e.Asset=Ms,e.Assets=pe;var n=e,i=n.all,l=n.config;e.assetsVis=new pe([]);var f=l.pStylePrefix;return f&&(l.stylePrefix="".concat(f).concat(l.stylePrefix)),i.on("add",function(d){return e.getAllVisible().add(d)}),i.on("remove",function(d){return e.getAllVisible().remove(d)}),e.__onAllEvent=(0,m.debounce)(function(){return e.__trgCustom()},0),e}return Cn(r,a),r.prototype.__propEv=function(t){for(var e,n,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];(e=this.em).trigger.apply(e,Sr([t],i,!1)),(n=this.getAll()).trigger.apply(n,Sr([t],i,!1))},r.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;(t.container||e.open)&&this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(n,i){return t.remove(n,i)},select:function(n,i){var l=t.add(n);(0,m.isFunction)(e.select)&&e.select(l,i)},options:e.options||{}}},r.prototype.open=function(t){t===void 0&&(t={}),this.em.Commands.run(Kn,dr({types:["image"],select:function(){}},t))},r.prototype.close=function(){this.em.Commands.stop(Kn)},r.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(Kn))},r.prototype.add=function(t,e){return e===void 0&&(e={}),e.at===void 0&&(e.at=0),this.all.add(t,e)},r.prototype.get=function(t){return this.all.where({src:t})[0]||null},r.prototype.getAll=function(){return this.all},r.prototype.getAllVisible=function(){return this.assetsVis},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t)},r.prototype.getContainer=function(){var t;return this.__getBehaviour().container||((t=this.am)===null||t===void 0?void 0:t.el)},r.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},r.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var n=this.__viewParams();n.fu=this.FileUploader(),this.am=new ke(dr({},n)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},r.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},r.prototype.addType=function(t,e){this.getAll().addType(t,e)},r.prototype.getType=function(t){return this.getAll().getType(t)},r.prototype.getTypes=function(){return this.getAll().getTypes()},r.prototype.AssetsView=function(){return this.am},r.prototype.FileUploader=function(){return this.fu||(this.fu=new vn(this.__viewParams())),this.fu},r.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this.em,n=this.events;e.on("run:".concat(Kn),function(){return t.__propEv(n.open)}),e.on("stop:".concat(Kn),function(){return t.__propEv(n.close)})},r.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},r.prototype.setTarget=function(t){this.assetsVis.target=t},r.prototype.onSelect=function(t){this.assetsVis.onSelect=t},r.prototype.onClick=function(t){this.config.onClick=t},r.prototype.onDblClick=function(t){this.config.onDblClick=t},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=dr(dr({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(t){return this._bhv||{}},r.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},r}(zt);const Cg=Nc;var Lf={placeholder:"eg. Text here"};const xg={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:Lf,alt:Lf,title:Lf,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};var Sg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Og=function(a){function r(t){var e=a.call(this,t,"I18n",xg)||this,n=e.config.messagesAdd;return n&&e.addMessages(n),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return Sg(r,a),r.prototype.setLocale=function(t){var e=this.em,n=this.config,i={value:t,valuePrev:n.locale};return e&&e.trigger("i18n:locale",i),n.locale=t,this},r.prototype.getLocale=function(){return this.config.locale},r.prototype.getMessages=function(t,e){e===void 0&&(e={});var n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},r.prototype.setMessages=function(t){var e=this.em;return this.config.messages=t,e&&e.trigger("i18n:update",t),this},r.prototype.addMessages=function(t){var e=this.em,n=this.config.messages;return e&&e.trigger("i18n:add",t),this.setMessages((0,j.deepMerge)(n,t)),this},r.prototype.t=function(t,e){e===void 0&&(e={});var n=this.config,i=e.params||{},l=e.l||this.getLocale(),f=e.lFlb||n.localeFallback,d=this._getMsg(t,l,e);return d||(d=this._getMsg(t,f,e)),!d&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),d=d&&(0,m.isString)(d)?this._addParams(d,i):d},r.prototype._localLang=function(){var t=(0,j.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},r.prototype._addParams=function(t,e){var n=new RegExp("{([\\w\\d-]*)}","g");return t.replace(n,function(i,l){return e[l]||""}).trim()},r.prototype._getMsg=function(t,e,n){n===void 0&&(n={});var i=this.getMessages(e,n);if(i){var l=i[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(f,d){if(!(0,m.isUndefined)(f))return f[d]},i)),l}},r.prototype._debug=function(t,e){e===void 0&&(e={});var n=this.em,i=this.config;(e.debug||i.debug)&&n&&n.logWarning(t)},r.prototype.destroy=function(){},r}(Rt);const Tg=Og;var Eg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ds=function(){return Ds=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ds.apply(this,arguments)},kg=function(){},Pg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Eg(r,a),r.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,m.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var n=e.container;this.el=typeof n=="string"?document.querySelector(n):n,this.$el=(0,Y.default)(this.el),this.containerSel=e.containerSel||"div",this.itemSel=e.itemSel||"div",this.draggable=e.draggable||!0,this.nested=!!e.nested,this.pfx=e.pfx||"",this.ppfx=e.ppfx||"",this.freezeClass=e.freezeClass||this.pfx+"freezed",this.onStart=e.onStart||kg,this.onEndMove=e.onEndMove,this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||"v",this.onMoveClb=e.onMove,this.relative=e.relative||!1,this.ignoreViewChildren=!!e.ignoreViewChildren,this.plh=e.placer,this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.em=e.em,this.canvasRelative=!!e.canvasRelative,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},r.prototype.getScale=function(){return(0,m.result)(this,"scale")||1},r.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el=typeof e=="string"?document.querySelector(e):e,this.$el=(0,Y.default)(this.el)}return this.el},r.prototype.getDocuments=function(t){var e=this.em,n=t?t.ownerDocument:e==null?void 0:e.Canvas.getBody().ownerDocument,i=[document];return n&&i.push(n),i},r.prototype.updateOffset=function(){var t,e=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=e.top,this.offLeft=e.left},r.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},r.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var n=e.get("Canvas"),i=n.getDocument(),l=null;if(i.caretRangeFromPoint){var f=(0,j.getPointerEvent)(t);l=i.caretRangeFromPoint(f.clientX,f.clientY)}else t.rangeParent&&(l=i.createRange()).setStart(t.rangeParent,t.rangeOffset);var d=n.getWindow().getSelection();n.getFrameEl().focus(),d.removeAllRanges(),l&&d.addRange(l),this.setContentEditable(this.activeTextModel,!0)}},r.prototype.setContentEditable=function(t,e){if(t){var n=t.getEl();n.contentEditable!=e&&(n.contentEditable=e)}},r.prototype.toggleSortCursor=function(t){var e=this.em,n=e&&e.get("Canvas");n&&(t?n.startAutoscroll():n.stopAutoscroll())},r.prototype.setDragHelper=function(t,e){for(var n=e||"",i=t.cloneNode(!0),l=t.getBoundingClientRect(),f=getComputedStyle(t),d="",v=0;v<f.length;v++){var g=f[v];d+="".concat(g,":").concat(f.getPropertyValue(g),";")}document.body.appendChild(i),i.className+=" ".concat(this.pfx,"bdrag"),i.setAttribute("style",d),this.dragHelper=i,i.style.width="".concat(l.width,"px"),i.style.height="".concat(l.height,"px"),n&&this.moveDragHelper(n),this.em&&(0,Y.default)(this.em.Canvas.getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper),(0,Y.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},r.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(this.dragHelper&&e){var n=t.pageY,i=t.pageX,l=0,f=0,d=(e.defaultView||e.parentWindow).frameElement,v=this.dragHelper.style;if(d){var g=d.getBoundingClientRect();l=g.top+document.documentElement.scrollTop,f=g.left+document.documentElement.scrollLeft,n=t.clientY,i=t.clientX}v.top=n+l+"px",v.left=i+f+"px"}},r.prototype.matches=function(t,e){return j.matches.call(t,e)},r.prototype.closest=function(t,e){if(t)for(var n=t.parentNode;n&&n.nodeType===1;){if(this.matches(n,e))return n;n=n.parentNode}},r.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},r.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement("div"),n=document.createElement("div");return e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",n.className=t+"placeholder-int",e.appendChild(n),e},r.prototype.startSort=function(t,e){var n,i;e===void 0&&(e={});var l,f=this,d=f.em,v=f.itemSel,g=f.containerSel,_=f.plh,k=this.getContainerEl(e.container),V=this.getDocuments(t);delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(v,", ").concat(g))&&(t=this.closest(t,v)),this.sourceEl=t,_||(this.plh=this.createPlaceholder(),k.appendChild(this.plh)),t&&((l=this.getSourceModel(t))&&l.set&&l.set("status","freezed"),this.srcModel=l),(0,j.on)(k,"mousemove dragover",this.onMove),(0,j.on)(V,"mouseup dragend touchend",this.endMove),(0,j.on)(V,"keydown",this.rollback),this.onStart({sorter:this,target:l,parent:l&&((n=l.parent)===null||n===void 0?void 0:n.call(l)),index:l&&((i=l.index)===null||i===void 0?void 0:i.call(l))}),d==null||d.clearSelection(),this.toggleSortCursor(!0),d==null||d.trigger("sorter:drag:start",t,l)},r.prototype.getTargetModel=function(t){var e=t||this.target;return(0,Y.default)(e).data("model")},r.prototype.getSourceModel=function(t,e){var n=this,i=e===void 0?{}:e,l=i.target,f=i.avoidChildren,d=f===void 0?1:f,v=this.em,g=this.sourceEl,_=t||g,k=this.dropModel,V=this.dropContent,q=function(It){return It&&l&&It.opt&&It.opt.avoidChildren&&n.isTextableActive(It,l)};if(V&&v){if(q(k)&&(k=void 0),!k){var ot=v.Components.getComponents(),ft={avoidChildren:d,avoidStore:1,avoidUpdateStyle:1},at=ot.add(V,Ds(Ds({},ft),{temporary:!0}));if(k=(k=ot.remove(at,ft))instanceof Array?k[0]:k,this.dropModel=k,q(k))return this.getSourceModel(_,{target:l,avoidChildren:0})}return k}return _&&(0,Y.default)(_).data("model")},r.prototype.selectTargetModel=function(t,e){if(!(t instanceof C.FE||e&&e===t)){var n=this.targetModel;n&&n!==this.srcModel&&n.set("status",""),t&&t.set&&(t.set("status","selected-parent"),this.targetModel=t)}},r.prototype.onMove=function(t){var e=t,n=this,i=n.em,l=n.onMoveClb,f=n.plh,d=n.customTarget;this.moved=!0;var v=f.style.display;v&&v!=="none"||(f.style.display="block");var g=this.offset(this.el);this.elT=this.wmargin?Math.abs(g.top):g.top,this.elL=this.wmargin?Math.abs(g.left):g.left;var _=t.pageY-this.elT+this.el.scrollTop,k=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var V=i.get("Canvas").getMouseRelativeCanvas(t,{noScroll:1});k=V.x,_=V.y}this.rX=k,this.rY=_,this.eventMove=t;var q=this.getSourceModel(),ot=d?d({sorter:this,event:t}):t.target,ft=this.dimsFromTarget(ot,k,_),at=this.target,It=at&&this.getTargetModel(at);if(this.selectTargetModel(It,q),It||(f.style.display="none"),at){this.lastDims=ft;var Wt=this.findPosition(ft,k,_);this.isTextableActive(q,It)?(this.activeTextModel=It,f.style.display="none",this.lastPos=Wt,this.updateTextViewCursorPosition(e)):(this.disableTextable(),delete this.activeTextModel,this.lastPos&&this.lastPos.index==Wt.index&&this.lastPos.method==Wt.method||(this.movePlaceholder(this.plh,ft,Wt,this.prevTargetDim),this.$plh||(this.$plh=(0,Y.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=Wt)),(0,m.isFunction)(l)&&l({event:t,target:q,parent:It,index:Wt.index+(Wt.method=="after"?1:0)}),i&&i.trigger("sorter:drag",{target:at,targetModel:It,sourceModel:q,dims:ft,pos:Wt,x:k,y:_})}},r.prototype.isTextableActive=function(t,e){var n;return((n=t==null?void 0:t.get)===null||n===void 0?void 0:n.call(t,"textable"))&&(e==null?void 0:e.isInstanceOf("text"))},r.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},r.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var n=t;return n.offsetHeight,!!this.styleInFlow(n,e)},r.prototype.styleInFlow=function(t,e){if(!(0,j.isTextNode)(t)){var n=t.style||{},i=(0,Y.default)(t),l=e&&(0,Y.default)(e);if(!n.overflow||n.overflow==="visible"){var f=i.css("float");if(!(f&&f!=="none"||l&&l.css("display")=="flex"&&l.css("flex-direction")!=="column")){switch(n.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(i.css("display")){case"block":case"list-item":case"table":case"flex":return!0}}}}},r.prototype.validTarget=function(t,e){var n=this.getTargetModel(t),i=this.getSourceModel(e,{target:n}),l={valid:!0,src:e=i&&i.view&&i.view.el,srcModel:i,trg:t=n&&n.view&&n.view.el,trgModel:n,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!e||!t)return l.valid=!1,l;var f=i.get("draggable");if((0,m.isFunction)(f)){var d=f(i,n);l.dragInfo=d,l.draggable=d,f=d}else f=f instanceof Array?f.join(", "):f,l.dragInfo=f,f=(0,m.isString)(f)?this.matches(t,f):f,l.draggable=f;var v=n.get("droppable");return(0,m.isFunction)(v)?(d=v(i,n),l.droppable=d,l.dropInfo=d,v=d):(v=(v=v instanceof C.FE?1:v)instanceof Array?v.join(", "):v,l.dropInfo=v,v=(0,m.isString)(v)?this.matches(e,v):v,v=f&&this.isTextableActive(i,n)?1:v,l.droppable=v),v&&f||(l.valid=!1),l},r.prototype.dimsFromTarget=function(t,e,n){var i=this.em,l=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return l;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var f=this.validTarget(t);if(i&&i.trigger("sorter:drag:validation",f),!f.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,n);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(l=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,n)||!this.nested&&!this.cacheDims.length){var d=this.targetP;d&&this.validTarget(d).valid&&(l=this.cacheDimsP,this.target=d)}return delete this.lastPos,l},r.prototype.getTargetFromEl=function(t){var e,n=t,i=this.targetPrev,l=this.em,f=this.containerSel,d=this.itemSel;if(this.matches(n,"".concat(d,", ").concat(f))||(n=this.closest(n,d)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(","))),i&&i!=n&&delete this.targetPrev,!this.targetPrev){e=this.closest(n,f);var v=this.validTarget(n);if(l&&l.trigger("sorter:drag:validation",v),!v.valid&&e)return this.getTargetFromEl(e);this.targetPrev=n}return this.nearElBorders(n)&&(e=this.closest(n,f))&&this.validTarget(e).valid&&(n=e),n},r.prototype.nearElBorders=function(t){var e=10,n=t.getBoundingClientRect(),i=t.ownerDocument.body,l=this.getCurrentPos(),f=l.x,d=l.y,v=n.top+i.scrollTop,g=n.left+i.scrollLeft,_=n.width,k=n.height;if(d<v+e||d>v+k-e||f<g+e||f>g+_-e)return 1},r.prototype.getCurrentPos=function(){var t=this.eventMove;return{x:(t==null?void 0:t.pageX)||0,y:(t==null?void 0:t.pageY)||0}},r.prototype.getDim=function(t){var e,n,i,l,f=this.em,d=this.canvasRelative,v=f==null?void 0:f.Canvas,g=v?v.getElementOffsets(t):{};if(d&&f){var _=v.getElementPos(t,{noScroll:1});e=_.top,n=_.left,i=_.height,l=_.width}else{var k=this.offset(t);e=this.relative?t.offsetTop:k.top-(this.wmargin?-1:1)*this.elT,n=this.relative?t.offsetLeft:k.left-(this.wmargin?-1:1)*this.elL,i=t.offsetHeight,l=t.offsetWidth}return{top:e,left:n,height:i,width:l,offsets:g}},r.prototype.getChildrenDim=function(t){var e=this,n=[];if(!t)return n;var i=this.getTargetModel(t);if(i&&i.view&&!this.ignoreViewChildren){var l=i.getCurrentView?i.getCurrentView():i.view;t=l.getChildrenContainer()}return(0,m.each)(t.children,function(f,d){var v=f,g=(0,j.getModel)(v,Y.default),_=g&&g.index?g.index():d;if((0,j.isTextNode)(v)||e.matches(v,e.itemSel)){var k,V=e.getDim(v),q=e.direction;k=q=="v"||q!="h"&&e.isInFlow(v,t),V.dir=k,V.el=v,V.indexEl=_,n.push(V)}}),n},r.prototype.nearBorders=function(t,e,n){var i=!1,l=this.borderOffset,f=e||0,d=n||0,v=t.top,g=t.left,_=t.height,k=t.width;return(v+l>d||d>v+_-l||g+l>f||f>g+k-l)&&(i=!0),i},r.prototype.findPosition=function(t,e,n){for(var i,l={index:0,indexEl:0,method:"before"},f=0,d=0,v=0,g=0,_=0,k=0,V=0,q=t.length;V<q;V++){var ot=(i=t[V]).top,ft=i.left,at=i.height,It=i.width;if(k=ot+at,g=ft+It/2,_=ot+at/2,!(d&&ft>d||v&&_>=v||f&&ft+It<f))if(l.index=V,l.indexEl=i.indexEl,i.dir){if(n<_){l.method="before";break}l.method="after"}else n<k&&(v=k),e<g?(d=g,l.method="before"):(f=g,l.method="after")}return l},r.prototype.movePlaceholder=function(t,e,n,i){var l=0,f=0,d=0,v="",g="",_="px",k=5,V=n.method,q=e[n.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),q){var ot=q.top,ft=q.left,at=q.height,It=q.width;q.dir?(v=It+_,g="auto",f=V=="before"?ot-l:ot+at-l,d=ft):(v="auto",g=at-2*l+_,f=ot+l,d=V=="before"?ft-l:ft+It-l,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested)return void(t.style.display="none");if(i){var Wt=i.offsets||{},ye=Wt.paddingTop||k,Te=Wt.paddingLeft||k;f=i.top+ye,d=i.left+Te,v=parseInt("".concat(i.width))-2*Te+_,g="auto"}}t.style.top=f+_,t.style.left=d+_,v&&(t.style.width=v),g&&(t.style.height=g)},r.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},r.prototype.sort=function(t,e){var n=t.parents.filter(function(l){return e.parents.includes(l)})[0];if(!n)return e.model.index()-t.model.index();var i=t.parents[t.parents.indexOf(n)-1];return e.parents[e.parents.indexOf(n)-1].index()-i.index()},r.prototype.endMove=function(){var t,e=this,n=this.sourceEl,i=[],l=this.getDocuments(),f=this.getContainerEl(),d=this.onEndMove,v=this.onEnd,g=this.target,_=this.lastPos;if((0,j.off)(f,"mousemove dragover",this.onMove),(0,j.off)(l,"mouseup dragend touchend",this.endMove),(0,j.off)(l,"keydown",this.rollback),this.plh.style.display="none",n&&(t=this.getSourceModel(),this.selectOnEnd&&t&&t.set&&(t.set("status",""),t.set("status","selected"))),this.moved&&g){var k=this.toMove,V=(0,m.isArray)(k)?k:k?[k]:[n],q=0;V.length===1?i.push(this.move(g,V[0],_)):V.map(function(at){return{model:at,parents:e.parents(at)}}).sort(this.sort).forEach(function(at){var It=at.model,Wt=It.index(),ye=It.parent().getEl();i.push(e.move(g,It,Ds(Ds({},_),{indexEl:_.indexEl-q,index:_.index-q}))),ye===g&&Wt<=_.index&&q++})}this.plh&&(this.plh.style.display="none");var ot=this.dragHelper;if(ot&&(ot.parentNode.removeChild(ot),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,m.isFunction)(d)){var ft={target:t,parent:t&&t.parent(),index:t&&t.index()};i.length?i.forEach(function(at){return d(at,e,ft)}):d(null,this,Ds(Ds({},ft),{cancelled:1}))}(0,m.isFunction)(v)&&v({sorter:this})},r.prototype.move=function(t,e,n){var i,l,f=this.em,d=this.dropContent,v=(0,j.getElement)(e),g=[],_=n.method==="after"?n.indexEl+1:n.indexEl,k=this.validTarget(t,v),V=(0,Y.default)(t).data("collection"),q=k.trgModel,ot=k.srcModel,ft=k.draggable,at=q instanceof C.FE?1:k.droppable;if(V&&at&&ft){var It={at:_,action:"move-component"},Wt=this.isTextableActive(ot,q);if(d)i=(0,m.isFunction)(d)?d():d,It.avoidUpdateStyle=!0,It.action="add-component";else{var ye=ot.collection.indexOf(ot),Te=V===ot.collection;(!Te||!(ye===_||ye===_-1)||Wt)&&(i=ot.collection.remove(ot,{temporary:!0}),Te&&_>ye&&(It.at=_-1))}i&&(Wt?(delete It.at,l=q.getView().insertComponent(i,It)):l=V.add(i,It)),delete this.dropContent,delete this.prevTarget}else if(f){var Ve=k.dropInfo||(q==null?void 0:q.get("droppable")),qe=k.dragInfo||(ot==null?void 0:ot.get("draggable"));!V&&g.push("Target collection not found"),!at&&Ve&&g.push("Target is not droppable, accepts [".concat(Ve,"]")),!ft&&qe&&g.push("Component not draggable, acceptable by [".concat(qe,"]")),f.logWarning("Invalid target position",{errors:g,model:ot,context:"sorter",target:q})}return f==null||f.trigger("sorter:drag:end",{targetCollection:V,modelToDrop:i,warns:g,validResult:k,dst:t,srcEl:v}),l},r.prototype.rollback=function(t){(0,j.off)(this.getDocuments(),"keydown",this.rollback),(t.which||t.keyCode)==27&&(this.moved=!1,this.endMove())},r}(C.G7);const Ag=Pg;var ka=function(){return ka=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ka.apply(this,arguments)},jg=function(){function a(r){r===void 0&&(r={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=ka({},this.defOpts),this.setOptions(r),(0,m.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(r,t){r===void 0&&(r={}),this.opts=ka(ka({},t?this.defOpts:this.opts),r),this.setup()},a.prototype.setup=function(){var r=this.opts,t=r.prefix||"",e=r.appendTo||document.body,n=this.container;for(n||((n=document.createElement("div")).className="".concat(t,"resizer-c"),e.appendChild(n),this.container=n);n.firstChild;)n.removeChild(n.firstChild);var i={};for(var l in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(d){return i[d]=r[d]?function(v,g){g===void 0&&(g={});var _=g.prefix||"",k=document.createElement("i");return k.className=_+"resizer-h "+_+"resizer-h-"+v,k.setAttribute("data-"+_+"handler",v),k}(d,r):null}),i){var f=i[l];f&&n.appendChild(f)}this.handlers=i,this.mousePosFetcher=r.mousePosFetcher,this.updateTarget=r.updateTarget,this.posFetcher=r.posFetcher,this.onStart=r.onStart,this.onMove=r.onMove,this.onEnd=r.onEnd,this.onUpdateContainer=r.onUpdateContainer},a.prototype.toggleFrames=function(r){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,m.each)(t,function(e){return e.style.pointerEvents=r?"none":""})}},a.prototype.isHandler=function(r){var t=this.handlers;for(var e in t)if(t[e]===r)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var r;return(r=this.el)===null||r===void 0?void 0:r.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(r,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(r,t):function(n,i){var l=i||window,f=n.getBoundingClientRect();return{left:f.left+l.pageXOffset,top:f.top+l.pageYOffset,width:f.width,height:f.height}}(r)},a.prototype.focus=function(r){r&&r===this.el||(this.el=r,this.updateContainer({forceShow:!0}),(0,j.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,j.off)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(r){var t=r;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,n=this.getParentEl(),i=this.opts||{},l=this.mousePosFetcher,f="data-"+i.prefix+"handler",d=this.getElementPos(e,{target:"el"}),v=this.getElementPos(n),g=t.target;this.handlerAttr=g.getAttribute(f),this.clickedHandler=g,this.startDim={t:d.top,l:d.left,w:d.width,h:d.height},this.rectDim={t:d.top,l:d.left,w:d.width,h:d.height},this.startPos=l?l(t):{x:t.clientX,y:t.clientY},this.parentDim={t:v.top,l:v.left,w:v.width,h:v.height};var _=this.getDocumentEl();this.docs=_,(0,j.on)(_,"pointermove",this.move),(0,j.on)(_,"keydown",this.handleKeyDown),(0,j.on)(_,"pointerup",this.stop),(0,m.isFunction)(this.onStart)&&this.onStart(t,{docs:_,config:i,el:e,resizer:this}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(r){var t=r,e=this.onMove,n=this.mousePosFetcher,i=n?n(t):{x:t.clientX,y:t.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(r){var t=this.el,e=this.opts,n=this.docs||this.getDocumentEl();(0,j.off)(n,"pointermove",this.move),(0,j.off)(n,"keydown",this.handleKeyDown),(0,j.off)(n,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,m.isFunction)(this.onEnd)&&this.onEnd(r,{docs:n,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(r){var t=this.el,e=this.opts,n=this.rectDim,i=this.updateTarget,l=this.getSelectedHandler(),f=e.unitHeight,d=e.unitWidth,v=e.keyWidth,g=e.keyHeight;if((0,m.isFunction)(i))i(t,n,{store:r,selectedHandler:l,resizer:this,config:e});else{var _=t.style;_[v]=n.w+d,_[g]=n.h+f}this.updateContainer()},a.prototype.updateContainer=function(r){var t;r===void 0&&(r={});var e=this,n=e.opts,i=e.container,l=e.el,f=i.style;!n.avoidContainerUpdate&&l&&r.forceShow&&(f.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:i,resizer:this,opts:ka(ka({},n),r)})},a.prototype.getSelectedHandler=function(){var r=this.handlers;if(this.selectedHandler){for(var t in r)if(r[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(r){r.keyCode===27&&(this.rectDim=this.startDim,this.stop(r))},a.prototype.handleMouseDown=function(r){var t=r.target;this.isHandler(t)?(this.selectedHandler=t,this.start(r)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(r){var t,e=this.opts||{},n=e.step,i=this.startDim,l=e.minDim,f=e.maxDim,d=r.delta.x,v=r.delta.y,g=this.parentDim.w,_=this.parentDim.h,k=this.opts.unitWidth,V=this.opts.unitHeight,q=k==="%"?i.w/100*g:i.w,ot=V==="%"?i.h/100*_:i.h,ft={t:0,l:0,w:q,h:ot};if(r){var at=r.handlerAttr;~at.indexOf("r")&&(t=k==="%"?(0,j.normalizeFloat)((q+d*n)/g*100,.01):(0,j.normalizeFloat)(q+d*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),ft.w=t),~at.indexOf("b")&&(t=V==="%"?(0,j.normalizeFloat)((ot+v*n)/_*100,.01):(0,j.normalizeFloat)(ot+v*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),ft.h=t),~at.indexOf("l")&&(t=k==="%"?(0,j.normalizeFloat)((q-d*n)/g*100,.01):(0,j.normalizeFloat)(q-d*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),ft.w=t),~at.indexOf("t")&&(t=V==="%"?(0,j.normalizeFloat)((ot-v*n)/_*100,.01):(0,j.normalizeFloat)(ot-v*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),ft.h=t);var It=e.ratioDefault?!r.keys.shift:r.keys.shift;if(at.indexOf("c")<0&&It){var Wt=i.w/i.h;ft.w/ft.h>Wt?ft.h=Math.round(ft.w/Wt):ft.w=Math.round(ft.h*Wt)}return~at.indexOf("l")&&(ft.l=i.w-ft.w),~at.indexOf("t")&&(ft.t=i.h-ft.h),ft}},a}();const Mg=jg;var Lg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Df=function(){return Df=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Df.apply(this,arguments)};const Dg=function(a){function r(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=Ag,e.Resizer=Mg,e.Dragger=io.Z,e.helpers=Df({},j),e}return Lg(r,a),r.prototype.destroy=function(){},r}(Rt);var co,_o={},Xr={16:!1,18:!1,17:!1,91:!1},zd="all",Pa={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},Bd={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},Nf=function(a){return Bd[a]||a.toUpperCase().charCodeAt(0)},Pl=[];for(co=1;co<20;co++)Bd["f"+co]=111+co;function Ic(a,r){for(var t=a.length;t--;)if(a[t]===r)return t;return-1}function Ng(a,r){if(a.length!=r.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==r[t])return!1;return!0}var Ig={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function Fg(a){for(co in Xr)Xr[co]=a[Ig[co]]}function Rg(a){var r,t=a.keyCode,e=Ic(Pl,t);if(e>=0&&Pl.splice(e,1),t!=93&&t!=224||(t=91),t in Xr)for(r in Xr[t]=!1,Pa)Pa[r]==t&&(Zr[r]=!1)}function Vg(){for(co in Xr)Xr[co]=!1;for(co in Pa)Zr[co]=!1}function Zr(a,r,t){var e,n;e=Ud(a),t===void 0&&(t=r,r="all");for(var i=0;i<e.length;i++)n=[],(a=e[i].split("+")).length>1&&(n=Wd(a),a=[a[a.length-1]]),a=a[0],(a=Nf(a))in _o||(_o[a]=[]),_o[a].push({shortcut:e[i],scope:r,method:t,key:e[i],mods:n})}for(co in Pa)Zr[co]=!1;function If(){return zd||"all"}function Ud(a){var r;return(r=(a=a.replace(/\s/g,"")).split(","))[r.length-1]==""&&(r[r.length-2]+=","),r}function Wd(a){for(var r=a.slice(0,a.length-1),t=0;t<r.length;t++)r[t]=Pa[r[t]];return r}function Ff(a,r,t){a.addEventListener?a.addEventListener(r,t,!1):a.attachEvent&&a.attachEvent("on"+r,function(){t(window.event)})}Zr.setScope=function(a){zd=a||"all"},Zr.getScope=If,Zr.deleteScope=function(a){var r,t,e;for(r in _o)for(t=_o[r],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++},Zr.filter=function(a){var r=(a.target||a.srcElement).tagName;return!(r=="INPUT"||r=="SELECT"||r=="TEXTAREA")},Zr.isPressed=function(a){return typeof a=="string"&&(a=Nf(a)),Ic(Pl,a)!=-1},Zr.getPressedKeyCodes=function(){return Pl.slice(0)},Zr.unbind=function(a,r){var t,e,n,i,l,f=[];for(t=Ud(a),i=0;i<t.length;i++){if((e=t[i].split("+")).length>1&&(f=Wd(e)),a=e[e.length-1],a=Nf(a),r===void 0&&(r=If()),!_o[a])return;for(n=0;n<_o[a].length;n++)(l=_o[a][n]).scope===r&&Ng(l.mods,f)&&(_o[a][n]={})}},Zr.handlers=_o,Zr.init=function(a){Ff(a.document,"keydown",function(r){(function(t){var e,n,i,l,f,d;if(e=t.keyCode,Ic(Pl,e)==-1&&Pl.push(e),e!=93&&e!=224||(e=91),e in Xr)for(i in Xr[e]=!0,Pa)Pa[i]==e&&(Zr[i]=!0);else if(Fg(t),Zr.filter.call(this,t)&&e in _o){for(d=If(),l=0;l<_o[e].length;l++)if((n=_o[e][l]).scope==d||n.scope=="all"){for(i in f=n.mods.length>0,Xr)(!Xr[i]&&Ic(n.mods,+i)>-1||Xr[i]&&Ic(n.mods,+i)==-1)&&(f=!1);(n.mods.length!=0||Xr[16]||Xr[18]||Xr[17]||Xr[91])&&!f||n.method(t,n)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}})(r)}),Ff(a.document,"keyup",Rg),Ff(a,"focus",Vg)};const Fc=Zr,Hg={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo"},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo"},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};var zg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$d=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};(0,j.hasWin)()&&Fc.init(window);var Bg=function(a){function r(t){var e=a.call(this,t,"Keymaps",Hg)||this;return e.keymaster=Fc,e.keymaps={},e}return zg(r,a),r.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}},r.prototype.add=function(t,e,n,i){i===void 0&&(i={});var l=this.em,f=l.Commands,d=l.getEditor(),v=l.Canvas,g={id:t,keys:e,handler:n};return this.keymaps[t]&&this.remove(t),this.keymaps[t]=g,Fc(e,function(_,k){var V={event:_,h:k},q=(0,m.isString)(n)?f.get(n):n;if(!l.isEditing()&&!d.Canvas.isInputFocused()||i.force){i.prevent&&v.getCanvasView().preventDefault(_),(0,m.isFunction)(q)?q(d,0,V):f.runCommand(q,V);var ot=[t,k.shortcut,_];l.trigger.apply(l,$d(["keymap:emit"],ot,!1)),l.trigger.apply(l,$d(["keymap:emit:".concat(t)],ot,!1))}},void 0),l.trigger("keymap:add",g),g},r.prototype.get=function(t){return this.keymaps[t]},r.prototype.getAll=function(){return this.keymaps},r.prototype.remove=function(t){var e=this.em,n=this.get(t);if(n)return delete this.keymaps[t],n.keys.split(", ").forEach(function(i){Fc.unbind(i.trim())}),e==null||e.trigger("keymap:remove",n),n},r.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),Fc.handlers={},this},r.prototype.destroy=function(){this.removeAll(),this.keymaps={}},r}(Rt);const Ug=Bg,Wg={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};var $g=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const qg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $g(r,a),r.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},r.prototype.open=function(){this.set("open",!0)},r.prototype.close=function(){this.set("open",!1)},r}(yt);var Gg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lp=function(){return lp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},lp.apply(this,arguments)};const Kg=function(a){function r(t){var e=a.call(this,t)||this,n=e.model;return e.listenTo(n,"change:open",e.updateOpen),e.listenTo(n,"change:title",e.updateTitle),e.listenTo(n,"change:content",e.updateContent),e}return Gg(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,i=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(n,"one-bg ").concat(n,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(i,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},r.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},r.prototype.onClick=function(t){this.config.backdrop&&t.target===this.el&&this.hide()},r.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},r.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},r.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},r.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),i=this.model.get("content");e.length&&n.append(e),t.empty().append(i)},r.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},r.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},r.prototype.hide=function(){this.model.close()},r.prototype.show=function(){this.model.open()},r.prototype.updateAttr=function(t){var e=this,n=e.pfx,i=e.$el,l=e.el,f=[].slice.call(l.attributes).map(function(d){return d.name});i.removeAttr(f.join(" ")),i.attr(lp(lp({},t||{}),{class:"".concat(n,"container ").concat(t&&t.class||"").trim()}))},r.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},r}(wn);var Jg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Yg=function(a){function r(t){var e=a.call(this,t,"Modal",Wg)||this;return e.model=new qg(e),e.model.on("change:open",function(n,i){t.trigger("modal:".concat(i?"open":"close"))}),e.model.on("change",(0,m.debounce)(function(){var n=e._evData(),i=e.config.custom;(0,m.isFunction)(i)&&i(n),t.trigger("modal",n)},0)),e}return Jg(r,a),r.prototype._evData=function(){var t=this,e=this.getTitle(),n=this.getContent(),i=this.model.attributes;return{open:i.open,attributes:i.attributes,title:(0,m.isString)(e)?(0,Ge.rw)(e):e,content:(0,m.isString)(n)?(0,Ge.rw)(n):n.get?n.get(0):n,close:function(){t.close()}}},r.prototype.postRender=function(t){var e=t.model.config.el||t.el,n=this.render();n&&(e==null||e.appendChild(n))},r.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},r.prototype.close=function(){return this.model.close(),this},r.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},r.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},r.prototype.isOpen=function(){return!!this.model.get("open")},r.prototype.setTitle=function(t){return this.model.set("title",t),this},r.prototype.getTitle=function(){return this.model.get("title")},r.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},r.prototype.getContent=function(){return this.model.get("content")},r.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},r.prototype.getModel=function(){return this.model},r.prototype.render=function(){var t;if(!this.config.custom){var e=Kg.extend(this.config.extend),n=this.modal&&this.modal.el;return this.modal=new e({el:n,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},r.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},r}(Rt);var qd="sw-visibility",Gd="export-template",Kd="open-sm",Jd="open-tm",Yd="open-layers",Xd="open-blocks",Rf="fullscreen",Vf="preview";const Hf={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:qd,className:"fa fa-square-o",command:"core:component-outline",context:qd,attributes:{title:"View components"}},{id:Vf,className:"fa fa-eye",command:Vf,context:Vf,attributes:{title:"Preview"}},{id:Rf,className:"fa fa-arrows-alt",command:Rf,context:Rf,attributes:{title:"Fullscreen"}},{id:Gd,className:"fa fa-code",command:Gd,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Kd,className:"fa fa-paint-brush",command:Kd,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Jd,className:"fa fa-cog",command:Jd,togglable:!1,attributes:{title:"Settings"}},{id:Yd,className:"fa fa-bars",command:Yd,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Xd,className:"fa fa-th-large",command:Xd,togglable:!1,attributes:{title:"Open Blocks"}}]}]};var Xg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Zd=function(a){function r(t,e){var n=a.call(this,t,e)||this;return n.get("buttons").length&&n.set("buttons",new th(n.module,n.get("buttons"))),n}return Xg(r,a),r.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(r.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),r}(yt);var Zg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qd=function(a){function r(t,e){return a.call(this,t,e,Zd)||this}return Zg(r,a),r.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(n,i){n!==t&&(n.set("active",!1),e&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(t,e))})},r.prototype.deactivateAll=function(t,e){var n=t||"";this.forEach(function(i){i.get("context")==n&&i!==e&&i.set("active",!1,{fromCollection:!0})})},r.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(n,i){n.get("context")==e&&n.set("disable",!0)})},r.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(n,i){n!==t&&(n.set("disable",!0),e&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(t,e))})},r}(Kt);const th=Qd;Qd.prototype.model=Zd;var Qg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const eh=function(a){function r(t,e){var n=a.call(this,t,e)||this,i=n.get("buttons")||[];return n.buttons=new th(t,i),n}return Qg(r,a),r.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(r.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),r}(yt);var tv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nh=function(a){function r(t,e){return a.call(this,t,e,eh)||this}return tv(r,a),r}(Kt);const ev=nh;nh.prototype.model=eh;var nv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Al=function(){return Al=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Al.apply(this,arguments)},rv=function(a){function r(t){var e=a.call(this,t)||this,n=e,i=n.model,l=n.em,f=n.pfx,d=n.ppfx,v=i.className,g=i.attributes,_=g.command,k=g.listen;if(e.id=f+i.get("id"),e.activeCls="".concat(f,"active ").concat(d,"four-color"),e.disableCls="".concat(d,"disabled"),e.btnsVisCls="".concat(f,"visible"),e.className=f+"btn"+(v?" "+v:""),e.listenTo(i,"change",e.render),e.listenTo(i,"change:active updateActive",e.updateActive),e.listenTo(i,"checkActive",e.checkActive),e.listenTo(i,"change:bntsVis",e.updateBtnsVis),e.listenTo(i,"change:attributes",e.updateAttributes),e.listenTo(i,"change:className",e.updateClassName),e.listenTo(i,"change:disable",e.updateDisable),l&&(0,m.isString)(_)&&k){var V={fromListen:!0};e.listenTo(l,"run:".concat(_),function(){return i.set("active",!0,V)}),e.listenTo(l,"stop:".concat(_),function(){return i.set("active",!1,V)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return nv(r,a),r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.events=function(){return{click:"clicked"}},r.prototype.updateClassName=function(){var t=this.model,e=this.pfx,n=t.className,i=t.get("attributes").class,l="".concat(i||""," ").concat(e,"btn ").concat(n||"");this.$el.attr("class",l.trim())},r.prototype.updateAttributes=function(){var t=this,e=t.em,n=t.model,i=t.$el,l=n.get("attributes")||{},f=e&&e.t&&e.t("panels.buttons.titles.".concat(n.id));i.attr(l),f&&i.attr({title:f}),this.updateClassName()},r.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},r.prototype.updateActive=function(t,e,n){var i;n===void 0&&(n={});var l=this,f=l.model,d=l.commands,v=l.$el,g=l.activeCls,_=n.fromCollection,k=n.fromListen,V=f.get("context"),q=f.get("options"),ot=f.command,ft={};ot&&(d&&(0,m.isString)(ot)?ft=d.get(ot)||{}:(0,m.isFunction)(ot)?ft=d.create({run:ot}):ot!==null&&(0,m.isObject)(ot)&&(ft=d.create(ot)),f.active?(!_&&((i=f.collection)===null||i===void 0||i.deactivateAll(V,f)),f.set("active",!0,{silent:!0}).trigger("checkActive"),!k&&d.runCommand(ft,Al(Al({},q),{sender:f})),ft.noStop&&f.set("active",!1)):(v.removeClass(g),!k&&d.stopCommand(ft,Al(Al({},q),{sender:f,force:1}))))},r.prototype.updateDisable=function(){var t=this.disableCls,e=this.model.disable;this.$el[e?"addClass":"removeClass"](t)},r.prototype.checkActive=function(){var t=this,e=t.model,n=t.$el,i=t.activeCls;e.active?n.addClass(i):n.removeClass(i)},r.prototype.clicked=function(t){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},r.prototype.toggleActive=function(){var t=this.model,e=this.em,n=t.active,i=t.togglable;n&&!i||(t.active=!n,n?t.runDefaultCommand&&e.runDefault():t.stopDefaultCommand&&e.stopDefault())},r.prototype.render=function(){var t=this.model,e=t.get("label"),n=this.$el;return!t.get("el")&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this},r}(wn);const ov=rv;var iv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const sv=function(a){function r(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return iv(r,a),r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,i=t.get("el"),l=new ov({el:i,model:t}).render().el;return n?n.appendChild(l):this.$el.append(l),l},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(n){return t.addToCollection(n,e)}),this.$el.append(e),this.$el.attr("class",(0,m.result)(this,"className")),this},r}(wn);var av=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zf=function(){return zf=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},zf.apply(this,arguments)},lv=function(a){function r(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return av(r,a),r.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},r.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},r.prototype.toggleVisible=function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},r.prototype.attributes=function(){return this.model.get("attributes")},r.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,n=this.model.get("resizable");if(e&&n){var i,l,f,d=n===!0?[1,1,1,1]:n,v=d.length,g=0;v==2?(i=d[0],f=d[0],l=d[1],g=d[1]):v==4&&(i=d[0],l=d[1],f=d[2],g=d[3]);var _=new e.Utils.Resizer(zf({tc:i,cr:l,bc:f,cl:g,tl:0,tr:0,bl:0,br:0,appendTo:this.el,silentFrames:1,avoidContainerUpdate:1,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger("change:canvasOffset")},posFetcher:function(k,V){var q=V.target,ot=k.style,ft=_.getConfig(),at=ft.keyWidth,It=ft.keyHeight,Wt=k.getBoundingClientRect(),ye=q=="container",Te=ot[at],Ve=ot[It];return{left:0,top:0,width:Te&&!ye?parseFloat(Te):Wt.width,height:Ve&&!ye?parseFloat(Ve):Wt.height}}},n));_.blur=function(){},_.focus(this.el)}},r.prototype.render=function(){var t=this.model.buttons,e=this.$el,n=this.ppfx,i="".concat(this.className," ").concat(this.id," ").concat(n,"one-bg ").concat(n,"two-color");if(e.addClass(i),this.toggleVisible(),t.length){var l=new sv(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},r}(wn);const cv=lv;var uv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const pv=function(a){function r(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return uv(r,a),r.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,i=(this.config,t.get("el")),l=new cv(t),f=l.render().el,d=t.get("appendTo");return i||(d?document.querySelector(d).appendChild(f):n?n.appendChild(f):this.$el.append(f)),l.initResize(),f},r.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each(function(i){return t.addToCollection(i,n)}),e.append(n),e.attr("class",this.className),this},r}(wn);var fv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const dv=function(a){function r(t){var e=a.call(this,t,"Panels",Hf)||this;for(var n in e.panels=new ev(e,e.config.defaults),Hf)n in e.config||(e.config[n]=Hf[n]);return e}return fv(r,a),r.prototype.getPanels=function(){return this.panels},r.prototype.getPanelsEl=function(){return this.PanelsViewObj&&this.PanelsViewObj.el},r.prototype.addPanel=function(t){return this.panels.add(t)},r.prototype.removePanel=function(t){return this.panels.remove(t)},r.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},r.prototype.addButton=function(t,e){var n=this.getPanel(t);return n?n.get("buttons").add(e):null},r.prototype.removeButton=function(t,e){var n=this.getPanel(t);return n&&n.get("buttons").remove(e)},r.prototype.getButton=function(t,e){var n=this.getPanel(t);if(n){var i=n.get("buttons").where({id:e});return i.length?i[0]:null}return null},r.prototype.render=function(){return this.PanelsViewObj&&this.PanelsViewObj.remove(),this.PanelsViewObj=new pv(this.panels),this.PanelsViewObj.render().el},r.prototype.active=function(){this.getPanels().each(function(t){t.get("buttons").each(function(e){e.get("active")&&e.trigger("updateActive")})})},r.prototype.disableButtons=function(){this.getPanels().each(function(t){t.get("buttons").each(function(e){e.get("disable")&&e.trigger("change:disable")})})},r.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},r}(Rt),hv={stylePrefix:"cm-",inlineCss:!1};var gv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t};const mv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return gv(r,a),r.prototype.build=function(t,e){e===void 0&&(e={});var n=e.em,i=vv(e,["em"]);if(e.cleanId&&n){var l=n.Css.getAll().toJSON().map(function(f){var d=f.selectors,v=d&&d.length===1&&d.models[0];return v&&v.isId()&&v.get("name")}).filter(Boolean);i.attributes||(i.attributes=function(f,d){var v=d.id;return v&&v[0]==="i"&&!f.get("script")&&!f.get("attributes").id&&l.indexOf(v)<0&&delete d.id,d})}return t.toHTML(i)},r}(C.Hn);var yv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return yv(r,a),r.prototype.build=function(t){var e=this,n=t.toJSON();return this.beforeEach(n),(0,m.each)(n,function(i,l){var f=n[l];if(f instanceof C.Hn)n[l]=e.build(f);else if(f instanceof C.FE){var d=f;n[l]=[],d.length&&d.forEach(function(v,g){n[l][g]=e.build(v)})}}),n},r.prototype.beforeEach=function(t){delete t.status},r}(C.Hn);const wv=bv;var _v=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return _v(r,a),r.prototype.mapModel=function(t){var e,n=this,i="",l=t.get("script-export")||t.get("script"),f=t.get("type"),d=t.get("components"),v=t.getId();if(l){var g=t.get("attributes");g=(0,m.extend)({},g,{id:v}),t.set("attributes",g,{silent:!0});var _=t.getScriptString(l),k=t.get("script-props");if(t.get("scriptUpdated")&&!k)this.mapJs[f+"-"+v]={ids:[v],code:_};else{var V=void 0,q=this.mapJs[f];if(k&&(V=t.__getScriptProps()),q)q.ids.push(v),V&&(q.props[v]=V);else{var ot={ids:[v],code:_};V&&(ot.props=((e={})[v]=V,e)),this.mapJs[f]=ot}}}return d.forEach(function(ft){i+=n.mapModel(ft)}),i},r.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e,n,i="";for(var l in this.mapJs){var f=this.mapJs[l];if(f.code)if(f.props){if(e=f.code,n=void 0,(((n=e.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length===0)continue;i+=`
          var props = `.concat(JSON.stringify(f.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(f.code,`.bind(el))(props[el.id]);
          }`)}else{var d="#"+f.ids.join(", #");i+=`
          var items = document.querySelectorAll('`.concat(d,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(f.code,`
}.bind(items[i]))();
          }`)}}return i},r}(C.Hn);const xv=Cv;var Rc,Sv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bf=function(){return Bf=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Bf.apply(this,arguments)};(0,j.hasWin)()&&(Rc=Q(631),Q(531),Q(629),Q(210));var rh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Sv(r,a),r.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0}},r.prototype.init=function(t){return(0,m.bindAll)(this,"onChange"),this.editor=Rc.fromTextArea(t,Bf({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},r.prototype.onChange=function(){this.trigger("update",this)},r.prototype.getEditor=function(){return this.editor},r.prototype.getElement=function(){return this.element},r.prototype.setElement=function(t){return this.element=t,this},r.prototype.refresh=function(){return this.getEditor().refresh(),this},r.prototype.focus=function(){return this.getEditor().focus(),this},r.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},r.prototype.setContent=function(t,e){var n=this;e===void 0&&(e={});var i=this.editor;i&&(i.setValue(t),i.autoFormatRange&&(Rc.commands.selectAll(i),i.autoFormatRange(i.getCursor(!0),i.getCursor(!1)),Rc.commands.goDocStart(i)),!e.noRefresh&&setTimeout(function(){return n.refresh()}))},r}(C.Hn);const Ov=rh;rh.prototype.CodeMirror=Rc;var Tv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ev=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a};const kv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Tv(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.codeName,i=t.label;return U(oh||(oh=Ev([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,n,e,i,e)},r.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},r.prototype.render=function(){var t=this,e=t.model,n=t.pfx,i=t.$el,l=e.toJSON();return l.pfx=n,i.html(this.template(l)),i.attr("class","".concat(n,"editor-c")),i.find("#".concat(n,"code")).append(e.get("input")),this},r}(C.G7);var oh,Pv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Av="CodeMirror",jv=function(a){function r(t){var e=a.call(this,t,"CodeManager",hv)||this;e.EditorView=kv;var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new mv,css:new nf,json:new wv,js:new xv},e.defViewers={CodeMirror:new Ov},e.loadDefaultGenerators().loadDefaultViewers(),e}return Pv(r,a),r.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},r.prototype.getGenerator=function(t){return this.generators[t]},r.prototype.getGenerators=function(){return this.generators},r.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},r.prototype.getViewer=function(t){return this.viewers[t]},r.prototype.getViewers=function(){return this.viewers},r.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,m.isUndefined)(t.type)?Av:t.type,n=this.getViewer(e)&&this.getViewer(e).clone(),i=document.createElement("div"),l=document.createElement("textarea");return i.appendChild(l),n.set(t),n.init(l),n.setElement(i),n},r.prototype.updateViewer=function(t,e){t.setContent(e)},r.prototype.getCode=function(t,e,n){n===void 0&&(n={}),n.em=this.em;var i=this.getGenerator(e);return i?i.build(t,n):""},r.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},r.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},r.prototype.destroy=function(){},r}(Rt);const Mv=jv;var Lv=Q(410),Dv=Q.n(Lv);const Nv={maximumStackLength:500,trackSelection:!0};var Iv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ui=function(){return Ui=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ui.apply(this,arguments)},Fv=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},cp=function(a){return a.avoidStore||a.noUndo},ih=function(a){return Object.keys(a.changedAttributes())},Rv=function(a){function r(t){var e=a.call(this,t,"UndoManager",Nv)||this;e.config._disable&&(e.config.maximumStackLength=0);var n=!0;return e.um=new(Dv())(Ui({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(i){var l=i.get("_undo");if(l){var f=i.get("_undoexc");if((0,m.isArray)(f)&&ih(i).some(function(d){return f.indexOf(d)>=0}))return!1;if((0,m.isBoolean)(l)||(0,m.isArray)(l)&&ih(i).some(function(d){return l.indexOf(d)>=0}))return!0}return!1},on:function(i,l,f){var d=this;!this.beforeCache&&(this.beforeCache=i.previousAttributes());var v=f||l||{};if(v.noUndo&&setTimeout(function(){d.beforeCache=null}),!cp(v)){var g=i.toJSON({fromUndo:n}),_={object:i,before:this.beforeCache,after:g};if(this.beforeCache=null,!(0,m.isEmpty)(g))return _}}}),e.um.changeUndoType("add",{on:function(i,l,f){if(f===void 0&&(f={}),!cp(f)&&e.isRegistered(l))return{object:l,before:void 0,after:i,options:Ui(Ui({},f),{fromUndo:n})}}}),e.um.changeUndoType("remove",{on:function(i,l,f){if(f===void 0&&(f={}),!cp(f)&&e.isRegistered(l))return{object:l,before:i,after:void 0,options:Ui(Ui({},f),{fromUndo:n})}}}),e.um.changeUndoType("reset",{undo:function(i,l){i.reset(l,{fromUndo:n})},redo:function(i,l,f){i.reset(f,{fromUndo:n})},on:function(i,l){if(l===void 0&&(l={}),!cp(l)&&e.isRegistered(i))return{object:i,before:l.previousModels,after:Fv([],i.models,!0),options:Ui(Ui({},l),{fromUndo:n})}}}),e.um.on("undo redo",function(){t.trigger("change:canvasOffset"),t.getSelectedAll().map(function(i){return i.trigger("rerender:layer")})}),["undo","redo"].forEach(function(i){return e.um.on(i,function(){return t.trigger(i)})}),e}return Iv(r,a),r.prototype.postLoad=function(){var t=this.config,e=this.em;t.trackSelection&&e&&this.add(e.get("selected"))},r.prototype.add=function(t){return this.um.register(t),this},r.prototype.remove=function(t){return this.um.unregister(t),this},r.prototype.removeAll=function(){return this.um.unregisterAll(),this},r.prototype.start=function(){return this.um.startTracking(),this},r.prototype.stop=function(){return this.um.stopTracking(),this},r.prototype.undo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.undo(t),this},r.prototype.undoAll=function(){return this.um.undoAll(),this},r.prototype.redo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.redo(t),this},r.prototype.redoAll=function(){return this.um.redoAll(),this},r.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},r.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},r.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},r.prototype.getStack=function(){return this.um.stack},r.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(n){var i=n.get("magicFusionIndex");e.indexOf(i)<0&&(e.push(i),t.push(n))}),t},r.prototype.skip=function(t){this.stop(),t(),this.start()},r.prototype.getGroupedStack=function(){var t={},e=this.getStack();return e.forEach(function(n,i){var l=n.get("magicFusionIndex"),f=function(d,v){var g=d.attributes,_=g.type,k=g.after,V=g.before,q=g.object,ot=g.options;return{index:v,type:_,after:k,before:V,object:q,options:ot===void 0?{}:ot}}(n,i);t[l]?t[l].push(f):t[l]=[f]}),Object.keys(t).map(function(n){var i=t[n];return{index:i[i.length-1].index,actions:i,labels:(0,m.unique)(i.reduce(function(l,f){var d,v=(d=f.options)===null||d===void 0?void 0:d.action;return v&&l.push(v),l},[]))}})},r.prototype.goToGroup=function(t){var e=this;if(t){var n=this.getPointer(),i=t.index-n;(0,m.times)(Math.abs(i),function(){e[i<0?"undo":"redo"](!1)})}},r.prototype.getPointer=function(){return this.getStack().pointer},r.prototype.clear=function(){return this.um.clear(),this},r.prototype.getInstance=function(){return this.um},r.prototype.destroy=function(){this.clear().removeAll()},r}(Rt);const Vv=Rv;var jl=function(){return jl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},jl.apply(this,arguments)},Uf="_rte",sh=1,Wf=0,ah=-1,up=function(a,r){r===void 0&&(r="A");var t=a.selection()||{},e=t.anchorNode,n=t.focusNode,i=e==null?void 0:e.parentNode,l=n==null?void 0:n.parentNode;return(i==null?void 0:i.nodeName)==r||(l==null?void 0:l.nodeName)==r},pp="data-selectme",Vc={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&up(a)?sh:Wf},result:function(a){up(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(pp,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a!=null&&a.selection()&&up(a,"SPAN")?ah:Wf},result:function(a){!up(a,"SPAN")&&a.insertHTML("<span ".concat(pp,">").concat(a.selection(),"</span>"),{select:!0})}}},Hv=function(){function a(r,t,e){e===void 0&&(e={});var n=this;if(this.em=r,this.settings=e,t[Uf])return t[Uf];t[Uf]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var i=(e.actions||[]).map(function(g){var _=g;return(0,m.isString)(g)?_=jl({},Vc[g]):Vc[g.name]&&(_=jl(jl({},Vc[g.name]),g)),_}),l=i.length?i:Object.keys(Vc).map(function(g){return Vc[g]});e.classes=jl({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var f=e.classes,d=e.actionbar;if(this.actionbar=d,this.classes=f,this.actions=l,!d){var v=e.actionbarContainer;(d=document.createElement("div")).className=f.actionbar,v==null||v.appendChild(d),this.actionbar=d,l.forEach(function(g){return n.addAction(g)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.destroy=function(){},a.prototype.setEl=function(r){this.el=r,this.doc=r.ownerDocument},a.prototype.updateActiveActions=function(){var r=this;this.getActions().forEach(function(t){var e=t.update,n=t.btn,i=r.classes,l=i.active,f=i.inactive,d=i.disabled,v=t.state,g=t.name,_=r.doc;if(n.className=n.className.replace(l,"").trim(),n.className=n.className.replace(f,"").trim(),n.className=n.className.replace(d,"").trim(),v)switch(v(r,_)){case sh:n.className+=" ".concat(l);break;case Wf:n.className+=" ".concat(f);break;case ah:n.className+=" ".concat(d)}else _.queryCommandSupported(g)&&_.queryCommandState(g)&&(n.className+=" ".concat(l));e==null||e(r,t)})},a.prototype.enable=function(r){return this.enabled?this:this.__toggleEffects(!0,r)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(r,t){r===void 0&&(r=!1),t===void 0&&(t={});var e=r?j.on:j.off,n=this.el,i=this.doc;if(this.actionbarEl().style.display=r?"":"none",n.contentEditable="".concat(!!r),e(n,"mouseup keyup",this.updateActiveActions),e(i,"keydown",this.__onKeydown),e(i,"paste",this.__onPaste),this.enabled=r,r){var l=t.event;if(this.syncActions(),this.updateActiveActions(),l){var f=null;if(i.caretRangeFromPoint){var d=(0,j.getPointerEvent)(l);f=i.caretRangeFromPoint(d.clientX,d.clientY)}else l.rangeParent&&(f=i.createRange()).setStart(l.rangeParent,l.rangeOffset);var v=i.getSelection();v==null||v.removeAllRanges(),f&&(v==null||v.addRange(f))}n.focus()}return this},a.prototype.__onKeydown=function(r){var t=r,e=this.doc;t.key!=="Enter"||["insertOrderedList","insertUnorderedList"].some(function(n){return e.queryCommandState(n)})||(e.execCommand("insertLineBreak"),t.preventDefault())},a.prototype.__onPaste=function(r){var t=r.clipboardData||window.clipboardData,e=t.getData("text"),n=t.getData("text/html");if(e&&!n){r.preventDefault();var i=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,i)}},a.prototype.syncActions=function(){var r=this;this.getActions().forEach(function(t){if(r.actionbar&&(!t.state||t.state&&t.state(r,r.doc)>=0)){var e=t.event||"click";t.btn["on".concat(e)]=function(){t.result(r,t),r.updateActiveActions()}}})},a.prototype.addAction=function(r,t){t===void 0&&(t={});var e=t.sync,n=document.createElement("span"),i=r.icon,l=r.attributes||{};for(var f in n.className=this.classes.button,r.btn=n,l)n.setAttribute(f,l[f]);typeof i=="string"?n.innerHTML=i:n.appendChild(i),this.actionbarEl().appendChild(n),e&&(this.actions.push(r),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(r,t){this.doc.execCommand(r,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(r,t){var e=(t===void 0?{}:t).select,n=this,i=n.em,l=n.doc,f=n.el,d=l.getSelection();if(d&&d.rangeCount){var v=(0,j.getModel)(f),g=l.createElement("div"),_=d.getRangeAt(0);_.deleteContents(),(0,m.isString)(r)?g.innerHTML=r:r&&g.appendChild(r),Array.prototype.slice.call(g.childNodes).forEach(function(k){_.insertNode(k)}),d.removeAllRanges(),d.addRange(_),f.focus(),e&&v&&(v.once("rte:disable",function(){var k=v.find("[".concat(pp,"]"))[0];k&&(i.setSelected(k),k.removeAttributes(pp))}),v.trigger("disable"))}},a}();const zv=Hv,Bv={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"]};var Uv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wv=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(_){_(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},$v=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(_){g=[6,_],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},qv=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},$f="change:canvasOffset frame:scroll component:update",Gv=function(a){function r(t){var e=a.call(this,t,"RichTextEditor",Bv)||this,n=e.config,i=n.pStylePrefix;if(i&&(n.stylePrefix=i+n.stylePrefix),e.pfx=n.stylePrefix,e.actions=n.actions||[],!(0,j.hasWin)())return e;var l=document.createElement("div");return l.className="".concat(i,"rte-toolbar ").concat(i,"one-bg"),e.toolbar=l,e.initRte(document.createElement("div")),(0,j.on)(l,"mousedown",function(f){return f.stopPropagation()}),e}return Uv(r,a),r.prototype.destroy=function(){var t,e,n;(t=this.globalRte)===null||t===void 0||t.destroy(),(n=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),(0,Ge.L_)(this.toolbar)},r.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},r.prototype.initRte=function(t){var e=this.globalRte,n=this,i=n.em,l=n.pfx,f=n.actionbar,d=n.config,v=this.actions||qv([],d.actions,!0),g={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=i,e.setEl(t)):(e=new zv(i,t,{classes:g,actions:v,actionbar:f,actionbarContainer:this.toolbar}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},r.prototype.add=function(t,e){var n;e===void 0&&(e={}),e.name=t,(n=this.globalRte)===null||n===void 0||n.addAction(e,{sync:!0})},r.prototype.get=function(t){var e,n;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(i){i.name==t&&(n=i)}),n},r.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},r.prototype.remove=function(t){var e,n=this.getAll(),i=this.get(t);if(i){var l=i.btn,f=n.indexOf(i);(e=l==null?void 0:l.parentNode)===null||e===void 0||e.removeChild(l),n.splice(f,1)}return i},r.prototype.getToolbarEl=function(){return this.toolbar},r.prototype.updatePosition=function(){var t=this.em,e=this.toolbar,n="px",i=t.Canvas,l=e.style,f=i.getTargetToElementFixed(this.lastEl,e,{event:"rteToolbarPosUpdate",left:0});l.top=(f.top||0)+n,l.left=(f.left||0)+n},r.prototype.enable=function(t,e,n){return n===void 0&&(n={}),Wv(this,void 0,void 0,function(){var i,l,f,d,v;return $v(this,function(g){switch(g.label){case 0:return this.lastEl=t.el,l=(i=this).customRte,f=i.em,d=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(d,e):this.initRte(d).enable(n)];case 1:return v=g.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off($f,this.updatePosition,this),f.on($f,this.updatePosition,this),f.trigger("rte:enable",t,v)),[2,v]}})})},r.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},r.prototype.disable=function(t,e){var n=this.em,i=this.customRte,l=t.getChildrenContainer();i?i.disable(l,e):e&&e.disable(),this.hideToolbar(),n&&(n.off($f,this.updatePosition,this),n.trigger("rte:disable",t,e))},r}(Rt);const Kv=Gv;var qf=Q(790);const Jv={stylePrefix:"com-",defaults:{},strict:!0};var Yv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fp=function(){return fp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},fp.apply(this,arguments)},lh=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},ch=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],Xv=function(a){function r(t){var e=a.call(this,t,"Commands",Jv)||this;e.CommandAbstract=qf.default,e.defaultCommands={},e.commands={},e.active={};var n=e.config,i=n.pStylePrefix,l=e.defaultCommands;for(var f in i&&(n.stylePrefix=i+n.stylePrefix),Object.keys(n.defaults).forEach(function(d){var v=n.defaults[d];v.id&&e.add(v.id,v)}),l["tlb-delete"]={run:function(d){return d.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(d){d.runCommand("core:copy"),d.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(d,v,g){g===void 0&&(g={});var _=d.getModel(),k=g&&g.event,V=g.target,q=V||d.getSelected(),ot=V?[V]:lh([],d.getSelectedAll(),!0),ft=k&&k.type=="dragstart",at={preserveSelected:1};if(!q||!q.get("draggable"))return _.logWarning("The element is not draggable");var It=q.get("dmode")||_.get("dmode"),Wt=function(){return _.stopDefault(at)},ye=(0,m.includes)(["absolute","translate"],It);ot.forEach(function(En){return En.trigger("disable")}),ft?setTimeout(Wt,0):Wt();var Te=function(En){_.trigger("".concat(Cr,":start"),En)},Ve=function(En){_.trigger(Cr,En)},qe=function(En,Fr,to){ot.forEach(function(eo){return eo.set("status","selected")}),d.select(ot),q.emitUpdate(),_.trigger("".concat(Cr,":end"),to),setTimeout(function(){return _.runDefault(at)}),(ye||to.cancelled)&&_.set("_cmpDrag",1)};if(ye)d.runCommand("core:component-drag",{guidesInfo:1,mode:It,target:q,onStart:Te,onDrag:Ve,onEnd:qe,event:k});else{ft&&k.dataTransfer.setDragImage(q.view.el,0,0);var an=d.Commands.get("move-comp");an.onStart=Te,an.onDrag=Ve,an.onEndMoveFromModel=qe,an.initSorterFromModels(ot)}ot.forEach(function(En){return En.set("status","freezed-selected")})}},l["core:undo"]=function(d){return d.UndoManager.undo()},l["core:redo"]=function(d){return d.UndoManager.redo()},ch.forEach(function(d){var v=d[2],g=Q(828)("./".concat(d[1])).default,_="core:".concat(d[0]);l[_]=g,v&&(l[v]=g,["run","stop"].forEach(function(k){t.on("".concat(k,":").concat(v),function(){for(var V=[],q=0;q<arguments.length;q++)V[q]=arguments[q];return t.trigger.apply(t,lh(["".concat(k,":").concat(_)],V,!1))})}))}),n.model=t.Canvas,l)e.add(f,l[f]);return e}return Yv(r,a),r.prototype.add=function(t,e){var n=(0,m.isFunction)(e)?{run:e}:e;return n.stop||(n.noStop=!0),delete n.initialize,n.id=t,this.commands[t]=qf.default.extend(n),this},r.prototype.get=function(t){var e=this.commands[t];return(0,m.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},r.prototype.extend=function(t,e){e===void 0&&(e={});var n=this.get(t);if(n){var i=fp(fp({},n.constructor.prototype),e);this.add(t,i);var l=ch.filter(function(f){return"core:".concat(f[0])===t&&f[2]})[0];l&&this.add(l[2],i)}return this},r.prototype.has=function(t){return!!this.commands[t]},r.prototype.getAll=function(){return this.commands},r.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},r.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},r.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},r.prototype.getActive=function(){return this.active},r.prototype.runCommand=function(t,e){var n;if(e===void 0&&(e={}),t&&t.run){var i=this.em,l=this.config,f=t.id,d=i.Editor;this.isActive(f)&&!e.force&&l.strict||(n=d&&t.callRun(d,e),f&&t.stop&&!t.noStop&&!e.abort&&(this.active[f]=n))}return n},r.prototype.stopCommand=function(t,e){var n;if(e===void 0&&(e={}),t&&t.run){var i=this.em,l=this.config,f=t.id,d=i.Editor;(this.isActive(f)||e.force||!l.strict)&&(f&&delete this.active[f],n=t.callStop(d,e))}return n},r.prototype.create=function(t){return t.stop||(t.noStop=!0),new(qf.default.extend(t))(this.config)},r.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},r}(Rt);const Zv=Xv,Qv={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var tm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qr=function(){return Qr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Qr.apply(this,arguments)},em=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},uh=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Gf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return tm(r,a),r.getDefaults=function(){return(0,m.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var n=this.getId()||"",i=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(i||n).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!i&&this.set("name",(0,j.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),r.callInit(this,t,e)},r.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},r.prototype.__upTargets=function(t,e){var n,i=this;e===void 0&&(e={});var l=this.em.Styles,f=this.getName(),d=e.__clear,v=d?"":this.__getFullValue(e),g=this.__getParentProp(),_=this.changedAttributes(),k=(0,m.keys)(_).reduce(function(It,Wt){return It[Wt]=i.previous(Wt),It},{}),V=uh(uh([],(0,m.keys)(this.__getClearProps()),!0),["__p"],!1),q=(0,m.keys)(_),ot=!e.__up&&!g&&(d||V.some(function(It){return q.indexOf(It)>=0})),ft=this.get("onChange"),at={property:this,from:k,to:_,value:v,opts:e};l.__trgEv(l.events.propertyUpdate,at),ft&&ft(at),ot&&this.__upTargetsStyle(((n={})[f]=v,n),e)},r.prototype.__upTargetsStyle=function(t,e){var n,i=(n=this.em)===null||n===void 0?void 0:n.get("StyleManager");i==null||i.addStyleTargets(Qr(Qr({},t),{__p:!!e.avoidStore}),e)},r.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var n=e.partial,i=em(e,["partial"]);return t.__p=!(!i.avoidStore&&!n),this.set(t,Qr(Qr({},i),{avoidStore:t.__p}))},r.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,Qr(Qr({},e),{__up:!0}))},r.prototype.init=function(){},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("property")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,i=n===void 0||n,l=this.getId(),f=this.get("name")||this.get("label");return i&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||f},r.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,n=this.get("value");return this.hasValue()||e?n:this.getDefaultValue()},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget(),n=this.get("value");return!(0,m.isUndefined)(n)&&n!==""&&!e},r.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},r.prototype.getStyle=function(t){var e;t===void 0&&(t={});var n=this.getName();return(e={})[t.camelCase?(0,j.camelCase)(n):n]=this.__getFullValue(t),e},r.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,m.isUndefined)(t)?this.get("defaults"):t)},r.prototype.upValue=function(t,e){e===void 0&&(e={});var n=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Qr(Qr({},t),{__clear:!0})),this},r.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},r.prototype.getParent=function(){return this.__getParentProp()||null},r.prototype.isFull=function(){return!!this.get("full")},r.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},r.prototype.__getClearProps=function(){return{value:""}},r.prototype.setValue=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var i=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(i,Qr({avoidStore:l},n))},r.prototype.setValueFromInput=function(t,e,n){n===void 0&&(n={}),this.setValue(t,e,Qr(Qr({},n),{fromInput:1}))},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n={value:t},i="!important";if((0,m.isString)(t)&&t.indexOf(i)!==-1&&(n.value=t.replace(i,"").trim(),n.important=!0),!this.get("functionName")&&!e.complete)return n;var l=[],f="".concat(n.value),d=f.indexOf("(")+1,v=f.lastIndexOf(")"),g=f.substring(0,d-1);if(g&&(n.functionName=g),l.push(d),v>=0&&l.push(v),n.value=String.prototype.substring.apply(f,l),e.numeric){var _=parseFloat(n.value);n.unit=n.value.replace(_,""),n.value=_}return n},r.prototype.__getFullValue=function(t){var e=(t===void 0?{}:t).withDefault;return!this.hasValue()&&e?this.getDefaultValue():this.getFullValue()},r.prototype.getFullValue=function(t,e){e===void 0&&(e={});var n=this.get("functionName"),i=this.getDefaultValue(),l=(0,m.isUndefined)(t)?this.get("value"):t,f=!(0,m.isUndefined)(l)&&l!=="";if(l&&i&&l===i)return i;if(n&&f){var d=n==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(n,"(").concat(d,")")}return f&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},r.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},r.prototype.getParentTarget=function(){return this.get("parentTarget")||null},r.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,n=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}},r.prototype.__checkVisibility=function(t){var e=t.target,n=t.component,i=t.sectors,l=n||e;if(!l)return!1;var f=this.getId(),d=this.getName(),v=this.get("toRequire"),g=this.get("requires"),_=this.get("requiresParent"),k=l.get("unstylable"),V=l.get("stylable-require"),q=l.get("stylable");if((0,m.isArray)(q)&&(q=q.indexOf(d)>=0),(0,m.isArray)(k)&&(q=k.indexOf(d)<0),v&&(q=!e||V&&(V.indexOf(f)>=0||V.indexOf(d)>=0)),i&&g){var ot=(0,m.keys)(g);i.forEach(function(Wt){Wt.getProperties().forEach(function(ye){if((0,m.includes)(ot,ye.id)){var Te=g[ye.id];q=q&&(0,m.includes)(Te,ye.get("value"))}})})}if(_){var ft=n&&n.parent(),at=ft&&ft.getEl();if(at){var It=(0,j.hasWin)()?window.getComputedStyle(at):{};(0,m.each)(_,function(Wt,ye){q=q&&It[ye]&&(0,m.includes)(Wt,It[ye])})}else q=!1}return!!q},r}(C.Hn);const Mn=Gf;Gf.callParentInit=function(a,r,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(r,[t,Qr(Qr({},e),{skipInit:1})])},Gf.callInit=function(a,r,t){t===void 0&&(t={}),!t.skipInit&&a.init(r,t)};var nm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ml=function(){return Ml=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ml.apply(this,arguments)},ph=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},fh=function(a){return a==="integer"||a==="number"},rm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return nm(r,a),r.prototype.defaults=function(){return Ml(Ml({},Mn.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Mn.callParentInit(Mn,this,t,e);var n=this.em,i=new Xf(this.get("properties")||[],{em:n,parentProp:this});this.set("properties",i,{silent:!0}),this.listenTo(i,"change",this.__upProperties),Mn.callInit(this,t,e)},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),r.prototype.getProperties=function(){return ph([],this.get("properties").models,!0)},r.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},r.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},r.prototype.isDetached=function(){return!!this.get("detached")},r.prototype.getValues=function(t){var e=(t===void 0?{}:t).byName;return this.getProperties().reduce(function(n,i){return n[e?i.getName():i.getId()]="".concat(i.__getFullValue()),n},{})},r.prototype.getSeparator=function(){return this.getSplitSeparator()},r.prototype.getJoin=function(){return this.__getJoin()},r.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var n=this.getName(),i=this.__getJoin(),l=this.get("toStyle"),f=this.getValues(),d={};if(l)d=l(f,{join:i,name:n,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())d=f;else{var v=this.getProperties().map(function(g){return g.__getFullValue({withDefault:1})}).filter(Boolean).join(i);(e={})[n]=v,d=e}return this.isDetached()?d[n]="":(d[n]=d[n]||"",d=Ml(Ml({},d),this.getProperties().reduce(function(g,_){return g[_.getName()]="",g},{}))),t.camelCase?Object.keys(d).reduce(function(g,_){return g[(0,j.camelCase)(_)]=d[_],g},{}):d},r.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},r.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!e.__up&&!e.__clearIn){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},r.prototype.__upTargetsStyleProps=function(t,e){var n;t===void 0&&(t={});var i=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();(n={})[l]=i[l],i=n}this.__upTargetsStyle(i,t)},r.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),Mn.prototype._up.call(this,t,e),this},r.prototype.getStyle=function(t){return this.getStyleFromProps(t)},r.prototype.__getFullValue=function(t){return t===void 0&&(t={}),this.isDetached()||t.__clear?"":this.getStyleFromProps()[this.getName()]||""},r.prototype.__getJoin=function(){var t=this.get("join");return(0,m.isString)(t)?t:this.get("separator")},r.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),n=this.getProperties().map(function(i){return i.getName()});return ph([e],n,!0).some(function(i){return!(0,m.isUndefined)(t[i])&&t[i]!==""})},r.prototype.__splitValue=function(t,e){return t.split(e).map(function(n){return n.trim()}).filter(Boolean)},r.prototype.__splitStyleName=function(t,e,n){return this.__splitValue(t[e]||"",n)},r.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var n=(e===void 0?{}:e).byName,i=this.getProperties(),l=i.length===4&&i.every(function(v){return fh(v.getType())}),f=this.__splitValue(t,this.getSplitSeparator()),d={};return i.forEach(function(v,g){var _=f[g],k=(0,m.isUndefined)(_)?"":_;if(l){var V=f.length;k=f[g]||f[g%V+(V!=1&&V%2?1:0)]||k}var q=n?v.getName():v.getId();d[q]=k||""}),d},r.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var n=e.byName,i=this.getName(),l=this.getProperties(),f=this.getSplitSeparator(),d=this.get("fromStyle"),v=d?d(t,{property:this,name:i,separator:f}):{};return d||(v=this.__getSplitValue(t[i]||"",{byName:n}),l.forEach(function(g){var _=t[g.getName()],k=n?g.getName():g.getId();(0,m.isUndefined)(_)||_===""||(v[k]=_)})),v},r.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(i){var l=t[i.getId()];i.__getFullValue()!==l&&i.upValue(l,e)});var n=(0,m.keys)(t).map(function(i){return t[i]}).join(" ");this.set("value",n,{silent:!0})},r.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),Mn.prototype.clear.call(this),this},r.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},r.prototype.getFullValue=function(){return this.__getFullValue()},r.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},r}(Mn);const Ll=rm;var om=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dp=function(){return dp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},dp.apply(this,arguments)},im=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return om(r,a),r.prototype.defaults=function(){return{values:{}}},r.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},r.prototype.getId=function(){return this.cid},r.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},r.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(n,i){return n[(0,j.camelCase)(i)]=e[i],n},{}):e},r.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},r.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},r.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},r.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},r.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},r.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},r.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},r.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",dp(dp({},this.getValues()),t))},r}(C.Hn);const sm=im;var am=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return am(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},r}(C.FE);const lm=dh;dh.prototype.model=sm;var cm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pi=function(){return pi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},pi.apply(this,arguments)},um=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},pm=/,(?![^\(]*\))/,fm=/\s(?![^(]*\))/,dm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return cm(r,a),r.prototype.defaults=function(){return pi(pi({},Ll.getDefaults()),{layers:[],layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Ll.callParentInit(Ll,this,t,e);var n=this.get("layers"),i=new lm(n,{prop:this});i.property=this,i.properties=this.get("properties"),this.set("layers",i,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(i,"add remove",this.__upLayers),Ll.callInit(this,t,e)},r.prototype.getLayers=function(){return this.__getLayers().models},r.prototype.__getLayers=function(){return this.get("layers")},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.__getLayers().at(t)||void 0},r.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},r.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},r.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},r.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var n=t?t.getIndex():-1;n>=0&&(0,m.isNumber)(e)&&e>=0&&e<this.getLayers().length&&n!==e&&(this.removeLayer(t),this.__getLayers().add(t,{at:e}))},r.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={};return this.getProperties().forEach(function(i){var l=i.getId(),f=t[l];n[l]=(0,m.isUndefined)(f)?i.getDefaultValue():f}),this.__getLayers().push({values:n},e)},r.prototype.removeLayer=function(t){return this.__getLayers().remove(t)},r.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},r.prototype.getLayerLabel=function(t){var e="";if(t){var n=this.get("layerLabel"),i=t.getValues(),l=t.getIndex();if(n)e=n(t,{index:l,values:i,property:this});else{var f=[];this.getProperties().map(function(d){f.push(i[d.getId()])}),e=f.filter(Boolean).join(" ")}}return e},r.prototype.getStyleFromLayer=function(t,e){var n;e===void 0&&(e={});var i,l=this.__getJoin(),f=this.__getJoinLayers(),d=this.get("toStyle"),v=this.getName(),g=t.getValues();if(d)i=d(g,{join:l,joinLayers:f,name:v,layer:t,property:this});else{var _=this.getProperties().map(function(k){var V=k.getName(),q=g[k.getId()],ot=(0,m.isUndefined)(q)?k.getDefaultValue():q;if(e.number&&fh(k.getType())){var ft=k.parseValue(q,e.number);ot="".concat(ft.value).concat(ft.unit)}return{name:V,value:ot}});i=this.isDetached()?_.reduce(function(k,V){return k[V.name]=V.value,k},{}):((n={})[this.getName()]=_.map(function(k){return k.value}).join(l),n)}return e.camelCase?Object.keys(i).reduce(function(k,V){return k[(0,j.camelCase)(V)]=i[V],k},{}):i},r.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var n={};return this.get("preview")&&(n=this.getStyleFromLayer(t,e)),n},r.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,m.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},r.prototype.__upProperties=function(t,e){var n;e===void 0&&(e={});var i=this.getSelectedLayer();i&&(i.upValues(((n={})[t.getId()]=t.__getFullValue(),n)),e.__up||this.__upTargetsStyleProps(e))},r.prototype.__upLayers=function(t,e,n){this.__upTargetsStyleProps(n||e)},r.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return Mn.prototype.__upTargets.call(this,t,e)},r.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(),t)},r.prototype.__upTargetsStyle=function(t,e){return Mn.prototype.__upTargetsStyle.call(this,t,e)},r.prototype.__upSelected=function(t,e){var n=(t===void 0?{}:t).noEvent;e===void 0&&(e={});var i=this.em.Styles,l=this.getSelectedLayer(),f=l==null?void 0:l.getValues();f&&this.getProperties().forEach(function(d){var v,g=(v=f[d.getId()])!==null&&v!==void 0?v:"";d.__getFullValue()!==g&&d.upValue(g,pi(pi({},e),{__up:!0}))}),!n&&i.__trgEv(i.events.layerSelect,{property:this})},r.prototype._up=function(t,e){e===void 0&&(e={});var n=t.__layers,i=n===void 0?[]:n,l=um(t,["__layers"]);return!this.isDetached()&&this.__setLayers(i),this.__upSelected({noEvent:!0},e),Mn.prototype._up.call(this,l,e),this},r.prototype.__setLayers=function(t){t===void 0&&(t=[]);var e=this.__getLayers(),n=t.map(function(i){return{values:i}});e.length===n.length?n.map(function(i,l){var f;return(f=e.at(l))===null||f===void 0?void 0:f.upValues(i.values)}):this.__getLayers().reset(n),this.__upSelected({noEvent:!0})},r.prototype.__parseValue=function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(pm).map(function(i){return i.trim()}).map(function(i){return e.__parseLayer(i)}).filter(Boolean),n},r.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),n=t.split(fm),i=this.getProperties();return e?e({value:t,values:n}):i.reduce(function(l,f,d){var v=n[d];return l[f.getId()]=(0,m.isUndefined)(v)?f.getDefaultValue():v,l},{})},r.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;var n=this.getName(),i=this.getProperties(),l=this.getLayerSeparator(),f=this.get("fromStyle"),d=f?f(t,{property:this,name:n,separatorLayers:l}):[];if(!f){var v=this.__splitStyleName(t,n,l).map(function(g){return g.split(e.getSplitSeparator())}).map(function(g){var _={};return i.forEach(function(k,V){var q=g[V];_[k.getId()]=(0,m.isUndefined)(q)?k.getDefaultValue():q}),_});i.forEach(function(g){var _=g.getId();e.__splitStyleName(t,g.getName(),l).map(function(k){var V;return(V={})[_]=k||g.getDefaultValue(),V}).forEach(function(k,V){v[V]=v[V]?pi(pi({},v[V]),k):k})}),d=v}return(0,m.isArray)(d)?d:[d]},r.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},r.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var n={},i=this.getName(),l=this.getLayers(),f=this.getProperties();if(l.map(function(v){return e.getStyleFromLayer(v,t)}).forEach(function(v){(0,m.keys)(v).map(function(g){n[g]||(n[g]=[]),n[g].push(v[g])})}),(0,m.keys)(n).map(function(v){n[v]=n[v].join(e.__getJoinLayers())}),this.isDetached())n[i]="",!l.length&&f.map(function(v){n[v.getName()]=""});else{var d=f.reduce(function(v,g){return v[g.getName()]="",v},{});n[i]=n[i]||"",n=pi(pi({},n),d)}return n},r.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,m.isString)(e)?e:t)},r.prototype.__getFullValue=function(){return this.get("detached")?"":this.getStyleFromLayers()[this.getName()]},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget();return this.getLayers().length>0&&!e},r.prototype.clear=function(t){return t===void 0&&(t={}),this.__getLayers().reset(),this.__upTargetsStyleProps(t),Mn.prototype.clear.call(this),this},r.prototype.__canClearProp=function(){return!1},r}(Ll);const hm=dm;var gm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hp=function(){return hp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},hp.apply(this,arguments)},vm=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},mm=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Kf="data-clear-style",ym=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,m.bindAll)(e,"__change","__updateStyle");var n=t.config||{},i=n.em;e.config=n,e.em=i,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,m.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,m.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(i,"change:device",e.onValueChange);var f=e.init&&e.init.bind(e);return f&&f(),e}return gm(r,a),r.prototype.events=function(){var t;return(t={change:"inputValueChanged"})["click [".concat(Kf,"]")]="clear",t},r.prototype.template=function(t){var e=this.pfx,n=this.ppfx;return`
      <div class="`.concat(e,`label" data-sm-label></div>
      <div class="`).concat(n,`fields" data-sm-fields></div>
    `)},r.prototype.templateLabel=function(t){var e=this.pfx,n=this.em,i=t.parent,l=t.attributes,f=l.icon,d=f===void 0?"":f,v=l.info,g=v===void 0?"":v,_=n==null?void 0:n.getConfig().icons,k=(_==null?void 0:_.close)||"";return`
      <span class="`.concat(e,"icon ").concat(d,'" title="').concat(g,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(i?"":'<div class="'.concat(e,'clear" style="display: none" ').concat(Kf,">").concat(k,"</div>"),`
    `)},r.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},r.prototype.remove=function(){var t=this;return C.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},r.prototype.updateStatus=function(){var t,e=this,n=e.model,i=e.pfx,l=e.ppfx,f=e.config,d="".concat(l,"four-color"),v="".concat(l,"color-warn"),g=this.$el.children(".".concat(i,"label")),_=this.getClearEl(),k=_?_.style:{};g.removeClass("".concat(d," ").concat(v)),k.display="none",n.hasValue({noParent:!0})&&f.highlightChanged?(g.addClass(d),f.clearProperties&&(k.display="")):n.hasValue()&&f.highlightComputed&&g.addClass(v),(t=this.parent)===null||t===void 0||t.updateStatus()},r.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},r.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(Kf,"]"))),this.clearEl},r.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)},r.prototype.onValueChange=function(t,e,n){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},r.prototype.setValue=function(t){var e=this.model,n=(0,m.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(n);this.__setValueInput(n)},r.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},r.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},r.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},r.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(hp(hp({},this._getClbOpts()),{value:t}))},r.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.emit&&this.emit.bind(this);n&&n.apply(void 0,mm([this._getClbOpts()],t,!1))},r.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var n=e.complete,i=e.partial,l=(vm(e,["complete","partial"]),this.model),f=n!==!1&&i!==!0;(0,j.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!f}):l.upValue(t,{partial:!f})},r.prototype._getClbOpts=function(){var t=this,e=t.model;return{el:t.el,createdEl:t.createdEl,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},r.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,n=t.model,i=t.el,l=t.$el,f=n.getName(),d=n.getType(),v=n.get("className")||"",g="".concat(e,"property"),_=d==="number"?"".concat(e).concat(d," ").concat(e,"integer"):"".concat(e).concat(d);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(n)),l.find("[data-sm-label]").append(this.templateLabel(n));var k=this.create&&this.create.bind(this);this.createdEl=k&&k(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(n)),i.className="".concat(g," ").concat(_," ").concat(g,"__").concat(f," ").concat(v).trim(),i.className+=n.isFull()?" ".concat(g,"--full"):"";var V=this.onRender&&this.onRender.bind(this);return V&&V(),this.setValue(n.getValue()),this},r.prototype.onRender=function(){},r}(C.G7);const Wi=ym;var bm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wm=function(a){function r(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var n=e.collection;return e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.render),e}return bm(r,a),r.prototype.addTo=function(t,e,n){this.add(t,null,n)},r.prototype.add=function(t,e,n){n===void 0&&(n={});var i=this.parent,l=this.config,f=e||this.el,d=new t.typeView({model:t,config:l});i&&(d.parent=i),d.render();var v=d.el;this.properties.push(d),(0,Ge.$Q)(f,v,n.at)},r.prototype.remove=function(){return C.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},r.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},r.prototype.render=function(){var t=this,e=this.$el,n=this.pfx;this.clearItems();var i=document.createDocumentFragment();return this.collection.forEach(function(l){return t.add(l,i)}),e.empty(),e.append(i),e.attr("class","".concat(n,"properties")),this},r}(C.G7);const Jf=wm;var _m=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gp=function(){return gp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},gp.apply(this,arguments)};const Hc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return _m(r,a),r.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},r.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),Wi.prototype.remove.apply(this,arguments),this},r.prototype.onValueChange=function(){},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.get("properties");if(n.length&&!this.props){var i=e.isDetached(),l=new Jf({config:gp(gp({},this.config),{highlightComputed:i,highlightChanged:i}),collection:n,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},r.prototype.clearCached=function(){Wi.prototype.clearCached.apply(this,arguments),delete this.props},r}(Wi);var Cm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Cm(r,a),r.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},r.prototype.template=function(){var t=this,e=t.pfx,n=t.ppfx,i=t.em,l=i==null?void 0:i.getConfig().icons,f=(l==null?void 0:l.close)||"",d=(l==null?void 0:l.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(n,`no-touch-actions" data-move-layer>
          `).concat(d,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(f,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.propertyView=t.propertyView;var i=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(i,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},r.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},r.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},r.prototype.select=function(){this.model.select()},r.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},r.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},r.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},r.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var n=this.getPreviewEl(),i=t.getStylePreview({number:{min:-3,max:3}}),l=(0,m.keys)(i).map(function(f){return"".concat(f,":").concat(i[f])}).join(";");n.setAttribute("style",l)}},r.prototype.updateVisibility=function(){var t,e=this,n=e.pfx,i=e.model,l=e.propertyView,f=this.getPropertiesWrapper(),d=i.isSelected();f.style.display=d?"":"none",this.$el[d?"addClass":"removeClass"]("".concat(n,"active")),d&&f.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},r.prototype.render=function(){var t=this,e=t.el,n=t.pfx,i=t.model;return e.innerHTML=this.template(),e.className="".concat(n,"layer"),i.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},r}(C.G7);const Sm=xm;var Om=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tm=function(a){function r(t){var e=a.call(this,t)||this,n=e.collection,i=t.config||{},l=i.em,f=i.stylePrefix||"",d=i.pStylePrefix||"";e.config=i,e.pfx=f,e.ppfx=d,e.propertyView=t.propertyView,e.className="".concat(f,"layers ").concat(d,"field"),e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.reset),e.items=[];var v=l==null?void 0:l.Utils;return e.sorter=v?new v.Sorter({container:e.el,ignoreViewChildren:1,containerSel:".".concat(f,"layers"),itemSel:".".concat(f,"layer"),pfx:i.pStylePrefix}):"",n.view=e,e.$el.data("model",n),e.$el.data("collection",n),e}return Om(r,a),r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var i=e||null,l=this,f=l.propertyView,d=l.config,v=l.sorter,g=l.$el,_=new Sm({model:t,config:d,sorter:v,propertyView:f}),k=_.render().el;if(this.items.push(_),i)i.appendChild(k);else if(n!==void 0){var V="before";g.children().length===n&&(n--,V="after"),n<0?g.append(k):g.children().eq(n)[V](k)}else g.append(k);return k},r.prototype.reset=function(t,e){this.clearItems(),this.render()},r.prototype.remove=function(){return this.clearItems(),C.G7.prototype.remove.apply(this,arguments),this},r.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},r.prototype.render=function(){var t=this,e=this.$el,n=this.sorter,i=document.createDocumentFragment();return e.empty(),this.collection.forEach(function(l){return t.addToCollection(l,i)}),e.append(i),e.attr("class",this.className),n&&(n.plh=null),this},r}(C.G7);const Em=Tm;var km=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dl=function(){return Dl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Dl.apply(this,arguments)},Pm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return km(r,a),r.prototype.events=function(){return Dl(Dl({},Hc.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},r.prototype.templateInput=function(){var t=this.pfx,e=this.em,n=e==null?void 0:e.getConfig().icons,i=(n==null?void 0:n.plus)||"+";return`
      <div class="`.concat(t,"field ").concat(t,`stack">
        <button type="button" id="`).concat(t,`add" data-add-layer>
          `).concat(i,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},r.prototype.init=function(){var t=this.model;this.listenTo(t.__getLayers(),"change reset",this.updateStatus)},r.prototype.addLayer=function(){this.model.addLayer({},{at:0})},r.prototype.setValue=function(){},r.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),Hc.prototype.remove.apply(this,arguments),this},r.prototype.clearCached=function(){Hc.prototype.clearCached.apply(this,arguments),delete this.layersView},r.prototype.onRender=function(){var t=this,e=t.model,n=t.el,i=t.config,l=e.get("properties");if(l.length&&!this.props){var f=new Jf({config:Dl(Dl({},i),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});f.render();var d=new Em({collection:e.__getLayers(),config:i,propertyView:this});d.render(),n.querySelector("[data-layers-wrapper]").appendChild(d.el),this.props=f,this.layersView=d}},r}(Hc);const Am=Pm;var jm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vp=function(){return vp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},vp.apply(this,arguments)};const Mm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return jm(r,a),r.prototype.events=function(){return vp(vp({},Wi.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},r.prototype.templateInput=function(){var t,e=this.pfx,n=this.em,i=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,l=i==null?void 0:i.close;return`
      <div class="`.concat(e,"field ").concat(e,`file">
        <div id='`).concat(e,`input-holder'>
          <div class="`).concat(e,`btn-c">
            <button class="`).concat(e,'btn" id="').concat(e,`images" type="button" data-open-assets>
              `).concat(n.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`preview-file" data-preview-box>
          <div id="`).concat(e,'preview-file" class="').concat(e,`preview-file-cnt" data-preview></div>
          <div id="`).concat(e,'close" class="').concat(e,'preview-file-close" data-clear-asset>').concat(l,`</div>
        </div>
      </div>
    `)},r.prototype.__setValueInput=function(t){var e=this.model,n=this.el,i=e.getDefaultValue(),l=n.querySelector("[data-preview-box]"),f=n.querySelector("[data-preview]");l.style.display=t&&t!==i?"":"none",f.style.backgroundImage=t||e.getDefaultValue()},r.prototype.openAssetManager=function(){var t,e=this,n=(t=this.em)===null||t===void 0?void 0:t.Assets;n==null||n.open({select:function(i,l){var f=(0,m.isString)(i)?i:i.get("src");e.model.upValue(f,{partial:!l}),l&&n.close()},types:["image"],accept:"image/*"})},r}(Wi);var Lm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const $i=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Lm(r,a),r.prototype.templateInput=function(t){return""},r.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},r.prototype.setValue=function(t){},r.prototype.onRender=function(){var t=this,e=t.ppfx,n=t.model,i=t.el;if(!this.inputInst){var l=n.input;l.ppfx=e,l.render(),i.querySelector(".".concat(e,"fields")).appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},r.prototype.clearCached=function(){Wi.prototype.clearCached.apply(this,arguments),this.inputInst=null},r}(Wi);var Dm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Nm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Dm(r,a),r.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},r.prototype.remove=function(){var t=this;$i.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(n){return t[n]=null}),this},r.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},r.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,n=e.ppfx,i=e.model,l=e.em,f=e.el,d=new Oc({target:l,model:i,ppfx:n,onChange:this.__handleChange}).render();f.querySelector(".".concat(n,"fields")).appendChild(d.el),this.input=(t=d.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=d}},r}($i);var Im=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mp=function(){return mp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},mp.apply(this,arguments)},hh=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};const Yf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Im(r,a),r.prototype.defaults=function(){return mp(mp({},Mn.getDefaults()),{options:[],full:0})},r.prototype.getOptions=function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]},r.prototype.getOption=function(t){var e=this,n=(0,j.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(i){return e.getOptionId(i)===n})[0]||null},r.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},r.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(hh(hh([],e,!0),[t],!1))}return this},r.prototype.getOptionId=function(t){return(0,j.isDef)(t.id)?t.id:t.value},r.prototype.getOptionLabel=function(t,e){var n;e===void 0&&(e={});var i=e.locale,l=i===void 0||i,f=((0,m.isString)(t)?this.getOption(t):t)||{},d=this.getOptionId(f),v=f.label||f.name||d,g=e.property||this.getId();return l&&((n=this.em)===null||n===void 0?void 0:n.t("styleManager.options.".concat(g,".").concat(d)))||v},r.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Mn.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},r.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},r}(Mn);var Fm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const gh=function(a){function r(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return Fm(r,a),r.prototype.templateInput=function(){var t=this.pfx,e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`select">
        <span id="`).concat(t,`input-holder"></span>
        <div class="`).concat(e,`sel-arrow">
          <div class="`).concat(e,`d-s-arrow"></div>
        </div>
      </div>
    `)},r.prototype.updateOptions=function(){delete this.input,this.onRender()},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.getOptions();if(!this.input){var i=[];n.forEach(function(f){var d=e.getOptionId(f),v=e.getOptionLabel(d),g=f.style?f.style.replace(/"/g,"&quot;"):"",_=g?'style="'.concat(g,'"'):"",k=d.replace(/"/g,"&quot;");i.push('<option value="'.concat(k,'" ').concat(_,">").concat(v,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(i.join(""),"</select>"),this.input=l.firstChild}},r.prototype.__setValueInput=function(t){var e=this.model,n=this.getInputEl(),i=e.getOptions()[0],l=i?e.getOptionId(i):"";n&&(n.value=t||l)},r}(Wi);var Rm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yp=function(){return yp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},yp.apply(this,arguments)};const Vm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Rm(r,a),r.prototype.defaults=function(){return yp(yp({},Yf.getDefaults()),{full:1})},r}(Yf);var Hm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const zm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Hm(r,a),r.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},r.prototype.onRender=function(){var t=this.pfx,e=this.ppfx,n=this.model,i="".concat(e,"radio-item-label"),l=n.getName(),f=n.getOptions(),d="".concat(t,"radio ").concat(t,"radio-").concat(l),v=n.cid;if(!this.input){var g=[];f.forEach(function(k){var V=k.className?"".concat(k.className," ").concat(t,"icon ").concat(i):"",q=n.getOptionId(k),ot="".concat(l,"-").concat(q,"-").concat(v),ft=V?"":n.getOptionLabel(q),at=k.title?'title="'.concat(k.title,'"'):"",It=n.getValue()===q?"checked":"";g.push(`
          <div class="`.concat(e,`radio-item">
            <input type="radio" class="`).concat(d,'" id="').concat(ot,'" name="').concat(l,"-").concat(v,'" value="').concat(q,'" ').concat(It,`/>
            <label class="`).concat(V||i,'" ').concat(at,' for="').concat(ot,'">').concat(ft,`</label>
          </div>
        `))});var _=this.el.querySelector(".".concat(e,"field"));_.innerHTML='<div class="'.concat(e,'radio-items">').concat(g.join(""),"</div>"),this.input=_.firstChild}},r.prototype.__setValueInput=function(t){var e,n=this.model,i=t||n.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(i,'"]'));l&&(l.checked=!0)},r}(gh);var Bm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Aa=function(){return Aa=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Aa.apply(this,arguments)};const bp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Bm(r,a),r.prototype.defaults=function(){return Aa(Aa({},Mn.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},r.prototype.getUnits=function(){return this.get("units")||[]},r.prototype.getUnit=function(){return this.get("unit")},r.prototype.getMin=function(){return this.get("min")},r.prototype.getMax=function(){return this.get("max")},r.prototype.getStep=function(){return this.get("step")},r.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Mn.callParentInit(Mn,this,t,e);var n=this.get("unit"),i=this.getUnits();this.input=(0,j.hasWin)()?new Zu({model:this}):void 0,i.length&&!n&&this.set("unit",i[0],{silent:!0}),Mn.callInit(this,t,e)},r.prototype.__getClearProps=function(){return Aa(Aa({},Mn.prototype.__getClearProps()),{unit:""})},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n=Mn.prototype.parseValue.apply(this,arguments),i=this.input.validateInputValue(n.value,Aa({deepCheck:1},e)),l=i.value,f=i.unit;return n.value=l,n.unit=f,n},r.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),n=(0,m.isUndefined)(t)?"":"".concat(t),i=!(0,m.isUndefined)(e)&&n?e:"",l="".concat(n).concat(i);return Mn.prototype.getFullValue.apply(this,[l])},r}(Mn);var Um=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wp=function(){return wp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},wp.apply(this,arguments)};const Wm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Um(r,a),r.prototype.defaults=function(){return wp(wp({},bp.getDefaults()),{showInput:1})},r}(bp);var $m=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_p=function(){return _p=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_p.apply(this,arguments)};const qm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $m(r,a),r.prototype.events=function(){return _p(_p({},$i.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},r.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},r.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},r.prototype.inputValueChanged=function(){this.model.upValue(this.getSliderEl().value)},r.prototype.inputValueChangedSoft=function(){this.model.upValue(this.getSliderEl().value,{partial:!0})},r.prototype.setValue=function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(n.value),$i.prototype.setValue.apply(this,arguments)},r.prototype.onRender=function(){$i.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},r.prototype.clearCached=function(){$i.prototype.clearCached.apply(this,arguments),delete this.slider},r}($i),Xf=C.FE.extend(jt).extend({extendViewApi:1,init:function(){var a=this.opts,r=this.em,t=a.module||(r==null?void 0:r.get("StyleManager"));t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:hm,view:Am,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:Ll,view:Hc,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:Mn,view:Mm,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:Mn,view:Nm,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:Yf,view:gh,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:Vm,view:zm,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:Wm,view:qm,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:bp,view:$i,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:bp,view:$i,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:Mn,view:Wi,isType:function(a){return a.type="base",a}}]});var Gm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cp=function(){return Cp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Cp.apply(this,arguments)},Km=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Jm=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};const vh=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,i=e.em;n.em=i;var l=t||{},f=n.buildProperties(l.buildProps),d=n.get("name")||"",v=[];!n.get("id")&&n.set("id",d.replace(/ /g,"_").toLowerCase()),v=(v=f?n.extendProperties(f):n.get("properties").map(function(_){return(0,m.isString)(_)?n.buildProperties(_)[0]:_}).filter(Boolean)).map(function(_){return n.checkExtend(_)});var g=new Xf(v,{em:i});return g.sector=n,n.set("properties",g),n}return Gm(r,a),r.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.get("id")},r.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},r.prototype.setName=function(t){return this.set("name",t)},r.prototype.isOpen=function(){return!!this.get("open")},r.prototype.setOpen=function(t){return this.set("open",t)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.get("properties");return(e.models?Jm([],e.models,!0):e).filter(function(n){var i=!0;return t.withValue&&(i=n.hasValue({noParent:!0})),t.withParentValue&&(i=!n.hasValue({noParent:!0})&&n.hasValue()),i})},r.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},r.prototype.addProperty=function(t,e){return this.get("properties").add(this.checkExtend(t),e)},r.prototype.extendProperties=function(t,e,n){n===void 0&&(n=!1);for(var i=t.length,l=e||this.get("properties"),f=this.get("extendBuilded"),d=[],v=0,g=l.length;v<g;v++){for(var _=l[v],k=0,V=0;V<i;V++){var q=t[V];if(!(_.property!=q.property&&_.id!=q.property)){var ot=_.properties;ot&&ot.length&&(_.properties=this.extendProperties(q.properties||[],ot,1)),t[V]=f?(0,m.extend)(q,_):_,d[V]=t[V],k=1}}k||(t.push(_),d.push(_))}return n?d.filter(function(ft){return ft}):t},r.prototype.checkExtend=function(t){var e=((0,m.isString)(t)?{extend:t}:t)||{},n=e.extend,i=Km(e,["extend"]);return n?Cp(Cp({},this.buildProperties([n])[0]||{}),i):t},r.prototype.buildProperties=function(t){var e,n=t||[];if(!n.length)return[];var i=(e=this.em)===null||e===void 0?void 0:e.get("StyleManager").builtIn;return i==null?void 0:i.build(n)},r}(C.Hn);var Ym=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xp=function(){return xp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xp.apply(this,arguments)};const Xm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ym(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={});var n=e.module,i=e.em;this.em=i,this.module=n,this.listenTo(this,"reset",this.onReset)},r.prototype.model=function(t,e){e===void 0&&(e={});var n=e.collection.em;return new vh(t,xp(xp({},e),{em:n}))},r.prototype.onReset=function(t,e){e===void 0&&(e={}),(e.previousModels||[]).forEach(function(n){return n.get("properties").reset()})},r}(C.FE);var Ns=function(){return Ns=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ns.apply(this,arguments)},Zm=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},ja=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},gr=function(a){return a.map(function(r){return{id:r}})},Qm=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var r=", sans-serif",t=["flex-start","flex-end","center"],e=ja(ja([],t,!0),["baseline","stretch"],!1);this.optsBgSize=gr(["auto","cover","contain"]),this.optsBgAttach=gr(["scroll","fixed","local"]),this.optsBgRepeat=gr(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=gr(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=gr(["visible","hidden","scroll","auto"]),this.optsDir=gr(["row","row-reverse","column","column-reverse"]),this.opstDisplay=gr(["block","inline","inline-block","flex","none"]),this.optsTransitFn=gr(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=gr(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=gr(["none","left","right"]),this.optsPos=gr(["static","relative","absolute","fixed"]),this.optsTextAlign=gr(["left","center","right","justify"]),this.optsFlexAlign=gr(e),this.optsJustCont=gr(ja(ja([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=gr(ja(ja([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=gr(ja(["auto"],e,!0)),this.optsTransitProp=gr(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=gr(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=gr(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+r,"Arial Black, Gadget"+r,"Brush Script MT"+r,"Comic Sans MS, cursive"+r,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+r,"Impact, Charcoal"+r,"Lucida Sans Unicode, Lucida Grande"+r,"Tahoma, Geneva"+r,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+r,"Verdana, Geneva"+r].map(function(n){return{id:n,label:n.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(r){var t=this;return function(){return r.map(function(e){if((0,m.isString)(e))return t.get(e);var n=e.extend,i=Zm(e,["extend"]);return Ns(Ns({},t.get(n)),i)})}},a.prototype.init=function(){var r=this,t=this,e=t.fixedValues,n=t.requireFlex,i=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:i,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:n},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:i,default:"0",requiresParent:n}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black"}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:n},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:n},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(f,d){var v=d.values,g=v["box-shadow-h"],_=v["box-shadow-v"],k=v["box-shadow-blur"],V=v["box-shadow-spread"];return"".concat(g," ").concat(_," ").concat(k," ").concat(V)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(f,d){var v=d.values,g=v["text-shadow-h"],_=v["text-shadow-v"],k=v["text-shadow-blur"];return"".concat(g," ").concat(_," ").concat(k)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(f,d){var v=d.values;return[v["background-repeat-sub"]||"",v["background-position-sub"]||"",v["background-attachment-sub"]||"",v["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(f,d){var v=d.property,g=f[d.name]||"",_=v.getLayerSeparator();return g?g.split(_).map(function(k){var V=v.__parseFn(k);return{"transform-type":V.name,"transform-value":V.value}}):[]},toStyle:function(f,d){var v;return(v={})[d.name]="".concat(f["transform-type"],"(").concat(f["transform-value"],")"),v},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(f){var d=f.property;if(f.to.value){var v=d.getOption(),g=Ns({},v.propValue||{}),_=d.getParent().getProperty("transform-value"),k=_.getUnit();(!k||(g==null?void 0:g.units.indexOf(k))<0)&&(g.unit=(g==null?void 0:g.units[0])||""),_.up(g)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(f){var d=f[0],v=f[1],g=f[2];r.add(d,v||{},{from:g})}),this},a.prototype.add=function(r,t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.from||"",i=this.props[n||r]||{},l=Ns(Ns(Ns({},i),{property:r}),t);return l.properties&&(0,m.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[r]=l,l},a.prototype.get=function(r){return this.props[r]},a.prototype.build=function(r){var t=this,e=[];return((0,m.isString)(r)?[r]:r).forEach(function(n){e.push(t.get(n)||{property:n})}),e},a}();const ty=Qm;var ey=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ny=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},ry=function(a){function r(t){var e=a.call(this,t)||this,n=t.config||{},i=e.model,l=n.em;return e.config=n,e.em=l,e.pfx=n.stylePrefix||"",e.listenTo(i,"destroy remove",e.remove),e.listenTo(i,"change:open",e.updateOpen),e.listenTo(i,"change:visible",e.updateVisibility),e}return ey(r,a),r.prototype.template=function(t){var e,n=t.pfx,i=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,f=(l==null?void 0:l.caret)||"",d="".concat(n,"sector-");return U(mh||(mh=ny([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),d,d,f,d,i)},r.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},r.prototype.updateOpen=function(){var t=this,e=t.$el,n=t.model,i=t.pfx,l=n.isOpen();e[l?"addClass":"removeClass"]("".concat(i,"open")),this.getPropertiesEl().style.display=l?"":"none"},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.getPropertiesEl=function(){var t=this.$el,e=this.pfx;return t.find(".".concat(e,"properties")).get(0)},r.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},r.prototype.renderProperties=function(){var t=this.model,e=this.config,n=t.get("properties");if(n){var i=new Jf({collection:n,config:e});this.$el.append(i.render().el)}},r.prototype.render=function(){var t=this,e=t.pfx,n=t.model,i=t.$el,l=n.getId(),f=n.getName();return i.html(this.template({pfx:e,label:f})),this.renderProperties(),i.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},r}(C.G7);const oy=ry;var mh,iy=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sy=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.module,i=t.config,l=e.collection;return e.pfx=(i==null?void 0:i.stylePrefix)||"",e.ppfx=(i==null?void 0:i.pStylePrefix)||"",e.config=i,e.module=n,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return iy(r,a),r.prototype.remove=function(){var t=this;return C.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},r.prototype.addTo=function(t,e,n){n===void 0&&(n={}),this.addToCollection(t,null,n)},r.prototype.addToCollection=function(t,e,n){n===void 0&&(n={});var i=this.config,l=this.el,f=e||l,d=new oy({model:t,config:i}).render().el;return(0,Ge.$Q)(f,d,n.at),d},r.prototype.render=function(){var t=this,e=this,n=e.$el,i=e.pfx,l=e.ppfx;n.empty();var f=document.createDocumentFragment();return this.collection.each(function(d){return t.addToCollection(d,f)}),n.append(f),n.addClass("".concat(i,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},r}(C.G7);const ay=sy;var ly=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ma=function(){return Ma=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ma.apply(this,arguments)},yh=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},bh="style",zc="".concat(bh,":"),Zf="".concat(zc,"sector"),cy="".concat(Zf,":add"),uy="".concat(Zf,":remove"),py="".concat(Zf,":update"),Qf="".concat(zc,"property"),fy="".concat(Qf,":add"),dy="".concat(Qf,":remove"),hy="".concat(Qf,":update"),wh="".concat(zc,"layer:select"),td="".concat(zc,"target"),gy="".concat(zc,"custom"),_h=function(a){return a||a===0},vy={all:bh,sectorAdd:cy,sectorRemove:uy,sectorUpdate:py,propertyAdd:fy,propertyRemove:dy,propertyUpdate:hy,layerSelect:wh,target:td,custom:gy},my=function(a){function r(t){var e=a.call(this,t,"StyleManager",new Xm([],{em:t}),vy,Qv)||this;e.Sector=vh,e.storageKey="",(0,m.bindAll)(e,"__clearStateTarget");var n=e.config,i=n.pStylePrefix;i&&(n.stylePrefix=i+n.stylePrefix),e.builtIn=new ty,e.properties=new Xf([],{em:t,module:e}),e.sectors=e.all;var l=new C.Hn({targets:[]});e.model=l,e.upAll=(0,m.debounce)(function(){return e.__upSel()},0),l.listenTo(t,"component:toggled component:update:classes change:state change:device frame:resized selector:type",e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var f=(0,m.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",f);var d=(0,m.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(wh," ").concat(td),d),l.on("change:lastTarget",function(){return t.trigger(td,e.getSelected())}),e}return ly(r,a),r.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.__trgEv=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(e=this.em).trigger.apply(e,yh([t],n,!1))},r.prototype.__clearStateTarget=function(){var t=this,e=this.em,n=this.__getStateTarget();n&&(e==null||e.skip(function(){e.Css.remove(n),t.model.set({stateTarget:null})}))},r.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.addSector=function(t,e,n){n===void 0&&(n={});var i=this.getSector(t);return i||(e.id=t,i=this.sectors.add(e,n)),i},r.prototype.getSector=function(t,e){e===void 0&&(e={});var n=this.sectors.where({id:t})[0];return!n&&e.warn&&this._logNoSector(t),n||null},r.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,n=e&&e.models?t.array?yh([],e.models,!0):e:[];return t.visible?n.filter(function(i){return i.isVisible()}):n},r.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},r.prototype.addProperty=function(t,e,n){n===void 0&&(n={});var i=this.getSector(t,{warn:!0}),l=null;return i&&(l=i.addProperty(e,n)),l},r.prototype.getProperty=function(t,e){var n,i=this.getSector(t,{warn:!0});return i&&(n=i.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),n},r.prototype.getProperties=function(t){var e,n=this.getSector(t,{warn:!0});return n&&(e=n.properties),e},r.prototype.removeProperty=function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},r.prototype.select=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,m.isArray)(t)?t:[t],f=e.stylable,d=i.Css,v=[];l.filter(Boolean).forEach(function(ot){var ft=ot;if((0,m.isString)(ot)){var at=d.getRule(ot)||d.setRule(ot);!(0,m.isUndefined)(f)&&at.set({stylable:f}),ft=at}v.push(ft)});var g=e.component||v.filter(function(ot){return(0,j.isComponent)(ot)}).reverse()[0];v=v.map(function(ot){return n.getModelToStyle(ot)});var _=i.getState(),k=v.slice().reverse()[0],V=this.getParentRules(k,{state:_,component:g}),q=this.__getStateTarget();return i.skip(function(){var ot;if(_&&(!((ot=k==null?void 0:k.getState)===null||ot===void 0)&&ot.call(k))){var ft=k.getStyle();q?q.setStyle(ft):q=d.getAll().add({selectors:"gjs-selected",style:ft,shallow:!0,important:!0})}else q&&(d.remove(q),q=void 0)}),this.model.set({targets:v,lastTarget:k,lastTargetParents:V,stateTarget:q,component:g}),this.__upProps(e),v},r.prototype.getSelected=function(){return this.model.get("lastTarget")||null},r.prototype.getSelectedAll=function(){return this.model.get("targets")},r.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},r.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},r.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var n=this.getSelected(),i=this.__getStateTarget();n&&(i==null||i.setStyle(n.getStyle(),e))},r.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},r.prototype.getBuiltInAll=function(){return this.builtIn.props},r.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},r.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var n=this.em,i=e.skipAdd;if(n&&(t!=null&&t.toHTML)){var l=n.getConfig(),f=n.UndoManager,d=n.Css,v=n.Selectors,g=v?v.getConfig():{},_=l.devicePreviewMode?"":n.get("state"),k=t.get("classes").getStyleable(),V=k.length,q=!g.componentFirst||e.useClasses,ot={noCount:1},ft={state:_,addOpts:ot},at=void 0;if(f.stop(),V&&q){var It=n.getCurrentMedia();(at=d.get(k,_,It))||i||(at=d.add(k,_,It,{},ot))}else if(l.avoidInlineStyle){var Wt=t.getId();!(at=d.getIdRule(Wt,ft))&&!i&&(at=d.setIdRule(Wt,{},ft)),t.is("wrapper")&&at.set("wrapper",1,ot)}at&&(t=at),f.start()}return t},r.prototype.getParentRules=function(t,e){var n=e===void 0?{}:e,i=n.state,l=n.component,f=this.em,d=[];if(f&&t){var v=l,g=f.Css,_=f.CodeManager.getGenerator("css"),k=t.toHTML?t:t.getComponent(),V={combination:!0,array:!0},q=[],ot=[],ft=[];k?(q=g.getRules("#".concat(k.getId())),ft=(ot=v?g.getRules(v.getSelectors().getFullName(V)):[]).concat(q)):(q=v?g.getRules("#".concat(v.getId())):[],ot=g.getRules(t.getSelectors().getFullName(V)),ft=q.concat(ot));var at=ft.filter(function(It){return(0,m.isUndefined)(i)?1:It.get("state")===i}).sort(_.sortRules).reverse();d=at.slice(at.indexOf(t)+1)}return d},r.prototype.addType=function(t,e){this.properties.addType(t,e)},r.prototype.getType=function(t){return this.properties.getType(t)},r.prototype.getTypes=function(){return this.properties.getTypes()},r.prototype.createType=function(t,e){var n=e===void 0?{}:e,i=n.model,l=i===void 0?{}:i,f=n.view,d=f===void 0?{}:f,v=this.config,g=this.getType(t);if(g)return new g.view(Ma({model:new g.model(l),config:v},d))},r.prototype.render=function(){var t=this,e=t.config,n=t.em,i=t.SectView,l=i&&i.el;return this.SectView=new ay({el:l,em:n,config:e,module:this,collection:this.sectors}),this.SectView.render().el},r.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},r.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var n=this.getSelected();if(n){var i=this.sectors,l=this.model.get("component"),f=this.getSelectedParents(),d=n.getStyle(),v=f.map(function(g){return{target:g,style:g.getStyle()}});i.map(function(g){g.getProperties().map(function(_){e.__upProp(_,d,v,t)})}),i.forEach(function(g){var _=g.getProperties();_.forEach(function(V){var q=V.__checkVisibility({target:n,component:l,sectors:i});V.set("visible",q)});var k=_.some(function(V){return V.isVisible()});g.set("visible",k)})}},r.prototype.__upProp=function(t,e,n,i){var l=this,f=t.getName(),d=e[f],v=_h(d),g=t.getType()==="stack",_=t.getType()==="composite",k=Ma(Ma({},i),{__up:!0}),V=!_&&!g,q=g?t.__getLayersFromStyle(e):[],ot=_?t.__getPropsFromStyle(e):{},ft=v?d:null,at=null;if(g&&q===null||_&&ot===null){var It=g?"__getLayersFromStyle":"__getPropsFromStyle";if(ye=n.filter(function(an){return t[It](an.style)!==null})[0]){ft=ye.style[f],at=ye.target;var Wt=t[It](ye.style);g?q=Wt:ot=Wt}}else if(!v){var ye;ft=null,(ye=n.filter(function(an){return _h(an.style[f])})[0])&&(ft=ye.style[f],at=ye.target)}if(t.__setParentTarget(at),V&&t.__getFullValue()!==ft&&t.upValue(ft,k),g&&t.__setLayers(q||[]),_){var Te=t.getProperties();if(t.isDetached()){var Ve=t.__getPropsFromStyle(e,{byName:!0})||{},qe=n.map(function(an){return Ma(Ma({},an),{style:t.__getPropsFromStyle(an.style,{byName:!0})||{}})});Te.map(function(an){return l.__upProp(an,Ve,qe,i)})}else t.__setProperties(ot||{},k),t.getProperties().map(function(an){return an.__setParentTarget(at)})}},r.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},r}(zt);const yy=my;var by=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tr=function(){return Tr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Tr.apply(this,arguments)},ed=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(_){_(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},nd=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(_){g=[6,_],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},wy=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},_y=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};Z().$=Y.default;var Cy=[Dg,Tg,Ug,Vv,_l,ie,vf,yy,xs,Yg,Mv,dv,Kv,Cg,rc,Ne,kc,Qp,In,Xt,Zv,ac],xy=[];(function(a){var r=a.$;if(r&&r.prototype&&r.prototype.constructor.name!=="jQuery"){var t=r.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var i=this.get(0);return i&&i.focus(),this},t.bind=function(i,l){return this.on(i,l)},t.unbind=function(i,l){if((0,m.isObject)(i)){for(var f in i)i.hasOwnProperty(f)&&this.off(f,i[f]);return this}return this.off(i,l)},t.click=function(i){return i?this.on("click",i):this.trigger("click")},t.change=function(i){return i?this.on("change",i):this.trigger("change")},t.keydown=function(i){return i?this.on("keydown",i):this.trigger("keydown")},t.delegate=function(i,l,f,d){return d||(d=f),this.on(l,i,function(v){v.data=f,d(v)})},t.scrollLeft=function(){var i=this.get(0),l=(i=i.nodeType==9?i.defaultView:i)instanceof Window?i:null;return l?l.pageXOffset:i.scrollLeft||0},t.scrollTop=function(){var i=this.get(0),l=(i=i.nodeType==9?i.defaultView:i)instanceof Window?i:null;return l?l.pageYOffset:i.scrollTop||0};var e=r.prototype.offset;t.offset=function(i){var l,f;return i&&(l=i.top,f=i.left),l!==void 0&&this.css("top","".concat(l,"px")),f!==void 0&&this.css("left","".concat(f,"px")),e.call(this)},r.map=function(i,l){for(var f=[],d=0;d<i.length;d++)f.push(l(i[d],d));return f};var n=Array.prototype.indexOf;r.inArray=function(i,l,f){return l==null?-1:n.call(l,i,f)},r.Event=function(i,l){if(!(this instanceof r.Event))return new r.Event(i,l);this.type=i,this.isDefaultPrevented=function(){return!1}}}})({$:Y.default});var Ch={debug:console.log,info:console.info,warning:console.warn,error:console.error},Sy=function(a){function r(t){t===void 0&&(t={});var e=a.call(this)||this;e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var n=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new D),e.set("dmode",n.dragMode);var i=n.el,l=n.log,f=l===!0?(0,m.keys)(Ch):(0,m.isArray)(l)?l:[];return(0,m.bindAll)(e,"initBaseColorPicker"),i&&n.fromElement&&(n.components=i.innerHTML),e.attrsOrig=i?(0,m.toArray)(i.attributes).reduce(function(d,v){return d[v.nodeName]=v.nodeValue,d},{}):"",n.components&&!n.pageManager&&(n.pageManager={pages:[{component:n.components}]}),Cy.forEach(function(d){return e.loadModule(d)}),xy.forEach(function(d){return e.tsLoadModule(d)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),f.forEach(function(d){return e.listenLog(d)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(d){var v=d.from,g=d.to;e.listenTo(e,v,function(){for(var _=[],k=0;k<arguments.length;k++)_[k]=arguments[k];e.trigger.apply(e,_y([g],_,!1)),e.logWarning("The event '".concat(v,"' is deprecated, replace it with '").concat(g,"'"))})}),e}return by(r,a),r.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(r.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),r.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},r.prototype.getContainer=function(){return this.config.el},r.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),Ch[t])},Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),r.prototype.getConfig=function(t){var e=this.config;return(0,m.isUndefined)(t)?e:e[t]},r.prototype.loadOnStart=function(){var t=this,e=this.config,n=e.projectData,i=e.headless,l=this.get("StorageManager");this.toLoad.forEach(function(v){return v.onLoad()});var f=function(){t.modules.forEach(function(v){return v.postLoad&&v.postLoad(t)}),t.set("readyLoad",1)};i?(n&&this.loadData(n),f()):setTimeout(function(){return ed(t,void 0,void 0,function(){var v;return nd(this,function(g){switch(g.label){case 0:return n?(this.loadData(n),[3,5]):[3,1];case 1:if(!(l!=null&&l.canAutoload()))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.load()];case 3:return g.sent(),[3,5];case 4:return v=g.sent(),this.logError(v),[3,5];case 5:return f(),[2]}})})});var d=new r({noticeOnUnload:!1,storageManager:!1,undoManager:!1});["PageManager","Canvas"].forEach(function(v){return d.get(v).onLoad()}),this.set("shallow",d)},r.prototype.updateChanges=function(){var t=this,e=this.get("StorageManager"),n=this.getDirtyCount();this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return t.trigger("update")}),this.config.noticeOnUnload&&(window.onbeforeunload=n?function(){return!0}:null),e.isAutosave()&&n>=e.getStepsBeforeSave()&&this.store().catch(function(i){return t.logError(i)})},r.prototype.loadModule=function(t){var e=this.config,n=new t(this),i=n.name.charAt(0).toLowerCase()+n.name.slice(1),l=(0,m.isUndefined)(e[i])?e[n.name]:e[i],f=l===!0?{}:l||{};return f.pStylePrefix=e.pStylePrefix||"",(0,m.isUndefined)(l)||l||(f._disable=1),n.storageKey&&n.store&&n.load&&this.storables.push(n),f.em=this,n.init(Tr({},f)),!n.private&&this.set(n.name,n),n.onLoad&&this.toLoad.push(n),this.modules.push(n),this},r.prototype.tsLoadModule=function(t){var e=new(t.default||t)(this);return e.storageKey&&e.store&&e.load&&this.storables.push(e),!e.private&&this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),this},r.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},r.prototype.getEditor=function(){return this.get("Editor")},r.prototype.handleUpdates=function(t,e,n){var i=this;n===void 0&&(n={}),this.__skip||n.temporary||n.noCount||n.avoidStore||!this.get("ready")||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=i.getDirtyCount()||0,f=(n.unset,wy(n,["unset"]));i.set("changesCount",l+1,f)},0))},r.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},r.prototype.componentHovered=function(t,e,n){var i=this.previous("componentHovered");i&&this.trigger("component:unhovered",i,n),e&&this.trigger("component:hovered",e,n)},r.prototype.getSelected=function(){return this.selected.lastComponent()},r.prototype.getSelectedAll=function(){return this.selected.allComponents()},r.prototype.setSelected=function(t,e){var n=this;e===void 0&&(e={});var i=e.event,l=i&&(i.ctrlKey||i.metaKey),f=(i||{}).shiftKey,d=((0,m.isArray)(t)?t:[t]).map(function(k){return(0,j.getModel)(k,Y.default)}),v=this.getSelectedAll(),g=this.getConfig().multipleSelection,_=(0,m.isArray)(t);_&&this.removeSelected(v.filter(function(k){return!(0,m.contains)(d,k)})),d.forEach(function(k){var V=(0,j.getModel)(k,void 0);if(V&&(n.trigger("component:select:before",V,e),!V.get("selectable")||e.abort)){if(!e.useValid)return;for(var q=V.parent();q&&!q.get("selectable");)q=q.parent();V=q}if(l&&g)return n.toggleSelected(V);if(f&&g){n.clearSelection(n.get("Canvas").getWindow());var ot,ft,at=V.collection,It=V.index();if(n.getSelectedAll().forEach(function(Wt){var ye=Wt.collection,Te=Wt.index();ye===at&&(Te<It?ot=(0,m.isUndefined)(ot)?Te:Math.max(ot,Te):Te>It&&(ft=(0,m.isUndefined)(ft)?Te:Math.min(ft,Te)))}),!(0,m.isUndefined)(ot))for(;ot!==It;)n.addSelected(at.at(ot)),ot++;if(!(0,m.isUndefined)(ft))for(;ft!==It;)n.addSelected(at.at(ft)),ft--;return n.addSelected(V)}!_&&n.removeSelected(v.filter(function(Wt){return Wt!==V})),n.addSelected(V,e)})},r.prototype.addSelected=function(t,e){var n=this;e===void 0&&(e={});var i=(0,j.getModel)(t,Y.default);((0,m.isArray)(i)?i:[i]).forEach(function(l){var f=n.selected;l&&l.get("selectable")&&!l.parents().some(function(d){return f.hasComponent(d)})&&(e.forceChange&&n.removeSelected(l,e),f.allComponents().filter(function(d){return(0,m.contains)(d.parents(),l)}).forEach(function(d){return n.removeSelected(d,e)}),f.addComponent(l,e),l&&n.trigger("component:select",l,e))})},r.prototype.removeSelected=function(t,e){e===void 0&&(e={}),this.selected.removeComponent((0,j.getModel)(t,Y.default),e)},r.prototype.toggleSelected=function(t,e){var n=this;e===void 0&&(e={});var i=(0,j.getModel)(t,Y.default);((0,m.isArray)(i)?i:[i]).forEach(function(l){n.selected.hasComponent(l)?n.removeSelected(l,e):n.addSelected(l,e)})},r.prototype.setHovered=function(t,e){if(e===void 0&&(e={}),!t)return this.set("componentHovered","");var n="component:hover",i=(0,j.getModel)(t,void 0);if(i){if(e.forceChange&&this.set("componentHovered",""),this.trigger("".concat(n,":before"),i,e),!i.get("hoverable")){if(!e.useValid||e.abort)return;for(var l=i&&i.parent();l&&!l.get("hoverable");)l=l.parent();i=l}e.abort||(this.set("componentHovered",i,e),this.trigger(n,i,e))}},r.prototype.getHovered=function(){return this.get("componentHovered")},r.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.get("DomComponents").setComponents(t,e)},r.prototype.getComponents=function(){var t=this.get("DomComponents"),e=this.get("CodeManager");if(t&&e){var n=t.getComponents();return e.getCode(n,"json")}},r.prototype.setStyle=function(t,e){e===void 0&&(e={});var n=this.get("CssComposer");return n.clear(e),n.getAll().add(t,e),this},r.prototype.addStyle=function(t,e){e===void 0&&(e={});var n=this.getStyle().add(t,e);return(0,m.isArray)(n)?n:[n]},r.prototype.getStyle=function(){return this.Css.getAll()},r.prototype.setState=function(t){return this.set("state",t),this},r.prototype.getState=function(){return this.get("state")||""},r.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,n=e.optsHtml,i=e.jsInHtml?this.getJs(t):"",l=t.component||this.get("DomComponents").getComponent(),f=l?this.get("CodeManager").getCode(l,"html",Tr(Tr({},n),t)):"";return f+=i?"<script>".concat(i,"<\/script>"):""},r.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,n=e.optsCss,i=t.avoidProtected,l=(0,m.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,f=this.get("CssComposer"),d=t.component||this.Components.getComponent(),v=i?"":e.protectedCss,g=d&&this.CodeManager.getCode(d,"css",Tr(Tr({cssc:f,keepUnusedStyles:l},n),t));return d?t.json?g:v+g:""},r.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},r.prototype.store=function(t){return ed(this,void 0,void 0,function(){var e;return nd(this,function(n){switch(n.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return n.sent(),this.clearDirtyCount(),[2,e]}})})},r.prototype.load=function(t){return ed(this,void 0,void 0,function(){var e;return nd(this,function(n){switch(n.label){case 0:return[4,this.Storage.load(t)];case 1:return e=n.sent(),this.loadData(e),[2,e]}})})},r.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(n){t=Tr(Tr({},t),n.store(1))}),JSON.parse(JSON.stringify(t))},r.prototype.loadData=function(t){return t===void 0&&(t={}),(0,j.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},r.prototype.getDeviceModel=function(){var t=this.get("device");return this.get("DeviceManager").get(t)},r.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);e&&!this.defaultRunning&&(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},r.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);e&&this.defaultRunning&&(e.stop(this,this,t),this.defaultRunning=!1)},r.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.set("canvasOffset",null),this.set("canvasOffset",this.get("Canvas").getOffset()),t.tools&&this.trigger("canvas:updateTools")},r.prototype.clearSelection=function(t){var e;(e=(t||window).getSelection())===null||e===void 0||e.removeAllRanges()},r.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,i=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!i?"(".concat(n,": ").concat(l,")"):""},r.prototype.getWrapper=function(){return this.get("DomComponents").getWrapper()},r.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},r.prototype.getCurrentFrame=function(){return this.get("currentFrame")},r.prototype.getCurrentFrameModel=function(){return(this.getCurrentFrame()||{}).model},r.prototype.getIcon=function(t){return(this.config.icons||{})[t]||""},r.prototype.getDirtyCount=function(){return this.get("changesCount")},r.prototype.clearDirtyCount=function(){return this.set("changesCount",0)},r.prototype.getZoomDecimal=function(){return this.get("Canvas").getZoomDecimal()},r.prototype.getZoomMultiplier=function(){return this.get("Canvas").getZoomMultiplier()},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.get("I18n");return n==null?void 0:n.t.apply(n,t)},r.prototype.inAbsoluteMode=function(){return this.get("dmode")==="absolute"},r.prototype.destroyAll=function(){var t=this,e=this.config,n=this.view,i=this.getEditor(),l=(e.grapesjs||{}).editors,f=l===void 0?[]:l,d=this.get("shallow");d==null||d.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(v){return v.destroy()}),n&&n.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(v){return t[v]={}}),f.splice(f.indexOf(i),1),(0,j.hasWin)()&&(0,Y.default)(e.el).empty().attr(this.attrsOrig)},r.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},r.prototype.setEditing=function(t){return this.set("editing",t),this},r.prototype.isEditing=function(){return!!this.get("editing")},r.prototype.log=function(t,e){e===void 0&&(e={});var n=e.ns,i=e.level,l=i===void 0?"debug":i;if(this.trigger("log",t,e),l&&this.trigger("log:".concat(l),t,e),n){var f="log-".concat(n);this.trigger(f,t,e),l&&this.trigger("".concat(f,":").concat(l),t,e)}},r.prototype.logInfo=function(t,e){this.log(t,Tr(Tr({},e),{level:"info"}))},r.prototype.logWarning=function(t,e){this.log(t,Tr(Tr({},e),{level:"warning"}))},r.prototype.logError=function(t,e){this.log(t,Tr(Tr({},e),{level:"error"}))},r.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var n=this.config,i=n.colorPicker,l=i===void 0?{}:i,f=n.el,d=n.stylePrefix;return(0,Y.default)(t).spectrum(Tr(Tr({containerClassName:"".concat(d,"one-bg ").concat(d,"two-color"),appendTo:f||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),l))},r.prototype.skip=function(t){this.__skip=!0;var e=this.get("UndoManager");e?e.skip(t):t(),this.__skip=!1},r.prototype.data=function(t,e,n){var i="_gjs-data";if(t[i]||(t[i]={}),(0,m.isUndefined)(n))return t[i][e];t[i][e]=n},r}(C.Hn);const Oy=Sy;var Ty=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ey=function(a){function r(t){var e=a.call(this,{model:t})||this,n=t.attributes,i=n.Panels,l=n.UndoManager;return t.view=e,t.once("change:ready",function(){i.active(),i.disableButtons(),l.clear(),setTimeout(function(){t.trigger("load",t.get("Editor")),t.clearDirtyCount()})}),e}return Ty(r,a),r.prototype.render=function(){var t=this,e=this.$el,n=this.model,i=n.attributes,l=i.Panels,f=i.Canvas,d=n.config,v=n.modules,g=d.stylePrefix,_=["".concat(g,"editor")];!d.customUI&&_.push("".concat(g,"one-bg ").concat(g,"two-color"));var k=(0,Y.default)(d.el||"body ".concat(d.container));d.cssIcons&&(0,j.appendStyles)(d.cssIcons,{unique:!0,prepand:!0}),e.empty(),d.width&&k.css("width",d.width),d.height&&k.css("height",d.height),e.append(f.render()),e.append(l.render());var V=n.get("shallow").get("Canvas").render();return V.style.display="none",e.append(V),e.attr("class",_.join(" ")),k.addClass("".concat(g,"editor-cont")).empty().append(e),v.forEach(function(q){return q.postRender&&q.postRender(t)}),this},r}(C.G7);const ky=Ey;var Bc=function(){return Bc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Bc.apply(this,arguments)},xh=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(_){_(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Sh=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(_){g=[6,_],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},Py=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ay=function(){function a(r,t){var e;r===void 0&&(r={}),t===void 0&&(t={}),this.modules=[],this.html=U,this.config=Bc(Bc(Bc({},dt),r),{pStylePrefix:(e=r.stylePrefix)!==null&&e!==void 0?e:dt.stylePrefix}),this.em=new Oy(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return this.em.getConfig(r)},a.prototype.getHtml=function(r){return this.em.getHtml(r)},a.prototype.getCss=function(r){return this.em.getCss(r)},a.prototype.getJs=function(r){return this.em.getJs(r)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(r,t){return t===void 0&&(t={}),this.em.setComponents(r,t),this},a.prototype.addComponents=function(r,t){return this.getWrapper().append(r,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(r,t){return t===void 0&&(t={}),this.em.setStyle(r,t),this},a.prototype.addStyle=function(r,t){return t===void 0&&(t={}),this.em.addStyle(r,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var r=this.em.getSelected();if(r)return this.StyleManager.getModelToStyle(r)},a.prototype.select=function(r,t){return this.em.setSelected(r,t),this},a.prototype.selectAdd=function(r){return this.em.addSelected(r),this},a.prototype.selectRemove=function(r){return this.em.removeSelected(r),this},a.prototype.selectToggle=function(r){return this.em.toggleSelected(r),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(r){return this.em.set("device",r),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(r,t){return t===void 0&&(t={}),this.Commands.run(r,t)},a.prototype.stopCommand=function(r,t){return t===void 0&&(t={}),this.Commands.stop(r,t)},a.prototype.store=function(r){return xh(this,void 0,void 0,function(){return Sh(this,function(t){switch(t.label){case 0:return[4,this.em.store(r)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(r){return xh(this,void 0,void 0,function(){return Sh(this,function(t){switch(t.label){case 0:return[4,this.em.load(r)];case 1:return[2,t.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(r){return this.em.loadData(r)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(r){return this.em.loadData(r)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(r){this.em.refreshCanvas(r)},a.prototype.setCustomRte=function(r){this.RichTextEditor.customRte=r},a.prototype.setCustomParserCss=function(r){return this.Parser.getConfig().parserCss=r,this},a.prototype.setDragMode=function(r){return this.em.setDragMode(r),this},a.prototype.log=function(r,t){return t===void 0&&(t={}),this.em.log(r,t),this},a.prototype.t=function(){for(var r,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(r=this.em).t.apply(r,t)},a.prototype.on=function(r,t){return this.em.on(r,t),this},a.prototype.once=function(r,t){return this.em.once(r,t),this},a.prototype.off=function(r,t){return this.em.off(r,t),this},a.prototype.trigger=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,Py([r],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var r;return(r=this.editorView)===null||r===void 0?void 0:r.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var r;return(r=this.editorView)===null||r===void 0||r.remove(),this.editorView=new ky(this.em),this.editorView.render().el},a.prototype.onReady=function(r){this.em.get("ready")?r(this):this.em.on("load",r)},a}();const jy=Ay,My=function(){function a(){this.plugins={}}return a.prototype.add=function(r,t){var e=this.get(r);return e||(this.plugins[r]=t,t)},a.prototype.get=function(r){return this.plugins[r]},a.prototype.getAll=function(){return this.plugins},a}();var Sp=function(){return Sp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Sp.apply(this,arguments)};(function(){if((0,j.hasWin)()&&function(){for(var r,t=window.navigator.userAgent,e=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],n=0;n<e.length&&!(r=e[n][1].exec(t));n++);return!!r}()){var a=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(r){return r||(r=""),a.apply(document.implementation,[r])}}})();var Oh=new My,Th=[],Ly={$:Y.default,editors:Th,plugins:Oh,version:"0.20.4",init:function(a){a===void 0&&(a={});var r=a.headless,t=a.container;if(!t&&!r)throw new Error("'container' is required");var e=Sp(Sp({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:r?void 0:(0,m.isElement)(t)?t:document.querySelector(t)}),n=new jy(e,{$:Y.default}),i=n.getModel();return e.plugins.forEach(function(l){var f=(0,m.isFunction)(l)?l:Oh.get(l),d=e.pluginsOpts[l]||{};if(!f){var v=(0,j.getGlobal)()[l];f=(v==null?void 0:v.default)||v}f?f(n,d):(0,m.isFunction)(l)?l(n,d):i.logWarning("Plugin ".concat(l," not found"),{context:"plugins",plugin:l})}),i.loadOnStart(),e.autorender&&!r&&n.render(),Th.push(n),n}};const Dy=Ly})(),lt=lt.default})())})(e0);const n0=Ld(wd),Rp="gjs-open-import-webpage",_d="set-device-desktop",Cd="set-device-tablet",xd="set-device-mobile",Sd="canvas-clear",Od="save-data",Td="load-data",r0=(T,F)=>{const G=T.getConfig("stylePrefix"),J=T.Modal,Q=document.createElement("div"),lt=F.modalImportLabel,m=F.modalImportContent,Y=T.CodeManager.getViewer("CodeMirror").clone();let j=Y.editor;const U=document.createElement("button");return U.type="button",U.innerHTML=F.modalImportButton,U.className=`${G}btn-prim ${G}btn-import`,U.onclick=dt=>{T.Css.clear(),T.setComponents(j.getValue().trim()),J.close()},Y.set({codeName:"htmlmixed",theme:"hopscotch",readOnly:0,...F.importViewerOptions}),{run(dt){if(!j){const Z=document.createElement("textarea");if(lt){const z=document.createElement("div");z.className=`${G}import-label`,z.innerHTML=lt,Q.appendChild(z)}Q.appendChild(Z),Q.appendChild(U),Y.init(Z),j=Y.editor}J.setTitle(F.modalImportTitle),J.setContent(Q);const K=typeof m=="function"?m(dt):m;Y.setContent(K||""),J.open().onceClose(()=>dt.stopCommand(Rp)),j.refresh()},stop(){J.close()}}};function eg(T,F){return function(){return T.apply(F,arguments)}}const{toString:ng}=Object.prototype,{getPrototypeOf:Dd}=Object,Nd=(T=>F=>{const G=ng.call(F);return T[G]||(T[G]=G.slice(8,-1).toLowerCase())})(Object.create(null)),Ji=T=>(T=T.toLowerCase(),F=>Nd(F)===T),zp=T=>F=>typeof F===T,{isArray:Bl}=Array,Qc=zp("undefined");function o0(T){return T!==null&&!Qc(T)&&T.constructor!==null&&!Qc(T.constructor)&&Us(T.constructor.isBuffer)&&T.constructor.isBuffer(T)}const rg=Ji("ArrayBuffer");function i0(T){let F;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?F=ArrayBuffer.isView(T):F=T&&T.buffer&&rg(T.buffer),F}const s0=zp("string"),Us=zp("function"),og=zp("number"),Id=T=>T!==null&&typeof T=="object",a0=T=>T===!0||T===!1,Dp=T=>{if(Nd(T)!=="object")return!1;const F=Dd(T);return(F===null||F===Object.prototype||Object.getPrototypeOf(F)===null)&&!(Symbol.toStringTag in T)&&!(Symbol.iterator in T)},l0=Ji("Date"),c0=Ji("File"),u0=Ji("Blob"),p0=Ji("FileList"),f0=T=>Id(T)&&Us(T.pipe),d0=T=>{const F="[object FormData]";return T&&(typeof FormData=="function"&&T instanceof FormData||ng.call(T)===F||Us(T.toString)&&T.toString()===F)},h0=Ji("URLSearchParams"),g0=T=>T.trim?T.trim():T.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tu(T,F,{allOwnKeys:G=!1}={}){if(T===null||typeof T>"u")return;let J,Q;if(typeof T!="object"&&(T=[T]),Bl(T))for(J=0,Q=T.length;J<Q;J++)F.call(null,T[J],J,T);else{const lt=G?Object.getOwnPropertyNames(T):Object.keys(T),m=lt.length;let Y;for(J=0;J<m;J++)Y=lt[J],F.call(null,T[Y],Y,T)}}function ig(T,F){F=F.toLowerCase();const G=Object.keys(T);let J=G.length,Q;for(;J-- >0;)if(Q=G[J],F===Q.toLowerCase())return Q;return null}const sg=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ag=T=>!Qc(T)&&T!==sg;function Ed(){const{caseless:T}=ag(this)&&this||{},F={},G=(J,Q)=>{const lt=T&&ig(F,Q)||Q;Dp(F[lt])&&Dp(J)?F[lt]=Ed(F[lt],J):Dp(J)?F[lt]=Ed({},J):Bl(J)?F[lt]=J.slice():F[lt]=J};for(let J=0,Q=arguments.length;J<Q;J++)arguments[J]&&tu(arguments[J],G);return F}const v0=(T,F,G,{allOwnKeys:J}={})=>(tu(F,(Q,lt)=>{G&&Us(Q)?T[lt]=eg(Q,G):T[lt]=Q},{allOwnKeys:J}),T),m0=T=>(T.charCodeAt(0)===65279&&(T=T.slice(1)),T),y0=(T,F,G,J)=>{T.prototype=Object.create(F.prototype,J),T.prototype.constructor=T,Object.defineProperty(T,"super",{value:F.prototype}),G&&Object.assign(T.prototype,G)},b0=(T,F,G,J)=>{let Q,lt,m;const Y={};if(F=F||{},T==null)return F;do{for(Q=Object.getOwnPropertyNames(T),lt=Q.length;lt-- >0;)m=Q[lt],(!J||J(m,T,F))&&!Y[m]&&(F[m]=T[m],Y[m]=!0);T=G!==!1&&Dd(T)}while(T&&(!G||G(T,F))&&T!==Object.prototype);return F},w0=(T,F,G)=>{T=String(T),(G===void 0||G>T.length)&&(G=T.length),G-=F.length;const J=T.indexOf(F,G);return J!==-1&&J===G},_0=T=>{if(!T)return null;if(Bl(T))return T;let F=T.length;if(!og(F))return null;const G=new Array(F);for(;F-- >0;)G[F]=T[F];return G},C0=(T=>F=>T&&F instanceof T)(typeof Uint8Array<"u"&&Dd(Uint8Array)),x0=(T,F)=>{const J=(T&&T[Symbol.iterator]).call(T);let Q;for(;(Q=J.next())&&!Q.done;){const lt=Q.value;F.call(T,lt[0],lt[1])}},S0=(T,F)=>{let G;const J=[];for(;(G=T.exec(F))!==null;)J.push(G);return J},O0=Ji("HTMLFormElement"),T0=T=>T.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(G,J,Q){return J.toUpperCase()+Q}),$h=(({hasOwnProperty:T})=>(F,G)=>T.call(F,G))(Object.prototype),E0=Ji("RegExp"),lg=(T,F)=>{const G=Object.getOwnPropertyDescriptors(T),J={};tu(G,(Q,lt)=>{F(Q,lt,T)!==!1&&(J[lt]=Q)}),Object.defineProperties(T,J)},k0=T=>{lg(T,(F,G)=>{if(Us(T)&&["arguments","caller","callee"].indexOf(G)!==-1)return!1;const J=T[G];if(Us(J)){if(F.enumerable=!1,"writable"in F){F.writable=!1;return}F.set||(F.set=()=>{throw Error("Can not rewrite read-only method '"+G+"'")})}})},P0=(T,F)=>{const G={},J=Q=>{Q.forEach(lt=>{G[lt]=!0})};return Bl(T)?J(T):J(String(T).split(F)),G},A0=()=>{},j0=(T,F)=>(T=+T,Number.isFinite(T)?T:F),vd="abcdefghijklmnopqrstuvwxyz",qh="0123456789",cg={DIGIT:qh,ALPHA:vd,ALPHA_DIGIT:vd+vd.toUpperCase()+qh},M0=(T=16,F=cg.ALPHA_DIGIT)=>{let G="";const{length:J}=F;for(;T--;)G+=F[Math.random()*J|0];return G};function L0(T){return!!(T&&Us(T.append)&&T[Symbol.toStringTag]==="FormData"&&T[Symbol.iterator])}const D0=T=>{const F=new Array(10),G=(J,Q)=>{if(Id(J)){if(F.indexOf(J)>=0)return;if(!("toJSON"in J)){F[Q]=J;const lt=Bl(J)?[]:{};return tu(J,(m,Y)=>{const j=G(m,Q+1);!Qc(j)&&(lt[Y]=j)}),F[Q]=void 0,lt}}return J};return G(T,0)},Yt={isArray:Bl,isArrayBuffer:rg,isBuffer:o0,isFormData:d0,isArrayBufferView:i0,isString:s0,isNumber:og,isBoolean:a0,isObject:Id,isPlainObject:Dp,isUndefined:Qc,isDate:l0,isFile:c0,isBlob:u0,isRegExp:E0,isFunction:Us,isStream:f0,isURLSearchParams:h0,isTypedArray:C0,isFileList:p0,forEach:tu,merge:Ed,extend:v0,trim:g0,stripBOM:m0,inherits:y0,toFlatObject:b0,kindOf:Nd,kindOfTest:Ji,endsWith:w0,toArray:_0,forEachEntry:x0,matchAll:S0,isHTMLForm:O0,hasOwnProperty:$h,hasOwnProp:$h,reduceDescriptors:lg,freezeMethods:k0,toObjectSet:P0,toCamelCase:T0,noop:A0,toFiniteNumber:j0,findKey:ig,global:sg,isContextDefined:ag,ALPHABET:cg,generateString:M0,isSpecCompliantForm:L0,toJSONObject:D0};function fn(T,F,G,J,Q){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=T,this.name="AxiosError",F&&(this.code=F),G&&(this.config=G),J&&(this.request=J),Q&&(this.response=Q)}Yt.inherits(fn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Yt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ug=fn.prototype,pg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(T=>{pg[T]={value:T}});Object.defineProperties(fn,pg);Object.defineProperty(ug,"isAxiosError",{value:!0});fn.from=(T,F,G,J,Q,lt)=>{const m=Object.create(ug);return Yt.toFlatObject(T,m,function(j){return j!==Error.prototype},Y=>Y!=="isAxiosError"),fn.call(m,T.message,F,G,J,Q),m.cause=T,m.name=T.name,lt&&Object.assign(m,lt),m};const N0=null;function kd(T){return Yt.isPlainObject(T)||Yt.isArray(T)}function fg(T){return Yt.endsWith(T,"[]")?T.slice(0,-2):T}function Gh(T,F,G){return T?T.concat(F).map(function(Q,lt){return Q=fg(Q),!G&&lt?"["+Q+"]":Q}).join(G?".":""):F}function I0(T){return Yt.isArray(T)&&!T.some(kd)}const F0=Yt.toFlatObject(Yt,{},null,function(F){return/^is[A-Z]/.test(F)});function Bp(T,F,G){if(!Yt.isObject(T))throw new TypeError("target must be an object");F=F||new FormData,G=Yt.toFlatObject(G,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,M){return!Yt.isUndefined(M[O])});const J=G.metaTokens,Q=G.visitor||dt,lt=G.dots,m=G.indexes,j=(G.Blob||typeof Blob<"u"&&Blob)&&Yt.isSpecCompliantForm(F);if(!Yt.isFunction(Q))throw new TypeError("visitor must be a function");function U(C){if(C===null)return"";if(Yt.isDate(C))return C.toISOString();if(!j&&Yt.isBlob(C))throw new fn("Blob is not supported. Use a Buffer instead.");return Yt.isArrayBuffer(C)||Yt.isTypedArray(C)?j&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function dt(C,O,M){let D=C;if(C&&!M&&typeof C=="object"){if(Yt.endsWith(O,"{}"))O=J?O:O.slice(0,-2),C=JSON.stringify(C);else if(Yt.isArray(C)&&I0(C)||(Yt.isFileList(C)||Yt.endsWith(O,"[]"))&&(D=Yt.toArray(C)))return O=fg(O),D.forEach(function(ut,ht){!(Yt.isUndefined(ut)||ut===null)&&F.append(m===!0?Gh([O],ht,lt):m===null?O:O+"[]",U(ut))}),!1}return kd(C)?!0:(F.append(Gh(M,O,lt),U(C)),!1)}const K=[],Z=Object.assign(F0,{defaultVisitor:dt,convertValue:U,isVisitable:kd});function z(C,O){if(!Yt.isUndefined(C)){if(K.indexOf(C)!==-1)throw Error("Circular reference detected in "+O.join("."));K.push(C),Yt.forEach(C,function(D,N){(!(Yt.isUndefined(D)||D===null)&&Q.call(F,D,Yt.isString(N)?N.trim():N,O,Z))===!0&&z(D,O?O.concat(N):[N])}),K.pop()}}if(!Yt.isObject(T))throw new TypeError("data must be an object");return z(T),F}function Kh(T){const F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(T).replace(/[!'()~]|%20|%00/g,function(J){return F[J]})}function Fd(T,F){this._pairs=[],T&&Bp(T,this,F)}const dg=Fd.prototype;dg.append=function(F,G){this._pairs.push([F,G])};dg.toString=function(F){const G=F?function(J){return F.call(this,J,Kh)}:Kh;return this._pairs.map(function(Q){return G(Q[0])+"="+G(Q[1])},"").join("&")};function R0(T){return encodeURIComponent(T).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hg(T,F,G){if(!F)return T;const J=G&&G.encode||R0,Q=G&&G.serialize;let lt;if(Q?lt=Q(F,G):lt=Yt.isURLSearchParams(F)?F.toString():new Fd(F,G).toString(J),lt){const m=T.indexOf("#");m!==-1&&(T=T.slice(0,m)),T+=(T.indexOf("?")===-1?"?":"&")+lt}return T}class V0{constructor(){this.handlers=[]}use(F,G,J){return this.handlers.push({fulfilled:F,rejected:G,synchronous:J?J.synchronous:!1,runWhen:J?J.runWhen:null}),this.handlers.length-1}eject(F){this.handlers[F]&&(this.handlers[F]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(F){Yt.forEach(this.handlers,function(J){J!==null&&F(J)})}}const Jh=V0,gg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},H0=typeof URLSearchParams<"u"?URLSearchParams:Fd,z0=typeof FormData<"u"?FormData:null,B0=typeof Blob<"u"?Blob:null,U0=(()=>{let T;return typeof navigator<"u"&&((T=navigator.product)==="ReactNative"||T==="NativeScript"||T==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),W0=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),bi={isBrowser:!0,classes:{URLSearchParams:H0,FormData:z0,Blob:B0},isStandardBrowserEnv:U0,isStandardBrowserWebWorkerEnv:W0,protocols:["http","https","file","blob","url","data"]};function $0(T,F){return Bp(T,new bi.classes.URLSearchParams,Object.assign({visitor:function(G,J,Q,lt){return bi.isNode&&Yt.isBuffer(G)?(this.append(J,G.toString("base64")),!1):lt.defaultVisitor.apply(this,arguments)}},F))}function q0(T){return Yt.matchAll(/\w+|\[(\w*)]/g,T).map(F=>F[0]==="[]"?"":F[1]||F[0])}function G0(T){const F={},G=Object.keys(T);let J;const Q=G.length;let lt;for(J=0;J<Q;J++)lt=G[J],F[lt]=T[lt];return F}function vg(T){function F(G,J,Q,lt){let m=G[lt++];const Y=Number.isFinite(+m),j=lt>=G.length;return m=!m&&Yt.isArray(Q)?Q.length:m,j?(Yt.hasOwnProp(Q,m)?Q[m]=[Q[m],J]:Q[m]=J,!Y):((!Q[m]||!Yt.isObject(Q[m]))&&(Q[m]=[]),F(G,J,Q[m],lt)&&Yt.isArray(Q[m])&&(Q[m]=G0(Q[m])),!Y)}if(Yt.isFormData(T)&&Yt.isFunction(T.entries)){const G={};return Yt.forEachEntry(T,(J,Q)=>{F(q0(J),Q,G,0)}),G}return null}const K0={"Content-Type":void 0};function J0(T,F,G){if(Yt.isString(T))try{return(F||JSON.parse)(T),Yt.trim(T)}catch(J){if(J.name!=="SyntaxError")throw J}return(G||JSON.stringify)(T)}const Up={transitional:gg,adapter:["xhr","http"],transformRequest:[function(F,G){const J=G.getContentType()||"",Q=J.indexOf("application/json")>-1,lt=Yt.isObject(F);if(lt&&Yt.isHTMLForm(F)&&(F=new FormData(F)),Yt.isFormData(F))return Q&&Q?JSON.stringify(vg(F)):F;if(Yt.isArrayBuffer(F)||Yt.isBuffer(F)||Yt.isStream(F)||Yt.isFile(F)||Yt.isBlob(F))return F;if(Yt.isArrayBufferView(F))return F.buffer;if(Yt.isURLSearchParams(F))return G.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),F.toString();let Y;if(lt){if(J.indexOf("application/x-www-form-urlencoded")>-1)return $0(F,this.formSerializer).toString();if((Y=Yt.isFileList(F))||J.indexOf("multipart/form-data")>-1){const j=this.env&&this.env.FormData;return Bp(Y?{"files[]":F}:F,j&&new j,this.formSerializer)}}return lt||Q?(G.setContentType("application/json",!1),J0(F)):F}],transformResponse:[function(F){const G=this.transitional||Up.transitional,J=G&&G.forcedJSONParsing,Q=this.responseType==="json";if(F&&Yt.isString(F)&&(J&&!this.responseType||Q)){const m=!(G&&G.silentJSONParsing)&&Q;try{return JSON.parse(F)}catch(Y){if(m)throw Y.name==="SyntaxError"?fn.from(Y,fn.ERR_BAD_RESPONSE,this,null,this.response):Y}}return F}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bi.classes.FormData,Blob:bi.classes.Blob},validateStatus:function(F){return F>=200&&F<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Yt.forEach(["delete","get","head"],function(F){Up.headers[F]={}});Yt.forEach(["post","put","patch"],function(F){Up.headers[F]=Yt.merge(K0)});const Rd=Up,Y0=Yt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),X0=T=>{const F={};let G,J,Q;return T&&T.split(`
`).forEach(function(m){Q=m.indexOf(":"),G=m.substring(0,Q).trim().toLowerCase(),J=m.substring(Q+1).trim(),!(!G||F[G]&&Y0[G])&&(G==="set-cookie"?F[G]?F[G].push(J):F[G]=[J]:F[G]=F[G]?F[G]+", "+J:J)}),F},Yh=Symbol("internals");function Zc(T){return T&&String(T).trim().toLowerCase()}function Np(T){return T===!1||T==null?T:Yt.isArray(T)?T.map(Np):String(T)}function Z0(T){const F=Object.create(null),G=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let J;for(;J=G.exec(T);)F[J[1]]=J[2];return F}function Q0(T){return/^[-_a-zA-Z]+$/.test(T.trim())}function md(T,F,G,J,Q){if(Yt.isFunction(J))return J.call(this,F,G);if(Q&&(F=G),!!Yt.isString(F)){if(Yt.isString(J))return F.indexOf(J)!==-1;if(Yt.isRegExp(J))return J.test(F)}}function tb(T){return T.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(F,G,J)=>G.toUpperCase()+J)}function eb(T,F){const G=Yt.toCamelCase(" "+F);["get","set","has"].forEach(J=>{Object.defineProperty(T,J+G,{value:function(Q,lt,m){return this[J].call(this,F,Q,lt,m)},configurable:!0})})}class Wp{constructor(F){F&&this.set(F)}set(F,G,J){const Q=this;function lt(Y,j,U){const dt=Zc(j);if(!dt)throw new Error("header name must be a non-empty string");const K=Yt.findKey(Q,dt);(!K||Q[K]===void 0||U===!0||U===void 0&&Q[K]!==!1)&&(Q[K||j]=Np(Y))}const m=(Y,j)=>Yt.forEach(Y,(U,dt)=>lt(U,dt,j));return Yt.isPlainObject(F)||F instanceof this.constructor?m(F,G):Yt.isString(F)&&(F=F.trim())&&!Q0(F)?m(X0(F),G):F!=null&&lt(G,F,J),this}get(F,G){if(F=Zc(F),F){const J=Yt.findKey(this,F);if(J){const Q=this[J];if(!G)return Q;if(G===!0)return Z0(Q);if(Yt.isFunction(G))return G.call(this,Q,J);if(Yt.isRegExp(G))return G.exec(Q);throw new TypeError("parser must be boolean|regexp|function")}}}has(F,G){if(F=Zc(F),F){const J=Yt.findKey(this,F);return!!(J&&this[J]!==void 0&&(!G||md(this,this[J],J,G)))}return!1}delete(F,G){const J=this;let Q=!1;function lt(m){if(m=Zc(m),m){const Y=Yt.findKey(J,m);Y&&(!G||md(J,J[Y],Y,G))&&(delete J[Y],Q=!0)}}return Yt.isArray(F)?F.forEach(lt):lt(F),Q}clear(F){const G=Object.keys(this);let J=G.length,Q=!1;for(;J--;){const lt=G[J];(!F||md(this,this[lt],lt,F,!0))&&(delete this[lt],Q=!0)}return Q}normalize(F){const G=this,J={};return Yt.forEach(this,(Q,lt)=>{const m=Yt.findKey(J,lt);if(m){G[m]=Np(Q),delete G[lt];return}const Y=F?tb(lt):String(lt).trim();Y!==lt&&delete G[lt],G[Y]=Np(Q),J[Y]=!0}),this}concat(...F){return this.constructor.concat(this,...F)}toJSON(F){const G=Object.create(null);return Yt.forEach(this,(J,Q)=>{J!=null&&J!==!1&&(G[Q]=F&&Yt.isArray(J)?J.join(", "):J)}),G}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([F,G])=>F+": "+G).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(F){return F instanceof this?F:new this(F)}static concat(F,...G){const J=new this(F);return G.forEach(Q=>J.set(Q)),J}static accessor(F){const J=(this[Yh]=this[Yh]={accessors:{}}).accessors,Q=this.prototype;function lt(m){const Y=Zc(m);J[Y]||(eb(Q,m),J[Y]=!0)}return Yt.isArray(F)?F.forEach(lt):lt(F),this}}Wp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Yt.freezeMethods(Wp.prototype);Yt.freezeMethods(Wp);const Ki=Wp;function yd(T,F){const G=this||Rd,J=F||G,Q=Ki.from(J.headers);let lt=J.data;return Yt.forEach(T,function(Y){lt=Y.call(G,lt,Q.normalize(),F?F.status:void 0)}),Q.normalize(),lt}function mg(T){return!!(T&&T.__CANCEL__)}function eu(T,F,G){fn.call(this,T??"canceled",fn.ERR_CANCELED,F,G),this.name="CanceledError"}Yt.inherits(eu,fn,{__CANCEL__:!0});function nb(T,F,G){const J=G.config.validateStatus;!G.status||!J||J(G.status)?T(G):F(new fn("Request failed with status code "+G.status,[fn.ERR_BAD_REQUEST,fn.ERR_BAD_RESPONSE][Math.floor(G.status/100)-4],G.config,G.request,G))}const rb=bi.isStandardBrowserEnv?function(){return{write:function(G,J,Q,lt,m,Y){const j=[];j.push(G+"="+encodeURIComponent(J)),Yt.isNumber(Q)&&j.push("expires="+new Date(Q).toGMTString()),Yt.isString(lt)&&j.push("path="+lt),Yt.isString(m)&&j.push("domain="+m),Y===!0&&j.push("secure"),document.cookie=j.join("; ")},read:function(G){const J=document.cookie.match(new RegExp("(^|;\\s*)("+G+")=([^;]*)"));return J?decodeURIComponent(J[3]):null},remove:function(G){this.write(G,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function ob(T){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(T)}function ib(T,F){return F?T.replace(/\/+$/,"")+"/"+F.replace(/^\/+/,""):T}function yg(T,F){return T&&!ob(F)?ib(T,F):F}const sb=bi.isStandardBrowserEnv?function(){const F=/(msie|trident)/i.test(navigator.userAgent),G=document.createElement("a");let J;function Q(lt){let m=lt;return F&&(G.setAttribute("href",m),m=G.href),G.setAttribute("href",m),{href:G.href,protocol:G.protocol?G.protocol.replace(/:$/,""):"",host:G.host,search:G.search?G.search.replace(/^\?/,""):"",hash:G.hash?G.hash.replace(/^#/,""):"",hostname:G.hostname,port:G.port,pathname:G.pathname.charAt(0)==="/"?G.pathname:"/"+G.pathname}}return J=Q(window.location.href),function(m){const Y=Yt.isString(m)?Q(m):m;return Y.protocol===J.protocol&&Y.host===J.host}}():function(){return function(){return!0}}();function ab(T){const F=/^([-+\w]{1,25})(:?\/\/|:)/.exec(T);return F&&F[1]||""}function lb(T,F){T=T||10;const G=new Array(T),J=new Array(T);let Q=0,lt=0,m;return F=F!==void 0?F:1e3,function(j){const U=Date.now(),dt=J[lt];m||(m=U),G[Q]=j,J[Q]=U;let K=lt,Z=0;for(;K!==Q;)Z+=G[K++],K=K%T;if(Q=(Q+1)%T,Q===lt&&(lt=(lt+1)%T),U-m<F)return;const z=dt&&U-dt;return z?Math.round(Z*1e3/z):void 0}}function Xh(T,F){let G=0;const J=lb(50,250);return Q=>{const lt=Q.loaded,m=Q.lengthComputable?Q.total:void 0,Y=lt-G,j=J(Y),U=lt<=m;G=lt;const dt={loaded:lt,total:m,progress:m?lt/m:void 0,bytes:Y,rate:j||void 0,estimated:j&&m&&U?(m-lt)/j:void 0,event:Q};dt[F?"download":"upload"]=!0,T(dt)}}const cb=typeof XMLHttpRequest<"u",ub=cb&&function(T){return new Promise(function(G,J){let Q=T.data;const lt=Ki.from(T.headers).normalize(),m=T.responseType;let Y;function j(){T.cancelToken&&T.cancelToken.unsubscribe(Y),T.signal&&T.signal.removeEventListener("abort",Y)}Yt.isFormData(Q)&&(bi.isStandardBrowserEnv||bi.isStandardBrowserWebWorkerEnv)&&lt.setContentType(!1);let U=new XMLHttpRequest;if(T.auth){const z=T.auth.username||"",C=T.auth.password?unescape(encodeURIComponent(T.auth.password)):"";lt.set("Authorization","Basic "+btoa(z+":"+C))}const dt=yg(T.baseURL,T.url);U.open(T.method.toUpperCase(),hg(dt,T.params,T.paramsSerializer),!0),U.timeout=T.timeout;function K(){if(!U)return;const z=Ki.from("getAllResponseHeaders"in U&&U.getAllResponseHeaders()),O={data:!m||m==="text"||m==="json"?U.responseText:U.response,status:U.status,statusText:U.statusText,headers:z,config:T,request:U};nb(function(D){G(D),j()},function(D){J(D),j()},O),U=null}if("onloadend"in U?U.onloadend=K:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(K)},U.onabort=function(){U&&(J(new fn("Request aborted",fn.ECONNABORTED,T,U)),U=null)},U.onerror=function(){J(new fn("Network Error",fn.ERR_NETWORK,T,U)),U=null},U.ontimeout=function(){let C=T.timeout?"timeout of "+T.timeout+"ms exceeded":"timeout exceeded";const O=T.transitional||gg;T.timeoutErrorMessage&&(C=T.timeoutErrorMessage),J(new fn(C,O.clarifyTimeoutError?fn.ETIMEDOUT:fn.ECONNABORTED,T,U)),U=null},bi.isStandardBrowserEnv){const z=(T.withCredentials||sb(dt))&&T.xsrfCookieName&&rb.read(T.xsrfCookieName);z&&lt.set(T.xsrfHeaderName,z)}Q===void 0&&lt.setContentType(null),"setRequestHeader"in U&&Yt.forEach(lt.toJSON(),function(C,O){U.setRequestHeader(O,C)}),Yt.isUndefined(T.withCredentials)||(U.withCredentials=!!T.withCredentials),m&&m!=="json"&&(U.responseType=T.responseType),typeof T.onDownloadProgress=="function"&&U.addEventListener("progress",Xh(T.onDownloadProgress,!0)),typeof T.onUploadProgress=="function"&&U.upload&&U.upload.addEventListener("progress",Xh(T.onUploadProgress)),(T.cancelToken||T.signal)&&(Y=z=>{U&&(J(!z||z.type?new eu(null,T,U):z),U.abort(),U=null)},T.cancelToken&&T.cancelToken.subscribe(Y),T.signal&&(T.signal.aborted?Y():T.signal.addEventListener("abort",Y)));const Z=ab(dt);if(Z&&bi.protocols.indexOf(Z)===-1){J(new fn("Unsupported protocol "+Z+":",fn.ERR_BAD_REQUEST,T));return}U.send(Q||null)})},Ip={http:N0,xhr:ub};Yt.forEach(Ip,(T,F)=>{if(T){try{Object.defineProperty(T,"name",{value:F})}catch{}Object.defineProperty(T,"adapterName",{value:F})}});const pb={getAdapter:T=>{T=Yt.isArray(T)?T:[T];const{length:F}=T;let G,J;for(let Q=0;Q<F&&(G=T[Q],!(J=Yt.isString(G)?Ip[G.toLowerCase()]:G));Q++);if(!J)throw J===!1?new fn(`Adapter ${G} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Yt.hasOwnProp(Ip,G)?`Adapter '${G}' is not available in the build`:`Unknown adapter '${G}'`);if(!Yt.isFunction(J))throw new TypeError("adapter is not a function");return J},adapters:Ip};function bd(T){if(T.cancelToken&&T.cancelToken.throwIfRequested(),T.signal&&T.signal.aborted)throw new eu(null,T)}function Zh(T){return bd(T),T.headers=Ki.from(T.headers),T.data=yd.call(T,T.transformRequest),["post","put","patch"].indexOf(T.method)!==-1&&T.headers.setContentType("application/x-www-form-urlencoded",!1),pb.getAdapter(T.adapter||Rd.adapter)(T).then(function(J){return bd(T),J.data=yd.call(T,T.transformResponse,J),J.headers=Ki.from(J.headers),J},function(J){return mg(J)||(bd(T),J&&J.response&&(J.response.data=yd.call(T,T.transformResponse,J.response),J.response.headers=Ki.from(J.response.headers))),Promise.reject(J)})}const Qh=T=>T instanceof Ki?T.toJSON():T;function zl(T,F){F=F||{};const G={};function J(U,dt,K){return Yt.isPlainObject(U)&&Yt.isPlainObject(dt)?Yt.merge.call({caseless:K},U,dt):Yt.isPlainObject(dt)?Yt.merge({},dt):Yt.isArray(dt)?dt.slice():dt}function Q(U,dt,K){if(Yt.isUndefined(dt)){if(!Yt.isUndefined(U))return J(void 0,U,K)}else return J(U,dt,K)}function lt(U,dt){if(!Yt.isUndefined(dt))return J(void 0,dt)}function m(U,dt){if(Yt.isUndefined(dt)){if(!Yt.isUndefined(U))return J(void 0,U)}else return J(void 0,dt)}function Y(U,dt,K){if(K in F)return J(U,dt);if(K in T)return J(void 0,U)}const j={url:lt,method:lt,data:lt,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:Y,headers:(U,dt)=>Q(Qh(U),Qh(dt),!0)};return Yt.forEach(Object.keys(T).concat(Object.keys(F)),function(dt){const K=j[dt]||Q,Z=K(T[dt],F[dt],dt);Yt.isUndefined(Z)&&K!==Y||(G[dt]=Z)}),G}const bg="1.3.4",Vd={};["object","boolean","number","function","string","symbol"].forEach((T,F)=>{Vd[T]=function(J){return typeof J===T||"a"+(F<1?"n ":" ")+T}});const tg={};Vd.transitional=function(F,G,J){function Q(lt,m){return"[Axios v"+bg+"] Transitional option '"+lt+"'"+m+(J?". "+J:"")}return(lt,m,Y)=>{if(F===!1)throw new fn(Q(m," has been removed"+(G?" in "+G:"")),fn.ERR_DEPRECATED);return G&&!tg[m]&&(tg[m]=!0,console.warn(Q(m," has been deprecated since v"+G+" and will be removed in the near future"))),F?F(lt,m,Y):!0}};function fb(T,F,G){if(typeof T!="object")throw new fn("options must be an object",fn.ERR_BAD_OPTION_VALUE);const J=Object.keys(T);let Q=J.length;for(;Q-- >0;){const lt=J[Q],m=F[lt];if(m){const Y=T[lt],j=Y===void 0||m(Y,lt,T);if(j!==!0)throw new fn("option "+lt+" must be "+j,fn.ERR_BAD_OPTION_VALUE);continue}if(G!==!0)throw new fn("Unknown option "+lt,fn.ERR_BAD_OPTION)}}const Pd={assertOptions:fb,validators:Vd},Bs=Pd.validators;class Vp{constructor(F){this.defaults=F,this.interceptors={request:new Jh,response:new Jh}}request(F,G){typeof F=="string"?(G=G||{},G.url=F):G=F||{},G=zl(this.defaults,G);const{transitional:J,paramsSerializer:Q,headers:lt}=G;J!==void 0&&Pd.assertOptions(J,{silentJSONParsing:Bs.transitional(Bs.boolean),forcedJSONParsing:Bs.transitional(Bs.boolean),clarifyTimeoutError:Bs.transitional(Bs.boolean)},!1),Q!==void 0&&Pd.assertOptions(Q,{encode:Bs.function,serialize:Bs.function},!0),G.method=(G.method||this.defaults.method||"get").toLowerCase();let m;m=lt&&Yt.merge(lt.common,lt[G.method]),m&&Yt.forEach(["delete","get","head","post","put","patch","common"],C=>{delete lt[C]}),G.headers=Ki.concat(m,lt);const Y=[];let j=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(G)===!1||(j=j&&O.synchronous,Y.unshift(O.fulfilled,O.rejected))});const U=[];this.interceptors.response.forEach(function(O){U.push(O.fulfilled,O.rejected)});let dt,K=0,Z;if(!j){const C=[Zh.bind(this),void 0];for(C.unshift.apply(C,Y),C.push.apply(C,U),Z=C.length,dt=Promise.resolve(G);K<Z;)dt=dt.then(C[K++],C[K++]);return dt}Z=Y.length;let z=G;for(K=0;K<Z;){const C=Y[K++],O=Y[K++];try{z=C(z)}catch(M){O.call(this,M);break}}try{dt=Zh.call(this,z)}catch(C){return Promise.reject(C)}for(K=0,Z=U.length;K<Z;)dt=dt.then(U[K++],U[K++]);return dt}getUri(F){F=zl(this.defaults,F);const G=yg(F.baseURL,F.url);return hg(G,F.params,F.paramsSerializer)}}Yt.forEach(["delete","get","head","options"],function(F){Vp.prototype[F]=function(G,J){return this.request(zl(J||{},{method:F,url:G,data:(J||{}).data}))}});Yt.forEach(["post","put","patch"],function(F){function G(J){return function(lt,m,Y){return this.request(zl(Y||{},{method:F,headers:J?{"Content-Type":"multipart/form-data"}:{},url:lt,data:m}))}}Vp.prototype[F]=G(),Vp.prototype[F+"Form"]=G(!0)});const Fp=Vp;class Hd{constructor(F){if(typeof F!="function")throw new TypeError("executor must be a function.");let G;this.promise=new Promise(function(lt){G=lt});const J=this;this.promise.then(Q=>{if(!J._listeners)return;let lt=J._listeners.length;for(;lt-- >0;)J._listeners[lt](Q);J._listeners=null}),this.promise.then=Q=>{let lt;const m=new Promise(Y=>{J.subscribe(Y),lt=Y}).then(Q);return m.cancel=function(){J.unsubscribe(lt)},m},F(function(lt,m,Y){J.reason||(J.reason=new eu(lt,m,Y),G(J.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(F){if(this.reason){F(this.reason);return}this._listeners?this._listeners.push(F):this._listeners=[F]}unsubscribe(F){if(!this._listeners)return;const G=this._listeners.indexOf(F);G!==-1&&this._listeners.splice(G,1)}static source(){let F;return{token:new Hd(function(Q){F=Q}),cancel:F}}}const db=Hd;function hb(T){return function(G){return T.apply(null,G)}}function gb(T){return Yt.isObject(T)&&T.isAxiosError===!0}const Ad={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ad).forEach(([T,F])=>{Ad[F]=T});const vb=Ad;function wg(T){const F=new Fp(T),G=eg(Fp.prototype.request,F);return Yt.extend(G,Fp.prototype,F,{allOwnKeys:!0}),Yt.extend(G,F,null,{allOwnKeys:!0}),G.create=function(Q){return wg(zl(T,Q))},G}const mr=wg(Rd);mr.Axios=Fp;mr.CanceledError=eu;mr.CancelToken=db;mr.isCancel=mg;mr.VERSION=bg;mr.toFormData=Bp;mr.AxiosError=fn;mr.Cancel=mr.CanceledError;mr.all=function(F){return Promise.all(F)};mr.spread=hb;mr.isAxiosError=gb;mr.mergeConfig=zl;mr.AxiosHeaders=Ki;mr.formToJSON=T=>vg(Yt.isHTMLForm(T)?new FormData(T):T);mr.HttpStatusCode=vb;mr.default=mr;const mb=mr,yb="myKey",$p=mb.create({baseURL:"/onix-api/",headers:{Authorization:"Bearer "+yb,Accept:"application/json","Content-Type":"application/json"}}),bb=async()=>{await $p.get("/config").then(T=>{const F=T.data,G=F.primaryColor,J=F.secondaryColor,Q=F.tertiaryColor,lt=F.quaternaryColor,m="gjs-";let Y="";[["one",G],["two",J],["three",Q],["four",lt]].forEach(([U,dt])=>{Y+=`
            .${m}${U}-bg {
            background-color: ${dt};
            }

            .${m}${U}-color {
            color: ${dt};
            }

            .${m}${U}-color-h:hover {
            color: ${dt};
            }
        `});const j=document.createElement("style");j.innerText=Y,document.head.appendChild(j)})},wb=async T=>{T.Panels.addPanel({id:"views"}).get("buttons").add([{attributes:{title:"Open Code"},className:"fa fa-file-code-o",command:"open-code",togglable:!1,id:"open-code"}])},_b=async T=>{await $p.get("/load/blocks").then(F=>{F.data.blocks.forEach(J=>{T.BlockManager.add(J.componentId,{label:J.label,media:J.media,category:J.category,content:J.content,attributes:{component_sync:J.component_sync}})})})},_g=async(T,F=!1)=>{let G=JSON.parse(localStorage.getItem("onix-data"));const J=T.Storage,Q=T.getProjectData();let lt=await J.store(Q),m=null;switch(G.mode){case"page":m="/save/page";break;case"block":m="/save/block"}await $p.post(m,{slug:G.slug,data:lt,preview:T.getHtml(),just_content:T.getHtml().replace(/<body[^>]*>/g,"").replace(/<\/body>/g,""),preview_no_body:T.getHtml().replace(/<body/g,'<div data-onix="onix-resuable-block-'+G.componentId+'"').replace(/body>/g,"div>")}).then(Y=>{F?Ha.fire({icon:"success",title:"Success",text:Y.data.message,toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:j=>{j.addEventListener("mouseenter",Ha.stopTimer),j.addEventListener("mouseleave",Ha.resumeTimer)}}):Ha.fire({icon:"success",title:"Success",text:Y.data.message})}).catch(Y=>{if(Y.response.status===422){const j=Y.response.data.errors;let U=[];for(const[dt,K]of Object.entries(j))U.push("<p>"+K+"</p>");Ha.fire({icon:"error",title:"Oops...",html:U.join("")})}else Ha.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},Cb=async(T,F="page",G)=>{localStorage.removeItem("onix-data");let J=null;await $p.get("/load/"+F+"/"+G).then(lt=>{var m,Y;lt.data.data.content&&(J=JSON.parse(lt.data.data.content)),localStorage.setItem("onix-data",JSON.stringify({slug:G,mode:F,componentId:(Y=(m=lt.data)==null?void 0:m.data)==null?void 0:Y.componentId}))}).catch(lt=>{Ha.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}),J&&T.loadProjectData(J),await bb(),await _b(T),T.BlockManager.getAll().forEach(lt=>{const m=lt.id;if(lt.attributes.attributes.component_sync){const Y=T.DomComponents.getWrapper().find(`[data-onix="onix-resuable-block-${m}"]`);if(Y.length)for(const[j,U]of Object.entries(Y));}})},xb=(T,F)=>{const{Commands:G}=T,J=F.textCleanCanvas;G.add(Rp,r0(T,F)),G.add(_d,{run:Q=>Q.setDevice("Desktop"),stop:()=>{}}),G.add(Cd,{run:Q=>Q.setDevice("Tablet"),stop:()=>{}}),G.add(xd,{run:Q=>Q.setDevice("Mobile portrait"),stop:()=>{}}),G.add(Sd,Q=>confirm(J)&&Q.runCommand("core:canvas-clear")),G.add(Od,Q=>{_g(Q)}),G.add(Td,Q=>{Q.runCommand("onix-grape-save")})},Sb=(T,F)=>{T.BlockManager.add("input",{label:"Input",media:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-1 16H6V6h12v13z"/><path d="M8 9h8v2H8zM8 13h8v2H8z"/></svg>',category:"onix-basics",content:{type:"input"}}),T.BlockManager.add("form",{label:"Form",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>',category:"onix-basics",content:{type:"form",components:`
            <div class="flex flex-col gap-4 w-full items-center">
                <div class="form-control w-full">
                    <label class="label">
                    <span class="label-text">What is your name?</span>
                    <span class="label-text-alt">Top Right label</span>
                    </label>
                    <input type="text" placeholder="Type here" class="input input-bordered input-lg w-full">
                    <label class="label">
                    <span class="label-text-alt">Bottom Left label</span>
                    <span class="label-text-alt">Bottom Right label</span>
                    </label>
                </div>
            </div>
            `}})},Ob=(T,F)=>{const{Panels:G}=T,J=T.getConfig(),Q="sw-visibility",lt="export-template",m="open-sm",Y="open-tm",j="open-layers",U="open-blocks",dt="fullscreen",K="preview",Z='style="display: block; max-width:22px"';J.showDevices=!1,G.getPanels().reset([{id:"commands",buttons:[{}]},{id:"devices-c",buttons:[{id:_d,command:_d,active:!0,label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" />
        </svg>`},{id:Cd,command:Cd,label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />
        </svg>`},{id:xd,command:xd,label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
        </svg>`}]},{id:"options",buttons:[{id:Q,command:Q,context:Q,label:`<svg ${Z} viewBox="0 0 24 24">
        <path fill="currentColor" d="M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z" />
    </svg>`},{id:K,context:K,command:()=>T.runCommand(K),label:`<svg ${Z} viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"></path></svg>`},{id:dt,command:dt,context:dt,label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
        </svg>`},{id:lt,command:()=>T.runCommand(lt),label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z" />
        </svg>`},{id:"undo",command:()=>T.runCommand("core:undo"),label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z" />
        </svg>`},{id:"redo",command:()=>T.runCommand("core:redo"),label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z" />
        </svg>`},{id:Rp,command:()=>T.runCommand(Rp),label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
        </svg>`},{id:Sd,command:()=>T.runCommand(Sd),label:`<svg ${Z} viewBox="0 0 24 24">
              <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
          </svg>`},{id:Od,command:()=>T.runCommand(Od),label:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                </svg>`},{id:Td,command:()=>T.runCommand(Td),label:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                  </svg>
                  `}]},{id:"views",buttons:[{id:m,command:m,active:!0,label:`<svg ${Z} viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`},{id:Y,command:Y,label:`<svg ${Z} viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
      </svg>`},{id:j,command:j,label:`<svg ${Z} viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" />
      </svg>`},{id:U,command:U,label:`<svg ${Z} viewBox="0 0 24 24">
          <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z" />
      </svg>`}]}]);const z=G.getButton("views",U);T.on("load",()=>z==null?void 0:z.set("active",!0)),F.showStylesOnChange&&T.on("component:selected",()=>{const C=G.getButton("views",m),O=G.getButton("views",j);(!O||!O.get("active"))&&T.getSelected()&&(C==null||C.set("active",!0))})},Tb=(T,F)=>{T.DomComponents.addType("form",{model:{defaults:{name:"Form",tagName:"form",draggable:!0,droppable:!0,editable:!0,stylable:!0,highlightable:!0,copyable:!0,removable:!0,layerable:!0,resizable:!0,classes:["p-10"],traits:[{type:"text",label:"Action",name:"action",placeholder:"https://example.com"},{type:"select",label:"Method",name:"method",options:[{value:"get",name:"GET"},{value:"post",name:"POST"},{value:"put",name:"PUT"},{value:"delete",name:"DELETE"}]},{type:"text",label:"Class",name:"class",placeholder:"form-control"},{type:"text",label:"ID",name:"id",placeholder:"form-id"}],content:`
                    <input type="hidden" name="_token" value="{{ csrf_token() }}">
                `}},view:{tagName:"form",events:{dblclick:"dblclick"},init(){this.listenTo(this.model,"change:action",this.updateAction),this.listenTo(this.model,"change:method",this.updateMethod),this.listenTo(this.model,"change:class",this.updateClass),this.listenTo(this.model,"change:id",this.updateId)},updateAction(){this.el.action=this.model.get("action")},updateMethod(){this.el.method=this.model.get("method")},updateClass(){this.el.className=this.model.get("class")},updateId(){this.el.id=this.model.get("id")}}}),T.DomComponents.addType("input",{model:{defaults:{name:"Input",tagName:"input",draggable:!0,droppable:!0,editable:!0,stylable:!0,highlightable:!0,copyable:!0,removable:!0,layerable:!0,resizable:!0,classes:["input","input-bordered","w-full","max-w-xs"],traits:[{type:"text",label:"Name",name:"name",placeholder:"name"},{type:"checkbox",label:"Required",name:"required"},{type:"text",label:"Placeholder",name:"placeholder",placeholder:"Placeholder"},{type:"select",label:"Type",name:"type",options:[{value:"text",name:"Text"},{value:"email",name:"Email"},{value:"password",name:"Password"},{value:"number",name:"Number"},{value:"date",name:"Date"},{value:"time",name:"Time"},{value:"datetime-local",name:"Date Time"},{value:"month",name:"Month"},{value:"week",name:"Week"},{value:"url",name:"URL"},{value:"tel",name:"Telephone"},{value:"search",name:"Search"},{value:"color",name:"Color"},{value:"range",name:"Range"},{value:"file",name:"File"},{value:"hidden",name:"Hidden"}]},{type:"text",label:"Min",name:"min",placeholder:"0"},{type:"text",label:"Max",name:"max",placeholder:"100"},{type:"text",label:"Class",name:"class",placeholder:"form-control"},{type:"text",label:"ID",name:"id",placeholder:"form-id"},{type:"dusk",label:"Dusk",name:"dusk",placeholder:"dusk-id"}]}},view:{tagName:"input",events:{dblclick:"dblclick"},init(){this.listenTo(this.model,"change:name",this.updateName),this.listenTo(this.model,"change:required",this.updateRequired),this.listenTo(this.model,"change:placeholder",this.updatePlaceholder),this.listenTo(this.model,"change:type",this.updateType),this.listenTo(this.model,"change:class",this.updateClass),this.listenTo(this.model,"change:id",this.updateId),this.listenTo(this.model,"change:min",this.updateMin),this.listenTo(this.model,"change:max",this.updateMax),this.listenTo(this.model,"change:dusk",this.updateDusk)},updateName(){this.el.name=this.model.get("name")},updateRequired(){this.el.required=this.model.get("required")},updatePlaceholder(){this.el.placeholder=this.model.get("placeholder")},updateType(){this.el.type=this.model.get("type")},updateClass(){this.el.className=this.model.get("class")},updateId(){this.el.id=this.model.get("id")},updateMin(){this.el.min=this.model.get("min")},updateMax(){this.el.max=this.model.get("max")},updateDusk(){this.el.dataset.dusk=this.model.get("dusk")}}})},Eb=(T,F={})=>{const G={modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure you want to clear the canvas?",showStylesOnChange:!0,useCustomTheme:!0,...F};Tb(T),Sb(T),xb(T,G),Ob(T,G)};var jd={},kb={get exports(){return jd},set exports(T){jd=T}};/*! grapesjs-script-editor - 1.0.3 */(function(T,F){(function(G,J){T.exports=J()})(window,function(){return function(G){var J={};function Q(lt){if(J[lt])return J[lt].exports;var m=J[lt]={i:lt,l:!1,exports:{}};return G[lt].call(m.exports,m,m.exports,Q),m.l=!0,m.exports}return Q.m=G,Q.c=J,Q.d=function(lt,m,Y){Q.o(lt,m)||Object.defineProperty(lt,m,{enumerable:!0,get:Y})},Q.r=function(lt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(lt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(lt,"__esModule",{value:!0})},Q.t=function(lt,m){if(1&m&&(lt=Q(lt)),8&m||4&m&&typeof lt=="object"&&lt&&lt.__esModule)return lt;var Y=Object.create(null);if(Q.r(Y),Object.defineProperty(Y,"default",{enumerable:!0,value:lt}),2&m&&typeof lt!="string")for(var j in lt)Q.d(Y,j,function(U){return lt[U]}.bind(null,j));return Y},Q.n=function(lt){var m=lt&&lt.__esModule?function(){return lt.default}:function(){return lt};return Q.d(m,"a",m),m},Q.o=function(lt,m){return Object.prototype.hasOwnProperty.call(lt,m)},Q.p="",Q(Q.s=1)}([function(G,J){G.exports=function(Q,lt,m){return lt in Q?Object.defineProperty(Q,lt,{value:m,enumerable:!0,configurable:!0,writable:!0}):Q[lt]=m,Q}},function(G,J,Q){Q.r(J);var lt=Q(0),m=Q.n(lt),Y="edit-script";function j(z,C){var O=Object.keys(z);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(z);C&&(M=M.filter(function(D){return Object.getOwnPropertyDescriptor(z,D).enumerable})),O.push.apply(O,M)}return O}function U(z){for(var C=1;C<arguments.length;C++){var O=arguments[C]!=null?arguments[C]:{};C%2?j(Object(O),!0).forEach(function(M){m()(z,M,O[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(O)):j(Object(O)).forEach(function(M){Object.defineProperty(z,M,Object.getOwnPropertyDescriptor(O,M))})}return z}var dt=function(z){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=z.Commands,M=z.Modal,D=z.Components,N=C.modalTitle,ut=C.codeViewOptions,ht=C.commandAttachScript,Dt=C.toolbarIcon,Rt=C.onRun,zt=C.onError,ae=C.starter,mt=C.scriptTypesSupport,yt=null,Ht=function(Kt,Lt){Lt instanceof HTMLElement?Kt.appendChild(Lt):Lt&&Kt.insertAdjacentHTML("beforeend",Lt)};z.$.isString(mt)&&(mt=mt.split(",")),z.$.isArray(mt)&&(mt=mt.includes("*")?D.getTypes().map(function(Kt){return Kt.id}):mt),mt&&mt.forEach(function(Kt){var Lt=D.getType(Kt).model;D.addType(Kt,{model:{initToolbar:function(){Lt.prototype.initToolbar.apply(this,arguments);var $=this.get("toolbar"),E=$.some(function(R){return R.command===Y});E||($.unshift(U({command:Y,label:Dt},C.toolbarBtnCustomScript)),this.set("toolbar",$))}}})}),O.add(Y,U({run:function(Kt,Lt){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.editor=Kt,this.options=$,this.target=$.target||Kt.getSelected();var E=this.target;E&&this.showCustomCode(E)},stop:function(Kt){M.close()},showCustomCode:function(Kt){var Lt=this,$=this.editor,E=this.options.title||N;yt||(yt=this.getContent());var R=Kt.getScriptString()||ae;M.open({title:E,content:yt}).getModel().once("change:open",function(){return $.stopCommand(Lt.id)}),this.getCodeViewer().setContent(R)},getPreContent:function(){},getPostContent:function(){},getContent:function(){var Kt=this.editor,Lt=document.createElement("div"),$=Kt.getConfig("stylePrefix");Lt.className="".concat($,"attach-script"),Ht(Lt,this.getPreContent());var E=this.getCodeViewer();return E.refresh(),setTimeout(function(){return E.focus()},0),Lt.appendChild(E.getElement()),Ht(Lt,this.getPostContent()),Ht(Lt,this.getContentActions()),Lt},getContentActions:function(){var Kt=this,Lt=this.editor,$=document.createElement("div");$.id="actns";var E=document.createElement("button"),R=Lt.getConfig("stylePrefix");E.innerHTML=C.buttonLabel,E.className="".concat(R,"btn-prim ").concat(R,"btn-save__inject-logic"),E.onclick=function(){return Kt.handleSave()};var X=document.createElement("div");return X.id="logic-toolbar",X.className="fa fa-bug",X.style="margin:5px;padding:10px;background:rgba(0,0,0,0.2);border-radius:3px;border:1px solid rgba(0,0,0,0.2);cursor:pointer",X.onclick=function(){return Kt.runCode()},$.appendChild(X),$.appendChild(E),$},handleSave:function(){var Kt=this.editor,Lt=this.target,$=this.getCodeViewer().getContent();Lt.set("script",$),Kt.Modal.close()},getCodeViewer:function(){var Kt=this.editor;return this.codeViewer||(this.codeViewer=Kt.CodeManager.createViewer(U({codeName:"javascript",theme:"hopscotch",readOnly:0,autoBeautify:1},ut))),this.codeViewer},runCode:function(){try{var Kt=this.getCodeViewer().getContent();Function('"use strict";'+Kt)(),Rt&&Rt()}catch(Lt){console.log("error",Lt),zt&&zt(Lt)}}},ht))};function K(z,C){var O=Object.keys(z);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(z);C&&(M=M.filter(function(D){return Object.getOwnPropertyDescriptor(z,D).enumerable})),O.push.apply(O,M)}return O}function Z(z){for(var C=1;C<arguments.length;C++){var O=arguments[C]!=null?arguments[C]:{};C%2?K(Object(O),!0).forEach(function(M){m()(z,M,O[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(O)):K(Object(O)).forEach(function(M){Object.defineProperty(z,M,Object.getOwnPropertyDescriptor(O,M))})}return z}J.default=function(z){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=Z(Z({},{starter:"let el = this",toolbarIcon:'<i class="fa fa-file-code-o"></i>',scriptTypesSupport:["default","wrapper","text","textnode","image","video","svg"],toolbarBtnCustomScript:{},onRun:function(){return console.log("valid syntax")},onError:function(M){return console.log("error",M)},modalTitle:"Script",codeLabel:"JS",codeViewOptions:{},buttonLabel:"Save",commandAttachScript:{}}),C);dt(z,O)}}])})})(kb);const Pb=Ld(jd);var Md={},Ab={get exports(){return Md},set exports(T){Md=T}};/*! grapesjs-component-code-editor - 1.0.20 */(function(T,F){(function(G,J){T.exports=J()})(window,function(){return function(G){var J={};function Q(lt){if(J[lt])return J[lt].exports;var m=J[lt]={i:lt,l:!1,exports:{}};return G[lt].call(m.exports,m,m.exports,Q),m.l=!0,m.exports}return Q.m=G,Q.c=J,Q.d=function(lt,m,Y){Q.o(lt,m)||Object.defineProperty(lt,m,{enumerable:!0,get:Y})},Q.r=function(lt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(lt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(lt,"__esModule",{value:!0})},Q.t=function(lt,m){if(1&m&&(lt=Q(lt)),8&m||4&m&&typeof lt=="object"&&lt&&lt.__esModule)return lt;var Y=Object.create(null);if(Q.r(Y),Object.defineProperty(Y,"default",{enumerable:!0,value:lt}),2&m&&typeof lt!="string")for(var j in lt)Q.d(Y,j,function(U){return lt[U]}.bind(null,j));return Y},Q.n=function(lt){var m=lt&&lt.__esModule?function(){return lt.default}:function(){return lt};return Q.d(m,"a",m),m},Q.o=function(lt,m){return Object.prototype.hasOwnProperty.call(lt,m)},Q.p="",Q(Q.s=3)}([function(G,J){G.exports=function(Q,lt,m){return lt in Q?Object.defineProperty(Q,lt,{value:m,enumerable:!0,configurable:!0,writable:!0}):Q[lt]=m,Q}},function(G,J){G.exports=function(Q,lt){if(!(Q instanceof lt))throw new TypeError("Cannot call a class as a function")}},function(G,J){function Q(lt,m){for(var Y=0;Y<m.length;Y++){var j=m[Y];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(lt,j.key,j)}}G.exports=function(lt,m,Y){return m&&Q(lt.prototype,m),Y&&Q(lt,Y),lt}},function(G,J,Q){Q.r(J);var lt=Q(0),m=Q.n(lt),Y=Q(1),j=Q.n(Y),U=Q(2),dt=Q.n(U),K=typeof window<"u"?window:null,Z=K===null,z=Z?void 0:K.document,C=function(){return!1},O=Z?"calc":["","-webkit-","-moz-","-o-"].filter(function(Lt){var $=z.createElement("div");return $.style.cssText="width:"+Lt+"calc(9px)",!!$.style.length}).shift()+"calc",M=function(Lt){return typeof Lt=="string"||Lt instanceof String},D=function(Lt){if(M(Lt)){var $=z.querySelector(Lt);if(!$)throw new Error("Selector "+Lt+" did not match a DOM element");return $}return Lt},N=function(Lt,$,E){var R=Lt[$];return R!==void 0?R:E},ut=function(Lt,$,E,R){if($){if(R==="end")return 0;if(R==="center")return Lt/2}else if(E){if(R==="start")return 0;if(R==="center")return Lt/2}return Lt},ht=function(Lt,$){var E=z.createElement("div");return E.className="gutter gutter-"+$,E},Dt=function(Lt,$,E){var R={};return M($)?R[Lt]=$:R[Lt]=O+"("+$+"% - "+E+"px)",R},Rt=function(Lt,$){var E;return(E={})[Lt]=$+"px",E},zt=function(Lt,$){if($===void 0&&($={}),Z)return{};var E,R,X,it,Tt,st,Ct=Lt;Array.from&&(Ct=Array.from(Ct));var H=D(Ct[0]).parentNode,Vt=getComputedStyle?getComputedStyle(H):null,Nt=Vt?Vt.flexDirection:null,te=N($,"sizes")||Ct.map(function(){return 100/Ct.length}),De=N($,"minSize",100),je=Array.isArray(De)?De:Ct.map(function(){return De}),Pe=N($,"expandToMin",!1),He=N($,"gutterSize",10),Ee=N($,"gutterAlign","center"),Le=N($,"snapOffset",30),Ce=N($,"dragInterval",1),fe=N($,"direction","horizontal"),he=N($,"cursor",fe==="horizontal"?"col-resize":"row-resize"),ge=N($,"gutter",ht),gt=N($,"elementStyle",Dt),re=N($,"gutterStyle",Rt);function Zt(b,L,B,vt){var At=gt(E,L,B,vt);Object.keys(At).forEach(function(Pt){b.style[Pt]=At[Pt]})}function ue(){return st.map(function(b){return b.size})}function ve(b){return"touches"in b?b.touches[0][R]:b[R]}function se(b){var L=st[this.a],B=st[this.b],vt=L.size+B.size;L.size=b/this.size*vt,B.size=vt-b/this.size*vt,Zt(L.element,L.size,this._b,L.i),Zt(B.element,B.size,this._c,B.i)}function Ne(b){var L,B=st[this.a],vt=st[this.b];this.dragging&&(L=ve(b)-this.start+(this._b-this.dragOffset),Ce>1&&(L=Math.round(L/Ce)*Ce),L<=B.minSize+Le+this._b?L=B.minSize+this._b:L>=this.size-(vt.minSize+Le+this._c)&&(L=this.size-(vt.minSize+this._c)),se.call(this,L),N($,"onDrag",C)(ue()))}function Ze(){var b=st[this.a].element,L=st[this.b].element,B=b.getBoundingClientRect(),vt=L.getBoundingClientRect();this.size=B[E]+vt[E]+this._b+this._c,this.start=B[X],this.end=B[it]}function Ye(b){var L=function(Pt){if(!getComputedStyle)return null;var ne=getComputedStyle(Pt);if(!ne)return null;var we=Pt[Tt];return we===0?null:we-=fe==="horizontal"?parseFloat(ne.paddingLeft)+parseFloat(ne.paddingRight):parseFloat(ne.paddingTop)+parseFloat(ne.paddingBottom)}(H);if(L===null||je.reduce(function(Pt,ne){return Pt+ne},0)>L)return b;var B=0,vt=[],At=b.map(function(Pt,ne){var we=L*Pt/100,ze=ut(He,ne===0,ne===b.length-1,Ee),Ue=je[ne]+ze;return we<Ue?(B+=Ue-we,vt.push(0),Ue):(vt.push(we-Ue),we)});return B===0?b:At.map(function(Pt,ne){var we=Pt;if(B>0&&vt[ne]-B>0){var ze=Math.min(B,vt[ne]-B);B-=ze,we=Pt-ze}return we/L*100})}function hn(){var b=st[this.a].element,L=st[this.b].element;this.dragging&&N($,"onDragEnd",C)(ue()),this.dragging=!1,K.removeEventListener("mouseup",this.stop),K.removeEventListener("touchend",this.stop),K.removeEventListener("touchcancel",this.stop),K.removeEventListener("mousemove",this.move),K.removeEventListener("touchmove",this.move),this.stop=null,this.move=null,b.removeEventListener("selectstart",C),b.removeEventListener("dragstart",C),L.removeEventListener("selectstart",C),L.removeEventListener("dragstart",C),b.style.userSelect="",b.style.webkitUserSelect="",b.style.MozUserSelect="",b.style.pointerEvents="",L.style.userSelect="",L.style.webkitUserSelect="",L.style.MozUserSelect="",L.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor="",z.body.style.cursor=""}function Ln(b){if(!("button"in b)||b.button===0){var L=st[this.a].element,B=st[this.b].element;this.dragging||N($,"onDragStart",C)(ue()),b.preventDefault(),this.dragging=!0,this.move=Ne.bind(this),this.stop=hn.bind(this),K.addEventListener("mouseup",this.stop),K.addEventListener("touchend",this.stop),K.addEventListener("touchcancel",this.stop),K.addEventListener("mousemove",this.move),K.addEventListener("touchmove",this.move),L.addEventListener("selectstart",C),L.addEventListener("dragstart",C),B.addEventListener("selectstart",C),B.addEventListener("dragstart",C),L.style.userSelect="none",L.style.webkitUserSelect="none",L.style.MozUserSelect="none",L.style.pointerEvents="none",B.style.userSelect="none",B.style.webkitUserSelect="none",B.style.MozUserSelect="none",B.style.pointerEvents="none",this.gutter.style.cursor=he,this.parent.style.cursor=he,z.body.style.cursor=he,Ze.call(this),this.dragOffset=ve(b)-this.end}}fe==="horizontal"?(E="width",R="clientX",X="left",it="right",Tt="clientWidth"):fe==="vertical"&&(E="height",R="clientY",X="top",it="bottom",Tt="clientHeight"),te=Ye(te);var Ot=[];function qt(b){var L=b.i===Ot.length,B=L?Ot[b.i-1]:Ot[b.i];Ze.call(B);var vt=L?B.size-b.minSize-B._c:b.minSize+B._b;se.call(B,vt)}return(st=Ct.map(function(b,L){var B,vt={element:D(b),size:te[L],minSize:je[L],i:L};if(L>0&&((B={a:L-1,b:L,dragging:!1,direction:fe,parent:H})._b=ut(He,L-1==0,!1,Ee),B._c=ut(He,!1,L===Ct.length-1,Ee),Nt==="row-reverse"||Nt==="column-reverse")){var At=B.a;B.a=B.b,B.b=At}if(L>0){var Pt=ge(L,fe,vt.element);(function(ne,we,ze){var Ue=re(E,we,ze);Object.keys(Ue).forEach(function(on){ne.style[on]=Ue[on]})})(Pt,He,L),B._a=Ln.bind(B),Pt.addEventListener("mousedown",B._a),Pt.addEventListener("touchstart",B._a),H.insertBefore(Pt,vt.element),B.gutter=Pt}return Zt(vt.element,vt.size,ut(He,L===0,L===Ct.length-1,Ee),L),L>0&&Ot.push(B),vt})).forEach(function(b){var L=b.element.getBoundingClientRect()[E];L<b.minSize&&(Pe?qt(b):b.minSize=L)}),{setSizes:function(b){var L=Ye(b);L.forEach(function(B,vt){if(vt>0){var At=Ot[vt-1],Pt=st[At.a],ne=st[At.b];Pt.size=L[vt-1],ne.size=B,Zt(Pt.element,Pt.size,At._b,Pt.i),Zt(ne.element,ne.size,At._c,ne.i)}})},getSizes:ue,collapse:function(b){qt(st[b])},destroy:function(b,L){Ot.forEach(function(B){if(L!==!0?B.parent.removeChild(B.gutter):(B.gutter.removeEventListener("mousedown",B._a),B.gutter.removeEventListener("touchstart",B._a)),b!==!0){var vt=gt(E,B.a.size,B._b);Object.keys(vt).forEach(function(At){st[B.a].element.style[At]="",st[B.b].element.style[At]=""})}})},parent:H,pairs:Ot}};function ae(Lt,$){var E=Object.keys(Lt);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(Lt);$&&(R=R.filter(function(X){return Object.getOwnPropertyDescriptor(Lt,X).enumerable})),E.push.apply(E,R)}return E}var mt=function(){function Lt($,E){j()(this,Lt),this.editor=$,this.$=$.$,this.pfx=$.getConfig("stylePrefix"),this.opts=E,this.canvas=this.findWithinEditor(".".concat(this.pfx,"cv-canvas")),this.panelViews=E.appendTo?this.$(E.appendTo):this.findWithinEditor(".".concat(this.pfx,"pn-").concat(E.panelId)),this.isShowing=!0}return dt()(Lt,[{key:"findPanel",value:function(){var $=this.editor.Panels,E=this.opts.panelId;return $.getPanel(E)||$.addPanel({id:E})}},{key:"findWithinEditor",value:function($){return this.$($,this.editor.getEl())}},{key:"buildCodeEditor",value:function($){var E=this.editor,R=this.opts;return E.CodeManager.createViewer(function(X){for(var it=1;it<arguments.length;it++){var Tt=arguments[it]!=null?arguments[it]:{};it%2?ae(Object(Tt),!0).forEach(function(st){m()(X,st,Tt[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(Tt)):ae(Object(Tt)).forEach(function(st){Object.defineProperty(X,st,Object.getOwnPropertyDescriptor(Tt,st))})}return X}({codeName:$==="html"?"htmlmixed":"css",theme:"hopscotch",readOnly:0,autoBeautify:1,autoCloseTags:1,autoCloseBrackets:1,styleActiveLine:1,smartIndent:1},R.codeViewOptions))}},{key:"buildSection",value:function($,E){var R=this.$,X=this.pfx,it=this.opts,Tt=R("<section></section>"),st=$==="html"?it.htmlBtnText:it.cssBtnText,Ct=it.cleanCssBtn&&$==="css"?'<button class="cp-delete-'.concat($," ").concat(X,'btn-prim">').concat(it.cleanCssBtnText,"</button>"):"";Tt.append(R(`
            <div class="codepanel-separator">
                <div class="codepanel-label">`.concat($,`</div>
                <div class="cp-btn-container">
                    `).concat(Ct,`
                    <button class="cp-apply-`).concat($," ").concat(X,'btn-prim">').concat(st,`</button>
                </div>
            </div>`)));var H=E.getElement();return H.style.height="calc(100% - 30px)",Tt.append(H),this.codePanel.append(Tt),Tt.get(0)}},{key:"buildCodePanel",value:function(){var $=this,E=this.$,R=this.editor,X=this.opts.panelId?this.findPanel():0;this.codePanel=E("<div></div>"),this.codePanel.addClass("code-panel"),this.htmlCodeEditor=this.buildCodeEditor("html"),this.cssCodeEditor=this.buildCodeEditor("css");var it=[this.buildSection("html",this.htmlCodeEditor),this.buildSection("css",this.cssCodeEditor)];X&&!this.opts.appendTo&&X.set("appendContent",this.codePanel).trigger("change:appendContent"),this.opts.appendTo&&E(this.opts.appendTo).append(this.codePanel),this.updateEditorContents(),this.codePanel.find(".cp-apply-html").on("click",this.updateHtml.bind(this)),this.codePanel.find(".cp-apply-css").on("click",this.updateCss.bind(this)),this.opts.cleanCssBtn&&this.codePanel.find(".cp-delete-css").on("click",this.deleteSelectedCss.bind(this)),zt(it,{direction:"vertical",sizes:[50,50],minSize:100,gutterSize:1,onDragEnd:this.refreshEditors.bind(this)}),R.on("component:update",function(Tt){return $.updateEditorContents()}),R.on("stop:preview",function(){$.isShowing&&!$.opts.preserveWidth&&$.canvas.css("width",$.opts.openState.cv)})}},{key:"showCodePanel",value:function(){this.isShowing=!0,this.updateEditorContents(),this.codePanel.css("display","block"),setTimeout(this.refreshEditors.bind(this),320),this.opts.preserveWidth||(this.panelViews.css("width",this.opts.openState.pn),this.canvas.css("width",this.opts.openState.cv))}},{key:"hideCodePanel",value:function(){this.codePanel&&this.codePanel.css("display","none"),this.isShowing=!1,this.opts.preserveWidth||(this.panelViews.css("width",this.opts.closedState.pn),this.canvas.css("width",this.opts.closedState.cv))}},{key:"refreshEditors",value:function(){this.htmlCodeEditor.refresh(),this.cssCodeEditor.refresh()}},{key:"updateHtml",value:function($){$==null||$.preventDefault();var E=this.editor,R=this.component,X=this.htmlCodeEditor.getContent().trim();if(X&&X!==this.previousHtmlCode){this.previousHtmlCode=X;var it="";this.cssCodeEditor.getContent().split(`}
`).filter(function(Tt){return Boolean(Tt.trim())}).map(function(Tt){if(!/}$/.test(Tt))return"".concat(Tt,"}")}).forEach(function(Tt){/^#/.test(Tt)&&(it+=Tt)}),X+="<style>".concat(it,"</style>"),R.attributes.type==="wrapper"?E.setComponents(X):E.select(R.replaceWith(X))}}},{key:"updateCss",value:function($){$==null||$.preventDefault();var E=this.cssCodeEditor.getContent().trim();E&&E!==this.previousCssCode&&(this.previousCssCode=E,this.editor.Css.addRules(E))}},{key:"deleteSelectedCss",value:function($){var E=this;$==null||$.preventDefault(),this.cssCodeEditor.editor.getSelections().forEach(function(R){return E.parseRemove(R)}),this.cssCodeEditor.editor.deleteH()}},{key:"parseRemove",value:function($){var E=this.editor;E.Css.remove(this.getRules(E.Parser.parseCss($)))}},{key:"getRules",value:function($){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=this.editor,X=R.Selectors;return $.map(function(it){var Tt=X.get(it.selectors),st=it.state,Ct=it.selectorsAdd,H=E.atRuleType,Vt=E.atRuleParams;return Tt&&R.Css.get(Tt,st,Vt,{selectorsAdd:Ct,atRule:H})})}},{key:"updateEditorContents",value:function(){this.isShowing&&(this.component=this.editor.getSelected(),this.component&&(this.htmlCodeEditor.setContent(this.getComponentHtml(this.component)),this.cssCodeEditor.setContent(this.editor.CodeManager.getCode(this.component,"css",{cssc:this.editor.Css}))))}},{key:"getComponentHtml",value:function($){var E=this.pfx,R=this.opts,X="",it=$.getEl();!R.clearData&&it.classList.remove("".concat(E,"selected"));var Tt=R.clearData?$.toHTML():$.attributes.type==="wrapper"?it.innerHTML:it.outerHTML;!R.clearData&&it.classList.add("".concat(E,"selected")),X+=Tt;var st=R.editJs?$.getScriptString():"";return X+=st?"<script>".concat(st,"<\/script>"):""}}]),Lt}(),yt=function(Lt,$){var E=Lt.Commands,R=null;E.add("open-code",{run:function(X){!R&&(R=new mt(X,$))&&R.buildCodePanel(),R.showCodePanel()},stop:function(X){R&&R.hideCodePanel()}}),E.add("code-editor-object",function(){return R}),E.add("code-editor-constructor",function(){return mt})};function Ht(Lt,$){var E=Object.keys(Lt);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(Lt);$&&(R=R.filter(function(X){return Object.getOwnPropertyDescriptor(Lt,X).enumerable})),E.push.apply(E,R)}return E}function Kt(Lt){for(var $=1;$<arguments.length;$++){var E=arguments[$]!=null?arguments[$]:{};$%2?Ht(Object(E),!0).forEach(function(R){m()(Lt,R,E[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Lt,Object.getOwnPropertyDescriptors(E)):Ht(Object(E)).forEach(function(R){Object.defineProperty(Lt,R,Object.getOwnPropertyDescriptor(E,R))})}return Lt}J.default=function(Lt){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=Kt(Kt({},{panelId:"views-container",appendTo:"",openState:{cv:"65%",pn:"35%"},closedState:{cv:"85%",pn:"15%"},codeViewOptions:{},preserveWidth:!1,editJs:!1,clearData:!1,cleanCssBtn:!0,htmlBtnText:"Apply",cssBtnText:"Apply",cleanCssBtnText:"Delete"}),$);yt(Lt,E)}}])})})(Ab);const jb=Ld(Md);let Hp=null;const Mb=async(T=[],F=[])=>{Hp=n0.init({container:"#gjs",width:"auto",height:"1000px",showOffsets:!0,noticeOnUnload:!1,storageManager:!1,fromElement:!0,plugins:[Eb,jb,Pb],canvas:{styles:T,scripts:F}}),wb(Hp)};window.startEditor=function(T,F){Mb(T,F)};window.loadEditorData=function(T="page",F){Cb(Hp,T,F)};window.saveEditorData=function(){_g(Hp,!0)};

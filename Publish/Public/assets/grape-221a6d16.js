import{g as nd,c as zc,a as Bc,S as Is}from"./sweetalert2-cf3b0484.js";var Gf={},zm={get exports(){return Gf},set exports(Se){Gf=Se}};/*! grapesjs - 0.20.4 */(function(Se,sn){(function(Fe,Re){Se.exports=Re()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:zc,()=>(()=>{var Fe={410:(_,lt,D)=>{var et,xt,q;xt=[D(50),D(316)],(q=typeof(et=function(G,U){var S=Array.prototype.slice;function E(O,I,W){return W.length<=4?O.call(I,W[0],W[1],W[2],W[3]):O.apply(I,W)}function A(O,I){return S.call(O,I)}function M(O,I){return O!=null&&(G.isArray(I)||(I=A(arguments,1)),G.all(I,function(W){return W in O}))}var N=function(){var O=!1,I=-1;function W(){I++,O=!0,G.defer(function(){O=!1})}return function(){return O||W(),I}}();function it(){this.registeredObjects=[],this.cidIndexes=[]}function st(O,I,W,Z){for(var bt,Q=0,gt=I.length;Q<gt;Q++)if(bt=I[Q]){if(O==="on"){if(!Z.objectRegistry.register(bt))continue}else if(!Z.objectRegistry.unregister(bt))continue;G.isFunction(bt[O])&&bt[O]("all",W,Z)}}function Et(O,I){var W=I.type,Z=I.undoTypes,bt=!Z[W]||Z[W][O];G.isFunction(bt)&&bt(I.object,I.before,I.after,I.options)}function Mt(O,I,W,Z,bt){if(!(W.isCurrentlyUndoRedoing||O==="undo"&&W.pointer===-1||O==="redo"&&W.pointer===W.length-1)){W.isCurrentlyUndoRedoing=!0;var Q,gt,F=O==="undo";for(bt?gt=F&&W.pointer===W.length-1||!F&&W.pointer===-1?G.clone(W.models):S.apply(W.models,F?[0,W.pointer]:[W.pointer,W.length-1]):(Q=W.at(F?W.pointer:W.pointer+1),gt=Z?W.where({magicFusionIndex:Q.get("magicFusionIndex")}):[Q]),W.pointer+=(F?-1:1)*gt.length;Q=F?gt.pop():gt.shift();)Q[O]();W.isCurrentlyUndoRedoing=!1,I.trigger(O,I)}}function Nt(O,I){var W=O.condition,Z=typeof W;return Z==="function"?!!E(W,O,I):Z!=="boolean"||W}function ne(O,I,W,Z){if(O.track&&!O.isCurrentlyUndoRedoing&&I in Z&&Nt(Z[I],W)){var bt=E(Z[I].on,Z[I],W);if(M(bt,"object","before","after")){if(bt.type=I,bt.magicFusionIndex=N(),bt.undoTypes=Z,O.pointer<O.length-1)for(var Q=O.length-O.pointer-1;Q--;)O.pop();O.pointer=O.length,O.add(bt),O.length>O.maximumStackLength&&(O.shift(),O.pointer--)}}}it.prototype={isRegistered:function(O){return O&&O.cid?this.registeredObjects[O.cid]:G.contains(this.registeredObjects,O)},register:function(O){return!this.isRegistered(O)&&(O&&O.cid?(this.registeredObjects[O.cid]=O,this.cidIndexes.push(O.cid)):this.registeredObjects.push(O),!0)},unregister:function(O){if(this.isRegistered(O)){if(O&&O.cid)delete this.registeredObjects[O.cid],this.cidIndexes.splice(G.indexOf(this.cidIndexes,O.cid),1);else{var I=G.indexOf(this.registeredObjects,O);this.registeredObjects.splice(I,1)}return!0}return!1},get:function(){return G.map(this.cidIndexes,function(O){return this.registeredObjects[O]},this).concat(this.registeredObjects)}};var ut={add:{undo:function(O,I,W,Z){O.remove(W,Z)},redo:function(O,I,W,Z){Z.index&&(Z.at=Z.index),O.add(W,Z)},on:function(O,I,W){return{object:I,before:void 0,after:O,options:G.clone(W)}}},remove:{undo:function(O,I,W,Z){"index"in Z&&(Z.at=Z.index),O.add(I,Z)},redo:function(O,I,W,Z){O.remove(I,Z)},on:function(O,I,W){return{object:I,before:O,after:void 0,options:G.clone(W)}}},change:{undo:function(O,I,W,Z){G.isEmpty(I)?G.each(G.keys(W),O.unset,O):(O.set(I),Z&&Z.unsetData&&Z.unsetData.before&&Z.unsetData.before.length&&G.each(Z.unsetData.before,O.unset,O))},redo:function(O,I,W,Z){G.isEmpty(W)?G.each(G.keys(I),O.unset,O):(O.set(W),Z&&Z.unsetData&&Z.unsetData.after&&Z.unsetData.after.length&&G.each(Z.unsetData.after,O.unset,O))},on:function(O,I){var W=O.changedAttributes(),Z=G.keys(W),bt=G.pick(O.previousAttributes(),Z),Q=G.keys(bt),gt=(I||(I={})).unsetData={after:[],before:[]};return Z.length!=Q.length&&(Z.length>Q.length?G.each(Z,function(F){F in bt||gt.before.push(F)},this):G.each(Q,function(F){F in W||gt.after.push(F)})),{object:O,before:bt,after:W,options:G.clone(I)}}},reset:{undo:function(O,I,W){O.reset(I)},redo:function(O,I,W){O.reset(W)},on:function(O,I){return{object:O,before:I.previousModels,after:G.clone(O.models)}}}};function pt(){}function Dt(O,I,W,Z){if(typeof I=="object")return G.each(I,function(bt,Q){O===2?Dt(O,bt,W,Z):Dt(O,Q,bt,W)});switch(O){case 0:M(W,"undo","redo","on")&&G.all(G.pick(W,"undo","redo","on"),G.isFunction)&&(Z[I]=W);break;case 1:Z[I]&&G.isObject(W)&&(Z[I]=G.extend({},Z[I],W));break;case 2:delete Z[I]}return this}pt.prototype=ut;var Bt=U.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(O){Et("undo",this.attributes)},redo:function(O){Et("redo",this.attributes)}}),kt=U.Collection.extend({model:Bt,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(O){this.maximumStackLength=O}}),z=U.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(O){this.stack=new kt,this.objectRegistry=new it,this.undoTypes=new pt,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(I,W){this.stack.setMaxLength(W)},this),O&&O.track&&this.startTracking(),O&&O.register&&(G.isArray(O.register)||G.isArguments(O.register)?E(this.register,this,O.register):this.register(O.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(O){ne(this.stack,O,A(arguments,1),this.undoTypes)},register:function(){st("on",arguments,this._addToStack,this)},unregister:function(){st("off",arguments,this._addToStack,this)},unregisterAll:function(){E(this.unregister,this,this.objectRegistry.get())},undo:function(O){Mt("undo",this,this.stack,O)},undoAll:function(){Mt("undo",this,this.stack,!1,!0)},redo:function(O){Mt("redo",this,this.stack,O)},redoAll:function(){Mt("redo",this,this.stack,!1,!0)},isAvailable:function(O){var I=this.stack,W=I.length;switch(O){case"undo":return W>0&&I.pointer>-1;case"redo":return W>0&&I.pointer<W-1;default:return!1}},merge:function(O){for(var I,W=G.isArray(O)?O:A(arguments);I=W.pop();)I instanceof z&&I.stack instanceof kt&&(I.stack=this.stack)},addUndoType:function(O,I){Dt(0,O,I,this.undoTypes)},changeUndoType:function(O,I){Dt(1,O,I,this.undoTypes)},removeUndoType:function(O){Dt(2,O,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return G.extend(z,{defaults:function(O){G.extend(z.prototype.defaults,O)},addUndoType:function(O,I){Dt(0,O,I,ut)},changeUndoType:function(O,I){Dt(1,O,I,ut)},removeUndoType:function(O){Dt(2,O,void 0,ut)}}),U.UndoManager=z})=="function"?et.apply(lt,xt):et)===void 0||(_.exports=q)},316:(_,lt,D)=>{var et,xt;(function(q){var G=typeof self=="object"&&self.self===self&&self||typeof D.g=="object"&&D.g.global===D.g&&D.g;et=[D(50),D(895),lt],xt=function(U,S,E){G.Backbone=function(A,M,N,it){var st=A.Backbone,Et=Array.prototype.slice;M.VERSION="1.4.1",M.$=it,M.noConflict=function(){return A.Backbone=st,this},M.emulateHTTP=!1,M.emulateJSON=!1;var Mt,Nt=M.Events={},ne=/\s+/,ut=function(y,j,H,ct,St){var Ct,Xt=0;if(H&&typeof H=="object")for(ct!==void 0&&("context"in St)&&St.context===void 0&&(St.context=ct),Ct=N.keys(H);Xt<Ct.length;Xt++)j=ut(y,j,Ct[Xt],H[Ct[Xt]],St);else if(H&&ne.test(H))for(Ct=H.split(ne);Xt<Ct.length;Xt++)j=y(j,Ct[Xt],ct,St);else j=y(j,H,ct,St);return j};Nt.on=function(y,j,H){return this._events=ut(pt,this._events||{},y,j,{context:H,ctx:this,listening:Mt}),Mt&&((this._listeners||(this._listeners={}))[Mt.id]=Mt,Mt.interop=!1),this},Nt.listenTo=function(y,j,H){if(!y)return this;var ct=y._listenId||(y._listenId=N.uniqueId("l")),St=this._listeningTo||(this._listeningTo={}),Ct=Mt=St[ct];Ct||(this._listenId||(this._listenId=N.uniqueId("l")),Ct=Mt=St[ct]=new I(this,y));var Xt=Dt(y,j,H,this);if(Mt=void 0,Xt)throw Xt;return Ct.interop&&Ct.on(j,H),this};var pt=function(y,j,H,ct){if(H){var St=y[j]||(y[j]=[]),Ct=ct.context,Xt=ct.ctx,ge=ct.listening;ge&&ge.count++,St.push({callback:H,context:Ct,ctx:Ct||Xt,listening:ge})}return y},Dt=function(y,j,H,ct){try{y.on(j,H,ct)}catch(St){return St}};Nt.off=function(y,j,H){return this._events?(this._events=ut(Bt,this._events,y,j,{context:H,listeners:this._listeners}),this):this},Nt.stopListening=function(y,j,H){var ct=this._listeningTo;if(!ct)return this;for(var St=y?[y._listenId]:N.keys(ct),Ct=0;Ct<St.length;Ct++){var Xt=ct[St[Ct]];if(!Xt)break;Xt.obj.off(j,H,this),Xt.interop&&Xt.off(j,H)}return N.isEmpty(ct)&&(this._listeningTo=void 0),this};var Bt=function(y,j,H,ct){if(y){var St,Ct=ct.context,Xt=ct.listeners,ge=0;if(j||Ct||H){for(St=j?[j]:N.keys(y);ge<St.length;ge++){var Ve=y[j=St[ge]];if(!Ve)break;for(var ze=[],nn=0;nn<Ve.length;nn++){var Qt=Ve[nn];if(H&&H!==Qt.callback&&H!==Qt.callback._callback||Ct&&Ct!==Qt.context)ze.push(Qt);else{var R=Qt.listening;R&&R.off(j,H)}}ze.length?y[j]=ze:delete y[j]}return y}for(St=N.keys(Xt);ge<St.length;ge++)Xt[St[ge]].cleanup()}};Nt.once=function(y,j,H){var ct=ut(kt,{},y,j,this.off.bind(this));return typeof y=="string"&&H==null&&(j=void 0),this.on(ct,j,H)},Nt.listenToOnce=function(y,j,H){var ct=ut(kt,{},j,H,this.stopListening.bind(this,y));return this.listenTo(y,ct)};var kt=function(y,j,H,ct){if(H){var St=y[j]=N.once(function(){ct(j,St),H.apply(this,arguments)});St._callback=H}return y};Nt.trigger=function(y){if(!this._events)return this;for(var j=Math.max(0,arguments.length-1),H=Array(j),ct=0;ct<j;ct++)H[ct]=arguments[ct+1];return ut(z,this._events,y,void 0,H),this};var z=function(y,j,H,ct){if(y){var St=y[j],Ct=y.all;St&&Ct&&(Ct=Ct.slice()),St&&O(St,ct),Ct&&O(Ct,[j].concat(ct))}return y},O=function(y,j){var H,ct=-1,St=y.length,Ct=j[0],Xt=j[1],ge=j[2];switch(j.length){case 0:for(;++ct<St;)(H=y[ct]).callback.call(H.ctx);return;case 1:for(;++ct<St;)(H=y[ct]).callback.call(H.ctx,Ct);return;case 2:for(;++ct<St;)(H=y[ct]).callback.call(H.ctx,Ct,Xt);return;case 3:for(;++ct<St;)(H=y[ct]).callback.call(H.ctx,Ct,Xt,ge);return;default:for(;++ct<St;)(H=y[ct]).callback.apply(H.ctx,j);return}},I=function(y,j){this.id=y._listenId,this.listener=y,this.obj=j,this.interop=!0,this.count=0,this._events=void 0};I.prototype.on=Nt.on,I.prototype.off=function(y,j){var H;this.interop?(this._events=ut(Bt,this._events,y,j,{context:void 0,listeners:void 0}),H=!this._events):(this.count--,H=this.count===0),H&&this.cleanup()},I.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},Nt.bind=Nt.on,Nt.unbind=Nt.off,N.extend(M,Nt);var W=M.Model=function(y,j){var H=y||{};j||(j={}),this.preinitialize.apply(this,arguments),this.cid=N.uniqueId(this.cidPrefix),this.attributes={},j.collection&&(this.collection=j.collection),j.parse&&(H=this.parse(H,j)||{});var ct=N.result(this,"defaults");H=N.defaults(N.extend({},ct,H),ct),this.set(H,j),this.changed={},this.initialize.apply(this,arguments)};N.extend(W.prototype,Nt,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(y){return N.clone(this.attributes)},sync:function(){return M.sync.apply(this,arguments)},get:function(y){return this.attributes[y]},escape:function(y){return N.escape(this.get(y))},has:function(y){return this.get(y)!=null},matches:function(y){return!!N.iteratee(y,this)(this.attributes)},set:function(y,j,H){if(y==null)return this;var ct;if(typeof y=="object"?(ct=y,H=j):(ct={})[y]=j,H||(H={}),!this._validate(ct,H))return!1;var St=H.unset,Ct=H.silent,Xt=[],ge=this._changing;this._changing=!0,ge||(this._previousAttributes=N.clone(this.attributes),this.changed={});var Ve=this.attributes,ze=this.changed,nn=this._previousAttributes;for(var Qt in ct)j=ct[Qt],N.isEqual(Ve[Qt],j)||Xt.push(Qt),N.isEqual(nn[Qt],j)?delete ze[Qt]:ze[Qt]=j,St?delete Ve[Qt]:Ve[Qt]=j;if(this.idAttribute in ct){var R=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,R,H)}if(!Ct){Xt.length&&(this._pending=H);for(var rt=0;rt<Xt.length;rt++)this.trigger("change:"+Xt[rt],this,Ve[Xt[rt]],H)}if(ge)return this;if(!Ct)for(;this._pending;)H=this._pending,this._pending=!1,this.trigger("change",this,H);return this._pending=!1,this._changing=!1,this},unset:function(y,j){return this.set(y,void 0,N.extend({},j,{unset:!0}))},clear:function(y){var j={};for(var H in this.attributes)j[H]=void 0;return this.set(j,N.extend({},y,{unset:!0}))},hasChanged:function(y){return y==null?!N.isEmpty(this.changed):N.has(this.changed,y)},changedAttributes:function(y){if(!y)return!!this.hasChanged()&&N.clone(this.changed);var j,H=this._changing?this._previousAttributes:this.attributes,ct={};for(var St in y){var Ct=y[St];N.isEqual(H[St],Ct)||(ct[St]=Ct,j=!0)}return!!j&&ct},previous:function(y){return y!=null&&this._previousAttributes?this._previousAttributes[y]:null},previousAttributes:function(){return N.clone(this._previousAttributes)},fetch:function(y){y=N.extend({parse:!0},y);var j=this,H=y.success;return y.success=function(ct){var St=y.parse?j.parse(ct,y):ct;if(!j.set(St,y))return!1;H&&H.call(y.context,j,ct,y),j.trigger("sync",j,ct,y)},Rt(this,y),this.sync("read",this,y)},save:function(y,j,H){var ct;y==null||typeof y=="object"?(ct=y,H=j):(ct={})[y]=j;var St=(H=N.extend({validate:!0,parse:!0},H)).wait;if(ct&&!St){if(!this.set(ct,H))return!1}else if(!this._validate(ct,H))return!1;var Ct=this,Xt=H.success,ge=this.attributes;H.success=function(nn){Ct.attributes=ge;var Qt=H.parse?Ct.parse(nn,H):nn;if(St&&(Qt=N.extend({},ct,Qt)),Qt&&!Ct.set(Qt,H))return!1;Xt&&Xt.call(H.context,Ct,nn,H),Ct.trigger("sync",Ct,nn,H)},Rt(this,H),ct&&St&&(this.attributes=N.extend({},ge,ct));var Ve=this.isNew()?"create":H.patch?"patch":"update";Ve!=="patch"||H.attrs||(H.attrs=ct);var ze=this.sync(Ve,this,H);return this.attributes=ge,ze},destroy:function(y){y=y?N.clone(y):{};var j=this,H=y.success,ct=y.wait,St=function(){j.stopListening(),j.trigger("destroy",j,j.collection,y)};y.success=function(Xt){ct&&St(),H&&H.call(y.context,j,Xt,y),j.isNew()||j.trigger("sync",j,Xt,y)};var Ct=!1;return this.isNew()?N.defer(y.success):(Rt(this,y),Ct=this.sync("delete",this,y)),ct||St(),Ct},url:function(){var y=N.result(this,"urlRoot")||N.result(this.collection,"url")||yt();if(this.isNew())return y;var j=this.get(this.idAttribute);return y.replace(/[^\/]$/,"$&/")+encodeURIComponent(j)},parse:function(y,j){return y},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(y){return this._validate({},N.extend({},y,{validate:!0}))},_validate:function(y,j){if(!j.validate||!this.validate)return!0;y=N.extend({},this.attributes,y);var H=this.validationError=this.validate(y,j)||null;return!H||(this.trigger("invalid",this,H,N.extend(j,{validationError:H})),!1)}});var Z=M.Collection=function(y,j){j||(j={}),this.preinitialize.apply(this,arguments),j.model&&(this.model=j.model),j.comparator!==void 0&&(this.comparator=j.comparator),this._reset(),this.initialize.apply(this,arguments),y&&this.reset(y,N.extend({silent:!0},j))},bt={add:!0,remove:!0,merge:!0},Q={add:!0,remove:!1},gt=function(y,j,H){H=Math.min(Math.max(H,0),y.length);var ct,St=Array(y.length-H),Ct=j.length;for(ct=0;ct<St.length;ct++)St[ct]=y[ct+H];for(ct=0;ct<Ct;ct++)y[ct+H]=j[ct];for(ct=0;ct<St.length;ct++)y[ct+Ct+H]=St[ct]};N.extend(Z.prototype,Nt,{model:W,preinitialize:function(){},initialize:function(){},toJSON:function(y){return this.map(function(j){return j.toJSON(y)})},sync:function(){return M.sync.apply(this,arguments)},add:function(y,j){return this.set(y,N.extend({merge:!1},j,Q))},remove:function(y,j){j=N.extend({},j);var H=!N.isArray(y);y=H?[y]:y.slice();var ct=this._removeModels(y,j);return!j.silent&&ct.length&&(j.changes={added:[],merged:[],removed:ct},this.trigger("update",this,j)),H?ct[0]:ct},set:function(y,j){if(y!=null){(j=N.extend({},bt,j)).parse&&!this._isModel(y)&&(y=this.parse(y,j)||[]);var H=!N.isArray(y);y=H?[y]:y.slice();var ct=j.at;ct!=null&&(ct=+ct),ct>this.length&&(ct=this.length),ct<0&&(ct+=this.length+1);var St,Ct,Xt=[],ge=[],Ve=[],ze=[],nn={},Qt=j.add,R=j.merge,rt=j.remove,ht=!1,_t=this.comparator&&ct==null&&j.sort!==!1,te=N.isString(this.comparator)?this.comparator:null;for(Ct=0;Ct<y.length;Ct++){St=y[Ct];var ye=this.get(St);if(ye){if(R&&St!==ye){var Ue=this._isModel(St)?St.attributes:St;j.parse&&(Ue=ye.parse(Ue,j)),ye.set(Ue,j),Ve.push(ye),_t&&!ht&&(ht=ye.hasChanged(te))}nn[ye.cid]||(nn[ye.cid]=!0,Xt.push(ye)),y[Ct]=ye}else Qt&&(St=y[Ct]=this._prepareModel(St,j))&&(ge.push(St),this._addReference(St,j),nn[St.cid]=!0,Xt.push(St))}if(rt){for(Ct=0;Ct<this.length;Ct++)nn[(St=this.models[Ct]).cid]||ze.push(St);ze.length&&this._removeModels(ze,j)}var Xe=!1,Hn=!_t&&Qt&&rt;if(Xt.length&&Hn?(Xe=this.length!==Xt.length||N.some(this.models,function(yn,$e){return yn!==Xt[$e]}),this.models.length=0,gt(this.models,Xt,0),this.length=this.models.length):ge.length&&(_t&&(ht=!0),gt(this.models,ge,ct??this.length),this.length=this.models.length),ht&&this.sort({silent:!0}),!j.silent){for(Ct=0;Ct<ge.length;Ct++)ct!=null&&(j.index=ct+Ct),(St=ge[Ct]).trigger("add",St,this,j);(ht||Xe)&&this.trigger("sort",this,j),(ge.length||ze.length||Ve.length)&&(j.changes={added:ge,removed:ze,merged:Ve},this.trigger("update",this,j))}return H?y[0]:y}},reset:function(y,j){j=j?N.clone(j):{};for(var H=0;H<this.models.length;H++)this._removeReference(this.models[H],j);return j.previousModels=this.models,this._reset(),y=this.add(y,N.extend({silent:!0},j)),j.silent||this.trigger("reset",this,j),y},push:function(y,j){return this.add(y,N.extend({at:this.length},j))},pop:function(y){var j=this.at(this.length-1);return this.remove(j,y)},unshift:function(y,j){return this.add(y,N.extend({at:0},j))},shift:function(y){var j=this.at(0);return this.remove(j,y)},slice:function(){return Et.apply(this.models,arguments)},get:function(y){if(y!=null)return this._byId[y]||this._byId[this.modelId(this._isModel(y)?y.attributes:y,y.idAttribute)]||y.cid&&this._byId[y.cid]},has:function(y){return this.get(y)!=null},at:function(y){return y<0&&(y+=this.length),this.models[y]},where:function(y,j){return this[j?"find":"filter"](y)},findWhere:function(y){return this.where(y,!0)},sort:function(y){var j=this.comparator;if(!j)throw new Error("Cannot sort a set without a comparator");y||(y={});var H=j.length;return N.isFunction(j)&&(j=j.bind(this)),H===1||N.isString(j)?this.models=this.sortBy(j):this.models.sort(j),y.silent||this.trigger("sort",this,y),this},pluck:function(y){return this.map(y+"")},fetch:function(y){var j=(y=N.extend({parse:!0},y)).success,H=this;return y.success=function(ct){var St=y.reset?"reset":"set";H[St](ct,y),j&&j.call(y.context,H,ct,y),H.trigger("sync",H,ct,y)},Rt(this,y),this.sync("read",this,y)},create:function(y,j){var H=(j=j?N.clone(j):{}).wait;if(!(y=this._prepareModel(y,j)))return!1;H||this.add(y,j);var ct=this,St=j.success;return j.success=function(Ct,Xt,ge){H&&ct.add(Ct,ge),St&&St.call(ge.context,Ct,Xt,ge)},y.save(null,j),y},parse:function(y,j){return y},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(y,j){return y[j||this.model.prototype.idAttribute||"id"]},values:function(){return new Lt(this,Pt)},keys:function(){return new Lt(this,Yt)},entries:function(){return new Lt(this,Ae)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(y,j){return this._isModel(y)?(y.collection||(y.collection=this),y):((j=j?N.clone(j):{}).collection=this,(H=this.model.prototype?new this.model(y,j):this.model(y,j)).validationError?(this.trigger("invalid",this,H.validationError,j),!1):H);var H},_removeModels:function(y,j){for(var H=[],ct=0;ct<y.length;ct++){var St=this.get(y[ct]);if(St){var Ct=this.indexOf(St);this.models.splice(Ct,1),this.length--,delete this._byId[St.cid];var Xt=this.modelId(St.attributes,St.idAttribute);Xt!=null&&delete this._byId[Xt],j.silent||(j.index=Ct,St.trigger("remove",St,this,j)),H.push(St),this._removeReference(St,j)}}return H},_isModel:function(y){return y instanceof W},_addReference:function(y,j){this._byId[y.cid]=y;var H=this.modelId(y.attributes,y.idAttribute);H!=null&&(this._byId[H]=y),y.on("all",this._onModelEvent,this)},_removeReference:function(y,j){delete this._byId[y.cid];var H=this.modelId(y.attributes,y.idAttribute);H!=null&&delete this._byId[H],this===y.collection&&delete y.collection,y.off("all",this._onModelEvent,this)},_onModelEvent:function(y,j,H,ct){if(j){if((y==="add"||y==="remove")&&H!==this)return;if(y==="destroy"&&this.remove(j,ct),y==="changeId"){var St=this.modelId(j.previousAttributes(),j.idAttribute),Ct=this.modelId(j.attributes,j.idAttribute);St!=null&&delete this._byId[St],Ct!=null&&(this._byId[Ct]=j)}}this.trigger.apply(this,arguments)}});var F=typeof Symbol=="function"&&Symbol.iterator;F&&(Z.prototype[F]=Z.prototype.values);var Lt=function(y,j){this._collection=y,this._kind=j,this._index=0},Pt=1,Yt=2,Ae=3;F&&(Lt.prototype[F]=function(){return this}),Lt.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var y,j=this._collection.at(this._index);if(this._index++,this._kind===Pt)y=j;else{var H=this._collection.modelId(j.attributes,j.idAttribute);y=this._kind===Yt?H:[H,j]}return{value:y,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var ke=M.View=function(y){this.cid=N.uniqueId("view"),this.preinitialize.apply(this,arguments),N.extend(this,N.pick(y,Ie)),this._ensureElement(),this.initialize.apply(this,arguments)},Oe=/^(\S+)\s*(.*)$/,Ie=["model","collection","el","id","attributes","className","tagName","events"];N.extend(ke.prototype,Nt,{tagName:"div",$:function(y){return this.$el.find(y)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(y){return this.undelegateEvents(),this._setElement(y),this.delegateEvents(),this},_setElement:function(y){this.$el=y instanceof M.$?y:M.$(y),this.el=this.$el[0]},delegateEvents:function(y){if(y||(y=N.result(this,"events")),!y)return this;for(var j in this.undelegateEvents(),y){var H=y[j];if(N.isFunction(H)||(H=this[H]),H){var ct=j.match(Oe);this.delegate(ct[1],ct[2],H.bind(this))}}return this},delegate:function(y,j,H){return this.$el.on(y+".delegateEvents"+this.cid,j,H),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(y,j,H){return this.$el.off(y+".delegateEvents"+this.cid,j,H),this},_createElement:function(y){return document.createElement(y)},_ensureElement:function(){if(this.el)this.setElement(N.result(this,"el"));else{var y=N.extend({},N.result(this,"attributes"));this.id&&(y.id=N.result(this,"id")),this.className&&(y.class=N.result(this,"className")),this.setElement(this._createElement(N.result(this,"tagName"))),this._setAttributes(y)}},_setAttributes:function(y){this.$el.attr(y)}});var Ce=function(y,j,H,ct){switch(j){case 1:return function(){return y[H](this[ct])};case 2:return function(St){return y[H](this[ct],St)};case 3:return function(St,Ct){return y[H](this[ct],me(St,this),Ct)};case 4:return function(St,Ct,Xt){return y[H](this[ct],me(St,this),Ct,Xt)};default:return function(){var St=Et.call(arguments);return St.unshift(this[ct]),y[H].apply(y,St)}}},Pe=function(y,j,H,ct){N.each(H,function(St,Ct){j[Ct]&&(y.prototype[Ct]=Ce(j,St,Ct,ct))})},me=function(y,j){return N.isFunction(y)?y:N.isObject(y)&&!j._isModel(y)?ae(y):N.isString(y)?function(H){return H.get(y)}:y},ae=function(y){var j=N.matches(y);return function(H){return j(H.attributes)}},ce={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},ue={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};N.each([[Z,ce,"models"],[W,ue,"attributes"]],function(y){var j=y[0],H=y[1],ct=y[2];j.mixin=function(St){var Ct=N.reduce(N.functions(St),function(Xt,ge){return Xt[ge]=0,Xt},{});Pe(j,St,Ct,ct)},Pe(j,N,H,ct)}),M.sync=function(y,j,H){var ct=at[y];N.defaults(H||(H={}),{emulateHTTP:M.emulateHTTP,emulateJSON:M.emulateJSON});var St={type:ct,dataType:"json"};if(H.url||(St.url=N.result(j,"url")||yt()),H.data!=null||!j||y!=="create"&&y!=="update"&&y!=="patch"||(St.contentType="application/json",St.data=JSON.stringify(H.attrs||j.toJSON(H))),H.emulateJSON&&(St.contentType="application/x-www-form-urlencoded",St.data=St.data?{model:St.data}:{}),H.emulateHTTP&&(ct==="PUT"||ct==="DELETE"||ct==="PATCH")){St.type="POST",H.emulateJSON&&(St.data._method=ct);var Ct=H.beforeSend;H.beforeSend=function(Ve){if(Ve.setRequestHeader("X-HTTP-Method-Override",ct),Ct)return Ct.apply(this,arguments)}}St.type==="GET"||H.emulateJSON||(St.processData=!1);var Xt=H.error;H.error=function(Ve,ze,nn){H.textStatus=ze,H.errorThrown=nn,Xt&&Xt.call(H.context,Ve,ze,nn)};var ge=H.xhr=M.ajax(N.extend(St,H));return j.trigger("request",j,ge,H),ge};var at={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};M.ajax=function(){return M.$.ajax.apply(M.$,arguments)};var Zt=M.Router=function(y){y||(y={}),this.preinitialize.apply(this,arguments),y.routes&&(this.routes=y.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},qt=/\((.*?)\)/g,ie=/(\(\?)?:\w+/g,pe=/\*\w+/g,ee=/[\-{}\[\]+?.,\\\^$|#\s]/g;N.extend(Zt.prototype,Nt,{preinitialize:function(){},initialize:function(){},route:function(y,j,H){N.isRegExp(y)||(y=this._routeToRegExp(y)),N.isFunction(j)&&(H=j,j=""),H||(H=this[j]);var ct=this;return M.history.route(y,function(St){var Ct=ct._extractParameters(y,St);ct.execute(H,Ct,j)!==!1&&(ct.trigger.apply(ct,["route:"+j].concat(Ct)),ct.trigger("route",j,Ct),M.history.trigger("route",ct,j,Ct))}),this},execute:function(y,j,H){y&&y.apply(this,j)},navigate:function(y,j){return M.history.navigate(y,j),this},_bindRoutes:function(){if(this.routes){this.routes=N.result(this,"routes");for(var y,j=N.keys(this.routes);(y=j.pop())!=null;)this.route(y,this.routes[y])}},_routeToRegExp:function(y){return y=y.replace(ee,"\\$&").replace(qt,"(?:$1)?").replace(ie,function(j,H){return H?j:"([^/?]+)"}).replace(pe,"([^?]*?)"),new RegExp("^"+y+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(y,j){var H=y.exec(j).slice(1);return N.map(H,function(ct,St){return St===H.length-1?ct||null:ct?decodeURIComponent(ct):null})}});var je=M.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},Je=/^[#\/]|\s+$/g,Ke=/^\/+|\/+$/g,fn=/#.*$/;je.started=!1,N.extend(je.prototype,Nt,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(y){return decodeURI(y.replace(/%25/g,"%2525"))},getSearch:function(){var y=this.location.href.replace(/#.*/,"").match(/\?.+/);return y?y[0]:""},getHash:function(y){var j=(y||this).location.href.match(/#(.*)$/);return j?j[1]:""},getPath:function(){var y=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return y.charAt(0)==="/"?y.slice(1):y},getFragment:function(y){return y==null&&(y=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),y.replace(Je,"")},start:function(y){if(je.started)throw new Error("Backbone.history has already been started");if(je.started=!0,this.options=N.extend({root:"/"},this.options,y),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ke,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var j=this.root.slice(0,-1)||"/";return this.location.replace(j+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var H=document.body,ct=H.insertBefore(this.iframe,H.firstChild).contentWindow;ct.document.open(),ct.document.close(),ct.location.hash="#"+this.fragment}var St=window.addEventListener||function(Ct,Xt){return attachEvent("on"+Ct,Xt)};if(this._usePushState?St("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?St("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var y=window.removeEventListener||function(j,H){return detachEvent("on"+j,H)};this._usePushState?y("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&y("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),je.started=!1},route:function(y,j){this.handlers.unshift({route:y,callback:j})},checkUrl:function(y){var j=this.getFragment();if(j===this.fragment&&this.iframe&&(j=this.getHash(this.iframe.contentWindow)),j===this.fragment)return!1;this.iframe&&this.navigate(j),this.loadUrl()},loadUrl:function(y){return!!this.matchRoot()&&(y=this.fragment=this.getFragment(y),N.some(this.handlers,function(j){if(j.route.test(y))return j.callback(y),!0}))},navigate:function(y,j){if(!je.started)return!1;j&&j!==!0||(j={trigger:!!j}),y=this.getFragment(y||"");var H=this.root;y!==""&&y.charAt(0)!=="?"||(H=H.slice(0,-1)||"/");var ct=H+y;y=y.replace(fn,"");var St=this.decodeFragment(y);if(this.fragment!==St){if(this.fragment=St,this._usePushState)this.history[j.replace?"replaceState":"pushState"]({},document.title,ct);else{if(!this._wantsHashChange)return this.location.assign(ct);if(this._updateHash(this.location,y,j.replace),this.iframe&&y!==this.getHash(this.iframe.contentWindow)){var Ct=this.iframe.contentWindow;j.replace||(Ct.document.open(),Ct.document.close()),this._updateHash(Ct.location,y,j.replace)}}return j.trigger?this.loadUrl(y):void 0}},_updateHash:function(y,j,H){if(H){var ct=y.href.replace(/(javascript:|#).*$/,"");y.replace(ct+"#"+j)}else y.hash="#"+j}}),M.history=new je;var jn=function(y,j){var H,ct=this;return H=y&&N.has(y,"constructor")?y.constructor:function(){return ct.apply(this,arguments)},N.extend(H,ct,j),H.prototype=N.create(ct.prototype,y),H.prototype.constructor=H,H.__super__=ct.prototype,H};W.extend=Z.extend=Zt.extend=ke.extend=je.extend=jn;var yt=function(){throw new Error('A "url" property or function must be specified')},Rt=function(y,j){var H=j.error;j.error=function(ct){H&&H.call(j.context,y,ct,j),y.trigger("error",y,ct,j)}};return M}(G,E,U,S)}.apply(lt,et),xt===void 0||(_.exports=xt)})()},210:(_,lt,D)=>{(function(et){et.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(q,G){return/^[;{}]$/.test(G)}}),et.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(q,G,U,S){return this.jsonMode?/^[\[,{]$/.test(G)||/^}/.test(U):(G!=";"||!S.lexical||S.lexical.type!=")")&&/^[;{}]$/.test(G)&&!/^;/.test(U)}});var xt=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;et.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(q,G,U,S){var E=!1;return this.configuration=="html"&&(E=!!S.context&&xt.test(S.context.tagName)),!E&&(q=="tag"&&/>$/.test(G)&&S.context||/^</.test(U))}}),et.defineExtension("commentRange",function(q,G,U){var S=this,E=et.innerMode(S.getMode(),S.getTokenAt(G).state).mode;S.operation(function(){if(q)S.replaceRange(E.commentEnd,U),S.replaceRange(E.commentStart,G),G.line==U.line&&G.ch==U.ch&&S.setCursor(G.line,G.ch+E.commentStart.length);else{var A=S.getRange(G,U),M=A.indexOf(E.commentStart),N=A.lastIndexOf(E.commentEnd);M>-1&&N>-1&&N>M&&(A=A.substr(0,M)+A.substring(M+E.commentStart.length,N)+A.substr(N+E.commentEnd.length)),S.replaceRange(A,G,U)}})}),et.defineExtension("autoIndentRange",function(q,G){var U=this;this.operation(function(){for(var S=q.line;S<=G.line;S++)U.indentLine(S,"smart")})}),et.defineExtension("autoFormatRange",function(q,G){var U=this,S=U.getMode(),E=U.getRange(q,G).split(`
`),A=et.copyState(S,U.getTokenAt(q).state),M=U.getOption("tabSize"),N="",it=0,st=q.ch===0;function Et(){N+=`
`,st=!0,++it}for(var Mt=0;Mt<E.length;++Mt){for(var Nt=new et.StringStream(E[Mt],M);!Nt.eol();){var ne=et.innerMode(S,A),ut=S.token(Nt,A),pt=Nt.current();Nt.start=Nt.pos,st&&!/\S/.test(pt)||(N+=pt,st=!1),!st&&ne.mode.newlineAfterToken&&ne.mode.newlineAfterToken(ut,pt,Nt.string.slice(Nt.pos)||E[Mt+1]||"",ne.state)&&Et()}!Nt.pos&&S.blankLine&&S.blankLine(A),!st&&Mt<E.length-1&&Et()}U.operation(function(){U.replaceRange(N,q,G);for(var Dt=q.line+1,Bt=q.line+it;Dt<=Bt;++Dt)U.indentLine(Dt,"smart");U.setSelection(q,U.getCursor(!1))})})})(D(631))},631:function(_){_.exports=function(){var lt=navigator.userAgent,D=navigator.platform,et=/gecko\/\d/i.test(lt),xt=/MSIE \d/.test(lt),q=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lt),G=/Edge\/(\d+)/.exec(lt),U=xt||q||G,S=U&&(xt?document.documentMode||6:+(G||q)[1]),E=!G&&/WebKit\//.test(lt),A=E&&/Qt\/\d+\.\d+/.test(lt),M=!G&&/Chrome\/(\d+)/.exec(lt),N=M&&+M[1],it=/Opera\//.test(lt),st=/Apple Computer/.test(navigator.vendor),Et=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(lt),Mt=/PhantomJS/.test(lt),Nt=st&&(/Mobile\/\w+/.test(lt)||navigator.maxTouchPoints>2),ne=/Android/.test(lt),ut=Nt||ne||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(lt),pt=Nt||/Mac/.test(D),Dt=/\bCrOS\b/.test(lt),Bt=/win/i.test(D),kt=it&&lt.match(/Version\/(\d*\.\d*)/);kt&&(kt=Number(kt[1])),kt&&kt>=15&&(it=!1,E=!0);var z=pt&&(A||it&&(kt==null||kt<12.11)),O=et||U&&S>=9;function I(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}var W,Z=function(o,s){var u=o.className,c=I(s).exec(u);if(c){var p=u.slice(c.index+c[0].length);o.className=u.slice(0,c.index)+(p?c[1]+p:"")}};function bt(o){for(var s=o.childNodes.length;s>0;--s)o.removeChild(o.firstChild);return o}function Q(o,s){return bt(o).appendChild(s)}function gt(o,s,u,c){var p=document.createElement(o);if(u&&(p.className=u),c&&(p.style.cssText=c),typeof s=="string")p.appendChild(document.createTextNode(s));else if(s)for(var h=0;h<s.length;++h)p.appendChild(s[h]);return p}function F(o,s,u,c){var p=gt(o,s,u,c);return p.setAttribute("role","presentation"),p}function Lt(o,s){if(s.nodeType==3&&(s=s.parentNode),o.contains)return o.contains(s);do if(s.nodeType==11&&(s=s.host),s==o)return!0;while(s=s.parentNode)}function Pt(){var o;try{o=document.activeElement}catch{o=document.body||null}for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;return o}function Yt(o,s){var u=o.className;I(s).test(u)||(o.className+=(u?" ":"")+s)}function Ae(o,s){for(var u=o.split(" "),c=0;c<u.length;c++)u[c]&&!I(u[c]).test(s)&&(s+=" "+u[c]);return s}W=document.createRange?function(o,s,u,c){var p=document.createRange();return p.setEnd(c||o,u),p.setStart(o,s),p}:function(o,s,u){var c=document.body.createTextRange();try{c.moveToElementText(o.parentNode)}catch{return c}return c.collapse(!0),c.moveEnd("character",u),c.moveStart("character",s),c};var ke=function(o){o.select()};function Oe(o){var s=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,s)}}function Ie(o,s,u){for(var c in s||(s={}),o)!o.hasOwnProperty(c)||u===!1&&s.hasOwnProperty(c)||(s[c]=o[c]);return s}function Ce(o,s,u,c,p){s==null&&(s=o.search(/[^\s\u00a0]/))==-1&&(s=o.length);for(var h=c||0,m=p||0;;){var b=o.indexOf("	",h);if(b<0||b>=s)return m+(s-h);m+=b-h,m+=u-m%u,h=b+1}}Nt?ke=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:U&&(ke=function(o){try{o.select()}catch{}});var Pe=function(){this.id=null,this.f=null,this.time=0,this.handler=Oe(this.onTimeout,this)};function me(o,s){for(var u=0;u<o.length;++u)if(o[u]==s)return u;return-1}Pe.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},Pe.prototype.set=function(o,s){this.f=s;var u=+new Date+o;(!this.id||u<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=u)};var ae=50,ce={toString:function(){return"CodeMirror.Pass"}},ue={scroll:!1},at={origin:"*mouse"},Zt={origin:"+move"};function qt(o,s,u){for(var c=0,p=0;;){var h=o.indexOf("	",c);h==-1&&(h=o.length);var m=h-c;if(h==o.length||p+m>=s)return c+Math.min(m,s-p);if(p+=h-c,c=h+1,(p+=u-p%u)>=s)return c}}var ie=[""];function pe(o){for(;ie.length<=o;)ie.push(ee(ie)+" ");return ie[o]}function ee(o){return o[o.length-1]}function je(o,s){for(var u=[],c=0;c<o.length;c++)u[c]=s(o[c],c);return u}function Je(o,s,u){for(var c=0,p=u(s);c<o.length&&u(o[c])<=p;)c++;o.splice(c,0,s)}function Ke(){}function fn(o,s){var u;return Object.create?u=Object.create(o):(Ke.prototype=o,u=new Ke),s&&Ie(s,u),u}var jn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function yt(o){return/\w/.test(o)||o>""&&(o.toUpperCase()!=o.toLowerCase()||jn.test(o))}function Rt(o,s){return s?!!(s.source.indexOf("\\w")>-1&&yt(o))||s.test(o):yt(o)}function y(o){for(var s in o)if(o.hasOwnProperty(s)&&o[s])return!1;return!0}var j=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function H(o){return o.charCodeAt(0)>=768&&j.test(o)}function ct(o,s,u){for(;(u<0?s>0:s<o.length)&&H(o.charAt(s));)s+=u;return s}function St(o,s,u){for(var c=s>u?-1:1;;){if(s==u)return s;var p=(s+u)/2,h=c<0?Math.ceil(p):Math.floor(p);if(h==s)return o(h)?s:u;o(h)?u=h:s=h+c}}function Ct(o,s,u,c){if(!o)return c(s,u,"ltr",0);for(var p=!1,h=0;h<o.length;++h){var m=o[h];(m.from<u&&m.to>s||s==u&&m.to==s)&&(c(Math.max(m.from,s),Math.min(m.to,u),m.level==1?"rtl":"ltr",h),p=!0)}p||c(s,u,"ltr")}var Xt=null;function ge(o,s,u){var c;Xt=null;for(var p=0;p<o.length;++p){var h=o[p];if(h.from<s&&h.to>s)return p;h.to==s&&(h.from!=h.to&&u=="before"?c=p:Xt=p),h.from==s&&(h.from!=h.to&&u!="before"?c=p:Xt=p)}return c??Xt}var Ve=function(){var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function u(k){return k<=247?o.charAt(k):1424<=k&&k<=1524?"R":1536<=k&&k<=1785?s.charAt(k-1536):1774<=k&&k<=2220?"r":8192<=k&&k<=8203?"w":k==8204?"b":"L"}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,p=/[stwN]/,h=/[LRr]/,m=/[Lb1n]/,b=/[1n]/;function x(k,$,K){this.level=k,this.from=$,this.to=K}return function(k,$){var K=$=="ltr"?"L":"R";if(k.length==0||$=="ltr"&&!c.test(k))return!1;for(var vt=k.length,mt=[],Ot=0;Ot<vt;++Ot)mt.push(u(k.charCodeAt(Ot)));for(var zt=0,Kt=K;zt<vt;++zt){var se=mt[zt];se=="m"?mt[zt]=Kt:Kt=se}for(var fe=0,re=K;fe<vt;++fe){var xe=mt[fe];xe=="1"&&re=="r"?mt[fe]="n":h.test(xe)&&(re=xe,xe=="r"&&(mt[fe]="R"))}for(var we=1,Ee=mt[0];we<vt-1;++we){var dn=mt[we];dn=="+"&&Ee=="1"&&mt[we+1]=="1"?mt[we]="1":dn!=","||Ee!=mt[we+1]||Ee!="1"&&Ee!="n"||(mt[we]=Ee),Ee=dn}for(var hn=0;hn<vt;++hn){var wr=mt[hn];if(wr==",")mt[hn]="N";else if(wr=="%"){var wn=void 0;for(wn=hn+1;wn<vt&&mt[wn]=="%";++wn);for(var pr=hn&&mt[hn-1]=="!"||wn<vt&&mt[wn]=="1"?"1":"N",_r=hn;_r<wn;++_r)mt[_r]=pr;hn=wn-1}}for(var kn=0,Nn=K;kn<vt;++kn){var yr=mt[kn];Nn=="L"&&yr=="1"?mt[kn]="L":h.test(yr)&&(Nn=yr)}for(var Wn=0;Wn<vt;++Wn)if(p.test(mt[Wn])){var In=void 0;for(In=Wn+1;In<vt&&p.test(mt[In]);++In);for(var Vn=(Wn?mt[Wn-1]:K)=="L",Cr=Vn==((In<vt?mt[In]:K)=="L")?Vn?"L":"R":K,ai=Wn;ai<In;++ai)mt[ai]=Cr;Wn=In-1}for(var mo,fr=[],En=0;En<vt;)if(m.test(mt[En])){var Sc=En;for(++En;En<vt&&m.test(mt[En]);++En);fr.push(new x(0,Sc,En))}else{var Bo=En,Vi=fr.length,Fi=$=="rtl"?1:0;for(++En;En<vt&&mt[En]!="L";++En);for(var qn=Bo;qn<En;)if(b.test(mt[qn])){Bo<qn&&(fr.splice(Vi,0,new x(1,Bo,qn)),Vi+=Fi);var ks=qn;for(++qn;qn<En&&b.test(mt[qn]);++qn);fr.splice(Vi,0,new x(2,ks,qn)),Vi+=Fi,Bo=qn}else++qn;Bo<En&&fr.splice(Vi,0,new x(1,Bo,En))}return $=="ltr"&&(fr[0].level==1&&(mo=k.match(/^\s+/))&&(fr[0].from=mo[0].length,fr.unshift(new x(0,0,mo[0].length))),ee(fr).level==1&&(mo=k.match(/\s+$/))&&(ee(fr).to-=mo[0].length,fr.push(new x(0,vt-mo[0].length,vt)))),$=="rtl"?fr.reverse():fr}}();function ze(o,s){var u=o.order;return u==null&&(u=o.order=Ve(o.text,s)),u}var nn=[],Qt=function(o,s,u){if(o.addEventListener)o.addEventListener(s,u,!1);else if(o.attachEvent)o.attachEvent("on"+s,u);else{var c=o._handlers||(o._handlers={});c[s]=(c[s]||nn).concat(u)}};function R(o,s){return o._handlers&&o._handlers[s]||nn}function rt(o,s,u){if(o.removeEventListener)o.removeEventListener(s,u,!1);else if(o.detachEvent)o.detachEvent("on"+s,u);else{var c=o._handlers,p=c&&c[s];if(p){var h=me(p,u);h>-1&&(c[s]=p.slice(0,h).concat(p.slice(h+1)))}}}function ht(o,s){var u=R(o,s);if(u.length)for(var c=Array.prototype.slice.call(arguments,2),p=0;p<u.length;++p)u[p].apply(null,c)}function _t(o,s,u){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),ht(o,u||s.type,o,s),yn(s)||s.codemirrorIgnore}function te(o){var s=o._handlers&&o._handlers.cursorActivity;if(s)for(var u=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),c=0;c<s.length;++c)me(u,s[c])==-1&&u.push(s[c])}function ye(o,s){return R(o,s).length>0}function Ue(o){o.prototype.on=function(s,u){Qt(this,s,u)},o.prototype.off=function(s,u){rt(this,s,u)}}function Xe(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function Hn(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function yn(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==0}function $e(o){Xe(o),Hn(o)}function Nr(o){return o.target||o.srcElement}function tr(o){var s=o.which;return s==null&&(1&o.button?s=1:2&o.button?s=3:4&o.button&&(s=2)),pt&&o.ctrlKey&&s==1&&(s=3),s}var Ir,bn,Tn=function(){if(U&&S<9)return!1;var o=gt("div");return"draggable"in o||"dragDrop"in o}();function Kn(o){if(Ir==null){var s=gt("span","​");Q(o,gt("span",[s,document.createTextNode("x")])),o.firstChild.offsetHeight!=0&&(Ir=s.offsetWidth<=1&&s.offsetHeight>2&&!(U&&S<8))}var u=Ir?gt("span","​"):gt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return u.setAttribute("cm-text",""),u}function Vr(o){if(bn!=null)return bn;var s=Q(o,document.createTextNode("AخA")),u=W(s,0,1).getBoundingClientRect(),c=W(s,1,2).getBoundingClientRect();return bt(o),!(!u||u.left==u.right)&&(bn=c.right-u.right<3)}var Rn,To=`

b`.split(/\n/).length!=3?function(o){for(var s=0,u=[],c=o.length;s<=c;){var p=o.indexOf(`
`,s);p==-1&&(p=o.length);var h=o.slice(s,o.charAt(p-1)=="\r"?p-1:p),m=h.indexOf("\r");m!=-1?(u.push(h.slice(0,m)),s+=m+1):(u.push(h),s=p+1)}return u}:function(o){return o.split(/\r\n?|\n/)},Uo=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){var s;try{s=o.ownerDocument.selection.createRange()}catch{}return!(!s||s.parentElement()!=o)&&s.compareEndPoints("StartToEnd",s)!=0},ko="oncopy"in(Rn=gt("div"))||(Rn.setAttribute("oncopy","return;"),typeof Rn.oncopy=="function"),Wo=null;function lo(o){if(Wo!=null)return Wo;var s=Q(o,gt("span","x")),u=s.getBoundingClientRect(),c=W(s,0,1).getBoundingClientRect();return Wo=Math.abs(u.left-c.left)>1}var gr={},gn={};function $o(o,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),gr[o]=s}function Fr(o,s){gn[o]=s}function Eo(o){if(typeof o=="string"&&gn.hasOwnProperty(o))o=gn[o];else if(o&&typeof o.name=="string"&&gn.hasOwnProperty(o.name)){var s=gn[o.name];typeof s=="string"&&(s={name:s}),(o=fn(s,o)).name=s.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return Eo("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return Eo("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function no(o,s){s=Eo(s);var u=gr[s.name];if(!u)return no(o,"text/plain");var c=u(o,s);if(Yn.hasOwnProperty(s.name)){var p=Yn[s.name];for(var h in p)p.hasOwnProperty(h)&&(c.hasOwnProperty(h)&&(c["_"+h]=c[h]),c[h]=p[h])}if(c.name=s.name,s.helperType&&(c.helperType=s.helperType),s.modeProps)for(var m in s.modeProps)c[m]=s.modeProps[m];return c}var Yn={};function zn(o,s){Ie(s,Yn.hasOwnProperty(o)?Yn[o]:Yn[o]={})}function Jn(o,s){if(s===!0)return s;if(o.copyState)return o.copyState(s);var u={};for(var c in s){var p=s[c];p instanceof Array&&(p=p.concat([])),u[c]=p}return u}function qo(o,s){for(var u;o.innerMode&&(u=o.innerMode(s))&&u.mode!=o;)s=u.state,o=u.mode;return u||{mode:o,state:s}}function _o(o,s,u){return!o.startState||o.startState(s,u)}var Qe=function(o,s,u){this.pos=this.start=0,this.string=o,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=u};function be(o,s){if((s-=o.first)<0||s>=o.size)throw new Error("There is no line "+(s+o.first)+" in the document.");for(var u=o;!u.lines;)for(var c=0;;++c){var p=u.children[c],h=p.chunkSize();if(s<h){u=p;break}s-=h}return u.lines[s]}function lr(o,s,u){var c=[],p=s.line;return o.iter(s.line,u.line+1,function(h){var m=h.text;p==u.line&&(m=m.slice(0,u.ch)),p==s.line&&(m=m.slice(s.ch)),c.push(m),++p}),c}function Go(o,s,u){var c=[];return o.iter(s,u,function(p){c.push(p.text)}),c}function cr(o,s){var u=s-o.height;if(u)for(var c=o;c;c=c.parent)c.height+=u}function en(o){if(o.parent==null)return null;for(var s=o.parent,u=me(s.lines,o),c=s.parent;c;s=c,c=c.parent)for(var p=0;c.children[p]!=s;++p)u+=c.children[p].chunkSize();return u+s.first}function Bn(o,s){var u=o.first;t:do{for(var c=0;c<o.children.length;++c){var p=o.children[c],h=p.height;if(s<h){o=p;continue t}s-=h,u+=p.chunkSize()}return u}while(!o.lines);for(var m=0;m<o.lines.length;++m){var b=o.lines[m].height;if(s<b)break;s-=b}return u+m}function Co(o,s){return s>=o.first&&s<o.first+o.size}function Ko(o,s){return String(o.lineNumberFormatter(s+o.firstLineNumber))}function $t(o,s,u){if(u===void 0&&(u=null),!(this instanceof $t))return new $t(o,s,u);this.line=o,this.ch=s,this.sticky=u}function P(o,s){return o.line-s.line||o.ch-s.ch}function Y(o,s){return o.sticky==s.sticky&&P(o,s)==0}function It(o){return $t(o.line,o.ch)}function oe(o,s){return P(o,s)<0?s:o}function ve(o,s){return P(o,s)<0?o:s}function Ze(o,s){return Math.max(o.first,Math.min(s,o.first+o.size-1))}function le(o,s){if(s.line<o.first)return $t(o.first,0);var u=o.first+o.size-1;return s.line>u?$t(u,be(o,u).text.length):$n(s,be(o,s.line).text.length)}function $n(o,s){var u=o.ch;return u==null||u>s?$t(o.line,s):u<0?$t(o.line,0):o}function Mn(o,s){for(var u=[],c=0;c<s.length;c++)u[c]=le(o,s[c]);return u}Qe.prototype.eol=function(){return this.pos>=this.string.length},Qe.prototype.sol=function(){return this.pos==this.lineStart},Qe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Qe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Qe.prototype.eat=function(o){var s=this.string.charAt(this.pos);if(typeof o=="string"?s==o:s&&(o.test?o.test(s):o(s)))return++this.pos,s},Qe.prototype.eatWhile=function(o){for(var s=this.pos;this.eat(o););return this.pos>s},Qe.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},Qe.prototype.skipToEnd=function(){this.pos=this.string.length},Qe.prototype.skipTo=function(o){var s=this.string.indexOf(o,this.pos);if(s>-1)return this.pos=s,!0},Qe.prototype.backUp=function(o){this.pos-=o},Qe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ce(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ce(this.string,this.lineStart,this.tabSize):0)},Qe.prototype.indentation=function(){return Ce(this.string,null,this.tabSize)-(this.lineStart?Ce(this.string,this.lineStart,this.tabSize):0)},Qe.prototype.match=function(o,s,u){if(typeof o!="string"){var c=this.string.slice(this.pos).match(o);return c&&c.index>0?null:(c&&s!==!1&&(this.pos+=c[0].length),c)}var p=function(h){return u?h.toLowerCase():h};if(p(this.string.substr(this.pos,o.length))==p(o))return s!==!1&&(this.pos+=o.length),!0},Qe.prototype.current=function(){return this.string.slice(this.start,this.pos)},Qe.prototype.hideFirstChars=function(o,s){this.lineStart+=o;try{return s()}finally{this.lineStart-=o}},Qe.prototype.lookAhead=function(o){var s=this.lineOracle;return s&&s.lookAhead(o)},Qe.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};var Wi=function(o,s){this.state=o,this.lookAhead=s},kr=function(o,s,u,c){this.state=s,this.doc=o,this.line=u,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};function Vs(o,s,u,c){var p=[o.state.modeGen],h={};Po(o,s.text,o.doc.mode,u,function(k,$){return p.push(k,$)},h,c);for(var m=u.state,b=function(k){u.baseTokens=p;var $=o.state.overlays[k],K=1,vt=0;u.state=!0,Po(o,s.text,$.mode,u,function(mt,Ot){for(var zt=K;vt<mt;){var Kt=p[K];Kt>mt&&p.splice(K,1,mt,p[K+1],Kt),K+=2,vt=Math.min(mt,Kt)}if(Ot)if($.opaque)p.splice(zt,K-zt,mt,"overlay "+Ot),K=zt+2;else for(;zt<K;zt+=2){var se=p[zt+1];p[zt+1]=(se?se+" ":"")+"overlay "+Ot}},h),u.state=m,u.baseTokens=null,u.baseTokenPos=1},x=0;x<o.state.overlays.length;++x)b(x);return{styles:p,classes:h.bgClass||h.textClass?h:null}}function Er(o,s,u){if(!s.styles||s.styles[0]!=o.state.modeGen){var c=xo(o,en(s)),p=s.text.length>o.options.maxHighlightLength&&Jn(o.doc.mode,c.state),h=Vs(o,s,c);p&&(c.state=p),s.stateAfter=c.save(!p),s.styles=h.styles,h.classes?s.styleClasses=h.classes:s.styleClasses&&(s.styleClasses=null),u===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return s.styles}function xo(o,s,u){var c=o.doc,p=o.display;if(!c.mode.startState)return new kr(c,!0,s);var h=$i(o,s,u),m=h>c.first&&be(c,h-1).stateAfter,b=m?kr.fromSaved(c,m,h):new kr(c,_o(c.mode),h);return c.iter(h,s,function(x){co(o,x.text,b);var k=b.line;x.stateAfter=k==s-1||k%5==0||k>=p.viewFrom&&k<p.viewTo?b.save():null,b.nextLine()}),u&&(c.modeFrontier=b.line),b}function co(o,s,u,c){var p=o.doc.mode,h=new Qe(s,o.options.tabSize,u);for(h.start=h.pos=c||0,s==""&&So(p,u.state);!h.eol();)er(p,h,u.state),h.start=h.pos}function So(o,s){if(o.blankLine)return o.blankLine(s);if(o.innerMode){var u=qo(o,s);return u.mode.blankLine?u.mode.blankLine(u.state):void 0}}function er(o,s,u,c){for(var p=0;p<10;p++){c&&(c[0]=qo(o,u).mode);var h=o.token(s,u);if(s.pos>s.start)return h}throw new Error("Mode "+o.name+" failed to advance stream.")}kr.prototype.lookAhead=function(o){var s=this.doc.getLine(this.line+o);return s!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),s},kr.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},kr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},kr.fromSaved=function(o,s,u){return s instanceof Wi?new kr(o,Jn(o.mode,s.state),u,s.lookAhead):new kr(o,Jn(o.mode,s),u)},kr.prototype.save=function(o){var s=o!==!1?Jn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Wi(s,this.maxLookAhead):s};var Oo=function(o,s,u){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=s||null,this.state=u};function Yo(o,s,u,c){var p,h,m=o.doc,b=m.mode,x=be(m,(s=le(m,s)).line),k=xo(o,s.line,u),$=new Qe(x.text,o.options.tabSize,k);for(c&&(h=[]);(c||$.pos<s.ch)&&!$.eol();)$.start=$.pos,p=er(b,$,k.state),c&&h.push(new Oo($,p,Jn(m.mode,k.state)));return c?h:new Oo($,p,k.state)}function Fs(o,s){if(o)for(;;){var u=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!u)break;o=o.slice(0,u.index)+o.slice(u.index+u[0].length);var c=u[1]?"bgClass":"textClass";s[c]==null?s[c]=u[2]:new RegExp("(?:^|\\s)"+u[2]+"(?:$|\\s)").test(s[c])||(s[c]+=" "+u[2])}return o}function Po(o,s,u,c,p,h,m){var b=u.flattenSpans;b==null&&(b=o.options.flattenSpans);var x,k=0,$=null,K=new Qe(s,o.options.tabSize,c),vt=o.options.addModeClass&&[null];for(s==""&&Fs(So(u,c.state),h);!K.eol();){if(K.pos>o.options.maxHighlightLength?(b=!1,m&&co(o,s,c,K.pos),K.pos=s.length,x=null):x=Fs(er(u,K,c.state,vt),h),vt){var mt=vt[0].name;mt&&(x="m-"+(x?mt+" "+x:mt))}if(!b||$!=x){for(;k<K.start;)p(k=Math.min(K.start,k+5e3),$);$=x}K.start=K.pos}for(;k<K.pos;){var Ot=Math.min(K.pos,k+5e3);p(Ot,$),k=Ot}}function $i(o,s,u){for(var c,p,h=o.doc,m=u?-1:s-(o.doc.mode.innerMode?1e3:100),b=s;b>m;--b){if(b<=h.first)return h.first;var x=be(h,b-1),k=x.stateAfter;if(k&&(!u||b+(k instanceof Wi?k.lookAhead:0)<=h.modeFrontier))return b;var $=Ce(x.text,null,o.options.tabSize);(p==null||c>$)&&(p=b-1,c=$)}return p}function Hs(o,s){if(o.modeFrontier=Math.min(o.modeFrontier,s),!(o.highlightFrontier<s-10)){for(var u=o.first,c=s-1;c>u;c--){var p=be(o,c).stateAfter;if(p&&(!(p instanceof Wi)||c+p.lookAhead<s)){u=c+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,u)}}var nr=!1,ro=!1;function vi(){nr=!0}function Rs(){ro=!0}function Pr(o,s,u){this.marker=o,this.from=s,this.to=u}function Ao(o,s){if(o)for(var u=0;u<o.length;++u){var c=o[u];if(c.marker==s)return c}}function mi(o,s){for(var u,c=0;c<o.length;++c)o[c]!=s&&(u||(u=[])).push(o[c]);return u}function zs(o,s,u){var c=u&&window.WeakSet&&(u.markedSpans||(u.markedSpans=new WeakSet));c&&o.markedSpans&&c.has(o.markedSpans)?o.markedSpans.push(s):(o.markedSpans=o.markedSpans?o.markedSpans.concat([s]):[s],c&&c.add(o.markedSpans)),s.marker.attachLine(o)}function La(o,s,u){var c;if(o)for(var p=0;p<o.length;++p){var h=o[p],m=h.marker;if(h.from==null||(m.inclusiveLeft?h.from<=s:h.from<s)||h.from==s&&m.type=="bookmark"&&(!u||!h.marker.insertLeft)){var b=h.to==null||(m.inclusiveRight?h.to>=s:h.to>s);(c||(c=[])).push(new Pr(m,h.from,b?null:h.to))}}return c}function yi(o,s,u){var c;if(o)for(var p=0;p<o.length;++p){var h=o[p],m=h.marker;if(h.to==null||(m.inclusiveRight?h.to>=s:h.to>s)||h.from==s&&m.type=="bookmark"&&(!u||h.marker.insertLeft)){var b=h.from==null||(m.inclusiveLeft?h.from<=s:h.from<s);(c||(c=[])).push(new Pr(m,b?null:h.from-s,h.to==null?null:h.to-s))}}return c}function Jo(o,s){if(s.full)return null;var u=Co(o,s.from.line)&&be(o,s.from.line).markedSpans,c=Co(o,s.to.line)&&be(o,s.to.line).markedSpans;if(!u&&!c)return null;var p=s.from.ch,h=s.to.ch,m=P(s.from,s.to)==0,b=La(u,p,m),x=yi(c,h,m),k=s.text.length==1,$=ee(s.text).length+(k?p:0);if(b)for(var K=0;K<b.length;++K){var vt=b[K];if(vt.to==null){var mt=Ao(x,vt.marker);mt?k&&(vt.to=mt.to==null?null:mt.to+$):vt.to=p}}if(x)for(var Ot=0;Ot<x.length;++Ot){var zt=x[Ot];zt.to!=null&&(zt.to+=$),zt.from==null?Ao(b,zt.marker)||(zt.from=$,k&&(b||(b=[])).push(zt)):(zt.from+=$,k&&(b||(b=[])).push(zt))}b&&(b=qi(b)),x&&x!=b&&(x=qi(x));var Kt=[b];if(!k){var se,fe=s.text.length-2;if(fe>0&&b)for(var re=0;re<b.length;++re)b[re].to==null&&(se||(se=[])).push(new Pr(b[re].marker,null,null));for(var xe=0;xe<fe;++xe)Kt.push(se);Kt.push(x)}return Kt}function qi(o){for(var s=0;s<o.length;++s){var u=o[s];u.from!=null&&u.from==u.to&&u.marker.clearWhenEmpty!==!1&&o.splice(s--,1)}return o.length?o:null}function Ye(o,s,u){var c=null;if(o.iter(s.line,u.line+1,function(mt){if(mt.markedSpans)for(var Ot=0;Ot<mt.markedSpans.length;++Ot){var zt=mt.markedSpans[Ot].marker;!zt.readOnly||c&&me(c,zt)!=-1||(c||(c=[])).push(zt)}}),!c)return null;for(var p=[{from:s,to:u}],h=0;h<c.length;++h)for(var m=c[h],b=m.find(0),x=0;x<p.length;++x){var k=p[x];if(!(P(k.to,b.from)<0||P(k.from,b.to)>0)){var $=[x,1],K=P(k.from,b.from),vt=P(k.to,b.to);(K<0||!m.inclusiveLeft&&!K)&&$.push({from:k.from,to:b.from}),(vt>0||!m.inclusiveRight&&!vt)&&$.push({from:b.to,to:k.to}),p.splice.apply(p,$),x+=$.length-3}}return p}function rr(o){var s=o.markedSpans;if(s){for(var u=0;u<s.length;++u)s[u].marker.detachLine(o);o.markedSpans=null}}function Gi(o,s){if(s){for(var u=0;u<s.length;++u)s[u].marker.attachLine(o);o.markedSpans=s}}function br(o){return o.inclusiveLeft?-1:0}function Xn(o){return o.inclusiveRight?1:0}function _n(o,s){var u=o.lines.length-s.lines.length;if(u!=0)return u;var c=o.find(),p=s.find(),h=P(c.from,p.from)||br(o)-br(s);if(h)return-h;var m=P(c.to,p.to)||Xn(o)-Xn(s);return m||s.id-o.id}function Ar(o,s){var u,c=ro&&o.markedSpans;if(c)for(var p=void 0,h=0;h<c.length;++h)(p=c[h]).marker.collapsed&&(s?p.from:p.to)==null&&(!u||_n(u,p.marker)<0)&&(u=p.marker);return u}function Xo(o){return Ar(o,!0)}function Hr(o){return Ar(o,!1)}function Ki(o,s){var u,c=ro&&o.markedSpans;if(c)for(var p=0;p<c.length;++p){var h=c[p];h.marker.collapsed&&(h.from==null||h.from<s)&&(h.to==null||h.to>s)&&(!u||_n(u,h.marker)<0)&&(u=h.marker)}return u}function Cn(o,s,u,c,p){var h=be(o,s),m=ro&&h.markedSpans;if(m)for(var b=0;b<m.length;++b){var x=m[b];if(x.marker.collapsed){var k=x.marker.find(0),$=P(k.from,u)||br(x.marker)-br(p),K=P(k.to,c)||Xn(x.marker)-Xn(p);if(!($>=0&&K<=0||$<=0&&K>=0)&&($<=0&&(x.marker.inclusiveRight&&p.inclusiveLeft?P(k.to,u)>=0:P(k.to,u)>0)||$>=0&&(x.marker.inclusiveRight&&p.inclusiveLeft?P(k.from,c)<=0:P(k.from,c)<0)))return!0}}}function jr(o){for(var s;s=Xo(o);)o=s.find(-1,!0).line;return o}function Yi(o){for(var s;s=Hr(o);)o=s.find(1,!0).line;return o}function bi(o){for(var s,u;s=Hr(o);)o=s.find(1,!0).line,(u||(u=[])).push(o);return u}function vr(o,s){var u=be(o,s),c=jr(u);return u==c?s:en(c)}function Rr(o,s){if(s>o.lastLine())return s;var u,c=be(o,s);if(!zr(o,c))return s;for(;u=Hr(c);)c=u.find(1,!0).line;return en(c)+1}function zr(o,s){var u=ro&&s.markedSpans;if(u){for(var c=void 0,p=0;p<u.length;++p)if((c=u[p]).marker.collapsed&&(c.from==null||!c.marker.widgetNode&&c.from==0&&c.marker.inclusiveLeft&&Ln(o,s,c)))return!0}}function Ln(o,s,u){if(u.to==null){var c=u.marker.find(1,!0);return Ln(o,c.line,Ao(c.line.markedSpans,u.marker))}if(u.marker.inclusiveRight&&u.to==s.text.length)return!0;for(var p=void 0,h=0;h<s.markedSpans.length;++h)if((p=s.markedSpans[h]).marker.collapsed&&!p.marker.widgetNode&&p.from==u.to&&(p.to==null||p.to!=u.from)&&(p.marker.inclusiveLeft||u.marker.inclusiveRight)&&Ln(o,s,p))return!0}function Br(o){for(var s=0,u=(o=jr(o)).parent,c=0;c<u.lines.length;++c){var p=u.lines[c];if(p==o)break;s+=p.height}for(var h=u.parent;h;h=(u=h).parent)for(var m=0;m<h.children.length;++m){var b=h.children[m];if(b==u)break;s+=b.height}return s}function wi(o){if(o.height==0)return 0;for(var s,u=o.text.length,c=o;s=Xo(c);){var p=s.find(0,!0);c=p.from.line,u+=p.from.ch-p.to.ch}for(c=o;s=Hr(c);){var h=s.find(0,!0);u-=c.text.length-h.from.ch,u+=(c=h.to.line).text.length-h.to.ch}return u}function Bs(o){var s=o.display,u=o.doc;s.maxLine=be(u,u.first),s.maxLineLength=wi(s.maxLine),s.maxLineChanged=!0,u.iter(function(c){var p=wi(c);p>s.maxLineLength&&(s.maxLineLength=p,s.maxLine=c)})}var Ur=function(o,s,u){this.text=o,Gi(this,s),this.height=u?u(this):1};function Us(o,s,u,c){o.text=s,o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null),o.order!=null&&(o.order=null),rr(o),Gi(o,u);var p=c?c(o):1;p!=o.height&&cr(o,p)}function Da(o){o.parent=null,rr(o)}Ur.prototype.lineNo=function(){return en(this)},Ue(Ur);var Na={},Ji={};function Zo(o,s){if(!o||/^\s*$/.test(o))return null;var u=s.addModeClass?Ji:Na;return u[o]||(u[o]=o.replace(/\S+/g,"cm-$&"))}function Xi(o,s){var u=F("span",null,null,E?"padding-right: .1px":null),c={pre:F("pre",[u],"CodeMirror-line"),content:u,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")};s.measure={};for(var p=0;p<=(s.rest?s.rest.length:0);p++){var h=p?s.rest[p-1]:s.line,m=void 0;c.pos=0,c.addToken=Va,Vr(o.display.measure)&&(m=ze(h,o.doc.direction))&&(c.addToken=Ll(c.addToken,m)),c.map=[],Zi(h,c,Er(o,h,s!=o.display.externalMeasured&&en(h))),h.styleClasses&&(h.styleClasses.bgClass&&(c.bgClass=Ae(h.styleClasses.bgClass,c.bgClass||"")),h.styleClasses.textClass&&(c.textClass=Ae(h.styleClasses.textClass,c.textClass||""))),c.map.length==0&&c.map.push(0,0,c.content.appendChild(Kn(o.display.measure))),p==0?(s.measure.map=c.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(c.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(E){var b=c.content.lastChild;(/\bcm-tab\b/.test(b.className)||b.querySelector&&b.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack")}return ht(o,"renderLine",o,s.line,c.pre),c.pre.className&&(c.textClass=Ae(c.pre.className,c.textClass||"")),c}function Ia(o){var s=gt("span","•","cm-invalidchar");return s.title="\\u"+o.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function Va(o,s,u,c,p,h,m){if(s){var b,x=o.splitSpaces?Fa(s,o.trailingSpace):s,k=o.cm.state.specialChars,$=!1;if(k.test(s)){b=document.createDocumentFragment();for(var K=0;;){k.lastIndex=K;var vt=k.exec(s),mt=vt?vt.index-K:s.length-K;if(mt){var Ot=document.createTextNode(x.slice(K,K+mt));U&&S<9?b.appendChild(gt("span",[Ot])):b.appendChild(Ot),o.map.push(o.pos,o.pos+mt,Ot),o.col+=mt,o.pos+=mt}if(!vt)break;K+=mt+1;var zt=void 0;if(vt[0]=="	"){var Kt=o.cm.options.tabSize,se=Kt-o.col%Kt;(zt=b.appendChild(gt("span",pe(se),"cm-tab"))).setAttribute("role","presentation"),zt.setAttribute("cm-text","	"),o.col+=se}else vt[0]=="\r"||vt[0]==`
`?((zt=b.appendChild(gt("span",vt[0]=="\r"?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",vt[0]),o.col+=1):((zt=o.cm.options.specialCharPlaceholder(vt[0])).setAttribute("cm-text",vt[0]),U&&S<9?b.appendChild(gt("span",[zt])):b.appendChild(zt),o.col+=1);o.map.push(o.pos,o.pos+1,zt),o.pos++}}else o.col+=s.length,b=document.createTextNode(x),o.map.push(o.pos,o.pos+s.length,b),U&&S<9&&($=!0),o.pos+=s.length;if(o.trailingSpace=x.charCodeAt(s.length-1)==32,u||c||p||$||h||m){var fe=u||"";c&&(fe+=c),p&&(fe+=p);var re=gt("span",[b],fe,h);if(m)for(var xe in m)m.hasOwnProperty(xe)&&xe!="style"&&xe!="class"&&re.setAttribute(xe,m[xe]);return o.content.appendChild(re)}o.content.appendChild(b)}}function Fa(o,s){if(o.length>1&&!/  /.test(o))return o;for(var u=s,c="",p=0;p<o.length;p++){var h=o.charAt(p);h!=" "||!u||p!=o.length-1&&o.charCodeAt(p+1)!=32||(h=" "),c+=h,u=h==" "}return c}function Ll(o,s){return function(u,c,p,h,m,b,x){p=p?p+" cm-force-border":"cm-force-border";for(var k=u.pos,$=k+c.length;;){for(var K=void 0,vt=0;vt<s.length&&!((K=s[vt]).to>k&&K.from<=k);vt++);if(K.to>=$)return o(u,c,p,h,m,b,x);o(u,c.slice(0,K.to-k),p,h,null,b,x),h=null,c=c.slice(K.to-k),k=K.to}}}function jo(o,s,u,c){var p=!c&&u.widgetNode;p&&o.map.push(o.pos,o.pos+s,p),!c&&o.cm.display.input.needsContentAttribute&&(p||(p=o.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",u.id)),p&&(o.cm.display.input.setUneditable(p),o.content.appendChild(p)),o.pos+=s,o.trailingSpace=!1}function Zi(o,s,u){var c=o.markedSpans,p=o.text,h=0;if(c)for(var m,b,x,k,$,K,vt,mt=p.length,Ot=0,zt=1,Kt="",se=0;;){if(se==Ot){x=k=$=b="",vt=null,K=null,se=1/0;for(var fe=[],re=void 0,xe=0;xe<c.length;++xe){var we=c[xe],Ee=we.marker;if(Ee.type=="bookmark"&&we.from==Ot&&Ee.widgetNode)fe.push(Ee);else if(we.from<=Ot&&(we.to==null||we.to>Ot||Ee.collapsed&&we.to==Ot&&we.from==Ot)){if(we.to!=null&&we.to!=Ot&&se>we.to&&(se=we.to,k=""),Ee.className&&(x+=" "+Ee.className),Ee.css&&(b=(b?b+";":"")+Ee.css),Ee.startStyle&&we.from==Ot&&($+=" "+Ee.startStyle),Ee.endStyle&&we.to==se&&(re||(re=[])).push(Ee.endStyle,we.to),Ee.title&&((vt||(vt={})).title=Ee.title),Ee.attributes)for(var dn in Ee.attributes)(vt||(vt={}))[dn]=Ee.attributes[dn];Ee.collapsed&&(!K||_n(K.marker,Ee)<0)&&(K=we)}else we.from>Ot&&se>we.from&&(se=we.from)}if(re)for(var hn=0;hn<re.length;hn+=2)re[hn+1]==se&&(k+=" "+re[hn]);if(!K||K.from==Ot)for(var wr=0;wr<fe.length;++wr)jo(s,0,fe[wr]);if(K&&(K.from||0)==Ot){if(jo(s,(K.to==null?mt+1:K.to)-Ot,K.marker,K.from==null),K.to==null)return;K.to==Ot&&(K=!1)}}if(Ot>=mt)break;for(var wn=Math.min(mt,se);;){if(Kt){var pr=Ot+Kt.length;if(!K){var _r=pr>wn?Kt.slice(0,wn-Ot):Kt;s.addToken(s,_r,m?m+x:x,$,Ot+_r.length==se?k:"",b,vt)}if(pr>=wn){Kt=Kt.slice(wn-Ot),Ot=wn;break}Ot=pr,$=""}Kt=p.slice(h,h=u[zt++]),m=Zo(u[zt++],s.cm.options)}}else for(var kn=1;kn<u.length;kn+=2)s.addToken(s,p.slice(h,h=u[kn]),Zo(u[kn+1],s.cm.options))}function Qi(o,s,u){this.line=s,this.rest=bi(s),this.size=this.rest?en(ee(this.rest))-u+1:1,this.node=this.text=null,this.hidden=zr(o,s)}function uo(o,s,u){for(var c,p=[],h=s;h<u;h=c){var m=new Qi(o.doc,be(o.doc,h),h);c=h+m.size,p.push(m)}return p}var Mr=null;function _i(o){Mr?Mr.ops.push(o):o.ownsGroup=Mr={ops:[o],delayedCallbacks:[]}}function ts(o){var s=o.delayedCallbacks,u=0;do{for(;u<s.length;u++)s[u].call(null);for(var c=0;c<o.ops.length;c++){var p=o.ops[c];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(u<s.length)}function es(o,s){var u=o.ownsGroup;if(u)try{ts(u)}finally{Mr=null,s(u)}}var Mo=null;function xn(o,s){var u=R(o,s);if(u.length){var c,p=Array.prototype.slice.call(arguments,2);Mr?c=Mr.delayedCallbacks:Mo?c=Mo:(c=Mo=[],setTimeout(Lo,0));for(var h=function(b){c.push(function(){return u[b].apply(null,p)})},m=0;m<u.length;++m)h(m)}}function Lo(){var o=Mo;Mo=null;for(var s=0;s<o.length;++s)o[s]()}function Ws(o,s,u,c){for(var p=0;p<s.changes.length;p++){var h=s.changes[p];h=="text"?Ha(o,s):h=="gutter"?ti(o,s,u,c):h=="class"?ns(o,s):h=="widget"&&xi(o,s,c)}s.changes=null}function Qo(o){return o.node==o.text&&(o.node=gt("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),U&&S<8&&(o.node.style.zIndex=2)),o.node}function Ci(o,s){var u=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(u&&(u+=" CodeMirror-linebackground"),s.background)u?s.background.className=u:(s.background.parentNode.removeChild(s.background),s.background=null);else if(u){var c=Qo(s);s.background=c.insertBefore(gt("div",null,u),c.firstChild),o.display.input.setUneditable(s.background)}}function $s(o,s){var u=o.display.externalMeasured;return u&&u.line==s.line?(o.display.externalMeasured=null,s.measure=u.measure,u.built):Xi(o,s)}function Ha(o,s){var u=s.text.className,c=$s(o,s);s.text==s.node&&(s.node=c.pre),s.text.parentNode.replaceChild(c.pre,s.text),s.text=c.pre,c.bgClass!=s.bgClass||c.textClass!=s.textClass?(s.bgClass=c.bgClass,s.textClass=c.textClass,ns(o,s)):u&&(s.text.className=u)}function ns(o,s){Ci(o,s),s.line.wrapClass?Qo(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var u=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=u||""}function ti(o,s,u,c){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var p=Qo(s);s.gutterBackground=gt("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),o.display.input.setUneditable(s.gutterBackground),p.insertBefore(s.gutterBackground,s.text)}var h=s.line.gutterMarkers;if(o.options.lineNumbers||h){var m=Qo(s),b=s.gutter=gt("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(b.setAttribute("aria-hidden","true"),o.display.input.setUneditable(b),m.insertBefore(b,s.text),s.line.gutterClass&&(b.className+=" "+s.line.gutterClass),!o.options.lineNumbers||h&&h["CodeMirror-linenumbers"]||(s.lineNumber=b.appendChild(gt("div",Ko(o.options,u),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),h)for(var x=0;x<o.display.gutterSpecs.length;++x){var k=o.display.gutterSpecs[x].className,$=h.hasOwnProperty(k)&&h[k];$&&b.appendChild(gt("div",[$],"CodeMirror-gutter-elt","left: "+c.gutterLeft[k]+"px; width: "+c.gutterWidth[k]+"px"))}}}function xi(o,s,u){s.alignable&&(s.alignable=null);for(var c=I("CodeMirror-linewidget"),p=s.node.firstChild,h=void 0;p;p=h)h=p.nextSibling,c.test(p.className)&&s.node.removeChild(p);Ra(o,s,u)}function qs(o,s,u,c){var p=$s(o,s);return s.text=s.node=p.pre,p.bgClass&&(s.bgClass=p.bgClass),p.textClass&&(s.textClass=p.textClass),ns(o,s),ti(o,s,u,c),Ra(o,s,c),s.node}function Ra(o,s,u){if(rs(o,s.line,s,u,!0),s.rest)for(var c=0;c<s.rest.length;c++)rs(o,s.rest[c],s,u,!1)}function rs(o,s,u,c,p){if(s.widgets)for(var h=Qo(u),m=0,b=s.widgets;m<b.length;++m){var x=b[m],k=gt("div",[x.node],"CodeMirror-linewidget"+(x.className?" "+x.className:""));x.handleMouseEvents||k.setAttribute("cm-ignore-events","true"),Dl(x,k,u,c),o.display.input.setUneditable(k),p&&x.above?h.insertBefore(k,u.gutter||u.text):h.appendChild(k),xn(x,"redraw")}}function Dl(o,s,u,c){if(o.noHScroll){(u.alignable||(u.alignable=[])).push(s);var p=c.wrapperWidth;s.style.left=c.fixedPos+"px",o.coverGutter||(p-=c.gutterTotalWidth,s.style.paddingLeft=c.gutterTotalWidth+"px"),s.style.width=p+"px"}o.coverGutter&&(s.style.zIndex=5,s.style.position="relative",o.noHScroll||(s.style.marginLeft=-c.gutterTotalWidth+"px"))}function C(o){if(o.height!=null)return o.height;var s=o.doc.cm;if(!s)return 0;if(!Lt(document.body,o.node)){var u="position: relative;";o.coverGutter&&(u+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),o.noHScroll&&(u+="width: "+s.display.wrapper.clientWidth+"px;"),Q(s.display.measure,gt("div",[o.node],null,u))}return o.height=o.node.parentNode.offsetHeight}function L(o,s){for(var u=Nr(s);u!=o.wrapper;u=u.parentNode)if(!u||u.nodeType==1&&u.getAttribute("cm-ignore-events")=="true"||u.parentNode==o.sizer&&u!=o.mover)return!0}function J(o){return o.lineSpace.offsetTop}function nt(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function wt(o){if(o.cachedPaddingH)return o.cachedPaddingH;var s=Q(o.measure,gt("pre","x","CodeMirror-line-like")),u=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,c={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight)};return isNaN(c.left)||isNaN(c.right)||(o.cachedPaddingH=c),c}function ft(o){return ae-o.display.nativeBarWidth}function Vt(o){return o.display.scroller.clientWidth-ft(o)-o.display.barWidth}function Jt(o){return o.display.scroller.clientHeight-ft(o)-o.display.barHeight}function De(o,s,u){var c=o.options.lineWrapping,p=c&&Vt(o);if(!s.measure.heights||c&&s.measure.width!=p){var h=s.measure.heights=[];if(c){s.measure.width=p;for(var m=s.text.firstChild.getClientRects(),b=0;b<m.length-1;b++){var x=m[b],k=m[b+1];Math.abs(x.bottom-k.bottom)>2&&h.push((x.bottom+k.top)/2-u.top)}}h.push(u.bottom-u.top)}}function qe(o,s,u){if(o.line==s)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var c=0;c<o.rest.length;c++)if(o.rest[c]==s)return{map:o.measure.maps[c],cache:o.measure.caches[c]};for(var p=0;p<o.rest.length;p++)if(en(o.rest[p])>u)return{map:o.measure.maps[p],cache:o.measure.caches[p],before:!0}}}function vn(o,s){var u=en(s=jr(s)),c=o.display.externalMeasured=new Qi(o.doc,s,u);c.lineN=u;var p=c.built=Xi(o,c);return c.text=p.pre,Q(o.display.lineMeasure,p.pre),c}function Wr(o,s,u,c){return $r(o,Do(o,s),u,c)}function os(o,s){if(s>=o.display.viewFrom&&s<o.display.viewTo)return o.display.view[Oi(o,s)];var u=o.display.externalMeasured;return u&&s>=u.lineN&&s<u.lineN+u.size?u:void 0}function Do(o,s){var u=en(s),c=os(o,u);c&&!c.text?c=null:c&&c.changes&&(Ws(o,c,u,Rl(o)),o.curOp.forceUpdate=!0),c||(c=vn(o,s));var p=qe(c,s,u);return{line:s,view:c,rect:null,map:p.map,cache:p.cache,before:p.before,hasHeights:!1}}function $r(o,s,u,c,p){s.before&&(u=-1);var h,m=u+(c||"");return s.cache.hasOwnProperty(m)?h=s.cache[m]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(De(o,s.view,s.rect),s.hasHeights=!0),(h=xp(o,s,u,c)).bogus||(s.cache[m]=h)),{left:h.left,right:h.right,top:p?h.rtop:h.top,bottom:p?h.rbottom:h.bottom}}var No,Uc={left:0,right:0,top:0,bottom:0};function Gs(o,s,u){for(var c,p,h,m,b,x,k=0;k<o.length;k+=3)if(b=o[k],x=o[k+1],s<b?(p=0,h=1,m="left"):s<x?h=(p=s-b)+1:(k==o.length-3||s==x&&o[k+3]>s)&&(p=(h=x-b)-1,s>=x&&(m="right")),p!=null){if(c=o[k+2],b==x&&u==(c.insertLeft?"left":"right")&&(m=u),u=="left"&&p==0)for(;k&&o[k-2]==o[k-3]&&o[k-1].insertLeft;)c=o[(k-=3)+2],m="left";if(u=="right"&&p==x-b)for(;k<o.length-3&&o[k+3]==o[k+4]&&!o[k+5].insertLeft;)c=o[(k+=3)+2],m="right";break}return{node:c,start:p,end:h,collapse:m,coverStart:b,coverEnd:x}}function Wc(o,s){var u=Uc;if(s=="left")for(var c=0;c<o.length&&(u=o[c]).left==u.right;c++);else for(var p=o.length-1;p>=0&&(u=o[p]).left==u.right;p--);return u}function xp(o,s,u,c){var p,h=Gs(s.map,u,c),m=h.node,b=h.start,x=h.end,k=h.collapse;if(m.nodeType==3){for(var $=0;$<4;$++){for(;b&&H(s.line.text.charAt(h.coverStart+b));)--b;for(;h.coverStart+x<h.coverEnd&&H(s.line.text.charAt(h.coverStart+x));)++x;if((p=U&&S<9&&b==0&&x==h.coverEnd-h.coverStart?m.parentNode.getBoundingClientRect():Wc(W(m,b,x).getClientRects(),c)).left||p.right||b==0)break;x=b,b-=1,k="right"}U&&S<11&&(p=Sp(o.display.measure,p))}else{var K;b>0&&(k=c="right"),p=o.options.lineWrapping&&(K=m.getClientRects()).length>1?K[c=="right"?K.length-1:0]:m.getBoundingClientRect()}if(U&&S<9&&!b&&(!p||!p.left&&!p.right)){var vt=m.parentNode.getClientRects()[0];p=vt?{left:vt.left,right:vt.left+ei(o.display),top:vt.top,bottom:vt.bottom}:Uc}for(var mt=p.top-s.rect.top,Ot=p.bottom-s.rect.top,zt=(mt+Ot)/2,Kt=s.view.measure.heights,se=0;se<Kt.length-1&&!(zt<Kt[se]);se++);var fe=se?Kt[se-1]:0,re=Kt[se],xe={left:(k=="right"?p.right:p.left)-s.rect.left,right:(k=="left"?p.left:p.right)-s.rect.left,top:fe,bottom:re};return p.left||p.right||(xe.bogus=!0),o.options.singleCursorHeightPerLine||(xe.rtop=mt,xe.rbottom=Ot),xe}function Sp(o,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!lo(o))return s;var u=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*u,right:s.right*u,top:s.top*c,bottom:s.bottom*c}}function $c(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var s=0;s<o.rest.length;s++)o.measure.caches[s]={}}function za(o){o.display.externalMeasure=null,bt(o.display.lineMeasure);for(var s=0;s<o.display.view.length;s++)$c(o.display.view[s])}function is(o){za(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function Nl(){return M&&ne?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function qc(){return M&&ne?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ba(o){var s=jr(o).widgets,u=0;if(s)for(var c=0;c<s.length;++c)s[c].above&&(u+=C(s[c]));return u}function Ua(o,s,u,c,p){if(!p){var h=Ba(s);u.top+=h,u.bottom+=h}if(c=="line")return u;c||(c="local");var m=Br(s);if(c=="local"?m+=J(o.display):m-=o.display.viewOffset,c=="page"||c=="window"){var b=o.display.lineSpace.getBoundingClientRect();m+=b.top+(c=="window"?0:qc());var x=b.left+(c=="window"?0:Nl());u.left+=x,u.right+=x}return u.top+=m,u.bottom+=m,u}function Il(o,s,u){if(u=="div")return s;var c=s.left,p=s.top;if(u=="page")c-=Nl(),p-=qc();else if(u=="local"||!u){var h=o.display.sizer.getBoundingClientRect();c+=h.left,p+=h.top}var m=o.display.lineSpace.getBoundingClientRect();return{left:c-m.left,top:p-m.top}}function Wa(o,s,u,c,p){return c||(c=be(o.doc,s.line)),Ua(o,c,Wr(o,c,s.ch,p),u)}function Lr(o,s,u,c,p,h){function m(Ot,zt){var Kt=$r(o,p,Ot,zt?"right":"left",h);return zt?Kt.left=Kt.right:Kt.right=Kt.left,Ua(o,c,Kt,u)}c=c||be(o.doc,s.line),p||(p=Do(o,c));var b=ze(c,o.doc.direction),x=s.ch,k=s.sticky;if(x>=c.text.length?(x=c.text.length,k="before"):x<=0&&(x=0,k="after"),!b)return m(k=="before"?x-1:x,k=="before");function $(Ot,zt,Kt){return m(Kt?Ot-1:Ot,b[zt].level==1!=Kt)}var K=ge(b,x,k),vt=Xt,mt=$(x,K,k=="before");return vt!=null&&(mt.other=$(x,vt,k!="before")),mt}function $a(o,s){var u=0;s=le(o.doc,s),o.options.lineWrapping||(u=ei(o.display)*s.ch);var c=be(o.doc,s.line),p=Br(c)+J(o.display);return{left:u,right:u,top:p,bottom:p+c.height}}function Vl(o,s,u,c,p){var h=$t(o,s,u);return h.xRel=p,c&&(h.outside=c),h}function Fl(o,s,u){var c=o.doc;if((u+=o.display.viewOffset)<0)return Vl(c.first,0,null,-1,-1);var p=Bn(c,u),h=c.first+c.size-1;if(p>h)return Vl(c.first+c.size-1,be(c,h).text.length,null,1,1);s<0&&(s=0);for(var m=be(c,p);;){var b=Hl(o,m,p,s,u),x=Ki(m,b.ch+(b.xRel>0||b.outside>0?1:0));if(!x)return b;var k=x.find(1);if(k.line==p)return k;m=be(c,p=k.line)}}function Gc(o,s,u,c){c-=Ba(s);var p=s.text.length,h=St(function(m){return $r(o,u,m-1).bottom<=c},p,0);return{begin:h,end:p=St(function(m){return $r(o,u,m).top>c},h,p)}}function Kc(o,s,u,c){return u||(u=Do(o,s)),Gc(o,s,u,Ua(o,s,$r(o,u,c),"line").top)}function ss(o,s,u,c){return!(o.bottom<=u)&&(o.top>u||(c?o.left:o.right)>s)}function Hl(o,s,u,c,p){p-=Br(s);var h=Do(o,s),m=Ba(s),b=0,x=s.text.length,k=!0,$=ze(s,o.doc.direction);if($){var K=(o.options.lineWrapping?ls:as)(o,s,u,h,$,c,p);b=(k=K.level!=1)?K.from:K.to-1,x=k?K.to:K.from-1}var vt,mt,Ot=null,zt=null,Kt=St(function(we){var Ee=$r(o,h,we);return Ee.top+=m,Ee.bottom+=m,!!ss(Ee,c,p,!1)&&(Ee.top<=p&&Ee.left<=c&&(Ot=we,zt=Ee),!0)},b,x),se=!1;if(zt){var fe=c-zt.left<zt.right-c,re=fe==k;Kt=Ot+(re?0:1),mt=re?"after":"before",vt=fe?zt.left:zt.right}else{k||Kt!=x&&Kt!=b||Kt++,mt=Kt==0?"after":Kt==s.text.length?"before":$r(o,h,Kt-(k?1:0)).bottom+m<=p==k?"after":"before";var xe=Lr(o,$t(u,Kt,mt),"line",s,h);vt=xe.left,se=p<xe.top?-1:p>=xe.bottom?1:0}return Vl(u,Kt=ct(s.text,Kt,1),mt,se,c-vt)}function as(o,s,u,c,p,h,m){var b=St(function(K){var vt=p[K],mt=vt.level!=1;return ss(Lr(o,$t(u,mt?vt.to:vt.from,mt?"before":"after"),"line",s,c),h,m,!0)},0,p.length-1),x=p[b];if(b>0){var k=x.level!=1,$=Lr(o,$t(u,k?x.from:x.to,k?"after":"before"),"line",s,c);ss($,h,m,!0)&&$.top>m&&(x=p[b-1])}return x}function ls(o,s,u,c,p,h,m){var b=Gc(o,s,c,m),x=b.begin,k=b.end;/\s/.test(s.text.charAt(k-1))&&k--;for(var $=null,K=null,vt=0;vt<p.length;vt++){var mt=p[vt];if(!(mt.from>=k||mt.to<=x)){var Ot=$r(o,c,mt.level!=1?Math.min(k,mt.to)-1:Math.max(x,mt.from)).right,zt=Ot<h?h-Ot+1e9:Ot-h;(!$||K>zt)&&($=mt,K=zt)}}return $||($=p[p.length-1]),$.from<x&&($={from:x,to:$.to,level:$.level}),$.to>k&&($={from:$.from,to:k,level:$.level}),$}function po(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(No==null){No=gt("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)No.appendChild(document.createTextNode("x")),No.appendChild(gt("br"));No.appendChild(document.createTextNode("x"))}Q(o.measure,No);var u=No.offsetHeight/50;return u>3&&(o.cachedTextHeight=u),bt(o.measure),u||1}function ei(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var s=gt("span","xxxxxxxxxx"),u=gt("pre",[s],"CodeMirror-line-like");Q(o.measure,u);var c=s.getBoundingClientRect(),p=(c.right-c.left)/10;return p>2&&(o.cachedCharWidth=p),p||10}function Rl(o){for(var s=o.display,u={},c={},p=s.gutters.clientLeft,h=s.gutters.firstChild,m=0;h;h=h.nextSibling,++m){var b=o.display.gutterSpecs[m].className;u[b]=h.offsetLeft+h.clientLeft+p,c[b]=h.clientWidth}return{fixedPos:zl(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:u,gutterWidth:c,wrapperWidth:s.wrapper.clientWidth}}function zl(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function Yc(o){var s=po(o.display),u=o.options.lineWrapping,c=u&&Math.max(5,o.display.scroller.clientWidth/ei(o.display)-3);return function(p){if(zr(o.doc,p))return 0;var h=0;if(p.widgets)for(var m=0;m<p.widgets.length;m++)p.widgets[m].height&&(h+=p.widgets[m].height);return u?h+(Math.ceil(p.text.length/c)||1)*s:h+s}}function Bl(o){var s=o.doc,u=Yc(o);s.iter(function(c){var p=u(c);p!=c.height&&cr(c,p)})}function Si(o,s,u,c){var p=o.display;if(!u&&Nr(s).getAttribute("cm-not-content")=="true")return null;var h,m,b=p.lineSpace.getBoundingClientRect();try{h=s.clientX-b.left,m=s.clientY-b.top}catch{return null}var x,k=Fl(o,h,m);if(c&&k.xRel>0&&(x=be(o.doc,k.line).text).length==k.ch){var $=Ce(x,x.length,o.options.tabSize)-x.length;k=$t(k.line,Math.max(0,Math.round((h-wt(o.display).left)/ei(o.display))-$))}return k}function Oi(o,s){if(s>=o.display.viewTo||(s-=o.display.viewFrom)<0)return null;for(var u=o.display.view,c=0;c<u.length;c++)if((s-=u[c].size)<0)return c}function or(o,s,u,c){s==null&&(s=o.doc.first),u==null&&(u=o.doc.first+o.doc.size),c||(c=0);var p=o.display;if(c&&u<p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>s)&&(p.updateLineNumbers=s),o.curOp.viewChanged=!0,s>=p.viewTo)ro&&vr(o.doc,s)<p.viewTo&&ni(o);else if(u<=p.viewFrom)ro&&Rr(o.doc,u+c)>p.viewFrom?ni(o):(p.viewFrom+=c,p.viewTo+=c);else if(s<=p.viewFrom&&u>=p.viewTo)ni(o);else if(s<=p.viewFrom){var h=qa(o,u,u+c,1);h?(p.view=p.view.slice(h.index),p.viewFrom=h.lineN,p.viewTo+=c):ni(o)}else if(u>=p.viewTo){var m=qa(o,s,s,-1);m?(p.view=p.view.slice(0,m.index),p.viewTo=m.lineN):ni(o)}else{var b=qa(o,s,s,-1),x=qa(o,u,u+c,1);b&&x?(p.view=p.view.slice(0,b.index).concat(uo(o,b.lineN,x.lineN)).concat(p.view.slice(x.index)),p.viewTo+=c):ni(o)}var k=p.externalMeasured;k&&(u<k.lineN?k.lineN+=c:s<k.lineN+k.size&&(p.externalMeasured=null))}function fo(o,s,u){o.curOp.viewChanged=!0;var c=o.display,p=o.display.externalMeasured;if(p&&s>=p.lineN&&s<p.lineN+p.size&&(c.externalMeasured=null),!(s<c.viewFrom||s>=c.viewTo)){var h=c.view[Oi(o,s)];if(h.node!=null){var m=h.changes||(h.changes=[]);me(m,u)==-1&&m.push(u)}}}function ni(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function qa(o,s,u,c){var p,h=Oi(o,s),m=o.display.view;if(!ro||u==o.doc.first+o.doc.size)return{index:h,lineN:u};for(var b=o.display.viewFrom,x=0;x<h;x++)b+=m[x].size;if(b!=s){if(c>0){if(h==m.length-1)return null;p=b+m[h].size-s,h++}else p=b-s;s+=p,u+=p}for(;vr(o.doc,u)!=u;){if(h==(c<0?0:m.length-1))return null;u+=c*m[h-(c<0?1:0)].size,h+=c}return{index:h,lineN:u}}function Op(o,s,u){var c=o.display;c.view.length==0||s>=c.viewTo||u<=c.viewFrom?(c.view=uo(o,s,u),c.viewFrom=s):(c.viewFrom>s?c.view=uo(o,s,c.viewFrom).concat(c.view):c.viewFrom<s&&(c.view=c.view.slice(Oi(o,s))),c.viewFrom=s,c.viewTo<u?c.view=c.view.concat(uo(o,c.viewTo,u)):c.viewTo>u&&(c.view=c.view.slice(0,Oi(o,u)))),c.viewTo=u}function Jc(o){for(var s=o.display.view,u=0,c=0;c<s.length;c++){var p=s[c];p.hidden||p.node&&!p.changes||++u}return u}function Ks(o){o.display.input.showSelection(o.display.input.prepareSelection())}function Ys(o,s){s===void 0&&(s=!0);var u=o.doc,c={},p=c.cursors=document.createDocumentFragment(),h=c.selection=document.createDocumentFragment(),m=o.options.$customCursor;m&&(s=!0);for(var b=0;b<u.sel.ranges.length;b++)if(s||b!=u.sel.primIndex){var x=u.sel.ranges[b];if(!(x.from().line>=o.display.viewTo||x.to().line<o.display.viewFrom)){var k=x.empty();if(m){var $=m(o,x);$&&Js(o,$,p)}else(k||o.options.showCursorWhenSelecting)&&Js(o,x.head,p);k||Tp(o,x,h)}}return c}function Js(o,s,u){var c=Lr(o,s,"div",null,null,!o.options.singleCursorHeightPerLine),p=u.appendChild(gt("div"," ","CodeMirror-cursor"));if(p.style.left=c.left+"px",p.style.top=c.top+"px",p.style.height=Math.max(0,c.bottom-c.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)){var h=Wa(o,s,"div",null,null),m=h.right-h.left;p.style.width=(m>0?m:o.defaultCharWidth())+"px"}if(c.other){var b=u.appendChild(gt("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));b.style.display="",b.style.left=c.other.left+"px",b.style.top=c.other.top+"px",b.style.height=.85*(c.other.bottom-c.other.top)+"px"}}function Xs(o,s){return o.top-s.top||o.left-s.left}function Tp(o,s,u){var c=o.display,p=o.doc,h=document.createDocumentFragment(),m=wt(o.display),b=m.left,x=Math.max(c.sizerWidth,Vt(o)-c.sizer.offsetLeft)-m.right,k=p.direction=="ltr";function $(re,xe,we,Ee){xe<0&&(xe=0),xe=Math.round(xe),Ee=Math.round(Ee),h.appendChild(gt("div",null,"CodeMirror-selected","position: absolute; left: "+re+`px;
                             top: `+xe+"px; width: "+(we??x-re)+`px;
                             height: `+(Ee-xe)+"px"))}function K(re,xe,we){var Ee,dn,hn=be(p,re),wr=hn.text.length;function wn(kn,Nn){return Wa(o,$t(re,kn),"div",hn,Nn)}function pr(kn,Nn,yr){var Wn=Kc(o,hn,null,kn),In=Nn=="ltr"==(yr=="after")?"left":"right";return wn(yr=="after"?Wn.begin:Wn.end-(/\s/.test(hn.text.charAt(Wn.end-1))?2:1),In)[In]}var _r=ze(hn,p.direction);return Ct(_r,xe||0,we??wr,function(kn,Nn,yr,Wn){var In=yr=="ltr",Vn=wn(kn,In?"left":"right"),Cr=wn(Nn-1,In?"right":"left"),ai=xe==null&&kn==0,mo=we==null&&Nn==wr,fr=Wn==0,En=!_r||Wn==_r.length-1;if(Cr.top-Vn.top<=3){var Sc=(k?mo:ai)&&En,Bo=(k?ai:mo)&&fr?b:(In?Vn:Cr).left,Vi=Sc?x:(In?Cr:Vn).right;$(Bo,Vn.top,Vi-Bo,Vn.bottom)}else{var Fi,qn,ks,Oc;In?(Fi=k&&ai&&fr?b:Vn.left,qn=k?x:pr(kn,yr,"before"),ks=k?b:pr(Nn,yr,"after"),Oc=k&&mo&&En?x:Cr.right):(Fi=k?pr(kn,yr,"before"):b,qn=!k&&ai&&fr?x:Vn.right,ks=!k&&mo&&En?b:Cr.left,Oc=k?pr(Nn,yr,"after"):x),$(Fi,Vn.top,qn-Fi,Vn.bottom),Vn.bottom<Cr.top&&$(b,Vn.bottom,null,Cr.top),$(ks,Cr.top,Oc-ks,Cr.bottom)}(!Ee||Xs(Vn,Ee)<0)&&(Ee=Vn),Xs(Cr,Ee)<0&&(Ee=Cr),(!dn||Xs(Vn,dn)<0)&&(dn=Vn),Xs(Cr,dn)<0&&(dn=Cr)}),{start:Ee,end:dn}}var vt=s.from(),mt=s.to();if(vt.line==mt.line)K(vt.line,vt.ch,mt.ch);else{var Ot=be(p,vt.line),zt=be(p,mt.line),Kt=jr(Ot)==jr(zt),se=K(vt.line,vt.ch,Kt?Ot.text.length+1:null).end,fe=K(mt.line,Kt?0:null,mt.ch).start;Kt&&(se.top<fe.top-2?($(se.right,se.top,null,se.bottom),$(b,fe.top,fe.left,fe.bottom)):$(se.right,se.top,fe.left-se.right,se.bottom)),se.bottom<fe.top&&$(b,se.bottom,null,fe.top)}u.appendChild(h)}function cs(o){if(o.state.focused){var s=o.display;clearInterval(s.blinker);var u=!0;s.cursorDiv.style.visibility="",o.options.cursorBlinkRate>0?s.blinker=setInterval(function(){o.hasFocus()||Ti(o),s.cursorDiv.style.visibility=(u=!u)?"":"hidden"},o.options.cursorBlinkRate):o.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function Xc(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||Wl(o))}function Ul(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&Ti(o))},100)}function Wl(o,s){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||(ht(o,"focus",o,s),o.state.focused=!0,Yt(o.display.wrapper,"CodeMirror-focused"),o.curOp||o.display.selForContextMenu==o.doc.sel||(o.display.input.reset(),E&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),cs(o))}function Ti(o,s){o.state.delayingBlurEvent||(o.state.focused&&(ht(o,"blur",o,s),o.state.focused=!1,Z(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function Ga(o){for(var s=o.display,u=s.lineDiv.offsetTop,c=Math.max(0,s.scroller.getBoundingClientRect().top),p=s.lineDiv.getBoundingClientRect().top,h=0,m=0;m<s.view.length;m++){var b=s.view[m],x=o.options.lineWrapping,k=void 0,$=0;if(!b.hidden){if(p+=b.line.height,U&&S<8){var K=b.node.offsetTop+b.node.offsetHeight;k=K-u,u=K}else{var vt=b.node.getBoundingClientRect();k=vt.bottom-vt.top,!x&&b.text.firstChild&&($=b.text.firstChild.getBoundingClientRect().right-vt.left-1)}var mt=b.line.height-k;if((mt>.005||mt<-.005)&&(p<c&&(h-=mt),cr(b.line,k),Zs(b.line),b.rest))for(var Ot=0;Ot<b.rest.length;Ot++)Zs(b.rest[Ot]);if($>o.display.sizerWidth){var zt=Math.ceil($/ei(o.display));zt>o.display.maxLineLength&&(o.display.maxLineLength=zt,o.display.maxLine=b.line,o.display.maxLineChanged=!0)}}}Math.abs(h)>2&&(s.scroller.scrollTop+=h)}function Zs(o){if(o.widgets)for(var s=0;s<o.widgets.length;++s){var u=o.widgets[s],c=u.node.parentNode;c&&(u.height=c.offsetHeight)}}function Qs(o,s,u){var c=u&&u.top!=null?Math.max(0,u.top):o.scroller.scrollTop;c=Math.floor(c-J(o));var p=u&&u.bottom!=null?u.bottom:c+o.wrapper.clientHeight,h=Bn(s,c),m=Bn(s,p);if(u&&u.ensure){var b=u.ensure.from.line,x=u.ensure.to.line;b<h?(h=b,m=Bn(s,Br(be(s,b))+o.wrapper.clientHeight)):Math.min(x,s.lastLine())>=m&&(h=Bn(s,Br(be(s,x))-o.wrapper.clientHeight),m=x)}return{from:h,to:Math.max(m,h+1)}}function kp(o,s){if(!_t(o,"scrollCursorIntoView")){var u=o.display,c=u.sizer.getBoundingClientRect(),p=null;if(s.top+c.top<0?p=!0:s.bottom+c.top>(window.innerHeight||document.documentElement.clientHeight)&&(p=!1),p!=null&&!Mt){var h=gt("div","​",null,`position: absolute;
                         top: `+(s.top-u.viewOffset-J(o.display))+`px;
                         height: `+(s.bottom-s.top+ft(o)+u.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");o.display.lineSpace.appendChild(h),h.scrollIntoView(p),o.display.lineSpace.removeChild(h)}}}function $l(o,s,u,c){var p;c==null&&(c=0),o.options.lineWrapping||s!=u||(u=s.sticky=="before"?$t(s.line,s.ch+1,"before"):s,s=s.ch?$t(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var h=0;h<5;h++){var m=!1,b=Lr(o,s),x=u&&u!=s?Lr(o,u):b,k=ql(o,p={left:Math.min(b.left,x.left),top:Math.min(b.top,x.top)-c,right:Math.max(b.left,x.left),bottom:Math.max(b.bottom,x.bottom)+c}),$=o.doc.scrollTop,K=o.doc.scrollLeft;if(k.scrollTop!=null&&(ea(o,k.scrollTop),Math.abs(o.doc.scrollTop-$)>1&&(m=!0)),k.scrollLeft!=null&&(Io(o,k.scrollLeft),Math.abs(o.doc.scrollLeft-K)>1&&(m=!0)),!m)break}return p}function Ep(o,s){var u=ql(o,s);u.scrollTop!=null&&ea(o,u.scrollTop),u.scrollLeft!=null&&Io(o,u.scrollLeft)}function ql(o,s){var u=o.display,c=po(o.display);s.top<0&&(s.top=0);var p=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:u.scroller.scrollTop,h=Jt(o),m={};s.bottom-s.top>h&&(s.bottom=s.top+h);var b=o.doc.height+nt(u),x=s.top<c,k=s.bottom>b-c;if(s.top<p)m.scrollTop=x?0:s.top;else if(s.bottom>p+h){var $=Math.min(s.top,(k?b:s.bottom)-h);$!=p&&(m.scrollTop=$)}var K=o.options.fixedGutter?0:u.gutters.offsetWidth,vt=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:u.scroller.scrollLeft-K,mt=Vt(o)-u.gutters.offsetWidth,Ot=s.right-s.left>mt;return Ot&&(s.right=s.left+mt),s.left<10?m.scrollLeft=0:s.left<vt?m.scrollLeft=Math.max(0,s.left+K-(Ot?0:10)):s.right>mt+vt-3&&(m.scrollLeft=s.right+(Ot?0:10)-mt),m}function Ka(o,s){s!=null&&(ki(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+s)}function us(o){ki(o);var s=o.getCursor();o.curOp.scrollToPos={from:s,to:s,margin:o.options.cursorScrollMargin}}function ta(o,s,u){s==null&&u==null||ki(o),s!=null&&(o.curOp.scrollLeft=s),u!=null&&(o.curOp.scrollTop=u)}function Pp(o,s){ki(o),o.curOp.scrollToPos=s}function ki(o){var s=o.curOp.scrollToPos;s&&(o.curOp.scrollToPos=null,Zc(o,$a(o,s.from),$a(o,s.to),s.margin))}function Zc(o,s,u,c){var p=ql(o,{left:Math.min(s.left,u.left),top:Math.min(s.top,u.top)-c,right:Math.max(s.right,u.right),bottom:Math.max(s.bottom,u.bottom)+c});ta(o,p.scrollLeft,p.scrollTop)}function ea(o,s){Math.abs(o.doc.scrollTop-s)<2||(et||Kl(o,{top:s}),na(o,s,!0),et&&Kl(o),fs(o,100))}function na(o,s,u){s=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,s)),(o.display.scroller.scrollTop!=s||u)&&(o.doc.scrollTop=s,o.display.scrollbars.setScrollTop(s),o.display.scroller.scrollTop!=s&&(o.display.scroller.scrollTop=s))}function Io(o,s,u,c){s=Math.max(0,Math.min(s,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),(u?s==o.doc.scrollLeft:Math.abs(o.doc.scrollLeft-s)<2)&&!c||(o.doc.scrollLeft=s,sa(o),o.display.scroller.scrollLeft!=s&&(o.display.scroller.scrollLeft=s),o.display.scrollbars.setScrollLeft(s))}function ra(o){var s=o.display,u=s.gutters.offsetWidth,c=Math.round(o.doc.height+nt(o.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:o.options.fixedGutter?u:0,docHeight:c,scrollHeight:c+ft(o)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:u}}var Ei=function(o,s,u){this.cm=u;var c=this.vert=gt("div",[gt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=gt("div",[gt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=p.tabIndex=-1,o(c),o(p),Qt(c,"scroll",function(){c.clientHeight&&s(c.scrollTop,"vertical")}),Qt(p,"scroll",function(){p.clientWidth&&s(p.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,U&&S<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ei.prototype.update=function(o){var s=o.scrollWidth>o.clientWidth+1,u=o.scrollHeight>o.clientHeight+1,c=o.nativeBarWidth;if(u){this.vert.style.display="block",this.vert.style.bottom=s?c+"px":"0";var p=o.viewHeight-(s?c:0);this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+p)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=u?c+"px":"0",this.horiz.style.left=o.barLeft+"px";var h=o.viewWidth-o.barLeft-(u?c:0);this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+h)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&o.clientHeight>0&&(c==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:u?c:0,bottom:s?c:0}},Ei.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ei.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ei.prototype.zeroWidthHack=function(){var o=pt&&!Et?"12px":"18px";this.horiz.style.height=this.vert.style.width=o,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Pe,this.disableVert=new Pe},Ei.prototype.enableZeroWidthBar=function(o,s,u){function c(){var p=o.getBoundingClientRect();(u=="vert"?document.elementFromPoint(p.right-1,(p.top+p.bottom)/2):document.elementFromPoint((p.right+p.left)/2,p.bottom-1))!=o?o.style.visibility="hidden":s.set(1e3,c)}o.style.visibility="",s.set(1e3,c)},Ei.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var oa=function(){};function ps(o,s){s||(s=ra(o));var u=o.display.barWidth,c=o.display.barHeight;qr(o,s);for(var p=0;p<4&&u!=o.display.barWidth||c!=o.display.barHeight;p++)u!=o.display.barWidth&&o.options.lineWrapping&&Ga(o),qr(o,ra(o)),u=o.display.barWidth,c=o.display.barHeight}function qr(o,s){var u=o.display,c=u.scrollbars.update(s);u.sizer.style.paddingRight=(u.barWidth=c.right)+"px",u.sizer.style.paddingBottom=(u.barHeight=c.bottom)+"px",u.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(u.scrollbarFiller.style.display="block",u.scrollbarFiller.style.height=c.bottom+"px",u.scrollbarFiller.style.width=c.right+"px"):u.scrollbarFiller.style.display="",c.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(u.gutterFiller.style.display="block",u.gutterFiller.style.height=c.bottom+"px",u.gutterFiller.style.width=s.gutterWidth+"px"):u.gutterFiller.style.display=""}oa.prototype.update=function(){return{bottom:0,right:0}},oa.prototype.setScrollLeft=function(){},oa.prototype.setScrollTop=function(){},oa.prototype.clear=function(){};var Qc={native:Ei,null:oa};function tu(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&Z(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new Qc[o.options.scrollbarStyle](function(s){o.display.wrapper.insertBefore(s,o.display.scrollbarFiller),Qt(s,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,u){u=="horizontal"?Io(o,s):ea(o,s)},o),o.display.scrollbars.addClass&&Yt(o.display.wrapper,o.display.scrollbars.addClass)}var Ap=0;function Pi(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ap,markArrays:null},_i(o.curOp)}function Ai(o){var s=o.curOp;s&&es(s,function(u){for(var c=0;c<u.ops.length;c++)u.ops[c].cm.curOp=null;jp(u)})}function jp(o){for(var s=o.ops,u=0;u<s.length;u++)Mp(s[u]);for(var c=0;c<s.length;c++)Lp(s[c]);for(var p=0;p<s.length;p++)Dp(s[p]);for(var h=0;h<s.length;h++)ia(s[h]);for(var m=0;m<s.length;m++)Np(s[m])}function Mp(o){var s=o.cm,u=s.display;ji(s),o.updateMaxLine&&Bs(s),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<u.viewFrom||o.scrollToPos.to.line>=u.viewTo)||u.maxLineChanged&&s.options.lineWrapping,o.update=o.mustUpdate&&new Ya(s,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}function Lp(o){o.updatedDisplay=o.mustUpdate&&Gl(o.cm,o.update)}function Dp(o){var s=o.cm,u=s.display;o.updatedDisplay&&Ga(s),o.barMeasure=ra(s),u.maxLineChanged&&!s.options.lineWrapping&&(o.adjustWidthTo=Wr(s,u.maxLine,u.maxLine.text.length).left+3,s.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(u.scroller.clientWidth,u.sizer.offsetLeft+o.adjustWidthTo+ft(s)+s.display.barWidth),o.maxScrollLeft=Math.max(0,u.sizer.offsetLeft+o.adjustWidthTo-Vt(s))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=u.input.prepareSelection())}function ia(o){var s=o.cm;o.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<s.doc.scrollLeft&&Io(s,Math.min(s.display.scroller.scrollLeft,o.maxScrollLeft),!0),s.display.maxLineChanged=!1);var u=o.focus&&o.focus==Pt();o.preparedSelection&&s.display.input.showSelection(o.preparedSelection,u),(o.updatedDisplay||o.startHeight!=s.doc.height)&&ps(s,o.barMeasure),o.updatedDisplay&&Ja(s,o.barMeasure),o.selectionChanged&&cs(s),s.state.focused&&o.updateInput&&s.display.input.reset(o.typing),u&&Xc(o.cm)}function Np(o){var s=o.cm,u=s.display,c=s.doc;o.updatedDisplay&&eu(s,o.update),u.wheelStartX==null||o.scrollTop==null&&o.scrollLeft==null&&!o.scrollToPos||(u.wheelStartX=u.wheelStartY=null),o.scrollTop!=null&&na(s,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&Io(s,o.scrollLeft,!0,!0),o.scrollToPos&&kp(s,$l(s,le(c,o.scrollToPos.from),le(c,o.scrollToPos.to),o.scrollToPos.margin));var p=o.maybeHiddenMarkers,h=o.maybeUnhiddenMarkers;if(p)for(var m=0;m<p.length;++m)p[m].lines.length||ht(p[m],"hide");if(h)for(var b=0;b<h.length;++b)h[b].lines.length&&ht(h[b],"unhide");u.wrapper.offsetHeight&&(c.scrollTop=s.display.scroller.scrollTop),o.changeObjs&&ht(s,"changes",s,o.changeObjs),o.update&&o.update.finish()}function mr(o,s){if(o.curOp)return s();Pi(o);try{return s()}finally{Ai(o)}}function Zn(o,s){return function(){if(o.curOp)return s.apply(o,arguments);Pi(o);try{return s.apply(o,arguments)}finally{Ai(o)}}}function ur(o){return function(){if(this.curOp)return o.apply(this,arguments);Pi(this);try{return o.apply(this,arguments)}finally{Ai(this)}}}function Qn(o){return function(){var s=this.cm;if(!s||s.curOp)return o.apply(this,arguments);Pi(s);try{return o.apply(this,arguments)}finally{Ai(s)}}}function fs(o,s){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(s,Oe(Ip,o))}function Ip(o){var s=o.doc;if(!(s.highlightFrontier>=o.display.viewTo)){var u=+new Date+o.options.workTime,c=xo(o,s.highlightFrontier),p=[];s.iter(c.line,Math.min(s.first+s.size,o.display.viewTo+500),function(h){if(c.line>=o.display.viewFrom){var m=h.styles,b=h.text.length>o.options.maxHighlightLength?Jn(s.mode,c.state):null,x=Vs(o,h,c,!0);b&&(c.state=b),h.styles=x.styles;var k=h.styleClasses,$=x.classes;$?h.styleClasses=$:k&&(h.styleClasses=null);for(var K=!m||m.length!=h.styles.length||k!=$&&(!k||!$||k.bgClass!=$.bgClass||k.textClass!=$.textClass),vt=0;!K&&vt<m.length;++vt)K=m[vt]!=h.styles[vt];K&&p.push(c.line),h.stateAfter=c.save(),c.nextLine()}else h.text.length<=o.options.maxHighlightLength&&co(o,h.text,c),h.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>u)return fs(o,o.options.workDelay),!0}),s.highlightFrontier=c.line,s.modeFrontier=Math.max(s.modeFrontier,c.line),p.length&&mr(o,function(){for(var h=0;h<p.length;h++)fo(o,p[h],"text")})}}var Ya=function(o,s,u){var c=o.display;this.viewport=s,this.visible=Qs(c,o.doc,s),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=Vt(o),this.force=u,this.dims=Rl(o),this.events=[]};function ji(o){var s=o.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=ft(o)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=ft(o)+"px",s.scrollbarsClipped=!0)}function Vp(o){if(o.hasFocus())return null;var s=Pt();if(!s||!Lt(o.display.lineDiv,s))return null;var u={activeElt:s};if(window.getSelection){var c=window.getSelection();c.anchorNode&&c.extend&&Lt(o.display.lineDiv,c.anchorNode)&&(u.anchorNode=c.anchorNode,u.anchorOffset=c.anchorOffset,u.focusNode=c.focusNode,u.focusOffset=c.focusOffset)}return u}function Fp(o){if(o&&o.activeElt&&o.activeElt!=Pt()&&(o.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(o.activeElt.nodeName)&&o.anchorNode&&Lt(document.body,o.anchorNode)&&Lt(document.body,o.focusNode))){var s=window.getSelection(),u=document.createRange();u.setEnd(o.anchorNode,o.anchorOffset),u.collapse(!1),s.removeAllRanges(),s.addRange(u),s.extend(o.focusNode,o.focusOffset)}}function Gl(o,s){var u=o.display,c=o.doc;if(s.editorIsHidden)return ni(o),!1;if(!s.force&&s.visible.from>=u.viewFrom&&s.visible.to<=u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo)&&u.renderedView==u.view&&Jc(o)==0)return!1;ru(o)&&(ni(o),s.dims=Rl(o));var p=c.first+c.size,h=Math.max(s.visible.from-o.options.viewportMargin,c.first),m=Math.min(p,s.visible.to+o.options.viewportMargin);u.viewFrom<h&&h-u.viewFrom<20&&(h=Math.max(c.first,u.viewFrom)),u.viewTo>m&&u.viewTo-m<20&&(m=Math.min(p,u.viewTo)),ro&&(h=vr(o.doc,h),m=Rr(o.doc,m));var b=h!=u.viewFrom||m!=u.viewTo||u.lastWrapHeight!=s.wrapperHeight||u.lastWrapWidth!=s.wrapperWidth;Op(o,h,m),u.viewOffset=Br(be(o.doc,u.viewFrom)),o.display.mover.style.top=u.viewOffset+"px";var x=Jc(o);if(!b&&x==0&&!s.force&&u.renderedView==u.view&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo))return!1;var k=Vp(o);return x>4&&(u.lineDiv.style.display="none"),nu(o,u.updateLineNumbers,s.dims),x>4&&(u.lineDiv.style.display=""),u.renderedView=u.view,Fp(k),bt(u.cursorDiv),bt(u.selectionDiv),u.gutters.style.height=u.sizer.style.minHeight=0,b&&(u.lastWrapHeight=s.wrapperHeight,u.lastWrapWidth=s.wrapperWidth,fs(o,400)),u.updateLineNumbers=null,!0}function eu(o,s){for(var u=s.viewport,c=!0;;c=!1){if(c&&o.options.lineWrapping&&s.oldDisplayWidth!=Vt(o))c&&(s.visible=Qs(o.display,o.doc,u));else if(u&&u.top!=null&&(u={top:Math.min(o.doc.height+nt(o.display)-Jt(o),u.top)}),s.visible=Qs(o.display,o.doc,u),s.visible.from>=o.display.viewFrom&&s.visible.to<=o.display.viewTo)break;if(!Gl(o,s))break;Ga(o);var p=ra(o);Ks(o),ps(o,p),Ja(o,p),s.force=!1}s.signal(o,"update",o),o.display.viewFrom==o.display.reportedViewFrom&&o.display.viewTo==o.display.reportedViewTo||(s.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function Kl(o,s){var u=new Ya(o,s);if(Gl(o,u)){Ga(o),eu(o,u);var c=ra(o);Ks(o),ps(o,c),Ja(o,c),u.finish()}}function nu(o,s,u){var c=o.display,p=o.options.lineNumbers,h=c.lineDiv,m=h.firstChild;function b(Ot){var zt=Ot.nextSibling;return E&&pt&&o.display.currentWheelTarget==Ot?Ot.style.display="none":Ot.parentNode.removeChild(Ot),zt}for(var x=c.view,k=c.viewFrom,$=0;$<x.length;$++){var K=x[$];if(!K.hidden)if(K.node&&K.node.parentNode==h){for(;m!=K.node;)m=b(m);var vt=p&&s!=null&&s<=k&&K.lineNumber;K.changes&&(me(K.changes,"gutter")>-1&&(vt=!1),Ws(o,K,k,u)),vt&&(bt(K.lineNumber),K.lineNumber.appendChild(document.createTextNode(Ko(o.options,k)))),m=K.node.nextSibling}else{var mt=qs(o,K,k,u);h.insertBefore(mt,m)}k+=K.size}for(;m;)m=b(m)}function Yl(o){var s=o.gutters.offsetWidth;o.sizer.style.marginLeft=s+"px",xn(o,"gutterChanged",o)}function Ja(o,s){o.display.sizer.style.minHeight=s.docHeight+"px",o.display.heightForcer.style.top=s.docHeight+"px",o.display.gutters.style.height=s.docHeight+o.display.barHeight+ft(o)+"px"}function sa(o){var s=o.display,u=s.view;if(s.alignWidgets||s.gutters.firstChild&&o.options.fixedGutter){for(var c=zl(s)-s.scroller.scrollLeft+o.doc.scrollLeft,p=s.gutters.offsetWidth,h=c+"px",m=0;m<u.length;m++)if(!u[m].hidden){o.options.fixedGutter&&(u[m].gutter&&(u[m].gutter.style.left=h),u[m].gutterBackground&&(u[m].gutterBackground.style.left=h));var b=u[m].alignable;if(b)for(var x=0;x<b.length;x++)b[x].style.left=h}o.options.fixedGutter&&(s.gutters.style.left=c+p+"px")}}function ru(o){if(!o.options.lineNumbers)return!1;var s=o.doc,u=Ko(o.options,s.first+s.size-1),c=o.display;if(u.length!=c.lineNumChars){var p=c.measure.appendChild(gt("div",[gt("div",u)],"CodeMirror-linenumber CodeMirror-gutter-elt")),h=p.firstChild.offsetWidth,m=p.offsetWidth-h;return c.lineGutter.style.width="",c.lineNumInnerWidth=Math.max(h,c.lineGutter.offsetWidth-m)+1,c.lineNumWidth=c.lineNumInnerWidth+m,c.lineNumChars=c.lineNumInnerWidth?u.length:-1,c.lineGutter.style.width=c.lineNumWidth+"px",Yl(o.display),!0}return!1}function Xa(o,s){for(var u=[],c=!1,p=0;p<o.length;p++){var h=o[p],m=null;if(typeof h!="string"&&(m=h.style,h=h.className),h=="CodeMirror-linenumbers"){if(!s)continue;c=!0}u.push({className:h,style:m})}return s&&!c&&u.push({className:"CodeMirror-linenumbers",style:null}),u}function ou(o){var s=o.gutters,u=o.gutterSpecs;bt(s),o.lineGutter=null;for(var c=0;c<u.length;++c){var p=u[c],h=p.className,m=p.style,b=s.appendChild(gt("div",null,"CodeMirror-gutter "+h));m&&(b.style.cssText=m),h=="CodeMirror-linenumbers"&&(o.lineGutter=b,b.style.width=(o.lineNumWidth||1)+"px")}s.style.display=u.length?"":"none",Yl(o)}function ds(o){ou(o.display),or(o),sa(o)}function iu(o,s,u,c){var p=this;this.input=u,p.scrollbarFiller=gt("div",null,"CodeMirror-scrollbar-filler"),p.scrollbarFiller.setAttribute("cm-not-content","true"),p.gutterFiller=gt("div",null,"CodeMirror-gutter-filler"),p.gutterFiller.setAttribute("cm-not-content","true"),p.lineDiv=F("div",null,"CodeMirror-code"),p.selectionDiv=gt("div",null,null,"position: relative; z-index: 1"),p.cursorDiv=gt("div",null,"CodeMirror-cursors"),p.measure=gt("div",null,"CodeMirror-measure"),p.lineMeasure=gt("div",null,"CodeMirror-measure"),p.lineSpace=F("div",[p.measure,p.lineMeasure,p.selectionDiv,p.cursorDiv,p.lineDiv],null,"position: relative; outline: none");var h=F("div",[p.lineSpace],"CodeMirror-lines");p.mover=gt("div",[h],null,"position: relative"),p.sizer=gt("div",[p.mover],"CodeMirror-sizer"),p.sizerWidth=null,p.heightForcer=gt("div",null,null,"position: absolute; height: "+ae+"px; width: 1px;"),p.gutters=gt("div",null,"CodeMirror-gutters"),p.lineGutter=null,p.scroller=gt("div",[p.sizer,p.heightForcer,p.gutters],"CodeMirror-scroll"),p.scroller.setAttribute("tabIndex","-1"),p.wrapper=gt("div",[p.scrollbarFiller,p.gutterFiller,p.scroller],"CodeMirror"),p.wrapper.setAttribute("translate","no"),U&&S<8&&(p.gutters.style.zIndex=-1,p.scroller.style.paddingRight=0),E||et&&ut||(p.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(p.wrapper):o(p.wrapper)),p.viewFrom=p.viewTo=s.first,p.reportedViewFrom=p.reportedViewTo=s.first,p.view=[],p.renderedView=null,p.externalMeasured=null,p.viewOffset=0,p.lastWrapHeight=p.lastWrapWidth=0,p.updateLineNumbers=null,p.nativeBarWidth=p.barHeight=p.barWidth=0,p.scrollbarsClipped=!1,p.lineNumWidth=p.lineNumInnerWidth=p.lineNumChars=null,p.alignWidgets=!1,p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.maxLine=null,p.maxLineLength=0,p.maxLineChanged=!1,p.wheelDX=p.wheelDY=p.wheelStartX=p.wheelStartY=null,p.shift=!1,p.selForContextMenu=null,p.activeTouch=null,p.gutterSpecs=Xa(c.gutters,c.lineNumbers),ou(p),u.init(p)}Ya.prototype.signal=function(o,s){ye(o,s)&&this.events.push(arguments)},Ya.prototype.finish=function(){for(var o=0;o<this.events.length;o++)ht.apply(null,this.events[o])};var Za=0,Vo=null;function su(o){var s=o.wheelDeltaX,u=o.wheelDeltaY;return s==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(s=o.detail),u==null&&o.detail&&o.axis==o.VERTICAL_AXIS?u=o.detail:u==null&&(u=o.wheelDelta),{x:s,y:u}}function Hp(o){var s=su(o);return s.x*=Vo,s.y*=Vo,s}function au(o,s){M&&N>=102&&(o.display.chromeScrollHack==null?o.display.sizer.style.pointerEvents="none":clearTimeout(o.display.chromeScrollHack),o.display.chromeScrollHack=setTimeout(function(){o.display.chromeScrollHack=null,o.display.sizer.style.pointerEvents=""},100));var u=su(s),c=u.x,p=u.y,h=Vo;s.deltaMode===0&&(c=s.deltaX,p=s.deltaY,h=1);var m=o.display,b=m.scroller,x=b.scrollWidth>b.clientWidth,k=b.scrollHeight>b.clientHeight;if(c&&x||p&&k){if(p&&pt&&E){t:for(var $=s.target,K=m.view;$!=b;$=$.parentNode)for(var vt=0;vt<K.length;vt++)if(K[vt].node==$){o.display.currentWheelTarget=$;break t}}if(c&&!et&&!it&&h!=null)return p&&k&&ea(o,Math.max(0,b.scrollTop+p*h)),Io(o,Math.max(0,b.scrollLeft+c*h)),(!p||p&&k)&&Xe(s),void(m.wheelStartX=null);if(p&&h!=null){var mt=p*h,Ot=o.doc.scrollTop,zt=Ot+m.wrapper.clientHeight;mt<0?Ot=Math.max(0,Ot+mt-50):zt=Math.min(o.doc.height,zt+mt+50),Kl(o,{top:Ot,bottom:zt})}Za<20&&s.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=b.scrollLeft,m.wheelStartY=b.scrollTop,m.wheelDX=c,m.wheelDY=p,setTimeout(function(){if(m.wheelStartX!=null){var Kt=b.scrollLeft-m.wheelStartX,se=b.scrollTop-m.wheelStartY,fe=se&&m.wheelDY&&se/m.wheelDY||Kt&&m.wheelDX&&Kt/m.wheelDX;m.wheelStartX=m.wheelStartY=null,fe&&(Vo=(Vo*Za+fe)/(Za+1),++Za)}},200)):(m.wheelDX+=c,m.wheelDY+=p))}}U?Vo=-.53:et?Vo=15:M?Vo=-.7:st&&(Vo=-.3333333333333333);var Gr=function(o,s){this.ranges=o,this.primIndex=s};Gr.prototype.primary=function(){return this.ranges[this.primIndex]},Gr.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var u=this.ranges[s],c=o.ranges[s];if(!Y(u.anchor,c.anchor)||!Y(u.head,c.head))return!1}return!0},Gr.prototype.deepCopy=function(){for(var o=[],s=0;s<this.ranges.length;s++)o[s]=new an(It(this.ranges[s].anchor),It(this.ranges[s].head));return new Gr(o,this.primIndex)},Gr.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},Gr.prototype.contains=function(o,s){s||(s=o);for(var u=0;u<this.ranges.length;u++){var c=this.ranges[u];if(P(s,c.from())>=0&&P(o,c.to())<=0)return u}return-1};var an=function(o,s){this.anchor=o,this.head=s};function oo(o,s,u){var c=o&&o.options.selectionsMayTouch,p=s[u];s.sort(function(vt,mt){return P(vt.from(),mt.from())}),u=me(s,p);for(var h=1;h<s.length;h++){var m=s[h],b=s[h-1],x=P(b.to(),m.from());if(c&&!m.empty()?x>0:x>=0){var k=ve(b.from(),m.from()),$=oe(b.to(),m.to()),K=b.empty()?m.from()==m.head:b.from()==b.head;h<=u&&--u,s.splice(--h,2,new an(K?$:k,K?k:$))}}return new Gr(s,u)}function ri(o,s){return new Gr([new an(o,s||o)],0)}function ho(o){return o.text?$t(o.from.line+o.text.length-1,ee(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function lu(o,s){if(P(o,s.from)<0)return o;if(P(o,s.to)<=0)return ho(s);var u=o.line+s.text.length-(s.to.line-s.from.line)-1,c=o.ch;return o.line==s.to.line&&(c+=ho(s).ch-s.to.ch),$t(u,c)}function Qa(o,s){for(var u=[],c=0;c<o.sel.ranges.length;c++){var p=o.sel.ranges[c];u.push(new an(lu(p.anchor,s),lu(p.head,s)))}return oo(o.cm,u,o.sel.primIndex)}function cu(o,s,u){return o.line==s.line?$t(u.line,o.ch-s.ch+u.ch):$t(u.line+(o.line-s.line),o.ch)}function oi(o,s,u){for(var c=[],p=$t(o.first,0),h=p,m=0;m<s.length;m++){var b=s[m],x=cu(b.from,p,h),k=cu(ho(b),p,h);if(p=b.to,h=k,u=="around"){var $=o.sel.ranges[m],K=P($.head,$.anchor)<0;c[m]=new an(K?k:x,K?x:k)}else c[m]=new an(x,x)}return new Gr(c,o.sel.primIndex)}function tl(o){o.doc.mode=no(o.options,o.doc.modeOption),Fo(o)}function Fo(o){o.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,fs(o,100),o.state.modeGen++,o.curOp&&or(o)}function uu(o,s){return s.from.ch==0&&s.to.ch==0&&ee(s.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function Jl(o,s,u,c){function p(fe){return u?u[fe]:null}function h(fe,re,xe){Us(fe,re,xe,c),xn(fe,"change",fe,s)}function m(fe,re){for(var xe=[],we=fe;we<re;++we)xe.push(new Ur(k[we],p(we),c));return xe}var b=s.from,x=s.to,k=s.text,$=be(o,b.line),K=be(o,x.line),vt=ee(k),mt=p(k.length-1),Ot=x.line-b.line;if(s.full)o.insert(0,m(0,k.length)),o.remove(k.length,o.size-k.length);else if(uu(o,s)){var zt=m(0,k.length-1);h(K,K.text,mt),Ot&&o.remove(b.line,Ot),zt.length&&o.insert(b.line,zt)}else if($==K)if(k.length==1)h($,$.text.slice(0,b.ch)+vt+$.text.slice(x.ch),mt);else{var Kt=m(1,k.length-1);Kt.push(new Ur(vt+$.text.slice(x.ch),mt,c)),h($,$.text.slice(0,b.ch)+k[0],p(0)),o.insert(b.line+1,Kt)}else if(k.length==1)h($,$.text.slice(0,b.ch)+k[0]+K.text.slice(x.ch),p(0)),o.remove(b.line+1,Ot);else{h($,$.text.slice(0,b.ch)+k[0],p(0)),h(K,vt+K.text.slice(x.ch),mt);var se=m(1,k.length-1);Ot>1&&o.remove(b.line+1,Ot-1),o.insert(b.line+1,se)}xn(o,"change",o,s)}function Ho(o,s,u){function c(p,h,m){if(p.linked)for(var b=0;b<p.linked.length;++b){var x=p.linked[b];if(x.doc!=h){var k=m&&x.sharedHist;u&&!k||(s(x.doc,k),c(x.doc,p,k))}}}c(o,null,!0)}function pu(o,s){if(s.cm)throw new Error("This document is already in use.");o.doc=s,s.cm=o,Bl(o),tl(o),el(o),o.options.direction=s.direction,o.options.lineWrapping||Bs(o),o.options.mode=s.modeOption,or(o)}function el(o){(o.doc.direction=="rtl"?Yt:Z)(o.display.lineDiv,"CodeMirror-rtl")}function Rp(o){mr(o,function(){el(o),or(o)})}function nl(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function Xl(o,s){var u={from:It(s.from),to:ho(s),text:lr(o,s.from,s.to)};return tc(o,u,s.from.line,s.to.line+1),Ho(o,function(c){return tc(c,u,s.from.line,s.to.line+1)},!0),u}function fu(o){for(;o.length&&ee(o).ranges;)o.pop()}function zp(o,s){return s?(fu(o.done),ee(o.done)):o.done.length&&!ee(o.done).ranges?ee(o.done):o.done.length>1&&!o.done[o.done.length-2].ranges?(o.done.pop(),ee(o.done)):void 0}function Zl(o,s,u,c){var p=o.history;p.undone.length=0;var h,m,b=+new Date;if((p.lastOp==c||p.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&p.lastModTime>b-(o.cm?o.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(h=zp(p,p.lastOp==c)))m=ee(h.changes),P(s.from,s.to)==0&&P(s.from,m.to)==0?m.to=ho(s):h.changes.push(Xl(o,s));else{var x=ee(p.done);for(x&&x.ranges||rl(o.sel,p.done),h={changes:[Xl(o,s)],generation:p.generation},p.done.push(h);p.done.length>p.undoDepth;)p.done.shift(),p.done[0].ranges||p.done.shift()}p.done.push(u),p.generation=++p.maxGeneration,p.lastModTime=p.lastSelTime=b,p.lastOp=p.lastSelOp=c,p.lastOrigin=p.lastSelOrigin=s.origin,m||ht(o,"historyAdded")}function Ql(o,s,u,c){var p=s.charAt(0);return p=="*"||p=="+"&&u.ranges.length==c.ranges.length&&u.somethingSelected()==c.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}function Bp(o,s,u,c){var p=o.history,h=c&&c.origin;u==p.lastSelOp||h&&p.lastSelOrigin==h&&(p.lastModTime==p.lastSelTime&&p.lastOrigin==h||Ql(o,h,ee(p.done),s))?p.done[p.done.length-1]=s:rl(s,p.done),p.lastSelTime=+new Date,p.lastSelOrigin=h,p.lastSelOp=u,c&&c.clearRedo!==!1&&fu(p.undone)}function rl(o,s){var u=ee(s);u&&u.ranges&&u.equals(o)||s.push(o)}function tc(o,s,u,c){var p=s["spans_"+o.id],h=0;o.iter(Math.max(o.first,u),Math.min(o.first+o.size,c),function(m){m.markedSpans&&((p||(p=s["spans_"+o.id]={}))[h]=m.markedSpans),++h})}function Up(o){if(!o)return null;for(var s,u=0;u<o.length;++u)o[u].marker.explicitlyCleared?s||(s=o.slice(0,u)):s&&s.push(o[u]);return s?s.length?s:null:o}function Wp(o,s){var u=s["spans_"+o.id];if(!u)return null;for(var c=[],p=0;p<s.text.length;++p)c.push(Up(u[p]));return c}function ec(o,s){var u=Wp(o,s),c=Jo(o,s);if(!u)return c;if(!c)return u;for(var p=0;p<u.length;++p){var h=u[p],m=c[p];if(h&&m)t:for(var b=0;b<m.length;++b){for(var x=m[b],k=0;k<h.length;++k)if(h[k].marker==x.marker)continue t;h.push(x)}else m&&(u[p]=m)}return u}function hs(o,s,u){for(var c=[],p=0;p<o.length;++p){var h=o[p];if(h.ranges)c.push(u?Gr.prototype.deepCopy.call(h):h);else{var m=h.changes,b=[];c.push({changes:b});for(var x=0;x<m.length;++x){var k=m[x],$=void 0;if(b.push({from:k.from,to:k.to,text:k.text}),s)for(var K in k)($=K.match(/^spans_(\d+)$/))&&me(s,Number($[1]))>-1&&(ee(b)[K]=k[K],delete k[K])}}}return c}function Mi(o,s,u,c){if(c){var p=o.anchor;if(u){var h=P(s,p)<0;h!=P(u,p)<0?(p=s,s=u):h!=P(s,u)<0&&(s=u)}return new an(p,s)}return new an(u||s,s)}function ol(o,s,u,c,p){p==null&&(p=o.cm&&(o.cm.display.shift||o.extend)),ir(o,new Gr([Mi(o.sel.primary(),s,u,p)],0),c)}function du(o,s,u){for(var c=[],p=o.cm&&(o.cm.display.shift||o.extend),h=0;h<o.sel.ranges.length;h++)c[h]=Mi(o.sel.ranges[h],s[h],null,p);ir(o,oo(o.cm,c,o.sel.primIndex),u)}function il(o,s,u,c){var p=o.sel.ranges.slice(0);p[s]=u,ir(o,oo(o.cm,p,o.sel.primIndex),c)}function nc(o,s,u,c){ir(o,ri(s,u),c)}function hu(o,s,u){var c={ranges:s.ranges,update:function(p){this.ranges=[];for(var h=0;h<p.length;h++)this.ranges[h]=new an(le(o,p[h].anchor),le(o,p[h].head))},origin:u&&u.origin};return ht(o,"beforeSelectionChange",o,c),o.cm&&ht(o.cm,"beforeSelectionChange",o.cm,c),c.ranges!=s.ranges?oo(o.cm,c.ranges,c.ranges.length-1):s}function rc(o,s,u){var c=o.history.done,p=ee(c);p&&p.ranges?(c[c.length-1]=s,sl(o,s,u)):ir(o,s,u)}function ir(o,s,u){sl(o,s,u),Bp(o,o.sel,o.cm?o.cm.curOp.id:NaN,u)}function sl(o,s,u){(ye(o,"beforeSelectionChange")||o.cm&&ye(o.cm,"beforeSelectionChange"))&&(s=hu(o,s,u));var c=u&&u.bias||(P(s.primary().head,o.sel.primary().head)<0?-1:1);gs(o,oc(o,s,c,!0)),u&&u.scroll===!1||!o.cm||o.cm.getOption("readOnly")=="nocursor"||us(o.cm)}function gs(o,s){s.equals(o.sel)||(o.sel=s,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,te(o.cm)),xn(o,"cursorActivity",o))}function al(o){gs(o,oc(o,o.sel,null,!1))}function oc(o,s,u,c){for(var p,h=0;h<s.ranges.length;h++){var m=s.ranges[h],b=s.ranges.length==o.sel.ranges.length&&o.sel.ranges[h],x=aa(o,m.anchor,b&&b.anchor,u,c),k=m.head==m.anchor?x:aa(o,m.head,b&&b.head,u,c);(p||x!=m.anchor||k!=m.head)&&(p||(p=s.ranges.slice(0,h)),p[h]=new an(x,k))}return p?oo(o.cm,p,s.primIndex):s}function Li(o,s,u,c,p){var h=be(o,s.line);if(h.markedSpans)for(var m=0;m<h.markedSpans.length;++m){var b=h.markedSpans[m],x=b.marker,k="selectLeft"in x?!x.selectLeft:x.inclusiveLeft,$="selectRight"in x?!x.selectRight:x.inclusiveRight;if((b.from==null||(k?b.from<=s.ch:b.from<s.ch))&&(b.to==null||($?b.to>=s.ch:b.to>s.ch))){if(p&&(ht(x,"beforeCursorEnter"),x.explicitlyCleared)){if(h.markedSpans){--m;continue}break}if(!x.atomic)continue;if(u){var K=x.find(c<0?1:-1),vt=void 0;if((c<0?$:k)&&(K=vs(o,K,-c,K&&K.line==s.line?h:null)),K&&K.line==s.line&&(vt=P(K,u))&&(c<0?vt<0:vt>0))return Li(o,K,s,c,p)}var mt=x.find(c<0?-1:1);return(c<0?k:$)&&(mt=vs(o,mt,c,mt.line==s.line?h:null)),mt?Li(o,mt,s,c,p):null}}return s}function aa(o,s,u,c,p){var h=c||1,m=Li(o,s,u,h,p)||!p&&Li(o,s,u,h,!0)||Li(o,s,u,-h,p)||!p&&Li(o,s,u,-h,!0);return m||(o.cantEdit=!0,$t(o.first,0))}function vs(o,s,u,c){return u<0&&s.ch==0?s.line>o.first?le(o,$t(s.line-1)):null:u>0&&s.ch==(c||be(o,s.line)).text.length?s.line<o.first+o.size-1?$t(s.line+1,0):null:new $t(s.line,s.ch+u)}function gu(o){o.setSelection($t(o.firstLine(),0),$t(o.lastLine()),ue)}function vu(o,s,u){var c={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return c.canceled=!0}};return u&&(c.update=function(p,h,m,b){p&&(c.from=le(o,p)),h&&(c.to=le(o,h)),m&&(c.text=m),b!==void 0&&(c.origin=b)}),ht(o,"beforeChange",o,c),o.cm&&ht(o.cm,"beforeChange",o.cm,c),c.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function Di(o,s,u){if(o.cm){if(!o.cm.curOp)return Zn(o.cm,Di)(o,s,u);if(o.cm.state.suppressEdits)return}if(!(ye(o,"beforeChange")||o.cm&&ye(o.cm,"beforeChange"))||(s=vu(o,s,!0))){var c=nr&&!u&&Ye(o,s.from,s.to);if(c)for(var p=c.length-1;p>=0;--p)mu(o,{from:c[p].from,to:c[p].to,text:p?[""]:s.text,origin:s.origin});else mu(o,s)}}function mu(o,s){if(s.text.length!=1||s.text[0]!=""||P(s.from,s.to)!=0){var u=Qa(o,s);Zl(o,s,u,o.cm?o.cm.curOp.id:NaN),la(o,s,u,Jo(o,s));var c=[];Ho(o,function(p,h){h||me(c,p.history)!=-1||(bu(p.history,s),c.push(p.history)),la(p,s,null,Jo(p,s))})}}function ll(o,s,u){var c=o.cm&&o.cm.state.suppressEdits;if(!c||u){for(var p,h=o.history,m=o.sel,b=s=="undo"?h.done:h.undone,x=s=="undo"?h.undone:h.done,k=0;k<b.length&&(p=b[k],u?!p.ranges||p.equals(o.sel):p.ranges);k++);if(k!=b.length){for(h.lastOrigin=h.lastSelOrigin=null;;){if(!(p=b.pop()).ranges){if(c)return void b.push(p);break}if(rl(p,x),u&&!p.equals(o.sel))return void ir(o,p,{clearRedo:!1});m=p}var $=[];rl(m,x),x.push({changes:$,generation:h.generation}),h.generation=p.generation||++h.maxGeneration;for(var K=ye(o,"beforeChange")||o.cm&&ye(o.cm,"beforeChange"),vt=function(zt){var Kt=p.changes[zt];if(Kt.origin=s,K&&!vu(o,Kt,!1))return b.length=0,{};$.push(Xl(o,Kt));var se=zt?Qa(o,Kt):ee(b);la(o,Kt,se,ec(o,Kt)),!zt&&o.cm&&o.cm.scrollIntoView({from:Kt.from,to:ho(Kt)});var fe=[];Ho(o,function(re,xe){xe||me(fe,re.history)!=-1||(bu(re.history,Kt),fe.push(re.history)),la(re,Kt,null,ec(re,Kt))})},mt=p.changes.length-1;mt>=0;--mt){var Ot=vt(mt);if(Ot)return Ot.v}}}}function ic(o,s){if(s!=0&&(o.first+=s,o.sel=new Gr(je(o.sel.ranges,function(p){return new an($t(p.anchor.line+s,p.anchor.ch),$t(p.head.line+s,p.head.ch))}),o.sel.primIndex),o.cm)){or(o.cm,o.first,o.first-s,s);for(var u=o.cm.display,c=u.viewFrom;c<u.viewTo;c++)fo(o.cm,c,"gutter")}}function la(o,s,u,c){if(o.cm&&!o.cm.curOp)return Zn(o.cm,la)(o,s,u,c);if(s.to.line<o.first)ic(o,s.text.length-1-(s.to.line-s.from.line));else if(!(s.from.line>o.lastLine())){if(s.from.line<o.first){var p=s.text.length-1-(o.first-s.from.line);ic(o,p),s={from:$t(o.first,0),to:$t(s.to.line+p,s.to.ch),text:[ee(s.text)],origin:s.origin}}var h=o.lastLine();s.to.line>h&&(s={from:s.from,to:$t(h,be(o,h).text.length),text:[s.text[0]],origin:s.origin}),s.removed=lr(o,s.from,s.to),u||(u=Qa(o,s)),o.cm?$p(o.cm,s,c):Jl(o,s,c),sl(o,u,ue),o.cantEdit&&aa(o,$t(o.firstLine(),0))&&(o.cantEdit=!1)}}function $p(o,s,u){var c=o.doc,p=o.display,h=s.from,m=s.to,b=!1,x=h.line;o.options.lineWrapping||(x=en(jr(be(c,h.line))),c.iter(x,m.line+1,function(mt){if(mt==p.maxLine)return b=!0,!0})),c.sel.contains(s.from,s.to)>-1&&te(o),Jl(c,s,u,Yc(o)),o.options.lineWrapping||(c.iter(x,h.line+s.text.length,function(mt){var Ot=wi(mt);Ot>p.maxLineLength&&(p.maxLine=mt,p.maxLineLength=Ot,p.maxLineChanged=!0,b=!1)}),b&&(o.curOp.updateMaxLine=!0)),Hs(c,h.line),fs(o,400);var k=s.text.length-(m.line-h.line)-1;s.full?or(o):h.line!=m.line||s.text.length!=1||uu(o.doc,s)?or(o,h.line,m.line+1,k):fo(o,h.line,"text");var $=ye(o,"changes"),K=ye(o,"change");if(K||$){var vt={from:h,to:m,text:s.text,removed:s.removed,origin:s.origin};K&&xn(o,"change",o,vt),$&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(vt)}o.display.selForContextMenu=null}function ms(o,s,u,c,p){var h;c||(c=u),P(c,u)<0&&(u=(h=[c,u])[0],c=h[1]),typeof s=="string"&&(s=o.splitLines(s)),Di(o,{from:u,to:c,text:s,origin:p})}function yu(o,s,u,c){u<o.line?o.line+=c:s<o.line&&(o.line=s,o.ch=0)}function ca(o,s,u,c){for(var p=0;p<o.length;++p){var h=o[p],m=!0;if(h.ranges){h.copied||((h=o[p]=h.deepCopy()).copied=!0);for(var b=0;b<h.ranges.length;b++)yu(h.ranges[b].anchor,s,u,c),yu(h.ranges[b].head,s,u,c)}else{for(var x=0;x<h.changes.length;++x){var k=h.changes[x];if(u<k.from.line)k.from=$t(k.from.line+c,k.from.ch),k.to=$t(k.to.line+c,k.to.ch);else if(s<=k.to.line){m=!1;break}}m||(o.splice(0,p+1),p=0)}}}function bu(o,s){var u=s.from.line,c=s.to.line,p=s.text.length-(c-u)-1;ca(o.done,u,c,p),ca(o.undone,u,c,p)}function ua(o,s,u,c){var p=s,h=s;return typeof s=="number"?h=be(o,Ze(o,s)):p=en(s),p==null?null:(c(h,p)&&o.cm&&fo(o.cm,p,u),h)}function pa(o){this.lines=o,this.parent=null;for(var s=0,u=0;u<o.length;++u)o[u].parent=this,s+=o[u].height;this.height=s}function ys(o){this.children=o;for(var s=0,u=0,c=0;c<o.length;++c){var p=o[c];s+=p.chunkSize(),u+=p.height,p.parent=this}this.size=s,this.height=u,this.parent=null}an.prototype.from=function(){return ve(this.anchor,this.head)},an.prototype.to=function(){return oe(this.anchor,this.head)},an.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},pa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,s){for(var u=o,c=o+s;u<c;++u){var p=this.lines[u];this.height-=p.height,Da(p),xn(p,"delete")}this.lines.splice(o,s)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,s,u){this.height+=u,this.lines=this.lines.slice(0,o).concat(s).concat(this.lines.slice(o));for(var c=0;c<s.length;++c)s[c].parent=this},iterN:function(o,s,u){for(var c=o+s;o<c;++o)if(u(this.lines[o]))return!0}},ys.prototype={chunkSize:function(){return this.size},removeInner:function(o,s){this.size-=s;for(var u=0;u<this.children.length;++u){var c=this.children[u],p=c.chunkSize();if(o<p){var h=Math.min(s,p-o),m=c.height;if(c.removeInner(o,h),this.height-=m-c.height,p==h&&(this.children.splice(u--,1),c.parent=null),(s-=h)==0)break;o=0}else o-=p}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof pa))){var b=[];this.collapse(b),this.children=[new pa(b)],this.children[0].parent=this}},collapse:function(o){for(var s=0;s<this.children.length;++s)this.children[s].collapse(o)},insertInner:function(o,s,u){this.size+=s.length,this.height+=u;for(var c=0;c<this.children.length;++c){var p=this.children[c],h=p.chunkSize();if(o<=h){if(p.insertInner(o,s,u),p.lines&&p.lines.length>50){for(var m=p.lines.length%25+25,b=m;b<p.lines.length;){var x=new pa(p.lines.slice(b,b+=25));p.height-=x.height,this.children.splice(++c,0,x),x.parent=this}p.lines=p.lines.slice(0,m),this.maybeSpill()}break}o-=h}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var s=new ys(o.children.splice(o.children.length-5,5));if(o.parent){o.size-=s.size,o.height-=s.height;var u=me(o.parent.children,o);o.parent.children.splice(u+1,0,s)}else{var c=new ys(o.children);c.parent=o,o.children=[c,s],o=c}s.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,s,u){for(var c=0;c<this.children.length;++c){var p=this.children[c],h=p.chunkSize();if(o<h){var m=Math.min(s,h-o);if(p.iterN(o,m,u))return!0;if((s-=m)==0)break;o=0}else o-=h}}};var fa=function(o,s,u){if(u)for(var c in u)u.hasOwnProperty(c)&&(this[c]=u[c]);this.doc=o,this.node=s};function sc(o,s,u){Br(s)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&Ka(o,u)}function ac(o,s,u,c){var p=new fa(o,u,c),h=o.cm;return h&&p.noHScroll&&(h.display.alignWidgets=!0),ua(o,s,"widget",function(m){var b=m.widgets||(m.widgets=[]);if(p.insertAt==null?b.push(p):b.splice(Math.min(b.length,Math.max(0,p.insertAt)),0,p),p.line=m,h&&!zr(o,m)){var x=Br(m)<o.scrollTop;cr(m,m.height+C(p)),x&&Ka(h,p.height),h.curOp.forceUpdate=!0}return!0}),h&&xn(h,"lineWidgetAdded",h,p,typeof s=="number"?s:en(s)),p}fa.prototype.clear=function(){var o=this.doc.cm,s=this.line.widgets,u=this.line,c=en(u);if(c!=null&&s){for(var p=0;p<s.length;++p)s[p]==this&&s.splice(p--,1);s.length||(u.widgets=null);var h=C(this);cr(u,Math.max(0,u.height-h)),o&&(mr(o,function(){sc(o,u,-h),fo(o,c,"widget")}),xn(o,"lineWidgetCleared",o,this,c))}},fa.prototype.changed=function(){var o=this,s=this.height,u=this.doc.cm,c=this.line;this.height=null;var p=C(this)-s;p&&(zr(this.doc,c)||cr(c,c.height+p),u&&mr(u,function(){u.curOp.forceUpdate=!0,sc(u,c,p),xn(u,"lineWidgetChanged",u,o,en(c))}))},Ue(fa);var lc=0,ii=function(o,s){this.lines=[],this.type=s,this.doc=o,this.id=++lc};function bs(o,s,u,c,p){if(c&&c.shared)return qp(o,s,u,c,p);if(o.cm&&!o.cm.curOp)return Zn(o.cm,bs)(o,s,u,c,p);var h=new ii(o,p),m=P(s,u);if(c&&Ie(c,h,!1),m>0||m==0&&h.clearWhenEmpty!==!1)return h;if(h.replacedWith&&(h.collapsed=!0,h.widgetNode=F("span",[h.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||h.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(h.widgetNode.insertLeft=!0)),h.collapsed){if(Cn(o,s.line,s,u,h)||s.line!=u.line&&Cn(o,u.line,s,u,h))throw new Error("Inserting collapsed marker partially overlapping an existing one");Rs()}h.addToHistory&&Zl(o,{from:s,to:u,origin:"markText"},o.sel,NaN);var b,x=s.line,k=o.cm;if(o.iter(x,u.line+1,function(K){k&&h.collapsed&&!k.options.lineWrapping&&jr(K)==k.display.maxLine&&(b=!0),h.collapsed&&x!=s.line&&cr(K,0),zs(K,new Pr(h,x==s.line?s.ch:null,x==u.line?u.ch:null),o.cm&&o.cm.curOp),++x}),h.collapsed&&o.iter(s.line,u.line+1,function(K){zr(o,K)&&cr(K,0)}),h.clearOnEnter&&Qt(h,"beforeCursorEnter",function(){return h.clear()}),h.readOnly&&(vi(),(o.history.done.length||o.history.undone.length)&&o.clearHistory()),h.collapsed&&(h.id=++lc,h.atomic=!0),k){if(b&&(k.curOp.updateMaxLine=!0),h.collapsed)or(k,s.line,u.line+1);else if(h.className||h.startStyle||h.endStyle||h.css||h.attributes||h.title)for(var $=s.line;$<=u.line;$++)fo(k,$,"text");h.atomic&&al(k.doc),xn(k,"markerAdded",k,h)}return h}ii.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,s=o&&!o.curOp;if(s&&Pi(o),ye(this,"clear")){var u=this.find();u&&xn(this,"clear",u.from,u.to)}for(var c=null,p=null,h=0;h<this.lines.length;++h){var m=this.lines[h],b=Ao(m.markedSpans,this);o&&!this.collapsed?fo(o,en(m),"text"):o&&(b.to!=null&&(p=en(m)),b.from!=null&&(c=en(m))),m.markedSpans=mi(m.markedSpans,b),b.from==null&&this.collapsed&&!zr(this.doc,m)&&o&&cr(m,po(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(var x=0;x<this.lines.length;++x){var k=jr(this.lines[x]),$=wi(k);$>o.display.maxLineLength&&(o.display.maxLine=k,o.display.maxLineLength=$,o.display.maxLineChanged=!0)}c!=null&&o&&this.collapsed&&or(o,c,p+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&al(o.doc)),o&&xn(o,"markerCleared",o,this,c,p),s&&Ai(o),this.parent&&this.parent.clear()}},ii.prototype.find=function(o,s){var u,c;o==null&&this.type=="bookmark"&&(o=1);for(var p=0;p<this.lines.length;++p){var h=this.lines[p],m=Ao(h.markedSpans,this);if(m.from!=null&&(u=$t(s?h:en(h),m.from),o==-1))return u;if(m.to!=null&&(c=$t(s?h:en(h),m.to),o==1))return c}return u&&{from:u,to:c}},ii.prototype.changed=function(){var o=this,s=this.find(-1,!0),u=this,c=this.doc.cm;s&&c&&mr(c,function(){var p=s.line,h=en(s.line),m=os(c,h);if(m&&($c(m),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!zr(u.doc,p)&&u.height!=null){var b=u.height;u.height=null;var x=C(u)-b;x&&cr(p,p.height+x)}xn(c,"markerChanged",c,o)})},ii.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;s.maybeHiddenMarkers&&me(s.maybeHiddenMarkers,this)!=-1||(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},ii.prototype.detachLine=function(o){if(this.lines.splice(me(this.lines,o),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Ue(ii);var da=function(o,s){this.markers=o,this.primary=s;for(var u=0;u<o.length;++u)o[u].parent=this};function qp(o,s,u,c,p){(c=Ie(c)).shared=!1;var h=[bs(o,s,u,c,p)],m=h[0],b=c.widgetNode;return Ho(o,function(x){b&&(c.widgetNode=b.cloneNode(!0)),h.push(bs(x,le(x,s),le(x,u),c,p));for(var k=0;k<x.linked.length;++k)if(x.linked[k].isParent)return;m=ee(h)}),new da(h,m)}function wu(o){return o.findMarks($t(o.first,0),o.clipPos($t(o.lastLine())),function(s){return s.parent})}function _u(o,s){for(var u=0;u<s.length;u++){var c=s[u],p=c.find(),h=o.clipPos(p.from),m=o.clipPos(p.to);if(P(h,m)){var b=bs(o,h,m,c.primary,c.primary.type);c.markers.push(b),b.parent=c}}}function Cu(o){for(var s=function(c){var p=o[c],h=[p.primary.doc];Ho(p.primary.doc,function(x){return h.push(x)});for(var m=0;m<p.markers.length;m++){var b=p.markers[m];me(h,b.doc)==-1&&(b.parent=null,p.markers.splice(m--,1))}},u=0;u<o.length;u++)s(u)}da.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();xn(this,"clear")}},da.prototype.find=function(o,s){return this.primary.find(o,s)},Ue(da);var Gp=0,Un=function(o,s,u,c,p){if(!(this instanceof Un))return new Un(o,s,u,c,p);u==null&&(u=0),ys.call(this,[new pa([new Ur("",null)])]),this.first=u,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=u;var h=$t(u,0);this.sel=ri(h),this.history=new nl(null),this.id=++Gp,this.modeOption=s,this.lineSep=c,this.direction=p=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),Jl(this,{from:h,to:h,text:o}),ir(this,ri(h),ue)};Un.prototype=fn(ys.prototype,{constructor:Un,iter:function(o,s,u){u?this.iterN(o-this.first,s-o,u):this.iterN(this.first,this.first+this.size,o)},insert:function(o,s){for(var u=0,c=0;c<s.length;++c)u+=s[c].height;this.insertInner(o-this.first,s,u)},remove:function(o,s){this.removeInner(o-this.first,s)},getValue:function(o){var s=Go(this,this.first,this.first+this.size);return o===!1?s:s.join(o||this.lineSeparator())},setValue:Qn(function(o){var s=$t(this.first,0),u=this.first+this.size-1;Di(this,{from:s,to:$t(u,be(this,u).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&ta(this.cm,0,0),ir(this,ri(s),ue)}),replaceRange:function(o,s,u,c){ms(this,o,s=le(this,s),u=u?le(this,u):s,c)},getRange:function(o,s,u){var c=lr(this,le(this,o),le(this,s));return u===!1?c:u===""?c.join(""):c.join(u||this.lineSeparator())},getLine:function(o){var s=this.getLineHandle(o);return s&&s.text},getLineHandle:function(o){if(Co(this,o))return be(this,o)},getLineNumber:function(o){return en(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=be(this,o)),jr(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return le(this,o)},getCursor:function(o){var s=this.sel.primary();return o==null||o=="head"?s.head:o=="anchor"?s.anchor:o=="end"||o=="to"||o===!1?s.to():s.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Qn(function(o,s,u){nc(this,le(this,typeof o=="number"?$t(o,s||0):o),null,u)}),setSelection:Qn(function(o,s,u){nc(this,le(this,o),le(this,s||o),u)}),extendSelection:Qn(function(o,s,u){ol(this,le(this,o),s&&le(this,s),u)}),extendSelections:Qn(function(o,s){du(this,Mn(this,o),s)}),extendSelectionsBy:Qn(function(o,s){du(this,Mn(this,je(this.sel.ranges,o)),s)}),setSelections:Qn(function(o,s,u){if(o.length){for(var c=[],p=0;p<o.length;p++)c[p]=new an(le(this,o[p].anchor),le(this,o[p].head||o[p].anchor));s==null&&(s=Math.min(o.length-1,this.sel.primIndex)),ir(this,oo(this.cm,c,s),u)}}),addSelection:Qn(function(o,s,u){var c=this.sel.ranges.slice(0);c.push(new an(le(this,o),le(this,s||o))),ir(this,oo(this.cm,c,c.length-1),u)}),getSelection:function(o){for(var s,u=this.sel.ranges,c=0;c<u.length;c++){var p=lr(this,u[c].from(),u[c].to());s=s?s.concat(p):p}return o===!1?s:s.join(o||this.lineSeparator())},getSelections:function(o){for(var s=[],u=this.sel.ranges,c=0;c<u.length;c++){var p=lr(this,u[c].from(),u[c].to());o!==!1&&(p=p.join(o||this.lineSeparator())),s[c]=p}return s},replaceSelection:function(o,s,u){for(var c=[],p=0;p<this.sel.ranges.length;p++)c[p]=o;this.replaceSelections(c,s,u||"+input")},replaceSelections:Qn(function(o,s,u){for(var c=[],p=this.sel,h=0;h<p.ranges.length;h++){var m=p.ranges[h];c[h]={from:m.from(),to:m.to(),text:this.splitLines(o[h]),origin:u}}for(var b=s&&s!="end"&&oi(this,c,s),x=c.length-1;x>=0;x--)Di(this,c[x]);b?rc(this,b):this.cm&&us(this.cm)}),undo:Qn(function(){ll(this,"undo")}),redo:Qn(function(){ll(this,"redo")}),undoSelection:Qn(function(){ll(this,"undo",!0)}),redoSelection:Qn(function(){ll(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,s=0,u=0,c=0;c<o.done.length;c++)o.done[c].ranges||++s;for(var p=0;p<o.undone.length;p++)o.undone[p].ranges||++u;return{undo:s,redo:u}},clearHistory:function(){var o=this;this.history=new nl(this.history),Ho(this,function(s){return s.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:hs(this.history.done),undone:hs(this.history.undone)}},setHistory:function(o){var s=this.history=new nl(this.history);s.done=hs(o.done.slice(0),null,!0),s.undone=hs(o.undone.slice(0),null,!0)},setGutterMarker:Qn(function(o,s,u){return ua(this,o,"gutter",function(c){var p=c.gutterMarkers||(c.gutterMarkers={});return p[s]=u,!u&&y(p)&&(c.gutterMarkers=null),!0})}),clearGutter:Qn(function(o){var s=this;this.iter(function(u){u.gutterMarkers&&u.gutterMarkers[o]&&ua(s,u,"gutter",function(){return u.gutterMarkers[o]=null,y(u.gutterMarkers)&&(u.gutterMarkers=null),!0})})}),lineInfo:function(o){var s;if(typeof o=="number"){if(!Co(this,o)||(s=o,!(o=be(this,o))))return null}else if((s=en(o))==null)return null;return{line:s,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:Qn(function(o,s,u){return ua(this,o,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(c[p]){if(I(u).test(c[p]))return!1;c[p]+=" "+u}else c[p]=u;return!0})}),removeLineClass:Qn(function(o,s,u){return ua(this,o,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",h=c[p];if(!h)return!1;if(u==null)c[p]=null;else{var m=h.match(I(u));if(!m)return!1;var b=m.index+m[0].length;c[p]=h.slice(0,m.index)+(m.index&&b!=h.length?" ":"")+h.slice(b)||null}return!0})}),addLineWidget:Qn(function(o,s,u){return ac(this,o,s,u)}),removeLineWidget:function(o){o.clear()},markText:function(o,s,u){return bs(this,le(this,o),le(this,s),u,u&&u.type||"range")},setBookmark:function(o,s){var u={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return bs(this,o=le(this,o),o,u,"bookmark")},findMarksAt:function(o){var s=[],u=be(this,(o=le(this,o)).line).markedSpans;if(u)for(var c=0;c<u.length;++c){var p=u[c];(p.from==null||p.from<=o.ch)&&(p.to==null||p.to>=o.ch)&&s.push(p.marker.parent||p.marker)}return s},findMarks:function(o,s,u){o=le(this,o),s=le(this,s);var c=[],p=o.line;return this.iter(o.line,s.line+1,function(h){var m=h.markedSpans;if(m)for(var b=0;b<m.length;b++){var x=m[b];x.to!=null&&p==o.line&&o.ch>=x.to||x.from==null&&p!=o.line||x.from!=null&&p==s.line&&x.from>=s.ch||u&&!u(x.marker)||c.push(x.marker.parent||x.marker)}++p}),c},getAllMarks:function(){var o=[];return this.iter(function(s){var u=s.markedSpans;if(u)for(var c=0;c<u.length;++c)u[c].from!=null&&o.push(u[c].marker)}),o},posFromIndex:function(o){var s,u=this.first,c=this.lineSeparator().length;return this.iter(function(p){var h=p.text.length+c;if(h>o)return s=o,!0;o-=h,++u}),le(this,$t(u,s))},indexFromPos:function(o){var s=(o=le(this,o)).ch;if(o.line<this.first||o.ch<0)return 0;var u=this.lineSeparator().length;return this.iter(this.first,o.line,function(c){s+=c.text.length+u}),s},copy:function(o){var s=new Un(Go(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,o&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(o){o||(o={});var s=this.first,u=this.first+this.size;o.from!=null&&o.from>s&&(s=o.from),o.to!=null&&o.to<u&&(u=o.to);var c=new Un(Go(this,s,u),o.mode||this.modeOption,s,this.lineSep,this.direction);return o.sharedHist&&(c.history=this.history),(this.linked||(this.linked=[])).push({doc:c,sharedHist:o.sharedHist}),c.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],_u(c,wu(this)),c},unlinkDoc:function(o){if(o instanceof Sn&&(o=o.doc),this.linked){for(var s=0;s<this.linked.length;++s)if(this.linked[s].doc==o){this.linked.splice(s,1),o.unlinkDoc(this),Cu(wu(this));break}}if(o.history==this.history){var u=[o.id];Ho(o,function(c){return u.push(c.id)},!0),o.history=new nl(null),o.history.done=hs(this.history.done,u),o.history.undone=hs(this.history.undone,u)}},iterLinkedDocs:function(o){Ho(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):To(o)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Qn(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(s){return s.order=null}),this.cm&&Rp(this.cm))})}),Un.prototype.eachLine=Un.prototype.iter;var xu=0;function Kp(o){var s=this;if(Ou(s),!_t(s,o)&&!L(s.display,o)){Xe(o),U&&(xu=+new Date);var u=Si(s,o,!0),c=o.dataTransfer.files;if(u&&!s.isReadOnly())if(c&&c.length&&window.FileReader&&window.File)for(var p=c.length,h=Array(p),m=0,b=function(){++m==p&&Zn(s,function(){var mt={from:u=le(s.doc,u),to:u,text:s.doc.splitLines(h.filter(function(Ot){return Ot!=null}).join(s.doc.lineSeparator())),origin:"paste"};Di(s.doc,mt),rc(s.doc,ri(le(s.doc,u),le(s.doc,ho(mt))))})()},x=function(mt,Ot){if(s.options.allowDropFileTypes&&me(s.options.allowDropFileTypes,mt.type)==-1)b();else{var zt=new FileReader;zt.onerror=function(){return b()},zt.onload=function(){var Kt=zt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Kt)||(h[Ot]=Kt),b()},zt.readAsText(mt)}},k=0;k<c.length;k++)x(c[k],k);else{if(s.state.draggingText&&s.doc.sel.contains(u)>-1)return s.state.draggingText(o),void setTimeout(function(){return s.display.input.focus()},20);try{var $=o.dataTransfer.getData("Text");if($){var K;if(s.state.draggingText&&!s.state.draggingText.copy&&(K=s.listSelections()),sl(s.doc,ri(u,u)),K)for(var vt=0;vt<K.length;++vt)ms(s.doc,"",K[vt].anchor,K[vt].head,"drag");s.replaceSelection($,"around","paste"),s.display.input.focus()}}catch{}}}}function Su(o,s){if(U&&(!o.state.draggingText||+new Date-xu<100))$e(s);else if(!_t(o,s)&&!L(o.display,s)&&(s.dataTransfer.setData("Text",o.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!st)){var u=gt("img",null,null,"position: fixed; left: 0; top: 0;");u.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",it&&(u.width=u.height=1,o.display.wrapper.appendChild(u),u._top=u.offsetTop),s.dataTransfer.setDragImage(u,0,0),it&&u.parentNode.removeChild(u)}}function Yp(o,s){var u=Si(o,s);if(u){var c=document.createDocumentFragment();Js(o,u,c),o.display.dragCursor||(o.display.dragCursor=gt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),Q(o.display.dragCursor,c)}}function Ou(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function cc(o){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),u=[],c=0;c<s.length;c++){var p=s[c].CodeMirror;p&&u.push(p)}u.length&&u[0].operation(function(){for(var h=0;h<u.length;h++)o(u[h])})}}var Tu=!1;function Pn(){Tu||(ku(),Tu=!0)}function ku(){var o;Qt(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,cc(uc)},100))}),Qt(window,"blur",function(){return cc(Ti)})}function uc(o){var s=o.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,o.setSize()}for(var io={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ni=0;Ni<10;Ni++)io[Ni+48]=io[Ni+96]=String(Ni);for(var cl=65;cl<=90;cl++)io[cl]=String.fromCharCode(cl);for(var ws=1;ws<=12;ws++)io[ws+111]=io[ws+63235]="F"+ws;var go={};function Eu(o){var s,u,c,p,h=o.split(/-(?!$)/);o=h[h.length-1];for(var m=0;m<h.length-1;m++){var b=h[m];if(/^(cmd|meta|m)$/i.test(b))p=!0;else if(/^a(lt)?$/i.test(b))s=!0;else if(/^(c|ctrl|control)$/i.test(b))u=!0;else{if(!/^s(hift)?$/i.test(b))throw new Error("Unrecognized modifier name: "+b);c=!0}}return s&&(o="Alt-"+o),u&&(o="Ctrl-"+o),p&&(o="Cmd-"+o),c&&(o="Shift-"+o),o}function ul(o){var s={};for(var u in o)if(o.hasOwnProperty(u)){var c=o[u];if(/^(name|fallthrough|(de|at)tach)$/.test(u))continue;if(c=="..."){delete o[u];continue}for(var p=je(u.split(" "),Eu),h=0;h<p.length;h++){var m=void 0,b=void 0;h==p.length-1?(b=p.join(" "),m=c):(b=p.slice(0,h+1).join(" "),m="...");var x=s[b];if(x){if(x!=m)throw new Error("Inconsistent bindings for "+b)}else s[b]=m}delete o[u]}for(var k in s)o[k]=s[k];return o}function Ii(o,s,u,c){var p=(s=Ro(s)).call?s.call(o,c):s[o];if(p===!1)return"nothing";if(p==="...")return"multi";if(p!=null&&u(p))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return Ii(o,s.fallthrough,u,c);for(var h=0;h<s.fallthrough.length;h++){var m=Ii(o,s.fallthrough[h],u,c);if(m)return m}}}function pc(o){var s=typeof o=="string"?o:io[o.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function Pu(o,s,u){var c=o;return s.altKey&&c!="Alt"&&(o="Alt-"+o),(z?s.metaKey:s.ctrlKey)&&c!="Ctrl"&&(o="Ctrl-"+o),(z?s.ctrlKey:s.metaKey)&&c!="Mod"&&(o="Cmd-"+o),!u&&s.shiftKey&&c!="Shift"&&(o="Shift-"+o),o}function Au(o,s){if(it&&o.keyCode==34&&o.char)return!1;var u=io[o.keyCode];return u!=null&&!o.altGraphKey&&(o.keyCode==3&&o.code&&(u=o.code),Pu(u,o,s))}function Ro(o){return typeof o=="string"?go[o]:o}function si(o,s){for(var u=o.doc.sel.ranges,c=[],p=0;p<u.length;p++){for(var h=s(u[p]);c.length&&P(h.from,ee(c).to)<=0;){var m=c.pop();if(P(m.from,h.from)<0){h.from=m.from;break}}c.push(h)}mr(o,function(){for(var b=c.length-1;b>=0;b--)ms(o.doc,"",c[b].from,c[b].to,"+delete");us(o)})}function ha(o,s,u){var c=ct(o.text,s+u,u);return c<0||c>o.text.length?null:c}function pl(o,s,u){var c=ha(o,s.ch,u);return c==null?null:new $t(s.line,c,u<0?"after":"before")}function fl(o,s,u,c,p){if(o){s.doc.direction=="rtl"&&(p=-p);var h=ze(u,s.doc.direction);if(h){var m,b=p<0?ee(h):h[0],x=p<0==(b.level==1)?"after":"before";if(b.level>0||s.doc.direction=="rtl"){var k=Do(s,u);m=p<0?u.text.length-1:0;var $=$r(s,k,m).top;m=St(function(K){return $r(s,k,K).top==$},p<0==(b.level==1)?b.from:b.to-1,m),x=="before"&&(m=ha(u,m,1))}else m=p<0?b.to:b.from;return new $t(c,m,x)}}return new $t(c,p<0?u.text.length:0,p<0?"before":"after")}function ju(o,s,u,c){var p=ze(s,o.doc.direction);if(!p)return pl(s,u,c);u.ch>=s.text.length?(u.ch=s.text.length,u.sticky="before"):u.ch<=0&&(u.ch=0,u.sticky="after");var h=ge(p,u.ch,u.sticky),m=p[h];if(o.doc.direction=="ltr"&&m.level%2==0&&(c>0?m.to>u.ch:m.from<u.ch))return pl(s,u,c);var b,x=function(se,fe){return ha(s,se instanceof $t?se.ch:se,fe)},k=function(se){return o.options.lineWrapping?(b=b||Do(o,s),Kc(o,s,b,se)):{begin:0,end:s.text.length}},$=k(u.sticky=="before"?x(u,-1):u.ch);if(o.doc.direction=="rtl"||m.level==1){var K=m.level==1==c<0,vt=x(u,K?1:-1);if(vt!=null&&(K?vt<=m.to&&vt<=$.end:vt>=m.from&&vt>=$.begin)){var mt=K?"before":"after";return new $t(u.line,vt,mt)}}var Ot=function(se,fe,re){for(var xe=function(hn,wr){return wr?new $t(u.line,x(hn,1),"before"):new $t(u.line,hn,"after")};se>=0&&se<p.length;se+=fe){var we=p[se],Ee=fe>0==(we.level!=1),dn=Ee?re.begin:x(re.end,-1);if(we.from<=dn&&dn<we.to||(dn=Ee?we.from:x(we.to,-1),re.begin<=dn&&dn<re.end))return xe(dn,Ee)}},zt=Ot(h+c,c,$);if(zt)return zt;var Kt=c>0?$.end:x($.begin,-1);return Kt==null||c>0&&Kt==s.text.length||!(zt=Ot(c>0?0:p.length-1,c,k(Kt)))?null:zt}go.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},go.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},go.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},go.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},go.default=pt?go.macDefault:go.pcDefault;var _s={selectAll:gu,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),ue)},killLine:function(o){return si(o,function(s){if(s.empty()){var u=be(o.doc,s.head.line).text.length;return s.head.ch==u&&s.head.line<o.lastLine()?{from:s.head,to:$t(s.head.line+1,0)}:{from:s.head,to:$t(s.head.line,u)}}return{from:s.from(),to:s.to()}})},deleteLine:function(o){return si(o,function(s){return{from:$t(s.from().line,0),to:le(o.doc,$t(s.to().line+1,0))}})},delLineLeft:function(o){return si(o,function(s){return{from:$t(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(o){return si(o,function(s){var u=o.charCoords(s.head,"div").top+5;return{from:o.coordsChar({left:0,top:u},"div"),to:s.from()}})},delWrappedLineRight:function(o){return si(o,function(s){var u=o.charCoords(s.head,"div").top+5,c=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div");return{from:s.from(),to:c}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection($t(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection($t(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(s){return ga(o,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(s){return Lu(o,s.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(s){return Mu(o,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div")},Zt)},goLineLeft:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:0,top:u},"div")},Zt)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5,c=o.coordsChar({left:0,top:u},"div");return c.ch<o.getLine(c.line).search(/\S/)?Lu(o,s.head):c},Zt)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var s=[],u=o.listSelections(),c=o.options.tabSize,p=0;p<u.length;p++){var h=u[p].from(),m=Ce(o.getLine(h.line),h.ch,c);s.push(pe(c-m%c))}o.replaceSelections(s)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return mr(o,function(){for(var s=o.listSelections(),u=[],c=0;c<s.length;c++)if(s[c].empty()){var p=s[c].head,h=be(o.doc,p.line).text;if(h){if(p.ch==h.length&&(p=new $t(p.line,p.ch-1)),p.ch>0)p=new $t(p.line,p.ch+1),o.replaceRange(h.charAt(p.ch-1)+h.charAt(p.ch-2),$t(p.line,p.ch-2),p,"+transpose");else if(p.line>o.doc.first){var m=be(o.doc,p.line-1).text;m&&(p=new $t(p.line,1),o.replaceRange(h.charAt(0)+o.doc.lineSeparator()+m.charAt(m.length-1),$t(p.line-1,m.length-1),p,"+transpose"))}}u.push(new an(p,p))}o.setSelections(u)})},newlineAndIndent:function(o){return mr(o,function(){for(var s=o.listSelections(),u=s.length-1;u>=0;u--)o.replaceRange(o.doc.lineSeparator(),s[u].anchor,s[u].head,"+input");s=o.listSelections();for(var c=0;c<s.length;c++)o.indentLine(s[c].from().line,null,!0);us(o)})},openLine:function(o){return o.replaceSelection(`
`,"start")},toggleOverwrite:function(o){return o.toggleOverwrite()}};function ga(o,s){var u=be(o.doc,s),c=jr(u);return c!=u&&(s=en(c)),fl(!0,o,c,s,1)}function Mu(o,s){var u=be(o.doc,s),c=Yi(u);return c!=u&&(s=en(c)),fl(!0,o,u,s,-1)}function Lu(o,s){var u=ga(o,s.line),c=be(o.doc,u.line),p=ze(c,o.doc.direction);if(!p||p[0].level==0){var h=Math.max(u.ch,c.text.search(/\S/)),m=s.line==u.line&&s.ch<=h&&s.ch;return $t(u.line,m?0:h,u.sticky)}return u}function dl(o,s,u){if(typeof s=="string"&&!(s=_s[s]))return!1;o.display.input.ensurePolled();var c=o.display.shift,p=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),u&&(o.display.shift=!1),p=s(o)!=ce}finally{o.display.shift=c,o.state.suppressEdits=!1}return p}function Jp(o,s,u){for(var c=0;c<o.state.keyMaps.length;c++){var p=Ii(s,o.state.keyMaps[c],u,o);if(p)return p}return o.options.extraKeys&&Ii(s,o.options.extraKeys,u,o)||Ii(s,o.options.keyMap,u,o)}var Xp=new Pe;function va(o,s,u,c){var p=o.state.keySeq;if(p){if(pc(s))return"handled";if(/\'$/.test(s)?o.state.keySeq=null:Xp.set(50,function(){o.state.keySeq==p&&(o.state.keySeq=null,o.display.input.reset())}),Cs(o,p+" "+s,u,c))return!0}return Cs(o,s,u,c)}function Cs(o,s,u,c){var p=Jp(o,s,c);return p=="multi"&&(o.state.keySeq=s),p=="handled"&&xn(o,"keyHandled",o,s,u),p!="handled"&&p!="multi"||(Xe(u),cs(o)),!!p}function fc(o,s){var u=Au(s,!0);return!!u&&(s.shiftKey&&!o.state.keySeq?va(o,"Shift-"+u,s,function(c){return dl(o,c,!0)})||va(o,u,s,function(c){if(typeof c=="string"?/^go[A-Z]/.test(c):c.motion)return dl(o,c)}):va(o,u,s,function(c){return dl(o,c)}))}function zo(o,s,u){return va(o,"'"+u+"'",s,function(c){return dl(o,c,!0)})}var dc=null;function hc(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField()||(s.curOp.focus=Pt(),_t(s,o)))){U&&S<11&&o.keyCode==27&&(o.returnValue=!1);var u=o.keyCode;s.display.shift=u==16||o.shiftKey;var c=fc(s,o);it&&(dc=c?u:null,c||u!=88||ko||!(pt?o.metaKey:o.ctrlKey)||s.replaceSelection("",null,"cut")),et&&!pt&&!c&&u==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),u!=18||/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)||Du(s)}}function Du(o){var s=o.display.lineDiv;function u(c){c.keyCode!=18&&c.altKey||(Z(s,"CodeMirror-crosshair"),rt(document,"keyup",u),rt(document,"mouseover",u))}Yt(s,"CodeMirror-crosshair"),Qt(document,"keyup",u),Qt(document,"mouseover",u)}function Nu(o){o.keyCode==16&&(this.doc.sel.shift=!1),_t(this,o)}function Iu(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField()||L(s.display,o)||_t(s,o)||o.ctrlKey&&!o.altKey||pt&&o.metaKey)){var u=o.keyCode,c=o.charCode;if(it&&u==dc)return dc=null,void Xe(o);if(!it||o.which&&!(o.which<10)||!fc(s,o)){var p=String.fromCharCode(c??u);p!="\b"&&(zo(s,o,p)||s.display.input.onKeyPress(o))}}}var ma,ya,Zp=400,hl=function(o,s,u){this.time=o,this.pos=s,this.button=u};function gl(o,s){var u=+new Date;return ya&&ya.compare(u,o,s)?(ma=ya=null,"triple"):ma&&ma.compare(u,o,s)?(ya=new hl(u,o,s),ma=null,"double"):(ma=new hl(u,o,s),ya=null,"single")}function Vu(o){var s=this,u=s.display;if(!(_t(s,o)||u.activeTouch&&u.input.supportsTouch())){if(u.input.ensurePolled(),u.shift=o.shiftKey,L(u,o))E||(u.scroller.draggable=!1,setTimeout(function(){return u.scroller.draggable=!0},100));else if(!vc(s,o)){var c=Si(s,o),p=tr(o),h=c?gl(c,p):"single";window.focus(),p==1&&s.state.selectingText&&s.state.selectingText(o),c&&Fu(s,p,c,h,o)||(p==1?c?Qp(s,c,h,o):Nr(o)==u.scroller&&Xe(o):p==2?(c&&ol(s.doc,c),setTimeout(function(){return u.input.focus()},20)):p==3&&(O?s.display.input.onContextMenu(o):Ul(s)))}}}function Fu(o,s,u,c,p){var h="Click";return c=="double"?h="Double"+h:c=="triple"&&(h="Triple"+h),va(o,Pu(h=(s==1?"Left":s==2?"Middle":"Right")+h,p),p,function(m){if(typeof m=="string"&&(m=_s[m]),!m)return!1;var b=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),b=m(o,u)!=ce}finally{o.state.suppressEdits=!1}return b})}function Hu(o,s,u){var c=o.getOption("configureMouse"),p=c?c(o,s,u):{};if(p.unit==null){var h=Dt?u.shiftKey&&u.metaKey:u.altKey;p.unit=h?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(p.extend==null||o.doc.extend)&&(p.extend=o.doc.extend||u.shiftKey),p.addNew==null&&(p.addNew=pt?u.metaKey:u.ctrlKey),p.moveOnDrag==null&&(p.moveOnDrag=!(pt?u.altKey:u.ctrlKey)),p}function Qp(o,s,u,c){U?setTimeout(Oe(Xc,o),0):o.curOp.focus=Pt();var p,h=Hu(o,u,c),m=o.doc.sel;o.options.dragDrop&&Tn&&!o.isReadOnly()&&u=="single"&&(p=m.contains(s))>-1&&(P((p=m.ranges[p]).from(),s)<0||s.xRel>0)&&(P(p.to(),s)>0||s.xRel<0)?tf(o,c,s,h):ba(o,c,s,h)}function tf(o,s,u,c){var p=o.display,h=!1,m=Zn(o,function(k){E&&(p.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:Ul(o)),rt(p.wrapper.ownerDocument,"mouseup",m),rt(p.wrapper.ownerDocument,"mousemove",b),rt(p.scroller,"dragstart",x),rt(p.scroller,"drop",m),h||(Xe(k),c.addNew||ol(o.doc,u,null,null,c.extend),E&&!st||U&&S==9?setTimeout(function(){p.wrapper.ownerDocument.body.focus({preventScroll:!0}),p.input.focus()},20):p.input.focus())}),b=function(k){h=h||Math.abs(s.clientX-k.clientX)+Math.abs(s.clientY-k.clientY)>=10},x=function(){return h=!0};E&&(p.scroller.draggable=!0),o.state.draggingText=m,m.copy=!c.moveOnDrag,Qt(p.wrapper.ownerDocument,"mouseup",m),Qt(p.wrapper.ownerDocument,"mousemove",b),Qt(p.scroller,"dragstart",x),Qt(p.scroller,"drop",m),o.state.delayingBlurEvent=!0,setTimeout(function(){return p.input.focus()},20),p.scroller.dragDrop&&p.scroller.dragDrop()}function Ru(o,s,u){if(u=="char")return new an(s,s);if(u=="word")return o.findWordAt(s);if(u=="line")return new an($t(s.line,0),le(o.doc,$t(s.line+1,0)));var c=u(o,s);return new an(c.from,c.to)}function ba(o,s,u,c){U&&Ul(o);var p=o.display,h=o.doc;Xe(s);var m,b,x=h.sel,k=x.ranges;if(c.addNew&&!c.extend?(b=h.sel.contains(u),m=b>-1?k[b]:new an(u,u)):(m=h.sel.primary(),b=h.sel.primIndex),c.unit=="rectangle")c.addNew||(m=new an(u,u)),u=Si(o,s,!0,!0),b=-1;else{var $=Ru(o,u,c.unit);m=c.extend?Mi(m,$.anchor,$.head,c.extend):$}c.addNew?b==-1?(b=k.length,ir(h,oo(o,k.concat([m]),b),{scroll:!1,origin:"*mouse"})):k.length>1&&k[b].empty()&&c.unit=="char"&&!c.extend?(ir(h,oo(o,k.slice(0,b).concat(k.slice(b+1)),0),{scroll:!1,origin:"*mouse"}),x=h.sel):il(h,b,m,at):(b=0,ir(h,new Gr([m],0),at),x=h.sel);var K=u;function vt(re){if(P(K,re)!=0)if(K=re,c.unit=="rectangle"){for(var xe=[],we=o.options.tabSize,Ee=Ce(be(h,u.line).text,u.ch,we),dn=Ce(be(h,re.line).text,re.ch,we),hn=Math.min(Ee,dn),wr=Math.max(Ee,dn),wn=Math.min(u.line,re.line),pr=Math.min(o.lastLine(),Math.max(u.line,re.line));wn<=pr;wn++){var _r=be(h,wn).text,kn=qt(_r,hn,we);hn==wr?xe.push(new an($t(wn,kn),$t(wn,kn))):_r.length>kn&&xe.push(new an($t(wn,kn),$t(wn,qt(_r,wr,we))))}xe.length||xe.push(new an(u,u)),ir(h,oo(o,x.ranges.slice(0,b).concat(xe),b),{origin:"*mouse",scroll:!1}),o.scrollIntoView(re)}else{var Nn,yr=m,Wn=Ru(o,re,c.unit),In=yr.anchor;P(Wn.anchor,In)>0?(Nn=Wn.head,In=ve(yr.from(),Wn.anchor)):(Nn=Wn.anchor,In=oe(yr.to(),Wn.head));var Vn=x.ranges.slice(0);Vn[b]=vl(o,new an(le(h,In),Nn)),ir(h,oo(o,Vn,b),at)}}var mt=p.wrapper.getBoundingClientRect(),Ot=0;function zt(re){var xe=++Ot,we=Si(o,re,!0,c.unit=="rectangle");if(we)if(P(we,K)!=0){o.curOp.focus=Pt(),vt(we);var Ee=Qs(p,h);(we.line>=Ee.to||we.line<Ee.from)&&setTimeout(Zn(o,function(){Ot==xe&&zt(re)}),150)}else{var dn=re.clientY<mt.top?-20:re.clientY>mt.bottom?20:0;dn&&setTimeout(Zn(o,function(){Ot==xe&&(p.scroller.scrollTop+=dn,zt(re))}),50)}}function Kt(re){o.state.selectingText=!1,Ot=1/0,re&&(Xe(re),p.input.focus()),rt(p.wrapper.ownerDocument,"mousemove",se),rt(p.wrapper.ownerDocument,"mouseup",fe),h.history.lastSelOrigin=null}var se=Zn(o,function(re){re.buttons!==0&&tr(re)?zt(re):Kt(re)}),fe=Zn(o,Kt);o.state.selectingText=fe,Qt(p.wrapper.ownerDocument,"mousemove",se),Qt(p.wrapper.ownerDocument,"mouseup",fe)}function vl(o,s){var u=s.anchor,c=s.head,p=be(o.doc,u.line);if(P(u,c)==0&&u.sticky==c.sticky)return s;var h=ze(p);if(!h)return s;var m=ge(h,u.ch,u.sticky),b=h[m];if(b.from!=u.ch&&b.to!=u.ch)return s;var x,k=m+(b.from==u.ch==(b.level!=1)?0:1);if(k==0||k==h.length)return s;if(c.line!=u.line)x=(c.line-u.line)*(o.doc.direction=="ltr"?1:-1)>0;else{var $=ge(h,c.ch,c.sticky),K=$-m||(c.ch-u.ch)*(b.level==1?-1:1);x=$==k-1||$==k?K<0:K>0}var vt=h[k+(x?-1:0)],mt=x==(vt.level==1),Ot=mt?vt.from:vt.to,zt=mt?"after":"before";return u.ch==Ot&&u.sticky==zt?s:new an(new $t(u.line,Ot,zt),c)}function gc(o,s,u,c){var p,h;if(s.touches)p=s.touches[0].clientX,h=s.touches[0].clientY;else try{p=s.clientX,h=s.clientY}catch{return!1}if(p>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;c&&Xe(s);var m=o.display,b=m.lineDiv.getBoundingClientRect();if(h>b.bottom||!ye(o,u))return yn(s);h-=b.top-m.viewOffset;for(var x=0;x<o.display.gutterSpecs.length;++x){var k=m.gutters.childNodes[x];if(k&&k.getBoundingClientRect().right>=p)return ht(o,u,o,Bn(o.doc,h),o.display.gutterSpecs[x].className,s),yn(s)}}function vc(o,s){return gc(o,s,"gutterClick",!0)}function zu(o,s){L(o.display,s)||ef(o,s)||_t(o,s,"contextmenu")||O||o.display.input.onContextMenu(s)}function ef(o,s){return!!ye(o,"gutterContextMenu")&&gc(o,s,"gutterContextMenu",!1)}function mc(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),is(o)}hl.prototype.compare=function(o,s,u){return this.time+Zp>o&&P(s,this.pos)==0&&u==this.button};var xs={toString:function(){return"CodeMirror.Init"}},Bu={},Ss={};function Uu(o){var s=o.optionHandlers;function u(c,p,h,m){o.defaults[c]=p,h&&(s[c]=m?function(b,x,k){k!=xs&&h(b,x,k)}:h)}o.defineOption=u,o.Init=xs,u("value","",function(c,p){return c.setValue(p)},!0),u("mode",null,function(c,p){c.doc.modeOption=p,tl(c)},!0),u("indentUnit",2,tl,!0),u("indentWithTabs",!1),u("smartIndent",!0),u("tabSize",4,function(c){Fo(c),is(c),or(c)},!0),u("lineSeparator",null,function(c,p){if(c.doc.lineSep=p,p){var h=[],m=c.doc.first;c.doc.iter(function(x){for(var k=0;;){var $=x.text.indexOf(p,k);if($==-1)break;k=$+p.length,h.push($t(m,$))}m++});for(var b=h.length-1;b>=0;b--)ms(c.doc,p,h[b],$t(h[b].line,h[b].ch+p.length))}}),u("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(c,p,h){c.state.specialChars=new RegExp(p.source+(p.test("	")?"":"|	"),"g"),h!=xs&&c.refresh()}),u("specialCharPlaceholder",Ia,function(c){return c.refresh()},!0),u("electricChars",!0),u("inputStyle",ut?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),u("spellcheck",!1,function(c,p){return c.getInputField().spellcheck=p},!0),u("autocorrect",!1,function(c,p){return c.getInputField().autocorrect=p},!0),u("autocapitalize",!1,function(c,p){return c.getInputField().autocapitalize=p},!0),u("rtlMoveVisually",!Bt),u("wholeLineUpdateBefore",!0),u("theme","default",function(c){mc(c),ds(c)},!0),u("keyMap","default",function(c,p,h){var m=Ro(p),b=h!=xs&&Ro(h);b&&b.detach&&b.detach(c,m),m.attach&&m.attach(c,b||null)}),u("extraKeys",null),u("configureMouse",null),u("lineWrapping",!1,rf,!0),u("gutters",[],function(c,p){c.display.gutterSpecs=Xa(p,c.options.lineNumbers),ds(c)},!0),u("fixedGutter",!0,function(c,p){c.display.gutters.style.left=p?zl(c.display)+"px":"0",c.refresh()},!0),u("coverGutterNextToScrollbar",!1,function(c){return ps(c)},!0),u("scrollbarStyle","native",function(c){tu(c),ps(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),u("lineNumbers",!1,function(c,p){c.display.gutterSpecs=Xa(c.options.gutters,p),ds(c)},!0),u("firstLineNumber",1,ds,!0),u("lineNumberFormatter",function(c){return c},ds,!0),u("showCursorWhenSelecting",!1,Ks,!0),u("resetSelectionOnContextMenu",!0),u("lineWiseCopyCut",!0),u("pasteLinesPerSelection",!0),u("selectionsMayTouch",!1),u("readOnly",!1,function(c,p){p=="nocursor"&&(Ti(c),c.display.input.blur()),c.display.input.readOnlyChanged(p)}),u("screenReaderLabel",null,function(c,p){p=p===""?null:p,c.display.input.screenReaderLabelChanged(p)}),u("disableInput",!1,function(c,p){p||c.display.input.reset()},!0),u("dragDrop",!0,nf),u("allowDropFileTypes",null),u("cursorBlinkRate",530),u("cursorScrollMargin",0),u("cursorHeight",1,Ks,!0),u("singleCursorHeightPerLine",!0,Ks,!0),u("workTime",100),u("workDelay",100),u("flattenSpans",!0,Fo,!0),u("addModeClass",!1,Fo,!0),u("pollInterval",100),u("undoDepth",200,function(c,p){return c.doc.history.undoDepth=p}),u("historyEventDelay",1250),u("viewportMargin",10,function(c){return c.refresh()},!0),u("maxHighlightLength",1e4,Fo,!0),u("moveInputWithCursor",!0,function(c,p){p||c.display.input.resetPosition()}),u("tabindex",null,function(c,p){return c.display.input.getField().tabIndex=p||""}),u("autofocus",null),u("direction","ltr",function(c,p){return c.doc.setDirection(p)},!0),u("phrases",null)}function nf(o,s,u){if(!s!=!(u&&u!=xs)){var c=o.display.dragFunctions,p=s?Qt:rt;p(o.display.scroller,"dragstart",c.start),p(o.display.scroller,"dragenter",c.enter),p(o.display.scroller,"dragover",c.over),p(o.display.scroller,"dragleave",c.leave),p(o.display.scroller,"drop",c.drop)}}function rf(o){o.options.lineWrapping?(Yt(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(Z(o.display.wrapper,"CodeMirror-wrap"),Bs(o)),Bl(o),or(o),is(o),setTimeout(function(){return ps(o)},100)}function Sn(o,s){var u=this;if(!(this instanceof Sn))return new Sn(o,s);this.options=s=s?Ie(s):{},Ie(Bu,s,!1);var c=s.value;typeof c=="string"?c=new Un(c,s.mode,null,s.lineSeparator,s.direction):s.mode&&(c.modeOption=s.mode),this.doc=c;var p=new Sn.inputStyles[s.inputStyle](this),h=this.display=new iu(o,c,p,s);for(var m in h.wrapper.CodeMirror=this,mc(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),tu(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Pe,keySeq:null,specialChars:null},s.autofocus&&!ut&&h.input.focus(),U&&S<11&&setTimeout(function(){return u.display.input.reset(!0)},20),of(this),Pn(),Pi(this),this.curOp.forceUpdate=!0,pu(this,c),s.autofocus&&!ut||this.hasFocus()?setTimeout(function(){u.hasFocus()&&!u.state.focused&&Wl(u)},20):Ti(this),Ss)Ss.hasOwnProperty(m)&&Ss[m](this,s[m],xs);ru(this),s.finishInit&&s.finishInit(this);for(var b=0;b<yc.length;++b)yc[b](this);Ai(this),E&&s.lineWrapping&&getComputedStyle(h.lineDiv).textRendering=="optimizelegibility"&&(h.lineDiv.style.textRendering="auto")}function of(o){var s=o.display;Qt(s.scroller,"mousedown",Zn(o,Vu)),Qt(s.scroller,"dblclick",U&&S<11?Zn(o,function(x){if(!_t(o,x)){var k=Si(o,x);if(k&&!vc(o,x)&&!L(o.display,x)){Xe(x);var $=o.findWordAt(k);ol(o.doc,$.anchor,$.head)}}}):function(x){return _t(o,x)||Xe(x)}),Qt(s.scroller,"contextmenu",function(x){return zu(o,x)}),Qt(s.input.getField(),"contextmenu",function(x){s.scroller.contains(x.target)||zu(o,x)});var u,c={end:0};function p(){s.activeTouch&&(u=setTimeout(function(){return s.activeTouch=null},1e3),(c=s.activeTouch).end=+new Date)}function h(x){if(x.touches.length!=1)return!1;var k=x.touches[0];return k.radiusX<=1&&k.radiusY<=1}function m(x,k){if(k.left==null)return!0;var $=k.left-x.left,K=k.top-x.top;return $*$+K*K>400}Qt(s.scroller,"touchstart",function(x){if(!_t(o,x)&&!h(x)&&!vc(o,x)){s.input.ensurePolled(),clearTimeout(u);var k=+new Date;s.activeTouch={start:k,moved:!1,prev:k-c.end<=300?c:null},x.touches.length==1&&(s.activeTouch.left=x.touches[0].pageX,s.activeTouch.top=x.touches[0].pageY)}}),Qt(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),Qt(s.scroller,"touchend",function(x){var k=s.activeTouch;if(k&&!L(s,x)&&k.left!=null&&!k.moved&&new Date-k.start<300){var $,K=o.coordsChar(s.activeTouch,"page");$=!k.prev||m(k,k.prev)?new an(K,K):!k.prev.prev||m(k,k.prev.prev)?o.findWordAt(K):new an($t(K.line,0),le(o.doc,$t(K.line+1,0))),o.setSelection($.anchor,$.head),o.focus(),Xe(x)}p()}),Qt(s.scroller,"touchcancel",p),Qt(s.scroller,"scroll",function(){s.scroller.clientHeight&&(ea(o,s.scroller.scrollTop),Io(o,s.scroller.scrollLeft,!0),ht(o,"scroll",o))}),Qt(s.scroller,"mousewheel",function(x){return au(o,x)}),Qt(s.scroller,"DOMMouseScroll",function(x){return au(o,x)}),Qt(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(x){_t(o,x)||$e(x)},over:function(x){_t(o,x)||(Yp(o,x),$e(x))},start:function(x){return Su(o,x)},drop:Zn(o,Kp),leave:function(x){_t(o,x)||Ou(o)}};var b=s.input.getField();Qt(b,"keyup",function(x){return Nu.call(o,x)}),Qt(b,"keydown",Zn(o,hc)),Qt(b,"keypress",Zn(o,Iu)),Qt(b,"focus",function(x){return Wl(o,x)}),Qt(b,"blur",function(x){return Ti(o,x)})}Sn.defaults=Bu,Sn.optionHandlers=Ss;var yc=[];function wa(o,s,u,c){var p,h=o.doc;u==null&&(u="add"),u=="smart"&&(h.mode.indent?p=xo(o,s).state:u="prev");var m=o.options.tabSize,b=be(h,s),x=Ce(b.text,null,m);b.stateAfter&&(b.stateAfter=null);var k,$=b.text.match(/^\s*/)[0];if(c||/\S/.test(b.text)){if(u=="smart"&&((k=h.mode.indent(p,b.text.slice($.length),b.text))==ce||k>150)){if(!c)return;u="prev"}}else k=0,u="not";u=="prev"?k=s>h.first?Ce(be(h,s-1).text,null,m):0:u=="add"?k=x+o.options.indentUnit:u=="subtract"?k=x-o.options.indentUnit:typeof u=="number"&&(k=x+u),k=Math.max(0,k);var K="",vt=0;if(o.options.indentWithTabs)for(var mt=Math.floor(k/m);mt;--mt)vt+=m,K+="	";if(vt<k&&(K+=pe(k-vt)),K!=$)return ms(h,K,$t(s,0),$t(s,$.length),"+input"),b.stateAfter=null,!0;for(var Ot=0;Ot<h.sel.ranges.length;Ot++){var zt=h.sel.ranges[Ot];if(zt.head.line==s&&zt.head.ch<$.length){var Kt=$t(s,$.length);il(h,Ot,new an(Kt,Kt));break}}}Sn.defineInitHook=function(o){return yc.push(o)};var vo=null;function ml(o){vo=o}function bc(o,s,u,c,p){var h=o.doc;o.display.shift=!1,c||(c=h.sel);var m=+new Date-200,b=p=="paste"||o.state.pasteIncoming>m,x=To(s),k=null;if(b&&c.ranges.length>1)if(vo&&vo.text.join(`
`)==s){if(c.ranges.length%vo.text.length==0){k=[];for(var $=0;$<vo.text.length;$++)k.push(h.splitLines(vo.text[$]))}}else x.length==c.ranges.length&&o.options.pasteLinesPerSelection&&(k=je(x,function(se){return[se]}));for(var K=o.curOp.updateInput,vt=c.ranges.length-1;vt>=0;vt--){var mt=c.ranges[vt],Ot=mt.from(),zt=mt.to();mt.empty()&&(u&&u>0?Ot=$t(Ot.line,Ot.ch-u):o.state.overwrite&&!b?zt=$t(zt.line,Math.min(be(h,zt.line).text.length,zt.ch+ee(x).length)):b&&vo&&vo.lineWise&&vo.text.join(`
`)==x.join(`
`)&&(Ot=zt=$t(Ot.line,0)));var Kt={from:Ot,to:zt,text:k?k[vt%k.length]:x,origin:p||(b?"paste":o.state.cutIncoming>m?"cut":"+input")};Di(o.doc,Kt),xn(o,"inputRead",o,Kt)}s&&!b&&wc(o,s),us(o),o.curOp.updateInput<2&&(o.curOp.updateInput=K),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function Wu(o,s){var u=o.clipboardData&&o.clipboardData.getData("Text");if(u)return o.preventDefault(),s.isReadOnly()||s.options.disableInput||!s.hasFocus()||mr(s,function(){return bc(s,u,0,null,"paste")}),!0}function wc(o,s){if(o.options.electricChars&&o.options.smartIndent)for(var u=o.doc.sel,c=u.ranges.length-1;c>=0;c--){var p=u.ranges[c];if(!(p.head.ch>100||c&&u.ranges[c-1].head.line==p.head.line)){var h=o.getModeAt(p.head),m=!1;if(h.electricChars){for(var b=0;b<h.electricChars.length;b++)if(s.indexOf(h.electricChars.charAt(b))>-1){m=wa(o,p.head.line,"smart");break}}else h.electricInput&&h.electricInput.test(be(o.doc,p.head.line).text.slice(0,p.head.ch))&&(m=wa(o,p.head.line,"smart"));m&&xn(o,"electricInput",o,p.head.line)}}}function $u(o){for(var s=[],u=[],c=0;c<o.doc.sel.ranges.length;c++){var p=o.doc.sel.ranges[c].head.line,h={anchor:$t(p,0),head:$t(p+1,0)};u.push(h),s.push(o.getRange(h.anchor,h.head))}return{text:s,ranges:u}}function qu(o,s,u,c){o.setAttribute("autocorrect",u?"":"off"),o.setAttribute("autocapitalize",c?"":"off"),o.setAttribute("spellcheck",!!s)}function Gu(){var o=gt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=gt("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return E?o.style.width="1000px":o.setAttribute("wrap","off"),Nt&&(o.style.border="1px solid black"),qu(o),s}function _c(o){var s=o.optionHandlers,u=o.helpers={};o.prototype={constructor:o,focus:function(){window.focus(),this.display.input.focus()},setOption:function(c,p){var h=this.options,m=h[c];h[c]==p&&c!="mode"||(h[c]=p,s.hasOwnProperty(c)&&Zn(this,s[c])(this,p,m),ht(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,p){this.state.keyMaps[p?"push":"unshift"](Ro(c))},removeKeyMap:function(c){for(var p=this.state.keyMaps,h=0;h<p.length;++h)if(p[h]==c||p[h].name==c)return p.splice(h,1),!0},addOverlay:ur(function(c,p){var h=c.token?c:o.getMode(this.options,c);if(h.startState)throw new Error("Overlays may not be stateful.");Je(this.state.overlays,{mode:h,modeSpec:c,opaque:p&&p.opaque,priority:p&&p.priority||0},function(m){return m.priority}),this.state.modeGen++,or(this)}),removeOverlay:ur(function(c){for(var p=this.state.overlays,h=0;h<p.length;++h){var m=p[h].modeSpec;if(m==c||typeof c=="string"&&m.name==c)return p.splice(h,1),this.state.modeGen++,void or(this)}}),indentLine:ur(function(c,p,h){typeof p!="string"&&typeof p!="number"&&(p=p==null?this.options.smartIndent?"smart":"prev":p?"add":"subtract"),Co(this.doc,c)&&wa(this,c,p,h)}),indentSelection:ur(function(c){for(var p=this.doc.sel.ranges,h=-1,m=0;m<p.length;m++){var b=p[m];if(b.empty())b.head.line>h&&(wa(this,b.head.line,c,!0),h=b.head.line,m==this.doc.sel.primIndex&&us(this));else{var x=b.from(),k=b.to(),$=Math.max(h,x.line);h=Math.min(this.lastLine(),k.line-(k.ch?0:1))+1;for(var K=$;K<h;++K)wa(this,K,c);var vt=this.doc.sel.ranges;x.ch==0&&p.length==vt.length&&vt[m].from().ch>0&&il(this.doc,m,new an(x,vt[m].to()),ue)}}}),getTokenAt:function(c,p){return Yo(this,c,p)},getLineTokens:function(c,p){return Yo(this,$t(c),p,!0)},getTokenTypeAt:function(c){c=le(this.doc,c);var p,h=Er(this,be(this.doc,c.line)),m=0,b=(h.length-1)/2,x=c.ch;if(x==0)p=h[2];else for(;;){var k=m+b>>1;if((k?h[2*k-1]:0)>=x)b=k;else{if(!(h[2*k+1]<x)){p=h[2*k+2];break}m=k+1}}var $=p?p.indexOf("overlay "):-1;return $<0?p:$==0?null:p.slice(0,$-1)},getModeAt:function(c){var p=this.doc.mode;return p.innerMode?o.innerMode(p,this.getTokenAt(c).state).mode:p},getHelper:function(c,p){return this.getHelpers(c,p)[0]},getHelpers:function(c,p){var h=[];if(!u.hasOwnProperty(p))return h;var m=u[p],b=this.getModeAt(c);if(typeof b[p]=="string")m[b[p]]&&h.push(m[b[p]]);else if(b[p])for(var x=0;x<b[p].length;x++){var k=m[b[p][x]];k&&h.push(k)}else b.helperType&&m[b.helperType]?h.push(m[b.helperType]):m[b.name]&&h.push(m[b.name]);for(var $=0;$<m._global.length;$++){var K=m._global[$];K.pred(b,this)&&me(h,K.val)==-1&&h.push(K.val)}return h},getStateAfter:function(c,p){var h=this.doc;return xo(this,(c=Ze(h,c??h.first+h.size-1))+1,p).state},cursorCoords:function(c,p){var h=this.doc.sel.primary();return Lr(this,c==null?h.head:typeof c=="object"?le(this.doc,c):c?h.from():h.to(),p||"page")},charCoords:function(c,p){return Wa(this,le(this.doc,c),p||"page")},coordsChar:function(c,p){return Fl(this,(c=Il(this,c,p||"page")).left,c.top)},lineAtHeight:function(c,p){return c=Il(this,{top:c,left:0},p||"page").top,Bn(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,p,h){var m,b=!1;if(typeof c=="number"){var x=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>x&&(c=x,b=!0),m=be(this.doc,c)}else m=c;return Ua(this,m,{top:0,left:0},p||"page",h||b).top+(b?this.doc.height-Br(m):0)},defaultTextHeight:function(){return po(this.display)},defaultCharWidth:function(){return ei(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,p,h,m,b){var x=this.display,k=(c=Lr(this,le(this.doc,c))).bottom,$=c.left;if(p.style.position="absolute",p.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(p),x.sizer.appendChild(p),m=="over")k=c.top;else if(m=="above"||m=="near"){var K=Math.max(x.wrapper.clientHeight,this.doc.height),vt=Math.max(x.sizer.clientWidth,x.lineSpace.clientWidth);(m=="above"||c.bottom+p.offsetHeight>K)&&c.top>p.offsetHeight?k=c.top-p.offsetHeight:c.bottom+p.offsetHeight<=K&&(k=c.bottom),$+p.offsetWidth>vt&&($=vt-p.offsetWidth)}p.style.top=k+"px",p.style.left=p.style.right="",b=="right"?($=x.sizer.clientWidth-p.offsetWidth,p.style.right="0px"):(b=="left"?$=0:b=="middle"&&($=(x.sizer.clientWidth-p.offsetWidth)/2),p.style.left=$+"px"),h&&Ep(this,{left:$,top:k,right:$+p.offsetWidth,bottom:k+p.offsetHeight})},triggerOnKeyDown:ur(hc),triggerOnKeyPress:ur(Iu),triggerOnKeyUp:Nu,triggerOnMouseDown:ur(Vu),execCommand:function(c){if(_s.hasOwnProperty(c))return _s[c].call(null,this)},triggerElectric:ur(function(c){wc(this,c)}),findPosH:function(c,p,h,m){var b=1;p<0&&(b=-1,p=-p);for(var x=le(this.doc,c),k=0;k<p&&!(x=yl(this.doc,x,b,h,m)).hitSide;++k);return x},moveH:ur(function(c,p){var h=this;this.extendSelectionsBy(function(m){return h.display.shift||h.doc.extend||m.empty()?yl(h.doc,m.head,c,p,h.options.rtlMoveVisually):c<0?m.from():m.to()},Zt)}),deleteH:ur(function(c,p){var h=this.doc.sel,m=this.doc;h.somethingSelected()?m.replaceSelection("",null,"+delete"):si(this,function(b){var x=yl(m,b.head,c,p,!1);return c<0?{from:x,to:b.head}:{from:b.head,to:x}})}),findPosV:function(c,p,h,m){var b=1,x=m;p<0&&(b=-1,p=-p);for(var k=le(this.doc,c),$=0;$<p;++$){var K=Lr(this,k,"div");if(x==null?x=K.left:K.left=x,(k=bl(this,K,b,h)).hitSide)break}return k},moveV:ur(function(c,p){var h=this,m=this.doc,b=[],x=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function($){if(x)return c<0?$.from():$.to();var K=Lr(h,$.head,"div");$.goalColumn!=null&&(K.left=$.goalColumn),b.push(K.left);var vt=bl(h,K,c,p);return p=="page"&&$==m.sel.primary()&&Ka(h,Wa(h,vt,"div").top-K.top),vt},Zt),b.length)for(var k=0;k<m.sel.ranges.length;k++)m.sel.ranges[k].goalColumn=b[k]}),findWordAt:function(c){var p=be(this.doc,c.line).text,h=c.ch,m=c.ch;if(p){var b=this.getHelper(c,"wordChars");c.sticky!="before"&&m!=p.length||!h?++m:--h;for(var x=p.charAt(h),k=Rt(x,b)?function($){return Rt($,b)}:/\s/.test(x)?function($){return/\s/.test($)}:function($){return!/\s/.test($)&&!Rt($)};h>0&&k(p.charAt(h-1));)--h;for(;m<p.length&&k(p.charAt(m));)++m}return new an($t(c.line,h),$t(c.line,m))},toggleOverwrite:function(c){c!=null&&c==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Yt(this.display.cursorDiv,"CodeMirror-overwrite"):Z(this.display.cursorDiv,"CodeMirror-overwrite"),ht(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Pt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ur(function(c,p){ta(this,c,p)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-ft(this)-this.display.barHeight,width:c.scrollWidth-ft(this)-this.display.barWidth,clientHeight:Jt(this),clientWidth:Vt(this)}},scrollIntoView:ur(function(c,p){c==null?(c={from:this.doc.sel.primary().head,to:null},p==null&&(p=this.options.cursorScrollMargin)):typeof c=="number"?c={from:$t(c,0),to:null}:c.from==null&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=p||0,c.from.line!=null?Pp(this,c):Zc(this,c.from,c.to,c.margin)}),setSize:ur(function(c,p){var h=this,m=function(x){return typeof x=="number"||/^\d+$/.test(String(x))?x+"px":x};c!=null&&(this.display.wrapper.style.width=m(c)),p!=null&&(this.display.wrapper.style.height=m(p)),this.options.lineWrapping&&za(this);var b=this.display.viewFrom;this.doc.iter(b,this.display.viewTo,function(x){if(x.widgets){for(var k=0;k<x.widgets.length;k++)if(x.widgets[k].noHScroll){fo(h,b,"widget");break}}++b}),this.curOp.forceUpdate=!0,ht(this,"refresh",this)}),operation:function(c){return mr(this,c)},startOperation:function(){return Pi(this)},endOperation:function(){return Ai(this)},refresh:ur(function(){var c=this.display.cachedTextHeight;or(this),this.curOp.forceUpdate=!0,is(this),ta(this,this.doc.scrollLeft,this.doc.scrollTop),Yl(this.display),(c==null||Math.abs(c-po(this.display))>.5||this.options.lineWrapping)&&Bl(this),ht(this,"refresh",this)}),swapDoc:ur(function(c){var p=this.doc;return p.cm=null,this.state.selectingText&&this.state.selectingText(),pu(this,c),is(this),this.display.input.reset(),ta(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,xn(this,"swapDoc",this,p),p}),phrase:function(c){var p=this.options.phrases;return p&&Object.prototype.hasOwnProperty.call(p,c)?p[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ue(o),o.registerHelper=function(c,p,h){u.hasOwnProperty(c)||(u[c]=o[c]={_global:[]}),u[c][p]=h},o.registerGlobalHelper=function(c,p,h,m){o.registerHelper(c,p,m),u[c]._global.push({pred:h,val:m})}}function yl(o,s,u,c,p){var h=s,m=u,b=be(o,s.line),x=p&&o.direction=="rtl"?-u:u;function k(){var fe=s.line+x;return!(fe<o.first||fe>=o.first+o.size)&&(s=new $t(fe,s.ch,s.sticky),b=be(o,fe))}function $(fe){var re;if(c=="codepoint"){var xe=b.text.charCodeAt(s.ch+(u>0?0:-1));if(isNaN(xe))re=null;else{var we=u>0?xe>=55296&&xe<56320:xe>=56320&&xe<57343;re=new $t(s.line,Math.max(0,Math.min(b.text.length,s.ch+u*(we?2:1))),-u)}}else re=p?ju(o.cm,b,s,u):pl(b,s,u);if(re==null){if(fe||!k())return!1;s=fl(p,o.cm,b,s.line,x)}else s=re;return!0}if(c=="char"||c=="codepoint")$();else if(c=="column")$(!0);else if(c=="word"||c=="group")for(var K=null,vt=c=="group",mt=o.cm&&o.cm.getHelper(s,"wordChars"),Ot=!0;!(u<0)||$(!Ot);Ot=!1){var zt=b.text.charAt(s.ch)||`
`,Kt=Rt(zt,mt)?"w":vt&&zt==`
`?"n":!vt||/\s/.test(zt)?null:"p";if(!vt||Ot||Kt||(Kt="s"),K&&K!=Kt){u<0&&(u=1,$(),s.sticky="after");break}if(Kt&&(K=Kt),u>0&&!$(!Ot))break}var se=aa(o,s,h,m,!0);return Y(h,se)&&(se.hitSide=!0),se}function bl(o,s,u,c){var p,h,m=o.doc,b=s.left;if(c=="page"){var x=Math.min(o.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),k=Math.max(x-.5*po(o.display),3);p=(u>0?s.bottom:s.top)+u*k}else c=="line"&&(p=u>0?s.bottom+3:s.top-3);for(;(h=Fl(o,b,p)).outside;){if(u<0?p<=0:p>=m.height){h.hitSide=!0;break}p+=5*u}return h}var un=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Pe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Cc(o,s){var u=os(o,s.line);if(!u||u.hidden)return null;var c=be(o.doc,s.line),p=qe(u,c,s.line),h=ze(c,o.doc.direction),m="left";h&&(m=ge(h,s.ch)%2?"right":"left");var b=Gs(p.map,s.ch,m);return b.offset=b.collapse=="right"?b.end:b.start,b}function sf(o){for(var s=o;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function Os(o,s){return s&&(o.bad=!0),o}function xc(o,s,u,c,p){var h="",m=!1,b=o.doc.lineSeparator(),x=!1;function k(mt){return function(Ot){return Ot.id==mt}}function $(){m&&(h+=b,x&&(h+=b),m=x=!1)}function K(mt){mt&&($(),h+=mt)}function vt(mt){if(mt.nodeType==1){var Ot=mt.getAttribute("cm-text");if(Ot)return void K(Ot);var zt,Kt=mt.getAttribute("cm-marker");if(Kt){var se=o.findMarks($t(c,0),$t(p+1,0),k(+Kt));return void(se.length&&(zt=se[0].find(0))&&K(lr(o.doc,zt.from,zt.to).join(b)))}if(mt.getAttribute("contenteditable")=="false")return;var fe=/^(pre|div|p|li|table|br)$/i.test(mt.nodeName);if(!/^br$/i.test(mt.nodeName)&&mt.textContent.length==0)return;fe&&$();for(var re=0;re<mt.childNodes.length;re++)vt(mt.childNodes[re]);/^(pre|p)$/i.test(mt.nodeName)&&(x=!0),fe&&(m=!0)}else mt.nodeType==3&&K(mt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;vt(s),s!=u;)s=s.nextSibling,x=!1;return h}function wl(o,s,u){var c;if(s==o.display.lineDiv){if(!(c=o.display.lineDiv.childNodes[u]))return Os(o.clipPos($t(o.display.viewTo-1)),!0);s=null,u=0}else for(c=s;;c=c.parentNode){if(!c||c==o.display.lineDiv)return null;if(c.parentNode&&c.parentNode==o.display.lineDiv)break}for(var p=0;p<o.display.view.length;p++){var h=o.display.view[p];if(h.node==c)return af(h,s,u)}}function af(o,s,u){var c=o.text.firstChild,p=!1;if(!s||!Lt(c,s))return Os($t(en(o.line),0),!0);if(s==c&&(p=!0,s=c.childNodes[u],u=0,!s)){var h=o.rest?ee(o.rest):o.line;return Os($t(en(h),h.text.length),p)}var m=s.nodeType==3?s:null,b=s;for(m||s.childNodes.length!=1||s.firstChild.nodeType!=3||(m=s.firstChild,u&&(u=m.nodeValue.length));b.parentNode!=c;)b=b.parentNode;var x=o.measure,k=x.maps;function $(Kt,se,fe){for(var re=-1;re<(k?k.length:0);re++)for(var xe=re<0?x.map:k[re],we=0;we<xe.length;we+=3){var Ee=xe[we+2];if(Ee==Kt||Ee==se){var dn=en(re<0?o.line:o.rest[re]),hn=xe[we]+fe;return(fe<0||Ee!=Kt)&&(hn=xe[we+(fe?1:0)]),$t(dn,hn)}}}var K=$(m,b,u);if(K)return Os(K,p);for(var vt=b.nextSibling,mt=m?m.nodeValue.length-u:0;vt;vt=vt.nextSibling){if(K=$(vt,vt.firstChild,0))return Os($t(K.line,K.ch-mt),p);mt+=vt.textContent.length}for(var Ot=b.previousSibling,zt=u;Ot;Ot=Ot.previousSibling){if(K=$(Ot,Ot.firstChild,-1))return Os($t(K.line,K.ch+zt),p);zt+=Ot.textContent.length}}un.prototype.init=function(o){var s=this,u=this,c=u.cm,p=u.div=o.lineDiv;function h(b){for(var x=b.target;x;x=x.parentNode){if(x==p)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(x.className))break}return!1}function m(b){if(h(b)&&!_t(c,b)){if(c.somethingSelected())ml({lineWise:!1,text:c.getSelections()}),b.type=="cut"&&c.replaceSelection("",null,"cut");else{if(!c.options.lineWiseCopyCut)return;var x=$u(c);ml({lineWise:!0,text:x.text}),b.type=="cut"&&c.operation(function(){c.setSelections(x.ranges,0,ue),c.replaceSelection("",null,"cut")})}if(b.clipboardData){b.clipboardData.clearData();var k=vo.text.join(`
`);if(b.clipboardData.setData("Text",k),b.clipboardData.getData("Text")==k)return void b.preventDefault()}var $=Gu(),K=$.firstChild;c.display.lineSpace.insertBefore($,c.display.lineSpace.firstChild),K.value=vo.text.join(`
`);var vt=Pt();ke(K),setTimeout(function(){c.display.lineSpace.removeChild($),vt.focus(),vt==p&&u.showPrimarySelection()},50)}}p.contentEditable=!0,qu(p,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize),Qt(p,"paste",function(b){!h(b)||_t(c,b)||Wu(b,c)||S<=11&&setTimeout(Zn(c,function(){return s.updateFromDOM()}),20)}),Qt(p,"compositionstart",function(b){s.composing={data:b.data,done:!1}}),Qt(p,"compositionupdate",function(b){s.composing||(s.composing={data:b.data,done:!1})}),Qt(p,"compositionend",function(b){s.composing&&(b.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),Qt(p,"touchstart",function(){return u.forceCompositionEnd()}),Qt(p,"input",function(){s.composing||s.readFromDOMSoon()}),Qt(p,"copy",m),Qt(p,"cut",m)},un.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},un.prototype.prepareSelection=function(){var o=Ys(this.cm,!1);return o.focus=Pt()==this.div,o},un.prototype.showSelection=function(o,s){o&&this.cm.display.view.length&&((o.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(o))},un.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},un.prototype.showPrimarySelection=function(){var o=this.getSelection(),s=this.cm,u=s.doc.sel.primary(),c=u.from(),p=u.to();if(s.display.viewTo==s.display.viewFrom||c.line>=s.display.viewTo||p.line<s.display.viewFrom)o.removeAllRanges();else{var h=wl(s,o.anchorNode,o.anchorOffset),m=wl(s,o.focusNode,o.focusOffset);if(!h||h.bad||!m||m.bad||P(ve(h,m),c)!=0||P(oe(h,m),p)!=0){var b=s.display.view,x=c.line>=s.display.viewFrom&&Cc(s,c)||{node:b[0].measure.map[2],offset:0},k=p.line<s.display.viewTo&&Cc(s,p);if(!k){var $=b[b.length-1].measure,K=$.maps?$.maps[$.maps.length-1]:$.map;k={node:K[K.length-1],offset:K[K.length-2]-K[K.length-3]}}if(x&&k){var vt,mt=o.rangeCount&&o.getRangeAt(0);try{vt=W(x.node,x.offset,k.offset,k.node)}catch{}vt&&(!et&&s.state.focused?(o.collapse(x.node,x.offset),vt.collapsed||(o.removeAllRanges(),o.addRange(vt))):(o.removeAllRanges(),o.addRange(vt)),mt&&o.anchorNode==null?o.addRange(mt):et&&this.startGracePeriod()),this.rememberSelection()}else o.removeAllRanges()}}},un.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},un.prototype.showMultipleSelections=function(o){Q(this.cm.display.cursorDiv,o.cursors),Q(this.cm.display.selectionDiv,o.selection)},un.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},un.prototype.selectionInEditor=function(){var o=this.getSelection();if(!o.rangeCount)return!1;var s=o.getRangeAt(0).commonAncestorContainer;return Lt(this.div,s)},un.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&Pt()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},un.prototype.blur=function(){this.div.blur()},un.prototype.getField=function(){return this.div},un.prototype.supportsTouch=function(){return!0},un.prototype.receivedFocus=function(){var o=this,s=this;function u(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,u))}this.selectionInEditor()?setTimeout(function(){return o.pollSelection()},20):mr(this.cm,function(){return s.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,u)},un.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},un.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var o=this.getSelection(),s=this.cm;if(ne&&M&&this.cm.display.gutterSpecs.length&&sf(o.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var u=wl(s,o.anchorNode,o.anchorOffset),c=wl(s,o.focusNode,o.focusOffset);u&&c&&mr(s,function(){ir(s.doc,ri(u,c),ue),(u.bad||c.bad)&&(s.curOp.selectionChanged=!0)})}}},un.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o,s,u,c=this.cm,p=c.display,h=c.doc.sel.primary(),m=h.from(),b=h.to();if(m.ch==0&&m.line>c.firstLine()&&(m=$t(m.line-1,be(c.doc,m.line-1).length)),b.ch==be(c.doc,b.line).text.length&&b.line<c.lastLine()&&(b=$t(b.line+1,0)),m.line<p.viewFrom||b.line>p.viewTo-1)return!1;m.line==p.viewFrom||(o=Oi(c,m.line))==0?(s=en(p.view[0].line),u=p.view[0].node):(s=en(p.view[o].line),u=p.view[o-1].node.nextSibling);var x,k,$=Oi(c,b.line);if($==p.view.length-1?(x=p.viewTo-1,k=p.lineDiv.lastChild):(x=en(p.view[$+1].line)-1,k=p.view[$+1].node.previousSibling),!u)return!1;for(var K=c.doc.splitLines(xc(c,u,k,s,x)),vt=lr(c.doc,$t(s,0),$t(x,be(c.doc,x).text.length));K.length>1&&vt.length>1;)if(ee(K)==ee(vt))K.pop(),vt.pop(),x--;else{if(K[0]!=vt[0])break;K.shift(),vt.shift(),s++}for(var mt=0,Ot=0,zt=K[0],Kt=vt[0],se=Math.min(zt.length,Kt.length);mt<se&&zt.charCodeAt(mt)==Kt.charCodeAt(mt);)++mt;for(var fe=ee(K),re=ee(vt),xe=Math.min(fe.length-(K.length==1?mt:0),re.length-(vt.length==1?mt:0));Ot<xe&&fe.charCodeAt(fe.length-Ot-1)==re.charCodeAt(re.length-Ot-1);)++Ot;if(K.length==1&&vt.length==1&&s==m.line)for(;mt&&mt>m.ch&&fe.charCodeAt(fe.length-Ot-1)==re.charCodeAt(re.length-Ot-1);)mt--,Ot++;K[K.length-1]=fe.slice(0,fe.length-Ot).replace(/^\u200b+/,""),K[0]=K[0].slice(mt).replace(/\u200b+$/,"");var we=$t(s,mt),Ee=$t(x,vt.length?ee(vt).length-Ot:0);return K.length>1||K[0]||P(we,Ee)?(ms(c.doc,K,we,Ee,"+input"),!0):void 0},un.prototype.ensurePolled=function(){this.forceCompositionEnd()},un.prototype.reset=function(){this.forceCompositionEnd()},un.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},un.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing){if(!o.composing.done)return;o.composing=null}o.updateFromDOM()},80))},un.prototype.updateFromDOM=function(){var o=this;!this.cm.isReadOnly()&&this.pollContent()||mr(this.cm,function(){return or(o.cm)})},un.prototype.setUneditable=function(o){o.contentEditable="false"},un.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||Zn(this.cm,bc)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},un.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},un.prototype.onContextMenu=function(){},un.prototype.resetPosition=function(){},un.prototype.needsContentAttribute=!0;var Dn=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new Pe,this.hasSelection=!1,this.composing=null};function lf(o,s){if((s=s?Ie(s):{}).value=o.value,!s.tabindex&&o.tabIndex&&(s.tabindex=o.tabIndex),!s.placeholder&&o.placeholder&&(s.placeholder=o.placeholder),s.autofocus==null){var u=Pt();s.autofocus=u==o||o.getAttribute("autofocus")!=null&&u==document.body}function c(){o.value=b.getValue()}var p;if(o.form&&(Qt(o.form,"submit",c),!s.leaveSubmitMethodAlone)){var h=o.form;p=h.submit;try{var m=h.submit=function(){c(),h.submit=p,h.submit(),h.submit=m}}catch{}}s.finishInit=function(x){x.save=c,x.getTextArea=function(){return o},x.toTextArea=function(){x.toTextArea=isNaN,c(),o.parentNode.removeChild(x.getWrapperElement()),o.style.display="",o.form&&(rt(o.form,"submit",c),s.leaveSubmitMethodAlone||typeof o.form.submit!="function"||(o.form.submit=p))}},o.style.display="none";var b=Sn(function(x){return o.parentNode.insertBefore(x,o.nextSibling)},s);return b}function cf(o){o.off=rt,o.on=Qt,o.wheelEventPixels=Hp,o.Doc=Un,o.splitLines=To,o.countColumn=Ce,o.findColumn=qt,o.isWordChar=yt,o.Pass=ce,o.signal=ht,o.Line=Ur,o.changeEnd=ho,o.scrollbarModel=Qc,o.Pos=$t,o.cmpPos=P,o.modes=gr,o.mimeModes=gn,o.resolveMode=Eo,o.getMode=no,o.modeExtensions=Yn,o.extendMode=zn,o.copyState=Jn,o.startState=_o,o.innerMode=qo,o.commands=_s,o.keyMap=go,o.keyName=Au,o.isModifierKey=pc,o.lookupKey=Ii,o.normalizeKeyMap=ul,o.StringStream=Qe,o.SharedTextMarker=da,o.TextMarker=ii,o.LineWidget=fa,o.e_preventDefault=Xe,o.e_stopPropagation=Hn,o.e_stop=$e,o.addClass=Yt,o.contains=Lt,o.rmClass=Z,o.keyNames=io}Dn.prototype.init=function(o){var s=this,u=this,c=this.cm;this.createField(o);var p=this.textarea;function h(m){if(!_t(c,m)){if(c.somethingSelected())ml({lineWise:!1,text:c.getSelections()});else{if(!c.options.lineWiseCopyCut)return;var b=$u(c);ml({lineWise:!0,text:b.text}),m.type=="cut"?c.setSelections(b.ranges,null,ue):(u.prevInput="",p.value=b.text.join(`
`),ke(p))}m.type=="cut"&&(c.state.cutIncoming=+new Date)}}o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),Nt&&(p.style.width="0px"),Qt(p,"input",function(){U&&S>=9&&s.hasSelection&&(s.hasSelection=null),u.poll()}),Qt(p,"paste",function(m){_t(c,m)||Wu(m,c)||(c.state.pasteIncoming=+new Date,u.fastPoll())}),Qt(p,"cut",h),Qt(p,"copy",h),Qt(o.scroller,"paste",function(m){if(!L(o,m)&&!_t(c,m)){if(!p.dispatchEvent)return c.state.pasteIncoming=+new Date,void u.focus();var b=new Event("paste");b.clipboardData=m.clipboardData,p.dispatchEvent(b)}}),Qt(o.lineSpace,"selectstart",function(m){L(o,m)||Xe(m)}),Qt(p,"compositionstart",function(){var m=c.getCursor("from");u.composing&&u.composing.range.clear(),u.composing={start:m,range:c.markText(m,c.getCursor("to"),{className:"CodeMirror-composing"})}}),Qt(p,"compositionend",function(){u.composing&&(u.poll(),u.composing.range.clear(),u.composing=null)})},Dn.prototype.createField=function(o){this.wrapper=Gu(),this.textarea=this.wrapper.firstChild},Dn.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},Dn.prototype.prepareSelection=function(){var o=this.cm,s=o.display,u=o.doc,c=Ys(o);if(o.options.moveInputWithCursor){var p=Lr(o,u.sel.primary().head,"div"),h=s.wrapper.getBoundingClientRect(),m=s.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,p.top+m.top-h.top)),c.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,p.left+m.left-h.left))}return c},Dn.prototype.showSelection=function(o){var s=this.cm.display;Q(s.cursorDiv,o.cursors),Q(s.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},Dn.prototype.reset=function(o){if(!this.contextMenuPending&&!this.composing){var s=this.cm;if(s.somethingSelected()){this.prevInput="";var u=s.getSelection();this.textarea.value=u,s.state.focused&&ke(this.textarea),U&&S>=9&&(this.hasSelection=u)}else o||(this.prevInput=this.textarea.value="",U&&S>=9&&(this.hasSelection=null))}},Dn.prototype.getField=function(){return this.textarea},Dn.prototype.supportsTouch=function(){return!1},Dn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ut||Pt()!=this.textarea))try{this.textarea.focus()}catch{}},Dn.prototype.blur=function(){this.textarea.blur()},Dn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Dn.prototype.receivedFocus=function(){this.slowPoll()},Dn.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},Dn.prototype.fastPoll=function(){var o=!1,s=this;function u(){s.poll()||o?(s.pollingFast=!1,s.slowPoll()):(o=!0,s.polling.set(60,u))}s.pollingFast=!0,s.polling.set(20,u)},Dn.prototype.poll=function(){var o=this,s=this.cm,u=this.textarea,c=this.prevInput;if(this.contextMenuPending||!s.state.focused||Uo(u)&&!c&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var p=u.value;if(p==c&&!s.somethingSelected())return!1;if(U&&S>=9&&this.hasSelection===p||pt&&/[\uf700-\uf7ff]/.test(p))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var h=p.charCodeAt(0);if(h!=8203||c||(c="​"),h==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,b=Math.min(c.length,p.length);m<b&&c.charCodeAt(m)==p.charCodeAt(m);)++m;return mr(s,function(){bc(s,p.slice(m),c.length-m,null,o.composing?"*compose":null),p.length>1e3||p.indexOf(`
`)>-1?u.value=o.prevInput="":o.prevInput=p,o.composing&&(o.composing.range.clear(),o.composing.range=s.markText(o.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Dn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Dn.prototype.onKeyPress=function(){U&&S>=9&&(this.hasSelection=null),this.fastPoll()},Dn.prototype.onContextMenu=function(o){var s=this,u=s.cm,c=u.display,p=s.textarea;s.contextMenuPending&&s.contextMenuPending();var h=Si(u,o),m=c.scroller.scrollTop;if(h&&!it){u.options.resetSelectionOnContextMenu&&u.doc.sel.contains(h)==-1&&Zn(u,ir)(u.doc,ri(h),ue);var b,x=p.style.cssText,k=s.wrapper.style.cssText,$=s.wrapper.offsetParent.getBoundingClientRect();if(s.wrapper.style.cssText="position: static",p.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(o.clientY-$.top-5)+"px; left: "+(o.clientX-$.left-5)+`px;
      z-index: 1000; background: `+(U?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,E&&(b=window.scrollY),c.input.focus(),E&&window.scrollTo(null,b),c.input.reset(),u.somethingSelected()||(p.value=s.prevInput=" "),s.contextMenuPending=mt,c.selForContextMenu=u.doc.sel,clearTimeout(c.detectingSelectAll),U&&S>=9&&vt(),O){$e(o);var K=function(){rt(window,"mouseup",K),setTimeout(mt,20)};Qt(window,"mouseup",K)}else setTimeout(mt,50)}function vt(){if(p.selectionStart!=null){var Ot=u.somethingSelected(),zt="​"+(Ot?p.value:"");p.value="⇚",p.value=zt,s.prevInput=Ot?"":"​",p.selectionStart=1,p.selectionEnd=zt.length,c.selForContextMenu=u.doc.sel}}function mt(){if(s.contextMenuPending==mt&&(s.contextMenuPending=!1,s.wrapper.style.cssText=k,p.style.cssText=x,U&&S<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=m),p.selectionStart!=null)){(!U||U&&S<9)&&vt();var Ot=0,zt=function(){c.selForContextMenu==u.doc.sel&&p.selectionStart==0&&p.selectionEnd>0&&s.prevInput=="​"?Zn(u,gu)(u):Ot++<10?c.detectingSelectAll=setTimeout(zt,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout(zt,200)}}},Dn.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},Dn.prototype.setUneditable=function(){},Dn.prototype.needsContentAttribute=!1,Uu(Sn),_c(Sn);var Ku="iter insert remove copy getEditor constructor".split(" ");for(var Ts in Un.prototype)Un.prototype.hasOwnProperty(Ts)&&me(Ku,Ts)<0&&(Sn.prototype[Ts]=function(o){return function(){return o.apply(this.doc,arguments)}}(Un.prototype[Ts]));return Ue(Un),Sn.inputStyles={textarea:Dn,contenteditable:un},Sn.defineMode=function(o){Sn.defaults.mode||o=="null"||(Sn.defaults.mode=o),$o.apply(this,arguments)},Sn.defineMIME=Fr,Sn.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),Sn.defineMIME("text/plain","null"),Sn.defineExtension=function(o,s){Sn.prototype[o]=s},Sn.defineDocExtension=function(o,s){Un.prototype[o]=s},Sn.fromTextArea=lf,cf(Sn),Sn.version="5.65.6",Sn}()},629:(_,lt,D)=>{(function(et){function xt(O){for(var I={},W=0;W<O.length;++W)I[O[W].toLowerCase()]=!0;return I}et.defineMode("css",function(O,I){var W=I.inline;I.propertyKeywords||(I=et.resolveMode("text/css"));var Z,bt,Q=O.indentUnit,gt=I.tokenHooks,F=I.documentTypes||{},Lt=I.mediaTypes||{},Pt=I.mediaFeatures||{},Yt=I.mediaValueKeywords||{},Ae=I.propertyKeywords||{},ke=I.nonStandardPropertyKeywords||{},Oe=I.fontProperties||{},Ie=I.counterDescriptors||{},Ce=I.colorKeywords||{},Pe=I.valueKeywords||{},me=I.allowNested,ae=I.lineComment,ce=I.supportsAtComponent===!0,ue=O.highlightNonStandardPropertyKeywords!==!1;function at(yt,Rt){return Z=Rt,yt}function Zt(yt,Rt){var y=yt.next();if(gt[y]){var j=gt[y](yt,Rt);if(j!==!1)return j}return y=="@"?(yt.eatWhile(/[\w\\\-]/),at("def",yt.current())):y=="="||(y=="~"||y=="|")&&yt.eat("=")?at(null,"compare"):y=='"'||y=="'"?(Rt.tokenize=qt(y),Rt.tokenize(yt,Rt)):y=="#"?(yt.eatWhile(/[\w\\\-]/),at("atom","hash")):y=="!"?(yt.match(/^\s*\w*/),at("keyword","important")):/\d/.test(y)||y=="."&&yt.eat(/\d/)?(yt.eatWhile(/[\w.%]/),at("number","unit")):y!=="-"?/[,+>*\/]/.test(y)?at(null,"select-op"):y=="."&&yt.match(/^-?[_a-z][_a-z0-9-]*/i)?at("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(y)?at(null,y):yt.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(yt.current())&&(Rt.tokenize=ie),at("variable callee","variable")):/[\w\\\-]/.test(y)?(yt.eatWhile(/[\w\\\-]/),at("property","word")):at(null,null):/[\d.]/.test(yt.peek())?(yt.eatWhile(/[\w.%]/),at("number","unit")):yt.match(/^-[\w\\\-]*/)?(yt.eatWhile(/[\w\\\-]/),yt.match(/^\s*:/,!1)?at("variable-2","variable-definition"):at("variable-2","variable")):yt.match(/^\w+-/)?at("meta","meta"):void 0}function qt(yt){return function(Rt,y){for(var j,H=!1;(j=Rt.next())!=null;){if(j==yt&&!H){yt==")"&&Rt.backUp(1);break}H=!H&&j=="\\"}return(j==yt||!H&&yt!=")")&&(y.tokenize=null),at("string","string")}}function ie(yt,Rt){return yt.next(),yt.match(/^\s*[\"\')]/,!1)?Rt.tokenize=null:Rt.tokenize=qt(")"),at(null,"(")}function pe(yt,Rt,y){this.type=yt,this.indent=Rt,this.prev=y}function ee(yt,Rt,y,j){return yt.context=new pe(y,Rt.indentation()+(j===!1?0:Q),yt.context),y}function je(yt){return yt.context.prev&&(yt.context=yt.context.prev),yt.context.type}function Je(yt,Rt,y){return jn[y.context.type](yt,Rt,y)}function Ke(yt,Rt,y,j){for(var H=j||1;H>0;H--)y.context=y.context.prev;return Je(yt,Rt,y)}function fn(yt){var Rt=yt.current().toLowerCase();bt=Pe.hasOwnProperty(Rt)?"atom":Ce.hasOwnProperty(Rt)?"keyword":"variable"}var jn={top:function(yt,Rt,y){if(yt=="{")return ee(y,Rt,"block");if(yt=="}"&&y.context.prev)return je(y);if(ce&&/@component/i.test(yt))return ee(y,Rt,"atComponentBlock");if(/^@(-moz-)?document$/i.test(yt))return ee(y,Rt,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(yt))return ee(y,Rt,"atBlock");if(/^@(font-face|counter-style)/i.test(yt))return y.stateArg=yt,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(yt))return"keyframes";if(yt&&yt.charAt(0)=="@")return ee(y,Rt,"at");if(yt=="hash")bt="builtin";else if(yt=="word")bt="tag";else{if(yt=="variable-definition")return"maybeprop";if(yt=="interpolation")return ee(y,Rt,"interpolation");if(yt==":")return"pseudo";if(me&&yt=="(")return ee(y,Rt,"parens")}return y.context.type},block:function(yt,Rt,y){if(yt=="word"){var j=Rt.current().toLowerCase();return Ae.hasOwnProperty(j)?(bt="property","maybeprop"):ke.hasOwnProperty(j)?(bt=ue?"string-2":"property","maybeprop"):me?(bt=Rt.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(bt+=" error","maybeprop")}return yt=="meta"?"block":me||yt!="hash"&&yt!="qualifier"?jn.top(yt,Rt,y):(bt="error","block")},maybeprop:function(yt,Rt,y){return yt==":"?ee(y,Rt,"prop"):Je(yt,Rt,y)},prop:function(yt,Rt,y){if(yt==";")return je(y);if(yt=="{"&&me)return ee(y,Rt,"propBlock");if(yt=="}"||yt=="{")return Ke(yt,Rt,y);if(yt=="(")return ee(y,Rt,"parens");if(yt!="hash"||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(Rt.current())){if(yt=="word")fn(Rt);else if(yt=="interpolation")return ee(y,Rt,"interpolation")}else bt+=" error";return"prop"},propBlock:function(yt,Rt,y){return yt=="}"?je(y):yt=="word"?(bt="property","maybeprop"):y.context.type},parens:function(yt,Rt,y){return yt=="{"||yt=="}"?Ke(yt,Rt,y):yt==")"?je(y):yt=="("?ee(y,Rt,"parens"):yt=="interpolation"?ee(y,Rt,"interpolation"):(yt=="word"&&fn(Rt),"parens")},pseudo:function(yt,Rt,y){return yt=="meta"?"pseudo":yt=="word"?(bt="variable-3",y.context.type):Je(yt,Rt,y)},documentTypes:function(yt,Rt,y){return yt=="word"&&F.hasOwnProperty(Rt.current())?(bt="tag",y.context.type):jn.atBlock(yt,Rt,y)},atBlock:function(yt,Rt,y){if(yt=="(")return ee(y,Rt,"atBlock_parens");if(yt=="}"||yt==";")return Ke(yt,Rt,y);if(yt=="{")return je(y)&&ee(y,Rt,me?"block":"top");if(yt=="interpolation")return ee(y,Rt,"interpolation");if(yt=="word"){var j=Rt.current().toLowerCase();bt=j=="only"||j=="not"||j=="and"||j=="or"?"keyword":Lt.hasOwnProperty(j)?"attribute":Pt.hasOwnProperty(j)?"property":Yt.hasOwnProperty(j)?"keyword":Ae.hasOwnProperty(j)?"property":ke.hasOwnProperty(j)?ue?"string-2":"property":Pe.hasOwnProperty(j)?"atom":Ce.hasOwnProperty(j)?"keyword":"error"}return y.context.type},atComponentBlock:function(yt,Rt,y){return yt=="}"?Ke(yt,Rt,y):yt=="{"?je(y)&&ee(y,Rt,me?"block":"top",!1):(yt=="word"&&(bt="error"),y.context.type)},atBlock_parens:function(yt,Rt,y){return yt==")"?je(y):yt=="{"||yt=="}"?Ke(yt,Rt,y,2):jn.atBlock(yt,Rt,y)},restricted_atBlock_before:function(yt,Rt,y){return yt=="{"?ee(y,Rt,"restricted_atBlock"):yt=="word"&&y.stateArg=="@counter-style"?(bt="variable","restricted_atBlock_before"):Je(yt,Rt,y)},restricted_atBlock:function(yt,Rt,y){return yt=="}"?(y.stateArg=null,je(y)):yt=="word"?(bt=y.stateArg=="@font-face"&&!Oe.hasOwnProperty(Rt.current().toLowerCase())||y.stateArg=="@counter-style"&&!Ie.hasOwnProperty(Rt.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(yt,Rt,y){return yt=="word"?(bt="variable","keyframes"):yt=="{"?ee(y,Rt,"top"):Je(yt,Rt,y)},at:function(yt,Rt,y){return yt==";"?je(y):yt=="{"||yt=="}"?Ke(yt,Rt,y):(yt=="word"?bt="tag":yt=="hash"&&(bt="builtin"),"at")},interpolation:function(yt,Rt,y){return yt=="}"?je(y):yt=="{"||yt==";"?Ke(yt,Rt,y):(yt=="word"?bt="variable":yt!="variable"&&yt!="("&&yt!=")"&&(bt="error"),"interpolation")}};return{startState:function(yt){return{tokenize:null,state:W?"block":"top",stateArg:null,context:new pe(W?"block":"top",yt||0,null)}},token:function(yt,Rt){if(!Rt.tokenize&&yt.eatSpace())return null;var y=(Rt.tokenize||Zt)(yt,Rt);return y&&typeof y=="object"&&(Z=y[1],y=y[0]),bt=y,Z!="comment"&&(Rt.state=jn[Rt.state](Z,yt,Rt)),bt},indent:function(yt,Rt){var y=yt.context,j=Rt&&Rt.charAt(0),H=y.indent;return y.type!="prop"||j!="}"&&j!=")"||(y=y.prev),y.prev&&(j!="}"||y.type!="block"&&y.type!="top"&&y.type!="interpolation"&&y.type!="restricted_atBlock"?(j!=")"||y.type!="parens"&&y.type!="atBlock_parens")&&(j!="{"||y.type!="at"&&y.type!="atBlock")||(H=Math.max(0,y.indent-Q)):H=(y=y.prev).indent),H},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:ae,fold:"brace"}});var q=["domain","regexp","url","url-prefix"],G=xt(q),U=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],S=xt(U),E=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],A=xt(E),M=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],N=xt(M),it=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],st=xt(it),Et=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],Mt=xt(Et),Nt=xt(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),ne=xt(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),ut=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],pt=xt(ut),Dt=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Bt=xt(Dt),kt=q.concat(U).concat(E).concat(M).concat(it).concat(Et).concat(ut).concat(Dt);function z(O,I){for(var W,Z=!1;(W=O.next())!=null;){if(Z&&W=="/"){I.tokenize=null;break}Z=W=="*"}return["comment","comment"]}et.registerHelper("hintWords","css",kt),et.defineMIME("text/css",{documentTypes:G,mediaTypes:S,mediaFeatures:A,mediaValueKeywords:N,propertyKeywords:st,nonStandardPropertyKeywords:Mt,fontProperties:Nt,counterDescriptors:ne,colorKeywords:pt,valueKeywords:Bt,tokenHooks:{"/":function(O,I){return!!O.eat("*")&&(I.tokenize=z,z(O,I))}},name:"css"}),et.defineMIME("text/x-scss",{mediaTypes:S,mediaFeatures:A,mediaValueKeywords:N,propertyKeywords:st,nonStandardPropertyKeywords:Mt,colorKeywords:pt,valueKeywords:Bt,fontProperties:Nt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(O,I){return O.eat("/")?(O.skipToEnd(),["comment","comment"]):O.eat("*")?(I.tokenize=z,z(O,I)):["operator","operator"]},":":function(O){return!!O.match(/^\s*\{/,!1)&&[null,null]},$:function(O){return O.match(/^[\w-]+/),O.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(O){return!!O.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),et.defineMIME("text/x-less",{mediaTypes:S,mediaFeatures:A,mediaValueKeywords:N,propertyKeywords:st,nonStandardPropertyKeywords:Mt,colorKeywords:pt,valueKeywords:Bt,fontProperties:Nt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(O,I){return O.eat("/")?(O.skipToEnd(),["comment","comment"]):O.eat("*")?(I.tokenize=z,z(O,I)):["operator","operator"]},"@":function(O){return O.eat("{")?[null,"interpolation"]:!O.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(O.eatWhile(/[\w\\\-]/),O.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),et.defineMIME("text/x-gss",{documentTypes:G,mediaTypes:S,mediaFeatures:A,propertyKeywords:st,nonStandardPropertyKeywords:Mt,fontProperties:Nt,counterDescriptors:ne,colorKeywords:pt,valueKeywords:Bt,supportsAtComponent:!0,tokenHooks:{"/":function(O,I){return!!O.eat("*")&&(I.tokenize=z,z(O,I))}},name:"css",helperType:"gss"})})(D(631))},531:(_,lt,D)=>{(function(et){var xt={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function q(N,it,st){var Et=N.current(),Mt=Et.search(it);return Mt>-1?N.backUp(Et.length-Mt):Et.match(/<\/?$/)&&(N.backUp(Et.length),N.match(it,!1)||N.match(Et)),st}var G={};function U(N){var it=G[N];return it||(G[N]=new RegExp("\\s+"+N+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function S(N,it){var st=N.match(U(it));return st?/^\s*(.*?)\s*$/.exec(st[2])[1]:""}function E(N,it){return new RegExp((it?"^":"")+"</\\s*"+N+"\\s*>","i")}function A(N,it){for(var st in N)for(var Et=it[st]||(it[st]=[]),Mt=N[st],Nt=Mt.length-1;Nt>=0;Nt--)Et.unshift(Mt[Nt])}function M(N,it){for(var st=0;st<N.length;st++){var Et=N[st];if(!Et[0]||Et[1].test(S(it,Et[0])))return Et[2]}}et.defineMode("htmlmixed",function(N,it){var st=et.getMode(N,{name:"xml",htmlMode:!0,multilineTagIndentFactor:it.multilineTagIndentFactor,multilineTagIndentPastTag:it.multilineTagIndentPastTag,allowMissingTagName:it.allowMissingTagName}),Et={},Mt=it&&it.tags,Nt=it&&it.scriptTypes;if(A(xt,Et),Mt&&A(Mt,Et),Nt)for(var ne=Nt.length-1;ne>=0;ne--)Et.script.unshift(["type",Nt[ne].matches,Nt[ne].mode]);function ut(pt,Dt){var Bt,kt=st.token(pt,Dt.htmlState),z=/\btag\b/.test(kt);if(z&&!/[<>\s\/]/.test(pt.current())&&(Bt=Dt.htmlState.tagName&&Dt.htmlState.tagName.toLowerCase())&&Et.hasOwnProperty(Bt))Dt.inTag=Bt+" ";else if(Dt.inTag&&z&&/>$/.test(pt.current())){var O=/^([\S]+) (.*)/.exec(Dt.inTag);Dt.inTag=null;var I=pt.current()==">"&&M(Et[O[1]],O[2]),W=et.getMode(N,I),Z=E(O[1],!0),bt=E(O[1],!1);Dt.token=function(Q,gt){return Q.match(Z,!1)?(gt.token=ut,gt.localState=gt.localMode=null,null):q(Q,bt,gt.localMode.token(Q,gt.localState))},Dt.localMode=W,Dt.localState=et.startState(W,st.indent(Dt.htmlState,"",""))}else Dt.inTag&&(Dt.inTag+=pt.current(),pt.eol()&&(Dt.inTag+=" "));return kt}return{startState:function(){return{token:ut,inTag:null,localMode:null,localState:null,htmlState:et.startState(st)}},copyState:function(pt){var Dt;return pt.localState&&(Dt=et.copyState(pt.localMode,pt.localState)),{token:pt.token,inTag:pt.inTag,localMode:pt.localMode,localState:Dt,htmlState:et.copyState(st,pt.htmlState)}},token:function(pt,Dt){return Dt.token(pt,Dt)},indent:function(pt,Dt,Bt){return!pt.localMode||/^\s*<\//.test(Dt)?st.indent(pt.htmlState,Dt,Bt):pt.localMode.indent?pt.localMode.indent(pt.localState,Dt,Bt):et.Pass},innerMode:function(pt){return{state:pt.localState||pt.htmlState,mode:pt.localMode||st}}}},"xml","javascript","css"),et.defineMIME("text/html","htmlmixed")})(D(631),D(589),D(876),D(629))},876:(_,lt,D)=>{(function(et){et.defineMode("javascript",function(xt,q){var G,U,S=xt.indentUnit,E=q.statementIndent,A=q.jsonld,M=q.json||A,N=q.trackScope!==!1,it=q.typescript,st=q.wordCharacters||/[\w$\xa1-\uffff]/,Et=function(){function P($n){return{type:$n,style:"keyword"}}var Y=P("keyword a"),It=P("keyword b"),oe=P("keyword c"),ve=P("keyword d"),Ze=P("operator"),le={type:"atom",style:"atom"};return{if:P("if"),while:Y,with:Y,else:It,do:It,try:It,finally:It,return:ve,break:ve,continue:ve,new:P("new"),delete:oe,void:oe,throw:oe,debugger:P("debugger"),var:P("var"),const:P("var"),let:P("var"),function:P("function"),catch:P("catch"),for:P("for"),switch:P("switch"),case:P("case"),default:P("default"),in:Ze,typeof:Ze,instanceof:Ze,true:le,false:le,null:le,undefined:le,NaN:le,Infinity:le,this:P("this"),class:P("class"),super:P("atom"),yield:oe,export:P("export"),import:P("import"),extends:oe,await:oe}}(),Mt=/[+\-*&%=<>!?|~^@]/,Nt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ne(P){for(var Y,It=!1,oe=!1;(Y=P.next())!=null;){if(!It){if(Y=="/"&&!oe)return;Y=="["?oe=!0:oe&&Y=="]"&&(oe=!1)}It=!It&&Y=="\\"}}function ut(P,Y,It){return G=P,U=It,Y}function pt(P,Y){var It=P.next();if(It=='"'||It=="'")return Y.tokenize=Dt(It),Y.tokenize(P,Y);if(It=="."&&P.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return ut("number","number");if(It=="."&&P.match(".."))return ut("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(It))return ut(It);if(It=="="&&P.eat(">"))return ut("=>","operator");if(It=="0"&&P.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return ut("number","number");if(/\d/.test(It))return P.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),ut("number","number");if(It=="/")return P.eat("*")?(Y.tokenize=Bt,Bt(P,Y)):P.eat("/")?(P.skipToEnd(),ut("comment","comment")):$t(P,Y,1)?(ne(P),P.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),ut("regexp","string-2")):(P.eat("="),ut("operator","operator",P.current()));if(It=="`")return Y.tokenize=kt,kt(P,Y);if(It=="#"&&P.peek()=="!")return P.skipToEnd(),ut("meta","meta");if(It=="#"&&P.eatWhile(st))return ut("variable","property");if(It=="<"&&P.match("!--")||It=="-"&&P.match("->")&&!/\S/.test(P.string.slice(0,P.start)))return P.skipToEnd(),ut("comment","comment");if(Mt.test(It))return It==">"&&Y.lexical&&Y.lexical.type==">"||(P.eat("=")?It!="!"&&It!="="||P.eat("="):/[<>*+\-|&?]/.test(It)&&(P.eat(It),It==">"&&P.eat(It))),It=="?"&&P.eat(".")?ut("."):ut("operator","operator",P.current());if(st.test(It)){P.eatWhile(st);var oe=P.current();if(Y.lastType!="."){if(Et.propertyIsEnumerable(oe)){var ve=Et[oe];return ut(ve.type,ve.style,oe)}if(oe=="async"&&P.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return ut("async","keyword",oe)}return ut("variable","variable",oe)}}function Dt(P){return function(Y,It){var oe,ve=!1;if(A&&Y.peek()=="@"&&Y.match(Nt))return It.tokenize=pt,ut("jsonld-keyword","meta");for(;(oe=Y.next())!=null&&(oe!=P||ve);)ve=!ve&&oe=="\\";return ve||(It.tokenize=pt),ut("string","string")}}function Bt(P,Y){for(var It,oe=!1;It=P.next();){if(It=="/"&&oe){Y.tokenize=pt;break}oe=It=="*"}return ut("comment","comment")}function kt(P,Y){for(var It,oe=!1;(It=P.next())!=null;){if(!oe&&(It=="`"||It=="$"&&P.eat("{"))){Y.tokenize=pt;break}oe=!oe&&It=="\\"}return ut("quasi","string-2",P.current())}var z="([{}])";function O(P,Y){Y.fatArrowAt&&(Y.fatArrowAt=null);var It=P.string.indexOf("=>",P.start);if(!(It<0)){if(it){var oe=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(P.string.slice(P.start,It));oe&&(It=oe.index)}for(var ve=0,Ze=!1,le=It-1;le>=0;--le){var $n=P.string.charAt(le),Mn=z.indexOf($n);if(Mn>=0&&Mn<3){if(!ve){++le;break}if(--ve==0){$n=="("&&(Ze=!0);break}}else if(Mn>=3&&Mn<6)++ve;else if(st.test($n))Ze=!0;else if(/["'\/`]/.test($n))for(;;--le){if(le==0)return;if(P.string.charAt(le-1)==$n&&P.string.charAt(le-2)!="\\"){le--;break}}else if(Ze&&!ve){++le;break}}Ze&&!ve&&(Y.fatArrowAt=le)}}var I={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function W(P,Y,It,oe,ve,Ze){this.indented=P,this.column=Y,this.type=It,this.prev=ve,this.info=Ze,oe!=null&&(this.align=oe)}function Z(P,Y){if(!N)return!1;for(var It=P.localVars;It;It=It.next)if(It.name==Y)return!0;for(var oe=P.context;oe;oe=oe.prev)for(It=oe.vars;It;It=It.next)if(It.name==Y)return!0}function bt(P,Y,It,oe,ve){var Ze=P.cc;for(Q.state=P,Q.stream=ve,Q.marked=null,Q.cc=Ze,Q.style=Y,P.lexical.hasOwnProperty("align")||(P.lexical.align=!0);;)if((Ze.length?Ze.pop():M?qt:at)(It,oe)){for(;Ze.length&&Ze[Ze.length-1].lex;)Ze.pop()();return Q.marked?Q.marked:It=="variable"&&Z(P,oe)?"variable-2":Y}}var Q={state:null,column:null,marked:null,cc:null};function gt(){for(var P=arguments.length-1;P>=0;P--)Q.cc.push(arguments[P])}function F(){return gt.apply(null,arguments),!0}function Lt(P,Y){for(var It=Y;It;It=It.next)if(It.name==P)return!0;return!1}function Pt(P){var Y=Q.state;if(Q.marked="def",N){if(Y.context){if(Y.lexical.info=="var"&&Y.context&&Y.context.block){var It=Yt(P,Y.context);if(It!=null)return void(Y.context=It)}else if(!Lt(P,Y.localVars))return void(Y.localVars=new Oe(P,Y.localVars))}q.globalVars&&!Lt(P,Y.globalVars)&&(Y.globalVars=new Oe(P,Y.globalVars))}}function Yt(P,Y){if(Y){if(Y.block){var It=Yt(P,Y.prev);return It?It==Y.prev?Y:new ke(It,Y.vars,!0):null}return Lt(P,Y.vars)?Y:new ke(Y.prev,new Oe(P,Y.vars),!1)}return null}function Ae(P){return P=="public"||P=="private"||P=="protected"||P=="abstract"||P=="readonly"}function ke(P,Y,It){this.prev=P,this.vars=Y,this.block=It}function Oe(P,Y){this.name=P,this.next=Y}var Ie=new Oe("this",new Oe("arguments",null));function Ce(){Q.state.context=new ke(Q.state.context,Q.state.localVars,!1),Q.state.localVars=Ie}function Pe(){Q.state.context=new ke(Q.state.context,Q.state.localVars,!0),Q.state.localVars=null}function me(){Q.state.localVars=Q.state.context.vars,Q.state.context=Q.state.context.prev}function ae(P,Y){var It=function(){var oe=Q.state,ve=oe.indented;if(oe.lexical.type=="stat")ve=oe.lexical.indented;else for(var Ze=oe.lexical;Ze&&Ze.type==")"&&Ze.align;Ze=Ze.prev)ve=Ze.indented;oe.lexical=new W(ve,Q.stream.column(),P,null,oe.lexical,Y)};return It.lex=!0,It}function ce(){var P=Q.state;P.lexical.prev&&(P.lexical.type==")"&&(P.indented=P.lexical.indented),P.lexical=P.lexical.prev)}function ue(P){function Y(It){return It==P?F():P==";"||It=="}"||It==")"||It=="]"?gt():F(Y)}return Y}function at(P,Y){return P=="var"?F(ae("vardef",Y),bn,ue(";"),ce):P=="keyword a"?F(ae("form"),pe,at,ce):P=="keyword b"?F(ae("form"),at,ce):P=="keyword d"?Q.stream.match(/^\s*$/,!1)?F():F(ae("stat"),je,ue(";"),ce):P=="debugger"?F(ue(";")):P=="{"?F(ae("}"),Pe,nn,ce,me):P==";"?F():P=="if"?(Q.state.lexical.info=="else"&&Q.state.cc[Q.state.cc.length-1]==ce&&Q.state.cc.pop()(),F(ae("form"),pe,at,ce,Uo)):P=="function"?F(gr):P=="for"?F(ae("form"),Pe,ko,at,me,ce):P=="class"||it&&Y=="interface"?(Q.marked="keyword",F(ae("form",P=="class"?P:Y),no,ce)):P=="variable"?it&&Y=="declare"?(Q.marked="keyword",F(at)):it&&(Y=="module"||Y=="enum"||Y=="type")&&Q.stream.match(/^\s*\w/,!1)?(Q.marked="keyword",Y=="enum"?F(Bn):Y=="type"?F($o,ue("operator"),_t,ue(";")):F(ae("form"),Tn,ue("{"),ae("}"),nn,ce,ce)):it&&Y=="namespace"?(Q.marked="keyword",F(ae("form"),qt,at,ce)):it&&Y=="abstract"?(Q.marked="keyword",F(at)):F(ae("stat"),ct):P=="switch"?F(ae("form"),pe,ue("{"),ae("}","switch"),Pe,nn,ce,ce,me):P=="case"?F(qt,ue(":")):P=="default"?F(ue(":")):P=="catch"?F(ae("form"),Ce,Zt,at,ce,me):P=="export"?F(ae("stat"),qo,ce):P=="import"?F(ae("stat"),Qe,ce):P=="async"?F(at):Y=="@"?F(qt,at):gt(ae("stat"),qt,ue(";"),ce)}function Zt(P){if(P=="(")return F(Fr,ue(")"))}function qt(P,Y){return ee(P,Y,!1)}function ie(P,Y){return ee(P,Y,!0)}function pe(P){return P!="("?gt():F(ae(")"),je,ue(")"),ce)}function ee(P,Y,It){if(Q.state.fatArrowAt==Q.stream.start){var oe=It?Rt:yt;if(P=="(")return F(Ce,ae(")"),Ve(Fr,")"),ce,ue("=>"),oe,me);if(P=="variable")return gt(Ce,Tn,ue("=>"),oe,me)}var ve=It?Ke:Je;return I.hasOwnProperty(P)?F(ve):P=="function"?F(gr,ve):P=="class"||it&&Y=="interface"?(Q.marked="keyword",F(ae("form"),Eo,ce)):P=="keyword c"||P=="async"?F(It?ie:qt):P=="("?F(ae(")"),je,ue(")"),ce,ve):P=="operator"||P=="spread"?F(It?ie:qt):P=="["?F(ae("]"),en,ce,ve):P=="{"?ze(Ct,"}",null,ve):P=="quasi"?gt(fn,ve):P=="new"?F(y(It)):F()}function je(P){return P.match(/[;\}\)\],]/)?gt():gt(qt)}function Je(P,Y){return P==","?F(je):Ke(P,Y,!1)}function Ke(P,Y,It){var oe=It==0?Je:Ke,ve=It==0?qt:ie;return P=="=>"?F(Ce,It?Rt:yt,me):P=="operator"?/\+\+|--/.test(Y)||it&&Y=="!"?F(oe):it&&Y=="<"&&Q.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?F(ae(">"),Ve(_t,">"),ce,oe):Y=="?"?F(qt,ue(":"),ve):F(ve):P=="quasi"?gt(fn,oe):P!=";"?P=="("?ze(ie,")","call",oe):P=="."?F(St,oe):P=="["?F(ae("]"),je,ue("]"),ce,oe):it&&Y=="as"?(Q.marked="keyword",F(_t,oe)):P=="regexp"?(Q.state.lastType=Q.marked="operator",Q.stream.backUp(Q.stream.pos-Q.stream.start-1),F(ve)):void 0:void 0}function fn(P,Y){return P!="quasi"?gt():Y.slice(Y.length-2)!="${"?F(fn):F(je,jn)}function jn(P){if(P=="}")return Q.marked="string-2",Q.state.tokenize=kt,F(fn)}function yt(P){return O(Q.stream,Q.state),gt(P=="{"?at:qt)}function Rt(P){return O(Q.stream,Q.state),gt(P=="{"?at:ie)}function y(P){return function(Y){return Y=="."?F(P?H:j):Y=="variable"&&it?F(Nr,P?Ke:Je):gt(P?ie:qt)}}function j(P,Y){if(Y=="target")return Q.marked="keyword",F(Je)}function H(P,Y){if(Y=="target")return Q.marked="keyword",F(Ke)}function ct(P){return P==":"?F(ce,at):gt(Je,ue(";"),ce)}function St(P){if(P=="variable")return Q.marked="property",F()}function Ct(P,Y){return P=="async"?(Q.marked="property",F(Ct)):P=="variable"||Q.style=="keyword"?(Q.marked="property",Y=="get"||Y=="set"?F(Xt):(it&&Q.state.fatArrowAt==Q.stream.start&&(It=Q.stream.match(/^\s*:\s*/,!1))&&(Q.state.fatArrowAt=Q.stream.pos+It[0].length),F(ge))):P=="number"||P=="string"?(Q.marked=A?"property":Q.style+" property",F(ge)):P=="jsonld-keyword"?F(ge):it&&Ae(Y)?(Q.marked="keyword",F(Ct)):P=="["?F(qt,Qt,ue("]"),ge):P=="spread"?F(ie,ge):Y=="*"?(Q.marked="keyword",F(Ct)):P==":"?gt(ge):void 0;var It}function Xt(P){return P!="variable"?gt(ge):(Q.marked="property",F(gr))}function ge(P){return P==":"?F(ie):P=="("?gt(gr):void 0}function Ve(P,Y,It){function oe(ve,Ze){if(It?It.indexOf(ve)>-1:ve==","){var le=Q.state.lexical;return le.info=="call"&&(le.pos=(le.pos||0)+1),F(function($n,Mn){return $n==Y||Mn==Y?gt():gt(P)},oe)}return ve==Y||Ze==Y?F():It&&It.indexOf(";")>-1?gt(P):F(ue(Y))}return function(ve,Ze){return ve==Y||Ze==Y?F():gt(P,oe)}}function ze(P,Y,It){for(var oe=3;oe<arguments.length;oe++)Q.cc.push(arguments[oe]);return F(ae(Y,It),Ve(P,Y),ce)}function nn(P){return P=="}"?F():gt(at,nn)}function Qt(P,Y){if(it){if(P==":")return F(_t);if(Y=="?")return F(Qt)}}function R(P,Y){if(it&&(P==":"||Y=="in"))return F(_t)}function rt(P){if(it&&P==":")return Q.stream.match(/^\s*\w+\s+is\b/,!1)?F(qt,ht,_t):F(_t)}function ht(P,Y){if(Y=="is")return Q.marked="keyword",F()}function _t(P,Y){return Y=="keyof"||Y=="typeof"||Y=="infer"||Y=="readonly"?(Q.marked="keyword",F(Y=="typeof"?ie:_t)):P=="variable"||Y=="void"?(Q.marked="type",F($e)):Y=="|"||Y=="&"?F(_t):P=="string"||P=="number"||P=="atom"?F($e):P=="["?F(ae("]"),Ve(_t,"]",","),ce,$e):P=="{"?F(ae("}"),ye,ce,$e):P=="("?F(Ve(yn,")"),te,$e):P=="<"?F(Ve(_t,">"),_t):P=="quasi"?gt(Xe,$e):void 0}function te(P){if(P=="=>")return F(_t)}function ye(P){return P.match(/[\}\)\]]/)?F():P==","||P==";"?F(ye):gt(Ue,ye)}function Ue(P,Y){return P=="variable"||Q.style=="keyword"?(Q.marked="property",F(Ue)):Y=="?"||P=="number"||P=="string"?F(Ue):P==":"?F(_t):P=="["?F(ue("variable"),R,ue("]"),Ue):P=="("?gt(gn,Ue):P.match(/[;\}\)\],]/)?void 0:F()}function Xe(P,Y){return P!="quasi"?gt():Y.slice(Y.length-2)!="${"?F(Xe):F(_t,Hn)}function Hn(P){if(P=="}")return Q.marked="string-2",Q.state.tokenize=kt,F(Xe)}function yn(P,Y){return P=="variable"&&Q.stream.match(/^\s*[?:]/,!1)||Y=="?"?F(yn):P==":"?F(_t):P=="spread"?F(yn):gt(_t)}function $e(P,Y){return Y=="<"?F(ae(">"),Ve(_t,">"),ce,$e):Y=="|"||P=="."||Y=="&"?F(_t):P=="["?F(_t,ue("]"),$e):Y=="extends"||Y=="implements"?(Q.marked="keyword",F(_t)):Y=="?"?F(_t,ue(":"),_t):void 0}function Nr(P,Y){if(Y=="<")return F(ae(">"),Ve(_t,">"),ce,$e)}function tr(){return gt(_t,Ir)}function Ir(P,Y){if(Y=="=")return F(_t)}function bn(P,Y){return Y=="enum"?(Q.marked="keyword",F(Bn)):gt(Tn,Qt,Rn,To)}function Tn(P,Y){return it&&Ae(Y)?(Q.marked="keyword",F(Tn)):P=="variable"?(Pt(Y),F()):P=="spread"?F(Tn):P=="["?ze(Vr,"]"):P=="{"?ze(Kn,"}"):void 0}function Kn(P,Y){return P!="variable"||Q.stream.match(/^\s*:/,!1)?(P=="variable"&&(Q.marked="property"),P=="spread"?F(Tn):P=="}"?gt():P=="["?F(qt,ue("]"),ue(":"),Kn):F(ue(":"),Tn,Rn)):(Pt(Y),F(Rn))}function Vr(){return gt(Tn,Rn)}function Rn(P,Y){if(Y=="=")return F(ie)}function To(P){if(P==",")return F(bn)}function Uo(P,Y){if(P=="keyword b"&&Y=="else")return F(ae("form","else"),at,ce)}function ko(P,Y){return Y=="await"?F(ko):P=="("?F(ae(")"),Wo,ce):void 0}function Wo(P){return P=="var"?F(bn,lo):P=="variable"?F(lo):gt(lo)}function lo(P,Y){return P==")"?F():P==";"?F(lo):Y=="in"||Y=="of"?(Q.marked="keyword",F(qt,lo)):gt(qt,lo)}function gr(P,Y){return Y=="*"?(Q.marked="keyword",F(gr)):P=="variable"?(Pt(Y),F(gr)):P=="("?F(Ce,ae(")"),Ve(Fr,")"),ce,rt,at,me):it&&Y=="<"?F(ae(">"),Ve(tr,">"),ce,gr):void 0}function gn(P,Y){return Y=="*"?(Q.marked="keyword",F(gn)):P=="variable"?(Pt(Y),F(gn)):P=="("?F(Ce,ae(")"),Ve(Fr,")"),ce,rt,me):it&&Y=="<"?F(ae(">"),Ve(tr,">"),ce,gn):void 0}function $o(P,Y){return P=="keyword"||P=="variable"?(Q.marked="type",F($o)):Y=="<"?F(ae(">"),Ve(tr,">"),ce):void 0}function Fr(P,Y){return Y=="@"&&F(qt,Fr),P=="spread"?F(Fr):it&&Ae(Y)?(Q.marked="keyword",F(Fr)):it&&P=="this"?F(Qt,Rn):gt(Tn,Qt,Rn)}function Eo(P,Y){return P=="variable"?no(P,Y):Yn(P,Y)}function no(P,Y){if(P=="variable")return Pt(Y),F(Yn)}function Yn(P,Y){return Y=="<"?F(ae(">"),Ve(tr,">"),ce,Yn):Y=="extends"||Y=="implements"||it&&P==","?(Y=="implements"&&(Q.marked="keyword"),F(it?_t:qt,Yn)):P=="{"?F(ae("}"),zn,ce):void 0}function zn(P,Y){return P=="async"||P=="variable"&&(Y=="static"||Y=="get"||Y=="set"||it&&Ae(Y))&&Q.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Q.marked="keyword",F(zn)):P=="variable"||Q.style=="keyword"?(Q.marked="property",F(Jn,zn)):P=="number"||P=="string"?F(Jn,zn):P=="["?F(qt,Qt,ue("]"),Jn,zn):Y=="*"?(Q.marked="keyword",F(zn)):it&&P=="("?gt(gn,zn):P==";"||P==","?F(zn):P=="}"?F():Y=="@"?F(qt,zn):void 0}function Jn(P,Y){if(Y=="!"||Y=="?")return F(Jn);if(P==":")return F(_t,Rn);if(Y=="=")return F(ie);var It=Q.state.lexical.prev;return gt(It&&It.info=="interface"?gn:gr)}function qo(P,Y){return Y=="*"?(Q.marked="keyword",F(cr,ue(";"))):Y=="default"?(Q.marked="keyword",F(qt,ue(";"))):P=="{"?F(Ve(_o,"}"),cr,ue(";")):gt(at)}function _o(P,Y){return Y=="as"?(Q.marked="keyword",F(ue("variable"))):P=="variable"?gt(ie,_o):void 0}function Qe(P){return P=="string"?F():P=="("?gt(qt):P=="."?gt(Je):gt(be,lr,cr)}function be(P,Y){return P=="{"?ze(be,"}"):(P=="variable"&&Pt(Y),Y=="*"&&(Q.marked="keyword"),F(Go))}function lr(P){if(P==",")return F(be,lr)}function Go(P,Y){if(Y=="as")return Q.marked="keyword",F(be)}function cr(P,Y){if(Y=="from")return Q.marked="keyword",F(qt)}function en(P){return P=="]"?F():gt(Ve(ie,"]"))}function Bn(){return gt(ae("form"),Tn,ue("{"),ae("}"),Ve(Co,"}"),ce,ce)}function Co(){return gt(Tn,Rn)}function Ko(P,Y){return P.lastType=="operator"||P.lastType==","||Mt.test(Y.charAt(0))||/[,.]/.test(Y.charAt(0))}function $t(P,Y,It){return Y.tokenize==pt&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Y.lastType)||Y.lastType=="quasi"&&/\{\s*$/.test(P.string.slice(0,P.pos-(It||0)))}return Ce.lex=Pe.lex=!0,me.lex=!0,ce.lex=!0,{startState:function(P){var Y={tokenize:pt,lastType:"sof",cc:[],lexical:new W((P||0)-S,0,"block",!1),localVars:q.localVars,context:q.localVars&&new ke(null,null,!1),indented:P||0};return q.globalVars&&typeof q.globalVars=="object"&&(Y.globalVars=q.globalVars),Y},token:function(P,Y){if(P.sol()&&(Y.lexical.hasOwnProperty("align")||(Y.lexical.align=!1),Y.indented=P.indentation(),O(P,Y)),Y.tokenize!=Bt&&P.eatSpace())return null;var It=Y.tokenize(P,Y);return G=="comment"?It:(Y.lastType=G!="operator"||U!="++"&&U!="--"?G:"incdec",bt(Y,It,G,U,P))},indent:function(P,Y){if(P.tokenize==Bt||P.tokenize==kt)return et.Pass;if(P.tokenize!=pt)return 0;var It,oe=Y&&Y.charAt(0),ve=P.lexical;if(!/^\s*else\b/.test(Y))for(var Ze=P.cc.length-1;Ze>=0;--Ze){var le=P.cc[Ze];if(le==ce)ve=ve.prev;else if(le!=Uo&&le!=me)break}for(;(ve.type=="stat"||ve.type=="form")&&(oe=="}"||(It=P.cc[P.cc.length-1])&&(It==Je||It==Ke)&&!/^[,\.=+\-*:?[\(]/.test(Y));)ve=ve.prev;E&&ve.type==")"&&ve.prev.type=="stat"&&(ve=ve.prev);var $n=ve.type,Mn=oe==$n;return $n=="vardef"?ve.indented+(P.lastType=="operator"||P.lastType==","?ve.info.length+1:0):$n=="form"&&oe=="{"?ve.indented:$n=="form"?ve.indented+S:$n=="stat"?ve.indented+(Ko(P,Y)?E||S:0):ve.info!="switch"||Mn||q.doubleIndentSwitch==0?ve.align?ve.column+(Mn?0:1):ve.indented+(Mn?0:S):ve.indented+(/^(?:case|default)\b/.test(Y)?S:2*S)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:M?null:"/*",blockCommentEnd:M?null:"*/",blockCommentContinue:M?null:" * ",lineComment:M?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:M?"json":"javascript",jsonldMode:A,jsonMode:M,expressionAllowed:$t,skipExpression:function(P){bt(P,"atom","atom","true",new et.StringStream("",2,null))}}}),et.registerHelper("wordChars","javascript",/[\w$]/),et.defineMIME("text/javascript","javascript"),et.defineMIME("text/ecmascript","javascript"),et.defineMIME("application/javascript","javascript"),et.defineMIME("application/x-javascript","javascript"),et.defineMIME("application/ecmascript","javascript"),et.defineMIME("application/json",{name:"javascript",json:!0}),et.defineMIME("application/x-json",{name:"javascript",json:!0}),et.defineMIME("application/manifest+json",{name:"javascript",json:!0}),et.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),et.defineMIME("text/typescript",{name:"javascript",typescript:!0}),et.defineMIME("application/typescript",{name:"javascript",typescript:!0})})(D(631))},589:(_,lt,D)=>{(function(et){var xt={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},q={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};et.defineMode("xml",function(G,U){var S,E,A=G.indentUnit,M={},N=U.htmlMode?xt:q;for(var it in N)M[it]=N[it];for(var it in U)M[it]=U[it];function st(F,Lt){function Pt(Ae){return Lt.tokenize=Ae,Ae(F,Lt)}var Yt=F.next();return Yt=="<"?F.eat("!")?F.eat("[")?F.match("CDATA[")?Pt(Nt("atom","]]>")):null:F.match("--")?Pt(Nt("comment","-->")):F.match("DOCTYPE",!0,!0)?(F.eatWhile(/[\w\._\-]/),Pt(ne(1))):null:F.eat("?")?(F.eatWhile(/[\w\._\-]/),Lt.tokenize=Nt("meta","?>"),"meta"):(S=F.eat("/")?"closeTag":"openTag",Lt.tokenize=Et,"tag bracket"):Yt=="&"?(F.eat("#")?F.eat("x")?F.eatWhile(/[a-fA-F\d]/)&&F.eat(";"):F.eatWhile(/[\d]/)&&F.eat(";"):F.eatWhile(/[\w\.\-:]/)&&F.eat(";"))?"atom":"error":(F.eatWhile(/[^&<]/),null)}function Et(F,Lt){var Pt=F.next();if(Pt==">"||Pt=="/"&&F.eat(">"))return Lt.tokenize=st,S=Pt==">"?"endTag":"selfcloseTag","tag bracket";if(Pt=="=")return S="equals",null;if(Pt=="<"){Lt.tokenize=st,Lt.state=kt,Lt.tagName=Lt.tagStart=null;var Yt=Lt.tokenize(F,Lt);return Yt?Yt+" tag error":"tag error"}return/[\'\"]/.test(Pt)?(Lt.tokenize=Mt(Pt),Lt.stringStartCol=F.column(),Lt.tokenize(F,Lt)):(F.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Mt(F){var Lt=function(Pt,Yt){for(;!Pt.eol();)if(Pt.next()==F){Yt.tokenize=Et;break}return"string"};return Lt.isInAttribute=!0,Lt}function Nt(F,Lt){return function(Pt,Yt){for(;!Pt.eol();){if(Pt.match(Lt)){Yt.tokenize=st;break}Pt.next()}return F}}function ne(F){return function(Lt,Pt){for(var Yt;(Yt=Lt.next())!=null;){if(Yt=="<")return Pt.tokenize=ne(F+1),Pt.tokenize(Lt,Pt);if(Yt==">"){if(F==1){Pt.tokenize=st;break}return Pt.tokenize=ne(F-1),Pt.tokenize(Lt,Pt)}}return"meta"}}function ut(F){return F&&F.toLowerCase()}function pt(F,Lt,Pt){this.prev=F.context,this.tagName=Lt||"",this.indent=F.indented,this.startOfLine=Pt,(M.doNotIndent.hasOwnProperty(Lt)||F.context&&F.context.noIndent)&&(this.noIndent=!0)}function Dt(F){F.context&&(F.context=F.context.prev)}function Bt(F,Lt){for(var Pt;;){if(!F.context||(Pt=F.context.tagName,!M.contextGrabbers.hasOwnProperty(ut(Pt))||!M.contextGrabbers[ut(Pt)].hasOwnProperty(ut(Lt))))return;Dt(F)}}function kt(F,Lt,Pt){return F=="openTag"?(Pt.tagStart=Lt.column(),z):F=="closeTag"?O:kt}function z(F,Lt,Pt){return F=="word"?(Pt.tagName=Lt.current(),E="tag",Z):M.allowMissingTagName&&F=="endTag"?(E="tag bracket",Z(F,Lt,Pt)):(E="error",z)}function O(F,Lt,Pt){if(F=="word"){var Yt=Lt.current();return Pt.context&&Pt.context.tagName!=Yt&&M.implicitlyClosed.hasOwnProperty(ut(Pt.context.tagName))&&Dt(Pt),Pt.context&&Pt.context.tagName==Yt||M.matchClosing===!1?(E="tag",I):(E="tag error",W)}return M.allowMissingTagName&&F=="endTag"?(E="tag bracket",I(F,Lt,Pt)):(E="error",W)}function I(F,Lt,Pt){return F!="endTag"?(E="error",I):(Dt(Pt),kt)}function W(F,Lt,Pt){return E="error",I(F,Lt,Pt)}function Z(F,Lt,Pt){if(F=="word")return E="attribute",bt;if(F=="endTag"||F=="selfcloseTag"){var Yt=Pt.tagName,Ae=Pt.tagStart;return Pt.tagName=Pt.tagStart=null,F=="selfcloseTag"||M.autoSelfClosers.hasOwnProperty(ut(Yt))?Bt(Pt,Yt):(Bt(Pt,Yt),Pt.context=new pt(Pt,Yt,Ae==Pt.indented)),kt}return E="error",Z}function bt(F,Lt,Pt){return F=="equals"?Q:(M.allowMissing||(E="error"),Z(F,Lt,Pt))}function Q(F,Lt,Pt){return F=="string"?gt:F=="word"&&M.allowUnquoted?(E="string",Z):(E="error",Z(F,Lt,Pt))}function gt(F,Lt,Pt){return F=="string"?gt:Z(F,Lt,Pt)}return st.isInText=!0,{startState:function(F){var Lt={tokenize:st,state:kt,indented:F||0,tagName:null,tagStart:null,context:null};return F!=null&&(Lt.baseIndent=F),Lt},token:function(F,Lt){if(!Lt.tagName&&F.sol()&&(Lt.indented=F.indentation()),F.eatSpace())return null;S=null;var Pt=Lt.tokenize(F,Lt);return(Pt||S)&&Pt!="comment"&&(E=null,Lt.state=Lt.state(S||Pt,F,Lt),E&&(Pt=E=="error"?Pt+" error":E)),Pt},indent:function(F,Lt,Pt){var Yt=F.context;if(F.tokenize.isInAttribute)return F.tagStart==F.indented?F.stringStartCol+1:F.indented+A;if(Yt&&Yt.noIndent)return et.Pass;if(F.tokenize!=Et&&F.tokenize!=st)return Pt?Pt.match(/^(\s*)/)[0].length:0;if(F.tagName)return M.multilineTagIndentPastTag!==!1?F.tagStart+F.tagName.length+2:F.tagStart+A*(M.multilineTagIndentFactor||1);if(M.alignCDATA&&/<!\[CDATA\[/.test(Lt))return 0;var Ae=Lt&&/^<(\/)?([\w_:\.-]*)/.exec(Lt);if(Ae&&Ae[1])for(;Yt;){if(Yt.tagName==Ae[2]){Yt=Yt.prev;break}if(!M.implicitlyClosed.hasOwnProperty(ut(Yt.tagName)))break;Yt=Yt.prev}else if(Ae)for(;Yt;){var ke=M.contextGrabbers[ut(Yt.tagName)];if(!ke||!ke.hasOwnProperty(ut(Ae[2])))break;Yt=Yt.prev}for(;Yt&&Yt.prev&&!Yt.startOfLine;)Yt=Yt.prev;return Yt?Yt.indent+A:F.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:M.htmlMode?"html":"xml",helperType:M.htmlMode?"html":"xml",skipAttribute:function(F){F.state==Q&&(F.state=Z)},xmlCurrentTag:function(F){return F.tagName?{name:F.tagName,close:F.type=="closeTag"}:null},xmlCurrentContext:function(F){for(var Lt=[],Pt=F.context;Pt;Pt=Pt.prev)Lt.push(Pt.tagName);return Lt.reverse()}}}),et.defineMIME("text/xml","xml"),et.defineMIME("application/xml","xml"),et.mimeModes.hasOwnProperty("text/html")||et.defineMIME("text/html",{name:"xml",htmlMode:!0})})(D(631))},858:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>et});const et={run:function(xt){xt.DomComponents.clear(),xt.CssComposer.clear()}}},884:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>G});var et=D(50),xt=D(163),q=D(668);const G={run:function(U){(0,et.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=U,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(U){this.toggleMove(),this.disableDragger()},onKeyUp:function(U){(0,xt.getKeyChar)(U)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(U){this.toggleDragger(1,U)},disableDragger:function(U){this.toggleDragger(0,U)},toggleDragger:function(U,S){var E=this.canvasModel,A=this.em,M=this.dragger,N=U?"add":"remove";this.getCanvas().classList[N]("".concat(this.ppfx,"is__grabbing")),M||(M=new q.Z({getPosition:function(){return{x:E.get("x"),y:E.get("y")}},setPosition:function(it){var st=it.x,Et=it.y;E.set({x:st,y:Et})},onStart:function(it,st){A.trigger("canvas:move:start",st)},onDrag:function(it,st){A.trigger("canvas:move",st)},onEnd:function(it,st){A.trigger("canvas:move:end",st)}}),this.dragger=M),U?M.start(S):M.stop()},toggleMove:function(U){var S=this.ppfx,E=U?"add":"remove",A=U?"on":"off",M={on:xt.on,off:xt.off},N=this.getCanvas(),it=["".concat(S,"is__grab")];!U&&it.push("".concat(S,"is__grabbing")),it.forEach(function(st){return N.classList[E](st)}),M[A](document,"keyup",this.onKeyUp),M[A](N,"mousedown",this.enableDragger),M[A](document,"mouseup",this.disableDragger)}}},790:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>U,defineCommand:()=>G});var et,xt=D(346),q=(et=function(S,E){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,M){A.__proto__=M}||function(A,M){for(var N in M)Object.prototype.hasOwnProperty.call(M,N)&&(A[N]=M[N])},et(S,E)},function(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function A(){this.constructor=S}et(S,E),S.prototype=E===null?Object.create(E):(A.prototype=E.prototype,new A)});function G(S){return S}const U=function(S){function E(A){var M=S.call(this,0)||this;M.config=A||{},M.em=M.config.em||{};var N=M.config.stylePrefix;return M.pfx=N,M.ppfx=M.config.pStylePrefix,M.hoverClass="".concat(N,"hover"),M.badgeClass="".concat(N,"badge"),M.plhClass="".concat(N,"placeholder"),M.freezClass="".concat(M.ppfx,"freezed"),M.canvas=M.em.Canvas,M.init(M.config),M}return q(E,S),E.prototype.onFrameScroll=function(A){},E.prototype.getCanvas=function(){return this.canvas.getElement()},E.prototype.getCanvasBody=function(){return this.canvas.getBody()},E.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},E.prototype.offset=function(A){var M=A.getBoundingClientRect();return{top:M.top+A.ownerDocument.body.scrollTop,left:M.left+A.ownerDocument.body.scrollLeft}},E.prototype.init=function(A){},E.prototype.callRun=function(A,M){M===void 0&&(M={});var N=this.id;if(A.trigger("run:".concat(N,":before"),M),!M||!M.abort){var it=M.sender||A,st=this.run(A,it,M);return A.trigger("run:".concat(N),st,M),A.trigger("run",N,st,M),st}A.trigger("abort:".concat(N),M)},E.prototype.callStop=function(A,M){M===void 0&&(M={});var N=this.id,it=M.sender||A;A.trigger("stop:".concat(N,":before"),M);var st=this.stop(A,it,M);return A.trigger("stop:".concat(N),st,M),A.trigger("stop",N,st,M),st},E.prototype.stopCommand=function(A){this.em.Commands.stop(this.id,A)},E.prototype.run=function(A,M,N){},E.prototype.stop=function(A,M,N){},E}(xt.Hn)},180:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>q});var et=D(50),xt=function(G,U,S){if(S||arguments.length===2)for(var E,A=0,M=U.length;A<M;A++)!E&&A in U||(E||(E=Array.prototype.slice.call(U,0,A)),E[A]=U[A]);return G.concat(E||Array.prototype.slice.call(U))};const q={run:function(G,U,S){var E=this;S===void 0&&(S={});var A=[],M=S.component||G.getSelectedAll();return(M=(0,et.isArray)(M)?xt([],M,!0):[M]).filter(Boolean).forEach(function(N){if(!N.get("removable"))return A.push(N),E.em.logWarning("The element is not removable",{component:N});N.remove()}),G.select(A),M}}},544:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>U});var et=D(50),xt=D(668),q=function(){return q=Object.assign||function(S){for(var E,A=1,M=arguments.length;A<M;A++)for(var N in E=arguments[A])Object.prototype.hasOwnProperty.call(E,N)&&(S[N]=E[N]);return S},q.apply(this,arguments)},G="dmode";const U={run:function(S,E,A){var M=this;A===void 0&&(A={}),(0,et.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var N=A.target,it=A.event,st=A.mode,Et=A.dragger,Mt=Et===void 0?{}:Et,Nt=N.getEl(),ne=q({doc:Nt.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return M.guidesStatic},guidesTarget:function(){return M.guidesTarget}},Mt);this.setupGuides(),this.opts=A,this.editor=S,this.em=S.getModel(),this.target=N,this.isTran=st=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var ut=this.dragger;return ut?ut.setOptions(ne):(ut=new xt.Z(ne),this.dragger=ut),it&&ut.start(it),this.toggleDrag(1),this.em.trigger("".concat(G,":start"),this.getEventOpts()),ut},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(S){var E=S.guide;E&&E.parentNode.removeChild(E)}),this.guides=[]},getGuidesContainer:function(){var S=this,E=this.guidesEl;if(!E){var A=this,M=A.editor,N=A.em,it=A.opts,st=M.getConfig().stylePrefix,Et=document.createElement("div"),Mt=document.createElement("div"),Nt='<div class="'.concat(st,"guide-info__line ").concat(st,`danger-bg">
        <div class="`).concat(st,"guide-info__content ").concat(st,`danger-color"></div>
      </div>`);(E=document.createElement("div")).className="".concat(st,"guides"),Et.className="".concat(st,"guide-info ").concat(st,"guide-info__x"),Mt.className="".concat(st,"guide-info ").concat(st,"guide-info__y"),Et.innerHTML=Nt,Mt.innerHTML=Nt,E.appendChild(Et),E.appendChild(Mt),M.Canvas.getGlobalToolsEl().appendChild(E),this.guidesEl=E,this.elGuideInfoX=Et,this.elGuideInfoY=Mt,this.elGuideInfoContentX=Et.querySelector(".".concat(st,"guide-info__content")),this.elGuideInfoContentY=Mt.querySelector(".".concat(st,"guide-info__content")),N.on("canvas:update frame:scroll",(0,et.debounce)(function(){var ne;S.updateGuides(),it.debug&&((ne=S.guides)===null||ne===void 0||ne.forEach(function(ut){return S.renderGuide(ut)}))},200))}return E},getGuidesStatic:function(){var S=this,E=[],A=this.target.getEl(),M=A.parentNode,N=M===void 0?{}:M;return(0,et.each)(N.children,function(it){return E=E.concat(A!==it?S.getElementGuides(it):[])}),E.concat(this.getElementGuides(N))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(S){var E,A,M=this;(S||this.guides).forEach(function(N){var it=N.origin,st=E===it?A:M.getElementPos(it);E=it,A=st,(0,et.each)(M.getGuidePosUpdate(N,st),function(Et,Mt){return N[Mt]=Et}),N.originRect=st})},getGuidePosUpdate:function(S,E){var A={},M=E.top,N=E.height,it=E.left,st=E.width;switch(S.type){case"t":A.y=M;break;case"b":A.y=M+N;break;case"l":A.x=it;break;case"r":A.x=it+st;break;case"x":A.x=it+st/2;break;case"y":A.y=M+N/2}return A},renderGuide:function(S){S===void 0&&(S={});var E=S.guide||document.createElement("div"),A="px",M=S.active?2:1,N=E.children[0];return E.style="position: absolute; background-color: ".concat(S.active?"green":"red",";"),E.children.length||((N=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",E.appendChild(N)),S.y?(E.style.width="100%",E.style.height="".concat(M).concat(A),E.style.top="".concat(S.y).concat(A),E.style.left=0):(E.style.width="".concat(M).concat(A),E.style.height="100%",E.style.left="".concat(S.x).concat(A),E.style.top="0".concat(A)),!S.guide&&this.guidesContainer.appendChild(E),E},getElementPos:function(S){return this.editor.Canvas.getElementPos(S,{noScroll:1})},getElementGuides:function(S){var E=this,A=this.opts,M=this.getElementPos(S),N=M.top,it=M.height,st=M.left,Et=M.width,Mt=[{type:"t",y:N},{type:"b",y:N+it},{type:"l",x:st},{type:"r",x:st+Et},{type:"x",x:st+Et/2},{type:"y",y:N+it/2}].map(function(Nt){return q(q({},Nt),{origin:S,originRect:M,guide:A.debug&&E.renderGuide(Nt)})});return Mt.forEach(function(Nt){var ne;return(ne=E.guides)===null||ne===void 0?void 0:ne.push(Nt)}),Mt},getTranslate:function(S,E){E===void 0&&(E="x");var A=0;return(S||"").split(" ").forEach(function(M){var N=M.trim(),it="translate".concat(E.toUpperCase(),"(");N.indexOf(it)===0&&(A=parseFloat(N.replace(it,"")))}),A},setTranslate:function(S,E,A){var M="translate".concat(E.toUpperCase(),"("),N="".concat(M).concat(A,")"),it=(S||"").split(" ").map(function(st){return st.trim().indexOf(M)===0&&(st=N),st}).join(" ");return it.indexOf(M)<0&&(it+=" ".concat(N)),it},getPosition:function(){var S=this.target,E=this.isTran,A=S.getStyle(),M=A.left,N=A.top,it=A.transform,st=0,Et=0;return E?(st=this.getTranslate(it),Et=this.getTranslate(it,"y")):(st=parseFloat(M||0),Et=parseFloat(N||0)),{x:st,y:Et}},setPosition:function(S){var E=S.x,A=S.y,M=S.end,N=S.position,it=S.width,st=S.height,Et=this,Mt=Et.target,Nt=Et.isTran,ne=Et.em,ut="px",pt=M?"":1,Dt="".concat(E).concat(ut),Bt="".concat(A).concat(ut),kt={};if(Nt){var z=Mt.getStyle().transform||"";z=this.setTranslate(z,"x",Dt),kt={transform:z=this.setTranslate(z,"y",Bt),en:pt},Mt.addStyle(kt,{avoidStore:!M})}else{var O={position:N,width:it,height:st},I={left:Dt,top:Bt,en:pt};(0,et.keys)(O).forEach(function(W){var Z=O[W];Z&&(I[W]=Z)}),kt=I,Mt.addStyle(kt,{avoidStore:!M})}ne.getSelected()&&(0,et.keys)(kt).forEach(function(W){return ne.trigger("update:component:style:".concat(W))})},_getDragData:function(){var S=this.target;return{target:S,parent:S.parent(),index:S.index()}},onStart:function(S){var E=this,A=E.target,M=E.editor,N=E.isTran,it=E.opts,st=it.center,Et=it.onStart,Mt=M.Canvas,Nt=A.getStyle(),ne="absolute",ut=[ne,"relative"];if(Et&&Et(this._getDragData()),!N&&Nt.position!==ne){var pt=Mt.offset(A.getEl()),Dt=pt.left,Bt=pt.top,kt=pt.width,z=pt.height,O=A.parent(),I=void 0;do{var W=O.getStyle();I=ut.indexOf(W.position)>=0?O:null,O=O.parent()}while(O&&!I);if(st){var Z=Mt.getMouseRelativeCanvas(S);Dt=Z.x,Bt=Z.y}else if(I){var bt=Mt.offset(I.getEl());Dt-=bt.left,Bt-=bt.top}this.setPosition({x:Dt,y:Bt,width:"".concat(kt,"px"),height:"".concat(z,"px"),position:ne})}},onDrag:function(){for(var S=this,E=[],A=0;A<arguments.length;A++)E[A]=arguments[A];var M=this,N=M.guidesTarget,it=M.opts,st=it.onDrag;this.updateGuides(N),it.debug&&N.forEach(function(Et){return S.renderGuide(Et)}),it.guidesInfo&&this.renderGuideInfo(N.filter(function(Et){return Et.active})),st&&st(this._getDragData())},onEnd:function(S,E,A){A===void 0&&(A={});var M=this,N=M.editor,it=M.opts,st=M.id,Et=it.onEnd;Et&&Et(S,A,q(q({event:S},A),this._getDragData())),N.stopCommand(st),this.hideGuidesInfo(),this.em.trigger("".concat(G,":end"),this.getEventOpts())},hideGuidesInfo:function(){var S=this;["X","Y"].forEach(function(E){var A=S["elGuideInfo".concat(E)];A&&(A.style.display="none")})},renderGuideInfo:function(S){var E=this;S===void 0&&(S=[]);var A=this.guidesStatic;this.hideGuidesInfo(),S.forEach(function(M){var N=M.origin,it=M.x,st=E.getElementPos(N),Et=(0,et.isUndefined)(it)?"y":"x",Mt=Et==="y",Nt=st[Mt?"left":"top"],ne=st.rect[Mt?"left":"top"],ut=Mt?Nt+st.width:Nt+st.height,pt=Mt?ne+st.rect.width:ne+st.rect.height,Dt=E["elGuideInfo".concat(Et.toUpperCase())],Bt=E["elGuideInfoContent".concat(Et.toUpperCase())],kt=Dt.style,z=A==null?void 0:A.filter(function(Pe){return Pe.type===M.type}).map(function(Pe){var me=Pe.originRect,ae=me.left,ce=me.width,ue=me.top,at=me.height,Zt=Mt?ae+ce:ue+at;return{gap:Zt<Nt?Nt-Zt:(Mt?ae:ue)-ut,guide:Pe}}).filter(function(Pe){return Pe.gap>0}).sort(function(Pe,me){return Pe.gap-me.gap}).map(function(Pe){return Pe.guide})[0];if(z){var O=z.originRect,I=O.left,W=O.width,Z=O.top,bt=O.height,Q=O.rect,gt=Mt?I<st.left:Z<st.top,F=Mt?I:Z,Lt=Mt?Q.left:Q.top,Pt=Mt?I+W:Z+bt,Yt=Mt?Q.left+Q.width:Q.top+Q.height,Ae=Mt?M.y:M.x,ke=gt?Pt:ut,Oe="".concat(Ae,"px"),Ie=gt?Nt-Pt:F-ut,Ce=gt?ne-Yt:Lt-pt;kt.display="",kt[Mt?"top":"left"]=Oe,kt[Mt?"left":"top"]="".concat(ke,"px"),kt[Mt?"width":"height"]="".concat(Ie,"px"),Bt.innerHTML="".concat(Math.round(Ce),"px"),E.em.trigger("".concat(G,":active"),q(q({},E.getEventOpts()),{guide:M,guidesStatic:A,matched:z,posFirst:Ae,posSecond:ke,size:Ie,sizeRaw:Ce,elGuideInfo:Dt,elGuideInfoCnt:Bt}))}})},toggleDrag:function(S){var E=this.ppfx,A=this.editor,M=S?"add":"remove",N=["".concat(E,"is__grabbing")],it=A.Canvas,st=it.getBody();N.forEach(function(Et){return st.classList[M](Et)}),it[S?"startAutoscroll":"stopAutoscroll"]()}}},236:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>et});const et={run:function(xt){if(xt.Canvas.hasFocus()){var q=[];xt.getSelectedAll().forEach(function(G){var U=G.components(),S=U&&U.filter(function(E){return E.get("selectable")})[0];S&&q.push(S)}),q.length&&xt.select(q)}}}},368:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>et});const et={run:function(xt,q,G){if(G===void 0&&(G={}),xt.Canvas.hasFocus()||G.force){var U=[];xt.getSelectedAll().forEach(function(S){for(var E=S.parent();E&&!E.get("selectable");)E=E.parent();E&&U.push(E)}),U.length&&xt.select(U)}}}},243:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>et});const et={run:function(xt){if(xt.Canvas.hasFocus()){var q=[];xt.getSelectedAll().forEach(function(G){var U=G.parent();if(U){var S,E=U.components().length,A=0,M=0;do A++,S=(M=G.index()+A)<=E?U.getChildAt(M):null;while(S&&!S.get("selectable"));q.push(S||G)}}),q.length&&xt.select(q)}}}},400:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>et});const et={run:function(xt){if(xt.Canvas.hasFocus()){var q=[];xt.getSelectedAll().forEach(function(G){var U=G.parent();if(U){var S,E=0,A=0;do E++,S=(A=G.index()-E)>=0?U.getChildAt(A):null;while(S&&!S.get("selectable"));q.push(S||G)}}),q.length&&xt.select(q)}}}},910:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=D(50);const xt={run:function(q,G,U){U===void 0&&(U={});var S=U.target,E=[];if(!S.get("styles"))return E;var A=S.get("type"),M=q.Pages.getAllWrappers();if(!(0,et.flatten)(M.map(function(it){return it.findType(A)})).length){var N=q.CssComposer.getAll();E=N.filter(function(it){return it.get("group")==="cmp:".concat(A)}),N.remove(E)}return E}}},744:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=function(q,G,U){if(U||arguments.length===2)for(var S,E=0,A=G.length;E<A;E++)!S&&E in G||(S||(S=Array.prototype.slice.call(G,0,E)),S[E]=G[E]);return q.concat(S||Array.prototype.slice.call(G))};const xt={run:function(q){var G=q.getModel(),U=et([],q.getSelectedAll(),!0);U.length&&G.set("clipboard",U)}}},517:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>G});var et=D(50),xt=D(895),q=D(407);const G=(0,et.extend)({},q.default,{init:function(){(0,et.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(U){U.stopPropagation();var S=(0,xt.default)(U.target);S.data("model").get("removable")&&(S.addClass(this.hoverClass),this.attachBadge(S.get(0)))},stopDelete:function(U){U.stopPropagation(),(0,xt.default)(U.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(U){U.stopPropagation();var S=(0,xt.default)(U.target);S.data("model").get("removable")&&(S.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(U){this.badge.html("Remove "+U.getName())}})},457:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=D(895);const xt={run:function(q,G){var U=this;G&&G.set&&G.set("active",0);var S=q.getConfig(),E=q.Modal,A=S.stylePrefix;if(this.cm=q.CodeManager||null,!this.$editors){var M=this.buildEditor("htmlmixed","hopscotch","HTML"),N=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=M.el,this.cssEditor=N.el;var it=(0,et.default)('<div class="'.concat(A,'export-dl"></div>'));it.append(M.$el).append(N.$el),this.$editors=it}E.open({title:S.textViewCode,content:this.$editors}).getModel().once("change:open",function(){return q.stopCommand("".concat(U.id))}),this.htmlEditor.setContent(q.getHtml()),this.cssEditor.setContent(q.getCss())},stop:function(q){var G=q.Modal;G&&G.close()},buildEditor:function(q,G,U){var S=document.createElement("textarea");!this.codeMirror&&(this.codeMirror=this.cm.getViewer("CodeMirror"));var E=this.codeMirror.clone().set({label:U,codeName:q,theme:G,input:S}),A=new this.cm.EditorView({model:E,config:this.cm.getConfig()}).render().$el;return E.init(S),{el:E,$el:A}}}},975:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=D(50);const xt={isEnabled:function(){var q=document;return!!(q.fullscreenElement||q.webkitFullscreenElement||q.mozFullScreenElement)},enable:function(q){var G="";return q.requestFullscreen?q.requestFullscreen():q.webkitRequestFullscreen?(G="webkit",q.webkitRequestFullscreen()):q.mozRequestFullScreen?(G="moz",q.mozRequestFullScreen()):q.msRequestFullscreen&&q.msRequestFullscreen(),G},disable:function(){var q=document;this.isEnabled()&&(q.exitFullscreen?q.exitFullscreen():q.webkitExitFullscreen?q.webkitExitFullscreen():q.mozCancelFullScreen?q.mozCancelFullScreen():q.msExitFullscreen&&q.msExitFullscreen())},fsChanged:function(q){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(q||"","fullscreenchange"),this.fsChanged))},run:function(q,G,U){U===void 0&&(U={}),this.sender=G;var S=U.target,E=(0,et.isElement)(S)?S:document.querySelector(S),A=this.enable(E||q.getContainer());this.fsChanged=this.fsChanged.bind(this,A),document.addEventListener(A+"fullscreenchange",this.fsChanged),q.trigger("change:canvasOffset")},stop:function(q,G){G&&G.set&&G.set("active",!1),this.disable(),q&&q.trigger("change:canvasOffset")}}},191:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>S});var et=D(50),xt=D(895),q=D(163),G=D(407),U=D(189);const S=(0,et.extend)({},U.default,G.default,{init:function(E){G.default.init.apply(this,arguments),(0,et.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=E,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var E=[],A=0;A<arguments.length;A++)E[A]=arguments[A];G.default.enable.apply(this,E),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var M=this.$wrapper;M.css("cursor","move"),M.on("mousedown",this.initSorter),M.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(E){var A=(0,xt.default)(E.target).data("model").get("draggable");A&&(this.cacheEl=null,this.startSelectPosition(E.target,this.frameEl.contentDocument),this.sorter.draggable=A,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,q.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(E){var A=E.get("draggable");if(A){this.cacheEl=null;var M=E.view.el;this.startSelectPosition(M,this.frameEl.contentDocument),this.sorter.draggable=A,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,q.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(E){this.cacheEl=null;var A=E[E.length-1],M=(this.em.get("currentFrame")||{}).model,N=A.getEl(M),it=N.ownerDocument;this.startSelectPosition(N,it,{onStart:this.onStart}),this.sorter.draggable=A.get("draggable"),this.sorter.toMove=E,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,q.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,q.off)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,q.off)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(E,A){},rollback:function(E,A){((E.which||E.keyCode)==27||A)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,xt.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,xt.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var E=[],A=0;A<arguments.length;A++)E[A]=arguments[A];G.default.stop.apply(this,E),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var M=this.$wrapper;M.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>q});var et=D(50),xt=D(491);const q={open:function(G){var U=this,S=this,E=S.editor,A=S.title,M=S.config,N=S.am,it=M.custom;if((0,et.isFunction)(it.open))return it.open(N.__customData());E.Modal.open({title:A,content:G}).onceClose(function(){return E.stopCommand(U.id)})},close:function(){var G=this.config.custom;if((0,et.isFunction)(G.close))return G.close(this.am.__customData());var U=this.editor.Modal;U&&U.close()},run:function(G,U,S){S===void 0&&(S={});var E=G.AssetManager,A=E.getConfig(),M=S.types,N=M===void 0?[]:M,it=S.accept,st=S.select;if(this.title=S.modalTitle||G.t("assetManager.modalTitle")||"",this.editor=G,this.config=A,this.am=E,E.setTarget(S.target),E.onClick(S.onClick),E.onDblClick(S.onDblClick),E.onSelect(S.onSelect),E.__behaviour({select:st,types:N,options:S}),A.custom)this.rendered=this.rendered||(0,xt.ut)("div"),this.rendered.className="".concat(A.stylePrefix,"custom-wrp"),E.__behaviour({container:this.rendered}),E.__trgCustom();else{if(!this.rendered||N){var Et=E.getAll().filter(function(Nt){return Nt});N&&N.length&&(Et=Et.filter(function(Nt){return N.indexOf(Nt.get("type"))!==-1})),E.render(Et),this.rendered=E.getContainer()}if(it){var Mt=this.rendered.querySelector("input#".concat(A.stylePrefix,"uploadFile"));Mt&&Mt.setAttribute("accept",it)}}return this.open(this.rendered),this},stop:function(G){this.editor=G,this.close(this.rendered)}}},117:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>q});var et=D(50),xt=D(491);const q={open:function(){var G=this,U=G.container,S=G.editor,E=G.bm,A=G.config,M=A.custom,N=A.appendTo;if((0,et.isFunction)(M.open))return M.open(E.__customData());if(this.firstRender&&!N){var it="views-container",st=S.Panels;(st.getPanel(it)||st.addPanel({id:it})).set("appendContent",U).trigger("change:appendContent"),M||U.appendChild(E.render())}U&&(U.style.display="block")},close:function(){var G=this.container,U=this.config.custom;if((0,et.isFunction)(U.close))return U.close(this.bm.__customData());G&&(G.style.display="none")},run:function(G){var U=G.Blocks;this.config=U.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,xt.ut)("div"),this.editor=G,this.bm=U;var S=this.container;U.__behaviour({container:S}),this.config.custom&&U.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>et});const et={run:function(xt){var q=xt.LayerManager,G=xt.Panels,U=q.getConfig();if(!U.appendTo){if(!this.layers){var S="views-container",E=document.createElement("div"),A=G.getPanel(S)||G.addPanel({id:S});U.custom?q.__trgCustom({container:E}):E.appendChild(q.render()),A.set("appendContent",E).trigger("change:appendContent"),this.layers=E}this.layers.style.display="block"}},stop:function(){var xt=this.layers;xt&&(xt.style.display="none")}}},801:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=D(895);const xt={run:function(q,G){if(this.sender=G,!this.$cn){var U=q.getConfig(),S=q.Panels,E="change:appendContent";this.$cn=(0,et.default)("<div></div>"),this.$cn2=(0,et.default)("<div></div>"),this.$cn.append(this.$cn2);var A=q.DeviceManager;if(A&&U.showDevices){var M=S.addPanel({id:"devices-c"}),N=A.render();M.set("appendContent",N).trigger(E)}var it=q.SelectorManager;this.slm=it;var st=it.getConfig();st.custom?it.__trgCustom({container:this.$cn2.get(0)}):st.appendTo||this.$cn2.append(it.render([]));var Et=q.StyleManager;this.sm=Et;var Mt=Et.getConfig(),Nt=Mt.stylePrefix;this.$header=(0,et.default)('<div class="'.concat(Nt,'header">').concat(q.t("styleManager.empty"),"</div>")),this.$cn.append(this.$header),Mt.custom?Et.__trgCustom({container:this.$cn2.get(0)}):Mt.appendTo||this.$cn2.append(Et.render());var ne="views-container";this.panel=S.getPanel(ne),this.panel||(this.panel=S.addPanel({id:ne})),this.panel.set("appendContent",this.$cn).trigger(E),this.em=q.getModel(),this.listenTo(this.em,Et.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var q,G,U,S,E=this.sender,A=this.sm;E&&E.get&&!E.get("active")||!A||(A.getSelected()?((q=this.$cn2)===null||q===void 0||q.show(),(G=this.$header)===null||G===void 0||G.hide()):((U=this.$cn2)===null||U===void 0||U.hide(),(S=this.$header)===null||S===void 0||S.show()))},stop:function(){var q,G;(q=this.$cn2)===null||q===void 0||q.hide(),(G=this.$header)===null||G===void 0||G.hide()}}},395:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=D(895);const xt={run:function(q,G){this.sender=G;var U,S=q.getModel(),E=q.Config.stylePrefix,A=q.TraitManager,M=A.getConfig();if(!M.appendTo){if(!this.$cn){this.$cn=(0,et.default)("<div></div>"),this.$cn2=(0,et.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,et.default)("<div>").append('<div class="'.concat(M.stylePrefix,'header">').concat(S.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),this.$cn2.append('<div class="'.concat(E,'traits-label">').concat(S.t("traitManager.label"),"</div>")),this.$cn2.append(A.render());var N=q.Panels;(U=N.getPanel("views-container")?N.getPanel("views-container"):N.addPanel({id:"views-container"}))==null||U.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=q.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var q=this.sender;q&&q.get&&!q.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=D(50);const xt={run:function(q,G,U){U===void 0&&(U={});var S=q.getModel().get("clipboard"),E=q.getSelected();S&&E&&(q.getSelectedAll().forEach(function(A){var M=A.collection;if(M){var N,it={at:A.index()+1,action:U.action||"paste-component"};if((0,et.contains)(S,A)&&A.get("copyable"))N=M.add(A.clone(),it);else{var st=S.filter(function(Et){return Et.get("copyable")}).filter(function(Et){return q.Components.canMove(A.parent(),Et).result});N=M.add(st.map(function(Et){return Et.clone()}),it)}(N=(0,et.isArray)(N)?N:[N]).forEach(function(Et){return q.trigger("component:paste",Et)})}}),E.emitUpdate())}}},129:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>G});var et=D(50),xt=function(U,S,E){if(E||arguments.length===2)for(var A,M=0,N=S.length;M<N;M++)!A&&M in S||(A||(A=Array.prototype.slice.call(S,0,M)),A[M]=S[M]);return U.concat(A||Array.prototype.slice.call(S))},q="core:component-outline";const G={getPanels:function(U){return this.panels||(this.panels=U.Panels.getPanels()),this.panels},preventDrag:function(U){U.abort=1},tglEffects:function(U){var S=this.em,E=U?"on":"off";if(S){var A=S.Canvas,M=A.getBody(),N=A.getToolbarEl();N&&(N.style.display=U?"none":"");var it=M.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,et.each)(it,function(st){return st.style.pointerEvents=U?"all":""}),S[E]("run:tlb-move:before",this.preventDrag)}},run:function(U,S){var E=this;this.sender=S,this.selected=xt([],U.getSelectedAll(),!0),U.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=U.Commands.isActive(q)),this.shouldRunSwVisibility&&U.stopCommand(q),U.getModel().stopDefault();var A=this.getPanels(U),M=U.Canvas.getElement(),N=U.getEl(),it=U.Config.stylePrefix;if(!this.helper){var st=document.createElement("span");st.className="".concat(it,"off-prv fa fa-eye-slash"),N.appendChild(st),st.onclick=function(){return E.stopCommand()},this.helper=st}this.helper.style.display="inline-block",A.forEach(function(Mt){return Mt.set("visible",!1)});var Et=M.style;Et.width="100%",Et.height="100%",Et.top="0",Et.left="0",Et.padding="0",Et.margin="0",U.refresh(),this.tglEffects(1)},stop:function(U){var S=this.sender,E=S===void 0?{}:S,A=this.selected;E.set&&E.set("active",0);var M=this.getPanels(U);this.shouldRunSwVisibility&&(U.runCommand(q),this.shouldRunSwVisibility=!1),U.getModel().runDefault(),M.forEach(function(N){return N.set("visible",!0)}),U.Canvas.getElement().setAttribute("style",""),A&&U.select(A),delete this.selected,this.helper&&(this.helper.style.display="none"),U.refresh(),this.tglEffects()}}},116:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=function(){return et=Object.assign||function(q){for(var G,U=1,S=arguments.length;U<S;U++)for(var E in G=arguments[U])Object.prototype.hasOwnProperty.call(G,E)&&(q[E]=G[E]);return q},et.apply(this,arguments)};const xt={run:function(q,G,U){var S=U||{},E=q.Canvas,A=E.getCanvasView(),M=et({appendTo:E.getResizerEl(),prefix:q.getConfig().stylePrefix,posFetcher:A.getElementPos.bind(A),mousePosFetcher:E.getMouseRelativePos},S.options||{}),N=this.canvasResizer;return N&&!S.forceNew||(this.canvasResizer=new q.Utils.Resizer(M),N=this.canvasResizer),N.setOptions(M,!0),N.blur(),N.focus(S.el),N},stop:function(){var q;(q=this.canvasResizer)===null||q===void 0||q.blur()}}},407:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>kt});var et,xt=D(50),q=D(895),G=D(346),U=(et=function(z,O){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,W){I.__proto__=W}||function(I,W){for(var Z in W)Object.prototype.hasOwnProperty.call(W,Z)&&(I[Z]=W[Z])},et(z,O)},function(z,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function I(){this.constructor=z}et(z,O),z.prototype=O===null?Object.create(O):(I.prototype=O.prototype,new I)});const S=function(z){function O(){return z!==null&&z.apply(this,arguments)||this}return U(O,z),O.prototype.defaults=function(){return{command:"",attributes:{}}},O}(G.Hn);var E=function(){var z=function(O,I){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,Z){W.__proto__=Z}||function(W,Z){for(var bt in Z)Object.prototype.hasOwnProperty.call(Z,bt)&&(W[bt]=Z[bt])},z(O,I)};return function(O,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function W(){this.constructor=O}z(O,I),O.prototype=I===null?Object.create(I):(W.prototype=I.prototype,new W)}}(),A=function(z){function O(){return z!==null&&z.apply(this,arguments)||this}return E(O,z),O}(G.FE);const M=A;A.prototype.model=S;var N=D(330),it=function(){var z=function(O,I){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,Z){W.__proto__=Z}||function(W,Z){for(var bt in Z)Object.prototype.hasOwnProperty.call(Z,bt)&&(W[bt]=Z[bt])},z(O,I)};return function(O,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function W(){this.constructor=O}z(O,I),O.prototype=I===null?Object.create(I):(W.prototype=I.prototype,new W)}}(),st=function(){return st=Object.assign||function(z){for(var O,I=1,W=arguments.length;I<W;I++)for(var Z in O=arguments[I])Object.prototype.hasOwnProperty.call(O,Z)&&(z[Z]=O[Z]);return z},st.apply(this,arguments)};const Et=function(z){function O(I){var W=z.call(this,I)||this;return W.em=I.config.em,W}return it(O,z),O.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},O.prototype.attributes=function(){return this.model.get("attributes")},O.prototype.handleClick=function(I){I.preventDefault(),I.stopPropagation();var W=this.em,Z=W.Canvas.getFrameEl().getBoundingClientRect(),bt=Z.left,Q=Z.top,gt=st(st({},I),{clientX:I.clientX-bt,clientY:I.clientY-Q});W.trigger("toolbar:run:before",{event:gt}),this.execCommand(gt)},O.prototype.execCommand=function(I){var W=this.em,Z={event:I},bt=this.model.get("command"),Q=W.Editor;(0,xt.isFunction)(bt)&&bt(Q,null,Z),(0,xt.isString)(bt)&&Q.runCommand(bt,Z)},O.prototype.render=function(){var I=this,W=I.em,Z=I.$el,bt=I.model,Q=bt.get("id"),gt=bt.get("label"),F=W.getConfig().stylePrefix;return Z.addClass("".concat(F,"toolbar-item")),Q&&Z.addClass("".concat(F,"toolbar-item__").concat(Q)),gt&&Z.append(gt),this},O}(G.G7);var Mt=function(){var z=function(O,I){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,Z){W.__proto__=Z}||function(W,Z){for(var bt in Z)Object.prototype.hasOwnProperty.call(Z,bt)&&(W[bt]=Z[bt])},z(O,I)};return function(O,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function W(){this.constructor=O}z(O,I),O.prototype=I===null?Object.create(I):(W.prototype=I.prototype,new W)}}(),Nt=function(z){function O(I){var W=z.call(this,I)||this,Z=I.em;return W.em=Z,W.config={em:Z},W.listenTo(W.collection,"reset",W.render),W}return Mt(O,z),O.prototype.onRender=function(){var I=this.em.config.stylePrefix;this.el.className="".concat(I,"toolbar-items")},O}(N.Z);const ne=Nt;Nt.prototype.itemView=Et;var ut,pt=D(491),Dt=D(163),Bt=function(){return Bt=Object.assign||function(z){for(var O,I=1,W=arguments.length;I<W;I++)for(var Z in O=arguments[I])Object.prototype.hasOwnProperty.call(O,Z)&&(z[Z]=O[Z]);return z},Bt.apply(this,arguments)};const kt={init:function(z){(0,xt.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),ut=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(z){var O=this,I=this.em,W=I.getConfig().listenToEl,Z=I.getContainer().parentNode,bt=z?"on":"off",Q={on:Dt.on,off:Dt.off};!W.length&&Z&&W.push(Z),Q[bt](window,"resize",this.onFrameUpdated),Q[bt](W,"scroll",this.onContainerChange),I[bt]("component:toggled component:update undo redo",this.onSelect,this),I[bt]("change:componentHovered",this.onHovered,this),I[bt]("component:resize styleable:change component:input",this.updateGlobalPos,this),I[bt]("component:update:toolbar",this._upToolbar,this),I[bt]("change:canvasOffset",this.updateAttached,this),I[bt]("frame:updated",this.onFrameUpdated,this),I[bt]("canvas:updateTools",this.onFrameUpdated,this),I.Canvas.getFrames().forEach(function(gt){var F=gt.view,Lt=F==null?void 0:F.getWindow();Lt&&function(Pt,Yt){Q[bt](Yt,"mouseover",O.onHover),Q[bt](Yt,"mouseleave",O.onOut),Q[bt](Yt,"click",O.onClick),Q[bt](Pt,"scroll",O.onFrameScroll,!0)}(Lt,F==null?void 0:F.getBody())})},onHover:function(z){z.stopPropagation();var O=this.em,I=z.target,W=(0,Dt.getViewEl)(I),Z=W&&W._getFrame(),bt=(0,q.default)(I),Q=bt.data("model");if(!Q)for(var gt=bt.parent();!Q&&gt.length&&!(0,pt.Mx)(gt[0]);)Q=gt.data("model"),gt=gt.parent();this.currentDoc=I.ownerDocument,O.setHovered(Q,{useValid:!0}),Z&&O.set("currentFrame",Z)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(z,O){var I,W=this,Z={};O?(I=O.views)===null||I===void 0||I.forEach(function(bt){var Q=bt.el,gt=W.getElementPos(Q);Z={el:Q,pos:gt,component:O,view:(0,Dt.getViewEl)(Q)},W.updateToolsLocal(Z),Q.ownerDocument===W.currentDoc&&(W.elHovered=Z)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(bt){var Q=bt.view,gt=Q&&Q.getToolsEl();gt&&W.toggleToolsEl(0,0,{el:gt})}))},onSelect:(0,xt.debounce)(function(){var z=this.em,O=z.getSelected(),I=z.get("currentFrame")||{},W=O&&O.getView(I.model),Z=W&&W.el,bt={};Z&&(0,pt.pn)(Z)&&(bt={el:Z,pos:this.getElementPos(Z),component:O,view:(0,Dt.getViewEl)(Z)}),this.elSelected=bt,this.updateToolsGlobal(),this.updateLocalPos(bt),this.initResize(O)},0),updateGlobalPos:function(){var z=this.getElSelected();z.el&&(z.pos=this.getElementPos(z.el),this.updateToolsGlobal())},updateLocalPos:function(z){var O=this.getElHovered();O.el&&(O.pos=this.getElementPos(O.el),this.updateToolsLocal(z))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered(0)},toggleToolsEl:function(z,O,I){I===void 0&&(I={});var W=I.el||this.canvas.getToolsEl(O);return W&&(W.style.display=z?"":"none"),W||{}},showElementOffset:function(z,O,I){I===void 0&&(I={}),ut&&this.editor.runCommand("show-offset",{el:z,elPos:O,view:I.view,force:1,top:0,left:0})},hideElementOffset:function(z){this.editor.stopCommand("show-offset",{view:z})},showFixedElementOffset:function(z,O){this.editor.runCommand("show-offset",{el:z,elPos:O,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(z){this.canvas.getHighlighter(z).style.opacity=0},onClick:function(z){z.stopPropagation(),z.preventDefault();var O=this.em;if(O.get("_cmpDrag"))return O.set("_cmpDrag");var I=(0,q.default)(z.target),W=I.data("model");if(!W)for(var Z=I.parent();!W&&Z.length&&!(0,pt.Mx)(Z[0]);)W=Z.data("model"),Z=Z.parent();if(W){if(O.isEditing()&&!W.get("textable")&&W.isChildOf("text"))return;this.select(W,z)}},select:function(z,O){O===void 0&&(O={}),z&&(this.editor.select(z,{event:O,useValid:!0}),this.initResize(z))},updateBadge:function(z,O,I){I===void 0&&(I={});var W=this.canvas,Z=(0,q.default)(z).data("model");if(Z&&Z.get("badgable")){var bt=this.getBadge(I);if(!I.posOnly){var Q=this.canvas.getConfig(),gt=Z.getIcon(),F=Q.pStylePrefix||"",Lt="".concat(F,"badge"),Pt=Q.customBadgeLabel,Yt="".concat(gt?'<div class="'.concat(Lt,'__icon">').concat(gt,"</div>"):"",`
        <div class="`).concat(Lt,'__name">').concat(Z.getName(),"</div>");bt.innerHTML=Pt?Pt(Z):Yt}var Ae="px",ke=bt.style;ke.display="block";var Oe=W.getTargetToElementFixed(z,bt,{pos:O}).top,Ie=I.leftOff<0?-I.leftOff:0;ke.top=Oe+Ae,ke.left=Ie+Ae}},showHighlighter:function(z){this.canvas.getHighlighter(z).style.opacity=""},initResize:function(z){var O,I=this.em,W=this.canvas,Z=I==null?void 0:I.Editor,bt=(I==null?void 0:I.config).stylePrefix||"",Q="".concat(bt,"resizing"),gt=!(0,xt.isElement)(z)&&(0,Dt.isTaggableNode)(z)?z:I.getSelected(),F=gt&&gt.get("resizable"),Lt={},Pt=function(Ae,ke,Oe){var Ie=Oe.docs;Ie&&Ie.forEach(function(Ce){var Pe=Ce.body,me=Pe.className||"";Pe.className=(Ae=="add"?"".concat(me," ").concat(Q):me.replace(Q,"")).trim()})};if(Z&&F){var Yt=(0,xt.isElement)(z)?z:gt.getEl();Lt={onStart:function(Ae,ke){ke===void 0&&(ke={});var Oe=ke.el,Ie=ke.config,Ce=ke.resizer,Pe=Ie.keyHeight,me=Ie.keyWidth,ae=Ie.currentUnit,ce=Ie.keepAutoHeight,ue=Ie.keepAutoWidth;Pt("add",0,ke),O=I.Styles.getModelToStyle(gt),W.toggleFramesEvents(!1);var at=getComputedStyle(Oe),Zt=O.getStyle(),qt=Zt[me];Ie.autoWidth=ue&&qt==="auto",isNaN(parseFloat(qt))&&(qt=at[me]);var ie=Zt[Pe];Ie.autoHeight=ce&&ie==="auto",isNaN(parseFloat(ie))&&(ie=at[Pe]),Ce.startDim.w=parseFloat(qt),Ce.startDim.h=parseFloat(ie),ut=!1,ae&&(Ie.unitHeight=(0,Dt.getUnitFromValue)(ie),Ie.unitWidth=(0,Dt.getUnitFromValue)(qt))},onMove:function(){Z.trigger("component:resize")},onEnd:function(Ae,ke){Pt("remove",0,ke),Z.trigger("component:resize"),W.toggleFramesEvents(!0),ut=!0},updateTarget:function(Ae,ke,Oe){if(Oe===void 0&&(Oe={}),O){var Ie=Oe.store,Ce=Oe.selectedHandler,Pe=Oe.config,me=Pe.keyHeight,ae=Pe.keyWidth,ce=Pe.autoHeight,ue=Pe.autoWidth,at=Pe.unitWidth,Zt=Pe.unitHeight,qt=["tc","bc"].indexOf(Ce)>=0,ie=["cl","cr"].indexOf(Ce)>=0,pe={},ee=Ie?"":1;if(!qt){var je=W.getBody().offsetWidth,Je=ke.w<je?ke.w:je;pe[ae]=ue?"auto":"".concat(Je).concat(at)}ie||(pe[me]=ce?"auto":"".concat(ke.h).concat(Zt)),O.addStyle(Bt(Bt({},pe),{en:ee}),{avoidStore:!Ie});var Ke="update:component:style",fn="".concat(Ke,":").concat(me," ").concat(Ke,":").concat(ae);I&&I.trigger(fn,null,null,{noEmit:1})}}},typeof F=="object"&&(Lt=Bt(Bt(Bt({},Lt),F),{parent:Lt})),this.resizer=Z.runCommand("resize",{el:Yt,options:Lt,force:1})}else Z.stopCommand("resize"),this.resizer=null},updateToolbar:function(z){var O=this.config.em,I=z==O?O.getSelected():z,W=this.canvas.getToolbarEl(),Z=W.style,bt=I.get("toolbar"),Q=O.config.showToolbar;if(I&&Q&&bt&&bt.length){if(Z.display="",!this.toolbar){W.innerHTML="",this.toolbar=new M(bt);var gt=new ne({collection:this.toolbar,em:O});W.appendChild(gt.render().el)}this.toolbar.reset(bt),Z.top="-100px",Z.left="0"}else Z.display="none"},updateToolbarPos:function(z){var O="px",I=this.canvas.getToolbarEl().style;I.top="".concat(z.top).concat(O),I.left="".concat(z.left).concat(O),I.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(z){return z===void 0&&(z={}),this.canvas.getBadgeEl(z.view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(z){return z&&z.get("status")==="selected"},updateToolsLocal:function(z){var O=z||this.getElHovered(),I=O.el,W=O.pos,Z=O.view,bt=O.component;if(I){var Q=bt.get("hoverable"),gt=this.lastHovered!==I,F=gt?{}:{posOnly:1};gt&&Q&&(this.lastHovered=I,this.showHighlighter(Z),this.showElementOffset(I,W,{view:Z})),this.isCompSelected(bt)&&(this.hideHighlighter(Z),this.hideElementOffset(Z));var Lt="px",Pt=this.toggleToolsEl(1,Z),Yt=Pt.style,Ae=this.canvas.canvasRectOffset(I,W),ke=Ae.top,Oe=Ae.left;this.updateBadge(I,W,Bt(Bt({},F),{view:Z,topOff:ke,leftOff:Oe})),Yt.top=ke+Lt,Yt.left=Oe+Lt,Yt.width=W.width+Lt,Yt.height=W.height+Lt,this._trgToolUp("local",{component:bt,el:Pt,top:ke,left:Oe,width:W.width,height:W.height})}else this.lastHovered=0},_upToolbar:(0,xt.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(z,O){O===void 0&&(O={}),this.em.trigger("canvas:tools:update",Bt({type:z},O))},updateToolsGlobal:function(z){z===void 0&&(z={});var O=this.getElSelected(),I=O.el,W=O.pos,Z=O.component;if(!I)return this.toggleToolsEl(),void(this.lastSelected=0);var bt=this.canvas;(this.lastSelected!==I||z.force)&&(this.lastSelected=I,this.updateToolbar(Z));var Q="px",gt=this.toggleToolsEl(1),F=gt.style,Lt=bt.getTargetToElementFixed(I,bt.getToolbarEl(),{pos:W}),Pt=Lt.canvasOffsetTop,Yt=Lt.canvasOffsetLeft;F.top=Pt+Q,F.left=Yt+Q,F.width=W.width+Q,F.height=W.height+Q,this.updateToolbarPos({top:Lt.top,left:Lt.left}),this._trgToolUp("global",{component:Z,el:gt,top:Pt,left:Yt,width:W.width,height:W.height})},updateAttached:(0,xt.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,xt.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(z){return this.canvas.getCanvasView().getElementPos(z)},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(z){z&&z.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(z){(0,Dt.hasWin)()&&(this.editor=z&&z.get("Editor"),this.enable())},stop:function(z,O,I){if(I===void 0&&(I={}),(0,Dt.hasWin)()){var W=this.em,Z=this.editor;this.onHovered(),this.stopSelectComponent(),!I.preserveSelected&&W.setSelected(),this.toggleToolsEl(),Z&&Z.stopCommand("resize")}}}},189:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=D(895);const xt={startSelectPosition:function(q,G,U){var S=this;U===void 0&&(U={}),this.isPointed=!1;var E=this.em.Utils,A=q.ownerDocument.body;E&&!this.sorter&&(this.sorter=new E.Sorter({container:A,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:G,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return S.em.getZoomDecimal()}})),U.onStart&&(this.sorter.onStart=U.onStart),q&&this.sorter.startSort(q,{container:A})},getOffsetDim:function(){var q=this.offset(this.canvas.getFrameEl()),G=this.offset(this.canvas.getElement());return{top:q.top-G.top,left:q.left-G.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,et.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,et.default)(this.cDim[this.posIndex][5]).parent():(0,et.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(q,G,U){var S=q||0,E=G||"before",A=U.length,M=A!==0&&E=="after"&&S==A;return A!==0&&(!M&&!U[S][4]||U[S-1]&&!U[S-1][4]||M&&!U[S-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>U});var et=D(50),xt=D(895),q=D(163),G=function(){return G=Object.assign||function(S){for(var E,A=1,M=arguments.length;A<M;A++)for(var N in E=arguments[A])Object.prototype.hasOwnProperty.call(E,N)&&(S[N]=E[N]);return S},G.apply(this,arguments)};const U={getOffsetMethod:function(S){return"get"+(S||"")+"OffsetViewerEl"},run:function(S,E,A){var M=A||{},N=M.state||"",it=S.getConfig(),st=this.em.getZoomDecimal(),Et=M.el||"";if(!it.showOffsets||(0,q.isTextNode)(Et)||!it.showOffsetsSelected&&N=="Fixed")S.stopCommand("".concat(this.id),A);else{var Mt=S.Canvas,Nt=G({},M.elPos||Mt.getElementPos(Et));(0,et.isUndefined)(M.top)||(Nt.top=M.top),(0,et.isUndefined)(M.left)||(Nt.left=M.left);var ne=window.getComputedStyle(Et),ut=this.ppfx,pt=N+"State",Dt=Mt[this.getOffsetMethod(N)](A.view);Dt.style.opacity="";var Bt=this["marginT"+N],kt=this["marginB"+N],z=this["marginL"+N],O=this["marginR"+N],I=this["padT"+N],W=this["padB"+N],Z=this["padL"+N],bt=this["padR"+N];if(Dt.childNodes.length&&(this[pt]="1",Bt=Dt.querySelector("[data-offset-m-t]"),kt=Dt.querySelector("[data-offset-m-b]"),z=Dt.querySelector("[data-offset-m-l]"),O=Dt.querySelector("[data-offset-m-r]"),I=Dt.querySelector("[data-offset-p-t]"),W=Dt.querySelector("[data-offset-p-b]"),Z=Dt.querySelector("[data-offset-p-l]"),bt=Dt.querySelector("[data-offset-p-r]")),!this[pt]){var Q=N.toLowerCase(),gt=Q+"margin-v",F=Q+"padding-v",Lt=(0,xt.default)('<div class="'.concat(ut,'marginName">')).get(0),Pt=(0,xt.default)('<div class="'.concat(ut,'paddingName">')).get(0),Yt=ut+F+"-el",Ae="".concat(ut+gt+"-el"," ").concat(ut+gt),ke="".concat(Yt," ").concat(ut+F);Bt=(0,xt.default)('<div class="'.concat(Ae,'-top"></div>')).get(0),kt=(0,xt.default)('<div class="'.concat(Ae,'-bottom"></div>')).get(0),z=(0,xt.default)('<div class="'.concat(Ae,'-left"></div>')).get(0),O=(0,xt.default)('<div class="'.concat(Ae,'-right"></div>')).get(0),I=(0,xt.default)('<div class="'.concat(ke,'-top"></div>')).get(0),W=(0,xt.default)('<div class="'.concat(ke,'-bottom"></div>')).get(0),Z=(0,xt.default)('<div class="'.concat(ke,'-left"></div>')).get(0),bt=(0,xt.default)('<div class="'.concat(ke,'-right"></div>')).get(0),this["marginT"+N]=Bt,this["marginB"+N]=kt,this["marginL"+N]=z,this["marginR"+N]=O,this["padT"+N]=I,this["padB"+N]=W,this["padL"+N]=Z,this["padR"+N]=bt,Lt.appendChild(Bt),Lt.appendChild(kt),Lt.appendChild(z),Lt.appendChild(O),Pt.appendChild(I),Pt.appendChild(W),Pt.appendChild(Z),Pt.appendChild(bt),Dt.appendChild(Lt),Dt.appendChild(Pt),this[pt]="1"}var Oe="px",Ie=parseFloat(ne.marginLeft.replace(Oe,""))*st,Ce=parseFloat(ne.marginRight.replace(Oe,""))*st,Pe=parseFloat(ne.marginTop.replace(Oe,""))*st,me=parseFloat(ne.marginBottom.replace(Oe,""))*st,ae=Bt.style,ce=kt.style,ue=z.style,at=O.style,Zt=I.style,qt=W.style,ie=Z.style,pe=bt.style,ee=parseFloat(Nt.left),je=parseFloat(ne.width)*st+Oe;ae.height=Pe+Oe,ae.width=je,ae.top=Nt.top-Pe+Oe,ae.left=ee+Oe,ce.height=me+Oe,ce.width=je,ce.top=Nt.top+Nt.height+Oe,ce.left=ee+Oe;var Je=Nt.height+Pe+me+Oe,Ke=Nt.top-Pe+Oe;ue.height=Je,ue.width=Ie+Oe,ue.top=Ke,ue.left=ee-Ie+Oe,at.height=Je,at.width=Ce+Oe,at.top=Ke,at.left=ee+Nt.width+Oe;var fn=parseFloat(ne.paddingTop)*st;Zt.height=fn+Oe;var jn=parseFloat(ne.paddingBottom)*st;qt.height=jn+Oe;var yt=Nt.height-jn-fn+Oe,Rt=Nt.top+fn+Oe;ie.height=yt,ie.width=parseFloat(ne.paddingLeft)*st+Oe,ie.top=Rt;var y=parseFloat(ne.paddingRight)*st;pe.height=yt,pe.width=y+Oe,pe.top=Rt}},stop:function(S,E,A){A===void 0&&(A={});var M=(A||{}).state||"",N=this.getOffsetMethod(M);S.Canvas[N](A.view).style.opacity=0}}},434:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>xt});var et=D(50);const xt={init:function(){(0,et.bindAll)(this,"_onFramesChange")},run:function(q){this.toggleVis(q)},stop:function(q){this.toggleVis(q,0)},toggleVis:function(q,G){var U=this;if(G===void 0&&(G=1),!q.Commands.isActive("preview")){var S=q.Canvas,E=G?"on":"off";S.getFrames().forEach(function(A){return U._upFrame(A,G)}),S.getModel()[E]("change:frames",this._onFramesChange)}},_onFramesChange:function(q,G){var U=this;G.forEach(function(S){return S.once("loaded",function(){return U._upFrame(S,!0)})})},_upFrame:function(q,G){var U,S=G?"add":"remove";(U=q.view)===null||U===void 0||U.getBody().classList[S]("".concat(this.ppfx,"dashed"))}}},346:(_,lt,D)=>{D.d(lt,{FE:()=>S,G7:()=>E,Hn:()=>U});var et,xt=D(316),q=D.n(xt),G=(et=function(A,M){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,it){N.__proto__=it}||function(N,it){for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(N[st]=it[st])},et(A,M)},function(A,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function N(){this.constructor=A}et(A,M),A.prototype=M===null?Object.create(M):(N.prototype=M.prototype,new N)}),U=function(A){function M(){return A!==null&&A.apply(this,arguments)||this}return G(M,A),M}(q().Model),S=function(A){function M(){return A!==null&&A.apply(this,arguments)||this}return G(M,A),M}(q().Collection),E=function(A){function M(){return A!==null&&A.apply(this,arguments)||this}return G(M,A),M}(q().View)},330:(_,lt,D)=>{D.d(lt,{Z:()=>S});var et,xt=D(50),q=D(346),G=(et=function(E,A){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var it in N)Object.prototype.hasOwnProperty.call(N,it)&&(M[it]=N[it])},et(E,A)},function(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function M(){this.constructor=E}et(E,A),E.prototype=A===null?Object.create(A):(M.prototype=A.prototype,new M)}),U=function(E){function A(M,N,it){M===void 0&&(M={}),it===void 0&&(it=!1);var st=E.call(this,M)||this;return st.itemsView="",st.itemType="type",st.reuseView=!1,st.config=N||M.config||{},it&&st.listenTo(st.collection,"add",st.addTo),st.items=[],st}return G(A,E),A.prototype.addTo=function(M){this.add(M)},A.prototype.itemViewNotFound=function(M){var N=this.config,it=this.ns,st=N.em,Et="".concat(it?"[".concat(it,"]: "):"","'").concat(M,"' type not found");st&&st.logWarning(Et)},A.prototype.add=function(M,N){var it,st=this,Et=st.config,Mt=st.reuseView,Nt=st.items,ne=this.itemsView||{},ut=N||null,pt=this.itemView,Dt=M.get(this.itemType);ne[Dt]?pt=ne[Dt]:!Dt||ne[Dt]||(0,xt.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],Dt)||this.itemViewNotFound(Dt),it=M.view&&Mt?M.view:new pt({model:M,config:Et},Et),Nt&&Nt.push(it);var Bt=it.render().el;ut?ut.appendChild(Bt):this.$el.append(Bt)},A.prototype.render=function(){var M=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(N){this.add(N,M)},this),this.$el.append(M),this.onRender(),this},A.prototype.onRender=function(){},A.prototype.onRemoveBefore=function(M,N){},A.prototype.onRemove=function(M,N){},A.prototype.remove=function(M){M===void 0&&(M={});var N=this.items;return this.onRemoveBefore(N,M),this.clearItems(),E.prototype.remove.call(this),this.onRemove(N,M),this},A.prototype.clearItems=function(){this.items},A}(q.G7);const S=U;U.prototype.itemView=""},668:(_,lt,D)=>{D.d(lt,{Z:()=>U});var et=D(50),xt=D(163),q=function(){return q=Object.assign||function(S){for(var E,A=1,M=arguments.length;A<M;A++)for(var N in E=arguments[A])Object.prototype.hasOwnProperty.call(E,N)&&(S[N]=E[N]);return S},q.apply(this,arguments)},G=["x","y"];const U=function(){function S(E){return E===void 0&&(E={}),this.opts={snapOffset:5,scale:1},(0,et.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(E),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return S.prototype.setOptions=function(E){E===void 0&&(E={}),this.opts=q(q({},this.opts),E)},S.prototype.toggleDrag=function(E){var A=this.getDocumentEl(),M=this.getContainerEl(),N=this.getWindowEl(),it=E?"on":"off",st={on:xt.on,off:xt.off};st[it](M,"mousemove dragover",this.drag),st[it](A,"mouseup dragend touchend",this.stop),st[it](A,"keydown",this.keyHandle),st[it](N,"scroll",this.handleScroll)},S.prototype.handleScroll=function(){var E=this.lastScroll,A=this.delta,M=this.getScrollInfo(),N={x:M.x-E.x,y:M.y-E.y};this.move(A.x+N.x,A.y+N.y),this.lastScrollDiff=N},S.prototype.start=function(E){var A=this.opts,M=A.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(E),this.guidesStatic=(0,et.result)(A,"guidesStatic")||[],this.guidesTarget=(0,et.result)(A,"guidesTarget")||[],(0,et.isFunction)(M)&&M(E,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(E)},S.prototype.drag=function(E){var A=this,M=this,N=M.opts,it=M.lastScrollDiff,st=M.globScrollDiff,Et=N.onDrag,Mt=this.startPointer,Nt=this.getPointerPos(E),ne={x:st.x+it.x,y:st.y+it.y};this.globScrollDiff=ne;var ut={x:Nt.x-Mt.x+ne.x,y:Nt.y-Mt.y+ne.y};this.lastScrollDiff={x:0,y:0};var pt=this.lockedAxis;(pt=E.shiftKey?!pt&&this.detectAxisLock(ut.x,ut.y):null)==="x"?ut.x=Mt.x:pt==="y"&&(ut.y=Mt.y);var Dt=function(W){G.forEach(function(Z){return W[Z]=W[Z]*(0,et.result)(N,"scale")}),A.delta=W,A.move(W.x,W.y),(0,et.isFunction)(Et)&&Et(E,A)},Bt=q({},ut);if(this.currentPointer=Nt,this.lockedAxis=pt,this.lastScroll=this.getScrollInfo(),Dt(ut),this.guidesTarget.length){var kt=this.snapGuides(Bt),z=kt.newDelta,O=kt.trgX,I=kt.trgY;(O||I)&&Dt(z)}E.which===0&&this.stop(E)},S.prototype.snapGuides=function(E){var A=this,M=E,N=this.trgX,it=this.trgY;return this.guidesTarget.forEach(function(st){st.x&&A.trgX||st.y&&A.trgY||(st.active=!1,A.guidesStatic.forEach(function(Et){if(!(st.y&&Et.x||st.x&&Et.y)){var Mt=st.y&&Et.y,Nt=Mt?"y":"x",ne=st[Nt],ut=Et[Nt],pt=E[Nt],Dt=Mt?it:N;if(A.isPointIn(ne,ut)&&(0,et.isUndefined)(Dt)){var Bt=pt-(ne-ut);A.setGuideLock(st,Bt)}}}))}),N=this.trgX,it=this.trgY,G.forEach(function(st){var Et=st.toUpperCase(),Mt=A["trg".concat(Et)];Mt&&!A.isPointIn(E[st],Mt.lock)&&(A.setGuideLock(Mt,null),Mt=null),Mt&&!(0,et.isUndefined)(Mt.lock)&&(M[st]=Mt.lock)}),{newDelta:M,trgX:this.trgX,trgY:this.trgY}},S.prototype.isPointIn=function(E,A,M){var N=(M===void 0?{}:M).offset||this.opts.snapOffset||0;return E>=A&&E<=A+N||E<=A&&E>=A-N},S.prototype.setGuideLock=function(E,A){var M=(0,et.isUndefined)(E.x)?"Y":"X",N="trg".concat(M);return A!==null?(E.active=!0,E.lock=A,this[N]=E):(delete E.active,delete E.lock,delete this[N]),E},S.prototype.stop=function(E,A){A===void 0&&(A={});var M=this.delta,N=!!A.cancel,it=N?0:M.x,st=N?0:M.y;this.toggleDrag(),this.lockedAxis=null,this.move(it,st,!0);var Et=this.opts.onEnd;(0,et.isFunction)(Et)&&Et(E,this,{cancelled:N})},S.prototype.keyHandle=function(E){(0,xt.isEscKey)(E)&&this.stop(E,{cancel:!0})},S.prototype.move=function(E,A,M){var N=this.el,it=this.opts,st=this.startPosition;if(st){var Et=it.setPosition,Mt=st.x+E,Nt=st.y+A;this.position={x:Mt,y:Nt,end:M},(0,et.isFunction)(Et)&&Et(this.position),N&&(N.style.left="".concat(Mt,"px"),N.style.top="".concat(Nt,"px"))}},S.prototype.getContainerEl=function(){var E=this.opts.container;return E?[E]:this.getDocumentEl()},S.prototype.getWindowEl=function(){return this.getContainerEl().map(function(E){var A=E.ownerDocument||E;return A.defaultView||A.parentWindow})},S.prototype.getDocumentEl=function(E){var A=this.opts.doc;if(E=E||this.el,!this.docs.length){var M=[document];E&&M.push(E.ownerDocument),A&&M.push(A),this.docs=M}return this.docs},S.prototype.getPointerPos=function(E){var A=this.opts.getPointerPosition,M=(0,xt.getPointerEvent)(E);return A?A(E):{x:M.clientX,y:M.clientY}},S.prototype.getStartPosition=function(){var E=this.el,A=this.opts.getPosition,M={x:0,y:0};return(0,et.isFunction)(A)?M=A():E&&(M={x:parseFloat(E.style.left),y:parseFloat(E.style.top)}),M},S.prototype.getScrollInfo=function(){var E=this.opts.doc,A=E&&E.body;return{y:A?A.scrollTop:0,x:A?A.scrollLeft:0}},S.prototype.detectAxisLock=function(E,A){var M=E,N=A,it=Math.abs(M),st=Math.abs(N);return N>=it||N<=-it?"x":M>st||M<-st?"y":void 0},S}()},895:(_,lt,D)=>{D.r(lt),D.d(lt,{default:()=>Qt});var et=typeof document<"u"?document:null,xt=typeof window<"u"?window:null,q=Array.prototype,G=q.filter,U=q.indexOf,S=q.map,E=q.push,A=q.reverse,M=q.slice,N=q.splice,it=/^#[\w-]*$/,st=/^\.[\w-]*$/,Et=/<.+>/,Mt=/^\w+$/;function Nt(R,rt){return rt===void 0&&(rt=et),st.test(R)?rt.getElementsByClassName(R.slice(1)):Mt.test(R)?rt.getElementsByTagName(R):rt.querySelectorAll(R)}function ne(R,rt){if(rt===void 0&&(rt=et),R){if(R.__cash)return R;var ht=R;if(Z(R)){if(rt.__cash&&(rt=rt[0]),!(ht=it.test(R)?rt.getElementById(R.slice(1)):Et.test(R)?Ve(R):Nt(R,rt)))return}else if(W(R))return this.ready(R);(ht.nodeType||ht===xt)&&(ht=[ht]),this.length=ht.length;for(var _t=0,te=this.length;_t<te;_t++)this[_t]=ht[_t]}}function ut(R,rt){return new ne(R,rt)}var pt=ut.fn=ut.prototype=ne.prototype={constructor:ut,__cash:!0,length:0,splice:N};pt.get=function(R){return R===void 0?M.call(this):this[R<0?R+this.length:R]},pt.eq=function(R){return ut(this.get(R))},pt.first=function(){return this.eq(0)},pt.last=function(){return this.eq(-1)},pt.map=function(R){return ut(S.call(this,function(rt,ht){return R.call(rt,ht,rt)}))},pt.slice=function(){return ut(M.apply(this,arguments))};var Dt=/(?:^\w|[A-Z]|\b\w)/g,Bt=/[\s-_]+/g;function kt(R){return R.replace(Dt,function(rt,ht){return rt[ht?"toUpperCase":"toLowerCase"]()}).replace(Bt,"")}function z(R,rt){for(var ht=0,_t=R.length;ht<_t&&rt.call(R[ht],R[ht],ht,R)!==!1;ht++);}ut.camelCase=kt,ut.each=z,pt.each=function(R){return z(this,function(rt,ht){return R.call(rt,ht,rt)}),this},pt.removeProp=function(R){return this.each(function(rt,ht){delete ht[R]})},ut.extend=pt.extend=function(R){R===void 0&&(R=this);for(var rt=arguments,ht=rt.length,_t=ht<2?0:1;_t<ht;_t++)for(var te in rt[_t])R[te]=rt[_t][te];return R};var O=1;function I(R,rt){var ht=R&&(R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.msMatchesSelector||R.oMatchesSelector);return!!ht&&ht.call(R,rt)}function W(R){return typeof R=="function"}function Z(R){return typeof R=="string"}function bt(R){return!isNaN(parseFloat(R))&&isFinite(R)}ut.guid=O,ut.matches=I,ut.isFunction=W,ut.isString=Z,ut.isNumeric=bt;var Q=Array.isArray;function gt(R){return Z(R)?function(rt,ht){return I(ht,R)}:R.__cash?function(rt,ht){return R.is(ht)}:function(rt,ht,_t){return ht===_t}}ut.isArray=Q,pt.prop=function(R,rt){if(R){if(Z(R))return arguments.length<2?this[0]&&this[0][R]:this.each(function(_t,te){te[R]=rt});for(var ht in R)this.prop(ht,R[ht]);return this}},pt.filter=function(R){if(!R)return ut();var rt=W(R)?R:gt(R);return ut(G.call(this,function(ht,_t){return rt.call(ht,_t,ht,R)}))};var F=/\S+/g;function Lt(R){return Z(R)&&R.match(F)||[]}function Pt(R){return R.filter(function(rt,ht,_t){return _t.indexOf(rt)===ht})}function Yt(R,rt,ht){if(R.nodeType===1){var _t=xt.getComputedStyle(R,null);return rt?ht?_t.getPropertyValue(rt):_t[rt]:_t}}function Ae(R,rt){return parseInt(Yt(R,rt),10)||0}pt.hasClass=function(R){var rt=Lt(R),ht=!1;return rt.length&&this.each(function(_t,te){return!(ht=te.classList.contains(rt[0]))}),ht},pt.removeAttr=function(R){var rt=Lt(R);return rt.length?this.each(function(ht,_t){z(rt,function(te){_t.removeAttribute(te)})}):this},pt.attr=function(R,rt){if(R){if(Z(R)){if(arguments.length<2){if(!this[0])return;var ht=this[0].getAttribute(R);return ht===null?void 0:ht}return rt===null?this.removeAttr(R):this.each(function(te,ye){ye.setAttribute(R,rt)})}for(var _t in R)this.attr(_t,R[_t]);return this}},pt.toggleClass=function(R,rt){var ht=Lt(R),_t=rt!==void 0;return ht.length?this.each(function(te,ye){z(ht,function(Ue){_t?rt?ye.classList.add(Ue):ye.classList.remove(Ue):ye.classList.toggle(Ue)})}):this},pt.addClass=function(R){return this.toggleClass(R,!0)},pt.removeClass=function(R){return arguments.length?this.toggleClass(R,!1):this.attr("class","")},ut.unique=Pt,pt.add=function(R,rt){return ut(Pt(this.get().concat(ut(R,rt).get())))};var ke=/^--/;function Oe(R){return ke.test(R)}var Ie={},Ce=et&&et.createElement("div"),Pe=Ce?Ce.style:{},me=["webkit","moz","ms","o"];function ae(R,rt){if(rt===void 0&&(rt=Oe(R)),rt)return R;if(!Ie[R]){var ht=kt(R),_t=""+ht.charAt(0).toUpperCase()+ht.slice(1);z((ht+" "+me.join(_t+" ")+_t).split(" "),function(te){if(te in Pe)return Ie[R]=te,!1})}return Ie[R]}ut.prefixedProp=ae;var ce={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ue(R,rt,ht){return ht===void 0&&(ht=Oe(R)),ht||ce[R]||!bt(rt)?rt:rt+"px"}pt.css=function(R,rt){if(Z(R)){var ht=Oe(R);return R=ae(R,ht),arguments.length<2?this[0]&&Yt(this[0],R,ht):R?(rt=ue(R,rt,ht),this.each(function(te,ye){ye.nodeType===1&&(ht?ye.style.setProperty(R,rt):ye.style[R]=rt)})):this}for(var _t in R)this.css(_t,R[_t]);return this};var at="__cashData",Zt=/^data-(.*)/;function qt(R){return R[at]=R[at]||{}}function ie(R,rt){var ht=qt(R);if(rt){if(!(rt in ht)){var _t=R.dataset?R.dataset[rt]||R.dataset[kt(rt)]:ut(R).attr("data-"+rt);if(_t!==void 0){try{_t=JSON.parse(_t)}catch{}ht[rt]=_t}}return ht[rt]}return ht}function pe(R,rt){return Ae(R,"border"+(rt?"Left":"Top")+"Width")+Ae(R,"padding"+(rt?"Left":"Top"))+Ae(R,"padding"+(rt?"Right":"Bottom"))+Ae(R,"border"+(rt?"Right":"Bottom")+"Width")}function ee(R,rt){for(var ht=0,_t=rt.length;ht<_t;ht++)if(R.indexOf(rt[ht])<0)return!1;return!0}function je(R,rt,ht){z(R[ht],function(_t){_t[0];var te=_t[1];rt.removeEventListener(ht,te)}),delete R[ht]}ut.hasData=function(R){return at in R},pt.data=function(R,rt){var ht=this;if(!R)return this[0]?(z(this[0].attributes,function(te){var ye=te.name.match(Zt);ye&&ht.data(ye[1])}),ie(this[0])):void 0;if(Z(R))return rt===void 0?this[0]&&ie(this[0],R):this.each(function(te,ye){return function(Ue,Xe,Hn){qt(Ue)[Xe]=Hn}(ye,R,rt)});for(var _t in R)this.data(_t,R[_t]);return this},pt.removeData=function(R){return this.each(function(rt,ht){return function(_t,te){te===void 0?delete _t[at]:delete qt(_t)[te]}(ht,R)})},z(["Width","Height"],function(R){pt["inner"+R]=function(){if(this[0])return this[0]===xt?xt["inner"+R]:this[0]["client"+R]}}),z(["width","height"],function(R,rt){pt[R]=function(ht){return this[0]?arguments.length?(ht=parseInt(ht,10),this.each(function(_t,te){if(te.nodeType===1){var ye=Yt(te,"boxSizing");te.style[R]=ue(R,ht+(ye==="border-box"?pe(te,!rt):0))}})):this[0]===xt?this[0][kt("outer-"+R)]:this[0].getBoundingClientRect()[R]-pe(this[0],!rt):ht===void 0?void 0:this}}),z(["Width","Height"],function(R,rt){pt["outer"+R]=function(ht){if(this[0])return this[0]===xt?xt["outer"+R]:this[0]["offset"+R]+(ht?Ae(this[0],"margin"+(rt?"Top":"Left"))+Ae(this[0],"margin"+(rt?"Bottom":"Right")):0)}});var Je="__cashEvents",Ke=".";function fn(R){return R[Je]=R[Je]||{}}function jn(R){var rt=R.split(Ke);return[rt[0],rt.slice(1).sort()]}function yt(R,rt,ht,_t){var te=fn(R);if(rt){var ye=te[rt];if(!ye)return;_t&&(_t.guid=_t.guid||O++),te[rt]=ye.filter(function(Ue){var Xe=Ue[0],Hn=Ue[1];if(_t&&Hn.guid!==_t.guid||!ee(Xe,ht))return!0;R.removeEventListener(rt,Hn)})}else if(ht&&ht.length)for(rt in te)yt(R,rt,ht,_t);else for(rt in te)je(te,R,rt)}pt.off=function(R,rt){var ht=this;return R===void 0?this.each(function(_t,te){return yt(te)}):z(Lt(R),function(_t){var te=jn(_t),ye=te[0],Ue=te[1];ht.each(function(Xe,Hn){return yt(Hn,ye,Ue,rt)})}),this},pt.on=function(R,rt,ht,_t){var te=this;if(!Z(R)){for(var ye in R)this.on(ye,rt,R[ye]);return this}return W(rt)&&(ht=rt,rt=!1),z(Lt(R),function(Ue){var Xe=jn(Ue),Hn=Xe[0],yn=Xe[1];te.each(function($e,Nr){var tr=function Ir(bn){if(!bn.namespace||ee(yn,bn.namespace.split(Ke))){var Tn=Nr;if(rt){for(var Kn=bn.target;!I(Kn,rt);)if(Kn===Nr||!(Kn=Kn.parentNode))return;Tn=Kn}bn.namespace=bn.namespace||"";var Vr=ht.call(Tn,bn,bn.data);_t&&yt(Nr,Hn,yn,Ir),Vr===!1&&(bn.preventDefault(),bn.stopPropagation())}};tr.guid=ht.guid=ht.guid||O++,function(Ir,bn,Tn,Kn){Kn.guid=Kn.guid||O++;var Vr=fn(Ir);Vr[bn]=Vr[bn]||[],Vr[bn].push([Tn,Kn]),Ir.addEventListener(bn,Kn)}(Nr,Hn,yn,tr)})}),this},pt.one=function(R,rt,ht){return this.on(R,rt,ht,!0)},pt.ready=function(R){var rt=function(){return R(ut)};return et.readyState!=="loading"?setTimeout(rt):et.addEventListener("DOMContentLoaded",rt),this},pt.trigger=function(R,rt){var ht=R;if(Z(R)){var _t=jn(R),te=_t[0],ye=_t[1];(ht=et.createEvent("HTMLEvents")).initEvent(te,!0,!0),ht.namespace=ye.join(Ke)}return ht.data=rt,this.each(function(Ue,Xe){Xe.dispatchEvent(ht)})};var Rt=/select-one/i,y=/select-multiple/i;function j(R){var rt=R.type;return Rt.test(rt)?function(ht){return ht.selectedIndex<0?null:ht.options[ht.selectedIndex].value}(R):y.test(rt)?function(ht){var _t=[];return z(ht.options,function(te){!te.selected||te.disabled||te.parentNode.disabled||_t.push(te.value)}),_t}(R):R.value}var H=/%20/g,ct=/file|reset|submit|button|image/i,St=/radio|checkbox/i;pt.serialize=function(){var R="";return this.each(function(rt,ht){z(ht.elements||[ht],function(_t){if(!_t.disabled&&_t.name&&_t.tagName!=="FIELDSET"&&!ct.test(_t.type)&&(!St.test(_t.type)||_t.checked)){var te=j(_t);te!==void 0&&z(Q(te)?te:[te],function(ye){R+=function(Ue,Xe){return"&"+encodeURIComponent(Ue)+"="+encodeURIComponent(Xe).replace(H,"+")}(_t.name,ye)})}})}),R.substr(1)},pt.val=function(R){return R===void 0?this[0]&&j(this[0]):this.each(function(rt,ht){var _t=y.test(ht.type),te=R===null?_t?[]:"":R;_t&&Q(te)?z(ht.options,function(ye){ye.selected=te.indexOf(ye.value)>=0}):ht.value=te})},pt.clone=function(){return this.map(function(R,rt){return rt.cloneNode(!0)})},pt.detach=function(){return this.each(function(R,rt){rt.parentNode&&rt.parentNode.removeChild(rt)})};var Ct,Xt=/^\s*<(\w+)[^>]*>/,ge=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function Ve(R){if(function(){if(!Ct){var _t=et.createElement("table"),te=et.createElement("tr");Ct={"*":et.createElement("div"),tr:et.createElement("tbody"),td:te,th:te,thead:_t,tbody:_t,tfoot:_t}}}(),!Z(R))return[];if(ge.test(R))return[et.createElement(RegExp.$1)];var rt=Xt.test(R)&&RegExp.$1,ht=Ct[rt]||Ct["*"];return ht.innerHTML=R,ut(ht.childNodes).detach().get()}function ze(R,rt,ht){if(rt!==void 0){var _t=Z(rt);!_t&&rt.length?z(rt,function(te){return ze(R,te,ht)}):z(R,_t?function(te){te.insertAdjacentHTML(ht?"afterbegin":"beforeend",rt)}:function(te,ye){return function(Ue,Xe,Hn){Hn?Ue.insertBefore(Xe,Ue.childNodes[0]):Ue.appendChild(Xe)}(te,ye?rt.cloneNode(!0):rt,ht)})}}ut.parseHTML=Ve,pt.empty=function(){var R=this[0];if(R)for(;R.firstChild;)R.removeChild(R.firstChild);return this},pt.append=function(){var R=this;return z(arguments,function(rt){ze(R,rt)}),this},pt.appendTo=function(R){return ze(ut(R),this),this},pt.html=function(R){if(R===void 0)return this[0]&&this[0].innerHTML;var rt=R.nodeType?R[0].outerHTML:R;return this.each(function(ht,_t){_t.innerHTML=rt})},pt.insertAfter=function(R){var rt=this;return ut(R).each(function(ht,_t){var te=_t.parentNode;rt.each(function(ye,Ue){te.insertBefore(ht?Ue.cloneNode(!0):Ue,_t.nextSibling)})}),this},pt.after=function(){var R=this;return z(A.apply(arguments),function(rt){A.apply(ut(rt).slice()).insertAfter(R)}),this},pt.insertBefore=function(R){var rt=this;return ut(R).each(function(ht,_t){var te=_t.parentNode;rt.each(function(ye,Ue){te.insertBefore(ht?Ue.cloneNode(!0):Ue,_t)})}),this},pt.before=function(){var R=this;return z(arguments,function(rt){ut(rt).insertBefore(R)}),this},pt.prepend=function(){var R=this;return z(arguments,function(rt){ze(R,rt,!0)}),this},pt.prependTo=function(R){return ze(ut(R),A.apply(this.slice()),!0),this},pt.remove=function(){return this.detach().off()},pt.replaceWith=function(R){var rt=this;return this.each(function(ht,_t){var te=_t.parentNode;if(te){var ye=ht?ut(R).clone():ut(R);if(!ye[0])return rt.remove(),!1;te.replaceChild(ye[0],_t),ut(ye[0]).after(ye.slice(1))}})},pt.replaceAll=function(R){return ut(R).replaceWith(this),this},pt.text=function(R){return R===void 0?this[0]?this[0].textContent:"":this.each(function(rt,ht){ht.textContent=R})};var nn=et&&et.documentElement;pt.offset=function(){var R=this[0];if(R){var rt=R.getBoundingClientRect();return{top:rt.top+xt.pageYOffset-nn.clientTop,left:rt.left+xt.pageXOffset-nn.clientLeft}}},pt.offsetParent=function(){return ut(this[0]&&this[0].offsetParent)},pt.position=function(){var R=this[0];if(R)return{left:R.offsetLeft,top:R.offsetTop}},pt.children=function(R){var rt=[];return this.each(function(ht,_t){E.apply(rt,_t.children)}),rt=ut(Pt(rt)),R?rt.filter(function(ht,_t){return I(_t,R)}):rt},pt.contents=function(){var R=[];return this.each(function(rt,ht){E.apply(R,ht.tagName==="IFRAME"?[ht.contentDocument]:ht.childNodes)}),ut(R.length&&Pt(R))},pt.find=function(R){for(var rt=[],ht=0,_t=this.length;ht<_t;ht++){var te=Nt(R,this[ht]);te.length&&E.apply(rt,te)}return ut(rt.length&&Pt(rt))},pt.has=function(R){var rt=Z(R)?function(ht,_t){return!!Nt(R,_t).length}:function(ht,_t){return _t.contains(R)};return this.filter(rt)},pt.is=function(R){if(!R||!this[0])return!1;var rt=gt(R),ht=!1;return this.each(function(_t,te){return!(ht=rt(_t,te,R))}),ht},pt.next=function(){return ut(this[0]&&this[0].nextElementSibling)},pt.not=function(R){if(!R||!this[0])return this;var rt=gt(R);return this.filter(function(ht,_t){return!rt(ht,_t,R)})},pt.parent=function(){var R=[];return this.each(function(rt,ht){ht&&ht.parentNode&&R.push(ht.parentNode)}),ut(Pt(R))},pt.index=function(R){var rt=R?ut(R)[0]:this[0],ht=R?this:ut(rt).parent().children();return U.call(ht,rt)},pt.closest=function(R){return R&&this[0]?this.is(R)?this.filter(R):this.parent().closest(R):ut()},pt.parents=function(R){var rt,ht=[];return this.each(function(_t,te){for(rt=te;rt&&rt.parentNode&&rt!==et.body.parentNode;)rt=rt.parentNode,(!R||R&&I(rt,R))&&ht.push(rt)}),ut(Pt(ht))},pt.prev=function(){return ut(this[0]&&this[0].previousElementSibling)},pt.siblings=function(){var R=this[0];return this.parent().children().filter(function(rt,ht){return ht!==R})};const Qt=ut},491:(_,lt,D)=>{D.d(lt,{$Q:()=>it,FW:()=>A,G1:()=>G,L_:()=>S,Mx:()=>U,R3:()=>st,SJ:()=>ne,dL:()=>N,pn:()=>M,rw:()=>Mt,sE:()=>E,t3:()=>Nt,ut:()=>Et});var et=D(50),xt="tag",q="attributes",G="transitionend oTransitionEnd transitionend webkitTransitionEnd",U=function(ut){return ut&&ut.nodeType===9},S=function(ut){var pt=ut&&ut.parentNode;pt&&pt.removeChild(ut)},E=function(ut,pt){return ut.querySelectorAll(pt)},A=function(ut,pt){return pt===void 0&&(pt={}),ut&&ut.setAttribute&&(0,et.each)(pt,function(Dt,Bt){return ut.setAttribute(Bt,Dt)})},M=function(ut){return ut&&!!(ut.offsetWidth||ut.offsetHeight||ut.getClientRects().length)},N=function(ut,pt){var Dt;(Dt=ut.parentNode)===null||Dt===void 0||Dt.replaceChild(pt,ut)},it=function(ut,pt,Dt){var Bt=ut.childNodes,kt=Bt.length,z=(0,et.isUndefined)(Dt)?kt:Dt;(0,et.isString)(pt)&&(ut.insertAdjacentHTML("beforeEnd",pt),pt=ut.lastChild,ut.removeChild(pt)),z>=kt?ut.appendChild(pt):ut.insertBefore(pt,Bt[z])},st=function(ut,pt){return it(ut,pt)},Et=function(ut,pt,Dt){pt===void 0&&(pt={});var Bt=document.createElement(ut);return pt&&(0,et.each)(pt,function(kt,z){return Bt.setAttribute(z,kt)}),Dt&&((0,et.isString)(Dt)?Bt.innerHTML=Dt:Bt.appendChild(Dt)),Bt},Mt=function(ut){return document.createTextNode(ut)},Nt=function(ut,pt){var Dt,Bt=ut.type;try{Dt=new window[pt](Bt,ut)}catch{(Dt=document.createEvent(pt)).initEvent(Bt,!0,!0)}return Dt._parentEvent=ut,Bt.indexOf("key")===0&&(Dt.keyCodeVal=ut.keyCode,["keyCode","which"].forEach(function(kt){Object.defineProperty(Dt,kt,{get:function(){return this.keyCodeVal}})})),Dt},ne=function(ut,pt){pt===void 0&&(pt=[]),(Array.isArray(pt)?pt:[pt]).forEach(function(Dt){var Bt=Dt[xt]||"div",kt=Dt[q]||{},z=document.createElement(Bt);(0,et.each)(kt,function(O,I){z.setAttribute(I,O)}),ut.appendChild(z)})}},163:(_,lt,D)=>{D.r(lt),D.d(lt,{appendStyles:()=>it,buildBase64UrlFromSvg:()=>ue,camelCase:()=>ut,capitalize:()=>Ie,createId:()=>ce,deepMerge:()=>bt,escape:()=>W,escapeNodeContent:()=>Z,find:()=>I,getElRect:()=>gt,getElement:()=>Bt,getGlobal:()=>S,getKeyChar:()=>Pt,getKeyCode:()=>Lt,getModel:()=>Q,getPointerEvent:()=>F,getUiClass:()=>N,getUnitFromValue:()=>Nt,getViewEl:()=>me,hasDnd:()=>Dt,hasWin:()=>U,isCommentNode:()=>z,isComponent:()=>Ce,isDef:()=>G,isEmptyObj:()=>Oe,isEnterKey:()=>Ae,isEscKey:()=>Yt,isObject:()=>ke,isRule:()=>Pe,isTaggableNode:()=>O,isTextNode:()=>kt,matches:()=>M,normalizeFloat:()=>pt,off:()=>Mt,on:()=>Et,setViewEl:()=>ae,shallowDiff:()=>st,toLowerCase:()=>E,upFirst:()=>ne});var et=D(50),xt=function(){return xt=Object.assign||function(at){for(var Zt,qt=1,ie=arguments.length;qt<ie;qt++)for(var pe in Zt=arguments[qt])Object.prototype.hasOwnProperty.call(Zt,pe)&&(at[pe]=Zt[pe]);return at},xt.apply(this,arguments)},q=function(at,Zt,qt){if(qt||arguments.length===2)for(var ie,pe=0,ee=Zt.length;pe<ee;pe++)!ie&&pe in Zt||(ie||(ie=Array.prototype.slice.call(Zt,0,pe)),ie[pe]=Zt[pe]);return at.concat(ie||Array.prototype.slice.call(Zt))},G=function(at){return at!==void 0},U=function(){return typeof window<"u"},S=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:D.g},E=function(at){return(at||"").toLowerCase()},A=U()?window.Element.prototype:{},M=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.msMatchesSelector,N=function(at,Zt){var qt=at.getConfig(),ie=qt.stylePrefix;return[qt.customUI&&"".concat(ie,"cui"),Zt].filter(function(pe){return pe}).join(" ")},it=function(at,Zt){Zt===void 0&&(Zt={});var qt=(0,et.isArray)(at)?q([],at,!0):[at];if(qt.length){var ie=qt.shift();if(ie&&(!Zt.unique||!document.querySelector('link[href="'.concat(ie,'"]')))){var pe=document.head,ee=document.createElement("link");ee.href=ie,ee.rel="stylesheet",Zt.prepand?pe.insertBefore(ee,pe.firstChild):pe.appendChild(ee)}it(qt)}},st=function(at,Zt){var qt={},ie=(0,et.keys)(Zt);for(var pe in at)if(at.hasOwnProperty(pe)){var ee=at[pe],je=Zt[pe];ie.indexOf(pe)>=0?ee!==je&&(qt[pe]=je):qt[pe]=null}for(var pe in Zt)Zt.hasOwnProperty(pe)&&(0,et.isUndefined)(at[pe])&&(qt[pe]=Zt[pe]);return qt},Et=function(at,Zt,qt,ie){var pe=Zt.split(/\s+/);at=at instanceof Array?at:[at];for(var ee=function(Je){at.forEach(function(Ke){return Ke&&Ke.addEventListener(pe[Je],qt,ie)})},je=0;je<pe.length;++je)ee(je)},Mt=function(at,Zt,qt,ie){var pe=Zt.split(/\s+/);at=at instanceof Array?at:[at];for(var ee=function(Je){at.forEach(function(Ke){return Ke&&Ke.removeEventListener(pe[Je],qt,ie)})},je=0;je<pe.length;++je)ee(je)},Nt=function(at){return at.replace(parseFloat(at),"")},ne=function(at){return at[0].toUpperCase()+at.toLowerCase().slice(1)},ut=function(at){return at.replace(/-./g,function(Zt){return Zt[1].toUpperCase()})},pt=function(at,Zt,qt){Zt===void 0&&(Zt=1),qt===void 0&&(qt=0);var ie=0;if(isNaN(at))return qt;if(at=parseFloat(at),Math.floor(at)!==at){var pe=Zt.toString().split(".")[1];ie=pe?pe.length:0}return ie?parseFloat(at.toFixed(ie)):at},Dt=function(at){return"draggable"in document.createElement("i")&&(!at||at.config.nativeDnD)},Bt=function(at){return(0,et.isElement)(at)||kt(at)?at:at&&at.getEl?at.getEl():void 0},kt=function(at){return at&&at.nodeType===3},z=function(at){return at&&at.nodeType===8},O=function(at){return at&&!kt(at)&&!z(at)},I=function(at,Zt){var qt=null;return at.some(function(ie,pe){return Zt(ie,pe,at)?(qt=ie,1):0}),qt},W=function(at){return at===void 0&&(at=""),"".concat(at).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},Z=function(at){return at===void 0&&(at=""),"".concat(at).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},bt=function(){for(var at=[],Zt=0;Zt<arguments.length;Zt++)at[Zt]=arguments[Zt];for(var qt=xt({},at[0]),ie=1;ie<at.length;ie++){var pe=xt({},at[ie]);for(var ee in pe){var je=qt[ee],Je=pe[ee];ke(je)&&ke(Je)?qt[ee]=bt(je,Je):qt[ee]=Je}}return qt},Q=function(at,Zt){var qt=at;return!Zt&&at&&at.__cashData?qt=at.__cashData.model:(0,et.isElement)(at)&&(qt=Zt(at).data("model")),qt},gt=function(at){var Zt,qt={top:0,left:0,width:0,height:0};if(!at)return qt;if(kt(at)){var ie=document.createRange();ie.selectNode(at),Zt=ie.getBoundingClientRect(),ie.detach()}return Zt||(at.getBoundingClientRect?at.getBoundingClientRect():qt)},F=function(at){return at.touches&&at.touches[0]?at.touches[0]:at},Lt=function(at){return at.which||at.keyCode},Pt=function(at){return String.fromCharCode(Lt(at))},Yt=function(at){return Lt(at)===27},Ae=function(at){return Lt(at)===13},ke=function(at){return at!==null&&!Array.isArray(at)&&typeof at=="object"},Oe=function(at){return Object.keys(at).length<=0},Ie=function(at){return at===void 0&&(at=""),at&&at.charAt(0).toUpperCase()+at.substring(1)},Ce=function(at){return at&&at.toHTML},Pe=function(at){return at&&at.toCSS},me=function(at){return at.__gjsv},ae=function(at,Zt){at.__gjsv=Zt},ce=function(at){at===void 0&&(at=16);for(var Zt="",qt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ie=qt.length,pe=0;pe<at;pe++)Zt+=qt.charAt(Math.floor(Math.random()*ie));return Zt},ue=function(at){if(at&&at.substr(0,4)==="<svg"){var Zt="";return U()?Zt=window.btoa(at):typeof Buffer<"u"&&(Zt=Buffer.from(at,"utf8").toString("base64")),Zt?"data:image/svg+xml;base64,".concat(Zt):at}return at}},828:(_,lt,D)=>{var et={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./DeleteComponent":517,"./DeleteComponent.ts":517,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function xt(G){var U=q(G);return D(U)}function q(G){if(!D.o(et,G)){var U=new Error("Cannot find module '"+G+"'");throw U.code="MODULE_NOT_FOUND",U}return et[G]}xt.keys=function(){return Object.keys(et)},xt.resolve=q,_.exports=xt,xt.id=828},50:(_,lt,D)=>{D.r(lt),D.d(lt,{VERSION:()=>xt,after:()=>Pr,all:()=>Yi,allKeys:()=>Qt,any:()=>bi,assign:()=>Rn,before:()=>Ao,bind:()=>So,bindAll:()=>Yo,chain:()=>Vs,chunk:()=>ti,clone:()=>Wo,collect:()=>Ar,compact:()=>ts,compose:()=>Rs,constant:()=>je,contains:()=>vr,countBy:()=>Ia,create:()=>ko,debounce:()=>nr,default:()=>Dl,defaults:()=>To,defer:()=>$i,delay:()=>Po,detect:()=>br,difference:()=>Mo,drop:()=>Mr,each:()=>_n,escape:()=>$t,every:()=>Yi,extend:()=>Vr,extendOwn:()=>Rn,filter:()=>Cn,find:()=>br,findIndex:()=>yi,findKey:()=>zs,findLastIndex:()=>Jo,findWhere:()=>Xn,first:()=>uo,flatten:()=>es,foldl:()=>Hr,foldr:()=>Ki,forEach:()=>_n,functions:()=>Tn,get:()=>Fr,groupBy:()=>Zo,has:()=>Eo,head:()=>uo,identity:()=>no,include:()=>vr,includes:()=>vr,indexBy:()=>Xi,indexOf:()=>rr,initial:()=>Qi,inject:()=>Hr,intersection:()=>Qo,invert:()=>bn,invoke:()=>Rr,isArguments:()=>ie,isArray:()=>at,isArrayBuffer:()=>ke,isBoolean:()=>Z,isDataView:()=>ue,isDate:()=>Lt,isElement:()=>bt,isEmpty:()=>ct,isEqual:()=>nn,isError:()=>Yt,isFinite:()=>pe,isFunction:()=>Ce,isMap:()=>Hn,isMatch:()=>St,isNaN:()=>ee,isNull:()=>I,isNumber:()=>F,isObject:()=>O,isRegExp:()=>Pt,isSet:()=>$e,isString:()=>gt,isSymbol:()=>Ae,isTypedArray:()=>Rt,isUndefined:()=>W,isWeakMap:()=>yn,isWeakSet:()=>Nr,iteratee:()=>_o,keys:()=>H,last:()=>_i,lastIndexOf:()=>Gi,map:()=>Ar,mapObject:()=>be,matcher:()=>Yn,matches:()=>Yn,max:()=>Br,memoize:()=>Fs,methods:()=>Tn,min:()=>wi,mixin:()=>qs,negate:()=>vi,noop:()=>lr,now:()=>Bn,object:()=>Ha,omit:()=>Zi,once:()=>mi,pairs:()=>Ir,partial:()=>co,partition:()=>Va,pick:()=>jo,pluck:()=>zr,property:()=>zn,propertyOf:()=>Go,random:()=>en,range:()=>ns,reduce:()=>Hr,reduceRight:()=>Ki,reject:()=>jr,rest:()=>Mr,restArguments:()=>z,result:()=>Mn,sample:()=>Us,select:()=>Cn,shuffle:()=>Da,size:()=>Fa,some:()=>bi,sortBy:()=>Na,sortedIndex:()=>qi,tail:()=>Mr,take:()=>uo,tap:()=>lo,template:()=>$n,templateSettings:()=>Y,throttle:()=>Hs,times:()=>cr,toArray:()=>Ur,toPath:()=>gr,transpose:()=>Ci,unescape:()=>P,union:()=>Ws,uniq:()=>Lo,unique:()=>Lo,uniqueId:()=>kr,unzip:()=>Ci,values:()=>tr,where:()=>Ln,without:()=>xn,wrap:()=>ro,zip:()=>$s});var et={};D.r(et),D.d(et,{VERSION:()=>xt,after:()=>Pr,all:()=>Yi,allKeys:()=>Qt,any:()=>bi,assign:()=>Rn,before:()=>Ao,bind:()=>So,bindAll:()=>Yo,chain:()=>Vs,chunk:()=>ti,clone:()=>Wo,collect:()=>Ar,compact:()=>ts,compose:()=>Rs,constant:()=>je,contains:()=>vr,countBy:()=>Ia,create:()=>ko,debounce:()=>nr,default:()=>Ra,defaults:()=>To,defer:()=>$i,delay:()=>Po,detect:()=>br,difference:()=>Mo,drop:()=>Mr,each:()=>_n,escape:()=>$t,every:()=>Yi,extend:()=>Vr,extendOwn:()=>Rn,filter:()=>Cn,find:()=>br,findIndex:()=>yi,findKey:()=>zs,findLastIndex:()=>Jo,findWhere:()=>Xn,first:()=>uo,flatten:()=>es,foldl:()=>Hr,foldr:()=>Ki,forEach:()=>_n,functions:()=>Tn,get:()=>Fr,groupBy:()=>Zo,has:()=>Eo,head:()=>uo,identity:()=>no,include:()=>vr,includes:()=>vr,indexBy:()=>Xi,indexOf:()=>rr,initial:()=>Qi,inject:()=>Hr,intersection:()=>Qo,invert:()=>bn,invoke:()=>Rr,isArguments:()=>ie,isArray:()=>at,isArrayBuffer:()=>ke,isBoolean:()=>Z,isDataView:()=>ue,isDate:()=>Lt,isElement:()=>bt,isEmpty:()=>ct,isEqual:()=>nn,isError:()=>Yt,isFinite:()=>pe,isFunction:()=>Ce,isMap:()=>Hn,isMatch:()=>St,isNaN:()=>ee,isNull:()=>I,isNumber:()=>F,isObject:()=>O,isRegExp:()=>Pt,isSet:()=>$e,isString:()=>gt,isSymbol:()=>Ae,isTypedArray:()=>Rt,isUndefined:()=>W,isWeakMap:()=>yn,isWeakSet:()=>Nr,iteratee:()=>_o,keys:()=>H,last:()=>_i,lastIndexOf:()=>Gi,map:()=>Ar,mapObject:()=>be,matcher:()=>Yn,matches:()=>Yn,max:()=>Br,memoize:()=>Fs,methods:()=>Tn,min:()=>wi,mixin:()=>qs,negate:()=>vi,noop:()=>lr,now:()=>Bn,object:()=>Ha,omit:()=>Zi,once:()=>mi,pairs:()=>Ir,partial:()=>co,partition:()=>Va,pick:()=>jo,pluck:()=>zr,property:()=>zn,propertyOf:()=>Go,random:()=>en,range:()=>ns,reduce:()=>Hr,reduceRight:()=>Ki,reject:()=>jr,rest:()=>Mr,restArguments:()=>z,result:()=>Mn,sample:()=>Us,select:()=>Cn,shuffle:()=>Da,size:()=>Fa,some:()=>bi,sortBy:()=>Na,sortedIndex:()=>qi,tail:()=>Mr,take:()=>uo,tap:()=>lo,template:()=>$n,templateSettings:()=>Y,throttle:()=>Hs,times:()=>cr,toArray:()=>Ur,toPath:()=>gr,transpose:()=>Ci,unescape:()=>P,union:()=>Ws,uniq:()=>Lo,unique:()=>Lo,uniqueId:()=>kr,unzip:()=>Ci,values:()=>tr,where:()=>Ln,without:()=>xn,wrap:()=>ro,zip:()=>$s});var xt="1.13.4",q=typeof self=="object"&&self.self===self&&self||typeof zc=="object"&&zc.global===zc&&zc||Function("return this")()||{},G=Array.prototype,U=Object.prototype,S=typeof Symbol<"u"?Symbol.prototype:null,E=G.push,A=G.slice,M=U.toString,N=U.hasOwnProperty,it=typeof ArrayBuffer<"u",st=typeof DataView<"u",Et=Array.isArray,Mt=Object.keys,Nt=Object.create,ne=it&&ArrayBuffer.isView,ut=isNaN,pt=isFinite,Dt=!{toString:null}.propertyIsEnumerable("toString"),Bt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],kt=Math.pow(2,53)-1;function z(C,L){return L=L==null?C.length-1:+L,function(){for(var J=Math.max(arguments.length-L,0),nt=Array(J),wt=0;wt<J;wt++)nt[wt]=arguments[wt+L];switch(L){case 0:return C.call(this,nt);case 1:return C.call(this,arguments[0],nt);case 2:return C.call(this,arguments[0],arguments[1],nt)}var ft=Array(L+1);for(wt=0;wt<L;wt++)ft[wt]=arguments[wt];return ft[L]=nt,C.apply(this,ft)}}function O(C){var L=typeof C;return L==="function"||L==="object"&&!!C}function I(C){return C===null}function W(C){return C===void 0}function Z(C){return C===!0||C===!1||M.call(C)==="[object Boolean]"}function bt(C){return!(!C||C.nodeType!==1)}function Q(C){var L="[object "+C+"]";return function(J){return M.call(J)===L}}const gt=Q("String"),F=Q("Number"),Lt=Q("Date"),Pt=Q("RegExp"),Yt=Q("Error"),Ae=Q("Symbol"),ke=Q("ArrayBuffer");var Oe=Q("Function"),Ie=q.document&&q.document.childNodes;typeof Int8Array!="object"&&typeof Ie!="function"&&(Oe=function(C){return typeof C=="function"||!1});const Ce=Oe,Pe=Q("Object");var me=st&&Pe(new DataView(new ArrayBuffer(8))),ae=typeof Map<"u"&&Pe(new Map),ce=Q("DataView");const ue=me?function(C){return C!=null&&Ce(C.getInt8)&&ke(C.buffer)}:ce,at=Et||Q("Array");function Zt(C,L){return C!=null&&N.call(C,L)}var qt=Q("Arguments");(function(){qt(arguments)||(qt=function(C){return Zt(C,"callee")})})();const ie=qt;function pe(C){return!Ae(C)&&pt(C)&&!isNaN(parseFloat(C))}function ee(C){return F(C)&&ut(C)}function je(C){return function(){return C}}function Je(C){return function(L){var J=C(L);return typeof J=="number"&&J>=0&&J<=kt}}function Ke(C){return function(L){return L==null?void 0:L[C]}}const fn=Ke("byteLength"),jn=Je(fn);var yt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const Rt=it?function(C){return ne?ne(C)&&!ue(C):jn(C)&&yt.test(M.call(C))}:je(!1),y=Ke("length");function j(C,L){L=function(Vt){for(var Jt={},De=Vt.length,qe=0;qe<De;++qe)Jt[Vt[qe]]=!0;return{contains:function(vn){return Jt[vn]===!0},push:function(vn){return Jt[vn]=!0,Vt.push(vn)}}}(L);var J=Bt.length,nt=C.constructor,wt=Ce(nt)&&nt.prototype||U,ft="constructor";for(Zt(C,ft)&&!L.contains(ft)&&L.push(ft);J--;)(ft=Bt[J])in C&&C[ft]!==wt[ft]&&!L.contains(ft)&&L.push(ft)}function H(C){if(!O(C))return[];if(Mt)return Mt(C);var L=[];for(var J in C)Zt(C,J)&&L.push(J);return Dt&&j(C,L),L}function ct(C){if(C==null)return!0;var L=y(C);return typeof L=="number"&&(at(C)||gt(C)||ie(C))?L===0:y(H(C))===0}function St(C,L){var J=H(L),nt=J.length;if(C==null)return!nt;for(var wt=Object(C),ft=0;ft<nt;ft++){var Vt=J[ft];if(L[Vt]!==wt[Vt]||!(Vt in wt))return!1}return!0}function Ct(C){return C instanceof Ct?C:this instanceof Ct?void(this._wrapped=C):new Ct(C)}function Xt(C){return new Uint8Array(C.buffer||C,C.byteOffset||0,fn(C))}Ct.VERSION=xt,Ct.prototype.value=function(){return this._wrapped},Ct.prototype.valueOf=Ct.prototype.toJSON=Ct.prototype.value,Ct.prototype.toString=function(){return String(this._wrapped)};var ge="[object DataView]";function Ve(C,L,J,nt){if(C===L)return C!==0||1/C==1/L;if(C==null||L==null)return!1;if(C!=C)return L!=L;var wt=typeof C;return(wt==="function"||wt==="object"||typeof L=="object")&&ze(C,L,J,nt)}function ze(C,L,J,nt){C instanceof Ct&&(C=C._wrapped),L instanceof Ct&&(L=L._wrapped);var wt=M.call(C);if(wt!==M.call(L))return!1;if(me&&wt=="[object Object]"&&ue(C)){if(!ue(L))return!1;wt=ge}switch(wt){case"[object RegExp]":case"[object String]":return""+C==""+L;case"[object Number]":return+C!=+C?+L!=+L:+C==0?1/+C==1/L:+C==+L;case"[object Date]":case"[object Boolean]":return+C==+L;case"[object Symbol]":return S.valueOf.call(C)===S.valueOf.call(L);case"[object ArrayBuffer]":case ge:return ze(Xt(C),Xt(L),J,nt)}var ft=wt==="[object Array]";if(!ft&&Rt(C)){if(fn(C)!==fn(L))return!1;if(C.buffer===L.buffer&&C.byteOffset===L.byteOffset)return!0;ft=!0}if(!ft){if(typeof C!="object"||typeof L!="object")return!1;var Vt=C.constructor,Jt=L.constructor;if(Vt!==Jt&&!(Ce(Vt)&&Vt instanceof Vt&&Ce(Jt)&&Jt instanceof Jt)&&"constructor"in C&&"constructor"in L)return!1}nt=nt||[];for(var De=(J=J||[]).length;De--;)if(J[De]===C)return nt[De]===L;if(J.push(C),nt.push(L),ft){if((De=C.length)!==L.length)return!1;for(;De--;)if(!Ve(C[De],L[De],J,nt))return!1}else{var qe,vn=H(C);if(De=vn.length,H(L).length!==De)return!1;for(;De--;)if(!Zt(L,qe=vn[De])||!Ve(C[qe],L[qe],J,nt))return!1}return J.pop(),nt.pop(),!0}function nn(C,L){return Ve(C,L)}function Qt(C){if(!O(C))return[];var L=[];for(var J in C)L.push(J);return Dt&&j(C,L),L}function R(C){var L=y(C);return function(J){if(J==null)return!1;var nt=Qt(J);if(y(nt))return!1;for(var wt=0;wt<L;wt++)if(!Ce(J[C[wt]]))return!1;return C!==Ue||!Ce(J[rt])}}var rt="forEach",ht="has",_t=["clear","delete"],te=["get",ht,"set"],ye=_t.concat(rt,te),Ue=_t.concat(te),Xe=["add"].concat(_t,rt,ht);const Hn=ae?R(ye):Q("Map"),yn=ae?R(Ue):Q("WeakMap"),$e=ae?R(Xe):Q("Set"),Nr=Q("WeakSet");function tr(C){for(var L=H(C),J=L.length,nt=Array(J),wt=0;wt<J;wt++)nt[wt]=C[L[wt]];return nt}function Ir(C){for(var L=H(C),J=L.length,nt=Array(J),wt=0;wt<J;wt++)nt[wt]=[L[wt],C[L[wt]]];return nt}function bn(C){for(var L={},J=H(C),nt=0,wt=J.length;nt<wt;nt++)L[C[J[nt]]]=J[nt];return L}function Tn(C){var L=[];for(var J in C)Ce(C[J])&&L.push(J);return L.sort()}function Kn(C,L){return function(J){var nt=arguments.length;if(L&&(J=Object(J)),nt<2||J==null)return J;for(var wt=1;wt<nt;wt++)for(var ft=arguments[wt],Vt=C(ft),Jt=Vt.length,De=0;De<Jt;De++){var qe=Vt[De];L&&J[qe]!==void 0||(J[qe]=ft[qe])}return J}}const Vr=Kn(Qt),Rn=Kn(H),To=Kn(Qt,!0);function Uo(C){if(!O(C))return{};if(Nt)return Nt(C);var L=function(){};L.prototype=C;var J=new L;return L.prototype=null,J}function ko(C,L){var J=Uo(C);return L&&Rn(J,L),J}function Wo(C){return O(C)?at(C)?C.slice():Vr({},C):C}function lo(C,L){return L(C),C}function gr(C){return at(C)?C:[C]}function gn(C){return Ct.toPath(C)}function $o(C,L){for(var J=L.length,nt=0;nt<J;nt++){if(C==null)return;C=C[L[nt]]}return J?C:void 0}function Fr(C,L,J){var nt=$o(C,gn(L));return W(nt)?J:nt}function Eo(C,L){for(var J=(L=gn(L)).length,nt=0;nt<J;nt++){var wt=L[nt];if(!Zt(C,wt))return!1;C=C[wt]}return!!J}function no(C){return C}function Yn(C){return C=Rn({},C),function(L){return St(L,C)}}function zn(C){return C=gn(C),function(L){return $o(L,C)}}function Jn(C,L,J){if(L===void 0)return C;switch(J??3){case 1:return function(nt){return C.call(L,nt)};case 3:return function(nt,wt,ft){return C.call(L,nt,wt,ft)};case 4:return function(nt,wt,ft,Vt){return C.call(L,nt,wt,ft,Vt)}}return function(){return C.apply(L,arguments)}}function qo(C,L,J){return C==null?no:Ce(C)?Jn(C,L,J):O(C)&&!at(C)?Yn(C):zn(C)}function _o(C,L){return qo(C,L,1/0)}function Qe(C,L,J){return Ct.iteratee!==_o?Ct.iteratee(C,L):qo(C,L,J)}function be(C,L,J){L=Qe(L,J);for(var nt=H(C),wt=nt.length,ft={},Vt=0;Vt<wt;Vt++){var Jt=nt[Vt];ft[Jt]=L(C[Jt],Jt,C)}return ft}function lr(){}function Go(C){return C==null?lr:function(L){return Fr(C,L)}}function cr(C,L,J){var nt=Array(Math.max(0,C));L=Jn(L,J,1);for(var wt=0;wt<C;wt++)nt[wt]=L(wt);return nt}function en(C,L){return L==null&&(L=C,C=0),C+Math.floor(Math.random()*(L-C+1))}Ct.toPath=gr,Ct.iteratee=_o;const Bn=Date.now||function(){return new Date().getTime()};function Co(C){var L=function(ft){return C[ft]},J="(?:"+H(C).join("|")+")",nt=RegExp(J),wt=RegExp(J,"g");return function(ft){return ft=ft==null?"":""+ft,nt.test(ft)?ft.replace(wt,L):ft}}const Ko={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$t=Co(Ko),P=Co(bn(Ko)),Y=Ct.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var It=/(.)^/,oe={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ve=/\\|'|\r|\n|\u2028|\u2029/g;function Ze(C){return"\\"+oe[C]}var le=/^\s*(\w|\$)+\s*$/;function $n(C,L,J){!L&&J&&(L=J),L=To({},L,Ct.templateSettings);var nt=RegExp([(L.escape||It).source,(L.interpolate||It).source,(L.evaluate||It).source].join("|")+"|$","g"),wt=0,ft="__p+='";C.replace(nt,function(qe,vn,Wr,os,Do){return ft+=C.slice(wt,Do).replace(ve,Ze),wt=Do+qe.length,vn?ft+=`'+
((__t=(`+vn+`))==null?'':_.escape(__t))+
'`:Wr?ft+=`'+
((__t=(`+Wr+`))==null?'':__t)+
'`:os&&(ft+=`';
`+os+`
__p+='`),qe}),ft+=`';
`;var Vt,Jt=L.variable;if(Jt){if(!le.test(Jt))throw new Error("variable is not a bare identifier: "+Jt)}else ft=`with(obj||{}){
`+ft+`}
`,Jt="obj";ft=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+ft+`return __p;
`;try{Vt=new Function(Jt,"_",ft)}catch(qe){throw qe.source=ft,qe}var De=function(qe){return Vt.call(this,qe,Ct)};return De.source="function("+Jt+`){
`+ft+"}",De}function Mn(C,L,J){var nt=(L=gn(L)).length;if(!nt)return Ce(J)?J.call(C):J;for(var wt=0;wt<nt;wt++){var ft=C==null?void 0:C[L[wt]];ft===void 0&&(ft=J,wt=nt),C=Ce(ft)?ft.call(C):ft}return C}var Wi=0;function kr(C){var L=++Wi+"";return C?C+L:L}function Vs(C){var L=Ct(C);return L._chain=!0,L}function Er(C,L,J,nt,wt){if(!(nt instanceof L))return C.apply(J,wt);var ft=Uo(C.prototype),Vt=C.apply(ft,wt);return O(Vt)?Vt:ft}var xo=z(function(C,L){var J=xo.placeholder,nt=function(){for(var wt=0,ft=L.length,Vt=Array(ft),Jt=0;Jt<ft;Jt++)Vt[Jt]=L[Jt]===J?arguments[wt++]:L[Jt];for(;wt<arguments.length;)Vt.push(arguments[wt++]);return Er(C,nt,this,this,Vt)};return nt});xo.placeholder=Ct;const co=xo,So=z(function(C,L,J){if(!Ce(C))throw new TypeError("Bind must be called on a function");var nt=z(function(wt){return Er(C,nt,L,this,J.concat(wt))});return nt}),er=Je(y);function Oo(C,L,J,nt){if(nt=nt||[],L||L===0){if(L<=0)return nt.concat(C)}else L=1/0;for(var wt=nt.length,ft=0,Vt=y(C);ft<Vt;ft++){var Jt=C[ft];if(er(Jt)&&(at(Jt)||ie(Jt)))if(L>1)Oo(Jt,L-1,J,nt),wt=nt.length;else for(var De=0,qe=Jt.length;De<qe;)nt[wt++]=Jt[De++];else J||(nt[wt++]=Jt)}return nt}const Yo=z(function(C,L){var J=(L=Oo(L,!1,!1)).length;if(J<1)throw new Error("bindAll must be passed function names");for(;J--;){var nt=L[J];C[nt]=So(C[nt],C)}return C});function Fs(C,L){var J=function(nt){var wt=J.cache,ft=""+(L?L.apply(this,arguments):nt);return Zt(wt,ft)||(wt[ft]=C.apply(this,arguments)),wt[ft]};return J.cache={},J}const Po=z(function(C,L,J){return setTimeout(function(){return C.apply(null,J)},L)}),$i=co(Po,Ct,1);function Hs(C,L,J){var nt,wt,ft,Vt,Jt=0;J||(J={});var De=function(){Jt=J.leading===!1?0:Bn(),nt=null,Vt=C.apply(wt,ft),nt||(wt=ft=null)},qe=function(){var vn=Bn();Jt||J.leading!==!1||(Jt=vn);var Wr=L-(vn-Jt);return wt=this,ft=arguments,Wr<=0||Wr>L?(nt&&(clearTimeout(nt),nt=null),Jt=vn,Vt=C.apply(wt,ft),nt||(wt=ft=null)):nt||J.trailing===!1||(nt=setTimeout(De,Wr)),Vt};return qe.cancel=function(){clearTimeout(nt),Jt=0,nt=wt=ft=null},qe}function nr(C,L,J){var nt,wt,ft,Vt,Jt,De=function(){var vn=Bn()-wt;L>vn?nt=setTimeout(De,L-vn):(nt=null,J||(Vt=C.apply(Jt,ft)),nt||(ft=Jt=null))},qe=z(function(vn){return Jt=this,ft=vn,wt=Bn(),nt||(nt=setTimeout(De,L),J&&(Vt=C.apply(Jt,ft))),Vt});return qe.cancel=function(){clearTimeout(nt),nt=ft=Jt=null},qe}function ro(C,L){return co(L,C)}function vi(C){return function(){return!C.apply(this,arguments)}}function Rs(){var C=arguments,L=C.length-1;return function(){for(var J=L,nt=C[L].apply(this,arguments);J--;)nt=C[J].call(this,nt);return nt}}function Pr(C,L){return function(){if(--C<1)return L.apply(this,arguments)}}function Ao(C,L){var J;return function(){return--C>0&&(J=L.apply(this,arguments)),C<=1&&(L=null),J}}const mi=co(Ao,2);function zs(C,L,J){L=Qe(L,J);for(var nt,wt=H(C),ft=0,Vt=wt.length;ft<Vt;ft++)if(L(C[nt=wt[ft]],nt,C))return nt}function La(C){return function(L,J,nt){J=Qe(J,nt);for(var wt=y(L),ft=C>0?0:wt-1;ft>=0&&ft<wt;ft+=C)if(J(L[ft],ft,L))return ft;return-1}}const yi=La(1),Jo=La(-1);function qi(C,L,J,nt){for(var wt=(J=Qe(J,nt,1))(L),ft=0,Vt=y(C);ft<Vt;){var Jt=Math.floor((ft+Vt)/2);J(C[Jt])<wt?ft=Jt+1:Vt=Jt}return ft}function Ye(C,L,J){return function(nt,wt,ft){var Vt=0,Jt=y(nt);if(typeof ft=="number")C>0?Vt=ft>=0?ft:Math.max(ft+Jt,Vt):Jt=ft>=0?Math.min(ft+1,Jt):ft+Jt+1;else if(J&&ft&&Jt)return nt[ft=J(nt,wt)]===wt?ft:-1;if(wt!=wt)return(ft=L(A.call(nt,Vt,Jt),ee))>=0?ft+Vt:-1;for(ft=C>0?Vt:Jt-1;ft>=0&&ft<Jt;ft+=C)if(nt[ft]===wt)return ft;return-1}}const rr=Ye(1,yi,qi),Gi=Ye(-1,Jo);function br(C,L,J){var nt=(er(C)?yi:zs)(C,L,J);if(nt!==void 0&&nt!==-1)return C[nt]}function Xn(C,L){return br(C,Yn(L))}function _n(C,L,J){var nt,wt;if(L=Jn(L,J),er(C))for(nt=0,wt=C.length;nt<wt;nt++)L(C[nt],nt,C);else{var ft=H(C);for(nt=0,wt=ft.length;nt<wt;nt++)L(C[ft[nt]],ft[nt],C)}return C}function Ar(C,L,J){L=Qe(L,J);for(var nt=!er(C)&&H(C),wt=(nt||C).length,ft=Array(wt),Vt=0;Vt<wt;Vt++){var Jt=nt?nt[Vt]:Vt;ft[Vt]=L(C[Jt],Jt,C)}return ft}function Xo(C){var L=function(J,nt,wt,ft){var Vt=!er(J)&&H(J),Jt=(Vt||J).length,De=C>0?0:Jt-1;for(ft||(wt=J[Vt?Vt[De]:De],De+=C);De>=0&&De<Jt;De+=C){var qe=Vt?Vt[De]:De;wt=nt(wt,J[qe],qe,J)}return wt};return function(J,nt,wt,ft){var Vt=arguments.length>=3;return L(J,Jn(nt,ft,4),wt,Vt)}}const Hr=Xo(1),Ki=Xo(-1);function Cn(C,L,J){var nt=[];return L=Qe(L,J),_n(C,function(wt,ft,Vt){L(wt,ft,Vt)&&nt.push(wt)}),nt}function jr(C,L,J){return Cn(C,vi(Qe(L)),J)}function Yi(C,L,J){L=Qe(L,J);for(var nt=!er(C)&&H(C),wt=(nt||C).length,ft=0;ft<wt;ft++){var Vt=nt?nt[ft]:ft;if(!L(C[Vt],Vt,C))return!1}return!0}function bi(C,L,J){L=Qe(L,J);for(var nt=!er(C)&&H(C),wt=(nt||C).length,ft=0;ft<wt;ft++){var Vt=nt?nt[ft]:ft;if(L(C[Vt],Vt,C))return!0}return!1}function vr(C,L,J,nt){return er(C)||(C=tr(C)),(typeof J!="number"||nt)&&(J=0),rr(C,L,J)>=0}const Rr=z(function(C,L,J){var nt,wt;return Ce(L)?wt=L:(L=gn(L),nt=L.slice(0,-1),L=L[L.length-1]),Ar(C,function(ft){var Vt=wt;if(!Vt){if(nt&&nt.length&&(ft=$o(ft,nt)),ft==null)return;Vt=ft[L]}return Vt==null?Vt:Vt.apply(ft,J)})});function zr(C,L){return Ar(C,zn(L))}function Ln(C,L){return Cn(C,Yn(L))}function Br(C,L,J){var nt,wt,ft=-1/0,Vt=-1/0;if(L==null||typeof L=="number"&&typeof C[0]!="object"&&C!=null)for(var Jt=0,De=(C=er(C)?C:tr(C)).length;Jt<De;Jt++)(nt=C[Jt])!=null&&nt>ft&&(ft=nt);else L=Qe(L,J),_n(C,function(qe,vn,Wr){((wt=L(qe,vn,Wr))>Vt||wt===-1/0&&ft===-1/0)&&(ft=qe,Vt=wt)});return ft}function wi(C,L,J){var nt,wt,ft=1/0,Vt=1/0;if(L==null||typeof L=="number"&&typeof C[0]!="object"&&C!=null)for(var Jt=0,De=(C=er(C)?C:tr(C)).length;Jt<De;Jt++)(nt=C[Jt])!=null&&nt<ft&&(ft=nt);else L=Qe(L,J),_n(C,function(qe,vn,Wr){((wt=L(qe,vn,Wr))<Vt||wt===1/0&&ft===1/0)&&(ft=qe,Vt=wt)});return ft}var Bs=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ur(C){return C?at(C)?A.call(C):gt(C)?C.match(Bs):er(C)?Ar(C,no):tr(C):[]}function Us(C,L,J){if(L==null||J)return er(C)||(C=tr(C)),C[en(C.length-1)];var nt=Ur(C),wt=y(nt);L=Math.max(Math.min(L,wt),0);for(var ft=wt-1,Vt=0;Vt<L;Vt++){var Jt=en(Vt,ft),De=nt[Vt];nt[Vt]=nt[Jt],nt[Jt]=De}return nt.slice(0,L)}function Da(C){return Us(C,1/0)}function Na(C,L,J){var nt=0;return L=Qe(L,J),zr(Ar(C,function(wt,ft,Vt){return{value:wt,index:nt++,criteria:L(wt,ft,Vt)}}).sort(function(wt,ft){var Vt=wt.criteria,Jt=ft.criteria;if(Vt!==Jt){if(Vt>Jt||Vt===void 0)return 1;if(Vt<Jt||Jt===void 0)return-1}return wt.index-ft.index}),"value")}function Ji(C,L){return function(J,nt,wt){var ft=L?[[],[]]:{};return nt=Qe(nt,wt),_n(J,function(Vt,Jt){var De=nt(Vt,Jt,J);C(ft,Vt,De)}),ft}}const Zo=Ji(function(C,L,J){Zt(C,J)?C[J].push(L):C[J]=[L]}),Xi=Ji(function(C,L,J){C[J]=L}),Ia=Ji(function(C,L,J){Zt(C,J)?C[J]++:C[J]=1}),Va=Ji(function(C,L,J){C[J?0:1].push(L)},!0);function Fa(C){return C==null?0:er(C)?C.length:H(C).length}function Ll(C,L,J){return L in J}const jo=z(function(C,L){var J={},nt=L[0];if(C==null)return J;Ce(nt)?(L.length>1&&(nt=Jn(nt,L[1])),L=Qt(C)):(nt=Ll,L=Oo(L,!1,!1),C=Object(C));for(var wt=0,ft=L.length;wt<ft;wt++){var Vt=L[wt],Jt=C[Vt];nt(Jt,Vt,C)&&(J[Vt]=Jt)}return J}),Zi=z(function(C,L){var J,nt=L[0];return Ce(nt)?(nt=vi(nt),L.length>1&&(J=L[1])):(L=Ar(Oo(L,!1,!1),String),nt=function(wt,ft){return!vr(L,ft)}),jo(C,nt,J)});function Qi(C,L,J){return A.call(C,0,Math.max(0,C.length-(L==null||J?1:L)))}function uo(C,L,J){return C==null||C.length<1?L==null||J?void 0:[]:L==null||J?C[0]:Qi(C,C.length-L)}function Mr(C,L,J){return A.call(C,L==null||J?1:L)}function _i(C,L,J){return C==null||C.length<1?L==null||J?void 0:[]:L==null||J?C[C.length-1]:Mr(C,Math.max(0,C.length-L))}function ts(C){return Cn(C,Boolean)}function es(C,L){return Oo(C,L,!1)}const Mo=z(function(C,L){return L=Oo(L,!0,!0),Cn(C,function(J){return!vr(L,J)})}),xn=z(function(C,L){return Mo(C,L)});function Lo(C,L,J,nt){Z(L)||(nt=J,J=L,L=!1),J!=null&&(J=Qe(J,nt));for(var wt=[],ft=[],Vt=0,Jt=y(C);Vt<Jt;Vt++){var De=C[Vt],qe=J?J(De,Vt,C):De;L&&!J?(Vt&&ft===qe||wt.push(De),ft=qe):J?vr(ft,qe)||(ft.push(qe),wt.push(De)):vr(wt,De)||wt.push(De)}return wt}const Ws=z(function(C){return Lo(Oo(C,!0,!0))});function Qo(C){for(var L=[],J=arguments.length,nt=0,wt=y(C);nt<wt;nt++){var ft=C[nt];if(!vr(L,ft)){var Vt;for(Vt=1;Vt<J&&vr(arguments[Vt],ft);Vt++);Vt===J&&L.push(ft)}}return L}function Ci(C){for(var L=C&&Br(C,y).length||0,J=Array(L),nt=0;nt<L;nt++)J[nt]=zr(C,nt);return J}const $s=z(Ci);function Ha(C,L){for(var J={},nt=0,wt=y(C);nt<wt;nt++)L?J[C[nt]]=L[nt]:J[C[nt][0]]=C[nt][1];return J}function ns(C,L,J){L==null&&(L=C||0,C=0),J||(J=L<C?-1:1);for(var nt=Math.max(Math.ceil((L-C)/J),0),wt=Array(nt),ft=0;ft<nt;ft++,C+=J)wt[ft]=C;return wt}function ti(C,L){if(L==null||L<1)return[];for(var J=[],nt=0,wt=C.length;nt<wt;)J.push(A.call(C,nt,nt+=L));return J}function xi(C,L){return C._chain?Ct(L).chain():L}function qs(C){return _n(Tn(C),function(L){var J=Ct[L]=C[L];Ct.prototype[L]=function(){var nt=[this._wrapped];return E.apply(nt,arguments),xi(this,J.apply(Ct,nt))}}),Ct}_n(["pop","push","reverse","shift","sort","splice","unshift"],function(C){var L=G[C];Ct.prototype[C]=function(){var J=this._wrapped;return J!=null&&(L.apply(J,arguments),C!=="shift"&&C!=="splice"||J.length!==0||delete J[0]),xi(this,J)}}),_n(["concat","join","slice"],function(C){var L=G[C];Ct.prototype[C]=function(){var J=this._wrapped;return J!=null&&(J=L.apply(J,arguments)),xi(this,J)}});const Ra=Ct;var rs=qs(et);rs._=rs;const Dl=rs}},Re={};function Wt(_){var lt=Re[_];if(lt!==void 0)return lt.exports;var D=Re[_]={exports:{}};return Fe[_].call(D.exports,D,D.exports,Wt),D.exports}Wt.n=_=>{var lt=_&&_.__esModule?()=>_.default:()=>_;return Wt.d(lt,{a:lt}),lt},Wt.d=(_,lt)=>{for(var D in lt)Wt.o(lt,D)&&!Wt.o(_,D)&&Object.defineProperty(_,D,{enumerable:!0,get:lt[D]})},Wt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Wt.o=(_,lt)=>Object.prototype.hasOwnProperty.call(_,lt),Wt.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var Gt={};return(()=>{Wt.d(Gt,{default:()=>wm});var _=Wt(50),lt=Wt(895),D=Wt(163);function et(a){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var e=a.raw;return e.reduce(function(n,i,l){var f=r[l-1],d=e[l-1];return Array.isArray(f)?f=f.join(""):d&&d.slice(-1)==="$"?n=n.slice(0,-1):f=(0,D.escape)(f),n+f+i})}const xt={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,multiFrames:!1,customUI:!1};var q=Wt(316),G=Wt.n(q),U,S=Wt(346),E=(U=function(a,r){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},U(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=a}U(a,r),a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),A=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return E(r,a),r}(S.Hn);const M=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return E(r,a),r.prototype.getByComponent=function(t){var e=this;return this.filter(function(n){return e.getComponent(n)===t})[0]},r.prototype.addComponent=function(t,e){var n=this,i=((0,_.isArray)(t)?t:[t]).filter(function(l){return!n.hasComponent(l)}).map(function(l){return new A({component:l})})[0];return this.push(i,e)},r.prototype.getComponent=function(t){return t.get("component")},r.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},r.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},r.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},r.prototype.removeComponent=function(t,e){var n=this,i=((0,_.isArray)(t)?t:[t]).map(function(l){return n.getByComponent(l)});return this.remove(i,e)},r}(S.FE);var N=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),it=function(){return it=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},it.apply(this,arguments)},st=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Et=function(){function a(r,t,e){this.cls=[],this.isPrivate=!1,this._em=r,this._name=t;var n=this.name.charAt(0).toLowerCase()+this.name.slice(1),i=(0,_.isUndefined)(r.config[n])?r.config[this.name]:r.config[n],l=i===!0?{}:i||{};l.pStylePrefix=r.config.pStylePrefix||"",(0,_.isUndefined)(i)||i||(l._disable=1),l.em=r,this._config=(0,D.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.init=function(r){},a.prototype.render=function(r){},a.prototype.postLoad=function(r){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return r?this.config[r]:this.config},a.prototype.__logWarn=function(r,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(r),t)},a.prototype.__appendTo=function(){var r=this.getConfig().appendTo;if(r){var t=(0,_.isElement)(r)?r:document.querySelector(r);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const Mt=Et;var Nt=function(a){function r(t,e,n,i,l,f){f===void 0&&(f={});var d=a.call(this,t,e,l)||this;return d.cls=[],d.private=!1,d.all=n,d.events=i,!f.skipListen&&d.__initListen(),d}return N(r,a),r.prototype.postLoad=function(t){},r.prototype.render=function(t){},r.prototype.getProjectData=function(t){var e={},n=this.storageKey;return n&&(e[n]=t||this.getAll()),e},r.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.all,i=e.onResult,l=e.reset,f=this.storageKey,d={action:"load"},v=n||this.all,g=t[f];if(typeof g=="string")try{g=JSON.parse(g)}catch{this.__logWarn("Data parsing failed",{input:g})}return l&&g&&v.reset(void 0,d),i?g&&i(g,d):g&&(0,D.isDef)(g.length)&&v.reset(g,d),g},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},r.prototype.getAll=function(){return st([],this.all.models,!0)},r.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},r.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,n=e.all,i=e.em,l=e.events;n&&i&&n.on("add",function(f,d,v){return i.trigger(l.add,f,v)}).on("remove",function(f,d,v){return i.trigger(l.remove,f,v)}).on("change",function(f,d){return i.trigger(l.update,f,f.changedAttributes(),d)}).on("all",this.__catchAllEvent,this),this.cls=[n].concat(t.collections||[]),(t.propagate||[]).forEach(function(f){var d=f.entity,v=f.event;d.on("all",function(g,w,T,V){var B=it({event:g},V||T);[i,n].map(function(X){return X.trigger(v,w,B)})})})},r.prototype.__remove=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,_.isString)(t)?this.get(t):t,f=function(){return l&&n.all.remove(l,e),l};return!e.silent&&(i==null||i.trigger(this.events.removeBefore,l,f,e)),!e.abort&&f()},r.prototype.__catchAllEvent=function(t,e,n,i){var l=this.em,f=this.events,d=i||n;l&&f.all&&l.trigger(f.all,{event:t,model:e,options:d}),this.__onAllEvent()},r.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var n=(0,_.isElement)(e)?e:document.querySelector(e);if(!n)return this.__logWarn('"appendTo" element not found');n.appendChild(this.render(t))}},r.prototype.__onAllEvent=function(){},r.prototype._createId=function(t){t===void 0&&(t=16);var e,n=this.getAll().length+t,i=this.getAllMap();do e=(0,D.createId)(n);while(i[e]);return e},r.prototype.__listenAdd=function(t,e){var n=this;t.on("add",function(i,l,f){return n.em.trigger(e,i,f)})},r.prototype.__listenRemove=function(t,e){var n=this;t.on("remove",function(i,l,f){return n.em.trigger(e,i,f)})},r.prototype.__listenUpdate=function(t,e){var n=this;t.on("change",function(i,l){return n.em.trigger(e,i,i.changedAttributes(),l)})},r.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},r}(Et);const ne={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"]};var ut=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const pt=function(a){function r(t,e,n){var i=a.call(this,e,n)||this;return i._module=t,i}return ut(r,a),Object.defineProperty(r.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),r}(S.Hn);var Dt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Bt=function(a){function r(t,e,n){return a.call(this,e,{module:t,modelConstructor:n})||this}return Dt(r,a),r.prototype.add=function(t,e){var n,i=this,l=(0,_.isArray)(t)?t:(0,_.isUndefined)(t)?void 0:[t];return l=(n=l==null?void 0:l.map(function(f){return f instanceof i.newModel?f:new i.newModel(i.module,f)}))!==null&&n!==void 0?n:[void 0],a.prototype.add.call(this,(0,_.isArray)(t)?l:l[0],e)},r.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},r}(S.FE);var kt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),z=function(){return z=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},z.apply(this,arguments)},O=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},I="__aw",W="__ah",Z=function(a){function r(t,e){var n=a.call(this,t,e)||this,i=n.em,l=n.attributes,f=l.styles,d=l.component,v=i.Components,g=v.getConfig(),w=i.Css.getAll(),T={},V={em:i,config:g,frame:n,idMap:T};if(!(0,D.isComponent)(d)){var B=(0,D.isObject)(d)?d:{components:d};!B.type&&(B.type="wrapper");var X=v.getType("wrapper").model;n.set("component",new X(B,V))}return f?(0,D.isObject)(f)||(Object.keys(T).length&&Array.isArray(f)&&f.forEach(function(ot){var tt=ot.selectors;if(tt&&tt.length==1){var At=tt[0],Ft=At.name&&At.type===2&&At;if(Ft&&T[Ft.name])Ft.name=T[Ft.name];else if((0,_.isString)(At)&&At[0]==="#"){var de=At.substring(1);de&&T[de]&&(tt[0]="#".concat(T[de]))}}}),w.add(f),n.set("styles",w)):n.set("styles",w),!e.width&&n.set(I,1),!e.height&&n.set(W,1),n}return kt(r,a),r.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),r.prototype.onRemove=function(){this.getComponent().remove({root:1})},r.prototype.changesUp=function(t){t===void 0&&(t={}),t.temporary||t.noCount||t.avoidStore||this.set("changesCount",this.get("changesCount")+1)},r.prototype.getComponent=function(){return this.get("component")},r.prototype.getStyles=function(){return this.get("styles")},r.prototype.disable=function(){this.trigger("disable")},r.prototype.remove=function(){this.view=void 0;var t=this.collection;return t&&t.remove(this)},r.prototype.getHead=function(){return O([],this.head,!0)},r.prototype.setHead=function(t){return this.set("head",O([],t,!0))},r.prototype.addHeadItem=function(t){this.head.push(t)},r.prototype.getHeadByAttr=function(t,e,n){return this.head.filter(function(i){return i.attributes&&i.attributes[t]==e&&(!n||n===i.tag)})[0]},r.prototype.removeHeadByAttr=function(t,e,n){var i=this.getHeadByAttr(t,e,n),l=this.head.indexOf(i);l>=0&&this.head.splice(l,1)},r.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},r.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},r.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},r.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},r.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},r.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",z({frame:this},t))},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=pt.prototype.toJSON.call(this,t),n=(0,_.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[I]&&delete e.width,e[W]&&delete e.height,(0,_.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,_.forEach)(n,function(i,l){e[l]===i&&delete e[l]}),(0,_.forEach)(["attributes","head"],function(i){(0,_.isEmpty)(e[i])&&delete e[i]}),e},r}(pt);const bt=Z;var Q=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const gt=function(a){function r(t,e){e===void 0&&(e=[]);var n=a.call(this,t,e,bt)||this;return n.loadedItems=0,n.itemsToLoad=0,(0,_.bindAll)(n,"itemLoaded"),n.on("reset",n.onReset),n.on("remove",n.onRemove),n}return Q(r,a),r.prototype.onReset=function(t,e){var n=this;((e==null?void 0:e.previousModels)||[]).map(function(i){return n.onRemove(i)})},r.prototype.onRemove=function(t){t==null||t.onRemove()},r.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},r.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},r.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(n){return n[t?"on":"off"]("loaded",e.itemLoaded)})},r}(Bt);var F=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Lt=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,i=e.em,l={};n.em=i,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(g){return n.unset(g)}));var f=t.frames||[l],d=new gt(i.Canvas,f);d.page=n,n.set("frames",d),!n.getId()&&n.set("id",i==null?void 0:i.get("PageManager")._createId());var v=i==null?void 0:i.get("UndoManager");return v==null||v.add(d),n}return F(r,a),r.prototype.defaults=function(){return{frames:[],_undo:!0}},r.prototype.onRemove=function(){this.getFrames().reset()},r.prototype.getFrames=function(){return this.get("frames")},r.prototype.getId=function(){return this.id},r.prototype.getName=function(){return this.get("name")},r.prototype.setName=function(t){return this.set({name:t})},r.prototype.getAllFrames=function(){return this.getFrames().models||[]},r.prototype.getMainFrame=function(){return this.getFrames().at(0)},r.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=S.Hn.prototype.toJSON.call(this,t),n=(0,_.result)(this,"defaults");return(0,_.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,_.forEach)(n,function(i,l){e[l]===i&&delete e[l]}),e},r}(S.Hn);var Pt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yt=function(){return Yt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Yt.apply(this,arguments)};const Ae=function(a){function r(t,e){var n=a.call(this,t)||this;return n.on("reset",n.onReset),n.on("remove",n.onRemove),n.model=function(i,l){return l===void 0&&(l={}),new Lt(i,Yt(Yt({},l),{em:e}))},n}return Pt(r,a),r.prototype.onReset=function(t,e){var n,i=this;(n=e==null?void 0:e.previousModels)===null||n===void 0||n.map(function(l){return i.onRemove(l)})},r.prototype.onRemove=function(t){t==null||t.onRemove()},r}(S.FE);var ke=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Oe=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ie="page",Ce="".concat(Ie,":"),Pe="".concat(Ce,"select"),me="".concat(Pe,":before"),ae="".concat(Ce,"update"),ce="".concat(Ce,"add"),ue="".concat(ce,":before"),at="".concat(Ce,"remove"),Zt="".concat(at,":before"),qt="change:selected",ie="main",pe={all:Ie,select:Pe,selectBefore:me,update:ae,add:ce,addBefore:ue,remove:at,removeBefore:Zt},ee=function(a){function r(t){var e=a.call(this,t,"PageManager",new Ae([],t),pe)||this;e.storageKey="pages",(0,_.bindAll)(e,"_onPageChange");var n=new pt({_undo:!0});return e.model=n,e.pages.on("reset",function(i){return i.at(0)&&e.select(i.at(0))}),e.pages.on("all",e.__onChange,e),n.on(qt,e._onPageChange),e}return ke(r,a),Object.defineProperty(r.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),r.prototype.getAll=function(){return Oe([],this.all.models,!0)},r.prototype.__onChange=function(t,e,n,i){var l=i||n;this.em.trigger(Ie,{event:t,page:e,options:l})},r.prototype.onLoad=function(){var t,e=this,n=this.pages,i={silent:!0};n.add(((t=this.config.pages)===null||t===void 0?void 0:t.map(function(f){return new Lt(f,{em:e.em,config:e.config})}))||[],i);var l=n.length?this.getMain():this.add({type:ie},i);l&&this.select(l,i)},r.prototype._onPageChange=function(t,e,n){var i=this.em,l=i.Layers,f=e.getMainComponent();l&&f&&l.setRoot(f),i.trigger(Pe,e,t.previous("selected")),this.__onChange(qt,e,n)},r.prototype.postLoad=function(){var t=this,e=t.em,n=t.model,i=t.pages,l=e.UndoManager;l.add(n),l.add(i),i.on("add remove reset change",function(f,d,v){return e.changesUp(v||d)})},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var i=this.em;t.id=t.id||this._createId();var l=function(){var f=n.pages.add(new Lt(t,{em:n.em,config:n.config}),e);return e.select&&n.select(f),f};return!e.silent&&i.trigger(ue,t,l,e),!e.abort&&l()},r.prototype.remove=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,_.isString)(t)?this.get(t):t,f=function(){return l&&n.pages.remove(l,e),l};return!e.silent&&i.trigger(Zt,l,f,e),!e.abort&&f()},r.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},r.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===ie})[0]||t.at(0)},r.prototype.getAllWrappers=function(){var t=this.getAll();return(0,_.unique)((0,_.flatten)(t.map(function(e){return e.getAllFrames().map(function(n){return n.getComponent()})})))},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,_.isString)(t)?this.get(t):t;return n&&(this.em.trigger(me,n,e),this.model.set("selected",n,e)),this},r.prototype.getSelected=function(){return this.model.get("selected")},r.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.pages,reset:!0})},r.prototype._createId=function(){var t,e=this.getAll().length+16,n=this.getAllMap();do t=(0,D.createId)(e);while(n[t]);return t},r}(Nt);const je=ee,Je={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};var Ke=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const fn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ke(r,a),r.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},r.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(e){return t.checkUnit(e)})},r.prototype.checkUnit=function(t){var e=this.get(t)||"";(parseFloat(e)||0).toString()===e.toString()&&this.set(t,"".concat(e,"px"))},r.prototype.getName=function(){return this.get("name")||this.get("id")},r.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},r}(S.Hn);var jn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return jn(r,a),r}(S.FE);const Rt=yt;yt.prototype.model=fn;var y=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),j=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a};const H=function(a){function r(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return y(r,a),r.prototype.template=function(t){var e=t.ppfx,n=t.label;return et(ct||(ct=j([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,n,e,e,e,e,e,e,e)},r.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},r.prototype.startAdd=function(){},r.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},r.prototype.updateSelect=function(){var t=this.em,e=this.devicesEl;if(t&&t.getDeviceModel&&e){var n=t.getDeviceModel();e.val(n?n.get("id"):"")}},r.prototype.getOptions=function(){var t=this.collection,e=this.em,n="";return t.forEach(function(i){var l=i.attributes,f=l.name,d=l.id,v=e&&e.t&&e.t("deviceManager.devices.".concat(d))||f;n+='<option value="'.concat(d||f,'">').concat(v,"</option>")}),n},r.prototype.render=function(){var t=this,e=t.em,n=t.ppfx,i=t.$el,l=t.el,f=e&&e.t&&e.t("deviceManager.device");return i.html(this.template({ppfx:n,label:f})),this.devicesEl=i.find(".".concat(n,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(n,"devices-c"),this},r}(S.G7);var ct,St=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ct=function(){return Ct=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ct.apply(this,arguments)},Xt="device",ge="".concat(Xt,":"),Ve="".concat(ge,"select"),ze="".concat(ge,"update"),nn="".concat(ge,"add"),Qt="".concat(ge,"remove"),R="".concat(Qt,":before"),rt="change:device",ht={all:Xt,select:Ve,update:ze,add:nn,remove:Qt,removeBefore:R},_t=function(a){function r(t){var e,n=this;return(n=a.call(this,t,"DeviceManager",new Rt,ht,Je)||this).Device=fn,n.Devices=Rt,n.storageKey="",n.devices=n.all,(e=n.config.devices)===null||e===void 0||e.forEach(function(i){return n.add(i,{silent:!0})}),n.select(n.config.default||n.devices.at(0)),t.on(rt,n._onSelect,n),n}return St(r,a),r.prototype._onSelect=function(t,e,n){var i=this.em,l=this.events,f=t.previous("device"),d=this.get(e),v=l.select;i.trigger(v,d,this.get(f)),this.__catchAllEvent(v,d,n)},r.prototype.add=function(t,e){var n;e===void 0&&(e={});var i=e;if((0,_.isString)(t)){var l=e;n=Ct(Ct({},i=arguments[2]||{}),{id:t,name:i.name||t,width:l})}else n=t;return n.id||(n.id=n.name||this._createId()),this.devices.add(n,i)},r.prototype.get=function(t){return this.getAll().filter(function(e){return e.get("name")===t})[0]||this.devices.get(t)||null},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getDevices=function(){return this.devices.models},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,_.isString)(t)?this.get(t):t;return n&&this.em.set("device",n.get("id"),e),this},r.prototype.getSelected=function(){return this.get(this.em.get("device"))},r.prototype.getAll=function(){return this.devices},r.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new H({collection:this.devices,config:Ct({em:e},this.config)}),this.view.render().el},r.prototype.destroy=function(){this.__destroy()},r}(Nt);const te=_t;var ye=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ue=function(a){function r(t){var e=this,n=t.em,i=t.config,l=i.scripts,f=i.styles;return(e=a.call(this,t,{scripts:l,styles:f})||this).set("frames",new gt(t)),e.listenTo(e,"change:zoom",e.onZoomChange),e.listenTo(n,"change:device ".concat(ze),e.updateDevice),e.listenTo(n,Pe,e._pageUpdated),e}return ye(r,a),r.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[]}},Object.defineProperty(r.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),r.prototype.init=function(){var t=this.em.Pages.getMain();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype._pageUpdated=function(t,e){var n=this.em;n.setSelected(),n.get("readyCanvas")&&n.stopDefault(),e==null||e.getFrames().map(function(i){return i.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,n=e.getDeviceModel(),i=t.frame||e.getCurrentFrameModel();if(i&&n){var l=n.attributes,f=l.width,d=l.height;i.set({width:f,height:d},{noUndo:1})}},r.prototype.onZoomChange=function(){this.get("zoom")<1&&this.set("zoom",1)},r}(pt);const Xe=Ue;var Hn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const yn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Hn(r,a),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),r.prototype.preinitialize=function(t){this.className=""},r}(S.G7);var $e=Wt(491),Nr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const tr=function(a){function r(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var n=a.call(this,t)||this;return n.itemsView="",n.itemType="type",n.reuseView=!1,n.viewCollection=[],e&&n.listenTo(n.collection,"add",n.addTo),n}return Nr(r,a),r.prototype.addTo=function(t){this.add(t)},r.prototype.itemViewNotFound=function(t){},r.prototype.add=function(t,e){var n,i=this,l=i.reuseView,f=i.viewCollection,d=(i.itemsView,e||null),v=t.get(this.itemType);n=t.view&&l?t.view:this.renderView(t,v),f.push(n);var g=n.render().el;d?d.appendChild(g):this.$el.append(g)},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(n){return t.add(n,e)}),this.$el.append(e),this.onRender(),this},r.prototype.onRender=function(){},r.prototype.onRemoveBefore=function(t,e){},r.prototype.onRemove=function(t,e){},r.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),S.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},r.prototype.clearItems=function(){this.viewCollection},r}(yn);var Ir=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const bn=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var n=e.model;return e.listenTo(n,"change",e.render),e.listenTo(n,"destroy remove",e.remove),e.listenTo(n.get("selectors"),"change",e.render),e}return Ir(r,a),r.prototype.tagName=function(){return"style"},r.prototype.render=function(){var t=this.model,e=this.el,n=t.get("important");return e.innerHTML=t.toCSS({important:n}),this},r}(S.G7);var Tn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Kn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Tn(r,a),r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},r}(bn);var Vr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rn=function(a,r){return"".concat(a).concat(r?"-".concat(parseFloat(r)):"")},To=function(a){function r(t){var e=a.call(this,t)||this;(0,_.bindAll)(e,"sortRules");var n=t.config||{};e.atRules={},e.config=n,e.em=n.em,e.pfx=n.stylePrefix||"",e.className=e.pfx+"rules";var i=e.collection;return e.listenTo(i,"add",e.addTo),e.listenTo(i,"reset",e.render),e}return Vr(r,a),r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){if(this.renderStarted){var n,i,l=e||null,f={model:t,config:this.config};if(t.get("atRuleType")==="keyframes"){var d=t.getAtRule(),v=this.atRules[d];if(!v){var g=document.createElement("style");v=document.createTextNode(""),g.appendChild(document.createTextNode("".concat(d,"{"))),g.appendChild(v),g.appendChild(document.createTextNode("}")),this.atRules[d]=v,n=g}i=new Kn(f),v.appendData(i.render().el.textContent)}else n=(i=new bn(f)).render().el;var w=this.className,T=t.get("mediaText"),V=Rn(w),B=V;if(T&&(B=Rn(w,this.getMediaWidth(T))),n){var X=l||this.el,ot=void 0;try{ot=X.querySelector("#".concat(B))}catch{}ot||(ot=X.querySelector("#".concat(V))),ot==null||ot.appendChild(n)}return n}},r.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},r.prototype.sortRules=function(t,e){var n=(this.em.getConfig().mediaCondition||"").indexOf("min-width")!==-1;return n?(n?t:e)-(n?e:t):0},r.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,n=e.em,i=e.$el,l=e.collection,f=this.className,d=document.createDocumentFragment();i.empty();var v=n.Devices.getAll().pluck("priority").sort(this.sortRules);return v.every(function(g){return g})&&v.unshift(0),v.forEach(function(g){return d.appendChild((0,$e.ut)("div",{id:Rn(f,g)}))}),l.each(function(g){return t.addToCollection(g,d)}),i.append(d),i.attr("class",f),this},r}(S.G7);const Uo=To;var ko=function(){return ko=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ko.apply(this,arguments)},Wo=function(){function a(r,t){var e=this;this.em=r,this.canvas=r.Canvas;var n=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),i=Array.isArray(n)?n:[n];this.el=i[0],this.counter=0,(0,_.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),i.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(r,t){var e={on:D.on,off:D.off},n=t?"on":"off";e[n](r,"dragenter",this.handleDragEnter),e[n](r,"dragover",this.handleDragOver),e[n](r,"drop",this.handleDrop),e[n](r,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(r){var t,e=r?D.on:D.off,n=this.el.ownerDocument,i=(t=n.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=r?{onStart:function(l){var f=l.sorter;(0,D.on)(i,"pointermove",f.onMove)},onEnd:function(l){var f=l.sorter;(0,D.off)(i,"pointermove",f.onMove)},customTarget:function(l){var f=l.event;return n.elementFromPoint(f.clientX,f.clientY)}}:null,e(i,"pointerenter",this.handleDragEnter),e(i,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(i,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(r){this.over?this.endDrop(r):this.__customTglEff(!1)},a.prototype.endDrop=function(r,t){var e=this.em,n=this.dragStop;this.counter=0,n&&n(r),this.__customTglEff(!1),e.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(r){this.updateCounter(-1,r)},a.prototype.updateCounter=function(r,t){this.counter+=r,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(r){var t=this,e=this.em,n=this.canvas,i=r.dataTransfer;if(this.updateCounter(1,r),!this.over){this.over=!0;var l,f,d=e.Utils,v=e.get("dragContent")||"<br>";if(e.stopDefault(),e.inAbsoluteMode()){var g=e.Components.getWrapper(),w=g.append({})[0],T=e.Commands.run("core:component-drag",{event:r,guidesInfo:1,center:1,target:w,onEnd:function(B,X,ot){var tt;if(!ot.cancelled){tt=g.append(v)[0];var At=n.getOffset(),Ft=w.getStyle(),de=Ft.top,_e=Ft.left,Ne=Ft.position;tt.addStyle({left:parseFloat(_e)-At.left+"px",top:parseFloat(de)-At.top+"px",position:Ne})}t.handleDragEnd(tt,i),w.remove()}});l=function(B){return T.stop(r,{cancel:B})},f=function(B){return v=B}}else{var V=new d.Sorter(ko({em:e,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:n.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(B){return t.handleDragEnd(B,i)},document:this.el.ownerDocument},this.sortOpts||{}));V.setDropContent(v),V.startSort(),this.sorter=V,l=function(B){B&&(V.moved=!1),V.endMove()},f=function(B){return V.setDropContent(B)}}this.dragStop=l,this.dragContent=f,e.trigger("canvas:dragenter",i,v)}},a.prototype.handleDragEnd=function(r,t){var e=this.em;this.over=!1,r&&(e.set("dragResult",r),e.trigger("canvas:drop",t,r)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(r){r.preventDefault(),this.em.trigger("canvas:dragover",r)},a.prototype.handleDrop=function(r){r.preventDefault();var t=this.dragContent,e=r.dataTransfer,n=this.getContentByData(e).content;r.target.style.border="",n&&t&&t(n),this.endDrop(!n,r)},a.prototype.getContentByData=function(r){var t=this.em,e=r&&r.types,n=r&&r.files||[],i=t.get("dragContent"),l=r&&r.getData("text");if(n.length){l=[];for(var f=0;f<n.length;f++){var d=n[f],v=d.type.split("/")[0];v=="image"&&l.push({type:v,file:d,attributes:{alt:d.name}})}}else if(i)l=i;else if((0,_.indexOf)(e,"text/html")>=0)l=r&&r.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,_.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,_.indexOf)(e,"text/json")>=0){var g=r&&r.getData("text/json");g&&(l=JSON.parse(g))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var w={content:l};return t.trigger("canvas:dragdata",r,w),w},a}();const lo=Wo;var gr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gn=function(){return gn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},gn.apply(this,arguments)},$o=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Fr=function(a){function r(t,e){var n=a.call(this,{model:t})||this;n.dragging=!1,n.lastMaxHeight=0,n.tools={},(0,_.bindAll)(n,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var i=n,l=i.el;i.em,n.module._config=gn(gn({},n.config||{}),{frameView:n}),n.frameWrapView=e,n.showGlobalTools=(0,_.debounce)(n.showGlobalTools.bind(n),50);var f=n.getCanvasModel();return n.listenTo(t,"change:head",n.updateHead),n.listenTo(f,"change:styles",n.renderStyles),t.view=n,(0,D.setViewEl)(l,n),n}return gr(r,a),Object.defineProperty(r.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),r.prototype.updateHead=function(){var t=this.model,e=this.getHead(),n=[],i=[],l=t.head,f=t.previous("head"),d=function(g){return g===void 0&&(g={}),Object.keys(g).sort().map(function(w){return"[".concat(w,'="').concat(g[w],'"]')}).join("")},v=function(g,w,T){g.forEach(function(V){var B=V.tag,X=V.attributes;!w.some(function(ot){return ot.tag===B&&d(ot.attributes)===d(X)})&&T.push(V)})};v(l,f,i),v(f,l,n),n.forEach(function(g){var w,T=e.querySelector("".concat(g.tag).concat(d(g.attributes)));(w=T==null?void 0:T.parentNode)===null||w===void 0||w.removeChild(T)}),(0,$e.SJ)(e,i)},r.prototype.getEl=function(){return this.el},r.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},r.prototype.getWindow=function(){return this.getEl().contentWindow},r.prototype.getDoc=function(){return this.getEl().contentDocument},r.prototype.getHead=function(){return this.getDoc().querySelector("head")},r.prototype.getBody=function(){return this.getDoc().querySelector("body")},r.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},r.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,$e.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},r.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},r.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},r.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},r.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},r.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},r.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},r.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),n=e.scrollTop,i=e.scrollLeft,l=t.offsetHeight,f=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:f,scrollTop:n,scrollLeft:i,scrollBottom:n+l,scrollRight:i+f}},r.prototype._getTool=function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.wrapper;return this._toggleEffects(!1),this.tools={},n&&n.remove(),yn.prototype.remove.apply(this,t),this},r.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},r.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,n=this.getWindow(),i=n.pageYOffset,l=t||0,f=e.getConfig().autoscrollLimit,d=this.getRect().height-f,v=i;l<f&&(v-=f-l),l>d&&(v+=l-d),!(0,_.isUndefined)(t)&&v!==i&&v>0&&v<this.lastMaxHeight&&(this.getGlobalToolsEl().style.opacity="0",this.showGlobalTools(),n.scrollTo(0,v)),requestAnimationFrame(this.autoscroll)}},r.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,D.getPointerEvent)(t).clientY*this.em.getZoomDecimal()},r.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},r.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},r.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),n=t?"on":"off",i={on:D.on,off:D.off};i[n](e,"mousemove dragover",this.updateClientY),i[n](e,"mouseup",this.stopAutoscroll)},r.prototype.render=function(){var t=this.$el,e=this.ppfx;return t.attr({class:"".concat(e,"frame")}),this.renderScripts(),this},r.prototype.renderScripts=function(){var t=this,e=this,n=e.el,i=e.model,l=e.em,f="frame:load",d={el:n,model:i,view:this},v=this.getCanvasModel(),g=function(w){var T;if(w.length>0){var V=w.shift(),B=(0,$e.ut)("script",gn({type:"text/javascript"},(0,_.isString)(V)?{src:V}:V));B.onerror=B.onload=g.bind(null,w),(T=n.contentDocument)===null||T===void 0||T.head.appendChild(B)}else t.renderBody(),l&&l.trigger(f,d)};n.onload=function(){var w=t.config.frameContent;if(w){var T=t.getDoc();T.open(),T.write(w),T.close()}l&&l.trigger("".concat(f,":before"),d),g($o([],v.get("scripts"),!0))}},r.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),n=this.getCanvasModel(),i=function(w){return w.map(function(T){return{tag:"link",attributes:gn({rel:"stylesheet"},(0,_.isString)(T)?{href:T}:T)}})},l=i(t.prev||n.previous("styles")),f=i(n.get("styles")),d=[],v=[],g=function(w,T,V){w.forEach(function(B){var X=B.attributes.href;!T.some(function(ot){return ot.attributes.href===X})&&V.push(B)})};g(f,l,v),g(l,f,d),d.forEach(function(w){var T,V=e.querySelector('link[href="'.concat(w.attributes.href,'"]'));(T=V==null?void 0:V.parentNode)===null||T===void 0||T.removeChild(V)}),(0,$e.SJ)(e,v)},r.prototype.renderBody=function(){var t,e,n=this,i=this,l=i.config,f=i.em,d=i.model,v=i.ppfx,g=this.getDoc(),w=this.getBody(),T=this.getWindow(),V=f.config;T._isEditor=!0,this.renderStyles({prev:[]}),(0,$e.R3)(w,`<style>
      `.concat(V.baseCss||l.frameStyle||"",`

      [data-gjs-type="wrapper"] {
        min-height: 100vh;
        padding-top: 0.001em;
      }

      .`).concat(v,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(v,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(v,`selected-parent {
        outline: 2px solid `).concat("#ffca6f",` !important
      }

      .`).concat(v,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(v,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(v,`no-pointer {
        pointer-events: none;
      }

      .`).concat(v,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(v,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(v,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(v,`is__grabbing,
      .`).concat(v,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(V.canvasCss||"",`
      `).concat(V.protectedCss||"",`
    </style>`));var B=d.getComponent(),X=f.Components.getType("wrapper").view;this.wrapper=new X({model:B,config:gn(gn({},B.config),{em:f,frameView:this})}).render(),(0,$e.R3)(w,(t=this.wrapper)===null||t===void 0?void 0:t.el),(0,$e.R3)(w,new Uo({collection:d.getStyles(),config:gn(gn({},f.Css.getConfig()),{frameView:this})}).render().el),(0,$e.R3)(w,this.getJsContainer()),(0,D.on)(w,"click",function(ot){var tt;return ot&&((tt=ot.target)===null||tt===void 0?void 0:tt.tagName)=="A"&&ot.preventDefault()}),(0,D.on)(w,"submit",function(ot){return ot&&ot.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent"}].forEach(function(ot){return ot.event.split(" ").forEach(function(tt){g.addEventListener(tt,function(At){return n.el.dispatchEvent((0,$e.t3)(At,ot.class))})})}),this._toggleEffects(!0),(0,D.hasDnd)(f)&&(this.droppable=new lo(f,(e=this.wrapper)===null||e===void 0?void 0:e.el)),d.trigger("loaded")},r.prototype._toggleEffects=function(t){var e=t?D.on:D.off,n=this.getWindow();n&&e(n,"".concat($e.G1," resize"),this._emitUpdate)},r.prototype._emitUpdate=function(){this.model._emitUpdated()},r}(yn);const Eo=Fr;var no=Wt(668),Yn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zn=function(){return zn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},zn.apply(this,arguments)};const Jn=function(a){function r(t,e){var n=a.call(this,{model:t})||this;return(0,_.bindAll)(n,"onScroll","frameLoaded","updateOffset","remove","startDrag"),zn(zn({},t.config),{frameWrapView:n}),n.cv=e,n.frame=new Eo(t,n),n.classAnim="".concat(n.ppfx,"frame-wrapper--anim"),n.updateOffset=(0,_.debounce)(n.updateOffset.bind(n),0),n.updateSize=(0,_.debounce)(n.updateSize.bind(n),0),n.listenTo(t,"loaded",n.frameLoaded),n.listenTo(t,"change:x change:y",n.updatePos),n.listenTo(t,"change:width change:height",n.updateSize),n.listenTo(t,"destroy remove",n.remove),n.updatePos(),n.setupDragger(),n}return Yn(r,a),r.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},r.prototype.setupDragger=function(){var t,e,n,i=this,l=this.module,f=this.model,d=function(v){l.toggleFramesEvents(v)};this.dragger=new no.Z({onStart:function(){var v=f.attributes,g=v.x,w=v.y;n=i.em.getZoomMultiplier(),t=g,e=w,d(!1)},onEnd:function(){return d(!0)},setPosition:function(v){f.set({x:t+v.x*n,y:e+v.y*n})}})},r.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},r.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,$e.L_)(this.elTools)},r.prototype.remove=function(t){var e=this;return this.__clear(t),yn.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(n){return e[n]=0}),this},r.prototype.updateOffset=function(){var t,e=this,n=e.em,i=e.$el,l=e.frame;n&&(n.runDefault({preserveSelected:1}),i.removeClass(this.classAnim),(t=l==null?void 0:l.model)===null||t===void 0||t._emitUpdated())},r.prototype.updatePos=function(t){var e=this.model,n=this.el,i=e.attributes,l=i.x,f=i.y,d=n.style;this.frame.rect=void 0,d.left=isNaN(l)?l:"".concat(l,"px"),d.top=isNaN(f)?f:"".concat(f,"px"),t&&this.updateOffset()},r.prototype.updateSize=function(){this.updateDim()},r.prototype.updateDim=function(){var t=this,e=t.em,n=t.el,i=t.$el,l=t.model,f=t.classAnim,d=t.frame;if(d){d.rect=void 0,i.addClass(f);var v=this.__handleSize(),g=v.noChanges,w=v.width,T=v.height;((0,_.isNull)(w)||(0,_.isNull)(T))&&l.set(zn(zn({},w?{}:{width:n.offsetWidth}),T?{}:{height:n.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),g?this.updateOffset():setTimeout(this.updateOffset,350)}},r.prototype.onScroll=function(){var t=this.frame;this.em.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},r.prototype.frameLoaded=function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},r.prototype.__handleSize=function(){var t="px",e=this.model,n=this.el.style,i=e.attributes,l=i.width,f=i.height,d=n.width||"",v=n.height||"",g=l||"",w=f||"",T=d==g&&v==w;return n.width=(0,_.isNumber)(g)?"".concat(g).concat(t):g,n.height=(0,_.isNumber)(w)?"".concat(w).concat(t):w,{noChanges:T,width:l,height:f,newW:g,newH:w}},r.prototype.render=function(){var t=this,e=t.frame,n=t.$el,i=t.ppfx,l=t.cv,f=t.model,d=t.el,v=f.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),n.empty().attr({class:"".concat(i,"frame-wrapper")}).append(`
      <div class="`.concat(i,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(i,`frame-wrapper__name" data-action-move>
          `).concat(f.get("name")||"",`
        </div>
        <div class="`).concat(i,`frame-wrapper__top-r">
          <div class="`).concat(i,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(i,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(i,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(i,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var g=(0,$e.ut)("div",{class:"".concat(i,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(i,`highlighter" data-hl></div>
      <div class="`).concat(i,`badge" data-badge></div>
      <div class="`).concat(i,`placeholder">
        <div class="`).concat(i,`placeholder-int"></div>
      </div>
      <div class="`).concat(i,`ghost"></div>
      <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(i,`resizer"></div>
      <div class="`).concat(i,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(i,`offset-fixed-v"></div>
    `));this.elTools=g;var w=l==null?void 0:l.toolsWrapper;return w&&w.appendChild(g),v&&v({el:d,elTop:d.querySelector("[data-frame-top]"),elRight:d.querySelector("[data-frame-right]"),elBottom:d.querySelector("[data-frame-bottom]"),elLeft:d.querySelector("[data-frame-left]"),frame:f,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},r}(yn);var qo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_o=function(a){function r(t,e){t===void 0&&(t={});var n=a.call(this,t,!0)||this;return n.listenTo(n.collection,"reset",n.render),n.canvasView=e.canvasView,n._module=e.module,n}return qo(r,a),r.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(n){return n.remove(e)})},r.prototype.onRender=function(){var t=this.$el,e=this.ppfx;t.attr({class:"".concat(e,"frames")})},r.prototype.renderView=function(t,e){return new Jn(t,this.canvasView)},r}(tr);const Qe=_o;var be=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lr=function(){return lr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},lr.apply(this,arguments)},Go=function(a){function r(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,_.bindAll)(e,"clearOff","onKeyPress","onCanvasMove"),e.className=e.pfx+"canvas";var n=e.em;return e._initFrames(),e.listenTo(n,"change:canvasOffset",e.clearOff),e.listenTo(n,"component:selected",e.checkSelected),e.listenTo(t,"change:zoom change:x change:y",e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return be(r,a),r.prototype.events=function(){return{wheel:"onWheel"}},r.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames></div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
    `)},r.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},r.prototype._initFrames=function(){var t=this,e=t.frames,n=t.model,i=t.config,l=t.em,f=n.frames;l.set("readyCanvas",0),f.once("loaded:all",function(){return l.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new Qe({collection:f},lr(lr({},i),{canvasView:this}))},r.prototype.checkSelected=function(t,e){var n;e===void 0&&(e={});var i=e.scroll,l=this.em.get("currentFrame");i&&((n=t.views)===null||n===void 0||n.forEach(function(f){f._getFrame()===l&&f.scrollIntoView(i)}))},r.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,yn.prototype.remove.apply(this,e),this.toggleListeners(!1),this},r.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},r.prototype.onCanvasMove=function(t){},r.prototype.toggleListeners=function(t){this.el;var e=t?D.on:D.off;e(document,"keypress",this.onKeyPress),e(window,"scroll resize",this.clearOff)},r.prototype.onKeyPress=function(t){var e=this.em;(0,D.getKeyChar)(t)!==" "||e.getZoomDecimal()===1||e.Canvas.isInputFocused()||(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},r.prototype.onWheel=function(t){if((t.ctrlKey||t.metaKey)&&this.em.getConfig().multiFrames){this.preventDefault(t);var e=this.model,n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),i=e.get("zoom");e.set("zoom",i+2*n)}},r.prototype.updateFrames=function(t){var e=this.em,n=this.model.attributes,i=n.x,l=n.y,f=this.getZoom(),d={preserveSelected:1},v=f?1/f:1;this.framesArea.style.transform="scale(".concat(f,") translate(").concat(i*v,"px, ").concat(l*v,"px)"),this.clearOff(),e.stopDefault(d),e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){return e.runDefault(d)},300)},r.prototype.getZoom=function(){return this.em.getZoomDecimal()},r.prototype.isElInViewport=function(t){var e=(0,D.getElement)(t),n=(0,D.getElRect)(e),i=this.getFrameOffset(e),l=n.top,f=n.left;return l>=0&&f>=0&&l<=i.height&&f<=i.width},r.prototype.offset=function(t,e){var n,i;e===void 0&&(e={});var l=(0,D.getElRect)(t),f=t==null?void 0:t.ownerDocument.body,d=e.noScroll;return{top:l.top+(d?0:(n=f==null?void 0:f.scrollTop)!==null&&n!==void 0?n:0),left:l.left+(d?0:(i=f==null?void 0:f.scrollLeft)!==null&&i!==void 0?i:0),width:l.width,height:l.height}},r.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},r.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var n=(e=this.frame)===null||e===void 0?void 0:e.el,i=t==null?void 0:t.ownerDocument.defaultView,l=i?i.frameElement:n;this.frmOff=this.offset(l||n)}return this.frmOff},r.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},r.prototype.getElementPos=function(t,e){e===void 0&&(e={});var n=this.getZoom(),i=e||{},l=this.getFrameOffset(t),f=this.el,d=this.getCanvasOffset(),v=this.offset(t,e),g=i.avoidFrameOffset?0:l.top,w=i.avoidFrameOffset?0:l.left;return{top:v.top*n+g-d.top+f.scrollTop,left:v.left*n+w-d.left+f.scrollLeft,height:v.height*n,width:v.width*n,zoom:n,rect:v}},r.prototype.getElementOffsets=function(t){var e=this;if(!t||(0,D.isTextNode)(t))return{};var n={},i=window.getComputedStyle(t);return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"].forEach(function(l){n[l]=parseFloat(i[l])*e.getZoom()}),n},r.prototype.getPosition=function(t){var e;t===void 0&&(t={});var n=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(n){var i=n.body,l=this.getZoom(),f=this.getFrameOffset(),d=this.getCanvasOffset(),v=t.noScroll;return{top:f.top+(v?0:i.scrollTop)*l-d.top,left:f.left+(v?0:i.scrollLeft)*l-d.left,width:d.width,height:d.height}}},r.prototype.updateScript=function(t){var e=t.model,n=e.getId();t.scriptContainer||(t.scriptContainer=(0,$e.ut)("div",{"data-id":n}),this.getJsContainer().appendChild(t.scriptContainer)),t.el.id=n,t.scriptContainer.innerHTML="";var i=document.createElement("script"),l=e.getScriptString(),f=e.get("script-props")?l:`function(){
`.concat(l,`
;}`),d=JSON.stringify(e.__getScriptProps());i.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(n,`');
        if (!item) return;
        (`).concat(f,".bind(item))(").concat(d,`)
      }, 1);`),setTimeout(function(){var v=t.scriptContainer;v==null||v.appendChild(i)},0)},r.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e&&e.getJsContainer()},r.prototype.getFrameView=function(t){return(t==null?void 0:t._getFrame())||this.em.get("currentFrame")},r.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,n=t.frames,i=t.em,l=t.framesArea,f=e.frames;f.listenToLoad(),n.render();var d=f.at(0),v=d==null?void 0:d.view;i.setCurrentFrame(v),l==null||l.appendChild(n.el),this.frame=v}},r.prototype.render=function(){var t=this,e=t.el,n=t.$el,i=t.ppfx,l=t.config,f=t.em;n.html(this.template());var d=n.find("[data-frames]");this.framesArea=d.get(0);var v=n.find("[data-tools]");return this.toolsWrapper=v.get(0),v.append(`
      <div class="`.concat(i,"tools ").concat(i,`tools-gl" style="pointer-events:none">
        <div class="`).concat(i,`placeholder">
          <div class="`).concat(i,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(i,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(i,'highlighter-sel"></div>'):"",`
        <div class="`).concat(i,`badge"></div>
        <div class="`).concat(i,`ghost"></div>
        <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(i,`resizer"></div>
        <div class="`).concat(i,`offset-v"></div>
        <div class="`).concat(i,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(i,"tools")),this.hlEl=e.querySelector(".".concat(i,"highlighter")),this.badgeEl=e.querySelector(".".concat(i,"badge")),this.placerEl=e.querySelector(".".concat(i,"placeholder")),this.ghostEl=e.querySelector(".".concat(i,"ghost")),this.toolbarEl=e.querySelector(".".concat(i,"toolbar")),this.resizerEl=e.querySelector(".".concat(i,"resizer")),this.offsetEl=e.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(i,"tools-gl")),this.el.className=(0,D.getUiClass)(f,this.className),this.ready=!0,this._renderFrames(),this},r}(yn);const cr=Go;var en=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bn=function(){return Bn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Bn.apply(this,arguments)},Co=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ko=function(a){function r(t){var e=a.call(this,t,"Canvas",ne)||this;return e.canvas=new Xe(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return en(r,a),r.prototype.getCanvasView=function(){return this.canvasView},r.prototype.init=function(){},r.prototype.onLoad=function(){this.model.init()},r.prototype.getModel=function(){return this.canvas},r.prototype.getElement=function(){return this.getCanvasView().el},r.prototype.getFrame=function(t){return this.getFrames()[t||0]},r.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},r.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},r.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},r.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},r.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},r.prototype._getLocalEl=function(t,e,n){var i=t,l=e==null?void 0:e._getFrame();return i=l?l[n]():i},r.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},r.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},r.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},r.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},r.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},r.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},r.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},r.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},r.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},r.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},r.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new cr(this.canvas),this.canvasView.render().el},r.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},r.prototype.offset=function(t){return this.getCanvasView().offset(t)},r.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},r.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},r.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},r.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},n=e.top,i=n===void 0?0:n,l=e.left,f=l===void 0?0:l;return Bn(Bn({},this.getCanvasView().getCanvasOffset()),{topScroll:i,leftScroll:f})},r.prototype.getTargetToElementDim=function(t,e,n){n===void 0&&(n={});var i=n||{},l=this.getCanvasView().getPosition();if(l){var f=i.elPos||this.getCanvasView().getElementPos(e),d=n.toRight||0,v=i.targetHeight||t.offsetHeight,g=i.targetWidth||t.offsetWidth,w=i.event||null,T=f.top-v,V=f.left;V+=d?f.width:0;var B=(V=d?V-g:V)<l.left?l.left:V,X=T<l.top?l.top:T,ot={top:X=X>f.top+f.height?f.top+f.height:X,left:B,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return w&&this.em&&this.em.trigger(w,ot),ot}},r.prototype.canvasRectOffset=function(t,e,n){var i=this;n===void 0&&(n={});var l=function(f,d,v){d===void 0&&(d=1);var g=i.em.getZoomDecimal(),w=d?"top":"left",T=f.ownerDocument,V=n.offset?function(on){var On=on.defaultView;return On==null?void 0:On.frameElement}(T):{},B=V.offsetTop,X=B===void 0?0:B,ot=V.offsetLeft,tt=ot===void 0?0:ot,At=T.body||{},Ft=At.scrollTop,de=Ft===void 0?0:Ft,_e=At.scrollLeft,Ne=d?de:_e===void 0?0:_e,We=d?X:tt;return v[w]-(Ne-We)*g};return{top:l(t,1,e),left:l(t,0,e)}},r.prototype.getTargetToElementFixed=function(t,e,n){var i;n===void 0&&(n={});var l=n.pos||this.getElementPos(t),f=n.canvasOff||this.canvasRectOffset(t,l),d=e.offsetHeight||0,v=e.offsetWidth||0,g=l.left+l.width,w=this.getCanvasView(),T=w.getPosition(),V=w.getFrameOffset(t),B=n.event,X=-d,ot=(0,_.isUndefined)(n.left)?l.width-v:n.left;ot=l.left<-ot?-l.left:ot;var tt=(i=T==null?void 0:T.width)!==null&&i!==void 0?i:0;ot=g>tt?ot-(g-tt):ot;var At=l.height+d,Ft=At<V.height;f.top<d&&(Ft?X+=At:X=-f.top<l.height?-f.top:l.height);var de={top:X,left:ot,canvasOffsetTop:f.top,canvasOffsetLeft:f.left};return B&&this.em.trigger(B,de),de},r.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var n=0,i=0,l=e.subWinOffset,f=t.target.ownerDocument,d=f.defaultView||f.parentWindow,v=d.frameElement,g=l?d.pageYOffset:0,w=l?d.pageXOffset:0;if(v){var T=v.getBoundingClientRect();n=T.top||0,i=T.left||0}return{y:t.clientY+n-g,x:t.clientX+i-w}},r.prototype.getMouseRelativeCanvas=function(t,e){var n,i=this.getZoomDecimal(),l=(n=this.getCanvasView().getPosition(e))!==null&&n!==void 0?n:{},f=l.top,d=f===void 0?0:f,v=l.left,g=v===void 0?0:v;return{y:t.clientY*i+d,x:t.clientX*i+g}},r.prototype.hasFocus=function(){return this.getDocument().hasFocus()},r.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),n=Co(["body"],this.config.notTextable,!0),i=e&&document.activeElement===e?t&&t.activeElement:document.activeElement;return i&&!n.some(function(l){return i.matches(l)})},r.prototype.scrollTo=function(t,e){e===void 0&&(e={});var n=(0,D.getElement)(t),i=n&&(0,D.getViewEl)(n);i&&i.scrollIntoView(e)},r.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},r.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},r.prototype.setZoom=function(t){return this.canvas.set("zoom",parseFloat(t)),this},r.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},r.prototype.setCoords=function(t,e){return this.canvas.set({x:parseFloat(t),y:parseFloat(e)}),this},r.prototype.getCoords=function(){var t=this.canvas.attributes;return{x:t.x,y:t.y}},r.prototype.getZoomDecimal=function(){return this.getZoom()/100},r.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},r.prototype.toggleFramesEvents=function(t){this.getFramesEl().style.pointerEvents=t?"":"none"},r.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},r.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new bt(this,Bn({},t)),e)},r.prototype.destroy=function(){var t,e=this;this.canvas.stopListening(),(t=this.canvasView)===null||t===void 0||t.remove(),["model","droppable"].forEach(function(n){return e[n]={}})},r}(Mt);const $t=Ko,P={stylePrefix:"comp-",components:[],draggableComponents:!0,processor:void 0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var Y="text/html",It=Y,oe=function(){return oe=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},oe.apply(this,arguments)},ve="data-gjs-",Ze="parse:html";const le=function(a,r){return r===void 0&&(r={}),{compTypes:"",modelAttrStart:ve,getPropAttribute:function(t,e){var n=t.replace(this.modelAttrStart,""),i=(e==null?void 0:e.length)||0,l=e==null?void 0:e.substring(0,1),f=e==null?void 0:e.substring(i-1),d=e==="true"||e!=="false"&&e;try{d=l=="{"&&f=="}"||l=="["&&f=="]"?JSON.parse(d):d}catch{}return{name:n,value:d}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var n={},i={};return(0,_.each)(t,function(l,f){if(f.indexOf(e.modelAttrStart)===0){var d=e.getPropAttribute(f,l);n[d.name]=d.value}else i[f]=l}),{props:n,attrs:i}},parseStyle:function(t){for(var e={},n=t.split(";"),i=0,l=n.length;i<l;i++){var f=n[i].trim();if(f){var d=f.split(":");e[d[0].trim()]=d.slice(1).join(":").trim()}}return e},parseClass:function(t){for(var e=[],n=t.split(" "),i=0,l=n.length;i<l;i++){var f=n[i].trim();f&&e.push(f)}return e},parseNode:function(t,e){e===void 0&&(e={});for(var n=[],i=t.childNodes,l=0,f=i.length;l<f;l++){var d=i[l],v=d.attributes||[],g=v.length,w=n[n.length-1],T=d.childNodes.length,V=this.compTypes,B={};if(V){var X="",ot=d.getAttribute&&d.getAttribute("".concat(this.modelAttrStart,"type"));if(ot)B={type:ot};else{for(var tt=0;tt<V.length;tt++){var At=V[tt];if(X=At.model.isComponent(d,e)){typeof X!="object"&&(X={type:At.id});break}}B=X}}if(!B.tagName){var Ft=d.tagName||"",de=d.namespaceURI||"";B.tagName=Ft&&de==="http://www.w3.org/1999/xhtml"?Ft.toLowerCase():Ft}g&&(B.attributes={});for(var _e=0;_e<g;_e++){var Ne=v[_e].nodeName,We=v[_e].nodeValue;if(Ne=="style")B.style=this.parseStyle(We);else if(Ne=="class")B.classes=this.parseClass(We);else{if(Ne=="contenteditable")continue;if(Ne.indexOf(this.modelAttrStart)===0){var on=this.getPropAttribute(Ne,We);B[on.name]=on.value}else We===""&&d[Ne]===!0&&(We=!0),B.attributes[Ne]=We}}if(T&&!B.components){var On=d.childNodes[0];T===1&&On.nodeType===3?(!B.type&&(B.type="text"),B.components={type:"textnode",content:On.nodeValue}):B.components=this.parseNode(d,oe(oe({},e),{inSvg:e.inSvg||B.type==="svg"}))}if(B.type=="textnode"){if(w&&w.type=="textnode"){w.content+=B.content;continue}if(!e.keepEmptyTextNodes){var Dr=d.nodeValue;if(Dr!=" "&&!Dr.trim())continue}}T||"".concat(d.outerHTML).slice(-2)!=="/>"||(B.void=!0);var Xr=B.components;if(!B.type&&Xr){for(var Zr=1,ao=0,Qr=0;Qr<Xr.length;Qr++){var ci=Xr[Qr],Bi=ci.type;if(["text","textnode"].indexOf(Bi)<0&&r.textTags.indexOf(ci.tagName)<0){Zr=0;break}Bi=="textnode"&&(ao=1)}Zr&&ao&&(B.type="text")}(B.tagName||B.type=="textnode")&&n.push(B)}return n},parse:function(t,e,n){var i;n===void 0&&(n={});var l=(a==null?void 0:a.get("Config"))||{},f={},d=oe(oe({},r),n),v=oe(oe(oe({},r.optionsHtml),{htmlType:((i=r.optionsHtml)===null||i===void 0?void 0:i.htmlType)||r.htmlType}),n),g=(0,_.isFunction)(d.parserHtml)?d.parserHtml(t,v):function(At,Ft){Ft===void 0&&(Ft={});var de,_e=new DOMParser,Ne=Ft.htmlType||It,We=Ne===Y,on=We?At:"<div>".concat(At,"</div>"),On=_e.parseFromString(on,Ne);if(We){var Dr=On.head,Xr=On.body,Zr=Dr.querySelectorAll("script");(0,_.each)(Zr,function(Qr){return Xr.appendChild(Qr)});var ao=[];(0,_.each)(Dr.children,function(Qr){return ao.push(Qr)}),(0,_.each)(ao,function(Qr,ci){return Xr.insertBefore(Qr,Xr.children[ci])}),de=Xr}else de=On.firstChild;return de}(t,v),w=g.querySelectorAll("script"),T=w.length;if(!((0,_.isUndefined)(l.allowScripts)?v.allowScripts:l.allowScripts))for(;T--;)w[T].parentNode.removeChild(w[T]);if(v.allowUnsafeAttr||this.__clearUnsafeAttr(g),e){for(var V=g.querySelectorAll("style"),B=V.length,X="";B--;)X=V[B].innerHTML+X,V[B].parentNode.removeChild(V[B]);X&&(f.css=e.parse(X))}a&&a.trigger("".concat(Ze,":root"),{input:t,root:g});var ot=this.parseNode(g,d),tt=ot.length!==1||d.returnArray?ot:ot[0];return f.html=tt,a&&a.trigger(Ze,{input:t,output:f}),f},__clearUnsafeAttr:function(t){var e=this,n=t.attributes||[],i=t.childNodes||[],l=[];(0,_.each)(n,function(f){var d=f.nodeName||"";d.indexOf("on")===0&&l.push(d)}),l.map(function(f){return t.removeAttribute(f)}),(0,_.each)(i,function(f){return e.__clearUnsafeAttr(f)})}}};var $n=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mn=function(){return Mn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Mn.apply(this,arguments)},Wi=le();const kr=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $n(r,a),r.prototype.parseStyle=function(t){return Wi.parseStyle(t)},r.prototype.extendStyle=function(t){return Mn(Mn({},this.getStyle()),t)},r.prototype.getStyle=function(t){var e=this.get("style")||{},n=Mn({},e);return t&&(0,_.isString)(t)?n[t]:n},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,_.isString)(t)&&(t=this.parseStyle(t));var i=this.getStyle(e),l=Mn({},t),f=Mn({},l);(0,_.keys)(f).forEach(function(v){f[v]===""&&delete f[v]}),this.set("style",f,e);var d=(0,D.shallowDiff)(i,l);return delete d.__p,(0,_.keys)(d).forEach(function(v){var g=n.em;e.noEvent||(n.trigger("change:style:".concat(v)),g&&(g.trigger("styleable:change",n,v,e),g.trigger("styleable:change:".concat(v),n,v,e)))}),l},r.prototype.addStyle=function(t,e,n){e===void 0&&(e=""),n===void 0&&(n={}),typeof t=="string"?t={prop:e}:n=e||{},t=this.extendStyle(t),this.setStyle(t,n)},r.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},r.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],n=this.getStyle(t);for(var i in n){var l=t.important,f=(0,_.isArray)(l)?l.indexOf(i)>=0:l,d="".concat(n[i]).concat(f?" !important":""),v=i.substr(0,2)=="__";d&&!v&&e.push("".concat(i,":").concat(d,";"))}return e.join("")},r.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},r.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},r}(S.Hn);var Vs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Er=function(){return Er=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Er.apply(this,arguments)},xo=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},co=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},So=function(a,r){return r===void 0&&(r=[]),a?(((0,_.isArray)(a)||(0,_.isFunction)(a.map)?a:[a]).map(function(t){r.push(t.getId()),So(t.components().models,r)}),r):[]},er=function(a,r,t){r===void 0&&(r={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps;return((0,_.isArray)(a)?a:[a]).map(function(n){var i=n.attributes,l=i===void 0?{}:i,f=n.components,d=n.tagName,v=l.id,g=(l.draggable,xo(l,["id","draggable"])),w=n;if(v&&(e[v]?(e[v].push(w),v=Cn.getNewId(r),w.attributes.id=v):(e[v]=[],r[v]&&(w=r[v],d&&w.set({tagName:d},Er(Er({},t),{silent:!0})),(0,_.keys)(g).length&&w.addAttributes(g,Er({},t))))),f){var T=er(f,r);if((0,_.isFunction)(w.components)){var V=w.components();V.length>0&&V.reset(T,t)}else w.components=T}return w})},Oo=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Vs(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.opt=e,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren);var n=e.em,i=e.config;this.config=i,this.em=n,this.domc=e.domc||(n==null?void 0:n.Components)},r.prototype.resetChildren=function(t,e){var n=this;e===void 0&&(e={});var i=this,l=e.previousModels||[],f=l.filter(function(v){return!t.get(v.cid)}),d=So(t);e.keepIds=So(l).filter(function(v){return d.indexOf(v)>=0}),f.forEach(function(v){return n.removeChildren(v,i,e)}),t.each(function(v){return n.onAdd(v)})},r.prototype.resetFromString=function(t,e){t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=So(this);var n=this,i=n.domc,l=n.em,f=n.parent,d=l==null?void 0:l.Css,v=(i==null?void 0:i.allById())||{},g=this.parseString(t,e),w=er(g,v,e),T=e.visitedCmps,V=T===void 0?{}:T;Object.keys(V).forEach(function(B){var X=V[B];if(X.length){var ot=(d==null?void 0:d.getRules("#".concat(B)))||[];ot.length&&X.forEach(function(tt){ot.forEach(function(At){var Ft=At.clone();Ft.set("selectors",["#".concat(tt.attributes.id)]),d.getAll().add(Ft)})})}}),this.reset(w,e),l==null||l.trigger("component:content",f,e,t)},r.prototype.removeChildren=function(t,e,n){var i=this;if(n===void 0&&(n={}),t){var l=this.domc,f=this.em,d=n.temporary||n.fromUndo;if(t.prevColl=this,!d){var v=t.getId(),g=f.Selectors.getAll(),w=f.Css.getAll(),T=(n.keepIds||[]).indexOf(v)<0;delete(l?l.allById():{})[v];var V=T?w.remove(w.filter(function(X){return X.getSelectors().getFullString()==="#".concat(v)}),n):[];g.remove(V.map(function(X){return X.getSelectors().at(0)})),t.opt.temporary||(f.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),f.trigger("component:remove",t)),t.components().forEach(function(X){return i.removeChildren(X,e,n)})}var B=t.components();f.stopListening(B),f.stopListening(t),f.stopListening(t.get("classes")),t.__postRemove()}},r.prototype.model=function(t,e){var n,i=e.collection.opt,l=i.em,f=l.Components.componentTypes;e.em=l,e.config=i.config,e.componentTypes=f,e.domc=i.domc;for(var d=0;d<f.length;d++)if(f[d].id==t.type){n=f[d].model;break}return n||(n=f[f.length-1].model,l&&t.type&&l.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new n(t,e)},r.prototype.parseString=function(t,e){e===void 0&&(e={});var n=this.em,i=this.domc,l=n.Css,f=n.Parser.parseHtml(t);if(Cn.checkId(f.html,f.css,i.componentsById,e),f.css&&l&&!e.temporary){e.at;var d=xo(e,["at"]);l.addCollection(f.css,Er(Er({},d),{extend:1}))}return f.html},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={}),e.keepIds=co(co([],e.keepIds||[],!0),So(e.previousModels),!0),(0,_.isString)(t)?t=this.parseString(t,e):(0,_.isArray)(t)&&(t=co([],t,!0)).forEach(function(f,d){if((0,_.isString)(f)){var v=n.parseString(f,e);t[d]=(0,_.isArray)(v)&&!v.length?null:v}});var i=(0,_.isArray)(t);t=(i?t:[t]).filter(Boolean).map(function(f){return n.processDef(f)}),t=i?(0,_.flatten)(t,1):t[0];var l=S.FE.prototype.add.apply(this,[t,e]);return this.__firstAdd=l,l},r.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this.em,n=this.config,i=(n===void 0?{}:n).processor,l=t;if(i){var f=i(l=Er({},l));f&&((0,_.each)(l,function(V,B){return delete l[B]}),(0,_.extend)(l,f))}if(l.$$typeof&&typeof l.props=="object"){(l=Er({},l)).props=Er({},l.props);var d=e.Components,v=e.Parser.parserHtml;(0,_.each)(l,function(V,B){(0,_.includes)(["props","type"],B)||delete l[B]});var g=l.props,w=g.children;delete g.children,delete l.props;var T=v.splitPropsFromAttr(g);l.attributes=T.attrs,w&&(l.components=w),l.type?d.getType(l.type)||(l.tagName=l.type,delete l.type):l.type="textnode",(0,_.extend)(l,T.props)}return l},r.prototype.onAdd=function(t,e,n){n===void 0&&(n={});var i=this.domc,l=this.em,f=t.getStyle(),d=l&&l.getConfig().avoidInlineStyle;if(i&&i.Component.ensureInList(t),!(0,_.isEmpty)(f)&&!d&&l&&l.get&&l.getConfig().forceClass&&!n.temporary){var v=t.cid;l.Css.setClassRule(v,f),t.setStyle({}),t.addClass(v)}t.__postAdd({recursive:!0})},r}(S.FE);const Yo=Oo;var Fs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Po=1,$i=2,Hs=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,i=e.config,l=i===void 0?{}:i,f=n.get("name"),d=n.get("label");f?d||n.set("label",f):n.set("name",d);var v=n.get("name"),g=l.escapeName,w=g?g(v):r.escapeName(v);return n.set("name",w),n.em=e.em,n}return Fs(r,a),r.prototype.defaults=function(){return{name:"",label:"",type:Po,active:!0,private:!1,protected:!1,_undo:!0}},r.prototype.isId=function(){return this.get("type")===$i},r.prototype.isClass=function(){return this.get("type")===Po},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,n=this.get("name"),i="";switch(this.get("type")){case Po:i=".";break;case $i:i="#"}return i+(e?e(n):n)},r.prototype.toString=function(){return this.getFullName()},r.prototype.getLabel=function(){return this.get("label")},r.prototype.setLabel=function(t){return this.set("label",t)},r.prototype.getActive=function(){return this.get("active")},r.prototype.setActive=function(t){return this.set("active",t)},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,n=S.Hn.prototype.toJSON.call(this,[t]),i=(0,_.result)(this,"defaults");if(e&&e.getConfig().avoidDefaults){(0,_.forEach)(i,function(f,d){n[d]===f&&delete n[d]}),n.label===n.name&&delete n.label;var l=(0,_.keys)(n).length;l===1&&n.name&&(n=n.name),l===2&&n.name&&n.type&&(n=this.getFullName())}return n},r.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\:@]+)/gi,"-")},r.TYPE_CLASS=Po,r.TYPE_ID=$i,r}(S.Hn);const nr=Hs;Hs.prototype.idAttribute="name";var ro=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vi=function(a,r){return a.reduce(function(t,e,n){return t.concat(vi(a.slice(n+1),"".concat(r).concat(e)))},[r])},Rs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ro(r,a),r.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||nr.TYPE_CLASS)},r.prototype.getStyleable=function(){return(0,_.filter)(this.models,function(t){return t.get("active")&&!t.get("private")})},r.prototype.getValid=function(t){var e=(t===void 0?{}:t).noDisabled;return(0,_.filter)(this.models,function(n){return!n.get("private")}).filter(function(n){return e?n.get("active"):1})},r.prototype.getFullString=function(t,e){e===void 0&&(e={});var n=[];return(t||this).forEach(function(i){return n.push(i.getFullName(e))}),e.sort&&n.sort(),n.join("").trim()},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,n=t.array,i=[],l=this.map(function(f){return f.getFullName(t)}).sort();return e?l.forEach(function(f,d){i=i.concat(vi(l.slice(d+1),f))}):i=l,n?i:e?i.join(","):i.join("")},r}(S.FE);const Pr=Rs;Rs.prototype.model=nr;var Ao=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mi=function(){return mi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},mi.apply(this,arguments)};const zs=function(a){function r(t){var e=a.call(this,t)||this,n=e.attributes,i=n.target,l=n.name,f=n.changeProp,d=n.value;if(!e.get("id")&&e.set("id",l),i){e.target=i,e.unset("target");var v=f?"change:".concat(l):"change:attributes:".concat(l);e.listenTo(i,v,e.targetUpdated);var g=d||e.getValue();!(0,_.isUndefined)(g)&&e.set({value:g},{silent:!0})}return e}return Ao(r,a),r.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",changeProp:!1,options:[]}},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,i=n===void 0||n,l=this.getId(),f=this.get("label")||this.getName();return i&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||f},r.prototype.getValue=function(){return this.getTargetValue()},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n={};e.partial&&(n.avoidStore=!0),this.setTargetValue(t,n),e.partial===!1&&(this.setTargetValue(""),this.setTargetValue(t))},r.prototype.props=function(){return this.attributes},r.prototype.targetUpdated=function(){var t,e=this.getTargetValue();this.set({value:e},{fromTarget:1}),(t=this.em)===null||t===void 0||t.trigger("trait:update",{trait:this,component:this.target})},r.prototype.getTargetValue=function(){var t,e=this.getName(),n=this.target;return t=this.get("changeProp")?n.get(e):n.getAttributes()[e],(0,_.isUndefined)(t)?"":t},r.prototype.setTargetValue=function(t,e){var n;e===void 0&&(e={});var i=this.target,l=this.attributes,f=this.getName();if(!(0,_.isUndefined)(t)){var d=t;if(t==="false"?d=!1:t==="true"&&(d=!0),this.getType()==="checkbox"){var v=l.valueTrue,g=l.valueFalse;d&&!(0,_.isUndefined)(v)&&(d=v),d||(0,_.isUndefined)(g)||(d=g)}this.get("changeProp")?i.set(f,d,e):i.addAttributes(((n={})[f]=d,n),e)}},r.prototype.setValueFromInput=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var i={value:t};this.set(i,mi(mi({},n),{avoidStore:1})),e&&(this.set("value","",n),this.set(i,n))},r.prototype.getInitValue=function(){var t,e=this.target,n=this.getName();if(e){var i=e.get("attributes");t=this.get("changeProp")?e.get(n):i[n]}return t||this.get("value")||this.get("default")},r}(S.Hn);var La=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yi=function(a){function r(t,e){var n=a.call(this,t)||this;return n.em=e.em,n.listenTo(n,"add",n.handleAdd),n.listenTo(n,"reset",n.handleReset),n}return La(r,a),r.prototype.handleReset=function(t,e){var n=(e===void 0?{}:e).previousModels;(n===void 0?[]:n).forEach(function(i){return i.trigger("remove")})},r.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e)},r.prototype.setTarget=function(t){this.target=t},r.prototype.add=function(t,e){var n=this.em;if((0,_.isString)(t)||(0,_.isArray)(t)){var i=n&&n.get&&n.Traits,l=function(w){return w===void 0&&(w={}),{build:function(T){var V=[];typeof T=="string"&&(T=[T]);for(var B=0;B<T.length;B++){var X=T[B],ot={name:X,type:"text"};X==="target"&&(ot.type="select",ot.default=!1,ot.options=w.optionsTarget),V.push(ot)}return V}}}(i&&i.getConfig());(0,_.isString)(t)&&(t=[t]);for(var f=0,d=t.length;f<d;f++){var v=t[f],g=(0,_.isString)(v)?l.build(v)[0]:v;g.target=this.target,t[f]=g}}return S.FE.prototype.add.apply(this,[t,e])},r}(S.FE);const Jo=yi;yi.prototype.model=zs;var qi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ye=function(){return Ye=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ye.apply(this,arguments)},rr=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Gi=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},br="component:drag",Xn="__symbols",_n="__symbol",Ar="__symbol_ovrd",Xo="component:update",Hr="".concat(Xo,"-inside"),Ki=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){var t;return(t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,locked:!1,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null})[_n]=0,t[Xn]=0,t[Ar]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.updated=function(t,e,n){},r.prototype.removed=function(){},r.prototype.initialize=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,_.bindAll)(this,"__upSymbProps","__upSymbCls","__upSymbComps");var i=e.em,l=this.parent(),f=l==null?void 0:l.attributes,d=this.get("propagate");if(d&&this.set("propagate",(0,_.isArray)(d)?d:[d]),f&&f.propagate&&!d){var v={},g=f.propagate;g.forEach(function(X){return v[X]=l.get(X)}),v.propagate=g,this.set(Ye(Ye({},v),t))}if(e&&e.config&&e.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),e.em=i,this.opt=e,this.em=i,this.frame=e.frame,this.config=e.config||{},this.set("attributes",Ye(Ye({},(0,_.result)(this,"defaults").attributes||{}),this.get("attributes")||{})),this.ccid=r.createId(this,e),this.initClasses(),this.initTraits(),this.initComponents(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.on("change:toolbar",this.__emitUpdateTlb),this.on("change",this.__onChange),this.on(Hr,this.__propToParent),this.set("status",""),this.views=[],["classes","traits","components"].forEach(function(X){var ot="add remove ".concat(X!=="components"?"change":"");n.listenTo(n.get(X),ot.trim(),function(){for(var tt=[],At=0;At<arguments.length;At++)tt[At]=arguments[At];return n.emitUpdate.apply(n,rr([X],tt,!1))})}),!e.temporary){var w=i&&i.Css,T=this.attributes,V=T.styles,B=T.type;V&&w&&w.addCollection(V,{avoidUpdateStyle:!0},{group:"cmp:".concat(B)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),i&&i.trigger("component:create",this)}},r.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,n=e==null?void 0:e.UndoManager,i=this.components();n&&!this.__hasUm&&(n.add(i),n.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&i.map(function(l){return l.__postAdd(t)})},r.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.get("UndoManager");e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},r.prototype.__onChange=function(t,e){var n=this,i=this.changedAttributes()||{};(0,_.keys)(i).forEach(function(l){return n.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete i[l]}),(0,D.isEmptyObj)(i)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:i,options:e}))},r.prototype.__changesUp=function(t){var e=this.em;[this.frame,e].forEach(function(n){return n&&n.changesUp(t)})},r.prototype.__propSelfToParent=function(t){this.trigger(Xo,t),this.__propToParent(t)},r.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Hr,t)},r.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},r.prototype.is=function(t){return this.get("type")==t},r.prototype.props=function(){return this.attributes},r.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.find=function(t){var e,n=[],i=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return i==null||i.each(function(l){var f=i.eq(l).data("model");f&&n.push(f)}),n},r.prototype.findType=function(t){var e=[],n=function(i){return i.forEach(function(l){l.is(t)&&e.push(l),n(l.components())})};return n(this.components()),e},r.prototype.closest=function(t){var e,n=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return n!=null&&n.length?n.data("model"):void 0},r.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},r.prototype.contains=function(t){var e=!1;if(!t)return e;var n=function(i){!e&&i.forEach(function(l){l===t&&(e=!0),!e&&n(l.components())})};return n(this.components()),e},r.prototype.tagUpdated=function(){this.trigger("rerender")},r.prototype.replaceWith=function(t){var e=this.collection,n=e.indexOf(this);return e.remove(this),e.add(t,{at:n})},r.prototype.attrUpdated=function(t,e,n){var i=this;n===void 0&&(n={});var l=this.get("attributes"),f=l.class;f&&this.setClass(f),delete l.class;var d=l.style;d&&this.setStyle(d),delete l.style;var v=Ye({},this.previous("attributes")),g=(0,D.shallowDiff)(v,this.get("attributes"));(0,_.keys)(g).forEach(function(w){return i.trigger("change:attributes:".concat(w),i,g[w],n)})},r.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",Ye({},t),e),this},r.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(Ye(Ye({},this.getAttributes({noClass:!0})),t),e)},r.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var n=Array.isArray(t)?t:[t],i=this.getAttributes();return n.map(function(l){return delete i[l]}),this.setAttributes(i,e)},r.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=this.em,i=(0,_.isString)(t)?t:"",l=i?e:t;if(n&&n.getConfig().avoidInlineStyle&&!l.inline){var f=n.get("state"),d=n.Css.getIdRule(this.getId(),Ye({state:f},l));if(this.rule=d,d)return d.getStyle(i)}return a.prototype.getStyle.call(this,i)},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={});var i=this,l=i.opt,f=i.em;if(f&&f.getConfig().avoidInlineStyle&&!l.temporary&&!e.inline){var d=this.get("style")||{};t=(0,_.isString)(t)?this.parseStyle(t):t,t=Ye(Ye({},t),d);var v=f.get("state"),g=f.Css,w=this.getStyle(e);this.rule=g.setIdRule(this.getId(),t,Ye(Ye({},e),{state:v}));var T=(0,D.shallowDiff)(w,t);this.set("style","",{silent:!0}),(0,_.keys)(T).forEach(function(V){return n.trigger("change:style:".concat(V))})}else t=a.prototype.setStyle.apply(this,arguments);return t},r.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,n=[],i=Ye({},this.get("attributes")),l=e==null?void 0:e.Selectors,f=this.getId();if(t.noClass?delete i.class:(this.classes.forEach(function(g){return n.push((0,_.isString)(g)?g:g.get("name"))}),n.length&&(i.class=n.join(" "))),!t.noStyle){var d=this.get("style");(0,D.isObject)(d)&&!(0,D.isEmptyObj)(d)&&(i.style=this.styleToString({inline:1}))}if(!(0,_.has)(i,"id")){var v=void 0;(function(g){return g&&g.getConfig().avoidInlineStyle})(e)?v=l&&l.get(f,l.Selector.TYPE_ID):(0,_.isEmpty)(this.getStyle())||(v=1),(this.__getSymbol()||this.__getSymbols())&&(v=1),v&&(i.id=f)}return i},r.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},r.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},r.prototype.removeClass=function(t){var e=[];t=(0,_.isArray)(t)?t:[t];var n=this.classes,i=nr.TYPE_CLASS;return t.forEach(function(l){l.split(" ").forEach(function(f){var d=n.where({name:f,type:i})[0];d&&e.push(n.remove(d))})}),e},r.prototype.getClasses=function(){var t=this.getAttributes().class;return t?t.split(" "):[]},r.prototype.__logSymbol=function(t,e,n){n===void 0&&(n={});var i=this.__getSymbol(),l=this.__getSymbols();(i||l)&&this.em.log(t,{model:this,toUp:e,context:"symbols",opts:n})},r.prototype.__initSymb=function(){this.__symbReady||(this.on("change",this.__upSymbProps),this.__symbReady=!0)},r.prototype.__isSymbol=function(){return(0,_.isArray)(this.get(Xn))},r.prototype.__isSymbolOrInst=function(){return!(!this.__isSymbol()&&!this.get(_n))},r.prototype.__isSymbolTop=function(){var t=this.parent();return this.__isSymbolOrInst()&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},r.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop();return(e.__isSymbol()?e:e.__getSymbol())!==t},r.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},r.prototype.__getSymbol=function(){var t=this.get(_n);if(t&&(0,_.isString)(t)){var e=this.__getAllById()[t];e?(t=e,this.set(_n,e)):t=0}return t},r.prototype.__getSymbols=function(){var t=this,e=this.get(Xn);return e&&(0,_.isArray)(e)&&(e.forEach(function(n,i){n&&(0,_.isString)(n)&&(e[i]=t.__getAllById()[n])}),e=e.filter(function(n){return n&&!(0,_.isString)(n)})),e},r.prototype.__isSymbOvrd=function(t){t===void 0&&(t="");var e=this.get(Ar),n=t.split(":")[0],i=t!==n?[t,n]:[t];return e===!0||(0,_.isArray)(e)&&i.some(function(l){return e.indexOf(l)>=0})},r.prototype.__getSymbToUp=function(t){var e=this;t===void 0&&(t={});var n=[],i=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||i&&this.__isSymbOvrd(i))return n;var l=this.__getSymbols()||[],f=this.__getSymbol();return n=(f?rr([f],f.__getSymbols()||[],!0):l).filter(function(d){return d!==e}).filter(function(d){return!(i&&d.__isSymbOvrd(i))})},r.prototype.__getSymbTop=function(t){for(var e=this,n=this.parent(t);n&&(n.__isSymbol()||n.__getSymbol());)e=n,n=n.parent(t);return e},r.prototype.__upSymbProps=function(t,e){var n=this;e===void 0&&(e={});var i=this.changedAttributes()||{},l=i.attributes||{};if(delete i.status,delete i.open,delete i[Xn],delete i[_n],delete i[Ar],delete i.attributes,delete l.id,(0,D.isEmptyObj)(l)||(i.attributes=l),!(0,D.isEmptyObj)(i)){var f=this.__getSymbToUp(e);(0,_.keys)(i).map(function(d){n.__isSymbOvrd(d)&&delete i[d]}),this.__logSymbol("props",f,{opts:e,changed:i}),f.forEach(function(d){var v=Ye({},i);(0,_.keys)(v).map(function(g){d.__isSymbOvrd(g)&&delete v[g]}),d.set(v,Ye({fromInstance:n},e))})}},r.prototype.__upSymbCls=function(t,e,n){var i=this;n===void 0&&(n={});var l=this.__getSymbToUp(n);this.__logSymbol("classes",l,{opts:n}),l.forEach(function(f){f.set("classes",i.get("classes"),{fromInstance:i})}),this.__changesUp(n)},r.prototype.__upSymbComps=function(t,e,n){var i=this,l=n||e||{},f={fromInstance:l.fromInstance,fromUndo:l.fromUndo},d=t.opt.temporary;if(n)if(n.add){var v=[],g=!!this.__getSymbols();if((Ft=this.__getSymbToUp(Ye(Ye({},f),{changed:"components:add"}))).length){var w=t.__getSymbol();v=(w?w.__getSymbols():t.__getSymbols())||[],(v=rr([],v,!0)).push(w||t)}!d&&this.__logSymbol("add",Ft,{opts:n,addedInstances:v.map(function(_e){return _e.cid}),added:t.cid}),Ft.forEach(function(_e){var Ne=_e.__getSymbTop(),We=v.filter(function(on){var On=on.__getSymbTop({prev:1});return Ne&&On&&On===Ne})[0]||t.clone({symbol:!0,symbolInv:g});_e.append(We,Ye({fromInstance:i},n))})}else{var T=t.__getSymbol();if(T&&!n.temporary&&T.set(Xn,T.__getSymbols().filter(function(_e){return _e!==t})),!t.__isSymbolTop()){var V="components:remove",B=n.index,X=t.parent(),ot=Ye({fromInstance:t},n),tt=t.__isSymbolNested(),At=function(_e){var Ne=_e.parent();Ne&&!Ne.__isSymbOvrd(V)&&_e.remove(ot)};Ft=X!=null&&X.__isSymbOvrd(V)?[]:t.__getSymbToUp(f),tt&&(Ft=X==null?void 0:X.__getSymbToUp(Ye(Ye({},f),{changed:V})),At=function(_e){var Ne=_e.components().at(B);Ne&&Ne.remove(Ye({fromInstance:X},ot))}),!d&&this.__logSymbol("remove",Ft,{opts:n,removed:t.cid,isSymbNested:tt}),Ft.forEach(At)}}else{var Ft=this.__getSymbToUp(Ye(Ye({},f),{changed:"components:reset"})),de=t.models;this.__logSymbol("reset",Ft,{components:de}),Ft.forEach(function(_e){var Ne=de.map(function(We){return We.clone({symbol:!0})});_e.components().reset(Ne,Ye({fromInstance:i},e))})}this.__changesUp(l)},r.prototype.initClasses=function(t,e,n){n===void 0&&(n={});var i=this.get("attributes").class||[],l=[this,"change:classes",this.initClasses],f=this.get("classes")||i,d=(0,_.isString)(f)?f.split(" "):f;this.stopListening.apply(this,l);var v=this.normalizeClasses(d),g=new Pr([]);return this.set("classes",g,n),g.add(v),g.on("add remove reset",this.__upSymbCls),this.listenTo.apply(this,l),this},r.prototype.initComponents=function(){var t=[this,"change:components",this.initComponents];this.stopListening.apply(this,t);var e=new Yo([],this.opt);e.parent=this;var n=this.get("components"),i=!this.opt.avoidChildren;return this.set("components",e),i&&n&&e.add((0,_.isFunction)(n)?n(this):n,this.opt),e.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},r.prototype.initTraits=function(t){var e=this.em,n="change:traits";this.off(n,this.initTraits),this.__loadTraits();var i=Ye({},this.get("attributes")),l=this.traits;return l.each(function(f){if(!f.get("changeProp")){var d=f.get("name"),v=f.getInitValue();d&&v&&(i[d]=v)}}),l.length&&this.set("attributes",i),this.on(n,this.initTraits),t&&e&&e.trigger("component:toggled"),this},r.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var n=this.previous(t)||[],i=this.get(t)||[],l=n.map(function(d){return"change:".concat(d)}).join(" "),f=i.map(function(d){return"change:".concat(d)}).join(" ");l&&this.off(l,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,e)}},r.prototype.__scriptPropsChange=function(t,e,n){n===void 0&&(n={}),n.avoidStore||this.trigger("rerender")},r.prototype.append=function(t,e){e===void 0&&(e={});var n=((0,_.isArray)(t)?rr([],t,!0):[t]).map(function(l){return(0,_.isString)(l)||l.collection&&l.collection.remove(l,{temporary:!0}),l}),i=this.components().add(n,e);return(0,_.isArray)(i)?i:[i]},r.prototype.components=function(t,e){e===void 0&&(e={});var n=this.get("components");return(0,_.isUndefined)(t)?n:(n.reset(void 0,e),t?this.append(t,e):[])},r.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},r.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},r.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},r.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},r.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},r.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},r.prototype.initToolbar=function(){var t=this.em,e=this,n=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var i=[];e.collection&&i.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&i.push({attributes:{class:"".concat(n,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&i.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&i.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",i)}},r.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var n=t||this.traits;if(!(n instanceof Jo)){n=(0,_.isFunction)(n)?n(this):n;var i=new Jo([],this.opt);i.setTarget(this),n.length&&(n.forEach(function(l){return l.attributes&&delete l.attributes.value}),i.add(n)),this.set({traits:i},e)}return this},r.prototype.getTraits=function(){return this.__loadTraits(),rr([],this.traits.models,!0)},r.prototype.setTraits=function(t){var e=(0,_.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},r.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},r.prototype.updateTrait=function(t,e){var n,i=this.getTrait(t);return i&&i.set(e),(n=this.em)===null||n===void 0||n.trigger("component:toggled"),this},r.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},r.prototype.removeTrait=function(t){var e,n=this,i=((0,_.isArray)(t)?t:[t]).map(function(d){return n.getTrait(d)}),l=this.traits,f=i.length?l.remove(i):[];return(e=this.em)===null||e===void 0||e.trigger("component:toggled"),(0,_.isArray)(f)?f:[f]},r.prototype.addTrait=function(t,e){var n;e===void 0&&(e={}),this.__loadTraits();var i=this.traits.add(t,e);return(n=this.em)===null||n===void 0||n.trigger("component:toggled"),(0,_.isArray)(i)?i:[i]},r.prototype.normalizeClasses=function(t){var e=[],n=this.em,i=n==null?void 0:n.Selectors;return i?t.models?rr([],t.models,!0):(t.forEach(function(l){return e.push(i.add(l))}),e):[]},r.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,n=Ye({},this.attributes),i=Ye({},this.opt),l=this.getId(),f=e==null?void 0:e.Css;n.attributes=Ye({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get("components").each(function(V,B){n.components[B]=V.clone(Ye(Ye({},t),{_inner:1}))}),this.get("traits").each(function(V,B){n.traits[B]=V.clone()}),this.get("classes").each(function(V,B){n.classes[B]=V.get("name")}),n.status="",i.collection=null;var d=new this.constructor(n,i),v="#".concat(d.getId());(f?f.getRules("#".concat(l)):[]).forEach(function(V){var B=V.clone();B.set("selectors",[v]),f.getAll().add(B)}),d.set(Xn,0);var g=this.__getSymbol(),w=this.__getSymbols();t.symbol||!g&&!w?g?(g.set(Xn,rr(rr([],g.__getSymbols(),!0),[d],!1)),d.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(Xn,rr(rr([],w,!0),[d],!1)),d.set(_n,this),d.__initSymb()):t.symbolInv?(this.set(Xn,[d]),d.set(_n,this),[this,d].map(function(V){return V.__initSymb()})):(d.set(Xn,[this]),[this,d].map(function(V){return V.__initSymb()}),this.set(_n,d))):(d.set(_n,0),d.set(Xn,0));var T="component:clone";return e&&e.trigger(T,d),this.trigger(T,d),d},r.prototype.getName=function(){var t=this.em,e=this.attributes,n=e.type,i=e.tagName,l=e.name,f=n||i,d=n?"":i,v="domComponents.names.",g=l&&(t==null?void 0:t.t("".concat(v).concat(l))),w=d&&(t==null?void 0:t.t("".concat(v).concat(d))),T=t&&(t.t("".concat(v).concat(n))||t.t("".concat(v).concat(i)));return this.get("custom-name")||g||l||w||(0,D.capitalize)(d)||T||(0,D.capitalize)(f)},r.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},r.prototype.toHTML=function(t){t===void 0&&(t={});var e=this,n=[],i=t.tag||e.get("tagName"),l=e.get("void"),f=t.attributes,d=this.getAttrToHTML();if(delete t.tag,f&&((0,_.isFunction)(f)?d=f(e,d)||{}:(0,D.isObject)(f)&&(d=f)),t.withProps){var v=this.toJSON();(0,_.forEach)(v,function(tt,At){At[0]!=="_"&&["classes","attributes","components"].indexOf(At)<0&&(d["data-gjs-".concat(At)]=(0,_.isArray)(tt)||(0,D.isObject)(tt)?JSON.stringify(tt):tt)})}for(var g in d){var w=d[g];if(!(0,_.isUndefined)(w)&&w!==null)if((0,_.isBoolean)(w))w&&n.push(g);else{var T="";if(t.altQuoteAttr&&(0,_.isString)(w)&&w.indexOf('"')>=0)T="'".concat(w.replace(/'/g,"&apos;"),"'");else{var V=(0,_.isString)(w)?w.replace(/"/g,"&quot;"):w;T='"'.concat(V,'"')}n.push("".concat(g,"=").concat(T))}}var B=n.length?" ".concat(n.join(" ")):"",X=e.getInnerHTML(t),ot="<".concat(i).concat(B).concat(l?"/":"",">").concat(X);return!l&&(ot+="</".concat(i,">")),ot},r.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},r.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(n){return n.toHTML(t)}).join(""):this.get("content")},r.prototype.getAttrToHTML=function(){var t=this.getAttributes();return delete t.style,t},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=q.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,!t.fromUndo){var n=e[_n],i=e[Xn];i&&(0,_.isArray)(i)&&(e[Xn]=i.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),n&&!(0,_.isString)(n)&&(e[_n]=n.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},r.prototype.getChangedProps=function(t){var e=t||q.Model.prototype.toJSON.apply(this),n=(0,_.result)(this,"defaults");return(0,_.forEach)(n,function(i,l){["type"].indexOf(l)===-1&&e[l]===i&&delete e[l]}),(0,_.isEmpty)(e.type)&&delete e.type,(0,_.forEach)(["attributes","style"],function(i){(0,_.isEmpty)(n[i])&&(0,_.isEmpty)(e[i])&&delete e[i]}),(0,_.forEach)(["classes","components"],function(i){(!e[i]||(0,_.isEmpty)(n[i])&&!e[i].length)&&delete e[i]}),e},r.prototype.getId=function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},r.prototype.setId=function(t,e){var n=Ye({},this.get("attributes"));return n.id=t,this.set("attributes",n,e),this},r.prototype.getEl=function(t){t===void 0&&(t=void 0);var e=this.getView(t);return e&&e.el},r.prototype.getView=function(t){var e=this.view,n=this.views;return t&&(e=n.filter(function(i){return i._getFrame()===t.view})[0]),e},r.prototype.getCurrentView=function(){var t=(this.em.get("currentFrame")||{}).model;return this.getView(t)},r.prototype.__getScriptProps=function(){var t=this.props();return(this.get("script-props")||[]).reduce(function(e,n){return e[n]=t[n],e},{})},r.prototype.getScriptString=function(t){var e=this,n=t||this.get("script")||"";if(!n)return n;if(this.get("script-props"))n=n.toString().trim();else{if(typeof n=="function"){var i=n.toString().trim();n=(i=i.replace(/^function[\s\w]*\(\)\s?\{/,"").replace(/\}$/,"")).trim()}var l=this.em.getConfig(),f=Gi(l.tagVarStart||"{[ "),d=Gi(l.tagVarEnd||" ]}"),v=new RegExp("".concat(f,"([\\w\\d-]*)").concat(d),"g");n=n.replace(v,function(g,w){e.scriptUpdated();var T=e.attributes[w]||"";return(0,_.isArray)(T)||typeof T=="object"?JSON.stringify(T):T})}return n},r.prototype.emitUpdate=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var l=this.em,f=Xo+(t?":".concat(t):""),d=t&&this.get(t);t&&this.updated.apply(this,rr([t,d,t&&this.previous(t)],n,!1)),this.trigger.apply(this,rr([f],n,!1)),l&&l.trigger.apply(l,rr([f,this],n,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=d,e),options:n[2]||n[1]||{}})},r.prototype.onAll=function(t){return(0,_.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},r.prototype.remove=function(t){var e=this;t===void 0&&(t={});var n=this.em,i=this.collection,l=function(){i&&i.remove(e,Ye(Ye({},t),{action:"remove-component"})),i||(e.components("",t),e.components().removeChildren(e,void 0,t))},f=Ye({},t);return[this,n].map(function(d){return d.trigger("component:remove:before",e,l,f)}),!f.abort&&l(),this},r.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var n=e.at,i=this.index(),l=t===this.parent();l&&(i===n||i===n-1)||(l&&n&&n>i&&(e.at=n-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},r.prototype.isInstanceOf=function(t){var e,n,i=(n=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||n===void 0?void 0:n.model;return!!i&&this instanceof i},r.prototype.isChildOf=function(t){for(var e=(0,_.isString)(t),n=this.parent();n;){if(e){if(n.isInstanceOf(t))return!0}else if(n===t)return!0;n=n.parent()}return!1},r.prototype.resetId=function(t){var e=this.em,n=this.getId();if(!n)return this;var i=r.createId(this);this.setId(i);var l=e==null?void 0:e.Css.getIdRule(n),f=l==null?void 0:l.get("selectors").at(0);return f==null||f.set("name",i),this},r.prototype._getStyleRule=function(t){var e=(t===void 0?{}:t).id,n=this.em,i=e||this.getId();return n==null?void 0:n.Css.getIdRule(i)},r.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},r.prototype._idUpdated=function(t,e,n){if(n===void 0&&(n={}),!n.idUpdate){var i=this.ccid,l=(this.get("attributes")||{}).id,f=(this.previous("attributes")||{}).id||i,d=r.getList(this);if(d[l]||!l&&f)return this.setId(f,{idUpdate:!0});delete d[f],d[l]=this,this.ccid=l;var v=this._getStyleSelector({id:f});v&&v.set({name:l,label:l})}},r.getDefaults=function(){return(0,_.result)(this.prototype,"defaults")},r.isComponent=function(t){return{tagName:(0,D.toLowerCase)(t.tagName)}},r.ensureInList=function(t){var e=r.getList(t),n=t.getId(),i=e[n];if(i){if(i!==t){var l=r.getIncrementId(n,e);t.setId(l),e[l]=t}}else e[n]=t;t.components().forEach(function(f){return r.ensureInList(f)})},r.createId=function(t,e){e===void 0&&(e={});var n,i=r.getList(t),l=e.idMap,f=l===void 0?{}:l,d=t.get("attributes").id;return d?(n=r.getIncrementId(d,i,e),t.setId(n),d!==n&&(f[d]=n)):n=r.getNewId(i),i[n]=t,n},r.getNewId=function(t){for(var e=Object.keys(t).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-e),i="i".concat(n);t[i];)i=r.getNewId(t);return i},r.getIncrementId=function(t,e,n){n===void 0&&(n={});var i=n.keepIds,l=1,f=t;if((i===void 0?[]:i).indexOf(t)<0)for(;e[f];)l++,f="".concat(t,"-").concat(l);return f},r.getList=function(t){var e=t.opt,n=e===void 0?{}:e,i=n.domc,l=n.em,f=i||(l==null?void 0:l.Components);return f?f.componentsById:{}},r.checkId=function(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n={}),i===void 0&&(i={});var l=(0,_.isArray)(t)?t:[t],f=i.keepIds,d=f===void 0?[]:f;l.forEach(function(v){v.attributes;var g=v.attributes,w=g===void 0?{}:g,T=v.components,V=w.id;if(V&&n[V]&&d.indexOf(V)<0){var B=r.getIncrementId(V,n);w.id=B,(0,_.isArray)(e)&&e.forEach(function(X){var ot=X.selectors;ot.forEach(function(tt,At){tt==="#".concat(V)&&(ot[At]="#".concat(B))})})}T&&r.checkId(T,e,n,i)})},r}(kr);const Cn=Ki;var jr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yi=function(a){function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=Ln,t}return jr(r,a),r.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},r.prototype.removeChildren=function(t,e,n){var i=this;n===void 0&&(n={}),t.views.forEach(function(l){if(l){var f=l.childrenView,d=l.scriptContainer;f&&f.stopListening(),(0,$e.L_)(d),l.remove.apply(l)}}),t.components().forEach(function(l){return i.removeChildren(l,e,n)})},r.prototype.addTo=function(t,e,n){n===void 0&&(n={});var i=this.em,l=this.collection.indexOf(t);if(this.addToCollection(t,null,l),i&&!n.temporary){var f=function(d){i.trigger("component:add",d),d.components().forEach(function(v){return f(v)})};f(t)}},r.prototype.addToCollection=function(t,e,n){for(var i=this,l=i.config,f=i.opts,d=i.em,v=e||null,g=l.frameView,w=(g==null?void 0:g.model)&&t.getView(g.model),T=f.componentTypes||(d==null?void 0:d.Components.getTypes()),V=t.get("type")||"default",B=this.compView,X=0;X<T.length;X++)if(T[X].id==V){B=T[X].view;break}var ot,tt=w||new B({model:t,config:l,componentTypes:T});try{ot=tt.render().el}catch(_e){ot=document.createTextNode(""),d.logError(_e)}if(v)v.appendChild(ot);else{var At=this.parentEl,Ft=At.childNodes;if((0,_.isUndefined)(n))At.appendChild(ot);else{var de=Ft.length==n;de&&n--,de||!Ft.length?At.appendChild(ot):At.insertBefore(ot,Ft[n])}}return t.opt.temporary||d==null||d.trigger("component:mount",t),ot},r.prototype.resetChildren=function(t,e){var n=this,i=(e===void 0?{}:e).previousModels,l=i===void 0?[]:i;this.parentEl.innerHTML="",l.forEach(function(f){return n.removeChildren(f,n.collection)}),t.each(function(f){return n.addToCollection(f)})},r.prototype.render=function(t){var e=this,n=this.el,i=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,i)}),n.innerHTML="",n.appendChild(i),this},r}(S.G7);const bi=Yi;var vr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rr=function(){return Rr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Rr.apply(this,arguments)},zr=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return vr(r,a),r.prototype.className=function(){return this.getClasses()},r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{},i=n.em,l=e.opt||{},f=this.$el,d=this.el;this.opts=t,this.modelOpt=l,this.config=n,this.em=i,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),f.data("model",e),(0,D.setViewEl)(d,this),e.view=this,this._getFrame()&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Rr(Rr({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},r.prototype.__isDraggable=function(){var t=this.model,e=this.config,n=t.attributes.draggable;return e.draggableComponents&&n},r.prototype._clbObj=function(){var t=this,e=t.em,n=t.model,i=t.el;return{editor:e==null?void 0:e.getEditor(),model:n,el:i}},r.prototype.init=function(t){},r.prototype.removed=function(t){},r.prototype.onRender=function(t){},r.prototype.onActive=function(t){},r.prototype.onDisable=function(){},r.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this.model,n=this.$el,i=e.views,l=this._getFrame()||{};return e.components().forEach(function(f){var d=f.getView(l.model);d==null||d.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),i.splice(i.indexOf(this),1),this.removed(this._clbObj()),n.data({model:"",collection:"",view:""}),this},r.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},r.prototype.initClasses=function(){var t=this.model,e="change:classes",n=t.get("classes");n instanceof Pr&&(this.stopListening(t,e,this.initClasses),this.listenTo(t,e,this.initClasses),this.listenTo(n,"add remove change",this.updateClasses),n.length&&this.importClasses())},r.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,n=e.model,i=e.$el,l=e.childrenView,f=n.get("components"),d=[n,"change:components",this.initComponents];f instanceof Yo&&(i.data("collection",f),l&&l.remove(),this.stopListening.apply(this,d),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,d))},r.prototype.handleChange=function(){var t=this.model,e=(0,_.keys)(t.changed);if(e.length!==1||e[0]!=="status")for(var n in t.emitUpdate(),t.changed)t.emitUpdate(n)},r.prototype.importClasses=function(){var t=this.em.Selectors;t&&this.model.classes.each(function(e){t.add(e.get("name"))})},r.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,n=e.em,i=e.el,l=e.ppfx,f=e.model,d=n==null?void 0:n.Canvas.getConfig().extHl,v=f.get("status"),g="".concat(l,"selected"),w="".concat(g,"-parent"),T="".concat(l,"freezed"),V="".concat(l,"hovered"),B="".concat(l,"no-pointer"),X=[g,w,T,V,B],ot=d&&!t.noExtHl?"":g;this.$el.removeClass(X.join(" "));var tt=[i.getAttribute("class")||""];switch(v){case"selected":tt.push(ot);break;case"selected-parent":tt.push(w);break;case"freezed":tt.push(T);break;case"freezed-selected":tt.push(T,ot);break;case"hovered":!t.avoidHover&&tt.push(V)}f.get("locked")&&tt.push(B);var At=tt.filter(Boolean).join(" ");At&&i.setAttribute("class",At)},r.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),n=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!n||"")},r.prototype.updateStyle=function(t,e,n){n===void 0&&(n={});var i=this.model,l=this.em;if(l&&l.getConfig().avoidInlineStyle&&!n.inline){var f=i.getStyle();!(0,_.isEmpty)(f)&&i.setStyle(f)}else this.setAttribute("style",i.styleToString(n))},r.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},r.prototype.setAttribute=function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},r.prototype.getClasses=function(){return this.model.getClasses().join(" ")},r.prototype.updateAttributes=function(){var t=[],e=this,n=e.model,i=e.$el,l=e.el,f=n.attributes,d=f.textable,v=f.type,g=Rr(Rr({id:n.getId(),"data-gjs-type":v||"default"},this.__isDraggable()&&{draggable:!0}),d&&{contenteditable:"false"});(0,_.each)(l.attributes,function(T){return t.push(T.nodeName)}),t.forEach(function(T){return i.removeAttr(T)}),this.updateStyle(),this.updateHighlight();var w=Rr(Rr({},g),n.getAttributes());(0,_.keys)(w).forEach(function(T){return w[T]===!1&&delete w[T]}),i.attr(w)},r.prototype.updateContent=function(){var t=this.model.get("content"),e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},r.prototype.prevDef=function(t){t.preventDefault()},r.prototype.updateScript=function(){var t=this.model,e=this.em;t.get("script")&&(e==null||e.Canvas.getCanvasView().updateScript(this))},r.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},r.prototype.getOffsetRect=function(){var t={},e=this.el,n=0,i=0,l=function(f){var d=f.offsetParent;d?(n+=d.offsetTop,i+=d.offsetLeft,l(d)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+i,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},r.prototype.isInViewport=function(t){var e,n=(t===void 0?{}:t).rect,i=this.el.ownerDocument,l=i.body,f=(e=i.defaultView)===null||e===void 0?void 0:e.frameElement,d=n||this.getOffsetRect(),v=d.top,g=d.left,w=this._getFrame().getOffsetRect();return v>=w.scrollTop&&g>=w.scrollLeft&&v<=w.scrollBottom&&g<=(f==null?void 0:f.offsetWidth)+l.scrollLeft},r.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var n=this.getOffsetRect();if(!this.isInViewport({rect:n})||t.force){var i=this.el;t.behavior!=="smooth"?(e=i.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,n.top):i.scrollIntoView(Rr({behavior:"smooth",block:"nearest"},t))}},r.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,$e.dL)(t,this.el),this.render()},r.prototype._setData=function(){var t=this.model,e=t.components();this.$el.data({model:t,collection:e,view:this})},r.prototype._getFrame=function(){var t;return(t=this.em)===null||t===void 0?void 0:t.get("Canvas").config.frameView},r.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new bi({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),i=0,l=n.length;i<l;i++)t.appendChild(n.shift())},r.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},r.prototype.onAttrUpdate=function(){},r.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,D.setViewEl)(this.el,this),this.postRender()),this},r.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},r.getEvents=function(){return(0,_.result)(this.prototype,"events")},r}(S.G7);const Ln=zr;var Br=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const wi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Br(r,a),r.prototype.tagName=function(){return"div"},r}(Ln);var Bs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ur=function(){return Ur=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ur.apply(this,arguments)};const Us=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Bs(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Ur(Ur({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return["td","th"].indexOf((0,D.toLowerCase)(t.tagName))>=0},r}(Cn);var Da=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Na=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Da(r,a),r}(Ln);var Ji=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zo=function(){return Zo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Zo.apply(this,arguments)},Xi="tr";const Ia=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ji(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Zo(Zo({},a.prototype.defaults),{tagName:Xi,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)===Xi},r}(Cn);var Va=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Fa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Va(r,a),r}(Ln);var Ll=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jo=function(){return jo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},jo.apply(this,arguments)},Zi="table";const Qi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ll(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return jo(jo({},a.prototype.defaults),{type:Zi,tagName:Zi,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("components");!n.length&&n.add({type:"tbody"})},r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)===Zi},r}(Cn),uo=Ln.extend({events:{}});var Mr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_i=function(){return _i=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_i.apply(this,arguments)},ts="tbody";const es=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Mr(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return _i(_i({},a.prototype.defaults),{type:ts,tagName:ts,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("components"),i=this.get("columns"),l=this.get("rows");if(!n.length){for(var f=[];l--;){for(var d=[],v=i;v--;)d.push({type:"cell",classes:["cell"]});f.push({type:"row",classes:["row"],components:d})}n.add(f)}},r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)===ts},r}(Cn);var Mo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xn=function(){return xn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xn.apply(this,arguments)},Lo="thead";const Ws=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Mo(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return xn(xn({},a.prototype.defaults),{type:Lo,tagName:Lo})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)===Lo},r}(es);var Qo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ci=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Qo(r,a),r}(Ln);var $s=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ha=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $s(r,a),r}(Ln);var ns=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ti=function(){return ti=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ti.apply(this,arguments)},xi="tfoot";const qs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ns(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ti(ti({},a.prototype.defaults),{type:xi,tagName:xi})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)===xi},r}(es);var Ra=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const rs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ra(r,a),r}(Ln);var Dl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),C=function(){return C=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},C.apply(this,arguments)},L='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',J=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Dl(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return C(C({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(L,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(L,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("attributes").src;n&&(0,D.buildBase64UrlFromSvg)((0,_.result)(this,"defaults").src)!==n&&this.set("src",n,{silent:!0})},r.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e="image-editor";if(t.Commands.has(e)){for(var n=!1,i=this.get("toolbar"),l=0;l<i.length;l++)if(i[l].command==="image-editor"){n=!0;break}n||(i.push({attributes:{class:"fa fa-pencil"},command:e}),this.set("toolbar",i))}}},r.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},r.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",n=e;return e&&e.substr(0,4)==="<svg"&&(n=(0,D.buildBase64UrlFromSvg)(e)),n},r.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,_.result)(this,"defaults").src;return t===e||t===(0,D.buildBase64UrlFromSvg)(e)},r.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),n=e.attributes;return n&&e.src===n.src&&delete e.src,e},r.prototype.parseUri=function(t){var e={};if((0,D.hasWin)())(e=document.createElement("a")).href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:function(n){n===void 0&&(n="");for(var i={},l=n.substring(1).split("&"),f=0;f<l.length;f++){var d=l[f].split("="),v=decodeURIComponent(d[0]);v&&(i[v]=decodeURIComponent(d[1]||""))}return i}(e.search)}},r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)==="img"},r}(Cn);const nt=J;var wt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ft=function(){return ft=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ft.apply(this,arguments)},Vt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return wt(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return ft(ft({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){this.get("src")?this.parseFromSrc():this.updateSrc(),a.prototype.initialize.call(this,t,e),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},r.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},r.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),n=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",n=n?"&t="+n:"";var i=this.get("mapUrl")+"?"+t+e+n;return i+="&output=embed"},r.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")).query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},r.isComponent=function(t){if((0,D.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},r}(nt);const Jt=Vt;var De=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qe=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return De(r,a),r.prototype.tagName=function(){return"img"},r.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},r.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this.model,e=this.em,n=t.get("file");if(n&&e){var i=e.Assets.FileUploader();i==null||i.uploadFile({dataTransfer:{files:[n]}},function(l){var f=l&&l.data&&l.data[0],d=f&&((0,_.isString)(f)?f:f.src);d&&t.set({src:d})}),t.set("file","")}}},r.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},r.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,n=t.classEmpty,i=t.model,l=i.getSrcResult()&&!i.isDefaultSrc()?"remove":"add";e.classList[l](n)},r.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this.em,n=this.model,i=e==null?void 0:e.Assets;i&&n.get("editable")&&i.open({select:function(l,f){n.set({src:l.getSrc()}),f&&i.close()},target:n,types:["image"],accept:"image/*"})},r.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},r.prototype.onLoad=function(){this.em.trigger("change:canvasOffset")},r.prototype.noDrag=function(t){return t.preventDefault(),!1},r.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,e=this.model,n=t.attr("class")||"";return!e.get("src")&&t.attr("class","".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this},r}(Ln);const vn=qe;var Wr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const os=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Wr(r,a),r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},r.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},r.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},r.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},r}(vn);var Do=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$r=function(){return $r=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},$r.apply(this,arguments)};const No=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Do(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return $r($r({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),r}(Cn);var Uc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gs=function(){return Gs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Gs.apply(this,arguments)},Wc="link",xp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Uc(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Gs(Gs({},a.prototype.defaults),{type:Wc,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){var n;if(e===void 0&&(e={}),(0,D.toLowerCase)(t.tagName)==="a"){var i=e.textTags||[];n={type:Wc,editable:!1};var l=t.childNodes;l.length||delete n.editable,(0,_.forEach)(l,function(f){var d=f.tagName;(f.nodeType==3&&f.textContent.trim()!==""||d&&i.indexOf((0,D.toLowerCase)(d))>=0)&&delete n.editable})}return n},r}(No);const Sp=xp;var $c=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),za=function(){return za=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},za.apply(this,arguments)},is=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Nl=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},qc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $c(r,a),r.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,_.bindAll)(this,"disableEditing","onDisable");var e=this.model,n=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=n==null?void 0:n.RichTextEditor},r.prototype.updateContentText=function(t,e,n){n===void 0&&(n={}),!n.fromDisable&&this.disableEditing()},r.prototype.canActivate=function(){var t,e=this,n=e.model,i=e.rteEnabled,l=e.em,f=(l==null?void 0:l.getEditing())===n,d=!0,v=!1;if((i||!n.get("editable")||f||(v=n.isChildOf("text")))&&(d=!1,v&&!n.get("textable"))){for(var g=n.parent();g&&!g.isInstanceOf("text");)g=g.parent();g&&g.get("editable")?t=g:d=!0}return{result:d,delegate:t}},r.prototype.onActive=function(t){var e,n;return is(this,void 0,void 0,function(){var i,l,f,d,v,g,w,T;return Nl(this,function(V){switch(V.label){case 0:if(l=(i=this).rte,f=i.em,d=this.canActivate(),v=d.result,g=d.delegate,!v)return g&&((e=t==null?void 0:t.stopPropagation)===null||e===void 0||e.call(t),f.setSelected(g),g.trigger("active",t)),[2];if((n=t==null?void 0:t.stopPropagation)===null||n===void 0||n.call(t),this.lastContent=this.getContent(),!l)return[3,4];V.label=1;case 1:return V.trys.push([1,3,,4]),w=this,[4,l.enable(this,this.activeRte,{event:t})];case 2:return w.activeRte=V.sent(),[3,4];case 3:return T=V.sent(),f.logError(T),[3,4];case 4:return this.toggleEvents(!0),[2]}})})},r.prototype.onDisable=function(){this.disableEditing()},r.prototype.disableEditing=function(t){return t===void 0&&(t={}),is(this,void 0,void 0,function(){var e,n,i,l,f,d,v;return Nl(this,function(g){switch(g.label){case 0:if(n=(e=this).model,i=e.rte,l=e.activeRte,f=e.em,d=n&&n.get("editable"),!i)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,i.disable(this,l)];case 2:return g.sent(),[3,4];case 3:return v=g.sent(),f.logError(v),[3,4];case 4:d&&this.getContent()!==this.lastContent&&(this.syncContent(t),this.lastContent=""),g.label=5;case 5:return this.toggleEvents(),[2]}})})},r.prototype.getContent=function(){var t=this.activeRte;return typeof(t==null?void 0:t.getContent)=="function"?t.getContent():this.getChildrenContainer().innerHTML},r.prototype.syncContent=function(t){t===void 0&&(t={});var e=this,n=e.model,i=e.rte;if(e.rteEnabled||t.force){var l=this.getContent(),f=n.components(),d=za({fromDisable:1},t);n.set("content","",d),i!=null&&i.customRte?(f.length&&f.reset(void 0,t),n.set("content",l,d)):f.resetFromString(l,t)}},r.prototype.insertComponent=function(t,e){var n;e===void 0&&(e={});var i=this.model,l=this.el.ownerDocument.getSelection();if(l!=null&&l.rangeCount){var f=l.getRangeAt(0),d=f.startContainer,v=f.startOffset,g=(0,D.getModel)(d),w=[];if(g&&(!((n=g.is)===null||n===void 0)&&n.call(g,"textnode"))){var T=g.collection;T.forEach(function(X){if(X===g){var ot="textnode",tt=X.get("content")||"";w.push({type:ot,content:tt.slice(0,v)}),w.push(t),w.push({type:ot,content:tt.slice(v)})}else w.push(X)});var V=w.filter(Boolean),B=V.indexOf(t);return T.reset(V,e),T.at(B)}}return i.append(t,e)},r.prototype.onInput=function(){var t=this.em,e="component",n=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(n,this.model)},r.prototype.disablePropagation=function(t){t.stopPropagation()},r.prototype.toggleEvents=function(t){var e=this,n=e.em,i=e.model,l=e.$el,f={on:D.on,off:D.off},d=t?"on":"off";n.setEditing(!!t&&this),this.rteEnabled=!!t;var v=[this.el.ownerDocument,document];if(f.off(v,"mousedown",this.onDisable),f[d](v,"mousedown",this.onDisable),n[d]("toolbar:run:before",this.onDisable),i&&(i[d]("removed",this.onDisable),i.trigger("rte:".concat(t?"enable":"disable"))),l==null||l.off("mousedown",this.disablePropagation),l&&l[d]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var g=this.el;g;)g.draggable=!t,(g=g.parentNode)&&g.tagName=="BODY"&&(g=0)},r}(Ln);const Ba=qc;var Ua=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Il=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ua(r,a),r.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},r}(Ba);var Wa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lr=function(){return Lr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Lr.apply(this,arguments)},$a="label";const Vl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Wa(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Lr(Lr({},a.prototype.defaults),{type:$a,tagName:$a,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)===$a},r}(No);var Fl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Gc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Fl(r,a),r.prototype.tagName=function(){return"span"},r}(Il);var Kc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ss=function(){return ss=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ss.apply(this,arguments)},Hl="video",as="yt",ls="vi",po="ytnc",ei=function(a){return a&&a!=="0"},Rl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Kc(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ss(ss({},a.prototype.defaults),{type:Hl,tagName:Hl,videoId:"",void:!1,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,poster:"",muted:0,autoplay:0,controls:1,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){this.em=e.em,this.get("src")&&this.parseFromSrc(),this.updateTraits(),this.listenTo(this,"change:provider",this.updateTraits),this.listenTo(this,"change:videoId change:provider",this.updateSrc),a.prototype.initialize.call(this,t,e)},r.prototype.updateTraits=function(){var t,e=this.em,n="iframe";switch(this.get("provider")){case as:case po:t=this.getYoutubeTraits();break;case ls:t=this.getVimeoTraits();break;default:n="video",t=this.getSourceTraits()}this.set({tagName:n},{silent:!0}),this.set({traits:t}),e.get("ready")&&e.trigger("component:toggled")},r.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),n=e.query;switch(t){case as:case po:case ls:this.set("videoId",e.pathname.split("/").pop()),n.list&&this.set("list",n.list),ei(n.autoplay)&&this.set("autoplay",1),ei(n.loop)&&this.set("loop",1),parseInt(n.controls)===0&&this.set("controls",0),ei(n.color)&&this.set("color",n.color),n.rel==="0"&&this.set("rel",0),n.modestbranding==="1"&&this.set("modestbranding",1)}},r.prototype.updateSrc=function(){var t="";switch(this.get("provider")){case as:t=this.getYoutubeSrc();break;case po:t=this.getYoutubeNoCookieSrc();break;case ls:t=this.getVimeoSrc()}this.set({src:t})},r.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case as:case po:case ls:break;default:this.get("loop")&&(t.loop="loop"),this.get("autoplay")&&(t.autoplay="autoplay"),this.get("controls")&&(t.controls="controls")}return t},r.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:as,name:"Youtube"},{value:po,name:"Youtube (no cookie)"},{value:ls,name:"Vimeo"}]}},r.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},r.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},r.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},r.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},r.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},r.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},r.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),n=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=n?"&list=".concat(n):"",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":""},r.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl"))},r.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):""},r.isComponent=function(t){var e=t.tagName,n=t.src,i=/youtube\.com\/embed/.test(n),l=/youtube-nocookie\.com\/embed/.test(n),f=/player\.vimeo\.com\/video/.test(n),d=i||l||f;if((0,D.toLowerCase)(e)==Hl||(0,D.toLowerCase)(e)=="iframe"&&d){var v={type:"video"};return n&&(v.src=n),d&&(i?v.provider=as:l?v.provider=po:f&&(v.provider=ls)),v}},r}(nt);const zl=Rl;var Yc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Yc(r,a),r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(){Ln.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],n=e.map(function(i){return"change:".concat(i)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,n,this.updateVideo)},r.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},r.prototype.updateSrc=function(){var t=this.model,e=this.videoEl;if(e){var n=t.get("provider"),i=t.get("src");switch(n){case"yt":i=t.getYoutubeSrc();break;case"ytnc":i=t.getYoutubeNoCookieSrc();break;case"vi":i=t.getVimeoSrc()}e.src=i}},r.prototype.updateVideo=function(){var t=this.model,e=this.videoEl;switch(t.get("provider")){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(e){var n=e;n.loop=t.get("loop"),n.autoplay=t.get("autoplay"),n.controls=t.get("controls"),n.poster=t.get("poster")}}},r.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},r.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},r.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},r.prototype.render=function(){Ln.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},r}(vn);const Si=Bl;var Oi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),or=function(){return or=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},or.apply(this,arguments)},fo="script";const ni=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Oi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return or(or({},a.prototype.defaults),{type:fo,tagName:fo,droppable:!1,draggable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t){if((0,D.toLowerCase)(t.tagName)==fo){var e={type:fo};return t.src&&(e.src=t.src,e.onload=t.onload),e}},r}(Cn);var qa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Op=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qa(r,a),r.prototype.tagName=function(){return"script"},r.prototype.events=function(){return{}},r.prototype.render=function(){var t=this.model,e=this.em,n=t.get("src"),i=e&&e.get("scriptCount"),l=i||0,f="";if(n){var d=t.get("onload"),v="script".concat(l),g="script".concat(l+1),w="".concat(v,"Start"),T="".concat(g,"Start");f=`
        var `.concat(v,` = document.createElement('script');
        `).concat(v,`.onload = function() {
          `).concat(d?"".concat(d,`();
`):"",`
          typeof `).concat(T," == 'function' && ").concat(T,`();
        };
        `).concat(v,".src = '").concat(n,`';
        function `).concat(w,"() { document.body.appendChild(").concat(v,`); };
        `).concat(l?"":"".concat(w,"();"),`
      `),e&&e.set("scriptCount",l+1)}else f=t.__innerHTML();return this.el.innerHTML=f,this.postRender(),this},r}(vn);const Jc=Op;var Ks=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ys=function(){return Ys=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ys.apply(this,arguments)},Js="svg";const Xs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ks(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Ys(Ys({},a.prototype.defaults),{type:Js,tagName:Js,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),r.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)===Js},r}(Cn);var Tp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cs=function(){return cs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},cs.apply(this,arguments)};const Xc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Tp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return cs(cs({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},r}(Xs);var Ul=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ul(r,a),r.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},r}(Ln);const Ti=Wl;var Ga=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zs=function(){return Zs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Zs.apply(this,arguments)};const Qs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ga(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Zs(Zs({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){var t=this.parent(),e=this.get("content");return t!=null&&t.is("script")?e:this.__escapeContent(e)},r.prototype.__escapeContent=function(t){return(0,D.escapeNodeContent)(t)},r.isComponent=function(t){if(t.nodeType===3)return{type:"textnode",content:t.textContent}},r}(Cn);var kp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$l=function(){return $l=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},$l.apply(this,arguments)};const Ep=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return kp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return $l({},a.prototype.defaults)},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){return"<!--".concat(this.get("content"),"-->")},r.isComponent=function(t){if(t.nodeType==8)return{tagName:"NULL",type:"comment",content:t.textContent}},r}(Qs);var ql=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ka=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ql(r,a),r.prototype._setAttributes=function(){},r.prototype.renderAttributes=function(){},r.prototype.updateStatus=function(){},r.prototype.updateClasses=function(){},r.prototype.setAttribute=function(){},r.prototype.updateAttributes=function(){},r.prototype.initClasses=function(){},r.prototype.initComponents=function(){},r.prototype.delegateEvents=function(){return this},r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=this.el;return t.opt.temporary||(e.textContent=t.get("content")),this},r}(Ln);var us=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ta=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return us(r,a),r.prototype._createElement=function(){return document.createComment(this.model.get("content"))},r}(Ka);var Pp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ki=function(){return ki=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ki.apply(this,arguments)};const Zc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Pp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ki(ki({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),r.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},r.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},r.isComponent=function(){return!1},r}(Cn);var ea=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),na=function(){return na=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},na.apply(this,arguments)},Io="iframe";const ra=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ea(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return na(na({},a.prototype.defaults),{type:Io,tagName:Io,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,D.toLowerCase)(t.tagName)===Io},r}(Cn);var Ei=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const oa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ei(r,a),r.prototype.tagName=function(){return"div"},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},r.prototype.updateSrc=function(){var t=(0,$e.sE)(this.el,"iframe")[0];t&&(0,$e.FW)(t,{src:this.__getSrc()})},r.prototype.render=function(){a.prototype.render.call(this);var t=(0,$e.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},r.prototype.__getSrc=function(){return this.model.getAttributes().src||""},r}(Ln);var ps=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qr=function(){return qr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},qr.apply(this,arguments)},Qc=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},tu=function(a){function r(t){var e=a.call(this,t,"DomComponents",new Yo(void 0,{em:t}))||this;for(var n in e.componentTypes=[{id:"cell",model:Us,view:Na},{id:"row",model:Ia,view:Fa},{id:"table",model:Qi,view:uo},{id:"thead",model:Ws,view:Ci},{id:"tbody",model:es,view:Ha},{id:"tfoot",model:qs,view:rs},{id:"map",model:Jt,view:os},{id:"link",model:Sp,view:Il},{id:"label",model:Vl,view:Gc},{id:"video",model:zl,view:Si},{id:"image",model:nt,view:vn},{id:"script",model:ni,view:Jc},{id:"svg-in",model:Xc,view:Ti},{id:"svg",model:Xs,view:Ti},{id:"iframe",model:ra,view:oa},{id:"comment",model:Ep,view:ta},{id:"textnode",model:Qs,view:Ka},{id:"text",model:No,view:Ba},{id:"wrapper",model:Zc,view:wi},{id:"default",model:Cn,view:Ln}],e.componentsById={},e.Component=Cn,e.Components=Yo,e.ComponentsView=bi,e.storageKey="components",t&&(e.config.components=t.config.components||e.config.components),P)n in e.config||(e.config[n]=P[n]);var i=e.config.pStylePrefix;if(i&&(e.config.stylePrefix=i+e.config.stylePrefix),t){e.config.modal=t.Modal||"",e.config.am=t.Assets||"",t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var l=t.get("selected");t.listenTo(l,"add",function(f,d,v){return e.selectAdd(l.getComponent(f),v)}),t.listenTo(l,"remove",function(f,d,v){return e.selectRemove(l.getComponent(f),v)})}return e}return ps(r,a),r.prototype.load=function(t){var e=this;return this.loadProjectData(t,{onResult:function(n){var i=e.getWrapper();if(i||(e.em.Pages.add({},{select:!0}),i=e.getWrapper()),(0,_.isArray)(n))n.length&&i.components(n);else{var l=n.components,f=l===void 0?[]:l,d=Qc(n,["components"]);i.set(d),i.components(f)}}})},r.prototype.store=function(){return{}},r.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},r.prototype.getWrapper=function(){return this.getComponent()},r.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.get("components")},r.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},r.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(n){return n.remove(t)}),this},r.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},r.prototype.addType=function(t,e){var n=this.em,i=e.model,l=i===void 0?{}:i,f=e.view,d=f===void 0?{}:f,v=e.isComponent,g=e.extend,w=e.extendView,T=e.extendFn,V=T===void 0?[]:T,B=e.extendFnView,X=B===void 0?[]:B,ot=this.getType(t),tt=this.getType(g),At=this.getType(w),Ft=tt||ot||this.getType("default"),de=Ft.model,_e=At?At.view:Ft.view,Ne=function(On,Dr,Xr){return On.reduce(function(Zr,ao){var Qr=Dr[ao],ci=Xr.prototype[ao];return Qr&&ci&&(Zr[ao]=function(){for(var Bi=[],Ta=0;Ta<arguments.length;Ta++)Bi[Ta]=arguments[Ta];ci.bind(this).apply(void 0,Bi),Qr.bind(this).apply(void 0,Bi)}),Zr},{})};if(typeof l=="object"){var We=(0,_.result)(l,"defaults");delete l.defaults,e.model=de.extend(qr(qr({},l),Ne(V,l,de)),{isComponent:!ot||tt||v?v||function(){return 0}:de.isComponent}),Object.defineProperty(e.model.prototype,"defaults",{value:qr(qr({},(0,_.result)(de.prototype,"defaults")||{}),We||{})})}typeof d=="object"&&(e.view=_e.extend(qr(qr({},d),Ne(X,d,_e)))),ot?(ot.model=e.model,ot.view=e.view):(e.id=t,this.componentTypes.unshift(e));var on="component:type:".concat(ot?"update":"add");return n==null||n.trigger(on,ot||e),this},r.prototype.getType=function(t){for(var e=this.componentTypes,n=0;n<e.length;n++)if(e[n].id==t)return e[n]},r.prototype.removeType=function(t){var e=this.componentTypes,n=this.getType(t);if(n){var i=e.indexOf(n);return e.splice(i,1),n}},r.prototype.getTypes=function(){return this.componentTypes},r.prototype.selectAdd=function(t,e){var n=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(i){return n.em.trigger(i,t,e)}))},r.prototype.selectRemove=function(t,e){var n=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(i){return n.em.trigger(i,t,e)}))},r.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),n=t.previous("componentHovered"),i="hovered";n&&n.get("status")==i&&n.set({status:"",state:""}),e&&(0,_.isEmpty)(e.get("status"))&&e.set("status",i)},r.prototype.getShallowWrapper=function(){var t=this.shallow,e=this.em;if(!t&&e){var n=e.shallow;if(!n)return;var i=n.Components;if(i.componentTypes=this.componentTypes,t=i.getWrapper()){var l=[Xo,Hr].join(" ");t.on(l,(0,_.debounce)(function(){return t==null?void 0:t.components("")},100))}this.shallow=t}return t},r.prototype.canMove=function(t,e,n){var i=n||n===0?n:null,l={result:!1,reason:0,target:t,source:null};if(!e||!t)return l;var f=e.toHTML?e:null;if(!f){var d=this.getShallowWrapper();f=(d==null?void 0:d.append(e)[0])||null}if(l.source=f,!f)return l;var v=f.get("draggable");if((0,_.isFunction)(v))v=!!v(f,t,i);else{var g=t.getEl();v=(0,_.isArray)(v)?v.join(","):v,v=(0,_.isString)(v)?g==null?void 0:g.matches(v):v}if(!v)return qr(qr({},l),{reason:1});var w=t.get("droppable");(0,_.isFunction)(w)?w=!!w(f,t,i):w===!1&&t.isInstanceOf("text")&&f.get("textable")?w=!0:(g=f.getEl(),w=(0,_.isArray)(w)?w.join(","):w,w=(0,_.isString)(w)?g==null?void 0:g.matches(w):w);var T=[t].concat(t.parents()).indexOf(f)>-1;return qr(qr({},l),!w||T?{reason:2}:{result:!0})},r.prototype.allById=function(){return this.componentsById},r.prototype.getById=function(t){return this.componentsById[t]||null},r.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(n){return e[n]&&e[n].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(n){return{}})},r}(Nt);const Ap=tu,Pi={stylePrefix:"css-",rules:[]};var Ai=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jp=Number.MAX_VALUE,Mp=function(a){function r(){var t=a.call(this)||this;return(0,_.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return Ai(r,a),r.prototype.buildFromModel=function(t,e){var n=this;e===void 0&&(e={});var i="",l=this.em,f=l&&l.getConfig().avoidInlineStyle,d=t.styleToString(),v=t.classes;return this.ids.push("#".concat(t.getId())),v.forEach(function(g){return n.compCls.push(g.getFullName())}),!f&&d&&(i="#".concat(t.getId(),"{").concat(d,"}")),t.components().forEach(function(g){return i+=n.buildFromModel(g,e)}),i},r.prototype.build=function(t,e){var n=this;e===void 0&&(e={});var i=e.json,l=e.em,f=e.cssc||(l==null?void 0:l.Css);this.em=l,this.compCls=[],this.ids=[],this.model=t;var d=[],v=t?this.buildFromModel(t,e):"",g=(0,_.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(f){var w=e.rules||f.getAll(),T={},V=[];e.onlyMatched&&t&&(0,D.hasWin)()&&(w=this.matchedRules(t,w)),w.forEach(function(B){var X=B.getAtRule();if(X){var ot=T[X];ot?ot.push(B):T[X]=[B]}else{var tt=n.buildFromRule(B,V,e);i?d.push(tt):v+=tt}}),this.sortMediaObject(T).forEach(function(B){var X="",ot=B.key;B.value.forEach(function(tt){var At=n.buildFromRule(tt,V,e);tt.get("singleAtRule")?v+="".concat(ot,"{").concat(At,"}"):X+=At,i&&d.push(At)}),X&&(v+="".concat(ot,"{").concat(X,"}"))}),l&&g&&w.remove&&w.remove(V)}return i?d.filter(function(B){return B}):v},r.prototype.buildFromRule=function(t,e,n){var i,l=this;n===void 0&&(n={});var f,d="",v=this.model,g=t.selectorsToString({skipAdd:1}),w=t.get("selectorsAdd"),T=t.get("singleAtRule");if((i=t.get("selectors"))===null||i===void 0||i.forEach(function(B){var X=B.getFullName();(l.compCls.indexOf(X)>=0||l.ids.indexOf(X)>=0||n.keepUnusedStyles)&&(f=1)}),g&&f||w||T||!v){var V=t.getDeclaration({body:1});V&&(n.json?d=t:d+=V)}else e.push(t);return d},r.prototype.matchedRules=function(t,e){var n=this,i=t.getEl(),l=[];return e.forEach(function(f){try{f.selectorsToString().split(",").some(function(d){return i==null?void 0:i.matches(n.__cleanSelector(d))})&&l.push(f)}catch{}}),t.components().forEach(function(f){l=l.concat(n.matchedRules(f,e))}),l=l.filter(function(f,d){return l.indexOf(f)===d})},r.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):jp},r.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var n=[];return(0,_.each)(t,function(i,l){return n.push({key:l,value:i})}),n.sort(function(i,l){var f=[i.key,l.key].every(function(g){return g.indexOf("min-width")!==-1}),d=f?i.key:l.key,v=f?l.key:i.key;return e.getQueryLength(d)-e.getQueryLength(v)})},r.prototype.sortRules=function(t,e){var n=function(d){return d.get("mediaText")||""},i=[n(t),n(e)].every(function(d){return d.indexOf("min-width")!==-1}),l=n(i?t:e),f=n(i?e:t);return this.getQueryLength(l)-this.getQueryLength(f)},r.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},r}(S.Hn);const Lp=Mp;var Dp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ia=function(){return ia=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ia.apply(this,arguments)},Np=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},mr=((0,D.hasWin)()?window:{}).CSS,Zn=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this;return n.config=t||{},n.opt=e,n.em=e.em,n.ensureSelectors(null,null,{}),n.on("change",n.__onChange),n}return Dp(r,a),r.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},r.prototype.__onChange=function(t,e){var n=this.em,i=this.changedAttributes();i&&!(0,D.isEmptyObj)(i)&&(n==null||n.changesUp(e))},r.prototype.clone=function(){var t=ia({},this.opt),e=ia({},this.attributes);return e.selectors=this.get("selectors").map(function(n){return n.clone()}),new this.constructor(e,t)},r.prototype.ensureSelectors=function(t,e,n){var i=this.em,l=i==null?void 0:i.get("SelectorManager"),f=[this,"change:selectors",this.ensureSelectors],d=this.getSelectors();if(this.stopListening.apply(this,f),d.models&&(d=Np([],d.models,!0)),d=(0,_.isString)(d)?[d]:d,Array.isArray(d)){var v=d.filter(function(g){return g}).map(function(g){return l?l.add(g):g});d=new Pr(v)}this.set("selectors",d,n),this.listenTo.apply(this,f)},r.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),n=t?"@".concat(t):e?"@media":"";return n+(e&&n?" ".concat(e):"")},r.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],n=this.get("state"),i=this.get("selectorsAdd"),l={escape:function(v){return mr&&mr.escape?mr.escape(v):v}},f=this.get("selectors").getFullString(0,l),d=n&&!t.skipState?":".concat(n):"";return f&&e.push("".concat(f).concat(d)),i&&!t.skipAdd&&e.push(i),e.join(", ")},r.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",n=this.attributes.important,i=this.selectorsToString(t),l=this.styleToString(ia({important:n},t)),f=this.get("singleAtRule");return(i||f)&&(l||t.allowEmpty)&&(e=f?l:"".concat(i,"{").concat(l,"}")),e},r.prototype.getDevice=function(){var t=this.em,e=this.attributes,n=e.atRuleType,i=e.mediaText,l=(t==null?void 0:t.get("DeviceManager").getDevices())||[],f=l.filter(function(d){return d.getWidthMedia()===""})[0];return n==="media"&&i?l.filter(function(d){return d.getWidthMedia()===((v=/(-?\d*\.?\d+)\w{0,}/.exec(i))?v[0]:"");var v})[0]||null:f||null},r.prototype.getState=function(){var t=this.em,e=this.get("state");return((t==null?void 0:t.get("SelectorManager").getStates())||[]).filter(function(n){return n.getName()===e})[0]||null},r.prototype.getComponent=function(){var t,e=this.getSelectors(),n=e.length==1&&e.at(0),i=n&&n.isId()&&n.get("name");return i&&((t=this.em)===null||t===void 0?void 0:t.get("DomComponents").getById(i))||null},r.prototype.toCSS=function(t){t===void 0&&(t={});var e="",n=this.getAtRule(),i=this.getDeclaration(t);return(i||t.allowEmpty)&&(e=i),n&&e&&(e="".concat(n,"{").concat(e,"}")),e},r.prototype.toJSON=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=S.Hn.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,_.forEach)(l,function(f,d){i[d]===f&&delete i[d]}),delete i.style.__p,(0,_.isEmpty)(i.selectors)&&delete i.selectors,(0,_.isEmpty)(i.style)&&delete i.style}return i},r.prototype.compare=function(t,e,n,i){var l;i===void 0&&(i={});var f=e||"",d=n||"",v=i.selectorsAdd||"",g=i.atRuleType||"";d&&!g&&(g="media");var w=((0,_.isArray)(t)||t.models?t.models||t:[t]).map(function(X){return X.getFullName()}),T=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(X){return X.getFullName()}),V=w.slice().sort(),B=T.slice().sort();return!(w.length!==T.length||!V.every(function(X,ot){return X===B[ot]}))&&this.get("state")===f&&this.get("mediaText")===d&&this.get("selectorsAdd")===v&&this.get("atRuleType")===g},r}(kr);const ur=Zn;var Qn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fs=function(a){function r(t,e){var n=a.call(this,t)||this;return n.editor=e==null?void 0:e.em,setTimeout(function(){n.on("remove",n.onRemove),n.on("add",n.onAdd)}),n}return Qn(r,a),r.prototype.toJSON=function(t){return S.FE.prototype.toJSON.call(this,t).filter(function(e){return e.style&&!e.shallow})},r.prototype.onAdd=function(t,e,n){t.ensureSelectors(t,e,n)},r.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},r.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,S.FE.prototype.add.apply(this,[t,e])},r}(S.FE);const Ip=fs;fs.prototype.model=ur;var Ya=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ji=function(){return ji=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ji.apply(this,arguments)},Vp=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Fp=function(a){function r(t){var e=a.call(this,t,"CssComposer",null,{},Pi)||this;e.Selectors=Pr,e.storageKey="styles";var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),n.rules=e.em.config.style||n.rules||"",e.rules=new Ip([],n),e}return Ya(r,a),r.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},r.prototype.postLoad=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");e&&e.add(this.getAll())},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},r.prototype.add=function(t,e,n,i,l){i===void 0&&(i={}),l===void 0&&(l={});var f=e||"",d=n||"",v=ji({},i),g=this.get(t,f,d,v);return g&&g.config&&!g.config.singleAtRule||(v.state=f,v.mediaText=d,v.selectors=[],d&&!v.atRuleType&&(v.atRuleType="media"),(g=new ur(v,this.config)).get("selectors").add(t,l),this.rules.add(g,l)),g},r.prototype.get=function(t,e,n,i){var l=t;if((0,_.isString)(t)){var f=this.em.Selectors,d=t.split(",")[0].trim(),v=this.em.Parser.parserCss.checkNode({selectors:d})[0];l=f.get(v.selectors)}return this.rules.find(function(g){return g.compare(l,e,n,i)})||null},r.prototype.getAll=function(){return this.rules},r.prototype.addCollection=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=this.em,l=[];(0,_.isString)(t)&&(t=i.Parser.parseCss(t));for(var f=t instanceof Array?t:[t],d=0,v=f.length;d<v;d++){var g=f[d]||{};if(g.selectors){var w=i==null?void 0:i.Selectors;w||console.warn("Selector Manager not found");for(var T=g.selectors,V=T instanceof Array?T:[T],B=[],X=0,ot=V.length;X<ot;X++){var tt=w.add(V[X]);B.push(tt)}var At=this.get(B,g.state,g.mediaText,g),Ft=this.add(B,g.state,g.mediaText,g,e),de=!At||!e.avoidUpdateStyle,_e=g.style||{};if((0,D.isObject)(n)&&Ft.set(n,e),de){var Ne=e.extend?ji(ji({},Ft.get("style")),_e):_e;Ft.set("style",Ne,e)}l.push(Ft)}}return l},r.prototype.addRules=function(t){return this.addCollection(t)},r.prototype.setRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.atRuleType,l=n.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],d=f.state,v=f.selectorsAdd,g=this.em.Selectors.add(f.selectors),w=this.add(g,d,l,{selectorsAdd:v,atRule:i});return w.setStyle(e,n),w},r.prototype.getRule=function(t,e){e===void 0&&(e={});var n=this.em,i=n.Selectors,l=n.Parser.parserCss.checkNode({selectors:t})[0],f=i.get(l.selectors),d=l.state,v=l.selectorsAdd,g=e.atRuleType,w=e.atRuleParams;return f?this.get(f,d,w,{selectorsAdd:v,atRuleType:g}):void 0},r.prototype.getRules=function(t){var e=this.getAll();if(!t)return Vp([],e.models,!0);var n={sort:!0},i=(0,_.isString)(t)?t.split(",").map(function(l){return l.trim()}):t;return e.filter(function(l){return i.indexOf(l.getSelectors().getFullString(null,n))>=0})},r.prototype.setIdRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.addOpts,l=i===void 0?{}:i,f=n.mediaText,d=n.state||"",v=(0,_.isUndefined)(f)?this.em.getCurrentMedia():f,g=this.em.Selectors.add({name:t,type:nr.TYPE_ID},l),w=this.add(g,d,v,{},l);return w.setStyle(e,ji(ji({},n),l)),w},r.prototype.getIdRule=function(t,e){e===void 0&&(e={});var n=e.mediaText,i=e.state||"",l=(0,_.isUndefined)(n)?this.em.getCurrentMedia():n,f=this.em.Selectors.get(t,nr.TYPE_ID);return f&&this.get(f,i,l)},r.prototype.setClassRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.state||"",l=n.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors.add({name:t,type:nr.TYPE_CLASS}),d=this.add(f,i,l);return d.setStyle(e,n),d},r.prototype.getClassRule=function(t,e){e===void 0&&(e={});var n=e.state||"",i=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,nr.TYPE_CLASS);return l&&this.get(l,n,i)},r.prototype.remove=function(t,e){var n=(0,_.isString)(t)?this.getRules(t):t,i=this.getAll().remove(n,e);return(0,_.isArray)(i)?i:[i]},r.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},r.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var n=e.state,i=e.mediaText;e.current&&(n=this.em.get("state")||"",i=this.em.getCurrentMedia());var l=t.getId();return this.getAll().filter(function(f){return!(!(0,_.isUndefined)(n)&&f.get("state")!==n)&&!(!(0,_.isUndefined)(i)&&f.get("mediaText")!==i)&&f.getSelectorsString()==="#".concat(l)})},r.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new Uo({collection:this.rules,config:this.config}),this.rulesView.render().el},r.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},r}(Nt);const Gl=Fp,eu={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};var Kl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const nu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Kl(r,a),r.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},r.prototype.getId=function(){return this.id},r.prototype.getLabel=function(){return this.get("label")},r.prototype.getMedia=function(){return this.get("media")},r.prototype.getContent=function(){return this.get("content")},r.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,_.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},r}(S.Hn);var Yl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ja=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Yl(r,a),r}(S.FE);const sa=Ja;Ja.prototype.model=nu;var ru=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Xa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ru(r,a),r.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},r}(S.Hn);var ou=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ds=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ou(r,a),r}(S.FE);const iu=ds;ds.prototype.model=Xa;var Za=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vo=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,i=n.model;return n.em=e.em,n.config=e,n.endDrag=n.endDrag.bind(n),n.ppfx=e.pStylePrefix||"",n.listenTo(i,"destroy remove",n.remove),n.listenTo(i,"change",n.render),n}return Za(r,a),r.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.handleClick=function(t){var e=this,n=e.config,i=e.model,l=e.em,f=i.get("onClick")||n.appendOnClick;if(l.trigger("block:click",i,t),f){if((0,_.isFunction)(f))return f(i,l==null?void 0:l.getEditor(),{event:t});var d,v,g=n.getSorter(),w=i.get("content"),T=l.getSelected();if(g.setDropContent(w),T)if(g.validTarget(T.getEl(),w).valid)d=T;else{var V=T.parent();V&&g.validTarget(V.getEl(),w).valid&&(d=V,v=V.components().indexOf(T)+1)}if(!d){var B=l.getWrapper();g.validTarget(B.getEl(),w).valid&&(d=B)}var X=d&&d.append(w,{at:v})[0];X&&l.setSelected(X,{scroll:1})}},r.prototype.startDrag=function(t){var e=this,n=e.config,i=e.em,l=e.model,f=l.get("disable");if(t.button===0&&n.getSorter&&!this.el.draggable&&!f){i.refreshCanvas();var d=n.getSorter();d.__currentBlock=l,d.setDragHelper(this.el,t),d.setDropContent(this.model.get("content")),d.startSort(this.el),(0,D.on)(document,"mouseup",this.endDrag)}},r.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},r.prototype.handleDrag=function(t){this.__getModule().__drag(t)},r.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},r.prototype.endDrag=function(){(0,D.off)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},r.prototype.render=function(){var t,e=this,n=e.em,i=e.el,l=e.$el,f=e.ppfx,d=e.model,v=d.get("disable"),g=d.get("attributes")||{},w=g.class||"",T="".concat(f,"block"),V=n&&n.t("blockManager.labels.".concat(d.id))||d.get("label"),B=d.get("render"),X=d.get("media"),ot=v?"".concat(T,"--disable"):"".concat(f,"four-color-h");l.attr(g),i.className="".concat(w," ").concat(T," ").concat(f,"one-bg ").concat(ot).trim(),i.innerHTML=`
      `.concat(X?'<div class="'.concat(T,'__media">').concat(X,"</div>"):"",`
      <div class="`).concat(T,'-label">').concat(V,`</div>
    `),i.title=g.title||((t=i.textContent)===null||t===void 0?void 0:t.trim()),i.setAttribute("draggable","".concat(!(!(0,D.hasDnd)(n)||v)));var tt=B&&B({el:i,model:d,className:T,prefix:f});return tt&&(i.innerHTML=tt),this},r}(S.G7);const su=Vo;var Hp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),au=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Gr=function(a){function r(t,e){var n=a.call(this,t)||this;n.config=e;var i=e.pStylePrefix||"";return n.em=e.em,n.pfx=i,n.caretR="fa fa-caret-right",n.caretD="fa fa-caret-down",n.iconClass="".concat(i,"caret-icon"),n.activeClass="".concat(i,"open"),n.className="".concat(i,"block-category"),n.listenTo(n.model,"change:open",n.updateVisibility),n.model.view=n,n}return Hp(r,a),r.prototype.events=function(){return{"click [data-title]":"toggle"}},r.prototype.template=function(t){var e=t.pfx,n=t.label;return et(oo||(oo=au([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `])),e,e,n,e)},r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},r.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},r.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},r.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},r.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.pfx,"blocks-c"))),this.blocksEl},r.prototype.append=function(t){this.getBlocksEl().appendChild(t)},r.prototype.render=function(){var t=this,e=t.em,n=t.el,i=t.$el,l=t.model,f=t.pfx,d=e.t("blockManager.categories.".concat(l.id))||l.get("label");return n.innerHTML=this.template({pfx:f,label:d}),i.addClass(this.className),i.css({order:l.get("order")}),this.updateVisibility(),this},r}(S.G7);const an=Gr;var oo,ri=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ho=function(){return ho=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ho.apply(this,arguments)},lu=function(a){function r(t,e){var n=a.call(this,t)||this;(0,_.bindAll)(n,"getSorter","onDrag","onDrop","onMove"),n.config=e||{},n.categories=t.categories||"",n.renderedCategories={};var i=n.config.pStylePrefix||"";n.ppfx=i,n.noCatClass="".concat(i,"blocks-no-cat"),n.blockContClass="".concat(i,"blocks-c"),n.catsClass="".concat(i,"block-categories");var l=n.collection;return n.listenTo(l,"add",n.addTo),n.listenTo(l,"reset",n.render),n.em=n.config.em,n.em&&(n.config.getSorter=n.getSorter),n}return ri(r,a),r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=ho(ho({},this.config),t)},r.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,n=t.Canvas;this.sorter=new e.Sorter({container:n.getBody(),placer:n.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:n.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},r.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},r.prototype.onMove=function(t){this.__getModule().__drag(t),this.em.trigger("block:drag:move",t)},r.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},r.prototype.addTo=function(t){this.add(t)},r.prototype.add=function(t,e){var n=this.config,i=new su({model:t,attributes:t.get("attributes")},n).render().el,l=t.get("category");if(l&&this.categories&&!n.ignoreCategories){(0,_.isString)(l)?l={id:l,label:l}:(0,_.isObject)(l)&&!l.id&&(l.id=l.label);var f=this.categories.add(l),d=f.get("id"),v=this.getCategoriesEl(),g=this.renderedCategories[d];return t.set("category",f,{silent:!0}),!g&&v&&(g=new an({model:f},n).render(),this.renderedCategories[d]=g,v.appendChild(g.el)),void(g&&g.append(i))}e?e.appendChild(i):this.append(i)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},r.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},r.prototype.render=function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories={},this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,n)}),this.append(n);var i="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(i),this.rendered=!0,this},r}(S.G7);const Qa=lu;var cu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oi=function(){return oi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},oi.apply(this,arguments)},tl="block",Fo="".concat(tl,":"),uu="".concat(Fo,"add"),Jl="".concat(Fo,"update"),Ho="".concat(Fo,"remove"),pu="".concat(Ho,":before"),el="".concat(Fo,"drag"),Rp={all:tl,update:Jl,add:uu,remove:Ho,removeBefore:pu,drag:el,dragStart:"".concat(el,":start"),dragEnd:"".concat(el,":stop"),custom:"".concat(Fo,"custom")},nl=function(a){function r(t){var e,n=this;return(n=a.call(this,t,"BlockManager",new sa(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[]),Rp,eu)||this).Block=nu,n.Blocks=sa,n.Category=Xa,n.Categories=iu,n.storageKey="",n.blocks=n.all,n.blocksVisible=new sa(n.blocks.models),n.categories=new iu,n.blocks.on("add",function(i){return n.blocksVisible.add(i)}),n.blocks.on("remove",function(i){return n.blocksVisible.remove(i)}),n.blocks.on("reset",function(i){return n.blocksVisible.reset(i.models)}),n}return cu(r,a),r.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(n,i){return t.startDrag(n,i)},drag:function(n){return t.__drag(n)},dragStop:function(n){return t.endDrag(n)}}},r.prototype.__startDrag=function(t,e){var n=this,i=n.em,l=n.events,f=n.blocks,d=t.getContent?t.getContent():t;this._dragBlock=t,i.set({dragResult:null,dragContent:d}),[i,f].map(function(v){return v.trigger(l.dragStart,t,e)})},r.prototype.__drag=function(t){var e=this,n=e.em,i=e.events,l=e.blocks,f=this._dragBlock;[n,l].map(function(d){return d.trigger(i.drag,f,t)})},r.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,n=e.em,i=e.events,l=e.blocks,f=this._dragBlock,d=t.component||n.get("dragResult");if(delete this._dragBlock,d&&f){var v="activeOnRender",g=d.get&&d.get(v),w=f.get("activate")||g,T=f.get("select"),V=(0,_.isArray)(d)?d[0]:d;(T||w&&T!==!1)&&n.setSelected(V),w&&(V.trigger("active"),g&&V.unset(v)),f.get("resetId")&&V.onAll(function(B){return B.resetId()})}n.set({dragResult:null,dragContent:null}),f&&[n,l].map(function(B){return B.trigger(i.dragEnd,d,f)})},r.prototype.__getFrameViews=function(){return this.em.get("Canvas").getFrames().map(function(t){return t.view})},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=oi(oi({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(){return this._bhv||{}},r.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(n){return n.droppable.startCustom()})},r.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){return e.droppable.endCustom(t)}),this.__endDrag()},r.prototype.postRender=function(){var t=this,e=t.categories,n=t.config,i=t.em,l=this.blocksVisible;this.blocksView=new Qa({collection:l,categories:e},oi(oi({},n),{em:i})),this.__appendTo(l.models),this.__trgCustom()},r.prototype.add=function(t,e,n){n===void 0&&(n={});var i=e||{};return i.id=t,this.blocks.add(i,n)},r.prototype.get=function(t){return this.blocks.get(t)},r.prototype.getAll=function(){return this.blocks},r.prototype.getAllVisible=function(){return this.blocksVisible},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getCategories=function(){return this.categories},r.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},r.prototype.render=function(t,e){e===void 0&&(e={});var n=this,i=n.categories,l=n.config,f=n.em,d=t||this.getAll().models;if(e.external){var v=new sa(d);return new Qa({collection:v,categories:i},oi(oi({em:f},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(d),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},r.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(n){return n.stopListening()}),e.map(function(n){return n.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},r}(Nt);const Xl=nl,fu={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};var zp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return zp(r,a),r.prototype.defaults=function(){return{name:"",label:""}},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(){return this.get("label")||this.getName()},r}(S.Hn);const Ql=Zl;Zl.prototype.idAttribute="name";var Bp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rl=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},tc="contentEditable",Up=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.config||{};return e.config=n,e.module=t.module,e.coll=t.coll||null,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return Bp(r,a),r.prototype.template=function(){var t=this,e=t.pfx,n=t.model,i=t.config,l=n.get("label")||"";return et(ec||(ec=rl([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,i.iconTagRemove)},r.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},r.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},r.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[tc]="true",e.focus(),t==null||t.setEditing(!0)},r.prototype.endEditTag=function(){var t=this.model,e=this.getInputEl(),n=e.textContent||"",i=this.em,l=i==null?void 0:i.Selectors;if(e[tc]="false",i==null||i.setEditing(!1),l){var f=l.escapeName(n);l.get(f)?e.innerText=t.get("label"):t.set({name:f,label:n})}},r.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.get("active"))},r.prototype.removeTag=function(){this.module.removeSelected(this.model)},r.prototype.updateStatus=function(){var t=this,e=t.model,n=t.$el,i=t.config,l=i.iconTagOn,f=i.iconTagOff,d=n.find("[data-tag-status]");e.get("active")?(d.html(l),n.removeClass("opac50")):(d.html(f),n.addClass("opac50"))},r.prototype.render=function(){var t=this.pfx,e=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(t,"tag ").concat(e,"three-bg")),this.updateStatus(),this},r}(S.G7);const Wp=Up;var ec,hs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mi=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},ol=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var n=e.config.em,i=e.collection;e.target=n;var l=n.Selectors;return e.module=l,e.em=n,e.componentChanged=(0,_.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,_.debounce)(e.checkSync.bind(e),0),e.listenTo(n,"component:toggled component:update:classes",e.componentChanged),e.listenTo(n,"styleManager:update",e.componentChanged),e.listenTo(n,"component:update:classes change:state",e.__handleStateChange),e.listenTo(n,"styleable:change change:device",e.checkSync),e.listenTo(i,"add",e.addNew),e.listenTo(i,"reset",e.renderClasses),e.listenTo(i,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,_.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return hs(r,a),r.prototype.template=function(t){var e=t.labelInfo,n=t.labelHead,i=t.iconSync,l=t.iconAdd,f=t.pfx,d=t.ppfx;return et(il||(il=Mi([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),f,f,f,f,n,f,f,f,d,d,d,f,d,d,f,d,f,f,f,f,f,l,f,f,i,f,f,e,f)},r.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},r.prototype.syncStyle=function(){var t,e=this.em,n=this.getTarget(),i=e.Css,l=this.getCommonSelectors({opts:{noDisabled:1}}),f=e.get("state"),d=e.getCurrentMedia(),v=[],g=i.get(l,f,d)||i.add(l,f,d);this.getTargets().forEach(function(w){var T=i.getIdRule(w.getId(),{state:f,mediaText:d});t=T.getStyle(),T.setStyle({}),v.push(T)}),t&&g.addStyle(t),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:n,selectors:l,mediaText:d,rule:g,ruleComponents:v,state:f})},r.prototype.tagRemoved=function(t){this.updateStateVis()},r.prototype.addNew=function(t){this.addToClasses(t)},r.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},r.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},r.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},r.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},r.prototype.componentChanged=function(t){var e=(t===void 0?{}:t).targets;this.updateSelection(e)},r.prototype.updateSelection=function(t){var e=t||this.getTargets(),n=[];return(e=(0,_.isArray)(e)?e:[e])&&e.length&&(n=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(e),this.module.__trgCustom(),n},r.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,n=e.targets,i=e.opts,l=i===void 0?{}:i,f=n||this.getTargets();return this.module.__getCommonSelectors(f,l)},r.prototype._commonSelectors=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.module).__common.apply(t,e)},r.prototype.checkSync=function(){var t,e=this,n=e.$btnSyncEl,i=e.config,l=e.collection,f=this.getTarget();if(f&&i.componentFirst&&l.length){var d=f.getStyle();t=!(0,_.isEmpty)(d)}n&&n[t?"show":"hide"]()},r.prototype.getTarget=function(){return this.target.getSelected()},r.prototype.getTargets=function(){return this.target.getSelectedAll()},r.prototype.updateStateVis=function(t){var e=this.em,n=e&&e.getConfig().avoidInlineStyle,i=this.collection.length||n?"":"none";this.getStatesC().css("display",i),this.updateSelector(t)},r.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},r.prototype.updateSelector=function(t){var e=this,n=this.el.querySelector("[data-selected]"),i=[],l=t||this.getTargets();(l=(0,_.isArray)(l)?l:[l]).forEach(function(f){return i.push(e.__getName(f))}),n&&(n.innerHTML=i.join(", ")),this.checkStates()},r.prototype.__getName=function(t){var e,n=this,i=n.pfx,l=n.config,f=n.em,d=l.selectedName,v=l.componentFirst;if((0,_.isString)(t))e=et(nc||(nc=Mi(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),i,t);else{var g=t==null?void 0:t.getSelectors();if(!g)return"";var w=g.getStyleable(),T=f.get("state"),V=t.getId?et(hu||(hu=Mi(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),i,t.getName(),i,t.getId()):"";e=(e=this.collection.getFullString(w))?et(rc||(rc=Mi(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),i,e):t.get("selectorsAdd")||V,e=v&&V?V:e,e+=T?et(ir||(ir=Mi(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),i,T):"",e=d?d({result:e,state:T,target:t}):e}return e&&'<span class="'.concat(i,'sel">').concat(e,"</span>")},r.prototype.stateChanged=function(t){var e=this.em,n=t.target.value;e.set("state",n)},r.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},r.prototype.addToClasses=function(t,e){var n=e,i=this.getClasses(),l=new Wp({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(l):i.append(l),l},r.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each(function(i){return t.addToClasses(i,e)}),n.append(e)},r.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},r.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},r.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},r.prototype.renderStates=function(){var t=this.module,e=this.em,n=e.t("selectorManager.emptyState"),i=t.getStates().map(function(f){var d=e.t("selectorManager.states.".concat(f.id))||f.getLabel()||f.id;return'<option value="'.concat(f.id,'">').concat(d,"</option>")}).join(""),l=this.getStates();l&&l.html('<option value="">'.concat(n,"</option>").concat(i)),this.checkStates()},r.prototype.render=function(){var t=this,e=t.em,n=t.pfx,i=t.ppfx,l=t.config,f=t.$el,d=t.el,v=l.render,g={iconSync:l.iconSync,iconAdd:l.iconAdd,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:i,pfx:n,el:d};f.html(this.template(g));var w=v&&v(g);return w&&w!==d&&f.empty().append(w),this.$input=f.find("[data-input]"),this.$addBtn=f.find("[data-add]"),this.$classes=f.find("#"+n+"tags-c"),this.$btnSyncEl=f.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),f.attr("class","".concat(this.className," ").concat(i,"one-bg ").concat(i,"two-color")),this},r}(S.G7);const du=ol;var il,nc,hu,rc,ir,sl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gs=function(){return gs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},gs.apply(this,arguments)},al=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},oc=function(a){return(0,_.isString)(a)&&a[0]=="#"},Li=function(a){return(0,_.isString)(a)&&a[0]=="."},aa="selector",vs="".concat(aa,":"),gu="".concat(vs,"add"),vu="".concat(vs,"update"),Di="".concat(vs,"remove"),mu="".concat(Di,":before"),ll="".concat(vs,"custom"),ic="".concat(vs,"state"),la={all:aa,update:vu,add:gu,remove:Di,removeBefore:mu,state:ic,custom:ll},$p=function(a){function r(t){var e=a.call(this,t,"SelectorManager",new Pr([]),la,fu,{skipListen:!0})||this;e.Selector=nr,e.Selectors=Pr,e.storageKey="",(0,_.bindAll)(e,"__updateSelectedByComponents");var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),e.all=new Pr(n.selectors),e.selected=new Pr([],{em:t,config:n}),e.states=new S.FE(n.states.map(function(l){return new Ql(l)}),{model:Ql}),e.model=new S.Hn({cFirst:n.componentFirst,_undo:!0}),e.__update=(0,_.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(l,f){return t.trigger(ic,f)}),e.model.on("change:cFirst",function(l,f){return t.trigger("selector:type",f)}),t.on("component:toggled component:update:classes",e.__updateSelectedByComponents),e.model.listenTo(t,"component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target",function(){return e.__update()}),e}return sl(r,a),r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},r.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?al([],this.all.models,!0):this.all:[]},r.prototype.__customData=function(t){t===void 0&&(t={});var e=t.container;return{states:this.getStates(),selected:this.getSelected(),container:e}},r.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},r.prototype.select=function(t,e){e===void 0&&(e={});var n=Array.isArray(t)?t:[t],i=this.em.Styles.select(n,e);this.selected.reset(this.__getCommonSelectors(i));var l=this.selectorTags,f=i.filter(function(d){return d}).map(function(d){return(0,D.isComponent)(d)||(0,D.isRule)(d)&&!d.get("selectorsAdd")?d:d.getSelectorsString()});return l&&l.componentChanged({targets:f}),this},r.prototype.addSelector=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=gs({},e);(0,_.isObject)(t)?i=t:i.name=t,oc(i.name)?(i.name=i.name.substr(1),i.type=nr.TYPE_ID):Li(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var l=i.name,f=this.getConfig(),d=this.all,v=this.em,g=l?this.get(l,i.type):d.where(i)[0];if(!g){var w=i instanceof nr?i:new nr(i,gs(gs({},n),{config:f,em:v}));return d.add(w,n)}return g},r.prototype.getSelector=function(t,e){return e===void 0&&(e=nr.TYPE_CLASS),oc(t)?(t=t.substr(1),e=nr.TYPE_ID):Li(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var i=(0,_.isString)(t)?{}:e;return(0,_.isArray)(t)?t.map(function(l){return n.addSelector(l,e,i)}):this.addSelector(t,e,i)},r.prototype.addClass=function(t){var e=this,n=[];return(0,_.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(i){return n.push(e.addSelector(i))}),n},r.prototype.get=function(t,e){var n=this;if((0,_.isArray)(t)){var i=[];return t.map(function(l){return n.getSelector(l)}).filter(Boolean).forEach(function(l){return i.indexOf(l)<0&&i.push(l)}),i}return this.getSelector(t,e)},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.setState=function(t){return this.em.setState(t),this},r.prototype.getState=function(){return this.em.getState()},r.prototype.getStates=function(){return al([],this.states.models,!0)},r.prototype.setStates=function(t,e){return this.states.reset(t.map(function(n){return new Ql(n)}),e)},r.prototype.getSelected=function(){return this.__getCommon()},r.prototype.getSelectedAll=function(){return al([],this.selected.models,!0)},r.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(n){n.getSelectors().add(e)})},r.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},r.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},r.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},r.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},r.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):nr.escapeName(t)},r.prototype.render=function(t){var e=this.selectorTags,n=this.getConfig(),i=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new du({el:i,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},r.prototype.destroy=function(){var t=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),t==null||t.remove(),this.selectorTags=void 0},r.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},r.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var n=t.map(function(i){return i.getSelectors&&i.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,n)},r.prototype.__common=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(i){return e[1].indexOf(i)>=0}):e.slice(1).reduce(function(i,l){return t.__common(i,l)},e[0]):[]},r.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},r}(Nt);const ms=$p,yu={textTags:["br","b","i","u","a","ul","ol"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};var ca={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},bu=(0,_.keys)(ca),ua=["5","6","11","15"],pa=["font-face","page","counter-style","viewport"],ys=function(a){a===void 0&&(a="");for(var r=[],t=[],e=a.split(","),n=0,i=e.length;n<i;n++){var l=e[n].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var f=l.split(".").filter(Boolean);t.push(f)}else r.push(l)}return{result:t,add:r}},fa=function(a){for(var r=a.style,t={},e=0,n=r.length;e<n;e++){var i=r[e],l=r.getPropertyValue(i),f=r.getPropertyPriority(i);t[i]="".concat(l).concat(f?" !".concat(f):"")}return t},sc=function(a){return(a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"").trim()},ac=function(a,r,t){r===void 0&&(r={}),t===void 0&&(t={});var e={},n=a.length,i=a[n-1],l=i?i.split(/:(.+)/):[],f=l[1],d=t.atRule,v=t.selectorsAdd,g=t.mediaText;return pa.indexOf(d)>=0&&(e.singleAtRule=!0),d&&(e.atRuleType=d),v&&(e.selectorsAdd=v),g&&(e.mediaText=g),f&&(a[n-1]=l[0],e.state=f,l.splice(l.length-1,1)),e.selectors=a,e.style=r,e},lc=function(a){for(var r=[],t=a.cssRules||[],e=0,n=t.length;e<n;e++){var i=t[e],l=i.type.toString(),f=!1,d="",v="",g=i.selectorText||i.keyText,w=ua.indexOf(l)>=0;if(w)f=!0,d=ca[l],v=sc(i);else if(bu.indexOf(l)>=0){var T=lc(i);v=sc(i);for(var V=0,B=T.length;V<B;V++){var X=T[V];v&&(X.mediaText=v),X.atRuleType=ca[l]}r=r.concat(T)}if(g||w){for(var ot=fa(i),tt=ys(g),At=tt.add,Ft=tt.result,de=void 0,_e=0,Ne=Ft.length;_e<Ne;_e++){var We=ac(Ft[_e],ot,{atRule:ca[l]});r.push(We),de=We}if(At.length){var on=At.join(", ");de?de.selectorsAdd=on:(We={selectors:[],selectorsAdd:on,style:ot},f&&(We.singleAtRule=f),d&&(We.atRuleType=d),v&&(We.mediaText=v),r.push(We))}}}return r};const ii=function(a,r){return r===void 0&&(r={}),{parse:function(t){var e=this,n=[],i=r.parserCss,l=a==null?void 0:a.Editor,f=i?i(t,l):function(d){var v=document.createElement("style");v.innerHTML=d,document.head.appendChild(v);var g=v.sheet;return document.head.removeChild(v),lc(g)}(t);return f.forEach(function(d){return n=n.concat(e.checkNode(d))}),a==null||a.trigger("parse:css",{input:t,output:n}),n},checkNode:function(t){var e=t.selectors,n=t.style,i=[t];if((0,_.isString)(e)){var l=[],f=t,d=ys(e),v=d.result,g=d.add.join(", "),w={atRule:f.atRule,mediaText:f.params};v.length?v.forEach(function(T){l.push(ac(T,n,w))}):l.push(ac([],n,w)),g&&(l[l.length-1].selectorsAdd=g),i=l}return i}}};var bs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),da=function(a){function r(t){var e=a.call(this,t,"Parser",yu)||this,n=e.config;return e.parserCss=ii(t,n),e.parserHtml=le(t,n),e}return bs(r,a),r.prototype.parseHtml=function(t,e){e===void 0&&(e={});var n=this.em,i=this.parserHtml;return i.compTypes=n.Components.getTypes()||{},i.parse(t,this.parserCss,e)},r.prototype.parseCss=function(t){return this.parserCss.parse(t)},r.prototype.destroy=function(){},r}(Mt);const qp=da,wu={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}};var _u=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Cu=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}};const Gp=function(){function a(){}return a.prototype.store=function(r,t){return t===void 0&&(t={}),_u(this,void 0,void 0,function(){return Cu(this,function(e){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(r)),[2,r]})})},a.prototype.load=function(r){return r===void 0&&(r={}),_u(this,void 0,void 0,function(){var t;return Cu(this,function(e){return t={},this.hasLocal(r,!0)&&(t=JSON.parse(localStorage.getItem(r.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(r,t){if(r===void 0&&(r={}),r.checkLocal&&(!(0,D.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();function Un(a){return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Un(a)}const xu=function(a){var r=this.constructor;return this.then(function(t){return r.resolve(a()).then(function(){return t})},function(t){return r.resolve(a()).then(function(){return r.reject(t)})})},Kp=function(a){return new this(function(r,t){if(!a||a.length===void 0)return t(new TypeError(Un(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var e=Array.prototype.slice.call(a);if(e.length===0)return r([]);var n=e.length;function i(f,d){if(d&&(Un(d)==="object"||typeof d=="function")){var v=d.then;if(typeof v=="function")return void v.call(d,function(g){i(f,g)},function(g){e[f]={status:"rejected",reason:g},--n==0&&r(e)})}e[f]={status:"fulfilled",value:d},--n==0&&r(e)}for(var l=0;l<e.length;l++)i(l,e[l])})};function Su(a,r){this.name="AggregateError",this.errors=a,this.message=r||""}Su.prototype=Error.prototype;const Yp=function(a){var r=this;return new r(function(t,e){if(!a||a.length===void 0)return e(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(a);if(n.length===0)return e();for(var i=[],l=0;l<n.length;l++)try{r.resolve(n[l]).then(t).catch(function(f){i.push(f),i.length===n.length&&e(new Su(i,"All promises were rejected"))})}catch(f){e(f)}})};var Ou=setTimeout;function cc(a){return Boolean(a&&a.length!==void 0)}function Tu(){}function Pn(a){if(!(this instanceof Pn))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ws(a,this)}function ku(a,r){for(;a._state===3;)a=a._value;a._state!==0?(a._handled=!0,Pn._immediateFn(function(){var t=a._state===1?r.onFulfilled:r.onRejected;if(t!==null){var e;try{e=t(a._value)}catch(n){return void io(r.promise,n)}uc(r.promise,e)}else(a._state===1?uc:io)(r.promise,a._value)})):a._deferreds.push(r)}function uc(a,r){try{if(r===a)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(Un(r)==="object"||typeof r=="function")){var t=r.then;if(r instanceof Pn)return a._state=3,a._value=r,void Ni(a);if(typeof t=="function")return void ws((e=t,n=r,function(){e.apply(n,arguments)}),a)}a._state=1,a._value=r,Ni(a)}catch(i){io(a,i)}var e,n}function io(a,r){a._state=2,a._value=r,Ni(a)}function Ni(a){a._state===2&&a._deferreds.length===0&&Pn._immediateFn(function(){a._handled||Pn._unhandledRejectionFn(a._value)});for(var r=0,t=a._deferreds.length;r<t;r++)ku(a,a._deferreds[r]);a._deferreds=null}function cl(a,r,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof r=="function"?r:null,this.promise=t}function ws(a,r){var t=!1;try{a(function(e){t||(t=!0,uc(r,e))},function(e){t||(t=!0,io(r,e))})}catch(e){if(t)return;t=!0,io(r,e)}}Pn.prototype.catch=function(a){return this.then(null,a)},Pn.prototype.then=function(a,r){var t=new this.constructor(Tu);return ku(this,new cl(a,r,t)),t},Pn.prototype.finally=xu,Pn.all=function(a){return new Pn(function(r,t){if(!cc(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return r([]);var n=e.length;function i(f,d){try{if(d&&(Un(d)==="object"||typeof d=="function")){var v=d.then;if(typeof v=="function")return void v.call(d,function(g){i(f,g)},t)}e[f]=d,--n==0&&r(e)}catch(g){t(g)}}for(var l=0;l<e.length;l++)i(l,e[l])})},Pn.any=Yp,Pn.allSettled=Kp,Pn.resolve=function(a){return a&&Un(a)==="object"&&a.constructor===Pn?a:new Pn(function(r){r(a)})},Pn.reject=function(a){return new Pn(function(r,t){t(a)})},Pn.race=function(a){return new Pn(function(r,t){if(!cc(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,n=a.length;e<n;e++)Pn.resolve(a[e]).then(r,t)})},Pn._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){Ou(a,0)},Pn._unhandledRejectionFn=function(a){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};const go=Pn;(0,D.hasWin)()&&(window.Promise=window.Promise||go);const Eu=typeof fetch=="function"?fetch.bind():function(a,r){return new go(function(t,e){var n=new XMLHttpRequest;for(var i in n.open(r.method||"get",a),n.withCredentials=r.credentials=="include",r.headers||{})n.setRequestHeader(i,r.headers[i]);n.onload=function(l){return t({status:n.status,statusText:n.statusText,text:function(){return go.resolve(n.responseText)}})},n.onerror=e,n.upload&&r.onProgress&&(n.upload.onprogress=r.onProgress),r.body?n.send(r.body):n.send()})};var ul=function(){return ul=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ul.apply(this,arguments)},Ii=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},pc=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}};const Pu=function(){function a(){}return a.prototype.store=function(r,t){return t===void 0&&(t={}),Ii(this,void 0,void 0,function(){return pc(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlStore,this.__props(t,r),t)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(r){return r===void 0&&(r={}),Ii(this,void 0,void 0,function(){return pc(this,function(t){switch(t.label){case 0:return[4,this.request(r.urlLoad,this.__props(r),r)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(r,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),Eu(r,t).then(function(n){var i=n.text();return(n.status/200|0)==1?i:i.then(Promise.reject)}).then(function(n){var i=n&&(0,_.isString)(n);return e.contentTypeJson&&i?JSON.parse(n):n})},a.prototype.__props=function(r,t){r===void 0&&(r={});var e,n=r.contentTypeJson,i=r.headers||{},l=r.fetchOptions||{},f="X-Requested-With",d="Content-Type";if((0,_.isUndefined)(i[f])&&(i[f]="XMLHttpRequest"),(0,_.isUndefined)(i[d])&&n&&(i[d]="application/json; charset=utf-8"),t)if(n)e=JSON.stringify(t);else for(var v in e=new FormData,t)e.append(v,t[v]);var g={method:e?"POST":"GET",credentials:r.credentials,headers:i,body:e};return ul(ul({},g),(0,_.isFunction)(l)?l(g):l)},a}();var Au=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ro=function(){return Ro=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ro.apply(this,arguments)},si=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},ha=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},pl="storage:start",fl="storage:after",ju="storage:end",_s="storage:error",ga="local",Mu="remote",Lu=function(a){function r(t){var e=a.call(this,t,"StorageManager",wu)||this;e.storages={};var n=e.config;return n._disable&&(n.type=""),e.storages={},e.add(ga,new Gp),e.add(Mu,new Pu),e.setCurrent(n.type),e}return Au(r,a),r.prototype.isAutosave=function(){return!!this.config.autosave},r.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},r.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},r.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},r.prototype.add=function(t,e){return this.storages[t]=e,this},r.prototype.get=function(t){return this.storages[t]},r.prototype.getStorages=function(){return this.storages},r.prototype.getCurrent=function(){return this.config.currentStorage},r.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},r.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},r.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},r.prototype.store=function(t,e){return e===void 0&&(e={}),si(this,void 0,void 0,function(){var n,i,l,f,d;return ha(this,function(v){switch(v.label){case 0:n=this.getCurrentStorage(),i=Ro(Ro({},this.getCurrentOptions()),e),l=this.getRecoveryStorage(),f=this.getCurrentOptions(ga),v.label=1;case 1:return v.trys.push([1,5,,9]),[4,this.__exec(n,i,t)];case 2:return v.sent(),l?[4,this.__exec(l,f,{})]:[3,4];case 3:v.sent(),v.label=4;case 4:return[3,9];case 5:return d=v.sent(),l?[4,this.__exec(l,f,t)]:[3,7];case 6:return v.sent(),[3,8];case 7:throw d;case 8:return[3,9];case 9:return[2,t]}})})},r.prototype.load=function(t){return t===void 0&&(t={}),si(this,void 0,void 0,function(){var e,n,i,l,f;return ha(this,function(d){switch(d.label){case 0:return e=this.getCurrentStorage(),n=Ro(Ro({},this.getCurrentOptions()),t),(i=this.getRecoveryStorage())?[4,this.__exec(i,this.getCurrentOptions(ga))]:[3,5];case 1:if(f=d.sent(),(0,_.isEmpty)(f))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return d.sent(),l=f,[3,5];case 4:return d.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,n)];case 6:l=d.sent(),d.label=7;case 7:return[2,l||{}]}})})},r.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(n,i){(0,_.isFunction)(e)?e(n,i,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?n(null):i()})},r.prototype.getRecovery=function(){return this.config.recovery},r.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===Mu&&this.get(ga)},r.prototype.__exec=function(t,e,n){var i;return si(this,void 0,void 0,function(){var l,f,d,v,g,w,T,V,B,X,ot,tt,At;return ha(this,function(Ft){switch(Ft.label){case 0:if(l=n?"store":"load",f=this.getConfig(),d=f.onStore,v=f.onLoad,this.onStart(l,n),!t)return[2,n||{}];Ft.label=1;case 1:return Ft.trys.push([1,14,,15]),w=(i=this.em)===null||i===void 0?void 0:i.getEditor(),T=void 0,n?(B=d)?[4,d(n,w)]:[3,3]:[3,7];case 2:B=Ft.sent(),Ft.label=3;case 3:return V=B||n,(X=e.onStore)?[4,e.onStore(V,w)]:[3,5];case 4:X=Ft.sent(),Ft.label=5;case 5:return V=X||V,[4,t.store(V,e)];case 6:return T=Ft.sent(),g=n,[3,13];case 7:return[4,t.load(e)];case 8:return T=Ft.sent(),g=this.__clearKeys(T),(ot=e.onLoad)?[4,e.onLoad(g,w)]:[3,10];case 9:ot=Ft.sent(),Ft.label=10;case 10:return g=ot||g,(tt=v)?[4,v(g,w)]:[3,12];case 11:tt=Ft.sent(),Ft.label=12;case 12:g=tt||g,Ft.label=13;case 13:return this.onAfter(l,g,T),this.onEnd(l,g),[3,15];case 14:throw At=Ft.sent(),this.onError(l,At),At;case 15:return[2,g]}})})},r.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),n=new RegExp("^".concat(e.id)),i={};for(var l in t)i[l.replace(n,"")]=t[l];return i},r.prototype.getCurrentOptions=function(t){var e=this.getConfig(),n=t||this.getCurrent();return e.options[n]||{}},r.prototype.onStart=function(t,e){var n=this.em;n&&(n.trigger(pl),t&&n.trigger("".concat(pl,":").concat(t),e))},r.prototype.onAfter=function(t,e,n){var i=this.em;i&&(i.trigger(fl),i.trigger("".concat(fl,":").concat(t),e,n),i.trigger("storage:".concat(t),e,n))},r.prototype.onEnd=function(t,e){var n=this.em;n&&(n.trigger(ju),t&&n.trigger("".concat(ju,":").concat(t),e))},r.prototype.onError=function(t,e){var n=this.em;n&&(n.trigger(_s,e),t&&n.trigger("".concat(_s,":").concat(t),e),this.onEnd(t,e))},r.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},r.prototype.destroy=function(){this.storages={}},r}(Mt);const dl=Lu,Jp={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}]};var Xp=Wt(330),va=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cs=function(){return Cs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Cs.apply(this,arguments)},fc=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var n=t.config,i=n===void 0?{}:n,l=e,f=l.model,d=l.eventCapture,v=f.target,g=f.attributes.type;e.config=i,e.em=i.em,e.pfx=i.stylePrefix||"",e.ppfx=i.pStylePrefix||"",e.target=v;var w=e.ppfx;return e.clsField="".concat(w,"field ").concat(w,"field-").concat(g),[["change:value",e.onValueChange],["remove",e.removeView]].forEach(function(T){var V=T[0],B=T[1];f.off(V,B),e.listenTo(f,V,B)}),f.view=e,e.listenTo(f,"change:label",e.render),e.listenTo(f,"change:placeholder",e.rerender),e.events={},d.forEach(function(T){return e.events[T]="onChange"}),e.delegateEvents(),e.init(),e}return va(r,a),r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.templateLabel=function(t){var e=this.ppfx,n=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(n,'">').concat(n,"</div>")},r.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},r.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},r.prototype.removeView=function(){this.remove(),this.removed()},r.prototype.init=function(){},r.prototype.removed=function(){},r.prototype.onRender=function(t){},r.prototype.onUpdate=function(t){},r.prototype.onEvent=function(t){},r.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,_.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(Cs(Cs({},this.getClbOpts()),{event:t}))},r.prototype.getValueForTarget=function(){return this.model.get("value")},r.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},r.prototype.onValueChange=function(t,e,n){if(n===void 0&&(n={}),n.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var i=this.getValueForTarget();t.setTargetValue(i,n)}},r.prototype.renderLabel=function(){var t=this.$el,e=this.target,n=this.getLabel(),i=this.templateLabel(e);this.createLabel&&(i=this.createLabel({label:n,component:e,trait:this})||""),t.find("[data-label]").append(i)},r.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,n=e.label,i=e.name;return t.t("traitManager.traits.labels.".concat(i))||(0,D.capitalize)(n||i).replace(/-/g," ")},r.prototype.getComponent=function(){return this.target},r.prototype.getInputEl=function(){if(!this.$input){var t=this.em,e=this.model,n=e,i=e.attributes.name,l=n.get("placeholder")||n.get("default")||"",f=n.get("type")||"text",d=n.get("min"),v=n.get("max"),g=this.getModelValue(),w=(0,lt.default)('<input type="'.concat(f,'">')),T=t.t("traitManager.traits.attributes.".concat(i))||{};w.attr(Cs({placeholder:l},T)),(0,_.isUndefined)(g)||(n.set({value:g},{silent:!0}),w.prop("value",g)),d&&w.prop("min",d),v&&w.prop("max",v),this.$input=w}return this.$input.get(0)},r.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},r.prototype.getModelValue=function(){var t,e=this.model,n=this.target,i=e.getName();if(e.get("changeProp"))t=n.get(i);else{var l=n.get("attributes");t=e.get("value")||l[i]}return(0,_.isUndefined)(t)?"":t},r.prototype.getElInput=function(){return this.elInput},r.prototype.renderField=function(){var t=this,e=t.$el,n=t.appendInput,i=t.model,l=e.find("[data-input]"),f=l[l.length-1],d=i.el;d||(d=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,_.isString)(d)?(f.innerHTML=d,this.elInput=f.firstChild):(n?f.appendChild(d):f.insertBefore(d,f.firstChild),this.elInput=d),i.el=this.elInput},r.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},r.prototype.rerender=function(){delete this.model.el,this.render()},r.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,i=t.ppfx,l=t.model.attributes,f=l.type,d=l.id,v=this.hasLabel&&this.hasLabel(),g="".concat(n,"trait");delete this.$input;var w='<div class="'.concat(g," ").concat(g,"--").concat(f,`">
      `).concat(v?'<div class="'.concat(i,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(i,"field-wrp ").concat(i,"field-wrp--").concat(f,`" data-input>
        `).concat(this.templateInput?(0,_.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(w),v&&this.renderLabel(),this.renderField(),this.el.className="".concat(g,"__wrp ").concat(g,"__wrp-").concat(d),this.postUpdate(),this.onRender(this.getClbOpts()),this},r}(S.G7);const zo=fc;fc.prototype.eventCapture=["change"];var dc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hc=function(a){function r(t,e){t===void 0&&(t={});var n=a.call(this,t)||this;n.reuseView=!0,n.itemsView=e;var i=t.config||{},l=i.stylePrefix||"",f=t.editor;return n.config=i,n.em=f,n.pfx=l,n.ppfx=i.pStylePrefix||"",n.className="".concat(l,"traits"),n.listenTo(f,"component:toggled",n.updatedCollection),n.updatedCollection(),n}return dc(r,a),r.prototype.updatedCollection=function(){var t=this,e=t.ppfx,n=t.className,i=t.em.getSelected();this.el.className="".concat(n," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=i?i.traits:[],this.render()},r}(Xp.Z);const Du=hc;hc.prototype.itemView=zo;var Nu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Iu=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return Nu(r,a),r.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<div class="'.concat(e,`">
      <div data-input></div>
      <div class="`).concat(t,`sel-arrow">
        <div class="`).concat(t,`d-s-arrow"></div>
      </div>
    </div>`)},r.prototype.getInputEl=function(){if(!this.$input){var t=this.model,e=this.em,n=t.get("name"),i=t.get("options")||[],l=[],f="<select>";i.forEach(function(g){var w,T,V,B="";(0,_.isString)(g)?(w=g,T=g):(w=g.name||g.label||g.value,T="".concat((0,_.isUndefined)(g.value)?g.id:g.value).replace(/"/g,"&quot;"),B+=(V=g.style?g.style.replace(/"/g,"&quot;"):"")?' style="'.concat(V,'"'):"");var X=e.t("traitManager.traits.options.".concat(n,".").concat(T))||w;f+='<option value="'.concat(T,'"').concat(B,">").concat(X,"</option>"),l.push(T)}),f+="</select>",this.$input=(0,lt.default)(f);var d=t.getTargetValue(),v=l.indexOf(d)>=0?d:t.get("default");!(0,_.isUndefined)(v)&&this.$input.val(v)}return this.$input.get(0)},r}(zo);var ma=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ya=function(a){function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return ma(r,a),r.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<label class="'.concat(e,`" data-input>
    <i class="`).concat(t,`chk-icon"></i>
  </label>`)},r.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},r.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!this.$input,i=zo.prototype.getInputEl.apply(this,t);if(n){var l=void 0,f=void 0,d=this,v=d.model,g=d.target,w=v.attributes.valueFalse,T=v.getName();v.get("changeProp")?f=l=g.get(T):l=!(!(f=g.get("attributes")[T])&&f!==""),(0,_.isUndefined)(w)||f!==w||(l=!1),i.checked=l}return i},r}(zo);var Zp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hl=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.ppfx||"";return e.opts=t,e.ppfx=n,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return Zp(r,a),r.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},r.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.setValue=function(t,e){var n=this.model,i=t||n.get("defaults"),l=this.getInputEl();l&&(l.value=i)},r.prototype.handleModelChange=function(t,e,n){this.setValue(e,n)},r.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},r.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},r.prototype.getInputEl=function(){if(!this.inputEl){var t=this.model,e=this.opts.type||"text",n=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,lt.default)('<input type="'.concat(e,'" placeholder="').concat(n,'">'))}return this.inputEl.get(0)},r.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},r}(S.G7);const gl=hl;hl.prototype.events={change:"handleChange"};var Vu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fu=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,_.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return Vu(r,a),r.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},r.prototype.setValue=function(t,e){var n=e||{},i=this.validateInputValue(t,{deepCheck:1}),l={value:i.value,unit:""};(i.unit||i.force)&&(l.unit=i.unit),this.model.set(l,n),n.silent&&this.handleModelChange()},r.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},r.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},r.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},r.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var f=l==t.get("unit")?"selected":"";n.push("<option ".concat(f,">").concat(l,"</option>"))});var i=document.createElement("div");i.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=i.firstChild}}return this.unitEl},r.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(t.get("value"));this.setValue(this.normalizeValue(n+e)),this.elementUpdated()},r.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(t.get("value"));this.setValue(this.normalizeValue(n-e)),this.elementUpdated()},r.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,D.on)(this.doc,"mousemove",this.moveIncrement),(0,D.on)(this.doc,"mouseup",this.upIncrement)},r.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,n=e.get("step"),i=this.current,l=this.normalizeValue(i.val+(i.y-t.pageY)*n),f=this.validateInputValue(l),d=f.value,v=f.unit;return this.prValue=d,e.set({value:d,unit:v},{avoidStore:1}),!1},r.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,D.off)(this.doc,"mouseup",this.upIncrement),(0,D.off)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set("value",n,{avoidStore:1}).set("value",n+e),this.elementUpdated()}},r.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var n=this.model.get("step"),i=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var l=n.toString().split(".")[1];i=l?l.length:0}return i?parseFloat(t.toFixed(i)):t},r.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var n=0,i=e||{},l=this.model,f="",d=(0,_.isUndefined)(t)?f:t,v=e.units||l.get("units")||[],g=l.get("unit")||v.length&&v[0]||"",w=(0,_.isUndefined)(e.max)?l.get("max"):e.max,T=(0,_.isUndefined)(e.min)?l.get("min"):e.min,V=!!l.get("limitlessMax"),B=!!l.get("limitlessMin");if(i.deepCheck){var X=l.get("fixedValues")||[];if(d===""&&(g=""),d){var ot=new RegExp("^"+X.join("|"),"g");if(X.length&&ot.test(d))d=d.match(ot)[0],g="",n=1;else{var tt=d+"";d+="",d=parseFloat(d.replace(",",".")),d=isNaN(d)?f:d;var At=tt.replace(d,"");(0,_.indexOf)(v,At)>=0&&(g=At)}}}return V||(0,_.isUndefined)(w)||w===""||(d=d>w?w:d),B||(0,_.isUndefined)(T)||T===""||(d=d<T?T:d),{force:n,value:d,unit:g}},r.prototype.render=function(){gl.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},r}(gl);const Hu=Fu;Fu.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var Qp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const tf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Qp(r,a),r.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,n=e.value,i=e.unit;return(0,_.isUndefined)(n)||n===""?t.get("default"):n+i},r.prototype.getInputEl=function(){if(!this.input){var t=this.ppfx,e=this.model,n=this.getModelValue(),i=new Hu({contClass:"".concat(t,"field-int"),type:"number",model:e,ppfx:t});i.render(),this.$input=i.inputEl,this.$unit=i.unitEl,e.set("value",n,{fromTarget:!0}),this.$input.val(n),this.input=i.el}return this.input},r}(zo);var Ru=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ba=function(){return ba=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ba.apply(this,arguments)};lt.default&&function(a,r){if((0,D.hasWin)()){var t={beforeShow:Dr,move:Dr,change:Dr,show:Dr,hide:Dr,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],n=!!/msie/i.exec(window.navigator.userAgent),i=function(){function dt(jt,Ut){return!!~(""+jt).indexOf(Ut)}var Tt=document.createElement("div").style;return Tt.cssText="background-color:rgba(0,0,0,.5)",dt(Tt.backgroundColor,"rgba")||dt(Tt.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),f=function(){var dt="";if(n)for(var Tt=1;Tt<=6;Tt++)dt+="<div class='sp-"+Tt+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",dt,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),d="spectrum.id";a.fn.spectrum=function(dt,Tt){if(typeof dt=="string"){var jt=this,Ut=Array.prototype.slice.call(arguments,1);return this.each(function(){var he=e[a(this).data(d)];if(he){var Ht=he[dt];if(!Ht)throw new Error("Spectrum: no such method: '"+dt+"'");dt=="get"?jt=he.get():dt=="container"?jt=he.container:dt=="option"?jt=he.option.apply(he,Ut):dt=="destroy"?(he.destroy(),a(this).removeData(d)):Ht.apply(he,Ut)}}),jt}return this.spectrum("destroy").each(function(){var he=On(this,a.extend({},dt,a(this).data()));a(this).data(d,he.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=ao,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function dt(){if(dt._cachedResult===void 0){var Tt=a("<input type='color'/>")[0];dt._cachedResult=Tt.type==="color"&&Tt.value!==""}return dt._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var dt=a("input[type=color]");dt.length&&!Qr()&&dt.spectrum({preferredFormat:"hex6"})};var v=/^[\s,#]+/,g=/\s+$/,w=0,T=Math,V=T.round,B=T.min,X=T.max,ot=T.random,tt=function(dt,Tt){if(Tt=Tt||{},(dt=dt||"")instanceof tt)return dt;if(!(this instanceof tt))return new tt(dt,Tt);var jt=function(Ut){var he={r:0,g:0,b:0},Ht=1,Ge=!1,ln=!1;typeof Ut=="string"&&(Ut=function(cn){cn=cn.replace(v,"").replace(g,"").toLowerCase();var Te,pn=!1;if(_e[cn])cn=_e[cn],pn=!0;else if(cn=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Te=We.rgb.exec(cn))?{r:Te[1],g:Te[2],b:Te[3]}:(Te=We.rgba.exec(cn))?{r:Te[1],g:Te[2],b:Te[3],a:Te[4]}:(Te=We.hsl.exec(cn))?{h:Te[1],s:Te[2],l:Te[3]}:(Te=We.hsla.exec(cn))?{h:Te[1],s:Te[2],l:Te[3],a:Te[4]}:(Te=We.hsv.exec(cn))?{h:Te[1],s:Te[2],v:Te[3]}:(Te=We.hsva.exec(cn))?{h:Te[1],s:Te[2],v:Te[3],a:Te[4]}:(Te=We.hex8.exec(cn))?{a:Dm(Te[1]),r:ui(Te[2]),g:ui(Te[3]),b:ui(Te[4]),format:pn?"name":"hex8"}:(Te=We.hex6.exec(cn))?{r:ui(Te[1]),g:ui(Te[2]),b:ui(Te[3]),format:pn?"name":"hex"}:(Te=We.hex3.exec(cn))?{r:ui(Te[1]+""+Te[1]),g:ui(Te[2]+""+Te[2]),b:ui(Te[3]+""+Te[3]),format:pn?"name":"hex"}:!1}(Ut)),typeof Ut=="object"&&(Ut.hasOwnProperty("r")&&Ut.hasOwnProperty("g")&&Ut.hasOwnProperty("b")?(rn=Ut.r,bo=Ut.g,hr=Ut.b,he={r:255*Fn(rn,255),g:255*Fn(bo,255),b:255*Fn(hr,255)},Ge=!0,ln=String(Ut.r).substr(-1)==="%"?"prgb":"rgb"):Ut.hasOwnProperty("h")&&Ut.hasOwnProperty("s")&&Ut.hasOwnProperty("v")?(Ut.s=Lc(Ut.s),Ut.v=Lc(Ut.v),he=function(cn,Te,pn){cn=6*Fn(cn,360),Te=Fn(Te,100),pn=Fn(pn,100);var mn=T.floor(cn),sr=cn-mn,Gn=pn*(1-Te),Sr=pn*(1-sr*Te),to=pn*(1-(1-sr)*Te),wo=mn%6,pi=[pn,Sr,Gn,Gn,to,pn][wo],As=[to,pn,pn,Sr,Gn,Gn][wo],Or=[Gn,Gn,to,pn,pn,Sr][wo];return{r:255*pi,g:255*As,b:255*Or}}(Ut.h,Ut.s,Ut.v),Ge=!0,ln="hsv"):Ut.hasOwnProperty("h")&&Ut.hasOwnProperty("s")&&Ut.hasOwnProperty("l")&&(Ut.s=Lc(Ut.s),Ut.l=Lc(Ut.l),he=function(cn,Te,pn){var mn,sr,Gn;function Sr(pi,As,Or){return Or<0&&(Or+=1),Or>1&&(Or-=1),Or<1/6?pi+6*(As-pi)*Or:Or<1/2?As:Or<2/3?pi+(As-pi)*(2/3-Or)*6:pi}if(cn=Fn(cn,360),Te=Fn(Te,100),pn=Fn(pn,100),Te===0)mn=sr=Gn=pn;else{var to=pn<.5?pn*(1+Te):pn+Te-pn*Te,wo=2*pn-to;mn=Sr(wo,to,cn+1/3),sr=Sr(wo,to,cn),Gn=Sr(wo,to,cn-1/3)}return{r:255*mn,g:255*sr,b:255*Gn}}(Ut.h,Ut.s,Ut.l),Ge=!0,ln="hsl"),Ut.hasOwnProperty("a")&&(Ht=Ut.a));var rn,bo,hr;return Ht=Wd(Ht),{ok:Ge,format:Ut.format||ln,r:B(255,X(he.r,0)),g:B(255,X(he.g,0)),b:B(255,X(he.b,0)),a:Ht}}(dt);this._originalInput=dt,this._r=jt.r,this._g=jt.g,this._b=jt.b,this._a=jt.a,this._roundA=V(100*this._a)/100,this._format=Tt.format||jt.format,this._gradientType=Tt.gradientType,this._r<1&&(this._r=V(this._r)),this._g<1&&(this._g=V(this._g)),this._b<1&&(this._b=V(this._b)),this._ok=jt.ok,this._tc_id=w++};tt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var dt=this.toRgb();return(299*dt.r+587*dt.g+114*dt.b)/1e3},setAlpha:function(dt){return this._a=Wd(dt),this._roundA=V(100*this._a)/100,this},toHsv:function(){var dt=Bi(this._r,this._g,this._b);return{h:360*dt.h,s:dt.s,v:dt.v,a:this._a}},toHsvString:function(){var dt=Bi(this._r,this._g,this._b),Tt=V(360*dt.h),jt=V(100*dt.s),Ut=V(100*dt.v);return this._a==1?"hsv("+Tt+", "+jt+"%, "+Ut+"%)":"hsva("+Tt+", "+jt+"%, "+Ut+"%, "+this._roundA+")"},toHsl:function(){var dt=ci(this._r,this._g,this._b);return{h:360*dt.h,s:dt.s,l:dt.l,a:this._a}},toHslString:function(){var dt=ci(this._r,this._g,this._b),Tt=V(360*dt.h),jt=V(100*dt.s),Ut=V(100*dt.l);return this._a==1?"hsl("+Tt+", "+jt+"%, "+Ut+"%)":"hsla("+Tt+", "+jt+"%, "+Ut+"%, "+this._roundA+")"},toHex:function(dt){return Ta(this._r,this._g,this._b,dt)},toHexString:function(dt){return"#"+this.toHex(dt)},toHex8:function(){return Ud(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:V(this._r),g:V(this._g),b:V(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+V(this._r)+", "+V(this._g)+", "+V(this._b)+")":"rgba("+V(this._r)+", "+V(this._g)+", "+V(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:V(100*Fn(this._r,255))+"%",g:V(100*Fn(this._g,255))+"%",b:V(100*Fn(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+V(100*Fn(this._r,255))+"%, "+V(100*Fn(this._g,255))+"%, "+V(100*Fn(this._b,255))+"%)":"rgba("+V(100*Fn(this._r,255))+"%, "+V(100*Fn(this._g,255))+"%, "+V(100*Fn(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Ne[Ta(this._r,this._g,this._b,!0)]||!1)},toFilter:function(dt){var Tt="#"+Ud(this._r,this._g,this._b,this._a),jt=Tt,Ut=this._gradientType?"GradientType = 1, ":"";return dt&&(jt=tt(dt).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+Ut+"startColorstr="+Tt+",endColorstr="+jt+")"},toString:function(dt){var Tt=!!dt;dt=dt||this._format;var jt=!1,Ut=this._a<1&&this._a>=0;return Tt||!Ut||dt!=="hex"&&dt!=="hex6"&&dt!=="hex3"&&dt!=="name"?(dt==="rgb"&&(jt=this.toRgbString()),dt==="prgb"&&(jt=this.toPercentageRgbString()),dt!=="hex"&&dt!=="hex6"||(jt=this.toHexString()),dt==="hex3"&&(jt=this.toHexString(!0)),dt==="hex8"&&(jt=this.toHex8String()),dt==="name"&&(jt=this.toName()),dt==="hsl"&&(jt=this.toHslString()),dt==="hsv"&&(jt=this.toHsvString()),jt||this.toHexString()):dt==="name"&&this._a===0?this.toName():this.toRgbString()},_applyModification:function(dt,Tt){var jt=dt.apply(null,[this].concat([].slice.call(Tt)));return this._r=jt._r,this._g=jt._g,this._b=jt._b,this.setAlpha(jt._a),this},lighten:function(){return this._applyModification(Sm,arguments)},brighten:function(){return this._applyModification(Om,arguments)},darken:function(){return this._applyModification(Tm,arguments)},desaturate:function(){return this._applyModification(_m,arguments)},saturate:function(){return this._applyModification(Cm,arguments)},greyscale:function(){return this._applyModification(xm,arguments)},spin:function(){return this._applyModification(km,arguments)},_applyCombination:function(dt,Tt){return dt.apply(null,[this].concat([].slice.call(Tt)))},analogous:function(){return this._applyCombination(Mm,arguments)},complement:function(){return this._applyCombination(Em,arguments)},monochromatic:function(){return this._applyCombination(Lm,arguments)},splitcomplement:function(){return this._applyCombination(jm,arguments)},triad:function(){return this._applyCombination(Pm,arguments)},tetrad:function(){return this._applyCombination(Am,arguments)}},tt.fromRatio=function(dt,Tt){if(typeof dt=="object"){var jt={};for(var Ut in dt)dt.hasOwnProperty(Ut)&&(jt[Ut]=Ut==="a"?dt[Ut]:Lc(dt[Ut]));dt=jt}return tt(dt,Tt)},tt.equals=function(dt,Tt){return!(!dt||!Tt)&&tt(dt).toRgbString()==tt(Tt).toRgbString()},tt.random=function(){return tt.fromRatio({r:ot(),g:ot(),b:ot()})},tt.mix=function(dt,Tt,jt){jt=jt===0?0:jt||50;var Ut,he=tt(dt).toRgb(),Ht=tt(Tt).toRgb(),Ge=jt/100,ln=2*Ge-1,rn=Ht.a-he.a,bo=1-(Ut=((Ut=ln*rn==-1?ln:(ln+rn)/(1+ln*rn))+1)/2),hr={r:Ht.r*Ut+he.r*bo,g:Ht.g*Ut+he.g*bo,b:Ht.b*Ut+he.b*bo,a:Ht.a*Ge+he.a*(1-Ge)};return tt(hr)},tt.readability=function(dt,Tt){var jt=tt(dt),Ut=tt(Tt),he=jt.toRgb(),Ht=Ut.toRgb(),Ge=jt.getBrightness(),ln=Ut.getBrightness(),rn=Math.max(he.r,Ht.r)-Math.min(he.r,Ht.r)+Math.max(he.g,Ht.g)-Math.min(he.g,Ht.g)+Math.max(he.b,Ht.b)-Math.min(he.b,Ht.b);return{brightness:Math.abs(Ge-ln),color:rn}},tt.isReadable=function(dt,Tt){var jt=tt.readability(dt,Tt);return jt.brightness>125&&jt.color>500},tt.mostReadable=function(dt,Tt){for(var jt=null,Ut=0,he=!1,Ht=0;Ht<Tt.length;Ht++){var Ge=tt.readability(dt,Tt[Ht]),ln=Ge.brightness>125&&Ge.color>500,rn=3*(Ge.brightness/125)+Ge.color/500;(ln&&!he||ln&&he&&rn>Ut||!ln&&!he&&rn>Ut)&&(he=ln,Ut=rn,jt=tt(Tt[Ht]))}return jt};var At,Ft,de,_e=tt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ne=tt.hexNames=function(dt){var Tt={};for(var jt in dt)dt.hasOwnProperty(jt)&&(Tt[dt[jt]]=jt);return Tt}(_e),We=(Ft="[\\s|\\(]+("+(At="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+At+")[,|\\s]+("+At+")\\s*\\)?",de="[\\s|\\(]+("+At+")[,|\\s]+("+At+")[,|\\s]+("+At+")[,|\\s]+("+At+")\\s*\\)?",{rgb:new RegExp("rgb"+Ft),rgba:new RegExp("rgba"+de),hsl:new RegExp("hsl"+Ft),hsla:new RegExp("hsla"+de),hsv:new RegExp("hsv"+Ft),hsva:new RegExp("hsva"+de),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=tt,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}function on(dt,Tt,jt,Ut){for(var he=[],Ht=0;Ht<dt.length;Ht++){var Ge=dt[Ht];if(Ge){var ln=tt(Ge),rn=ln.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";rn+=tt.equals(Tt,Ge)?" sp-thumb-active":"";var bo=ln.toString(Ut.preferredFormat||"rgb"),hr=i?"background-color:"+ln.toRgbString():"filter:"+ln.toFilter();he.push('<span title="'+bo+'" data-color="'+ln.toRgbString()+'" class="'+rn+'"><span class="sp-thumb-inner" style="'+hr+';"></span></span>')}else he.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",Ut.noColorSelectedText)).html())}return"<div class='sp-cf "+jt+"'>"+he.join("")+"</div>"}function On(dt,Tt){var jt,Ut,he,Ht=function(Me,Le){var Be=a.extend({},t,Me);return Be.callbacks={move:Zr(Be.move,Le),change:Zr(Be.change,Le),show:Zr(Be.show,Le),hide:Zr(Be.hide,Le),beforeShow:Zr(Be.beforeShow,Le)},Be}(Tt,dt),Ge=Ht.flat,ln=Ht.showSelectionPalette,rn=Ht.localStorageKey,bo=Ht.theme,hr=Ht.callbacks,cn=(jt=ja,Ut=10,function(){var Me=this,Le=arguments,Be=function(){he=null,jt.apply(Me,Le)};he||(he=setTimeout(Be,Ut))}),Te=!1,pn=!1,mn=!0,sr=0,Gn=0,Sr=0,to=0,wo=0,pi=0,As=0,Or=0,Dc=0,Nc=0,fi=1,dp=[],Ic=[],hp={},di=Ht.selectionPalette.slice(0),Nm=Ht.maxSelectionSize,$d="sp-dragging",js=null,Vc=dt.ownerDocument,ar=(Vc.body,a(dt)),Df=!1,tn=a(f,Vc).addClass(bo),Im=tn.find(".sp-picker-container"),gp=tn.find(".sp-color"),vp=tn.find(".sp-dragger"),Nf=tn.find(".sp-hue"),mp=tn.find(".sp-slider"),Fc=tn.find(".sp-alpha-inner"),qd=tn.find(".sp-alpha"),yp=tn.find(".sp-alpha-handle"),hi=tn.find(".sp-input"),Gd=tn.find(".sp-palette"),Kd=tn.find(".sp-initial"),Yd=tn.find(".sp-cancel"),If=tn.find(".sp-clear"),Jd=tn.find(".sp-choose"),Vf=tn.find(".sp-palette-toggle"),bp=ar.is("input"),Vm=bp&&ar.attr("type")==="color"&&Qr(),Ff=bp&&!Ge,kl=Ff?a(l).addClass(bo).addClass(Ht.className).addClass(Ht.replacerClassName):a([]),Hc=Ff?kl:ar,El=kl.find(".sp-preview-inner"),Rc=Ht.color||bp&&ar.val(),Pl=!1,Al=Ht.preferredFormat,Fm=!Ht.showButtons||Ht.clickoutFiresChange,Ms=!Rc,Ea=Ht.allowEmpty&&!Vm;function Hf(){if(Ht.showPaletteOnly&&(Ht.showPalette=!0),Vf.text(Ht.showPaletteOnly?Ht.togglePaletteMoreText:Ht.togglePaletteLessText),Ht.palette){dp=Ht.palette.slice(0),Ic=a.isArray(dp[0])?dp:[dp],hp={};for(var Me=0;Me<Ic.length;Me++)for(var Le=0;Le<Ic[Me].length;Le++){var Be=tt(Ic[Me][Le]).toRgbString();hp[Be]=!0}}tn.toggleClass("sp-flat",Ge),tn.toggleClass("sp-input-disabled",!Ht.showInput),tn.toggleClass("sp-alpha-enabled",Ht.showAlpha),tn.toggleClass("sp-clear-enabled",Ea),tn.toggleClass("sp-buttons-disabled",!Ht.showButtons),tn.toggleClass("sp-palette-buttons-disabled",!Ht.togglePaletteOnly),tn.toggleClass("sp-palette-disabled",!Ht.showPalette),tn.toggleClass("sp-palette-only",Ht.showPaletteOnly),tn.toggleClass("sp-initial-disabled",!Ht.showInitial),tn.addClass(Ht.className).addClass(Ht.containerClassName),ja()}function Xd(){if(rn&&window.localStorage){try{var Me=window.localStorage[rn].split(",#");Me.length>1&&(delete window.localStorage[rn],a.each(Me,function(Le,Be){Rf(Be)}))}catch{}try{di=window.localStorage[rn].split(";")}catch{}}}function Rf(Me){if(ln){var Le=tt(Me).toRgbString();if(!hp[Le]&&a.inArray(Le,di)===-1)for(di.push(Le);di.length>Nm;)di.shift();if(rn&&window.localStorage)try{window.localStorage[rn]=di.join(";")}catch{}}}function Zd(){var Me=eo(),Le=a.map(Ic,function(Be,He){return on(Be,Me,"sp-palette-row sp-palette-row-"+He,Ht)});Xd(),di&&Le.push(on(function(){var Be=[];if(Ht.showPalette)for(var He=0;He<di.length;He++){var Tr=tt(di[He]).toRgbString();hp[Tr]||Be.push(di[He])}return Be.reverse().slice(0,Ht.maxSelectionSize)}(),Me,"sp-palette-row sp-palette-row-selection",Ht)),Gd.html(Le.join(""))}function Qd(){if(Ht.showInitial){var Me=Pl,Le=eo();Kd.html(on([Me,Le],Le,"sp-palette-row-initial",Ht))}}function zf(){(Gn<=0||sr<=0||to<=0)&&ja(),pn=!0,tn.addClass($d),js=null,ar.trigger("dragstart.spectrum",[eo()])}function Bf(){pn=!1,tn.removeClass($d),ar.trigger("dragstop.spectrum",[eo()])}function Uf(){var Me=hi.val();if(Me!==null&&Me!==""||!Ea){var Le=tt(Me);Le.isValid()?(Pa(Le),Aa(!0)):hi.addClass("sp-validation-error")}else Pa(null),Aa(!0)}function th(){Te?Ls():Wf()}function Wf(){var Me=a.Event("beforeShow.spectrum");if(Te)ja();else if(ar.trigger("beforeShow.spectrum",[eo()]),hr.beforeShow(eo())!==!1&&!Me.isDefaultPrevented()){(function(){for(var Be=0;Be<e.length;Be++)e[Be]&&e[Be].hide()})(),Te=!0;var Le=a(Vc);Le.bind("keydown.spectrum",eh),Le.bind("click.spectrum",nh),a(window).bind("resize.spectrum",cn),kl.addClass("sp-active"),tn.removeClass("sp-hidden"),ja(),Ml(),Pl=eo(),Qd(),hr.show(Pl),ar.trigger("show.spectrum",[Pl])}}function eh(Me){Me.keyCode===27&&Ls()}function nh(Me){Me.button!=2&&(pn||(Fm?Aa(!0):rh(),Ls()))}function Ls(){Te&&!Ge&&(Te=!1,a(Vc).unbind("keydown.spectrum",eh),a(Vc).unbind("click.spectrum",nh),a(window).unbind("resize.spectrum",cn),kl.removeClass("sp-active"),tn.addClass("sp-hidden"),hr.hide(eo()),ar.trigger("hide.spectrum",[eo()]))}function rh(){Pa(Pl,!0)}function Pa(Me,Le){var Be,He;tt.equals(Me,eo())?Ml():(!Me&&Ea?Ms=!0:(Ms=!1,mn=!Me,He=(Be=tt(Me)).toHsv(),Or=He.h%360/360,Dc=He.s,Nc=He.v,fi=He.a),Ml(),Be&&Be.isValid()&&!Le&&(Al=Ht.preferredFormat||Be.getFormat()))}function eo(Me){return Me=Me||{},Ea&&Ms?null:tt.fromRatio({h:Or,s:Dc,v:Nc,a:Math.round(100*fi)/100},{format:Me.format||Al})}function jl(){Ml(),hr.move(eo()),ar.trigger("move.spectrum",[eo()])}function Ml(){hi.removeClass("sp-validation-error"),oh();var Me=tt.fromRatio({h:Or,s:1,v:1});gp.css("background-color",Me.toHexString());var Le=Al;fi<1&&(fi!==0||Le!=="name")&&(Le!=="hex"&&Le!=="hex3"&&Le!=="hex6"&&Le!=="name"||(Le="rgb"));var Be=eo({format:Le}),He="";if(El.removeClass("sp-clear-display"),El.css("background-color","transparent"),!Be&&Ea)El.addClass("sp-clear-display");else{var Tr=Be.toHexString(),gi=Be.toRgbString();if(i||Be.alpha===1?El.css("background-color",gi):(El.css("background-color","transparent"),El.css("filter",Be.toFilter())),Ht.showAlpha){var Ds=Be.toRgb();Ds.a=0;var Ns=tt(Ds).toRgbString(),Ma="linear-gradient(left, "+Ns+", "+Tr+")";n?Fc.css("filter",tt(Ns).toFilter({gradientType:1},Tr)):(Fc.css("background","-webkit-"+Ma),Fc.css("background","-moz-"+Ma),Fc.css("background","-ms-"+Ma),Fc.css("background","linear-gradient(to right, "+Ns+", "+Tr+")"))}He=Be.toString(Le)}Ht.showInput&&hi.val(He),Ht.showPalette&&Zd(),Qd()}function oh(){var Me=Dc,Le=Nc;if(Ea&&Ms)yp.hide(),mp.hide(),vp.hide();else{yp.show(),mp.show(),vp.show();var Be=Me*sr,He=Gn-Le*Gn;Be=Math.max(-Sr,Math.min(sr-Sr,Be-Sr)),He=Math.max(-Sr,Math.min(Gn-Sr,He-Sr)),vp.css({top:He+"px",left:Be+"px"});var Tr=fi*wo;yp.css({left:Tr-pi/2+"px"});var gi=Or*to;mp.css({top:gi-As+"px"})}}function Aa(Me){var Le=eo(),Be="",He=!!mn||!tt.equals(Le,Pl);Le&&(Be=Le.toString(Al),!Te&&Rf(Le)),bp&&ar.val(Be),Me&&He&&(hr.change(Le),ar.trigger("change",[Le]))}function ja(){Te&&(sr=gp.width(),Gn=gp.height(),Sr=vp.height(),Nf.width(),to=Nf.height(),As=mp.height(),wo=qd.width(),pi=yp.width(),Ge||(tn.css("position","absolute"),Ht.offset?tn.offset(Ht.offset):tn.offset(function(Me,Le){var Be=0,He=Me.outerWidth(),Tr=Me.outerHeight(),gi=Le.outerHeight(),Ds=Me[0].ownerDocument,Ns=Ds.documentElement,Ma=Ns.clientWidth,$f=Ns.clientHeight,Hm=a(Ds).scrollLeft(),Rm=a(Ds).scrollTop(),qf=Ma+Hm,sh=$f+Rm,Ui=Le.offset();return Ui.top+=gi,Ui.left-=Math.min(Ui.left,Ui.left+He>qf&&qf>He?Math.abs(Ui.left+He-qf):0),Ui.top-=Math.min(Ui.top,Ui.top+Tr>sh&&sh>Tr?Math.abs(Tr+gi-Be):Be),Ui}(tn,Hc))),oh(),Ht.showPalette&&Zd(),ar.trigger("reflow.spectrum"))}function ih(){Ls(),Df=!0,ar.attr("disabled",!0),Hc.addClass("sp-disabled")}(function(){if(n&&tn.find("*:not(input)").attr("unselectable","on"),Hf(),Ff&&ar.after(kl).hide(),Ea||If.hide(),Ge)ar.after(tn).hide();else{var Me=Ht.appendTo==="parent"?ar.parent():a(Ht.appendTo);Me.length!==1&&(Me=a("body")),Me.append(tn)}function Le(He){return He.data&&He.data.ignore?(Pa(a(He.target).closest(".sp-thumb-el").data("color")),jl()):(Pa(a(He.target).closest(".sp-thumb-el").data("color")),jl(),Ht.hideAfterPaletteSelect&&(Aa(!0),Ls())),!1}Xd(),Hc.bind("click.spectrum touchstart.spectrum",function(He){Df||th(),He.stopPropagation(),a(He.target).is("input")||He.preventDefault()}),(ar.is(":disabled")||Ht.disabled===!0)&&ih(),tn.click(Xr),hi.change(Uf),hi.bind("paste",function(){setTimeout(Uf,1)}),hi.keydown(function(He){He.keyCode==13&&Uf()}),Yd.text(Ht.cancelText),Yd.bind("click.spectrum",function(He){He.stopPropagation(),He.preventDefault(),rh(),Ls()}),If.attr("title",Ht.clearText),If.bind("click.spectrum",function(He){He.stopPropagation(),He.preventDefault(),Ms=!0,jl(),Ge&&Aa(!0)}),Jd.text(Ht.chooseText),Jd.bind("click.spectrum",function(He){He.stopPropagation(),He.preventDefault(),n&&hi.is(":focus")&&hi.trigger("change"),hi.hasClass("sp-validation-error")||(Aa(!0),Ls())}),Vf.text(Ht.showPaletteOnly?Ht.togglePaletteMoreText:Ht.togglePaletteLessText),Vf.bind("click.spectrum",function(He){He.stopPropagation(),He.preventDefault(),Ht.showPaletteOnly=!Ht.showPaletteOnly,Ht.showPaletteOnly||Ge||tn.css("left","-="+(Im.outerWidth(!0)+5)),Hf()}),ao(qd,function(He,Tr,gi){fi=He/wo,Ms=!1,gi.shiftKey&&(fi=Math.round(10*fi)/10),jl()},zf,Bf),ao(Nf,function(He,Tr){Or=parseFloat(Tr/to),Ms=!1,Ht.showAlpha||(fi=1),jl()},zf,Bf),ao(gp,function(He,Tr,gi){if(gi.shiftKey){if(!js){var Ds=Dc*sr,Ns=Gn-Nc*Gn,Ma=Math.abs(He-Ds)>Math.abs(Tr-Ns);js=Ma?"x":"y"}}else js=null;var $f=!js||js==="y";(!js||js==="x")&&(Dc=parseFloat(He/sr)),$f&&(Nc=parseFloat((Gn-Tr)/Gn)),Ms=!1,Ht.showAlpha||(fi=1),jl()},zf,Bf),Rc?(Pa(Rc),Ml(),Al=Ht.preferredFormat||tt(Rc).getFormat(),Rf(Rc)):Ml(),Ge&&Wf();var Be=n?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Gd.delegate(".sp-thumb-el",Be,Le),Kd.delegate(".sp-thumb-el:nth-child(1)",Be,{ignore:!0},Le)})();var wp={show:Wf,hide:Ls,toggle:th,reflow:ja,option:function(Me,Le){return Me===r?a.extend({},Ht):Le===r?Ht[Me]:(Ht[Me]=Le,Me==="preferredFormat"&&(Al=Ht.preferredFormat),void Hf())},enable:function(){Df=!1,ar.attr("disabled",!1),Hc.removeClass("sp-disabled")},disable:ih,offset:function(Me){Ht.offset=Me,ja()},set:function(Me){Pa(Me),Aa()},get:eo,destroy:function(){ar.show(),Hc.unbind("click.spectrum touchstart.spectrum"),tn.remove(),kl.remove(),e[wp.id]=null},container:tn};return wp.id=e.push(wp)-1,wp}function Dr(){}function Xr(dt){dt.stopPropagation()}function Zr(dt,Tt){var jt=Array.prototype.slice,Ut=jt.call(arguments,2);return function(){return dt.apply(Tt,Ut.concat(jt.call(arguments)))}}function ao(dt,Tt,jt,Ut){Tt=Tt||function(){},jt=jt||function(){},Ut=Ut||function(){};var he=document,Ht=!1,Ge={},ln=0,rn=0,bo="ontouchstart"in window,hr={};function cn(mn){mn.stopPropagation&&mn.stopPropagation(),mn.preventDefault&&mn.preventDefault(),mn.returnValue=!1}function Te(mn){if(Ht){if(n&&he.documentMode<9&&!mn.button)return pn();var sr=mn&&mn.touches&&mn.touches[0],Gn=sr&&sr.pageX||mn.pageX,Sr=sr&&sr.pageY||mn.pageY,to=Math.max(0,Math.min(Gn-Ge.left,rn)),wo=Math.max(0,Math.min(Sr-Ge.top,ln));bo&&cn(mn),Tt.apply(dt,[to,wo,mn])}}function pn(){Ht&&(a(he).unbind(hr),a(he.body).removeClass("sp-dragging"),setTimeout(function(){Ut.apply(dt,arguments)},0)),Ht=!1}hr.selectstart=cn,hr.dragstart=cn,hr["touchmove mousemove"]=Te,hr["touchend mouseup"]=pn,a(dt).bind("touchstart mousedown",function(mn){var sr=mn.which?mn.which==3:mn.button==2;sr||Ht||jt.apply(dt,arguments)!==!1&&(Ht=!0,ln=a(dt).height(),rn=a(dt).width(),Ge=a(dt).offset(),a(he).bind(hr),a(he.body).addClass("sp-dragging"),Te(mn),cn(mn))})}function Qr(){return a.fn.spectrum.inputTypeColorSupport()}function ci(dt,Tt,jt){dt=Fn(dt,255),Tt=Fn(Tt,255),jt=Fn(jt,255);var Ut,he,Ht=X(dt,Tt,jt),Ge=B(dt,Tt,jt),ln=(Ht+Ge)/2;if(Ht==Ge)Ut=he=0;else{var rn=Ht-Ge;switch(he=ln>.5?rn/(2-Ht-Ge):rn/(Ht+Ge),Ht){case dt:Ut=(Tt-jt)/rn+(Tt<jt?6:0);break;case Tt:Ut=(jt-dt)/rn+2;break;case jt:Ut=(dt-Tt)/rn+4}Ut/=6}return{h:Ut,s:he,l:ln}}function Bi(dt,Tt,jt){dt=Fn(dt,255),Tt=Fn(Tt,255),jt=Fn(jt,255);var Ut,he,Ht=X(dt,Tt,jt),Ge=B(dt,Tt,jt),ln=Ht,rn=Ht-Ge;if(he=Ht===0?0:rn/Ht,Ht==Ge)Ut=0;else{switch(Ht){case dt:Ut=(Tt-jt)/rn+(Tt<jt?6:0);break;case Tt:Ut=(jt-dt)/rn+2;break;case jt:Ut=(dt-Tt)/rn+4}Ut/=6}return{h:Ut,s:he,v:ln}}function Ta(dt,Tt,jt,Ut){var he=[ka(V(dt).toString(16)),ka(V(Tt).toString(16)),ka(V(jt).toString(16))];return Ut&&he[0].charAt(0)==he[0].charAt(1)&&he[1].charAt(0)==he[1].charAt(1)&&he[2].charAt(0)==he[2].charAt(1)?he[0].charAt(0)+he[1].charAt(0)+he[2].charAt(0):he.join("")}function Ud(dt,Tt,jt,Ut){var he;return[ka((he=Ut,Math.round(255*parseFloat(he)).toString(16))),ka(V(dt).toString(16)),ka(V(Tt).toString(16)),ka(V(jt).toString(16))].join("")}function _m(dt,Tt){Tt=Tt===0?0:Tt||10;var jt=tt(dt).toHsl();return jt.s-=Tt/100,jt.s=fp(jt.s),tt(jt)}function Cm(dt,Tt){Tt=Tt===0?0:Tt||10;var jt=tt(dt).toHsl();return jt.s+=Tt/100,jt.s=fp(jt.s),tt(jt)}function xm(dt){return tt(dt).desaturate(100)}function Sm(dt,Tt){Tt=Tt===0?0:Tt||10;var jt=tt(dt).toHsl();return jt.l+=Tt/100,jt.l=fp(jt.l),tt(jt)}function Om(dt,Tt){Tt=Tt===0?0:Tt||10;var jt=tt(dt).toRgb();return jt.r=X(0,B(255,jt.r-V(255*(-Tt/100)))),jt.g=X(0,B(255,jt.g-V(255*(-Tt/100)))),jt.b=X(0,B(255,jt.b-V(255*(-Tt/100)))),tt(jt)}function Tm(dt,Tt){Tt=Tt===0?0:Tt||10;var jt=tt(dt).toHsl();return jt.l-=Tt/100,jt.l=fp(jt.l),tt(jt)}function km(dt,Tt){var jt=tt(dt).toHsl(),Ut=(V(jt.h)+Tt)%360;return jt.h=Ut<0?360+Ut:Ut,tt(jt)}function Em(dt){var Tt=tt(dt).toHsl();return Tt.h=(Tt.h+180)%360,tt(Tt)}function Pm(dt){var Tt=tt(dt).toHsl(),jt=Tt.h;return[tt(dt),tt({h:(jt+120)%360,s:Tt.s,l:Tt.l}),tt({h:(jt+240)%360,s:Tt.s,l:Tt.l})]}function Am(dt){var Tt=tt(dt).toHsl(),jt=Tt.h;return[tt(dt),tt({h:(jt+90)%360,s:Tt.s,l:Tt.l}),tt({h:(jt+180)%360,s:Tt.s,l:Tt.l}),tt({h:(jt+270)%360,s:Tt.s,l:Tt.l})]}function jm(dt){var Tt=tt(dt).toHsl(),jt=Tt.h;return[tt(dt),tt({h:(jt+72)%360,s:Tt.s,l:Tt.l}),tt({h:(jt+216)%360,s:Tt.s,l:Tt.l})]}function Mm(dt,Tt,jt){Tt=Tt||6,jt=jt||30;var Ut=tt(dt).toHsl(),he=360/jt,Ht=[tt(dt)];for(Ut.h=(Ut.h-(he*Tt>>1)+720)%360;--Tt;)Ut.h=(Ut.h+he)%360,Ht.push(tt(Ut));return Ht}function Lm(dt,Tt){Tt=Tt||6;for(var jt=tt(dt).toHsv(),Ut=jt.h,he=jt.s,Ht=jt.v,Ge=[],ln=1/Tt;Tt--;)Ge.push(tt({h:Ut,s:he,v:Ht})),Ht=(Ht+ln)%1;return Ge}function Wd(dt){return dt=parseFloat(dt),(isNaN(dt)||dt<0||dt>1)&&(dt=1),dt}function Fn(dt,Tt){(function(Ut){return typeof Ut=="string"&&Ut.indexOf(".")!=-1&&parseFloat(Ut)===1})(dt)&&(dt="100%");var jt=function(Ut){return typeof Ut=="string"&&Ut.indexOf("%")!=-1}(dt);return dt=B(Tt,X(0,parseFloat(dt))),jt&&(dt=parseInt(dt*Tt,10)/100),T.abs(dt-Tt)<1e-6?1:dt%Tt/parseFloat(Tt)}function fp(dt){return B(1,X(0,dt))}function ui(dt){return parseInt(dt,16)}function ka(dt){return dt.length==1?"0"+dt:""+dt}function Lc(dt){return dt<=1&&(dt=100*dt+"%"),dt}function Dm(dt){return ui(dt)/255}}(lt.default);var vl=function(a){var r=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return r||t.replace(/ /g,"")};const gc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ru(r,a),r.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},r.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,_.isUndefined)(e)||this.__onInputChange(e)},r.prototype.__onInputChange=function(t){var e=this.model,n=this.opts.onChange,i=t,l=this.getColorEl();if(l){l.spectrum("set",i);var f=l.spectrum("get"),d=i&&vl(f);d&&(i=d)}n?n(i):e.set({value:i},{fromInput:1})},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n=this.model,i=(0,_.isUndefined)(e.def)?n.get("defaults"):e.def,l=(0,_.isUndefined)(t)?(0,_.isUndefined)(i)?"":i:t,f=this.getInputEl(),d=this.getColorEl(),v=l!="none"?l:"";f.value=l,d.get(0).style.backgroundColor=v,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(d.spectrum("set",v),this.noneColor=l=="none",this.movedColor=v)},r.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,n=e.em,i=e.model,l=e.opts,f=this.ppfx,d=l.onChange,v=(0,lt.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),g=v.get(0).style,w=n&&n.config?n.config.el:"",T=n&&n.getConfig&&n.getConfig().colorPicker||{};this.movedColor="";var V,B=!1;this.$el.find("[data-colorp-c]").append(v);var X=function(ot,tt){tt===void 0&&(tt=!0),d?d(ot,!tt):(tt&&i.setValueFromInput(0,!1),i.setValueFromInput(ot,tt))};v.spectrum(ba(ba(ba({color:i.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color"),appendTo:w||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},T),i.get("colorPicker")||{}),{move:function(ot){var tt=vl(ot);t.movedColor=tt,g.backgroundColor=tt,X(tt,!1)},change:function(ot){B=!0;var tt=vl(ot);g.backgroundColor=tt,X(tt),t.noneColor=!1},show:function(ot){B=!1,t.movedColor="",V=d?i.getValue({noDefault:!0}):vl(ot)},hide:function(){B||!V&&!d||(t.noneColor&&(V=""),g.backgroundColor=V,v.spectrum("set",V),X(V,!1))}})),n&&n.on&&this.listenTo(n,"component:selected",function(){t.movedColor&&X(t.movedColor),B=!0,t.movedColor="",v.spectrum("hide")}),this.colorEl=v}return this.colorEl},r.prototype.render=function(){return gl.prototype.render.call(this),this.getColorEl(),this},r}(gl);var vc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const zu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return vc(r,a),r.prototype.templateInput=function(){return""},r.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),n=new gc({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();n.setValue(e,{fromTarget:1}),this.input=n.el}return this.input},r}(zo);var ef=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ef(r,a),r.prototype.templateInput=function(){return""},r.prototype.onChange=function(){this.handleClick()},r.prototype.handleClick=function(){var t=this.model,e=this.em,n=t.get("command");n&&((0,_.isString)(n)?e.Commands.run(n):n(e.Editor,t))},r.prototype.renderLabel=function(){this.model.get("label")&&zo.prototype.renderLabel.apply(this)},r.prototype.getInputEl=function(){var t=this.model,e=this.ppfx,n=t.props(),i=n.labelButton,l=n.text,f=n.full,d=i||l,v="".concat(e,"btn");return'<button type="button" class="'.concat(v,"-prim").concat(f?" ".concat(v,"--full"):"",'">').concat(d,"</button>")},r}(zo);const xs=mc;mc.prototype.eventCapture=["click button"];var Bu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ss=function(){return Ss=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ss.apply(this,arguments)},Uu="trait",nf="".concat(Uu,":"),rf="".concat(nf,"custom"),Sn={text:zo,number:tf,select:Iu,checkbox:ya,color:zu,button:xs},of=function(a){function r(t){var e=a.call(this,t,"TraitManager",Jp)||this;e.TraitsView=Du,e.events={all:Uu,custom:rf};var n=e.config,i=new S.Hn;e.model=i;var l=n.pStylePrefix;e.types=Ss({},Sn),l&&(n.stylePrefix="".concat(l).concat(n.stylePrefix));var f=(0,_.debounce)(function(){return e.__upSel()},0);i.listenTo(t,"component:toggled",f);var d=(0,_.debounce)(function(){return e.__onUp()},0);return i.listenTo(t,"trait:update",d),e}return Bu(r,a),r.prototype.__upSel=function(){this.select(this.em.getSelected())},r.prototype.__onUp=function(){this.select(this.getSelected())},r.prototype.select=function(t){var e=t?t.getTraits():[];this.model.set({component:t,traits:e}),this.__trgCustom()},r.prototype.getSelected=function(){return this.model.get("component")||null},r.prototype.getCurrent=function(){return this.model.get("traits")||[]},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.getTraitsViewer=function(){return this.view},r.prototype.addType=function(t,e){var n=this.getType("text");this.types[t]=n.extend(e)},r.prototype.getType=function(t){return this.getTypes()[t]},r.prototype.getTypes=function(){return this.types},r.prototype.render=function(){var t=this.view,e=this.em,n=this.getConfig(),i=t&&t.el;return t=new Du({el:i,collection:[],editor:e,config:n},this.getTypes()),this.view=t,t.el},r.prototype.destroy=function(){this.model.stopListening(),this.model.clear()},r}(Mt);const yc=of,wa={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};var vo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ml=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var n=t.config||{};e.config=n,e.parentView=t.parentView;var i=n.stylePrefix||"",l=n.pStylePrefix||"",f=e.collection;e.listenTo(f,"add",e.addTo),e.listenTo(f,"reset resetNavigator",e.render),e.listenTo(f,"remove",e.removeChildren),e.className="".concat(i,"layers");var d=n.em;if(n.sortable&&!e.opt.sorter){var v=d.Utils;e.opt.sorter=new v.Sorter({container:n.sortContainer||e.el,containerSel:".".concat(e.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,onEndMove:function(g,w,T){var V=w.getSourceModel();d.setSelected(V,{forceChange:1}),d.trigger("".concat(br,":end"),T)},avoidSelectOnEnd:1,nested:1,ppfx:l,pfx:i})}return e.$el.data("collection",f),t.parent&&e.$el.data("model",t.parent),e}return vo(r,a),r.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var i=this,l=i.parentView,f=i.opt,d=i.config,v=f.ItemView,g=f.opened,w=f.module,T=e||null,V=new v({ItemView:v,level:f.level,model:t,parentView:l,config:d,sorter:f.sorter,opened:g,module:w}),B=V.render().el;if(T)T.appendChild(B);else if(n!==void 0){var X="before";this.$el.children().length==n&&(n--,X="after"),n<0?this.$el.append(B):this.$el.children().eq(n)[X](B)}else this.$el.append(B);return this.items.push(V),B},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S.G7.prototype.remove.apply(this,t),this.items.map(function(n){return n.remove()}),this},r.prototype.render=function(){var t=this,e=document.createDocumentFragment(),n=this.el;return n.innerHTML="",this.collection.each(function(i){return t.addToCollection(i,e)}),n.appendChild(e),n.className=this.className,this},r}(S.G7);const bc=ml;var Wu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wc="contentEditable",$u=function(a){function r(t){var e=a.call(this,t)||this;(0,_.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var n=e,i=n.model,l=n.pfx,f=n.ppfx,d=i.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(d," no-select ").concat(f,"two-color"),e.inputNameCls="".concat(f,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return Wu(r,a),r.prototype.events=function(){return{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-open]":"toggleOpening","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","mouseout [data-toggle-select]":"handleHoverOut","dblclick [data-name]":"handleEdit","keydown [data-name]":"handleEditKey","focusout [data-name]":"handleEditEnd"}},r.prototype.template=function(t){var e=this,n=e.pfx,i=e.ppfx,l=e.config,f=e.clsNoEdit,d=e.module,v=e.opt,g=e.em,w=l.hidable,T=d.getComponents(t).length,V=T?"":this.clsNoChild,B="".concat(this.clsTitle," ").concat(V),X="".concat(this.clsTitleC," ").concat(i,"one-bg"),ot="".concat(this.inputNameCls," ").concat(f," ").concat(i,"no-app"),tt=v.level+1,At="".concat(30+10*tt,"px"),Ft=t.getName(),de=t.getIcon(),_e="".concat(n,"layer"),Ne=(g==null?void 0:g.getConfig()).icons,We=Ne.move,on=Ne.eye,On=Ne.eyeOff,Dr=Ne.chevron;return`
      `.concat(w?'<i class="'.concat(n,`layer-vis" data-toggle-visible>
            <i class="`).concat(n,'layer-vis-on">').concat(on,`</i>
            <i class="`).concat(n,'layer-vis-off">').concat(On,`</i>
          </i>`):"",`
      <div class="`).concat(X,`">
        <div class="`).concat(B,'" style="padding-left: ').concat(At,`" data-toggle-select>
          <div class="`).concat(n,'layer-title-inn" title="').concat(Ft,`">
            <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(Dr,`</i>
            `).concat(de?'<span class="'.concat(_e,'__icon">').concat(de,"</span>"):"",`
            <span class="`).concat(ot,'" data-name>').concat(Ft,`</span>
          </div>
        </div>
      </div>
      <div class="`).concat(this.clsCount,'" data-count>').concat(T||"",`</div>
      <div class="`).concat(this.clsMove,'" data-toggle-move>').concat(We||"",`</div>
      <div class="`).concat(this.clsChildren,'"></div>')},Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),r.prototype.initComponent=function(){var t=this,e=this.model,n=this.config.onInit,i=e.components();this.listenTo(i,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(l){return t.listenTo(e,l[0],l[1])}),this.$el.data("model",e),this.$el.data("collection",i),e.viewLayer=this,n.bind(this)({component:e,render:this.__render,listenTo:this.listenTo})},r.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},r.prototype.getVisibilityEl=function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},r.prototype.updateVisibility=function(){var t=this,e=t.pfx,n=t.model,i=t.module,l="".concat(e,"layer-hidden"),f=i.isVisible(n)?"removeClass":"addClass";this.$el[f](l),this.getVisibilityEl()[f]("".concat(e,"layer-off"))},r.prototype.toggleVisibility=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setVisible(n,!e.isVisible(n))},r.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,n=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName();d[wc]="true",d.focus(),document.execCommand("selectAll",!1),n.setEditing(!0),i.find(".".concat(this.inputNameCls)).removeClass(l).addClass(f)},r.prototype.handleEditKey=function(t){t.stopPropagation(),((0,D.isEscKey)(t)||(0,D.isEnterKey)(t))&&this.handleEditEnd(t)},r.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,n=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName(),v=d.textContent;d.scrollLeft=0,d[wc]="false",this.setName(v,{component:this.model,propName:"custom-name"}),n.setEditing(!1),i.find(".".concat(this.inputNameCls)).addClass(l).removeClass(f),this.updateName()},r.prototype.setName=function(t,e){var n=e.propName;this.model.set(n,t)},r.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},r.prototype.updateOpening=function(){var t=this,e=t.$el,n=t.model,i=t.pfx,l="open",f="".concat(i,"layer-open"),d=this.getCaret();this.module.isOpen(n)?(e.addClass(l),d.addClass(f)):(e.removeClass(l),d.removeClass(f))},r.prototype.toggleOpening=function(t){var e=this.model,n=this.module;t==null||t.stopImmediatePropagation(),e.get("components").length&&n.setOpen(e,!n.isOpen(e))},r.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{selected:!0},{event:t})},r.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!0})},r.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!1})},r.prototype.startSort=function(t){t.stopPropagation();var e=this.em,n=this.sorter;t.button&&t.button!==0||n&&(n.onStart=function(i){return e.trigger("".concat(br,":start"),i)},n.onMoveClb=function(i){return e.trigger(br,i)},n.startSort(t.target))},r.prototype.updateStatus=function(){Ln.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},r.prototype.checkChildren=function(){var t=this,e=t.model,n=t.clsNoChild,i=t.$el,l=t.module,f=l.getComponents(e).length,d=i.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),v=this.cnt;v||(v=i.children("[data-count]").get(0),this.cnt=v),d[f?"removeClass":"addClass"](n),v&&(v.innerHTML=f||""),!f&&l.setOpen(e,!1)},r.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},r.prototype.setRoot=function(t){t=(0,_.isString)(t)?this.em.getWrapper().find(t)[0]:t;var e=(0,D.getModel)(t,0);e&&(this.stopListening(),this.model=e,this.initComponent(),this._rendered&&this.render())},r.prototype.updateLayerable=function(){(this.parentView||this).render()},r.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S.G7.prototype.remove.apply(this,t),this.__clearItems(),this},r.prototype.render=function(){var t=this,e=t.model,n=t.config,i=t.pfx,l=t.ppfx,f=t.opt,d=t.sorter;this.__clearItems();var v=f.opened,g=f.module,w=f.ItemView,T=!g.__isLayerable(e),V=this.$el.empty(),B=f.level+1;delete this.inputName,this.items=new bc({ItemView:w,collection:e.get("components"),config:n,sorter:d,opened:v,parentView:this,parent:e,level:B,module:g});var X=this.items.render().$el;return n.showWrapper||B!==1?(V.html(this.template(e)),V.find(".".concat(this.clsChildren)).append(X)):V.append(X),e.get("draggable")&&n.sortable||V.children(".".concat(this.clsMove)).remove(),!g.isVisible(e)&&(this.className+=" ".concat(i,"hide")),T&&(this.className+=" ".concat(l,"hidden")),V.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},r.prototype.__render=function(){var t=this,e=t.model,n=t.config,i={component:e,el:t.el};n.onRender.bind(this)(i),this.em.trigger("layer:render",i)},r}(S.G7);const qu=$u;var Gu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_c=function(){return _c=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_c.apply(this,arguments)},yl="layer",bl="".concat(yl,":"),un="".concat(bl,"root"),Cc="".concat(bl,"component"),sf="".concat(bl,"custom"),Os={all:yl,root:un,component:Cc,custom:sf},xc={mediaText:""},wl=["open","status","locked","custom-name","components","classes"].map(function(a){return"component:update:".concat(a)}).join(" "),af=function(a){function r(t){var e=a.call(this,t,"LayerManager",wa)||this;return e.events=Os,(0,_.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new pt(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return Gu(r,a),r.prototype.onLoad=function(){var t=this,e=this,n=e.em,i=e.config,l=e.model;l.listenTo(n,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(n,wl,this.__onComponent),this.componentChanged(),l.listenToOnce(n,"load",function(){t.setRoot(i.root),t.__appendTo()})},r.prototype.setRoot=function(t){var e=this.em.getWrapper(),n=(0,D.isComponent)(t)?t:e;return t&&(0,_.isString)(t)&&(0,D.hasWin)()&&(n=e.find(t)[0]||e),this.model.set("root",n),n},r.prototype.getRoot=function(){return this.model.get("root")},r.prototype.getComponents=function(t){var e=this;return t.components().filter(function(n){return e.__isLayerable(n)})},r.prototype.setOpen=function(t,e){t.set("open",e)},r.prototype.isOpen=function(t){return!!t.get("open")},r.prototype.setVisible=function(t,e){var n="__prev-display",i=t.getStyle(xc),l=i.display;if(e){var f=t.get(n);delete i.display,f&&(i.display=f,t.unset(n))}else l&&t.set(n,l),i.display="none";t.setStyle(i,xc),this.updateLayer(t),this.em.trigger("component:toggled")},r.prototype.isVisible=function(t){return(e=t.getStyle(xc))===void 0&&(e={}),(e.display||"").trim().indexOf("none")!==0;var e},r.prototype.setLocked=function(t,e){t.set("locked",e)},r.prototype.isLocked=function(t){return t.get("locked")},r.prototype.setName=function(t,e){t.set("custom-name",e)},r.prototype.getName=function(t){return t.getName()},r.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},r.prototype.setLayerData=function(t,e,n){var i;n===void 0&&(n={});var l=this.em,f=this.config,d=e.open,v=e.selected,g=e.hovered,w=e.visible,T=e.locked,V=e.name,B=_c({fromLayers:!0},n);if((0,D.isDef)(d)&&this.setOpen(t,d),(0,D.isDef)(v))if(v){l.setSelected(t,B);var X=f.scrollCanvas;X&&((i=t.views)===null||i===void 0||i.forEach(function(ot){return ot.scrollIntoView(X)}))}else l.removeSelected(t,B);(0,D.isDef)(g)&&f.showHover&&(g?l.setHovered(t,B):l.setHovered(null,B)),(0,D.isDef)(w)&&w!==this.isVisible(t)&&this.setVisible(t,w),(0,D.isDef)(T)&&this.setLocked(t,T),(0,D.isDef)(V)&&this.setName(t,V)},r.prototype.componentChanged=function(t,e){var n;if(e===void 0&&(e={}),!e.fromLayers){var i=this.em,l=this.config.scrollLayers,f=this.model.get("opened"),d=i.getSelected(),v=d==null?void 0:d.parent();for(var g in f)f[g].set("open",!1),delete f[g];for(;v;)v.set("open",!0),f[v.cid]=v,v=v.parent();if(d&&l){var w=(n=d.viewLayer)===null||n===void 0?void 0:n.el;w==null||w.scrollIntoView(l)}}},r.prototype.getAll=function(){return this.view},r.prototype.render=function(){var t,e,n=this.config,i=this.model,l=qu.extend(n.extend);return this.view=new l({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:l,level:0,config:n,opened:i.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},r.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},r.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(un,e)},r.prototype.__onComponent=function(t){this.updateLayer(t)},r.prototype.__isLayerable=function(t){var e=t.get("tagName");return(!this.config.hideTextnode||!t.is("textnode")&&e!=="br")&&t.get("layerable")},r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,{container:t.container,root:this.getRoot()})},r.prototype.updateLayer=function(t,e){this.em.trigger(Cc,t,e)},r}(Mt);const Dn=af,lf={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};var cf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ku=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return cf(r,a),r.getDefaults=function(){return(0,_.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{type:"",src:""}},r.prototype.getType=function(){return this.get("type")},r.prototype.getSrc=function(){return this.get("src")},r.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},r.prototype.getExtension=function(){return this.getFilename().split(".").pop()},r}(S.Hn);const Ts=Ku;Ku.prototype.idAttribute="src";var o=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),s=function(){return s=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},s.apply(this,arguments)};const u=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return o(r,a),r.prototype.defaults=function(){return s(s({},Ts.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},r}(Ts);var c=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),p=function(a){function r(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var n=t.config||{};e.config=n,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var i=e.init&&e.init.bind(e);return i&&i(t),e}return c(r,a),r.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},r.prototype.template=function(t,e){var n=this.pfx;return`
      <div class="`.concat(n,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(n,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(n,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},r.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,_.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},r.prototype.getPreview=function(){return""},r.prototype.getInfo=function(){return""},r.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},r}(S.G7);const h=p;var m=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),b=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},x=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return m(r,a),r.prototype.getPreview=function(){var t=this,e=t.pfx,n=t.ppfx,i=t.model.get("src");return et($||($=b([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,i,e,n)},r.prototype.getInfo=function(){var t=this.pfx,e=this.model,n=e.get("name"),i=e.get("width"),l=e.get("height"),f=e.get("unitDim"),d=i&&l?"".concat(i,"x").concat(l).concat(f):"";return n=n||e.getFilename(),et(K||(K=b([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),t,n,t,d)},r.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},r.prototype.onClick=function(){var t=this.model,e=this.pfx,n=this.__getBhv().select,i=this.config.onClick,l=this.collection;l.trigger("deselectAll"),this.$el.addClass(e+"highlight"),(0,_.isFunction)(n)?n(t,!1):(0,_.isFunction)(i)?i(t):this.updateTarget(l.target)},r.prototype.onDblClick=function(){var t=this.em,e=this.model,n=this.__getBhv().select,i=this.config.onDblClick,l=this.collection,f=l.target,d=l.onSelect;(0,_.isFunction)(n)?n(e,!0):(0,_.isFunction)(i)?i(e):(this.updateTarget(f),t==null||t.Modal.close()),(0,_.isFunction)(d)&&d(e)},r.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},r}(h);const k=x;var $,K;x.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var vt=function(){return vt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},vt.apply(this,arguments)},mt={types:[],initialize:function(a,r){var t=this;r===void 0&&(r={});var e=r.em;this.em=e,this.opts=r,this.model=function(i,l){var f,d,v;if(i===void 0&&(i={}),l===void 0&&(l={}),i&&i.type){var g=t.getBaseType();f=(v=t.getType(i.type))?v.model:g.model,d=v?v.view:g.view}else{var w=t.recognizeType(i);f=(v=w.type).model,d=v.view,i=w.attributes}var T=new f(i,vt(vt({},l),{em:e}));return T.typeView=d,T};var n=this.init&&this.init.bind(this);n&&n()},recognizeType:function(a){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t],n=e.isType(a);if(n=typeof n=="boolean"&&n?{type:e.id}:n)return{type:e,attributes:n}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t];if(e.id===a)return e}},addType:function(a,r){var t=this.getType(a),e=this.getBaseType(),n=t?t.model:e.model,i=t?t.view:e.view,l=r.model,f=r.view,d=r.isType;l=l instanceof S.Hn||(0,_.isFunction)(l)?l:n.extend(l||{}),f=f instanceof S.G7||(0,_.isFunction)(f)?f:i.extend(f||{}),!this.extendViewApi||r.model||r.view||(f=f.extend(r)),t?(t.model=l,t.view=f,t.isType=d||t.isType):(r.id=a,r.model=l,r.view=f,r.isType=d||function(v){if(v&&v.type==a)return!0},this.getTypes().unshift(r))}};const Ot=mt;var zt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return zt(r,a),r}(S.FE.extend(Ot));const se=Kt;Kt.prototype.types=[{id:"image",model:u,view:k,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var fe=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),re=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var n=e.collection;return e.listenTo(n,"reset",e.renderAssets),e.listenTo(n,"add",e.addToAsset),e.listenTo(n,"remove",e.removedAsset),e.listenTo(n,"deselectAll",e.deselectAll),e}return fe(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,i=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(n,"field ").concat(e,`add-field">
              <input placeholder="`).concat(i==null?void 0:i.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(n,'btn-prim">').concat(i==null?void 0:i.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},r.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim(),i=this.config.handleAdd;if(n){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),i?i.bind(this)(n):this.options.globalCollection.add(n,{at:0})}},r.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},r.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},r.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},r.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},r.prototype.addAsset=function(t,e){e===void 0&&(e=null);var n=e,i=this.collection,l=this.config,f=new t.typeView({model:t,collection:i,config:l}).render().el;if(n)n.appendChild(f);else{var d=this.getAssetsEl();d&&d.insertBefore(f,d.firstChild)}return f},r.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},r.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},r.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(i){return t.addAsset(i,e)}),n.append(e)},r.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},r}(S.G7);const xe=re;re.prototype.events={submit:"handleSubmit"};var we=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ee=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},dn=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var n=t.config||{};e.module=t.module,e.config=n,e.em=e.config.em,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=n.disableUpload!==void 0?n.disableUpload:!n.upload&&!n.embedAsBase64,e.multiUpload=n.multiUpload===void 0||n.multiUpload;var i=n.uploadFile;return i?e.uploadFile=i.bind(e):!n.upload&&n.embedAsBase64&&(e.uploadFile=r.embedAsBase64),e.delegateEvents(),e}return we(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.title,i=t.uploadId,l=t.disabled,f=t.multiUpload;return et(wr||(wr=Ee([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,n,i,l?"disabled":"",f?"multiple":"")},r.prototype.events=function(){return{"change [data-input]":"uploadFile"}},r.prototype.onUploadStart=function(){var t=this.module;t&&t.__propEv("asset:upload:start")},r.prototype.onUploadEnd=function(t){var e=this.$el,n=this.module;n&&n.__propEv("asset:upload:end",t);var i=e.find("input");i&&i.val("")},r.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv("asset:upload:error",t)},r.prototype.onUploadResponse=function(t,e){var n,i=this,l=i.module,f=i.config,d=i.target;try{n=typeof t=="string"?JSON.parse(t):t}catch{n=t}l&&l.__propEv("asset:upload:response",n),f.autoAdd&&d&&d.add(n.data,{at:0}),this.onUploadEnd(t),e==null||e(n)},r.prototype.uploadFile=function(t,e){var n=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,f=l.beforeUpload;if((f&&f(i))!==!1){var d=new FormData,v=l.params,g=l.customFetch;for(var w in v)d.append(w,v[w]);if(this.multiUpload)for(var T=0;T<i.length;T++)d.append("".concat(l.uploadName,"[]"),i[T]);else i.length&&d.append(l.uploadName,i[0]);this.target;var V=l.upload,B=l.headers,X="X-Requested-With";if(B[X]===void 0&&(B[X]="XMLHttpRequest"),V){this.onUploadStart();var ot={method:"post",credentials:l.credentials||"include",headers:B,body:d};return(g?g(V,ot):Eu(V,ot).then(function(tt){return(tt.status/200|0)==1?tt.text():tt.text().then(function(At){return Promise.reject(At)})})).then(function(tt){return n.onUploadResponse(tt,e)}).catch(function(tt){return n.onUploadError(tt)})}}},r.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(n){e.className="",n.preventDefault(),t.uploadFile(n)})}},r.prototype.initDropzone=function(t){var e=this,n=0,i=this.config,l=t.model,f=t.el,d=l.Editor,v=l.Canvas.getBody(),g=this.ppfx,w="".concat(g,"dropzone-active"),T="".concat(g,"dropzone"),V=function(){f.className=f.className.replace(w,"").trim(),n=0},B=function(){return n||(f.className+=" ".concat(w),n=1),!1},X=function(){return V(),!1},ot=function(tt){if(V(),tt.preventDefault(),tt.stopPropagation(),e.uploadFile(tt),i.openAssetsOnDrop&&d){var At=d.getSelected();d.runCommand("open-assets",{target:At,onSelect:function(){d.Modal.close(),d.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(T,'">').concat(i.dropzoneContent,"</div>")),V(),"draggable"in f&&[f,v].forEach(function(tt){tt.ondragover=B,tt.ondragleave=X,tt.ondrop=ot})},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,i=t.em;return e.html(this.template({title:i&&i.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:n})),this.initDrop(),e.attr("class",n+"file-uploader"),this},r.embedAsBase64=function(t,e){var n=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(FileReader){for(var f=[],d=/^(.+)\/(.+)$/,v=function(T){var V=new Promise(function(B,X){var ot=new FileReader;ot.addEventListener("load",function(tt){var At,Ft=T.name,de=d.exec(T.type);if((At=de?de[1]:T.type)==="image"){var _e={src:ot.result,name:Ft,type:At,height:0,width:0},Ne=new Image;Ne.addEventListener("error",function(We){X(We)}),Ne.addEventListener("load",function(){_e.height=Ne.height,_e.width=Ne.width,B(_e)}),Ne.src=_e.src}else B(At?{src:ot.result,name:Ft,type:At}:ot.result)}),ot.addEventListener("error",function(tt){X(tt)}),ot.addEventListener("abort",function(tt){X("Aborted")}),ot.readAsDataURL(T)});f.push(V)},g=0,w=i;g<w.length;g++)v(w[g]);return Promise.all(f).then(function(T){l.data=T,n.onUploadResponse(l,e)},function(T){n.onUploadError(T)})}this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))},r}(S.G7);const hn=dn;var wr,wn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pr=function(){return pr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},pr.apply(this,arguments)},_r=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},kn="asset",Nn="".concat(kn,":"),yr="".concat(Nn,"select"),Wn="".concat(Nn,"update"),In="".concat(Nn,"add"),Vn="".concat(Nn,"remove"),Cr="".concat(Vn,":before"),ai="".concat(Nn,"custom"),mo="".concat(Nn,"open"),fr="".concat(Nn,"close"),En="".concat(Nn,"upload"),Sc="".concat(En,":start"),Bo="".concat(En,":end"),Vi="".concat(En,":error"),Fi="".concat(En,":response"),qn="open-assets",ks={all:kn,select:yr,update:Wn,add:In,remove:Vn,removeBefore:Cr,custom:ai,open:mo,close:fr,uploadStart:Sc,uploadEnd:Bo,uploadError:Vi,uploadResponse:Fi},Oc=function(a){function r(t){var e=a.call(this,t,"AssetManager",new se([],t),ks,lf)||this;e.storageKey="assets",e.Asset=Ts,e.Assets=se;var n=e,i=n.all,l=n.config;e.assetsVis=new se([]);var f=l.pStylePrefix;return f&&(l.stylePrefix="".concat(f).concat(l.stylePrefix)),i.on("add",function(d){return e.getAllVisible().add(d)}),i.on("remove",function(d){return e.getAllVisible().remove(d)}),e.__onAllEvent=(0,_.debounce)(function(){return e.__trgCustom()},0),e}return wn(r,a),r.prototype.__propEv=function(t){for(var e,n,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];(e=this.em).trigger.apply(e,_r([t],i,!1)),(n=this.getAll()).trigger.apply(n,_r([t],i,!1))},r.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;(t.container||e.open)&&this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(n,i){return t.remove(n,i)},select:function(n,i){var l=t.add(n);(0,_.isFunction)(e.select)&&e.select(l,i)},options:e.options||{}}},r.prototype.open=function(t){t===void 0&&(t={}),this.em.Commands.run(qn,pr({types:["image"],select:function(){}},t))},r.prototype.close=function(){this.em.Commands.stop(qn)},r.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(qn))},r.prototype.add=function(t,e){return e===void 0&&(e={}),e.at===void 0&&(e.at=0),this.all.add(t,e)},r.prototype.get=function(t){return this.all.where({src:t})[0]||null},r.prototype.getAll=function(){return this.all},r.prototype.getAllVisible=function(){return this.assetsVis},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t)},r.prototype.getContainer=function(){var t;return this.__getBehaviour().container||((t=this.am)===null||t===void 0?void 0:t.el)},r.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},r.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var n=this.__viewParams();n.fu=this.FileUploader(),this.am=new xe(pr({},n)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},r.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},r.prototype.addType=function(t,e){this.getAll().addType(t,e)},r.prototype.getType=function(t){return this.getAll().getType(t)},r.prototype.getTypes=function(){return this.getAll().getTypes()},r.prototype.AssetsView=function(){return this.am},r.prototype.FileUploader=function(){return this.fu||(this.fu=new hn(this.__viewParams())),this.fu},r.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this.em,n=this.events;e.on("run:".concat(qn),function(){return t.__propEv(n.open)}),e.on("stop:".concat(qn),function(){return t.__propEv(n.close)})},r.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},r.prototype.setTarget=function(t){this.assetsVis.target=t},r.prototype.onSelect=function(t){this.assetsVis.onSelect=t},r.prototype.onClick=function(t){this.config.onClick=t},r.prototype.onDblClick=function(t){this.config.onDblClick=t},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=pr(pr({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(t){return this._bhv||{}},r.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},r}(Nt);const lh=Oc;var uf={placeholder:"eg. Text here"};const ch={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:uf,alt:uf,title:uf,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};var uh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ph=function(a){function r(t){var e=a.call(this,t,"I18n",ch)||this,n=e.config.messagesAdd;return n&&e.addMessages(n),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return uh(r,a),r.prototype.setLocale=function(t){var e=this.em,n=this.config,i={value:t,valuePrev:n.locale};return e&&e.trigger("i18n:locale",i),n.locale=t,this},r.prototype.getLocale=function(){return this.config.locale},r.prototype.getMessages=function(t,e){e===void 0&&(e={});var n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},r.prototype.setMessages=function(t){var e=this.em;return this.config.messages=t,e&&e.trigger("i18n:update",t),this},r.prototype.addMessages=function(t){var e=this.em,n=this.config.messages;return e&&e.trigger("i18n:add",t),this.setMessages((0,D.deepMerge)(n,t)),this},r.prototype.t=function(t,e){e===void 0&&(e={});var n=this.config,i=e.params||{},l=e.l||this.getLocale(),f=e.lFlb||n.localeFallback,d=this._getMsg(t,l,e);return d||(d=this._getMsg(t,f,e)),!d&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),d=d&&(0,_.isString)(d)?this._addParams(d,i):d},r.prototype._localLang=function(){var t=(0,D.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},r.prototype._addParams=function(t,e){var n=new RegExp("{([\\w\\d-]*)}","g");return t.replace(n,function(i,l){return e[l]||""}).trim()},r.prototype._getMsg=function(t,e,n){n===void 0&&(n={});var i=this.getMessages(e,n);if(i){var l=i[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(f,d){if(!(0,_.isUndefined)(f))return f[d]},i)),l}},r.prototype._debug=function(t,e){e===void 0&&(e={});var n=this.em,i=this.config;(e.debug||i.debug)&&n&&n.logWarning(t)},r.prototype.destroy=function(){},r}(Mt);const fh=ph;var dh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Es=function(){return Es=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Es.apply(this,arguments)},hh=function(){},gh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return dh(r,a),r.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,_.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var n=e.container;this.el=typeof n=="string"?document.querySelector(n):n,this.$el=(0,lt.default)(this.el),this.containerSel=e.containerSel||"div",this.itemSel=e.itemSel||"div",this.draggable=e.draggable||!0,this.nested=!!e.nested,this.pfx=e.pfx||"",this.ppfx=e.ppfx||"",this.freezeClass=e.freezeClass||this.pfx+"freezed",this.onStart=e.onStart||hh,this.onEndMove=e.onEndMove,this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||"v",this.onMoveClb=e.onMove,this.relative=e.relative||!1,this.ignoreViewChildren=!!e.ignoreViewChildren,this.plh=e.placer,this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.em=e.em,this.canvasRelative=!!e.canvasRelative,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},r.prototype.getScale=function(){return(0,_.result)(this,"scale")||1},r.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el=typeof e=="string"?document.querySelector(e):e,this.$el=(0,lt.default)(this.el)}return this.el},r.prototype.getDocuments=function(t){var e=this.em,n=t?t.ownerDocument:e==null?void 0:e.Canvas.getBody().ownerDocument,i=[document];return n&&i.push(n),i},r.prototype.updateOffset=function(){var t,e=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=e.top,this.offLeft=e.left},r.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},r.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var n=e.get("Canvas"),i=n.getDocument(),l=null;if(i.caretRangeFromPoint){var f=(0,D.getPointerEvent)(t);l=i.caretRangeFromPoint(f.clientX,f.clientY)}else t.rangeParent&&(l=i.createRange()).setStart(t.rangeParent,t.rangeOffset);var d=n.getWindow().getSelection();n.getFrameEl().focus(),d.removeAllRanges(),l&&d.addRange(l),this.setContentEditable(this.activeTextModel,!0)}},r.prototype.setContentEditable=function(t,e){if(t){var n=t.getEl();n.contentEditable!=e&&(n.contentEditable=e)}},r.prototype.toggleSortCursor=function(t){var e=this.em,n=e&&e.get("Canvas");n&&(t?n.startAutoscroll():n.stopAutoscroll())},r.prototype.setDragHelper=function(t,e){for(var n=e||"",i=t.cloneNode(!0),l=t.getBoundingClientRect(),f=getComputedStyle(t),d="",v=0;v<f.length;v++){var g=f[v];d+="".concat(g,":").concat(f.getPropertyValue(g),";")}document.body.appendChild(i),i.className+=" ".concat(this.pfx,"bdrag"),i.setAttribute("style",d),this.dragHelper=i,i.style.width="".concat(l.width,"px"),i.style.height="".concat(l.height,"px"),n&&this.moveDragHelper(n),this.em&&(0,lt.default)(this.em.Canvas.getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper),(0,lt.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},r.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(this.dragHelper&&e){var n=t.pageY,i=t.pageX,l=0,f=0,d=(e.defaultView||e.parentWindow).frameElement,v=this.dragHelper.style;if(d){var g=d.getBoundingClientRect();l=g.top+document.documentElement.scrollTop,f=g.left+document.documentElement.scrollLeft,n=t.clientY,i=t.clientX}v.top=n+l+"px",v.left=i+f+"px"}},r.prototype.matches=function(t,e){return D.matches.call(t,e)},r.prototype.closest=function(t,e){if(t)for(var n=t.parentNode;n&&n.nodeType===1;){if(this.matches(n,e))return n;n=n.parentNode}},r.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},r.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement("div"),n=document.createElement("div");return e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",n.className=t+"placeholder-int",e.appendChild(n),e},r.prototype.startSort=function(t,e){var n,i;e===void 0&&(e={});var l,f=this,d=f.em,v=f.itemSel,g=f.containerSel,w=f.plh,T=this.getContainerEl(e.container),V=this.getDocuments(t);delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(v,", ").concat(g))&&(t=this.closest(t,v)),this.sourceEl=t,w||(this.plh=this.createPlaceholder(),T.appendChild(this.plh)),t&&((l=this.getSourceModel(t))&&l.set&&l.set("status","freezed"),this.srcModel=l),(0,D.on)(T,"mousemove dragover",this.onMove),(0,D.on)(V,"mouseup dragend touchend",this.endMove),(0,D.on)(V,"keydown",this.rollback),this.onStart({sorter:this,target:l,parent:l&&((n=l.parent)===null||n===void 0?void 0:n.call(l)),index:l&&((i=l.index)===null||i===void 0?void 0:i.call(l))}),d==null||d.clearSelection(),this.toggleSortCursor(!0),d==null||d.trigger("sorter:drag:start",t,l)},r.prototype.getTargetModel=function(t){var e=t||this.target;return(0,lt.default)(e).data("model")},r.prototype.getSourceModel=function(t,e){var n=this,i=e===void 0?{}:e,l=i.target,f=i.avoidChildren,d=f===void 0?1:f,v=this.em,g=this.sourceEl,w=t||g,T=this.dropModel,V=this.dropContent,B=function(At){return At&&l&&At.opt&&At.opt.avoidChildren&&n.isTextableActive(At,l)};if(V&&v){if(B(T)&&(T=void 0),!T){var X=v.Components.getComponents(),ot={avoidChildren:d,avoidStore:1,avoidUpdateStyle:1},tt=X.add(V,Es(Es({},ot),{temporary:!0}));if(T=(T=X.remove(tt,ot))instanceof Array?T[0]:T,this.dropModel=T,B(T))return this.getSourceModel(w,{target:l,avoidChildren:0})}return T}return w&&(0,lt.default)(w).data("model")},r.prototype.selectTargetModel=function(t,e){if(!(t instanceof S.FE||e&&e===t)){var n=this.targetModel;n&&n!==this.srcModel&&n.set("status",""),t&&t.set&&(t.set("status","selected-parent"),this.targetModel=t)}},r.prototype.onMove=function(t){var e=t,n=this,i=n.em,l=n.onMoveClb,f=n.plh,d=n.customTarget;this.moved=!0;var v=f.style.display;v&&v!=="none"||(f.style.display="block");var g=this.offset(this.el);this.elT=this.wmargin?Math.abs(g.top):g.top,this.elL=this.wmargin?Math.abs(g.left):g.left;var w=t.pageY-this.elT+this.el.scrollTop,T=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var V=i.get("Canvas").getMouseRelativeCanvas(t,{noScroll:1});T=V.x,w=V.y}this.rX=T,this.rY=w,this.eventMove=t;var B=this.getSourceModel(),X=d?d({sorter:this,event:t}):t.target,ot=this.dimsFromTarget(X,T,w),tt=this.target,At=tt&&this.getTargetModel(tt);if(this.selectTargetModel(At,B),At||(f.style.display="none"),tt){this.lastDims=ot;var Ft=this.findPosition(ot,T,w);this.isTextableActive(B,At)?(this.activeTextModel=At,f.style.display="none",this.lastPos=Ft,this.updateTextViewCursorPosition(e)):(this.disableTextable(),delete this.activeTextModel,this.lastPos&&this.lastPos.index==Ft.index&&this.lastPos.method==Ft.method||(this.movePlaceholder(this.plh,ot,Ft,this.prevTargetDim),this.$plh||(this.$plh=(0,lt.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=Ft)),(0,_.isFunction)(l)&&l({event:t,target:B,parent:At,index:Ft.index+(Ft.method=="after"?1:0)}),i&&i.trigger("sorter:drag",{target:tt,targetModel:At,sourceModel:B,dims:ot,pos:Ft,x:T,y:w})}},r.prototype.isTextableActive=function(t,e){var n;return((n=t==null?void 0:t.get)===null||n===void 0?void 0:n.call(t,"textable"))&&(e==null?void 0:e.isInstanceOf("text"))},r.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},r.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var n=t;return n.offsetHeight,!!this.styleInFlow(n,e)},r.prototype.styleInFlow=function(t,e){if(!(0,D.isTextNode)(t)){var n=t.style||{},i=(0,lt.default)(t),l=e&&(0,lt.default)(e);if(!n.overflow||n.overflow==="visible"){var f=i.css("float");if(!(f&&f!=="none"||l&&l.css("display")=="flex"&&l.css("flex-direction")!=="column")){switch(n.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(i.css("display")){case"block":case"list-item":case"table":case"flex":return!0}}}}},r.prototype.validTarget=function(t,e){var n=this.getTargetModel(t),i=this.getSourceModel(e,{target:n}),l={valid:!0,src:e=i&&i.view&&i.view.el,srcModel:i,trg:t=n&&n.view&&n.view.el,trgModel:n,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!e||!t)return l.valid=!1,l;var f=i.get("draggable");if((0,_.isFunction)(f)){var d=f(i,n);l.dragInfo=d,l.draggable=d,f=d}else f=f instanceof Array?f.join(", "):f,l.dragInfo=f,f=(0,_.isString)(f)?this.matches(t,f):f,l.draggable=f;var v=n.get("droppable");return(0,_.isFunction)(v)?(d=v(i,n),l.droppable=d,l.dropInfo=d,v=d):(v=(v=v instanceof S.FE?1:v)instanceof Array?v.join(", "):v,l.dropInfo=v,v=(0,_.isString)(v)?this.matches(e,v):v,v=f&&this.isTextableActive(i,n)?1:v,l.droppable=v),v&&f||(l.valid=!1),l},r.prototype.dimsFromTarget=function(t,e,n){var i=this.em,l=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return l;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var f=this.validTarget(t);if(i&&i.trigger("sorter:drag:validation",f),!f.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,n);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(l=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,n)||!this.nested&&!this.cacheDims.length){var d=this.targetP;d&&this.validTarget(d).valid&&(l=this.cacheDimsP,this.target=d)}return delete this.lastPos,l},r.prototype.getTargetFromEl=function(t){var e,n=t,i=this.targetPrev,l=this.em,f=this.containerSel,d=this.itemSel;if(this.matches(n,"".concat(d,", ").concat(f))||(n=this.closest(n,d)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(","))),i&&i!=n&&delete this.targetPrev,!this.targetPrev){e=this.closest(n,f);var v=this.validTarget(n);if(l&&l.trigger("sorter:drag:validation",v),!v.valid&&e)return this.getTargetFromEl(e);this.targetPrev=n}return this.nearElBorders(n)&&(e=this.closest(n,f))&&this.validTarget(e).valid&&(n=e),n},r.prototype.nearElBorders=function(t){var e=10,n=t.getBoundingClientRect(),i=t.ownerDocument.body,l=this.getCurrentPos(),f=l.x,d=l.y,v=n.top+i.scrollTop,g=n.left+i.scrollLeft,w=n.width,T=n.height;if(d<v+e||d>v+T-e||f<g+e||f>g+w-e)return 1},r.prototype.getCurrentPos=function(){var t=this.eventMove;return{x:(t==null?void 0:t.pageX)||0,y:(t==null?void 0:t.pageY)||0}},r.prototype.getDim=function(t){var e,n,i,l,f=this.em,d=this.canvasRelative,v=f==null?void 0:f.Canvas,g=v?v.getElementOffsets(t):{};if(d&&f){var w=v.getElementPos(t,{noScroll:1});e=w.top,n=w.left,i=w.height,l=w.width}else{var T=this.offset(t);e=this.relative?t.offsetTop:T.top-(this.wmargin?-1:1)*this.elT,n=this.relative?t.offsetLeft:T.left-(this.wmargin?-1:1)*this.elL,i=t.offsetHeight,l=t.offsetWidth}return{top:e,left:n,height:i,width:l,offsets:g}},r.prototype.getChildrenDim=function(t){var e=this,n=[];if(!t)return n;var i=this.getTargetModel(t);if(i&&i.view&&!this.ignoreViewChildren){var l=i.getCurrentView?i.getCurrentView():i.view;t=l.getChildrenContainer()}return(0,_.each)(t.children,function(f,d){var v=f,g=(0,D.getModel)(v,lt.default),w=g&&g.index?g.index():d;if((0,D.isTextNode)(v)||e.matches(v,e.itemSel)){var T,V=e.getDim(v),B=e.direction;T=B=="v"||B!="h"&&e.isInFlow(v,t),V.dir=T,V.el=v,V.indexEl=w,n.push(V)}}),n},r.prototype.nearBorders=function(t,e,n){var i=!1,l=this.borderOffset,f=e||0,d=n||0,v=t.top,g=t.left,w=t.height,T=t.width;return(v+l>d||d>v+w-l||g+l>f||f>g+T-l)&&(i=!0),i},r.prototype.findPosition=function(t,e,n){for(var i,l={index:0,indexEl:0,method:"before"},f=0,d=0,v=0,g=0,w=0,T=0,V=0,B=t.length;V<B;V++){var X=(i=t[V]).top,ot=i.left,tt=i.height,At=i.width;if(T=X+tt,g=ot+At/2,w=X+tt/2,!(d&&ot>d||v&&w>=v||f&&ot+At<f))if(l.index=V,l.indexEl=i.indexEl,i.dir){if(n<w){l.method="before";break}l.method="after"}else n<T&&(v=T),e<g?(d=g,l.method="before"):(f=g,l.method="after")}return l},r.prototype.movePlaceholder=function(t,e,n,i){var l=0,f=0,d=0,v="",g="",w="px",T=5,V=n.method,B=e[n.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),B){var X=B.top,ot=B.left,tt=B.height,At=B.width;B.dir?(v=At+w,g="auto",f=V=="before"?X-l:X+tt-l,d=ot):(v="auto",g=tt-2*l+w,f=X+l,d=V=="before"?ot-l:ot+At-l,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested)return void(t.style.display="none");if(i){var Ft=i.offsets||{},de=Ft.paddingTop||T,_e=Ft.paddingLeft||T;f=i.top+de,d=i.left+_e,v=parseInt("".concat(i.width))-2*_e+w,g="auto"}}t.style.top=f+w,t.style.left=d+w,v&&(t.style.width=v),g&&(t.style.height=g)},r.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},r.prototype.sort=function(t,e){var n=t.parents.filter(function(l){return e.parents.includes(l)})[0];if(!n)return e.model.index()-t.model.index();var i=t.parents[t.parents.indexOf(n)-1];return e.parents[e.parents.indexOf(n)-1].index()-i.index()},r.prototype.endMove=function(){var t,e=this,n=this.sourceEl,i=[],l=this.getDocuments(),f=this.getContainerEl(),d=this.onEndMove,v=this.onEnd,g=this.target,w=this.lastPos;if((0,D.off)(f,"mousemove dragover",this.onMove),(0,D.off)(l,"mouseup dragend touchend",this.endMove),(0,D.off)(l,"keydown",this.rollback),this.plh.style.display="none",n&&(t=this.getSourceModel(),this.selectOnEnd&&t&&t.set&&(t.set("status",""),t.set("status","selected"))),this.moved&&g){var T=this.toMove,V=(0,_.isArray)(T)?T:T?[T]:[n],B=0;V.length===1?i.push(this.move(g,V[0],w)):V.map(function(tt){return{model:tt,parents:e.parents(tt)}}).sort(this.sort).forEach(function(tt){var At=tt.model,Ft=At.index(),de=At.parent().getEl();i.push(e.move(g,At,Es(Es({},w),{indexEl:w.indexEl-B,index:w.index-B}))),de===g&&Ft<=w.index&&B++})}this.plh&&(this.plh.style.display="none");var X=this.dragHelper;if(X&&(X.parentNode.removeChild(X),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,_.isFunction)(d)){var ot={target:t,parent:t&&t.parent(),index:t&&t.index()};i.length?i.forEach(function(tt){return d(tt,e,ot)}):d(null,this,Es(Es({},ot),{cancelled:1}))}(0,_.isFunction)(v)&&v({sorter:this})},r.prototype.move=function(t,e,n){var i,l,f=this.em,d=this.dropContent,v=(0,D.getElement)(e),g=[],w=n.method==="after"?n.indexEl+1:n.indexEl,T=this.validTarget(t,v),V=(0,lt.default)(t).data("collection"),B=T.trgModel,X=T.srcModel,ot=T.draggable,tt=B instanceof S.FE?1:T.droppable;if(V&&tt&&ot){var At={at:w,action:"move-component"},Ft=this.isTextableActive(X,B);if(d)i=(0,_.isFunction)(d)?d():d,At.avoidUpdateStyle=!0,At.action="add-component";else{var de=X.collection.indexOf(X),_e=V===X.collection;(!_e||!(de===w||de===w-1)||Ft)&&(i=X.collection.remove(X,{temporary:!0}),_e&&w>de&&(At.at=w-1))}i&&(Ft?(delete At.at,l=B.getView().insertComponent(i,At)):l=V.add(i,At)),delete this.dropContent,delete this.prevTarget}else if(f){var Ne=T.dropInfo||(B==null?void 0:B.get("droppable")),We=T.dragInfo||(X==null?void 0:X.get("draggable"));!V&&g.push("Target collection not found"),!tt&&Ne&&g.push("Target is not droppable, accepts [".concat(Ne,"]")),!ot&&We&&g.push("Component not draggable, acceptable by [".concat(We,"]")),f.logWarning("Invalid target position",{errors:g,model:X,context:"sorter",target:B})}return f==null||f.trigger("sorter:drag:end",{targetCollection:V,modelToDrop:i,warns:g,validResult:T,dst:t,srcEl:v}),l},r.prototype.rollback=function(t){(0,D.off)(this.getDocuments(),"keydown",this.rollback),(t.which||t.keyCode)==27&&(this.moved=!1,this.endMove())},r}(S.G7);const vh=gh;var _a=function(){return _a=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_a.apply(this,arguments)},mh=function(){function a(r){r===void 0&&(r={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=_a({},this.defOpts),this.setOptions(r),(0,_.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(r,t){r===void 0&&(r={}),this.opts=_a(_a({},t?this.defOpts:this.opts),r),this.setup()},a.prototype.setup=function(){var r=this.opts,t=r.prefix||"",e=r.appendTo||document.body,n=this.container;for(n||((n=document.createElement("div")).className="".concat(t,"resizer-c"),e.appendChild(n),this.container=n);n.firstChild;)n.removeChild(n.firstChild);var i={};for(var l in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(d){return i[d]=r[d]?function(v,g){g===void 0&&(g={});var w=g.prefix||"",T=document.createElement("i");return T.className=w+"resizer-h "+w+"resizer-h-"+v,T.setAttribute("data-"+w+"handler",v),T}(d,r):null}),i){var f=i[l];f&&n.appendChild(f)}this.handlers=i,this.mousePosFetcher=r.mousePosFetcher,this.updateTarget=r.updateTarget,this.posFetcher=r.posFetcher,this.onStart=r.onStart,this.onMove=r.onMove,this.onEnd=r.onEnd,this.onUpdateContainer=r.onUpdateContainer},a.prototype.toggleFrames=function(r){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,_.each)(t,function(e){return e.style.pointerEvents=r?"none":""})}},a.prototype.isHandler=function(r){var t=this.handlers;for(var e in t)if(t[e]===r)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var r;return(r=this.el)===null||r===void 0?void 0:r.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(r,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(r,t):function(n,i){var l=i||window,f=n.getBoundingClientRect();return{left:f.left+l.pageXOffset,top:f.top+l.pageYOffset,width:f.width,height:f.height}}(r)},a.prototype.focus=function(r){r&&r===this.el||(this.el=r,this.updateContainer({forceShow:!0}),(0,D.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,D.off)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(r){var t=r;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,n=this.getParentEl(),i=this.opts||{},l=this.mousePosFetcher,f="data-"+i.prefix+"handler",d=this.getElementPos(e,{target:"el"}),v=this.getElementPos(n),g=t.target;this.handlerAttr=g.getAttribute(f),this.clickedHandler=g,this.startDim={t:d.top,l:d.left,w:d.width,h:d.height},this.rectDim={t:d.top,l:d.left,w:d.width,h:d.height},this.startPos=l?l(t):{x:t.clientX,y:t.clientY},this.parentDim={t:v.top,l:v.left,w:v.width,h:v.height};var w=this.getDocumentEl();this.docs=w,(0,D.on)(w,"pointermove",this.move),(0,D.on)(w,"keydown",this.handleKeyDown),(0,D.on)(w,"pointerup",this.stop),(0,_.isFunction)(this.onStart)&&this.onStart(t,{docs:w,config:i,el:e,resizer:this}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(r){var t=r,e=this.onMove,n=this.mousePosFetcher,i=n?n(t):{x:t.clientX,y:t.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(r){var t=this.el,e=this.opts,n=this.docs||this.getDocumentEl();(0,D.off)(n,"pointermove",this.move),(0,D.off)(n,"keydown",this.handleKeyDown),(0,D.off)(n,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,_.isFunction)(this.onEnd)&&this.onEnd(r,{docs:n,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(r){var t=this.el,e=this.opts,n=this.rectDim,i=this.updateTarget,l=this.getSelectedHandler(),f=e.unitHeight,d=e.unitWidth,v=e.keyWidth,g=e.keyHeight;if((0,_.isFunction)(i))i(t,n,{store:r,selectedHandler:l,resizer:this,config:e});else{var w=t.style;w[v]=n.w+d,w[g]=n.h+f}this.updateContainer()},a.prototype.updateContainer=function(r){var t;r===void 0&&(r={});var e=this,n=e.opts,i=e.container,l=e.el,f=i.style;!n.avoidContainerUpdate&&l&&r.forceShow&&(f.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:i,resizer:this,opts:_a(_a({},n),r)})},a.prototype.getSelectedHandler=function(){var r=this.handlers;if(this.selectedHandler){for(var t in r)if(r[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(r){r.keyCode===27&&(this.rectDim=this.startDim,this.stop(r))},a.prototype.handleMouseDown=function(r){var t=r.target;this.isHandler(t)?(this.selectedHandler=t,this.start(r)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(r){var t,e=this.opts||{},n=e.step,i=this.startDim,l=e.minDim,f=e.maxDim,d=r.delta.x,v=r.delta.y,g=this.parentDim.w,w=this.parentDim.h,T=this.opts.unitWidth,V=this.opts.unitHeight,B=T==="%"?i.w/100*g:i.w,X=V==="%"?i.h/100*w:i.h,ot={t:0,l:0,w:B,h:X};if(r){var tt=r.handlerAttr;~tt.indexOf("r")&&(t=T==="%"?(0,D.normalizeFloat)((B+d*n)/g*100,.01):(0,D.normalizeFloat)(B+d*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),ot.w=t),~tt.indexOf("b")&&(t=V==="%"?(0,D.normalizeFloat)((X+v*n)/w*100,.01):(0,D.normalizeFloat)(X+v*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),ot.h=t),~tt.indexOf("l")&&(t=T==="%"?(0,D.normalizeFloat)((B-d*n)/g*100,.01):(0,D.normalizeFloat)(B-d*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),ot.w=t),~tt.indexOf("t")&&(t=V==="%"?(0,D.normalizeFloat)((X-v*n)/w*100,.01):(0,D.normalizeFloat)(X-v*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),ot.h=t);var At=e.ratioDefault?!r.keys.shift:r.keys.shift;if(tt.indexOf("c")<0&&At){var Ft=i.w/i.h;ot.w/ot.h>Ft?ot.h=Math.round(ot.w/Ft):ot.w=Math.round(ot.h*Ft)}return~tt.indexOf("l")&&(ot.l=i.w-ot.w),~tt.indexOf("t")&&(ot.t=i.h-ot.h),ot}},a}();const yh=mh;var bh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pf=function(){return pf=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},pf.apply(this,arguments)};const wh=function(a){function r(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=vh,e.Resizer=yh,e.Dragger=no.Z,e.helpers=pf({},D),e}return bh(r,a),r.prototype.destroy=function(){},r}(Mt);var so,yo={},Kr={16:!1,18:!1,17:!1,91:!1},rd="all",Ca={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},od={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},ff=function(a){return od[a]||a.toUpperCase().charCodeAt(0)},_l=[];for(so=1;so<20;so++)od["f"+so]=111+so;function Tc(a,r){for(var t=a.length;t--;)if(a[t]===r)return t;return-1}function _h(a,r){if(a.length!=r.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==r[t])return!1;return!0}var Ch={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function xh(a){for(so in Kr)Kr[so]=a[Ch[so]]}function Sh(a){var r,t=a.keyCode,e=Tc(_l,t);if(e>=0&&_l.splice(e,1),t!=93&&t!=224||(t=91),t in Kr)for(r in Kr[t]=!1,Ca)Ca[r]==t&&(Yr[r]=!1)}function Oh(){for(so in Kr)Kr[so]=!1;for(so in Ca)Yr[so]=!1}function Yr(a,r,t){var e,n;e=id(a),t===void 0&&(t=r,r="all");for(var i=0;i<e.length;i++)n=[],(a=e[i].split("+")).length>1&&(n=sd(a),a=[a[a.length-1]]),a=a[0],(a=ff(a))in yo||(yo[a]=[]),yo[a].push({shortcut:e[i],scope:r,method:t,key:e[i],mods:n})}for(so in Ca)Yr[so]=!1;function df(){return rd||"all"}function id(a){var r;return(r=(a=a.replace(/\s/g,"")).split(","))[r.length-1]==""&&(r[r.length-2]+=","),r}function sd(a){for(var r=a.slice(0,a.length-1),t=0;t<r.length;t++)r[t]=Ca[r[t]];return r}function hf(a,r,t){a.addEventListener?a.addEventListener(r,t,!1):a.attachEvent&&a.attachEvent("on"+r,function(){t(window.event)})}Yr.setScope=function(a){rd=a||"all"},Yr.getScope=df,Yr.deleteScope=function(a){var r,t,e;for(r in yo)for(t=yo[r],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++},Yr.filter=function(a){var r=(a.target||a.srcElement).tagName;return!(r=="INPUT"||r=="SELECT"||r=="TEXTAREA")},Yr.isPressed=function(a){return typeof a=="string"&&(a=ff(a)),Tc(_l,a)!=-1},Yr.getPressedKeyCodes=function(){return _l.slice(0)},Yr.unbind=function(a,r){var t,e,n,i,l,f=[];for(t=id(a),i=0;i<t.length;i++){if((e=t[i].split("+")).length>1&&(f=sd(e)),a=e[e.length-1],a=ff(a),r===void 0&&(r=df()),!yo[a])return;for(n=0;n<yo[a].length;n++)(l=yo[a][n]).scope===r&&_h(l.mods,f)&&(yo[a][n]={})}},Yr.handlers=yo,Yr.init=function(a){hf(a.document,"keydown",function(r){(function(t){var e,n,i,l,f,d;if(e=t.keyCode,Tc(_l,e)==-1&&_l.push(e),e!=93&&e!=224||(e=91),e in Kr)for(i in Kr[e]=!0,Ca)Ca[i]==e&&(Yr[i]=!0);else if(xh(t),Yr.filter.call(this,t)&&e in yo){for(d=df(),l=0;l<yo[e].length;l++)if((n=yo[e][l]).scope==d||n.scope=="all"){for(i in f=n.mods.length>0,Kr)(!Kr[i]&&Tc(n.mods,+i)>-1||Kr[i]&&Tc(n.mods,+i)==-1)&&(f=!1);(n.mods.length!=0||Kr[16]||Kr[18]||Kr[17]||Kr[91])&&!f||n.method(t,n)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}})(r)}),hf(a.document,"keyup",Sh),hf(a,"focus",Oh)};const kc=Yr,Th={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo"},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo"},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};var kh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ad=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};(0,D.hasWin)()&&kc.init(window);var Eh=function(a){function r(t){var e=a.call(this,t,"Keymaps",Th)||this;return e.keymaster=kc,e.keymaps={},e}return kh(r,a),r.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}},r.prototype.add=function(t,e,n,i){i===void 0&&(i={});var l=this.em,f=l.Commands,d=l.getEditor(),v=l.Canvas,g={id:t,keys:e,handler:n};return this.keymaps[t]&&this.remove(t),this.keymaps[t]=g,kc(e,function(w,T){var V={event:w,h:T},B=(0,_.isString)(n)?f.get(n):n;if(!l.isEditing()&&!d.Canvas.isInputFocused()||i.force){i.prevent&&v.getCanvasView().preventDefault(w),(0,_.isFunction)(B)?B(d,0,V):f.runCommand(B,V);var X=[t,T.shortcut,w];l.trigger.apply(l,ad(["keymap:emit"],X,!1)),l.trigger.apply(l,ad(["keymap:emit:".concat(t)],X,!1))}},void 0),l.trigger("keymap:add",g),g},r.prototype.get=function(t){return this.keymaps[t]},r.prototype.getAll=function(){return this.keymaps},r.prototype.remove=function(t){var e=this.em,n=this.get(t);if(n)return delete this.keymaps[t],n.keys.split(", ").forEach(function(i){kc.unbind(i.trim())}),e==null||e.trigger("keymap:remove",n),n},r.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),kc.handlers={},this},r.prototype.destroy=function(){this.removeAll(),this.keymaps={}},r}(Mt);const Ph=Eh,Ah={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};var jh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Mh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return jh(r,a),r.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},r.prototype.open=function(){this.set("open",!0)},r.prototype.close=function(){this.set("open",!1)},r}(pt);var Lh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yu=function(){return Yu=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Yu.apply(this,arguments)};const Dh=function(a){function r(t){var e=a.call(this,t)||this,n=e.model;return e.listenTo(n,"change:open",e.updateOpen),e.listenTo(n,"change:title",e.updateTitle),e.listenTo(n,"change:content",e.updateContent),e}return Lh(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,i=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(n,"one-bg ").concat(n,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(i,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},r.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},r.prototype.onClick=function(t){this.config.backdrop&&t.target===this.el&&this.hide()},r.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},r.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},r.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},r.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),i=this.model.get("content");e.length&&n.append(e),t.empty().append(i)},r.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},r.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},r.prototype.hide=function(){this.model.close()},r.prototype.show=function(){this.model.open()},r.prototype.updateAttr=function(t){var e=this,n=e.pfx,i=e.$el,l=e.el,f=[].slice.call(l.attributes).map(function(d){return d.name});i.removeAttr(f.join(" ")),i.attr(Yu(Yu({},t||{}),{class:"".concat(n,"container ").concat(t&&t.class||"").trim()}))},r.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},r}(yn);var Nh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ih=function(a){function r(t){var e=a.call(this,t,"Modal",Ah)||this;return e.model=new Mh(e),e.model.on("change:open",function(n,i){t.trigger("modal:".concat(i?"open":"close"))}),e.model.on("change",(0,_.debounce)(function(){var n=e._evData(),i=e.config.custom;(0,_.isFunction)(i)&&i(n),t.trigger("modal",n)},0)),e}return Nh(r,a),r.prototype._evData=function(){var t=this,e=this.getTitle(),n=this.getContent(),i=this.model.attributes;return{open:i.open,attributes:i.attributes,title:(0,_.isString)(e)?(0,$e.rw)(e):e,content:(0,_.isString)(n)?(0,$e.rw)(n):n.get?n.get(0):n,close:function(){t.close()}}},r.prototype.postRender=function(t){var e=t.model.config.el||t.el,n=this.render();n&&(e==null||e.appendChild(n))},r.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},r.prototype.close=function(){return this.model.close(),this},r.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},r.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},r.prototype.isOpen=function(){return!!this.model.get("open")},r.prototype.setTitle=function(t){return this.model.set("title",t),this},r.prototype.getTitle=function(){return this.model.get("title")},r.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},r.prototype.getContent=function(){return this.model.get("content")},r.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},r.prototype.getModel=function(){return this.model},r.prototype.render=function(){var t;if(!this.config.custom){var e=Dh.extend(this.config.extend),n=this.modal&&this.modal.el;return this.modal=new e({el:n,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},r.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},r}(Mt);var ld="sw-visibility",cd="export-template",ud="open-sm",pd="open-tm",fd="open-layers",dd="open-blocks",gf="fullscreen",vf="preview";const mf={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:ld,className:"fa fa-square-o",command:"core:component-outline",context:ld,attributes:{title:"View components"}},{id:vf,className:"fa fa-eye",command:vf,context:vf,attributes:{title:"Preview"}},{id:gf,className:"fa fa-arrows-alt",command:gf,context:gf,attributes:{title:"Fullscreen"}},{id:cd,className:"fa fa-code",command:cd,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:ud,className:"fa fa-paint-brush",command:ud,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:pd,className:"fa fa-cog",command:pd,togglable:!1,attributes:{title:"Settings"}},{id:fd,className:"fa fa-bars",command:fd,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:dd,className:"fa fa-th-large",command:dd,togglable:!1,attributes:{title:"Open Blocks"}}]}]};var Vh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const hd=function(a){function r(t,e){var n=a.call(this,t,e)||this;return n.get("buttons").length&&n.set("buttons",new vd(n.module,n.get("buttons"))),n}return Vh(r,a),r.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(r.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),r}(pt);var Fh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gd=function(a){function r(t,e){return a.call(this,t,e,hd)||this}return Fh(r,a),r.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(n,i){n!==t&&(n.set("active",!1),e&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(t,e))})},r.prototype.deactivateAll=function(t,e){var n=t||"";this.forEach(function(i){i.get("context")==n&&i!==e&&i.set("active",!1,{fromCollection:!0})})},r.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(n,i){n.get("context")==e&&n.set("disable",!0)})},r.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(n,i){n!==t&&(n.set("disable",!0),e&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(t,e))})},r}(Bt);const vd=gd;gd.prototype.model=hd;var Hh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const md=function(a){function r(t,e){var n=a.call(this,t,e)||this,i=n.get("buttons")||[];return n.buttons=new vd(t,i),n}return Hh(r,a),r.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(r.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),r}(pt);var Rh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yd=function(a){function r(t,e){return a.call(this,t,e,md)||this}return Rh(r,a),r}(Bt);const zh=yd;yd.prototype.model=md;var Bh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cl=function(){return Cl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Cl.apply(this,arguments)},Uh=function(a){function r(t){var e=a.call(this,t)||this,n=e,i=n.model,l=n.em,f=n.pfx,d=n.ppfx,v=i.className,g=i.attributes,w=g.command,T=g.listen;if(e.id=f+i.get("id"),e.activeCls="".concat(f,"active ").concat(d,"four-color"),e.disableCls="".concat(d,"disabled"),e.btnsVisCls="".concat(f,"visible"),e.className=f+"btn"+(v?" "+v:""),e.listenTo(i,"change",e.render),e.listenTo(i,"change:active updateActive",e.updateActive),e.listenTo(i,"checkActive",e.checkActive),e.listenTo(i,"change:bntsVis",e.updateBtnsVis),e.listenTo(i,"change:attributes",e.updateAttributes),e.listenTo(i,"change:className",e.updateClassName),e.listenTo(i,"change:disable",e.updateDisable),l&&(0,_.isString)(w)&&T){var V={fromListen:!0};e.listenTo(l,"run:".concat(w),function(){return i.set("active",!0,V)}),e.listenTo(l,"stop:".concat(w),function(){return i.set("active",!1,V)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return Bh(r,a),r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.events=function(){return{click:"clicked"}},r.prototype.updateClassName=function(){var t=this.model,e=this.pfx,n=t.className,i=t.get("attributes").class,l="".concat(i||""," ").concat(e,"btn ").concat(n||"");this.$el.attr("class",l.trim())},r.prototype.updateAttributes=function(){var t=this,e=t.em,n=t.model,i=t.$el,l=n.get("attributes")||{},f=e&&e.t&&e.t("panels.buttons.titles.".concat(n.id));i.attr(l),f&&i.attr({title:f}),this.updateClassName()},r.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},r.prototype.updateActive=function(t,e,n){var i;n===void 0&&(n={});var l=this,f=l.model,d=l.commands,v=l.$el,g=l.activeCls,w=n.fromCollection,T=n.fromListen,V=f.get("context"),B=f.get("options"),X=f.command,ot={};X&&(d&&(0,_.isString)(X)?ot=d.get(X)||{}:(0,_.isFunction)(X)?ot=d.create({run:X}):X!==null&&(0,_.isObject)(X)&&(ot=d.create(X)),f.active?(!w&&((i=f.collection)===null||i===void 0||i.deactivateAll(V,f)),f.set("active",!0,{silent:!0}).trigger("checkActive"),!T&&d.runCommand(ot,Cl(Cl({},B),{sender:f})),ot.noStop&&f.set("active",!1)):(v.removeClass(g),!T&&d.stopCommand(ot,Cl(Cl({},B),{sender:f,force:1}))))},r.prototype.updateDisable=function(){var t=this.disableCls,e=this.model.disable;this.$el[e?"addClass":"removeClass"](t)},r.prototype.checkActive=function(){var t=this,e=t.model,n=t.$el,i=t.activeCls;e.active?n.addClass(i):n.removeClass(i)},r.prototype.clicked=function(t){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},r.prototype.toggleActive=function(){var t=this.model,e=this.em,n=t.active,i=t.togglable;n&&!i||(t.active=!n,n?t.runDefaultCommand&&e.runDefault():t.stopDefaultCommand&&e.stopDefault())},r.prototype.render=function(){var t=this.model,e=t.get("label"),n=this.$el;return!t.get("el")&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this},r}(yn);const Wh=Uh;var $h=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const qh=function(a){function r(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return $h(r,a),r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,i=t.get("el"),l=new Wh({el:i,model:t}).render().el;return n?n.appendChild(l):this.$el.append(l),l},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(n){return t.addToCollection(n,e)}),this.$el.append(e),this.$el.attr("class",(0,_.result)(this,"className")),this},r}(yn);var Gh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yf=function(){return yf=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},yf.apply(this,arguments)},Kh=function(a){function r(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return Gh(r,a),r.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},r.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},r.prototype.toggleVisible=function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},r.prototype.attributes=function(){return this.model.get("attributes")},r.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,n=this.model.get("resizable");if(e&&n){var i,l,f,d=n===!0?[1,1,1,1]:n,v=d.length,g=0;v==2?(i=d[0],f=d[0],l=d[1],g=d[1]):v==4&&(i=d[0],l=d[1],f=d[2],g=d[3]);var w=new e.Utils.Resizer(yf({tc:i,cr:l,bc:f,cl:g,tl:0,tr:0,bl:0,br:0,appendTo:this.el,silentFrames:1,avoidContainerUpdate:1,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger("change:canvasOffset")},posFetcher:function(T,V){var B=V.target,X=T.style,ot=w.getConfig(),tt=ot.keyWidth,At=ot.keyHeight,Ft=T.getBoundingClientRect(),de=B=="container",_e=X[tt],Ne=X[At];return{left:0,top:0,width:_e&&!de?parseFloat(_e):Ft.width,height:Ne&&!de?parseFloat(Ne):Ft.height}}},n));w.blur=function(){},w.focus(this.el)}},r.prototype.render=function(){var t=this.model.buttons,e=this.$el,n=this.ppfx,i="".concat(this.className," ").concat(this.id," ").concat(n,"one-bg ").concat(n,"two-color");if(e.addClass(i),this.toggleVisible(),t.length){var l=new qh(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},r}(yn);const Yh=Kh;var Jh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Xh=function(a){function r(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return Jh(r,a),r.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,i=(this.config,t.get("el")),l=new Yh(t),f=l.render().el,d=t.get("appendTo");return i||(d?document.querySelector(d).appendChild(f):n?n.appendChild(f):this.$el.append(f)),l.initResize(),f},r.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each(function(i){return t.addToCollection(i,n)}),e.append(n),e.attr("class",this.className),this},r}(yn);var Zh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Qh=function(a){function r(t){var e=a.call(this,t,"Panels",mf)||this;for(var n in e.panels=new zh(e,e.config.defaults),mf)n in e.config||(e.config[n]=mf[n]);return e}return Zh(r,a),r.prototype.getPanels=function(){return this.panels},r.prototype.getPanelsEl=function(){return this.PanelsViewObj&&this.PanelsViewObj.el},r.prototype.addPanel=function(t){return this.panels.add(t)},r.prototype.removePanel=function(t){return this.panels.remove(t)},r.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},r.prototype.addButton=function(t,e){var n=this.getPanel(t);return n?n.get("buttons").add(e):null},r.prototype.removeButton=function(t,e){var n=this.getPanel(t);return n&&n.get("buttons").remove(e)},r.prototype.getButton=function(t,e){var n=this.getPanel(t);if(n){var i=n.get("buttons").where({id:e});return i.length?i[0]:null}return null},r.prototype.render=function(){return this.PanelsViewObj&&this.PanelsViewObj.remove(),this.PanelsViewObj=new Xh(this.panels),this.PanelsViewObj.render().el},r.prototype.active=function(){this.getPanels().each(function(t){t.get("buttons").each(function(e){e.get("active")&&e.trigger("updateActive")})})},r.prototype.disableButtons=function(){this.getPanels().each(function(t){t.get("buttons").each(function(e){e.get("disable")&&e.trigger("change:disable")})})},r.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},r}(Mt),tg={stylePrefix:"cm-",inlineCss:!1};var eg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ng=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t};const rg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return eg(r,a),r.prototype.build=function(t,e){e===void 0&&(e={});var n=e.em,i=ng(e,["em"]);if(e.cleanId&&n){var l=n.Css.getAll().toJSON().map(function(f){var d=f.selectors,v=d&&d.length===1&&d.models[0];return v&&v.isId()&&v.get("name")}).filter(Boolean);i.attributes||(i.attributes=function(f,d){var v=d.id;return v&&v[0]==="i"&&!f.get("script")&&!f.get("attributes").id&&l.indexOf(v)<0&&delete d.id,d})}return t.toHTML(i)},r}(S.Hn);var og=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ig=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return og(r,a),r.prototype.build=function(t){var e=this,n=t.toJSON();return this.beforeEach(n),(0,_.each)(n,function(i,l){var f=n[l];if(f instanceof S.Hn)n[l]=e.build(f);else if(f instanceof S.FE){var d=f;n[l]=[],d.length&&d.forEach(function(v,g){n[l][g]=e.build(v)})}}),n},r.prototype.beforeEach=function(t){delete t.status},r}(S.Hn);const sg=ig;var ag=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ag(r,a),r.prototype.mapModel=function(t){var e,n=this,i="",l=t.get("script-export")||t.get("script"),f=t.get("type"),d=t.get("components"),v=t.getId();if(l){var g=t.get("attributes");g=(0,_.extend)({},g,{id:v}),t.set("attributes",g,{silent:!0});var w=t.getScriptString(l),T=t.get("script-props");if(t.get("scriptUpdated")&&!T)this.mapJs[f+"-"+v]={ids:[v],code:w};else{var V=void 0,B=this.mapJs[f];if(T&&(V=t.__getScriptProps()),B)B.ids.push(v),V&&(B.props[v]=V);else{var X={ids:[v],code:w};V&&(X.props=((e={})[v]=V,e)),this.mapJs[f]=X}}}return d.forEach(function(ot){i+=n.mapModel(ot)}),i},r.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e,n,i="";for(var l in this.mapJs){var f=this.mapJs[l];if(f.code)if(f.props){if(e=f.code,n=void 0,(((n=e.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length===0)continue;i+=`
          var props = `.concat(JSON.stringify(f.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(f.code,`.bind(el))(props[el.id]);
          }`)}else{var d="#"+f.ids.join(", #");i+=`
          var items = document.querySelectorAll('`.concat(d,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(f.code,`
}.bind(items[i]))();
          }`)}}return i},r}(S.Hn);const cg=lg;var Ec,ug=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bf=function(){return bf=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},bf.apply(this,arguments)};(0,D.hasWin)()&&(Ec=Wt(631),Wt(531),Wt(629),Wt(210));var bd=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ug(r,a),r.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0}},r.prototype.init=function(t){return(0,_.bindAll)(this,"onChange"),this.editor=Ec.fromTextArea(t,bf({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},r.prototype.onChange=function(){this.trigger("update",this)},r.prototype.getEditor=function(){return this.editor},r.prototype.getElement=function(){return this.element},r.prototype.setElement=function(t){return this.element=t,this},r.prototype.refresh=function(){return this.getEditor().refresh(),this},r.prototype.focus=function(){return this.getEditor().focus(),this},r.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},r.prototype.setContent=function(t,e){var n=this;e===void 0&&(e={});var i=this.editor;i&&(i.setValue(t),i.autoFormatRange&&(Ec.commands.selectAll(i),i.autoFormatRange(i.getCursor(!0),i.getCursor(!1)),Ec.commands.goDocStart(i)),!e.noRefresh&&setTimeout(function(){return n.refresh()}))},r}(S.Hn);const pg=bd;bd.prototype.CodeMirror=Ec;var fg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dg=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a};const hg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return fg(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.codeName,i=t.label;return et(wd||(wd=dg([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,n,e,i,e)},r.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},r.prototype.render=function(){var t=this,e=t.model,n=t.pfx,i=t.$el,l=e.toJSON();return l.pfx=n,i.html(this.template(l)),i.attr("class","".concat(n,"editor-c")),i.find("#".concat(n,"code")).append(e.get("input")),this},r}(S.G7);var wd,gg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vg="CodeMirror",mg=function(a){function r(t){var e=a.call(this,t,"CodeManager",tg)||this;e.EditorView=hg;var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new rg,css:new Lp,json:new sg,js:new cg},e.defViewers={CodeMirror:new pg},e.loadDefaultGenerators().loadDefaultViewers(),e}return gg(r,a),r.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},r.prototype.getGenerator=function(t){return this.generators[t]},r.prototype.getGenerators=function(){return this.generators},r.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},r.prototype.getViewer=function(t){return this.viewers[t]},r.prototype.getViewers=function(){return this.viewers},r.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,_.isUndefined)(t.type)?vg:t.type,n=this.getViewer(e)&&this.getViewer(e).clone(),i=document.createElement("div"),l=document.createElement("textarea");return i.appendChild(l),n.set(t),n.init(l),n.setElement(i),n},r.prototype.updateViewer=function(t,e){t.setContent(e)},r.prototype.getCode=function(t,e,n){n===void 0&&(n={}),n.em=this.em;var i=this.getGenerator(e);return i?i.build(t,n):""},r.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},r.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},r.prototype.destroy=function(){},r}(Mt);const yg=mg;var bg=Wt(410),wg=Wt.n(bg);const _g={maximumStackLength:500,trackSelection:!0};var Cg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hi=function(){return Hi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Hi.apply(this,arguments)},xg=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ju=function(a){return a.avoidStore||a.noUndo},_d=function(a){return Object.keys(a.changedAttributes())},Sg=function(a){function r(t){var e=a.call(this,t,"UndoManager",_g)||this;e.config._disable&&(e.config.maximumStackLength=0);var n=!0;return e.um=new(wg())(Hi({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(i){var l=i.get("_undo");if(l){var f=i.get("_undoexc");if((0,_.isArray)(f)&&_d(i).some(function(d){return f.indexOf(d)>=0}))return!1;if((0,_.isBoolean)(l)||(0,_.isArray)(l)&&_d(i).some(function(d){return l.indexOf(d)>=0}))return!0}return!1},on:function(i,l,f){var d=this;!this.beforeCache&&(this.beforeCache=i.previousAttributes());var v=f||l||{};if(v.noUndo&&setTimeout(function(){d.beforeCache=null}),!Ju(v)){var g=i.toJSON({fromUndo:n}),w={object:i,before:this.beforeCache,after:g};if(this.beforeCache=null,!(0,_.isEmpty)(g))return w}}}),e.um.changeUndoType("add",{on:function(i,l,f){if(f===void 0&&(f={}),!Ju(f)&&e.isRegistered(l))return{object:l,before:void 0,after:i,options:Hi(Hi({},f),{fromUndo:n})}}}),e.um.changeUndoType("remove",{on:function(i,l,f){if(f===void 0&&(f={}),!Ju(f)&&e.isRegistered(l))return{object:l,before:i,after:void 0,options:Hi(Hi({},f),{fromUndo:n})}}}),e.um.changeUndoType("reset",{undo:function(i,l){i.reset(l,{fromUndo:n})},redo:function(i,l,f){i.reset(f,{fromUndo:n})},on:function(i,l){if(l===void 0&&(l={}),!Ju(l)&&e.isRegistered(i))return{object:i,before:l.previousModels,after:xg([],i.models,!0),options:Hi(Hi({},l),{fromUndo:n})}}}),e.um.on("undo redo",function(){t.trigger("change:canvasOffset"),t.getSelectedAll().map(function(i){return i.trigger("rerender:layer")})}),["undo","redo"].forEach(function(i){return e.um.on(i,function(){return t.trigger(i)})}),e}return Cg(r,a),r.prototype.postLoad=function(){var t=this.config,e=this.em;t.trackSelection&&e&&this.add(e.get("selected"))},r.prototype.add=function(t){return this.um.register(t),this},r.prototype.remove=function(t){return this.um.unregister(t),this},r.prototype.removeAll=function(){return this.um.unregisterAll(),this},r.prototype.start=function(){return this.um.startTracking(),this},r.prototype.stop=function(){return this.um.stopTracking(),this},r.prototype.undo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.undo(t),this},r.prototype.undoAll=function(){return this.um.undoAll(),this},r.prototype.redo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.redo(t),this},r.prototype.redoAll=function(){return this.um.redoAll(),this},r.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},r.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},r.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},r.prototype.getStack=function(){return this.um.stack},r.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(n){var i=n.get("magicFusionIndex");e.indexOf(i)<0&&(e.push(i),t.push(n))}),t},r.prototype.skip=function(t){this.stop(),t(),this.start()},r.prototype.getGroupedStack=function(){var t={},e=this.getStack();return e.forEach(function(n,i){var l=n.get("magicFusionIndex"),f=function(d,v){var g=d.attributes,w=g.type,T=g.after,V=g.before,B=g.object,X=g.options;return{index:v,type:w,after:T,before:V,object:B,options:X===void 0?{}:X}}(n,i);t[l]?t[l].push(f):t[l]=[f]}),Object.keys(t).map(function(n){var i=t[n];return{index:i[i.length-1].index,actions:i,labels:(0,_.unique)(i.reduce(function(l,f){var d,v=(d=f.options)===null||d===void 0?void 0:d.action;return v&&l.push(v),l},[]))}})},r.prototype.goToGroup=function(t){var e=this;if(t){var n=this.getPointer(),i=t.index-n;(0,_.times)(Math.abs(i),function(){e[i<0?"undo":"redo"](!1)})}},r.prototype.getPointer=function(){return this.getStack().pointer},r.prototype.clear=function(){return this.um.clear(),this},r.prototype.getInstance=function(){return this.um},r.prototype.destroy=function(){this.clear().removeAll()},r}(Mt);const Og=Sg;var xl=function(){return xl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xl.apply(this,arguments)},wf="_rte",Cd=1,_f=0,xd=-1,Xu=function(a,r){r===void 0&&(r="A");var t=a.selection()||{},e=t.anchorNode,n=t.focusNode,i=e==null?void 0:e.parentNode,l=n==null?void 0:n.parentNode;return(i==null?void 0:i.nodeName)==r||(l==null?void 0:l.nodeName)==r},Zu="data-selectme",Pc={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&Xu(a)?Cd:_f},result:function(a){Xu(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(Zu,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a!=null&&a.selection()&&Xu(a,"SPAN")?xd:_f},result:function(a){!Xu(a,"SPAN")&&a.insertHTML("<span ".concat(Zu,">").concat(a.selection(),"</span>"),{select:!0})}}},Tg=function(){function a(r,t,e){e===void 0&&(e={});var n=this;if(this.em=r,this.settings=e,t[wf])return t[wf];t[wf]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var i=(e.actions||[]).map(function(g){var w=g;return(0,_.isString)(g)?w=xl({},Pc[g]):Pc[g.name]&&(w=xl(xl({},Pc[g.name]),g)),w}),l=i.length?i:Object.keys(Pc).map(function(g){return Pc[g]});e.classes=xl({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var f=e.classes,d=e.actionbar;if(this.actionbar=d,this.classes=f,this.actions=l,!d){var v=e.actionbarContainer;(d=document.createElement("div")).className=f.actionbar,v==null||v.appendChild(d),this.actionbar=d,l.forEach(function(g){return n.addAction(g)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.destroy=function(){},a.prototype.setEl=function(r){this.el=r,this.doc=r.ownerDocument},a.prototype.updateActiveActions=function(){var r=this;this.getActions().forEach(function(t){var e=t.update,n=t.btn,i=r.classes,l=i.active,f=i.inactive,d=i.disabled,v=t.state,g=t.name,w=r.doc;if(n.className=n.className.replace(l,"").trim(),n.className=n.className.replace(f,"").trim(),n.className=n.className.replace(d,"").trim(),v)switch(v(r,w)){case Cd:n.className+=" ".concat(l);break;case _f:n.className+=" ".concat(f);break;case xd:n.className+=" ".concat(d)}else w.queryCommandSupported(g)&&w.queryCommandState(g)&&(n.className+=" ".concat(l));e==null||e(r,t)})},a.prototype.enable=function(r){return this.enabled?this:this.__toggleEffects(!0,r)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(r,t){r===void 0&&(r=!1),t===void 0&&(t={});var e=r?D.on:D.off,n=this.el,i=this.doc;if(this.actionbarEl().style.display=r?"":"none",n.contentEditable="".concat(!!r),e(n,"mouseup keyup",this.updateActiveActions),e(i,"keydown",this.__onKeydown),e(i,"paste",this.__onPaste),this.enabled=r,r){var l=t.event;if(this.syncActions(),this.updateActiveActions(),l){var f=null;if(i.caretRangeFromPoint){var d=(0,D.getPointerEvent)(l);f=i.caretRangeFromPoint(d.clientX,d.clientY)}else l.rangeParent&&(f=i.createRange()).setStart(l.rangeParent,l.rangeOffset);var v=i.getSelection();v==null||v.removeAllRanges(),f&&(v==null||v.addRange(f))}n.focus()}return this},a.prototype.__onKeydown=function(r){var t=r,e=this.doc;t.key!=="Enter"||["insertOrderedList","insertUnorderedList"].some(function(n){return e.queryCommandState(n)})||(e.execCommand("insertLineBreak"),t.preventDefault())},a.prototype.__onPaste=function(r){var t=r.clipboardData||window.clipboardData,e=t.getData("text"),n=t.getData("text/html");if(e&&!n){r.preventDefault();var i=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,i)}},a.prototype.syncActions=function(){var r=this;this.getActions().forEach(function(t){if(r.actionbar&&(!t.state||t.state&&t.state(r,r.doc)>=0)){var e=t.event||"click";t.btn["on".concat(e)]=function(){t.result(r,t),r.updateActiveActions()}}})},a.prototype.addAction=function(r,t){t===void 0&&(t={});var e=t.sync,n=document.createElement("span"),i=r.icon,l=r.attributes||{};for(var f in n.className=this.classes.button,r.btn=n,l)n.setAttribute(f,l[f]);typeof i=="string"?n.innerHTML=i:n.appendChild(i),this.actionbarEl().appendChild(n),e&&(this.actions.push(r),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(r,t){this.doc.execCommand(r,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(r,t){var e=(t===void 0?{}:t).select,n=this,i=n.em,l=n.doc,f=n.el,d=l.getSelection();if(d&&d.rangeCount){var v=(0,D.getModel)(f),g=l.createElement("div"),w=d.getRangeAt(0);w.deleteContents(),(0,_.isString)(r)?g.innerHTML=r:r&&g.appendChild(r),Array.prototype.slice.call(g.childNodes).forEach(function(T){w.insertNode(T)}),d.removeAllRanges(),d.addRange(w),f.focus(),e&&v&&(v.once("rte:disable",function(){var T=v.find("[".concat(Zu,"]"))[0];T&&(i.setSelected(T),T.removeAttributes(Zu))}),v.trigger("disable"))}},a}();const kg=Tg,Eg={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"]};var Pg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ag=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},jg=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},Mg=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Cf="change:canvasOffset frame:scroll component:update",Lg=function(a){function r(t){var e=a.call(this,t,"RichTextEditor",Eg)||this,n=e.config,i=n.pStylePrefix;if(i&&(n.stylePrefix=i+n.stylePrefix),e.pfx=n.stylePrefix,e.actions=n.actions||[],!(0,D.hasWin)())return e;var l=document.createElement("div");return l.className="".concat(i,"rte-toolbar ").concat(i,"one-bg"),e.toolbar=l,e.initRte(document.createElement("div")),(0,D.on)(l,"mousedown",function(f){return f.stopPropagation()}),e}return Pg(r,a),r.prototype.destroy=function(){var t,e,n;(t=this.globalRte)===null||t===void 0||t.destroy(),(n=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),(0,$e.L_)(this.toolbar)},r.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},r.prototype.initRte=function(t){var e=this.globalRte,n=this,i=n.em,l=n.pfx,f=n.actionbar,d=n.config,v=this.actions||Mg([],d.actions,!0),g={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=i,e.setEl(t)):(e=new kg(i,t,{classes:g,actions:v,actionbar:f,actionbarContainer:this.toolbar}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},r.prototype.add=function(t,e){var n;e===void 0&&(e={}),e.name=t,(n=this.globalRte)===null||n===void 0||n.addAction(e,{sync:!0})},r.prototype.get=function(t){var e,n;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(i){i.name==t&&(n=i)}),n},r.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},r.prototype.remove=function(t){var e,n=this.getAll(),i=this.get(t);if(i){var l=i.btn,f=n.indexOf(i);(e=l==null?void 0:l.parentNode)===null||e===void 0||e.removeChild(l),n.splice(f,1)}return i},r.prototype.getToolbarEl=function(){return this.toolbar},r.prototype.updatePosition=function(){var t=this.em,e=this.toolbar,n="px",i=t.Canvas,l=e.style,f=i.getTargetToElementFixed(this.lastEl,e,{event:"rteToolbarPosUpdate",left:0});l.top=(f.top||0)+n,l.left=(f.left||0)+n},r.prototype.enable=function(t,e,n){return n===void 0&&(n={}),Ag(this,void 0,void 0,function(){var i,l,f,d,v;return jg(this,function(g){switch(g.label){case 0:return this.lastEl=t.el,l=(i=this).customRte,f=i.em,d=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(d,e):this.initRte(d).enable(n)];case 1:return v=g.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(Cf,this.updatePosition,this),f.on(Cf,this.updatePosition,this),f.trigger("rte:enable",t,v)),[2,v]}})})},r.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},r.prototype.disable=function(t,e){var n=this.em,i=this.customRte,l=t.getChildrenContainer();i?i.disable(l,e):e&&e.disable(),this.hideToolbar(),n&&(n.off(Cf,this.updatePosition,this),n.trigger("rte:disable",t,e))},r}(Mt);const Dg=Lg;var xf=Wt(790);const Ng={stylePrefix:"com-",defaults:{},strict:!0};var Ig=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qu=function(){return Qu=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Qu.apply(this,arguments)},Sd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Od=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],Vg=function(a){function r(t){var e=a.call(this,t,"Commands",Ng)||this;e.CommandAbstract=xf.default,e.defaultCommands={},e.commands={},e.active={};var n=e.config,i=n.pStylePrefix,l=e.defaultCommands;for(var f in i&&(n.stylePrefix=i+n.stylePrefix),Object.keys(n.defaults).forEach(function(d){var v=n.defaults[d];v.id&&e.add(v.id,v)}),l["tlb-delete"]={run:function(d){return d.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(d){d.runCommand("core:copy"),d.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(d,v,g){g===void 0&&(g={});var w=d.getModel(),T=g&&g.event,V=g.target,B=V||d.getSelected(),X=V?[V]:Sd([],d.getSelectedAll(),!0),ot=T&&T.type=="dragstart",tt={preserveSelected:1};if(!B||!B.get("draggable"))return w.logWarning("The element is not draggable");var At=B.get("dmode")||w.get("dmode"),Ft=function(){return w.stopDefault(tt)},de=(0,_.includes)(["absolute","translate"],At);X.forEach(function(On){return On.trigger("disable")}),ot?setTimeout(Ft,0):Ft();var _e=function(On){w.trigger("".concat(br,":start"),On)},Ne=function(On){w.trigger(br,On)},We=function(On,Dr,Xr){X.forEach(function(Zr){return Zr.set("status","selected")}),d.select(X),B.emitUpdate(),w.trigger("".concat(br,":end"),Xr),setTimeout(function(){return w.runDefault(tt)}),(de||Xr.cancelled)&&w.set("_cmpDrag",1)};if(de)d.runCommand("core:component-drag",{guidesInfo:1,mode:At,target:B,onStart:_e,onDrag:Ne,onEnd:We,event:T});else{ot&&T.dataTransfer.setDragImage(B.view.el,0,0);var on=d.Commands.get("move-comp");on.onStart=_e,on.onDrag=Ne,on.onEndMoveFromModel=We,on.initSorterFromModels(X)}X.forEach(function(On){return On.set("status","freezed-selected")})}},l["core:undo"]=function(d){return d.UndoManager.undo()},l["core:redo"]=function(d){return d.UndoManager.redo()},Od.forEach(function(d){var v=d[2],g=Wt(828)("./".concat(d[1])).default,w="core:".concat(d[0]);l[w]=g,v&&(l[v]=g,["run","stop"].forEach(function(T){t.on("".concat(T,":").concat(v),function(){for(var V=[],B=0;B<arguments.length;B++)V[B]=arguments[B];return t.trigger.apply(t,Sd(["".concat(T,":").concat(w)],V,!1))})}))}),n.model=t.Canvas,l)e.add(f,l[f]);return e}return Ig(r,a),r.prototype.add=function(t,e){var n=(0,_.isFunction)(e)?{run:e}:e;return n.stop||(n.noStop=!0),delete n.initialize,n.id=t,this.commands[t]=xf.default.extend(n),this},r.prototype.get=function(t){var e=this.commands[t];return(0,_.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},r.prototype.extend=function(t,e){e===void 0&&(e={});var n=this.get(t);if(n){var i=Qu(Qu({},n.constructor.prototype),e);this.add(t,i);var l=Od.filter(function(f){return"core:".concat(f[0])===t&&f[2]})[0];l&&this.add(l[2],i)}return this},r.prototype.has=function(t){return!!this.commands[t]},r.prototype.getAll=function(){return this.commands},r.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},r.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},r.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},r.prototype.getActive=function(){return this.active},r.prototype.runCommand=function(t,e){var n;if(e===void 0&&(e={}),t&&t.run){var i=this.em,l=this.config,f=t.id,d=i.Editor;this.isActive(f)&&!e.force&&l.strict||(n=d&&t.callRun(d,e),f&&t.stop&&!t.noStop&&!e.abort&&(this.active[f]=n))}return n},r.prototype.stopCommand=function(t,e){var n;if(e===void 0&&(e={}),t&&t.run){var i=this.em,l=this.config,f=t.id,d=i.Editor;(this.isActive(f)||e.force||!l.strict)&&(f&&delete this.active[f],n=t.callStop(d,e))}return n},r.prototype.create=function(t){return t.stop||(t.noStop=!0),new(xf.default.extend(t))(this.config)},r.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},r}(Mt);const Fg=Vg,Hg={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var Rg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jr=function(){return Jr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Jr.apply(this,arguments)},zg=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Td=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Sf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Rg(r,a),r.getDefaults=function(){return(0,_.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var n=this.getId()||"",i=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(i||n).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!i&&this.set("name",(0,D.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),r.callInit(this,t,e)},r.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},r.prototype.__upTargets=function(t,e){var n,i=this;e===void 0&&(e={});var l=this.em.Styles,f=this.getName(),d=e.__clear,v=d?"":this.__getFullValue(e),g=this.__getParentProp(),w=this.changedAttributes(),T=(0,_.keys)(w).reduce(function(At,Ft){return At[Ft]=i.previous(Ft),At},{}),V=Td(Td([],(0,_.keys)(this.__getClearProps()),!0),["__p"],!1),B=(0,_.keys)(w),X=!e.__up&&!g&&(d||V.some(function(At){return B.indexOf(At)>=0})),ot=this.get("onChange"),tt={property:this,from:T,to:w,value:v,opts:e};l.__trgEv(l.events.propertyUpdate,tt),ot&&ot(tt),X&&this.__upTargetsStyle(((n={})[f]=v,n),e)},r.prototype.__upTargetsStyle=function(t,e){var n,i=(n=this.em)===null||n===void 0?void 0:n.get("StyleManager");i==null||i.addStyleTargets(Jr(Jr({},t),{__p:!!e.avoidStore}),e)},r.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var n=e.partial,i=zg(e,["partial"]);return t.__p=!(!i.avoidStore&&!n),this.set(t,Jr(Jr({},i),{avoidStore:t.__p}))},r.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,Jr(Jr({},e),{__up:!0}))},r.prototype.init=function(){},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("property")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,i=n===void 0||n,l=this.getId(),f=this.get("name")||this.get("label");return i&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||f},r.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,n=this.get("value");return this.hasValue()||e?n:this.getDefaultValue()},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget(),n=this.get("value");return!(0,_.isUndefined)(n)&&n!==""&&!e},r.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},r.prototype.getStyle=function(t){var e;t===void 0&&(t={});var n=this.getName();return(e={})[t.camelCase?(0,D.camelCase)(n):n]=this.__getFullValue(t),e},r.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,_.isUndefined)(t)?this.get("defaults"):t)},r.prototype.upValue=function(t,e){e===void 0&&(e={});var n=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Jr(Jr({},t),{__clear:!0})),this},r.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},r.prototype.getParent=function(){return this.__getParentProp()||null},r.prototype.isFull=function(){return!!this.get("full")},r.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},r.prototype.__getClearProps=function(){return{value:""}},r.prototype.setValue=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var i=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(i,Jr({avoidStore:l},n))},r.prototype.setValueFromInput=function(t,e,n){n===void 0&&(n={}),this.setValue(t,e,Jr(Jr({},n),{fromInput:1}))},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n={value:t},i="!important";if((0,_.isString)(t)&&t.indexOf(i)!==-1&&(n.value=t.replace(i,"").trim(),n.important=!0),!this.get("functionName")&&!e.complete)return n;var l=[],f="".concat(n.value),d=f.indexOf("(")+1,v=f.lastIndexOf(")"),g=f.substring(0,d-1);if(g&&(n.functionName=g),l.push(d),v>=0&&l.push(v),n.value=String.prototype.substring.apply(f,l),e.numeric){var w=parseFloat(n.value);n.unit=n.value.replace(w,""),n.value=w}return n},r.prototype.__getFullValue=function(t){var e=(t===void 0?{}:t).withDefault;return!this.hasValue()&&e?this.getDefaultValue():this.getFullValue()},r.prototype.getFullValue=function(t,e){e===void 0&&(e={});var n=this.get("functionName"),i=this.getDefaultValue(),l=(0,_.isUndefined)(t)?this.get("value"):t,f=!(0,_.isUndefined)(l)&&l!=="";if(l&&i&&l===i)return i;if(n&&f){var d=n==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(n,"(").concat(d,")")}return f&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},r.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},r.prototype.getParentTarget=function(){return this.get("parentTarget")||null},r.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,n=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}},r.prototype.__checkVisibility=function(t){var e=t.target,n=t.component,i=t.sectors,l=n||e;if(!l)return!1;var f=this.getId(),d=this.getName(),v=this.get("toRequire"),g=this.get("requires"),w=this.get("requiresParent"),T=l.get("unstylable"),V=l.get("stylable-require"),B=l.get("stylable");if((0,_.isArray)(B)&&(B=B.indexOf(d)>=0),(0,_.isArray)(T)&&(B=T.indexOf(d)<0),v&&(B=!e||V&&(V.indexOf(f)>=0||V.indexOf(d)>=0)),i&&g){var X=(0,_.keys)(g);i.forEach(function(Ft){Ft.getProperties().forEach(function(de){if((0,_.includes)(X,de.id)){var _e=g[de.id];B=B&&(0,_.includes)(_e,de.get("value"))}})})}if(w){var ot=n&&n.parent(),tt=ot&&ot.getEl();if(tt){var At=(0,D.hasWin)()?window.getComputedStyle(tt):{};(0,_.each)(w,function(Ft,de){B=B&&At[de]&&(0,_.includes)(Ft,At[de])})}else B=!1}return!!B},r}(S.Hn);const An=Sf;Sf.callParentInit=function(a,r,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(r,[t,Jr(Jr({},e),{skipInit:1})])},Sf.callInit=function(a,r,t){t===void 0&&(t={}),!t.skipInit&&a.init(r,t)};var Bg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sl=function(){return Sl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Sl.apply(this,arguments)},kd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ed=function(a){return a==="integer"||a==="number"},Ug=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Bg(r,a),r.prototype.defaults=function(){return Sl(Sl({},An.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),An.callParentInit(An,this,t,e);var n=this.em,i=new Ef(this.get("properties")||[],{em:n,parentProp:this});this.set("properties",i,{silent:!0}),this.listenTo(i,"change",this.__upProperties),An.callInit(this,t,e)},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),r.prototype.getProperties=function(){return kd([],this.get("properties").models,!0)},r.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},r.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},r.prototype.isDetached=function(){return!!this.get("detached")},r.prototype.getValues=function(t){var e=(t===void 0?{}:t).byName;return this.getProperties().reduce(function(n,i){return n[e?i.getName():i.getId()]="".concat(i.__getFullValue()),n},{})},r.prototype.getSeparator=function(){return this.getSplitSeparator()},r.prototype.getJoin=function(){return this.__getJoin()},r.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var n=this.getName(),i=this.__getJoin(),l=this.get("toStyle"),f=this.getValues(),d={};if(l)d=l(f,{join:i,name:n,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())d=f;else{var v=this.getProperties().map(function(g){return g.__getFullValue({withDefault:1})}).filter(Boolean).join(i);(e={})[n]=v,d=e}return this.isDetached()?d[n]="":(d[n]=d[n]||"",d=Sl(Sl({},d),this.getProperties().reduce(function(g,w){return g[w.getName()]="",g},{}))),t.camelCase?Object.keys(d).reduce(function(g,w){return g[(0,D.camelCase)(w)]=d[w],g},{}):d},r.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},r.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!e.__up&&!e.__clearIn){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},r.prototype.__upTargetsStyleProps=function(t,e){var n;t===void 0&&(t={});var i=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();(n={})[l]=i[l],i=n}this.__upTargetsStyle(i,t)},r.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),An.prototype._up.call(this,t,e),this},r.prototype.getStyle=function(t){return this.getStyleFromProps(t)},r.prototype.__getFullValue=function(t){return t===void 0&&(t={}),this.isDetached()||t.__clear?"":this.getStyleFromProps()[this.getName()]||""},r.prototype.__getJoin=function(){var t=this.get("join");return(0,_.isString)(t)?t:this.get("separator")},r.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),n=this.getProperties().map(function(i){return i.getName()});return kd([e],n,!0).some(function(i){return!(0,_.isUndefined)(t[i])&&t[i]!==""})},r.prototype.__splitValue=function(t,e){return t.split(e).map(function(n){return n.trim()}).filter(Boolean)},r.prototype.__splitStyleName=function(t,e,n){return this.__splitValue(t[e]||"",n)},r.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var n=(e===void 0?{}:e).byName,i=this.getProperties(),l=i.length===4&&i.every(function(v){return Ed(v.getType())}),f=this.__splitValue(t,this.getSplitSeparator()),d={};return i.forEach(function(v,g){var w=f[g],T=(0,_.isUndefined)(w)?"":w;if(l){var V=f.length;T=f[g]||f[g%V+(V!=1&&V%2?1:0)]||T}var B=n?v.getName():v.getId();d[B]=T||""}),d},r.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var n=e.byName,i=this.getName(),l=this.getProperties(),f=this.getSplitSeparator(),d=this.get("fromStyle"),v=d?d(t,{property:this,name:i,separator:f}):{};return d||(v=this.__getSplitValue(t[i]||"",{byName:n}),l.forEach(function(g){var w=t[g.getName()],T=n?g.getName():g.getId();(0,_.isUndefined)(w)||w===""||(v[T]=w)})),v},r.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(i){var l=t[i.getId()];i.__getFullValue()!==l&&i.upValue(l,e)});var n=(0,_.keys)(t).map(function(i){return t[i]}).join(" ");this.set("value",n,{silent:!0})},r.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),An.prototype.clear.call(this),this},r.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},r.prototype.getFullValue=function(){return this.__getFullValue()},r.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},r}(An);const Ol=Ug;var Wg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tp=function(){return tp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},tp.apply(this,arguments)},$g=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Wg(r,a),r.prototype.defaults=function(){return{values:{}}},r.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},r.prototype.getId=function(){return this.cid},r.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},r.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(n,i){return n[(0,D.camelCase)(i)]=e[i],n},{}):e},r.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},r.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},r.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},r.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},r.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},r.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},r.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},r.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",tp(tp({},this.getValues()),t))},r}(S.Hn);const qg=$g;var Gg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pd=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Gg(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},r}(S.FE);const Kg=Pd;Pd.prototype.model=qg;var Yg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),li=function(){return li=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},li.apply(this,arguments)},Jg=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Xg=/,(?![^\(]*\))/,Zg=/\s(?![^(]*\))/,Qg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Yg(r,a),r.prototype.defaults=function(){return li(li({},Ol.getDefaults()),{layers:[],layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Ol.callParentInit(Ol,this,t,e);var n=this.get("layers"),i=new Kg(n,{prop:this});i.property=this,i.properties=this.get("properties"),this.set("layers",i,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(i,"add remove",this.__upLayers),Ol.callInit(this,t,e)},r.prototype.getLayers=function(){return this.__getLayers().models},r.prototype.__getLayers=function(){return this.get("layers")},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.__getLayers().at(t)||void 0},r.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},r.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},r.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},r.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var n=t?t.getIndex():-1;n>=0&&(0,_.isNumber)(e)&&e>=0&&e<this.getLayers().length&&n!==e&&(this.removeLayer(t),this.__getLayers().add(t,{at:e}))},r.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={};return this.getProperties().forEach(function(i){var l=i.getId(),f=t[l];n[l]=(0,_.isUndefined)(f)?i.getDefaultValue():f}),this.__getLayers().push({values:n},e)},r.prototype.removeLayer=function(t){return this.__getLayers().remove(t)},r.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},r.prototype.getLayerLabel=function(t){var e="";if(t){var n=this.get("layerLabel"),i=t.getValues(),l=t.getIndex();if(n)e=n(t,{index:l,values:i,property:this});else{var f=[];this.getProperties().map(function(d){f.push(i[d.getId()])}),e=f.filter(Boolean).join(" ")}}return e},r.prototype.getStyleFromLayer=function(t,e){var n;e===void 0&&(e={});var i,l=this.__getJoin(),f=this.__getJoinLayers(),d=this.get("toStyle"),v=this.getName(),g=t.getValues();if(d)i=d(g,{join:l,joinLayers:f,name:v,layer:t,property:this});else{var w=this.getProperties().map(function(T){var V=T.getName(),B=g[T.getId()],X=(0,_.isUndefined)(B)?T.getDefaultValue():B;if(e.number&&Ed(T.getType())){var ot=T.parseValue(B,e.number);X="".concat(ot.value).concat(ot.unit)}return{name:V,value:X}});i=this.isDetached()?w.reduce(function(T,V){return T[V.name]=V.value,T},{}):((n={})[this.getName()]=w.map(function(T){return T.value}).join(l),n)}return e.camelCase?Object.keys(i).reduce(function(T,V){return T[(0,D.camelCase)(V)]=i[V],T},{}):i},r.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var n={};return this.get("preview")&&(n=this.getStyleFromLayer(t,e)),n},r.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,_.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},r.prototype.__upProperties=function(t,e){var n;e===void 0&&(e={});var i=this.getSelectedLayer();i&&(i.upValues(((n={})[t.getId()]=t.__getFullValue(),n)),e.__up||this.__upTargetsStyleProps(e))},r.prototype.__upLayers=function(t,e,n){this.__upTargetsStyleProps(n||e)},r.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return An.prototype.__upTargets.call(this,t,e)},r.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(),t)},r.prototype.__upTargetsStyle=function(t,e){return An.prototype.__upTargetsStyle.call(this,t,e)},r.prototype.__upSelected=function(t,e){var n=(t===void 0?{}:t).noEvent;e===void 0&&(e={});var i=this.em.Styles,l=this.getSelectedLayer(),f=l==null?void 0:l.getValues();f&&this.getProperties().forEach(function(d){var v,g=(v=f[d.getId()])!==null&&v!==void 0?v:"";d.__getFullValue()!==g&&d.upValue(g,li(li({},e),{__up:!0}))}),!n&&i.__trgEv(i.events.layerSelect,{property:this})},r.prototype._up=function(t,e){e===void 0&&(e={});var n=t.__layers,i=n===void 0?[]:n,l=Jg(t,["__layers"]);return!this.isDetached()&&this.__setLayers(i),this.__upSelected({noEvent:!0},e),An.prototype._up.call(this,l,e),this},r.prototype.__setLayers=function(t){t===void 0&&(t=[]);var e=this.__getLayers(),n=t.map(function(i){return{values:i}});e.length===n.length?n.map(function(i,l){var f;return(f=e.at(l))===null||f===void 0?void 0:f.upValues(i.values)}):this.__getLayers().reset(n),this.__upSelected({noEvent:!0})},r.prototype.__parseValue=function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(Xg).map(function(i){return i.trim()}).map(function(i){return e.__parseLayer(i)}).filter(Boolean),n},r.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),n=t.split(Zg),i=this.getProperties();return e?e({value:t,values:n}):i.reduce(function(l,f,d){var v=n[d];return l[f.getId()]=(0,_.isUndefined)(v)?f.getDefaultValue():v,l},{})},r.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;var n=this.getName(),i=this.getProperties(),l=this.getLayerSeparator(),f=this.get("fromStyle"),d=f?f(t,{property:this,name:n,separatorLayers:l}):[];if(!f){var v=this.__splitStyleName(t,n,l).map(function(g){return g.split(e.getSplitSeparator())}).map(function(g){var w={};return i.forEach(function(T,V){var B=g[V];w[T.getId()]=(0,_.isUndefined)(B)?T.getDefaultValue():B}),w});i.forEach(function(g){var w=g.getId();e.__splitStyleName(t,g.getName(),l).map(function(T){var V;return(V={})[w]=T||g.getDefaultValue(),V}).forEach(function(T,V){v[V]=v[V]?li(li({},v[V]),T):T})}),d=v}return(0,_.isArray)(d)?d:[d]},r.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},r.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var n={},i=this.getName(),l=this.getLayers(),f=this.getProperties();if(l.map(function(v){return e.getStyleFromLayer(v,t)}).forEach(function(v){(0,_.keys)(v).map(function(g){n[g]||(n[g]=[]),n[g].push(v[g])})}),(0,_.keys)(n).map(function(v){n[v]=n[v].join(e.__getJoinLayers())}),this.isDetached())n[i]="",!l.length&&f.map(function(v){n[v.getName()]=""});else{var d=f.reduce(function(v,g){return v[g.getName()]="",v},{});n[i]=n[i]||"",n=li(li({},n),d)}return n},r.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,_.isString)(e)?e:t)},r.prototype.__getFullValue=function(){return this.get("detached")?"":this.getStyleFromLayers()[this.getName()]},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget();return this.getLayers().length>0&&!e},r.prototype.clear=function(t){return t===void 0&&(t={}),this.__getLayers().reset(),this.__upTargetsStyleProps(t),An.prototype.clear.call(this),this},r.prototype.__canClearProp=function(){return!1},r}(Ol);const tv=Qg;var ev=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ep=function(){return ep=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ep.apply(this,arguments)},nv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},rv=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Of="data-clear-style",ov=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,_.bindAll)(e,"__change","__updateStyle");var n=t.config||{},i=n.em;e.config=n,e.em=i,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,_.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,_.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(i,"change:device",e.onValueChange);var f=e.init&&e.init.bind(e);return f&&f(),e}return ev(r,a),r.prototype.events=function(){var t;return(t={change:"inputValueChanged"})["click [".concat(Of,"]")]="clear",t},r.prototype.template=function(t){var e=this.pfx,n=this.ppfx;return`
      <div class="`.concat(e,`label" data-sm-label></div>
      <div class="`).concat(n,`fields" data-sm-fields></div>
    `)},r.prototype.templateLabel=function(t){var e=this.pfx,n=this.em,i=t.parent,l=t.attributes,f=l.icon,d=f===void 0?"":f,v=l.info,g=v===void 0?"":v,w=n==null?void 0:n.getConfig().icons,T=(w==null?void 0:w.close)||"";return`
      <span class="`.concat(e,"icon ").concat(d,'" title="').concat(g,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(i?"":'<div class="'.concat(e,'clear" style="display: none" ').concat(Of,">").concat(T,"</div>"),`
    `)},r.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},r.prototype.remove=function(){var t=this;return S.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},r.prototype.updateStatus=function(){var t,e=this,n=e.model,i=e.pfx,l=e.ppfx,f=e.config,d="".concat(l,"four-color"),v="".concat(l,"color-warn"),g=this.$el.children(".".concat(i,"label")),w=this.getClearEl(),T=w?w.style:{};g.removeClass("".concat(d," ").concat(v)),T.display="none",n.hasValue({noParent:!0})&&f.highlightChanged?(g.addClass(d),f.clearProperties&&(T.display="")):n.hasValue()&&f.highlightComputed&&g.addClass(v),(t=this.parent)===null||t===void 0||t.updateStatus()},r.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},r.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(Of,"]"))),this.clearEl},r.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)},r.prototype.onValueChange=function(t,e,n){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},r.prototype.setValue=function(t){var e=this.model,n=(0,_.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(n);this.__setValueInput(n)},r.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},r.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},r.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},r.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(ep(ep({},this._getClbOpts()),{value:t}))},r.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.emit&&this.emit.bind(this);n&&n.apply(void 0,rv([this._getClbOpts()],t,!1))},r.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var n=e.complete,i=e.partial,l=(nv(e,["complete","partial"]),this.model),f=n!==!1&&i!==!0;(0,D.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!f}):l.upValue(t,{partial:!f})},r.prototype._getClbOpts=function(){var t=this,e=t.model;return{el:t.el,createdEl:t.createdEl,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},r.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,n=t.model,i=t.el,l=t.$el,f=n.getName(),d=n.getType(),v=n.get("className")||"",g="".concat(e,"property"),w=d==="number"?"".concat(e).concat(d," ").concat(e,"integer"):"".concat(e).concat(d);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(n)),l.find("[data-sm-label]").append(this.templateLabel(n));var T=this.create&&this.create.bind(this);this.createdEl=T&&T(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(n)),i.className="".concat(g," ").concat(w," ").concat(g,"__").concat(f," ").concat(v).trim(),i.className+=n.isFull()?" ".concat(g,"--full"):"";var V=this.onRender&&this.onRender.bind(this);return V&&V(),this.setValue(n.getValue()),this},r.prototype.onRender=function(){},r}(S.G7);const Ri=ov;var iv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sv=function(a){function r(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var n=e.collection;return e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.render),e}return iv(r,a),r.prototype.addTo=function(t,e,n){this.add(t,null,n)},r.prototype.add=function(t,e,n){n===void 0&&(n={});var i=this.parent,l=this.config,f=e||this.el,d=new t.typeView({model:t,config:l});i&&(d.parent=i),d.render();var v=d.el;this.properties.push(d),(0,$e.$Q)(f,v,n.at)},r.prototype.remove=function(){return S.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},r.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},r.prototype.render=function(){var t=this,e=this.$el,n=this.pfx;this.clearItems();var i=document.createDocumentFragment();return this.collection.forEach(function(l){return t.add(l,i)}),e.empty(),e.append(i),e.attr("class","".concat(n,"properties")),this},r}(S.G7);const Tf=sv;var av=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),np=function(){return np=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},np.apply(this,arguments)};const Ac=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return av(r,a),r.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},r.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),Ri.prototype.remove.apply(this,arguments),this},r.prototype.onValueChange=function(){},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.get("properties");if(n.length&&!this.props){var i=e.isDetached(),l=new Tf({config:np(np({},this.config),{highlightComputed:i,highlightChanged:i}),collection:n,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},r.prototype.clearCached=function(){Ri.prototype.clearCached.apply(this,arguments),delete this.props},r}(Ri);var lv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return lv(r,a),r.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},r.prototype.template=function(){var t=this,e=t.pfx,n=t.ppfx,i=t.em,l=i==null?void 0:i.getConfig().icons,f=(l==null?void 0:l.close)||"",d=(l==null?void 0:l.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(n,`no-touch-actions" data-move-layer>
          `).concat(d,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(f,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.propertyView=t.propertyView;var i=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(i,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},r.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},r.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},r.prototype.select=function(){this.model.select()},r.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},r.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},r.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},r.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var n=this.getPreviewEl(),i=t.getStylePreview({number:{min:-3,max:3}}),l=(0,_.keys)(i).map(function(f){return"".concat(f,":").concat(i[f])}).join(";");n.setAttribute("style",l)}},r.prototype.updateVisibility=function(){var t,e=this,n=e.pfx,i=e.model,l=e.propertyView,f=this.getPropertiesWrapper(),d=i.isSelected();f.style.display=d?"":"none",this.$el[d?"addClass":"removeClass"]("".concat(n,"active")),d&&f.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},r.prototype.render=function(){var t=this,e=t.el,n=t.pfx,i=t.model;return e.innerHTML=this.template(),e.className="".concat(n,"layer"),i.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},r}(S.G7);const uv=cv;var pv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fv=function(a){function r(t){var e=a.call(this,t)||this,n=e.collection,i=t.config||{},l=i.em,f=i.stylePrefix||"",d=i.pStylePrefix||"";e.config=i,e.pfx=f,e.ppfx=d,e.propertyView=t.propertyView,e.className="".concat(f,"layers ").concat(d,"field"),e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.reset),e.items=[];var v=l==null?void 0:l.Utils;return e.sorter=v?new v.Sorter({container:e.el,ignoreViewChildren:1,containerSel:".".concat(f,"layers"),itemSel:".".concat(f,"layer"),pfx:i.pStylePrefix}):"",n.view=e,e.$el.data("model",n),e.$el.data("collection",n),e}return pv(r,a),r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var i=e||null,l=this,f=l.propertyView,d=l.config,v=l.sorter,g=l.$el,w=new uv({model:t,config:d,sorter:v,propertyView:f}),T=w.render().el;if(this.items.push(w),i)i.appendChild(T);else if(n!==void 0){var V="before";g.children().length===n&&(n--,V="after"),n<0?g.append(T):g.children().eq(n)[V](T)}else g.append(T);return T},r.prototype.reset=function(t,e){this.clearItems(),this.render()},r.prototype.remove=function(){return this.clearItems(),S.G7.prototype.remove.apply(this,arguments),this},r.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},r.prototype.render=function(){var t=this,e=this.$el,n=this.sorter,i=document.createDocumentFragment();return e.empty(),this.collection.forEach(function(l){return t.addToCollection(l,i)}),e.append(i),e.attr("class",this.className),n&&(n.plh=null),this},r}(S.G7);const dv=fv;var hv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tl=function(){return Tl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Tl.apply(this,arguments)},gv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return hv(r,a),r.prototype.events=function(){return Tl(Tl({},Ac.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},r.prototype.templateInput=function(){var t=this.pfx,e=this.em,n=e==null?void 0:e.getConfig().icons,i=(n==null?void 0:n.plus)||"+";return`
      <div class="`.concat(t,"field ").concat(t,`stack">
        <button type="button" id="`).concat(t,`add" data-add-layer>
          `).concat(i,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},r.prototype.init=function(){var t=this.model;this.listenTo(t.__getLayers(),"change reset",this.updateStatus)},r.prototype.addLayer=function(){this.model.addLayer({},{at:0})},r.prototype.setValue=function(){},r.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),Ac.prototype.remove.apply(this,arguments),this},r.prototype.clearCached=function(){Ac.prototype.clearCached.apply(this,arguments),delete this.layersView},r.prototype.onRender=function(){var t=this,e=t.model,n=t.el,i=t.config,l=e.get("properties");if(l.length&&!this.props){var f=new Tf({config:Tl(Tl({},i),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});f.render();var d=new dv({collection:e.__getLayers(),config:i,propertyView:this});d.render(),n.querySelector("[data-layers-wrapper]").appendChild(d.el),this.props=f,this.layersView=d}},r}(Ac);const vv=gv;var mv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rp=function(){return rp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},rp.apply(this,arguments)};const yv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return mv(r,a),r.prototype.events=function(){return rp(rp({},Ri.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},r.prototype.templateInput=function(){var t,e=this.pfx,n=this.em,i=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,l=i==null?void 0:i.close;return`
      <div class="`.concat(e,"field ").concat(e,`file">
        <div id='`).concat(e,`input-holder'>
          <div class="`).concat(e,`btn-c">
            <button class="`).concat(e,'btn" id="').concat(e,`images" type="button" data-open-assets>
              `).concat(n.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`preview-file" data-preview-box>
          <div id="`).concat(e,'preview-file" class="').concat(e,`preview-file-cnt" data-preview></div>
          <div id="`).concat(e,'close" class="').concat(e,'preview-file-close" data-clear-asset>').concat(l,`</div>
        </div>
      </div>
    `)},r.prototype.__setValueInput=function(t){var e=this.model,n=this.el,i=e.getDefaultValue(),l=n.querySelector("[data-preview-box]"),f=n.querySelector("[data-preview]");l.style.display=t&&t!==i?"":"none",f.style.backgroundImage=t||e.getDefaultValue()},r.prototype.openAssetManager=function(){var t,e=this,n=(t=this.em)===null||t===void 0?void 0:t.Assets;n==null||n.open({select:function(i,l){var f=(0,_.isString)(i)?i:i.get("src");e.model.upValue(f,{partial:!l}),l&&n.close()},types:["image"],accept:"image/*"})},r}(Ri);var bv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const zi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return bv(r,a),r.prototype.templateInput=function(t){return""},r.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},r.prototype.setValue=function(t){},r.prototype.onRender=function(){var t=this,e=t.ppfx,n=t.model,i=t.el;if(!this.inputInst){var l=n.input;l.ppfx=e,l.render(),i.querySelector(".".concat(e,"fields")).appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},r.prototype.clearCached=function(){Ri.prototype.clearCached.apply(this,arguments),this.inputInst=null},r}(Ri);var wv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const _v=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return wv(r,a),r.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},r.prototype.remove=function(){var t=this;zi.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(n){return t[n]=null}),this},r.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},r.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,n=e.ppfx,i=e.model,l=e.em,f=e.el,d=new gc({target:l,model:i,ppfx:n,onChange:this.__handleChange}).render();f.querySelector(".".concat(n,"fields")).appendChild(d.el),this.input=(t=d.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=d}},r}(zi);var Cv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),op=function(){return op=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},op.apply(this,arguments)},Ad=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};const kf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Cv(r,a),r.prototype.defaults=function(){return op(op({},An.getDefaults()),{options:[],full:0})},r.prototype.getOptions=function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]},r.prototype.getOption=function(t){var e=this,n=(0,D.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(i){return e.getOptionId(i)===n})[0]||null},r.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},r.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(Ad(Ad([],e,!0),[t],!1))}return this},r.prototype.getOptionId=function(t){return(0,D.isDef)(t.id)?t.id:t.value},r.prototype.getOptionLabel=function(t,e){var n;e===void 0&&(e={});var i=e.locale,l=i===void 0||i,f=((0,_.isString)(t)?this.getOption(t):t)||{},d=this.getOptionId(f),v=f.label||f.name||d,g=e.property||this.getId();return l&&((n=this.em)===null||n===void 0?void 0:n.t("styleManager.options.".concat(g,".").concat(d)))||v},r.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];An.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},r.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},r}(An);var xv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const jd=function(a){function r(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return xv(r,a),r.prototype.templateInput=function(){var t=this.pfx,e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`select">
        <span id="`).concat(t,`input-holder"></span>
        <div class="`).concat(e,`sel-arrow">
          <div class="`).concat(e,`d-s-arrow"></div>
        </div>
      </div>
    `)},r.prototype.updateOptions=function(){delete this.input,this.onRender()},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.getOptions();if(!this.input){var i=[];n.forEach(function(f){var d=e.getOptionId(f),v=e.getOptionLabel(d),g=f.style?f.style.replace(/"/g,"&quot;"):"",w=g?'style="'.concat(g,'"'):"",T=d.replace(/"/g,"&quot;");i.push('<option value="'.concat(T,'" ').concat(w,">").concat(v,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(i.join(""),"</select>"),this.input=l.firstChild}},r.prototype.__setValueInput=function(t){var e=this.model,n=this.getInputEl(),i=e.getOptions()[0],l=i?e.getOptionId(i):"";n&&(n.value=t||l)},r}(Ri);var Sv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ip=function(){return ip=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ip.apply(this,arguments)};const Ov=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Sv(r,a),r.prototype.defaults=function(){return ip(ip({},kf.getDefaults()),{full:1})},r}(kf);var Tv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const kv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Tv(r,a),r.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},r.prototype.onRender=function(){var t=this.pfx,e=this.ppfx,n=this.model,i="".concat(e,"radio-item-label"),l=n.getName(),f=n.getOptions(),d="".concat(t,"radio ").concat(t,"radio-").concat(l),v=n.cid;if(!this.input){var g=[];f.forEach(function(T){var V=T.className?"".concat(T.className," ").concat(t,"icon ").concat(i):"",B=n.getOptionId(T),X="".concat(l,"-").concat(B,"-").concat(v),ot=V?"":n.getOptionLabel(B),tt=T.title?'title="'.concat(T.title,'"'):"",At=n.getValue()===B?"checked":"";g.push(`
          <div class="`.concat(e,`radio-item">
            <input type="radio" class="`).concat(d,'" id="').concat(X,'" name="').concat(l,"-").concat(v,'" value="').concat(B,'" ').concat(At,`/>
            <label class="`).concat(V||i,'" ').concat(tt,' for="').concat(X,'">').concat(ot,`</label>
          </div>
        `))});var w=this.el.querySelector(".".concat(e,"field"));w.innerHTML='<div class="'.concat(e,'radio-items">').concat(g.join(""),"</div>"),this.input=w.firstChild}},r.prototype.__setValueInput=function(t){var e,n=this.model,i=t||n.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(i,'"]'));l&&(l.checked=!0)},r}(jd);var Ev=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xa=function(){return xa=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xa.apply(this,arguments)};const sp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ev(r,a),r.prototype.defaults=function(){return xa(xa({},An.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},r.prototype.getUnits=function(){return this.get("units")||[]},r.prototype.getUnit=function(){return this.get("unit")},r.prototype.getMin=function(){return this.get("min")},r.prototype.getMax=function(){return this.get("max")},r.prototype.getStep=function(){return this.get("step")},r.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),An.callParentInit(An,this,t,e);var n=this.get("unit"),i=this.getUnits();this.input=(0,D.hasWin)()?new Hu({model:this}):void 0,i.length&&!n&&this.set("unit",i[0],{silent:!0}),An.callInit(this,t,e)},r.prototype.__getClearProps=function(){return xa(xa({},An.prototype.__getClearProps()),{unit:""})},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n=An.prototype.parseValue.apply(this,arguments),i=this.input.validateInputValue(n.value,xa({deepCheck:1},e)),l=i.value,f=i.unit;return n.value=l,n.unit=f,n},r.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),n=(0,_.isUndefined)(t)?"":"".concat(t),i=!(0,_.isUndefined)(e)&&n?e:"",l="".concat(n).concat(i);return An.prototype.getFullValue.apply(this,[l])},r}(An);var Pv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ap=function(){return ap=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ap.apply(this,arguments)};const Av=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Pv(r,a),r.prototype.defaults=function(){return ap(ap({},sp.getDefaults()),{showInput:1})},r}(sp);var jv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lp=function(){return lp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},lp.apply(this,arguments)};const Mv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return jv(r,a),r.prototype.events=function(){return lp(lp({},zi.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},r.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},r.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},r.prototype.inputValueChanged=function(){this.model.upValue(this.getSliderEl().value)},r.prototype.inputValueChangedSoft=function(){this.model.upValue(this.getSliderEl().value,{partial:!0})},r.prototype.setValue=function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(n.value),zi.prototype.setValue.apply(this,arguments)},r.prototype.onRender=function(){zi.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},r.prototype.clearCached=function(){zi.prototype.clearCached.apply(this,arguments),delete this.slider},r}(zi),Ef=S.FE.extend(Ot).extend({extendViewApi:1,init:function(){var a=this.opts,r=this.em,t=a.module||(r==null?void 0:r.get("StyleManager"));t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:tv,view:vv,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:Ol,view:Ac,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:An,view:yv,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:An,view:_v,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:kf,view:jd,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:Ov,view:kv,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:Av,view:Mv,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:sp,view:zi,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:sp,view:zi,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:An,view:Ri,isType:function(a){return a.type="base",a}}]});var Lv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cp=function(){return cp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},cp.apply(this,arguments)},Dv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Nv=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};const Md=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,i=e.em;n.em=i;var l=t||{},f=n.buildProperties(l.buildProps),d=n.get("name")||"",v=[];!n.get("id")&&n.set("id",d.replace(/ /g,"_").toLowerCase()),v=(v=f?n.extendProperties(f):n.get("properties").map(function(w){return(0,_.isString)(w)?n.buildProperties(w)[0]:w}).filter(Boolean)).map(function(w){return n.checkExtend(w)});var g=new Ef(v,{em:i});return g.sector=n,n.set("properties",g),n}return Lv(r,a),r.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.get("id")},r.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},r.prototype.setName=function(t){return this.set("name",t)},r.prototype.isOpen=function(){return!!this.get("open")},r.prototype.setOpen=function(t){return this.set("open",t)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.get("properties");return(e.models?Nv([],e.models,!0):e).filter(function(n){var i=!0;return t.withValue&&(i=n.hasValue({noParent:!0})),t.withParentValue&&(i=!n.hasValue({noParent:!0})&&n.hasValue()),i})},r.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},r.prototype.addProperty=function(t,e){return this.get("properties").add(this.checkExtend(t),e)},r.prototype.extendProperties=function(t,e,n){n===void 0&&(n=!1);for(var i=t.length,l=e||this.get("properties"),f=this.get("extendBuilded"),d=[],v=0,g=l.length;v<g;v++){for(var w=l[v],T=0,V=0;V<i;V++){var B=t[V];if(!(w.property!=B.property&&w.id!=B.property)){var X=w.properties;X&&X.length&&(w.properties=this.extendProperties(B.properties||[],X,1)),t[V]=f?(0,_.extend)(B,w):w,d[V]=t[V],T=1}}T||(t.push(w),d.push(w))}return n?d.filter(function(ot){return ot}):t},r.prototype.checkExtend=function(t){var e=((0,_.isString)(t)?{extend:t}:t)||{},n=e.extend,i=Dv(e,["extend"]);return n?cp(cp({},this.buildProperties([n])[0]||{}),i):t},r.prototype.buildProperties=function(t){var e,n=t||[];if(!n.length)return[];var i=(e=this.em)===null||e===void 0?void 0:e.get("StyleManager").builtIn;return i==null?void 0:i.build(n)},r}(S.Hn);var Iv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),up=function(){return up=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},up.apply(this,arguments)};const Vv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Iv(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={});var n=e.module,i=e.em;this.em=i,this.module=n,this.listenTo(this,"reset",this.onReset)},r.prototype.model=function(t,e){e===void 0&&(e={});var n=e.collection.em;return new Md(t,up(up({},e),{em:n}))},r.prototype.onReset=function(t,e){e===void 0&&(e={}),(e.previousModels||[]).forEach(function(n){return n.get("properties").reset()})},r}(S.FE);var Ps=function(){return Ps=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ps.apply(this,arguments)},Fv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Sa=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},dr=function(a){return a.map(function(r){return{id:r}})},Hv=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var r=", sans-serif",t=["flex-start","flex-end","center"],e=Sa(Sa([],t,!0),["baseline","stretch"],!1);this.optsBgSize=dr(["auto","cover","contain"]),this.optsBgAttach=dr(["scroll","fixed","local"]),this.optsBgRepeat=dr(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=dr(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=dr(["visible","hidden","scroll","auto"]),this.optsDir=dr(["row","row-reverse","column","column-reverse"]),this.opstDisplay=dr(["block","inline","inline-block","flex","none"]),this.optsTransitFn=dr(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=dr(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=dr(["none","left","right"]),this.optsPos=dr(["static","relative","absolute","fixed"]),this.optsTextAlign=dr(["left","center","right","justify"]),this.optsFlexAlign=dr(e),this.optsJustCont=dr(Sa(Sa([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=dr(Sa(Sa([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=dr(Sa(["auto"],e,!0)),this.optsTransitProp=dr(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=dr(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=dr(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+r,"Arial Black, Gadget"+r,"Brush Script MT"+r,"Comic Sans MS, cursive"+r,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+r,"Impact, Charcoal"+r,"Lucida Sans Unicode, Lucida Grande"+r,"Tahoma, Geneva"+r,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+r,"Verdana, Geneva"+r].map(function(n){return{id:n,label:n.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(r){var t=this;return function(){return r.map(function(e){if((0,_.isString)(e))return t.get(e);var n=e.extend,i=Fv(e,["extend"]);return Ps(Ps({},t.get(n)),i)})}},a.prototype.init=function(){var r=this,t=this,e=t.fixedValues,n=t.requireFlex,i=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:i,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:n},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:i,default:"0",requiresParent:n}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black"}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:n},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:n},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(f,d){var v=d.values,g=v["box-shadow-h"],w=v["box-shadow-v"],T=v["box-shadow-blur"],V=v["box-shadow-spread"];return"".concat(g," ").concat(w," ").concat(T," ").concat(V)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(f,d){var v=d.values,g=v["text-shadow-h"],w=v["text-shadow-v"],T=v["text-shadow-blur"];return"".concat(g," ").concat(w," ").concat(T)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(f,d){var v=d.values;return[v["background-repeat-sub"]||"",v["background-position-sub"]||"",v["background-attachment-sub"]||"",v["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(f,d){var v=d.property,g=f[d.name]||"",w=v.getLayerSeparator();return g?g.split(w).map(function(T){var V=v.__parseFn(T);return{"transform-type":V.name,"transform-value":V.value}}):[]},toStyle:function(f,d){var v;return(v={})[d.name]="".concat(f["transform-type"],"(").concat(f["transform-value"],")"),v},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(f){var d=f.property;if(f.to.value){var v=d.getOption(),g=Ps({},v.propValue||{}),w=d.getParent().getProperty("transform-value"),T=w.getUnit();(!T||(g==null?void 0:g.units.indexOf(T))<0)&&(g.unit=(g==null?void 0:g.units[0])||""),w.up(g)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(f){var d=f[0],v=f[1],g=f[2];r.add(d,v||{},{from:g})}),this},a.prototype.add=function(r,t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.from||"",i=this.props[n||r]||{},l=Ps(Ps(Ps({},i),{property:r}),t);return l.properties&&(0,_.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[r]=l,l},a.prototype.get=function(r){return this.props[r]},a.prototype.build=function(r){var t=this,e=[];return((0,_.isString)(r)?[r]:r).forEach(function(n){e.push(t.get(n)||{property:n})}),e},a}();const Rv=Hv;var zv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bv=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Uv=function(a){function r(t){var e=a.call(this,t)||this,n=t.config||{},i=e.model,l=n.em;return e.config=n,e.em=l,e.pfx=n.stylePrefix||"",e.listenTo(i,"destroy remove",e.remove),e.listenTo(i,"change:open",e.updateOpen),e.listenTo(i,"change:visible",e.updateVisibility),e}return zv(r,a),r.prototype.template=function(t){var e,n=t.pfx,i=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,f=(l==null?void 0:l.caret)||"",d="".concat(n,"sector-");return et(Ld||(Ld=Bv([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),d,d,f,d,i)},r.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},r.prototype.updateOpen=function(){var t=this,e=t.$el,n=t.model,i=t.pfx,l=n.isOpen();e[l?"addClass":"removeClass"]("".concat(i,"open")),this.getPropertiesEl().style.display=l?"":"none"},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.getPropertiesEl=function(){var t=this.$el,e=this.pfx;return t.find(".".concat(e,"properties")).get(0)},r.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},r.prototype.renderProperties=function(){var t=this.model,e=this.config,n=t.get("properties");if(n){var i=new Tf({collection:n,config:e});this.$el.append(i.render().el)}},r.prototype.render=function(){var t=this,e=t.pfx,n=t.model,i=t.$el,l=n.getId(),f=n.getName();return i.html(this.template({pfx:e,label:f})),this.renderProperties(),i.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},r}(S.G7);const Wv=Uv;var Ld,$v=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qv=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.module,i=t.config,l=e.collection;return e.pfx=(i==null?void 0:i.stylePrefix)||"",e.ppfx=(i==null?void 0:i.pStylePrefix)||"",e.config=i,e.module=n,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return $v(r,a),r.prototype.remove=function(){var t=this;return S.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},r.prototype.addTo=function(t,e,n){n===void 0&&(n={}),this.addToCollection(t,null,n)},r.prototype.addToCollection=function(t,e,n){n===void 0&&(n={});var i=this.config,l=this.el,f=e||l,d=new Wv({model:t,config:i}).render().el;return(0,$e.$Q)(f,d,n.at),d},r.prototype.render=function(){var t=this,e=this,n=e.$el,i=e.pfx,l=e.ppfx;n.empty();var f=document.createDocumentFragment();return this.collection.each(function(d){return t.addToCollection(d,f)}),n.append(f),n.addClass("".concat(i,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},r}(S.G7);const Gv=qv;var Kv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Oa=function(){return Oa=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Oa.apply(this,arguments)},Dd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Nd="style",jc="".concat(Nd,":"),Pf="".concat(jc,"sector"),Yv="".concat(Pf,":add"),Jv="".concat(Pf,":remove"),Xv="".concat(Pf,":update"),Af="".concat(jc,"property"),Zv="".concat(Af,":add"),Qv="".concat(Af,":remove"),tm="".concat(Af,":update"),Id="".concat(jc,"layer:select"),jf="".concat(jc,"target"),em="".concat(jc,"custom"),Vd=function(a){return a||a===0},nm={all:Nd,sectorAdd:Yv,sectorRemove:Jv,sectorUpdate:Xv,propertyAdd:Zv,propertyRemove:Qv,propertyUpdate:tm,layerSelect:Id,target:jf,custom:em},rm=function(a){function r(t){var e=a.call(this,t,"StyleManager",new Vv([],{em:t}),nm,Hg)||this;e.Sector=Md,e.storageKey="",(0,_.bindAll)(e,"__clearStateTarget");var n=e.config,i=n.pStylePrefix;i&&(n.stylePrefix=i+n.stylePrefix),e.builtIn=new Rv,e.properties=new Ef([],{em:t,module:e}),e.sectors=e.all;var l=new S.Hn({targets:[]});e.model=l,e.upAll=(0,_.debounce)(function(){return e.__upSel()},0),l.listenTo(t,"component:toggled component:update:classes change:state change:device frame:resized selector:type",e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var f=(0,_.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",f);var d=(0,_.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(Id," ").concat(jf),d),l.on("change:lastTarget",function(){return t.trigger(jf,e.getSelected())}),e}return Kv(r,a),r.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.__trgEv=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(e=this.em).trigger.apply(e,Dd([t],n,!1))},r.prototype.__clearStateTarget=function(){var t=this,e=this.em,n=this.__getStateTarget();n&&(e==null||e.skip(function(){e.Css.remove(n),t.model.set({stateTarget:null})}))},r.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.addSector=function(t,e,n){n===void 0&&(n={});var i=this.getSector(t);return i||(e.id=t,i=this.sectors.add(e,n)),i},r.prototype.getSector=function(t,e){e===void 0&&(e={});var n=this.sectors.where({id:t})[0];return!n&&e.warn&&this._logNoSector(t),n||null},r.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,n=e&&e.models?t.array?Dd([],e.models,!0):e:[];return t.visible?n.filter(function(i){return i.isVisible()}):n},r.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},r.prototype.addProperty=function(t,e,n){n===void 0&&(n={});var i=this.getSector(t,{warn:!0}),l=null;return i&&(l=i.addProperty(e,n)),l},r.prototype.getProperty=function(t,e){var n,i=this.getSector(t,{warn:!0});return i&&(n=i.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),n},r.prototype.getProperties=function(t){var e,n=this.getSector(t,{warn:!0});return n&&(e=n.properties),e},r.prototype.removeProperty=function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},r.prototype.select=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,_.isArray)(t)?t:[t],f=e.stylable,d=i.Css,v=[];l.filter(Boolean).forEach(function(X){var ot=X;if((0,_.isString)(X)){var tt=d.getRule(X)||d.setRule(X);!(0,_.isUndefined)(f)&&tt.set({stylable:f}),ot=tt}v.push(ot)});var g=e.component||v.filter(function(X){return(0,D.isComponent)(X)}).reverse()[0];v=v.map(function(X){return n.getModelToStyle(X)});var w=i.getState(),T=v.slice().reverse()[0],V=this.getParentRules(T,{state:w,component:g}),B=this.__getStateTarget();return i.skip(function(){var X;if(w&&(!((X=T==null?void 0:T.getState)===null||X===void 0)&&X.call(T))){var ot=T.getStyle();B?B.setStyle(ot):B=d.getAll().add({selectors:"gjs-selected",style:ot,shallow:!0,important:!0})}else B&&(d.remove(B),B=void 0)}),this.model.set({targets:v,lastTarget:T,lastTargetParents:V,stateTarget:B,component:g}),this.__upProps(e),v},r.prototype.getSelected=function(){return this.model.get("lastTarget")||null},r.prototype.getSelectedAll=function(){return this.model.get("targets")},r.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},r.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},r.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var n=this.getSelected(),i=this.__getStateTarget();n&&(i==null||i.setStyle(n.getStyle(),e))},r.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},r.prototype.getBuiltInAll=function(){return this.builtIn.props},r.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},r.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var n=this.em,i=e.skipAdd;if(n&&(t!=null&&t.toHTML)){var l=n.getConfig(),f=n.UndoManager,d=n.Css,v=n.Selectors,g=v?v.getConfig():{},w=l.devicePreviewMode?"":n.get("state"),T=t.get("classes").getStyleable(),V=T.length,B=!g.componentFirst||e.useClasses,X={noCount:1},ot={state:w,addOpts:X},tt=void 0;if(f.stop(),V&&B){var At=n.getCurrentMedia();(tt=d.get(T,w,At))||i||(tt=d.add(T,w,At,{},X))}else if(l.avoidInlineStyle){var Ft=t.getId();!(tt=d.getIdRule(Ft,ot))&&!i&&(tt=d.setIdRule(Ft,{},ot)),t.is("wrapper")&&tt.set("wrapper",1,X)}tt&&(t=tt),f.start()}return t},r.prototype.getParentRules=function(t,e){var n=e===void 0?{}:e,i=n.state,l=n.component,f=this.em,d=[];if(f&&t){var v=l,g=f.Css,w=f.CodeManager.getGenerator("css"),T=t.toHTML?t:t.getComponent(),V={combination:!0,array:!0},B=[],X=[],ot=[];T?(B=g.getRules("#".concat(T.getId())),ot=(X=v?g.getRules(v.getSelectors().getFullName(V)):[]).concat(B)):(B=v?g.getRules("#".concat(v.getId())):[],X=g.getRules(t.getSelectors().getFullName(V)),ot=B.concat(X));var tt=ot.filter(function(At){return(0,_.isUndefined)(i)?1:At.get("state")===i}).sort(w.sortRules).reverse();d=tt.slice(tt.indexOf(t)+1)}return d},r.prototype.addType=function(t,e){this.properties.addType(t,e)},r.prototype.getType=function(t){return this.properties.getType(t)},r.prototype.getTypes=function(){return this.properties.getTypes()},r.prototype.createType=function(t,e){var n=e===void 0?{}:e,i=n.model,l=i===void 0?{}:i,f=n.view,d=f===void 0?{}:f,v=this.config,g=this.getType(t);if(g)return new g.view(Oa({model:new g.model(l),config:v},d))},r.prototype.render=function(){var t=this,e=t.config,n=t.em,i=t.SectView,l=i&&i.el;return this.SectView=new Gv({el:l,em:n,config:e,module:this,collection:this.sectors}),this.SectView.render().el},r.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},r.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var n=this.getSelected();if(n){var i=this.sectors,l=this.model.get("component"),f=this.getSelectedParents(),d=n.getStyle(),v=f.map(function(g){return{target:g,style:g.getStyle()}});i.map(function(g){g.getProperties().map(function(w){e.__upProp(w,d,v,t)})}),i.forEach(function(g){var w=g.getProperties();w.forEach(function(V){var B=V.__checkVisibility({target:n,component:l,sectors:i});V.set("visible",B)});var T=w.some(function(V){return V.isVisible()});g.set("visible",T)})}},r.prototype.__upProp=function(t,e,n,i){var l=this,f=t.getName(),d=e[f],v=Vd(d),g=t.getType()==="stack",w=t.getType()==="composite",T=Oa(Oa({},i),{__up:!0}),V=!w&&!g,B=g?t.__getLayersFromStyle(e):[],X=w?t.__getPropsFromStyle(e):{},ot=v?d:null,tt=null;if(g&&B===null||w&&X===null){var At=g?"__getLayersFromStyle":"__getPropsFromStyle";if(de=n.filter(function(on){return t[At](on.style)!==null})[0]){ot=de.style[f],tt=de.target;var Ft=t[At](de.style);g?B=Ft:X=Ft}}else if(!v){var de;ot=null,(de=n.filter(function(on){return Vd(on.style[f])})[0])&&(ot=de.style[f],tt=de.target)}if(t.__setParentTarget(tt),V&&t.__getFullValue()!==ot&&t.upValue(ot,T),g&&t.__setLayers(B||[]),w){var _e=t.getProperties();if(t.isDetached()){var Ne=t.__getPropsFromStyle(e,{byName:!0})||{},We=n.map(function(on){return Oa(Oa({},on),{style:t.__getPropsFromStyle(on.style,{byName:!0})||{}})});_e.map(function(on){return l.__upProp(on,Ne,We,i)})}else t.__setProperties(X||{},T),t.getProperties().map(function(on){return on.__setParentTarget(tt)})}},r.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},r}(Nt);const om=rm;var im=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xr=function(){return xr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xr.apply(this,arguments)},Mf=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Lf=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},sm=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},am=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};G().$=lt.default;var lm=[wh,fh,Ph,Og,dl,te,qp,om,ms,Ih,yg,Qh,Dg,lh,Gl,je,yc,Ap,Dn,$t,Fg,Xl],cm=[];(function(a){var r=a.$;if(r&&r.prototype&&r.prototype.constructor.name!=="jQuery"){var t=r.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var i=this.get(0);return i&&i.focus(),this},t.bind=function(i,l){return this.on(i,l)},t.unbind=function(i,l){if((0,_.isObject)(i)){for(var f in i)i.hasOwnProperty(f)&&this.off(f,i[f]);return this}return this.off(i,l)},t.click=function(i){return i?this.on("click",i):this.trigger("click")},t.change=function(i){return i?this.on("change",i):this.trigger("change")},t.keydown=function(i){return i?this.on("keydown",i):this.trigger("keydown")},t.delegate=function(i,l,f,d){return d||(d=f),this.on(l,i,function(v){v.data=f,d(v)})},t.scrollLeft=function(){var i=this.get(0),l=(i=i.nodeType==9?i.defaultView:i)instanceof Window?i:null;return l?l.pageXOffset:i.scrollLeft||0},t.scrollTop=function(){var i=this.get(0),l=(i=i.nodeType==9?i.defaultView:i)instanceof Window?i:null;return l?l.pageYOffset:i.scrollTop||0};var e=r.prototype.offset;t.offset=function(i){var l,f;return i&&(l=i.top,f=i.left),l!==void 0&&this.css("top","".concat(l,"px")),f!==void 0&&this.css("left","".concat(f,"px")),e.call(this)},r.map=function(i,l){for(var f=[],d=0;d<i.length;d++)f.push(l(i[d],d));return f};var n=Array.prototype.indexOf;r.inArray=function(i,l,f){return l==null?-1:n.call(l,i,f)},r.Event=function(i,l){if(!(this instanceof r.Event))return new r.Event(i,l);this.type=i,this.isDefaultPrevented=function(){return!1}}}})({$:lt.default});var Fd={debug:console.log,info:console.info,warning:console.warn,error:console.error},um=function(a){function r(t){t===void 0&&(t={});var e=a.call(this)||this;e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var n=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new M),e.set("dmode",n.dragMode);var i=n.el,l=n.log,f=l===!0?(0,_.keys)(Fd):(0,_.isArray)(l)?l:[];return(0,_.bindAll)(e,"initBaseColorPicker"),i&&n.fromElement&&(n.components=i.innerHTML),e.attrsOrig=i?(0,_.toArray)(i.attributes).reduce(function(d,v){return d[v.nodeName]=v.nodeValue,d},{}):"",n.components&&!n.pageManager&&(n.pageManager={pages:[{component:n.components}]}),lm.forEach(function(d){return e.loadModule(d)}),cm.forEach(function(d){return e.tsLoadModule(d)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),f.forEach(function(d){return e.listenLog(d)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(d){var v=d.from,g=d.to;e.listenTo(e,v,function(){for(var w=[],T=0;T<arguments.length;T++)w[T]=arguments[T];e.trigger.apply(e,am([g],w,!1)),e.logWarning("The event '".concat(v,"' is deprecated, replace it with '").concat(g,"'"))})}),e}return im(r,a),r.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(r.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),r.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},r.prototype.getContainer=function(){return this.config.el},r.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),Fd[t])},Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),r.prototype.getConfig=function(t){var e=this.config;return(0,_.isUndefined)(t)?e:e[t]},r.prototype.loadOnStart=function(){var t=this,e=this.config,n=e.projectData,i=e.headless,l=this.get("StorageManager");this.toLoad.forEach(function(v){return v.onLoad()});var f=function(){t.modules.forEach(function(v){return v.postLoad&&v.postLoad(t)}),t.set("readyLoad",1)};i?(n&&this.loadData(n),f()):setTimeout(function(){return Mf(t,void 0,void 0,function(){var v;return Lf(this,function(g){switch(g.label){case 0:return n?(this.loadData(n),[3,5]):[3,1];case 1:if(!(l!=null&&l.canAutoload()))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.load()];case 3:return g.sent(),[3,5];case 4:return v=g.sent(),this.logError(v),[3,5];case 5:return f(),[2]}})})});var d=new r({noticeOnUnload:!1,storageManager:!1,undoManager:!1});["PageManager","Canvas"].forEach(function(v){return d.get(v).onLoad()}),this.set("shallow",d)},r.prototype.updateChanges=function(){var t=this,e=this.get("StorageManager"),n=this.getDirtyCount();this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return t.trigger("update")}),this.config.noticeOnUnload&&(window.onbeforeunload=n?function(){return!0}:null),e.isAutosave()&&n>=e.getStepsBeforeSave()&&this.store().catch(function(i){return t.logError(i)})},r.prototype.loadModule=function(t){var e=this.config,n=new t(this),i=n.name.charAt(0).toLowerCase()+n.name.slice(1),l=(0,_.isUndefined)(e[i])?e[n.name]:e[i],f=l===!0?{}:l||{};return f.pStylePrefix=e.pStylePrefix||"",(0,_.isUndefined)(l)||l||(f._disable=1),n.storageKey&&n.store&&n.load&&this.storables.push(n),f.em=this,n.init(xr({},f)),!n.private&&this.set(n.name,n),n.onLoad&&this.toLoad.push(n),this.modules.push(n),this},r.prototype.tsLoadModule=function(t){var e=new(t.default||t)(this);return e.storageKey&&e.store&&e.load&&this.storables.push(e),!e.private&&this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),this},r.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},r.prototype.getEditor=function(){return this.get("Editor")},r.prototype.handleUpdates=function(t,e,n){var i=this;n===void 0&&(n={}),this.__skip||n.temporary||n.noCount||n.avoidStore||!this.get("ready")||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=i.getDirtyCount()||0,f=(n.unset,sm(n,["unset"]));i.set("changesCount",l+1,f)},0))},r.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},r.prototype.componentHovered=function(t,e,n){var i=this.previous("componentHovered");i&&this.trigger("component:unhovered",i,n),e&&this.trigger("component:hovered",e,n)},r.prototype.getSelected=function(){return this.selected.lastComponent()},r.prototype.getSelectedAll=function(){return this.selected.allComponents()},r.prototype.setSelected=function(t,e){var n=this;e===void 0&&(e={});var i=e.event,l=i&&(i.ctrlKey||i.metaKey),f=(i||{}).shiftKey,d=((0,_.isArray)(t)?t:[t]).map(function(T){return(0,D.getModel)(T,lt.default)}),v=this.getSelectedAll(),g=this.getConfig().multipleSelection,w=(0,_.isArray)(t);w&&this.removeSelected(v.filter(function(T){return!(0,_.contains)(d,T)})),d.forEach(function(T){var V=(0,D.getModel)(T,void 0);if(V&&(n.trigger("component:select:before",V,e),!V.get("selectable")||e.abort)){if(!e.useValid)return;for(var B=V.parent();B&&!B.get("selectable");)B=B.parent();V=B}if(l&&g)return n.toggleSelected(V);if(f&&g){n.clearSelection(n.get("Canvas").getWindow());var X,ot,tt=V.collection,At=V.index();if(n.getSelectedAll().forEach(function(Ft){var de=Ft.collection,_e=Ft.index();de===tt&&(_e<At?X=(0,_.isUndefined)(X)?_e:Math.max(X,_e):_e>At&&(ot=(0,_.isUndefined)(ot)?_e:Math.min(ot,_e)))}),!(0,_.isUndefined)(X))for(;X!==At;)n.addSelected(tt.at(X)),X++;if(!(0,_.isUndefined)(ot))for(;ot!==At;)n.addSelected(tt.at(ot)),ot--;return n.addSelected(V)}!w&&n.removeSelected(v.filter(function(Ft){return Ft!==V})),n.addSelected(V,e)})},r.prototype.addSelected=function(t,e){var n=this;e===void 0&&(e={});var i=(0,D.getModel)(t,lt.default);((0,_.isArray)(i)?i:[i]).forEach(function(l){var f=n.selected;l&&l.get("selectable")&&!l.parents().some(function(d){return f.hasComponent(d)})&&(e.forceChange&&n.removeSelected(l,e),f.allComponents().filter(function(d){return(0,_.contains)(d.parents(),l)}).forEach(function(d){return n.removeSelected(d,e)}),f.addComponent(l,e),l&&n.trigger("component:select",l,e))})},r.prototype.removeSelected=function(t,e){e===void 0&&(e={}),this.selected.removeComponent((0,D.getModel)(t,lt.default),e)},r.prototype.toggleSelected=function(t,e){var n=this;e===void 0&&(e={});var i=(0,D.getModel)(t,lt.default);((0,_.isArray)(i)?i:[i]).forEach(function(l){n.selected.hasComponent(l)?n.removeSelected(l,e):n.addSelected(l,e)})},r.prototype.setHovered=function(t,e){if(e===void 0&&(e={}),!t)return this.set("componentHovered","");var n="component:hover",i=(0,D.getModel)(t,void 0);if(i){if(e.forceChange&&this.set("componentHovered",""),this.trigger("".concat(n,":before"),i,e),!i.get("hoverable")){if(!e.useValid||e.abort)return;for(var l=i&&i.parent();l&&!l.get("hoverable");)l=l.parent();i=l}e.abort||(this.set("componentHovered",i,e),this.trigger(n,i,e))}},r.prototype.getHovered=function(){return this.get("componentHovered")},r.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.get("DomComponents").setComponents(t,e)},r.prototype.getComponents=function(){var t=this.get("DomComponents"),e=this.get("CodeManager");if(t&&e){var n=t.getComponents();return e.getCode(n,"json")}},r.prototype.setStyle=function(t,e){e===void 0&&(e={});var n=this.get("CssComposer");return n.clear(e),n.getAll().add(t,e),this},r.prototype.addStyle=function(t,e){e===void 0&&(e={});var n=this.getStyle().add(t,e);return(0,_.isArray)(n)?n:[n]},r.prototype.getStyle=function(){return this.Css.getAll()},r.prototype.setState=function(t){return this.set("state",t),this},r.prototype.getState=function(){return this.get("state")||""},r.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,n=e.optsHtml,i=e.jsInHtml?this.getJs(t):"",l=t.component||this.get("DomComponents").getComponent(),f=l?this.get("CodeManager").getCode(l,"html",xr(xr({},n),t)):"";return f+=i?"<script>".concat(i,"<\/script>"):""},r.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,n=e.optsCss,i=t.avoidProtected,l=(0,_.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,f=this.get("CssComposer"),d=t.component||this.Components.getComponent(),v=i?"":e.protectedCss,g=d&&this.CodeManager.getCode(d,"css",xr(xr({cssc:f,keepUnusedStyles:l},n),t));return d?t.json?g:v+g:""},r.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},r.prototype.store=function(t){return Mf(this,void 0,void 0,function(){var e;return Lf(this,function(n){switch(n.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return n.sent(),this.clearDirtyCount(),[2,e]}})})},r.prototype.load=function(t){return Mf(this,void 0,void 0,function(){var e;return Lf(this,function(n){switch(n.label){case 0:return[4,this.Storage.load(t)];case 1:return e=n.sent(),this.loadData(e),[2,e]}})})},r.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(n){t=xr(xr({},t),n.store(1))}),JSON.parse(JSON.stringify(t))},r.prototype.loadData=function(t){return t===void 0&&(t={}),(0,D.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},r.prototype.getDeviceModel=function(){var t=this.get("device");return this.get("DeviceManager").get(t)},r.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);e&&!this.defaultRunning&&(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},r.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);e&&this.defaultRunning&&(e.stop(this,this,t),this.defaultRunning=!1)},r.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.set("canvasOffset",null),this.set("canvasOffset",this.get("Canvas").getOffset()),t.tools&&this.trigger("canvas:updateTools")},r.prototype.clearSelection=function(t){var e;(e=(t||window).getSelection())===null||e===void 0||e.removeAllRanges()},r.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,i=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!i?"(".concat(n,": ").concat(l,")"):""},r.prototype.getWrapper=function(){return this.get("DomComponents").getWrapper()},r.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},r.prototype.getCurrentFrame=function(){return this.get("currentFrame")},r.prototype.getCurrentFrameModel=function(){return(this.getCurrentFrame()||{}).model},r.prototype.getIcon=function(t){return(this.config.icons||{})[t]||""},r.prototype.getDirtyCount=function(){return this.get("changesCount")},r.prototype.clearDirtyCount=function(){return this.set("changesCount",0)},r.prototype.getZoomDecimal=function(){return this.get("Canvas").getZoomDecimal()},r.prototype.getZoomMultiplier=function(){return this.get("Canvas").getZoomMultiplier()},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.get("I18n");return n==null?void 0:n.t.apply(n,t)},r.prototype.inAbsoluteMode=function(){return this.get("dmode")==="absolute"},r.prototype.destroyAll=function(){var t=this,e=this.config,n=this.view,i=this.getEditor(),l=(e.grapesjs||{}).editors,f=l===void 0?[]:l,d=this.get("shallow");d==null||d.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(v){return v.destroy()}),n&&n.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(v){return t[v]={}}),f.splice(f.indexOf(i),1),(0,D.hasWin)()&&(0,lt.default)(e.el).empty().attr(this.attrsOrig)},r.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},r.prototype.setEditing=function(t){return this.set("editing",t),this},r.prototype.isEditing=function(){return!!this.get("editing")},r.prototype.log=function(t,e){e===void 0&&(e={});var n=e.ns,i=e.level,l=i===void 0?"debug":i;if(this.trigger("log",t,e),l&&this.trigger("log:".concat(l),t,e),n){var f="log-".concat(n);this.trigger(f,t,e),l&&this.trigger("".concat(f,":").concat(l),t,e)}},r.prototype.logInfo=function(t,e){this.log(t,xr(xr({},e),{level:"info"}))},r.prototype.logWarning=function(t,e){this.log(t,xr(xr({},e),{level:"warning"}))},r.prototype.logError=function(t,e){this.log(t,xr(xr({},e),{level:"error"}))},r.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var n=this.config,i=n.colorPicker,l=i===void 0?{}:i,f=n.el,d=n.stylePrefix;return(0,lt.default)(t).spectrum(xr(xr({containerClassName:"".concat(d,"one-bg ").concat(d,"two-color"),appendTo:f||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),l))},r.prototype.skip=function(t){this.__skip=!0;var e=this.get("UndoManager");e?e.skip(t):t(),this.__skip=!1},r.prototype.data=function(t,e,n){var i="_gjs-data";if(t[i]||(t[i]={}),(0,_.isUndefined)(n))return t[i][e];t[i][e]=n},r}(S.Hn);const pm=um;var fm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dm=function(a){function r(t){var e=a.call(this,{model:t})||this,n=t.attributes,i=n.Panels,l=n.UndoManager;return t.view=e,t.once("change:ready",function(){i.active(),i.disableButtons(),l.clear(),setTimeout(function(){t.trigger("load",t.get("Editor")),t.clearDirtyCount()})}),e}return fm(r,a),r.prototype.render=function(){var t=this,e=this.$el,n=this.model,i=n.attributes,l=i.Panels,f=i.Canvas,d=n.config,v=n.modules,g=d.stylePrefix,w=["".concat(g,"editor")];!d.customUI&&w.push("".concat(g,"one-bg ").concat(g,"two-color"));var T=(0,lt.default)(d.el||"body ".concat(d.container));d.cssIcons&&(0,D.appendStyles)(d.cssIcons,{unique:!0,prepand:!0}),e.empty(),d.width&&T.css("width",d.width),d.height&&T.css("height",d.height),e.append(f.render()),e.append(l.render());var V=n.get("shallow").get("Canvas").render();return V.style.display="none",e.append(V),e.attr("class",w.join(" ")),T.addClass("".concat(g,"editor-cont")).empty().append(e),v.forEach(function(B){return B.postRender&&B.postRender(t)}),this},r}(S.G7);const hm=dm;var Mc=function(){return Mc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Mc.apply(this,arguments)},Hd=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Rd=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},gm=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},vm=function(){function a(r,t){var e;r===void 0&&(r={}),t===void 0&&(t={}),this.modules=[],this.html=et,this.config=Mc(Mc(Mc({},xt),r),{pStylePrefix:(e=r.stylePrefix)!==null&&e!==void 0?e:xt.stylePrefix}),this.em=new pm(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return this.em.getConfig(r)},a.prototype.getHtml=function(r){return this.em.getHtml(r)},a.prototype.getCss=function(r){return this.em.getCss(r)},a.prototype.getJs=function(r){return this.em.getJs(r)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(r,t){return t===void 0&&(t={}),this.em.setComponents(r,t),this},a.prototype.addComponents=function(r,t){return this.getWrapper().append(r,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(r,t){return t===void 0&&(t={}),this.em.setStyle(r,t),this},a.prototype.addStyle=function(r,t){return t===void 0&&(t={}),this.em.addStyle(r,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var r=this.em.getSelected();if(r)return this.StyleManager.getModelToStyle(r)},a.prototype.select=function(r,t){return this.em.setSelected(r,t),this},a.prototype.selectAdd=function(r){return this.em.addSelected(r),this},a.prototype.selectRemove=function(r){return this.em.removeSelected(r),this},a.prototype.selectToggle=function(r){return this.em.toggleSelected(r),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(r){return this.em.set("device",r),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(r,t){return t===void 0&&(t={}),this.Commands.run(r,t)},a.prototype.stopCommand=function(r,t){return t===void 0&&(t={}),this.Commands.stop(r,t)},a.prototype.store=function(r){return Hd(this,void 0,void 0,function(){return Rd(this,function(t){switch(t.label){case 0:return[4,this.em.store(r)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(r){return Hd(this,void 0,void 0,function(){return Rd(this,function(t){switch(t.label){case 0:return[4,this.em.load(r)];case 1:return[2,t.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(r){return this.em.loadData(r)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(r){return this.em.loadData(r)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(r){this.em.refreshCanvas(r)},a.prototype.setCustomRte=function(r){this.RichTextEditor.customRte=r},a.prototype.setCustomParserCss=function(r){return this.Parser.getConfig().parserCss=r,this},a.prototype.setDragMode=function(r){return this.em.setDragMode(r),this},a.prototype.log=function(r,t){return t===void 0&&(t={}),this.em.log(r,t),this},a.prototype.t=function(){for(var r,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(r=this.em).t.apply(r,t)},a.prototype.on=function(r,t){return this.em.on(r,t),this},a.prototype.once=function(r,t){return this.em.once(r,t),this},a.prototype.off=function(r,t){return this.em.off(r,t),this},a.prototype.trigger=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,gm([r],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var r;return(r=this.editorView)===null||r===void 0?void 0:r.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var r;return(r=this.editorView)===null||r===void 0||r.remove(),this.editorView=new hm(this.em),this.editorView.render().el},a.prototype.onReady=function(r){this.em.get("ready")?r(this):this.em.on("load",r)},a}();const mm=vm,ym=function(){function a(){this.plugins={}}return a.prototype.add=function(r,t){var e=this.get(r);return e||(this.plugins[r]=t,t)},a.prototype.get=function(r){return this.plugins[r]},a.prototype.getAll=function(){return this.plugins},a}();var pp=function(){return pp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},pp.apply(this,arguments)};(function(){if((0,D.hasWin)()&&function(){for(var r,t=window.navigator.userAgent,e=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],n=0;n<e.length&&!(r=e[n][1].exec(t));n++);return!!r}()){var a=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(r){return r||(r=""),a.apply(document.implementation,[r])}}})();var zd=new ym,Bd=[],bm={$:lt.default,editors:Bd,plugins:zd,version:"0.20.4",init:function(a){a===void 0&&(a={});var r=a.headless,t=a.container;if(!t&&!r)throw new Error("'container' is required");var e=pp(pp({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:r?void 0:(0,_.isElement)(t)?t:document.querySelector(t)}),n=new mm(e,{$:lt.default}),i=n.getModel();return e.plugins.forEach(function(l){var f=(0,_.isFunction)(l)?l:zd.get(l),d=e.pluginsOpts[l]||{};if(!f){var v=(0,D.getGlobal)()[l];f=(v==null?void 0:v.default)||v}f?f(n,d):(0,_.isFunction)(l)?l(n,d):i.logWarning("Plugin ".concat(l," not found"),{context:"plugins",plugin:l})}),i.loadOnStart(),e.autorender&&!r&&n.render(),Bd.push(n),n}};const wm=bm})(),Gt=Gt.default})())})(zm);const Bm=nd(Gf),_p="gjs-open-import-webpage",Kf="set-device-desktop",Yf="set-device-tablet",Jf="set-device-mobile",Xf="canvas-clear",Zf="save-data",Qf="load-data",Um=(Se,sn)=>{const Fe=Se.getConfig("stylePrefix"),Re=Se.Modal,Wt=document.createElement("div"),Gt=sn.modalImportLabel,_=sn.modalImportContent,lt=Se.CodeManager.getViewer("CodeMirror").clone();let D=lt.editor;const et=document.createElement("button");return et.type="button",et.innerHTML=sn.modalImportButton,et.className=`${Fe}btn-prim ${Fe}btn-import`,et.onclick=xt=>{Se.Css.clear(),Se.setComponents(D.getValue().trim()),Re.close()},lt.set({codeName:"htmlmixed",theme:"hopscotch",readOnly:0,...sn.importViewerOptions}),{run(xt){if(!D){const G=document.createElement("textarea");if(Gt){const U=document.createElement("div");U.className=`${Fe}import-label`,U.innerHTML=Gt,Wt.appendChild(U)}Wt.appendChild(G),Wt.appendChild(et),lt.init(G),D=lt.editor}Re.setTitle(sn.modalImportTitle),Re.setContent(Wt);const q=typeof _=="function"?_(xt):_;lt.setContent(q||""),Re.open().onceClose(()=>xt.stopCommand(_p)),D.refresh()},stop(){Re.close()}}},Wm=async()=>{await Bc.get("/config").then(Se=>{const sn=Se.data,Fe=sn.primaryColor,Re=sn.secondaryColor,Wt=sn.tertiaryColor,Gt=sn.quaternaryColor,_="gjs-";let lt="";[["one",Fe],["two",Re],["three",Wt],["four",Gt]].forEach(([et,xt])=>{lt+=`
            .${_}${et}-bg {
            background-color: ${xt};
            }

            .${_}${et}-color {
            color: ${xt};
            }

            .${_}${et}-color-h:hover {
            color: ${xt};
            }
        `});const D=document.createElement("style");D.innerText=lt,document.head.appendChild(D)})},$m=async()=>{try{return await Bc.get("/site-styles").then(Se=>Se.data)}catch{Is.fire({icon:"error",title:"Oops...",text:"Something went wrong loading the site styles!😭"})}},qm=async Se=>{Se.Panels.addPanel({id:"views"}).get("buttons").add([{attributes:{title:"Open Code"},className:"fa fa-file-code-o",command:"open-code",togglable:!1,id:"open-code"}])},Gm=async Se=>{await Bc.get("/load/blocks").then(sn=>{sn.data.blocks.forEach(Re=>{Se.BlockManager.add(Re.componentId,{label:Re.label,media:Re.media,category:Re.category,content:Re.content,attributes:{component_sync:Re.component_sync}})})})},ah=async(Se,sn=!1)=>{let Fe=JSON.parse(localStorage.getItem("onix-data"));const Re=Se.Storage,Wt=Se.getProjectData();let Gt=await Re.store(Wt),_=null;switch(Fe.mode){case"page":_="/save/page";break;case"block":_="/save/block"}await Bc.post(_,{slug:Fe.slug,data:Gt,preview:Se.getHtml(),just_content:Se.getHtml().replace(/<body[^>]*>/g,"").replace(/<\/body>/g,""),preview_no_body:Se.getHtml().replace(/<body/g,'<div data-onix="onix-resuable-block-'+Fe.componentId+'"').replace(/body>/g,"div>")}).then(lt=>{sn?Is.fire({icon:"success",title:"Success",text:lt.data.message,toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:D=>{D.addEventListener("mouseenter",Is.stopTimer),D.addEventListener("mouseleave",Is.resumeTimer)}}):Is.fire({icon:"success",title:"Success",text:lt.data.message})}).catch(lt=>{if(lt.response.status===422){const D=lt.response.data.errors;let et=[];for(const[xt,q]of Object.entries(D))et.push("<p>"+q+"</p>");Is.fire({icon:"error",title:"Oops...",html:et.join("")})}else Is.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},Km=async(Se,sn="page",Fe)=>{localStorage.removeItem("onix-data");let Re=null;await Bc.get("/load/"+sn+"/"+Fe).then(Gt=>{var _,lt;Gt.data.data.content&&(Re=JSON.parse(Gt.data.data.content)),localStorage.setItem("onix-data",JSON.stringify({slug:Fe,mode:sn,componentId:(lt=(_=Gt.data)==null?void 0:_.data)==null?void 0:lt.componentId}))}).catch(Gt=>{Is.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}),Re&&Se.loadProjectData(Re),await Wm(),await Gm(Se),Se.BlockManager.getAll().forEach(Gt=>{const _=Gt.id;if(Gt.attributes.attributes.component_sync){const lt=Se.DomComponents.getWrapper().find(`[data-onix="onix-resuable-block-${_}"]`);if(lt.length)for(const[D,et]of Object.entries(lt));}})},Ym=(Se,sn)=>{const{Commands:Fe}=Se,Re=sn.textCleanCanvas;Fe.add(_p,Um(Se,sn)),Fe.add(Kf,{run:Wt=>Wt.setDevice("Desktop"),stop:()=>{}}),Fe.add(Yf,{run:Wt=>Wt.setDevice("Tablet"),stop:()=>{}}),Fe.add(Jf,{run:Wt=>Wt.setDevice("Mobile portrait"),stop:()=>{}}),Fe.add(Xf,Wt=>confirm(Re)&&Wt.runCommand("core:canvas-clear")),Fe.add(Zf,Wt=>{ah(Wt)}),Fe.add(Qf,Wt=>{Wt.runCommand("onix-grape-save")})},Jm=(Se,sn)=>{Se.BlockManager.add("input",{label:"Input",media:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2zm-1 16H6V6h12v13z"/><path d="M8 9h8v2H8zM8 13h8v2H8z"/></svg>',category:"onix-basics",content:{type:"input"}}),Se.BlockManager.add("form",{label:"Form",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>',category:"onix-basics",content:{type:"form",components:`
            <div class="flex flex-col gap-4 w-full items-center">
                <div class="form-control w-full">
                    <label class="label">
                    <span class="label-text">What is your name?</span>
                    <span class="label-text-alt">Top Right label</span>
                    </label>
                    <input type="text" placeholder="Type here" class="input input-bordered input-lg w-full">
                    <label class="label">
                    <span class="label-text-alt">Bottom Left label</span>
                    <span class="label-text-alt">Bottom Right label</span>
                    </label>
                </div>
            </div>
            `}})},Xm=(Se,sn)=>{const{Panels:Fe}=Se,Re=Se.getConfig(),Wt="sw-visibility",Gt="export-template",_="open-sm",lt="open-tm",D="open-layers",et="open-blocks",xt="fullscreen",q="preview",G='style="display: block; max-width:22px"';Re.showDevices=!1,Fe.getPanels().reset([{id:"commands",buttons:[{}]},{id:"devices-c",buttons:[{id:Kf,command:Kf,active:!0,label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" />
        </svg>`},{id:Yf,command:Yf,label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />
        </svg>`},{id:Jf,command:Jf,label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
        </svg>`}]},{id:"options",buttons:[{id:Wt,command:Wt,context:Wt,label:`<svg ${G} viewBox="0 0 24 24">
        <path fill="currentColor" d="M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z" />
    </svg>`},{id:q,context:q,command:()=>Se.runCommand(q),label:`<svg ${G} viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"></path></svg>`},{id:xt,command:xt,context:xt,label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
        </svg>`},{id:Gt,command:()=>Se.runCommand(Gt),label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z" />
        </svg>`},{id:"undo",command:()=>Se.runCommand("core:undo"),label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z" />
        </svg>`},{id:"redo",command:()=>Se.runCommand("core:redo"),label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z" />
        </svg>`},{id:_p,command:()=>Se.runCommand(_p),label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
        </svg>`},{id:Xf,command:()=>Se.runCommand(Xf),label:`<svg ${G} viewBox="0 0 24 24">
              <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
          </svg>`},{id:Zf,command:()=>Se.runCommand(Zf),label:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                </svg>`},{id:Qf,command:()=>Se.runCommand(Qf),label:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                  </svg>
                  `}]},{id:"views",buttons:[{id:_,command:_,active:!0,label:`<svg ${G} viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`},{id:lt,command:lt,label:`<svg ${G} viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
      </svg>`},{id:D,command:D,label:`<svg ${G} viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" />
      </svg>`},{id:et,command:et,label:`<svg ${G} viewBox="0 0 24 24">
          <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z" />
      </svg>`}]}]);const U=Fe.getButton("views",et);Se.on("load",()=>U==null?void 0:U.set("active",!0)),sn.showStylesOnChange&&Se.on("component:selected",()=>{const S=Fe.getButton("views",_),E=Fe.getButton("views",D);(!E||!E.get("active"))&&Se.getSelected()&&(S==null||S.set("active",!0))})},Zm=(Se,sn)=>{Se.DomComponents.addType("form",{model:{defaults:{name:"Form",tagName:"form",draggable:!0,droppable:!0,editable:!0,stylable:!0,highlightable:!0,copyable:!0,removable:!0,layerable:!0,resizable:!0,classes:["p-10"],traits:[{type:"text",label:"Action",name:"action",placeholder:"https://example.com"},{type:"select",label:"Method",name:"method",options:[{value:"get",name:"GET"},{value:"post",name:"POST"},{value:"put",name:"PUT"},{value:"delete",name:"DELETE"}]},{type:"text",label:"Class",name:"class",placeholder:"form-control"},{type:"text",label:"ID",name:"id",placeholder:"form-id"}],content:`
                    <input type="hidden" name="_token" value="{{ csrf_token() }}">
                `}},view:{tagName:"form",events:{dblclick:"dblclick"},init(){this.listenTo(this.model,"change:action",this.updateAction),this.listenTo(this.model,"change:method",this.updateMethod),this.listenTo(this.model,"change:class",this.updateClass),this.listenTo(this.model,"change:id",this.updateId)},updateAction(){this.el.action=this.model.get("action")},updateMethod(){this.el.method=this.model.get("method")},updateClass(){this.el.className=this.model.get("class")},updateId(){this.el.id=this.model.get("id")}}}),Se.DomComponents.addType("input",{model:{defaults:{name:"Input",tagName:"input",draggable:!0,droppable:!0,editable:!0,stylable:!0,highlightable:!0,copyable:!0,removable:!0,layerable:!0,resizable:!0,classes:["input","input-bordered","w-full","max-w-xs"],traits:[{type:"text",label:"Name",name:"name",placeholder:"name"},{type:"checkbox",label:"Required",name:"required"},{type:"text",label:"Placeholder",name:"placeholder",placeholder:"Placeholder"},{type:"select",label:"Type",name:"type",options:[{value:"text",name:"Text"},{value:"email",name:"Email"},{value:"password",name:"Password"},{value:"number",name:"Number"},{value:"date",name:"Date"},{value:"time",name:"Time"},{value:"datetime-local",name:"Date Time"},{value:"month",name:"Month"},{value:"week",name:"Week"},{value:"url",name:"URL"},{value:"tel",name:"Telephone"},{value:"search",name:"Search"},{value:"color",name:"Color"},{value:"range",name:"Range"},{value:"file",name:"File"},{value:"hidden",name:"Hidden"}]},{type:"text",label:"Min",name:"min",placeholder:"0"},{type:"text",label:"Max",name:"max",placeholder:"100"},{type:"text",label:"Class",name:"class",placeholder:"form-control"},{type:"text",label:"ID",name:"id",placeholder:"form-id"},{type:"dusk",label:"Dusk",name:"dusk",placeholder:"dusk-id"}]}},view:{tagName:"input",events:{dblclick:"dblclick"},init(){this.listenTo(this.model,"change:name",this.updateName),this.listenTo(this.model,"change:required",this.updateRequired),this.listenTo(this.model,"change:placeholder",this.updatePlaceholder),this.listenTo(this.model,"change:type",this.updateType),this.listenTo(this.model,"change:class",this.updateClass),this.listenTo(this.model,"change:id",this.updateId),this.listenTo(this.model,"change:min",this.updateMin),this.listenTo(this.model,"change:max",this.updateMax),this.listenTo(this.model,"change:dusk",this.updateDusk)},updateName(){this.el.name=this.model.get("name")},updateRequired(){this.el.required=this.model.get("required")},updatePlaceholder(){this.el.placeholder=this.model.get("placeholder")},updateType(){this.el.type=this.model.get("type")},updateClass(){this.el.className=this.model.get("class")},updateId(){this.el.id=this.model.get("id")},updateMin(){this.el.min=this.model.get("min")},updateMax(){this.el.max=this.model.get("max")},updateDusk(){this.el.dataset.dusk=this.model.get("dusk")}}})},Qm=(Se,sn={})=>{const Fe={modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure you want to clear the canvas?",showStylesOnChange:!0,useCustomTheme:!0,...sn};Zm(Se),Jm(Se),Ym(Se,Fe),Xm(Se,Fe)};var td={},ty={get exports(){return td},set exports(Se){td=Se}};/*! grapesjs-script-editor - 1.0.3 */(function(Se,sn){(function(Fe,Re){Se.exports=Re()})(window,function(){return function(Fe){var Re={};function Wt(Gt){if(Re[Gt])return Re[Gt].exports;var _=Re[Gt]={i:Gt,l:!1,exports:{}};return Fe[Gt].call(_.exports,_,_.exports,Wt),_.l=!0,_.exports}return Wt.m=Fe,Wt.c=Re,Wt.d=function(Gt,_,lt){Wt.o(Gt,_)||Object.defineProperty(Gt,_,{enumerable:!0,get:lt})},Wt.r=function(Gt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Gt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Gt,"__esModule",{value:!0})},Wt.t=function(Gt,_){if(1&_&&(Gt=Wt(Gt)),8&_||4&_&&typeof Gt=="object"&&Gt&&Gt.__esModule)return Gt;var lt=Object.create(null);if(Wt.r(lt),Object.defineProperty(lt,"default",{enumerable:!0,value:Gt}),2&_&&typeof Gt!="string")for(var D in Gt)Wt.d(lt,D,function(et){return Gt[et]}.bind(null,D));return lt},Wt.n=function(Gt){var _=Gt&&Gt.__esModule?function(){return Gt.default}:function(){return Gt};return Wt.d(_,"a",_),_},Wt.o=function(Gt,_){return Object.prototype.hasOwnProperty.call(Gt,_)},Wt.p="",Wt(Wt.s=1)}([function(Fe,Re){Fe.exports=function(Wt,Gt,_){return Gt in Wt?Object.defineProperty(Wt,Gt,{value:_,enumerable:!0,configurable:!0,writable:!0}):Wt[Gt]=_,Wt}},function(Fe,Re,Wt){Wt.r(Re);var Gt=Wt(0),_=Wt.n(Gt),lt="edit-script";function D(U,S){var E=Object.keys(U);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(U);S&&(A=A.filter(function(M){return Object.getOwnPropertyDescriptor(U,M).enumerable})),E.push.apply(E,A)}return E}function et(U){for(var S=1;S<arguments.length;S++){var E=arguments[S]!=null?arguments[S]:{};S%2?D(Object(E),!0).forEach(function(A){_()(U,A,E[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(E)):D(Object(E)).forEach(function(A){Object.defineProperty(U,A,Object.getOwnPropertyDescriptor(E,A))})}return U}var xt=function(U){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=U.Commands,A=U.Modal,M=U.Components,N=S.modalTitle,it=S.codeViewOptions,st=S.commandAttachScript,Et=S.toolbarIcon,Mt=S.onRun,Nt=S.onError,ne=S.starter,ut=S.scriptTypesSupport,pt=null,Dt=function(Bt,kt){kt instanceof HTMLElement?Bt.appendChild(kt):kt&&Bt.insertAdjacentHTML("beforeend",kt)};U.$.isString(ut)&&(ut=ut.split(",")),U.$.isArray(ut)&&(ut=ut.includes("*")?M.getTypes().map(function(Bt){return Bt.id}):ut),ut&&ut.forEach(function(Bt){var kt=M.getType(Bt).model;M.addType(Bt,{model:{initToolbar:function(){kt.prototype.initToolbar.apply(this,arguments);var z=this.get("toolbar"),O=z.some(function(I){return I.command===lt});O||(z.unshift(et({command:lt,label:Et},S.toolbarBtnCustomScript)),this.set("toolbar",z))}}})}),E.add(lt,et({run:function(Bt,kt){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.editor=Bt,this.options=z,this.target=z.target||Bt.getSelected();var O=this.target;O&&this.showCustomCode(O)},stop:function(Bt){A.close()},showCustomCode:function(Bt){var kt=this,z=this.editor,O=this.options.title||N;pt||(pt=this.getContent());var I=Bt.getScriptString()||ne;A.open({title:O,content:pt}).getModel().once("change:open",function(){return z.stopCommand(kt.id)}),this.getCodeViewer().setContent(I)},getPreContent:function(){},getPostContent:function(){},getContent:function(){var Bt=this.editor,kt=document.createElement("div"),z=Bt.getConfig("stylePrefix");kt.className="".concat(z,"attach-script"),Dt(kt,this.getPreContent());var O=this.getCodeViewer();return O.refresh(),setTimeout(function(){return O.focus()},0),kt.appendChild(O.getElement()),Dt(kt,this.getPostContent()),Dt(kt,this.getContentActions()),kt},getContentActions:function(){var Bt=this,kt=this.editor,z=document.createElement("div");z.id="actns";var O=document.createElement("button"),I=kt.getConfig("stylePrefix");O.innerHTML=S.buttonLabel,O.className="".concat(I,"btn-prim ").concat(I,"btn-save__inject-logic"),O.onclick=function(){return Bt.handleSave()};var W=document.createElement("div");return W.id="logic-toolbar",W.className="fa fa-bug",W.style="margin:5px;padding:10px;background:rgba(0,0,0,0.2);border-radius:3px;border:1px solid rgba(0,0,0,0.2);cursor:pointer",W.onclick=function(){return Bt.runCode()},z.appendChild(W),z.appendChild(O),z},handleSave:function(){var Bt=this.editor,kt=this.target,z=this.getCodeViewer().getContent();kt.set("script",z),Bt.Modal.close()},getCodeViewer:function(){var Bt=this.editor;return this.codeViewer||(this.codeViewer=Bt.CodeManager.createViewer(et({codeName:"javascript",theme:"hopscotch",readOnly:0,autoBeautify:1},it))),this.codeViewer},runCode:function(){try{var Bt=this.getCodeViewer().getContent();Function('"use strict";'+Bt)(),Mt&&Mt()}catch(kt){console.log("error",kt),Nt&&Nt(kt)}}},st))};function q(U,S){var E=Object.keys(U);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(U);S&&(A=A.filter(function(M){return Object.getOwnPropertyDescriptor(U,M).enumerable})),E.push.apply(E,A)}return E}function G(U){for(var S=1;S<arguments.length;S++){var E=arguments[S]!=null?arguments[S]:{};S%2?q(Object(E),!0).forEach(function(A){_()(U,A,E[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(E)):q(Object(E)).forEach(function(A){Object.defineProperty(U,A,Object.getOwnPropertyDescriptor(E,A))})}return U}Re.default=function(U){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=G(G({},{starter:"let el = this",toolbarIcon:'<i class="fa fa-file-code-o"></i>',scriptTypesSupport:["default","wrapper","text","textnode","image","video","svg"],toolbarBtnCustomScript:{},onRun:function(){return console.log("valid syntax")},onError:function(A){return console.log("error",A)},modalTitle:"Script",codeLabel:"JS",codeViewOptions:{},buttonLabel:"Save",commandAttachScript:{}}),S);xt(U,E)}}])})})(ty);const ey=nd(td);var ed={},ny={get exports(){return ed},set exports(Se){ed=Se}};/*! grapesjs-component-code-editor - 1.0.20 */(function(Se,sn){(function(Fe,Re){Se.exports=Re()})(window,function(){return function(Fe){var Re={};function Wt(Gt){if(Re[Gt])return Re[Gt].exports;var _=Re[Gt]={i:Gt,l:!1,exports:{}};return Fe[Gt].call(_.exports,_,_.exports,Wt),_.l=!0,_.exports}return Wt.m=Fe,Wt.c=Re,Wt.d=function(Gt,_,lt){Wt.o(Gt,_)||Object.defineProperty(Gt,_,{enumerable:!0,get:lt})},Wt.r=function(Gt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Gt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Gt,"__esModule",{value:!0})},Wt.t=function(Gt,_){if(1&_&&(Gt=Wt(Gt)),8&_||4&_&&typeof Gt=="object"&&Gt&&Gt.__esModule)return Gt;var lt=Object.create(null);if(Wt.r(lt),Object.defineProperty(lt,"default",{enumerable:!0,value:Gt}),2&_&&typeof Gt!="string")for(var D in Gt)Wt.d(lt,D,function(et){return Gt[et]}.bind(null,D));return lt},Wt.n=function(Gt){var _=Gt&&Gt.__esModule?function(){return Gt.default}:function(){return Gt};return Wt.d(_,"a",_),_},Wt.o=function(Gt,_){return Object.prototype.hasOwnProperty.call(Gt,_)},Wt.p="",Wt(Wt.s=3)}([function(Fe,Re){Fe.exports=function(Wt,Gt,_){return Gt in Wt?Object.defineProperty(Wt,Gt,{value:_,enumerable:!0,configurable:!0,writable:!0}):Wt[Gt]=_,Wt}},function(Fe,Re){Fe.exports=function(Wt,Gt){if(!(Wt instanceof Gt))throw new TypeError("Cannot call a class as a function")}},function(Fe,Re){function Wt(Gt,_){for(var lt=0;lt<_.length;lt++){var D=_[lt];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(Gt,D.key,D)}}Fe.exports=function(Gt,_,lt){return _&&Wt(Gt.prototype,_),lt&&Wt(Gt,lt),Gt}},function(Fe,Re,Wt){Wt.r(Re);var Gt=Wt(0),_=Wt.n(Gt),lt=Wt(1),D=Wt.n(lt),et=Wt(2),xt=Wt.n(et),q=typeof window<"u"?window:null,G=q===null,U=G?void 0:q.document,S=function(){return!1},E=G?"calc":["","-webkit-","-moz-","-o-"].filter(function(kt){var z=U.createElement("div");return z.style.cssText="width:"+kt+"calc(9px)",!!z.style.length}).shift()+"calc",A=function(kt){return typeof kt=="string"||kt instanceof String},M=function(kt){if(A(kt)){var z=U.querySelector(kt);if(!z)throw new Error("Selector "+kt+" did not match a DOM element");return z}return kt},N=function(kt,z,O){var I=kt[z];return I!==void 0?I:O},it=function(kt,z,O,I){if(z){if(I==="end")return 0;if(I==="center")return kt/2}else if(O){if(I==="start")return 0;if(I==="center")return kt/2}return kt},st=function(kt,z){var O=U.createElement("div");return O.className="gutter gutter-"+z,O},Et=function(kt,z,O){var I={};return A(z)?I[kt]=z:I[kt]=E+"("+z+"% - "+O+"px)",I},Mt=function(kt,z){var O;return(O={})[kt]=z+"px",O},Nt=function(kt,z){if(z===void 0&&(z={}),G)return{};var O,I,W,Z,bt,Q,gt=kt;Array.from&&(gt=Array.from(gt));var F=M(gt[0]).parentNode,Lt=getComputedStyle?getComputedStyle(F):null,Pt=Lt?Lt.flexDirection:null,Yt=N(z,"sizes")||gt.map(function(){return 100/gt.length}),Ae=N(z,"minSize",100),ke=Array.isArray(Ae)?Ae:gt.map(function(){return Ae}),Oe=N(z,"expandToMin",!1),Ie=N(z,"gutterSize",10),Ce=N(z,"gutterAlign","center"),Pe=N(z,"snapOffset",30),me=N(z,"dragInterval",1),ae=N(z,"direction","horizontal"),ce=N(z,"cursor",ae==="horizontal"?"col-resize":"row-resize"),ue=N(z,"gutter",st),at=N(z,"elementStyle",Et),Zt=N(z,"gutterStyle",Mt);function qt(y,j,H,ct){var St=at(O,j,H,ct);Object.keys(St).forEach(function(Ct){y.style[Ct]=St[Ct]})}function ie(){return Q.map(function(y){return y.size})}function pe(y){return"touches"in y?y.touches[0][I]:y[I]}function ee(y){var j=Q[this.a],H=Q[this.b],ct=j.size+H.size;j.size=y/this.size*ct,H.size=ct-y/this.size*ct,qt(j.element,j.size,this._b,j.i),qt(H.element,H.size,this._c,H.i)}function je(y){var j,H=Q[this.a],ct=Q[this.b];this.dragging&&(j=pe(y)-this.start+(this._b-this.dragOffset),me>1&&(j=Math.round(j/me)*me),j<=H.minSize+Pe+this._b?j=H.minSize+this._b:j>=this.size-(ct.minSize+Pe+this._c)&&(j=this.size-(ct.minSize+this._c)),ee.call(this,j),N(z,"onDrag",S)(ie()))}function Je(){var y=Q[this.a].element,j=Q[this.b].element,H=y.getBoundingClientRect(),ct=j.getBoundingClientRect();this.size=H[O]+ct[O]+this._b+this._c,this.start=H[W],this.end=H[Z]}function Ke(y){var j=function(Ct){if(!getComputedStyle)return null;var Xt=getComputedStyle(Ct);if(!Xt)return null;var ge=Ct[bt];return ge===0?null:ge-=ae==="horizontal"?parseFloat(Xt.paddingLeft)+parseFloat(Xt.paddingRight):parseFloat(Xt.paddingTop)+parseFloat(Xt.paddingBottom)}(F);if(j===null||ke.reduce(function(Ct,Xt){return Ct+Xt},0)>j)return y;var H=0,ct=[],St=y.map(function(Ct,Xt){var ge=j*Ct/100,Ve=it(Ie,Xt===0,Xt===y.length-1,Ce),ze=ke[Xt]+Ve;return ge<ze?(H+=ze-ge,ct.push(0),ze):(ct.push(ge-ze),ge)});return H===0?y:St.map(function(Ct,Xt){var ge=Ct;if(H>0&&ct[Xt]-H>0){var Ve=Math.min(H,ct[Xt]-H);H-=Ve,ge=Ct-Ve}return ge/j*100})}function fn(){var y=Q[this.a].element,j=Q[this.b].element;this.dragging&&N(z,"onDragEnd",S)(ie()),this.dragging=!1,q.removeEventListener("mouseup",this.stop),q.removeEventListener("touchend",this.stop),q.removeEventListener("touchcancel",this.stop),q.removeEventListener("mousemove",this.move),q.removeEventListener("touchmove",this.move),this.stop=null,this.move=null,y.removeEventListener("selectstart",S),y.removeEventListener("dragstart",S),j.removeEventListener("selectstart",S),j.removeEventListener("dragstart",S),y.style.userSelect="",y.style.webkitUserSelect="",y.style.MozUserSelect="",y.style.pointerEvents="",j.style.userSelect="",j.style.webkitUserSelect="",j.style.MozUserSelect="",j.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor="",U.body.style.cursor=""}function jn(y){if(!("button"in y)||y.button===0){var j=Q[this.a].element,H=Q[this.b].element;this.dragging||N(z,"onDragStart",S)(ie()),y.preventDefault(),this.dragging=!0,this.move=je.bind(this),this.stop=fn.bind(this),q.addEventListener("mouseup",this.stop),q.addEventListener("touchend",this.stop),q.addEventListener("touchcancel",this.stop),q.addEventListener("mousemove",this.move),q.addEventListener("touchmove",this.move),j.addEventListener("selectstart",S),j.addEventListener("dragstart",S),H.addEventListener("selectstart",S),H.addEventListener("dragstart",S),j.style.userSelect="none",j.style.webkitUserSelect="none",j.style.MozUserSelect="none",j.style.pointerEvents="none",H.style.userSelect="none",H.style.webkitUserSelect="none",H.style.MozUserSelect="none",H.style.pointerEvents="none",this.gutter.style.cursor=ce,this.parent.style.cursor=ce,U.body.style.cursor=ce,Je.call(this),this.dragOffset=pe(y)-this.end}}ae==="horizontal"?(O="width",I="clientX",W="left",Z="right",bt="clientWidth"):ae==="vertical"&&(O="height",I="clientY",W="top",Z="bottom",bt="clientHeight"),Yt=Ke(Yt);var yt=[];function Rt(y){var j=y.i===yt.length,H=j?yt[y.i-1]:yt[y.i];Je.call(H);var ct=j?H.size-y.minSize-H._c:y.minSize+H._b;ee.call(H,ct)}return(Q=gt.map(function(y,j){var H,ct={element:M(y),size:Yt[j],minSize:ke[j],i:j};if(j>0&&((H={a:j-1,b:j,dragging:!1,direction:ae,parent:F})._b=it(Ie,j-1==0,!1,Ce),H._c=it(Ie,!1,j===gt.length-1,Ce),Pt==="row-reverse"||Pt==="column-reverse")){var St=H.a;H.a=H.b,H.b=St}if(j>0){var Ct=ue(j,ae,ct.element);(function(Xt,ge,Ve){var ze=Zt(O,ge,Ve);Object.keys(ze).forEach(function(nn){Xt.style[nn]=ze[nn]})})(Ct,Ie,j),H._a=jn.bind(H),Ct.addEventListener("mousedown",H._a),Ct.addEventListener("touchstart",H._a),F.insertBefore(Ct,ct.element),H.gutter=Ct}return qt(ct.element,ct.size,it(Ie,j===0,j===gt.length-1,Ce),j),j>0&&yt.push(H),ct})).forEach(function(y){var j=y.element.getBoundingClientRect()[O];j<y.minSize&&(Oe?Rt(y):y.minSize=j)}),{setSizes:function(y){var j=Ke(y);j.forEach(function(H,ct){if(ct>0){var St=yt[ct-1],Ct=Q[St.a],Xt=Q[St.b];Ct.size=j[ct-1],Xt.size=H,qt(Ct.element,Ct.size,St._b,Ct.i),qt(Xt.element,Xt.size,St._c,Xt.i)}})},getSizes:ie,collapse:function(y){Rt(Q[y])},destroy:function(y,j){yt.forEach(function(H){if(j!==!0?H.parent.removeChild(H.gutter):(H.gutter.removeEventListener("mousedown",H._a),H.gutter.removeEventListener("touchstart",H._a)),y!==!0){var ct=at(O,H.a.size,H._b);Object.keys(ct).forEach(function(St){Q[H.a].element.style[St]="",Q[H.b].element.style[St]=""})}})},parent:F,pairs:yt}};function ne(kt,z){var O=Object.keys(kt);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(kt);z&&(I=I.filter(function(W){return Object.getOwnPropertyDescriptor(kt,W).enumerable})),O.push.apply(O,I)}return O}var ut=function(){function kt(z,O){D()(this,kt),this.editor=z,this.$=z.$,this.pfx=z.getConfig("stylePrefix"),this.opts=O,this.canvas=this.findWithinEditor(".".concat(this.pfx,"cv-canvas")),this.panelViews=O.appendTo?this.$(O.appendTo):this.findWithinEditor(".".concat(this.pfx,"pn-").concat(O.panelId)),this.isShowing=!0}return xt()(kt,[{key:"findPanel",value:function(){var z=this.editor.Panels,O=this.opts.panelId;return z.getPanel(O)||z.addPanel({id:O})}},{key:"findWithinEditor",value:function(z){return this.$(z,this.editor.getEl())}},{key:"buildCodeEditor",value:function(z){var O=this.editor,I=this.opts;return O.CodeManager.createViewer(function(W){for(var Z=1;Z<arguments.length;Z++){var bt=arguments[Z]!=null?arguments[Z]:{};Z%2?ne(Object(bt),!0).forEach(function(Q){_()(W,Q,bt[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(bt)):ne(Object(bt)).forEach(function(Q){Object.defineProperty(W,Q,Object.getOwnPropertyDescriptor(bt,Q))})}return W}({codeName:z==="html"?"htmlmixed":"css",theme:"hopscotch",readOnly:0,autoBeautify:1,autoCloseTags:1,autoCloseBrackets:1,styleActiveLine:1,smartIndent:1},I.codeViewOptions))}},{key:"buildSection",value:function(z,O){var I=this.$,W=this.pfx,Z=this.opts,bt=I("<section></section>"),Q=z==="html"?Z.htmlBtnText:Z.cssBtnText,gt=Z.cleanCssBtn&&z==="css"?'<button class="cp-delete-'.concat(z," ").concat(W,'btn-prim">').concat(Z.cleanCssBtnText,"</button>"):"";bt.append(I(`
            <div class="codepanel-separator">
                <div class="codepanel-label">`.concat(z,`</div>
                <div class="cp-btn-container">
                    `).concat(gt,`
                    <button class="cp-apply-`).concat(z," ").concat(W,'btn-prim">').concat(Q,`</button>
                </div>
            </div>`)));var F=O.getElement();return F.style.height="calc(100% - 30px)",bt.append(F),this.codePanel.append(bt),bt.get(0)}},{key:"buildCodePanel",value:function(){var z=this,O=this.$,I=this.editor,W=this.opts.panelId?this.findPanel():0;this.codePanel=O("<div></div>"),this.codePanel.addClass("code-panel"),this.htmlCodeEditor=this.buildCodeEditor("html"),this.cssCodeEditor=this.buildCodeEditor("css");var Z=[this.buildSection("html",this.htmlCodeEditor),this.buildSection("css",this.cssCodeEditor)];W&&!this.opts.appendTo&&W.set("appendContent",this.codePanel).trigger("change:appendContent"),this.opts.appendTo&&O(this.opts.appendTo).append(this.codePanel),this.updateEditorContents(),this.codePanel.find(".cp-apply-html").on("click",this.updateHtml.bind(this)),this.codePanel.find(".cp-apply-css").on("click",this.updateCss.bind(this)),this.opts.cleanCssBtn&&this.codePanel.find(".cp-delete-css").on("click",this.deleteSelectedCss.bind(this)),Nt(Z,{direction:"vertical",sizes:[50,50],minSize:100,gutterSize:1,onDragEnd:this.refreshEditors.bind(this)}),I.on("component:update",function(bt){return z.updateEditorContents()}),I.on("stop:preview",function(){z.isShowing&&!z.opts.preserveWidth&&z.canvas.css("width",z.opts.openState.cv)})}},{key:"showCodePanel",value:function(){this.isShowing=!0,this.updateEditorContents(),this.codePanel.css("display","block"),setTimeout(this.refreshEditors.bind(this),320),this.opts.preserveWidth||(this.panelViews.css("width",this.opts.openState.pn),this.canvas.css("width",this.opts.openState.cv))}},{key:"hideCodePanel",value:function(){this.codePanel&&this.codePanel.css("display","none"),this.isShowing=!1,this.opts.preserveWidth||(this.panelViews.css("width",this.opts.closedState.pn),this.canvas.css("width",this.opts.closedState.cv))}},{key:"refreshEditors",value:function(){this.htmlCodeEditor.refresh(),this.cssCodeEditor.refresh()}},{key:"updateHtml",value:function(z){z==null||z.preventDefault();var O=this.editor,I=this.component,W=this.htmlCodeEditor.getContent().trim();if(W&&W!==this.previousHtmlCode){this.previousHtmlCode=W;var Z="";this.cssCodeEditor.getContent().split(`}
`).filter(function(bt){return Boolean(bt.trim())}).map(function(bt){if(!/}$/.test(bt))return"".concat(bt,"}")}).forEach(function(bt){/^#/.test(bt)&&(Z+=bt)}),W+="<style>".concat(Z,"</style>"),I.attributes.type==="wrapper"?O.setComponents(W):O.select(I.replaceWith(W))}}},{key:"updateCss",value:function(z){z==null||z.preventDefault();var O=this.cssCodeEditor.getContent().trim();O&&O!==this.previousCssCode&&(this.previousCssCode=O,this.editor.Css.addRules(O))}},{key:"deleteSelectedCss",value:function(z){var O=this;z==null||z.preventDefault(),this.cssCodeEditor.editor.getSelections().forEach(function(I){return O.parseRemove(I)}),this.cssCodeEditor.editor.deleteH()}},{key:"parseRemove",value:function(z){var O=this.editor;O.Css.remove(this.getRules(O.Parser.parseCss(z)))}},{key:"getRules",value:function(z){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=this.editor,W=I.Selectors;return z.map(function(Z){var bt=W.get(Z.selectors),Q=Z.state,gt=Z.selectorsAdd,F=O.atRuleType,Lt=O.atRuleParams;return bt&&I.Css.get(bt,Q,Lt,{selectorsAdd:gt,atRule:F})})}},{key:"updateEditorContents",value:function(){this.isShowing&&(this.component=this.editor.getSelected(),this.component&&(this.htmlCodeEditor.setContent(this.getComponentHtml(this.component)),this.cssCodeEditor.setContent(this.editor.CodeManager.getCode(this.component,"css",{cssc:this.editor.Css}))))}},{key:"getComponentHtml",value:function(z){var O=this.pfx,I=this.opts,W="",Z=z.getEl();!I.clearData&&Z.classList.remove("".concat(O,"selected"));var bt=I.clearData?z.toHTML():z.attributes.type==="wrapper"?Z.innerHTML:Z.outerHTML;!I.clearData&&Z.classList.add("".concat(O,"selected")),W+=bt;var Q=I.editJs?z.getScriptString():"";return W+=Q?"<script>".concat(Q,"<\/script>"):""}}]),kt}(),pt=function(kt,z){var O=kt.Commands,I=null;O.add("open-code",{run:function(W){!I&&(I=new ut(W,z))&&I.buildCodePanel(),I.showCodePanel()},stop:function(W){I&&I.hideCodePanel()}}),O.add("code-editor-object",function(){return I}),O.add("code-editor-constructor",function(){return ut})};function Dt(kt,z){var O=Object.keys(kt);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(kt);z&&(I=I.filter(function(W){return Object.getOwnPropertyDescriptor(kt,W).enumerable})),O.push.apply(O,I)}return O}function Bt(kt){for(var z=1;z<arguments.length;z++){var O=arguments[z]!=null?arguments[z]:{};z%2?Dt(Object(O),!0).forEach(function(I){_()(kt,I,O[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(kt,Object.getOwnPropertyDescriptors(O)):Dt(Object(O)).forEach(function(I){Object.defineProperty(kt,I,Object.getOwnPropertyDescriptor(O,I))})}return kt}Re.default=function(kt){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=Bt(Bt({},{panelId:"views-container",appendTo:"",openState:{cv:"65%",pn:"35%"},closedState:{cv:"85%",pn:"15%"},codeViewOptions:{},preserveWidth:!1,editJs:!1,clearData:!1,cleanCssBtn:!0,htmlBtnText:"Apply",cssBtnText:"Apply",cleanCssBtnText:"Delete"}),z);pt(kt,O)}}])})})(ny);const ry=nd(ed);let Cp=null;const oy=async(Se=[],sn=[])=>{Cp=Bm.init({container:"#gjs",width:"auto",height:"1000px",showOffsets:!0,noticeOnUnload:!1,storageManager:!1,fromElement:!0,plugins:[Qm,ry,ey],canvas:{styles:Se,scripts:sn}}),qm(Cp)};window.startEditor=async function(Se,sn){const Fe=await $m();await oy(Fe.css,Fe.js),await Km(Cp,Se,sn)};window.saveEditorData=function(){ah(Cp,!0)};

var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tm(js){return js&&js.__esModule&&Object.prototype.hasOwnProperty.call(js,"default")?js.default:js}var qd={exports:{}};/*! grapesjs - 0.20.4 */(function(js,Pm){(function(zf,Fc){js.exports=Fc()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:Ic,()=>(()=>{var zf={410:(C,wt,I)=>{var rt,_t,X;_t=[I(50),I(316)],(X=typeof(rt=function(J,B){var k=Array.prototype.slice;function P(D,H,Y){return Y.length<=4?D.call(H,Y[0],Y[1],Y[2],Y[3]):D.apply(H,Y)}function E(D,H){return k.call(D,H)}function j(D,H){return D!=null&&(J.isArray(H)||(H=E(arguments,1)),J.all(H,function(Y){return Y in D}))}var L=function(){var D=!1,H=-1;function Y(){H++,D=!0,J.defer(function(){D=!1})}return function(){return D||Y(),H}}();function ot(){this.registeredObjects=[],this.cidIndexes=[]}function it(D,H,Y,et){for(var Ct,nt=0,vt=H.length;nt<vt;nt++)if(Ct=H[nt]){if(D==="on"){if(!et.objectRegistry.register(Ct))continue}else if(!et.objectRegistry.unregister(Ct))continue;J.isFunction(Ct[D])&&Ct[D]("all",Y,et)}}function At(D,H){var Y=H.type,et=H.undoTypes,Ct=!et[Y]||et[Y][D];J.isFunction(Ct)&&Ct(H.object,H.before,H.after,H.options)}function jt(D,H,Y,et,Ct){if(!(Y.isCurrentlyUndoRedoing||D==="undo"&&Y.pointer===-1||D==="redo"&&Y.pointer===Y.length-1)){Y.isCurrentlyUndoRedoing=!0;var nt,vt,N=D==="undo";for(Ct?vt=N&&Y.pointer===Y.length-1||!N&&Y.pointer===-1?J.clone(Y.models):k.apply(Y.models,N?[0,Y.pointer]:[Y.pointer,Y.length-1]):(nt=Y.at(N?Y.pointer:Y.pointer+1),vt=et?Y.where({magicFusionIndex:nt.get("magicFusionIndex")}):[nt]),Y.pointer+=(N?-1:1)*vt.length;nt=N?vt.pop():vt.shift();)nt[D]();Y.isCurrentlyUndoRedoing=!1,H.trigger(D,H)}}function Dt(D,H){var Y=D.condition,et=typeof Y;return et==="function"?!!P(Y,D,H):et!=="boolean"||Y}function te(D,H,Y,et){if(D.track&&!D.isCurrentlyUndoRedoing&&H in et&&Dt(et[H],Y)){var Ct=P(et[H].on,et[H],Y);if(j(Ct,"object","before","after")){if(Ct.type=H,Ct.magicFusionIndex=L(),Ct.undoTypes=et,D.pointer<D.length-1)for(var nt=D.length-D.pointer-1;nt--;)D.pop();D.pointer=D.length,D.add(Ct),D.length>D.maximumStackLength&&(D.shift(),D.pointer--)}}}ot.prototype={isRegistered:function(D){return D&&D.cid?this.registeredObjects[D.cid]:J.contains(this.registeredObjects,D)},register:function(D){return!this.isRegistered(D)&&(D&&D.cid?(this.registeredObjects[D.cid]=D,this.cidIndexes.push(D.cid)):this.registeredObjects.push(D),!0)},unregister:function(D){if(this.isRegistered(D)){if(D&&D.cid)delete this.registeredObjects[D.cid],this.cidIndexes.splice(J.indexOf(this.cidIndexes,D.cid),1);else{var H=J.indexOf(this.registeredObjects,D);this.registeredObjects.splice(H,1)}return!0}return!1},get:function(){return J.map(this.cidIndexes,function(D){return this.registeredObjects[D]},this).concat(this.registeredObjects)}};var ft={add:{undo:function(D,H,Y,et){D.remove(Y,et)},redo:function(D,H,Y,et){et.index&&(et.at=et.index),D.add(Y,et)},on:function(D,H,Y){return{object:H,before:void 0,after:D,options:J.clone(Y)}}},remove:{undo:function(D,H,Y,et){"index"in et&&(et.at=et.index),D.add(H,et)},redo:function(D,H,Y,et){D.remove(H,et)},on:function(D,H,Y){return{object:H,before:D,after:void 0,options:J.clone(Y)}}},change:{undo:function(D,H,Y,et){J.isEmpty(H)?J.each(J.keys(Y),D.unset,D):(D.set(H),et&&et.unsetData&&et.unsetData.before&&et.unsetData.before.length&&J.each(et.unsetData.before,D.unset,D))},redo:function(D,H,Y,et){J.isEmpty(Y)?J.each(J.keys(H),D.unset,D):(D.set(Y),et&&et.unsetData&&et.unsetData.after&&et.unsetData.after.length&&J.each(et.unsetData.after,D.unset,D))},on:function(D,H){var Y=D.changedAttributes(),et=J.keys(Y),Ct=J.pick(D.previousAttributes(),et),nt=J.keys(Ct),vt=(H||(H={})).unsetData={after:[],before:[]};return et.length!=nt.length&&(et.length>nt.length?J.each(et,function(N){N in Ct||vt.before.push(N)},this):J.each(nt,function(N){N in Y||vt.after.push(N)})),{object:D,before:Ct,after:Y,options:J.clone(H)}}},reset:{undo:function(D,H,Y){D.reset(H)},redo:function(D,H,Y){D.reset(Y)},on:function(D,H){return{object:D,before:H.previousModels,after:J.clone(D.models)}}}};function ut(){}function Nt(D,H,Y,et){if(typeof H=="object")return J.each(H,function(Ct,nt){D===2?Nt(D,Ct,Y,et):Nt(D,nt,Ct,Y)});switch(D){case 0:j(Y,"undo","redo","on")&&J.all(J.pick(Y,"undo","redo","on"),J.isFunction)&&(et[H]=Y);break;case 1:et[H]&&J.isObject(Y)&&(et[H]=J.extend({},et[H],Y));break;case 2:delete et[H]}return this}ut.prototype=ft;var Zt=B.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(D){At("undo",this.attributes)},redo:function(D){At("redo",this.attributes)}}),re=B.Collection.extend({model:Zt,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(D){this.maximumStackLength=D}}),at=B.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(D){this.stack=new re,this.objectRegistry=new ot,this.undoTypes=new ut,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(H,Y){this.stack.setMaxLength(Y)},this),D&&D.track&&this.startTracking(),D&&D.register&&(J.isArray(D.register)||J.isArguments(D.register)?P(this.register,this,D.register):this.register(D.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(D){te(this.stack,D,E(arguments,1),this.undoTypes)},register:function(){it("on",arguments,this._addToStack,this)},unregister:function(){it("off",arguments,this._addToStack,this)},unregisterAll:function(){P(this.unregister,this,this.objectRegistry.get())},undo:function(D){jt("undo",this,this.stack,D)},undoAll:function(){jt("undo",this,this.stack,!1,!0)},redo:function(D){jt("redo",this,this.stack,D)},redoAll:function(){jt("redo",this,this.stack,!1,!0)},isAvailable:function(D){var H=this.stack,Y=H.length;switch(D){case"undo":return Y>0&&H.pointer>-1;case"redo":return Y>0&&H.pointer<Y-1;default:return!1}},merge:function(D){for(var H,Y=J.isArray(D)?D:E(arguments);H=Y.pop();)H instanceof at&&H.stack instanceof re&&(H.stack=this.stack)},addUndoType:function(D,H){Nt(0,D,H,this.undoTypes)},changeUndoType:function(D,H){Nt(1,D,H,this.undoTypes)},removeUndoType:function(D){Nt(2,D,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return J.extend(at,{defaults:function(D){J.extend(at.prototype.defaults,D)},addUndoType:function(D,H){Nt(0,D,H,ft)},changeUndoType:function(D,H){Nt(1,D,H,ft)},removeUndoType:function(D){Nt(2,D,void 0,ft)}}),B.UndoManager=at})=="function"?rt.apply(wt,_t):rt)===void 0||(C.exports=X)},316:(C,wt,I)=>{var rt,_t;(function(X){var J=typeof self=="object"&&self.self===self&&self||typeof I.g=="object"&&I.g.global===I.g&&I.g;rt=[I(50),I(895),wt],_t=function(B,k,P){J.Backbone=function(E,j,L,ot){var it=E.Backbone,At=Array.prototype.slice;j.VERSION="1.4.1",j.$=ot,j.noConflict=function(){return E.Backbone=it,this},j.emulateHTTP=!1,j.emulateJSON=!1;var jt,Dt=j.Events={},te=/\s+/,ft=function(b,F,z,gt,Tt){var Ot,pe=0;if(z&&typeof z=="object")for(gt!==void 0&&("context"in Tt)&&Tt.context===void 0&&(Tt.context=gt),Ot=L.keys(z);pe<Ot.length;pe++)F=ft(b,F,Ot[pe],z[Ot[pe]],Tt);else if(z&&te.test(z))for(Ot=z.split(te);pe<Ot.length;pe++)F=b(F,Ot[pe],gt,Tt);else F=b(F,z,gt,Tt);return F};Dt.on=function(b,F,z){return this._events=ft(ut,this._events||{},b,F,{context:z,ctx:this,listening:jt}),jt&&((this._listeners||(this._listeners={}))[jt.id]=jt,jt.interop=!1),this},Dt.listenTo=function(b,F,z){if(!b)return this;var gt=b._listenId||(b._listenId=L.uniqueId("l")),Tt=this._listeningTo||(this._listeningTo={}),Ot=jt=Tt[gt];Ot||(this._listenId||(this._listenId=L.uniqueId("l")),Ot=jt=Tt[gt]=new H(this,b));var pe=Nt(b,F,z,this);if(jt=void 0,pe)throw pe;return Ot.interop&&Ot.on(F,z),this};var ut=function(b,F,z,gt){if(z){var Tt=b[F]||(b[F]=[]),Ot=gt.context,pe=gt.ctx,Te=gt.listening;Te&&Te.count++,Tt.push({callback:z,context:Ot,ctx:Ot||pe,listening:Te})}return b},Nt=function(b,F,z,gt){try{b.on(F,z,gt)}catch(Tt){return Tt}};Dt.off=function(b,F,z){return this._events?(this._events=ft(Zt,this._events,b,F,{context:z,listeners:this._listeners}),this):this},Dt.stopListening=function(b,F,z){var gt=this._listeningTo;if(!gt)return this;for(var Tt=b?[b._listenId]:L.keys(gt),Ot=0;Ot<Tt.length;Ot++){var pe=gt[Tt[Ot]];if(!pe)break;pe.obj.off(F,z,this),pe.interop&&pe.off(F,z)}return L.isEmpty(gt)&&(this._listeningTo=void 0),this};var Zt=function(b,F,z,gt){if(b){var Tt,Ot=gt.context,pe=gt.listeners,Te=0;if(F||Ot||z){for(Tt=F?[F]:L.keys(b);Te<Tt.length;Te++){var Ie=b[F=Tt[Te]];if(!Ie)break;for(var ze=[],Qe=0;Qe<Ie.length;Qe++){var qt=Ie[Qe];if(z&&z!==qt.callback&&z!==qt.callback._callback||Ot&&Ot!==qt.context)ze.push(qt);else{var V=qt.listening;V&&V.off(F,z)}}ze.length?b[F]=ze:delete b[F]}return b}for(Tt=L.keys(pe);Te<Tt.length;Te++)pe[Tt[Te]].cleanup()}};Dt.once=function(b,F,z){var gt=ft(re,{},b,F,this.off.bind(this));return typeof b=="string"&&z==null&&(F=void 0),this.on(gt,F,z)},Dt.listenToOnce=function(b,F,z){var gt=ft(re,{},F,z,this.stopListening.bind(this,b));return this.listenTo(b,gt)};var re=function(b,F,z,gt){if(z){var Tt=b[F]=L.once(function(){gt(F,Tt),z.apply(this,arguments)});Tt._callback=z}return b};Dt.trigger=function(b){if(!this._events)return this;for(var F=Math.max(0,arguments.length-1),z=Array(F),gt=0;gt<F;gt++)z[gt]=arguments[gt+1];return ft(at,this._events,b,void 0,z),this};var at=function(b,F,z,gt){if(b){var Tt=b[F],Ot=b.all;Tt&&Ot&&(Ot=Ot.slice()),Tt&&D(Tt,gt),Ot&&D(Ot,[F].concat(gt))}return b},D=function(b,F){var z,gt=-1,Tt=b.length,Ot=F[0],pe=F[1],Te=F[2];switch(F.length){case 0:for(;++gt<Tt;)(z=b[gt]).callback.call(z.ctx);return;case 1:for(;++gt<Tt;)(z=b[gt]).callback.call(z.ctx,Ot);return;case 2:for(;++gt<Tt;)(z=b[gt]).callback.call(z.ctx,Ot,pe);return;case 3:for(;++gt<Tt;)(z=b[gt]).callback.call(z.ctx,Ot,pe,Te);return;default:for(;++gt<Tt;)(z=b[gt]).callback.apply(z.ctx,F);return}},H=function(b,F){this.id=b._listenId,this.listener=b,this.obj=F,this.interop=!0,this.count=0,this._events=void 0};H.prototype.on=Dt.on,H.prototype.off=function(b,F){var z;this.interop?(this._events=ft(Zt,this._events,b,F,{context:void 0,listeners:void 0}),z=!this._events):(this.count--,z=this.count===0),z&&this.cleanup()},H.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},Dt.bind=Dt.on,Dt.unbind=Dt.off,L.extend(j,Dt);var Y=j.Model=function(b,F){var z=b||{};F||(F={}),this.preinitialize.apply(this,arguments),this.cid=L.uniqueId(this.cidPrefix),this.attributes={},F.collection&&(this.collection=F.collection),F.parse&&(z=this.parse(z,F)||{});var gt=L.result(this,"defaults");z=L.defaults(L.extend({},gt,z),gt),this.set(z,F),this.changed={},this.initialize.apply(this,arguments)};L.extend(Y.prototype,Dt,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(b){return L.clone(this.attributes)},sync:function(){return j.sync.apply(this,arguments)},get:function(b){return this.attributes[b]},escape:function(b){return L.escape(this.get(b))},has:function(b){return this.get(b)!=null},matches:function(b){return!!L.iteratee(b,this)(this.attributes)},set:function(b,F,z){if(b==null)return this;var gt;if(typeof b=="object"?(gt=b,z=F):(gt={})[b]=F,z||(z={}),!this._validate(gt,z))return!1;var Tt=z.unset,Ot=z.silent,pe=[],Te=this._changing;this._changing=!0,Te||(this._previousAttributes=L.clone(this.attributes),this.changed={});var Ie=this.attributes,ze=this.changed,Qe=this._previousAttributes;for(var qt in gt)F=gt[qt],L.isEqual(Ie[qt],F)||pe.push(qt),L.isEqual(Qe[qt],F)?delete ze[qt]:ze[qt]=F,Tt?delete Ie[qt]:Ie[qt]=F;if(this.idAttribute in gt){var V=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,V,z)}if(!Ot){pe.length&&(this._pending=z);for(var Q=0;Q<pe.length;Q++)this.trigger("change:"+pe[Q],this,Ie[pe[Q]],z)}if(Te)return this;if(!Ot)for(;this._pending;)z=this._pending,this._pending=!1,this.trigger("change",this,z);return this._pending=!1,this._changing=!1,this},unset:function(b,F){return this.set(b,void 0,L.extend({},F,{unset:!0}))},clear:function(b){var F={};for(var z in this.attributes)F[z]=void 0;return this.set(F,L.extend({},b,{unset:!0}))},hasChanged:function(b){return b==null?!L.isEmpty(this.changed):L.has(this.changed,b)},changedAttributes:function(b){if(!b)return!!this.hasChanged()&&L.clone(this.changed);var F,z=this._changing?this._previousAttributes:this.attributes,gt={};for(var Tt in b){var Ot=b[Tt];L.isEqual(z[Tt],Ot)||(gt[Tt]=Ot,F=!0)}return!!F&&gt},previous:function(b){return b!=null&&this._previousAttributes?this._previousAttributes[b]:null},previousAttributes:function(){return L.clone(this._previousAttributes)},fetch:function(b){b=L.extend({parse:!0},b);var F=this,z=b.success;return b.success=function(gt){var Tt=b.parse?F.parse(gt,b):gt;if(!F.set(Tt,b))return!1;z&&z.call(b.context,F,gt,b),F.trigger("sync",F,gt,b)},Ht(this,b),this.sync("read",this,b)},save:function(b,F,z){var gt;b==null||typeof b=="object"?(gt=b,z=F):(gt={})[b]=F;var Tt=(z=L.extend({validate:!0,parse:!0},z)).wait;if(gt&&!Tt){if(!this.set(gt,z))return!1}else if(!this._validate(gt,z))return!1;var Ot=this,pe=z.success,Te=this.attributes;z.success=function(Qe){Ot.attributes=Te;var qt=z.parse?Ot.parse(Qe,z):Qe;if(Tt&&(qt=L.extend({},gt,qt)),qt&&!Ot.set(qt,z))return!1;pe&&pe.call(z.context,Ot,Qe,z),Ot.trigger("sync",Ot,Qe,z)},Ht(this,z),gt&&Tt&&(this.attributes=L.extend({},Te,gt));var Ie=this.isNew()?"create":z.patch?"patch":"update";Ie!=="patch"||z.attrs||(z.attrs=gt);var ze=this.sync(Ie,this,z);return this.attributes=Te,ze},destroy:function(b){b=b?L.clone(b):{};var F=this,z=b.success,gt=b.wait,Tt=function(){F.stopListening(),F.trigger("destroy",F,F.collection,b)};b.success=function(pe){gt&&Tt(),z&&z.call(b.context,F,pe,b),F.isNew()||F.trigger("sync",F,pe,b)};var Ot=!1;return this.isNew()?L.defer(b.success):(Ht(this,b),Ot=this.sync("delete",this,b)),gt||Tt(),Ot},url:function(){var b=L.result(this,"urlRoot")||L.result(this.collection,"url")||yt();if(this.isNew())return b;var F=this.get(this.idAttribute);return b.replace(/[^\/]$/,"$&/")+encodeURIComponent(F)},parse:function(b,F){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(b){return this._validate({},L.extend({},b,{validate:!0}))},_validate:function(b,F){if(!F.validate||!this.validate)return!0;b=L.extend({},this.attributes,b);var z=this.validationError=this.validate(b,F)||null;return!z||(this.trigger("invalid",this,z,L.extend(F,{validationError:z})),!1)}});var et=j.Collection=function(b,F){F||(F={}),this.preinitialize.apply(this,arguments),F.model&&(this.model=F.model),F.comparator!==void 0&&(this.comparator=F.comparator),this._reset(),this.initialize.apply(this,arguments),b&&this.reset(b,L.extend({silent:!0},F))},Ct={add:!0,remove:!0,merge:!0},nt={add:!0,remove:!1},vt=function(b,F,z){z=Math.min(Math.max(z,0),b.length);var gt,Tt=Array(b.length-z),Ot=F.length;for(gt=0;gt<Tt.length;gt++)Tt[gt]=b[gt+z];for(gt=0;gt<Ot;gt++)b[gt+z]=F[gt];for(gt=0;gt<Tt.length;gt++)b[gt+Ot+z]=Tt[gt]};L.extend(et.prototype,Dt,{model:Y,preinitialize:function(){},initialize:function(){},toJSON:function(b){return this.map(function(F){return F.toJSON(b)})},sync:function(){return j.sync.apply(this,arguments)},add:function(b,F){return this.set(b,L.extend({merge:!1},F,nt))},remove:function(b,F){F=L.extend({},F);var z=!L.isArray(b);b=z?[b]:b.slice();var gt=this._removeModels(b,F);return!F.silent&&gt.length&&(F.changes={added:[],merged:[],removed:gt},this.trigger("update",this,F)),z?gt[0]:gt},set:function(b,F){if(b!=null){(F=L.extend({},Ct,F)).parse&&!this._isModel(b)&&(b=this.parse(b,F)||[]);var z=!L.isArray(b);b=z?[b]:b.slice();var gt=F.at;gt!=null&&(gt=+gt),gt>this.length&&(gt=this.length),gt<0&&(gt+=this.length+1);var Tt,Ot,pe=[],Te=[],Ie=[],ze=[],Qe={},qt=F.add,V=F.merge,Q=F.remove,pt=!1,bt=this.comparator&&gt==null&&F.sort!==!1,Gt=L.isString(this.comparator)?this.comparator:null;for(Ot=0;Ot<b.length;Ot++){Tt=b[Ot];var he=this.get(Tt);if(he){if(V&&Tt!==he){var Fe=this._isModel(Tt)?Tt.attributes:Tt;F.parse&&(Fe=he.parse(Fe,F)),he.set(Fe,F),Ie.push(he),bt&&!pt&&(pt=he.hasChanged(Gt))}Qe[he.cid]||(Qe[he.cid]=!0,pe.push(he)),b[Ot]=he}else qt&&(Tt=b[Ot]=this._prepareModel(Tt,F))&&(Te.push(Tt),this._addReference(Tt,F),Qe[Tt.cid]=!0,pe.push(Tt))}if(Q){for(Ot=0;Ot<this.length;Ot++)Qe[(Tt=this.models[Ot]).cid]||ze.push(Tt);ze.length&&this._removeModels(ze,F)}var We=!1,Ln=!bt&&qt&&Q;if(pe.length&&Ln?(We=this.length!==pe.length||L.some(this.models,function(fn,Re){return fn!==pe[Re]}),this.models.length=0,vt(this.models,pe,0),this.length=this.models.length):Te.length&&(bt&&(pt=!0),vt(this.models,Te,gt==null?this.length:gt),this.length=this.models.length),pt&&this.sort({silent:!0}),!F.silent){for(Ot=0;Ot<Te.length;Ot++)gt!=null&&(F.index=gt+Ot),(Tt=Te[Ot]).trigger("add",Tt,this,F);(pt||We)&&this.trigger("sort",this,F),(Te.length||ze.length||Ie.length)&&(F.changes={added:Te,removed:ze,merged:Ie},this.trigger("update",this,F))}return z?b[0]:b}},reset:function(b,F){F=F?L.clone(F):{};for(var z=0;z<this.models.length;z++)this._removeReference(this.models[z],F);return F.previousModels=this.models,this._reset(),b=this.add(b,L.extend({silent:!0},F)),F.silent||this.trigger("reset",this,F),b},push:function(b,F){return this.add(b,L.extend({at:this.length},F))},pop:function(b){var F=this.at(this.length-1);return this.remove(F,b)},unshift:function(b,F){return this.add(b,L.extend({at:0},F))},shift:function(b){var F=this.at(0);return this.remove(F,b)},slice:function(){return At.apply(this.models,arguments)},get:function(b){if(b!=null)return this._byId[b]||this._byId[this.modelId(this._isModel(b)?b.attributes:b,b.idAttribute)]||b.cid&&this._byId[b.cid]},has:function(b){return this.get(b)!=null},at:function(b){return b<0&&(b+=this.length),this.models[b]},where:function(b,F){return this[F?"find":"filter"](b)},findWhere:function(b){return this.where(b,!0)},sort:function(b){var F=this.comparator;if(!F)throw new Error("Cannot sort a set without a comparator");b||(b={});var z=F.length;return L.isFunction(F)&&(F=F.bind(this)),z===1||L.isString(F)?this.models=this.sortBy(F):this.models.sort(F),b.silent||this.trigger("sort",this,b),this},pluck:function(b){return this.map(b+"")},fetch:function(b){var F=(b=L.extend({parse:!0},b)).success,z=this;return b.success=function(gt){var Tt=b.reset?"reset":"set";z[Tt](gt,b),F&&F.call(b.context,z,gt,b),z.trigger("sync",z,gt,b)},Ht(this,b),this.sync("read",this,b)},create:function(b,F){var z=(F=F?L.clone(F):{}).wait;if(!(b=this._prepareModel(b,F)))return!1;z||this.add(b,F);var gt=this,Tt=F.success;return F.success=function(Ot,pe,Te){z&&gt.add(Ot,Te),Tt&&Tt.call(Te.context,Ot,pe,Te)},b.save(null,F),b},parse:function(b,F){return b},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(b,F){return b[F||this.model.prototype.idAttribute||"id"]},values:function(){return new Mt(this,Et)},keys:function(){return new Mt(this,Kt)},entries:function(){return new Mt(this,Ae)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(b,F){return this._isModel(b)?(b.collection||(b.collection=this),b):((F=F?L.clone(F):{}).collection=this,(z=this.model.prototype?new this.model(b,F):this.model(b,F)).validationError?(this.trigger("invalid",this,z.validationError,F),!1):z);var z},_removeModels:function(b,F){for(var z=[],gt=0;gt<b.length;gt++){var Tt=this.get(b[gt]);if(Tt){var Ot=this.indexOf(Tt);this.models.splice(Ot,1),this.length--,delete this._byId[Tt.cid];var pe=this.modelId(Tt.attributes,Tt.idAttribute);pe!=null&&delete this._byId[pe],F.silent||(F.index=Ot,Tt.trigger("remove",Tt,this,F)),z.push(Tt),this._removeReference(Tt,F)}}return z},_isModel:function(b){return b instanceof Y},_addReference:function(b,F){this._byId[b.cid]=b;var z=this.modelId(b.attributes,b.idAttribute);z!=null&&(this._byId[z]=b),b.on("all",this._onModelEvent,this)},_removeReference:function(b,F){delete this._byId[b.cid];var z=this.modelId(b.attributes,b.idAttribute);z!=null&&delete this._byId[z],this===b.collection&&delete b.collection,b.off("all",this._onModelEvent,this)},_onModelEvent:function(b,F,z,gt){if(F){if((b==="add"||b==="remove")&&z!==this)return;if(b==="destroy"&&this.remove(F,gt),b==="changeId"){var Tt=this.modelId(F.previousAttributes(),F.idAttribute),Ot=this.modelId(F.attributes,F.idAttribute);Tt!=null&&delete this._byId[Tt],Ot!=null&&(this._byId[Ot]=F)}}this.trigger.apply(this,arguments)}});var N=typeof Symbol=="function"&&Symbol.iterator;N&&(et.prototype[N]=et.prototype.values);var Mt=function(b,F){this._collection=b,this._kind=F,this._index=0},Et=1,Kt=2,Ae=3;N&&(Mt.prototype[N]=function(){return this}),Mt.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var b,F=this._collection.at(this._index);if(this._index++,this._kind===Et)b=F;else{var z=this._collection.modelId(F.attributes,F.idAttribute);b=this._kind===Kt?z:[z,F]}return{value:b,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Se=j.View=function(b){this.cid=L.uniqueId("view"),this.preinitialize.apply(this,arguments),L.extend(this,L.pick(b,Ne)),this._ensureElement(),this.initialize.apply(this,arguments)},_e=/^(\S+)\s*(.*)$/,Ne=["model","collection","el","id","attributes","className","tagName","events"];L.extend(Se.prototype,Dt,{tagName:"div",$:function(b){return this.$el.find(b)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(b){return this.undelegateEvents(),this._setElement(b),this.delegateEvents(),this},_setElement:function(b){this.$el=b instanceof j.$?b:j.$(b),this.el=this.$el[0]},delegateEvents:function(b){if(b||(b=L.result(this,"events")),!b)return this;for(var F in this.undelegateEvents(),b){var z=b[F];if(L.isFunction(z)||(z=this[z]),z){var gt=F.match(_e);this.delegate(gt[1],gt[2],z.bind(this))}}return this},delegate:function(b,F,z){return this.$el.on(b+".delegateEvents"+this.cid,F,z),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(b,F,z){return this.$el.off(b+".delegateEvents"+this.cid,F,z),this},_createElement:function(b){return document.createElement(b)},_ensureElement:function(){if(this.el)this.setElement(L.result(this,"el"));else{var b=L.extend({},L.result(this,"attributes"));this.id&&(b.id=L.result(this,"id")),this.className&&(b.class=L.result(this,"className")),this.setElement(this._createElement(L.result(this,"tagName"))),this._setAttributes(b)}},_setAttributes:function(b){this.$el.attr(b)}});var xe=function(b,F,z,gt){switch(F){case 1:return function(){return b[z](this[gt])};case 2:return function(Tt){return b[z](this[gt],Tt)};case 3:return function(Tt,Ot){return b[z](this[gt],be(Tt,this),Ot)};case 4:return function(Tt,Ot,pe){return b[z](this[gt],be(Tt,this),Ot,pe)};default:return function(){var Tt=At.call(arguments);return Tt.unshift(this[gt]),b[z].apply(b,Tt)}}},Oe=function(b,F,z,gt){L.each(z,function(Tt,Ot){F[Ot]&&(b.prototype[Ot]=xe(F,Tt,Ot,gt))})},be=function(b,F){return L.isFunction(b)?b:L.isObject(b)&&!F._isModel(b)?de(b):L.isString(b)?function(z){return z.get(b)}:b},de=function(b){var F=L.matches(b);return function(z){return F(z.attributes)}},ce={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},se={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};L.each([[et,ce,"models"],[Y,se,"attributes"]],function(b){var F=b[0],z=b[1],gt=b[2];F.mixin=function(Tt){var Ot=L.reduce(L.functions(Tt),function(pe,Te){return pe[Te]=0,pe},{});Oe(F,Tt,Ot,gt)},Oe(F,L,z,gt)}),j.sync=function(b,F,z){var gt=st[b];L.defaults(z||(z={}),{emulateHTTP:j.emulateHTTP,emulateJSON:j.emulateJSON});var Tt={type:gt,dataType:"json"};if(z.url||(Tt.url=L.result(F,"url")||yt()),z.data!=null||!F||b!=="create"&&b!=="update"&&b!=="patch"||(Tt.contentType="application/json",Tt.data=JSON.stringify(z.attrs||F.toJSON(z))),z.emulateJSON&&(Tt.contentType="application/x-www-form-urlencoded",Tt.data=Tt.data?{model:Tt.data}:{}),z.emulateHTTP&&(gt==="PUT"||gt==="DELETE"||gt==="PATCH")){Tt.type="POST",z.emulateJSON&&(Tt.data._method=gt);var Ot=z.beforeSend;z.beforeSend=function(Ie){if(Ie.setRequestHeader("X-HTTP-Method-Override",gt),Ot)return Ot.apply(this,arguments)}}Tt.type==="GET"||z.emulateJSON||(Tt.processData=!1);var pe=z.error;z.error=function(Ie,ze,Qe){z.textStatus=ze,z.errorThrown=Qe,pe&&pe.call(z.context,Ie,ze,Qe)};var Te=z.xhr=j.ajax(L.extend(Tt,z));return F.trigger("request",F,Te,z),Te};var st={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};j.ajax=function(){return j.$.ajax.apply(j.$,arguments)};var Yt=j.Router=function(b){b||(b={}),this.preinitialize.apply(this,arguments),b.routes&&(this.routes=b.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Wt=/\((.*?)\)/g,ee=/(\(\?)?:\w+/g,ue=/\*\w+/g,Jt=/[\-{}\[\]+?.,\\\^$|#\s]/g;L.extend(Yt.prototype,Dt,{preinitialize:function(){},initialize:function(){},route:function(b,F,z){L.isRegExp(b)||(b=this._routeToRegExp(b)),L.isFunction(F)&&(z=F,F=""),z||(z=this[F]);var gt=this;return j.history.route(b,function(Tt){var Ot=gt._extractParameters(b,Tt);gt.execute(z,Ot,F)!==!1&&(gt.trigger.apply(gt,["route:"+F].concat(Ot)),gt.trigger("route",F,Ot),j.history.trigger("route",gt,F,Ot))}),this},execute:function(b,F,z){b&&b.apply(this,F)},navigate:function(b,F){return j.history.navigate(b,F),this},_bindRoutes:function(){if(this.routes){this.routes=L.result(this,"routes");for(var b,F=L.keys(this.routes);(b=F.pop())!=null;)this.route(b,this.routes[b])}},_routeToRegExp:function(b){return b=b.replace(Jt,"\\$&").replace(Wt,"(?:$1)?").replace(ee,function(F,z){return z?F:"([^/?]+)"}).replace(ue,"([^?]*?)"),new RegExp("^"+b+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(b,F){var z=b.exec(F).slice(1);return L.map(z,function(gt,Tt){return Tt===z.length-1?gt||null:gt?decodeURIComponent(gt):null})}});var Pe=j.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},Xe=/^[#\/]|\s+$/g,qe=/^\/+|\/+$/g,pn=/#.*$/;Pe.started=!1,L.extend(Pe.prototype,Dt,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(b){return decodeURI(b.replace(/%25/g,"%2525"))},getSearch:function(){var b=this.location.href.replace(/#.*/,"").match(/\?.+/);return b?b[0]:""},getHash:function(b){var F=(b||this).location.href.match(/#(.*)$/);return F?F[1]:""},getPath:function(){var b=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return b.charAt(0)==="/"?b.slice(1):b},getFragment:function(b){return b==null&&(b=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),b.replace(Xe,"")},start:function(b){if(Pe.started)throw new Error("Backbone.history has already been started");if(Pe.started=!0,this.options=L.extend({root:"/"},this.options,b),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(qe,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var F=this.root.slice(0,-1)||"/";return this.location.replace(F+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var z=document.body,gt=z.insertBefore(this.iframe,z.firstChild).contentWindow;gt.document.open(),gt.document.close(),gt.location.hash="#"+this.fragment}var Tt=window.addEventListener||function(Ot,pe){return attachEvent("on"+Ot,pe)};if(this._usePushState?Tt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Tt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var b=window.removeEventListener||function(F,z){return detachEvent("on"+F,z)};this._usePushState?b("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&b("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Pe.started=!1},route:function(b,F){this.handlers.unshift({route:b,callback:F})},checkUrl:function(b){var F=this.getFragment();if(F===this.fragment&&this.iframe&&(F=this.getHash(this.iframe.contentWindow)),F===this.fragment)return!1;this.iframe&&this.navigate(F),this.loadUrl()},loadUrl:function(b){return!!this.matchRoot()&&(b=this.fragment=this.getFragment(b),L.some(this.handlers,function(F){if(F.route.test(b))return F.callback(b),!0}))},navigate:function(b,F){if(!Pe.started)return!1;F&&F!==!0||(F={trigger:!!F}),b=this.getFragment(b||"");var z=this.root;b!==""&&b.charAt(0)!=="?"||(z=z.slice(0,-1)||"/");var gt=z+b;b=b.replace(pn,"");var Tt=this.decodeFragment(b);if(this.fragment!==Tt){if(this.fragment=Tt,this._usePushState)this.history[F.replace?"replaceState":"pushState"]({},document.title,gt);else{if(!this._wantsHashChange)return this.location.assign(gt);if(this._updateHash(this.location,b,F.replace),this.iframe&&b!==this.getHash(this.iframe.contentWindow)){var Ot=this.iframe.contentWindow;F.replace||(Ot.document.open(),Ot.document.close()),this._updateHash(Ot.location,b,F.replace)}}return F.trigger?this.loadUrl(b):void 0}},_updateHash:function(b,F,z){if(z){var gt=b.href.replace(/(javascript:|#).*$/,"");b.replace(gt+"#"+F)}else b.hash="#"+F}}),j.history=new Pe;var Rn=function(b,F){var z,gt=this;return z=b&&L.has(b,"constructor")?b.constructor:function(){return gt.apply(this,arguments)},L.extend(z,gt,F),z.prototype=L.create(gt.prototype,b),z.prototype.constructor=z,z.__super__=gt.prototype,z};Y.extend=et.extend=Yt.extend=Se.extend=Pe.extend=Rn;var yt=function(){throw new Error('A "url" property or function must be specified')},Ht=function(b,F){var z=F.error;F.error=function(gt){z&&z.call(F.context,b,gt,F),b.trigger("error",b,gt,F)}};return j}(J,P,B,k)}.apply(wt,rt),_t===void 0||(C.exports=_t)})()},210:(C,wt,I)=>{(function(rt){rt.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(X,J){return/^[;{}]$/.test(J)}}),rt.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(X,J,B,k){return this.jsonMode?/^[\[,{]$/.test(J)||/^}/.test(B):(J!=";"||!k.lexical||k.lexical.type!=")")&&/^[;{}]$/.test(J)&&!/^;/.test(B)}});var _t=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;rt.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(X,J,B,k){var P=!1;return this.configuration=="html"&&(P=!!k.context&&_t.test(k.context.tagName)),!P&&(X=="tag"&&/>$/.test(J)&&k.context||/^</.test(B))}}),rt.defineExtension("commentRange",function(X,J,B){var k=this,P=rt.innerMode(k.getMode(),k.getTokenAt(J).state).mode;k.operation(function(){if(X)k.replaceRange(P.commentEnd,B),k.replaceRange(P.commentStart,J),J.line==B.line&&J.ch==B.ch&&k.setCursor(J.line,J.ch+P.commentStart.length);else{var E=k.getRange(J,B),j=E.indexOf(P.commentStart),L=E.lastIndexOf(P.commentEnd);j>-1&&L>-1&&L>j&&(E=E.substr(0,j)+E.substring(j+P.commentStart.length,L)+E.substr(L+P.commentEnd.length)),k.replaceRange(E,J,B)}})}),rt.defineExtension("autoIndentRange",function(X,J){var B=this;this.operation(function(){for(var k=X.line;k<=J.line;k++)B.indentLine(k,"smart")})}),rt.defineExtension("autoFormatRange",function(X,J){var B=this,k=B.getMode(),P=B.getRange(X,J).split(`
`),E=rt.copyState(k,B.getTokenAt(X).state),j=B.getOption("tabSize"),L="",ot=0,it=X.ch===0;function At(){L+=`
`,it=!0,++ot}for(var jt=0;jt<P.length;++jt){for(var Dt=new rt.StringStream(P[jt],j);!Dt.eol();){var te=rt.innerMode(k,E),ft=k.token(Dt,E),ut=Dt.current();Dt.start=Dt.pos,it&&!/\S/.test(ut)||(L+=ut,it=!1),!it&&te.mode.newlineAfterToken&&te.mode.newlineAfterToken(ft,ut,Dt.string.slice(Dt.pos)||P[jt+1]||"",te.state)&&At()}!Dt.pos&&k.blankLine&&k.blankLine(E),!it&&jt<P.length-1&&At()}B.operation(function(){B.replaceRange(L,X,J);for(var Nt=X.line+1,Zt=X.line+ot;Nt<=Zt;++Nt)B.indentLine(Nt,"smart");B.setSelection(X,B.getCursor(!1))})})})(I(631))},631:function(C){C.exports=function(){var wt=navigator.userAgent,I=navigator.platform,rt=/gecko\/\d/i.test(wt),_t=/MSIE \d/.test(wt),X=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(wt),J=/Edge\/(\d+)/.exec(wt),B=_t||X||J,k=B&&(_t?document.documentMode||6:+(J||X)[1]),P=!J&&/WebKit\//.test(wt),E=P&&/Qt\/\d+\.\d+/.test(wt),j=!J&&/Chrome\/(\d+)/.exec(wt),L=j&&+j[1],ot=/Opera\//.test(wt),it=/Apple Computer/.test(navigator.vendor),At=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(wt),jt=/PhantomJS/.test(wt),Dt=it&&(/Mobile\/\w+/.test(wt)||navigator.maxTouchPoints>2),te=/Android/.test(wt),ft=Dt||te||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(wt),ut=Dt||/Mac/.test(I),Nt=/\bCrOS\b/.test(wt),Zt=/win/i.test(I),re=ot&&wt.match(/Version\/(\d*\.\d*)/);re&&(re=Number(re[1])),re&&re>=15&&(ot=!1,P=!0);var at=ut&&(E||ot&&(re==null||re<12.11)),D=rt||B&&k>=9;function H(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}var Y,et=function(o,s){var u=o.className,c=H(s).exec(u);if(c){var p=u.slice(c.index+c[0].length);o.className=u.slice(0,c.index)+(p?c[1]+p:"")}};function Ct(o){for(var s=o.childNodes.length;s>0;--s)o.removeChild(o.firstChild);return o}function nt(o,s){return Ct(o).appendChild(s)}function vt(o,s,u,c){var p=document.createElement(o);if(u&&(p.className=u),c&&(p.style.cssText=c),typeof s=="string")p.appendChild(document.createTextNode(s));else if(s)for(var h=0;h<s.length;++h)p.appendChild(s[h]);return p}function N(o,s,u,c){var p=vt(o,s,u,c);return p.setAttribute("role","presentation"),p}function Mt(o,s){if(s.nodeType==3&&(s=s.parentNode),o.contains)return o.contains(s);do if(s.nodeType==11&&(s=s.host),s==o)return!0;while(s=s.parentNode)}function Et(){var o;try{o=document.activeElement}catch{o=document.body||null}for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;return o}function Kt(o,s){var u=o.className;H(s).test(u)||(o.className+=(u?" ":"")+s)}function Ae(o,s){for(var u=o.split(" "),c=0;c<u.length;c++)u[c]&&!H(u[c]).test(s)&&(s+=" "+u[c]);return s}Y=document.createRange?function(o,s,u,c){var p=document.createRange();return p.setEnd(c||o,u),p.setStart(o,s),p}:function(o,s,u){var c=document.body.createTextRange();try{c.moveToElementText(o.parentNode)}catch{return c}return c.collapse(!0),c.moveEnd("character",u),c.moveStart("character",s),c};var Se=function(o){o.select()};function _e(o){var s=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,s)}}function Ne(o,s,u){for(var c in s||(s={}),o)!o.hasOwnProperty(c)||u===!1&&s.hasOwnProperty(c)||(s[c]=o[c]);return s}function xe(o,s,u,c,p){s==null&&(s=o.search(/[^\s\u00a0]/))==-1&&(s=o.length);for(var h=c||0,m=p||0;;){var y=o.indexOf("	",h);if(y<0||y>=s)return m+(s-h);m+=y-h,m+=u-m%u,h=y+1}}Dt?Se=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:B&&(Se=function(o){try{o.select()}catch{}});var Oe=function(){this.id=null,this.f=null,this.time=0,this.handler=_e(this.onTimeout,this)};function be(o,s){for(var u=0;u<o.length;++u)if(o[u]==s)return u;return-1}Oe.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},Oe.prototype.set=function(o,s){this.f=s;var u=+new Date+o;(!this.id||u<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=u)};var de=50,ce={toString:function(){return"CodeMirror.Pass"}},se={scroll:!1},st={origin:"*mouse"},Yt={origin:"+move"};function Wt(o,s,u){for(var c=0,p=0;;){var h=o.indexOf("	",c);h==-1&&(h=o.length);var m=h-c;if(h==o.length||p+m>=s)return c+Math.min(m,s-p);if(p+=h-c,c=h+1,(p+=u-p%u)>=s)return c}}var ee=[""];function ue(o){for(;ee.length<=o;)ee.push(Jt(ee)+" ");return ee[o]}function Jt(o){return o[o.length-1]}function Pe(o,s){for(var u=[],c=0;c<o.length;c++)u[c]=s(o[c],c);return u}function Xe(o,s,u){for(var c=0,p=u(s);c<o.length&&u(o[c])<=p;)c++;o.splice(c,0,s)}function qe(){}function pn(o,s){var u;return Object.create?u=Object.create(o):(qe.prototype=o,u=new qe),s&&Ne(s,u),u}var Rn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function yt(o){return/\w/.test(o)||o>"\x80"&&(o.toUpperCase()!=o.toLowerCase()||Rn.test(o))}function Ht(o,s){return s?!!(s.source.indexOf("\\w")>-1&&yt(o))||s.test(o):yt(o)}function b(o){for(var s in o)if(o.hasOwnProperty(s)&&o[s])return!1;return!0}var F=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function z(o){return o.charCodeAt(0)>=768&&F.test(o)}function gt(o,s,u){for(;(u<0?s>0:s<o.length)&&z(o.charAt(s));)s+=u;return s}function Tt(o,s,u){for(var c=s>u?-1:1;;){if(s==u)return s;var p=(s+u)/2,h=c<0?Math.ceil(p):Math.floor(p);if(h==s)return o(h)?s:u;o(h)?u=h:s=h+c}}function Ot(o,s,u,c){if(!o)return c(s,u,"ltr",0);for(var p=!1,h=0;h<o.length;++h){var m=o[h];(m.from<u&&m.to>s||s==u&&m.to==s)&&(c(Math.max(m.from,s),Math.min(m.to,u),m.level==1?"rtl":"ltr",h),p=!0)}p||c(s,u,"ltr")}var pe=null;function Te(o,s,u){var c;pe=null;for(var p=0;p<o.length;++p){var h=o[p];if(h.from<s&&h.to>s)return p;h.to==s&&(h.from!=h.to&&u=="before"?c=p:pe=p),h.from==s&&(h.from!=h.to&&u!="before"?c=p:pe=p)}return c!=null?c:pe}var Ie=function(){var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function u(O){return O<=247?o.charAt(O):1424<=O&&O<=1524?"R":1536<=O&&O<=1785?s.charAt(O-1536):1774<=O&&O<=2220?"r":8192<=O&&O<=8203?"w":O==8204?"b":"L"}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,p=/[stwN]/,h=/[LRr]/,m=/[Lb1n]/,y=/[1n]/;function x(O,U,W){this.level=O,this.from=U,this.to=W}return function(O,U){var W=U=="ltr"?"L":"R";if(O.length==0||U=="ltr"&&!c.test(O))return!1;for(var dt=O.length,ht=[],xt=0;xt<dt;++xt)ht.push(u(O.charCodeAt(xt)));for(var Rt=0,Bt=W;Rt<dt;++Rt){var ne=ht[Rt];ne=="m"?ht[Rt]=Bt:Bt=ne}for(var ie=0,Xt=W;ie<dt;++ie){var ye=ht[ie];ye=="1"&&Xt=="r"?ht[ie]="n":h.test(ye)&&(Xt=ye,ye=="r"&&(ht[ie]="R"))}for(var ve=1,Ce=ht[0];ve<dt-1;++ve){var sn=ht[ve];sn=="+"&&Ce=="1"&&ht[ve+1]=="1"?ht[ve]="1":sn!=","||Ce!=ht[ve+1]||Ce!="1"&&Ce!="n"||(ht[ve]=Ce),Ce=sn}for(var an=0;an<dt;++an){var gr=ht[an];if(gr==",")ht[an]="N";else if(gr=="%"){var hn=void 0;for(hn=an+1;hn<dt&&ht[hn]=="%";++hn);for(var sr=an&&ht[an-1]=="!"||hn<dt&&ht[hn]=="1"?"1":"N",vr=an;vr<hn;++vr)ht[vr]=sr;an=hn-1}}for(var xn=0,En=W;xn<dt;++xn){var dr=ht[xn];En=="L"&&dr=="1"?ht[xn]="L":h.test(dr)&&(En=dr)}for(var Vn=0;Vn<dt;++Vn)if(p.test(ht[Vn])){var An=void 0;for(An=Vn+1;An<dt&&p.test(ht[An]);++An);for(var jn=(Vn?ht[Vn-1]:W)=="L",mr=jn==((An<dt?ht[An]:W)=="L")?jn?"L":"R":W,ni=Vn;ni<An;++ni)ht[ni]=mr;Vn=An-1}for(var po,ar=[],Cn=0;Cn<dt;)if(m.test(ht[Cn])){var bc=Cn;for(++Cn;Cn<dt&&m.test(ht[Cn]);++Cn);ar.push(new x(0,bc,Cn))}else{var Fo=Cn,Mi=ar.length,Li=U=="rtl"?1:0;for(++Cn;Cn<dt&&ht[Cn]!="L";++Cn);for(var zn=Fo;zn<Cn;)if(y.test(ht[zn])){Fo<zn&&(ar.splice(Mi,0,new x(1,Fo,zn)),Mi+=Li);var xs=zn;for(++zn;zn<Cn&&y.test(ht[zn]);++zn);ar.splice(Mi,0,new x(2,xs,zn)),Mi+=Li,Fo=zn}else++zn;Fo<Cn&&ar.splice(Mi,0,new x(1,Fo,Cn))}return U=="ltr"&&(ar[0].level==1&&(po=O.match(/^\s+/))&&(ar[0].from=po[0].length,ar.unshift(new x(0,0,po[0].length))),Jt(ar).level==1&&(po=O.match(/\s+$/))&&(Jt(ar).to-=po[0].length,ar.push(new x(0,dt-po[0].length,dt)))),U=="rtl"?ar.reverse():ar}}();function ze(o,s){var u=o.order;return u==null&&(u=o.order=Ie(o.text,s)),u}var Qe=[],qt=function(o,s,u){if(o.addEventListener)o.addEventListener(s,u,!1);else if(o.attachEvent)o.attachEvent("on"+s,u);else{var c=o._handlers||(o._handlers={});c[s]=(c[s]||Qe).concat(u)}};function V(o,s){return o._handlers&&o._handlers[s]||Qe}function Q(o,s,u){if(o.removeEventListener)o.removeEventListener(s,u,!1);else if(o.detachEvent)o.detachEvent("on"+s,u);else{var c=o._handlers,p=c&&c[s];if(p){var h=be(p,u);h>-1&&(c[s]=p.slice(0,h).concat(p.slice(h+1)))}}}function pt(o,s){var u=V(o,s);if(u.length)for(var c=Array.prototype.slice.call(arguments,2),p=0;p<u.length;++p)u[p].apply(null,c)}function bt(o,s,u){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),pt(o,u||s.type,o,s),fn(s)||s.codemirrorIgnore}function Gt(o){var s=o._handlers&&o._handlers.cursorActivity;if(s)for(var u=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),c=0;c<s.length;++c)be(u,s[c])==-1&&u.push(s[c])}function he(o,s){return V(o,s).length>0}function Fe(o){o.prototype.on=function(s,u){qt(this,s,u)},o.prototype.off=function(s,u){Q(this,s,u)}}function We(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function Ln(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function fn(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==0}function Re(o){We(o),Ln(o)}function Ar(o){return o.target||o.srcElement}function Yn(o){var s=o.which;return s==null&&(1&o.button?s=1:2&o.button?s=3:4&o.button&&(s=2)),ut&&o.ctrlKey&&s==1&&(s=3),s}var jr,dn,_n=function(){if(B&&k<9)return!1;var o=vt("div");return"draggable"in o||"dragDrop"in o}();function Bn(o){if(jr==null){var s=vt("span","\u200B");nt(o,vt("span",[s,document.createTextNode("x")])),o.firstChild.offsetHeight!=0&&(jr=s.offsetWidth<=1&&s.offsetHeight>2&&!(B&&k<8))}var u=jr?vt("span","\u200B"):vt("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return u.setAttribute("cm-text",""),u}function Mr(o){if(dn!=null)return dn;var s=nt(o,document.createTextNode("A\u062EA")),u=Y(s,0,1).getBoundingClientRect(),c=Y(s,1,2).getBoundingClientRect();return Ct(o),!(!u||u.left==u.right)&&(dn=c.right-u.right<3)}var Dn,_o=`

b`.split(/\n/).length!=3?function(o){for(var s=0,u=[],c=o.length;s<=c;){var p=o.indexOf(`
`,s);p==-1&&(p=o.length);var h=o.slice(s,o.charAt(p-1)=="\r"?p-1:p),m=h.indexOf("\r");m!=-1?(u.push(h.slice(0,m)),s+=m+1):(u.push(h),s=p+1)}return u}:function(o){return o.split(/\r\n?|\n/)},Vo=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){var s;try{s=o.ownerDocument.selection.createRange()}catch{}return!(!s||s.parentElement()!=o)&&s.compareEndPoints("StartToEnd",s)!=0},xo="oncopy"in(Dn=vt("div"))||(Dn.setAttribute("oncopy","return;"),typeof Dn.oncopy=="function"),Ro=null;function ro(o){if(Ro!=null)return Ro;var s=nt(o,vt("span","x")),u=s.getBoundingClientRect(),c=Y(s,0,1).getBoundingClientRect();return Ro=Math.abs(u.left-c.left)>1}var ur={},ln={};function Ho(o,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),ur[o]=s}function Lr(o,s){ln[o]=s}function Co(o){if(typeof o=="string"&&ln.hasOwnProperty(o))o=ln[o];else if(o&&typeof o.name=="string"&&ln.hasOwnProperty(o.name)){var s=ln[o.name];typeof s=="string"&&(s={name:s}),(o=pn(s,o)).name=s.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return Co("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return Co("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function Jr(o,s){s=Co(s);var u=ur[s.name];if(!u)return Jr(o,"text/plain");var c=u(o,s);if(Wn.hasOwnProperty(s.name)){var p=Wn[s.name];for(var h in p)p.hasOwnProperty(h)&&(c.hasOwnProperty(h)&&(c["_"+h]=c[h]),c[h]=p[h])}if(c.name=s.name,s.helperType&&(c.helperType=s.helperType),s.modeProps)for(var m in s.modeProps)c[m]=s.modeProps[m];return c}var Wn={};function Nn(o,s){Ne(s,Wn.hasOwnProperty(o)?Wn[o]:Wn[o]={})}function $n(o,s){if(s===!0)return s;if(o.copyState)return o.copyState(s);var u={};for(var c in s){var p=s[c];p instanceof Array&&(p=p.concat([])),u[c]=p}return u}function zo(o,s){for(var u;o.innerMode&&(u=o.innerMode(s))&&u.mode!=o;)s=u.state,o=u.mode;return u||{mode:o,state:s}}function vo(o,s,u){return!o.startState||o.startState(s,u)}var Ge=function(o,s,u){this.pos=this.start=0,this.string=o,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=u};function ge(o,s){if((s-=o.first)<0||s>=o.size)throw new Error("There is no line "+(s+o.first)+" in the document.");for(var u=o;!u.lines;)for(var c=0;;++c){var p=u.children[c],h=p.chunkSize();if(s<h){u=p;break}s-=h}return u.lines[s]}function rr(o,s,u){var c=[],p=s.line;return o.iter(s.line,u.line+1,function(h){var m=h.text;p==u.line&&(m=m.slice(0,u.ch)),p==s.line&&(m=m.slice(s.ch)),c.push(m),++p}),c}function Uo(o,s,u){var c=[];return o.iter(s,u,function(p){c.push(p.text)}),c}function or(o,s){var u=s-o.height;if(u)for(var c=o;c;c=c.parent)c.height+=u}function Ye(o){if(o.parent==null)return null;for(var s=o.parent,u=be(s.lines,o),c=s.parent;c;s=c,c=c.parent)for(var p=0;c.children[p]!=s;++p)u+=c.children[p].chunkSize();return u+s.first}function In(o,s){var u=o.first;t:do{for(var c=0;c<o.children.length;++c){var p=o.children[c],h=p.height;if(s<h){o=p;continue t}s-=h,u+=p.chunkSize()}return u}while(!o.lines);for(var m=0;m<o.lines.length;++m){var y=o.lines[m].height;if(s<y)break;s-=y}return u+m}function mo(o,s){return s>=o.first&&s<o.first+o.size}function Bo(o,s){return String(o.lineNumberFormatter(s+o.firstLineNumber))}function Ut(o,s,u){if(u===void 0&&(u=null),!(this instanceof Ut))return new Ut(o,s,u);this.line=o,this.ch=s,this.sticky=u}function T(o,s){return o.line-s.line||o.ch-s.ch}function $(o,s){return o.sticky==s.sticky&&T(o,s)==0}function Lt(o){return Ut(o.line,o.ch)}function Qt(o,s){return T(o,s)<0?s:o}function fe(o,s){return T(o,s)<0?o:s}function $e(o,s){return Math.max(o.first,Math.min(s,o.first+o.size-1))}function oe(o,s){if(s.line<o.first)return Ut(o.first,0);var u=o.first+o.size-1;return s.line>u?Ut(u,ge(o,u).text.length):Hn(s,ge(o,s.line).text.length)}function Hn(o,s){var u=o.ch;return u==null||u>s?Ut(o.line,s):u<0?Ut(o.line,0):o}function Tn(o,s){for(var u=[],c=0;c<s.length;c++)u[c]=oe(o,s[c]);return u}Ge.prototype.eol=function(){return this.pos>=this.string.length},Ge.prototype.sol=function(){return this.pos==this.lineStart},Ge.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ge.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ge.prototype.eat=function(o){var s=this.string.charAt(this.pos);if(typeof o=="string"?s==o:s&&(o.test?o.test(s):o(s)))return++this.pos,s},Ge.prototype.eatWhile=function(o){for(var s=this.pos;this.eat(o););return this.pos>s},Ge.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},Ge.prototype.skipToEnd=function(){this.pos=this.string.length},Ge.prototype.skipTo=function(o){var s=this.string.indexOf(o,this.pos);if(s>-1)return this.pos=s,!0},Ge.prototype.backUp=function(o){this.pos-=o},Ge.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=xe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?xe(this.string,this.lineStart,this.tabSize):0)},Ge.prototype.indentation=function(){return xe(this.string,null,this.tabSize)-(this.lineStart?xe(this.string,this.lineStart,this.tabSize):0)},Ge.prototype.match=function(o,s,u){if(typeof o!="string"){var c=this.string.slice(this.pos).match(o);return c&&c.index>0?null:(c&&s!==!1&&(this.pos+=c[0].length),c)}var p=function(h){return u?h.toLowerCase():h};if(p(this.string.substr(this.pos,o.length))==p(o))return s!==!1&&(this.pos+=o.length),!0},Ge.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ge.prototype.hideFirstChars=function(o,s){this.lineStart+=o;try{return s()}finally{this.lineStart-=o}},Ge.prototype.lookAhead=function(o){var s=this.lineOracle;return s&&s.lookAhead(o)},Ge.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};var Ri=function(o,s){this.state=o,this.lookAhead=s},xr=function(o,s,u,c){this.state=s,this.doc=o,this.line=u,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};function Ms(o,s,u,c){var p=[o.state.modeGen],h={};So(o,s.text,o.doc.mode,u,function(O,U){return p.push(O,U)},h,c);for(var m=u.state,y=function(O){u.baseTokens=p;var U=o.state.overlays[O],W=1,dt=0;u.state=!0,So(o,s.text,U.mode,u,function(ht,xt){for(var Rt=W;dt<ht;){var Bt=p[W];Bt>ht&&p.splice(W,1,ht,p[W+1],Bt),W+=2,dt=Math.min(ht,Bt)}if(xt)if(U.opaque)p.splice(Rt,W-Rt,ht,"overlay "+xt),W=Rt+2;else for(;Rt<W;Rt+=2){var ne=p[Rt+1];p[Rt+1]=(ne?ne+" ":"")+"overlay "+xt}},h),u.state=m,u.baseTokens=null,u.baseTokenPos=1},x=0;x<o.state.overlays.length;++x)y(x);return{styles:p,classes:h.bgClass||h.textClass?h:null}}function Cr(o,s,u){if(!s.styles||s.styles[0]!=o.state.modeGen){var c=yo(o,Ye(s)),p=s.text.length>o.options.maxHighlightLength&&$n(o.doc.mode,c.state),h=Ms(o,s,c);p&&(c.state=p),s.stateAfter=c.save(!p),s.styles=h.styles,h.classes?s.styleClasses=h.classes:s.styleClasses&&(s.styleClasses=null),u===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return s.styles}function yo(o,s,u){var c=o.doc,p=o.display;if(!c.mode.startState)return new xr(c,!0,s);var h=Hi(o,s,u),m=h>c.first&&ge(c,h-1).stateAfter,y=m?xr.fromSaved(c,m,h):new xr(c,vo(c.mode),h);return c.iter(h,s,function(x){oo(o,x.text,y);var O=y.line;x.stateAfter=O==s-1||O%5==0||O>=p.viewFrom&&O<p.viewTo?y.save():null,y.nextLine()}),u&&(c.modeFrontier=y.line),y}function oo(o,s,u,c){var p=o.doc.mode,h=new Ge(s,o.options.tabSize,u);for(h.start=h.pos=c||0,s==""&&bo(p,u.state);!h.eol();)Xn(p,h,u.state),h.start=h.pos}function bo(o,s){if(o.blankLine)return o.blankLine(s);if(o.innerMode){var u=zo(o,s);return u.mode.blankLine?u.mode.blankLine(u.state):void 0}}function Xn(o,s,u,c){for(var p=0;p<10;p++){c&&(c[0]=zo(o,u).mode);var h=o.token(s,u);if(s.pos>s.start)return h}throw new Error("Mode "+o.name+" failed to advance stream.")}xr.prototype.lookAhead=function(o){var s=this.doc.getLine(this.line+o);return s!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),s},xr.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},xr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},xr.fromSaved=function(o,s,u){return s instanceof Ri?new xr(o,$n(o.mode,s.state),u,s.lookAhead):new xr(o,$n(o.mode,s),u)},xr.prototype.save=function(o){var s=o!==!1?$n(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ri(s,this.maxLookAhead):s};var wo=function(o,s,u){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=s||null,this.state=u};function Wo(o,s,u,c){var p,h,m=o.doc,y=m.mode,x=ge(m,(s=oe(m,s)).line),O=yo(o,s.line,u),U=new Ge(x.text,o.options.tabSize,O);for(c&&(h=[]);(c||U.pos<s.ch)&&!U.eol();)U.start=U.pos,p=Xn(y,U,O.state),c&&h.push(new wo(U,p,$n(m.mode,O.state)));return c?h:new wo(U,p,O.state)}function Ls(o,s){if(o)for(;;){var u=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!u)break;o=o.slice(0,u.index)+o.slice(u.index+u[0].length);var c=u[1]?"bgClass":"textClass";s[c]==null?s[c]=u[2]:new RegExp("(?:^|\\s)"+u[2]+"(?:$|\\s)").test(s[c])||(s[c]+=" "+u[2])}return o}function So(o,s,u,c,p,h,m){var y=u.flattenSpans;y==null&&(y=o.options.flattenSpans);var x,O=0,U=null,W=new Ge(s,o.options.tabSize,c),dt=o.options.addModeClass&&[null];for(s==""&&Ls(bo(u,c.state),h);!W.eol();){if(W.pos>o.options.maxHighlightLength?(y=!1,m&&oo(o,s,c,W.pos),W.pos=s.length,x=null):x=Ls(Xn(u,W,c.state,dt),h),dt){var ht=dt[0].name;ht&&(x="m-"+(x?ht+" "+x:ht))}if(!y||U!=x){for(;O<W.start;)p(O=Math.min(W.start,O+5e3),U);U=x}W.start=W.pos}for(;O<W.pos;){var xt=Math.min(W.pos,O+5e3);p(xt,U),O=xt}}function Hi(o,s,u){for(var c,p,h=o.doc,m=u?-1:s-(o.doc.mode.innerMode?1e3:100),y=s;y>m;--y){if(y<=h.first)return h.first;var x=ge(h,y-1),O=x.stateAfter;if(O&&(!u||y+(O instanceof Ri?O.lookAhead:0)<=h.modeFrontier))return y;var U=xe(x.text,null,o.options.tabSize);(p==null||c>U)&&(p=y-1,c=U)}return p}function Ds(o,s){if(o.modeFrontier=Math.min(o.modeFrontier,s),!(o.highlightFrontier<s-10)){for(var u=o.first,c=s-1;c>u;c--){var p=ge(o,c).stateAfter;if(p&&(!(p instanceof Ri)||c+p.lookAhead<s)){u=c+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,u)}}var Jn=!1,Zr=!1;function pi(){Jn=!0}function Ns(){Zr=!0}function Sr(o,s,u){this.marker=o,this.from=s,this.to=u}function Oo(o,s){if(o)for(var u=0;u<o.length;++u){var c=o[u];if(c.marker==s)return c}}function fi(o,s){for(var u,c=0;c<o.length;++c)o[c]!=s&&(u||(u=[])).push(o[c]);return u}function Is(o,s,u){var c=u&&window.WeakSet&&(u.markedSpans||(u.markedSpans=new WeakSet));c&&o.markedSpans&&c.has(o.markedSpans)?o.markedSpans.push(s):(o.markedSpans=o.markedSpans?o.markedSpans.concat([s]):[s],c&&c.add(o.markedSpans)),s.marker.attachLine(o)}function Pa(o,s,u){var c;if(o)for(var p=0;p<o.length;++p){var h=o[p],m=h.marker;if(h.from==null||(m.inclusiveLeft?h.from<=s:h.from<s)||h.from==s&&m.type=="bookmark"&&(!u||!h.marker.insertLeft)){var y=h.to==null||(m.inclusiveRight?h.to>=s:h.to>s);(c||(c=[])).push(new Sr(m,h.from,y?null:h.to))}}return c}function di(o,s,u){var c;if(o)for(var p=0;p<o.length;++p){var h=o[p],m=h.marker;if(h.to==null||(m.inclusiveRight?h.to>=s:h.to>s)||h.from==s&&m.type=="bookmark"&&(!u||h.marker.insertLeft)){var y=h.from==null||(m.inclusiveLeft?h.from<=s:h.from<s);(c||(c=[])).push(new Sr(m,y?null:h.from-s,h.to==null?null:h.to-s))}}return c}function $o(o,s){if(s.full)return null;var u=mo(o,s.from.line)&&ge(o,s.from.line).markedSpans,c=mo(o,s.to.line)&&ge(o,s.to.line).markedSpans;if(!u&&!c)return null;var p=s.from.ch,h=s.to.ch,m=T(s.from,s.to)==0,y=Pa(u,p,m),x=di(c,h,m),O=s.text.length==1,U=Jt(s.text).length+(O?p:0);if(y)for(var W=0;W<y.length;++W){var dt=y[W];if(dt.to==null){var ht=Oo(x,dt.marker);ht?O&&(dt.to=ht.to==null?null:ht.to+U):dt.to=p}}if(x)for(var xt=0;xt<x.length;++xt){var Rt=x[xt];Rt.to!=null&&(Rt.to+=U),Rt.from==null?Oo(y,Rt.marker)||(Rt.from=U,O&&(y||(y=[])).push(Rt)):(Rt.from+=U,O&&(y||(y=[])).push(Rt))}y&&(y=zi(y)),x&&x!=y&&(x=zi(x));var Bt=[y];if(!O){var ne,ie=s.text.length-2;if(ie>0&&y)for(var Xt=0;Xt<y.length;++Xt)y[Xt].to==null&&(ne||(ne=[])).push(new Sr(y[Xt].marker,null,null));for(var ye=0;ye<ie;++ye)Bt.push(ne);Bt.push(x)}return Bt}function zi(o){for(var s=0;s<o.length;++s){var u=o[s];u.from!=null&&u.from==u.to&&u.marker.clearWhenEmpty!==!1&&o.splice(s--,1)}return o.length?o:null}function Be(o,s,u){var c=null;if(o.iter(s.line,u.line+1,function(ht){if(ht.markedSpans)for(var xt=0;xt<ht.markedSpans.length;++xt){var Rt=ht.markedSpans[xt].marker;!Rt.readOnly||c&&be(c,Rt)!=-1||(c||(c=[])).push(Rt)}}),!c)return null;for(var p=[{from:s,to:u}],h=0;h<c.length;++h)for(var m=c[h],y=m.find(0),x=0;x<p.length;++x){var O=p[x];if(!(T(O.to,y.from)<0||T(O.from,y.to)>0)){var U=[x,1],W=T(O.from,y.from),dt=T(O.to,y.to);(W<0||!m.inclusiveLeft&&!W)&&U.push({from:O.from,to:y.from}),(dt>0||!m.inclusiveRight&&!dt)&&U.push({from:y.to,to:O.to}),p.splice.apply(p,U),x+=U.length-3}}return p}function Zn(o){var s=o.markedSpans;if(s){for(var u=0;u<s.length;++u)s[u].marker.detachLine(o);o.markedSpans=null}}function Ui(o,s){if(s){for(var u=0;u<s.length;++u)s[u].marker.attachLine(o);o.markedSpans=s}}function hr(o){return o.inclusiveLeft?-1:0}function qn(o){return o.inclusiveRight?1:0}function vn(o,s){var u=o.lines.length-s.lines.length;if(u!=0)return u;var c=o.find(),p=s.find(),h=T(c.from,p.from)||hr(o)-hr(s);if(h)return-h;var m=T(c.to,p.to)||qn(o)-qn(s);return m||s.id-o.id}function Or(o,s){var u,c=Zr&&o.markedSpans;if(c)for(var p=void 0,h=0;h<c.length;++h)(p=c[h]).marker.collapsed&&(s?p.from:p.to)==null&&(!u||vn(u,p.marker)<0)&&(u=p.marker);return u}function qo(o){return Or(o,!0)}function Dr(o){return Or(o,!1)}function Bi(o,s){var u,c=Zr&&o.markedSpans;if(c)for(var p=0;p<c.length;++p){var h=c[p];h.marker.collapsed&&(h.from==null||h.from<s)&&(h.to==null||h.to>s)&&(!u||vn(u,h.marker)<0)&&(u=h.marker)}return u}function mn(o,s,u,c,p){var h=ge(o,s),m=Zr&&h.markedSpans;if(m)for(var y=0;y<m.length;++y){var x=m[y];if(x.marker.collapsed){var O=x.marker.find(0),U=T(O.from,u)||hr(x.marker)-hr(p),W=T(O.to,c)||qn(x.marker)-qn(p);if(!(U>=0&&W<=0||U<=0&&W>=0)&&(U<=0&&(x.marker.inclusiveRight&&p.inclusiveLeft?T(O.to,u)>=0:T(O.to,u)>0)||U>=0&&(x.marker.inclusiveRight&&p.inclusiveLeft?T(O.from,c)<=0:T(O.from,c)<0)))return!0}}}function Tr(o){for(var s;s=qo(o);)o=s.find(-1,!0).line;return o}function Wi(o){for(var s;s=Dr(o);)o=s.find(1,!0).line;return o}function hi(o){for(var s,u;s=Dr(o);)o=s.find(1,!0).line,(u||(u=[])).push(o);return u}function pr(o,s){var u=ge(o,s),c=Tr(u);return u==c?s:Ye(c)}function Nr(o,s){if(s>o.lastLine())return s;var u,c=ge(o,s);if(!Ir(o,c))return s;for(;u=Dr(c);)c=u.find(1,!0).line;return Ye(c)+1}function Ir(o,s){var u=Zr&&s.markedSpans;if(u){for(var c=void 0,p=0;p<u.length;++p)if((c=u[p]).marker.collapsed&&(c.from==null||!c.marker.widgetNode&&c.from==0&&c.marker.inclusiveLeft&&kn(o,s,c)))return!0}}function kn(o,s,u){if(u.to==null){var c=u.marker.find(1,!0);return kn(o,c.line,Oo(c.line.markedSpans,u.marker))}if(u.marker.inclusiveRight&&u.to==s.text.length)return!0;for(var p=void 0,h=0;h<s.markedSpans.length;++h)if((p=s.markedSpans[h]).marker.collapsed&&!p.marker.widgetNode&&p.from==u.to&&(p.to==null||p.to!=u.from)&&(p.marker.inclusiveLeft||u.marker.inclusiveRight)&&kn(o,s,p))return!0}function Fr(o){for(var s=0,u=(o=Tr(o)).parent,c=0;c<u.lines.length;++c){var p=u.lines[c];if(p==o)break;s+=p.height}for(var h=u.parent;h;h=(u=h).parent)for(var m=0;m<h.children.length;++m){var y=h.children[m];if(y==u)break;s+=y.height}return s}function gi(o){if(o.height==0)return 0;for(var s,u=o.text.length,c=o;s=qo(c);){var p=s.find(0,!0);c=p.from.line,u+=p.from.ch-p.to.ch}for(c=o;s=Dr(c);){var h=s.find(0,!0);u-=c.text.length-h.from.ch,u+=(c=h.to.line).text.length-h.to.ch}return u}function Fs(o){var s=o.display,u=o.doc;s.maxLine=ge(u,u.first),s.maxLineLength=gi(s.maxLine),s.maxLineChanged=!0,u.iter(function(c){var p=gi(c);p>s.maxLineLength&&(s.maxLineLength=p,s.maxLine=c)})}var Vr=function(o,s,u){this.text=o,Ui(this,s),this.height=u?u(this):1};function Vs(o,s,u,c){o.text=s,o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null),o.order!=null&&(o.order=null),Zn(o),Ui(o,u);var p=c?c(o):1;p!=o.height&&or(o,p)}function Ea(o){o.parent=null,Zn(o)}Vr.prototype.lineNo=function(){return Ye(this)},Fe(Vr);var Aa={},$i={};function Go(o,s){if(!o||/^\s*$/.test(o))return null;var u=s.addModeClass?$i:Aa;return u[o]||(u[o]=o.replace(/\S+/g,"cm-$&"))}function qi(o,s){var u=N("span",null,null,P?"padding-right: .1px":null),c={pre:N("pre",[u],"CodeMirror-line"),content:u,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")};s.measure={};for(var p=0;p<=(s.rest?s.rest.length:0);p++){var h=p?s.rest[p-1]:s.line,m=void 0;c.pos=0,c.addToken=Ma,Mr(o.display.measure)&&(m=ze(h,o.doc.direction))&&(c.addToken=Pl(c.addToken,m)),c.map=[],Gi(h,c,Cr(o,h,s!=o.display.externalMeasured&&Ye(h))),h.styleClasses&&(h.styleClasses.bgClass&&(c.bgClass=Ae(h.styleClasses.bgClass,c.bgClass||"")),h.styleClasses.textClass&&(c.textClass=Ae(h.styleClasses.textClass,c.textClass||""))),c.map.length==0&&c.map.push(0,0,c.content.appendChild(Bn(o.display.measure))),p==0?(s.measure.map=c.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(c.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(P){var y=c.content.lastChild;(/\bcm-tab\b/.test(y.className)||y.querySelector&&y.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack")}return pt(o,"renderLine",o,s.line,c.pre),c.pre.className&&(c.textClass=Ae(c.pre.className,c.textClass||"")),c}function ja(o){var s=vt("span","\u2022","cm-invalidchar");return s.title="\\u"+o.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function Ma(o,s,u,c,p,h,m){if(s){var y,x=o.splitSpaces?La(s,o.trailingSpace):s,O=o.cm.state.specialChars,U=!1;if(O.test(s)){y=document.createDocumentFragment();for(var W=0;;){O.lastIndex=W;var dt=O.exec(s),ht=dt?dt.index-W:s.length-W;if(ht){var xt=document.createTextNode(x.slice(W,W+ht));B&&k<9?y.appendChild(vt("span",[xt])):y.appendChild(xt),o.map.push(o.pos,o.pos+ht,xt),o.col+=ht,o.pos+=ht}if(!dt)break;W+=ht+1;var Rt=void 0;if(dt[0]=="	"){var Bt=o.cm.options.tabSize,ne=Bt-o.col%Bt;(Rt=y.appendChild(vt("span",ue(ne),"cm-tab"))).setAttribute("role","presentation"),Rt.setAttribute("cm-text","	"),o.col+=ne}else dt[0]=="\r"||dt[0]==`
`?((Rt=y.appendChild(vt("span",dt[0]=="\r"?"\u240D":"\u2424","cm-invalidchar"))).setAttribute("cm-text",dt[0]),o.col+=1):((Rt=o.cm.options.specialCharPlaceholder(dt[0])).setAttribute("cm-text",dt[0]),B&&k<9?y.appendChild(vt("span",[Rt])):y.appendChild(Rt),o.col+=1);o.map.push(o.pos,o.pos+1,Rt),o.pos++}}else o.col+=s.length,y=document.createTextNode(x),o.map.push(o.pos,o.pos+s.length,y),B&&k<9&&(U=!0),o.pos+=s.length;if(o.trailingSpace=x.charCodeAt(s.length-1)==32,u||c||p||U||h||m){var ie=u||"";c&&(ie+=c),p&&(ie+=p);var Xt=vt("span",[y],ie,h);if(m)for(var ye in m)m.hasOwnProperty(ye)&&ye!="style"&&ye!="class"&&Xt.setAttribute(ye,m[ye]);return o.content.appendChild(Xt)}o.content.appendChild(y)}}function La(o,s){if(o.length>1&&!/  /.test(o))return o;for(var u=s,c="",p=0;p<o.length;p++){var h=o.charAt(p);h!=" "||!u||p!=o.length-1&&o.charCodeAt(p+1)!=32||(h="\xA0"),c+=h,u=h==" "}return c}function Pl(o,s){return function(u,c,p,h,m,y,x){p=p?p+" cm-force-border":"cm-force-border";for(var O=u.pos,U=O+c.length;;){for(var W=void 0,dt=0;dt<s.length&&!((W=s[dt]).to>O&&W.from<=O);dt++);if(W.to>=U)return o(u,c,p,h,m,y,x);o(u,c.slice(0,W.to-O),p,h,null,y,x),h=null,c=c.slice(W.to-O),O=W.to}}}function To(o,s,u,c){var p=!c&&u.widgetNode;p&&o.map.push(o.pos,o.pos+s,p),!c&&o.cm.display.input.needsContentAttribute&&(p||(p=o.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",u.id)),p&&(o.cm.display.input.setUneditable(p),o.content.appendChild(p)),o.pos+=s,o.trailingSpace=!1}function Gi(o,s,u){var c=o.markedSpans,p=o.text,h=0;if(c)for(var m,y,x,O,U,W,dt,ht=p.length,xt=0,Rt=1,Bt="",ne=0;;){if(ne==xt){x=O=U=y="",dt=null,W=null,ne=1/0;for(var ie=[],Xt=void 0,ye=0;ye<c.length;++ye){var ve=c[ye],Ce=ve.marker;if(Ce.type=="bookmark"&&ve.from==xt&&Ce.widgetNode)ie.push(Ce);else if(ve.from<=xt&&(ve.to==null||ve.to>xt||Ce.collapsed&&ve.to==xt&&ve.from==xt)){if(ve.to!=null&&ve.to!=xt&&ne>ve.to&&(ne=ve.to,O=""),Ce.className&&(x+=" "+Ce.className),Ce.css&&(y=(y?y+";":"")+Ce.css),Ce.startStyle&&ve.from==xt&&(U+=" "+Ce.startStyle),Ce.endStyle&&ve.to==ne&&(Xt||(Xt=[])).push(Ce.endStyle,ve.to),Ce.title&&((dt||(dt={})).title=Ce.title),Ce.attributes)for(var sn in Ce.attributes)(dt||(dt={}))[sn]=Ce.attributes[sn];Ce.collapsed&&(!W||vn(W.marker,Ce)<0)&&(W=ve)}else ve.from>xt&&ne>ve.from&&(ne=ve.from)}if(Xt)for(var an=0;an<Xt.length;an+=2)Xt[an+1]==ne&&(O+=" "+Xt[an]);if(!W||W.from==xt)for(var gr=0;gr<ie.length;++gr)To(s,0,ie[gr]);if(W&&(W.from||0)==xt){if(To(s,(W.to==null?ht+1:W.to)-xt,W.marker,W.from==null),W.to==null)return;W.to==xt&&(W=!1)}}if(xt>=ht)break;for(var hn=Math.min(ht,ne);;){if(Bt){var sr=xt+Bt.length;if(!W){var vr=sr>hn?Bt.slice(0,hn-xt):Bt;s.addToken(s,vr,m?m+x:x,U,xt+vr.length==ne?O:"",y,dt)}if(sr>=hn){Bt=Bt.slice(hn-xt),xt=hn;break}xt=sr,U=""}Bt=p.slice(h,h=u[Rt++]),m=Go(u[Rt++],s.cm.options)}}else for(var xn=1;xn<u.length;xn+=2)s.addToken(s,p.slice(h,h=u[xn]),Go(u[xn+1],s.cm.options))}function Ki(o,s,u){this.line=s,this.rest=hi(s),this.size=this.rest?Ye(Jt(this.rest))-u+1:1,this.node=this.text=null,this.hidden=Ir(o,s)}function io(o,s,u){for(var c,p=[],h=s;h<u;h=c){var m=new Ki(o.doc,ge(o.doc,h),h);c=h+m.size,p.push(m)}return p}var kr=null;function vi(o){kr?kr.ops.push(o):o.ownsGroup=kr={ops:[o],delayedCallbacks:[]}}function Yi(o){var s=o.delayedCallbacks,u=0;do{for(;u<s.length;u++)s[u].call(null);for(var c=0;c<o.ops.length;c++){var p=o.ops[c];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(u<s.length)}function Xi(o,s){var u=o.ownsGroup;if(u)try{Yi(u)}finally{kr=null,s(u)}}var ko=null;function yn(o,s){var u=V(o,s);if(u.length){var c,p=Array.prototype.slice.call(arguments,2);kr?c=kr.delayedCallbacks:ko?c=ko:(c=ko=[],setTimeout(Po,0));for(var h=function(y){c.push(function(){return u[y].apply(null,p)})},m=0;m<u.length;++m)h(m)}}function Po(){var o=ko;ko=null;for(var s=0;s<o.length;++s)o[s]()}function Rs(o,s,u,c){for(var p=0;p<s.changes.length;p++){var h=s.changes[p];h=="text"?Da(o,s):h=="gutter"?Yo(o,s,u,c):h=="class"?Ji(o,s):h=="widget"&&yi(o,s,c)}s.changes=null}function Ko(o){return o.node==o.text&&(o.node=vt("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),B&&k<8&&(o.node.style.zIndex=2)),o.node}function mi(o,s){var u=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(u&&(u+=" CodeMirror-linebackground"),s.background)u?s.background.className=u:(s.background.parentNode.removeChild(s.background),s.background=null);else if(u){var c=Ko(s);s.background=c.insertBefore(vt("div",null,u),c.firstChild),o.display.input.setUneditable(s.background)}}function Hs(o,s){var u=o.display.externalMeasured;return u&&u.line==s.line?(o.display.externalMeasured=null,s.measure=u.measure,u.built):qi(o,s)}function Da(o,s){var u=s.text.className,c=Hs(o,s);s.text==s.node&&(s.node=c.pre),s.text.parentNode.replaceChild(c.pre,s.text),s.text=c.pre,c.bgClass!=s.bgClass||c.textClass!=s.textClass?(s.bgClass=c.bgClass,s.textClass=c.textClass,Ji(o,s)):u&&(s.text.className=u)}function Ji(o,s){mi(o,s),s.line.wrapClass?Ko(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var u=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=u||""}function Yo(o,s,u,c){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var p=Ko(s);s.gutterBackground=vt("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),o.display.input.setUneditable(s.gutterBackground),p.insertBefore(s.gutterBackground,s.text)}var h=s.line.gutterMarkers;if(o.options.lineNumbers||h){var m=Ko(s),y=s.gutter=vt("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(y.setAttribute("aria-hidden","true"),o.display.input.setUneditable(y),m.insertBefore(y,s.text),s.line.gutterClass&&(y.className+=" "+s.line.gutterClass),!o.options.lineNumbers||h&&h["CodeMirror-linenumbers"]||(s.lineNumber=y.appendChild(vt("div",Bo(o.options,u),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),h)for(var x=0;x<o.display.gutterSpecs.length;++x){var O=o.display.gutterSpecs[x].className,U=h.hasOwnProperty(O)&&h[O];U&&y.appendChild(vt("div",[U],"CodeMirror-gutter-elt","left: "+c.gutterLeft[O]+"px; width: "+c.gutterWidth[O]+"px"))}}}function yi(o,s,u){s.alignable&&(s.alignable=null);for(var c=H("CodeMirror-linewidget"),p=s.node.firstChild,h=void 0;p;p=h)h=p.nextSibling,c.test(p.className)&&s.node.removeChild(p);Na(o,s,u)}function zs(o,s,u,c){var p=Hs(o,s);return s.text=s.node=p.pre,p.bgClass&&(s.bgClass=p.bgClass),p.textClass&&(s.textClass=p.textClass),Ji(o,s),Yo(o,s,u,c),Na(o,s,c),s.node}function Na(o,s,u){if(Zi(o,s.line,s,u,!0),s.rest)for(var c=0;c<s.rest.length;c++)Zi(o,s.rest[c],s,u,!1)}function Zi(o,s,u,c,p){if(s.widgets)for(var h=Ko(u),m=0,y=s.widgets;m<y.length;++m){var x=y[m],O=vt("div",[x.node],"CodeMirror-linewidget"+(x.className?" "+x.className:""));x.handleMouseEvents||O.setAttribute("cm-ignore-events","true"),El(x,O,u,c),o.display.input.setUneditable(O),p&&x.above?h.insertBefore(O,u.gutter||u.text):h.appendChild(O),yn(x,"redraw")}}function El(o,s,u,c){if(o.noHScroll){(u.alignable||(u.alignable=[])).push(s);var p=c.wrapperWidth;s.style.left=c.fixedPos+"px",o.coverGutter||(p-=c.gutterTotalWidth,s.style.paddingLeft=c.gutterTotalWidth+"px"),s.style.width=p+"px"}o.coverGutter&&(s.style.zIndex=5,s.style.position="relative",o.noHScroll||(s.style.marginLeft=-c.gutterTotalWidth+"px"))}function _(o){if(o.height!=null)return o.height;var s=o.doc.cm;if(!s)return 0;if(!Mt(document.body,o.node)){var u="position: relative;";o.coverGutter&&(u+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),o.noHScroll&&(u+="width: "+s.display.wrapper.clientWidth+"px;"),nt(s.display.measure,vt("div",[o.node],null,u))}return o.height=o.node.parentNode.offsetHeight}function A(o,s){for(var u=Ar(s);u!=o.wrapper;u=u.parentNode)if(!u||u.nodeType==1&&u.getAttribute("cm-ignore-events")=="true"||u.parentNode==o.sizer&&u!=o.mover)return!0}function q(o){return o.lineSpace.offsetTop}function Z(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function mt(o){if(o.cachedPaddingH)return o.cachedPaddingH;var s=nt(o.measure,vt("pre","x","CodeMirror-line-like")),u=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,c={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight)};return isNaN(c.left)||isNaN(c.right)||(o.cachedPaddingH=c),c}function lt(o){return de-o.display.nativeBarWidth}function It(o){return o.display.scroller.clientWidth-lt(o)-o.display.barWidth}function $t(o){return o.display.scroller.clientHeight-lt(o)-o.display.barHeight}function je(o,s,u){var c=o.options.lineWrapping,p=c&&It(o);if(!s.measure.heights||c&&s.measure.width!=p){var h=s.measure.heights=[];if(c){s.measure.width=p;for(var m=s.text.firstChild.getClientRects(),y=0;y<m.length-1;y++){var x=m[y],O=m[y+1];Math.abs(x.bottom-O.bottom)>2&&h.push((x.bottom+O.top)/2-u.top)}}h.push(u.bottom-u.top)}}function He(o,s,u){if(o.line==s)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var c=0;c<o.rest.length;c++)if(o.rest[c]==s)return{map:o.measure.maps[c],cache:o.measure.caches[c]};for(var p=0;p<o.rest.length;p++)if(Ye(o.rest[p])>u)return{map:o.measure.maps[p],cache:o.measure.caches[p],before:!0}}}function cn(o,s){var u=Ye(s=Tr(s)),c=o.display.externalMeasured=new Ki(o.doc,s,u);c.lineN=u;var p=c.built=qi(o,c);return c.text=p.pre,nt(o.display.lineMeasure,p.pre),c}function Rr(o,s,u,c){return Hr(o,Eo(o,s),u,c)}function Qi(o,s){if(s>=o.display.viewFrom&&s<o.display.viewTo)return o.display.view[wi(o,s)];var u=o.display.externalMeasured;return u&&s>=u.lineN&&s<u.lineN+u.size?u:void 0}function Eo(o,s){var u=Ye(s),c=Qi(o,u);c&&!c.text?c=null:c&&c.changes&&(Rs(o,c,u,Nl(o)),o.curOp.forceUpdate=!0),c||(c=cn(o,s));var p=He(c,s,u);return{line:s,view:c,rect:null,map:p.map,cache:p.cache,before:p.before,hasHeights:!1}}function Hr(o,s,u,c,p){s.before&&(u=-1);var h,m=u+(c||"");return s.cache.hasOwnProperty(m)?h=s.cache[m]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(je(o,s.view,s.rect),s.hasHeights=!0),(h=mp(o,s,u,c)).bogus||(s.cache[m]=h)),{left:h.left,right:h.right,top:p?h.rtop:h.top,bottom:p?h.rbottom:h.bottom}}var Ao,Vc={left:0,right:0,top:0,bottom:0};function Us(o,s,u){for(var c,p,h,m,y,x,O=0;O<o.length;O+=3)if(y=o[O],x=o[O+1],s<y?(p=0,h=1,m="left"):s<x?h=(p=s-y)+1:(O==o.length-3||s==x&&o[O+3]>s)&&(p=(h=x-y)-1,s>=x&&(m="right")),p!=null){if(c=o[O+2],y==x&&u==(c.insertLeft?"left":"right")&&(m=u),u=="left"&&p==0)for(;O&&o[O-2]==o[O-3]&&o[O-1].insertLeft;)c=o[(O-=3)+2],m="left";if(u=="right"&&p==x-y)for(;O<o.length-3&&o[O+3]==o[O+4]&&!o[O+5].insertLeft;)c=o[(O+=3)+2],m="right";break}return{node:c,start:p,end:h,collapse:m,coverStart:y,coverEnd:x}}function Rc(o,s){var u=Vc;if(s=="left")for(var c=0;c<o.length&&(u=o[c]).left==u.right;c++);else for(var p=o.length-1;p>=0&&(u=o[p]).left==u.right;p--);return u}function mp(o,s,u,c){var p,h=Us(s.map,u,c),m=h.node,y=h.start,x=h.end,O=h.collapse;if(m.nodeType==3){for(var U=0;U<4;U++){for(;y&&z(s.line.text.charAt(h.coverStart+y));)--y;for(;h.coverStart+x<h.coverEnd&&z(s.line.text.charAt(h.coverStart+x));)++x;if((p=B&&k<9&&y==0&&x==h.coverEnd-h.coverStart?m.parentNode.getBoundingClientRect():Rc(Y(m,y,x).getClientRects(),c)).left||p.right||y==0)break;x=y,y-=1,O="right"}B&&k<11&&(p=yp(o.display.measure,p))}else{var W;y>0&&(O=c="right"),p=o.options.lineWrapping&&(W=m.getClientRects()).length>1?W[c=="right"?W.length-1:0]:m.getBoundingClientRect()}if(B&&k<9&&!y&&(!p||!p.left&&!p.right)){var dt=m.parentNode.getClientRects()[0];p=dt?{left:dt.left,right:dt.left+Xo(o.display),top:dt.top,bottom:dt.bottom}:Vc}for(var ht=p.top-s.rect.top,xt=p.bottom-s.rect.top,Rt=(ht+xt)/2,Bt=s.view.measure.heights,ne=0;ne<Bt.length-1&&!(Rt<Bt[ne]);ne++);var ie=ne?Bt[ne-1]:0,Xt=Bt[ne],ye={left:(O=="right"?p.right:p.left)-s.rect.left,right:(O=="left"?p.left:p.right)-s.rect.left,top:ie,bottom:Xt};return p.left||p.right||(ye.bogus=!0),o.options.singleCursorHeightPerLine||(ye.rtop=ht,ye.rbottom=xt),ye}function yp(o,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ro(o))return s;var u=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*u,right:s.right*u,top:s.top*c,bottom:s.bottom*c}}function Hc(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var s=0;s<o.rest.length;s++)o.measure.caches[s]={}}function Ia(o){o.display.externalMeasure=null,Ct(o.display.lineMeasure);for(var s=0;s<o.display.view.length;s++)Hc(o.display.view[s])}function ts(o){Ia(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function Al(){return j&&te?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function zc(){return j&&te?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Fa(o){var s=Tr(o).widgets,u=0;if(s)for(var c=0;c<s.length;++c)s[c].above&&(u+=_(s[c]));return u}function Va(o,s,u,c,p){if(!p){var h=Fa(s);u.top+=h,u.bottom+=h}if(c=="line")return u;c||(c="local");var m=Fr(s);if(c=="local"?m+=q(o.display):m-=o.display.viewOffset,c=="page"||c=="window"){var y=o.display.lineSpace.getBoundingClientRect();m+=y.top+(c=="window"?0:zc());var x=y.left+(c=="window"?0:Al());u.left+=x,u.right+=x}return u.top+=m,u.bottom+=m,u}function jl(o,s,u){if(u=="div")return s;var c=s.left,p=s.top;if(u=="page")c-=Al(),p-=zc();else if(u=="local"||!u){var h=o.display.sizer.getBoundingClientRect();c+=h.left,p+=h.top}var m=o.display.lineSpace.getBoundingClientRect();return{left:c-m.left,top:p-m.top}}function Ra(o,s,u,c,p){return c||(c=ge(o.doc,s.line)),Va(o,c,Rr(o,c,s.ch,p),u)}function Pr(o,s,u,c,p,h){function m(xt,Rt){var Bt=Hr(o,p,xt,Rt?"right":"left",h);return Rt?Bt.left=Bt.right:Bt.right=Bt.left,Va(o,c,Bt,u)}c=c||ge(o.doc,s.line),p||(p=Eo(o,c));var y=ze(c,o.doc.direction),x=s.ch,O=s.sticky;if(x>=c.text.length?(x=c.text.length,O="before"):x<=0&&(x=0,O="after"),!y)return m(O=="before"?x-1:x,O=="before");function U(xt,Rt,Bt){return m(Bt?xt-1:xt,y[Rt].level==1!=Bt)}var W=Te(y,x,O),dt=pe,ht=U(x,W,O=="before");return dt!=null&&(ht.other=U(x,dt,O!="before")),ht}function Ha(o,s){var u=0;s=oe(o.doc,s),o.options.lineWrapping||(u=Xo(o.display)*s.ch);var c=ge(o.doc,s.line),p=Fr(c)+q(o.display);return{left:u,right:u,top:p,bottom:p+c.height}}function Ml(o,s,u,c,p){var h=Ut(o,s,u);return h.xRel=p,c&&(h.outside=c),h}function Ll(o,s,u){var c=o.doc;if((u+=o.display.viewOffset)<0)return Ml(c.first,0,null,-1,-1);var p=In(c,u),h=c.first+c.size-1;if(p>h)return Ml(c.first+c.size-1,ge(c,h).text.length,null,1,1);s<0&&(s=0);for(var m=ge(c,p);;){var y=Dl(o,m,p,s,u),x=Bi(m,y.ch+(y.xRel>0||y.outside>0?1:0));if(!x)return y;var O=x.find(1);if(O.line==p)return O;m=ge(c,p=O.line)}}function Uc(o,s,u,c){c-=Fa(s);var p=s.text.length,h=Tt(function(m){return Hr(o,u,m-1).bottom<=c},p,0);return{begin:h,end:p=Tt(function(m){return Hr(o,u,m).top>c},h,p)}}function Bc(o,s,u,c){return u||(u=Eo(o,s)),Uc(o,s,u,Va(o,s,Hr(o,u,c),"line").top)}function es(o,s,u,c){return!(o.bottom<=u)&&(o.top>u||(c?o.left:o.right)>s)}function Dl(o,s,u,c,p){p-=Fr(s);var h=Eo(o,s),m=Fa(s),y=0,x=s.text.length,O=!0,U=ze(s,o.doc.direction);if(U){var W=(o.options.lineWrapping?rs:ns)(o,s,u,h,U,c,p);y=(O=W.level!=1)?W.from:W.to-1,x=O?W.to:W.from-1}var dt,ht,xt=null,Rt=null,Bt=Tt(function(ve){var Ce=Hr(o,h,ve);return Ce.top+=m,Ce.bottom+=m,!!es(Ce,c,p,!1)&&(Ce.top<=p&&Ce.left<=c&&(xt=ve,Rt=Ce),!0)},y,x),ne=!1;if(Rt){var ie=c-Rt.left<Rt.right-c,Xt=ie==O;Bt=xt+(Xt?0:1),ht=Xt?"after":"before",dt=ie?Rt.left:Rt.right}else{O||Bt!=x&&Bt!=y||Bt++,ht=Bt==0?"after":Bt==s.text.length?"before":Hr(o,h,Bt-(O?1:0)).bottom+m<=p==O?"after":"before";var ye=Pr(o,Ut(u,Bt,ht),"line",s,h);dt=ye.left,ne=p<ye.top?-1:p>=ye.bottom?1:0}return Ml(u,Bt=gt(s.text,Bt,1),ht,ne,c-dt)}function ns(o,s,u,c,p,h,m){var y=Tt(function(W){var dt=p[W],ht=dt.level!=1;return es(Pr(o,Ut(u,ht?dt.to:dt.from,ht?"before":"after"),"line",s,c),h,m,!0)},0,p.length-1),x=p[y];if(y>0){var O=x.level!=1,U=Pr(o,Ut(u,O?x.from:x.to,O?"after":"before"),"line",s,c);es(U,h,m,!0)&&U.top>m&&(x=p[y-1])}return x}function rs(o,s,u,c,p,h,m){var y=Uc(o,s,c,m),x=y.begin,O=y.end;/\s/.test(s.text.charAt(O-1))&&O--;for(var U=null,W=null,dt=0;dt<p.length;dt++){var ht=p[dt];if(!(ht.from>=O||ht.to<=x)){var xt=Hr(o,c,ht.level!=1?Math.min(O,ht.to)-1:Math.max(x,ht.from)).right,Rt=xt<h?h-xt+1e9:xt-h;(!U||W>Rt)&&(U=ht,W=Rt)}}return U||(U=p[p.length-1]),U.from<x&&(U={from:x,to:U.to,level:U.level}),U.to>O&&(U={from:U.from,to:O,level:U.level}),U}function so(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(Ao==null){Ao=vt("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)Ao.appendChild(document.createTextNode("x")),Ao.appendChild(vt("br"));Ao.appendChild(document.createTextNode("x"))}nt(o.measure,Ao);var u=Ao.offsetHeight/50;return u>3&&(o.cachedTextHeight=u),Ct(o.measure),u||1}function Xo(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var s=vt("span","xxxxxxxxxx"),u=vt("pre",[s],"CodeMirror-line-like");nt(o.measure,u);var c=s.getBoundingClientRect(),p=(c.right-c.left)/10;return p>2&&(o.cachedCharWidth=p),p||10}function Nl(o){for(var s=o.display,u={},c={},p=s.gutters.clientLeft,h=s.gutters.firstChild,m=0;h;h=h.nextSibling,++m){var y=o.display.gutterSpecs[m].className;u[y]=h.offsetLeft+h.clientLeft+p,c[y]=h.clientWidth}return{fixedPos:Il(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:u,gutterWidth:c,wrapperWidth:s.wrapper.clientWidth}}function Il(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function Wc(o){var s=so(o.display),u=o.options.lineWrapping,c=u&&Math.max(5,o.display.scroller.clientWidth/Xo(o.display)-3);return function(p){if(Ir(o.doc,p))return 0;var h=0;if(p.widgets)for(var m=0;m<p.widgets.length;m++)p.widgets[m].height&&(h+=p.widgets[m].height);return u?h+(Math.ceil(p.text.length/c)||1)*s:h+s}}function Fl(o){var s=o.doc,u=Wc(o);s.iter(function(c){var p=u(c);p!=c.height&&or(c,p)})}function bi(o,s,u,c){var p=o.display;if(!u&&Ar(s).getAttribute("cm-not-content")=="true")return null;var h,m,y=p.lineSpace.getBoundingClientRect();try{h=s.clientX-y.left,m=s.clientY-y.top}catch{return null}var x,O=Ll(o,h,m);if(c&&O.xRel>0&&(x=ge(o.doc,O.line).text).length==O.ch){var U=xe(x,x.length,o.options.tabSize)-x.length;O=Ut(O.line,Math.max(0,Math.round((h-mt(o.display).left)/Xo(o.display))-U))}return O}function wi(o,s){if(s>=o.display.viewTo||(s-=o.display.viewFrom)<0)return null;for(var u=o.display.view,c=0;c<u.length;c++)if((s-=u[c].size)<0)return c}function Qn(o,s,u,c){s==null&&(s=o.doc.first),u==null&&(u=o.doc.first+o.doc.size),c||(c=0);var p=o.display;if(c&&u<p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>s)&&(p.updateLineNumbers=s),o.curOp.viewChanged=!0,s>=p.viewTo)Zr&&pr(o.doc,s)<p.viewTo&&Jo(o);else if(u<=p.viewFrom)Zr&&Nr(o.doc,u+c)>p.viewFrom?Jo(o):(p.viewFrom+=c,p.viewTo+=c);else if(s<=p.viewFrom&&u>=p.viewTo)Jo(o);else if(s<=p.viewFrom){var h=za(o,u,u+c,1);h?(p.view=p.view.slice(h.index),p.viewFrom=h.lineN,p.viewTo+=c):Jo(o)}else if(u>=p.viewTo){var m=za(o,s,s,-1);m?(p.view=p.view.slice(0,m.index),p.viewTo=m.lineN):Jo(o)}else{var y=za(o,s,s,-1),x=za(o,u,u+c,1);y&&x?(p.view=p.view.slice(0,y.index).concat(io(o,y.lineN,x.lineN)).concat(p.view.slice(x.index)),p.viewTo+=c):Jo(o)}var O=p.externalMeasured;O&&(u<O.lineN?O.lineN+=c:s<O.lineN+O.size&&(p.externalMeasured=null))}function ao(o,s,u){o.curOp.viewChanged=!0;var c=o.display,p=o.display.externalMeasured;if(p&&s>=p.lineN&&s<p.lineN+p.size&&(c.externalMeasured=null),!(s<c.viewFrom||s>=c.viewTo)){var h=c.view[wi(o,s)];if(h.node!=null){var m=h.changes||(h.changes=[]);be(m,u)==-1&&m.push(u)}}}function Jo(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function za(o,s,u,c){var p,h=wi(o,s),m=o.display.view;if(!Zr||u==o.doc.first+o.doc.size)return{index:h,lineN:u};for(var y=o.display.viewFrom,x=0;x<h;x++)y+=m[x].size;if(y!=s){if(c>0){if(h==m.length-1)return null;p=y+m[h].size-s,h++}else p=y-s;s+=p,u+=p}for(;pr(o.doc,u)!=u;){if(h==(c<0?0:m.length-1))return null;u+=c*m[h-(c<0?1:0)].size,h+=c}return{index:h,lineN:u}}function bp(o,s,u){var c=o.display;c.view.length==0||s>=c.viewTo||u<=c.viewFrom?(c.view=io(o,s,u),c.viewFrom=s):(c.viewFrom>s?c.view=io(o,s,c.viewFrom).concat(c.view):c.viewFrom<s&&(c.view=c.view.slice(wi(o,s))),c.viewFrom=s,c.viewTo<u?c.view=c.view.concat(io(o,c.viewTo,u)):c.viewTo>u&&(c.view=c.view.slice(0,wi(o,u)))),c.viewTo=u}function $c(o){for(var s=o.display.view,u=0,c=0;c<s.length;c++){var p=s[c];p.hidden||p.node&&!p.changes||++u}return u}function Bs(o){o.display.input.showSelection(o.display.input.prepareSelection())}function Ws(o,s){s===void 0&&(s=!0);var u=o.doc,c={},p=c.cursors=document.createDocumentFragment(),h=c.selection=document.createDocumentFragment(),m=o.options.$customCursor;m&&(s=!0);for(var y=0;y<u.sel.ranges.length;y++)if(s||y!=u.sel.primIndex){var x=u.sel.ranges[y];if(!(x.from().line>=o.display.viewTo||x.to().line<o.display.viewFrom)){var O=x.empty();if(m){var U=m(o,x);U&&$s(o,U,p)}else(O||o.options.showCursorWhenSelecting)&&$s(o,x.head,p);O||wp(o,x,h)}}return c}function $s(o,s,u){var c=Pr(o,s,"div",null,null,!o.options.singleCursorHeightPerLine),p=u.appendChild(vt("div","\xA0","CodeMirror-cursor"));if(p.style.left=c.left+"px",p.style.top=c.top+"px",p.style.height=Math.max(0,c.bottom-c.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)){var h=Ra(o,s,"div",null,null),m=h.right-h.left;p.style.width=(m>0?m:o.defaultCharWidth())+"px"}if(c.other){var y=u.appendChild(vt("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));y.style.display="",y.style.left=c.other.left+"px",y.style.top=c.other.top+"px",y.style.height=.85*(c.other.bottom-c.other.top)+"px"}}function qs(o,s){return o.top-s.top||o.left-s.left}function wp(o,s,u){var c=o.display,p=o.doc,h=document.createDocumentFragment(),m=mt(o.display),y=m.left,x=Math.max(c.sizerWidth,It(o)-c.sizer.offsetLeft)-m.right,O=p.direction=="ltr";function U(Xt,ye,ve,Ce){ye<0&&(ye=0),ye=Math.round(ye),Ce=Math.round(Ce),h.appendChild(vt("div",null,"CodeMirror-selected","position: absolute; left: "+Xt+`px;
                             top: `+ye+"px; width: "+(ve==null?x-Xt:ve)+`px;
                             height: `+(Ce-ye)+"px"))}function W(Xt,ye,ve){var Ce,sn,an=ge(p,Xt),gr=an.text.length;function hn(xn,En){return Ra(o,Ut(Xt,xn),"div",an,En)}function sr(xn,En,dr){var Vn=Bc(o,an,null,xn),An=En=="ltr"==(dr=="after")?"left":"right";return hn(dr=="after"?Vn.begin:Vn.end-(/\s/.test(an.text.charAt(Vn.end-1))?2:1),An)[An]}var vr=ze(an,p.direction);return Ot(vr,ye||0,ve==null?gr:ve,function(xn,En,dr,Vn){var An=dr=="ltr",jn=hn(xn,An?"left":"right"),mr=hn(En-1,An?"right":"left"),ni=ye==null&&xn==0,po=ve==null&&En==gr,ar=Vn==0,Cn=!vr||Vn==vr.length-1;if(mr.top-jn.top<=3){var bc=(O?po:ni)&&Cn,Fo=(O?ni:po)&&ar?y:(An?jn:mr).left,Mi=bc?x:(An?mr:jn).right;U(Fo,jn.top,Mi-Fo,jn.bottom)}else{var Li,zn,xs,wc;An?(Li=O&&ni&&ar?y:jn.left,zn=O?x:sr(xn,dr,"before"),xs=O?y:sr(En,dr,"after"),wc=O&&po&&Cn?x:mr.right):(Li=O?sr(xn,dr,"before"):y,zn=!O&&ni&&ar?x:jn.right,xs=!O&&po&&Cn?y:mr.left,wc=O?sr(En,dr,"after"):x),U(Li,jn.top,zn-Li,jn.bottom),jn.bottom<mr.top&&U(y,jn.bottom,null,mr.top),U(xs,mr.top,wc-xs,mr.bottom)}(!Ce||qs(jn,Ce)<0)&&(Ce=jn),qs(mr,Ce)<0&&(Ce=mr),(!sn||qs(jn,sn)<0)&&(sn=jn),qs(mr,sn)<0&&(sn=mr)}),{start:Ce,end:sn}}var dt=s.from(),ht=s.to();if(dt.line==ht.line)W(dt.line,dt.ch,ht.ch);else{var xt=ge(p,dt.line),Rt=ge(p,ht.line),Bt=Tr(xt)==Tr(Rt),ne=W(dt.line,dt.ch,Bt?xt.text.length+1:null).end,ie=W(ht.line,Bt?0:null,ht.ch).start;Bt&&(ne.top<ie.top-2?(U(ne.right,ne.top,null,ne.bottom),U(y,ie.top,ie.left,ie.bottom)):U(ne.right,ne.top,ie.left-ne.right,ne.bottom)),ne.bottom<ie.top&&U(y,ne.bottom,null,ie.top)}u.appendChild(h)}function os(o){if(o.state.focused){var s=o.display;clearInterval(s.blinker);var u=!0;s.cursorDiv.style.visibility="",o.options.cursorBlinkRate>0?s.blinker=setInterval(function(){o.hasFocus()||_i(o),s.cursorDiv.style.visibility=(u=!u)?"":"hidden"},o.options.cursorBlinkRate):o.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function qc(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||Rl(o))}function Vl(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&_i(o))},100)}function Rl(o,s){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||(pt(o,"focus",o,s),o.state.focused=!0,Kt(o.display.wrapper,"CodeMirror-focused"),o.curOp||o.display.selForContextMenu==o.doc.sel||(o.display.input.reset(),P&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),os(o))}function _i(o,s){o.state.delayingBlurEvent||(o.state.focused&&(pt(o,"blur",o,s),o.state.focused=!1,et(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function Ua(o){for(var s=o.display,u=s.lineDiv.offsetTop,c=Math.max(0,s.scroller.getBoundingClientRect().top),p=s.lineDiv.getBoundingClientRect().top,h=0,m=0;m<s.view.length;m++){var y=s.view[m],x=o.options.lineWrapping,O=void 0,U=0;if(!y.hidden){if(p+=y.line.height,B&&k<8){var W=y.node.offsetTop+y.node.offsetHeight;O=W-u,u=W}else{var dt=y.node.getBoundingClientRect();O=dt.bottom-dt.top,!x&&y.text.firstChild&&(U=y.text.firstChild.getBoundingClientRect().right-dt.left-1)}var ht=y.line.height-O;if((ht>.005||ht<-.005)&&(p<c&&(h-=ht),or(y.line,O),Gs(y.line),y.rest))for(var xt=0;xt<y.rest.length;xt++)Gs(y.rest[xt]);if(U>o.display.sizerWidth){var Rt=Math.ceil(U/Xo(o.display));Rt>o.display.maxLineLength&&(o.display.maxLineLength=Rt,o.display.maxLine=y.line,o.display.maxLineChanged=!0)}}}Math.abs(h)>2&&(s.scroller.scrollTop+=h)}function Gs(o){if(o.widgets)for(var s=0;s<o.widgets.length;++s){var u=o.widgets[s],c=u.node.parentNode;c&&(u.height=c.offsetHeight)}}function Ks(o,s,u){var c=u&&u.top!=null?Math.max(0,u.top):o.scroller.scrollTop;c=Math.floor(c-q(o));var p=u&&u.bottom!=null?u.bottom:c+o.wrapper.clientHeight,h=In(s,c),m=In(s,p);if(u&&u.ensure){var y=u.ensure.from.line,x=u.ensure.to.line;y<h?(h=y,m=In(s,Fr(ge(s,y))+o.wrapper.clientHeight)):Math.min(x,s.lastLine())>=m&&(h=In(s,Fr(ge(s,x))-o.wrapper.clientHeight),m=x)}return{from:h,to:Math.max(m,h+1)}}function _p(o,s){if(!bt(o,"scrollCursorIntoView")){var u=o.display,c=u.sizer.getBoundingClientRect(),p=null;if(s.top+c.top<0?p=!0:s.bottom+c.top>(window.innerHeight||document.documentElement.clientHeight)&&(p=!1),p!=null&&!jt){var h=vt("div","\u200B",null,`position: absolute;
                         top: `+(s.top-u.viewOffset-q(o.display))+`px;
                         height: `+(s.bottom-s.top+lt(o)+u.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");o.display.lineSpace.appendChild(h),h.scrollIntoView(p),o.display.lineSpace.removeChild(h)}}}function Hl(o,s,u,c){var p;c==null&&(c=0),o.options.lineWrapping||s!=u||(u=s.sticky=="before"?Ut(s.line,s.ch+1,"before"):s,s=s.ch?Ut(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var h=0;h<5;h++){var m=!1,y=Pr(o,s),x=u&&u!=s?Pr(o,u):y,O=zl(o,p={left:Math.min(y.left,x.left),top:Math.min(y.top,x.top)-c,right:Math.max(y.left,x.left),bottom:Math.max(y.bottom,x.bottom)+c}),U=o.doc.scrollTop,W=o.doc.scrollLeft;if(O.scrollTop!=null&&(Xs(o,O.scrollTop),Math.abs(o.doc.scrollTop-U)>1&&(m=!0)),O.scrollLeft!=null&&(jo(o,O.scrollLeft),Math.abs(o.doc.scrollLeft-W)>1&&(m=!0)),!m)break}return p}function xp(o,s){var u=zl(o,s);u.scrollTop!=null&&Xs(o,u.scrollTop),u.scrollLeft!=null&&jo(o,u.scrollLeft)}function zl(o,s){var u=o.display,c=so(o.display);s.top<0&&(s.top=0);var p=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:u.scroller.scrollTop,h=$t(o),m={};s.bottom-s.top>h&&(s.bottom=s.top+h);var y=o.doc.height+Z(u),x=s.top<c,O=s.bottom>y-c;if(s.top<p)m.scrollTop=x?0:s.top;else if(s.bottom>p+h){var U=Math.min(s.top,(O?y:s.bottom)-h);U!=p&&(m.scrollTop=U)}var W=o.options.fixedGutter?0:u.gutters.offsetWidth,dt=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:u.scroller.scrollLeft-W,ht=It(o)-u.gutters.offsetWidth,xt=s.right-s.left>ht;return xt&&(s.right=s.left+ht),s.left<10?m.scrollLeft=0:s.left<dt?m.scrollLeft=Math.max(0,s.left+W-(xt?0:10)):s.right>ht+dt-3&&(m.scrollLeft=s.right+(xt?0:10)-ht),m}function Ba(o,s){s!=null&&(xi(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+s)}function is(o){xi(o);var s=o.getCursor();o.curOp.scrollToPos={from:s,to:s,margin:o.options.cursorScrollMargin}}function Ys(o,s,u){s==null&&u==null||xi(o),s!=null&&(o.curOp.scrollLeft=s),u!=null&&(o.curOp.scrollTop=u)}function Cp(o,s){xi(o),o.curOp.scrollToPos=s}function xi(o){var s=o.curOp.scrollToPos;s&&(o.curOp.scrollToPos=null,Gc(o,Ha(o,s.from),Ha(o,s.to),s.margin))}function Gc(o,s,u,c){var p=zl(o,{left:Math.min(s.left,u.left),top:Math.min(s.top,u.top)-c,right:Math.max(s.right,u.right),bottom:Math.max(s.bottom,u.bottom)+c});Ys(o,p.scrollLeft,p.scrollTop)}function Xs(o,s){Math.abs(o.doc.scrollTop-s)<2||(rt||Bl(o,{top:s}),Js(o,s,!0),rt&&Bl(o),as(o,100))}function Js(o,s,u){s=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,s)),(o.display.scroller.scrollTop!=s||u)&&(o.doc.scrollTop=s,o.display.scrollbars.setScrollTop(s),o.display.scroller.scrollTop!=s&&(o.display.scroller.scrollTop=s))}function jo(o,s,u,c){s=Math.max(0,Math.min(s,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),(u?s==o.doc.scrollLeft:Math.abs(o.doc.scrollLeft-s)<2)&&!c||(o.doc.scrollLeft=s,ea(o),o.display.scroller.scrollLeft!=s&&(o.display.scroller.scrollLeft=s),o.display.scrollbars.setScrollLeft(s))}function Zs(o){var s=o.display,u=s.gutters.offsetWidth,c=Math.round(o.doc.height+Z(o.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:o.options.fixedGutter?u:0,docHeight:c,scrollHeight:c+lt(o)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:u}}var Ci=function(o,s,u){this.cm=u;var c=this.vert=vt("div",[vt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=vt("div",[vt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=p.tabIndex=-1,o(c),o(p),qt(c,"scroll",function(){c.clientHeight&&s(c.scrollTop,"vertical")}),qt(p,"scroll",function(){p.clientWidth&&s(p.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,B&&k<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ci.prototype.update=function(o){var s=o.scrollWidth>o.clientWidth+1,u=o.scrollHeight>o.clientHeight+1,c=o.nativeBarWidth;if(u){this.vert.style.display="block",this.vert.style.bottom=s?c+"px":"0";var p=o.viewHeight-(s?c:0);this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+p)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=u?c+"px":"0",this.horiz.style.left=o.barLeft+"px";var h=o.viewWidth-o.barLeft-(u?c:0);this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+h)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&o.clientHeight>0&&(c==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:u?c:0,bottom:s?c:0}},Ci.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ci.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ci.prototype.zeroWidthHack=function(){var o=ut&&!At?"12px":"18px";this.horiz.style.height=this.vert.style.width=o,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Oe,this.disableVert=new Oe},Ci.prototype.enableZeroWidthBar=function(o,s,u){function c(){var p=o.getBoundingClientRect();(u=="vert"?document.elementFromPoint(p.right-1,(p.top+p.bottom)/2):document.elementFromPoint((p.right+p.left)/2,p.bottom-1))!=o?o.style.visibility="hidden":s.set(1e3,c)}o.style.visibility="",s.set(1e3,c)},Ci.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var Qs=function(){};function ss(o,s){s||(s=Zs(o));var u=o.display.barWidth,c=o.display.barHeight;zr(o,s);for(var p=0;p<4&&u!=o.display.barWidth||c!=o.display.barHeight;p++)u!=o.display.barWidth&&o.options.lineWrapping&&Ua(o),zr(o,Zs(o)),u=o.display.barWidth,c=o.display.barHeight}function zr(o,s){var u=o.display,c=u.scrollbars.update(s);u.sizer.style.paddingRight=(u.barWidth=c.right)+"px",u.sizer.style.paddingBottom=(u.barHeight=c.bottom)+"px",u.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(u.scrollbarFiller.style.display="block",u.scrollbarFiller.style.height=c.bottom+"px",u.scrollbarFiller.style.width=c.right+"px"):u.scrollbarFiller.style.display="",c.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(u.gutterFiller.style.display="block",u.gutterFiller.style.height=c.bottom+"px",u.gutterFiller.style.width=s.gutterWidth+"px"):u.gutterFiller.style.display=""}Qs.prototype.update=function(){return{bottom:0,right:0}},Qs.prototype.setScrollLeft=function(){},Qs.prototype.setScrollTop=function(){},Qs.prototype.clear=function(){};var Kc={native:Ci,null:Qs};function Yc(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&et(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new Kc[o.options.scrollbarStyle](function(s){o.display.wrapper.insertBefore(s,o.display.scrollbarFiller),qt(s,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,u){u=="horizontal"?jo(o,s):Xs(o,s)},o),o.display.scrollbars.addClass&&Kt(o.display.wrapper,o.display.scrollbars.addClass)}var Sp=0;function Si(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Sp,markArrays:null},vi(o.curOp)}function Oi(o){var s=o.curOp;s&&Xi(s,function(u){for(var c=0;c<u.ops.length;c++)u.ops[c].cm.curOp=null;Op(u)})}function Op(o){for(var s=o.ops,u=0;u<s.length;u++)Tp(s[u]);for(var c=0;c<s.length;c++)kp(s[c]);for(var p=0;p<s.length;p++)Pp(s[p]);for(var h=0;h<s.length;h++)ta(s[h]);for(var m=0;m<s.length;m++)Ep(s[m])}function Tp(o){var s=o.cm,u=s.display;Ti(s),o.updateMaxLine&&Fs(s),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<u.viewFrom||o.scrollToPos.to.line>=u.viewTo)||u.maxLineChanged&&s.options.lineWrapping,o.update=o.mustUpdate&&new Wa(s,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}function kp(o){o.updatedDisplay=o.mustUpdate&&Ul(o.cm,o.update)}function Pp(o){var s=o.cm,u=s.display;o.updatedDisplay&&Ua(s),o.barMeasure=Zs(s),u.maxLineChanged&&!s.options.lineWrapping&&(o.adjustWidthTo=Rr(s,u.maxLine,u.maxLine.text.length).left+3,s.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(u.scroller.clientWidth,u.sizer.offsetLeft+o.adjustWidthTo+lt(s)+s.display.barWidth),o.maxScrollLeft=Math.max(0,u.sizer.offsetLeft+o.adjustWidthTo-It(s))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=u.input.prepareSelection())}function ta(o){var s=o.cm;o.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<s.doc.scrollLeft&&jo(s,Math.min(s.display.scroller.scrollLeft,o.maxScrollLeft),!0),s.display.maxLineChanged=!1);var u=o.focus&&o.focus==Et();o.preparedSelection&&s.display.input.showSelection(o.preparedSelection,u),(o.updatedDisplay||o.startHeight!=s.doc.height)&&ss(s,o.barMeasure),o.updatedDisplay&&$a(s,o.barMeasure),o.selectionChanged&&os(s),s.state.focused&&o.updateInput&&s.display.input.reset(o.typing),u&&qc(o.cm)}function Ep(o){var s=o.cm,u=s.display,c=s.doc;o.updatedDisplay&&Xc(s,o.update),u.wheelStartX==null||o.scrollTop==null&&o.scrollLeft==null&&!o.scrollToPos||(u.wheelStartX=u.wheelStartY=null),o.scrollTop!=null&&Js(s,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&jo(s,o.scrollLeft,!0,!0),o.scrollToPos&&_p(s,Hl(s,oe(c,o.scrollToPos.from),oe(c,o.scrollToPos.to),o.scrollToPos.margin));var p=o.maybeHiddenMarkers,h=o.maybeUnhiddenMarkers;if(p)for(var m=0;m<p.length;++m)p[m].lines.length||pt(p[m],"hide");if(h)for(var y=0;y<h.length;++y)h[y].lines.length&&pt(h[y],"unhide");u.wrapper.offsetHeight&&(c.scrollTop=s.display.scroller.scrollTop),o.changeObjs&&pt(s,"changes",s,o.changeObjs),o.update&&o.update.finish()}function fr(o,s){if(o.curOp)return s();Si(o);try{return s()}finally{Oi(o)}}function Gn(o,s){return function(){if(o.curOp)return s.apply(o,arguments);Si(o);try{return s.apply(o,arguments)}finally{Oi(o)}}}function ir(o){return function(){if(this.curOp)return o.apply(this,arguments);Si(this);try{return o.apply(this,arguments)}finally{Oi(this)}}}function Kn(o){return function(){var s=this.cm;if(!s||s.curOp)return o.apply(this,arguments);Si(s);try{return o.apply(this,arguments)}finally{Oi(s)}}}function as(o,s){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(s,_e(Ap,o))}function Ap(o){var s=o.doc;if(!(s.highlightFrontier>=o.display.viewTo)){var u=+new Date+o.options.workTime,c=yo(o,s.highlightFrontier),p=[];s.iter(c.line,Math.min(s.first+s.size,o.display.viewTo+500),function(h){if(c.line>=o.display.viewFrom){var m=h.styles,y=h.text.length>o.options.maxHighlightLength?$n(s.mode,c.state):null,x=Ms(o,h,c,!0);y&&(c.state=y),h.styles=x.styles;var O=h.styleClasses,U=x.classes;U?h.styleClasses=U:O&&(h.styleClasses=null);for(var W=!m||m.length!=h.styles.length||O!=U&&(!O||!U||O.bgClass!=U.bgClass||O.textClass!=U.textClass),dt=0;!W&&dt<m.length;++dt)W=m[dt]!=h.styles[dt];W&&p.push(c.line),h.stateAfter=c.save(),c.nextLine()}else h.text.length<=o.options.maxHighlightLength&&oo(o,h.text,c),h.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>u)return as(o,o.options.workDelay),!0}),s.highlightFrontier=c.line,s.modeFrontier=Math.max(s.modeFrontier,c.line),p.length&&fr(o,function(){for(var h=0;h<p.length;h++)ao(o,p[h],"text")})}}var Wa=function(o,s,u){var c=o.display;this.viewport=s,this.visible=Ks(c,o.doc,s),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=It(o),this.force=u,this.dims=Nl(o),this.events=[]};function Ti(o){var s=o.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=lt(o)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=lt(o)+"px",s.scrollbarsClipped=!0)}function jp(o){if(o.hasFocus())return null;var s=Et();if(!s||!Mt(o.display.lineDiv,s))return null;var u={activeElt:s};if(window.getSelection){var c=window.getSelection();c.anchorNode&&c.extend&&Mt(o.display.lineDiv,c.anchorNode)&&(u.anchorNode=c.anchorNode,u.anchorOffset=c.anchorOffset,u.focusNode=c.focusNode,u.focusOffset=c.focusOffset)}return u}function Mp(o){if(o&&o.activeElt&&o.activeElt!=Et()&&(o.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(o.activeElt.nodeName)&&o.anchorNode&&Mt(document.body,o.anchorNode)&&Mt(document.body,o.focusNode))){var s=window.getSelection(),u=document.createRange();u.setEnd(o.anchorNode,o.anchorOffset),u.collapse(!1),s.removeAllRanges(),s.addRange(u),s.extend(o.focusNode,o.focusOffset)}}function Ul(o,s){var u=o.display,c=o.doc;if(s.editorIsHidden)return Jo(o),!1;if(!s.force&&s.visible.from>=u.viewFrom&&s.visible.to<=u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo)&&u.renderedView==u.view&&$c(o)==0)return!1;Zc(o)&&(Jo(o),s.dims=Nl(o));var p=c.first+c.size,h=Math.max(s.visible.from-o.options.viewportMargin,c.first),m=Math.min(p,s.visible.to+o.options.viewportMargin);u.viewFrom<h&&h-u.viewFrom<20&&(h=Math.max(c.first,u.viewFrom)),u.viewTo>m&&u.viewTo-m<20&&(m=Math.min(p,u.viewTo)),Zr&&(h=pr(o.doc,h),m=Nr(o.doc,m));var y=h!=u.viewFrom||m!=u.viewTo||u.lastWrapHeight!=s.wrapperHeight||u.lastWrapWidth!=s.wrapperWidth;bp(o,h,m),u.viewOffset=Fr(ge(o.doc,u.viewFrom)),o.display.mover.style.top=u.viewOffset+"px";var x=$c(o);if(!y&&x==0&&!s.force&&u.renderedView==u.view&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo))return!1;var O=jp(o);return x>4&&(u.lineDiv.style.display="none"),Jc(o,u.updateLineNumbers,s.dims),x>4&&(u.lineDiv.style.display=""),u.renderedView=u.view,Mp(O),Ct(u.cursorDiv),Ct(u.selectionDiv),u.gutters.style.height=u.sizer.style.minHeight=0,y&&(u.lastWrapHeight=s.wrapperHeight,u.lastWrapWidth=s.wrapperWidth,as(o,400)),u.updateLineNumbers=null,!0}function Xc(o,s){for(var u=s.viewport,c=!0;;c=!1){if(c&&o.options.lineWrapping&&s.oldDisplayWidth!=It(o))c&&(s.visible=Ks(o.display,o.doc,u));else if(u&&u.top!=null&&(u={top:Math.min(o.doc.height+Z(o.display)-$t(o),u.top)}),s.visible=Ks(o.display,o.doc,u),s.visible.from>=o.display.viewFrom&&s.visible.to<=o.display.viewTo)break;if(!Ul(o,s))break;Ua(o);var p=Zs(o);Bs(o),ss(o,p),$a(o,p),s.force=!1}s.signal(o,"update",o),o.display.viewFrom==o.display.reportedViewFrom&&o.display.viewTo==o.display.reportedViewTo||(s.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function Bl(o,s){var u=new Wa(o,s);if(Ul(o,u)){Ua(o),Xc(o,u);var c=Zs(o);Bs(o),ss(o,c),$a(o,c),u.finish()}}function Jc(o,s,u){var c=o.display,p=o.options.lineNumbers,h=c.lineDiv,m=h.firstChild;function y(xt){var Rt=xt.nextSibling;return P&&ut&&o.display.currentWheelTarget==xt?xt.style.display="none":xt.parentNode.removeChild(xt),Rt}for(var x=c.view,O=c.viewFrom,U=0;U<x.length;U++){var W=x[U];if(!W.hidden)if(W.node&&W.node.parentNode==h){for(;m!=W.node;)m=y(m);var dt=p&&s!=null&&s<=O&&W.lineNumber;W.changes&&(be(W.changes,"gutter")>-1&&(dt=!1),Rs(o,W,O,u)),dt&&(Ct(W.lineNumber),W.lineNumber.appendChild(document.createTextNode(Bo(o.options,O)))),m=W.node.nextSibling}else{var ht=zs(o,W,O,u);h.insertBefore(ht,m)}O+=W.size}for(;m;)m=y(m)}function Wl(o){var s=o.gutters.offsetWidth;o.sizer.style.marginLeft=s+"px",yn(o,"gutterChanged",o)}function $a(o,s){o.display.sizer.style.minHeight=s.docHeight+"px",o.display.heightForcer.style.top=s.docHeight+"px",o.display.gutters.style.height=s.docHeight+o.display.barHeight+lt(o)+"px"}function ea(o){var s=o.display,u=s.view;if(s.alignWidgets||s.gutters.firstChild&&o.options.fixedGutter){for(var c=Il(s)-s.scroller.scrollLeft+o.doc.scrollLeft,p=s.gutters.offsetWidth,h=c+"px",m=0;m<u.length;m++)if(!u[m].hidden){o.options.fixedGutter&&(u[m].gutter&&(u[m].gutter.style.left=h),u[m].gutterBackground&&(u[m].gutterBackground.style.left=h));var y=u[m].alignable;if(y)for(var x=0;x<y.length;x++)y[x].style.left=h}o.options.fixedGutter&&(s.gutters.style.left=c+p+"px")}}function Zc(o){if(!o.options.lineNumbers)return!1;var s=o.doc,u=Bo(o.options,s.first+s.size-1),c=o.display;if(u.length!=c.lineNumChars){var p=c.measure.appendChild(vt("div",[vt("div",u)],"CodeMirror-linenumber CodeMirror-gutter-elt")),h=p.firstChild.offsetWidth,m=p.offsetWidth-h;return c.lineGutter.style.width="",c.lineNumInnerWidth=Math.max(h,c.lineGutter.offsetWidth-m)+1,c.lineNumWidth=c.lineNumInnerWidth+m,c.lineNumChars=c.lineNumInnerWidth?u.length:-1,c.lineGutter.style.width=c.lineNumWidth+"px",Wl(o.display),!0}return!1}function qa(o,s){for(var u=[],c=!1,p=0;p<o.length;p++){var h=o[p],m=null;if(typeof h!="string"&&(m=h.style,h=h.className),h=="CodeMirror-linenumbers"){if(!s)continue;c=!0}u.push({className:h,style:m})}return s&&!c&&u.push({className:"CodeMirror-linenumbers",style:null}),u}function Qc(o){var s=o.gutters,u=o.gutterSpecs;Ct(s),o.lineGutter=null;for(var c=0;c<u.length;++c){var p=u[c],h=p.className,m=p.style,y=s.appendChild(vt("div",null,"CodeMirror-gutter "+h));m&&(y.style.cssText=m),h=="CodeMirror-linenumbers"&&(o.lineGutter=y,y.style.width=(o.lineNumWidth||1)+"px")}s.style.display=u.length?"":"none",Wl(o)}function ls(o){Qc(o.display),Qn(o),ea(o)}function tu(o,s,u,c){var p=this;this.input=u,p.scrollbarFiller=vt("div",null,"CodeMirror-scrollbar-filler"),p.scrollbarFiller.setAttribute("cm-not-content","true"),p.gutterFiller=vt("div",null,"CodeMirror-gutter-filler"),p.gutterFiller.setAttribute("cm-not-content","true"),p.lineDiv=N("div",null,"CodeMirror-code"),p.selectionDiv=vt("div",null,null,"position: relative; z-index: 1"),p.cursorDiv=vt("div",null,"CodeMirror-cursors"),p.measure=vt("div",null,"CodeMirror-measure"),p.lineMeasure=vt("div",null,"CodeMirror-measure"),p.lineSpace=N("div",[p.measure,p.lineMeasure,p.selectionDiv,p.cursorDiv,p.lineDiv],null,"position: relative; outline: none");var h=N("div",[p.lineSpace],"CodeMirror-lines");p.mover=vt("div",[h],null,"position: relative"),p.sizer=vt("div",[p.mover],"CodeMirror-sizer"),p.sizerWidth=null,p.heightForcer=vt("div",null,null,"position: absolute; height: "+de+"px; width: 1px;"),p.gutters=vt("div",null,"CodeMirror-gutters"),p.lineGutter=null,p.scroller=vt("div",[p.sizer,p.heightForcer,p.gutters],"CodeMirror-scroll"),p.scroller.setAttribute("tabIndex","-1"),p.wrapper=vt("div",[p.scrollbarFiller,p.gutterFiller,p.scroller],"CodeMirror"),p.wrapper.setAttribute("translate","no"),B&&k<8&&(p.gutters.style.zIndex=-1,p.scroller.style.paddingRight=0),P||rt&&ft||(p.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(p.wrapper):o(p.wrapper)),p.viewFrom=p.viewTo=s.first,p.reportedViewFrom=p.reportedViewTo=s.first,p.view=[],p.renderedView=null,p.externalMeasured=null,p.viewOffset=0,p.lastWrapHeight=p.lastWrapWidth=0,p.updateLineNumbers=null,p.nativeBarWidth=p.barHeight=p.barWidth=0,p.scrollbarsClipped=!1,p.lineNumWidth=p.lineNumInnerWidth=p.lineNumChars=null,p.alignWidgets=!1,p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.maxLine=null,p.maxLineLength=0,p.maxLineChanged=!1,p.wheelDX=p.wheelDY=p.wheelStartX=p.wheelStartY=null,p.shift=!1,p.selForContextMenu=null,p.activeTouch=null,p.gutterSpecs=qa(c.gutters,c.lineNumbers),Qc(p),u.init(p)}Wa.prototype.signal=function(o,s){he(o,s)&&this.events.push(arguments)},Wa.prototype.finish=function(){for(var o=0;o<this.events.length;o++)pt.apply(null,this.events[o])};var Ga=0,Mo=null;function eu(o){var s=o.wheelDeltaX,u=o.wheelDeltaY;return s==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(s=o.detail),u==null&&o.detail&&o.axis==o.VERTICAL_AXIS?u=o.detail:u==null&&(u=o.wheelDelta),{x:s,y:u}}function Lp(o){var s=eu(o);return s.x*=Mo,s.y*=Mo,s}function nu(o,s){j&&L>=102&&(o.display.chromeScrollHack==null?o.display.sizer.style.pointerEvents="none":clearTimeout(o.display.chromeScrollHack),o.display.chromeScrollHack=setTimeout(function(){o.display.chromeScrollHack=null,o.display.sizer.style.pointerEvents=""},100));var u=eu(s),c=u.x,p=u.y,h=Mo;s.deltaMode===0&&(c=s.deltaX,p=s.deltaY,h=1);var m=o.display,y=m.scroller,x=y.scrollWidth>y.clientWidth,O=y.scrollHeight>y.clientHeight;if(c&&x||p&&O){if(p&&ut&&P){t:for(var U=s.target,W=m.view;U!=y;U=U.parentNode)for(var dt=0;dt<W.length;dt++)if(W[dt].node==U){o.display.currentWheelTarget=U;break t}}if(c&&!rt&&!ot&&h!=null)return p&&O&&Xs(o,Math.max(0,y.scrollTop+p*h)),jo(o,Math.max(0,y.scrollLeft+c*h)),(!p||p&&O)&&We(s),void(m.wheelStartX=null);if(p&&h!=null){var ht=p*h,xt=o.doc.scrollTop,Rt=xt+m.wrapper.clientHeight;ht<0?xt=Math.max(0,xt+ht-50):Rt=Math.min(o.doc.height,Rt+ht+50),Bl(o,{top:xt,bottom:Rt})}Ga<20&&s.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=y.scrollLeft,m.wheelStartY=y.scrollTop,m.wheelDX=c,m.wheelDY=p,setTimeout(function(){if(m.wheelStartX!=null){var Bt=y.scrollLeft-m.wheelStartX,ne=y.scrollTop-m.wheelStartY,ie=ne&&m.wheelDY&&ne/m.wheelDY||Bt&&m.wheelDX&&Bt/m.wheelDX;m.wheelStartX=m.wheelStartY=null,ie&&(Mo=(Mo*Ga+ie)/(Ga+1),++Ga)}},200)):(m.wheelDX+=c,m.wheelDY+=p))}}B?Mo=-.53:rt?Mo=15:j?Mo=-.7:it&&(Mo=-.3333333333333333);var Ur=function(o,s){this.ranges=o,this.primIndex=s};Ur.prototype.primary=function(){return this.ranges[this.primIndex]},Ur.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var u=this.ranges[s],c=o.ranges[s];if(!$(u.anchor,c.anchor)||!$(u.head,c.head))return!1}return!0},Ur.prototype.deepCopy=function(){for(var o=[],s=0;s<this.ranges.length;s++)o[s]=new tn(Lt(this.ranges[s].anchor),Lt(this.ranges[s].head));return new Ur(o,this.primIndex)},Ur.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},Ur.prototype.contains=function(o,s){s||(s=o);for(var u=0;u<this.ranges.length;u++){var c=this.ranges[u];if(T(s,c.from())>=0&&T(o,c.to())<=0)return u}return-1};var tn=function(o,s){this.anchor=o,this.head=s};function Qr(o,s,u){var c=o&&o.options.selectionsMayTouch,p=s[u];s.sort(function(dt,ht){return T(dt.from(),ht.from())}),u=be(s,p);for(var h=1;h<s.length;h++){var m=s[h],y=s[h-1],x=T(y.to(),m.from());if(c&&!m.empty()?x>0:x>=0){var O=fe(y.from(),m.from()),U=Qt(y.to(),m.to()),W=y.empty()?m.from()==m.head:y.from()==y.head;h<=u&&--u,s.splice(--h,2,new tn(W?U:O,W?O:U))}}return new Ur(s,u)}function Zo(o,s){return new Ur([new tn(o,s||o)],0)}function lo(o){return o.text?Ut(o.from.line+o.text.length-1,Jt(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function ru(o,s){if(T(o,s.from)<0)return o;if(T(o,s.to)<=0)return lo(s);var u=o.line+s.text.length-(s.to.line-s.from.line)-1,c=o.ch;return o.line==s.to.line&&(c+=lo(s).ch-s.to.ch),Ut(u,c)}function Ka(o,s){for(var u=[],c=0;c<o.sel.ranges.length;c++){var p=o.sel.ranges[c];u.push(new tn(ru(p.anchor,s),ru(p.head,s)))}return Qr(o.cm,u,o.sel.primIndex)}function ou(o,s,u){return o.line==s.line?Ut(u.line,o.ch-s.ch+u.ch):Ut(u.line+(o.line-s.line),o.ch)}function Qo(o,s,u){for(var c=[],p=Ut(o.first,0),h=p,m=0;m<s.length;m++){var y=s[m],x=ou(y.from,p,h),O=ou(lo(y),p,h);if(p=y.to,h=O,u=="around"){var U=o.sel.ranges[m],W=T(U.head,U.anchor)<0;c[m]=new tn(W?O:x,W?x:O)}else c[m]=new tn(x,x)}return new Ur(c,o.sel.primIndex)}function Ya(o){o.doc.mode=Jr(o.options,o.doc.modeOption),Lo(o)}function Lo(o){o.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,as(o,100),o.state.modeGen++,o.curOp&&Qn(o)}function iu(o,s){return s.from.ch==0&&s.to.ch==0&&Jt(s.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function $l(o,s,u,c){function p(ie){return u?u[ie]:null}function h(ie,Xt,ye){Vs(ie,Xt,ye,c),yn(ie,"change",ie,s)}function m(ie,Xt){for(var ye=[],ve=ie;ve<Xt;++ve)ye.push(new Vr(O[ve],p(ve),c));return ye}var y=s.from,x=s.to,O=s.text,U=ge(o,y.line),W=ge(o,x.line),dt=Jt(O),ht=p(O.length-1),xt=x.line-y.line;if(s.full)o.insert(0,m(0,O.length)),o.remove(O.length,o.size-O.length);else if(iu(o,s)){var Rt=m(0,O.length-1);h(W,W.text,ht),xt&&o.remove(y.line,xt),Rt.length&&o.insert(y.line,Rt)}else if(U==W)if(O.length==1)h(U,U.text.slice(0,y.ch)+dt+U.text.slice(x.ch),ht);else{var Bt=m(1,O.length-1);Bt.push(new Vr(dt+U.text.slice(x.ch),ht,c)),h(U,U.text.slice(0,y.ch)+O[0],p(0)),o.insert(y.line+1,Bt)}else if(O.length==1)h(U,U.text.slice(0,y.ch)+O[0]+W.text.slice(x.ch),p(0)),o.remove(y.line+1,xt);else{h(U,U.text.slice(0,y.ch)+O[0],p(0)),h(W,dt+W.text.slice(x.ch),ht);var ne=m(1,O.length-1);xt>1&&o.remove(y.line+1,xt-1),o.insert(y.line+1,ne)}yn(o,"change",o,s)}function Do(o,s,u){function c(p,h,m){if(p.linked)for(var y=0;y<p.linked.length;++y){var x=p.linked[y];if(x.doc!=h){var O=m&&x.sharedHist;u&&!O||(s(x.doc,O),c(x.doc,p,O))}}}c(o,null,!0)}function su(o,s){if(s.cm)throw new Error("This document is already in use.");o.doc=s,s.cm=o,Fl(o),Ya(o),Xa(o),o.options.direction=s.direction,o.options.lineWrapping||Fs(o),o.options.mode=s.modeOption,Qn(o)}function Xa(o){(o.doc.direction=="rtl"?Kt:et)(o.display.lineDiv,"CodeMirror-rtl")}function Dp(o){fr(o,function(){Xa(o),Qn(o)})}function Ja(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function ql(o,s){var u={from:Lt(s.from),to:lo(s),text:rr(o,s.from,s.to)};return Yl(o,u,s.from.line,s.to.line+1),Do(o,function(c){return Yl(c,u,s.from.line,s.to.line+1)},!0),u}function au(o){for(;o.length&&Jt(o).ranges;)o.pop()}function Np(o,s){return s?(au(o.done),Jt(o.done)):o.done.length&&!Jt(o.done).ranges?Jt(o.done):o.done.length>1&&!o.done[o.done.length-2].ranges?(o.done.pop(),Jt(o.done)):void 0}function Gl(o,s,u,c){var p=o.history;p.undone.length=0;var h,m,y=+new Date;if((p.lastOp==c||p.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&p.lastModTime>y-(o.cm?o.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(h=Np(p,p.lastOp==c)))m=Jt(h.changes),T(s.from,s.to)==0&&T(s.from,m.to)==0?m.to=lo(s):h.changes.push(ql(o,s));else{var x=Jt(p.done);for(x&&x.ranges||Za(o.sel,p.done),h={changes:[ql(o,s)],generation:p.generation},p.done.push(h);p.done.length>p.undoDepth;)p.done.shift(),p.done[0].ranges||p.done.shift()}p.done.push(u),p.generation=++p.maxGeneration,p.lastModTime=p.lastSelTime=y,p.lastOp=p.lastSelOp=c,p.lastOrigin=p.lastSelOrigin=s.origin,m||pt(o,"historyAdded")}function Kl(o,s,u,c){var p=s.charAt(0);return p=="*"||p=="+"&&u.ranges.length==c.ranges.length&&u.somethingSelected()==c.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}function Ip(o,s,u,c){var p=o.history,h=c&&c.origin;u==p.lastSelOp||h&&p.lastSelOrigin==h&&(p.lastModTime==p.lastSelTime&&p.lastOrigin==h||Kl(o,h,Jt(p.done),s))?p.done[p.done.length-1]=s:Za(s,p.done),p.lastSelTime=+new Date,p.lastSelOrigin=h,p.lastSelOp=u,c&&c.clearRedo!==!1&&au(p.undone)}function Za(o,s){var u=Jt(s);u&&u.ranges&&u.equals(o)||s.push(o)}function Yl(o,s,u,c){var p=s["spans_"+o.id],h=0;o.iter(Math.max(o.first,u),Math.min(o.first+o.size,c),function(m){m.markedSpans&&((p||(p=s["spans_"+o.id]={}))[h]=m.markedSpans),++h})}function Fp(o){if(!o)return null;for(var s,u=0;u<o.length;++u)o[u].marker.explicitlyCleared?s||(s=o.slice(0,u)):s&&s.push(o[u]);return s?s.length?s:null:o}function Vp(o,s){var u=s["spans_"+o.id];if(!u)return null;for(var c=[],p=0;p<s.text.length;++p)c.push(Fp(u[p]));return c}function Xl(o,s){var u=Vp(o,s),c=$o(o,s);if(!u)return c;if(!c)return u;for(var p=0;p<u.length;++p){var h=u[p],m=c[p];if(h&&m)t:for(var y=0;y<m.length;++y){for(var x=m[y],O=0;O<h.length;++O)if(h[O].marker==x.marker)continue t;h.push(x)}else m&&(u[p]=m)}return u}function cs(o,s,u){for(var c=[],p=0;p<o.length;++p){var h=o[p];if(h.ranges)c.push(u?Ur.prototype.deepCopy.call(h):h);else{var m=h.changes,y=[];c.push({changes:y});for(var x=0;x<m.length;++x){var O=m[x],U=void 0;if(y.push({from:O.from,to:O.to,text:O.text}),s)for(var W in O)(U=W.match(/^spans_(\d+)$/))&&be(s,Number(U[1]))>-1&&(Jt(y)[W]=O[W],delete O[W])}}}return c}function ki(o,s,u,c){if(c){var p=o.anchor;if(u){var h=T(s,p)<0;h!=T(u,p)<0?(p=s,s=u):h!=T(s,u)<0&&(s=u)}return new tn(p,s)}return new tn(u||s,s)}function Qa(o,s,u,c,p){p==null&&(p=o.cm&&(o.cm.display.shift||o.extend)),tr(o,new Ur([ki(o.sel.primary(),s,u,p)],0),c)}function lu(o,s,u){for(var c=[],p=o.cm&&(o.cm.display.shift||o.extend),h=0;h<o.sel.ranges.length;h++)c[h]=ki(o.sel.ranges[h],s[h],null,p);tr(o,Qr(o.cm,c,o.sel.primIndex),u)}function tl(o,s,u,c){var p=o.sel.ranges.slice(0);p[s]=u,tr(o,Qr(o.cm,p,o.sel.primIndex),c)}function Jl(o,s,u,c){tr(o,Zo(s,u),c)}function cu(o,s,u){var c={ranges:s.ranges,update:function(p){this.ranges=[];for(var h=0;h<p.length;h++)this.ranges[h]=new tn(oe(o,p[h].anchor),oe(o,p[h].head))},origin:u&&u.origin};return pt(o,"beforeSelectionChange",o,c),o.cm&&pt(o.cm,"beforeSelectionChange",o.cm,c),c.ranges!=s.ranges?Qr(o.cm,c.ranges,c.ranges.length-1):s}function Zl(o,s,u){var c=o.history.done,p=Jt(c);p&&p.ranges?(c[c.length-1]=s,el(o,s,u)):tr(o,s,u)}function tr(o,s,u){el(o,s,u),Ip(o,o.sel,o.cm?o.cm.curOp.id:NaN,u)}function el(o,s,u){(he(o,"beforeSelectionChange")||o.cm&&he(o.cm,"beforeSelectionChange"))&&(s=cu(o,s,u));var c=u&&u.bias||(T(s.primary().head,o.sel.primary().head)<0?-1:1);us(o,Ql(o,s,c,!0)),u&&u.scroll===!1||!o.cm||o.cm.getOption("readOnly")=="nocursor"||is(o.cm)}function us(o,s){s.equals(o.sel)||(o.sel=s,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,Gt(o.cm)),yn(o,"cursorActivity",o))}function nl(o){us(o,Ql(o,o.sel,null,!1))}function Ql(o,s,u,c){for(var p,h=0;h<s.ranges.length;h++){var m=s.ranges[h],y=s.ranges.length==o.sel.ranges.length&&o.sel.ranges[h],x=na(o,m.anchor,y&&y.anchor,u,c),O=m.head==m.anchor?x:na(o,m.head,y&&y.head,u,c);(p||x!=m.anchor||O!=m.head)&&(p||(p=s.ranges.slice(0,h)),p[h]=new tn(x,O))}return p?Qr(o.cm,p,s.primIndex):s}function Pi(o,s,u,c,p){var h=ge(o,s.line);if(h.markedSpans)for(var m=0;m<h.markedSpans.length;++m){var y=h.markedSpans[m],x=y.marker,O="selectLeft"in x?!x.selectLeft:x.inclusiveLeft,U="selectRight"in x?!x.selectRight:x.inclusiveRight;if((y.from==null||(O?y.from<=s.ch:y.from<s.ch))&&(y.to==null||(U?y.to>=s.ch:y.to>s.ch))){if(p&&(pt(x,"beforeCursorEnter"),x.explicitlyCleared)){if(h.markedSpans){--m;continue}break}if(!x.atomic)continue;if(u){var W=x.find(c<0?1:-1),dt=void 0;if((c<0?U:O)&&(W=ps(o,W,-c,W&&W.line==s.line?h:null)),W&&W.line==s.line&&(dt=T(W,u))&&(c<0?dt<0:dt>0))return Pi(o,W,s,c,p)}var ht=x.find(c<0?-1:1);return(c<0?O:U)&&(ht=ps(o,ht,c,ht.line==s.line?h:null)),ht?Pi(o,ht,s,c,p):null}}return s}function na(o,s,u,c,p){var h=c||1,m=Pi(o,s,u,h,p)||!p&&Pi(o,s,u,h,!0)||Pi(o,s,u,-h,p)||!p&&Pi(o,s,u,-h,!0);return m||(o.cantEdit=!0,Ut(o.first,0))}function ps(o,s,u,c){return u<0&&s.ch==0?s.line>o.first?oe(o,Ut(s.line-1)):null:u>0&&s.ch==(c||ge(o,s.line)).text.length?s.line<o.first+o.size-1?Ut(s.line+1,0):null:new Ut(s.line,s.ch+u)}function uu(o){o.setSelection(Ut(o.firstLine(),0),Ut(o.lastLine()),se)}function pu(o,s,u){var c={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return c.canceled=!0}};return u&&(c.update=function(p,h,m,y){p&&(c.from=oe(o,p)),h&&(c.to=oe(o,h)),m&&(c.text=m),y!==void 0&&(c.origin=y)}),pt(o,"beforeChange",o,c),o.cm&&pt(o.cm,"beforeChange",o.cm,c),c.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function Ei(o,s,u){if(o.cm){if(!o.cm.curOp)return Gn(o.cm,Ei)(o,s,u);if(o.cm.state.suppressEdits)return}if(!(he(o,"beforeChange")||o.cm&&he(o.cm,"beforeChange"))||(s=pu(o,s,!0))){var c=Jn&&!u&&Be(o,s.from,s.to);if(c)for(var p=c.length-1;p>=0;--p)fu(o,{from:c[p].from,to:c[p].to,text:p?[""]:s.text,origin:s.origin});else fu(o,s)}}function fu(o,s){if(s.text.length!=1||s.text[0]!=""||T(s.from,s.to)!=0){var u=Ka(o,s);Gl(o,s,u,o.cm?o.cm.curOp.id:NaN),ra(o,s,u,$o(o,s));var c=[];Do(o,function(p,h){h||be(c,p.history)!=-1||(hu(p.history,s),c.push(p.history)),ra(p,s,null,$o(p,s))})}}function rl(o,s,u){var c=o.cm&&o.cm.state.suppressEdits;if(!c||u){for(var p,h=o.history,m=o.sel,y=s=="undo"?h.done:h.undone,x=s=="undo"?h.undone:h.done,O=0;O<y.length&&(p=y[O],u?!p.ranges||p.equals(o.sel):p.ranges);O++);if(O!=y.length){for(h.lastOrigin=h.lastSelOrigin=null;;){if(!(p=y.pop()).ranges){if(c)return void y.push(p);break}if(Za(p,x),u&&!p.equals(o.sel))return void tr(o,p,{clearRedo:!1});m=p}var U=[];Za(m,x),x.push({changes:U,generation:h.generation}),h.generation=p.generation||++h.maxGeneration;for(var W=he(o,"beforeChange")||o.cm&&he(o.cm,"beforeChange"),dt=function(Rt){var Bt=p.changes[Rt];if(Bt.origin=s,W&&!pu(o,Bt,!1))return y.length=0,{};U.push(ql(o,Bt));var ne=Rt?Ka(o,Bt):Jt(y);ra(o,Bt,ne,Xl(o,Bt)),!Rt&&o.cm&&o.cm.scrollIntoView({from:Bt.from,to:lo(Bt)});var ie=[];Do(o,function(Xt,ye){ye||be(ie,Xt.history)!=-1||(hu(Xt.history,Bt),ie.push(Xt.history)),ra(Xt,Bt,null,Xl(Xt,Bt))})},ht=p.changes.length-1;ht>=0;--ht){var xt=dt(ht);if(xt)return xt.v}}}}function tc(o,s){if(s!=0&&(o.first+=s,o.sel=new Ur(Pe(o.sel.ranges,function(p){return new tn(Ut(p.anchor.line+s,p.anchor.ch),Ut(p.head.line+s,p.head.ch))}),o.sel.primIndex),o.cm)){Qn(o.cm,o.first,o.first-s,s);for(var u=o.cm.display,c=u.viewFrom;c<u.viewTo;c++)ao(o.cm,c,"gutter")}}function ra(o,s,u,c){if(o.cm&&!o.cm.curOp)return Gn(o.cm,ra)(o,s,u,c);if(s.to.line<o.first)tc(o,s.text.length-1-(s.to.line-s.from.line));else if(!(s.from.line>o.lastLine())){if(s.from.line<o.first){var p=s.text.length-1-(o.first-s.from.line);tc(o,p),s={from:Ut(o.first,0),to:Ut(s.to.line+p,s.to.ch),text:[Jt(s.text)],origin:s.origin}}var h=o.lastLine();s.to.line>h&&(s={from:s.from,to:Ut(h,ge(o,h).text.length),text:[s.text[0]],origin:s.origin}),s.removed=rr(o,s.from,s.to),u||(u=Ka(o,s)),o.cm?Rp(o.cm,s,c):$l(o,s,c),el(o,u,se),o.cantEdit&&na(o,Ut(o.firstLine(),0))&&(o.cantEdit=!1)}}function Rp(o,s,u){var c=o.doc,p=o.display,h=s.from,m=s.to,y=!1,x=h.line;o.options.lineWrapping||(x=Ye(Tr(ge(c,h.line))),c.iter(x,m.line+1,function(ht){if(ht==p.maxLine)return y=!0,!0})),c.sel.contains(s.from,s.to)>-1&&Gt(o),$l(c,s,u,Wc(o)),o.options.lineWrapping||(c.iter(x,h.line+s.text.length,function(ht){var xt=gi(ht);xt>p.maxLineLength&&(p.maxLine=ht,p.maxLineLength=xt,p.maxLineChanged=!0,y=!1)}),y&&(o.curOp.updateMaxLine=!0)),Ds(c,h.line),as(o,400);var O=s.text.length-(m.line-h.line)-1;s.full?Qn(o):h.line!=m.line||s.text.length!=1||iu(o.doc,s)?Qn(o,h.line,m.line+1,O):ao(o,h.line,"text");var U=he(o,"changes"),W=he(o,"change");if(W||U){var dt={from:h,to:m,text:s.text,removed:s.removed,origin:s.origin};W&&yn(o,"change",o,dt),U&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(dt)}o.display.selForContextMenu=null}function fs(o,s,u,c,p){var h;c||(c=u),T(c,u)<0&&(u=(h=[c,u])[0],c=h[1]),typeof s=="string"&&(s=o.splitLines(s)),Ei(o,{from:u,to:c,text:s,origin:p})}function du(o,s,u,c){u<o.line?o.line+=c:s<o.line&&(o.line=s,o.ch=0)}function oa(o,s,u,c){for(var p=0;p<o.length;++p){var h=o[p],m=!0;if(h.ranges){h.copied||((h=o[p]=h.deepCopy()).copied=!0);for(var y=0;y<h.ranges.length;y++)du(h.ranges[y].anchor,s,u,c),du(h.ranges[y].head,s,u,c)}else{for(var x=0;x<h.changes.length;++x){var O=h.changes[x];if(u<O.from.line)O.from=Ut(O.from.line+c,O.from.ch),O.to=Ut(O.to.line+c,O.to.ch);else if(s<=O.to.line){m=!1;break}}m||(o.splice(0,p+1),p=0)}}}function hu(o,s){var u=s.from.line,c=s.to.line,p=s.text.length-(c-u)-1;oa(o.done,u,c,p),oa(o.undone,u,c,p)}function ia(o,s,u,c){var p=s,h=s;return typeof s=="number"?h=ge(o,$e(o,s)):p=Ye(s),p==null?null:(c(h,p)&&o.cm&&ao(o.cm,p,u),h)}function sa(o){this.lines=o,this.parent=null;for(var s=0,u=0;u<o.length;++u)o[u].parent=this,s+=o[u].height;this.height=s}function ds(o){this.children=o;for(var s=0,u=0,c=0;c<o.length;++c){var p=o[c];s+=p.chunkSize(),u+=p.height,p.parent=this}this.size=s,this.height=u,this.parent=null}tn.prototype.from=function(){return fe(this.anchor,this.head)},tn.prototype.to=function(){return Qt(this.anchor,this.head)},tn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},sa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,s){for(var u=o,c=o+s;u<c;++u){var p=this.lines[u];this.height-=p.height,Ea(p),yn(p,"delete")}this.lines.splice(o,s)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,s,u){this.height+=u,this.lines=this.lines.slice(0,o).concat(s).concat(this.lines.slice(o));for(var c=0;c<s.length;++c)s[c].parent=this},iterN:function(o,s,u){for(var c=o+s;o<c;++o)if(u(this.lines[o]))return!0}},ds.prototype={chunkSize:function(){return this.size},removeInner:function(o,s){this.size-=s;for(var u=0;u<this.children.length;++u){var c=this.children[u],p=c.chunkSize();if(o<p){var h=Math.min(s,p-o),m=c.height;if(c.removeInner(o,h),this.height-=m-c.height,p==h&&(this.children.splice(u--,1),c.parent=null),(s-=h)==0)break;o=0}else o-=p}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof sa))){var y=[];this.collapse(y),this.children=[new sa(y)],this.children[0].parent=this}},collapse:function(o){for(var s=0;s<this.children.length;++s)this.children[s].collapse(o)},insertInner:function(o,s,u){this.size+=s.length,this.height+=u;for(var c=0;c<this.children.length;++c){var p=this.children[c],h=p.chunkSize();if(o<=h){if(p.insertInner(o,s,u),p.lines&&p.lines.length>50){for(var m=p.lines.length%25+25,y=m;y<p.lines.length;){var x=new sa(p.lines.slice(y,y+=25));p.height-=x.height,this.children.splice(++c,0,x),x.parent=this}p.lines=p.lines.slice(0,m),this.maybeSpill()}break}o-=h}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var s=new ds(o.children.splice(o.children.length-5,5));if(o.parent){o.size-=s.size,o.height-=s.height;var u=be(o.parent.children,o);o.parent.children.splice(u+1,0,s)}else{var c=new ds(o.children);c.parent=o,o.children=[c,s],o=c}s.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,s,u){for(var c=0;c<this.children.length;++c){var p=this.children[c],h=p.chunkSize();if(o<h){var m=Math.min(s,h-o);if(p.iterN(o,m,u))return!0;if((s-=m)==0)break;o=0}else o-=h}}};var aa=function(o,s,u){if(u)for(var c in u)u.hasOwnProperty(c)&&(this[c]=u[c]);this.doc=o,this.node=s};function ec(o,s,u){Fr(s)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&Ba(o,u)}function nc(o,s,u,c){var p=new aa(o,u,c),h=o.cm;return h&&p.noHScroll&&(h.display.alignWidgets=!0),ia(o,s,"widget",function(m){var y=m.widgets||(m.widgets=[]);if(p.insertAt==null?y.push(p):y.splice(Math.min(y.length,Math.max(0,p.insertAt)),0,p),p.line=m,h&&!Ir(o,m)){var x=Fr(m)<o.scrollTop;or(m,m.height+_(p)),x&&Ba(h,p.height),h.curOp.forceUpdate=!0}return!0}),h&&yn(h,"lineWidgetAdded",h,p,typeof s=="number"?s:Ye(s)),p}aa.prototype.clear=function(){var o=this.doc.cm,s=this.line.widgets,u=this.line,c=Ye(u);if(c!=null&&s){for(var p=0;p<s.length;++p)s[p]==this&&s.splice(p--,1);s.length||(u.widgets=null);var h=_(this);or(u,Math.max(0,u.height-h)),o&&(fr(o,function(){ec(o,u,-h),ao(o,c,"widget")}),yn(o,"lineWidgetCleared",o,this,c))}},aa.prototype.changed=function(){var o=this,s=this.height,u=this.doc.cm,c=this.line;this.height=null;var p=_(this)-s;p&&(Ir(this.doc,c)||or(c,c.height+p),u&&fr(u,function(){u.curOp.forceUpdate=!0,ec(u,c,p),yn(u,"lineWidgetChanged",u,o,Ye(c))}))},Fe(aa);var rc=0,ti=function(o,s){this.lines=[],this.type=s,this.doc=o,this.id=++rc};function hs(o,s,u,c,p){if(c&&c.shared)return Hp(o,s,u,c,p);if(o.cm&&!o.cm.curOp)return Gn(o.cm,hs)(o,s,u,c,p);var h=new ti(o,p),m=T(s,u);if(c&&Ne(c,h,!1),m>0||m==0&&h.clearWhenEmpty!==!1)return h;if(h.replacedWith&&(h.collapsed=!0,h.widgetNode=N("span",[h.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||h.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(h.widgetNode.insertLeft=!0)),h.collapsed){if(mn(o,s.line,s,u,h)||s.line!=u.line&&mn(o,u.line,s,u,h))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ns()}h.addToHistory&&Gl(o,{from:s,to:u,origin:"markText"},o.sel,NaN);var y,x=s.line,O=o.cm;if(o.iter(x,u.line+1,function(W){O&&h.collapsed&&!O.options.lineWrapping&&Tr(W)==O.display.maxLine&&(y=!0),h.collapsed&&x!=s.line&&or(W,0),Is(W,new Sr(h,x==s.line?s.ch:null,x==u.line?u.ch:null),o.cm&&o.cm.curOp),++x}),h.collapsed&&o.iter(s.line,u.line+1,function(W){Ir(o,W)&&or(W,0)}),h.clearOnEnter&&qt(h,"beforeCursorEnter",function(){return h.clear()}),h.readOnly&&(pi(),(o.history.done.length||o.history.undone.length)&&o.clearHistory()),h.collapsed&&(h.id=++rc,h.atomic=!0),O){if(y&&(O.curOp.updateMaxLine=!0),h.collapsed)Qn(O,s.line,u.line+1);else if(h.className||h.startStyle||h.endStyle||h.css||h.attributes||h.title)for(var U=s.line;U<=u.line;U++)ao(O,U,"text");h.atomic&&nl(O.doc),yn(O,"markerAdded",O,h)}return h}ti.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,s=o&&!o.curOp;if(s&&Si(o),he(this,"clear")){var u=this.find();u&&yn(this,"clear",u.from,u.to)}for(var c=null,p=null,h=0;h<this.lines.length;++h){var m=this.lines[h],y=Oo(m.markedSpans,this);o&&!this.collapsed?ao(o,Ye(m),"text"):o&&(y.to!=null&&(p=Ye(m)),y.from!=null&&(c=Ye(m))),m.markedSpans=fi(m.markedSpans,y),y.from==null&&this.collapsed&&!Ir(this.doc,m)&&o&&or(m,so(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(var x=0;x<this.lines.length;++x){var O=Tr(this.lines[x]),U=gi(O);U>o.display.maxLineLength&&(o.display.maxLine=O,o.display.maxLineLength=U,o.display.maxLineChanged=!0)}c!=null&&o&&this.collapsed&&Qn(o,c,p+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&nl(o.doc)),o&&yn(o,"markerCleared",o,this,c,p),s&&Oi(o),this.parent&&this.parent.clear()}},ti.prototype.find=function(o,s){var u,c;o==null&&this.type=="bookmark"&&(o=1);for(var p=0;p<this.lines.length;++p){var h=this.lines[p],m=Oo(h.markedSpans,this);if(m.from!=null&&(u=Ut(s?h:Ye(h),m.from),o==-1))return u;if(m.to!=null&&(c=Ut(s?h:Ye(h),m.to),o==1))return c}return u&&{from:u,to:c}},ti.prototype.changed=function(){var o=this,s=this.find(-1,!0),u=this,c=this.doc.cm;s&&c&&fr(c,function(){var p=s.line,h=Ye(s.line),m=Qi(c,h);if(m&&(Hc(m),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!Ir(u.doc,p)&&u.height!=null){var y=u.height;u.height=null;var x=_(u)-y;x&&or(p,p.height+x)}yn(c,"markerChanged",c,o)})},ti.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;s.maybeHiddenMarkers&&be(s.maybeHiddenMarkers,this)!=-1||(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},ti.prototype.detachLine=function(o){if(this.lines.splice(be(this.lines,o),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Fe(ti);var la=function(o,s){this.markers=o,this.primary=s;for(var u=0;u<o.length;++u)o[u].parent=this};function Hp(o,s,u,c,p){(c=Ne(c)).shared=!1;var h=[hs(o,s,u,c,p)],m=h[0],y=c.widgetNode;return Do(o,function(x){y&&(c.widgetNode=y.cloneNode(!0)),h.push(hs(x,oe(x,s),oe(x,u),c,p));for(var O=0;O<x.linked.length;++O)if(x.linked[O].isParent)return;m=Jt(h)}),new la(h,m)}function gu(o){return o.findMarks(Ut(o.first,0),o.clipPos(Ut(o.lastLine())),function(s){return s.parent})}function vu(o,s){for(var u=0;u<s.length;u++){var c=s[u],p=c.find(),h=o.clipPos(p.from),m=o.clipPos(p.to);if(T(h,m)){var y=hs(o,h,m,c.primary,c.primary.type);c.markers.push(y),y.parent=c}}}function mu(o){for(var s=function(c){var p=o[c],h=[p.primary.doc];Do(p.primary.doc,function(x){return h.push(x)});for(var m=0;m<p.markers.length;m++){var y=p.markers[m];be(h,y.doc)==-1&&(y.parent=null,p.markers.splice(m--,1))}},u=0;u<o.length;u++)s(u)}la.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();yn(this,"clear")}},la.prototype.find=function(o,s){return this.primary.find(o,s)},Fe(la);var zp=0,Fn=function(o,s,u,c,p){if(!(this instanceof Fn))return new Fn(o,s,u,c,p);u==null&&(u=0),ds.call(this,[new sa([new Vr("",null)])]),this.first=u,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=u;var h=Ut(u,0);this.sel=Zo(h),this.history=new Ja(null),this.id=++zp,this.modeOption=s,this.lineSep=c,this.direction=p=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),$l(this,{from:h,to:h,text:o}),tr(this,Zo(h),se)};Fn.prototype=pn(ds.prototype,{constructor:Fn,iter:function(o,s,u){u?this.iterN(o-this.first,s-o,u):this.iterN(this.first,this.first+this.size,o)},insert:function(o,s){for(var u=0,c=0;c<s.length;++c)u+=s[c].height;this.insertInner(o-this.first,s,u)},remove:function(o,s){this.removeInner(o-this.first,s)},getValue:function(o){var s=Uo(this,this.first,this.first+this.size);return o===!1?s:s.join(o||this.lineSeparator())},setValue:Kn(function(o){var s=Ut(this.first,0),u=this.first+this.size-1;Ei(this,{from:s,to:Ut(u,ge(this,u).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&Ys(this.cm,0,0),tr(this,Zo(s),se)}),replaceRange:function(o,s,u,c){fs(this,o,s=oe(this,s),u=u?oe(this,u):s,c)},getRange:function(o,s,u){var c=rr(this,oe(this,o),oe(this,s));return u===!1?c:u===""?c.join(""):c.join(u||this.lineSeparator())},getLine:function(o){var s=this.getLineHandle(o);return s&&s.text},getLineHandle:function(o){if(mo(this,o))return ge(this,o)},getLineNumber:function(o){return Ye(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=ge(this,o)),Tr(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return oe(this,o)},getCursor:function(o){var s=this.sel.primary();return o==null||o=="head"?s.head:o=="anchor"?s.anchor:o=="end"||o=="to"||o===!1?s.to():s.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Kn(function(o,s,u){Jl(this,oe(this,typeof o=="number"?Ut(o,s||0):o),null,u)}),setSelection:Kn(function(o,s,u){Jl(this,oe(this,o),oe(this,s||o),u)}),extendSelection:Kn(function(o,s,u){Qa(this,oe(this,o),s&&oe(this,s),u)}),extendSelections:Kn(function(o,s){lu(this,Tn(this,o),s)}),extendSelectionsBy:Kn(function(o,s){lu(this,Tn(this,Pe(this.sel.ranges,o)),s)}),setSelections:Kn(function(o,s,u){if(o.length){for(var c=[],p=0;p<o.length;p++)c[p]=new tn(oe(this,o[p].anchor),oe(this,o[p].head||o[p].anchor));s==null&&(s=Math.min(o.length-1,this.sel.primIndex)),tr(this,Qr(this.cm,c,s),u)}}),addSelection:Kn(function(o,s,u){var c=this.sel.ranges.slice(0);c.push(new tn(oe(this,o),oe(this,s||o))),tr(this,Qr(this.cm,c,c.length-1),u)}),getSelection:function(o){for(var s,u=this.sel.ranges,c=0;c<u.length;c++){var p=rr(this,u[c].from(),u[c].to());s=s?s.concat(p):p}return o===!1?s:s.join(o||this.lineSeparator())},getSelections:function(o){for(var s=[],u=this.sel.ranges,c=0;c<u.length;c++){var p=rr(this,u[c].from(),u[c].to());o!==!1&&(p=p.join(o||this.lineSeparator())),s[c]=p}return s},replaceSelection:function(o,s,u){for(var c=[],p=0;p<this.sel.ranges.length;p++)c[p]=o;this.replaceSelections(c,s,u||"+input")},replaceSelections:Kn(function(o,s,u){for(var c=[],p=this.sel,h=0;h<p.ranges.length;h++){var m=p.ranges[h];c[h]={from:m.from(),to:m.to(),text:this.splitLines(o[h]),origin:u}}for(var y=s&&s!="end"&&Qo(this,c,s),x=c.length-1;x>=0;x--)Ei(this,c[x]);y?Zl(this,y):this.cm&&is(this.cm)}),undo:Kn(function(){rl(this,"undo")}),redo:Kn(function(){rl(this,"redo")}),undoSelection:Kn(function(){rl(this,"undo",!0)}),redoSelection:Kn(function(){rl(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,s=0,u=0,c=0;c<o.done.length;c++)o.done[c].ranges||++s;for(var p=0;p<o.undone.length;p++)o.undone[p].ranges||++u;return{undo:s,redo:u}},clearHistory:function(){var o=this;this.history=new Ja(this.history),Do(this,function(s){return s.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:cs(this.history.done),undone:cs(this.history.undone)}},setHistory:function(o){var s=this.history=new Ja(this.history);s.done=cs(o.done.slice(0),null,!0),s.undone=cs(o.undone.slice(0),null,!0)},setGutterMarker:Kn(function(o,s,u){return ia(this,o,"gutter",function(c){var p=c.gutterMarkers||(c.gutterMarkers={});return p[s]=u,!u&&b(p)&&(c.gutterMarkers=null),!0})}),clearGutter:Kn(function(o){var s=this;this.iter(function(u){u.gutterMarkers&&u.gutterMarkers[o]&&ia(s,u,"gutter",function(){return u.gutterMarkers[o]=null,b(u.gutterMarkers)&&(u.gutterMarkers=null),!0})})}),lineInfo:function(o){var s;if(typeof o=="number"){if(!mo(this,o)||(s=o,!(o=ge(this,o))))return null}else if((s=Ye(o))==null)return null;return{line:s,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:Kn(function(o,s,u){return ia(this,o,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(c[p]){if(H(u).test(c[p]))return!1;c[p]+=" "+u}else c[p]=u;return!0})}),removeLineClass:Kn(function(o,s,u){return ia(this,o,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",h=c[p];if(!h)return!1;if(u==null)c[p]=null;else{var m=h.match(H(u));if(!m)return!1;var y=m.index+m[0].length;c[p]=h.slice(0,m.index)+(m.index&&y!=h.length?" ":"")+h.slice(y)||null}return!0})}),addLineWidget:Kn(function(o,s,u){return nc(this,o,s,u)}),removeLineWidget:function(o){o.clear()},markText:function(o,s,u){return hs(this,oe(this,o),oe(this,s),u,u&&u.type||"range")},setBookmark:function(o,s){var u={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return hs(this,o=oe(this,o),o,u,"bookmark")},findMarksAt:function(o){var s=[],u=ge(this,(o=oe(this,o)).line).markedSpans;if(u)for(var c=0;c<u.length;++c){var p=u[c];(p.from==null||p.from<=o.ch)&&(p.to==null||p.to>=o.ch)&&s.push(p.marker.parent||p.marker)}return s},findMarks:function(o,s,u){o=oe(this,o),s=oe(this,s);var c=[],p=o.line;return this.iter(o.line,s.line+1,function(h){var m=h.markedSpans;if(m)for(var y=0;y<m.length;y++){var x=m[y];x.to!=null&&p==o.line&&o.ch>=x.to||x.from==null&&p!=o.line||x.from!=null&&p==s.line&&x.from>=s.ch||u&&!u(x.marker)||c.push(x.marker.parent||x.marker)}++p}),c},getAllMarks:function(){var o=[];return this.iter(function(s){var u=s.markedSpans;if(u)for(var c=0;c<u.length;++c)u[c].from!=null&&o.push(u[c].marker)}),o},posFromIndex:function(o){var s,u=this.first,c=this.lineSeparator().length;return this.iter(function(p){var h=p.text.length+c;if(h>o)return s=o,!0;o-=h,++u}),oe(this,Ut(u,s))},indexFromPos:function(o){var s=(o=oe(this,o)).ch;if(o.line<this.first||o.ch<0)return 0;var u=this.lineSeparator().length;return this.iter(this.first,o.line,function(c){s+=c.text.length+u}),s},copy:function(o){var s=new Fn(Uo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,o&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(o){o||(o={});var s=this.first,u=this.first+this.size;o.from!=null&&o.from>s&&(s=o.from),o.to!=null&&o.to<u&&(u=o.to);var c=new Fn(Uo(this,s,u),o.mode||this.modeOption,s,this.lineSep,this.direction);return o.sharedHist&&(c.history=this.history),(this.linked||(this.linked=[])).push({doc:c,sharedHist:o.sharedHist}),c.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],vu(c,gu(this)),c},unlinkDoc:function(o){if(o instanceof bn&&(o=o.doc),this.linked){for(var s=0;s<this.linked.length;++s)if(this.linked[s].doc==o){this.linked.splice(s,1),o.unlinkDoc(this),mu(gu(this));break}}if(o.history==this.history){var u=[o.id];Do(o,function(c){return u.push(c.id)},!0),o.history=new Ja(null),o.history.done=cs(this.history.done,u),o.history.undone=cs(this.history.undone,u)}},iterLinkedDocs:function(o){Do(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):_o(o)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Kn(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(s){return s.order=null}),this.cm&&Dp(this.cm))})}),Fn.prototype.eachLine=Fn.prototype.iter;var yu=0;function Up(o){var s=this;if(wu(s),!bt(s,o)&&!A(s.display,o)){We(o),B&&(yu=+new Date);var u=bi(s,o,!0),c=o.dataTransfer.files;if(u&&!s.isReadOnly())if(c&&c.length&&window.FileReader&&window.File)for(var p=c.length,h=Array(p),m=0,y=function(){++m==p&&Gn(s,function(){var ht={from:u=oe(s.doc,u),to:u,text:s.doc.splitLines(h.filter(function(xt){return xt!=null}).join(s.doc.lineSeparator())),origin:"paste"};Ei(s.doc,ht),Zl(s.doc,Zo(oe(s.doc,u),oe(s.doc,lo(ht))))})()},x=function(ht,xt){if(s.options.allowDropFileTypes&&be(s.options.allowDropFileTypes,ht.type)==-1)y();else{var Rt=new FileReader;Rt.onerror=function(){return y()},Rt.onload=function(){var Bt=Rt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Bt)||(h[xt]=Bt),y()},Rt.readAsText(ht)}},O=0;O<c.length;O++)x(c[O],O);else{if(s.state.draggingText&&s.doc.sel.contains(u)>-1)return s.state.draggingText(o),void setTimeout(function(){return s.display.input.focus()},20);try{var U=o.dataTransfer.getData("Text");if(U){var W;if(s.state.draggingText&&!s.state.draggingText.copy&&(W=s.listSelections()),el(s.doc,Zo(u,u)),W)for(var dt=0;dt<W.length;++dt)fs(s.doc,"",W[dt].anchor,W[dt].head,"drag");s.replaceSelection(U,"around","paste"),s.display.input.focus()}}catch{}}}}function bu(o,s){if(B&&(!o.state.draggingText||+new Date-yu<100))Re(s);else if(!bt(o,s)&&!A(o.display,s)&&(s.dataTransfer.setData("Text",o.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!it)){var u=vt("img",null,null,"position: fixed; left: 0; top: 0;");u.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ot&&(u.width=u.height=1,o.display.wrapper.appendChild(u),u._top=u.offsetTop),s.dataTransfer.setDragImage(u,0,0),ot&&u.parentNode.removeChild(u)}}function Bp(o,s){var u=bi(o,s);if(u){var c=document.createDocumentFragment();$s(o,u,c),o.display.dragCursor||(o.display.dragCursor=vt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),nt(o.display.dragCursor,c)}}function wu(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function oc(o){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),u=[],c=0;c<s.length;c++){var p=s[c].CodeMirror;p&&u.push(p)}u.length&&u[0].operation(function(){for(var h=0;h<u.length;h++)o(u[h])})}}var _u=!1;function Sn(){_u||(xu(),_u=!0)}function xu(){var o;qt(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,oc(ic)},100))}),qt(window,"blur",function(){return oc(_i)})}function ic(o){var s=o.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,o.setSize()}for(var to={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ai=0;Ai<10;Ai++)to[Ai+48]=to[Ai+96]=String(Ai);for(var ol=65;ol<=90;ol++)to[ol]=String.fromCharCode(ol);for(var gs=1;gs<=12;gs++)to[gs+111]=to[gs+63235]="F"+gs;var co={};function Cu(o){var s,u,c,p,h=o.split(/-(?!$)/);o=h[h.length-1];for(var m=0;m<h.length-1;m++){var y=h[m];if(/^(cmd|meta|m)$/i.test(y))p=!0;else if(/^a(lt)?$/i.test(y))s=!0;else if(/^(c|ctrl|control)$/i.test(y))u=!0;else{if(!/^s(hift)?$/i.test(y))throw new Error("Unrecognized modifier name: "+y);c=!0}}return s&&(o="Alt-"+o),u&&(o="Ctrl-"+o),p&&(o="Cmd-"+o),c&&(o="Shift-"+o),o}function il(o){var s={};for(var u in o)if(o.hasOwnProperty(u)){var c=o[u];if(/^(name|fallthrough|(de|at)tach)$/.test(u))continue;if(c=="..."){delete o[u];continue}for(var p=Pe(u.split(" "),Cu),h=0;h<p.length;h++){var m=void 0,y=void 0;h==p.length-1?(y=p.join(" "),m=c):(y=p.slice(0,h+1).join(" "),m="...");var x=s[y];if(x){if(x!=m)throw new Error("Inconsistent bindings for "+y)}else s[y]=m}delete o[u]}for(var O in s)o[O]=s[O];return o}function ji(o,s,u,c){var p=(s=No(s)).call?s.call(o,c):s[o];if(p===!1)return"nothing";if(p==="...")return"multi";if(p!=null&&u(p))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return ji(o,s.fallthrough,u,c);for(var h=0;h<s.fallthrough.length;h++){var m=ji(o,s.fallthrough[h],u,c);if(m)return m}}}function sc(o){var s=typeof o=="string"?o:to[o.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function Su(o,s,u){var c=o;return s.altKey&&c!="Alt"&&(o="Alt-"+o),(at?s.metaKey:s.ctrlKey)&&c!="Ctrl"&&(o="Ctrl-"+o),(at?s.ctrlKey:s.metaKey)&&c!="Mod"&&(o="Cmd-"+o),!u&&s.shiftKey&&c!="Shift"&&(o="Shift-"+o),o}function Ou(o,s){if(ot&&o.keyCode==34&&o.char)return!1;var u=to[o.keyCode];return u!=null&&!o.altGraphKey&&(o.keyCode==3&&o.code&&(u=o.code),Su(u,o,s))}function No(o){return typeof o=="string"?co[o]:o}function ei(o,s){for(var u=o.doc.sel.ranges,c=[],p=0;p<u.length;p++){for(var h=s(u[p]);c.length&&T(h.from,Jt(c).to)<=0;){var m=c.pop();if(T(m.from,h.from)<0){h.from=m.from;break}}c.push(h)}fr(o,function(){for(var y=c.length-1;y>=0;y--)fs(o.doc,"",c[y].from,c[y].to,"+delete");is(o)})}function ca(o,s,u){var c=gt(o.text,s+u,u);return c<0||c>o.text.length?null:c}function sl(o,s,u){var c=ca(o,s.ch,u);return c==null?null:new Ut(s.line,c,u<0?"after":"before")}function al(o,s,u,c,p){if(o){s.doc.direction=="rtl"&&(p=-p);var h=ze(u,s.doc.direction);if(h){var m,y=p<0?Jt(h):h[0],x=p<0==(y.level==1)?"after":"before";if(y.level>0||s.doc.direction=="rtl"){var O=Eo(s,u);m=p<0?u.text.length-1:0;var U=Hr(s,O,m).top;m=Tt(function(W){return Hr(s,O,W).top==U},p<0==(y.level==1)?y.from:y.to-1,m),x=="before"&&(m=ca(u,m,1))}else m=p<0?y.to:y.from;return new Ut(c,m,x)}}return new Ut(c,p<0?u.text.length:0,p<0?"before":"after")}function Tu(o,s,u,c){var p=ze(s,o.doc.direction);if(!p)return sl(s,u,c);u.ch>=s.text.length?(u.ch=s.text.length,u.sticky="before"):u.ch<=0&&(u.ch=0,u.sticky="after");var h=Te(p,u.ch,u.sticky),m=p[h];if(o.doc.direction=="ltr"&&m.level%2==0&&(c>0?m.to>u.ch:m.from<u.ch))return sl(s,u,c);var y,x=function(ne,ie){return ca(s,ne instanceof Ut?ne.ch:ne,ie)},O=function(ne){return o.options.lineWrapping?(y=y||Eo(o,s),Bc(o,s,y,ne)):{begin:0,end:s.text.length}},U=O(u.sticky=="before"?x(u,-1):u.ch);if(o.doc.direction=="rtl"||m.level==1){var W=m.level==1==c<0,dt=x(u,W?1:-1);if(dt!=null&&(W?dt<=m.to&&dt<=U.end:dt>=m.from&&dt>=U.begin)){var ht=W?"before":"after";return new Ut(u.line,dt,ht)}}var xt=function(ne,ie,Xt){for(var ye=function(an,gr){return gr?new Ut(u.line,x(an,1),"before"):new Ut(u.line,an,"after")};ne>=0&&ne<p.length;ne+=ie){var ve=p[ne],Ce=ie>0==(ve.level!=1),sn=Ce?Xt.begin:x(Xt.end,-1);if(ve.from<=sn&&sn<ve.to||(sn=Ce?ve.from:x(ve.to,-1),Xt.begin<=sn&&sn<Xt.end))return ye(sn,Ce)}},Rt=xt(h+c,c,U);if(Rt)return Rt;var Bt=c>0?U.end:x(U.begin,-1);return Bt==null||c>0&&Bt==s.text.length||!(Rt=xt(c>0?0:p.length-1,c,O(Bt)))?null:Rt}co.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},co.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},co.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},co.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},co.default=ut?co.macDefault:co.pcDefault;var vs={selectAll:uu,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),se)},killLine:function(o){return ei(o,function(s){if(s.empty()){var u=ge(o.doc,s.head.line).text.length;return s.head.ch==u&&s.head.line<o.lastLine()?{from:s.head,to:Ut(s.head.line+1,0)}:{from:s.head,to:Ut(s.head.line,u)}}return{from:s.from(),to:s.to()}})},deleteLine:function(o){return ei(o,function(s){return{from:Ut(s.from().line,0),to:oe(o.doc,Ut(s.to().line+1,0))}})},delLineLeft:function(o){return ei(o,function(s){return{from:Ut(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(o){return ei(o,function(s){var u=o.charCoords(s.head,"div").top+5;return{from:o.coordsChar({left:0,top:u},"div"),to:s.from()}})},delWrappedLineRight:function(o){return ei(o,function(s){var u=o.charCoords(s.head,"div").top+5,c=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div");return{from:s.from(),to:c}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection(Ut(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection(Ut(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(s){return ua(o,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(s){return Pu(o,s.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(s){return ku(o,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div")},Yt)},goLineLeft:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:0,top:u},"div")},Yt)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5,c=o.coordsChar({left:0,top:u},"div");return c.ch<o.getLine(c.line).search(/\S/)?Pu(o,s.head):c},Yt)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var s=[],u=o.listSelections(),c=o.options.tabSize,p=0;p<u.length;p++){var h=u[p].from(),m=xe(o.getLine(h.line),h.ch,c);s.push(ue(c-m%c))}o.replaceSelections(s)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return fr(o,function(){for(var s=o.listSelections(),u=[],c=0;c<s.length;c++)if(s[c].empty()){var p=s[c].head,h=ge(o.doc,p.line).text;if(h){if(p.ch==h.length&&(p=new Ut(p.line,p.ch-1)),p.ch>0)p=new Ut(p.line,p.ch+1),o.replaceRange(h.charAt(p.ch-1)+h.charAt(p.ch-2),Ut(p.line,p.ch-2),p,"+transpose");else if(p.line>o.doc.first){var m=ge(o.doc,p.line-1).text;m&&(p=new Ut(p.line,1),o.replaceRange(h.charAt(0)+o.doc.lineSeparator()+m.charAt(m.length-1),Ut(p.line-1,m.length-1),p,"+transpose"))}}u.push(new tn(p,p))}o.setSelections(u)})},newlineAndIndent:function(o){return fr(o,function(){for(var s=o.listSelections(),u=s.length-1;u>=0;u--)o.replaceRange(o.doc.lineSeparator(),s[u].anchor,s[u].head,"+input");s=o.listSelections();for(var c=0;c<s.length;c++)o.indentLine(s[c].from().line,null,!0);is(o)})},openLine:function(o){return o.replaceSelection(`
`,"start")},toggleOverwrite:function(o){return o.toggleOverwrite()}};function ua(o,s){var u=ge(o.doc,s),c=Tr(u);return c!=u&&(s=Ye(c)),al(!0,o,c,s,1)}function ku(o,s){var u=ge(o.doc,s),c=Wi(u);return c!=u&&(s=Ye(c)),al(!0,o,u,s,-1)}function Pu(o,s){var u=ua(o,s.line),c=ge(o.doc,u.line),p=ze(c,o.doc.direction);if(!p||p[0].level==0){var h=Math.max(u.ch,c.text.search(/\S/)),m=s.line==u.line&&s.ch<=h&&s.ch;return Ut(u.line,m?0:h,u.sticky)}return u}function ll(o,s,u){if(typeof s=="string"&&!(s=vs[s]))return!1;o.display.input.ensurePolled();var c=o.display.shift,p=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),u&&(o.display.shift=!1),p=s(o)!=ce}finally{o.display.shift=c,o.state.suppressEdits=!1}return p}function Wp(o,s,u){for(var c=0;c<o.state.keyMaps.length;c++){var p=ji(s,o.state.keyMaps[c],u,o);if(p)return p}return o.options.extraKeys&&ji(s,o.options.extraKeys,u,o)||ji(s,o.options.keyMap,u,o)}var $p=new Oe;function pa(o,s,u,c){var p=o.state.keySeq;if(p){if(sc(s))return"handled";if(/\'$/.test(s)?o.state.keySeq=null:$p.set(50,function(){o.state.keySeq==p&&(o.state.keySeq=null,o.display.input.reset())}),ms(o,p+" "+s,u,c))return!0}return ms(o,s,u,c)}function ms(o,s,u,c){var p=Wp(o,s,c);return p=="multi"&&(o.state.keySeq=s),p=="handled"&&yn(o,"keyHandled",o,s,u),p!="handled"&&p!="multi"||(We(u),os(o)),!!p}function ac(o,s){var u=Ou(s,!0);return!!u&&(s.shiftKey&&!o.state.keySeq?pa(o,"Shift-"+u,s,function(c){return ll(o,c,!0)})||pa(o,u,s,function(c){if(typeof c=="string"?/^go[A-Z]/.test(c):c.motion)return ll(o,c)}):pa(o,u,s,function(c){return ll(o,c)}))}function Io(o,s,u){return pa(o,"'"+u+"'",s,function(c){return ll(o,c,!0)})}var lc=null;function cc(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField()||(s.curOp.focus=Et(),bt(s,o)))){B&&k<11&&o.keyCode==27&&(o.returnValue=!1);var u=o.keyCode;s.display.shift=u==16||o.shiftKey;var c=ac(s,o);ot&&(lc=c?u:null,c||u!=88||xo||!(ut?o.metaKey:o.ctrlKey)||s.replaceSelection("",null,"cut")),rt&&!ut&&!c&&u==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),u!=18||/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)||Eu(s)}}function Eu(o){var s=o.display.lineDiv;function u(c){c.keyCode!=18&&c.altKey||(et(s,"CodeMirror-crosshair"),Q(document,"keyup",u),Q(document,"mouseover",u))}Kt(s,"CodeMirror-crosshair"),qt(document,"keyup",u),qt(document,"mouseover",u)}function Au(o){o.keyCode==16&&(this.doc.sel.shift=!1),bt(this,o)}function ju(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField()||A(s.display,o)||bt(s,o)||o.ctrlKey&&!o.altKey||ut&&o.metaKey)){var u=o.keyCode,c=o.charCode;if(ot&&u==lc)return lc=null,void We(o);if(!ot||o.which&&!(o.which<10)||!ac(s,o)){var p=String.fromCharCode(c==null?u:c);p!="\b"&&(Io(s,o,p)||s.display.input.onKeyPress(o))}}}var fa,da,qp=400,cl=function(o,s,u){this.time=o,this.pos=s,this.button=u};function ul(o,s){var u=+new Date;return da&&da.compare(u,o,s)?(fa=da=null,"triple"):fa&&fa.compare(u,o,s)?(da=new cl(u,o,s),fa=null,"double"):(fa=new cl(u,o,s),da=null,"single")}function Mu(o){var s=this,u=s.display;if(!(bt(s,o)||u.activeTouch&&u.input.supportsTouch())){if(u.input.ensurePolled(),u.shift=o.shiftKey,A(u,o))P||(u.scroller.draggable=!1,setTimeout(function(){return u.scroller.draggable=!0},100));else if(!pc(s,o)){var c=bi(s,o),p=Yn(o),h=c?ul(c,p):"single";window.focus(),p==1&&s.state.selectingText&&s.state.selectingText(o),c&&Lu(s,p,c,h,o)||(p==1?c?Gp(s,c,h,o):Ar(o)==u.scroller&&We(o):p==2?(c&&Qa(s.doc,c),setTimeout(function(){return u.input.focus()},20)):p==3&&(D?s.display.input.onContextMenu(o):Vl(s)))}}}function Lu(o,s,u,c,p){var h="Click";return c=="double"?h="Double"+h:c=="triple"&&(h="Triple"+h),pa(o,Su(h=(s==1?"Left":s==2?"Middle":"Right")+h,p),p,function(m){if(typeof m=="string"&&(m=vs[m]),!m)return!1;var y=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),y=m(o,u)!=ce}finally{o.state.suppressEdits=!1}return y})}function Du(o,s,u){var c=o.getOption("configureMouse"),p=c?c(o,s,u):{};if(p.unit==null){var h=Nt?u.shiftKey&&u.metaKey:u.altKey;p.unit=h?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(p.extend==null||o.doc.extend)&&(p.extend=o.doc.extend||u.shiftKey),p.addNew==null&&(p.addNew=ut?u.metaKey:u.ctrlKey),p.moveOnDrag==null&&(p.moveOnDrag=!(ut?u.altKey:u.ctrlKey)),p}function Gp(o,s,u,c){B?setTimeout(_e(qc,o),0):o.curOp.focus=Et();var p,h=Du(o,u,c),m=o.doc.sel;o.options.dragDrop&&_n&&!o.isReadOnly()&&u=="single"&&(p=m.contains(s))>-1&&(T((p=m.ranges[p]).from(),s)<0||s.xRel>0)&&(T(p.to(),s)>0||s.xRel<0)?Kp(o,c,s,h):ha(o,c,s,h)}function Kp(o,s,u,c){var p=o.display,h=!1,m=Gn(o,function(O){P&&(p.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:Vl(o)),Q(p.wrapper.ownerDocument,"mouseup",m),Q(p.wrapper.ownerDocument,"mousemove",y),Q(p.scroller,"dragstart",x),Q(p.scroller,"drop",m),h||(We(O),c.addNew||Qa(o.doc,u,null,null,c.extend),P&&!it||B&&k==9?setTimeout(function(){p.wrapper.ownerDocument.body.focus({preventScroll:!0}),p.input.focus()},20):p.input.focus())}),y=function(O){h=h||Math.abs(s.clientX-O.clientX)+Math.abs(s.clientY-O.clientY)>=10},x=function(){return h=!0};P&&(p.scroller.draggable=!0),o.state.draggingText=m,m.copy=!c.moveOnDrag,qt(p.wrapper.ownerDocument,"mouseup",m),qt(p.wrapper.ownerDocument,"mousemove",y),qt(p.scroller,"dragstart",x),qt(p.scroller,"drop",m),o.state.delayingBlurEvent=!0,setTimeout(function(){return p.input.focus()},20),p.scroller.dragDrop&&p.scroller.dragDrop()}function Nu(o,s,u){if(u=="char")return new tn(s,s);if(u=="word")return o.findWordAt(s);if(u=="line")return new tn(Ut(s.line,0),oe(o.doc,Ut(s.line+1,0)));var c=u(o,s);return new tn(c.from,c.to)}function ha(o,s,u,c){B&&Vl(o);var p=o.display,h=o.doc;We(s);var m,y,x=h.sel,O=x.ranges;if(c.addNew&&!c.extend?(y=h.sel.contains(u),m=y>-1?O[y]:new tn(u,u)):(m=h.sel.primary(),y=h.sel.primIndex),c.unit=="rectangle")c.addNew||(m=new tn(u,u)),u=bi(o,s,!0,!0),y=-1;else{var U=Nu(o,u,c.unit);m=c.extend?ki(m,U.anchor,U.head,c.extend):U}c.addNew?y==-1?(y=O.length,tr(h,Qr(o,O.concat([m]),y),{scroll:!1,origin:"*mouse"})):O.length>1&&O[y].empty()&&c.unit=="char"&&!c.extend?(tr(h,Qr(o,O.slice(0,y).concat(O.slice(y+1)),0),{scroll:!1,origin:"*mouse"}),x=h.sel):tl(h,y,m,st):(y=0,tr(h,new Ur([m],0),st),x=h.sel);var W=u;function dt(Xt){if(T(W,Xt)!=0)if(W=Xt,c.unit=="rectangle"){for(var ye=[],ve=o.options.tabSize,Ce=xe(ge(h,u.line).text,u.ch,ve),sn=xe(ge(h,Xt.line).text,Xt.ch,ve),an=Math.min(Ce,sn),gr=Math.max(Ce,sn),hn=Math.min(u.line,Xt.line),sr=Math.min(o.lastLine(),Math.max(u.line,Xt.line));hn<=sr;hn++){var vr=ge(h,hn).text,xn=Wt(vr,an,ve);an==gr?ye.push(new tn(Ut(hn,xn),Ut(hn,xn))):vr.length>xn&&ye.push(new tn(Ut(hn,xn),Ut(hn,Wt(vr,gr,ve))))}ye.length||ye.push(new tn(u,u)),tr(h,Qr(o,x.ranges.slice(0,y).concat(ye),y),{origin:"*mouse",scroll:!1}),o.scrollIntoView(Xt)}else{var En,dr=m,Vn=Nu(o,Xt,c.unit),An=dr.anchor;T(Vn.anchor,An)>0?(En=Vn.head,An=fe(dr.from(),Vn.anchor)):(En=Vn.anchor,An=Qt(dr.to(),Vn.head));var jn=x.ranges.slice(0);jn[y]=pl(o,new tn(oe(h,An),En)),tr(h,Qr(o,jn,y),st)}}var ht=p.wrapper.getBoundingClientRect(),xt=0;function Rt(Xt){var ye=++xt,ve=bi(o,Xt,!0,c.unit=="rectangle");if(ve)if(T(ve,W)!=0){o.curOp.focus=Et(),dt(ve);var Ce=Ks(p,h);(ve.line>=Ce.to||ve.line<Ce.from)&&setTimeout(Gn(o,function(){xt==ye&&Rt(Xt)}),150)}else{var sn=Xt.clientY<ht.top?-20:Xt.clientY>ht.bottom?20:0;sn&&setTimeout(Gn(o,function(){xt==ye&&(p.scroller.scrollTop+=sn,Rt(Xt))}),50)}}function Bt(Xt){o.state.selectingText=!1,xt=1/0,Xt&&(We(Xt),p.input.focus()),Q(p.wrapper.ownerDocument,"mousemove",ne),Q(p.wrapper.ownerDocument,"mouseup",ie),h.history.lastSelOrigin=null}var ne=Gn(o,function(Xt){Xt.buttons!==0&&Yn(Xt)?Rt(Xt):Bt(Xt)}),ie=Gn(o,Bt);o.state.selectingText=ie,qt(p.wrapper.ownerDocument,"mousemove",ne),qt(p.wrapper.ownerDocument,"mouseup",ie)}function pl(o,s){var u=s.anchor,c=s.head,p=ge(o.doc,u.line);if(T(u,c)==0&&u.sticky==c.sticky)return s;var h=ze(p);if(!h)return s;var m=Te(h,u.ch,u.sticky),y=h[m];if(y.from!=u.ch&&y.to!=u.ch)return s;var x,O=m+(y.from==u.ch==(y.level!=1)?0:1);if(O==0||O==h.length)return s;if(c.line!=u.line)x=(c.line-u.line)*(o.doc.direction=="ltr"?1:-1)>0;else{var U=Te(h,c.ch,c.sticky),W=U-m||(c.ch-u.ch)*(y.level==1?-1:1);x=U==O-1||U==O?W<0:W>0}var dt=h[O+(x?-1:0)],ht=x==(dt.level==1),xt=ht?dt.from:dt.to,Rt=ht?"after":"before";return u.ch==xt&&u.sticky==Rt?s:new tn(new Ut(u.line,xt,Rt),c)}function uc(o,s,u,c){var p,h;if(s.touches)p=s.touches[0].clientX,h=s.touches[0].clientY;else try{p=s.clientX,h=s.clientY}catch{return!1}if(p>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;c&&We(s);var m=o.display,y=m.lineDiv.getBoundingClientRect();if(h>y.bottom||!he(o,u))return fn(s);h-=y.top-m.viewOffset;for(var x=0;x<o.display.gutterSpecs.length;++x){var O=m.gutters.childNodes[x];if(O&&O.getBoundingClientRect().right>=p)return pt(o,u,o,In(o.doc,h),o.display.gutterSpecs[x].className,s),fn(s)}}function pc(o,s){return uc(o,s,"gutterClick",!0)}function Iu(o,s){A(o.display,s)||Yp(o,s)||bt(o,s,"contextmenu")||D||o.display.input.onContextMenu(s)}function Yp(o,s){return!!he(o,"gutterContextMenu")&&uc(o,s,"gutterContextMenu",!1)}function fc(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ts(o)}cl.prototype.compare=function(o,s,u){return this.time+qp>o&&T(s,this.pos)==0&&u==this.button};var ys={toString:function(){return"CodeMirror.Init"}},Fu={},bs={};function Vu(o){var s=o.optionHandlers;function u(c,p,h,m){o.defaults[c]=p,h&&(s[c]=m?function(y,x,O){O!=ys&&h(y,x,O)}:h)}o.defineOption=u,o.Init=ys,u("value","",function(c,p){return c.setValue(p)},!0),u("mode",null,function(c,p){c.doc.modeOption=p,Ya(c)},!0),u("indentUnit",2,Ya,!0),u("indentWithTabs",!1),u("smartIndent",!0),u("tabSize",4,function(c){Lo(c),ts(c),Qn(c)},!0),u("lineSeparator",null,function(c,p){if(c.doc.lineSep=p,p){var h=[],m=c.doc.first;c.doc.iter(function(x){for(var O=0;;){var U=x.text.indexOf(p,O);if(U==-1)break;O=U+p.length,h.push(Ut(m,U))}m++});for(var y=h.length-1;y>=0;y--)fs(c.doc,p,h[y],Ut(h[y].line,h[y].ch+p.length))}}),u("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(c,p,h){c.state.specialChars=new RegExp(p.source+(p.test("	")?"":"|	"),"g"),h!=ys&&c.refresh()}),u("specialCharPlaceholder",ja,function(c){return c.refresh()},!0),u("electricChars",!0),u("inputStyle",ft?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),u("spellcheck",!1,function(c,p){return c.getInputField().spellcheck=p},!0),u("autocorrect",!1,function(c,p){return c.getInputField().autocorrect=p},!0),u("autocapitalize",!1,function(c,p){return c.getInputField().autocapitalize=p},!0),u("rtlMoveVisually",!Zt),u("wholeLineUpdateBefore",!0),u("theme","default",function(c){fc(c),ls(c)},!0),u("keyMap","default",function(c,p,h){var m=No(p),y=h!=ys&&No(h);y&&y.detach&&y.detach(c,m),m.attach&&m.attach(c,y||null)}),u("extraKeys",null),u("configureMouse",null),u("lineWrapping",!1,Jp,!0),u("gutters",[],function(c,p){c.display.gutterSpecs=qa(p,c.options.lineNumbers),ls(c)},!0),u("fixedGutter",!0,function(c,p){c.display.gutters.style.left=p?Il(c.display)+"px":"0",c.refresh()},!0),u("coverGutterNextToScrollbar",!1,function(c){return ss(c)},!0),u("scrollbarStyle","native",function(c){Yc(c),ss(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),u("lineNumbers",!1,function(c,p){c.display.gutterSpecs=qa(c.options.gutters,p),ls(c)},!0),u("firstLineNumber",1,ls,!0),u("lineNumberFormatter",function(c){return c},ls,!0),u("showCursorWhenSelecting",!1,Bs,!0),u("resetSelectionOnContextMenu",!0),u("lineWiseCopyCut",!0),u("pasteLinesPerSelection",!0),u("selectionsMayTouch",!1),u("readOnly",!1,function(c,p){p=="nocursor"&&(_i(c),c.display.input.blur()),c.display.input.readOnlyChanged(p)}),u("screenReaderLabel",null,function(c,p){p=p===""?null:p,c.display.input.screenReaderLabelChanged(p)}),u("disableInput",!1,function(c,p){p||c.display.input.reset()},!0),u("dragDrop",!0,Xp),u("allowDropFileTypes",null),u("cursorBlinkRate",530),u("cursorScrollMargin",0),u("cursorHeight",1,Bs,!0),u("singleCursorHeightPerLine",!0,Bs,!0),u("workTime",100),u("workDelay",100),u("flattenSpans",!0,Lo,!0),u("addModeClass",!1,Lo,!0),u("pollInterval",100),u("undoDepth",200,function(c,p){return c.doc.history.undoDepth=p}),u("historyEventDelay",1250),u("viewportMargin",10,function(c){return c.refresh()},!0),u("maxHighlightLength",1e4,Lo,!0),u("moveInputWithCursor",!0,function(c,p){p||c.display.input.resetPosition()}),u("tabindex",null,function(c,p){return c.display.input.getField().tabIndex=p||""}),u("autofocus",null),u("direction","ltr",function(c,p){return c.doc.setDirection(p)},!0),u("phrases",null)}function Xp(o,s,u){if(!s!=!(u&&u!=ys)){var c=o.display.dragFunctions,p=s?qt:Q;p(o.display.scroller,"dragstart",c.start),p(o.display.scroller,"dragenter",c.enter),p(o.display.scroller,"dragover",c.over),p(o.display.scroller,"dragleave",c.leave),p(o.display.scroller,"drop",c.drop)}}function Jp(o){o.options.lineWrapping?(Kt(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(et(o.display.wrapper,"CodeMirror-wrap"),Fs(o)),Fl(o),Qn(o),ts(o),setTimeout(function(){return ss(o)},100)}function bn(o,s){var u=this;if(!(this instanceof bn))return new bn(o,s);this.options=s=s?Ne(s):{},Ne(Fu,s,!1);var c=s.value;typeof c=="string"?c=new Fn(c,s.mode,null,s.lineSeparator,s.direction):s.mode&&(c.modeOption=s.mode),this.doc=c;var p=new bn.inputStyles[s.inputStyle](this),h=this.display=new tu(o,c,p,s);for(var m in h.wrapper.CodeMirror=this,fc(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Yc(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Oe,keySeq:null,specialChars:null},s.autofocus&&!ft&&h.input.focus(),B&&k<11&&setTimeout(function(){return u.display.input.reset(!0)},20),Zp(this),Sn(),Si(this),this.curOp.forceUpdate=!0,su(this,c),s.autofocus&&!ft||this.hasFocus()?setTimeout(function(){u.hasFocus()&&!u.state.focused&&Rl(u)},20):_i(this),bs)bs.hasOwnProperty(m)&&bs[m](this,s[m],ys);Zc(this),s.finishInit&&s.finishInit(this);for(var y=0;y<dc.length;++y)dc[y](this);Oi(this),P&&s.lineWrapping&&getComputedStyle(h.lineDiv).textRendering=="optimizelegibility"&&(h.lineDiv.style.textRendering="auto")}function Zp(o){var s=o.display;qt(s.scroller,"mousedown",Gn(o,Mu)),qt(s.scroller,"dblclick",B&&k<11?Gn(o,function(x){if(!bt(o,x)){var O=bi(o,x);if(O&&!pc(o,x)&&!A(o.display,x)){We(x);var U=o.findWordAt(O);Qa(o.doc,U.anchor,U.head)}}}):function(x){return bt(o,x)||We(x)}),qt(s.scroller,"contextmenu",function(x){return Iu(o,x)}),qt(s.input.getField(),"contextmenu",function(x){s.scroller.contains(x.target)||Iu(o,x)});var u,c={end:0};function p(){s.activeTouch&&(u=setTimeout(function(){return s.activeTouch=null},1e3),(c=s.activeTouch).end=+new Date)}function h(x){if(x.touches.length!=1)return!1;var O=x.touches[0];return O.radiusX<=1&&O.radiusY<=1}function m(x,O){if(O.left==null)return!0;var U=O.left-x.left,W=O.top-x.top;return U*U+W*W>400}qt(s.scroller,"touchstart",function(x){if(!bt(o,x)&&!h(x)&&!pc(o,x)){s.input.ensurePolled(),clearTimeout(u);var O=+new Date;s.activeTouch={start:O,moved:!1,prev:O-c.end<=300?c:null},x.touches.length==1&&(s.activeTouch.left=x.touches[0].pageX,s.activeTouch.top=x.touches[0].pageY)}}),qt(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),qt(s.scroller,"touchend",function(x){var O=s.activeTouch;if(O&&!A(s,x)&&O.left!=null&&!O.moved&&new Date-O.start<300){var U,W=o.coordsChar(s.activeTouch,"page");U=!O.prev||m(O,O.prev)?new tn(W,W):!O.prev.prev||m(O,O.prev.prev)?o.findWordAt(W):new tn(Ut(W.line,0),oe(o.doc,Ut(W.line+1,0))),o.setSelection(U.anchor,U.head),o.focus(),We(x)}p()}),qt(s.scroller,"touchcancel",p),qt(s.scroller,"scroll",function(){s.scroller.clientHeight&&(Xs(o,s.scroller.scrollTop),jo(o,s.scroller.scrollLeft,!0),pt(o,"scroll",o))}),qt(s.scroller,"mousewheel",function(x){return nu(o,x)}),qt(s.scroller,"DOMMouseScroll",function(x){return nu(o,x)}),qt(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(x){bt(o,x)||Re(x)},over:function(x){bt(o,x)||(Bp(o,x),Re(x))},start:function(x){return bu(o,x)},drop:Gn(o,Up),leave:function(x){bt(o,x)||wu(o)}};var y=s.input.getField();qt(y,"keyup",function(x){return Au.call(o,x)}),qt(y,"keydown",Gn(o,cc)),qt(y,"keypress",Gn(o,ju)),qt(y,"focus",function(x){return Rl(o,x)}),qt(y,"blur",function(x){return _i(o,x)})}bn.defaults=Fu,bn.optionHandlers=bs;var dc=[];function ga(o,s,u,c){var p,h=o.doc;u==null&&(u="add"),u=="smart"&&(h.mode.indent?p=yo(o,s).state:u="prev");var m=o.options.tabSize,y=ge(h,s),x=xe(y.text,null,m);y.stateAfter&&(y.stateAfter=null);var O,U=y.text.match(/^\s*/)[0];if(c||/\S/.test(y.text)){if(u=="smart"&&((O=h.mode.indent(p,y.text.slice(U.length),y.text))==ce||O>150)){if(!c)return;u="prev"}}else O=0,u="not";u=="prev"?O=s>h.first?xe(ge(h,s-1).text,null,m):0:u=="add"?O=x+o.options.indentUnit:u=="subtract"?O=x-o.options.indentUnit:typeof u=="number"&&(O=x+u),O=Math.max(0,O);var W="",dt=0;if(o.options.indentWithTabs)for(var ht=Math.floor(O/m);ht;--ht)dt+=m,W+="	";if(dt<O&&(W+=ue(O-dt)),W!=U)return fs(h,W,Ut(s,0),Ut(s,U.length),"+input"),y.stateAfter=null,!0;for(var xt=0;xt<h.sel.ranges.length;xt++){var Rt=h.sel.ranges[xt];if(Rt.head.line==s&&Rt.head.ch<U.length){var Bt=Ut(s,U.length);tl(h,xt,new tn(Bt,Bt));break}}}bn.defineInitHook=function(o){return dc.push(o)};var uo=null;function fl(o){uo=o}function hc(o,s,u,c,p){var h=o.doc;o.display.shift=!1,c||(c=h.sel);var m=+new Date-200,y=p=="paste"||o.state.pasteIncoming>m,x=_o(s),O=null;if(y&&c.ranges.length>1)if(uo&&uo.text.join(`
`)==s){if(c.ranges.length%uo.text.length==0){O=[];for(var U=0;U<uo.text.length;U++)O.push(h.splitLines(uo.text[U]))}}else x.length==c.ranges.length&&o.options.pasteLinesPerSelection&&(O=Pe(x,function(ne){return[ne]}));for(var W=o.curOp.updateInput,dt=c.ranges.length-1;dt>=0;dt--){var ht=c.ranges[dt],xt=ht.from(),Rt=ht.to();ht.empty()&&(u&&u>0?xt=Ut(xt.line,xt.ch-u):o.state.overwrite&&!y?Rt=Ut(Rt.line,Math.min(ge(h,Rt.line).text.length,Rt.ch+Jt(x).length)):y&&uo&&uo.lineWise&&uo.text.join(`
`)==x.join(`
`)&&(xt=Rt=Ut(xt.line,0)));var Bt={from:xt,to:Rt,text:O?O[dt%O.length]:x,origin:p||(y?"paste":o.state.cutIncoming>m?"cut":"+input")};Ei(o.doc,Bt),yn(o,"inputRead",o,Bt)}s&&!y&&gc(o,s),is(o),o.curOp.updateInput<2&&(o.curOp.updateInput=W),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function Ru(o,s){var u=o.clipboardData&&o.clipboardData.getData("Text");if(u)return o.preventDefault(),s.isReadOnly()||s.options.disableInput||!s.hasFocus()||fr(s,function(){return hc(s,u,0,null,"paste")}),!0}function gc(o,s){if(o.options.electricChars&&o.options.smartIndent)for(var u=o.doc.sel,c=u.ranges.length-1;c>=0;c--){var p=u.ranges[c];if(!(p.head.ch>100||c&&u.ranges[c-1].head.line==p.head.line)){var h=o.getModeAt(p.head),m=!1;if(h.electricChars){for(var y=0;y<h.electricChars.length;y++)if(s.indexOf(h.electricChars.charAt(y))>-1){m=ga(o,p.head.line,"smart");break}}else h.electricInput&&h.electricInput.test(ge(o.doc,p.head.line).text.slice(0,p.head.ch))&&(m=ga(o,p.head.line,"smart"));m&&yn(o,"electricInput",o,p.head.line)}}}function Hu(o){for(var s=[],u=[],c=0;c<o.doc.sel.ranges.length;c++){var p=o.doc.sel.ranges[c].head.line,h={anchor:Ut(p,0),head:Ut(p+1,0)};u.push(h),s.push(o.getRange(h.anchor,h.head))}return{text:s,ranges:u}}function zu(o,s,u,c){o.setAttribute("autocorrect",u?"":"off"),o.setAttribute("autocapitalize",c?"":"off"),o.setAttribute("spellcheck",!!s)}function Uu(){var o=vt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=vt("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return P?o.style.width="1000px":o.setAttribute("wrap","off"),Dt&&(o.style.border="1px solid black"),zu(o),s}function vc(o){var s=o.optionHandlers,u=o.helpers={};o.prototype={constructor:o,focus:function(){window.focus(),this.display.input.focus()},setOption:function(c,p){var h=this.options,m=h[c];h[c]==p&&c!="mode"||(h[c]=p,s.hasOwnProperty(c)&&Gn(this,s[c])(this,p,m),pt(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,p){this.state.keyMaps[p?"push":"unshift"](No(c))},removeKeyMap:function(c){for(var p=this.state.keyMaps,h=0;h<p.length;++h)if(p[h]==c||p[h].name==c)return p.splice(h,1),!0},addOverlay:ir(function(c,p){var h=c.token?c:o.getMode(this.options,c);if(h.startState)throw new Error("Overlays may not be stateful.");Xe(this.state.overlays,{mode:h,modeSpec:c,opaque:p&&p.opaque,priority:p&&p.priority||0},function(m){return m.priority}),this.state.modeGen++,Qn(this)}),removeOverlay:ir(function(c){for(var p=this.state.overlays,h=0;h<p.length;++h){var m=p[h].modeSpec;if(m==c||typeof c=="string"&&m.name==c)return p.splice(h,1),this.state.modeGen++,void Qn(this)}}),indentLine:ir(function(c,p,h){typeof p!="string"&&typeof p!="number"&&(p=p==null?this.options.smartIndent?"smart":"prev":p?"add":"subtract"),mo(this.doc,c)&&ga(this,c,p,h)}),indentSelection:ir(function(c){for(var p=this.doc.sel.ranges,h=-1,m=0;m<p.length;m++){var y=p[m];if(y.empty())y.head.line>h&&(ga(this,y.head.line,c,!0),h=y.head.line,m==this.doc.sel.primIndex&&is(this));else{var x=y.from(),O=y.to(),U=Math.max(h,x.line);h=Math.min(this.lastLine(),O.line-(O.ch?0:1))+1;for(var W=U;W<h;++W)ga(this,W,c);var dt=this.doc.sel.ranges;x.ch==0&&p.length==dt.length&&dt[m].from().ch>0&&tl(this.doc,m,new tn(x,dt[m].to()),se)}}}),getTokenAt:function(c,p){return Wo(this,c,p)},getLineTokens:function(c,p){return Wo(this,Ut(c),p,!0)},getTokenTypeAt:function(c){c=oe(this.doc,c);var p,h=Cr(this,ge(this.doc,c.line)),m=0,y=(h.length-1)/2,x=c.ch;if(x==0)p=h[2];else for(;;){var O=m+y>>1;if((O?h[2*O-1]:0)>=x)y=O;else{if(!(h[2*O+1]<x)){p=h[2*O+2];break}m=O+1}}var U=p?p.indexOf("overlay "):-1;return U<0?p:U==0?null:p.slice(0,U-1)},getModeAt:function(c){var p=this.doc.mode;return p.innerMode?o.innerMode(p,this.getTokenAt(c).state).mode:p},getHelper:function(c,p){return this.getHelpers(c,p)[0]},getHelpers:function(c,p){var h=[];if(!u.hasOwnProperty(p))return h;var m=u[p],y=this.getModeAt(c);if(typeof y[p]=="string")m[y[p]]&&h.push(m[y[p]]);else if(y[p])for(var x=0;x<y[p].length;x++){var O=m[y[p][x]];O&&h.push(O)}else y.helperType&&m[y.helperType]?h.push(m[y.helperType]):m[y.name]&&h.push(m[y.name]);for(var U=0;U<m._global.length;U++){var W=m._global[U];W.pred(y,this)&&be(h,W.val)==-1&&h.push(W.val)}return h},getStateAfter:function(c,p){var h=this.doc;return yo(this,(c=$e(h,c==null?h.first+h.size-1:c))+1,p).state},cursorCoords:function(c,p){var h=this.doc.sel.primary();return Pr(this,c==null?h.head:typeof c=="object"?oe(this.doc,c):c?h.from():h.to(),p||"page")},charCoords:function(c,p){return Ra(this,oe(this.doc,c),p||"page")},coordsChar:function(c,p){return Ll(this,(c=jl(this,c,p||"page")).left,c.top)},lineAtHeight:function(c,p){return c=jl(this,{top:c,left:0},p||"page").top,In(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,p,h){var m,y=!1;if(typeof c=="number"){var x=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>x&&(c=x,y=!0),m=ge(this.doc,c)}else m=c;return Va(this,m,{top:0,left:0},p||"page",h||y).top+(y?this.doc.height-Fr(m):0)},defaultTextHeight:function(){return so(this.display)},defaultCharWidth:function(){return Xo(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,p,h,m,y){var x=this.display,O=(c=Pr(this,oe(this.doc,c))).bottom,U=c.left;if(p.style.position="absolute",p.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(p),x.sizer.appendChild(p),m=="over")O=c.top;else if(m=="above"||m=="near"){var W=Math.max(x.wrapper.clientHeight,this.doc.height),dt=Math.max(x.sizer.clientWidth,x.lineSpace.clientWidth);(m=="above"||c.bottom+p.offsetHeight>W)&&c.top>p.offsetHeight?O=c.top-p.offsetHeight:c.bottom+p.offsetHeight<=W&&(O=c.bottom),U+p.offsetWidth>dt&&(U=dt-p.offsetWidth)}p.style.top=O+"px",p.style.left=p.style.right="",y=="right"?(U=x.sizer.clientWidth-p.offsetWidth,p.style.right="0px"):(y=="left"?U=0:y=="middle"&&(U=(x.sizer.clientWidth-p.offsetWidth)/2),p.style.left=U+"px"),h&&xp(this,{left:U,top:O,right:U+p.offsetWidth,bottom:O+p.offsetHeight})},triggerOnKeyDown:ir(cc),triggerOnKeyPress:ir(ju),triggerOnKeyUp:Au,triggerOnMouseDown:ir(Mu),execCommand:function(c){if(vs.hasOwnProperty(c))return vs[c].call(null,this)},triggerElectric:ir(function(c){gc(this,c)}),findPosH:function(c,p,h,m){var y=1;p<0&&(y=-1,p=-p);for(var x=oe(this.doc,c),O=0;O<p&&!(x=dl(this.doc,x,y,h,m)).hitSide;++O);return x},moveH:ir(function(c,p){var h=this;this.extendSelectionsBy(function(m){return h.display.shift||h.doc.extend||m.empty()?dl(h.doc,m.head,c,p,h.options.rtlMoveVisually):c<0?m.from():m.to()},Yt)}),deleteH:ir(function(c,p){var h=this.doc.sel,m=this.doc;h.somethingSelected()?m.replaceSelection("",null,"+delete"):ei(this,function(y){var x=dl(m,y.head,c,p,!1);return c<0?{from:x,to:y.head}:{from:y.head,to:x}})}),findPosV:function(c,p,h,m){var y=1,x=m;p<0&&(y=-1,p=-p);for(var O=oe(this.doc,c),U=0;U<p;++U){var W=Pr(this,O,"div");if(x==null?x=W.left:W.left=x,(O=hl(this,W,y,h)).hitSide)break}return O},moveV:ir(function(c,p){var h=this,m=this.doc,y=[],x=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(U){if(x)return c<0?U.from():U.to();var W=Pr(h,U.head,"div");U.goalColumn!=null&&(W.left=U.goalColumn),y.push(W.left);var dt=hl(h,W,c,p);return p=="page"&&U==m.sel.primary()&&Ba(h,Ra(h,dt,"div").top-W.top),dt},Yt),y.length)for(var O=0;O<m.sel.ranges.length;O++)m.sel.ranges[O].goalColumn=y[O]}),findWordAt:function(c){var p=ge(this.doc,c.line).text,h=c.ch,m=c.ch;if(p){var y=this.getHelper(c,"wordChars");c.sticky!="before"&&m!=p.length||!h?++m:--h;for(var x=p.charAt(h),O=Ht(x,y)?function(U){return Ht(U,y)}:/\s/.test(x)?function(U){return/\s/.test(U)}:function(U){return!/\s/.test(U)&&!Ht(U)};h>0&&O(p.charAt(h-1));)--h;for(;m<p.length&&O(p.charAt(m));)++m}return new tn(Ut(c.line,h),Ut(c.line,m))},toggleOverwrite:function(c){c!=null&&c==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Kt(this.display.cursorDiv,"CodeMirror-overwrite"):et(this.display.cursorDiv,"CodeMirror-overwrite"),pt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Et()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ir(function(c,p){Ys(this,c,p)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-lt(this)-this.display.barHeight,width:c.scrollWidth-lt(this)-this.display.barWidth,clientHeight:$t(this),clientWidth:It(this)}},scrollIntoView:ir(function(c,p){c==null?(c={from:this.doc.sel.primary().head,to:null},p==null&&(p=this.options.cursorScrollMargin)):typeof c=="number"?c={from:Ut(c,0),to:null}:c.from==null&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=p||0,c.from.line!=null?Cp(this,c):Gc(this,c.from,c.to,c.margin)}),setSize:ir(function(c,p){var h=this,m=function(x){return typeof x=="number"||/^\d+$/.test(String(x))?x+"px":x};c!=null&&(this.display.wrapper.style.width=m(c)),p!=null&&(this.display.wrapper.style.height=m(p)),this.options.lineWrapping&&Ia(this);var y=this.display.viewFrom;this.doc.iter(y,this.display.viewTo,function(x){if(x.widgets){for(var O=0;O<x.widgets.length;O++)if(x.widgets[O].noHScroll){ao(h,y,"widget");break}}++y}),this.curOp.forceUpdate=!0,pt(this,"refresh",this)}),operation:function(c){return fr(this,c)},startOperation:function(){return Si(this)},endOperation:function(){return Oi(this)},refresh:ir(function(){var c=this.display.cachedTextHeight;Qn(this),this.curOp.forceUpdate=!0,ts(this),Ys(this,this.doc.scrollLeft,this.doc.scrollTop),Wl(this.display),(c==null||Math.abs(c-so(this.display))>.5||this.options.lineWrapping)&&Fl(this),pt(this,"refresh",this)}),swapDoc:ir(function(c){var p=this.doc;return p.cm=null,this.state.selectingText&&this.state.selectingText(),su(this,c),ts(this),this.display.input.reset(),Ys(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,yn(this,"swapDoc",this,p),p}),phrase:function(c){var p=this.options.phrases;return p&&Object.prototype.hasOwnProperty.call(p,c)?p[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Fe(o),o.registerHelper=function(c,p,h){u.hasOwnProperty(c)||(u[c]=o[c]={_global:[]}),u[c][p]=h},o.registerGlobalHelper=function(c,p,h,m){o.registerHelper(c,p,m),u[c]._global.push({pred:h,val:m})}}function dl(o,s,u,c,p){var h=s,m=u,y=ge(o,s.line),x=p&&o.direction=="rtl"?-u:u;function O(){var ie=s.line+x;return!(ie<o.first||ie>=o.first+o.size)&&(s=new Ut(ie,s.ch,s.sticky),y=ge(o,ie))}function U(ie){var Xt;if(c=="codepoint"){var ye=y.text.charCodeAt(s.ch+(u>0?0:-1));if(isNaN(ye))Xt=null;else{var ve=u>0?ye>=55296&&ye<56320:ye>=56320&&ye<57343;Xt=new Ut(s.line,Math.max(0,Math.min(y.text.length,s.ch+u*(ve?2:1))),-u)}}else Xt=p?Tu(o.cm,y,s,u):sl(y,s,u);if(Xt==null){if(ie||!O())return!1;s=al(p,o.cm,y,s.line,x)}else s=Xt;return!0}if(c=="char"||c=="codepoint")U();else if(c=="column")U(!0);else if(c=="word"||c=="group")for(var W=null,dt=c=="group",ht=o.cm&&o.cm.getHelper(s,"wordChars"),xt=!0;!(u<0)||U(!xt);xt=!1){var Rt=y.text.charAt(s.ch)||`
`,Bt=Ht(Rt,ht)?"w":dt&&Rt==`
`?"n":!dt||/\s/.test(Rt)?null:"p";if(!dt||xt||Bt||(Bt="s"),W&&W!=Bt){u<0&&(u=1,U(),s.sticky="after");break}if(Bt&&(W=Bt),u>0&&!U(!xt))break}var ne=na(o,s,h,m,!0);return $(h,ne)&&(ne.hitSide=!0),ne}function hl(o,s,u,c){var p,h,m=o.doc,y=s.left;if(c=="page"){var x=Math.min(o.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),O=Math.max(x-.5*so(o.display),3);p=(u>0?s.bottom:s.top)+u*O}else c=="line"&&(p=u>0?s.bottom+3:s.top-3);for(;(h=Ll(o,y,p)).outside;){if(u<0?p<=0:p>=m.height){h.hitSide=!0;break}p+=5*u}return h}var rn=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Oe,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function mc(o,s){var u=Qi(o,s.line);if(!u||u.hidden)return null;var c=ge(o.doc,s.line),p=He(u,c,s.line),h=ze(c,o.doc.direction),m="left";h&&(m=Te(h,s.ch)%2?"right":"left");var y=Us(p.map,s.ch,m);return y.offset=y.collapse=="right"?y.end:y.start,y}function Qp(o){for(var s=o;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function ws(o,s){return s&&(o.bad=!0),o}function yc(o,s,u,c,p){var h="",m=!1,y=o.doc.lineSeparator(),x=!1;function O(ht){return function(xt){return xt.id==ht}}function U(){m&&(h+=y,x&&(h+=y),m=x=!1)}function W(ht){ht&&(U(),h+=ht)}function dt(ht){if(ht.nodeType==1){var xt=ht.getAttribute("cm-text");if(xt)return void W(xt);var Rt,Bt=ht.getAttribute("cm-marker");if(Bt){var ne=o.findMarks(Ut(c,0),Ut(p+1,0),O(+Bt));return void(ne.length&&(Rt=ne[0].find(0))&&W(rr(o.doc,Rt.from,Rt.to).join(y)))}if(ht.getAttribute("contenteditable")=="false")return;var ie=/^(pre|div|p|li|table|br)$/i.test(ht.nodeName);if(!/^br$/i.test(ht.nodeName)&&ht.textContent.length==0)return;ie&&U();for(var Xt=0;Xt<ht.childNodes.length;Xt++)dt(ht.childNodes[Xt]);/^(pre|p)$/i.test(ht.nodeName)&&(x=!0),ie&&(m=!0)}else ht.nodeType==3&&W(ht.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;dt(s),s!=u;)s=s.nextSibling,x=!1;return h}function gl(o,s,u){var c;if(s==o.display.lineDiv){if(!(c=o.display.lineDiv.childNodes[u]))return ws(o.clipPos(Ut(o.display.viewTo-1)),!0);s=null,u=0}else for(c=s;;c=c.parentNode){if(!c||c==o.display.lineDiv)return null;if(c.parentNode&&c.parentNode==o.display.lineDiv)break}for(var p=0;p<o.display.view.length;p++){var h=o.display.view[p];if(h.node==c)return tf(h,s,u)}}function tf(o,s,u){var c=o.text.firstChild,p=!1;if(!s||!Mt(c,s))return ws(Ut(Ye(o.line),0),!0);if(s==c&&(p=!0,s=c.childNodes[u],u=0,!s)){var h=o.rest?Jt(o.rest):o.line;return ws(Ut(Ye(h),h.text.length),p)}var m=s.nodeType==3?s:null,y=s;for(m||s.childNodes.length!=1||s.firstChild.nodeType!=3||(m=s.firstChild,u&&(u=m.nodeValue.length));y.parentNode!=c;)y=y.parentNode;var x=o.measure,O=x.maps;function U(Bt,ne,ie){for(var Xt=-1;Xt<(O?O.length:0);Xt++)for(var ye=Xt<0?x.map:O[Xt],ve=0;ve<ye.length;ve+=3){var Ce=ye[ve+2];if(Ce==Bt||Ce==ne){var sn=Ye(Xt<0?o.line:o.rest[Xt]),an=ye[ve]+ie;return(ie<0||Ce!=Bt)&&(an=ye[ve+(ie?1:0)]),Ut(sn,an)}}}var W=U(m,y,u);if(W)return ws(W,p);for(var dt=y.nextSibling,ht=m?m.nodeValue.length-u:0;dt;dt=dt.nextSibling){if(W=U(dt,dt.firstChild,0))return ws(Ut(W.line,W.ch-ht),p);ht+=dt.textContent.length}for(var xt=y.previousSibling,Rt=u;xt;xt=xt.previousSibling){if(W=U(xt,xt.firstChild,-1))return ws(Ut(W.line,W.ch+Rt),p);Rt+=xt.textContent.length}}rn.prototype.init=function(o){var s=this,u=this,c=u.cm,p=u.div=o.lineDiv;function h(y){for(var x=y.target;x;x=x.parentNode){if(x==p)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(x.className))break}return!1}function m(y){if(h(y)&&!bt(c,y)){if(c.somethingSelected())fl({lineWise:!1,text:c.getSelections()}),y.type=="cut"&&c.replaceSelection("",null,"cut");else{if(!c.options.lineWiseCopyCut)return;var x=Hu(c);fl({lineWise:!0,text:x.text}),y.type=="cut"&&c.operation(function(){c.setSelections(x.ranges,0,se),c.replaceSelection("",null,"cut")})}if(y.clipboardData){y.clipboardData.clearData();var O=uo.text.join(`
`);if(y.clipboardData.setData("Text",O),y.clipboardData.getData("Text")==O)return void y.preventDefault()}var U=Uu(),W=U.firstChild;c.display.lineSpace.insertBefore(U,c.display.lineSpace.firstChild),W.value=uo.text.join(`
`);var dt=Et();Se(W),setTimeout(function(){c.display.lineSpace.removeChild(U),dt.focus(),dt==p&&u.showPrimarySelection()},50)}}p.contentEditable=!0,zu(p,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize),qt(p,"paste",function(y){!h(y)||bt(c,y)||Ru(y,c)||k<=11&&setTimeout(Gn(c,function(){return s.updateFromDOM()}),20)}),qt(p,"compositionstart",function(y){s.composing={data:y.data,done:!1}}),qt(p,"compositionupdate",function(y){s.composing||(s.composing={data:y.data,done:!1})}),qt(p,"compositionend",function(y){s.composing&&(y.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),qt(p,"touchstart",function(){return u.forceCompositionEnd()}),qt(p,"input",function(){s.composing||s.readFromDOMSoon()}),qt(p,"copy",m),qt(p,"cut",m)},rn.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},rn.prototype.prepareSelection=function(){var o=Ws(this.cm,!1);return o.focus=Et()==this.div,o},rn.prototype.showSelection=function(o,s){o&&this.cm.display.view.length&&((o.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(o))},rn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},rn.prototype.showPrimarySelection=function(){var o=this.getSelection(),s=this.cm,u=s.doc.sel.primary(),c=u.from(),p=u.to();if(s.display.viewTo==s.display.viewFrom||c.line>=s.display.viewTo||p.line<s.display.viewFrom)o.removeAllRanges();else{var h=gl(s,o.anchorNode,o.anchorOffset),m=gl(s,o.focusNode,o.focusOffset);if(!h||h.bad||!m||m.bad||T(fe(h,m),c)!=0||T(Qt(h,m),p)!=0){var y=s.display.view,x=c.line>=s.display.viewFrom&&mc(s,c)||{node:y[0].measure.map[2],offset:0},O=p.line<s.display.viewTo&&mc(s,p);if(!O){var U=y[y.length-1].measure,W=U.maps?U.maps[U.maps.length-1]:U.map;O={node:W[W.length-1],offset:W[W.length-2]-W[W.length-3]}}if(x&&O){var dt,ht=o.rangeCount&&o.getRangeAt(0);try{dt=Y(x.node,x.offset,O.offset,O.node)}catch{}dt&&(!rt&&s.state.focused?(o.collapse(x.node,x.offset),dt.collapsed||(o.removeAllRanges(),o.addRange(dt))):(o.removeAllRanges(),o.addRange(dt)),ht&&o.anchorNode==null?o.addRange(ht):rt&&this.startGracePeriod()),this.rememberSelection()}else o.removeAllRanges()}}},rn.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},rn.prototype.showMultipleSelections=function(o){nt(this.cm.display.cursorDiv,o.cursors),nt(this.cm.display.selectionDiv,o.selection)},rn.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},rn.prototype.selectionInEditor=function(){var o=this.getSelection();if(!o.rangeCount)return!1;var s=o.getRangeAt(0).commonAncestorContainer;return Mt(this.div,s)},rn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&Et()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},rn.prototype.blur=function(){this.div.blur()},rn.prototype.getField=function(){return this.div},rn.prototype.supportsTouch=function(){return!0},rn.prototype.receivedFocus=function(){var o=this,s=this;function u(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,u))}this.selectionInEditor()?setTimeout(function(){return o.pollSelection()},20):fr(this.cm,function(){return s.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,u)},rn.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},rn.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var o=this.getSelection(),s=this.cm;if(te&&j&&this.cm.display.gutterSpecs.length&&Qp(o.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var u=gl(s,o.anchorNode,o.anchorOffset),c=gl(s,o.focusNode,o.focusOffset);u&&c&&fr(s,function(){tr(s.doc,Zo(u,c),se),(u.bad||c.bad)&&(s.curOp.selectionChanged=!0)})}}},rn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o,s,u,c=this.cm,p=c.display,h=c.doc.sel.primary(),m=h.from(),y=h.to();if(m.ch==0&&m.line>c.firstLine()&&(m=Ut(m.line-1,ge(c.doc,m.line-1).length)),y.ch==ge(c.doc,y.line).text.length&&y.line<c.lastLine()&&(y=Ut(y.line+1,0)),m.line<p.viewFrom||y.line>p.viewTo-1)return!1;m.line==p.viewFrom||(o=wi(c,m.line))==0?(s=Ye(p.view[0].line),u=p.view[0].node):(s=Ye(p.view[o].line),u=p.view[o-1].node.nextSibling);var x,O,U=wi(c,y.line);if(U==p.view.length-1?(x=p.viewTo-1,O=p.lineDiv.lastChild):(x=Ye(p.view[U+1].line)-1,O=p.view[U+1].node.previousSibling),!u)return!1;for(var W=c.doc.splitLines(yc(c,u,O,s,x)),dt=rr(c.doc,Ut(s,0),Ut(x,ge(c.doc,x).text.length));W.length>1&&dt.length>1;)if(Jt(W)==Jt(dt))W.pop(),dt.pop(),x--;else{if(W[0]!=dt[0])break;W.shift(),dt.shift(),s++}for(var ht=0,xt=0,Rt=W[0],Bt=dt[0],ne=Math.min(Rt.length,Bt.length);ht<ne&&Rt.charCodeAt(ht)==Bt.charCodeAt(ht);)++ht;for(var ie=Jt(W),Xt=Jt(dt),ye=Math.min(ie.length-(W.length==1?ht:0),Xt.length-(dt.length==1?ht:0));xt<ye&&ie.charCodeAt(ie.length-xt-1)==Xt.charCodeAt(Xt.length-xt-1);)++xt;if(W.length==1&&dt.length==1&&s==m.line)for(;ht&&ht>m.ch&&ie.charCodeAt(ie.length-xt-1)==Xt.charCodeAt(Xt.length-xt-1);)ht--,xt++;W[W.length-1]=ie.slice(0,ie.length-xt).replace(/^\u200b+/,""),W[0]=W[0].slice(ht).replace(/\u200b+$/,"");var ve=Ut(s,ht),Ce=Ut(x,dt.length?Jt(dt).length-xt:0);return W.length>1||W[0]||T(ve,Ce)?(fs(c.doc,W,ve,Ce,"+input"),!0):void 0},rn.prototype.ensurePolled=function(){this.forceCompositionEnd()},rn.prototype.reset=function(){this.forceCompositionEnd()},rn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},rn.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing){if(!o.composing.done)return;o.composing=null}o.updateFromDOM()},80))},rn.prototype.updateFromDOM=function(){var o=this;!this.cm.isReadOnly()&&this.pollContent()||fr(this.cm,function(){return Qn(o.cm)})},rn.prototype.setUneditable=function(o){o.contentEditable="false"},rn.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||Gn(this.cm,hc)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},rn.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},rn.prototype.onContextMenu=function(){},rn.prototype.resetPosition=function(){},rn.prototype.needsContentAttribute=!0;var Pn=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new Oe,this.hasSelection=!1,this.composing=null};function ef(o,s){if((s=s?Ne(s):{}).value=o.value,!s.tabindex&&o.tabIndex&&(s.tabindex=o.tabIndex),!s.placeholder&&o.placeholder&&(s.placeholder=o.placeholder),s.autofocus==null){var u=Et();s.autofocus=u==o||o.getAttribute("autofocus")!=null&&u==document.body}function c(){o.value=y.getValue()}var p;if(o.form&&(qt(o.form,"submit",c),!s.leaveSubmitMethodAlone)){var h=o.form;p=h.submit;try{var m=h.submit=function(){c(),h.submit=p,h.submit(),h.submit=m}}catch{}}s.finishInit=function(x){x.save=c,x.getTextArea=function(){return o},x.toTextArea=function(){x.toTextArea=isNaN,c(),o.parentNode.removeChild(x.getWrapperElement()),o.style.display="",o.form&&(Q(o.form,"submit",c),s.leaveSubmitMethodAlone||typeof o.form.submit!="function"||(o.form.submit=p))}},o.style.display="none";var y=bn(function(x){return o.parentNode.insertBefore(x,o.nextSibling)},s);return y}function nf(o){o.off=Q,o.on=qt,o.wheelEventPixels=Lp,o.Doc=Fn,o.splitLines=_o,o.countColumn=xe,o.findColumn=Wt,o.isWordChar=yt,o.Pass=ce,o.signal=pt,o.Line=Vr,o.changeEnd=lo,o.scrollbarModel=Kc,o.Pos=Ut,o.cmpPos=T,o.modes=ur,o.mimeModes=ln,o.resolveMode=Co,o.getMode=Jr,o.modeExtensions=Wn,o.extendMode=Nn,o.copyState=$n,o.startState=vo,o.innerMode=zo,o.commands=vs,o.keyMap=co,o.keyName=Ou,o.isModifierKey=sc,o.lookupKey=ji,o.normalizeKeyMap=il,o.StringStream=Ge,o.SharedTextMarker=la,o.TextMarker=ti,o.LineWidget=aa,o.e_preventDefault=We,o.e_stopPropagation=Ln,o.e_stop=Re,o.addClass=Kt,o.contains=Mt,o.rmClass=et,o.keyNames=to}Pn.prototype.init=function(o){var s=this,u=this,c=this.cm;this.createField(o);var p=this.textarea;function h(m){if(!bt(c,m)){if(c.somethingSelected())fl({lineWise:!1,text:c.getSelections()});else{if(!c.options.lineWiseCopyCut)return;var y=Hu(c);fl({lineWise:!0,text:y.text}),m.type=="cut"?c.setSelections(y.ranges,null,se):(u.prevInput="",p.value=y.text.join(`
`),Se(p))}m.type=="cut"&&(c.state.cutIncoming=+new Date)}}o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),Dt&&(p.style.width="0px"),qt(p,"input",function(){B&&k>=9&&s.hasSelection&&(s.hasSelection=null),u.poll()}),qt(p,"paste",function(m){bt(c,m)||Ru(m,c)||(c.state.pasteIncoming=+new Date,u.fastPoll())}),qt(p,"cut",h),qt(p,"copy",h),qt(o.scroller,"paste",function(m){if(!A(o,m)&&!bt(c,m)){if(!p.dispatchEvent)return c.state.pasteIncoming=+new Date,void u.focus();var y=new Event("paste");y.clipboardData=m.clipboardData,p.dispatchEvent(y)}}),qt(o.lineSpace,"selectstart",function(m){A(o,m)||We(m)}),qt(p,"compositionstart",function(){var m=c.getCursor("from");u.composing&&u.composing.range.clear(),u.composing={start:m,range:c.markText(m,c.getCursor("to"),{className:"CodeMirror-composing"})}}),qt(p,"compositionend",function(){u.composing&&(u.poll(),u.composing.range.clear(),u.composing=null)})},Pn.prototype.createField=function(o){this.wrapper=Uu(),this.textarea=this.wrapper.firstChild},Pn.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},Pn.prototype.prepareSelection=function(){var o=this.cm,s=o.display,u=o.doc,c=Ws(o);if(o.options.moveInputWithCursor){var p=Pr(o,u.sel.primary().head,"div"),h=s.wrapper.getBoundingClientRect(),m=s.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,p.top+m.top-h.top)),c.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,p.left+m.left-h.left))}return c},Pn.prototype.showSelection=function(o){var s=this.cm.display;nt(s.cursorDiv,o.cursors),nt(s.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},Pn.prototype.reset=function(o){if(!this.contextMenuPending&&!this.composing){var s=this.cm;if(s.somethingSelected()){this.prevInput="";var u=s.getSelection();this.textarea.value=u,s.state.focused&&Se(this.textarea),B&&k>=9&&(this.hasSelection=u)}else o||(this.prevInput=this.textarea.value="",B&&k>=9&&(this.hasSelection=null))}},Pn.prototype.getField=function(){return this.textarea},Pn.prototype.supportsTouch=function(){return!1},Pn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ft||Et()!=this.textarea))try{this.textarea.focus()}catch{}},Pn.prototype.blur=function(){this.textarea.blur()},Pn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Pn.prototype.receivedFocus=function(){this.slowPoll()},Pn.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},Pn.prototype.fastPoll=function(){var o=!1,s=this;function u(){s.poll()||o?(s.pollingFast=!1,s.slowPoll()):(o=!0,s.polling.set(60,u))}s.pollingFast=!0,s.polling.set(20,u)},Pn.prototype.poll=function(){var o=this,s=this.cm,u=this.textarea,c=this.prevInput;if(this.contextMenuPending||!s.state.focused||Vo(u)&&!c&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var p=u.value;if(p==c&&!s.somethingSelected())return!1;if(B&&k>=9&&this.hasSelection===p||ut&&/[\uf700-\uf7ff]/.test(p))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var h=p.charCodeAt(0);if(h!=8203||c||(c="\u200B"),h==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,y=Math.min(c.length,p.length);m<y&&c.charCodeAt(m)==p.charCodeAt(m);)++m;return fr(s,function(){hc(s,p.slice(m),c.length-m,null,o.composing?"*compose":null),p.length>1e3||p.indexOf(`
`)>-1?u.value=o.prevInput="":o.prevInput=p,o.composing&&(o.composing.range.clear(),o.composing.range=s.markText(o.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Pn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Pn.prototype.onKeyPress=function(){B&&k>=9&&(this.hasSelection=null),this.fastPoll()},Pn.prototype.onContextMenu=function(o){var s=this,u=s.cm,c=u.display,p=s.textarea;s.contextMenuPending&&s.contextMenuPending();var h=bi(u,o),m=c.scroller.scrollTop;if(h&&!ot){u.options.resetSelectionOnContextMenu&&u.doc.sel.contains(h)==-1&&Gn(u,tr)(u.doc,Zo(h),se);var y,x=p.style.cssText,O=s.wrapper.style.cssText,U=s.wrapper.offsetParent.getBoundingClientRect();if(s.wrapper.style.cssText="position: static",p.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(o.clientY-U.top-5)+"px; left: "+(o.clientX-U.left-5)+`px;
      z-index: 1000; background: `+(B?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,P&&(y=window.scrollY),c.input.focus(),P&&window.scrollTo(null,y),c.input.reset(),u.somethingSelected()||(p.value=s.prevInput=" "),s.contextMenuPending=ht,c.selForContextMenu=u.doc.sel,clearTimeout(c.detectingSelectAll),B&&k>=9&&dt(),D){Re(o);var W=function(){Q(window,"mouseup",W),setTimeout(ht,20)};qt(window,"mouseup",W)}else setTimeout(ht,50)}function dt(){if(p.selectionStart!=null){var xt=u.somethingSelected(),Rt="\u200B"+(xt?p.value:"");p.value="\u21DA",p.value=Rt,s.prevInput=xt?"":"\u200B",p.selectionStart=1,p.selectionEnd=Rt.length,c.selForContextMenu=u.doc.sel}}function ht(){if(s.contextMenuPending==ht&&(s.contextMenuPending=!1,s.wrapper.style.cssText=O,p.style.cssText=x,B&&k<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=m),p.selectionStart!=null)){(!B||B&&k<9)&&dt();var xt=0,Rt=function(){c.selForContextMenu==u.doc.sel&&p.selectionStart==0&&p.selectionEnd>0&&s.prevInput=="\u200B"?Gn(u,uu)(u):xt++<10?c.detectingSelectAll=setTimeout(Rt,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout(Rt,200)}}},Pn.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},Pn.prototype.setUneditable=function(){},Pn.prototype.needsContentAttribute=!1,Vu(bn),vc(bn);var Bu="iter insert remove copy getEditor constructor".split(" ");for(var _s in Fn.prototype)Fn.prototype.hasOwnProperty(_s)&&be(Bu,_s)<0&&(bn.prototype[_s]=function(o){return function(){return o.apply(this.doc,arguments)}}(Fn.prototype[_s]));return Fe(Fn),bn.inputStyles={textarea:Pn,contenteditable:rn},bn.defineMode=function(o){bn.defaults.mode||o=="null"||(bn.defaults.mode=o),Ho.apply(this,arguments)},bn.defineMIME=Lr,bn.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),bn.defineMIME("text/plain","null"),bn.defineExtension=function(o,s){bn.prototype[o]=s},bn.defineDocExtension=function(o,s){Fn.prototype[o]=s},bn.fromTextArea=ef,nf(bn),bn.version="5.65.6",bn}()},629:(C,wt,I)=>{(function(rt){function _t(D){for(var H={},Y=0;Y<D.length;++Y)H[D[Y].toLowerCase()]=!0;return H}rt.defineMode("css",function(D,H){var Y=H.inline;H.propertyKeywords||(H=rt.resolveMode("text/css"));var et,Ct,nt=D.indentUnit,vt=H.tokenHooks,N=H.documentTypes||{},Mt=H.mediaTypes||{},Et=H.mediaFeatures||{},Kt=H.mediaValueKeywords||{},Ae=H.propertyKeywords||{},Se=H.nonStandardPropertyKeywords||{},_e=H.fontProperties||{},Ne=H.counterDescriptors||{},xe=H.colorKeywords||{},Oe=H.valueKeywords||{},be=H.allowNested,de=H.lineComment,ce=H.supportsAtComponent===!0,se=D.highlightNonStandardPropertyKeywords!==!1;function st(yt,Ht){return et=Ht,yt}function Yt(yt,Ht){var b=yt.next();if(vt[b]){var F=vt[b](yt,Ht);if(F!==!1)return F}return b=="@"?(yt.eatWhile(/[\w\\\-]/),st("def",yt.current())):b=="="||(b=="~"||b=="|")&&yt.eat("=")?st(null,"compare"):b=='"'||b=="'"?(Ht.tokenize=Wt(b),Ht.tokenize(yt,Ht)):b=="#"?(yt.eatWhile(/[\w\\\-]/),st("atom","hash")):b=="!"?(yt.match(/^\s*\w*/),st("keyword","important")):/\d/.test(b)||b=="."&&yt.eat(/\d/)?(yt.eatWhile(/[\w.%]/),st("number","unit")):b!=="-"?/[,+>*\/]/.test(b)?st(null,"select-op"):b=="."&&yt.match(/^-?[_a-z][_a-z0-9-]*/i)?st("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(b)?st(null,b):yt.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(yt.current())&&(Ht.tokenize=ee),st("variable callee","variable")):/[\w\\\-]/.test(b)?(yt.eatWhile(/[\w\\\-]/),st("property","word")):st(null,null):/[\d.]/.test(yt.peek())?(yt.eatWhile(/[\w.%]/),st("number","unit")):yt.match(/^-[\w\\\-]*/)?(yt.eatWhile(/[\w\\\-]/),yt.match(/^\s*:/,!1)?st("variable-2","variable-definition"):st("variable-2","variable")):yt.match(/^\w+-/)?st("meta","meta"):void 0}function Wt(yt){return function(Ht,b){for(var F,z=!1;(F=Ht.next())!=null;){if(F==yt&&!z){yt==")"&&Ht.backUp(1);break}z=!z&&F=="\\"}return(F==yt||!z&&yt!=")")&&(b.tokenize=null),st("string","string")}}function ee(yt,Ht){return yt.next(),yt.match(/^\s*[\"\')]/,!1)?Ht.tokenize=null:Ht.tokenize=Wt(")"),st(null,"(")}function ue(yt,Ht,b){this.type=yt,this.indent=Ht,this.prev=b}function Jt(yt,Ht,b,F){return yt.context=new ue(b,Ht.indentation()+(F===!1?0:nt),yt.context),b}function Pe(yt){return yt.context.prev&&(yt.context=yt.context.prev),yt.context.type}function Xe(yt,Ht,b){return Rn[b.context.type](yt,Ht,b)}function qe(yt,Ht,b,F){for(var z=F||1;z>0;z--)b.context=b.context.prev;return Xe(yt,Ht,b)}function pn(yt){var Ht=yt.current().toLowerCase();Ct=Oe.hasOwnProperty(Ht)?"atom":xe.hasOwnProperty(Ht)?"keyword":"variable"}var Rn={top:function(yt,Ht,b){if(yt=="{")return Jt(b,Ht,"block");if(yt=="}"&&b.context.prev)return Pe(b);if(ce&&/@component/i.test(yt))return Jt(b,Ht,"atComponentBlock");if(/^@(-moz-)?document$/i.test(yt))return Jt(b,Ht,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(yt))return Jt(b,Ht,"atBlock");if(/^@(font-face|counter-style)/i.test(yt))return b.stateArg=yt,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(yt))return"keyframes";if(yt&&yt.charAt(0)=="@")return Jt(b,Ht,"at");if(yt=="hash")Ct="builtin";else if(yt=="word")Ct="tag";else{if(yt=="variable-definition")return"maybeprop";if(yt=="interpolation")return Jt(b,Ht,"interpolation");if(yt==":")return"pseudo";if(be&&yt=="(")return Jt(b,Ht,"parens")}return b.context.type},block:function(yt,Ht,b){if(yt=="word"){var F=Ht.current().toLowerCase();return Ae.hasOwnProperty(F)?(Ct="property","maybeprop"):Se.hasOwnProperty(F)?(Ct=se?"string-2":"property","maybeprop"):be?(Ct=Ht.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Ct+=" error","maybeprop")}return yt=="meta"?"block":be||yt!="hash"&&yt!="qualifier"?Rn.top(yt,Ht,b):(Ct="error","block")},maybeprop:function(yt,Ht,b){return yt==":"?Jt(b,Ht,"prop"):Xe(yt,Ht,b)},prop:function(yt,Ht,b){if(yt==";")return Pe(b);if(yt=="{"&&be)return Jt(b,Ht,"propBlock");if(yt=="}"||yt=="{")return qe(yt,Ht,b);if(yt=="(")return Jt(b,Ht,"parens");if(yt!="hash"||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(Ht.current())){if(yt=="word")pn(Ht);else if(yt=="interpolation")return Jt(b,Ht,"interpolation")}else Ct+=" error";return"prop"},propBlock:function(yt,Ht,b){return yt=="}"?Pe(b):yt=="word"?(Ct="property","maybeprop"):b.context.type},parens:function(yt,Ht,b){return yt=="{"||yt=="}"?qe(yt,Ht,b):yt==")"?Pe(b):yt=="("?Jt(b,Ht,"parens"):yt=="interpolation"?Jt(b,Ht,"interpolation"):(yt=="word"&&pn(Ht),"parens")},pseudo:function(yt,Ht,b){return yt=="meta"?"pseudo":yt=="word"?(Ct="variable-3",b.context.type):Xe(yt,Ht,b)},documentTypes:function(yt,Ht,b){return yt=="word"&&N.hasOwnProperty(Ht.current())?(Ct="tag",b.context.type):Rn.atBlock(yt,Ht,b)},atBlock:function(yt,Ht,b){if(yt=="(")return Jt(b,Ht,"atBlock_parens");if(yt=="}"||yt==";")return qe(yt,Ht,b);if(yt=="{")return Pe(b)&&Jt(b,Ht,be?"block":"top");if(yt=="interpolation")return Jt(b,Ht,"interpolation");if(yt=="word"){var F=Ht.current().toLowerCase();Ct=F=="only"||F=="not"||F=="and"||F=="or"?"keyword":Mt.hasOwnProperty(F)?"attribute":Et.hasOwnProperty(F)?"property":Kt.hasOwnProperty(F)?"keyword":Ae.hasOwnProperty(F)?"property":Se.hasOwnProperty(F)?se?"string-2":"property":Oe.hasOwnProperty(F)?"atom":xe.hasOwnProperty(F)?"keyword":"error"}return b.context.type},atComponentBlock:function(yt,Ht,b){return yt=="}"?qe(yt,Ht,b):yt=="{"?Pe(b)&&Jt(b,Ht,be?"block":"top",!1):(yt=="word"&&(Ct="error"),b.context.type)},atBlock_parens:function(yt,Ht,b){return yt==")"?Pe(b):yt=="{"||yt=="}"?qe(yt,Ht,b,2):Rn.atBlock(yt,Ht,b)},restricted_atBlock_before:function(yt,Ht,b){return yt=="{"?Jt(b,Ht,"restricted_atBlock"):yt=="word"&&b.stateArg=="@counter-style"?(Ct="variable","restricted_atBlock_before"):Xe(yt,Ht,b)},restricted_atBlock:function(yt,Ht,b){return yt=="}"?(b.stateArg=null,Pe(b)):yt=="word"?(Ct=b.stateArg=="@font-face"&&!_e.hasOwnProperty(Ht.current().toLowerCase())||b.stateArg=="@counter-style"&&!Ne.hasOwnProperty(Ht.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(yt,Ht,b){return yt=="word"?(Ct="variable","keyframes"):yt=="{"?Jt(b,Ht,"top"):Xe(yt,Ht,b)},at:function(yt,Ht,b){return yt==";"?Pe(b):yt=="{"||yt=="}"?qe(yt,Ht,b):(yt=="word"?Ct="tag":yt=="hash"&&(Ct="builtin"),"at")},interpolation:function(yt,Ht,b){return yt=="}"?Pe(b):yt=="{"||yt==";"?qe(yt,Ht,b):(yt=="word"?Ct="variable":yt!="variable"&&yt!="("&&yt!=")"&&(Ct="error"),"interpolation")}};return{startState:function(yt){return{tokenize:null,state:Y?"block":"top",stateArg:null,context:new ue(Y?"block":"top",yt||0,null)}},token:function(yt,Ht){if(!Ht.tokenize&&yt.eatSpace())return null;var b=(Ht.tokenize||Yt)(yt,Ht);return b&&typeof b=="object"&&(et=b[1],b=b[0]),Ct=b,et!="comment"&&(Ht.state=Rn[Ht.state](et,yt,Ht)),Ct},indent:function(yt,Ht){var b=yt.context,F=Ht&&Ht.charAt(0),z=b.indent;return b.type!="prop"||F!="}"&&F!=")"||(b=b.prev),b.prev&&(F!="}"||b.type!="block"&&b.type!="top"&&b.type!="interpolation"&&b.type!="restricted_atBlock"?(F!=")"||b.type!="parens"&&b.type!="atBlock_parens")&&(F!="{"||b.type!="at"&&b.type!="atBlock")||(z=Math.max(0,b.indent-nt)):z=(b=b.prev).indent),z},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:de,fold:"brace"}});var X=["domain","regexp","url","url-prefix"],J=_t(X),B=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],k=_t(B),P=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],E=_t(P),j=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],L=_t(j),ot=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],it=_t(ot),At=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],jt=_t(At),Dt=_t(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),te=_t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),ft=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],ut=_t(ft),Nt=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Zt=_t(Nt),re=X.concat(B).concat(P).concat(j).concat(ot).concat(At).concat(ft).concat(Nt);function at(D,H){for(var Y,et=!1;(Y=D.next())!=null;){if(et&&Y=="/"){H.tokenize=null;break}et=Y=="*"}return["comment","comment"]}rt.registerHelper("hintWords","css",re),rt.defineMIME("text/css",{documentTypes:J,mediaTypes:k,mediaFeatures:E,mediaValueKeywords:L,propertyKeywords:it,nonStandardPropertyKeywords:jt,fontProperties:Dt,counterDescriptors:te,colorKeywords:ut,valueKeywords:Zt,tokenHooks:{"/":function(D,H){return!!D.eat("*")&&(H.tokenize=at,at(D,H))}},name:"css"}),rt.defineMIME("text/x-scss",{mediaTypes:k,mediaFeatures:E,mediaValueKeywords:L,propertyKeywords:it,nonStandardPropertyKeywords:jt,colorKeywords:ut,valueKeywords:Zt,fontProperties:Dt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(D,H){return D.eat("/")?(D.skipToEnd(),["comment","comment"]):D.eat("*")?(H.tokenize=at,at(D,H)):["operator","operator"]},":":function(D){return!!D.match(/^\s*\{/,!1)&&[null,null]},$:function(D){return D.match(/^[\w-]+/),D.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(D){return!!D.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),rt.defineMIME("text/x-less",{mediaTypes:k,mediaFeatures:E,mediaValueKeywords:L,propertyKeywords:it,nonStandardPropertyKeywords:jt,colorKeywords:ut,valueKeywords:Zt,fontProperties:Dt,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(D,H){return D.eat("/")?(D.skipToEnd(),["comment","comment"]):D.eat("*")?(H.tokenize=at,at(D,H)):["operator","operator"]},"@":function(D){return D.eat("{")?[null,"interpolation"]:!D.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(D.eatWhile(/[\w\\\-]/),D.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),rt.defineMIME("text/x-gss",{documentTypes:J,mediaTypes:k,mediaFeatures:E,propertyKeywords:it,nonStandardPropertyKeywords:jt,fontProperties:Dt,counterDescriptors:te,colorKeywords:ut,valueKeywords:Zt,supportsAtComponent:!0,tokenHooks:{"/":function(D,H){return!!D.eat("*")&&(H.tokenize=at,at(D,H))}},name:"css",helperType:"gss"})})(I(631))},531:(C,wt,I)=>{(function(rt){var _t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function X(L,ot,it){var At=L.current(),jt=At.search(ot);return jt>-1?L.backUp(At.length-jt):At.match(/<\/?$/)&&(L.backUp(At.length),L.match(ot,!1)||L.match(At)),it}var J={};function B(L){var ot=J[L];return ot||(J[L]=new RegExp("\\s+"+L+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function k(L,ot){var it=L.match(B(ot));return it?/^\s*(.*?)\s*$/.exec(it[2])[1]:""}function P(L,ot){return new RegExp((ot?"^":"")+"</\\s*"+L+"\\s*>","i")}function E(L,ot){for(var it in L)for(var At=ot[it]||(ot[it]=[]),jt=L[it],Dt=jt.length-1;Dt>=0;Dt--)At.unshift(jt[Dt])}function j(L,ot){for(var it=0;it<L.length;it++){var At=L[it];if(!At[0]||At[1].test(k(ot,At[0])))return At[2]}}rt.defineMode("htmlmixed",function(L,ot){var it=rt.getMode(L,{name:"xml",htmlMode:!0,multilineTagIndentFactor:ot.multilineTagIndentFactor,multilineTagIndentPastTag:ot.multilineTagIndentPastTag,allowMissingTagName:ot.allowMissingTagName}),At={},jt=ot&&ot.tags,Dt=ot&&ot.scriptTypes;if(E(_t,At),jt&&E(jt,At),Dt)for(var te=Dt.length-1;te>=0;te--)At.script.unshift(["type",Dt[te].matches,Dt[te].mode]);function ft(ut,Nt){var Zt,re=it.token(ut,Nt.htmlState),at=/\btag\b/.test(re);if(at&&!/[<>\s\/]/.test(ut.current())&&(Zt=Nt.htmlState.tagName&&Nt.htmlState.tagName.toLowerCase())&&At.hasOwnProperty(Zt))Nt.inTag=Zt+" ";else if(Nt.inTag&&at&&/>$/.test(ut.current())){var D=/^([\S]+) (.*)/.exec(Nt.inTag);Nt.inTag=null;var H=ut.current()==">"&&j(At[D[1]],D[2]),Y=rt.getMode(L,H),et=P(D[1],!0),Ct=P(D[1],!1);Nt.token=function(nt,vt){return nt.match(et,!1)?(vt.token=ft,vt.localState=vt.localMode=null,null):X(nt,Ct,vt.localMode.token(nt,vt.localState))},Nt.localMode=Y,Nt.localState=rt.startState(Y,it.indent(Nt.htmlState,"",""))}else Nt.inTag&&(Nt.inTag+=ut.current(),ut.eol()&&(Nt.inTag+=" "));return re}return{startState:function(){return{token:ft,inTag:null,localMode:null,localState:null,htmlState:rt.startState(it)}},copyState:function(ut){var Nt;return ut.localState&&(Nt=rt.copyState(ut.localMode,ut.localState)),{token:ut.token,inTag:ut.inTag,localMode:ut.localMode,localState:Nt,htmlState:rt.copyState(it,ut.htmlState)}},token:function(ut,Nt){return Nt.token(ut,Nt)},indent:function(ut,Nt,Zt){return!ut.localMode||/^\s*<\//.test(Nt)?it.indent(ut.htmlState,Nt,Zt):ut.localMode.indent?ut.localMode.indent(ut.localState,Nt,Zt):rt.Pass},innerMode:function(ut){return{state:ut.localState||ut.htmlState,mode:ut.localMode||it}}}},"xml","javascript","css"),rt.defineMIME("text/html","htmlmixed")})(I(631),I(589),I(876),I(629))},876:(C,wt,I)=>{(function(rt){rt.defineMode("javascript",function(_t,X){var J,B,k=_t.indentUnit,P=X.statementIndent,E=X.jsonld,j=X.json||E,L=X.trackScope!==!1,ot=X.typescript,it=X.wordCharacters||/[\w$\xa1-\uffff]/,At=function(){function T(Hn){return{type:Hn,style:"keyword"}}var $=T("keyword a"),Lt=T("keyword b"),Qt=T("keyword c"),fe=T("keyword d"),$e=T("operator"),oe={type:"atom",style:"atom"};return{if:T("if"),while:$,with:$,else:Lt,do:Lt,try:Lt,finally:Lt,return:fe,break:fe,continue:fe,new:T("new"),delete:Qt,void:Qt,throw:Qt,debugger:T("debugger"),var:T("var"),const:T("var"),let:T("var"),function:T("function"),catch:T("catch"),for:T("for"),switch:T("switch"),case:T("case"),default:T("default"),in:$e,typeof:$e,instanceof:$e,true:oe,false:oe,null:oe,undefined:oe,NaN:oe,Infinity:oe,this:T("this"),class:T("class"),super:T("atom"),yield:Qt,export:T("export"),import:T("import"),extends:Qt,await:Qt}}(),jt=/[+\-*&%=<>!?|~^@]/,Dt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function te(T){for(var $,Lt=!1,Qt=!1;($=T.next())!=null;){if(!Lt){if($=="/"&&!Qt)return;$=="["?Qt=!0:Qt&&$=="]"&&(Qt=!1)}Lt=!Lt&&$=="\\"}}function ft(T,$,Lt){return J=T,B=Lt,$}function ut(T,$){var Lt=T.next();if(Lt=='"'||Lt=="'")return $.tokenize=Nt(Lt),$.tokenize(T,$);if(Lt=="."&&T.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return ft("number","number");if(Lt=="."&&T.match(".."))return ft("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Lt))return ft(Lt);if(Lt=="="&&T.eat(">"))return ft("=>","operator");if(Lt=="0"&&T.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return ft("number","number");if(/\d/.test(Lt))return T.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),ft("number","number");if(Lt=="/")return T.eat("*")?($.tokenize=Zt,Zt(T,$)):T.eat("/")?(T.skipToEnd(),ft("comment","comment")):Ut(T,$,1)?(te(T),T.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),ft("regexp","string-2")):(T.eat("="),ft("operator","operator",T.current()));if(Lt=="`")return $.tokenize=re,re(T,$);if(Lt=="#"&&T.peek()=="!")return T.skipToEnd(),ft("meta","meta");if(Lt=="#"&&T.eatWhile(it))return ft("variable","property");if(Lt=="<"&&T.match("!--")||Lt=="-"&&T.match("->")&&!/\S/.test(T.string.slice(0,T.start)))return T.skipToEnd(),ft("comment","comment");if(jt.test(Lt))return Lt==">"&&$.lexical&&$.lexical.type==">"||(T.eat("=")?Lt!="!"&&Lt!="="||T.eat("="):/[<>*+\-|&?]/.test(Lt)&&(T.eat(Lt),Lt==">"&&T.eat(Lt))),Lt=="?"&&T.eat(".")?ft("."):ft("operator","operator",T.current());if(it.test(Lt)){T.eatWhile(it);var Qt=T.current();if($.lastType!="."){if(At.propertyIsEnumerable(Qt)){var fe=At[Qt];return ft(fe.type,fe.style,Qt)}if(Qt=="async"&&T.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return ft("async","keyword",Qt)}return ft("variable","variable",Qt)}}function Nt(T){return function($,Lt){var Qt,fe=!1;if(E&&$.peek()=="@"&&$.match(Dt))return Lt.tokenize=ut,ft("jsonld-keyword","meta");for(;(Qt=$.next())!=null&&(Qt!=T||fe);)fe=!fe&&Qt=="\\";return fe||(Lt.tokenize=ut),ft("string","string")}}function Zt(T,$){for(var Lt,Qt=!1;Lt=T.next();){if(Lt=="/"&&Qt){$.tokenize=ut;break}Qt=Lt=="*"}return ft("comment","comment")}function re(T,$){for(var Lt,Qt=!1;(Lt=T.next())!=null;){if(!Qt&&(Lt=="`"||Lt=="$"&&T.eat("{"))){$.tokenize=ut;break}Qt=!Qt&&Lt=="\\"}return ft("quasi","string-2",T.current())}var at="([{}])";function D(T,$){$.fatArrowAt&&($.fatArrowAt=null);var Lt=T.string.indexOf("=>",T.start);if(!(Lt<0)){if(ot){var Qt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(T.string.slice(T.start,Lt));Qt&&(Lt=Qt.index)}for(var fe=0,$e=!1,oe=Lt-1;oe>=0;--oe){var Hn=T.string.charAt(oe),Tn=at.indexOf(Hn);if(Tn>=0&&Tn<3){if(!fe){++oe;break}if(--fe==0){Hn=="("&&($e=!0);break}}else if(Tn>=3&&Tn<6)++fe;else if(it.test(Hn))$e=!0;else if(/["'\/`]/.test(Hn))for(;;--oe){if(oe==0)return;if(T.string.charAt(oe-1)==Hn&&T.string.charAt(oe-2)!="\\"){oe--;break}}else if($e&&!fe){++oe;break}}$e&&!fe&&($.fatArrowAt=oe)}}var H={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Y(T,$,Lt,Qt,fe,$e){this.indented=T,this.column=$,this.type=Lt,this.prev=fe,this.info=$e,Qt!=null&&(this.align=Qt)}function et(T,$){if(!L)return!1;for(var Lt=T.localVars;Lt;Lt=Lt.next)if(Lt.name==$)return!0;for(var Qt=T.context;Qt;Qt=Qt.prev)for(Lt=Qt.vars;Lt;Lt=Lt.next)if(Lt.name==$)return!0}function Ct(T,$,Lt,Qt,fe){var $e=T.cc;for(nt.state=T,nt.stream=fe,nt.marked=null,nt.cc=$e,nt.style=$,T.lexical.hasOwnProperty("align")||(T.lexical.align=!0);;)if(($e.length?$e.pop():j?Wt:st)(Lt,Qt)){for(;$e.length&&$e[$e.length-1].lex;)$e.pop()();return nt.marked?nt.marked:Lt=="variable"&&et(T,Qt)?"variable-2":$}}var nt={state:null,column:null,marked:null,cc:null};function vt(){for(var T=arguments.length-1;T>=0;T--)nt.cc.push(arguments[T])}function N(){return vt.apply(null,arguments),!0}function Mt(T,$){for(var Lt=$;Lt;Lt=Lt.next)if(Lt.name==T)return!0;return!1}function Et(T){var $=nt.state;if(nt.marked="def",L){if($.context){if($.lexical.info=="var"&&$.context&&$.context.block){var Lt=Kt(T,$.context);if(Lt!=null)return void($.context=Lt)}else if(!Mt(T,$.localVars))return void($.localVars=new _e(T,$.localVars))}X.globalVars&&!Mt(T,$.globalVars)&&($.globalVars=new _e(T,$.globalVars))}}function Kt(T,$){if($){if($.block){var Lt=Kt(T,$.prev);return Lt?Lt==$.prev?$:new Se(Lt,$.vars,!0):null}return Mt(T,$.vars)?$:new Se($.prev,new _e(T,$.vars),!1)}return null}function Ae(T){return T=="public"||T=="private"||T=="protected"||T=="abstract"||T=="readonly"}function Se(T,$,Lt){this.prev=T,this.vars=$,this.block=Lt}function _e(T,$){this.name=T,this.next=$}var Ne=new _e("this",new _e("arguments",null));function xe(){nt.state.context=new Se(nt.state.context,nt.state.localVars,!1),nt.state.localVars=Ne}function Oe(){nt.state.context=new Se(nt.state.context,nt.state.localVars,!0),nt.state.localVars=null}function be(){nt.state.localVars=nt.state.context.vars,nt.state.context=nt.state.context.prev}function de(T,$){var Lt=function(){var Qt=nt.state,fe=Qt.indented;if(Qt.lexical.type=="stat")fe=Qt.lexical.indented;else for(var $e=Qt.lexical;$e&&$e.type==")"&&$e.align;$e=$e.prev)fe=$e.indented;Qt.lexical=new Y(fe,nt.stream.column(),T,null,Qt.lexical,$)};return Lt.lex=!0,Lt}function ce(){var T=nt.state;T.lexical.prev&&(T.lexical.type==")"&&(T.indented=T.lexical.indented),T.lexical=T.lexical.prev)}function se(T){function $(Lt){return Lt==T?N():T==";"||Lt=="}"||Lt==")"||Lt=="]"?vt():N($)}return $}function st(T,$){return T=="var"?N(de("vardef",$),dn,se(";"),ce):T=="keyword a"?N(de("form"),ue,st,ce):T=="keyword b"?N(de("form"),st,ce):T=="keyword d"?nt.stream.match(/^\s*$/,!1)?N():N(de("stat"),Pe,se(";"),ce):T=="debugger"?N(se(";")):T=="{"?N(de("}"),Oe,Qe,ce,be):T==";"?N():T=="if"?(nt.state.lexical.info=="else"&&nt.state.cc[nt.state.cc.length-1]==ce&&nt.state.cc.pop()(),N(de("form"),ue,st,ce,Vo)):T=="function"?N(ur):T=="for"?N(de("form"),Oe,xo,st,be,ce):T=="class"||ot&&$=="interface"?(nt.marked="keyword",N(de("form",T=="class"?T:$),Jr,ce)):T=="variable"?ot&&$=="declare"?(nt.marked="keyword",N(st)):ot&&($=="module"||$=="enum"||$=="type")&&nt.stream.match(/^\s*\w/,!1)?(nt.marked="keyword",$=="enum"?N(In):$=="type"?N(Ho,se("operator"),bt,se(";")):N(de("form"),_n,se("{"),de("}"),Qe,ce,ce)):ot&&$=="namespace"?(nt.marked="keyword",N(de("form"),Wt,st,ce)):ot&&$=="abstract"?(nt.marked="keyword",N(st)):N(de("stat"),gt):T=="switch"?N(de("form"),ue,se("{"),de("}","switch"),Oe,Qe,ce,ce,be):T=="case"?N(Wt,se(":")):T=="default"?N(se(":")):T=="catch"?N(de("form"),xe,Yt,st,ce,be):T=="export"?N(de("stat"),zo,ce):T=="import"?N(de("stat"),Ge,ce):T=="async"?N(st):$=="@"?N(Wt,st):vt(de("stat"),Wt,se(";"),ce)}function Yt(T){if(T=="(")return N(Lr,se(")"))}function Wt(T,$){return Jt(T,$,!1)}function ee(T,$){return Jt(T,$,!0)}function ue(T){return T!="("?vt():N(de(")"),Pe,se(")"),ce)}function Jt(T,$,Lt){if(nt.state.fatArrowAt==nt.stream.start){var Qt=Lt?Ht:yt;if(T=="(")return N(xe,de(")"),Ie(Lr,")"),ce,se("=>"),Qt,be);if(T=="variable")return vt(xe,_n,se("=>"),Qt,be)}var fe=Lt?qe:Xe;return H.hasOwnProperty(T)?N(fe):T=="function"?N(ur,fe):T=="class"||ot&&$=="interface"?(nt.marked="keyword",N(de("form"),Co,ce)):T=="keyword c"||T=="async"?N(Lt?ee:Wt):T=="("?N(de(")"),Pe,se(")"),ce,fe):T=="operator"||T=="spread"?N(Lt?ee:Wt):T=="["?N(de("]"),Ye,ce,fe):T=="{"?ze(Ot,"}",null,fe):T=="quasi"?vt(pn,fe):T=="new"?N(b(Lt)):N()}function Pe(T){return T.match(/[;\}\)\],]/)?vt():vt(Wt)}function Xe(T,$){return T==","?N(Pe):qe(T,$,!1)}function qe(T,$,Lt){var Qt=Lt==0?Xe:qe,fe=Lt==0?Wt:ee;return T=="=>"?N(xe,Lt?Ht:yt,be):T=="operator"?/\+\+|--/.test($)||ot&&$=="!"?N(Qt):ot&&$=="<"&&nt.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?N(de(">"),Ie(bt,">"),ce,Qt):$=="?"?N(Wt,se(":"),fe):N(fe):T=="quasi"?vt(pn,Qt):T!=";"?T=="("?ze(ee,")","call",Qt):T=="."?N(Tt,Qt):T=="["?N(de("]"),Pe,se("]"),ce,Qt):ot&&$=="as"?(nt.marked="keyword",N(bt,Qt)):T=="regexp"?(nt.state.lastType=nt.marked="operator",nt.stream.backUp(nt.stream.pos-nt.stream.start-1),N(fe)):void 0:void 0}function pn(T,$){return T!="quasi"?vt():$.slice($.length-2)!="${"?N(pn):N(Pe,Rn)}function Rn(T){if(T=="}")return nt.marked="string-2",nt.state.tokenize=re,N(pn)}function yt(T){return D(nt.stream,nt.state),vt(T=="{"?st:Wt)}function Ht(T){return D(nt.stream,nt.state),vt(T=="{"?st:ee)}function b(T){return function($){return $=="."?N(T?z:F):$=="variable"&&ot?N(Ar,T?qe:Xe):vt(T?ee:Wt)}}function F(T,$){if($=="target")return nt.marked="keyword",N(Xe)}function z(T,$){if($=="target")return nt.marked="keyword",N(qe)}function gt(T){return T==":"?N(ce,st):vt(Xe,se(";"),ce)}function Tt(T){if(T=="variable")return nt.marked="property",N()}function Ot(T,$){return T=="async"?(nt.marked="property",N(Ot)):T=="variable"||nt.style=="keyword"?(nt.marked="property",$=="get"||$=="set"?N(pe):(ot&&nt.state.fatArrowAt==nt.stream.start&&(Lt=nt.stream.match(/^\s*:\s*/,!1))&&(nt.state.fatArrowAt=nt.stream.pos+Lt[0].length),N(Te))):T=="number"||T=="string"?(nt.marked=E?"property":nt.style+" property",N(Te)):T=="jsonld-keyword"?N(Te):ot&&Ae($)?(nt.marked="keyword",N(Ot)):T=="["?N(Wt,qt,se("]"),Te):T=="spread"?N(ee,Te):$=="*"?(nt.marked="keyword",N(Ot)):T==":"?vt(Te):void 0;var Lt}function pe(T){return T!="variable"?vt(Te):(nt.marked="property",N(ur))}function Te(T){return T==":"?N(ee):T=="("?vt(ur):void 0}function Ie(T,$,Lt){function Qt(fe,$e){if(Lt?Lt.indexOf(fe)>-1:fe==","){var oe=nt.state.lexical;return oe.info=="call"&&(oe.pos=(oe.pos||0)+1),N(function(Hn,Tn){return Hn==$||Tn==$?vt():vt(T)},Qt)}return fe==$||$e==$?N():Lt&&Lt.indexOf(";")>-1?vt(T):N(se($))}return function(fe,$e){return fe==$||$e==$?N():vt(T,Qt)}}function ze(T,$,Lt){for(var Qt=3;Qt<arguments.length;Qt++)nt.cc.push(arguments[Qt]);return N(de($,Lt),Ie(T,$),ce)}function Qe(T){return T=="}"?N():vt(st,Qe)}function qt(T,$){if(ot){if(T==":")return N(bt);if($=="?")return N(qt)}}function V(T,$){if(ot&&(T==":"||$=="in"))return N(bt)}function Q(T){if(ot&&T==":")return nt.stream.match(/^\s*\w+\s+is\b/,!1)?N(Wt,pt,bt):N(bt)}function pt(T,$){if($=="is")return nt.marked="keyword",N()}function bt(T,$){return $=="keyof"||$=="typeof"||$=="infer"||$=="readonly"?(nt.marked="keyword",N($=="typeof"?ee:bt)):T=="variable"||$=="void"?(nt.marked="type",N(Re)):$=="|"||$=="&"?N(bt):T=="string"||T=="number"||T=="atom"?N(Re):T=="["?N(de("]"),Ie(bt,"]",","),ce,Re):T=="{"?N(de("}"),he,ce,Re):T=="("?N(Ie(fn,")"),Gt,Re):T=="<"?N(Ie(bt,">"),bt):T=="quasi"?vt(We,Re):void 0}function Gt(T){if(T=="=>")return N(bt)}function he(T){return T.match(/[\}\)\]]/)?N():T==","||T==";"?N(he):vt(Fe,he)}function Fe(T,$){return T=="variable"||nt.style=="keyword"?(nt.marked="property",N(Fe)):$=="?"||T=="number"||T=="string"?N(Fe):T==":"?N(bt):T=="["?N(se("variable"),V,se("]"),Fe):T=="("?vt(ln,Fe):T.match(/[;\}\)\],]/)?void 0:N()}function We(T,$){return T!="quasi"?vt():$.slice($.length-2)!="${"?N(We):N(bt,Ln)}function Ln(T){if(T=="}")return nt.marked="string-2",nt.state.tokenize=re,N(We)}function fn(T,$){return T=="variable"&&nt.stream.match(/^\s*[?:]/,!1)||$=="?"?N(fn):T==":"?N(bt):T=="spread"?N(fn):vt(bt)}function Re(T,$){return $=="<"?N(de(">"),Ie(bt,">"),ce,Re):$=="|"||T=="."||$=="&"?N(bt):T=="["?N(bt,se("]"),Re):$=="extends"||$=="implements"?(nt.marked="keyword",N(bt)):$=="?"?N(bt,se(":"),bt):void 0}function Ar(T,$){if($=="<")return N(de(">"),Ie(bt,">"),ce,Re)}function Yn(){return vt(bt,jr)}function jr(T,$){if($=="=")return N(bt)}function dn(T,$){return $=="enum"?(nt.marked="keyword",N(In)):vt(_n,qt,Dn,_o)}function _n(T,$){return ot&&Ae($)?(nt.marked="keyword",N(_n)):T=="variable"?(Et($),N()):T=="spread"?N(_n):T=="["?ze(Mr,"]"):T=="{"?ze(Bn,"}"):void 0}function Bn(T,$){return T!="variable"||nt.stream.match(/^\s*:/,!1)?(T=="variable"&&(nt.marked="property"),T=="spread"?N(_n):T=="}"?vt():T=="["?N(Wt,se("]"),se(":"),Bn):N(se(":"),_n,Dn)):(Et($),N(Dn))}function Mr(){return vt(_n,Dn)}function Dn(T,$){if($=="=")return N(ee)}function _o(T){if(T==",")return N(dn)}function Vo(T,$){if(T=="keyword b"&&$=="else")return N(de("form","else"),st,ce)}function xo(T,$){return $=="await"?N(xo):T=="("?N(de(")"),Ro,ce):void 0}function Ro(T){return T=="var"?N(dn,ro):T=="variable"?N(ro):vt(ro)}function ro(T,$){return T==")"?N():T==";"?N(ro):$=="in"||$=="of"?(nt.marked="keyword",N(Wt,ro)):vt(Wt,ro)}function ur(T,$){return $=="*"?(nt.marked="keyword",N(ur)):T=="variable"?(Et($),N(ur)):T=="("?N(xe,de(")"),Ie(Lr,")"),ce,Q,st,be):ot&&$=="<"?N(de(">"),Ie(Yn,">"),ce,ur):void 0}function ln(T,$){return $=="*"?(nt.marked="keyword",N(ln)):T=="variable"?(Et($),N(ln)):T=="("?N(xe,de(")"),Ie(Lr,")"),ce,Q,be):ot&&$=="<"?N(de(">"),Ie(Yn,">"),ce,ln):void 0}function Ho(T,$){return T=="keyword"||T=="variable"?(nt.marked="type",N(Ho)):$=="<"?N(de(">"),Ie(Yn,">"),ce):void 0}function Lr(T,$){return $=="@"&&N(Wt,Lr),T=="spread"?N(Lr):ot&&Ae($)?(nt.marked="keyword",N(Lr)):ot&&T=="this"?N(qt,Dn):vt(_n,qt,Dn)}function Co(T,$){return T=="variable"?Jr(T,$):Wn(T,$)}function Jr(T,$){if(T=="variable")return Et($),N(Wn)}function Wn(T,$){return $=="<"?N(de(">"),Ie(Yn,">"),ce,Wn):$=="extends"||$=="implements"||ot&&T==","?($=="implements"&&(nt.marked="keyword"),N(ot?bt:Wt,Wn)):T=="{"?N(de("}"),Nn,ce):void 0}function Nn(T,$){return T=="async"||T=="variable"&&($=="static"||$=="get"||$=="set"||ot&&Ae($))&&nt.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(nt.marked="keyword",N(Nn)):T=="variable"||nt.style=="keyword"?(nt.marked="property",N($n,Nn)):T=="number"||T=="string"?N($n,Nn):T=="["?N(Wt,qt,se("]"),$n,Nn):$=="*"?(nt.marked="keyword",N(Nn)):ot&&T=="("?vt(ln,Nn):T==";"||T==","?N(Nn):T=="}"?N():$=="@"?N(Wt,Nn):void 0}function $n(T,$){if($=="!"||$=="?")return N($n);if(T==":")return N(bt,Dn);if($=="=")return N(ee);var Lt=nt.state.lexical.prev;return vt(Lt&&Lt.info=="interface"?ln:ur)}function zo(T,$){return $=="*"?(nt.marked="keyword",N(or,se(";"))):$=="default"?(nt.marked="keyword",N(Wt,se(";"))):T=="{"?N(Ie(vo,"}"),or,se(";")):vt(st)}function vo(T,$){return $=="as"?(nt.marked="keyword",N(se("variable"))):T=="variable"?vt(ee,vo):void 0}function Ge(T){return T=="string"?N():T=="("?vt(Wt):T=="."?vt(Xe):vt(ge,rr,or)}function ge(T,$){return T=="{"?ze(ge,"}"):(T=="variable"&&Et($),$=="*"&&(nt.marked="keyword"),N(Uo))}function rr(T){if(T==",")return N(ge,rr)}function Uo(T,$){if($=="as")return nt.marked="keyword",N(ge)}function or(T,$){if($=="from")return nt.marked="keyword",N(Wt)}function Ye(T){return T=="]"?N():vt(Ie(ee,"]"))}function In(){return vt(de("form"),_n,se("{"),de("}"),Ie(mo,"}"),ce,ce)}function mo(){return vt(_n,Dn)}function Bo(T,$){return T.lastType=="operator"||T.lastType==","||jt.test($.charAt(0))||/[,.]/.test($.charAt(0))}function Ut(T,$,Lt){return $.tokenize==ut&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test($.lastType)||$.lastType=="quasi"&&/\{\s*$/.test(T.string.slice(0,T.pos-(Lt||0)))}return xe.lex=Oe.lex=!0,be.lex=!0,ce.lex=!0,{startState:function(T){var $={tokenize:ut,lastType:"sof",cc:[],lexical:new Y((T||0)-k,0,"block",!1),localVars:X.localVars,context:X.localVars&&new Se(null,null,!1),indented:T||0};return X.globalVars&&typeof X.globalVars=="object"&&($.globalVars=X.globalVars),$},token:function(T,$){if(T.sol()&&($.lexical.hasOwnProperty("align")||($.lexical.align=!1),$.indented=T.indentation(),D(T,$)),$.tokenize!=Zt&&T.eatSpace())return null;var Lt=$.tokenize(T,$);return J=="comment"?Lt:($.lastType=J!="operator"||B!="++"&&B!="--"?J:"incdec",Ct($,Lt,J,B,T))},indent:function(T,$){if(T.tokenize==Zt||T.tokenize==re)return rt.Pass;if(T.tokenize!=ut)return 0;var Lt,Qt=$&&$.charAt(0),fe=T.lexical;if(!/^\s*else\b/.test($))for(var $e=T.cc.length-1;$e>=0;--$e){var oe=T.cc[$e];if(oe==ce)fe=fe.prev;else if(oe!=Vo&&oe!=be)break}for(;(fe.type=="stat"||fe.type=="form")&&(Qt=="}"||(Lt=T.cc[T.cc.length-1])&&(Lt==Xe||Lt==qe)&&!/^[,\.=+\-*:?[\(]/.test($));)fe=fe.prev;P&&fe.type==")"&&fe.prev.type=="stat"&&(fe=fe.prev);var Hn=fe.type,Tn=Qt==Hn;return Hn=="vardef"?fe.indented+(T.lastType=="operator"||T.lastType==","?fe.info.length+1:0):Hn=="form"&&Qt=="{"?fe.indented:Hn=="form"?fe.indented+k:Hn=="stat"?fe.indented+(Bo(T,$)?P||k:0):fe.info!="switch"||Tn||X.doubleIndentSwitch==0?fe.align?fe.column+(Tn?0:1):fe.indented+(Tn?0:k):fe.indented+(/^(?:case|default)\b/.test($)?k:2*k)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:j?null:"/*",blockCommentEnd:j?null:"*/",blockCommentContinue:j?null:" * ",lineComment:j?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:j?"json":"javascript",jsonldMode:E,jsonMode:j,expressionAllowed:Ut,skipExpression:function(T){Ct(T,"atom","atom","true",new rt.StringStream("",2,null))}}}),rt.registerHelper("wordChars","javascript",/[\w$]/),rt.defineMIME("text/javascript","javascript"),rt.defineMIME("text/ecmascript","javascript"),rt.defineMIME("application/javascript","javascript"),rt.defineMIME("application/x-javascript","javascript"),rt.defineMIME("application/ecmascript","javascript"),rt.defineMIME("application/json",{name:"javascript",json:!0}),rt.defineMIME("application/x-json",{name:"javascript",json:!0}),rt.defineMIME("application/manifest+json",{name:"javascript",json:!0}),rt.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),rt.defineMIME("text/typescript",{name:"javascript",typescript:!0}),rt.defineMIME("application/typescript",{name:"javascript",typescript:!0})})(I(631))},589:(C,wt,I)=>{(function(rt){var _t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},X={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};rt.defineMode("xml",function(J,B){var k,P,E=J.indentUnit,j={},L=B.htmlMode?_t:X;for(var ot in L)j[ot]=L[ot];for(var ot in B)j[ot]=B[ot];function it(N,Mt){function Et(Ae){return Mt.tokenize=Ae,Ae(N,Mt)}var Kt=N.next();return Kt=="<"?N.eat("!")?N.eat("[")?N.match("CDATA[")?Et(Dt("atom","]]>")):null:N.match("--")?Et(Dt("comment","-->")):N.match("DOCTYPE",!0,!0)?(N.eatWhile(/[\w\._\-]/),Et(te(1))):null:N.eat("?")?(N.eatWhile(/[\w\._\-]/),Mt.tokenize=Dt("meta","?>"),"meta"):(k=N.eat("/")?"closeTag":"openTag",Mt.tokenize=At,"tag bracket"):Kt=="&"?(N.eat("#")?N.eat("x")?N.eatWhile(/[a-fA-F\d]/)&&N.eat(";"):N.eatWhile(/[\d]/)&&N.eat(";"):N.eatWhile(/[\w\.\-:]/)&&N.eat(";"))?"atom":"error":(N.eatWhile(/[^&<]/),null)}function At(N,Mt){var Et=N.next();if(Et==">"||Et=="/"&&N.eat(">"))return Mt.tokenize=it,k=Et==">"?"endTag":"selfcloseTag","tag bracket";if(Et=="=")return k="equals",null;if(Et=="<"){Mt.tokenize=it,Mt.state=re,Mt.tagName=Mt.tagStart=null;var Kt=Mt.tokenize(N,Mt);return Kt?Kt+" tag error":"tag error"}return/[\'\"]/.test(Et)?(Mt.tokenize=jt(Et),Mt.stringStartCol=N.column(),Mt.tokenize(N,Mt)):(N.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function jt(N){var Mt=function(Et,Kt){for(;!Et.eol();)if(Et.next()==N){Kt.tokenize=At;break}return"string"};return Mt.isInAttribute=!0,Mt}function Dt(N,Mt){return function(Et,Kt){for(;!Et.eol();){if(Et.match(Mt)){Kt.tokenize=it;break}Et.next()}return N}}function te(N){return function(Mt,Et){for(var Kt;(Kt=Mt.next())!=null;){if(Kt=="<")return Et.tokenize=te(N+1),Et.tokenize(Mt,Et);if(Kt==">"){if(N==1){Et.tokenize=it;break}return Et.tokenize=te(N-1),Et.tokenize(Mt,Et)}}return"meta"}}function ft(N){return N&&N.toLowerCase()}function ut(N,Mt,Et){this.prev=N.context,this.tagName=Mt||"",this.indent=N.indented,this.startOfLine=Et,(j.doNotIndent.hasOwnProperty(Mt)||N.context&&N.context.noIndent)&&(this.noIndent=!0)}function Nt(N){N.context&&(N.context=N.context.prev)}function Zt(N,Mt){for(var Et;;){if(!N.context||(Et=N.context.tagName,!j.contextGrabbers.hasOwnProperty(ft(Et))||!j.contextGrabbers[ft(Et)].hasOwnProperty(ft(Mt))))return;Nt(N)}}function re(N,Mt,Et){return N=="openTag"?(Et.tagStart=Mt.column(),at):N=="closeTag"?D:re}function at(N,Mt,Et){return N=="word"?(Et.tagName=Mt.current(),P="tag",et):j.allowMissingTagName&&N=="endTag"?(P="tag bracket",et(N,Mt,Et)):(P="error",at)}function D(N,Mt,Et){if(N=="word"){var Kt=Mt.current();return Et.context&&Et.context.tagName!=Kt&&j.implicitlyClosed.hasOwnProperty(ft(Et.context.tagName))&&Nt(Et),Et.context&&Et.context.tagName==Kt||j.matchClosing===!1?(P="tag",H):(P="tag error",Y)}return j.allowMissingTagName&&N=="endTag"?(P="tag bracket",H(N,Mt,Et)):(P="error",Y)}function H(N,Mt,Et){return N!="endTag"?(P="error",H):(Nt(Et),re)}function Y(N,Mt,Et){return P="error",H(N,Mt,Et)}function et(N,Mt,Et){if(N=="word")return P="attribute",Ct;if(N=="endTag"||N=="selfcloseTag"){var Kt=Et.tagName,Ae=Et.tagStart;return Et.tagName=Et.tagStart=null,N=="selfcloseTag"||j.autoSelfClosers.hasOwnProperty(ft(Kt))?Zt(Et,Kt):(Zt(Et,Kt),Et.context=new ut(Et,Kt,Ae==Et.indented)),re}return P="error",et}function Ct(N,Mt,Et){return N=="equals"?nt:(j.allowMissing||(P="error"),et(N,Mt,Et))}function nt(N,Mt,Et){return N=="string"?vt:N=="word"&&j.allowUnquoted?(P="string",et):(P="error",et(N,Mt,Et))}function vt(N,Mt,Et){return N=="string"?vt:et(N,Mt,Et)}return it.isInText=!0,{startState:function(N){var Mt={tokenize:it,state:re,indented:N||0,tagName:null,tagStart:null,context:null};return N!=null&&(Mt.baseIndent=N),Mt},token:function(N,Mt){if(!Mt.tagName&&N.sol()&&(Mt.indented=N.indentation()),N.eatSpace())return null;k=null;var Et=Mt.tokenize(N,Mt);return(Et||k)&&Et!="comment"&&(P=null,Mt.state=Mt.state(k||Et,N,Mt),P&&(Et=P=="error"?Et+" error":P)),Et},indent:function(N,Mt,Et){var Kt=N.context;if(N.tokenize.isInAttribute)return N.tagStart==N.indented?N.stringStartCol+1:N.indented+E;if(Kt&&Kt.noIndent)return rt.Pass;if(N.tokenize!=At&&N.tokenize!=it)return Et?Et.match(/^(\s*)/)[0].length:0;if(N.tagName)return j.multilineTagIndentPastTag!==!1?N.tagStart+N.tagName.length+2:N.tagStart+E*(j.multilineTagIndentFactor||1);if(j.alignCDATA&&/<!\[CDATA\[/.test(Mt))return 0;var Ae=Mt&&/^<(\/)?([\w_:\.-]*)/.exec(Mt);if(Ae&&Ae[1])for(;Kt;){if(Kt.tagName==Ae[2]){Kt=Kt.prev;break}if(!j.implicitlyClosed.hasOwnProperty(ft(Kt.tagName)))break;Kt=Kt.prev}else if(Ae)for(;Kt;){var Se=j.contextGrabbers[ft(Kt.tagName)];if(!Se||!Se.hasOwnProperty(ft(Ae[2])))break;Kt=Kt.prev}for(;Kt&&Kt.prev&&!Kt.startOfLine;)Kt=Kt.prev;return Kt?Kt.indent+E:N.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:j.htmlMode?"html":"xml",helperType:j.htmlMode?"html":"xml",skipAttribute:function(N){N.state==nt&&(N.state=et)},xmlCurrentTag:function(N){return N.tagName?{name:N.tagName,close:N.type=="closeTag"}:null},xmlCurrentContext:function(N){for(var Mt=[],Et=N.context;Et;Et=Et.prev)Mt.push(Et.tagName);return Mt.reverse()}}}),rt.defineMIME("text/xml","xml"),rt.defineMIME("application/xml","xml"),rt.mimeModes.hasOwnProperty("text/html")||rt.defineMIME("text/html",{name:"xml",htmlMode:!0})})(I(631))},858:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>rt});const rt={run:function(_t){_t.DomComponents.clear(),_t.CssComposer.clear()}}},884:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>J});var rt=I(50),_t=I(163),X=I(668);const J={run:function(B){(0,rt.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=B,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(B){this.toggleMove(),this.disableDragger()},onKeyUp:function(B){(0,_t.getKeyChar)(B)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(B){this.toggleDragger(1,B)},disableDragger:function(B){this.toggleDragger(0,B)},toggleDragger:function(B,k){var P=this.canvasModel,E=this.em,j=this.dragger,L=B?"add":"remove";this.getCanvas().classList[L]("".concat(this.ppfx,"is__grabbing")),j||(j=new X.Z({getPosition:function(){return{x:P.get("x"),y:P.get("y")}},setPosition:function(ot){var it=ot.x,At=ot.y;P.set({x:it,y:At})},onStart:function(ot,it){E.trigger("canvas:move:start",it)},onDrag:function(ot,it){E.trigger("canvas:move",it)},onEnd:function(ot,it){E.trigger("canvas:move:end",it)}}),this.dragger=j),B?j.start(k):j.stop()},toggleMove:function(B){var k=this.ppfx,P=B?"add":"remove",E=B?"on":"off",j={on:_t.on,off:_t.off},L=this.getCanvas(),ot=["".concat(k,"is__grab")];!B&&ot.push("".concat(k,"is__grabbing")),ot.forEach(function(it){return L.classList[P](it)}),j[E](document,"keyup",this.onKeyUp),j[E](L,"mousedown",this.enableDragger),j[E](document,"mouseup",this.disableDragger)}}},790:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>B,defineCommand:()=>J});var rt,_t=I(346),X=(rt=function(k,P){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,j){E.__proto__=j}||function(E,j){for(var L in j)Object.prototype.hasOwnProperty.call(j,L)&&(E[L]=j[L])},rt(k,P)},function(k,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function E(){this.constructor=k}rt(k,P),k.prototype=P===null?Object.create(P):(E.prototype=P.prototype,new E)});function J(k){return k}const B=function(k){function P(E){var j=k.call(this,0)||this;j.config=E||{},j.em=j.config.em||{};var L=j.config.stylePrefix;return j.pfx=L,j.ppfx=j.config.pStylePrefix,j.hoverClass="".concat(L,"hover"),j.badgeClass="".concat(L,"badge"),j.plhClass="".concat(L,"placeholder"),j.freezClass="".concat(j.ppfx,"freezed"),j.canvas=j.em.Canvas,j.init(j.config),j}return X(P,k),P.prototype.onFrameScroll=function(E){},P.prototype.getCanvas=function(){return this.canvas.getElement()},P.prototype.getCanvasBody=function(){return this.canvas.getBody()},P.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},P.prototype.offset=function(E){var j=E.getBoundingClientRect();return{top:j.top+E.ownerDocument.body.scrollTop,left:j.left+E.ownerDocument.body.scrollLeft}},P.prototype.init=function(E){},P.prototype.callRun=function(E,j){j===void 0&&(j={});var L=this.id;if(E.trigger("run:".concat(L,":before"),j),!j||!j.abort){var ot=j.sender||E,it=this.run(E,ot,j);return E.trigger("run:".concat(L),it,j),E.trigger("run",L,it,j),it}E.trigger("abort:".concat(L),j)},P.prototype.callStop=function(E,j){j===void 0&&(j={});var L=this.id,ot=j.sender||E;E.trigger("stop:".concat(L,":before"),j);var it=this.stop(E,ot,j);return E.trigger("stop:".concat(L),it,j),E.trigger("stop",L,it,j),it},P.prototype.stopCommand=function(E){this.em.Commands.stop(this.id,E)},P.prototype.run=function(E,j,L){},P.prototype.stop=function(E,j,L){},P}(_t.Hn)},180:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>X});var rt=I(50),_t=function(J,B,k){if(k||arguments.length===2)for(var P,E=0,j=B.length;E<j;E++)!P&&E in B||(P||(P=Array.prototype.slice.call(B,0,E)),P[E]=B[E]);return J.concat(P||Array.prototype.slice.call(B))};const X={run:function(J,B,k){var P=this;k===void 0&&(k={});var E=[],j=k.component||J.getSelectedAll();return(j=(0,rt.isArray)(j)?_t([],j,!0):[j]).filter(Boolean).forEach(function(L){if(!L.get("removable"))return E.push(L),P.em.logWarning("The element is not removable",{component:L});L.remove()}),J.select(E),j}}},544:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>B});var rt=I(50),_t=I(668),X=function(){return X=Object.assign||function(k){for(var P,E=1,j=arguments.length;E<j;E++)for(var L in P=arguments[E])Object.prototype.hasOwnProperty.call(P,L)&&(k[L]=P[L]);return k},X.apply(this,arguments)},J="dmode";const B={run:function(k,P,E){var j=this;E===void 0&&(E={}),(0,rt.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var L=E.target,ot=E.event,it=E.mode,At=E.dragger,jt=At===void 0?{}:At,Dt=L.getEl(),te=X({doc:Dt.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return j.guidesStatic},guidesTarget:function(){return j.guidesTarget}},jt);this.setupGuides(),this.opts=E,this.editor=k,this.em=k.getModel(),this.target=L,this.isTran=it=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var ft=this.dragger;return ft?ft.setOptions(te):(ft=new _t.Z(te),this.dragger=ft),ot&&ft.start(ot),this.toggleDrag(1),this.em.trigger("".concat(J,":start"),this.getEventOpts()),ft},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(k){var P=k.guide;P&&P.parentNode.removeChild(P)}),this.guides=[]},getGuidesContainer:function(){var k=this,P=this.guidesEl;if(!P){var E=this,j=E.editor,L=E.em,ot=E.opts,it=j.getConfig().stylePrefix,At=document.createElement("div"),jt=document.createElement("div"),Dt='<div class="'.concat(it,"guide-info__line ").concat(it,`danger-bg">
        <div class="`).concat(it,"guide-info__content ").concat(it,`danger-color"></div>
      </div>`);(P=document.createElement("div")).className="".concat(it,"guides"),At.className="".concat(it,"guide-info ").concat(it,"guide-info__x"),jt.className="".concat(it,"guide-info ").concat(it,"guide-info__y"),At.innerHTML=Dt,jt.innerHTML=Dt,P.appendChild(At),P.appendChild(jt),j.Canvas.getGlobalToolsEl().appendChild(P),this.guidesEl=P,this.elGuideInfoX=At,this.elGuideInfoY=jt,this.elGuideInfoContentX=At.querySelector(".".concat(it,"guide-info__content")),this.elGuideInfoContentY=jt.querySelector(".".concat(it,"guide-info__content")),L.on("canvas:update frame:scroll",(0,rt.debounce)(function(){var te;k.updateGuides(),ot.debug&&((te=k.guides)===null||te===void 0||te.forEach(function(ft){return k.renderGuide(ft)}))},200))}return P},getGuidesStatic:function(){var k=this,P=[],E=this.target.getEl(),j=E.parentNode,L=j===void 0?{}:j;return(0,rt.each)(L.children,function(ot){return P=P.concat(E!==ot?k.getElementGuides(ot):[])}),P.concat(this.getElementGuides(L))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(k){var P,E,j=this;(k||this.guides).forEach(function(L){var ot=L.origin,it=P===ot?E:j.getElementPos(ot);P=ot,E=it,(0,rt.each)(j.getGuidePosUpdate(L,it),function(At,jt){return L[jt]=At}),L.originRect=it})},getGuidePosUpdate:function(k,P){var E={},j=P.top,L=P.height,ot=P.left,it=P.width;switch(k.type){case"t":E.y=j;break;case"b":E.y=j+L;break;case"l":E.x=ot;break;case"r":E.x=ot+it;break;case"x":E.x=ot+it/2;break;case"y":E.y=j+L/2}return E},renderGuide:function(k){k===void 0&&(k={});var P=k.guide||document.createElement("div"),E="px",j=k.active?2:1,L=P.children[0];return P.style="position: absolute; background-color: ".concat(k.active?"green":"red",";"),P.children.length||((L=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",P.appendChild(L)),k.y?(P.style.width="100%",P.style.height="".concat(j).concat(E),P.style.top="".concat(k.y).concat(E),P.style.left=0):(P.style.width="".concat(j).concat(E),P.style.height="100%",P.style.left="".concat(k.x).concat(E),P.style.top="0".concat(E)),!k.guide&&this.guidesContainer.appendChild(P),P},getElementPos:function(k){return this.editor.Canvas.getElementPos(k,{noScroll:1})},getElementGuides:function(k){var P=this,E=this.opts,j=this.getElementPos(k),L=j.top,ot=j.height,it=j.left,At=j.width,jt=[{type:"t",y:L},{type:"b",y:L+ot},{type:"l",x:it},{type:"r",x:it+At},{type:"x",x:it+At/2},{type:"y",y:L+ot/2}].map(function(Dt){return X(X({},Dt),{origin:k,originRect:j,guide:E.debug&&P.renderGuide(Dt)})});return jt.forEach(function(Dt){var te;return(te=P.guides)===null||te===void 0?void 0:te.push(Dt)}),jt},getTranslate:function(k,P){P===void 0&&(P="x");var E=0;return(k||"").split(" ").forEach(function(j){var L=j.trim(),ot="translate".concat(P.toUpperCase(),"(");L.indexOf(ot)===0&&(E=parseFloat(L.replace(ot,"")))}),E},setTranslate:function(k,P,E){var j="translate".concat(P.toUpperCase(),"("),L="".concat(j).concat(E,")"),ot=(k||"").split(" ").map(function(it){return it.trim().indexOf(j)===0&&(it=L),it}).join(" ");return ot.indexOf(j)<0&&(ot+=" ".concat(L)),ot},getPosition:function(){var k=this.target,P=this.isTran,E=k.getStyle(),j=E.left,L=E.top,ot=E.transform,it=0,At=0;return P?(it=this.getTranslate(ot),At=this.getTranslate(ot,"y")):(it=parseFloat(j||0),At=parseFloat(L||0)),{x:it,y:At}},setPosition:function(k){var P=k.x,E=k.y,j=k.end,L=k.position,ot=k.width,it=k.height,At=this,jt=At.target,Dt=At.isTran,te=At.em,ft="px",ut=j?"":1,Nt="".concat(P).concat(ft),Zt="".concat(E).concat(ft),re={};if(Dt){var at=jt.getStyle().transform||"";at=this.setTranslate(at,"x",Nt),re={transform:at=this.setTranslate(at,"y",Zt),en:ut},jt.addStyle(re,{avoidStore:!j})}else{var D={position:L,width:ot,height:it},H={left:Nt,top:Zt,en:ut};(0,rt.keys)(D).forEach(function(Y){var et=D[Y];et&&(H[Y]=et)}),re=H,jt.addStyle(re,{avoidStore:!j})}te.getSelected()&&(0,rt.keys)(re).forEach(function(Y){return te.trigger("update:component:style:".concat(Y))})},_getDragData:function(){var k=this.target;return{target:k,parent:k.parent(),index:k.index()}},onStart:function(k){var P=this,E=P.target,j=P.editor,L=P.isTran,ot=P.opts,it=ot.center,At=ot.onStart,jt=j.Canvas,Dt=E.getStyle(),te="absolute",ft=[te,"relative"];if(At&&At(this._getDragData()),!L&&Dt.position!==te){var ut=jt.offset(E.getEl()),Nt=ut.left,Zt=ut.top,re=ut.width,at=ut.height,D=E.parent(),H=void 0;do{var Y=D.getStyle();H=ft.indexOf(Y.position)>=0?D:null,D=D.parent()}while(D&&!H);if(it){var et=jt.getMouseRelativeCanvas(k);Nt=et.x,Zt=et.y}else if(H){var Ct=jt.offset(H.getEl());Nt-=Ct.left,Zt-=Ct.top}this.setPosition({x:Nt,y:Zt,width:"".concat(re,"px"),height:"".concat(at,"px"),position:te})}},onDrag:function(){for(var k=this,P=[],E=0;E<arguments.length;E++)P[E]=arguments[E];var j=this,L=j.guidesTarget,ot=j.opts,it=ot.onDrag;this.updateGuides(L),ot.debug&&L.forEach(function(At){return k.renderGuide(At)}),ot.guidesInfo&&this.renderGuideInfo(L.filter(function(At){return At.active})),it&&it(this._getDragData())},onEnd:function(k,P,E){E===void 0&&(E={});var j=this,L=j.editor,ot=j.opts,it=j.id,At=ot.onEnd;At&&At(k,E,X(X({event:k},E),this._getDragData())),L.stopCommand(it),this.hideGuidesInfo(),this.em.trigger("".concat(J,":end"),this.getEventOpts())},hideGuidesInfo:function(){var k=this;["X","Y"].forEach(function(P){var E=k["elGuideInfo".concat(P)];E&&(E.style.display="none")})},renderGuideInfo:function(k){var P=this;k===void 0&&(k=[]);var E=this.guidesStatic;this.hideGuidesInfo(),k.forEach(function(j){var L=j.origin,ot=j.x,it=P.getElementPos(L),At=(0,rt.isUndefined)(ot)?"y":"x",jt=At==="y",Dt=it[jt?"left":"top"],te=it.rect[jt?"left":"top"],ft=jt?Dt+it.width:Dt+it.height,ut=jt?te+it.rect.width:te+it.rect.height,Nt=P["elGuideInfo".concat(At.toUpperCase())],Zt=P["elGuideInfoContent".concat(At.toUpperCase())],re=Nt.style,at=E==null?void 0:E.filter(function(Oe){return Oe.type===j.type}).map(function(Oe){var be=Oe.originRect,de=be.left,ce=be.width,se=be.top,st=be.height,Yt=jt?de+ce:se+st;return{gap:Yt<Dt?Dt-Yt:(jt?de:se)-ft,guide:Oe}}).filter(function(Oe){return Oe.gap>0}).sort(function(Oe,be){return Oe.gap-be.gap}).map(function(Oe){return Oe.guide})[0];if(at){var D=at.originRect,H=D.left,Y=D.width,et=D.top,Ct=D.height,nt=D.rect,vt=jt?H<it.left:et<it.top,N=jt?H:et,Mt=jt?nt.left:nt.top,Et=jt?H+Y:et+Ct,Kt=jt?nt.left+nt.width:nt.top+nt.height,Ae=jt?j.y:j.x,Se=vt?Et:ft,_e="".concat(Ae,"px"),Ne=vt?Dt-Et:N-ft,xe=vt?te-Kt:Mt-ut;re.display="",re[jt?"top":"left"]=_e,re[jt?"left":"top"]="".concat(Se,"px"),re[jt?"width":"height"]="".concat(Ne,"px"),Zt.innerHTML="".concat(Math.round(xe),"px"),P.em.trigger("".concat(J,":active"),X(X({},P.getEventOpts()),{guide:j,guidesStatic:E,matched:at,posFirst:Ae,posSecond:Se,size:Ne,sizeRaw:xe,elGuideInfo:Nt,elGuideInfoCnt:Zt}))}})},toggleDrag:function(k){var P=this.ppfx,E=this.editor,j=k?"add":"remove",L=["".concat(P,"is__grabbing")],ot=E.Canvas,it=ot.getBody();L.forEach(function(At){return it.classList[j](At)}),ot[k?"startAutoscroll":"stopAutoscroll"]()}}},236:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>rt});const rt={run:function(_t){if(_t.Canvas.hasFocus()){var X=[];_t.getSelectedAll().forEach(function(J){var B=J.components(),k=B&&B.filter(function(P){return P.get("selectable")})[0];k&&X.push(k)}),X.length&&_t.select(X)}}}},368:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>rt});const rt={run:function(_t,X,J){if(J===void 0&&(J={}),_t.Canvas.hasFocus()||J.force){var B=[];_t.getSelectedAll().forEach(function(k){for(var P=k.parent();P&&!P.get("selectable");)P=P.parent();P&&B.push(P)}),B.length&&_t.select(B)}}}},243:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>rt});const rt={run:function(_t){if(_t.Canvas.hasFocus()){var X=[];_t.getSelectedAll().forEach(function(J){var B=J.parent();if(B){var k,P=B.components().length,E=0,j=0;do E++,k=(j=J.index()+E)<=P?B.getChildAt(j):null;while(k&&!k.get("selectable"));X.push(k||J)}}),X.length&&_t.select(X)}}}},400:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>rt});const rt={run:function(_t){if(_t.Canvas.hasFocus()){var X=[];_t.getSelectedAll().forEach(function(J){var B=J.parent();if(B){var k,P=0,E=0;do P++,k=(E=J.index()-P)>=0?B.getChildAt(E):null;while(k&&!k.get("selectable"));X.push(k||J)}}),X.length&&_t.select(X)}}}},910:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=I(50);const _t={run:function(X,J,B){B===void 0&&(B={});var k=B.target,P=[];if(!k.get("styles"))return P;var E=k.get("type"),j=X.Pages.getAllWrappers();if(!(0,rt.flatten)(j.map(function(ot){return ot.findType(E)})).length){var L=X.CssComposer.getAll();P=L.filter(function(ot){return ot.get("group")==="cmp:".concat(E)}),L.remove(P)}return P}}},744:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=function(X,J,B){if(B||arguments.length===2)for(var k,P=0,E=J.length;P<E;P++)!k&&P in J||(k||(k=Array.prototype.slice.call(J,0,P)),k[P]=J[P]);return X.concat(k||Array.prototype.slice.call(J))};const _t={run:function(X){var J=X.getModel(),B=rt([],X.getSelectedAll(),!0);B.length&&J.set("clipboard",B)}}},517:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>J});var rt=I(50),_t=I(895),X=I(407);const J=(0,rt.extend)({},X.default,{init:function(){(0,rt.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(B){B.stopPropagation();var k=(0,_t.default)(B.target);k.data("model").get("removable")&&(k.addClass(this.hoverClass),this.attachBadge(k.get(0)))},stopDelete:function(B){B.stopPropagation(),(0,_t.default)(B.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(B){B.stopPropagation();var k=(0,_t.default)(B.target);k.data("model").get("removable")&&(k.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(B){this.badge.html("Remove "+B.getName())}})},457:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=I(895);const _t={run:function(X,J){var B=this;J&&J.set&&J.set("active",0);var k=X.getConfig(),P=X.Modal,E=k.stylePrefix;if(this.cm=X.CodeManager||null,!this.$editors){var j=this.buildEditor("htmlmixed","hopscotch","HTML"),L=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=j.el,this.cssEditor=L.el;var ot=(0,rt.default)('<div class="'.concat(E,'export-dl"></div>'));ot.append(j.$el).append(L.$el),this.$editors=ot}P.open({title:k.textViewCode,content:this.$editors}).getModel().once("change:open",function(){return X.stopCommand("".concat(B.id))}),this.htmlEditor.setContent(X.getHtml()),this.cssEditor.setContent(X.getCss())},stop:function(X){var J=X.Modal;J&&J.close()},buildEditor:function(X,J,B){var k=document.createElement("textarea");!this.codeMirror&&(this.codeMirror=this.cm.getViewer("CodeMirror"));var P=this.codeMirror.clone().set({label:B,codeName:X,theme:J,input:k}),E=new this.cm.EditorView({model:P,config:this.cm.getConfig()}).render().$el;return P.init(k),{el:P,$el:E}}}},975:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=I(50);const _t={isEnabled:function(){var X=document;return!!(X.fullscreenElement||X.webkitFullscreenElement||X.mozFullScreenElement)},enable:function(X){var J="";return X.requestFullscreen?X.requestFullscreen():X.webkitRequestFullscreen?(J="webkit",X.webkitRequestFullscreen()):X.mozRequestFullScreen?(J="moz",X.mozRequestFullScreen()):X.msRequestFullscreen&&X.msRequestFullscreen(),J},disable:function(){var X=document;this.isEnabled()&&(X.exitFullscreen?X.exitFullscreen():X.webkitExitFullscreen?X.webkitExitFullscreen():X.mozCancelFullScreen?X.mozCancelFullScreen():X.msExitFullscreen&&X.msExitFullscreen())},fsChanged:function(X){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(X||"","fullscreenchange"),this.fsChanged))},run:function(X,J,B){B===void 0&&(B={}),this.sender=J;var k=B.target,P=(0,rt.isElement)(k)?k:document.querySelector(k),E=this.enable(P||X.getContainer());this.fsChanged=this.fsChanged.bind(this,E),document.addEventListener(E+"fullscreenchange",this.fsChanged),X.trigger("change:canvasOffset")},stop:function(X,J){J&&J.set&&J.set("active",!1),this.disable(),X&&X.trigger("change:canvasOffset")}}},191:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>k});var rt=I(50),_t=I(895),X=I(163),J=I(407),B=I(189);const k=(0,rt.extend)({},B.default,J.default,{init:function(P){J.default.init.apply(this,arguments),(0,rt.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=P,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var P=[],E=0;E<arguments.length;E++)P[E]=arguments[E];J.default.enable.apply(this,P),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var j=this.$wrapper;j.css("cursor","move"),j.on("mousedown",this.initSorter),j.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(P){var E=(0,_t.default)(P.target).data("model").get("draggable");E&&(this.cacheEl=null,this.startSelectPosition(P.target,this.frameEl.contentDocument),this.sorter.draggable=E,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,X.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(P){var E=P.get("draggable");if(E){this.cacheEl=null;var j=P.view.el;this.startSelectPosition(j,this.frameEl.contentDocument),this.sorter.draggable=E,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,X.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(P){this.cacheEl=null;var E=P[P.length-1],j=(this.em.get("currentFrame")||{}).model,L=E.getEl(j),ot=L.ownerDocument;this.startSelectPosition(L,ot,{onStart:this.onStart}),this.sorter.draggable=E.get("draggable"),this.sorter.toMove=P,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,X.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,X.off)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,X.off)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(P,E){},rollback:function(P,E){((P.which||P.keyCode)==27||E)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,_t.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,_t.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var P=[],E=0;E<arguments.length;E++)P[E]=arguments[E];J.default.stop.apply(this,P),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var j=this.$wrapper;j.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>X});var rt=I(50),_t=I(491);const X={open:function(J){var B=this,k=this,P=k.editor,E=k.title,j=k.config,L=k.am,ot=j.custom;if((0,rt.isFunction)(ot.open))return ot.open(L.__customData());P.Modal.open({title:E,content:J}).onceClose(function(){return P.stopCommand(B.id)})},close:function(){var J=this.config.custom;if((0,rt.isFunction)(J.close))return J.close(this.am.__customData());var B=this.editor.Modal;B&&B.close()},run:function(J,B,k){k===void 0&&(k={});var P=J.AssetManager,E=P.getConfig(),j=k.types,L=j===void 0?[]:j,ot=k.accept,it=k.select;if(this.title=k.modalTitle||J.t("assetManager.modalTitle")||"",this.editor=J,this.config=E,this.am=P,P.setTarget(k.target),P.onClick(k.onClick),P.onDblClick(k.onDblClick),P.onSelect(k.onSelect),P.__behaviour({select:it,types:L,options:k}),E.custom)this.rendered=this.rendered||(0,_t.ut)("div"),this.rendered.className="".concat(E.stylePrefix,"custom-wrp"),P.__behaviour({container:this.rendered}),P.__trgCustom();else{if(!this.rendered||L){var At=P.getAll().filter(function(Dt){return Dt});L&&L.length&&(At=At.filter(function(Dt){return L.indexOf(Dt.get("type"))!==-1})),P.render(At),this.rendered=P.getContainer()}if(ot){var jt=this.rendered.querySelector("input#".concat(E.stylePrefix,"uploadFile"));jt&&jt.setAttribute("accept",ot)}}return this.open(this.rendered),this},stop:function(J){this.editor=J,this.close(this.rendered)}}},117:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>X});var rt=I(50),_t=I(491);const X={open:function(){var J=this,B=J.container,k=J.editor,P=J.bm,E=J.config,j=E.custom,L=E.appendTo;if((0,rt.isFunction)(j.open))return j.open(P.__customData());if(this.firstRender&&!L){var ot="views-container",it=k.Panels;(it.getPanel(ot)||it.addPanel({id:ot})).set("appendContent",B).trigger("change:appendContent"),j||B.appendChild(P.render())}B&&(B.style.display="block")},close:function(){var J=this.container,B=this.config.custom;if((0,rt.isFunction)(B.close))return B.close(this.bm.__customData());J&&(J.style.display="none")},run:function(J){var B=J.Blocks;this.config=B.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,_t.ut)("div"),this.editor=J,this.bm=B;var k=this.container;B.__behaviour({container:k}),this.config.custom&&B.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>rt});const rt={run:function(_t){var X=_t.LayerManager,J=_t.Panels,B=X.getConfig();if(!B.appendTo){if(!this.layers){var k="views-container",P=document.createElement("div"),E=J.getPanel(k)||J.addPanel({id:k});B.custom?X.__trgCustom({container:P}):P.appendChild(X.render()),E.set("appendContent",P).trigger("change:appendContent"),this.layers=P}this.layers.style.display="block"}},stop:function(){var _t=this.layers;_t&&(_t.style.display="none")}}},801:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=I(895);const _t={run:function(X,J){if(this.sender=J,!this.$cn){var B=X.getConfig(),k=X.Panels,P="change:appendContent";this.$cn=(0,rt.default)("<div></div>"),this.$cn2=(0,rt.default)("<div></div>"),this.$cn.append(this.$cn2);var E=X.DeviceManager;if(E&&B.showDevices){var j=k.addPanel({id:"devices-c"}),L=E.render();j.set("appendContent",L).trigger(P)}var ot=X.SelectorManager;this.slm=ot;var it=ot.getConfig();it.custom?ot.__trgCustom({container:this.$cn2.get(0)}):it.appendTo||this.$cn2.append(ot.render([]));var At=X.StyleManager;this.sm=At;var jt=At.getConfig(),Dt=jt.stylePrefix;this.$header=(0,rt.default)('<div class="'.concat(Dt,'header">').concat(X.t("styleManager.empty"),"</div>")),this.$cn.append(this.$header),jt.custom?At.__trgCustom({container:this.$cn2.get(0)}):jt.appendTo||this.$cn2.append(At.render());var te="views-container";this.panel=k.getPanel(te),this.panel||(this.panel=k.addPanel({id:te})),this.panel.set("appendContent",this.$cn).trigger(P),this.em=X.getModel(),this.listenTo(this.em,At.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var X,J,B,k,P=this.sender,E=this.sm;P&&P.get&&!P.get("active")||!E||(E.getSelected()?((X=this.$cn2)===null||X===void 0||X.show(),(J=this.$header)===null||J===void 0||J.hide()):((B=this.$cn2)===null||B===void 0||B.hide(),(k=this.$header)===null||k===void 0||k.show()))},stop:function(){var X,J;(X=this.$cn2)===null||X===void 0||X.hide(),(J=this.$header)===null||J===void 0||J.hide()}}},395:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=I(895);const _t={run:function(X,J){this.sender=J;var B,k=X.getModel(),P=X.Config.stylePrefix,E=X.TraitManager,j=E.getConfig();if(!j.appendTo){if(!this.$cn){this.$cn=(0,rt.default)("<div></div>"),this.$cn2=(0,rt.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,rt.default)("<div>").append('<div class="'.concat(j.stylePrefix,'header">').concat(k.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),this.$cn2.append('<div class="'.concat(P,'traits-label">').concat(k.t("traitManager.label"),"</div>")),this.$cn2.append(E.render());var L=X.Panels;(B=L.getPanel("views-container")?L.getPanel("views-container"):L.addPanel({id:"views-container"}))==null||B.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=X.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var X=this.sender;X&&X.get&&!X.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=I(50);const _t={run:function(X,J,B){B===void 0&&(B={});var k=X.getModel().get("clipboard"),P=X.getSelected();k&&P&&(X.getSelectedAll().forEach(function(E){var j=E.collection;if(j){var L,ot={at:E.index()+1,action:B.action||"paste-component"};if((0,rt.contains)(k,E)&&E.get("copyable"))L=j.add(E.clone(),ot);else{var it=k.filter(function(At){return At.get("copyable")}).filter(function(At){return X.Components.canMove(E.parent(),At).result});L=j.add(it.map(function(At){return At.clone()}),ot)}(L=(0,rt.isArray)(L)?L:[L]).forEach(function(At){return X.trigger("component:paste",At)})}}),P.emitUpdate())}}},129:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>J});var rt=I(50),_t=function(B,k,P){if(P||arguments.length===2)for(var E,j=0,L=k.length;j<L;j++)!E&&j in k||(E||(E=Array.prototype.slice.call(k,0,j)),E[j]=k[j]);return B.concat(E||Array.prototype.slice.call(k))},X="core:component-outline";const J={getPanels:function(B){return this.panels||(this.panels=B.Panels.getPanels()),this.panels},preventDrag:function(B){B.abort=1},tglEffects:function(B){var k=this.em,P=B?"on":"off";if(k){var E=k.Canvas,j=E.getBody(),L=E.getToolbarEl();L&&(L.style.display=B?"none":"");var ot=j.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,rt.each)(ot,function(it){return it.style.pointerEvents=B?"all":""}),k[P]("run:tlb-move:before",this.preventDrag)}},run:function(B,k){var P=this;this.sender=k,this.selected=_t([],B.getSelectedAll(),!0),B.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=B.Commands.isActive(X)),this.shouldRunSwVisibility&&B.stopCommand(X),B.getModel().stopDefault();var E=this.getPanels(B),j=B.Canvas.getElement(),L=B.getEl(),ot=B.Config.stylePrefix;if(!this.helper){var it=document.createElement("span");it.className="".concat(ot,"off-prv fa fa-eye-slash"),L.appendChild(it),it.onclick=function(){return P.stopCommand()},this.helper=it}this.helper.style.display="inline-block",E.forEach(function(jt){return jt.set("visible",!1)});var At=j.style;At.width="100%",At.height="100%",At.top="0",At.left="0",At.padding="0",At.margin="0",B.refresh(),this.tglEffects(1)},stop:function(B){var k=this.sender,P=k===void 0?{}:k,E=this.selected;P.set&&P.set("active",0);var j=this.getPanels(B);this.shouldRunSwVisibility&&(B.runCommand(X),this.shouldRunSwVisibility=!1),B.getModel().runDefault(),j.forEach(function(L){return L.set("visible",!0)}),B.Canvas.getElement().setAttribute("style",""),E&&B.select(E),delete this.selected,this.helper&&(this.helper.style.display="none"),B.refresh(),this.tglEffects()}}},116:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=function(){return rt=Object.assign||function(X){for(var J,B=1,k=arguments.length;B<k;B++)for(var P in J=arguments[B])Object.prototype.hasOwnProperty.call(J,P)&&(X[P]=J[P]);return X},rt.apply(this,arguments)};const _t={run:function(X,J,B){var k=B||{},P=X.Canvas,E=P.getCanvasView(),j=rt({appendTo:P.getResizerEl(),prefix:X.getConfig().stylePrefix,posFetcher:E.getElementPos.bind(E),mousePosFetcher:P.getMouseRelativePos},k.options||{}),L=this.canvasResizer;return L&&!k.forceNew||(this.canvasResizer=new X.Utils.Resizer(j),L=this.canvasResizer),L.setOptions(j,!0),L.blur(),L.focus(k.el),L},stop:function(){var X;(X=this.canvasResizer)===null||X===void 0||X.blur()}}},407:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>re});var rt,_t=I(50),X=I(895),J=I(346),B=(rt=function(at,D){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,Y){H.__proto__=Y}||function(H,Y){for(var et in Y)Object.prototype.hasOwnProperty.call(Y,et)&&(H[et]=Y[et])},rt(at,D)},function(at,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function H(){this.constructor=at}rt(at,D),at.prototype=D===null?Object.create(D):(H.prototype=D.prototype,new H)});const k=function(at){function D(){return at!==null&&at.apply(this,arguments)||this}return B(D,at),D.prototype.defaults=function(){return{command:"",attributes:{}}},D}(J.Hn);var P=function(){var at=function(D,H){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,et){Y.__proto__=et}||function(Y,et){for(var Ct in et)Object.prototype.hasOwnProperty.call(et,Ct)&&(Y[Ct]=et[Ct])},at(D,H)};return function(D,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function Y(){this.constructor=D}at(D,H),D.prototype=H===null?Object.create(H):(Y.prototype=H.prototype,new Y)}}(),E=function(at){function D(){return at!==null&&at.apply(this,arguments)||this}return P(D,at),D}(J.FE);const j=E;E.prototype.model=k;var L=I(330),ot=function(){var at=function(D,H){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,et){Y.__proto__=et}||function(Y,et){for(var Ct in et)Object.prototype.hasOwnProperty.call(et,Ct)&&(Y[Ct]=et[Ct])},at(D,H)};return function(D,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function Y(){this.constructor=D}at(D,H),D.prototype=H===null?Object.create(H):(Y.prototype=H.prototype,new Y)}}(),it=function(){return it=Object.assign||function(at){for(var D,H=1,Y=arguments.length;H<Y;H++)for(var et in D=arguments[H])Object.prototype.hasOwnProperty.call(D,et)&&(at[et]=D[et]);return at},it.apply(this,arguments)};const At=function(at){function D(H){var Y=at.call(this,H)||this;return Y.em=H.config.em,Y}return ot(D,at),D.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},D.prototype.attributes=function(){return this.model.get("attributes")},D.prototype.handleClick=function(H){H.preventDefault(),H.stopPropagation();var Y=this.em,et=Y.Canvas.getFrameEl().getBoundingClientRect(),Ct=et.left,nt=et.top,vt=it(it({},H),{clientX:H.clientX-Ct,clientY:H.clientY-nt});Y.trigger("toolbar:run:before",{event:vt}),this.execCommand(vt)},D.prototype.execCommand=function(H){var Y=this.em,et={event:H},Ct=this.model.get("command"),nt=Y.Editor;(0,_t.isFunction)(Ct)&&Ct(nt,null,et),(0,_t.isString)(Ct)&&nt.runCommand(Ct,et)},D.prototype.render=function(){var H=this,Y=H.em,et=H.$el,Ct=H.model,nt=Ct.get("id"),vt=Ct.get("label"),N=Y.getConfig().stylePrefix;return et.addClass("".concat(N,"toolbar-item")),nt&&et.addClass("".concat(N,"toolbar-item__").concat(nt)),vt&&et.append(vt),this},D}(J.G7);var jt=function(){var at=function(D,H){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,et){Y.__proto__=et}||function(Y,et){for(var Ct in et)Object.prototype.hasOwnProperty.call(et,Ct)&&(Y[Ct]=et[Ct])},at(D,H)};return function(D,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function Y(){this.constructor=D}at(D,H),D.prototype=H===null?Object.create(H):(Y.prototype=H.prototype,new Y)}}(),Dt=function(at){function D(H){var Y=at.call(this,H)||this,et=H.em;return Y.em=et,Y.config={em:et},Y.listenTo(Y.collection,"reset",Y.render),Y}return jt(D,at),D.prototype.onRender=function(){var H=this.em.config.stylePrefix;this.el.className="".concat(H,"toolbar-items")},D}(L.Z);const te=Dt;Dt.prototype.itemView=At;var ft,ut=I(491),Nt=I(163),Zt=function(){return Zt=Object.assign||function(at){for(var D,H=1,Y=arguments.length;H<Y;H++)for(var et in D=arguments[H])Object.prototype.hasOwnProperty.call(D,et)&&(at[et]=D[et]);return at},Zt.apply(this,arguments)};const re={init:function(at){(0,_t.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),ft=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(at){var D=this,H=this.em,Y=H.getConfig().listenToEl,et=H.getContainer().parentNode,Ct=at?"on":"off",nt={on:Nt.on,off:Nt.off};!Y.length&&et&&Y.push(et),nt[Ct](window,"resize",this.onFrameUpdated),nt[Ct](Y,"scroll",this.onContainerChange),H[Ct]("component:toggled component:update undo redo",this.onSelect,this),H[Ct]("change:componentHovered",this.onHovered,this),H[Ct]("component:resize styleable:change component:input",this.updateGlobalPos,this),H[Ct]("component:update:toolbar",this._upToolbar,this),H[Ct]("change:canvasOffset",this.updateAttached,this),H[Ct]("frame:updated",this.onFrameUpdated,this),H[Ct]("canvas:updateTools",this.onFrameUpdated,this),H.Canvas.getFrames().forEach(function(vt){var N=vt.view,Mt=N==null?void 0:N.getWindow();Mt&&function(Et,Kt){nt[Ct](Kt,"mouseover",D.onHover),nt[Ct](Kt,"mouseleave",D.onOut),nt[Ct](Kt,"click",D.onClick),nt[Ct](Et,"scroll",D.onFrameScroll,!0)}(Mt,N==null?void 0:N.getBody())})},onHover:function(at){at.stopPropagation();var D=this.em,H=at.target,Y=(0,Nt.getViewEl)(H),et=Y&&Y._getFrame(),Ct=(0,X.default)(H),nt=Ct.data("model");if(!nt)for(var vt=Ct.parent();!nt&&vt.length&&!(0,ut.Mx)(vt[0]);)nt=vt.data("model"),vt=vt.parent();this.currentDoc=H.ownerDocument,D.setHovered(nt,{useValid:!0}),et&&D.set("currentFrame",et)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(at,D){var H,Y=this,et={};D?(H=D.views)===null||H===void 0||H.forEach(function(Ct){var nt=Ct.el,vt=Y.getElementPos(nt);et={el:nt,pos:vt,component:D,view:(0,Nt.getViewEl)(nt)},Y.updateToolsLocal(et),nt.ownerDocument===Y.currentDoc&&(Y.elHovered=et)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(Ct){var nt=Ct.view,vt=nt&&nt.getToolsEl();vt&&Y.toggleToolsEl(0,0,{el:vt})}))},onSelect:(0,_t.debounce)(function(){var at=this.em,D=at.getSelected(),H=at.get("currentFrame")||{},Y=D&&D.getView(H.model),et=Y&&Y.el,Ct={};et&&(0,ut.pn)(et)&&(Ct={el:et,pos:this.getElementPos(et),component:D,view:(0,Nt.getViewEl)(et)}),this.elSelected=Ct,this.updateToolsGlobal(),this.updateLocalPos(Ct),this.initResize(D)},0),updateGlobalPos:function(){var at=this.getElSelected();at.el&&(at.pos=this.getElementPos(at.el),this.updateToolsGlobal())},updateLocalPos:function(at){var D=this.getElHovered();D.el&&(D.pos=this.getElementPos(D.el),this.updateToolsLocal(at))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered(0)},toggleToolsEl:function(at,D,H){H===void 0&&(H={});var Y=H.el||this.canvas.getToolsEl(D);return Y&&(Y.style.display=at?"":"none"),Y||{}},showElementOffset:function(at,D,H){H===void 0&&(H={}),ft&&this.editor.runCommand("show-offset",{el:at,elPos:D,view:H.view,force:1,top:0,left:0})},hideElementOffset:function(at){this.editor.stopCommand("show-offset",{view:at})},showFixedElementOffset:function(at,D){this.editor.runCommand("show-offset",{el:at,elPos:D,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(at){this.canvas.getHighlighter(at).style.opacity=0},onClick:function(at){at.stopPropagation(),at.preventDefault();var D=this.em;if(D.get("_cmpDrag"))return D.set("_cmpDrag");var H=(0,X.default)(at.target),Y=H.data("model");if(!Y)for(var et=H.parent();!Y&&et.length&&!(0,ut.Mx)(et[0]);)Y=et.data("model"),et=et.parent();if(Y){if(D.isEditing()&&!Y.get("textable")&&Y.isChildOf("text"))return;this.select(Y,at)}},select:function(at,D){D===void 0&&(D={}),at&&(this.editor.select(at,{event:D,useValid:!0}),this.initResize(at))},updateBadge:function(at,D,H){H===void 0&&(H={});var Y=this.canvas,et=(0,X.default)(at).data("model");if(et&&et.get("badgable")){var Ct=this.getBadge(H);if(!H.posOnly){var nt=this.canvas.getConfig(),vt=et.getIcon(),N=nt.pStylePrefix||"",Mt="".concat(N,"badge"),Et=nt.customBadgeLabel,Kt="".concat(vt?'<div class="'.concat(Mt,'__icon">').concat(vt,"</div>"):"",`
        <div class="`).concat(Mt,'__name">').concat(et.getName(),"</div>");Ct.innerHTML=Et?Et(et):Kt}var Ae="px",Se=Ct.style;Se.display="block";var _e=Y.getTargetToElementFixed(at,Ct,{pos:D}).top,Ne=H.leftOff<0?-H.leftOff:0;Se.top=_e+Ae,Se.left=Ne+Ae}},showHighlighter:function(at){this.canvas.getHighlighter(at).style.opacity=""},initResize:function(at){var D,H=this.em,Y=this.canvas,et=H==null?void 0:H.Editor,Ct=(H==null?void 0:H.config).stylePrefix||"",nt="".concat(Ct,"resizing"),vt=!(0,_t.isElement)(at)&&(0,Nt.isTaggableNode)(at)?at:H.getSelected(),N=vt&&vt.get("resizable"),Mt={},Et=function(Ae,Se,_e){var Ne=_e.docs;Ne&&Ne.forEach(function(xe){var Oe=xe.body,be=Oe.className||"";Oe.className=(Ae=="add"?"".concat(be," ").concat(nt):be.replace(nt,"")).trim()})};if(et&&N){var Kt=(0,_t.isElement)(at)?at:vt.getEl();Mt={onStart:function(Ae,Se){Se===void 0&&(Se={});var _e=Se.el,Ne=Se.config,xe=Se.resizer,Oe=Ne.keyHeight,be=Ne.keyWidth,de=Ne.currentUnit,ce=Ne.keepAutoHeight,se=Ne.keepAutoWidth;Et("add",0,Se),D=H.Styles.getModelToStyle(vt),Y.toggleFramesEvents(!1);var st=getComputedStyle(_e),Yt=D.getStyle(),Wt=Yt[be];Ne.autoWidth=se&&Wt==="auto",isNaN(parseFloat(Wt))&&(Wt=st[be]);var ee=Yt[Oe];Ne.autoHeight=ce&&ee==="auto",isNaN(parseFloat(ee))&&(ee=st[Oe]),xe.startDim.w=parseFloat(Wt),xe.startDim.h=parseFloat(ee),ft=!1,de&&(Ne.unitHeight=(0,Nt.getUnitFromValue)(ee),Ne.unitWidth=(0,Nt.getUnitFromValue)(Wt))},onMove:function(){et.trigger("component:resize")},onEnd:function(Ae,Se){Et("remove",0,Se),et.trigger("component:resize"),Y.toggleFramesEvents(!0),ft=!0},updateTarget:function(Ae,Se,_e){if(_e===void 0&&(_e={}),D){var Ne=_e.store,xe=_e.selectedHandler,Oe=_e.config,be=Oe.keyHeight,de=Oe.keyWidth,ce=Oe.autoHeight,se=Oe.autoWidth,st=Oe.unitWidth,Yt=Oe.unitHeight,Wt=["tc","bc"].indexOf(xe)>=0,ee=["cl","cr"].indexOf(xe)>=0,ue={},Jt=Ne?"":1;if(!Wt){var Pe=Y.getBody().offsetWidth,Xe=Se.w<Pe?Se.w:Pe;ue[de]=se?"auto":"".concat(Xe).concat(st)}ee||(ue[be]=ce?"auto":"".concat(Se.h).concat(Yt)),D.addStyle(Zt(Zt({},ue),{en:Jt}),{avoidStore:!Ne});var qe="update:component:style",pn="".concat(qe,":").concat(be," ").concat(qe,":").concat(de);H&&H.trigger(pn,null,null,{noEmit:1})}}},typeof N=="object"&&(Mt=Zt(Zt(Zt({},Mt),N),{parent:Mt})),this.resizer=et.runCommand("resize",{el:Kt,options:Mt,force:1})}else et.stopCommand("resize"),this.resizer=null},updateToolbar:function(at){var D=this.config.em,H=at==D?D.getSelected():at,Y=this.canvas.getToolbarEl(),et=Y.style,Ct=H.get("toolbar"),nt=D.config.showToolbar;if(H&&nt&&Ct&&Ct.length){if(et.display="",!this.toolbar){Y.innerHTML="",this.toolbar=new j(Ct);var vt=new te({collection:this.toolbar,em:D});Y.appendChild(vt.render().el)}this.toolbar.reset(Ct),et.top="-100px",et.left="0"}else et.display="none"},updateToolbarPos:function(at){var D="px",H=this.canvas.getToolbarEl().style;H.top="".concat(at.top).concat(D),H.left="".concat(at.left).concat(D),H.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(at){return at===void 0&&(at={}),this.canvas.getBadgeEl(at.view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(at){return at&&at.get("status")==="selected"},updateToolsLocal:function(at){var D=at||this.getElHovered(),H=D.el,Y=D.pos,et=D.view,Ct=D.component;if(H){var nt=Ct.get("hoverable"),vt=this.lastHovered!==H,N=vt?{}:{posOnly:1};vt&&nt&&(this.lastHovered=H,this.showHighlighter(et),this.showElementOffset(H,Y,{view:et})),this.isCompSelected(Ct)&&(this.hideHighlighter(et),this.hideElementOffset(et));var Mt="px",Et=this.toggleToolsEl(1,et),Kt=Et.style,Ae=this.canvas.canvasRectOffset(H,Y),Se=Ae.top,_e=Ae.left;this.updateBadge(H,Y,Zt(Zt({},N),{view:et,topOff:Se,leftOff:_e})),Kt.top=Se+Mt,Kt.left=_e+Mt,Kt.width=Y.width+Mt,Kt.height=Y.height+Mt,this._trgToolUp("local",{component:Ct,el:Et,top:Se,left:_e,width:Y.width,height:Y.height})}else this.lastHovered=0},_upToolbar:(0,_t.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(at,D){D===void 0&&(D={}),this.em.trigger("canvas:tools:update",Zt({type:at},D))},updateToolsGlobal:function(at){at===void 0&&(at={});var D=this.getElSelected(),H=D.el,Y=D.pos,et=D.component;if(!H)return this.toggleToolsEl(),void(this.lastSelected=0);var Ct=this.canvas;(this.lastSelected!==H||at.force)&&(this.lastSelected=H,this.updateToolbar(et));var nt="px",vt=this.toggleToolsEl(1),N=vt.style,Mt=Ct.getTargetToElementFixed(H,Ct.getToolbarEl(),{pos:Y}),Et=Mt.canvasOffsetTop,Kt=Mt.canvasOffsetLeft;N.top=Et+nt,N.left=Kt+nt,N.width=Y.width+nt,N.height=Y.height+nt,this.updateToolbarPos({top:Mt.top,left:Mt.left}),this._trgToolUp("global",{component:et,el:vt,top:Et,left:Kt,width:Y.width,height:Y.height})},updateAttached:(0,_t.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,_t.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(at){return this.canvas.getCanvasView().getElementPos(at)},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(at){at&&at.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(at){(0,Nt.hasWin)()&&(this.editor=at&&at.get("Editor"),this.enable())},stop:function(at,D,H){if(H===void 0&&(H={}),(0,Nt.hasWin)()){var Y=this.em,et=this.editor;this.onHovered(),this.stopSelectComponent(),!H.preserveSelected&&Y.setSelected(),this.toggleToolsEl(),et&&et.stopCommand("resize")}}}},189:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=I(895);const _t={startSelectPosition:function(X,J,B){var k=this;B===void 0&&(B={}),this.isPointed=!1;var P=this.em.Utils,E=X.ownerDocument.body;P&&!this.sorter&&(this.sorter=new P.Sorter({container:E,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:J,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return k.em.getZoomDecimal()}})),B.onStart&&(this.sorter.onStart=B.onStart),X&&this.sorter.startSort(X,{container:E})},getOffsetDim:function(){var X=this.offset(this.canvas.getFrameEl()),J=this.offset(this.canvas.getElement());return{top:X.top-J.top,left:X.left-J.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,rt.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,rt.default)(this.cDim[this.posIndex][5]).parent():(0,rt.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(X,J,B){var k=X||0,P=J||"before",E=B.length,j=E!==0&&P=="after"&&k==E;return E!==0&&(!j&&!B[k][4]||B[k-1]&&!B[k-1][4]||j&&!B[k-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>B});var rt=I(50),_t=I(895),X=I(163),J=function(){return J=Object.assign||function(k){for(var P,E=1,j=arguments.length;E<j;E++)for(var L in P=arguments[E])Object.prototype.hasOwnProperty.call(P,L)&&(k[L]=P[L]);return k},J.apply(this,arguments)};const B={getOffsetMethod:function(k){return"get"+(k||"")+"OffsetViewerEl"},run:function(k,P,E){var j=E||{},L=j.state||"",ot=k.getConfig(),it=this.em.getZoomDecimal(),At=j.el||"";if(!ot.showOffsets||(0,X.isTextNode)(At)||!ot.showOffsetsSelected&&L=="Fixed")k.stopCommand("".concat(this.id),E);else{var jt=k.Canvas,Dt=J({},j.elPos||jt.getElementPos(At));(0,rt.isUndefined)(j.top)||(Dt.top=j.top),(0,rt.isUndefined)(j.left)||(Dt.left=j.left);var te=window.getComputedStyle(At),ft=this.ppfx,ut=L+"State",Nt=jt[this.getOffsetMethod(L)](E.view);Nt.style.opacity="";var Zt=this["marginT"+L],re=this["marginB"+L],at=this["marginL"+L],D=this["marginR"+L],H=this["padT"+L],Y=this["padB"+L],et=this["padL"+L],Ct=this["padR"+L];if(Nt.childNodes.length&&(this[ut]="1",Zt=Nt.querySelector("[data-offset-m-t]"),re=Nt.querySelector("[data-offset-m-b]"),at=Nt.querySelector("[data-offset-m-l]"),D=Nt.querySelector("[data-offset-m-r]"),H=Nt.querySelector("[data-offset-p-t]"),Y=Nt.querySelector("[data-offset-p-b]"),et=Nt.querySelector("[data-offset-p-l]"),Ct=Nt.querySelector("[data-offset-p-r]")),!this[ut]){var nt=L.toLowerCase(),vt=nt+"margin-v",N=nt+"padding-v",Mt=(0,_t.default)('<div class="'.concat(ft,'marginName">')).get(0),Et=(0,_t.default)('<div class="'.concat(ft,'paddingName">')).get(0),Kt=ft+N+"-el",Ae="".concat(ft+vt+"-el"," ").concat(ft+vt),Se="".concat(Kt," ").concat(ft+N);Zt=(0,_t.default)('<div class="'.concat(Ae,'-top"></div>')).get(0),re=(0,_t.default)('<div class="'.concat(Ae,'-bottom"></div>')).get(0),at=(0,_t.default)('<div class="'.concat(Ae,'-left"></div>')).get(0),D=(0,_t.default)('<div class="'.concat(Ae,'-right"></div>')).get(0),H=(0,_t.default)('<div class="'.concat(Se,'-top"></div>')).get(0),Y=(0,_t.default)('<div class="'.concat(Se,'-bottom"></div>')).get(0),et=(0,_t.default)('<div class="'.concat(Se,'-left"></div>')).get(0),Ct=(0,_t.default)('<div class="'.concat(Se,'-right"></div>')).get(0),this["marginT"+L]=Zt,this["marginB"+L]=re,this["marginL"+L]=at,this["marginR"+L]=D,this["padT"+L]=H,this["padB"+L]=Y,this["padL"+L]=et,this["padR"+L]=Ct,Mt.appendChild(Zt),Mt.appendChild(re),Mt.appendChild(at),Mt.appendChild(D),Et.appendChild(H),Et.appendChild(Y),Et.appendChild(et),Et.appendChild(Ct),Nt.appendChild(Mt),Nt.appendChild(Et),this[ut]="1"}var _e="px",Ne=parseFloat(te.marginLeft.replace(_e,""))*it,xe=parseFloat(te.marginRight.replace(_e,""))*it,Oe=parseFloat(te.marginTop.replace(_e,""))*it,be=parseFloat(te.marginBottom.replace(_e,""))*it,de=Zt.style,ce=re.style,se=at.style,st=D.style,Yt=H.style,Wt=Y.style,ee=et.style,ue=Ct.style,Jt=parseFloat(Dt.left),Pe=parseFloat(te.width)*it+_e;de.height=Oe+_e,de.width=Pe,de.top=Dt.top-Oe+_e,de.left=Jt+_e,ce.height=be+_e,ce.width=Pe,ce.top=Dt.top+Dt.height+_e,ce.left=Jt+_e;var Xe=Dt.height+Oe+be+_e,qe=Dt.top-Oe+_e;se.height=Xe,se.width=Ne+_e,se.top=qe,se.left=Jt-Ne+_e,st.height=Xe,st.width=xe+_e,st.top=qe,st.left=Jt+Dt.width+_e;var pn=parseFloat(te.paddingTop)*it;Yt.height=pn+_e;var Rn=parseFloat(te.paddingBottom)*it;Wt.height=Rn+_e;var yt=Dt.height-Rn-pn+_e,Ht=Dt.top+pn+_e;ee.height=yt,ee.width=parseFloat(te.paddingLeft)*it+_e,ee.top=Ht;var b=parseFloat(te.paddingRight)*it;ue.height=yt,ue.width=b+_e,ue.top=Ht}},stop:function(k,P,E){E===void 0&&(E={});var j=(E||{}).state||"",L=this.getOffsetMethod(j);k.Canvas[L](E.view).style.opacity=0}}},434:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>_t});var rt=I(50);const _t={init:function(){(0,rt.bindAll)(this,"_onFramesChange")},run:function(X){this.toggleVis(X)},stop:function(X){this.toggleVis(X,0)},toggleVis:function(X,J){var B=this;if(J===void 0&&(J=1),!X.Commands.isActive("preview")){var k=X.Canvas,P=J?"on":"off";k.getFrames().forEach(function(E){return B._upFrame(E,J)}),k.getModel()[P]("change:frames",this._onFramesChange)}},_onFramesChange:function(X,J){var B=this;J.forEach(function(k){return k.once("loaded",function(){return B._upFrame(k,!0)})})},_upFrame:function(X,J){var B,k=J?"add":"remove";(B=X.view)===null||B===void 0||B.getBody().classList[k]("".concat(this.ppfx,"dashed"))}}},346:(C,wt,I)=>{I.d(wt,{FE:()=>k,G7:()=>P,Hn:()=>B});var rt,_t=I(316),X=I.n(_t),J=(rt=function(E,j){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,ot){L.__proto__=ot}||function(L,ot){for(var it in ot)Object.prototype.hasOwnProperty.call(ot,it)&&(L[it]=ot[it])},rt(E,j)},function(E,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function L(){this.constructor=E}rt(E,j),E.prototype=j===null?Object.create(j):(L.prototype=j.prototype,new L)}),B=function(E){function j(){return E!==null&&E.apply(this,arguments)||this}return J(j,E),j}(X().Model),k=function(E){function j(){return E!==null&&E.apply(this,arguments)||this}return J(j,E),j}(X().Collection),P=function(E){function j(){return E!==null&&E.apply(this,arguments)||this}return J(j,E),j}(X().View)},330:(C,wt,I)=>{I.d(wt,{Z:()=>k});var rt,_t=I(50),X=I(346),J=(rt=function(P,E){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,L){j.__proto__=L}||function(j,L){for(var ot in L)Object.prototype.hasOwnProperty.call(L,ot)&&(j[ot]=L[ot])},rt(P,E)},function(P,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function j(){this.constructor=P}rt(P,E),P.prototype=E===null?Object.create(E):(j.prototype=E.prototype,new j)}),B=function(P){function E(j,L,ot){j===void 0&&(j={}),ot===void 0&&(ot=!1);var it=P.call(this,j)||this;return it.itemsView="",it.itemType="type",it.reuseView=!1,it.config=L||j.config||{},ot&&it.listenTo(it.collection,"add",it.addTo),it.items=[],it}return J(E,P),E.prototype.addTo=function(j){this.add(j)},E.prototype.itemViewNotFound=function(j){var L=this.config,ot=this.ns,it=L.em,At="".concat(ot?"[".concat(ot,"]: "):"","'").concat(j,"' type not found");it&&it.logWarning(At)},E.prototype.add=function(j,L){var ot,it=this,At=it.config,jt=it.reuseView,Dt=it.items,te=this.itemsView||{},ft=L||null,ut=this.itemView,Nt=j.get(this.itemType);te[Nt]?ut=te[Nt]:!Nt||te[Nt]||(0,_t.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],Nt)||this.itemViewNotFound(Nt),ot=j.view&&jt?j.view:new ut({model:j,config:At},At),Dt&&Dt.push(ot);var Zt=ot.render().el;ft?ft.appendChild(Zt):this.$el.append(Zt)},E.prototype.render=function(){var j=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(L){this.add(L,j)},this),this.$el.append(j),this.onRender(),this},E.prototype.onRender=function(){},E.prototype.onRemoveBefore=function(j,L){},E.prototype.onRemove=function(j,L){},E.prototype.remove=function(j){j===void 0&&(j={});var L=this.items;return this.onRemoveBefore(L,j),this.clearItems(),P.prototype.remove.call(this),this.onRemove(L,j),this},E.prototype.clearItems=function(){this.items},E}(X.G7);const k=B;B.prototype.itemView=""},668:(C,wt,I)=>{I.d(wt,{Z:()=>B});var rt=I(50),_t=I(163),X=function(){return X=Object.assign||function(k){for(var P,E=1,j=arguments.length;E<j;E++)for(var L in P=arguments[E])Object.prototype.hasOwnProperty.call(P,L)&&(k[L]=P[L]);return k},X.apply(this,arguments)},J=["x","y"];const B=function(){function k(P){return P===void 0&&(P={}),this.opts={snapOffset:5,scale:1},(0,rt.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(P),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return k.prototype.setOptions=function(P){P===void 0&&(P={}),this.opts=X(X({},this.opts),P)},k.prototype.toggleDrag=function(P){var E=this.getDocumentEl(),j=this.getContainerEl(),L=this.getWindowEl(),ot=P?"on":"off",it={on:_t.on,off:_t.off};it[ot](j,"mousemove dragover",this.drag),it[ot](E,"mouseup dragend touchend",this.stop),it[ot](E,"keydown",this.keyHandle),it[ot](L,"scroll",this.handleScroll)},k.prototype.handleScroll=function(){var P=this.lastScroll,E=this.delta,j=this.getScrollInfo(),L={x:j.x-P.x,y:j.y-P.y};this.move(E.x+L.x,E.y+L.y),this.lastScrollDiff=L},k.prototype.start=function(P){var E=this.opts,j=E.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(P),this.guidesStatic=(0,rt.result)(E,"guidesStatic")||[],this.guidesTarget=(0,rt.result)(E,"guidesTarget")||[],(0,rt.isFunction)(j)&&j(P,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(P)},k.prototype.drag=function(P){var E=this,j=this,L=j.opts,ot=j.lastScrollDiff,it=j.globScrollDiff,At=L.onDrag,jt=this.startPointer,Dt=this.getPointerPos(P),te={x:it.x+ot.x,y:it.y+ot.y};this.globScrollDiff=te;var ft={x:Dt.x-jt.x+te.x,y:Dt.y-jt.y+te.y};this.lastScrollDiff={x:0,y:0};var ut=this.lockedAxis;(ut=P.shiftKey?!ut&&this.detectAxisLock(ft.x,ft.y):null)==="x"?ft.x=jt.x:ut==="y"&&(ft.y=jt.y);var Nt=function(Y){J.forEach(function(et){return Y[et]=Y[et]*(0,rt.result)(L,"scale")}),E.delta=Y,E.move(Y.x,Y.y),(0,rt.isFunction)(At)&&At(P,E)},Zt=X({},ft);if(this.currentPointer=Dt,this.lockedAxis=ut,this.lastScroll=this.getScrollInfo(),Nt(ft),this.guidesTarget.length){var re=this.snapGuides(Zt),at=re.newDelta,D=re.trgX,H=re.trgY;(D||H)&&Nt(at)}P.which===0&&this.stop(P)},k.prototype.snapGuides=function(P){var E=this,j=P,L=this.trgX,ot=this.trgY;return this.guidesTarget.forEach(function(it){it.x&&E.trgX||it.y&&E.trgY||(it.active=!1,E.guidesStatic.forEach(function(At){if(!(it.y&&At.x||it.x&&At.y)){var jt=it.y&&At.y,Dt=jt?"y":"x",te=it[Dt],ft=At[Dt],ut=P[Dt],Nt=jt?ot:L;if(E.isPointIn(te,ft)&&(0,rt.isUndefined)(Nt)){var Zt=ut-(te-ft);E.setGuideLock(it,Zt)}}}))}),L=this.trgX,ot=this.trgY,J.forEach(function(it){var At=it.toUpperCase(),jt=E["trg".concat(At)];jt&&!E.isPointIn(P[it],jt.lock)&&(E.setGuideLock(jt,null),jt=null),jt&&!(0,rt.isUndefined)(jt.lock)&&(j[it]=jt.lock)}),{newDelta:j,trgX:this.trgX,trgY:this.trgY}},k.prototype.isPointIn=function(P,E,j){var L=(j===void 0?{}:j).offset||this.opts.snapOffset||0;return P>=E&&P<=E+L||P<=E&&P>=E-L},k.prototype.setGuideLock=function(P,E){var j=(0,rt.isUndefined)(P.x)?"Y":"X",L="trg".concat(j);return E!==null?(P.active=!0,P.lock=E,this[L]=P):(delete P.active,delete P.lock,delete this[L]),P},k.prototype.stop=function(P,E){E===void 0&&(E={});var j=this.delta,L=!!E.cancel,ot=L?0:j.x,it=L?0:j.y;this.toggleDrag(),this.lockedAxis=null,this.move(ot,it,!0);var At=this.opts.onEnd;(0,rt.isFunction)(At)&&At(P,this,{cancelled:L})},k.prototype.keyHandle=function(P){(0,_t.isEscKey)(P)&&this.stop(P,{cancel:!0})},k.prototype.move=function(P,E,j){var L=this.el,ot=this.opts,it=this.startPosition;if(it){var At=ot.setPosition,jt=it.x+P,Dt=it.y+E;this.position={x:jt,y:Dt,end:j},(0,rt.isFunction)(At)&&At(this.position),L&&(L.style.left="".concat(jt,"px"),L.style.top="".concat(Dt,"px"))}},k.prototype.getContainerEl=function(){var P=this.opts.container;return P?[P]:this.getDocumentEl()},k.prototype.getWindowEl=function(){return this.getContainerEl().map(function(P){var E=P.ownerDocument||P;return E.defaultView||E.parentWindow})},k.prototype.getDocumentEl=function(P){var E=this.opts.doc;if(P=P||this.el,!this.docs.length){var j=[document];P&&j.push(P.ownerDocument),E&&j.push(E),this.docs=j}return this.docs},k.prototype.getPointerPos=function(P){var E=this.opts.getPointerPosition,j=(0,_t.getPointerEvent)(P);return E?E(P):{x:j.clientX,y:j.clientY}},k.prototype.getStartPosition=function(){var P=this.el,E=this.opts.getPosition,j={x:0,y:0};return(0,rt.isFunction)(E)?j=E():P&&(j={x:parseFloat(P.style.left),y:parseFloat(P.style.top)}),j},k.prototype.getScrollInfo=function(){var P=this.opts.doc,E=P&&P.body;return{y:E?E.scrollTop:0,x:E?E.scrollLeft:0}},k.prototype.detectAxisLock=function(P,E){var j=P,L=E,ot=Math.abs(j),it=Math.abs(L);return L>=ot||L<=-ot?"x":j>it||j<-it?"y":void 0},k}()},895:(C,wt,I)=>{I.r(wt),I.d(wt,{default:()=>qt});var rt=typeof document<"u"?document:null,_t=typeof window<"u"?window:null,X=Array.prototype,J=X.filter,B=X.indexOf,k=X.map,P=X.push,E=X.reverse,j=X.slice,L=X.splice,ot=/^#[\w-]*$/,it=/^\.[\w-]*$/,At=/<.+>/,jt=/^\w+$/;function Dt(V,Q){return Q===void 0&&(Q=rt),it.test(V)?Q.getElementsByClassName(V.slice(1)):jt.test(V)?Q.getElementsByTagName(V):Q.querySelectorAll(V)}function te(V,Q){if(Q===void 0&&(Q=rt),V){if(V.__cash)return V;var pt=V;if(et(V)){if(Q.__cash&&(Q=Q[0]),!(pt=ot.test(V)?Q.getElementById(V.slice(1)):At.test(V)?Ie(V):Dt(V,Q)))return}else if(Y(V))return this.ready(V);(pt.nodeType||pt===_t)&&(pt=[pt]),this.length=pt.length;for(var bt=0,Gt=this.length;bt<Gt;bt++)this[bt]=pt[bt]}}function ft(V,Q){return new te(V,Q)}var ut=ft.fn=ft.prototype=te.prototype={constructor:ft,__cash:!0,length:0,splice:L};ut.get=function(V){return V===void 0?j.call(this):this[V<0?V+this.length:V]},ut.eq=function(V){return ft(this.get(V))},ut.first=function(){return this.eq(0)},ut.last=function(){return this.eq(-1)},ut.map=function(V){return ft(k.call(this,function(Q,pt){return V.call(Q,pt,Q)}))},ut.slice=function(){return ft(j.apply(this,arguments))};var Nt=/(?:^\w|[A-Z]|\b\w)/g,Zt=/[\s-_]+/g;function re(V){return V.replace(Nt,function(Q,pt){return Q[pt?"toUpperCase":"toLowerCase"]()}).replace(Zt,"")}function at(V,Q){for(var pt=0,bt=V.length;pt<bt&&Q.call(V[pt],V[pt],pt,V)!==!1;pt++);}ft.camelCase=re,ft.each=at,ut.each=function(V){return at(this,function(Q,pt){return V.call(Q,pt,Q)}),this},ut.removeProp=function(V){return this.each(function(Q,pt){delete pt[V]})},ft.extend=ut.extend=function(V){V===void 0&&(V=this);for(var Q=arguments,pt=Q.length,bt=pt<2?0:1;bt<pt;bt++)for(var Gt in Q[bt])V[Gt]=Q[bt][Gt];return V};var D=1;function H(V,Q){var pt=V&&(V.matches||V.webkitMatchesSelector||V.mozMatchesSelector||V.msMatchesSelector||V.oMatchesSelector);return!!pt&&pt.call(V,Q)}function Y(V){return typeof V=="function"}function et(V){return typeof V=="string"}function Ct(V){return!isNaN(parseFloat(V))&&isFinite(V)}ft.guid=D,ft.matches=H,ft.isFunction=Y,ft.isString=et,ft.isNumeric=Ct;var nt=Array.isArray;function vt(V){return et(V)?function(Q,pt){return H(pt,V)}:V.__cash?function(Q,pt){return V.is(pt)}:function(Q,pt,bt){return pt===bt}}ft.isArray=nt,ut.prop=function(V,Q){if(V){if(et(V))return arguments.length<2?this[0]&&this[0][V]:this.each(function(bt,Gt){Gt[V]=Q});for(var pt in V)this.prop(pt,V[pt]);return this}},ut.filter=function(V){if(!V)return ft();var Q=Y(V)?V:vt(V);return ft(J.call(this,function(pt,bt){return Q.call(pt,bt,pt,V)}))};var N=/\S+/g;function Mt(V){return et(V)&&V.match(N)||[]}function Et(V){return V.filter(function(Q,pt,bt){return bt.indexOf(Q)===pt})}function Kt(V,Q,pt){if(V.nodeType===1){var bt=_t.getComputedStyle(V,null);return Q?pt?bt.getPropertyValue(Q):bt[Q]:bt}}function Ae(V,Q){return parseInt(Kt(V,Q),10)||0}ut.hasClass=function(V){var Q=Mt(V),pt=!1;return Q.length&&this.each(function(bt,Gt){return!(pt=Gt.classList.contains(Q[0]))}),pt},ut.removeAttr=function(V){var Q=Mt(V);return Q.length?this.each(function(pt,bt){at(Q,function(Gt){bt.removeAttribute(Gt)})}):this},ut.attr=function(V,Q){if(V){if(et(V)){if(arguments.length<2){if(!this[0])return;var pt=this[0].getAttribute(V);return pt===null?void 0:pt}return Q===null?this.removeAttr(V):this.each(function(Gt,he){he.setAttribute(V,Q)})}for(var bt in V)this.attr(bt,V[bt]);return this}},ut.toggleClass=function(V,Q){var pt=Mt(V),bt=Q!==void 0;return pt.length?this.each(function(Gt,he){at(pt,function(Fe){bt?Q?he.classList.add(Fe):he.classList.remove(Fe):he.classList.toggle(Fe)})}):this},ut.addClass=function(V){return this.toggleClass(V,!0)},ut.removeClass=function(V){return arguments.length?this.toggleClass(V,!1):this.attr("class","")},ft.unique=Et,ut.add=function(V,Q){return ft(Et(this.get().concat(ft(V,Q).get())))};var Se=/^--/;function _e(V){return Se.test(V)}var Ne={},xe=rt&&rt.createElement("div"),Oe=xe?xe.style:{},be=["webkit","moz","ms","o"];function de(V,Q){if(Q===void 0&&(Q=_e(V)),Q)return V;if(!Ne[V]){var pt=re(V),bt=""+pt.charAt(0).toUpperCase()+pt.slice(1);at((pt+" "+be.join(bt+" ")+bt).split(" "),function(Gt){if(Gt in Oe)return Ne[V]=Gt,!1})}return Ne[V]}ft.prefixedProp=de;var ce={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function se(V,Q,pt){return pt===void 0&&(pt=_e(V)),pt||ce[V]||!Ct(Q)?Q:Q+"px"}ut.css=function(V,Q){if(et(V)){var pt=_e(V);return V=de(V,pt),arguments.length<2?this[0]&&Kt(this[0],V,pt):V?(Q=se(V,Q,pt),this.each(function(Gt,he){he.nodeType===1&&(pt?he.style.setProperty(V,Q):he.style[V]=Q)})):this}for(var bt in V)this.css(bt,V[bt]);return this};var st="__cashData",Yt=/^data-(.*)/;function Wt(V){return V[st]=V[st]||{}}function ee(V,Q){var pt=Wt(V);if(Q){if(!(Q in pt)){var bt=V.dataset?V.dataset[Q]||V.dataset[re(Q)]:ft(V).attr("data-"+Q);if(bt!==void 0){try{bt=JSON.parse(bt)}catch{}pt[Q]=bt}}return pt[Q]}return pt}function ue(V,Q){return Ae(V,"border"+(Q?"Left":"Top")+"Width")+Ae(V,"padding"+(Q?"Left":"Top"))+Ae(V,"padding"+(Q?"Right":"Bottom"))+Ae(V,"border"+(Q?"Right":"Bottom")+"Width")}function Jt(V,Q){for(var pt=0,bt=Q.length;pt<bt;pt++)if(V.indexOf(Q[pt])<0)return!1;return!0}function Pe(V,Q,pt){at(V[pt],function(bt){bt[0];var Gt=bt[1];Q.removeEventListener(pt,Gt)}),delete V[pt]}ft.hasData=function(V){return st in V},ut.data=function(V,Q){var pt=this;if(!V)return this[0]?(at(this[0].attributes,function(Gt){var he=Gt.name.match(Yt);he&&pt.data(he[1])}),ee(this[0])):void 0;if(et(V))return Q===void 0?this[0]&&ee(this[0],V):this.each(function(Gt,he){return function(Fe,We,Ln){Wt(Fe)[We]=Ln}(he,V,Q)});for(var bt in V)this.data(bt,V[bt]);return this},ut.removeData=function(V){return this.each(function(Q,pt){return function(bt,Gt){Gt===void 0?delete bt[st]:delete Wt(bt)[Gt]}(pt,V)})},at(["Width","Height"],function(V){ut["inner"+V]=function(){if(this[0])return this[0]===_t?_t["inner"+V]:this[0]["client"+V]}}),at(["width","height"],function(V,Q){ut[V]=function(pt){return this[0]?arguments.length?(pt=parseInt(pt,10),this.each(function(bt,Gt){if(Gt.nodeType===1){var he=Kt(Gt,"boxSizing");Gt.style[V]=se(V,pt+(he==="border-box"?ue(Gt,!Q):0))}})):this[0]===_t?this[0][re("outer-"+V)]:this[0].getBoundingClientRect()[V]-ue(this[0],!Q):pt===void 0?void 0:this}}),at(["Width","Height"],function(V,Q){ut["outer"+V]=function(pt){if(this[0])return this[0]===_t?_t["outer"+V]:this[0]["offset"+V]+(pt?Ae(this[0],"margin"+(Q?"Top":"Left"))+Ae(this[0],"margin"+(Q?"Bottom":"Right")):0)}});var Xe="__cashEvents",qe=".";function pn(V){return V[Xe]=V[Xe]||{}}function Rn(V){var Q=V.split(qe);return[Q[0],Q.slice(1).sort()]}function yt(V,Q,pt,bt){var Gt=pn(V);if(Q){var he=Gt[Q];if(!he)return;bt&&(bt.guid=bt.guid||D++),Gt[Q]=he.filter(function(Fe){var We=Fe[0],Ln=Fe[1];if(bt&&Ln.guid!==bt.guid||!Jt(We,pt))return!0;V.removeEventListener(Q,Ln)})}else if(pt&&pt.length)for(Q in Gt)yt(V,Q,pt,bt);else for(Q in Gt)Pe(Gt,V,Q)}ut.off=function(V,Q){var pt=this;return V===void 0?this.each(function(bt,Gt){return yt(Gt)}):at(Mt(V),function(bt){var Gt=Rn(bt),he=Gt[0],Fe=Gt[1];pt.each(function(We,Ln){return yt(Ln,he,Fe,Q)})}),this},ut.on=function(V,Q,pt,bt){var Gt=this;if(!et(V)){for(var he in V)this.on(he,Q,V[he]);return this}return Y(Q)&&(pt=Q,Q=!1),at(Mt(V),function(Fe){var We=Rn(Fe),Ln=We[0],fn=We[1];Gt.each(function(Re,Ar){var Yn=function jr(dn){if(!dn.namespace||Jt(fn,dn.namespace.split(qe))){var _n=Ar;if(Q){for(var Bn=dn.target;!H(Bn,Q);)if(Bn===Ar||!(Bn=Bn.parentNode))return;_n=Bn}dn.namespace=dn.namespace||"";var Mr=pt.call(_n,dn,dn.data);bt&&yt(Ar,Ln,fn,jr),Mr===!1&&(dn.preventDefault(),dn.stopPropagation())}};Yn.guid=pt.guid=pt.guid||D++,function(jr,dn,_n,Bn){Bn.guid=Bn.guid||D++;var Mr=pn(jr);Mr[dn]=Mr[dn]||[],Mr[dn].push([_n,Bn]),jr.addEventListener(dn,Bn)}(Ar,Ln,fn,Yn)})}),this},ut.one=function(V,Q,pt){return this.on(V,Q,pt,!0)},ut.ready=function(V){var Q=function(){return V(ft)};return rt.readyState!=="loading"?setTimeout(Q):rt.addEventListener("DOMContentLoaded",Q),this},ut.trigger=function(V,Q){var pt=V;if(et(V)){var bt=Rn(V),Gt=bt[0],he=bt[1];(pt=rt.createEvent("HTMLEvents")).initEvent(Gt,!0,!0),pt.namespace=he.join(qe)}return pt.data=Q,this.each(function(Fe,We){We.dispatchEvent(pt)})};var Ht=/select-one/i,b=/select-multiple/i;function F(V){var Q=V.type;return Ht.test(Q)?function(pt){return pt.selectedIndex<0?null:pt.options[pt.selectedIndex].value}(V):b.test(Q)?function(pt){var bt=[];return at(pt.options,function(Gt){!Gt.selected||Gt.disabled||Gt.parentNode.disabled||bt.push(Gt.value)}),bt}(V):V.value}var z=/%20/g,gt=/file|reset|submit|button|image/i,Tt=/radio|checkbox/i;ut.serialize=function(){var V="";return this.each(function(Q,pt){at(pt.elements||[pt],function(bt){if(!bt.disabled&&bt.name&&bt.tagName!=="FIELDSET"&&!gt.test(bt.type)&&(!Tt.test(bt.type)||bt.checked)){var Gt=F(bt);Gt!==void 0&&at(nt(Gt)?Gt:[Gt],function(he){V+=function(Fe,We){return"&"+encodeURIComponent(Fe)+"="+encodeURIComponent(We).replace(z,"+")}(bt.name,he)})}})}),V.substr(1)},ut.val=function(V){return V===void 0?this[0]&&F(this[0]):this.each(function(Q,pt){var bt=b.test(pt.type),Gt=V===null?bt?[]:"":V;bt&&nt(Gt)?at(pt.options,function(he){he.selected=Gt.indexOf(he.value)>=0}):pt.value=Gt})},ut.clone=function(){return this.map(function(V,Q){return Q.cloneNode(!0)})},ut.detach=function(){return this.each(function(V,Q){Q.parentNode&&Q.parentNode.removeChild(Q)})};var Ot,pe=/^\s*<(\w+)[^>]*>/,Te=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function Ie(V){if(function(){if(!Ot){var bt=rt.createElement("table"),Gt=rt.createElement("tr");Ot={"*":rt.createElement("div"),tr:rt.createElement("tbody"),td:Gt,th:Gt,thead:bt,tbody:bt,tfoot:bt}}}(),!et(V))return[];if(Te.test(V))return[rt.createElement(RegExp.$1)];var Q=pe.test(V)&&RegExp.$1,pt=Ot[Q]||Ot["*"];return pt.innerHTML=V,ft(pt.childNodes).detach().get()}function ze(V,Q,pt){if(Q!==void 0){var bt=et(Q);!bt&&Q.length?at(Q,function(Gt){return ze(V,Gt,pt)}):at(V,bt?function(Gt){Gt.insertAdjacentHTML(pt?"afterbegin":"beforeend",Q)}:function(Gt,he){return function(Fe,We,Ln){Ln?Fe.insertBefore(We,Fe.childNodes[0]):Fe.appendChild(We)}(Gt,he?Q.cloneNode(!0):Q,pt)})}}ft.parseHTML=Ie,ut.empty=function(){var V=this[0];if(V)for(;V.firstChild;)V.removeChild(V.firstChild);return this},ut.append=function(){var V=this;return at(arguments,function(Q){ze(V,Q)}),this},ut.appendTo=function(V){return ze(ft(V),this),this},ut.html=function(V){if(V===void 0)return this[0]&&this[0].innerHTML;var Q=V.nodeType?V[0].outerHTML:V;return this.each(function(pt,bt){bt.innerHTML=Q})},ut.insertAfter=function(V){var Q=this;return ft(V).each(function(pt,bt){var Gt=bt.parentNode;Q.each(function(he,Fe){Gt.insertBefore(pt?Fe.cloneNode(!0):Fe,bt.nextSibling)})}),this},ut.after=function(){var V=this;return at(E.apply(arguments),function(Q){E.apply(ft(Q).slice()).insertAfter(V)}),this},ut.insertBefore=function(V){var Q=this;return ft(V).each(function(pt,bt){var Gt=bt.parentNode;Q.each(function(he,Fe){Gt.insertBefore(pt?Fe.cloneNode(!0):Fe,bt)})}),this},ut.before=function(){var V=this;return at(arguments,function(Q){ft(Q).insertBefore(V)}),this},ut.prepend=function(){var V=this;return at(arguments,function(Q){ze(V,Q,!0)}),this},ut.prependTo=function(V){return ze(ft(V),E.apply(this.slice()),!0),this},ut.remove=function(){return this.detach().off()},ut.replaceWith=function(V){var Q=this;return this.each(function(pt,bt){var Gt=bt.parentNode;if(Gt){var he=pt?ft(V).clone():ft(V);if(!he[0])return Q.remove(),!1;Gt.replaceChild(he[0],bt),ft(he[0]).after(he.slice(1))}})},ut.replaceAll=function(V){return ft(V).replaceWith(this),this},ut.text=function(V){return V===void 0?this[0]?this[0].textContent:"":this.each(function(Q,pt){pt.textContent=V})};var Qe=rt&&rt.documentElement;ut.offset=function(){var V=this[0];if(V){var Q=V.getBoundingClientRect();return{top:Q.top+_t.pageYOffset-Qe.clientTop,left:Q.left+_t.pageXOffset-Qe.clientLeft}}},ut.offsetParent=function(){return ft(this[0]&&this[0].offsetParent)},ut.position=function(){var V=this[0];if(V)return{left:V.offsetLeft,top:V.offsetTop}},ut.children=function(V){var Q=[];return this.each(function(pt,bt){P.apply(Q,bt.children)}),Q=ft(Et(Q)),V?Q.filter(function(pt,bt){return H(bt,V)}):Q},ut.contents=function(){var V=[];return this.each(function(Q,pt){P.apply(V,pt.tagName==="IFRAME"?[pt.contentDocument]:pt.childNodes)}),ft(V.length&&Et(V))},ut.find=function(V){for(var Q=[],pt=0,bt=this.length;pt<bt;pt++){var Gt=Dt(V,this[pt]);Gt.length&&P.apply(Q,Gt)}return ft(Q.length&&Et(Q))},ut.has=function(V){var Q=et(V)?function(pt,bt){return!!Dt(V,bt).length}:function(pt,bt){return bt.contains(V)};return this.filter(Q)},ut.is=function(V){if(!V||!this[0])return!1;var Q=vt(V),pt=!1;return this.each(function(bt,Gt){return!(pt=Q(bt,Gt,V))}),pt},ut.next=function(){return ft(this[0]&&this[0].nextElementSibling)},ut.not=function(V){if(!V||!this[0])return this;var Q=vt(V);return this.filter(function(pt,bt){return!Q(pt,bt,V)})},ut.parent=function(){var V=[];return this.each(function(Q,pt){pt&&pt.parentNode&&V.push(pt.parentNode)}),ft(Et(V))},ut.index=function(V){var Q=V?ft(V)[0]:this[0],pt=V?this:ft(Q).parent().children();return B.call(pt,Q)},ut.closest=function(V){return V&&this[0]?this.is(V)?this.filter(V):this.parent().closest(V):ft()},ut.parents=function(V){var Q,pt=[];return this.each(function(bt,Gt){for(Q=Gt;Q&&Q.parentNode&&Q!==rt.body.parentNode;)Q=Q.parentNode,(!V||V&&H(Q,V))&&pt.push(Q)}),ft(Et(pt))},ut.prev=function(){return ft(this[0]&&this[0].previousElementSibling)},ut.siblings=function(){var V=this[0];return this.parent().children().filter(function(Q,pt){return pt!==V})};const qt=ft},491:(C,wt,I)=>{I.d(wt,{$Q:()=>ot,FW:()=>E,G1:()=>J,L_:()=>k,Mx:()=>B,R3:()=>it,SJ:()=>te,dL:()=>L,pn:()=>j,rw:()=>jt,sE:()=>P,t3:()=>Dt,ut:()=>At});var rt=I(50),_t="tag",X="attributes",J="transitionend oTransitionEnd transitionend webkitTransitionEnd",B=function(ft){return ft&&ft.nodeType===9},k=function(ft){var ut=ft&&ft.parentNode;ut&&ut.removeChild(ft)},P=function(ft,ut){return ft.querySelectorAll(ut)},E=function(ft,ut){return ut===void 0&&(ut={}),ft&&ft.setAttribute&&(0,rt.each)(ut,function(Nt,Zt){return ft.setAttribute(Zt,Nt)})},j=function(ft){return ft&&!!(ft.offsetWidth||ft.offsetHeight||ft.getClientRects().length)},L=function(ft,ut){var Nt;(Nt=ft.parentNode)===null||Nt===void 0||Nt.replaceChild(ut,ft)},ot=function(ft,ut,Nt){var Zt=ft.childNodes,re=Zt.length,at=(0,rt.isUndefined)(Nt)?re:Nt;(0,rt.isString)(ut)&&(ft.insertAdjacentHTML("beforeEnd",ut),ut=ft.lastChild,ft.removeChild(ut)),at>=re?ft.appendChild(ut):ft.insertBefore(ut,Zt[at])},it=function(ft,ut){return ot(ft,ut)},At=function(ft,ut,Nt){ut===void 0&&(ut={});var Zt=document.createElement(ft);return ut&&(0,rt.each)(ut,function(re,at){return Zt.setAttribute(at,re)}),Nt&&((0,rt.isString)(Nt)?Zt.innerHTML=Nt:Zt.appendChild(Nt)),Zt},jt=function(ft){return document.createTextNode(ft)},Dt=function(ft,ut){var Nt,Zt=ft.type;try{Nt=new window[ut](Zt,ft)}catch{(Nt=document.createEvent(ut)).initEvent(Zt,!0,!0)}return Nt._parentEvent=ft,Zt.indexOf("key")===0&&(Nt.keyCodeVal=ft.keyCode,["keyCode","which"].forEach(function(re){Object.defineProperty(Nt,re,{get:function(){return this.keyCodeVal}})})),Nt},te=function(ft,ut){ut===void 0&&(ut=[]),(Array.isArray(ut)?ut:[ut]).forEach(function(Nt){var Zt=Nt[_t]||"div",re=Nt[X]||{},at=document.createElement(Zt);(0,rt.each)(re,function(D,H){at.setAttribute(H,D)}),ft.appendChild(at)})}},163:(C,wt,I)=>{I.r(wt),I.d(wt,{appendStyles:()=>ot,buildBase64UrlFromSvg:()=>se,camelCase:()=>ft,capitalize:()=>Ne,createId:()=>ce,deepMerge:()=>Ct,escape:()=>Y,escapeNodeContent:()=>et,find:()=>H,getElRect:()=>vt,getElement:()=>Zt,getGlobal:()=>k,getKeyChar:()=>Et,getKeyCode:()=>Mt,getModel:()=>nt,getPointerEvent:()=>N,getUiClass:()=>L,getUnitFromValue:()=>Dt,getViewEl:()=>be,hasDnd:()=>Nt,hasWin:()=>B,isCommentNode:()=>at,isComponent:()=>xe,isDef:()=>J,isEmptyObj:()=>_e,isEnterKey:()=>Ae,isEscKey:()=>Kt,isObject:()=>Se,isRule:()=>Oe,isTaggableNode:()=>D,isTextNode:()=>re,matches:()=>j,normalizeFloat:()=>ut,off:()=>jt,on:()=>At,setViewEl:()=>de,shallowDiff:()=>it,toLowerCase:()=>P,upFirst:()=>te});var rt=I(50),_t=function(){return _t=Object.assign||function(st){for(var Yt,Wt=1,ee=arguments.length;Wt<ee;Wt++)for(var ue in Yt=arguments[Wt])Object.prototype.hasOwnProperty.call(Yt,ue)&&(st[ue]=Yt[ue]);return st},_t.apply(this,arguments)},X=function(st,Yt,Wt){if(Wt||arguments.length===2)for(var ee,ue=0,Jt=Yt.length;ue<Jt;ue++)!ee&&ue in Yt||(ee||(ee=Array.prototype.slice.call(Yt,0,ue)),ee[ue]=Yt[ue]);return st.concat(ee||Array.prototype.slice.call(Yt))},J=function(st){return st!==void 0},B=function(){return typeof window<"u"},k=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:I.g},P=function(st){return(st||"").toLowerCase()},E=B()?window.Element.prototype:{},j=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.msMatchesSelector,L=function(st,Yt){var Wt=st.getConfig(),ee=Wt.stylePrefix;return[Wt.customUI&&"".concat(ee,"cui"),Yt].filter(function(ue){return ue}).join(" ")},ot=function(st,Yt){Yt===void 0&&(Yt={});var Wt=(0,rt.isArray)(st)?X([],st,!0):[st];if(Wt.length){var ee=Wt.shift();if(ee&&(!Yt.unique||!document.querySelector('link[href="'.concat(ee,'"]')))){var ue=document.head,Jt=document.createElement("link");Jt.href=ee,Jt.rel="stylesheet",Yt.prepand?ue.insertBefore(Jt,ue.firstChild):ue.appendChild(Jt)}ot(Wt)}},it=function(st,Yt){var Wt={},ee=(0,rt.keys)(Yt);for(var ue in st)if(st.hasOwnProperty(ue)){var Jt=st[ue],Pe=Yt[ue];ee.indexOf(ue)>=0?Jt!==Pe&&(Wt[ue]=Pe):Wt[ue]=null}for(var ue in Yt)Yt.hasOwnProperty(ue)&&(0,rt.isUndefined)(st[ue])&&(Wt[ue]=Yt[ue]);return Wt},At=function(st,Yt,Wt,ee){var ue=Yt.split(/\s+/);st=st instanceof Array?st:[st];for(var Jt=function(Xe){st.forEach(function(qe){return qe&&qe.addEventListener(ue[Xe],Wt,ee)})},Pe=0;Pe<ue.length;++Pe)Jt(Pe)},jt=function(st,Yt,Wt,ee){var ue=Yt.split(/\s+/);st=st instanceof Array?st:[st];for(var Jt=function(Xe){st.forEach(function(qe){return qe&&qe.removeEventListener(ue[Xe],Wt,ee)})},Pe=0;Pe<ue.length;++Pe)Jt(Pe)},Dt=function(st){return st.replace(parseFloat(st),"")},te=function(st){return st[0].toUpperCase()+st.toLowerCase().slice(1)},ft=function(st){return st.replace(/-./g,function(Yt){return Yt[1].toUpperCase()})},ut=function(st,Yt,Wt){Yt===void 0&&(Yt=1),Wt===void 0&&(Wt=0);var ee=0;if(isNaN(st))return Wt;if(st=parseFloat(st),Math.floor(st)!==st){var ue=Yt.toString().split(".")[1];ee=ue?ue.length:0}return ee?parseFloat(st.toFixed(ee)):st},Nt=function(st){return"draggable"in document.createElement("i")&&(!st||st.config.nativeDnD)},Zt=function(st){return(0,rt.isElement)(st)||re(st)?st:st&&st.getEl?st.getEl():void 0},re=function(st){return st&&st.nodeType===3},at=function(st){return st&&st.nodeType===8},D=function(st){return st&&!re(st)&&!at(st)},H=function(st,Yt){var Wt=null;return st.some(function(ee,ue){return Yt(ee,ue,st)?(Wt=ee,1):0}),Wt},Y=function(st){return st===void 0&&(st=""),"".concat(st).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},et=function(st){return st===void 0&&(st=""),"".concat(st).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Ct=function(){for(var st=[],Yt=0;Yt<arguments.length;Yt++)st[Yt]=arguments[Yt];for(var Wt=_t({},st[0]),ee=1;ee<st.length;ee++){var ue=_t({},st[ee]);for(var Jt in ue){var Pe=Wt[Jt],Xe=ue[Jt];Se(Pe)&&Se(Xe)?Wt[Jt]=Ct(Pe,Xe):Wt[Jt]=Xe}}return Wt},nt=function(st,Yt){var Wt=st;return!Yt&&st&&st.__cashData?Wt=st.__cashData.model:(0,rt.isElement)(st)&&(Wt=Yt(st).data("model")),Wt},vt=function(st){var Yt,Wt={top:0,left:0,width:0,height:0};if(!st)return Wt;if(re(st)){var ee=document.createRange();ee.selectNode(st),Yt=ee.getBoundingClientRect(),ee.detach()}return Yt||(st.getBoundingClientRect?st.getBoundingClientRect():Wt)},N=function(st){return st.touches&&st.touches[0]?st.touches[0]:st},Mt=function(st){return st.which||st.keyCode},Et=function(st){return String.fromCharCode(Mt(st))},Kt=function(st){return Mt(st)===27},Ae=function(st){return Mt(st)===13},Se=function(st){return st!==null&&!Array.isArray(st)&&typeof st=="object"},_e=function(st){return Object.keys(st).length<=0},Ne=function(st){return st===void 0&&(st=""),st&&st.charAt(0).toUpperCase()+st.substring(1)},xe=function(st){return st&&st.toHTML},Oe=function(st){return st&&st.toCSS},be=function(st){return st.__gjsv},de=function(st,Yt){st.__gjsv=Yt},ce=function(st){st===void 0&&(st=16);for(var Yt="",Wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ee=Wt.length,ue=0;ue<st;ue++)Yt+=Wt.charAt(Math.floor(Math.random()*ee));return Yt},se=function(st){if(st&&st.substr(0,4)==="<svg"){var Yt="";return B()?Yt=window.btoa(st):typeof Buffer<"u"&&(Yt=Buffer.from(st,"utf8").toString("base64")),Yt?"data:image/svg+xml;base64,".concat(Yt):st}return st}},828:(C,wt,I)=>{var rt={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./DeleteComponent":517,"./DeleteComponent.ts":517,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function _t(J){var B=X(J);return I(B)}function X(J){if(!I.o(rt,J)){var B=new Error("Cannot find module '"+J+"'");throw B.code="MODULE_NOT_FOUND",B}return rt[J]}_t.keys=function(){return Object.keys(rt)},_t.resolve=X,C.exports=_t,_t.id=828},50:(C,wt,I)=>{I.r(wt),I.d(wt,{VERSION:()=>_t,after:()=>Sr,all:()=>Wi,allKeys:()=>qt,any:()=>hi,assign:()=>Dn,before:()=>Oo,bind:()=>bo,bindAll:()=>Wo,chain:()=>Ms,chunk:()=>Yo,clone:()=>Ro,collect:()=>Or,compact:()=>Yi,compose:()=>Ns,constant:()=>Pe,contains:()=>pr,countBy:()=>ja,create:()=>xo,debounce:()=>Jn,default:()=>El,defaults:()=>_o,defer:()=>Hi,delay:()=>So,detect:()=>hr,difference:()=>ko,drop:()=>kr,each:()=>vn,escape:()=>Ut,every:()=>Wi,extend:()=>Mr,extendOwn:()=>Dn,filter:()=>mn,find:()=>hr,findIndex:()=>di,findKey:()=>Is,findLastIndex:()=>$o,findWhere:()=>qn,first:()=>io,flatten:()=>Xi,foldl:()=>Dr,foldr:()=>Bi,forEach:()=>vn,functions:()=>_n,get:()=>Lr,groupBy:()=>Go,has:()=>Co,head:()=>io,identity:()=>Jr,include:()=>pr,includes:()=>pr,indexBy:()=>qi,indexOf:()=>Zn,initial:()=>Ki,inject:()=>Dr,intersection:()=>Ko,invert:()=>dn,invoke:()=>Nr,isArguments:()=>ee,isArray:()=>st,isArrayBuffer:()=>Se,isBoolean:()=>et,isDataView:()=>se,isDate:()=>Mt,isElement:()=>Ct,isEmpty:()=>gt,isEqual:()=>Qe,isError:()=>Kt,isFinite:()=>ue,isFunction:()=>xe,isMap:()=>Ln,isMatch:()=>Tt,isNaN:()=>Jt,isNull:()=>H,isNumber:()=>N,isObject:()=>D,isRegExp:()=>Et,isSet:()=>Re,isString:()=>vt,isSymbol:()=>Ae,isTypedArray:()=>Ht,isUndefined:()=>Y,isWeakMap:()=>fn,isWeakSet:()=>Ar,iteratee:()=>vo,keys:()=>z,last:()=>vi,lastIndexOf:()=>Ui,map:()=>Or,mapObject:()=>ge,matcher:()=>Wn,matches:()=>Wn,max:()=>Fr,memoize:()=>Ls,methods:()=>_n,min:()=>gi,mixin:()=>zs,negate:()=>pi,noop:()=>rr,now:()=>In,object:()=>Da,omit:()=>Gi,once:()=>fi,pairs:()=>jr,partial:()=>oo,partition:()=>Ma,pick:()=>To,pluck:()=>Ir,property:()=>Nn,propertyOf:()=>Uo,random:()=>Ye,range:()=>Ji,reduce:()=>Dr,reduceRight:()=>Bi,reject:()=>Tr,rest:()=>kr,restArguments:()=>at,result:()=>Tn,sample:()=>Vs,select:()=>mn,shuffle:()=>Ea,size:()=>La,some:()=>hi,sortBy:()=>Aa,sortedIndex:()=>zi,tail:()=>kr,take:()=>io,tap:()=>ro,template:()=>Hn,templateSettings:()=>$,throttle:()=>Ds,times:()=>or,toArray:()=>Vr,toPath:()=>ur,transpose:()=>mi,unescape:()=>T,union:()=>Rs,uniq:()=>Po,unique:()=>Po,uniqueId:()=>xr,unzip:()=>mi,values:()=>Yn,where:()=>kn,without:()=>yn,wrap:()=>Zr,zip:()=>Hs});var rt={};I.r(rt),I.d(rt,{VERSION:()=>_t,after:()=>Sr,all:()=>Wi,allKeys:()=>qt,any:()=>hi,assign:()=>Dn,before:()=>Oo,bind:()=>bo,bindAll:()=>Wo,chain:()=>Ms,chunk:()=>Yo,clone:()=>Ro,collect:()=>Or,compact:()=>Yi,compose:()=>Ns,constant:()=>Pe,contains:()=>pr,countBy:()=>ja,create:()=>xo,debounce:()=>Jn,default:()=>Na,defaults:()=>_o,defer:()=>Hi,delay:()=>So,detect:()=>hr,difference:()=>ko,drop:()=>kr,each:()=>vn,escape:()=>Ut,every:()=>Wi,extend:()=>Mr,extendOwn:()=>Dn,filter:()=>mn,find:()=>hr,findIndex:()=>di,findKey:()=>Is,findLastIndex:()=>$o,findWhere:()=>qn,first:()=>io,flatten:()=>Xi,foldl:()=>Dr,foldr:()=>Bi,forEach:()=>vn,functions:()=>_n,get:()=>Lr,groupBy:()=>Go,has:()=>Co,head:()=>io,identity:()=>Jr,include:()=>pr,includes:()=>pr,indexBy:()=>qi,indexOf:()=>Zn,initial:()=>Ki,inject:()=>Dr,intersection:()=>Ko,invert:()=>dn,invoke:()=>Nr,isArguments:()=>ee,isArray:()=>st,isArrayBuffer:()=>Se,isBoolean:()=>et,isDataView:()=>se,isDate:()=>Mt,isElement:()=>Ct,isEmpty:()=>gt,isEqual:()=>Qe,isError:()=>Kt,isFinite:()=>ue,isFunction:()=>xe,isMap:()=>Ln,isMatch:()=>Tt,isNaN:()=>Jt,isNull:()=>H,isNumber:()=>N,isObject:()=>D,isRegExp:()=>Et,isSet:()=>Re,isString:()=>vt,isSymbol:()=>Ae,isTypedArray:()=>Ht,isUndefined:()=>Y,isWeakMap:()=>fn,isWeakSet:()=>Ar,iteratee:()=>vo,keys:()=>z,last:()=>vi,lastIndexOf:()=>Ui,map:()=>Or,mapObject:()=>ge,matcher:()=>Wn,matches:()=>Wn,max:()=>Fr,memoize:()=>Ls,methods:()=>_n,min:()=>gi,mixin:()=>zs,negate:()=>pi,noop:()=>rr,now:()=>In,object:()=>Da,omit:()=>Gi,once:()=>fi,pairs:()=>jr,partial:()=>oo,partition:()=>Ma,pick:()=>To,pluck:()=>Ir,property:()=>Nn,propertyOf:()=>Uo,random:()=>Ye,range:()=>Ji,reduce:()=>Dr,reduceRight:()=>Bi,reject:()=>Tr,rest:()=>kr,restArguments:()=>at,result:()=>Tn,sample:()=>Vs,select:()=>mn,shuffle:()=>Ea,size:()=>La,some:()=>hi,sortBy:()=>Aa,sortedIndex:()=>zi,tail:()=>kr,take:()=>io,tap:()=>ro,template:()=>Hn,templateSettings:()=>$,throttle:()=>Ds,times:()=>or,toArray:()=>Vr,toPath:()=>ur,transpose:()=>mi,unescape:()=>T,union:()=>Rs,uniq:()=>Po,unique:()=>Po,uniqueId:()=>xr,unzip:()=>mi,values:()=>Yn,where:()=>kn,without:()=>yn,wrap:()=>Zr,zip:()=>Hs});var _t="1.13.4",X=typeof self=="object"&&self.self===self&&self||typeof Ic=="object"&&Ic.global===Ic&&Ic||Function("return this")()||{},J=Array.prototype,B=Object.prototype,k=typeof Symbol<"u"?Symbol.prototype:null,P=J.push,E=J.slice,j=B.toString,L=B.hasOwnProperty,ot=typeof ArrayBuffer<"u",it=typeof DataView<"u",At=Array.isArray,jt=Object.keys,Dt=Object.create,te=ot&&ArrayBuffer.isView,ft=isNaN,ut=isFinite,Nt=!{toString:null}.propertyIsEnumerable("toString"),Zt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],re=Math.pow(2,53)-1;function at(_,A){return A=A==null?_.length-1:+A,function(){for(var q=Math.max(arguments.length-A,0),Z=Array(q),mt=0;mt<q;mt++)Z[mt]=arguments[mt+A];switch(A){case 0:return _.call(this,Z);case 1:return _.call(this,arguments[0],Z);case 2:return _.call(this,arguments[0],arguments[1],Z)}var lt=Array(A+1);for(mt=0;mt<A;mt++)lt[mt]=arguments[mt];return lt[A]=Z,_.apply(this,lt)}}function D(_){var A=typeof _;return A==="function"||A==="object"&&!!_}function H(_){return _===null}function Y(_){return _===void 0}function et(_){return _===!0||_===!1||j.call(_)==="[object Boolean]"}function Ct(_){return!(!_||_.nodeType!==1)}function nt(_){var A="[object "+_+"]";return function(q){return j.call(q)===A}}const vt=nt("String"),N=nt("Number"),Mt=nt("Date"),Et=nt("RegExp"),Kt=nt("Error"),Ae=nt("Symbol"),Se=nt("ArrayBuffer");var _e=nt("Function"),Ne=X.document&&X.document.childNodes;typeof Int8Array!="object"&&typeof Ne!="function"&&(_e=function(_){return typeof _=="function"||!1});const xe=_e,Oe=nt("Object");var be=it&&Oe(new DataView(new ArrayBuffer(8))),de=typeof Map<"u"&&Oe(new Map),ce=nt("DataView");const se=be?function(_){return _!=null&&xe(_.getInt8)&&Se(_.buffer)}:ce,st=At||nt("Array");function Yt(_,A){return _!=null&&L.call(_,A)}var Wt=nt("Arguments");(function(){Wt(arguments)||(Wt=function(_){return Yt(_,"callee")})})();const ee=Wt;function ue(_){return!Ae(_)&&ut(_)&&!isNaN(parseFloat(_))}function Jt(_){return N(_)&&ft(_)}function Pe(_){return function(){return _}}function Xe(_){return function(A){var q=_(A);return typeof q=="number"&&q>=0&&q<=re}}function qe(_){return function(A){return A==null?void 0:A[_]}}const pn=qe("byteLength"),Rn=Xe(pn);var yt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const Ht=ot?function(_){return te?te(_)&&!se(_):Rn(_)&&yt.test(j.call(_))}:Pe(!1),b=qe("length");function F(_,A){A=function(It){for(var $t={},je=It.length,He=0;He<je;++He)$t[It[He]]=!0;return{contains:function(cn){return $t[cn]===!0},push:function(cn){return $t[cn]=!0,It.push(cn)}}}(A);var q=Zt.length,Z=_.constructor,mt=xe(Z)&&Z.prototype||B,lt="constructor";for(Yt(_,lt)&&!A.contains(lt)&&A.push(lt);q--;)(lt=Zt[q])in _&&_[lt]!==mt[lt]&&!A.contains(lt)&&A.push(lt)}function z(_){if(!D(_))return[];if(jt)return jt(_);var A=[];for(var q in _)Yt(_,q)&&A.push(q);return Nt&&F(_,A),A}function gt(_){if(_==null)return!0;var A=b(_);return typeof A=="number"&&(st(_)||vt(_)||ee(_))?A===0:b(z(_))===0}function Tt(_,A){var q=z(A),Z=q.length;if(_==null)return!Z;for(var mt=Object(_),lt=0;lt<Z;lt++){var It=q[lt];if(A[It]!==mt[It]||!(It in mt))return!1}return!0}function Ot(_){return _ instanceof Ot?_:this instanceof Ot?void(this._wrapped=_):new Ot(_)}function pe(_){return new Uint8Array(_.buffer||_,_.byteOffset||0,pn(_))}Ot.VERSION=_t,Ot.prototype.value=function(){return this._wrapped},Ot.prototype.valueOf=Ot.prototype.toJSON=Ot.prototype.value,Ot.prototype.toString=function(){return String(this._wrapped)};var Te="[object DataView]";function Ie(_,A,q,Z){if(_===A)return _!==0||1/_==1/A;if(_==null||A==null)return!1;if(_!=_)return A!=A;var mt=typeof _;return(mt==="function"||mt==="object"||typeof A=="object")&&ze(_,A,q,Z)}function ze(_,A,q,Z){_ instanceof Ot&&(_=_._wrapped),A instanceof Ot&&(A=A._wrapped);var mt=j.call(_);if(mt!==j.call(A))return!1;if(be&&mt=="[object Object]"&&se(_)){if(!se(A))return!1;mt=Te}switch(mt){case"[object RegExp]":case"[object String]":return""+_==""+A;case"[object Number]":return+_!=+_?+A!=+A:+_==0?1/+_==1/A:+_==+A;case"[object Date]":case"[object Boolean]":return+_==+A;case"[object Symbol]":return k.valueOf.call(_)===k.valueOf.call(A);case"[object ArrayBuffer]":case Te:return ze(pe(_),pe(A),q,Z)}var lt=mt==="[object Array]";if(!lt&&Ht(_)){if(pn(_)!==pn(A))return!1;if(_.buffer===A.buffer&&_.byteOffset===A.byteOffset)return!0;lt=!0}if(!lt){if(typeof _!="object"||typeof A!="object")return!1;var It=_.constructor,$t=A.constructor;if(It!==$t&&!(xe(It)&&It instanceof It&&xe($t)&&$t instanceof $t)&&"constructor"in _&&"constructor"in A)return!1}Z=Z||[];for(var je=(q=q||[]).length;je--;)if(q[je]===_)return Z[je]===A;if(q.push(_),Z.push(A),lt){if((je=_.length)!==A.length)return!1;for(;je--;)if(!Ie(_[je],A[je],q,Z))return!1}else{var He,cn=z(_);if(je=cn.length,z(A).length!==je)return!1;for(;je--;)if(!Yt(A,He=cn[je])||!Ie(_[He],A[He],q,Z))return!1}return q.pop(),Z.pop(),!0}function Qe(_,A){return Ie(_,A)}function qt(_){if(!D(_))return[];var A=[];for(var q in _)A.push(q);return Nt&&F(_,A),A}function V(_){var A=b(_);return function(q){if(q==null)return!1;var Z=qt(q);if(b(Z))return!1;for(var mt=0;mt<A;mt++)if(!xe(q[_[mt]]))return!1;return _!==Fe||!xe(q[Q])}}var Q="forEach",pt="has",bt=["clear","delete"],Gt=["get",pt,"set"],he=bt.concat(Q,Gt),Fe=bt.concat(Gt),We=["add"].concat(bt,Q,pt);const Ln=de?V(he):nt("Map"),fn=de?V(Fe):nt("WeakMap"),Re=de?V(We):nt("Set"),Ar=nt("WeakSet");function Yn(_){for(var A=z(_),q=A.length,Z=Array(q),mt=0;mt<q;mt++)Z[mt]=_[A[mt]];return Z}function jr(_){for(var A=z(_),q=A.length,Z=Array(q),mt=0;mt<q;mt++)Z[mt]=[A[mt],_[A[mt]]];return Z}function dn(_){for(var A={},q=z(_),Z=0,mt=q.length;Z<mt;Z++)A[_[q[Z]]]=q[Z];return A}function _n(_){var A=[];for(var q in _)xe(_[q])&&A.push(q);return A.sort()}function Bn(_,A){return function(q){var Z=arguments.length;if(A&&(q=Object(q)),Z<2||q==null)return q;for(var mt=1;mt<Z;mt++)for(var lt=arguments[mt],It=_(lt),$t=It.length,je=0;je<$t;je++){var He=It[je];A&&q[He]!==void 0||(q[He]=lt[He])}return q}}const Mr=Bn(qt),Dn=Bn(z),_o=Bn(qt,!0);function Vo(_){if(!D(_))return{};if(Dt)return Dt(_);var A=function(){};A.prototype=_;var q=new A;return A.prototype=null,q}function xo(_,A){var q=Vo(_);return A&&Dn(q,A),q}function Ro(_){return D(_)?st(_)?_.slice():Mr({},_):_}function ro(_,A){return A(_),_}function ur(_){return st(_)?_:[_]}function ln(_){return Ot.toPath(_)}function Ho(_,A){for(var q=A.length,Z=0;Z<q;Z++){if(_==null)return;_=_[A[Z]]}return q?_:void 0}function Lr(_,A,q){var Z=Ho(_,ln(A));return Y(Z)?q:Z}function Co(_,A){for(var q=(A=ln(A)).length,Z=0;Z<q;Z++){var mt=A[Z];if(!Yt(_,mt))return!1;_=_[mt]}return!!q}function Jr(_){return _}function Wn(_){return _=Dn({},_),function(A){return Tt(A,_)}}function Nn(_){return _=ln(_),function(A){return Ho(A,_)}}function $n(_,A,q){if(A===void 0)return _;switch(q==null?3:q){case 1:return function(Z){return _.call(A,Z)};case 3:return function(Z,mt,lt){return _.call(A,Z,mt,lt)};case 4:return function(Z,mt,lt,It){return _.call(A,Z,mt,lt,It)}}return function(){return _.apply(A,arguments)}}function zo(_,A,q){return _==null?Jr:xe(_)?$n(_,A,q):D(_)&&!st(_)?Wn(_):Nn(_)}function vo(_,A){return zo(_,A,1/0)}function Ge(_,A,q){return Ot.iteratee!==vo?Ot.iteratee(_,A):zo(_,A,q)}function ge(_,A,q){A=Ge(A,q);for(var Z=z(_),mt=Z.length,lt={},It=0;It<mt;It++){var $t=Z[It];lt[$t]=A(_[$t],$t,_)}return lt}function rr(){}function Uo(_){return _==null?rr:function(A){return Lr(_,A)}}function or(_,A,q){var Z=Array(Math.max(0,_));A=$n(A,q,1);for(var mt=0;mt<_;mt++)Z[mt]=A(mt);return Z}function Ye(_,A){return A==null&&(A=_,_=0),_+Math.floor(Math.random()*(A-_+1))}Ot.toPath=ur,Ot.iteratee=vo;const In=Date.now||function(){return new Date().getTime()};function mo(_){var A=function(lt){return _[lt]},q="(?:"+z(_).join("|")+")",Z=RegExp(q),mt=RegExp(q,"g");return function(lt){return lt=lt==null?"":""+lt,Z.test(lt)?lt.replace(mt,A):lt}}const Bo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ut=mo(Bo),T=mo(dn(Bo)),$=Ot.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Lt=/(.)^/,Qt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},fe=/\\|'|\r|\n|\u2028|\u2029/g;function $e(_){return"\\"+Qt[_]}var oe=/^\s*(\w|\$)+\s*$/;function Hn(_,A,q){!A&&q&&(A=q),A=_o({},A,Ot.templateSettings);var Z=RegExp([(A.escape||Lt).source,(A.interpolate||Lt).source,(A.evaluate||Lt).source].join("|")+"|$","g"),mt=0,lt="__p+='";_.replace(Z,function(He,cn,Rr,Qi,Eo){return lt+=_.slice(mt,Eo).replace(fe,$e),mt=Eo+He.length,cn?lt+=`'+
((__t=(`+cn+`))==null?'':_.escape(__t))+
'`:Rr?lt+=`'+
((__t=(`+Rr+`))==null?'':__t)+
'`:Qi&&(lt+=`';
`+Qi+`
__p+='`),He}),lt+=`';
`;var It,$t=A.variable;if($t){if(!oe.test($t))throw new Error("variable is not a bare identifier: "+$t)}else lt=`with(obj||{}){
`+lt+`}
`,$t="obj";lt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+lt+`return __p;
`;try{It=new Function($t,"_",lt)}catch(He){throw He.source=lt,He}var je=function(He){return It.call(this,He,Ot)};return je.source="function("+$t+`){
`+lt+"}",je}function Tn(_,A,q){var Z=(A=ln(A)).length;if(!Z)return xe(q)?q.call(_):q;for(var mt=0;mt<Z;mt++){var lt=_==null?void 0:_[A[mt]];lt===void 0&&(lt=q,mt=Z),_=xe(lt)?lt.call(_):lt}return _}var Ri=0;function xr(_){var A=++Ri+"";return _?_+A:A}function Ms(_){var A=Ot(_);return A._chain=!0,A}function Cr(_,A,q,Z,mt){if(!(Z instanceof A))return _.apply(q,mt);var lt=Vo(_.prototype),It=_.apply(lt,mt);return D(It)?It:lt}var yo=at(function(_,A){var q=yo.placeholder,Z=function(){for(var mt=0,lt=A.length,It=Array(lt),$t=0;$t<lt;$t++)It[$t]=A[$t]===q?arguments[mt++]:A[$t];for(;mt<arguments.length;)It.push(arguments[mt++]);return Cr(_,Z,this,this,It)};return Z});yo.placeholder=Ot;const oo=yo,bo=at(function(_,A,q){if(!xe(_))throw new TypeError("Bind must be called on a function");var Z=at(function(mt){return Cr(_,Z,A,this,q.concat(mt))});return Z}),Xn=Xe(b);function wo(_,A,q,Z){if(Z=Z||[],A||A===0){if(A<=0)return Z.concat(_)}else A=1/0;for(var mt=Z.length,lt=0,It=b(_);lt<It;lt++){var $t=_[lt];if(Xn($t)&&(st($t)||ee($t)))if(A>1)wo($t,A-1,q,Z),mt=Z.length;else for(var je=0,He=$t.length;je<He;)Z[mt++]=$t[je++];else q||(Z[mt++]=$t)}return Z}const Wo=at(function(_,A){var q=(A=wo(A,!1,!1)).length;if(q<1)throw new Error("bindAll must be passed function names");for(;q--;){var Z=A[q];_[Z]=bo(_[Z],_)}return _});function Ls(_,A){var q=function(Z){var mt=q.cache,lt=""+(A?A.apply(this,arguments):Z);return Yt(mt,lt)||(mt[lt]=_.apply(this,arguments)),mt[lt]};return q.cache={},q}const So=at(function(_,A,q){return setTimeout(function(){return _.apply(null,q)},A)}),Hi=oo(So,Ot,1);function Ds(_,A,q){var Z,mt,lt,It,$t=0;q||(q={});var je=function(){$t=q.leading===!1?0:In(),Z=null,It=_.apply(mt,lt),Z||(mt=lt=null)},He=function(){var cn=In();$t||q.leading!==!1||($t=cn);var Rr=A-(cn-$t);return mt=this,lt=arguments,Rr<=0||Rr>A?(Z&&(clearTimeout(Z),Z=null),$t=cn,It=_.apply(mt,lt),Z||(mt=lt=null)):Z||q.trailing===!1||(Z=setTimeout(je,Rr)),It};return He.cancel=function(){clearTimeout(Z),$t=0,Z=mt=lt=null},He}function Jn(_,A,q){var Z,mt,lt,It,$t,je=function(){var cn=In()-mt;A>cn?Z=setTimeout(je,A-cn):(Z=null,q||(It=_.apply($t,lt)),Z||(lt=$t=null))},He=at(function(cn){return $t=this,lt=cn,mt=In(),Z||(Z=setTimeout(je,A),q&&(It=_.apply($t,lt))),It});return He.cancel=function(){clearTimeout(Z),Z=lt=$t=null},He}function Zr(_,A){return oo(A,_)}function pi(_){return function(){return!_.apply(this,arguments)}}function Ns(){var _=arguments,A=_.length-1;return function(){for(var q=A,Z=_[A].apply(this,arguments);q--;)Z=_[q].call(this,Z);return Z}}function Sr(_,A){return function(){if(--_<1)return A.apply(this,arguments)}}function Oo(_,A){var q;return function(){return--_>0&&(q=A.apply(this,arguments)),_<=1&&(A=null),q}}const fi=oo(Oo,2);function Is(_,A,q){A=Ge(A,q);for(var Z,mt=z(_),lt=0,It=mt.length;lt<It;lt++)if(A(_[Z=mt[lt]],Z,_))return Z}function Pa(_){return function(A,q,Z){q=Ge(q,Z);for(var mt=b(A),lt=_>0?0:mt-1;lt>=0&&lt<mt;lt+=_)if(q(A[lt],lt,A))return lt;return-1}}const di=Pa(1),$o=Pa(-1);function zi(_,A,q,Z){for(var mt=(q=Ge(q,Z,1))(A),lt=0,It=b(_);lt<It;){var $t=Math.floor((lt+It)/2);q(_[$t])<mt?lt=$t+1:It=$t}return lt}function Be(_,A,q){return function(Z,mt,lt){var It=0,$t=b(Z);if(typeof lt=="number")_>0?It=lt>=0?lt:Math.max(lt+$t,It):$t=lt>=0?Math.min(lt+1,$t):lt+$t+1;else if(q&&lt&&$t)return Z[lt=q(Z,mt)]===mt?lt:-1;if(mt!=mt)return(lt=A(E.call(Z,It,$t),Jt))>=0?lt+It:-1;for(lt=_>0?It:$t-1;lt>=0&&lt<$t;lt+=_)if(Z[lt]===mt)return lt;return-1}}const Zn=Be(1,di,zi),Ui=Be(-1,$o);function hr(_,A,q){var Z=(Xn(_)?di:Is)(_,A,q);if(Z!==void 0&&Z!==-1)return _[Z]}function qn(_,A){return hr(_,Wn(A))}function vn(_,A,q){var Z,mt;if(A=$n(A,q),Xn(_))for(Z=0,mt=_.length;Z<mt;Z++)A(_[Z],Z,_);else{var lt=z(_);for(Z=0,mt=lt.length;Z<mt;Z++)A(_[lt[Z]],lt[Z],_)}return _}function Or(_,A,q){A=Ge(A,q);for(var Z=!Xn(_)&&z(_),mt=(Z||_).length,lt=Array(mt),It=0;It<mt;It++){var $t=Z?Z[It]:It;lt[It]=A(_[$t],$t,_)}return lt}function qo(_){var A=function(q,Z,mt,lt){var It=!Xn(q)&&z(q),$t=(It||q).length,je=_>0?0:$t-1;for(lt||(mt=q[It?It[je]:je],je+=_);je>=0&&je<$t;je+=_){var He=It?It[je]:je;mt=Z(mt,q[He],He,q)}return mt};return function(q,Z,mt,lt){var It=arguments.length>=3;return A(q,$n(Z,lt,4),mt,It)}}const Dr=qo(1),Bi=qo(-1);function mn(_,A,q){var Z=[];return A=Ge(A,q),vn(_,function(mt,lt,It){A(mt,lt,It)&&Z.push(mt)}),Z}function Tr(_,A,q){return mn(_,pi(Ge(A)),q)}function Wi(_,A,q){A=Ge(A,q);for(var Z=!Xn(_)&&z(_),mt=(Z||_).length,lt=0;lt<mt;lt++){var It=Z?Z[lt]:lt;if(!A(_[It],It,_))return!1}return!0}function hi(_,A,q){A=Ge(A,q);for(var Z=!Xn(_)&&z(_),mt=(Z||_).length,lt=0;lt<mt;lt++){var It=Z?Z[lt]:lt;if(A(_[It],It,_))return!0}return!1}function pr(_,A,q,Z){return Xn(_)||(_=Yn(_)),(typeof q!="number"||Z)&&(q=0),Zn(_,A,q)>=0}const Nr=at(function(_,A,q){var Z,mt;return xe(A)?mt=A:(A=ln(A),Z=A.slice(0,-1),A=A[A.length-1]),Or(_,function(lt){var It=mt;if(!It){if(Z&&Z.length&&(lt=Ho(lt,Z)),lt==null)return;It=lt[A]}return It==null?It:It.apply(lt,q)})});function Ir(_,A){return Or(_,Nn(A))}function kn(_,A){return mn(_,Wn(A))}function Fr(_,A,q){var Z,mt,lt=-1/0,It=-1/0;if(A==null||typeof A=="number"&&typeof _[0]!="object"&&_!=null)for(var $t=0,je=(_=Xn(_)?_:Yn(_)).length;$t<je;$t++)(Z=_[$t])!=null&&Z>lt&&(lt=Z);else A=Ge(A,q),vn(_,function(He,cn,Rr){((mt=A(He,cn,Rr))>It||mt===-1/0&&lt===-1/0)&&(lt=He,It=mt)});return lt}function gi(_,A,q){var Z,mt,lt=1/0,It=1/0;if(A==null||typeof A=="number"&&typeof _[0]!="object"&&_!=null)for(var $t=0,je=(_=Xn(_)?_:Yn(_)).length;$t<je;$t++)(Z=_[$t])!=null&&Z<lt&&(lt=Z);else A=Ge(A,q),vn(_,function(He,cn,Rr){((mt=A(He,cn,Rr))<It||mt===1/0&&lt===1/0)&&(lt=He,It=mt)});return lt}var Fs=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Vr(_){return _?st(_)?E.call(_):vt(_)?_.match(Fs):Xn(_)?Or(_,Jr):Yn(_):[]}function Vs(_,A,q){if(A==null||q)return Xn(_)||(_=Yn(_)),_[Ye(_.length-1)];var Z=Vr(_),mt=b(Z);A=Math.max(Math.min(A,mt),0);for(var lt=mt-1,It=0;It<A;It++){var $t=Ye(It,lt),je=Z[It];Z[It]=Z[$t],Z[$t]=je}return Z.slice(0,A)}function Ea(_){return Vs(_,1/0)}function Aa(_,A,q){var Z=0;return A=Ge(A,q),Ir(Or(_,function(mt,lt,It){return{value:mt,index:Z++,criteria:A(mt,lt,It)}}).sort(function(mt,lt){var It=mt.criteria,$t=lt.criteria;if(It!==$t){if(It>$t||It===void 0)return 1;if(It<$t||$t===void 0)return-1}return mt.index-lt.index}),"value")}function $i(_,A){return function(q,Z,mt){var lt=A?[[],[]]:{};return Z=Ge(Z,mt),vn(q,function(It,$t){var je=Z(It,$t,q);_(lt,It,je)}),lt}}const Go=$i(function(_,A,q){Yt(_,q)?_[q].push(A):_[q]=[A]}),qi=$i(function(_,A,q){_[q]=A}),ja=$i(function(_,A,q){Yt(_,q)?_[q]++:_[q]=1}),Ma=$i(function(_,A,q){_[q?0:1].push(A)},!0);function La(_){return _==null?0:Xn(_)?_.length:z(_).length}function Pl(_,A,q){return A in q}const To=at(function(_,A){var q={},Z=A[0];if(_==null)return q;xe(Z)?(A.length>1&&(Z=$n(Z,A[1])),A=qt(_)):(Z=Pl,A=wo(A,!1,!1),_=Object(_));for(var mt=0,lt=A.length;mt<lt;mt++){var It=A[mt],$t=_[It];Z($t,It,_)&&(q[It]=$t)}return q}),Gi=at(function(_,A){var q,Z=A[0];return xe(Z)?(Z=pi(Z),A.length>1&&(q=A[1])):(A=Or(wo(A,!1,!1),String),Z=function(mt,lt){return!pr(A,lt)}),To(_,Z,q)});function Ki(_,A,q){return E.call(_,0,Math.max(0,_.length-(A==null||q?1:A)))}function io(_,A,q){return _==null||_.length<1?A==null||q?void 0:[]:A==null||q?_[0]:Ki(_,_.length-A)}function kr(_,A,q){return E.call(_,A==null||q?1:A)}function vi(_,A,q){return _==null||_.length<1?A==null||q?void 0:[]:A==null||q?_[_.length-1]:kr(_,Math.max(0,_.length-A))}function Yi(_){return mn(_,Boolean)}function Xi(_,A){return wo(_,A,!1)}const ko=at(function(_,A){return A=wo(A,!0,!0),mn(_,function(q){return!pr(A,q)})}),yn=at(function(_,A){return ko(_,A)});function Po(_,A,q,Z){et(A)||(Z=q,q=A,A=!1),q!=null&&(q=Ge(q,Z));for(var mt=[],lt=[],It=0,$t=b(_);It<$t;It++){var je=_[It],He=q?q(je,It,_):je;A&&!q?(It&&lt===He||mt.push(je),lt=He):q?pr(lt,He)||(lt.push(He),mt.push(je)):pr(mt,je)||mt.push(je)}return mt}const Rs=at(function(_){return Po(wo(_,!0,!0))});function Ko(_){for(var A=[],q=arguments.length,Z=0,mt=b(_);Z<mt;Z++){var lt=_[Z];if(!pr(A,lt)){var It;for(It=1;It<q&&pr(arguments[It],lt);It++);It===q&&A.push(lt)}}return A}function mi(_){for(var A=_&&Fr(_,b).length||0,q=Array(A),Z=0;Z<A;Z++)q[Z]=Ir(_,Z);return q}const Hs=at(mi);function Da(_,A){for(var q={},Z=0,mt=b(_);Z<mt;Z++)A?q[_[Z]]=A[Z]:q[_[Z][0]]=_[Z][1];return q}function Ji(_,A,q){A==null&&(A=_||0,_=0),q||(q=A<_?-1:1);for(var Z=Math.max(Math.ceil((A-_)/q),0),mt=Array(Z),lt=0;lt<Z;lt++,_+=q)mt[lt]=_;return mt}function Yo(_,A){if(A==null||A<1)return[];for(var q=[],Z=0,mt=_.length;Z<mt;)q.push(E.call(_,Z,Z+=A));return q}function yi(_,A){return _._chain?Ot(A).chain():A}function zs(_){return vn(_n(_),function(A){var q=Ot[A]=_[A];Ot.prototype[A]=function(){var Z=[this._wrapped];return P.apply(Z,arguments),yi(this,q.apply(Ot,Z))}}),Ot}vn(["pop","push","reverse","shift","sort","splice","unshift"],function(_){var A=J[_];Ot.prototype[_]=function(){var q=this._wrapped;return q!=null&&(A.apply(q,arguments),_!=="shift"&&_!=="splice"||q.length!==0||delete q[0]),yi(this,q)}}),vn(["concat","join","slice"],function(_){var A=J[_];Ot.prototype[_]=function(){var q=this._wrapped;return q!=null&&(q=A.apply(q,arguments)),yi(this,q)}});const Na=Ot;var Zi=zs(rt);Zi._=Zi;const El=Zi}},Fc={};function gn(C){var wt=Fc[C];if(wt!==void 0)return wt.exports;var I=Fc[C]={exports:{}};return zf[C].call(I.exports,I,I.exports,gn),I.exports}gn.n=C=>{var wt=C&&C.__esModule?()=>C.default:()=>C;return gn.d(wt,{a:wt}),wt},gn.d=(C,wt)=>{for(var I in wt)gn.o(wt,I)&&!gn.o(C,I)&&Object.defineProperty(C,I,{enumerable:!0,get:wt[I]})},gn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),gn.o=(C,wt)=>Object.prototype.hasOwnProperty.call(C,wt),gn.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var vp={};return(()=>{gn.d(vp,{default:()=>im});var C=gn(50),wt=gn(895),I=gn(163);function rt(a){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var e=a.raw;return e.reduce(function(n,i,l){var f=r[l-1],d=e[l-1];return Array.isArray(f)?f=f.join(""):d&&d.slice(-1)==="$"?n=n.slice(0,-1):f=(0,I.escape)(f),n+f+i})}const _t={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,multiFrames:!1,customUI:!1};var X=gn(316),J=gn.n(X),B,k=gn(346),P=(B=function(a,r){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},B(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=a}B(a,r),a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),E=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return P(r,a),r}(k.Hn);const j=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return P(r,a),r.prototype.getByComponent=function(t){var e=this;return this.filter(function(n){return e.getComponent(n)===t})[0]},r.prototype.addComponent=function(t,e){var n=this,i=((0,C.isArray)(t)?t:[t]).filter(function(l){return!n.hasComponent(l)}).map(function(l){return new E({component:l})})[0];return this.push(i,e)},r.prototype.getComponent=function(t){return t.get("component")},r.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},r.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},r.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},r.prototype.removeComponent=function(t,e){var n=this,i=((0,C.isArray)(t)?t:[t]).map(function(l){return n.getByComponent(l)});return this.remove(i,e)},r}(k.FE);var L=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ot=function(){return ot=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ot.apply(this,arguments)},it=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},At=function(){function a(r,t,e){this.cls=[],this.isPrivate=!1,this._em=r,this._name=t;var n=this.name.charAt(0).toLowerCase()+this.name.slice(1),i=(0,C.isUndefined)(r.config[n])?r.config[this.name]:r.config[n],l=i===!0?{}:i||{};l.pStylePrefix=r.config.pStylePrefix||"",(0,C.isUndefined)(i)||i||(l._disable=1),l.em=r,this._config=(0,I.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.init=function(r){},a.prototype.render=function(r){},a.prototype.postLoad=function(r){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return r?this.config[r]:this.config},a.prototype.__logWarn=function(r,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(r),t)},a.prototype.__appendTo=function(){var r=this.getConfig().appendTo;if(r){var t=(0,C.isElement)(r)?r:document.querySelector(r);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const jt=At;var Dt=function(a){function r(t,e,n,i,l,f){f===void 0&&(f={});var d=a.call(this,t,e,l)||this;return d.cls=[],d.private=!1,d.all=n,d.events=i,!f.skipListen&&d.__initListen(),d}return L(r,a),r.prototype.postLoad=function(t){},r.prototype.render=function(t){},r.prototype.getProjectData=function(t){var e={},n=this.storageKey;return n&&(e[n]=t||this.getAll()),e},r.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.all,i=e.onResult,l=e.reset,f=this.storageKey,d={action:"load"},v=n||this.all,g=t[f];if(typeof g=="string")try{g=JSON.parse(g)}catch{this.__logWarn("Data parsing failed",{input:g})}return l&&g&&v.reset(void 0,d),i?g&&i(g,d):g&&(0,I.isDef)(g.length)&&v.reset(g,d),g},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},r.prototype.getAll=function(){return it([],this.all.models,!0)},r.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},r.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,n=e.all,i=e.em,l=e.events;n&&i&&n.on("add",function(f,d,v){return i.trigger(l.add,f,v)}).on("remove",function(f,d,v){return i.trigger(l.remove,f,v)}).on("change",function(f,d){return i.trigger(l.update,f,f.changedAttributes(),d)}).on("all",this.__catchAllEvent,this),this.cls=[n].concat(t.collections||[]),(t.propagate||[]).forEach(function(f){var d=f.entity,v=f.event;d.on("all",function(g,w,S,M){var R=ot({event:g},M||S);[i,n].map(function(G){return G.trigger(v,w,R)})})})},r.prototype.__remove=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,C.isString)(t)?this.get(t):t,f=function(){return l&&n.all.remove(l,e),l};return!e.silent&&(i==null||i.trigger(this.events.removeBefore,l,f,e)),!e.abort&&f()},r.prototype.__catchAllEvent=function(t,e,n,i){var l=this.em,f=this.events,d=i||n;l&&f.all&&l.trigger(f.all,{event:t,model:e,options:d}),this.__onAllEvent()},r.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var n=(0,C.isElement)(e)?e:document.querySelector(e);if(!n)return this.__logWarn('"appendTo" element not found');n.appendChild(this.render(t))}},r.prototype.__onAllEvent=function(){},r.prototype._createId=function(t){t===void 0&&(t=16);var e,n=this.getAll().length+t,i=this.getAllMap();do e=(0,I.createId)(n);while(i[e]);return e},r.prototype.__listenAdd=function(t,e){var n=this;t.on("add",function(i,l,f){return n.em.trigger(e,i,f)})},r.prototype.__listenRemove=function(t,e){var n=this;t.on("remove",function(i,l,f){return n.em.trigger(e,i,f)})},r.prototype.__listenUpdate=function(t,e){var n=this;t.on("change",function(i,l){return n.em.trigger(e,i,i.changedAttributes(),l)})},r.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},r}(At);const te={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"]};var ft=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ut=function(a){function r(t,e,n){var i=a.call(this,e,n)||this;return i._module=t,i}return ft(r,a),Object.defineProperty(r.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),r}(k.Hn);var Nt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Zt=function(a){function r(t,e,n){return a.call(this,e,{module:t,modelConstructor:n})||this}return Nt(r,a),r.prototype.add=function(t,e){var n,i=this,l=(0,C.isArray)(t)?t:(0,C.isUndefined)(t)?void 0:[t];return l=(n=l==null?void 0:l.map(function(f){return f instanceof i.newModel?f:new i.newModel(i.module,f)}))!==null&&n!==void 0?n:[void 0],a.prototype.add.call(this,(0,C.isArray)(t)?l:l[0],e)},r.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},r}(k.FE);var re=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),at=function(){return at=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},at.apply(this,arguments)},D=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},H="__aw",Y="__ah",et=function(a){function r(t,e){var n=a.call(this,t,e)||this,i=n.em,l=n.attributes,f=l.styles,d=l.component,v=i.Components,g=v.getConfig(),w=i.Css.getAll(),S={},M={em:i,config:g,frame:n,idMap:S};if(!(0,I.isComponent)(d)){var R=(0,I.isObject)(d)?d:{components:d};!R.type&&(R.type="wrapper");var G=v.getType("wrapper").model;n.set("component",new G(R,M))}return f?(0,I.isObject)(f)||(Object.keys(S).length&&Array.isArray(f)&&f.forEach(function(tt){var K=tt.selectors;if(K&&K.length==1){var kt=K[0],Ft=kt.name&&kt.type===2&&kt;if(Ft&&S[Ft.name])Ft.name=S[Ft.name];else if((0,C.isString)(kt)&&kt[0]==="#"){var ae=kt.substring(1);ae&&S[ae]&&(K[0]="#".concat(S[ae]))}}}),w.add(f),n.set("styles",w)):n.set("styles",w),!e.width&&n.set(H,1),!e.height&&n.set(Y,1),n}return re(r,a),r.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),r.prototype.onRemove=function(){this.getComponent().remove({root:1})},r.prototype.changesUp=function(t){t===void 0&&(t={}),t.temporary||t.noCount||t.avoidStore||this.set("changesCount",this.get("changesCount")+1)},r.prototype.getComponent=function(){return this.get("component")},r.prototype.getStyles=function(){return this.get("styles")},r.prototype.disable=function(){this.trigger("disable")},r.prototype.remove=function(){this.view=void 0;var t=this.collection;return t&&t.remove(this)},r.prototype.getHead=function(){return D([],this.head,!0)},r.prototype.setHead=function(t){return this.set("head",D([],t,!0))},r.prototype.addHeadItem=function(t){this.head.push(t)},r.prototype.getHeadByAttr=function(t,e,n){return this.head.filter(function(i){return i.attributes&&i.attributes[t]==e&&(!n||n===i.tag)})[0]},r.prototype.removeHeadByAttr=function(t,e,n){var i=this.getHeadByAttr(t,e,n),l=this.head.indexOf(i);l>=0&&this.head.splice(l,1)},r.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},r.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},r.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},r.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},r.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},r.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",at({frame:this},t))},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=ut.prototype.toJSON.call(this,t),n=(0,C.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[H]&&delete e.width,e[Y]&&delete e.height,(0,C.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,C.forEach)(n,function(i,l){e[l]===i&&delete e[l]}),(0,C.forEach)(["attributes","head"],function(i){(0,C.isEmpty)(e[i])&&delete e[i]}),e},r}(ut);const Ct=et;var nt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const vt=function(a){function r(t,e){e===void 0&&(e=[]);var n=a.call(this,t,e,Ct)||this;return n.loadedItems=0,n.itemsToLoad=0,(0,C.bindAll)(n,"itemLoaded"),n.on("reset",n.onReset),n.on("remove",n.onRemove),n}return nt(r,a),r.prototype.onReset=function(t,e){var n=this;((e==null?void 0:e.previousModels)||[]).map(function(i){return n.onRemove(i)})},r.prototype.onRemove=function(t){t==null||t.onRemove()},r.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},r.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},r.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(n){return n[t?"on":"off"]("loaded",e.itemLoaded)})},r}(Zt);var N=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Mt=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,i=e.em,l={};n.em=i,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(g){return n.unset(g)}));var f=t.frames||[l],d=new vt(i.Canvas,f);d.page=n,n.set("frames",d),!n.getId()&&n.set("id",i==null?void 0:i.get("PageManager")._createId());var v=i==null?void 0:i.get("UndoManager");return v==null||v.add(d),n}return N(r,a),r.prototype.defaults=function(){return{frames:[],_undo:!0}},r.prototype.onRemove=function(){this.getFrames().reset()},r.prototype.getFrames=function(){return this.get("frames")},r.prototype.getId=function(){return this.id},r.prototype.getName=function(){return this.get("name")},r.prototype.setName=function(t){return this.set({name:t})},r.prototype.getAllFrames=function(){return this.getFrames().models||[]},r.prototype.getMainFrame=function(){return this.getFrames().at(0)},r.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=k.Hn.prototype.toJSON.call(this,t),n=(0,C.result)(this,"defaults");return(0,C.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,C.forEach)(n,function(i,l){e[l]===i&&delete e[l]}),e},r}(k.Hn);var Et=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kt=function(){return Kt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Kt.apply(this,arguments)};const Ae=function(a){function r(t,e){var n=a.call(this,t)||this;return n.on("reset",n.onReset),n.on("remove",n.onRemove),n.model=function(i,l){return l===void 0&&(l={}),new Mt(i,Kt(Kt({},l),{em:e}))},n}return Et(r,a),r.prototype.onReset=function(t,e){var n,i=this;(n=e==null?void 0:e.previousModels)===null||n===void 0||n.map(function(l){return i.onRemove(l)})},r.prototype.onRemove=function(t){t==null||t.onRemove()},r}(k.FE);var Se=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_e=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ne="page",xe="".concat(Ne,":"),Oe="".concat(xe,"select"),be="".concat(Oe,":before"),de="".concat(xe,"update"),ce="".concat(xe,"add"),se="".concat(ce,":before"),st="".concat(xe,"remove"),Yt="".concat(st,":before"),Wt="change:selected",ee="main",ue={all:Ne,select:Oe,selectBefore:be,update:de,add:ce,addBefore:se,remove:st,removeBefore:Yt},Jt=function(a){function r(t){var e=a.call(this,t,"PageManager",new Ae([],t),ue)||this;e.storageKey="pages",(0,C.bindAll)(e,"_onPageChange");var n=new ut({_undo:!0});return e.model=n,e.pages.on("reset",function(i){return i.at(0)&&e.select(i.at(0))}),e.pages.on("all",e.__onChange,e),n.on(Wt,e._onPageChange),e}return Se(r,a),Object.defineProperty(r.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),r.prototype.getAll=function(){return _e([],this.all.models,!0)},r.prototype.__onChange=function(t,e,n,i){var l=i||n;this.em.trigger(Ne,{event:t,page:e,options:l})},r.prototype.onLoad=function(){var t,e=this,n=this.pages,i={silent:!0};n.add(((t=this.config.pages)===null||t===void 0?void 0:t.map(function(f){return new Mt(f,{em:e.em,config:e.config})}))||[],i);var l=n.length?this.getMain():this.add({type:ee},i);l&&this.select(l,i)},r.prototype._onPageChange=function(t,e,n){var i=this.em,l=i.Layers,f=e.getMainComponent();l&&f&&l.setRoot(f),i.trigger(Oe,e,t.previous("selected")),this.__onChange(Wt,e,n)},r.prototype.postLoad=function(){var t=this,e=t.em,n=t.model,i=t.pages,l=e.UndoManager;l.add(n),l.add(i),i.on("add remove reset change",function(f,d,v){return e.changesUp(v||d)})},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var i=this.em;t.id=t.id||this._createId();var l=function(){var f=n.pages.add(new Mt(t,{em:n.em,config:n.config}),e);return e.select&&n.select(f),f};return!e.silent&&i.trigger(se,t,l,e),!e.abort&&l()},r.prototype.remove=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,C.isString)(t)?this.get(t):t,f=function(){return l&&n.pages.remove(l,e),l};return!e.silent&&i.trigger(Yt,l,f,e),!e.abort&&f()},r.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},r.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===ee})[0]||t.at(0)},r.prototype.getAllWrappers=function(){var t=this.getAll();return(0,C.unique)((0,C.flatten)(t.map(function(e){return e.getAllFrames().map(function(n){return n.getComponent()})})))},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,C.isString)(t)?this.get(t):t;return n&&(this.em.trigger(be,n,e),this.model.set("selected",n,e)),this},r.prototype.getSelected=function(){return this.model.get("selected")},r.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.pages,reset:!0})},r.prototype._createId=function(){var t,e=this.getAll().length+16,n=this.getAllMap();do t=(0,I.createId)(e);while(n[t]);return t},r}(Dt);const Pe=Jt,Xe={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};var qe=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const pn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qe(r,a),r.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},r.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(e){return t.checkUnit(e)})},r.prototype.checkUnit=function(t){var e=this.get(t)||"";(parseFloat(e)||0).toString()===e.toString()&&this.set(t,"".concat(e,"px"))},r.prototype.getName=function(){return this.get("name")||this.get("id")},r.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},r}(k.Hn);var Rn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Rn(r,a),r}(k.FE);const Ht=yt;yt.prototype.model=pn;var b=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),F=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a};const z=function(a){function r(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return b(r,a),r.prototype.template=function(t){var e=t.ppfx,n=t.label;return rt(gt||(gt=F([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,n,e,e,e,e,e,e,e)},r.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},r.prototype.startAdd=function(){},r.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},r.prototype.updateSelect=function(){var t=this.em,e=this.devicesEl;if(t&&t.getDeviceModel&&e){var n=t.getDeviceModel();e.val(n?n.get("id"):"")}},r.prototype.getOptions=function(){var t=this.collection,e=this.em,n="";return t.forEach(function(i){var l=i.attributes,f=l.name,d=l.id,v=e&&e.t&&e.t("deviceManager.devices.".concat(d))||f;n+='<option value="'.concat(d||f,'">').concat(v,"</option>")}),n},r.prototype.render=function(){var t=this,e=t.em,n=t.ppfx,i=t.$el,l=t.el,f=e&&e.t&&e.t("deviceManager.device");return i.html(this.template({ppfx:n,label:f})),this.devicesEl=i.find(".".concat(n,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(n,"devices-c"),this},r}(k.G7);var gt,Tt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ot=function(){return Ot=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ot.apply(this,arguments)},pe="device",Te="".concat(pe,":"),Ie="".concat(Te,"select"),ze="".concat(Te,"update"),Qe="".concat(Te,"add"),qt="".concat(Te,"remove"),V="".concat(qt,":before"),Q="change:device",pt={all:pe,select:Ie,update:ze,add:Qe,remove:qt,removeBefore:V},bt=function(a){function r(t){var e,n=this;return(n=a.call(this,t,"DeviceManager",new Ht,pt,Xe)||this).Device=pn,n.Devices=Ht,n.storageKey="",n.devices=n.all,(e=n.config.devices)===null||e===void 0||e.forEach(function(i){return n.add(i,{silent:!0})}),n.select(n.config.default||n.devices.at(0)),t.on(Q,n._onSelect,n),n}return Tt(r,a),r.prototype._onSelect=function(t,e,n){var i=this.em,l=this.events,f=t.previous("device"),d=this.get(e),v=l.select;i.trigger(v,d,this.get(f)),this.__catchAllEvent(v,d,n)},r.prototype.add=function(t,e){var n;e===void 0&&(e={});var i=e;if((0,C.isString)(t)){var l=e;n=Ot(Ot({},i=arguments[2]||{}),{id:t,name:i.name||t,width:l})}else n=t;return n.id||(n.id=n.name||this._createId()),this.devices.add(n,i)},r.prototype.get=function(t){return this.getAll().filter(function(e){return e.get("name")===t})[0]||this.devices.get(t)||null},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getDevices=function(){return this.devices.models},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,C.isString)(t)?this.get(t):t;return n&&this.em.set("device",n.get("id"),e),this},r.prototype.getSelected=function(){return this.get(this.em.get("device"))},r.prototype.getAll=function(){return this.devices},r.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new z({collection:this.devices,config:Ot({em:e},this.config)}),this.view.render().el},r.prototype.destroy=function(){this.__destroy()},r}(Dt);const Gt=bt;var he=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fe=function(a){function r(t){var e=this,n=t.em,i=t.config,l=i.scripts,f=i.styles;return(e=a.call(this,t,{scripts:l,styles:f})||this).set("frames",new vt(t)),e.listenTo(e,"change:zoom",e.onZoomChange),e.listenTo(n,"change:device ".concat(ze),e.updateDevice),e.listenTo(n,Oe,e._pageUpdated),e}return he(r,a),r.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[]}},Object.defineProperty(r.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),r.prototype.init=function(){var t=this.em.Pages.getMain();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype._pageUpdated=function(t,e){var n=this.em;n.setSelected(),n.get("readyCanvas")&&n.stopDefault(),e==null||e.getFrames().map(function(i){return i.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,n=e.getDeviceModel(),i=t.frame||e.getCurrentFrameModel();if(i&&n){var l=n.attributes,f=l.width,d=l.height;i.set({width:f,height:d},{noUndo:1})}},r.prototype.onZoomChange=function(){this.get("zoom")<1&&this.set("zoom",1)},r}(ut);const We=Fe;var Ln=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const fn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ln(r,a),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),r.prototype.preinitialize=function(t){this.className=""},r}(k.G7);var Re=gn(491),Ar=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Yn=function(a){function r(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var n=a.call(this,t)||this;return n.itemsView="",n.itemType="type",n.reuseView=!1,n.viewCollection=[],e&&n.listenTo(n.collection,"add",n.addTo),n}return Ar(r,a),r.prototype.addTo=function(t){this.add(t)},r.prototype.itemViewNotFound=function(t){},r.prototype.add=function(t,e){var n,i=this,l=i.reuseView,f=i.viewCollection,d=(i.itemsView,e||null),v=t.get(this.itemType);n=t.view&&l?t.view:this.renderView(t,v),f.push(n);var g=n.render().el;d?d.appendChild(g):this.$el.append(g)},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(n){return t.add(n,e)}),this.$el.append(e),this.onRender(),this},r.prototype.onRender=function(){},r.prototype.onRemoveBefore=function(t,e){},r.prototype.onRemove=function(t,e){},r.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),k.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},r.prototype.clearItems=function(){this.viewCollection},r}(fn);var jr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const dn=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var n=e.model;return e.listenTo(n,"change",e.render),e.listenTo(n,"destroy remove",e.remove),e.listenTo(n.get("selectors"),"change",e.render),e}return jr(r,a),r.prototype.tagName=function(){return"style"},r.prototype.render=function(){var t=this.model,e=this.el,n=t.get("important");return e.innerHTML=t.toCSS({important:n}),this},r}(k.G7);var _n=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Bn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return _n(r,a),r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},r}(dn);var Mr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Dn=function(a,r){return"".concat(a).concat(r?"-".concat(parseFloat(r)):"")},_o=function(a){function r(t){var e=a.call(this,t)||this;(0,C.bindAll)(e,"sortRules");var n=t.config||{};e.atRules={},e.config=n,e.em=n.em,e.pfx=n.stylePrefix||"",e.className=e.pfx+"rules";var i=e.collection;return e.listenTo(i,"add",e.addTo),e.listenTo(i,"reset",e.render),e}return Mr(r,a),r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){if(this.renderStarted){var n,i,l=e||null,f={model:t,config:this.config};if(t.get("atRuleType")==="keyframes"){var d=t.getAtRule(),v=this.atRules[d];if(!v){var g=document.createElement("style");v=document.createTextNode(""),g.appendChild(document.createTextNode("".concat(d,"{"))),g.appendChild(v),g.appendChild(document.createTextNode("}")),this.atRules[d]=v,n=g}i=new Bn(f),v.appendData(i.render().el.textContent)}else n=(i=new dn(f)).render().el;var w=this.className,S=t.get("mediaText"),M=Dn(w),R=M;if(S&&(R=Dn(w,this.getMediaWidth(S))),n){var G=l||this.el,tt=void 0;try{tt=G.querySelector("#".concat(R))}catch{}tt||(tt=G.querySelector("#".concat(M))),tt==null||tt.appendChild(n)}return n}},r.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},r.prototype.sortRules=function(t,e){var n=(this.em.getConfig().mediaCondition||"").indexOf("min-width")!==-1;return n?(n?t:e)-(n?e:t):0},r.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,n=e.em,i=e.$el,l=e.collection,f=this.className,d=document.createDocumentFragment();i.empty();var v=n.Devices.getAll().pluck("priority").sort(this.sortRules);return v.every(function(g){return g})&&v.unshift(0),v.forEach(function(g){return d.appendChild((0,Re.ut)("div",{id:Dn(f,g)}))}),l.each(function(g){return t.addToCollection(g,d)}),i.append(d),i.attr("class",f),this},r}(k.G7);const Vo=_o;var xo=function(){return xo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xo.apply(this,arguments)},Ro=function(){function a(r,t){var e=this;this.em=r,this.canvas=r.Canvas;var n=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),i=Array.isArray(n)?n:[n];this.el=i[0],this.counter=0,(0,C.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),i.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(r,t){var e={on:I.on,off:I.off},n=t?"on":"off";e[n](r,"dragenter",this.handleDragEnter),e[n](r,"dragover",this.handleDragOver),e[n](r,"drop",this.handleDrop),e[n](r,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(r){var t,e=r?I.on:I.off,n=this.el.ownerDocument,i=(t=n.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=r?{onStart:function(l){var f=l.sorter;(0,I.on)(i,"pointermove",f.onMove)},onEnd:function(l){var f=l.sorter;(0,I.off)(i,"pointermove",f.onMove)},customTarget:function(l){var f=l.event;return n.elementFromPoint(f.clientX,f.clientY)}}:null,e(i,"pointerenter",this.handleDragEnter),e(i,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(i,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(r){this.over?this.endDrop(r):this.__customTglEff(!1)},a.prototype.endDrop=function(r,t){var e=this.em,n=this.dragStop;this.counter=0,n&&n(r),this.__customTglEff(!1),e.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(r){this.updateCounter(-1,r)},a.prototype.updateCounter=function(r,t){this.counter+=r,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(r){var t=this,e=this.em,n=this.canvas,i=r.dataTransfer;if(this.updateCounter(1,r),!this.over){this.over=!0;var l,f,d=e.Utils,v=e.get("dragContent")||"<br>";if(e.stopDefault(),e.inAbsoluteMode()){var g=e.Components.getWrapper(),w=g.append({})[0],S=e.Commands.run("core:component-drag",{event:r,guidesInfo:1,center:1,target:w,onEnd:function(R,G,tt){var K;if(!tt.cancelled){K=g.append(v)[0];var kt=n.getOffset(),Ft=w.getStyle(),ae=Ft.top,me=Ft.left,Me=Ft.position;K.addStyle({left:parseFloat(me)-kt.left+"px",top:parseFloat(ae)-kt.top+"px",position:Me})}t.handleDragEnd(K,i),w.remove()}});l=function(R){return S.stop(r,{cancel:R})},f=function(R){return v=R}}else{var M=new d.Sorter(xo({em:e,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:n.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(R){return t.handleDragEnd(R,i)},document:this.el.ownerDocument},this.sortOpts||{}));M.setDropContent(v),M.startSort(),this.sorter=M,l=function(R){R&&(M.moved=!1),M.endMove()},f=function(R){return M.setDropContent(R)}}this.dragStop=l,this.dragContent=f,e.trigger("canvas:dragenter",i,v)}},a.prototype.handleDragEnd=function(r,t){var e=this.em;this.over=!1,r&&(e.set("dragResult",r),e.trigger("canvas:drop",t,r)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(r){r.preventDefault(),this.em.trigger("canvas:dragover",r)},a.prototype.handleDrop=function(r){r.preventDefault();var t=this.dragContent,e=r.dataTransfer,n=this.getContentByData(e).content;r.target.style.border="",n&&t&&t(n),this.endDrop(!n,r)},a.prototype.getContentByData=function(r){var t=this.em,e=r&&r.types,n=r&&r.files||[],i=t.get("dragContent"),l=r&&r.getData("text");if(n.length){l=[];for(var f=0;f<n.length;f++){var d=n[f],v=d.type.split("/")[0];v=="image"&&l.push({type:v,file:d,attributes:{alt:d.name}})}}else if(i)l=i;else if((0,C.indexOf)(e,"text/html")>=0)l=r&&r.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,C.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,C.indexOf)(e,"text/json")>=0){var g=r&&r.getData("text/json");g&&(l=JSON.parse(g))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var w={content:l};return t.trigger("canvas:dragdata",r,w),w},a}();const ro=Ro;var ur=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ln=function(){return ln=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ln.apply(this,arguments)},Ho=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Lr=function(a){function r(t,e){var n=a.call(this,{model:t})||this;n.dragging=!1,n.lastMaxHeight=0,n.tools={},(0,C.bindAll)(n,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var i=n,l=i.el;i.em,n.module._config=ln(ln({},n.config||{}),{frameView:n}),n.frameWrapView=e,n.showGlobalTools=(0,C.debounce)(n.showGlobalTools.bind(n),50);var f=n.getCanvasModel();return n.listenTo(t,"change:head",n.updateHead),n.listenTo(f,"change:styles",n.renderStyles),t.view=n,(0,I.setViewEl)(l,n),n}return ur(r,a),Object.defineProperty(r.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),r.prototype.updateHead=function(){var t=this.model,e=this.getHead(),n=[],i=[],l=t.head,f=t.previous("head"),d=function(g){return g===void 0&&(g={}),Object.keys(g).sort().map(function(w){return"[".concat(w,'="').concat(g[w],'"]')}).join("")},v=function(g,w,S){g.forEach(function(M){var R=M.tag,G=M.attributes;!w.some(function(tt){return tt.tag===R&&d(tt.attributes)===d(G)})&&S.push(M)})};v(l,f,i),v(f,l,n),n.forEach(function(g){var w,S=e.querySelector("".concat(g.tag).concat(d(g.attributes)));(w=S==null?void 0:S.parentNode)===null||w===void 0||w.removeChild(S)}),(0,Re.SJ)(e,i)},r.prototype.getEl=function(){return this.el},r.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},r.prototype.getWindow=function(){return this.getEl().contentWindow},r.prototype.getDoc=function(){return this.getEl().contentDocument},r.prototype.getHead=function(){return this.getDoc().querySelector("head")},r.prototype.getBody=function(){return this.getDoc().querySelector("body")},r.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},r.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Re.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},r.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},r.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},r.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},r.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},r.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},r.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},r.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),n=e.scrollTop,i=e.scrollLeft,l=t.offsetHeight,f=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:f,scrollTop:n,scrollLeft:i,scrollBottom:n+l,scrollRight:i+f}},r.prototype._getTool=function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.wrapper;return this._toggleEffects(!1),this.tools={},n&&n.remove(),fn.prototype.remove.apply(this,t),this},r.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},r.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,n=this.getWindow(),i=n.pageYOffset,l=t||0,f=e.getConfig().autoscrollLimit,d=this.getRect().height-f,v=i;l<f&&(v-=f-l),l>d&&(v+=l-d),!(0,C.isUndefined)(t)&&v!==i&&v>0&&v<this.lastMaxHeight&&(this.getGlobalToolsEl().style.opacity="0",this.showGlobalTools(),n.scrollTo(0,v)),requestAnimationFrame(this.autoscroll)}},r.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,I.getPointerEvent)(t).clientY*this.em.getZoomDecimal()},r.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},r.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},r.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),n=t?"on":"off",i={on:I.on,off:I.off};i[n](e,"mousemove dragover",this.updateClientY),i[n](e,"mouseup",this.stopAutoscroll)},r.prototype.render=function(){var t=this.$el,e=this.ppfx;return t.attr({class:"".concat(e,"frame")}),this.renderScripts(),this},r.prototype.renderScripts=function(){var t=this,e=this,n=e.el,i=e.model,l=e.em,f="frame:load",d={el:n,model:i,view:this},v=this.getCanvasModel(),g=function(w){var S;if(w.length>0){var M=w.shift(),R=(0,Re.ut)("script",ln({type:"text/javascript"},(0,C.isString)(M)?{src:M}:M));R.onerror=R.onload=g.bind(null,w),(S=n.contentDocument)===null||S===void 0||S.head.appendChild(R)}else t.renderBody(),l&&l.trigger(f,d)};n.onload=function(){var w=t.config.frameContent;if(w){var S=t.getDoc();S.open(),S.write(w),S.close()}l&&l.trigger("".concat(f,":before"),d),g(Ho([],v.get("scripts"),!0))}},r.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),n=this.getCanvasModel(),i=function(w){return w.map(function(S){return{tag:"link",attributes:ln({rel:"stylesheet"},(0,C.isString)(S)?{href:S}:S)}})},l=i(t.prev||n.previous("styles")),f=i(n.get("styles")),d=[],v=[],g=function(w,S,M){w.forEach(function(R){var G=R.attributes.href;!S.some(function(tt){return tt.attributes.href===G})&&M.push(R)})};g(f,l,v),g(l,f,d),d.forEach(function(w){var S,M=e.querySelector('link[href="'.concat(w.attributes.href,'"]'));(S=M==null?void 0:M.parentNode)===null||S===void 0||S.removeChild(M)}),(0,Re.SJ)(e,v)},r.prototype.renderBody=function(){var t,e,n=this,i=this,l=i.config,f=i.em,d=i.model,v=i.ppfx,g=this.getDoc(),w=this.getBody(),S=this.getWindow(),M=f.config;S._isEditor=!0,this.renderStyles({prev:[]}),(0,Re.R3)(w,`<style>
      `.concat(M.baseCss||l.frameStyle||"",`

      [data-gjs-type="wrapper"] {
        min-height: 100vh;
        padding-top: 0.001em;
      }

      .`).concat(v,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(v,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(v,`selected-parent {
        outline: 2px solid `).concat("#ffca6f",` !important
      }

      .`).concat(v,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(v,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(v,`no-pointer {
        pointer-events: none;
      }

      .`).concat(v,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(v,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(v,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(v,`is__grabbing,
      .`).concat(v,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat(M.canvasCss||"",`
      `).concat(M.protectedCss||"",`
    </style>`));var R=d.getComponent(),G=f.Components.getType("wrapper").view;this.wrapper=new G({model:R,config:ln(ln({},R.config),{em:f,frameView:this})}).render(),(0,Re.R3)(w,(t=this.wrapper)===null||t===void 0?void 0:t.el),(0,Re.R3)(w,new Vo({collection:d.getStyles(),config:ln(ln({},f.Css.getConfig()),{frameView:this})}).render().el),(0,Re.R3)(w,this.getJsContainer()),(0,I.on)(w,"click",function(tt){var K;return tt&&((K=tt.target)===null||K===void 0?void 0:K.tagName)=="A"&&tt.preventDefault()}),(0,I.on)(w,"submit",function(tt){return tt&&tt.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent"}].forEach(function(tt){return tt.event.split(" ").forEach(function(K){g.addEventListener(K,function(kt){return n.el.dispatchEvent((0,Re.t3)(kt,tt.class))})})}),this._toggleEffects(!0),(0,I.hasDnd)(f)&&(this.droppable=new ro(f,(e=this.wrapper)===null||e===void 0?void 0:e.el)),d.trigger("loaded")},r.prototype._toggleEffects=function(t){var e=t?I.on:I.off,n=this.getWindow();n&&e(n,"".concat(Re.G1," resize"),this._emitUpdate)},r.prototype._emitUpdate=function(){this.model._emitUpdated()},r}(fn);const Co=Lr;var Jr=gn(668),Wn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nn=function(){return Nn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Nn.apply(this,arguments)};const $n=function(a){function r(t,e){var n=a.call(this,{model:t})||this;return(0,C.bindAll)(n,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Nn(Nn({},t.config),{frameWrapView:n}),n.cv=e,n.frame=new Co(t,n),n.classAnim="".concat(n.ppfx,"frame-wrapper--anim"),n.updateOffset=(0,C.debounce)(n.updateOffset.bind(n),0),n.updateSize=(0,C.debounce)(n.updateSize.bind(n),0),n.listenTo(t,"loaded",n.frameLoaded),n.listenTo(t,"change:x change:y",n.updatePos),n.listenTo(t,"change:width change:height",n.updateSize),n.listenTo(t,"destroy remove",n.remove),n.updatePos(),n.setupDragger(),n}return Wn(r,a),r.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},r.prototype.setupDragger=function(){var t,e,n,i=this,l=this.module,f=this.model,d=function(v){l.toggleFramesEvents(v)};this.dragger=new Jr.Z({onStart:function(){var v=f.attributes,g=v.x,w=v.y;n=i.em.getZoomMultiplier(),t=g,e=w,d(!1)},onEnd:function(){return d(!0)},setPosition:function(v){f.set({x:t+v.x*n,y:e+v.y*n})}})},r.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},r.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Re.L_)(this.elTools)},r.prototype.remove=function(t){var e=this;return this.__clear(t),fn.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(n){return e[n]=0}),this},r.prototype.updateOffset=function(){var t,e=this,n=e.em,i=e.$el,l=e.frame;n&&(n.runDefault({preserveSelected:1}),i.removeClass(this.classAnim),(t=l==null?void 0:l.model)===null||t===void 0||t._emitUpdated())},r.prototype.updatePos=function(t){var e=this.model,n=this.el,i=e.attributes,l=i.x,f=i.y,d=n.style;this.frame.rect=void 0,d.left=isNaN(l)?l:"".concat(l,"px"),d.top=isNaN(f)?f:"".concat(f,"px"),t&&this.updateOffset()},r.prototype.updateSize=function(){this.updateDim()},r.prototype.updateDim=function(){var t=this,e=t.em,n=t.el,i=t.$el,l=t.model,f=t.classAnim,d=t.frame;if(d){d.rect=void 0,i.addClass(f);var v=this.__handleSize(),g=v.noChanges,w=v.width,S=v.height;((0,C.isNull)(w)||(0,C.isNull)(S))&&l.set(Nn(Nn({},w?{}:{width:n.offsetWidth}),S?{}:{height:n.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),g?this.updateOffset():setTimeout(this.updateOffset,350)}},r.prototype.onScroll=function(){var t=this.frame;this.em.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},r.prototype.frameLoaded=function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},r.prototype.__handleSize=function(){var t="px",e=this.model,n=this.el.style,i=e.attributes,l=i.width,f=i.height,d=n.width||"",v=n.height||"",g=l||"",w=f||"",S=d==g&&v==w;return n.width=(0,C.isNumber)(g)?"".concat(g).concat(t):g,n.height=(0,C.isNumber)(w)?"".concat(w).concat(t):w,{noChanges:S,width:l,height:f,newW:g,newH:w}},r.prototype.render=function(){var t=this,e=t.frame,n=t.$el,i=t.ppfx,l=t.cv,f=t.model,d=t.el,v=f.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),n.empty().attr({class:"".concat(i,"frame-wrapper")}).append(`
      <div class="`.concat(i,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(i,`frame-wrapper__name" data-action-move>
          `).concat(f.get("name")||"",`
        </div>
        <div class="`).concat(i,`frame-wrapper__top-r">
          <div class="`).concat(i,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(i,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(i,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(i,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var g=(0,Re.ut)("div",{class:"".concat(i,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(i,`highlighter" data-hl></div>
      <div class="`).concat(i,`badge" data-badge></div>
      <div class="`).concat(i,`placeholder">
        <div class="`).concat(i,`placeholder-int"></div>
      </div>
      <div class="`).concat(i,`ghost"></div>
      <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(i,`resizer"></div>
      <div class="`).concat(i,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(i,`offset-fixed-v"></div>
    `));this.elTools=g;var w=l==null?void 0:l.toolsWrapper;return w&&w.appendChild(g),v&&v({el:d,elTop:d.querySelector("[data-frame-top]"),elRight:d.querySelector("[data-frame-right]"),elBottom:d.querySelector("[data-frame-bottom]"),elLeft:d.querySelector("[data-frame-left]"),frame:f,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},r}(fn);var zo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vo=function(a){function r(t,e){t===void 0&&(t={});var n=a.call(this,t,!0)||this;return n.listenTo(n.collection,"reset",n.render),n.canvasView=e.canvasView,n._module=e.module,n}return zo(r,a),r.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(n){return n.remove(e)})},r.prototype.onRender=function(){var t=this.$el,e=this.ppfx;t.attr({class:"".concat(e,"frames")})},r.prototype.renderView=function(t,e){return new $n(t,this.canvasView)},r}(Yn);const Ge=vo;var ge=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rr=function(){return rr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},rr.apply(this,arguments)},Uo=function(a){function r(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,C.bindAll)(e,"clearOff","onKeyPress","onCanvasMove"),e.className=e.pfx+"canvas";var n=e.em;return e._initFrames(),e.listenTo(n,"change:canvasOffset",e.clearOff),e.listenTo(n,"component:selected",e.checkSelected),e.listenTo(t,"change:zoom change:x change:y",e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return ge(r,a),r.prototype.events=function(){return{wheel:"onWheel"}},r.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames></div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
    `)},r.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},r.prototype._initFrames=function(){var t=this,e=t.frames,n=t.model,i=t.config,l=t.em,f=n.frames;l.set("readyCanvas",0),f.once("loaded:all",function(){return l.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new Ge({collection:f},rr(rr({},i),{canvasView:this}))},r.prototype.checkSelected=function(t,e){var n;e===void 0&&(e={});var i=e.scroll,l=this.em.get("currentFrame");i&&((n=t.views)===null||n===void 0||n.forEach(function(f){f._getFrame()===l&&f.scrollIntoView(i)}))},r.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,fn.prototype.remove.apply(this,e),this.toggleListeners(!1),this},r.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},r.prototype.onCanvasMove=function(t){},r.prototype.toggleListeners=function(t){this.el;var e=t?I.on:I.off;e(document,"keypress",this.onKeyPress),e(window,"scroll resize",this.clearOff)},r.prototype.onKeyPress=function(t){var e=this.em;(0,I.getKeyChar)(t)!==" "||e.getZoomDecimal()===1||e.Canvas.isInputFocused()||(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},r.prototype.onWheel=function(t){if((t.ctrlKey||t.metaKey)&&this.em.getConfig().multiFrames){this.preventDefault(t);var e=this.model,n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),i=e.get("zoom");e.set("zoom",i+2*n)}},r.prototype.updateFrames=function(t){var e=this.em,n=this.model.attributes,i=n.x,l=n.y,f=this.getZoom(),d={preserveSelected:1},v=f?1/f:1;this.framesArea.style.transform="scale(".concat(f,") translate(").concat(i*v,"px, ").concat(l*v,"px)"),this.clearOff(),e.stopDefault(d),e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){return e.runDefault(d)},300)},r.prototype.getZoom=function(){return this.em.getZoomDecimal()},r.prototype.isElInViewport=function(t){var e=(0,I.getElement)(t),n=(0,I.getElRect)(e),i=this.getFrameOffset(e),l=n.top,f=n.left;return l>=0&&f>=0&&l<=i.height&&f<=i.width},r.prototype.offset=function(t,e){var n,i;e===void 0&&(e={});var l=(0,I.getElRect)(t),f=t==null?void 0:t.ownerDocument.body,d=e.noScroll;return{top:l.top+(d?0:(n=f==null?void 0:f.scrollTop)!==null&&n!==void 0?n:0),left:l.left+(d?0:(i=f==null?void 0:f.scrollLeft)!==null&&i!==void 0?i:0),width:l.width,height:l.height}},r.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},r.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var n=(e=this.frame)===null||e===void 0?void 0:e.el,i=t==null?void 0:t.ownerDocument.defaultView,l=i?i.frameElement:n;this.frmOff=this.offset(l||n)}return this.frmOff},r.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},r.prototype.getElementPos=function(t,e){e===void 0&&(e={});var n=this.getZoom(),i=e||{},l=this.getFrameOffset(t),f=this.el,d=this.getCanvasOffset(),v=this.offset(t,e),g=i.avoidFrameOffset?0:l.top,w=i.avoidFrameOffset?0:l.left;return{top:v.top*n+g-d.top+f.scrollTop,left:v.left*n+w-d.left+f.scrollLeft,height:v.height*n,width:v.width*n,zoom:n,rect:v}},r.prototype.getElementOffsets=function(t){var e=this;if(!t||(0,I.isTextNode)(t))return{};var n={},i=window.getComputedStyle(t);return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"].forEach(function(l){n[l]=parseFloat(i[l])*e.getZoom()}),n},r.prototype.getPosition=function(t){var e;t===void 0&&(t={});var n=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(n){var i=n.body,l=this.getZoom(),f=this.getFrameOffset(),d=this.getCanvasOffset(),v=t.noScroll;return{top:f.top+(v?0:i.scrollTop)*l-d.top,left:f.left+(v?0:i.scrollLeft)*l-d.left,width:d.width,height:d.height}}},r.prototype.updateScript=function(t){var e=t.model,n=e.getId();t.scriptContainer||(t.scriptContainer=(0,Re.ut)("div",{"data-id":n}),this.getJsContainer().appendChild(t.scriptContainer)),t.el.id=n,t.scriptContainer.innerHTML="";var i=document.createElement("script"),l=e.getScriptString(),f=e.get("script-props")?l:`function(){
`.concat(l,`
;}`),d=JSON.stringify(e.__getScriptProps());i.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(n,`');
        if (!item) return;
        (`).concat(f,".bind(item))(").concat(d,`)
      }, 1);`),setTimeout(function(){var v=t.scriptContainer;v==null||v.appendChild(i)},0)},r.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e&&e.getJsContainer()},r.prototype.getFrameView=function(t){return(t==null?void 0:t._getFrame())||this.em.get("currentFrame")},r.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,n=t.frames,i=t.em,l=t.framesArea,f=e.frames;f.listenToLoad(),n.render();var d=f.at(0),v=d==null?void 0:d.view;i.setCurrentFrame(v),l==null||l.appendChild(n.el),this.frame=v}},r.prototype.render=function(){var t=this,e=t.el,n=t.$el,i=t.ppfx,l=t.config,f=t.em;n.html(this.template());var d=n.find("[data-frames]");this.framesArea=d.get(0);var v=n.find("[data-tools]");return this.toolsWrapper=v.get(0),v.append(`
      <div class="`.concat(i,"tools ").concat(i,`tools-gl" style="pointer-events:none">
        <div class="`).concat(i,`placeholder">
          <div class="`).concat(i,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(i,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(i,'highlighter-sel"></div>'):"",`
        <div class="`).concat(i,`badge"></div>
        <div class="`).concat(i,`ghost"></div>
        <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(i,`resizer"></div>
        <div class="`).concat(i,`offset-v"></div>
        <div class="`).concat(i,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(i,"tools")),this.hlEl=e.querySelector(".".concat(i,"highlighter")),this.badgeEl=e.querySelector(".".concat(i,"badge")),this.placerEl=e.querySelector(".".concat(i,"placeholder")),this.ghostEl=e.querySelector(".".concat(i,"ghost")),this.toolbarEl=e.querySelector(".".concat(i,"toolbar")),this.resizerEl=e.querySelector(".".concat(i,"resizer")),this.offsetEl=e.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(i,"tools-gl")),this.el.className=(0,I.getUiClass)(f,this.className),this.ready=!0,this._renderFrames(),this},r}(fn);const or=Uo;var Ye=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),In=function(){return In=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},In.apply(this,arguments)},mo=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Bo=function(a){function r(t){var e=a.call(this,t,"Canvas",te)||this;return e.canvas=new We(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return Ye(r,a),r.prototype.getCanvasView=function(){return this.canvasView},r.prototype.init=function(){},r.prototype.onLoad=function(){this.model.init()},r.prototype.getModel=function(){return this.canvas},r.prototype.getElement=function(){return this.getCanvasView().el},r.prototype.getFrame=function(t){return this.getFrames()[t||0]},r.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},r.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},r.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},r.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},r.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},r.prototype._getLocalEl=function(t,e,n){var i=t,l=e==null?void 0:e._getFrame();return i=l?l[n]():i},r.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},r.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},r.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},r.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},r.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},r.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},r.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},r.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},r.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},r.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},r.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new or(this.canvas),this.canvasView.render().el},r.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},r.prototype.offset=function(t){return this.getCanvasView().offset(t)},r.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},r.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},r.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},r.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},n=e.top,i=n===void 0?0:n,l=e.left,f=l===void 0?0:l;return In(In({},this.getCanvasView().getCanvasOffset()),{topScroll:i,leftScroll:f})},r.prototype.getTargetToElementDim=function(t,e,n){n===void 0&&(n={});var i=n||{},l=this.getCanvasView().getPosition();if(l){var f=i.elPos||this.getCanvasView().getElementPos(e),d=n.toRight||0,v=i.targetHeight||t.offsetHeight,g=i.targetWidth||t.offsetWidth,w=i.event||null,S=f.top-v,M=f.left;M+=d?f.width:0;var R=(M=d?M-g:M)<l.left?l.left:M,G=S<l.top?l.top:S,tt={top:G=G>f.top+f.height?f.top+f.height:G,left:R,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return w&&this.em&&this.em.trigger(w,tt),tt}},r.prototype.canvasRectOffset=function(t,e,n){var i=this;n===void 0&&(n={});var l=function(f,d,v){d===void 0&&(d=1);var g=i.em.getZoomDecimal(),w=d?"top":"left",S=f.ownerDocument,M=n.offset?function(Ze){var wn=Ze.defaultView;return wn==null?void 0:wn.frameElement}(S):{},R=M.offsetTop,G=R===void 0?0:R,tt=M.offsetLeft,K=tt===void 0?0:tt,kt=S.body||{},Ft=kt.scrollTop,ae=Ft===void 0?0:Ft,me=kt.scrollLeft,Me=d?ae:me===void 0?0:me,Ve=d?G:K;return v[w]-(Me-Ve)*g};return{top:l(t,1,e),left:l(t,0,e)}},r.prototype.getTargetToElementFixed=function(t,e,n){var i;n===void 0&&(n={});var l=n.pos||this.getElementPos(t),f=n.canvasOff||this.canvasRectOffset(t,l),d=e.offsetHeight||0,v=e.offsetWidth||0,g=l.left+l.width,w=this.getCanvasView(),S=w.getPosition(),M=w.getFrameOffset(t),R=n.event,G=-d,tt=(0,C.isUndefined)(n.left)?l.width-v:n.left;tt=l.left<-tt?-l.left:tt;var K=(i=S==null?void 0:S.width)!==null&&i!==void 0?i:0;tt=g>K?tt-(g-K):tt;var kt=l.height+d,Ft=kt<M.height;f.top<d&&(Ft?G+=kt:G=-f.top<l.height?-f.top:l.height);var ae={top:G,left:tt,canvasOffsetTop:f.top,canvasOffsetLeft:f.left};return R&&this.em.trigger(R,ae),ae},r.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var n=0,i=0,l=e.subWinOffset,f=t.target.ownerDocument,d=f.defaultView||f.parentWindow,v=d.frameElement,g=l?d.pageYOffset:0,w=l?d.pageXOffset:0;if(v){var S=v.getBoundingClientRect();n=S.top||0,i=S.left||0}return{y:t.clientY+n-g,x:t.clientX+i-w}},r.prototype.getMouseRelativeCanvas=function(t,e){var n,i=this.getZoomDecimal(),l=(n=this.getCanvasView().getPosition(e))!==null&&n!==void 0?n:{},f=l.top,d=f===void 0?0:f,v=l.left,g=v===void 0?0:v;return{y:t.clientY*i+d,x:t.clientX*i+g}},r.prototype.hasFocus=function(){return this.getDocument().hasFocus()},r.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),n=mo(["body"],this.config.notTextable,!0),i=e&&document.activeElement===e?t&&t.activeElement:document.activeElement;return i&&!n.some(function(l){return i.matches(l)})},r.prototype.scrollTo=function(t,e){e===void 0&&(e={});var n=(0,I.getElement)(t),i=n&&(0,I.getViewEl)(n);i&&i.scrollIntoView(e)},r.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},r.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},r.prototype.setZoom=function(t){return this.canvas.set("zoom",parseFloat(t)),this},r.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},r.prototype.setCoords=function(t,e){return this.canvas.set({x:parseFloat(t),y:parseFloat(e)}),this},r.prototype.getCoords=function(){var t=this.canvas.attributes;return{x:t.x,y:t.y}},r.prototype.getZoomDecimal=function(){return this.getZoom()/100},r.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},r.prototype.toggleFramesEvents=function(t){this.getFramesEl().style.pointerEvents=t?"":"none"},r.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},r.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new Ct(this,In({},t)),e)},r.prototype.destroy=function(){var t,e=this;this.canvas.stopListening(),(t=this.canvasView)===null||t===void 0||t.remove(),["model","droppable"].forEach(function(n){return e[n]={}})},r}(jt);const Ut=Bo,T={stylePrefix:"comp-",components:[],draggableComponents:!0,processor:void 0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var $="text/html",Lt=$,Qt=function(){return Qt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Qt.apply(this,arguments)},fe="data-gjs-",$e="parse:html";const oe=function(a,r){return r===void 0&&(r={}),{compTypes:"",modelAttrStart:fe,getPropAttribute:function(t,e){var n=t.replace(this.modelAttrStart,""),i=(e==null?void 0:e.length)||0,l=e==null?void 0:e.substring(0,1),f=e==null?void 0:e.substring(i-1),d=e==="true"||e!=="false"&&e;try{d=l=="{"&&f=="}"||l=="["&&f=="]"?JSON.parse(d):d}catch{}return{name:n,value:d}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var n={},i={};return(0,C.each)(t,function(l,f){if(f.indexOf(e.modelAttrStart)===0){var d=e.getPropAttribute(f,l);n[d.name]=d.value}else i[f]=l}),{props:n,attrs:i}},parseStyle:function(t){for(var e={},n=t.split(";"),i=0,l=n.length;i<l;i++){var f=n[i].trim();if(f){var d=f.split(":");e[d[0].trim()]=d.slice(1).join(":").trim()}}return e},parseClass:function(t){for(var e=[],n=t.split(" "),i=0,l=n.length;i<l;i++){var f=n[i].trim();f&&e.push(f)}return e},parseNode:function(t,e){e===void 0&&(e={});for(var n=[],i=t.childNodes,l=0,f=i.length;l<f;l++){var d=i[l],v=d.attributes||[],g=v.length,w=n[n.length-1],S=d.childNodes.length,M=this.compTypes,R={};if(M){var G="",tt=d.getAttribute&&d.getAttribute("".concat(this.modelAttrStart,"type"));if(tt)R={type:tt};else{for(var K=0;K<M.length;K++){var kt=M[K];if(G=kt.model.isComponent(d,e)){typeof G!="object"&&(G={type:kt.id});break}}R=G}}if(!R.tagName){var Ft=d.tagName||"",ae=d.namespaceURI||"";R.tagName=Ft&&ae==="http://www.w3.org/1999/xhtml"?Ft.toLowerCase():Ft}g&&(R.attributes={});for(var me=0;me<g;me++){var Me=v[me].nodeName,Ve=v[me].nodeValue;if(Me=="style")R.style=this.parseStyle(Ve);else if(Me=="class")R.classes=this.parseClass(Ve);else{if(Me=="contenteditable")continue;if(Me.indexOf(this.modelAttrStart)===0){var Ze=this.getPropAttribute(Me,Ve);R[Ze.name]=Ze.value}else Ve===""&&d[Me]===!0&&(Ve=!0),R.attributes[Me]=Ve}}if(S&&!R.components){var wn=d.childNodes[0];S===1&&wn.nodeType===3?(!R.type&&(R.type="text"),R.components={type:"textnode",content:wn.nodeValue}):R.components=this.parseNode(d,Qt(Qt({},e),{inSvg:e.inSvg||R.type==="svg"}))}if(R.type=="textnode"){if(w&&w.type=="textnode"){w.content+=R.content;continue}if(!e.keepEmptyTextNodes){var Er=d.nodeValue;if(Er!=" "&&!Er.trim())continue}}S||"".concat(d.outerHTML).slice(-2)!=="/>"||(R.void=!0);var qr=R.components;if(!R.type&&qr){for(var Gr=1,no=0,Kr=0;Kr<qr.length;Kr++){var oi=qr[Kr],Fi=oi.type;if(["text","textnode"].indexOf(Fi)<0&&r.textTags.indexOf(oi.tagName)<0){Gr=0;break}Fi=="textnode"&&(no=1)}Gr&&no&&(R.type="text")}(R.tagName||R.type=="textnode")&&n.push(R)}return n},parse:function(t,e,n){var i;n===void 0&&(n={});var l=(a==null?void 0:a.get("Config"))||{},f={},d=Qt(Qt({},r),n),v=Qt(Qt(Qt({},r.optionsHtml),{htmlType:((i=r.optionsHtml)===null||i===void 0?void 0:i.htmlType)||r.htmlType}),n),g=(0,C.isFunction)(d.parserHtml)?d.parserHtml(t,v):function(kt,Ft){Ft===void 0&&(Ft={});var ae,me=new DOMParser,Me=Ft.htmlType||Lt,Ve=Me===$,Ze=Ve?kt:"<div>".concat(kt,"</div>"),wn=me.parseFromString(Ze,Me);if(Ve){var Er=wn.head,qr=wn.body,Gr=Er.querySelectorAll("script");(0,C.each)(Gr,function(Kr){return qr.appendChild(Kr)});var no=[];(0,C.each)(Er.children,function(Kr){return no.push(Kr)}),(0,C.each)(no,function(Kr,oi){return qr.insertBefore(Kr,qr.children[oi])}),ae=qr}else ae=wn.firstChild;return ae}(t,v),w=g.querySelectorAll("script"),S=w.length;if(!((0,C.isUndefined)(l.allowScripts)?v.allowScripts:l.allowScripts))for(;S--;)w[S].parentNode.removeChild(w[S]);if(v.allowUnsafeAttr||this.__clearUnsafeAttr(g),e){for(var M=g.querySelectorAll("style"),R=M.length,G="";R--;)G=M[R].innerHTML+G,M[R].parentNode.removeChild(M[R]);G&&(f.css=e.parse(G))}a&&a.trigger("".concat($e,":root"),{input:t,root:g});var tt=this.parseNode(g,d),K=tt.length!==1||d.returnArray?tt:tt[0];return f.html=K,a&&a.trigger($e,{input:t,output:f}),f},__clearUnsafeAttr:function(t){var e=this,n=t.attributes||[],i=t.childNodes||[],l=[];(0,C.each)(n,function(f){var d=f.nodeName||"";d.indexOf("on")===0&&l.push(d)}),l.map(function(f){return t.removeAttribute(f)}),(0,C.each)(i,function(f){return e.__clearUnsafeAttr(f)})}}};var Hn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tn=function(){return Tn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Tn.apply(this,arguments)},Ri=oe();const xr=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Hn(r,a),r.prototype.parseStyle=function(t){return Ri.parseStyle(t)},r.prototype.extendStyle=function(t){return Tn(Tn({},this.getStyle()),t)},r.prototype.getStyle=function(t){var e=this.get("style")||{},n=Tn({},e);return t&&(0,C.isString)(t)?n[t]:n},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,C.isString)(t)&&(t=this.parseStyle(t));var i=this.getStyle(e),l=Tn({},t),f=Tn({},l);(0,C.keys)(f).forEach(function(v){f[v]===""&&delete f[v]}),this.set("style",f,e);var d=(0,I.shallowDiff)(i,l);return delete d.__p,(0,C.keys)(d).forEach(function(v){var g=n.em;e.noEvent||(n.trigger("change:style:".concat(v)),g&&(g.trigger("styleable:change",n,v,e),g.trigger("styleable:change:".concat(v),n,v,e)))}),l},r.prototype.addStyle=function(t,e,n){e===void 0&&(e=""),n===void 0&&(n={}),typeof t=="string"?t={prop:e}:n=e||{},t=this.extendStyle(t),this.setStyle(t,n)},r.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},r.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],n=this.getStyle(t);for(var i in n){var l=t.important,f=(0,C.isArray)(l)?l.indexOf(i)>=0:l,d="".concat(n[i]).concat(f?" !important":""),v=i.substr(0,2)=="__";d&&!v&&e.push("".concat(i,":").concat(d,";"))}return e.join("")},r.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},r.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},r}(k.Hn);var Ms=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cr=function(){return Cr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Cr.apply(this,arguments)},yo=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},oo=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},bo=function(a,r){return r===void 0&&(r=[]),a?(((0,C.isArray)(a)||(0,C.isFunction)(a.map)?a:[a]).map(function(t){r.push(t.getId()),bo(t.components().models,r)}),r):[]},Xn=function(a,r,t){r===void 0&&(r={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps;return((0,C.isArray)(a)?a:[a]).map(function(n){var i=n.attributes,l=i===void 0?{}:i,f=n.components,d=n.tagName,v=l.id,g=(l.draggable,yo(l,["id","draggable"])),w=n;if(v&&(e[v]?(e[v].push(w),v=mn.getNewId(r),w.attributes.id=v):(e[v]=[],r[v]&&(w=r[v],d&&w.set({tagName:d},Cr(Cr({},t),{silent:!0})),(0,C.keys)(g).length&&w.addAttributes(g,Cr({},t))))),f){var S=Xn(f,r);if((0,C.isFunction)(w.components)){var M=w.components();M.length>0&&M.reset(S,t)}else w.components=S}return w})},wo=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ms(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.opt=e,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren);var n=e.em,i=e.config;this.config=i,this.em=n,this.domc=e.domc||(n==null?void 0:n.Components)},r.prototype.resetChildren=function(t,e){var n=this;e===void 0&&(e={});var i=this,l=e.previousModels||[],f=l.filter(function(v){return!t.get(v.cid)}),d=bo(t);e.keepIds=bo(l).filter(function(v){return d.indexOf(v)>=0}),f.forEach(function(v){return n.removeChildren(v,i,e)}),t.each(function(v){return n.onAdd(v)})},r.prototype.resetFromString=function(t,e){t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=bo(this);var n=this,i=n.domc,l=n.em,f=n.parent,d=l==null?void 0:l.Css,v=(i==null?void 0:i.allById())||{},g=this.parseString(t,e),w=Xn(g,v,e),S=e.visitedCmps,M=S===void 0?{}:S;Object.keys(M).forEach(function(R){var G=M[R];if(G.length){var tt=(d==null?void 0:d.getRules("#".concat(R)))||[];tt.length&&G.forEach(function(K){tt.forEach(function(kt){var Ft=kt.clone();Ft.set("selectors",["#".concat(K.attributes.id)]),d.getAll().add(Ft)})})}}),this.reset(w,e),l==null||l.trigger("component:content",f,e,t)},r.prototype.removeChildren=function(t,e,n){var i=this;if(n===void 0&&(n={}),t){var l=this.domc,f=this.em,d=n.temporary||n.fromUndo;if(t.prevColl=this,!d){var v=t.getId(),g=f.Selectors.getAll(),w=f.Css.getAll(),S=(n.keepIds||[]).indexOf(v)<0;delete(l?l.allById():{})[v];var M=S?w.remove(w.filter(function(G){return G.getSelectors().getFullString()==="#".concat(v)}),n):[];g.remove(M.map(function(G){return G.getSelectors().at(0)})),t.opt.temporary||(f.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),f.trigger("component:remove",t)),t.components().forEach(function(G){return i.removeChildren(G,e,n)})}var R=t.components();f.stopListening(R),f.stopListening(t),f.stopListening(t.get("classes")),t.__postRemove()}},r.prototype.model=function(t,e){var n,i=e.collection.opt,l=i.em,f=l.Components.componentTypes;e.em=l,e.config=i.config,e.componentTypes=f,e.domc=i.domc;for(var d=0;d<f.length;d++)if(f[d].id==t.type){n=f[d].model;break}return n||(n=f[f.length-1].model,l&&t.type&&l.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new n(t,e)},r.prototype.parseString=function(t,e){e===void 0&&(e={});var n=this.em,i=this.domc,l=n.Css,f=n.Parser.parseHtml(t);if(mn.checkId(f.html,f.css,i.componentsById,e),f.css&&l&&!e.temporary){e.at;var d=yo(e,["at"]);l.addCollection(f.css,Cr(Cr({},d),{extend:1}))}return f.html},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={}),e.keepIds=oo(oo([],e.keepIds||[],!0),bo(e.previousModels),!0),(0,C.isString)(t)?t=this.parseString(t,e):(0,C.isArray)(t)&&(t=oo([],t,!0)).forEach(function(f,d){if((0,C.isString)(f)){var v=n.parseString(f,e);t[d]=(0,C.isArray)(v)&&!v.length?null:v}});var i=(0,C.isArray)(t);t=(i?t:[t]).filter(Boolean).map(function(f){return n.processDef(f)}),t=i?(0,C.flatten)(t,1):t[0];var l=k.FE.prototype.add.apply(this,[t,e]);return this.__firstAdd=l,l},r.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this.em,n=this.config,i=(n===void 0?{}:n).processor,l=t;if(i){var f=i(l=Cr({},l));f&&((0,C.each)(l,function(M,R){return delete l[R]}),(0,C.extend)(l,f))}if(l.$$typeof&&typeof l.props=="object"){(l=Cr({},l)).props=Cr({},l.props);var d=e.Components,v=e.Parser.parserHtml;(0,C.each)(l,function(M,R){(0,C.includes)(["props","type"],R)||delete l[R]});var g=l.props,w=g.children;delete g.children,delete l.props;var S=v.splitPropsFromAttr(g);l.attributes=S.attrs,w&&(l.components=w),l.type?d.getType(l.type)||(l.tagName=l.type,delete l.type):l.type="textnode",(0,C.extend)(l,S.props)}return l},r.prototype.onAdd=function(t,e,n){n===void 0&&(n={});var i=this.domc,l=this.em,f=t.getStyle(),d=l&&l.getConfig().avoidInlineStyle;if(i&&i.Component.ensureInList(t),!(0,C.isEmpty)(f)&&!d&&l&&l.get&&l.getConfig().forceClass&&!n.temporary){var v=t.cid;l.Css.setClassRule(v,f),t.setStyle({}),t.addClass(v)}t.__postAdd({recursive:!0})},r}(k.FE);const Wo=wo;var Ls=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),So=1,Hi=2,Ds=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,i=e.config,l=i===void 0?{}:i,f=n.get("name"),d=n.get("label");f?d||n.set("label",f):n.set("name",d);var v=n.get("name"),g=l.escapeName,w=g?g(v):r.escapeName(v);return n.set("name",w),n.em=e.em,n}return Ls(r,a),r.prototype.defaults=function(){return{name:"",label:"",type:So,active:!0,private:!1,protected:!1,_undo:!0}},r.prototype.isId=function(){return this.get("type")===Hi},r.prototype.isClass=function(){return this.get("type")===So},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,n=this.get("name"),i="";switch(this.get("type")){case So:i=".";break;case Hi:i="#"}return i+(e?e(n):n)},r.prototype.toString=function(){return this.getFullName()},r.prototype.getLabel=function(){return this.get("label")},r.prototype.setLabel=function(t){return this.set("label",t)},r.prototype.getActive=function(){return this.get("active")},r.prototype.setActive=function(t){return this.set("active",t)},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,n=k.Hn.prototype.toJSON.call(this,[t]),i=(0,C.result)(this,"defaults");if(e&&e.getConfig().avoidDefaults){(0,C.forEach)(i,function(f,d){n[d]===f&&delete n[d]}),n.label===n.name&&delete n.label;var l=(0,C.keys)(n).length;l===1&&n.name&&(n=n.name),l===2&&n.name&&n.type&&(n=this.getFullName())}return n},r.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\:@]+)/gi,"-")},r.TYPE_CLASS=So,r.TYPE_ID=Hi,r}(k.Hn);const Jn=Ds;Ds.prototype.idAttribute="name";var Zr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pi=function(a,r){return a.reduce(function(t,e,n){return t.concat(pi(a.slice(n+1),"".concat(r).concat(e)))},[r])},Ns=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zr(r,a),r.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||Jn.TYPE_CLASS)},r.prototype.getStyleable=function(){return(0,C.filter)(this.models,function(t){return t.get("active")&&!t.get("private")})},r.prototype.getValid=function(t){var e=(t===void 0?{}:t).noDisabled;return(0,C.filter)(this.models,function(n){return!n.get("private")}).filter(function(n){return e?n.get("active"):1})},r.prototype.getFullString=function(t,e){e===void 0&&(e={});var n=[];return(t||this).forEach(function(i){return n.push(i.getFullName(e))}),e.sort&&n.sort(),n.join("").trim()},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,n=t.array,i=[],l=this.map(function(f){return f.getFullName(t)}).sort();return e?l.forEach(function(f,d){i=i.concat(pi(l.slice(d+1),f))}):i=l,n?i:e?i.join(","):i.join("")},r}(k.FE);const Sr=Ns;Ns.prototype.model=Jn;var Oo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fi=function(){return fi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},fi.apply(this,arguments)};const Is=function(a){function r(t){var e=a.call(this,t)||this,n=e.attributes,i=n.target,l=n.name,f=n.changeProp,d=n.value;if(!e.get("id")&&e.set("id",l),i){e.target=i,e.unset("target");var v=f?"change:".concat(l):"change:attributes:".concat(l);e.listenTo(i,v,e.targetUpdated);var g=d||e.getValue();!(0,C.isUndefined)(g)&&e.set({value:g},{silent:!0})}return e}return Oo(r,a),r.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",changeProp:!1,options:[]}},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,i=n===void 0||n,l=this.getId(),f=this.get("label")||this.getName();return i&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||f},r.prototype.getValue=function(){return this.getTargetValue()},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n={};e.partial&&(n.avoidStore=!0),this.setTargetValue(t,n),e.partial===!1&&(this.setTargetValue(""),this.setTargetValue(t))},r.prototype.props=function(){return this.attributes},r.prototype.targetUpdated=function(){var t,e=this.getTargetValue();this.set({value:e},{fromTarget:1}),(t=this.em)===null||t===void 0||t.trigger("trait:update",{trait:this,component:this.target})},r.prototype.getTargetValue=function(){var t,e=this.getName(),n=this.target;return t=this.get("changeProp")?n.get(e):n.getAttributes()[e],(0,C.isUndefined)(t)?"":t},r.prototype.setTargetValue=function(t,e){var n;e===void 0&&(e={});var i=this.target,l=this.attributes,f=this.getName();if(!(0,C.isUndefined)(t)){var d=t;if(t==="false"?d=!1:t==="true"&&(d=!0),this.getType()==="checkbox"){var v=l.valueTrue,g=l.valueFalse;d&&!(0,C.isUndefined)(v)&&(d=v),d||(0,C.isUndefined)(g)||(d=g)}this.get("changeProp")?i.set(f,d,e):i.addAttributes(((n={})[f]=d,n),e)}},r.prototype.setValueFromInput=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var i={value:t};this.set(i,fi(fi({},n),{avoidStore:1})),e&&(this.set("value","",n),this.set(i,n))},r.prototype.getInitValue=function(){var t,e=this.target,n=this.getName();if(e){var i=e.get("attributes");t=this.get("changeProp")?e.get(n):i[n]}return t||this.get("value")||this.get("default")},r}(k.Hn);var Pa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),di=function(a){function r(t,e){var n=a.call(this,t)||this;return n.em=e.em,n.listenTo(n,"add",n.handleAdd),n.listenTo(n,"reset",n.handleReset),n}return Pa(r,a),r.prototype.handleReset=function(t,e){var n=(e===void 0?{}:e).previousModels;(n===void 0?[]:n).forEach(function(i){return i.trigger("remove")})},r.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e)},r.prototype.setTarget=function(t){this.target=t},r.prototype.add=function(t,e){var n=this.em;if((0,C.isString)(t)||(0,C.isArray)(t)){var i=n&&n.get&&n.Traits,l=function(w){return w===void 0&&(w={}),{build:function(S){var M=[];typeof S=="string"&&(S=[S]);for(var R=0;R<S.length;R++){var G=S[R],tt={name:G,type:"text"};G==="target"&&(tt.type="select",tt.default=!1,tt.options=w.optionsTarget),M.push(tt)}return M}}}(i&&i.getConfig());(0,C.isString)(t)&&(t=[t]);for(var f=0,d=t.length;f<d;f++){var v=t[f],g=(0,C.isString)(v)?l.build(v)[0]:v;g.target=this.target,t[f]=g}}return k.FE.prototype.add.apply(this,[t,e])},r}(k.FE);const $o=di;di.prototype.model=Is;var zi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Be=function(){return Be=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Be.apply(this,arguments)},Zn=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ui=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},hr="component:drag",qn="__symbols",vn="__symbol",Or="__symbol_ovrd",qo="component:update",Dr="".concat(qo,"-inside"),Bi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return zi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){var t;return(t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,locked:!1,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null})[vn]=0,t[qn]=0,t[Or]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.updated=function(t,e,n){},r.prototype.removed=function(){},r.prototype.initialize=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,C.bindAll)(this,"__upSymbProps","__upSymbCls","__upSymbComps");var i=e.em,l=this.parent(),f=l==null?void 0:l.attributes,d=this.get("propagate");if(d&&this.set("propagate",(0,C.isArray)(d)?d:[d]),f&&f.propagate&&!d){var v={},g=f.propagate;g.forEach(function(G){return v[G]=l.get(G)}),v.propagate=g,this.set(Be(Be({},v),t))}if(e&&e.config&&e.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),e.em=i,this.opt=e,this.em=i,this.frame=e.frame,this.config=e.config||{},this.set("attributes",Be(Be({},(0,C.result)(this,"defaults").attributes||{}),this.get("attributes")||{})),this.ccid=r.createId(this,e),this.initClasses(),this.initTraits(),this.initComponents(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.on("change:toolbar",this.__emitUpdateTlb),this.on("change",this.__onChange),this.on(Dr,this.__propToParent),this.set("status",""),this.views=[],["classes","traits","components"].forEach(function(G){var tt="add remove ".concat(G!=="components"?"change":"");n.listenTo(n.get(G),tt.trim(),function(){for(var K=[],kt=0;kt<arguments.length;kt++)K[kt]=arguments[kt];return n.emitUpdate.apply(n,Zn([G],K,!1))})}),!e.temporary){var w=i&&i.Css,S=this.attributes,M=S.styles,R=S.type;M&&w&&w.addCollection(M,{avoidUpdateStyle:!0},{group:"cmp:".concat(R)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),i&&i.trigger("component:create",this)}},r.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,n=e==null?void 0:e.UndoManager,i=this.components();n&&!this.__hasUm&&(n.add(i),n.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&i.map(function(l){return l.__postAdd(t)})},r.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.get("UndoManager");e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},r.prototype.__onChange=function(t,e){var n=this,i=this.changedAttributes()||{};(0,C.keys)(i).forEach(function(l){return n.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete i[l]}),(0,I.isEmptyObj)(i)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:i,options:e}))},r.prototype.__changesUp=function(t){var e=this.em;[this.frame,e].forEach(function(n){return n&&n.changesUp(t)})},r.prototype.__propSelfToParent=function(t){this.trigger(qo,t),this.__propToParent(t)},r.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Dr,t)},r.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},r.prototype.is=function(t){return this.get("type")==t},r.prototype.props=function(){return this.attributes},r.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.find=function(t){var e,n=[],i=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return i==null||i.each(function(l){var f=i.eq(l).data("model");f&&n.push(f)}),n},r.prototype.findType=function(t){var e=[],n=function(i){return i.forEach(function(l){l.is(t)&&e.push(l),n(l.components())})};return n(this.components()),e},r.prototype.closest=function(t){var e,n=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return n!=null&&n.length?n.data("model"):void 0},r.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},r.prototype.contains=function(t){var e=!1;if(!t)return e;var n=function(i){!e&&i.forEach(function(l){l===t&&(e=!0),!e&&n(l.components())})};return n(this.components()),e},r.prototype.tagUpdated=function(){this.trigger("rerender")},r.prototype.replaceWith=function(t){var e=this.collection,n=e.indexOf(this);return e.remove(this),e.add(t,{at:n})},r.prototype.attrUpdated=function(t,e,n){var i=this;n===void 0&&(n={});var l=this.get("attributes"),f=l.class;f&&this.setClass(f),delete l.class;var d=l.style;d&&this.setStyle(d),delete l.style;var v=Be({},this.previous("attributes")),g=(0,I.shallowDiff)(v,this.get("attributes"));(0,C.keys)(g).forEach(function(w){return i.trigger("change:attributes:".concat(w),i,g[w],n)})},r.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",Be({},t),e),this},r.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(Be(Be({},this.getAttributes({noClass:!0})),t),e)},r.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var n=Array.isArray(t)?t:[t],i=this.getAttributes();return n.map(function(l){return delete i[l]}),this.setAttributes(i,e)},r.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=this.em,i=(0,C.isString)(t)?t:"",l=i?e:t;if(n&&n.getConfig().avoidInlineStyle&&!l.inline){var f=n.get("state"),d=n.Css.getIdRule(this.getId(),Be({state:f},l));if(this.rule=d,d)return d.getStyle(i)}return a.prototype.getStyle.call(this,i)},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={});var i=this,l=i.opt,f=i.em;if(f&&f.getConfig().avoidInlineStyle&&!l.temporary&&!e.inline){var d=this.get("style")||{};t=(0,C.isString)(t)?this.parseStyle(t):t,t=Be(Be({},t),d);var v=f.get("state"),g=f.Css,w=this.getStyle(e);this.rule=g.setIdRule(this.getId(),t,Be(Be({},e),{state:v}));var S=(0,I.shallowDiff)(w,t);this.set("style","",{silent:!0}),(0,C.keys)(S).forEach(function(M){return n.trigger("change:style:".concat(M))})}else t=a.prototype.setStyle.apply(this,arguments);return t},r.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,n=[],i=Be({},this.get("attributes")),l=e==null?void 0:e.Selectors,f=this.getId();if(t.noClass?delete i.class:(this.classes.forEach(function(g){return n.push((0,C.isString)(g)?g:g.get("name"))}),n.length&&(i.class=n.join(" "))),!t.noStyle){var d=this.get("style");(0,I.isObject)(d)&&!(0,I.isEmptyObj)(d)&&(i.style=this.styleToString({inline:1}))}if(!(0,C.has)(i,"id")){var v=void 0;(function(g){return g&&g.getConfig().avoidInlineStyle})(e)?v=l&&l.get(f,l.Selector.TYPE_ID):(0,C.isEmpty)(this.getStyle())||(v=1),(this.__getSymbol()||this.__getSymbols())&&(v=1),v&&(i.id=f)}return i},r.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},r.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},r.prototype.removeClass=function(t){var e=[];t=(0,C.isArray)(t)?t:[t];var n=this.classes,i=Jn.TYPE_CLASS;return t.forEach(function(l){l.split(" ").forEach(function(f){var d=n.where({name:f,type:i})[0];d&&e.push(n.remove(d))})}),e},r.prototype.getClasses=function(){var t=this.getAttributes().class;return t?t.split(" "):[]},r.prototype.__logSymbol=function(t,e,n){n===void 0&&(n={});var i=this.__getSymbol(),l=this.__getSymbols();(i||l)&&this.em.log(t,{model:this,toUp:e,context:"symbols",opts:n})},r.prototype.__initSymb=function(){this.__symbReady||(this.on("change",this.__upSymbProps),this.__symbReady=!0)},r.prototype.__isSymbol=function(){return(0,C.isArray)(this.get(qn))},r.prototype.__isSymbolOrInst=function(){return!(!this.__isSymbol()&&!this.get(vn))},r.prototype.__isSymbolTop=function(){var t=this.parent();return this.__isSymbolOrInst()&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},r.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop();return(e.__isSymbol()?e:e.__getSymbol())!==t},r.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},r.prototype.__getSymbol=function(){var t=this.get(vn);if(t&&(0,C.isString)(t)){var e=this.__getAllById()[t];e?(t=e,this.set(vn,e)):t=0}return t},r.prototype.__getSymbols=function(){var t=this,e=this.get(qn);return e&&(0,C.isArray)(e)&&(e.forEach(function(n,i){n&&(0,C.isString)(n)&&(e[i]=t.__getAllById()[n])}),e=e.filter(function(n){return n&&!(0,C.isString)(n)})),e},r.prototype.__isSymbOvrd=function(t){t===void 0&&(t="");var e=this.get(Or),n=t.split(":")[0],i=t!==n?[t,n]:[t];return e===!0||(0,C.isArray)(e)&&i.some(function(l){return e.indexOf(l)>=0})},r.prototype.__getSymbToUp=function(t){var e=this;t===void 0&&(t={});var n=[],i=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||i&&this.__isSymbOvrd(i))return n;var l=this.__getSymbols()||[],f=this.__getSymbol();return n=(f?Zn([f],f.__getSymbols()||[],!0):l).filter(function(d){return d!==e}).filter(function(d){return!(i&&d.__isSymbOvrd(i))})},r.prototype.__getSymbTop=function(t){for(var e=this,n=this.parent(t);n&&(n.__isSymbol()||n.__getSymbol());)e=n,n=n.parent(t);return e},r.prototype.__upSymbProps=function(t,e){var n=this;e===void 0&&(e={});var i=this.changedAttributes()||{},l=i.attributes||{};if(delete i.status,delete i.open,delete i[qn],delete i[vn],delete i[Or],delete i.attributes,delete l.id,(0,I.isEmptyObj)(l)||(i.attributes=l),!(0,I.isEmptyObj)(i)){var f=this.__getSymbToUp(e);(0,C.keys)(i).map(function(d){n.__isSymbOvrd(d)&&delete i[d]}),this.__logSymbol("props",f,{opts:e,changed:i}),f.forEach(function(d){var v=Be({},i);(0,C.keys)(v).map(function(g){d.__isSymbOvrd(g)&&delete v[g]}),d.set(v,Be({fromInstance:n},e))})}},r.prototype.__upSymbCls=function(t,e,n){var i=this;n===void 0&&(n={});var l=this.__getSymbToUp(n);this.__logSymbol("classes",l,{opts:n}),l.forEach(function(f){f.set("classes",i.get("classes"),{fromInstance:i})}),this.__changesUp(n)},r.prototype.__upSymbComps=function(t,e,n){var i=this,l=n||e||{},f={fromInstance:l.fromInstance,fromUndo:l.fromUndo},d=t.opt.temporary;if(n)if(n.add){var v=[],g=!!this.__getSymbols();if((Ft=this.__getSymbToUp(Be(Be({},f),{changed:"components:add"}))).length){var w=t.__getSymbol();v=(w?w.__getSymbols():t.__getSymbols())||[],(v=Zn([],v,!0)).push(w||t)}!d&&this.__logSymbol("add",Ft,{opts:n,addedInstances:v.map(function(me){return me.cid}),added:t.cid}),Ft.forEach(function(me){var Me=me.__getSymbTop(),Ve=v.filter(function(Ze){var wn=Ze.__getSymbTop({prev:1});return Me&&wn&&wn===Me})[0]||t.clone({symbol:!0,symbolInv:g});me.append(Ve,Be({fromInstance:i},n))})}else{var S=t.__getSymbol();if(S&&!n.temporary&&S.set(qn,S.__getSymbols().filter(function(me){return me!==t})),!t.__isSymbolTop()){var M="components:remove",R=n.index,G=t.parent(),tt=Be({fromInstance:t},n),K=t.__isSymbolNested(),kt=function(me){var Me=me.parent();Me&&!Me.__isSymbOvrd(M)&&me.remove(tt)};Ft=G!=null&&G.__isSymbOvrd(M)?[]:t.__getSymbToUp(f),K&&(Ft=G==null?void 0:G.__getSymbToUp(Be(Be({},f),{changed:M})),kt=function(me){var Me=me.components().at(R);Me&&Me.remove(Be({fromInstance:G},tt))}),!d&&this.__logSymbol("remove",Ft,{opts:n,removed:t.cid,isSymbNested:K}),Ft.forEach(kt)}}else{var Ft=this.__getSymbToUp(Be(Be({},f),{changed:"components:reset"})),ae=t.models;this.__logSymbol("reset",Ft,{components:ae}),Ft.forEach(function(me){var Me=ae.map(function(Ve){return Ve.clone({symbol:!0})});me.components().reset(Me,Be({fromInstance:i},e))})}this.__changesUp(l)},r.prototype.initClasses=function(t,e,n){n===void 0&&(n={});var i=this.get("attributes").class||[],l=[this,"change:classes",this.initClasses],f=this.get("classes")||i,d=(0,C.isString)(f)?f.split(" "):f;this.stopListening.apply(this,l);var v=this.normalizeClasses(d),g=new Sr([]);return this.set("classes",g,n),g.add(v),g.on("add remove reset",this.__upSymbCls),this.listenTo.apply(this,l),this},r.prototype.initComponents=function(){var t=[this,"change:components",this.initComponents];this.stopListening.apply(this,t);var e=new Wo([],this.opt);e.parent=this;var n=this.get("components"),i=!this.opt.avoidChildren;return this.set("components",e),i&&n&&e.add((0,C.isFunction)(n)?n(this):n,this.opt),e.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},r.prototype.initTraits=function(t){var e=this.em,n="change:traits";this.off(n,this.initTraits),this.__loadTraits();var i=Be({},this.get("attributes")),l=this.traits;return l.each(function(f){if(!f.get("changeProp")){var d=f.get("name"),v=f.getInitValue();d&&v&&(i[d]=v)}}),l.length&&this.set("attributes",i),this.on(n,this.initTraits),t&&e&&e.trigger("component:toggled"),this},r.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var n=this.previous(t)||[],i=this.get(t)||[],l=n.map(function(d){return"change:".concat(d)}).join(" "),f=i.map(function(d){return"change:".concat(d)}).join(" ");l&&this.off(l,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,e)}},r.prototype.__scriptPropsChange=function(t,e,n){n===void 0&&(n={}),n.avoidStore||this.trigger("rerender")},r.prototype.append=function(t,e){e===void 0&&(e={});var n=((0,C.isArray)(t)?Zn([],t,!0):[t]).map(function(l){return(0,C.isString)(l)||l.collection&&l.collection.remove(l,{temporary:!0}),l}),i=this.components().add(n,e);return(0,C.isArray)(i)?i:[i]},r.prototype.components=function(t,e){e===void 0&&(e={});var n=this.get("components");return(0,C.isUndefined)(t)?n:(n.reset(void 0,e),t?this.append(t,e):[])},r.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},r.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},r.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},r.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},r.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},r.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},r.prototype.initToolbar=function(){var t=this.em,e=this,n=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var i=[];e.collection&&i.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&i.push({attributes:{class:"".concat(n,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&i.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&i.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",i)}},r.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var n=t||this.traits;if(!(n instanceof $o)){n=(0,C.isFunction)(n)?n(this):n;var i=new $o([],this.opt);i.setTarget(this),n.length&&(n.forEach(function(l){return l.attributes&&delete l.attributes.value}),i.add(n)),this.set({traits:i},e)}return this},r.prototype.getTraits=function(){return this.__loadTraits(),Zn([],this.traits.models,!0)},r.prototype.setTraits=function(t){var e=(0,C.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},r.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},r.prototype.updateTrait=function(t,e){var n,i=this.getTrait(t);return i&&i.set(e),(n=this.em)===null||n===void 0||n.trigger("component:toggled"),this},r.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},r.prototype.removeTrait=function(t){var e,n=this,i=((0,C.isArray)(t)?t:[t]).map(function(d){return n.getTrait(d)}),l=this.traits,f=i.length?l.remove(i):[];return(e=this.em)===null||e===void 0||e.trigger("component:toggled"),(0,C.isArray)(f)?f:[f]},r.prototype.addTrait=function(t,e){var n;e===void 0&&(e={}),this.__loadTraits();var i=this.traits.add(t,e);return(n=this.em)===null||n===void 0||n.trigger("component:toggled"),(0,C.isArray)(i)?i:[i]},r.prototype.normalizeClasses=function(t){var e=[],n=this.em,i=n==null?void 0:n.Selectors;return i?t.models?Zn([],t.models,!0):(t.forEach(function(l){return e.push(i.add(l))}),e):[]},r.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,n=Be({},this.attributes),i=Be({},this.opt),l=this.getId(),f=e==null?void 0:e.Css;n.attributes=Be({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get("components").each(function(M,R){n.components[R]=M.clone(Be(Be({},t),{_inner:1}))}),this.get("traits").each(function(M,R){n.traits[R]=M.clone()}),this.get("classes").each(function(M,R){n.classes[R]=M.get("name")}),n.status="",i.collection=null;var d=new this.constructor(n,i),v="#".concat(d.getId());(f?f.getRules("#".concat(l)):[]).forEach(function(M){var R=M.clone();R.set("selectors",[v]),f.getAll().add(R)}),d.set(qn,0);var g=this.__getSymbol(),w=this.__getSymbols();t.symbol||!g&&!w?g?(g.set(qn,Zn(Zn([],g.__getSymbols(),!0),[d],!1)),d.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(qn,Zn(Zn([],w,!0),[d],!1)),d.set(vn,this),d.__initSymb()):t.symbolInv?(this.set(qn,[d]),d.set(vn,this),[this,d].map(function(M){return M.__initSymb()})):(d.set(qn,[this]),[this,d].map(function(M){return M.__initSymb()}),this.set(vn,d))):(d.set(vn,0),d.set(qn,0));var S="component:clone";return e&&e.trigger(S,d),this.trigger(S,d),d},r.prototype.getName=function(){var t=this.em,e=this.attributes,n=e.type,i=e.tagName,l=e.name,f=n||i,d=n?"":i,v="domComponents.names.",g=l&&(t==null?void 0:t.t("".concat(v).concat(l))),w=d&&(t==null?void 0:t.t("".concat(v).concat(d))),S=t&&(t.t("".concat(v).concat(n))||t.t("".concat(v).concat(i)));return this.get("custom-name")||g||l||w||(0,I.capitalize)(d)||S||(0,I.capitalize)(f)},r.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},r.prototype.toHTML=function(t){t===void 0&&(t={});var e=this,n=[],i=t.tag||e.get("tagName"),l=e.get("void"),f=t.attributes,d=this.getAttrToHTML();if(delete t.tag,f&&((0,C.isFunction)(f)?d=f(e,d)||{}:(0,I.isObject)(f)&&(d=f)),t.withProps){var v=this.toJSON();(0,C.forEach)(v,function(K,kt){kt[0]!=="_"&&["classes","attributes","components"].indexOf(kt)<0&&(d["data-gjs-".concat(kt)]=(0,C.isArray)(K)||(0,I.isObject)(K)?JSON.stringify(K):K)})}for(var g in d){var w=d[g];if(!(0,C.isUndefined)(w)&&w!==null)if((0,C.isBoolean)(w))w&&n.push(g);else{var S="";if(t.altQuoteAttr&&(0,C.isString)(w)&&w.indexOf('"')>=0)S="'".concat(w.replace(/'/g,"&apos;"),"'");else{var M=(0,C.isString)(w)?w.replace(/"/g,"&quot;"):w;S='"'.concat(M,'"')}n.push("".concat(g,"=").concat(S))}}var R=n.length?" ".concat(n.join(" ")):"",G=e.getInnerHTML(t),tt="<".concat(i).concat(R).concat(l?"/":"",">").concat(G);return!l&&(tt+="</".concat(i,">")),tt},r.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},r.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(n){return n.toHTML(t)}).join(""):this.get("content")},r.prototype.getAttrToHTML=function(){var t=this.getAttributes();return delete t.style,t},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=X.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,!t.fromUndo){var n=e[vn],i=e[qn];i&&(0,C.isArray)(i)&&(e[qn]=i.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),n&&!(0,C.isString)(n)&&(e[vn]=n.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},r.prototype.getChangedProps=function(t){var e=t||X.Model.prototype.toJSON.apply(this),n=(0,C.result)(this,"defaults");return(0,C.forEach)(n,function(i,l){["type"].indexOf(l)===-1&&e[l]===i&&delete e[l]}),(0,C.isEmpty)(e.type)&&delete e.type,(0,C.forEach)(["attributes","style"],function(i){(0,C.isEmpty)(n[i])&&(0,C.isEmpty)(e[i])&&delete e[i]}),(0,C.forEach)(["classes","components"],function(i){(!e[i]||(0,C.isEmpty)(n[i])&&!e[i].length)&&delete e[i]}),e},r.prototype.getId=function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},r.prototype.setId=function(t,e){var n=Be({},this.get("attributes"));return n.id=t,this.set("attributes",n,e),this},r.prototype.getEl=function(t){t===void 0&&(t=void 0);var e=this.getView(t);return e&&e.el},r.prototype.getView=function(t){var e=this.view,n=this.views;return t&&(e=n.filter(function(i){return i._getFrame()===t.view})[0]),e},r.prototype.getCurrentView=function(){var t=(this.em.get("currentFrame")||{}).model;return this.getView(t)},r.prototype.__getScriptProps=function(){var t=this.props();return(this.get("script-props")||[]).reduce(function(e,n){return e[n]=t[n],e},{})},r.prototype.getScriptString=function(t){var e=this,n=t||this.get("script")||"";if(!n)return n;if(this.get("script-props"))n=n.toString().trim();else{if(typeof n=="function"){var i=n.toString().trim();n=(i=i.replace(/^function[\s\w]*\(\)\s?\{/,"").replace(/\}$/,"")).trim()}var l=this.em.getConfig(),f=Ui(l.tagVarStart||"{[ "),d=Ui(l.tagVarEnd||" ]}"),v=new RegExp("".concat(f,"([\\w\\d-]*)").concat(d),"g");n=n.replace(v,function(g,w){e.scriptUpdated();var S=e.attributes[w]||"";return(0,C.isArray)(S)||typeof S=="object"?JSON.stringify(S):S})}return n},r.prototype.emitUpdate=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var l=this.em,f=qo+(t?":".concat(t):""),d=t&&this.get(t);t&&this.updated.apply(this,Zn([t,d,t&&this.previous(t)],n,!1)),this.trigger.apply(this,Zn([f],n,!1)),l&&l.trigger.apply(l,Zn([f,this],n,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=d,e),options:n[2]||n[1]||{}})},r.prototype.onAll=function(t){return(0,C.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},r.prototype.remove=function(t){var e=this;t===void 0&&(t={});var n=this.em,i=this.collection,l=function(){i&&i.remove(e,Be(Be({},t),{action:"remove-component"})),i||(e.components("",t),e.components().removeChildren(e,void 0,t))},f=Be({},t);return[this,n].map(function(d){return d.trigger("component:remove:before",e,l,f)}),!f.abort&&l(),this},r.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var n=e.at,i=this.index(),l=t===this.parent();l&&(i===n||i===n-1)||(l&&n&&n>i&&(e.at=n-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},r.prototype.isInstanceOf=function(t){var e,n,i=(n=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||n===void 0?void 0:n.model;return!!i&&this instanceof i},r.prototype.isChildOf=function(t){for(var e=(0,C.isString)(t),n=this.parent();n;){if(e){if(n.isInstanceOf(t))return!0}else if(n===t)return!0;n=n.parent()}return!1},r.prototype.resetId=function(t){var e=this.em,n=this.getId();if(!n)return this;var i=r.createId(this);this.setId(i);var l=e==null?void 0:e.Css.getIdRule(n),f=l==null?void 0:l.get("selectors").at(0);return f==null||f.set("name",i),this},r.prototype._getStyleRule=function(t){var e=(t===void 0?{}:t).id,n=this.em,i=e||this.getId();return n==null?void 0:n.Css.getIdRule(i)},r.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},r.prototype._idUpdated=function(t,e,n){if(n===void 0&&(n={}),!n.idUpdate){var i=this.ccid,l=(this.get("attributes")||{}).id,f=(this.previous("attributes")||{}).id||i,d=r.getList(this);if(d[l]||!l&&f)return this.setId(f,{idUpdate:!0});delete d[f],d[l]=this,this.ccid=l;var v=this._getStyleSelector({id:f});v&&v.set({name:l,label:l})}},r.getDefaults=function(){return(0,C.result)(this.prototype,"defaults")},r.isComponent=function(t){return{tagName:(0,I.toLowerCase)(t.tagName)}},r.ensureInList=function(t){var e=r.getList(t),n=t.getId(),i=e[n];if(i){if(i!==t){var l=r.getIncrementId(n,e);t.setId(l),e[l]=t}}else e[n]=t;t.components().forEach(function(f){return r.ensureInList(f)})},r.createId=function(t,e){e===void 0&&(e={});var n,i=r.getList(t),l=e.idMap,f=l===void 0?{}:l,d=t.get("attributes").id;return d?(n=r.getIncrementId(d,i,e),t.setId(n),d!==n&&(f[d]=n)):n=r.getNewId(i),i[n]=t,n},r.getNewId=function(t){for(var e=Object.keys(t).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-e),i="i".concat(n);t[i];)i=r.getNewId(t);return i},r.getIncrementId=function(t,e,n){n===void 0&&(n={});var i=n.keepIds,l=1,f=t;if((i===void 0?[]:i).indexOf(t)<0)for(;e[f];)l++,f="".concat(t,"-").concat(l);return f},r.getList=function(t){var e=t.opt,n=e===void 0?{}:e,i=n.domc,l=n.em,f=i||(l==null?void 0:l.Components);return f?f.componentsById:{}},r.checkId=function(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n={}),i===void 0&&(i={});var l=(0,C.isArray)(t)?t:[t],f=i.keepIds,d=f===void 0?[]:f;l.forEach(function(v){v.attributes;var g=v.attributes,w=g===void 0?{}:g,S=v.components,M=w.id;if(M&&n[M]&&d.indexOf(M)<0){var R=r.getIncrementId(M,n);w.id=R,(0,C.isArray)(e)&&e.forEach(function(G){var tt=G.selectors;tt.forEach(function(K,kt){K==="#".concat(M)&&(tt[kt]="#".concat(R))})})}S&&r.checkId(S,e,n,i)})},r}(xr);const mn=Bi;var Tr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wi=function(a){function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=kn,t}return Tr(r,a),r.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},r.prototype.removeChildren=function(t,e,n){var i=this;n===void 0&&(n={}),t.views.forEach(function(l){if(l){var f=l.childrenView,d=l.scriptContainer;f&&f.stopListening(),(0,Re.L_)(d),l.remove.apply(l)}}),t.components().forEach(function(l){return i.removeChildren(l,e,n)})},r.prototype.addTo=function(t,e,n){n===void 0&&(n={});var i=this.em,l=this.collection.indexOf(t);if(this.addToCollection(t,null,l),i&&!n.temporary){var f=function(d){i.trigger("component:add",d),d.components().forEach(function(v){return f(v)})};f(t)}},r.prototype.addToCollection=function(t,e,n){for(var i=this,l=i.config,f=i.opts,d=i.em,v=e||null,g=l.frameView,w=(g==null?void 0:g.model)&&t.getView(g.model),S=f.componentTypes||(d==null?void 0:d.Components.getTypes()),M=t.get("type")||"default",R=this.compView,G=0;G<S.length;G++)if(S[G].id==M){R=S[G].view;break}var tt,K=w||new R({model:t,config:l,componentTypes:S});try{tt=K.render().el}catch(me){tt=document.createTextNode(""),d.logError(me)}if(v)v.appendChild(tt);else{var kt=this.parentEl,Ft=kt.childNodes;if((0,C.isUndefined)(n))kt.appendChild(tt);else{var ae=Ft.length==n;ae&&n--,ae||!Ft.length?kt.appendChild(tt):kt.insertBefore(tt,Ft[n])}}return t.opt.temporary||d==null||d.trigger("component:mount",t),tt},r.prototype.resetChildren=function(t,e){var n=this,i=(e===void 0?{}:e).previousModels,l=i===void 0?[]:i;this.parentEl.innerHTML="",l.forEach(function(f){return n.removeChildren(f,n.collection)}),t.each(function(f){return n.addToCollection(f)})},r.prototype.render=function(t){var e=this,n=this.el,i=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,i)}),n.innerHTML="",n.appendChild(i),this},r}(k.G7);const hi=Wi;var pr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nr=function(){return Nr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Nr.apply(this,arguments)},Ir=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return pr(r,a),r.prototype.className=function(){return this.getClasses()},r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{},i=n.em,l=e.opt||{},f=this.$el,d=this.el;this.opts=t,this.modelOpt=l,this.config=n,this.em=i,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),f.data("model",e),(0,I.setViewEl)(d,this),e.view=this,this._getFrame()&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Nr(Nr({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},r.prototype.__isDraggable=function(){var t=this.model,e=this.config,n=t.attributes.draggable;return e.draggableComponents&&n},r.prototype._clbObj=function(){var t=this,e=t.em,n=t.model,i=t.el;return{editor:e==null?void 0:e.getEditor(),model:n,el:i}},r.prototype.init=function(t){},r.prototype.removed=function(t){},r.prototype.onRender=function(t){},r.prototype.onActive=function(t){},r.prototype.onDisable=function(){},r.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this.model,n=this.$el,i=e.views,l=this._getFrame()||{};return e.components().forEach(function(f){var d=f.getView(l.model);d==null||d.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),i.splice(i.indexOf(this),1),this.removed(this._clbObj()),n.data({model:"",collection:"",view:""}),this},r.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},r.prototype.initClasses=function(){var t=this.model,e="change:classes",n=t.get("classes");n instanceof Sr&&(this.stopListening(t,e,this.initClasses),this.listenTo(t,e,this.initClasses),this.listenTo(n,"add remove change",this.updateClasses),n.length&&this.importClasses())},r.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,n=e.model,i=e.$el,l=e.childrenView,f=n.get("components"),d=[n,"change:components",this.initComponents];f instanceof Wo&&(i.data("collection",f),l&&l.remove(),this.stopListening.apply(this,d),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,d))},r.prototype.handleChange=function(){var t=this.model,e=(0,C.keys)(t.changed);if(e.length!==1||e[0]!=="status")for(var n in t.emitUpdate(),t.changed)t.emitUpdate(n)},r.prototype.importClasses=function(){var t=this.em.Selectors;t&&this.model.classes.each(function(e){t.add(e.get("name"))})},r.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,n=e.em,i=e.el,l=e.ppfx,f=e.model,d=n==null?void 0:n.Canvas.getConfig().extHl,v=f.get("status"),g="".concat(l,"selected"),w="".concat(g,"-parent"),S="".concat(l,"freezed"),M="".concat(l,"hovered"),R="".concat(l,"no-pointer"),G=[g,w,S,M,R],tt=d&&!t.noExtHl?"":g;this.$el.removeClass(G.join(" "));var K=[i.getAttribute("class")||""];switch(v){case"selected":K.push(tt);break;case"selected-parent":K.push(w);break;case"freezed":K.push(S);break;case"freezed-selected":K.push(S,tt);break;case"hovered":!t.avoidHover&&K.push(M)}f.get("locked")&&K.push(R);var kt=K.filter(Boolean).join(" ");kt&&i.setAttribute("class",kt)},r.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),n=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!n||"")},r.prototype.updateStyle=function(t,e,n){n===void 0&&(n={});var i=this.model,l=this.em;if(l&&l.getConfig().avoidInlineStyle&&!n.inline){var f=i.getStyle();!(0,C.isEmpty)(f)&&i.setStyle(f)}else this.setAttribute("style",i.styleToString(n))},r.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},r.prototype.setAttribute=function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},r.prototype.getClasses=function(){return this.model.getClasses().join(" ")},r.prototype.updateAttributes=function(){var t=[],e=this,n=e.model,i=e.$el,l=e.el,f=n.attributes,d=f.textable,v=f.type,g=Nr(Nr({id:n.getId(),"data-gjs-type":v||"default"},this.__isDraggable()&&{draggable:!0}),d&&{contenteditable:"false"});(0,C.each)(l.attributes,function(S){return t.push(S.nodeName)}),t.forEach(function(S){return i.removeAttr(S)}),this.updateStyle(),this.updateHighlight();var w=Nr(Nr({},g),n.getAttributes());(0,C.keys)(w).forEach(function(S){return w[S]===!1&&delete w[S]}),i.attr(w)},r.prototype.updateContent=function(){var t=this.model.get("content"),e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},r.prototype.prevDef=function(t){t.preventDefault()},r.prototype.updateScript=function(){var t=this.model,e=this.em;t.get("script")&&(e==null||e.Canvas.getCanvasView().updateScript(this))},r.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},r.prototype.getOffsetRect=function(){var t={},e=this.el,n=0,i=0,l=function(f){var d=f.offsetParent;d?(n+=d.offsetTop,i+=d.offsetLeft,l(d)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+i,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},r.prototype.isInViewport=function(t){var e,n=(t===void 0?{}:t).rect,i=this.el.ownerDocument,l=i.body,f=(e=i.defaultView)===null||e===void 0?void 0:e.frameElement,d=n||this.getOffsetRect(),v=d.top,g=d.left,w=this._getFrame().getOffsetRect();return v>=w.scrollTop&&g>=w.scrollLeft&&v<=w.scrollBottom&&g<=(f==null?void 0:f.offsetWidth)+l.scrollLeft},r.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var n=this.getOffsetRect();if(!this.isInViewport({rect:n})||t.force){var i=this.el;t.behavior!=="smooth"?(e=i.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,n.top):i.scrollIntoView(Nr({behavior:"smooth",block:"nearest"},t))}},r.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,Re.dL)(t,this.el),this.render()},r.prototype._setData=function(){var t=this.model,e=t.components();this.$el.data({model:t,collection:e,view:this})},r.prototype._getFrame=function(){var t;return(t=this.em)===null||t===void 0?void 0:t.get("Canvas").config.frameView},r.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new hi({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),i=0,l=n.length;i<l;i++)t.appendChild(n.shift())},r.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},r.prototype.onAttrUpdate=function(){},r.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,I.setViewEl)(this.el,this),this.postRender()),this},r.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},r.getEvents=function(){return(0,C.result)(this.prototype,"events")},r}(k.G7);const kn=Ir;var Fr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const gi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Fr(r,a),r.prototype.tagName=function(){return"div"},r}(kn);var Fs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vr=function(){return Vr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Vr.apply(this,arguments)};const Vs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Fs(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Vr(Vr({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return["td","th"].indexOf((0,I.toLowerCase)(t.tagName))>=0},r}(mn);var Ea=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Aa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ea(r,a),r}(kn);var $i=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Go=function(){return Go=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Go.apply(this,arguments)},qi="tr";const ja=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $i(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Go(Go({},a.prototype.defaults),{tagName:qi,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)===qi},r}(mn);var Ma=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const La=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ma(r,a),r}(kn);var Pl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),To=function(){return To=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},To.apply(this,arguments)},Gi="table";const Ki=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Pl(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return To(To({},a.prototype.defaults),{type:Gi,tagName:Gi,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("components");!n.length&&n.add({type:"tbody"})},r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)===Gi},r}(mn),io=kn.extend({events:{}});var kr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vi=function(){return vi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},vi.apply(this,arguments)},Yi="tbody";const Xi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return kr(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return vi(vi({},a.prototype.defaults),{type:Yi,tagName:Yi,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("components"),i=this.get("columns"),l=this.get("rows");if(!n.length){for(var f=[];l--;){for(var d=[],v=i;v--;)d.push({type:"cell",classes:["cell"]});f.push({type:"row",classes:["row"],components:d})}n.add(f)}},r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)===Yi},r}(mn);var ko=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yn=function(){return yn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},yn.apply(this,arguments)},Po="thead";const Rs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ko(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return yn(yn({},a.prototype.defaults),{type:Po,tagName:Po})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)===Po},r}(Xi);var Ko=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const mi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ko(r,a),r}(kn);var Hs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Da=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Hs(r,a),r}(kn);var Ji=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yo=function(){return Yo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Yo.apply(this,arguments)},yi="tfoot";const zs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ji(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Yo(Yo({},a.prototype.defaults),{type:yi,tagName:yi})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)===yi},r}(Xi);var Na=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Zi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Na(r,a),r}(kn);var El=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_=function(){return _=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_.apply(this,arguments)},A='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',q=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return El(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return _(_({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(A,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(A,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("attributes").src;n&&(0,I.buildBase64UrlFromSvg)((0,C.result)(this,"defaults").src)!==n&&this.set("src",n,{silent:!0})},r.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e="image-editor";if(t.Commands.has(e)){for(var n=!1,i=this.get("toolbar"),l=0;l<i.length;l++)if(i[l].command==="image-editor"){n=!0;break}n||(i.push({attributes:{class:"fa fa-pencil"},command:e}),this.set("toolbar",i))}}},r.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},r.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",n=e;return e&&e.substr(0,4)==="<svg"&&(n=(0,I.buildBase64UrlFromSvg)(e)),n},r.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,C.result)(this,"defaults").src;return t===e||t===(0,I.buildBase64UrlFromSvg)(e)},r.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),n=e.attributes;return n&&e.src===n.src&&delete e.src,e},r.prototype.parseUri=function(t){var e={};if((0,I.hasWin)())(e=document.createElement("a")).href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:function(n){n===void 0&&(n="");for(var i={},l=n.substring(1).split("&"),f=0;f<l.length;f++){var d=l[f].split("="),v=decodeURIComponent(d[0]);v&&(i[v]=decodeURIComponent(d[1]||""))}return i}(e.search)}},r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)==="img"},r}(mn);const Z=q;var mt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lt=function(){return lt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},lt.apply(this,arguments)},It=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return mt(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return lt(lt({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){this.get("src")?this.parseFromSrc():this.updateSrc(),a.prototype.initialize.call(this,t,e),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},r.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},r.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),n=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",n=n?"&t="+n:"";var i=this.get("mapUrl")+"?"+t+e+n;return i+="&output=embed"},r.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")).query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},r.isComponent=function(t){if((0,I.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},r}(Z);const $t=It;var je=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),He=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return je(r,a),r.prototype.tagName=function(){return"img"},r.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},r.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this.model,e=this.em,n=t.get("file");if(n&&e){var i=e.Assets.FileUploader();i==null||i.uploadFile({dataTransfer:{files:[n]}},function(l){var f=l&&l.data&&l.data[0],d=f&&((0,C.isString)(f)?f:f.src);d&&t.set({src:d})}),t.set("file","")}}},r.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},r.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,n=t.classEmpty,i=t.model,l=i.getSrcResult()&&!i.isDefaultSrc()?"remove":"add";e.classList[l](n)},r.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this.em,n=this.model,i=e==null?void 0:e.Assets;i&&n.get("editable")&&i.open({select:function(l,f){n.set({src:l.getSrc()}),f&&i.close()},target:n,types:["image"],accept:"image/*"})},r.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},r.prototype.onLoad=function(){this.em.trigger("change:canvasOffset")},r.prototype.noDrag=function(t){return t.preventDefault(),!1},r.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,e=this.model,n=t.attr("class")||"";return!e.get("src")&&t.attr("class","".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this},r}(kn);const cn=He;var Rr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Qi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Rr(r,a),r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},r.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},r.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},r.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},r}(cn);var Eo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hr=function(){return Hr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Hr.apply(this,arguments)};const Ao=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Eo(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Hr(Hr({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),r}(mn);var Vc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Us=function(){return Us=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Us.apply(this,arguments)},Rc="link",mp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Vc(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Us(Us({},a.prototype.defaults),{type:Rc,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){var n;if(e===void 0&&(e={}),(0,I.toLowerCase)(t.tagName)==="a"){var i=e.textTags||[];n={type:Rc,editable:!1};var l=t.childNodes;l.length||delete n.editable,(0,C.forEach)(l,function(f){var d=f.tagName;(f.nodeType==3&&f.textContent.trim()!==""||d&&i.indexOf((0,I.toLowerCase)(d))>=0)&&delete n.editable})}return n},r}(Ao);const yp=mp;var Hc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ia=function(){return Ia=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ia.apply(this,arguments)},ts=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Al=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},zc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Hc(r,a),r.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,C.bindAll)(this,"disableEditing","onDisable");var e=this.model,n=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=n==null?void 0:n.RichTextEditor},r.prototype.updateContentText=function(t,e,n){n===void 0&&(n={}),!n.fromDisable&&this.disableEditing()},r.prototype.canActivate=function(){var t,e=this,n=e.model,i=e.rteEnabled,l=e.em,f=(l==null?void 0:l.getEditing())===n,d=!0,v=!1;if((i||!n.get("editable")||f||(v=n.isChildOf("text")))&&(d=!1,v&&!n.get("textable"))){for(var g=n.parent();g&&!g.isInstanceOf("text");)g=g.parent();g&&g.get("editable")?t=g:d=!0}return{result:d,delegate:t}},r.prototype.onActive=function(t){var e,n;return ts(this,void 0,void 0,function(){var i,l,f,d,v,g,w,S;return Al(this,function(M){switch(M.label){case 0:if(l=(i=this).rte,f=i.em,d=this.canActivate(),v=d.result,g=d.delegate,!v)return g&&((e=t==null?void 0:t.stopPropagation)===null||e===void 0||e.call(t),f.setSelected(g),g.trigger("active",t)),[2];if((n=t==null?void 0:t.stopPropagation)===null||n===void 0||n.call(t),this.lastContent=this.getContent(),!l)return[3,4];M.label=1;case 1:return M.trys.push([1,3,,4]),w=this,[4,l.enable(this,this.activeRte,{event:t})];case 2:return w.activeRte=M.sent(),[3,4];case 3:return S=M.sent(),f.logError(S),[3,4];case 4:return this.toggleEvents(!0),[2]}})})},r.prototype.onDisable=function(){this.disableEditing()},r.prototype.disableEditing=function(t){return t===void 0&&(t={}),ts(this,void 0,void 0,function(){var e,n,i,l,f,d,v;return Al(this,function(g){switch(g.label){case 0:if(n=(e=this).model,i=e.rte,l=e.activeRte,f=e.em,d=n&&n.get("editable"),!i)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,i.disable(this,l)];case 2:return g.sent(),[3,4];case 3:return v=g.sent(),f.logError(v),[3,4];case 4:d&&this.getContent()!==this.lastContent&&(this.syncContent(t),this.lastContent=""),g.label=5;case 5:return this.toggleEvents(),[2]}})})},r.prototype.getContent=function(){var t=this.activeRte;return typeof(t==null?void 0:t.getContent)=="function"?t.getContent():this.getChildrenContainer().innerHTML},r.prototype.syncContent=function(t){t===void 0&&(t={});var e=this,n=e.model,i=e.rte;if(e.rteEnabled||t.force){var l=this.getContent(),f=n.components(),d=Ia({fromDisable:1},t);n.set("content","",d),i!=null&&i.customRte?(f.length&&f.reset(void 0,t),n.set("content",l,d)):f.resetFromString(l,t)}},r.prototype.insertComponent=function(t,e){var n;e===void 0&&(e={});var i=this.model,l=this.el.ownerDocument.getSelection();if(l!=null&&l.rangeCount){var f=l.getRangeAt(0),d=f.startContainer,v=f.startOffset,g=(0,I.getModel)(d),w=[];if(g&&((n=g.is)===null||n===void 0?void 0:n.call(g,"textnode"))){var S=g.collection;S.forEach(function(G){if(G===g){var tt="textnode",K=G.get("content")||"";w.push({type:tt,content:K.slice(0,v)}),w.push(t),w.push({type:tt,content:K.slice(v)})}else w.push(G)});var M=w.filter(Boolean),R=M.indexOf(t);return S.reset(M,e),S.at(R)}}return i.append(t,e)},r.prototype.onInput=function(){var t=this.em,e="component",n=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(n,this.model)},r.prototype.disablePropagation=function(t){t.stopPropagation()},r.prototype.toggleEvents=function(t){var e=this,n=e.em,i=e.model,l=e.$el,f={on:I.on,off:I.off},d=t?"on":"off";n.setEditing(!!t&&this),this.rteEnabled=!!t;var v=[this.el.ownerDocument,document];if(f.off(v,"mousedown",this.onDisable),f[d](v,"mousedown",this.onDisable),n[d]("toolbar:run:before",this.onDisable),i&&(i[d]("removed",this.onDisable),i.trigger("rte:".concat(t?"enable":"disable"))),l==null||l.off("mousedown",this.disablePropagation),l&&l[d]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var g=this.el;g;)g.draggable=!t,(g=g.parentNode)&&g.tagName=="BODY"&&(g=0)},r}(kn);const Fa=zc;var Va=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const jl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Va(r,a),r.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},r}(Fa);var Ra=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pr=function(){return Pr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Pr.apply(this,arguments)},Ha="label";const Ml=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ra(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Pr(Pr({},a.prototype.defaults),{type:Ha,tagName:Ha,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)===Ha},r}(Ao);var Ll=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Uc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ll(r,a),r.prototype.tagName=function(){return"span"},r}(jl);var Bc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),es=function(){return es=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},es.apply(this,arguments)},Dl="video",ns="yt",rs="vi",so="ytnc",Xo=function(a){return a&&a!=="0"},Nl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Bc(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return es(es({},a.prototype.defaults),{type:Dl,tagName:Dl,videoId:"",void:!1,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,poster:"",muted:0,autoplay:0,controls:1,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){this.em=e.em,this.get("src")&&this.parseFromSrc(),this.updateTraits(),this.listenTo(this,"change:provider",this.updateTraits),this.listenTo(this,"change:videoId change:provider",this.updateSrc),a.prototype.initialize.call(this,t,e)},r.prototype.updateTraits=function(){var t,e=this.em,n="iframe";switch(this.get("provider")){case ns:case so:t=this.getYoutubeTraits();break;case rs:t=this.getVimeoTraits();break;default:n="video",t=this.getSourceTraits()}this.set({tagName:n},{silent:!0}),this.set({traits:t}),e.get("ready")&&e.trigger("component:toggled")},r.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),n=e.query;switch(t){case ns:case so:case rs:this.set("videoId",e.pathname.split("/").pop()),n.list&&this.set("list",n.list),Xo(n.autoplay)&&this.set("autoplay",1),Xo(n.loop)&&this.set("loop",1),parseInt(n.controls)===0&&this.set("controls",0),Xo(n.color)&&this.set("color",n.color),n.rel==="0"&&this.set("rel",0),n.modestbranding==="1"&&this.set("modestbranding",1)}},r.prototype.updateSrc=function(){var t="";switch(this.get("provider")){case ns:t=this.getYoutubeSrc();break;case so:t=this.getYoutubeNoCookieSrc();break;case rs:t=this.getVimeoSrc()}this.set({src:t})},r.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case ns:case so:case rs:break;default:this.get("loop")&&(t.loop="loop"),this.get("autoplay")&&(t.autoplay="autoplay"),this.get("controls")&&(t.controls="controls")}return t},r.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:ns,name:"Youtube"},{value:so,name:"Youtube (no cookie)"},{value:rs,name:"Vimeo"}]}},r.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},r.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},r.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},r.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},r.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},r.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},r.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),n=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=n?"&list=".concat(n):"",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":""},r.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl"))},r.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):""},r.isComponent=function(t){var e=t.tagName,n=t.src,i=/youtube\.com\/embed/.test(n),l=/youtube-nocookie\.com\/embed/.test(n),f=/player\.vimeo\.com\/video/.test(n),d=i||l||f;if((0,I.toLowerCase)(e)==Dl||(0,I.toLowerCase)(e)=="iframe"&&d){var v={type:"video"};return n&&(v.src=n),d&&(i?v.provider=ns:l?v.provider=so:f&&(v.provider=rs)),v}},r}(Z);const Il=Nl;var Wc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Wc(r,a),r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(){kn.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],n=e.map(function(i){return"change:".concat(i)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,n,this.updateVideo)},r.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},r.prototype.updateSrc=function(){var t=this.model,e=this.videoEl;if(e){var n=t.get("provider"),i=t.get("src");switch(n){case"yt":i=t.getYoutubeSrc();break;case"ytnc":i=t.getYoutubeNoCookieSrc();break;case"vi":i=t.getVimeoSrc()}e.src=i}},r.prototype.updateVideo=function(){var t=this.model,e=this.videoEl;switch(t.get("provider")){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(e){var n=e;n.loop=t.get("loop"),n.autoplay=t.get("autoplay"),n.controls=t.get("controls"),n.poster=t.get("poster")}}},r.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},r.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},r.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},r.prototype.render=function(){kn.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},r}(cn);const bi=Fl;var wi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qn=function(){return Qn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Qn.apply(this,arguments)},ao="script";const Jo=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return wi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Qn(Qn({},a.prototype.defaults),{type:ao,tagName:ao,droppable:!1,draggable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t){if((0,I.toLowerCase)(t.tagName)==ao){var e={type:ao};return t.src&&(e.src=t.src,e.onload=t.onload),e}},r}(mn);var za=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return za(r,a),r.prototype.tagName=function(){return"script"},r.prototype.events=function(){return{}},r.prototype.render=function(){var t=this.model,e=this.em,n=t.get("src"),i=e&&e.get("scriptCount"),l=i||0,f="";if(n){var d=t.get("onload"),v="script".concat(l),g="script".concat(l+1),w="".concat(v,"Start"),S="".concat(g,"Start");f=`
        var `.concat(v,` = document.createElement('script');
        `).concat(v,`.onload = function() {
          `).concat(d?"".concat(d,`();
`):"",`
          typeof `).concat(S," == 'function' && ").concat(S,`();
        };
        `).concat(v,".src = '").concat(n,`';
        function `).concat(w,"() { document.body.appendChild(").concat(v,`); };
        `).concat(l?"":"".concat(w,"();"),`
      `),e&&e.set("scriptCount",l+1)}else f=t.__innerHTML();return this.el.innerHTML=f,this.postRender(),this},r}(cn);const $c=bp;var Bs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ws=function(){return Ws=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ws.apply(this,arguments)},$s="svg";const qs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Bs(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Ws(Ws({},a.prototype.defaults),{type:$s,tagName:$s,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),r.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)===$s},r}(mn);var wp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),os=function(){return os=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},os.apply(this,arguments)};const qc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return wp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return os(os({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},r}(qs);var Vl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Vl(r,a),r.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},r}(kn);const _i=Rl;var Ua=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gs=function(){return Gs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Gs.apply(this,arguments)};const Ks=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ua(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Gs(Gs({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){var t=this.parent(),e=this.get("content");return t!=null&&t.is("script")?e:this.__escapeContent(e)},r.prototype.__escapeContent=function(t){return(0,I.escapeNodeContent)(t)},r.isComponent=function(t){if(t.nodeType===3)return{type:"textnode",content:t.textContent}},r}(mn);var _p=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hl=function(){return Hl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Hl.apply(this,arguments)};const xp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return _p(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Hl({},a.prototype.defaults)},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){return"<!--".concat(this.get("content"),"-->")},r.isComponent=function(t){if(t.nodeType==8)return{tagName:"NULL",type:"comment",content:t.textContent}},r}(Ks);var zl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ba=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return zl(r,a),r.prototype._setAttributes=function(){},r.prototype.renderAttributes=function(){},r.prototype.updateStatus=function(){},r.prototype.updateClasses=function(){},r.prototype.setAttribute=function(){},r.prototype.updateAttributes=function(){},r.prototype.initClasses=function(){},r.prototype.initComponents=function(){},r.prototype.delegateEvents=function(){return this},r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=this.el;return t.opt.temporary||(e.textContent=t.get("content")),this},r}(kn);var is=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ys=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return is(r,a),r.prototype._createElement=function(){return document.createComment(this.model.get("content"))},r}(Ba);var Cp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xi=function(){return xi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xi.apply(this,arguments)};const Gc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Cp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return xi(xi({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),r.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},r.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},r.isComponent=function(){return!1},r}(mn);var Xs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Js=function(){return Js=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Js.apply(this,arguments)},jo="iframe";const Zs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Xs(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Js(Js({},a.prototype.defaults),{type:jo,tagName:jo,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,I.toLowerCase)(t.tagName)===jo},r}(mn);var Ci=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Qs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ci(r,a),r.prototype.tagName=function(){return"div"},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},r.prototype.updateSrc=function(){var t=(0,Re.sE)(this.el,"iframe")[0];t&&(0,Re.FW)(t,{src:this.__getSrc()})},r.prototype.render=function(){a.prototype.render.call(this);var t=(0,Re.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},r.prototype.__getSrc=function(){return this.model.getAttributes().src||""},r}(kn);var ss=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zr=function(){return zr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},zr.apply(this,arguments)},Kc=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Yc=function(a){function r(t){var e=a.call(this,t,"DomComponents",new Wo(void 0,{em:t}))||this;for(var n in e.componentTypes=[{id:"cell",model:Vs,view:Aa},{id:"row",model:ja,view:La},{id:"table",model:Ki,view:io},{id:"thead",model:Rs,view:mi},{id:"tbody",model:Xi,view:Da},{id:"tfoot",model:zs,view:Zi},{id:"map",model:$t,view:Qi},{id:"link",model:yp,view:jl},{id:"label",model:Ml,view:Uc},{id:"video",model:Il,view:bi},{id:"image",model:Z,view:cn},{id:"script",model:Jo,view:$c},{id:"svg-in",model:qc,view:_i},{id:"svg",model:qs,view:_i},{id:"iframe",model:Zs,view:Qs},{id:"comment",model:xp,view:Ys},{id:"textnode",model:Ks,view:Ba},{id:"text",model:Ao,view:Fa},{id:"wrapper",model:Gc,view:gi},{id:"default",model:mn,view:kn}],e.componentsById={},e.Component=mn,e.Components=Wo,e.ComponentsView=hi,e.storageKey="components",t&&(e.config.components=t.config.components||e.config.components),T)n in e.config||(e.config[n]=T[n]);var i=e.config.pStylePrefix;if(i&&(e.config.stylePrefix=i+e.config.stylePrefix),t){e.config.modal=t.Modal||"",e.config.am=t.Assets||"",t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var l=t.get("selected");t.listenTo(l,"add",function(f,d,v){return e.selectAdd(l.getComponent(f),v)}),t.listenTo(l,"remove",function(f,d,v){return e.selectRemove(l.getComponent(f),v)})}return e}return ss(r,a),r.prototype.load=function(t){var e=this;return this.loadProjectData(t,{onResult:function(n){var i=e.getWrapper();if(i||(e.em.Pages.add({},{select:!0}),i=e.getWrapper()),(0,C.isArray)(n))n.length&&i.components(n);else{var l=n.components,f=l===void 0?[]:l,d=Kc(n,["components"]);i.set(d),i.components(f)}}})},r.prototype.store=function(){return{}},r.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},r.prototype.getWrapper=function(){return this.getComponent()},r.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.get("components")},r.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},r.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(n){return n.remove(t)}),this},r.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},r.prototype.addType=function(t,e){var n=this.em,i=e.model,l=i===void 0?{}:i,f=e.view,d=f===void 0?{}:f,v=e.isComponent,g=e.extend,w=e.extendView,S=e.extendFn,M=S===void 0?[]:S,R=e.extendFnView,G=R===void 0?[]:R,tt=this.getType(t),K=this.getType(g),kt=this.getType(w),Ft=K||tt||this.getType("default"),ae=Ft.model,me=kt?kt.view:Ft.view,Me=function(wn,Er,qr){return wn.reduce(function(Gr,no){var Kr=Er[no],oi=qr.prototype[no];return Kr&&oi&&(Gr[no]=function(){for(var Fi=[],_a=0;_a<arguments.length;_a++)Fi[_a]=arguments[_a];oi.bind(this).apply(void 0,Fi),Kr.bind(this).apply(void 0,Fi)}),Gr},{})};if(typeof l=="object"){var Ve=(0,C.result)(l,"defaults");delete l.defaults,e.model=ae.extend(zr(zr({},l),Me(M,l,ae)),{isComponent:!tt||K||v?v||function(){return 0}:ae.isComponent}),Object.defineProperty(e.model.prototype,"defaults",{value:zr(zr({},(0,C.result)(ae.prototype,"defaults")||{}),Ve||{})})}typeof d=="object"&&(e.view=me.extend(zr(zr({},d),Me(G,d,me)))),tt?(tt.model=e.model,tt.view=e.view):(e.id=t,this.componentTypes.unshift(e));var Ze="component:type:".concat(tt?"update":"add");return n==null||n.trigger(Ze,tt||e),this},r.prototype.getType=function(t){for(var e=this.componentTypes,n=0;n<e.length;n++)if(e[n].id==t)return e[n]},r.prototype.removeType=function(t){var e=this.componentTypes,n=this.getType(t);if(n){var i=e.indexOf(n);return e.splice(i,1),n}},r.prototype.getTypes=function(){return this.componentTypes},r.prototype.selectAdd=function(t,e){var n=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(i){return n.em.trigger(i,t,e)}))},r.prototype.selectRemove=function(t,e){var n=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(i){return n.em.trigger(i,t,e)}))},r.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),n=t.previous("componentHovered"),i="hovered";n&&n.get("status")==i&&n.set({status:"",state:""}),e&&(0,C.isEmpty)(e.get("status"))&&e.set("status",i)},r.prototype.getShallowWrapper=function(){var t=this.shallow,e=this.em;if(!t&&e){var n=e.shallow;if(!n)return;var i=n.Components;if(i.componentTypes=this.componentTypes,t=i.getWrapper()){var l=[qo,Dr].join(" ");t.on(l,(0,C.debounce)(function(){return t==null?void 0:t.components("")},100))}this.shallow=t}return t},r.prototype.canMove=function(t,e,n){var i=n||n===0?n:null,l={result:!1,reason:0,target:t,source:null};if(!e||!t)return l;var f=e.toHTML?e:null;if(!f){var d=this.getShallowWrapper();f=(d==null?void 0:d.append(e)[0])||null}if(l.source=f,!f)return l;var v=f.get("draggable");if((0,C.isFunction)(v))v=!!v(f,t,i);else{var g=t.getEl();v=(0,C.isArray)(v)?v.join(","):v,v=(0,C.isString)(v)?g==null?void 0:g.matches(v):v}if(!v)return zr(zr({},l),{reason:1});var w=t.get("droppable");(0,C.isFunction)(w)?w=!!w(f,t,i):w===!1&&t.isInstanceOf("text")&&f.get("textable")?w=!0:(g=f.getEl(),w=(0,C.isArray)(w)?w.join(","):w,w=(0,C.isString)(w)?g==null?void 0:g.matches(w):w);var S=[t].concat(t.parents()).indexOf(f)>-1;return zr(zr({},l),!w||S?{reason:2}:{result:!0})},r.prototype.allById=function(){return this.componentsById},r.prototype.getById=function(t){return this.componentsById[t]||null},r.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(n){return e[n]&&e[n].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(n){return{}})},r}(Dt);const Sp=Yc,Si={stylePrefix:"css-",rules:[]};var Oi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Op=Number.MAX_VALUE,Tp=function(a){function r(){var t=a.call(this)||this;return(0,C.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return Oi(r,a),r.prototype.buildFromModel=function(t,e){var n=this;e===void 0&&(e={});var i="",l=this.em,f=l&&l.getConfig().avoidInlineStyle,d=t.styleToString(),v=t.classes;return this.ids.push("#".concat(t.getId())),v.forEach(function(g){return n.compCls.push(g.getFullName())}),!f&&d&&(i="#".concat(t.getId(),"{").concat(d,"}")),t.components().forEach(function(g){return i+=n.buildFromModel(g,e)}),i},r.prototype.build=function(t,e){var n=this;e===void 0&&(e={});var i=e.json,l=e.em,f=e.cssc||(l==null?void 0:l.Css);this.em=l,this.compCls=[],this.ids=[],this.model=t;var d=[],v=t?this.buildFromModel(t,e):"",g=(0,C.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(f){var w=e.rules||f.getAll(),S={},M=[];e.onlyMatched&&t&&(0,I.hasWin)()&&(w=this.matchedRules(t,w)),w.forEach(function(R){var G=R.getAtRule();if(G){var tt=S[G];tt?tt.push(R):S[G]=[R]}else{var K=n.buildFromRule(R,M,e);i?d.push(K):v+=K}}),this.sortMediaObject(S).forEach(function(R){var G="",tt=R.key;R.value.forEach(function(K){var kt=n.buildFromRule(K,M,e);K.get("singleAtRule")?v+="".concat(tt,"{").concat(kt,"}"):G+=kt,i&&d.push(kt)}),G&&(v+="".concat(tt,"{").concat(G,"}"))}),l&&g&&w.remove&&w.remove(M)}return i?d.filter(function(R){return R}):v},r.prototype.buildFromRule=function(t,e,n){var i,l=this;n===void 0&&(n={});var f,d="",v=this.model,g=t.selectorsToString({skipAdd:1}),w=t.get("selectorsAdd"),S=t.get("singleAtRule");if((i=t.get("selectors"))===null||i===void 0||i.forEach(function(R){var G=R.getFullName();(l.compCls.indexOf(G)>=0||l.ids.indexOf(G)>=0||n.keepUnusedStyles)&&(f=1)}),g&&f||w||S||!v){var M=t.getDeclaration({body:1});M&&(n.json?d=t:d+=M)}else e.push(t);return d},r.prototype.matchedRules=function(t,e){var n=this,i=t.getEl(),l=[];return e.forEach(function(f){try{f.selectorsToString().split(",").some(function(d){return i==null?void 0:i.matches(n.__cleanSelector(d))})&&l.push(f)}catch{}}),t.components().forEach(function(f){l=l.concat(n.matchedRules(f,e))}),l=l.filter(function(f,d){return l.indexOf(f)===d})},r.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):Op},r.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var n=[];return(0,C.each)(t,function(i,l){return n.push({key:l,value:i})}),n.sort(function(i,l){var f=[i.key,l.key].every(function(g){return g.indexOf("min-width")!==-1}),d=f?i.key:l.key,v=f?l.key:i.key;return e.getQueryLength(d)-e.getQueryLength(v)})},r.prototype.sortRules=function(t,e){var n=function(d){return d.get("mediaText")||""},i=[n(t),n(e)].every(function(d){return d.indexOf("min-width")!==-1}),l=n(i?t:e),f=n(i?e:t);return this.getQueryLength(l)-this.getQueryLength(f)},r.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},r}(k.Hn);const kp=Tp;var Pp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ta=function(){return ta=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ta.apply(this,arguments)},Ep=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},fr=((0,I.hasWin)()?window:{}).CSS,Gn=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this;return n.config=t||{},n.opt=e,n.em=e.em,n.ensureSelectors(null,null,{}),n.on("change",n.__onChange),n}return Pp(r,a),r.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},r.prototype.__onChange=function(t,e){var n=this.em,i=this.changedAttributes();i&&!(0,I.isEmptyObj)(i)&&(n==null||n.changesUp(e))},r.prototype.clone=function(){var t=ta({},this.opt),e=ta({},this.attributes);return e.selectors=this.get("selectors").map(function(n){return n.clone()}),new this.constructor(e,t)},r.prototype.ensureSelectors=function(t,e,n){var i=this.em,l=i==null?void 0:i.get("SelectorManager"),f=[this,"change:selectors",this.ensureSelectors],d=this.getSelectors();if(this.stopListening.apply(this,f),d.models&&(d=Ep([],d.models,!0)),d=(0,C.isString)(d)?[d]:d,Array.isArray(d)){var v=d.filter(function(g){return g}).map(function(g){return l?l.add(g):g});d=new Sr(v)}this.set("selectors",d,n),this.listenTo.apply(this,f)},r.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),n=t?"@".concat(t):e?"@media":"";return n+(e&&n?" ".concat(e):"")},r.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],n=this.get("state"),i=this.get("selectorsAdd"),l={escape:function(v){return fr&&fr.escape?fr.escape(v):v}},f=this.get("selectors").getFullString(0,l),d=n&&!t.skipState?":".concat(n):"";return f&&e.push("".concat(f).concat(d)),i&&!t.skipAdd&&e.push(i),e.join(", ")},r.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",n=this.attributes.important,i=this.selectorsToString(t),l=this.styleToString(ta({important:n},t)),f=this.get("singleAtRule");return(i||f)&&(l||t.allowEmpty)&&(e=f?l:"".concat(i,"{").concat(l,"}")),e},r.prototype.getDevice=function(){var t=this.em,e=this.attributes,n=e.atRuleType,i=e.mediaText,l=(t==null?void 0:t.get("DeviceManager").getDevices())||[],f=l.filter(function(d){return d.getWidthMedia()===""})[0];return n==="media"&&i?l.filter(function(d){return d.getWidthMedia()===((v=/(-?\d*\.?\d+)\w{0,}/.exec(i))?v[0]:"");var v})[0]||null:f||null},r.prototype.getState=function(){var t=this.em,e=this.get("state");return((t==null?void 0:t.get("SelectorManager").getStates())||[]).filter(function(n){return n.getName()===e})[0]||null},r.prototype.getComponent=function(){var t,e=this.getSelectors(),n=e.length==1&&e.at(0),i=n&&n.isId()&&n.get("name");return i&&((t=this.em)===null||t===void 0?void 0:t.get("DomComponents").getById(i))||null},r.prototype.toCSS=function(t){t===void 0&&(t={});var e="",n=this.getAtRule(),i=this.getDeclaration(t);return(i||t.allowEmpty)&&(e=i),n&&e&&(e="".concat(n,"{").concat(e,"}")),e},r.prototype.toJSON=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=k.Hn.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,C.forEach)(l,function(f,d){i[d]===f&&delete i[d]}),delete i.style.__p,(0,C.isEmpty)(i.selectors)&&delete i.selectors,(0,C.isEmpty)(i.style)&&delete i.style}return i},r.prototype.compare=function(t,e,n,i){var l;i===void 0&&(i={});var f=e||"",d=n||"",v=i.selectorsAdd||"",g=i.atRuleType||"";d&&!g&&(g="media");var w=((0,C.isArray)(t)||t.models?t.models||t:[t]).map(function(G){return G.getFullName()}),S=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(G){return G.getFullName()}),M=w.slice().sort(),R=S.slice().sort();return!(w.length!==S.length||!M.every(function(G,tt){return G===R[tt]}))&&this.get("state")===f&&this.get("mediaText")===d&&this.get("selectorsAdd")===v&&this.get("atRuleType")===g},r}(xr);const ir=Gn;var Kn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),as=function(a){function r(t,e){var n=a.call(this,t)||this;return n.editor=e==null?void 0:e.em,setTimeout(function(){n.on("remove",n.onRemove),n.on("add",n.onAdd)}),n}return Kn(r,a),r.prototype.toJSON=function(t){return k.FE.prototype.toJSON.call(this,t).filter(function(e){return e.style&&!e.shallow})},r.prototype.onAdd=function(t,e,n){t.ensureSelectors(t,e,n)},r.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},r.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,k.FE.prototype.add.apply(this,[t,e])},r}(k.FE);const Ap=as;as.prototype.model=ir;var Wa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ti=function(){return Ti=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ti.apply(this,arguments)},jp=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Mp=function(a){function r(t){var e=a.call(this,t,"CssComposer",null,{},Si)||this;e.Selectors=Sr,e.storageKey="styles";var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),n.rules=e.em.config.style||n.rules||"",e.rules=new Ap([],n),e}return Wa(r,a),r.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},r.prototype.postLoad=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");e&&e.add(this.getAll())},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},r.prototype.add=function(t,e,n,i,l){i===void 0&&(i={}),l===void 0&&(l={});var f=e||"",d=n||"",v=Ti({},i),g=this.get(t,f,d,v);return g&&g.config&&!g.config.singleAtRule||(v.state=f,v.mediaText=d,v.selectors=[],d&&!v.atRuleType&&(v.atRuleType="media"),(g=new ir(v,this.config)).get("selectors").add(t,l),this.rules.add(g,l)),g},r.prototype.get=function(t,e,n,i){var l=t;if((0,C.isString)(t)){var f=this.em.Selectors,d=t.split(",")[0].trim(),v=this.em.Parser.parserCss.checkNode({selectors:d})[0];l=f.get(v.selectors)}return this.rules.find(function(g){return g.compare(l,e,n,i)})||null},r.prototype.getAll=function(){return this.rules},r.prototype.addCollection=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=this.em,l=[];(0,C.isString)(t)&&(t=i.Parser.parseCss(t));for(var f=t instanceof Array?t:[t],d=0,v=f.length;d<v;d++){var g=f[d]||{};if(g.selectors){var w=i==null?void 0:i.Selectors;w||console.warn("Selector Manager not found");for(var S=g.selectors,M=S instanceof Array?S:[S],R=[],G=0,tt=M.length;G<tt;G++){var K=w.add(M[G]);R.push(K)}var kt=this.get(R,g.state,g.mediaText,g),Ft=this.add(R,g.state,g.mediaText,g,e),ae=!kt||!e.avoidUpdateStyle,me=g.style||{};if((0,I.isObject)(n)&&Ft.set(n,e),ae){var Me=e.extend?Ti(Ti({},Ft.get("style")),me):me;Ft.set("style",Me,e)}l.push(Ft)}}return l},r.prototype.addRules=function(t){return this.addCollection(t)},r.prototype.setRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.atRuleType,l=n.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],d=f.state,v=f.selectorsAdd,g=this.em.Selectors.add(f.selectors),w=this.add(g,d,l,{selectorsAdd:v,atRule:i});return w.setStyle(e,n),w},r.prototype.getRule=function(t,e){e===void 0&&(e={});var n=this.em,i=n.Selectors,l=n.Parser.parserCss.checkNode({selectors:t})[0],f=i.get(l.selectors),d=l.state,v=l.selectorsAdd,g=e.atRuleType,w=e.atRuleParams;return f?this.get(f,d,w,{selectorsAdd:v,atRuleType:g}):void 0},r.prototype.getRules=function(t){var e=this.getAll();if(!t)return jp([],e.models,!0);var n={sort:!0},i=(0,C.isString)(t)?t.split(",").map(function(l){return l.trim()}):t;return e.filter(function(l){return i.indexOf(l.getSelectors().getFullString(null,n))>=0})},r.prototype.setIdRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.addOpts,l=i===void 0?{}:i,f=n.mediaText,d=n.state||"",v=(0,C.isUndefined)(f)?this.em.getCurrentMedia():f,g=this.em.Selectors.add({name:t,type:Jn.TYPE_ID},l),w=this.add(g,d,v,{},l);return w.setStyle(e,Ti(Ti({},n),l)),w},r.prototype.getIdRule=function(t,e){e===void 0&&(e={});var n=e.mediaText,i=e.state||"",l=(0,C.isUndefined)(n)?this.em.getCurrentMedia():n,f=this.em.Selectors.get(t,Jn.TYPE_ID);return f&&this.get(f,i,l)},r.prototype.setClassRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.state||"",l=n.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors.add({name:t,type:Jn.TYPE_CLASS}),d=this.add(f,i,l);return d.setStyle(e,n),d},r.prototype.getClassRule=function(t,e){e===void 0&&(e={});var n=e.state||"",i=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,Jn.TYPE_CLASS);return l&&this.get(l,n,i)},r.prototype.remove=function(t,e){var n=(0,C.isString)(t)?this.getRules(t):t,i=this.getAll().remove(n,e);return(0,C.isArray)(i)?i:[i]},r.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},r.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var n=e.state,i=e.mediaText;e.current&&(n=this.em.get("state")||"",i=this.em.getCurrentMedia());var l=t.getId();return this.getAll().filter(function(f){return!(!(0,C.isUndefined)(n)&&f.get("state")!==n)&&!(!(0,C.isUndefined)(i)&&f.get("mediaText")!==i)&&f.getSelectorsString()==="#".concat(l)})},r.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new Vo({collection:this.rules,config:this.config}),this.rulesView.render().el},r.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},r}(Dt);const Ul=Mp,Xc={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};var Bl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Jc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Bl(r,a),r.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},r.prototype.getId=function(){return this.id},r.prototype.getLabel=function(){return this.get("label")},r.prototype.getMedia=function(){return this.get("media")},r.prototype.getContent=function(){return this.get("content")},r.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,C.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},r}(k.Hn);var Wl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$a=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Wl(r,a),r}(k.FE);const ea=$a;$a.prototype.model=Jc;var Zc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const qa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zc(r,a),r.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},r}(k.Hn);var Qc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ls=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Qc(r,a),r}(k.FE);const tu=ls;ls.prototype.model=qa;var Ga=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mo=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,i=n.model;return n.em=e.em,n.config=e,n.endDrag=n.endDrag.bind(n),n.ppfx=e.pStylePrefix||"",n.listenTo(i,"destroy remove",n.remove),n.listenTo(i,"change",n.render),n}return Ga(r,a),r.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.handleClick=function(t){var e=this,n=e.config,i=e.model,l=e.em,f=i.get("onClick")||n.appendOnClick;if(l.trigger("block:click",i,t),f){if((0,C.isFunction)(f))return f(i,l==null?void 0:l.getEditor(),{event:t});var d,v,g=n.getSorter(),w=i.get("content"),S=l.getSelected();if(g.setDropContent(w),S)if(g.validTarget(S.getEl(),w).valid)d=S;else{var M=S.parent();M&&g.validTarget(M.getEl(),w).valid&&(d=M,v=M.components().indexOf(S)+1)}if(!d){var R=l.getWrapper();g.validTarget(R.getEl(),w).valid&&(d=R)}var G=d&&d.append(w,{at:v})[0];G&&l.setSelected(G,{scroll:1})}},r.prototype.startDrag=function(t){var e=this,n=e.config,i=e.em,l=e.model,f=l.get("disable");if(t.button===0&&n.getSorter&&!this.el.draggable&&!f){i.refreshCanvas();var d=n.getSorter();d.__currentBlock=l,d.setDragHelper(this.el,t),d.setDropContent(this.model.get("content")),d.startSort(this.el),(0,I.on)(document,"mouseup",this.endDrag)}},r.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},r.prototype.handleDrag=function(t){this.__getModule().__drag(t)},r.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},r.prototype.endDrag=function(){(0,I.off)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},r.prototype.render=function(){var t,e=this,n=e.em,i=e.el,l=e.$el,f=e.ppfx,d=e.model,v=d.get("disable"),g=d.get("attributes")||{},w=g.class||"",S="".concat(f,"block"),M=n&&n.t("blockManager.labels.".concat(d.id))||d.get("label"),R=d.get("render"),G=d.get("media"),tt=v?"".concat(S,"--disable"):"".concat(f,"four-color-h");l.attr(g),i.className="".concat(w," ").concat(S," ").concat(f,"one-bg ").concat(tt).trim(),i.innerHTML=`
      `.concat(G?'<div class="'.concat(S,'__media">').concat(G,"</div>"):"",`
      <div class="`).concat(S,'-label">').concat(M,`</div>
    `),i.title=g.title||((t=i.textContent)===null||t===void 0?void 0:t.trim()),i.setAttribute("draggable","".concat(!(!(0,I.hasDnd)(n)||v)));var K=R&&R({el:i,model:d,className:S,prefix:f});return K&&(i.innerHTML=K),this},r}(k.G7);const eu=Mo;var Lp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nu=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Ur=function(a){function r(t,e){var n=a.call(this,t)||this;n.config=e;var i=e.pStylePrefix||"";return n.em=e.em,n.pfx=i,n.caretR="fa fa-caret-right",n.caretD="fa fa-caret-down",n.iconClass="".concat(i,"caret-icon"),n.activeClass="".concat(i,"open"),n.className="".concat(i,"block-category"),n.listenTo(n.model,"change:open",n.updateVisibility),n.model.view=n,n}return Lp(r,a),r.prototype.events=function(){return{"click [data-title]":"toggle"}},r.prototype.template=function(t){var e=t.pfx,n=t.label;return rt(Qr||(Qr=nu([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `])),e,e,n,e)},r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},r.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},r.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},r.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},r.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.pfx,"blocks-c"))),this.blocksEl},r.prototype.append=function(t){this.getBlocksEl().appendChild(t)},r.prototype.render=function(){var t=this,e=t.em,n=t.el,i=t.$el,l=t.model,f=t.pfx,d=e.t("blockManager.categories.".concat(l.id))||l.get("label");return n.innerHTML=this.template({pfx:f,label:d}),i.addClass(this.className),i.css({order:l.get("order")}),this.updateVisibility(),this},r}(k.G7);const tn=Ur;var Qr,Zo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),lo=function(){return lo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},lo.apply(this,arguments)},ru=function(a){function r(t,e){var n=a.call(this,t)||this;(0,C.bindAll)(n,"getSorter","onDrag","onDrop","onMove"),n.config=e||{},n.categories=t.categories||"",n.renderedCategories={};var i=n.config.pStylePrefix||"";n.ppfx=i,n.noCatClass="".concat(i,"blocks-no-cat"),n.blockContClass="".concat(i,"blocks-c"),n.catsClass="".concat(i,"block-categories");var l=n.collection;return n.listenTo(l,"add",n.addTo),n.listenTo(l,"reset",n.render),n.em=n.config.em,n.em&&(n.config.getSorter=n.getSorter),n}return Zo(r,a),r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=lo(lo({},this.config),t)},r.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,n=t.Canvas;this.sorter=new e.Sorter({container:n.getBody(),placer:n.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:n.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},r.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},r.prototype.onMove=function(t){this.__getModule().__drag(t),this.em.trigger("block:drag:move",t)},r.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},r.prototype.addTo=function(t){this.add(t)},r.prototype.add=function(t,e){var n=this.config,i=new eu({model:t,attributes:t.get("attributes")},n).render().el,l=t.get("category");if(l&&this.categories&&!n.ignoreCategories){(0,C.isString)(l)?l={id:l,label:l}:(0,C.isObject)(l)&&!l.id&&(l.id=l.label);var f=this.categories.add(l),d=f.get("id"),v=this.getCategoriesEl(),g=this.renderedCategories[d];return t.set("category",f,{silent:!0}),!g&&v&&(g=new tn({model:f},n).render(),this.renderedCategories[d]=g,v.appendChild(g.el)),void(g&&g.append(i))}e?e.appendChild(i):this.append(i)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},r.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},r.prototype.render=function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories={},this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,n)}),this.append(n);var i="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(i),this.rendered=!0,this},r}(k.G7);const Ka=ru;var ou=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qo=function(){return Qo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Qo.apply(this,arguments)},Ya="block",Lo="".concat(Ya,":"),iu="".concat(Lo,"add"),$l="".concat(Lo,"update"),Do="".concat(Lo,"remove"),su="".concat(Do,":before"),Xa="".concat(Lo,"drag"),Dp={all:Ya,update:$l,add:iu,remove:Do,removeBefore:su,drag:Xa,dragStart:"".concat(Xa,":start"),dragEnd:"".concat(Xa,":stop"),custom:"".concat(Lo,"custom")},Ja=function(a){function r(t){var e,n=this;return(n=a.call(this,t,"BlockManager",new ea(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[]),Dp,Xc)||this).Block=Jc,n.Blocks=ea,n.Category=qa,n.Categories=tu,n.storageKey="",n.blocks=n.all,n.blocksVisible=new ea(n.blocks.models),n.categories=new tu,n.blocks.on("add",function(i){return n.blocksVisible.add(i)}),n.blocks.on("remove",function(i){return n.blocksVisible.remove(i)}),n.blocks.on("reset",function(i){return n.blocksVisible.reset(i.models)}),n}return ou(r,a),r.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(n,i){return t.startDrag(n,i)},drag:function(n){return t.__drag(n)},dragStop:function(n){return t.endDrag(n)}}},r.prototype.__startDrag=function(t,e){var n=this,i=n.em,l=n.events,f=n.blocks,d=t.getContent?t.getContent():t;this._dragBlock=t,i.set({dragResult:null,dragContent:d}),[i,f].map(function(v){return v.trigger(l.dragStart,t,e)})},r.prototype.__drag=function(t){var e=this,n=e.em,i=e.events,l=e.blocks,f=this._dragBlock;[n,l].map(function(d){return d.trigger(i.drag,f,t)})},r.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,n=e.em,i=e.events,l=e.blocks,f=this._dragBlock,d=t.component||n.get("dragResult");if(delete this._dragBlock,d&&f){var v="activeOnRender",g=d.get&&d.get(v),w=f.get("activate")||g,S=f.get("select"),M=(0,C.isArray)(d)?d[0]:d;(S||w&&S!==!1)&&n.setSelected(M),w&&(M.trigger("active"),g&&M.unset(v)),f.get("resetId")&&M.onAll(function(R){return R.resetId()})}n.set({dragResult:null,dragContent:null}),f&&[n,l].map(function(R){return R.trigger(i.dragEnd,d,f)})},r.prototype.__getFrameViews=function(){return this.em.get("Canvas").getFrames().map(function(t){return t.view})},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=Qo(Qo({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(){return this._bhv||{}},r.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(n){return n.droppable.startCustom()})},r.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){return e.droppable.endCustom(t)}),this.__endDrag()},r.prototype.postRender=function(){var t=this,e=t.categories,n=t.config,i=t.em,l=this.blocksVisible;this.blocksView=new Ka({collection:l,categories:e},Qo(Qo({},n),{em:i})),this.__appendTo(l.models),this.__trgCustom()},r.prototype.add=function(t,e,n){n===void 0&&(n={});var i=e||{};return i.id=t,this.blocks.add(i,n)},r.prototype.get=function(t){return this.blocks.get(t)},r.prototype.getAll=function(){return this.blocks},r.prototype.getAllVisible=function(){return this.blocksVisible},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getCategories=function(){return this.categories},r.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},r.prototype.render=function(t,e){e===void 0&&(e={});var n=this,i=n.categories,l=n.config,f=n.em,d=t||this.getAll().models;if(e.external){var v=new ea(d);return new Ka({collection:v,categories:i},Qo(Qo({em:f},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(d),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},r.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(n){return n.stopListening()}),e.map(function(n){return n.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},r}(Dt);const ql=Ja,au={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};var Np=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Np(r,a),r.prototype.defaults=function(){return{name:"",label:""}},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(){return this.get("label")||this.getName()},r}(k.Hn);const Kl=Gl;Gl.prototype.idAttribute="name";var Ip=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Za=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Yl="contentEditable",Fp=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.config||{};return e.config=n,e.module=t.module,e.coll=t.coll||null,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return Ip(r,a),r.prototype.template=function(){var t=this,e=t.pfx,n=t.model,i=t.config,l=n.get("label")||"";return rt(Xl||(Xl=Za([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,i.iconTagRemove)},r.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},r.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},r.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[Yl]="true",e.focus(),t==null||t.setEditing(!0)},r.prototype.endEditTag=function(){var t=this.model,e=this.getInputEl(),n=e.textContent||"",i=this.em,l=i==null?void 0:i.Selectors;if(e[Yl]="false",i==null||i.setEditing(!1),l){var f=l.escapeName(n);l.get(f)?e.innerText=t.get("label"):t.set({name:f,label:n})}},r.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.get("active"))},r.prototype.removeTag=function(){this.module.removeSelected(this.model)},r.prototype.updateStatus=function(){var t=this,e=t.model,n=t.$el,i=t.config,l=i.iconTagOn,f=i.iconTagOff,d=n.find("[data-tag-status]");e.get("active")?(d.html(l),n.removeClass("opac50")):(d.html(f),n.addClass("opac50"))},r.prototype.render=function(){var t=this.pfx,e=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(t,"tag ").concat(e,"three-bg")),this.updateStatus(),this},r}(k.G7);const Vp=Fp;var Xl,cs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ki=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Qa=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var n=e.config.em,i=e.collection;e.target=n;var l=n.Selectors;return e.module=l,e.em=n,e.componentChanged=(0,C.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,C.debounce)(e.checkSync.bind(e),0),e.listenTo(n,"component:toggled component:update:classes",e.componentChanged),e.listenTo(n,"styleManager:update",e.componentChanged),e.listenTo(n,"component:update:classes change:state",e.__handleStateChange),e.listenTo(n,"styleable:change change:device",e.checkSync),e.listenTo(i,"add",e.addNew),e.listenTo(i,"reset",e.renderClasses),e.listenTo(i,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,C.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return cs(r,a),r.prototype.template=function(t){var e=t.labelInfo,n=t.labelHead,i=t.iconSync,l=t.iconAdd,f=t.pfx,d=t.ppfx;return rt(tl||(tl=ki([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),f,f,f,f,n,f,f,f,d,d,d,f,d,d,f,d,f,f,f,f,f,l,f,f,i,f,f,e,f)},r.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},r.prototype.syncStyle=function(){var t,e=this.em,n=this.getTarget(),i=e.Css,l=this.getCommonSelectors({opts:{noDisabled:1}}),f=e.get("state"),d=e.getCurrentMedia(),v=[],g=i.get(l,f,d)||i.add(l,f,d);this.getTargets().forEach(function(w){var S=i.getIdRule(w.getId(),{state:f,mediaText:d});t=S.getStyle(),S.setStyle({}),v.push(S)}),t&&g.addStyle(t),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:n,selectors:l,mediaText:d,rule:g,ruleComponents:v,state:f})},r.prototype.tagRemoved=function(t){this.updateStateVis()},r.prototype.addNew=function(t){this.addToClasses(t)},r.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},r.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},r.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},r.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},r.prototype.componentChanged=function(t){var e=(t===void 0?{}:t).targets;this.updateSelection(e)},r.prototype.updateSelection=function(t){var e=t||this.getTargets(),n=[];return(e=(0,C.isArray)(e)?e:[e])&&e.length&&(n=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(e),this.module.__trgCustom(),n},r.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,n=e.targets,i=e.opts,l=i===void 0?{}:i,f=n||this.getTargets();return this.module.__getCommonSelectors(f,l)},r.prototype._commonSelectors=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.module).__common.apply(t,e)},r.prototype.checkSync=function(){var t,e=this,n=e.$btnSyncEl,i=e.config,l=e.collection,f=this.getTarget();if(f&&i.componentFirst&&l.length){var d=f.getStyle();t=!(0,C.isEmpty)(d)}n&&n[t?"show":"hide"]()},r.prototype.getTarget=function(){return this.target.getSelected()},r.prototype.getTargets=function(){return this.target.getSelectedAll()},r.prototype.updateStateVis=function(t){var e=this.em,n=e&&e.getConfig().avoidInlineStyle,i=this.collection.length||n?"":"none";this.getStatesC().css("display",i),this.updateSelector(t)},r.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},r.prototype.updateSelector=function(t){var e=this,n=this.el.querySelector("[data-selected]"),i=[],l=t||this.getTargets();(l=(0,C.isArray)(l)?l:[l]).forEach(function(f){return i.push(e.__getName(f))}),n&&(n.innerHTML=i.join(", ")),this.checkStates()},r.prototype.__getName=function(t){var e,n=this,i=n.pfx,l=n.config,f=n.em,d=l.selectedName,v=l.componentFirst;if((0,C.isString)(t))e=rt(Jl||(Jl=ki(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),i,t);else{var g=t==null?void 0:t.getSelectors();if(!g)return"";var w=g.getStyleable(),S=f.get("state"),M=t.getId?rt(cu||(cu=ki(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),i,t.getName(),i,t.getId()):"";e=(e=this.collection.getFullString(w))?rt(Zl||(Zl=ki(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),i,e):t.get("selectorsAdd")||M,e=v&&M?M:e,e+=S?rt(tr||(tr=ki(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),i,S):"",e=d?d({result:e,state:S,target:t}):e}return e&&'<span class="'.concat(i,'sel">').concat(e,"</span>")},r.prototype.stateChanged=function(t){var e=this.em,n=t.target.value;e.set("state",n)},r.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},r.prototype.addToClasses=function(t,e){var n=e,i=this.getClasses(),l=new Vp({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(l):i.append(l),l},r.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each(function(i){return t.addToClasses(i,e)}),n.append(e)},r.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},r.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},r.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},r.prototype.renderStates=function(){var t=this.module,e=this.em,n=e.t("selectorManager.emptyState"),i=t.getStates().map(function(f){var d=e.t("selectorManager.states.".concat(f.id))||f.getLabel()||f.id;return'<option value="'.concat(f.id,'">').concat(d,"</option>")}).join(""),l=this.getStates();l&&l.html('<option value="">'.concat(n,"</option>").concat(i)),this.checkStates()},r.prototype.render=function(){var t=this,e=t.em,n=t.pfx,i=t.ppfx,l=t.config,f=t.$el,d=t.el,v=l.render,g={iconSync:l.iconSync,iconAdd:l.iconAdd,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:i,pfx:n,el:d};f.html(this.template(g));var w=v&&v(g);return w&&w!==d&&f.empty().append(w),this.$input=f.find("[data-input]"),this.$addBtn=f.find("[data-add]"),this.$classes=f.find("#"+n+"tags-c"),this.$btnSyncEl=f.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),f.attr("class","".concat(this.className," ").concat(i,"one-bg ").concat(i,"two-color")),this},r}(k.G7);const lu=Qa;var tl,Jl,cu,Zl,tr,el=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),us=function(){return us=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},us.apply(this,arguments)},nl=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ql=function(a){return(0,C.isString)(a)&&a[0]=="#"},Pi=function(a){return(0,C.isString)(a)&&a[0]=="."},na="selector",ps="".concat(na,":"),uu="".concat(ps,"add"),pu="".concat(ps,"update"),Ei="".concat(ps,"remove"),fu="".concat(Ei,":before"),rl="".concat(ps,"custom"),tc="".concat(ps,"state"),ra={all:na,update:pu,add:uu,remove:Ei,removeBefore:fu,state:tc,custom:rl},Rp=function(a){function r(t){var e=a.call(this,t,"SelectorManager",new Sr([]),ra,au,{skipListen:!0})||this;e.Selector=Jn,e.Selectors=Sr,e.storageKey="",(0,C.bindAll)(e,"__updateSelectedByComponents");var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),e.all=new Sr(n.selectors),e.selected=new Sr([],{em:t,config:n}),e.states=new k.FE(n.states.map(function(l){return new Kl(l)}),{model:Kl}),e.model=new k.Hn({cFirst:n.componentFirst,_undo:!0}),e.__update=(0,C.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(l,f){return t.trigger(tc,f)}),e.model.on("change:cFirst",function(l,f){return t.trigger("selector:type",f)}),t.on("component:toggled component:update:classes",e.__updateSelectedByComponents),e.model.listenTo(t,"component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target",function(){return e.__update()}),e}return el(r,a),r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},r.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?nl([],this.all.models,!0):this.all:[]},r.prototype.__customData=function(t){t===void 0&&(t={});var e=t.container;return{states:this.getStates(),selected:this.getSelected(),container:e}},r.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},r.prototype.select=function(t,e){e===void 0&&(e={});var n=Array.isArray(t)?t:[t],i=this.em.Styles.select(n,e);this.selected.reset(this.__getCommonSelectors(i));var l=this.selectorTags,f=i.filter(function(d){return d}).map(function(d){return(0,I.isComponent)(d)||(0,I.isRule)(d)&&!d.get("selectorsAdd")?d:d.getSelectorsString()});return l&&l.componentChanged({targets:f}),this},r.prototype.addSelector=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=us({},e);(0,C.isObject)(t)?i=t:i.name=t,Ql(i.name)?(i.name=i.name.substr(1),i.type=Jn.TYPE_ID):Pi(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var l=i.name,f=this.getConfig(),d=this.all,v=this.em,g=l?this.get(l,i.type):d.where(i)[0];if(!g){var w=i instanceof Jn?i:new Jn(i,us(us({},n),{config:f,em:v}));return d.add(w,n)}return g},r.prototype.getSelector=function(t,e){return e===void 0&&(e=Jn.TYPE_CLASS),Ql(t)?(t=t.substr(1),e=Jn.TYPE_ID):Pi(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var i=(0,C.isString)(t)?{}:e;return(0,C.isArray)(t)?t.map(function(l){return n.addSelector(l,e,i)}):this.addSelector(t,e,i)},r.prototype.addClass=function(t){var e=this,n=[];return(0,C.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(i){return n.push(e.addSelector(i))}),n},r.prototype.get=function(t,e){var n=this;if((0,C.isArray)(t)){var i=[];return t.map(function(l){return n.getSelector(l)}).filter(Boolean).forEach(function(l){return i.indexOf(l)<0&&i.push(l)}),i}return this.getSelector(t,e)},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.setState=function(t){return this.em.setState(t),this},r.prototype.getState=function(){return this.em.getState()},r.prototype.getStates=function(){return nl([],this.states.models,!0)},r.prototype.setStates=function(t,e){return this.states.reset(t.map(function(n){return new Kl(n)}),e)},r.prototype.getSelected=function(){return this.__getCommon()},r.prototype.getSelectedAll=function(){return nl([],this.selected.models,!0)},r.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(n){n.getSelectors().add(e)})},r.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},r.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},r.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},r.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},r.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):Jn.escapeName(t)},r.prototype.render=function(t){var e=this.selectorTags,n=this.getConfig(),i=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new lu({el:i,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},r.prototype.destroy=function(){var t=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),t==null||t.remove(),this.selectorTags=void 0},r.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},r.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var n=t.map(function(i){return i.getSelectors&&i.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,n)},r.prototype.__common=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(i){return e[1].indexOf(i)>=0}):e.slice(1).reduce(function(i,l){return t.__common(i,l)},e[0]):[]},r.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},r}(Dt);const fs=Rp,du={textTags:["br","b","i","u","a","ul","ol"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};var oa={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},hu=(0,C.keys)(oa),ia=["5","6","11","15"],sa=["font-face","page","counter-style","viewport"],ds=function(a){a===void 0&&(a="");for(var r=[],t=[],e=a.split(","),n=0,i=e.length;n<i;n++){var l=e[n].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var f=l.split(".").filter(Boolean);t.push(f)}else r.push(l)}return{result:t,add:r}},aa=function(a){for(var r=a.style,t={},e=0,n=r.length;e<n;e++){var i=r[e],l=r.getPropertyValue(i),f=r.getPropertyPriority(i);t[i]="".concat(l).concat(f?" !".concat(f):"")}return t},ec=function(a){return(a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"").trim()},nc=function(a,r,t){r===void 0&&(r={}),t===void 0&&(t={});var e={},n=a.length,i=a[n-1],l=i?i.split(/:(.+)/):[],f=l[1],d=t.atRule,v=t.selectorsAdd,g=t.mediaText;return sa.indexOf(d)>=0&&(e.singleAtRule=!0),d&&(e.atRuleType=d),v&&(e.selectorsAdd=v),g&&(e.mediaText=g),f&&(a[n-1]=l[0],e.state=f,l.splice(l.length-1,1)),e.selectors=a,e.style=r,e},rc=function(a){for(var r=[],t=a.cssRules||[],e=0,n=t.length;e<n;e++){var i=t[e],l=i.type.toString(),f=!1,d="",v="",g=i.selectorText||i.keyText,w=ia.indexOf(l)>=0;if(w)f=!0,d=oa[l],v=ec(i);else if(hu.indexOf(l)>=0){var S=rc(i);v=ec(i);for(var M=0,R=S.length;M<R;M++){var G=S[M];v&&(G.mediaText=v),G.atRuleType=oa[l]}r=r.concat(S)}if(g||w){for(var tt=aa(i),K=ds(g),kt=K.add,Ft=K.result,ae=void 0,me=0,Me=Ft.length;me<Me;me++){var Ve=nc(Ft[me],tt,{atRule:oa[l]});r.push(Ve),ae=Ve}if(kt.length){var Ze=kt.join(", ");ae?ae.selectorsAdd=Ze:(Ve={selectors:[],selectorsAdd:Ze,style:tt},f&&(Ve.singleAtRule=f),d&&(Ve.atRuleType=d),v&&(Ve.mediaText=v),r.push(Ve))}}}return r};const ti=function(a,r){return r===void 0&&(r={}),{parse:function(t){var e=this,n=[],i=r.parserCss,l=a==null?void 0:a.Editor,f=i?i(t,l):function(d){var v=document.createElement("style");v.innerHTML=d,document.head.appendChild(v);var g=v.sheet;return document.head.removeChild(v),rc(g)}(t);return f.forEach(function(d){return n=n.concat(e.checkNode(d))}),a==null||a.trigger("parse:css",{input:t,output:n}),n},checkNode:function(t){var e=t.selectors,n=t.style,i=[t];if((0,C.isString)(e)){var l=[],f=t,d=ds(e),v=d.result,g=d.add.join(", "),w={atRule:f.atRule,mediaText:f.params};v.length?v.forEach(function(S){l.push(nc(S,n,w))}):l.push(nc([],n,w)),g&&(l[l.length-1].selectorsAdd=g),i=l}return i}}};var hs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),la=function(a){function r(t){var e=a.call(this,t,"Parser",du)||this,n=e.config;return e.parserCss=ti(t,n),e.parserHtml=oe(t,n),e}return hs(r,a),r.prototype.parseHtml=function(t,e){e===void 0&&(e={});var n=this.em,i=this.parserHtml;return i.compTypes=n.Components.getTypes()||{},i.parse(t,this.parserCss,e)},r.prototype.parseCss=function(t){return this.parserCss.parse(t)},r.prototype.destroy=function(){},r}(jt);const Hp=la,gu={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}};var vu=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},mu=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}};const zp=function(){function a(){}return a.prototype.store=function(r,t){return t===void 0&&(t={}),vu(this,void 0,void 0,function(){return mu(this,function(e){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(r)),[2,r]})})},a.prototype.load=function(r){return r===void 0&&(r={}),vu(this,void 0,void 0,function(){var t;return mu(this,function(e){return t={},this.hasLocal(r,!0)&&(t=JSON.parse(localStorage.getItem(r.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(r,t){if(r===void 0&&(r={}),r.checkLocal&&(!(0,I.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();function Fn(a){return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fn(a)}const yu=function(a){var r=this.constructor;return this.then(function(t){return r.resolve(a()).then(function(){return t})},function(t){return r.resolve(a()).then(function(){return r.reject(t)})})},Up=function(a){return new this(function(r,t){if(!a||a.length===void 0)return t(new TypeError(Fn(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var e=Array.prototype.slice.call(a);if(e.length===0)return r([]);var n=e.length;function i(f,d){if(d&&(Fn(d)==="object"||typeof d=="function")){var v=d.then;if(typeof v=="function")return void v.call(d,function(g){i(f,g)},function(g){e[f]={status:"rejected",reason:g},--n==0&&r(e)})}e[f]={status:"fulfilled",value:d},--n==0&&r(e)}for(var l=0;l<e.length;l++)i(l,e[l])})};function bu(a,r){this.name="AggregateError",this.errors=a,this.message=r||""}bu.prototype=Error.prototype;const Bp=function(a){var r=this;return new r(function(t,e){if(!a||a.length===void 0)return e(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(a);if(n.length===0)return e();for(var i=[],l=0;l<n.length;l++)try{r.resolve(n[l]).then(t).catch(function(f){i.push(f),i.length===n.length&&e(new bu(i,"All promises were rejected"))})}catch(f){e(f)}})};var wu=setTimeout;function oc(a){return Boolean(a&&a.length!==void 0)}function _u(){}function Sn(a){if(!(this instanceof Sn))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],gs(a,this)}function xu(a,r){for(;a._state===3;)a=a._value;a._state!==0?(a._handled=!0,Sn._immediateFn(function(){var t=a._state===1?r.onFulfilled:r.onRejected;if(t!==null){var e;try{e=t(a._value)}catch(n){return void to(r.promise,n)}ic(r.promise,e)}else(a._state===1?ic:to)(r.promise,a._value)})):a._deferreds.push(r)}function ic(a,r){try{if(r===a)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(Fn(r)==="object"||typeof r=="function")){var t=r.then;if(r instanceof Sn)return a._state=3,a._value=r,void Ai(a);if(typeof t=="function")return void gs((e=t,n=r,function(){e.apply(n,arguments)}),a)}a._state=1,a._value=r,Ai(a)}catch(i){to(a,i)}var e,n}function to(a,r){a._state=2,a._value=r,Ai(a)}function Ai(a){a._state===2&&a._deferreds.length===0&&Sn._immediateFn(function(){a._handled||Sn._unhandledRejectionFn(a._value)});for(var r=0,t=a._deferreds.length;r<t;r++)xu(a,a._deferreds[r]);a._deferreds=null}function ol(a,r,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof r=="function"?r:null,this.promise=t}function gs(a,r){var t=!1;try{a(function(e){t||(t=!0,ic(r,e))},function(e){t||(t=!0,to(r,e))})}catch(e){if(t)return;t=!0,to(r,e)}}Sn.prototype.catch=function(a){return this.then(null,a)},Sn.prototype.then=function(a,r){var t=new this.constructor(_u);return xu(this,new ol(a,r,t)),t},Sn.prototype.finally=yu,Sn.all=function(a){return new Sn(function(r,t){if(!oc(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return r([]);var n=e.length;function i(f,d){try{if(d&&(Fn(d)==="object"||typeof d=="function")){var v=d.then;if(typeof v=="function")return void v.call(d,function(g){i(f,g)},t)}e[f]=d,--n==0&&r(e)}catch(g){t(g)}}for(var l=0;l<e.length;l++)i(l,e[l])})},Sn.any=Bp,Sn.allSettled=Up,Sn.resolve=function(a){return a&&Fn(a)==="object"&&a.constructor===Sn?a:new Sn(function(r){r(a)})},Sn.reject=function(a){return new Sn(function(r,t){t(a)})},Sn.race=function(a){return new Sn(function(r,t){if(!oc(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,n=a.length;e<n;e++)Sn.resolve(a[e]).then(r,t)})},Sn._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){wu(a,0)},Sn._unhandledRejectionFn=function(a){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};const co=Sn;(0,I.hasWin)()&&(window.Promise=window.Promise||co);const Cu=typeof fetch=="function"?fetch.bind():function(a,r){return new co(function(t,e){var n=new XMLHttpRequest;for(var i in n.open(r.method||"get",a),n.withCredentials=r.credentials=="include",r.headers||{})n.setRequestHeader(i,r.headers[i]);n.onload=function(l){return t({status:n.status,statusText:n.statusText,text:function(){return co.resolve(n.responseText)}})},n.onerror=e,n.upload&&r.onProgress&&(n.upload.onprogress=r.onProgress),r.body?n.send(r.body):n.send()})};var il=function(){return il=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},il.apply(this,arguments)},ji=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},sc=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}};const Su=function(){function a(){}return a.prototype.store=function(r,t){return t===void 0&&(t={}),ji(this,void 0,void 0,function(){return sc(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlStore,this.__props(t,r),t)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(r){return r===void 0&&(r={}),ji(this,void 0,void 0,function(){return sc(this,function(t){switch(t.label){case 0:return[4,this.request(r.urlLoad,this.__props(r),r)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(r,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),Cu(r,t).then(function(n){var i=n.text();return(n.status/200|0)==1?i:i.then(Promise.reject)}).then(function(n){var i=n&&(0,C.isString)(n);return e.contentTypeJson&&i?JSON.parse(n):n})},a.prototype.__props=function(r,t){r===void 0&&(r={});var e,n=r.contentTypeJson,i=r.headers||{},l=r.fetchOptions||{},f="X-Requested-With",d="Content-Type";if((0,C.isUndefined)(i[f])&&(i[f]="XMLHttpRequest"),(0,C.isUndefined)(i[d])&&n&&(i[d]="application/json; charset=utf-8"),t)if(n)e=JSON.stringify(t);else for(var v in e=new FormData,t)e.append(v,t[v]);var g={method:e?"POST":"GET",credentials:r.credentials,headers:i,body:e};return il(il({},g),(0,C.isFunction)(l)?l(g):l)},a}();var Ou=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),No=function(){return No=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},No.apply(this,arguments)},ei=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},ca=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},sl="storage:start",al="storage:after",Tu="storage:end",vs="storage:error",ua="local",ku="remote",Pu=function(a){function r(t){var e=a.call(this,t,"StorageManager",gu)||this;e.storages={};var n=e.config;return n._disable&&(n.type=""),e.storages={},e.add(ua,new zp),e.add(ku,new Su),e.setCurrent(n.type),e}return Ou(r,a),r.prototype.isAutosave=function(){return!!this.config.autosave},r.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},r.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},r.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},r.prototype.add=function(t,e){return this.storages[t]=e,this},r.prototype.get=function(t){return this.storages[t]},r.prototype.getStorages=function(){return this.storages},r.prototype.getCurrent=function(){return this.config.currentStorage},r.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},r.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},r.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},r.prototype.store=function(t,e){return e===void 0&&(e={}),ei(this,void 0,void 0,function(){var n,i,l,f,d;return ca(this,function(v){switch(v.label){case 0:n=this.getCurrentStorage(),i=No(No({},this.getCurrentOptions()),e),l=this.getRecoveryStorage(),f=this.getCurrentOptions(ua),v.label=1;case 1:return v.trys.push([1,5,,9]),[4,this.__exec(n,i,t)];case 2:return v.sent(),l?[4,this.__exec(l,f,{})]:[3,4];case 3:v.sent(),v.label=4;case 4:return[3,9];case 5:return d=v.sent(),l?[4,this.__exec(l,f,t)]:[3,7];case 6:return v.sent(),[3,8];case 7:throw d;case 8:return[3,9];case 9:return[2,t]}})})},r.prototype.load=function(t){return t===void 0&&(t={}),ei(this,void 0,void 0,function(){var e,n,i,l,f;return ca(this,function(d){switch(d.label){case 0:return e=this.getCurrentStorage(),n=No(No({},this.getCurrentOptions()),t),(i=this.getRecoveryStorage())?[4,this.__exec(i,this.getCurrentOptions(ua))]:[3,5];case 1:if(f=d.sent(),(0,C.isEmpty)(f))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return d.sent(),l=f,[3,5];case 4:return d.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,n)];case 6:l=d.sent(),d.label=7;case 7:return[2,l||{}]}})})},r.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(n,i){(0,C.isFunction)(e)?e(n,i,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?n(null):i()})},r.prototype.getRecovery=function(){return this.config.recovery},r.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===ku&&this.get(ua)},r.prototype.__exec=function(t,e,n){var i;return ei(this,void 0,void 0,function(){var l,f,d,v,g,w,S,M,R,G,tt,K,kt;return ca(this,function(Ft){switch(Ft.label){case 0:if(l=n?"store":"load",f=this.getConfig(),d=f.onStore,v=f.onLoad,this.onStart(l,n),!t)return[2,n||{}];Ft.label=1;case 1:return Ft.trys.push([1,14,,15]),w=(i=this.em)===null||i===void 0?void 0:i.getEditor(),S=void 0,n?(R=d)?[4,d(n,w)]:[3,3]:[3,7];case 2:R=Ft.sent(),Ft.label=3;case 3:return M=R||n,(G=e.onStore)?[4,e.onStore(M,w)]:[3,5];case 4:G=Ft.sent(),Ft.label=5;case 5:return M=G||M,[4,t.store(M,e)];case 6:return S=Ft.sent(),g=n,[3,13];case 7:return[4,t.load(e)];case 8:return S=Ft.sent(),g=this.__clearKeys(S),(tt=e.onLoad)?[4,e.onLoad(g,w)]:[3,10];case 9:tt=Ft.sent(),Ft.label=10;case 10:return g=tt||g,(K=v)?[4,v(g,w)]:[3,12];case 11:K=Ft.sent(),Ft.label=12;case 12:g=K||g,Ft.label=13;case 13:return this.onAfter(l,g,S),this.onEnd(l,g),[3,15];case 14:throw kt=Ft.sent(),this.onError(l,kt),kt;case 15:return[2,g]}})})},r.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),n=new RegExp("^".concat(e.id)),i={};for(var l in t)i[l.replace(n,"")]=t[l];return i},r.prototype.getCurrentOptions=function(t){var e=this.getConfig(),n=t||this.getCurrent();return e.options[n]||{}},r.prototype.onStart=function(t,e){var n=this.em;n&&(n.trigger(sl),t&&n.trigger("".concat(sl,":").concat(t),e))},r.prototype.onAfter=function(t,e,n){var i=this.em;i&&(i.trigger(al),i.trigger("".concat(al,":").concat(t),e,n),i.trigger("storage:".concat(t),e,n))},r.prototype.onEnd=function(t,e){var n=this.em;n&&(n.trigger(Tu),t&&n.trigger("".concat(Tu,":").concat(t),e))},r.prototype.onError=function(t,e){var n=this.em;n&&(n.trigger(vs,e),t&&n.trigger("".concat(vs,":").concat(t),e),this.onEnd(t,e))},r.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},r.prototype.destroy=function(){this.storages={}},r}(jt);const ll=Pu,Wp={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}]};var $p=gn(330),pa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ms=function(){return ms=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ms.apply(this,arguments)},ac=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var n=t.config,i=n===void 0?{}:n,l=e,f=l.model,d=l.eventCapture,v=f.target,g=f.attributes.type;e.config=i,e.em=i.em,e.pfx=i.stylePrefix||"",e.ppfx=i.pStylePrefix||"",e.target=v;var w=e.ppfx;return e.clsField="".concat(w,"field ").concat(w,"field-").concat(g),[["change:value",e.onValueChange],["remove",e.removeView]].forEach(function(S){var M=S[0],R=S[1];f.off(M,R),e.listenTo(f,M,R)}),f.view=e,e.listenTo(f,"change:label",e.render),e.listenTo(f,"change:placeholder",e.rerender),e.events={},d.forEach(function(S){return e.events[S]="onChange"}),e.delegateEvents(),e.init(),e}return pa(r,a),r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.templateLabel=function(t){var e=this.ppfx,n=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(n,'">').concat(n,"</div>")},r.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},r.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},r.prototype.removeView=function(){this.remove(),this.removed()},r.prototype.init=function(){},r.prototype.removed=function(){},r.prototype.onRender=function(t){},r.prototype.onUpdate=function(t){},r.prototype.onEvent=function(t){},r.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,C.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(ms(ms({},this.getClbOpts()),{event:t}))},r.prototype.getValueForTarget=function(){return this.model.get("value")},r.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},r.prototype.onValueChange=function(t,e,n){if(n===void 0&&(n={}),n.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var i=this.getValueForTarget();t.setTargetValue(i,n)}},r.prototype.renderLabel=function(){var t=this.$el,e=this.target,n=this.getLabel(),i=this.templateLabel(e);this.createLabel&&(i=this.createLabel({label:n,component:e,trait:this})||""),t.find("[data-label]").append(i)},r.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,n=e.label,i=e.name;return t.t("traitManager.traits.labels.".concat(i))||(0,I.capitalize)(n||i).replace(/-/g," ")},r.prototype.getComponent=function(){return this.target},r.prototype.getInputEl=function(){if(!this.$input){var t=this.em,e=this.model,n=e,i=e.attributes.name,l=n.get("placeholder")||n.get("default")||"",f=n.get("type")||"text",d=n.get("min"),v=n.get("max"),g=this.getModelValue(),w=(0,wt.default)('<input type="'.concat(f,'">')),S=t.t("traitManager.traits.attributes.".concat(i))||{};w.attr(ms({placeholder:l},S)),(0,C.isUndefined)(g)||(n.set({value:g},{silent:!0}),w.prop("value",g)),d&&w.prop("min",d),v&&w.prop("max",v),this.$input=w}return this.$input.get(0)},r.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},r.prototype.getModelValue=function(){var t,e=this.model,n=this.target,i=e.getName();if(e.get("changeProp"))t=n.get(i);else{var l=n.get("attributes");t=e.get("value")||l[i]}return(0,C.isUndefined)(t)?"":t},r.prototype.getElInput=function(){return this.elInput},r.prototype.renderField=function(){var t=this,e=t.$el,n=t.appendInput,i=t.model,l=e.find("[data-input]"),f=l[l.length-1],d=i.el;d||(d=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,C.isString)(d)?(f.innerHTML=d,this.elInput=f.firstChild):(n?f.appendChild(d):f.insertBefore(d,f.firstChild),this.elInput=d),i.el=this.elInput},r.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},r.prototype.rerender=function(){delete this.model.el,this.render()},r.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,i=t.ppfx,l=t.model.attributes,f=l.type,d=l.id,v=this.hasLabel&&this.hasLabel(),g="".concat(n,"trait");delete this.$input;var w='<div class="'.concat(g," ").concat(g,"--").concat(f,`">
      `).concat(v?'<div class="'.concat(i,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(i,"field-wrp ").concat(i,"field-wrp--").concat(f,`" data-input>
        `).concat(this.templateInput?(0,C.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(w),v&&this.renderLabel(),this.renderField(),this.el.className="".concat(g,"__wrp ").concat(g,"__wrp-").concat(d),this.postUpdate(),this.onRender(this.getClbOpts()),this},r}(k.G7);const Io=ac;ac.prototype.eventCapture=["change"];var lc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cc=function(a){function r(t,e){t===void 0&&(t={});var n=a.call(this,t)||this;n.reuseView=!0,n.itemsView=e;var i=t.config||{},l=i.stylePrefix||"",f=t.editor;return n.config=i,n.em=f,n.pfx=l,n.ppfx=i.pStylePrefix||"",n.className="".concat(l,"traits"),n.listenTo(f,"component:toggled",n.updatedCollection),n.updatedCollection(),n}return lc(r,a),r.prototype.updatedCollection=function(){var t=this,e=t.ppfx,n=t.className,i=t.em.getSelected();this.el.className="".concat(n," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=i?i.traits:[],this.render()},r}($p.Z);const Eu=cc;cc.prototype.itemView=Io;var Au=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ju=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return Au(r,a),r.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<div class="'.concat(e,`">
      <div data-input></div>
      <div class="`).concat(t,`sel-arrow">
        <div class="`).concat(t,`d-s-arrow"></div>
      </div>
    </div>`)},r.prototype.getInputEl=function(){if(!this.$input){var t=this.model,e=this.em,n=t.get("name"),i=t.get("options")||[],l=[],f="<select>";i.forEach(function(g){var w,S,M,R="";(0,C.isString)(g)?(w=g,S=g):(w=g.name||g.label||g.value,S="".concat((0,C.isUndefined)(g.value)?g.id:g.value).replace(/"/g,"&quot;"),R+=(M=g.style?g.style.replace(/"/g,"&quot;"):"")?' style="'.concat(M,'"'):"");var G=e.t("traitManager.traits.options.".concat(n,".").concat(S))||w;f+='<option value="'.concat(S,'"').concat(R,">").concat(G,"</option>"),l.push(S)}),f+="</select>",this.$input=(0,wt.default)(f);var d=t.getTargetValue(),v=l.indexOf(d)>=0?d:t.get("default");!(0,C.isUndefined)(v)&&this.$input.val(v)}return this.$input.get(0)},r}(Io);var fa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const da=function(a){function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return fa(r,a),r.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<label class="'.concat(e,`" data-input>
    <i class="`).concat(t,`chk-icon"></i>
  </label>`)},r.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},r.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!this.$input,i=Io.prototype.getInputEl.apply(this,t);if(n){var l=void 0,f=void 0,d=this,v=d.model,g=d.target,w=v.attributes.valueFalse,S=v.getName();v.get("changeProp")?f=l=g.get(S):l=!(!(f=g.get("attributes")[S])&&f!==""),(0,C.isUndefined)(w)||f!==w||(l=!1),i.checked=l}return i},r}(Io);var qp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cl=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.ppfx||"";return e.opts=t,e.ppfx=n,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return qp(r,a),r.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},r.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.setValue=function(t,e){var n=this.model,i=t||n.get("defaults"),l=this.getInputEl();l&&(l.value=i)},r.prototype.handleModelChange=function(t,e,n){this.setValue(e,n)},r.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},r.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},r.prototype.getInputEl=function(){if(!this.inputEl){var t=this.model,e=this.opts.type||"text",n=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,wt.default)('<input type="'.concat(e,'" placeholder="').concat(n,'">'))}return this.inputEl.get(0)},r.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},r}(k.G7);const ul=cl;cl.prototype.events={change:"handleChange"};var Mu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lu=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,C.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return Mu(r,a),r.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},r.prototype.setValue=function(t,e){var n=e||{},i=this.validateInputValue(t,{deepCheck:1}),l={value:i.value,unit:""};(i.unit||i.force)&&(l.unit=i.unit),this.model.set(l,n),n.silent&&this.handleModelChange()},r.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},r.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},r.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},r.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var f=l==t.get("unit")?"selected":"";n.push("<option ".concat(f,">").concat(l,"</option>"))});var i=document.createElement("div");i.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=i.firstChild}}return this.unitEl},r.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(t.get("value"));this.setValue(this.normalizeValue(n+e)),this.elementUpdated()},r.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(t.get("value"));this.setValue(this.normalizeValue(n-e)),this.elementUpdated()},r.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,I.on)(this.doc,"mousemove",this.moveIncrement),(0,I.on)(this.doc,"mouseup",this.upIncrement)},r.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,n=e.get("step"),i=this.current,l=this.normalizeValue(i.val+(i.y-t.pageY)*n),f=this.validateInputValue(l),d=f.value,v=f.unit;return this.prValue=d,e.set({value:d,unit:v},{avoidStore:1}),!1},r.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,I.off)(this.doc,"mouseup",this.upIncrement),(0,I.off)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set("value",n,{avoidStore:1}).set("value",n+e),this.elementUpdated()}},r.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var n=this.model.get("step"),i=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var l=n.toString().split(".")[1];i=l?l.length:0}return i?parseFloat(t.toFixed(i)):t},r.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var n=0,i=e||{},l=this.model,f="",d=(0,C.isUndefined)(t)?f:t,v=e.units||l.get("units")||[],g=l.get("unit")||v.length&&v[0]||"",w=(0,C.isUndefined)(e.max)?l.get("max"):e.max,S=(0,C.isUndefined)(e.min)?l.get("min"):e.min,M=!!l.get("limitlessMax"),R=!!l.get("limitlessMin");if(i.deepCheck){var G=l.get("fixedValues")||[];if(d===""&&(g=""),d){var tt=new RegExp("^"+G.join("|"),"g");if(G.length&&tt.test(d))d=d.match(tt)[0],g="",n=1;else{var K=d+"";d+="",d=parseFloat(d.replace(",",".")),d=isNaN(d)?f:d;var kt=K.replace(d,"");(0,C.indexOf)(v,kt)>=0&&(g=kt)}}}return M||(0,C.isUndefined)(w)||w===""||(d=d>w?w:d),R||(0,C.isUndefined)(S)||S===""||(d=d<S?S:d),{force:n,value:d,unit:g}},r.prototype.render=function(){ul.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},r}(ul);const Du=Lu;Lu.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var Gp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Kp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Gp(r,a),r.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,n=e.value,i=e.unit;return(0,C.isUndefined)(n)||n===""?t.get("default"):n+i},r.prototype.getInputEl=function(){if(!this.input){var t=this.ppfx,e=this.model,n=this.getModelValue(),i=new Du({contClass:"".concat(t,"field-int"),type:"number",model:e,ppfx:t});i.render(),this.$input=i.inputEl,this.$unit=i.unitEl,e.set("value",n,{fromTarget:!0}),this.$input.val(n),this.input=i.el}return this.input},r}(Io);var Nu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ha=function(){return ha=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ha.apply(this,arguments)};wt.default&&function(a,r){if((0,I.hasWin)()){var t={beforeShow:Er,move:Er,change:Er,show:Er,hide:Er,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],n=!!/msie/i.exec(window.navigator.userAgent),i=function(){function ct(Pt,zt){return!!~(""+Pt).indexOf(zt)}var St=document.createElement("div").style;return St.cssText="background-color:rgba(0,0,0,.5)",ct(St.backgroundColor,"rgba")||ct(St.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),f=function(){var ct="";if(n)for(var St=1;St<=6;St++)ct+="<div class='sp-"+St+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",ct,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),d="spectrum.id";a.fn.spectrum=function(ct,St){if(typeof ct=="string"){var Pt=this,zt=Array.prototype.slice.call(arguments,1);return this.each(function(){var le=e[a(this).data(d)];if(le){var Vt=le[ct];if(!Vt)throw new Error("Spectrum: no such method: '"+ct+"'");ct=="get"?Pt=le.get():ct=="container"?Pt=le.container:ct=="option"?Pt=le.option.apply(le,zt):ct=="destroy"?(le.destroy(),a(this).removeData(d)):Vt.apply(le,zt)}}),Pt}return this.spectrum("destroy").each(function(){var le=wn(this,a.extend({},ct,a(this).data()));a(this).data(d,le.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=no,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function ct(){if(ct._cachedResult===void 0){var St=a("<input type='color'/>")[0];ct._cachedResult=St.type==="color"&&St.value!==""}return ct._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var ct=a("input[type=color]");ct.length&&!Kr()&&ct.spectrum({preferredFormat:"hex6"})};var v=/^[\s,#]+/,g=/\s+$/,w=0,S=Math,M=S.round,R=S.min,G=S.max,tt=S.random,K=function(ct,St){if(St=St||{},(ct=ct||"")instanceof K)return ct;if(!(this instanceof K))return new K(ct,St);var Pt=function(zt){var le={r:0,g:0,b:0},Vt=1,Ue=!1,en=!1;typeof zt=="string"&&(zt=function(nn){nn=nn.replace(v,"").replace(g,"").toLowerCase();var we,on=!1;if(me[nn])nn=me[nn],on=!0;else if(nn=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(we=Ve.rgb.exec(nn))?{r:we[1],g:we[2],b:we[3]}:(we=Ve.rgba.exec(nn))?{r:we[1],g:we[2],b:we[3],a:we[4]}:(we=Ve.hsl.exec(nn))?{h:we[1],s:we[2],l:we[3]}:(we=Ve.hsla.exec(nn))?{h:we[1],s:we[2],l:we[3],a:we[4]}:(we=Ve.hsv.exec(nn))?{h:we[1],s:we[2],v:we[3]}:(we=Ve.hsva.exec(nn))?{h:we[1],s:we[2],v:we[3],a:we[4]}:(we=Ve.hex8.exec(nn))?{a:bm(we[1]),r:ii(we[2]),g:ii(we[3]),b:ii(we[4]),format:on?"name":"hex8"}:(we=Ve.hex6.exec(nn))?{r:ii(we[1]),g:ii(we[2]),b:ii(we[3]),format:on?"name":"hex"}:(we=Ve.hex3.exec(nn))?{r:ii(we[1]+""+we[1]),g:ii(we[2]+""+we[2]),b:ii(we[3]+""+we[3]),format:on?"name":"hex"}:!1}(zt)),typeof zt=="object"&&(zt.hasOwnProperty("r")&&zt.hasOwnProperty("g")&&zt.hasOwnProperty("b")?(Je=zt.r,ho=zt.g,cr=zt.b,le={r:255*Mn(Je,255),g:255*Mn(ho,255),b:255*Mn(cr,255)},Ue=!0,en=String(zt.r).substr(-1)==="%"?"prgb":"rgb"):zt.hasOwnProperty("h")&&zt.hasOwnProperty("s")&&zt.hasOwnProperty("v")?(zt.s=Pc(zt.s),zt.v=Pc(zt.v),le=function(nn,we,on){nn=6*Mn(nn,360),we=Mn(we,100),on=Mn(on,100);var un=S.floor(nn),er=nn-un,Un=on*(1-we),br=on*(1-er*we),Yr=on*(1-(1-er)*we),go=un%6,si=[on,br,Un,Un,Yr,on][go],Os=[Yr,on,on,br,Un,Un][go],wr=[Un,Un,Yr,on,on,br][go];return{r:255*si,g:255*Os,b:255*wr}}(zt.h,zt.s,zt.v),Ue=!0,en="hsv"):zt.hasOwnProperty("h")&&zt.hasOwnProperty("s")&&zt.hasOwnProperty("l")&&(zt.s=Pc(zt.s),zt.l=Pc(zt.l),le=function(nn,we,on){var un,er,Un;function br(si,Os,wr){return wr<0&&(wr+=1),wr>1&&(wr-=1),wr<1/6?si+6*(Os-si)*wr:wr<1/2?Os:wr<2/3?si+(Os-si)*(2/3-wr)*6:si}if(nn=Mn(nn,360),we=Mn(we,100),on=Mn(on,100),we===0)un=er=Un=on;else{var Yr=on<.5?on*(1+we):on+we-on*we,go=2*on-Yr;un=br(go,Yr,nn+1/3),er=br(go,Yr,nn),Un=br(go,Yr,nn-1/3)}return{r:255*un,g:255*er,b:255*Un}}(zt.h,zt.s,zt.l),Ue=!0,en="hsl"),zt.hasOwnProperty("a")&&(Vt=zt.a));var Je,ho,cr;return Vt=Ed(Vt),{ok:Ue,format:zt.format||en,r:R(255,G(le.r,0)),g:R(255,G(le.g,0)),b:R(255,G(le.b,0)),a:Vt}}(ct);this._originalInput=ct,this._r=Pt.r,this._g=Pt.g,this._b=Pt.b,this._a=Pt.a,this._roundA=M(100*this._a)/100,this._format=St.format||Pt.format,this._gradientType=St.gradientType,this._r<1&&(this._r=M(this._r)),this._g<1&&(this._g=M(this._g)),this._b<1&&(this._b=M(this._b)),this._ok=Pt.ok,this._tc_id=w++};K.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ct=this.toRgb();return(299*ct.r+587*ct.g+114*ct.b)/1e3},setAlpha:function(ct){return this._a=Ed(ct),this._roundA=M(100*this._a)/100,this},toHsv:function(){var ct=Fi(this._r,this._g,this._b);return{h:360*ct.h,s:ct.s,v:ct.v,a:this._a}},toHsvString:function(){var ct=Fi(this._r,this._g,this._b),St=M(360*ct.h),Pt=M(100*ct.s),zt=M(100*ct.v);return this._a==1?"hsv("+St+", "+Pt+"%, "+zt+"%)":"hsva("+St+", "+Pt+"%, "+zt+"%, "+this._roundA+")"},toHsl:function(){var ct=oi(this._r,this._g,this._b);return{h:360*ct.h,s:ct.s,l:ct.l,a:this._a}},toHslString:function(){var ct=oi(this._r,this._g,this._b),St=M(360*ct.h),Pt=M(100*ct.s),zt=M(100*ct.l);return this._a==1?"hsl("+St+", "+Pt+"%, "+zt+"%)":"hsla("+St+", "+Pt+"%, "+zt+"%, "+this._roundA+")"},toHex:function(ct){return _a(this._r,this._g,this._b,ct)},toHexString:function(ct){return"#"+this.toHex(ct)},toHex8:function(){return Pd(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:M(this._r),g:M(this._g),b:M(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+M(this._r)+", "+M(this._g)+", "+M(this._b)+")":"rgba("+M(this._r)+", "+M(this._g)+", "+M(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:M(100*Mn(this._r,255))+"%",g:M(100*Mn(this._g,255))+"%",b:M(100*Mn(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+M(100*Mn(this._r,255))+"%, "+M(100*Mn(this._g,255))+"%, "+M(100*Mn(this._b,255))+"%)":"rgba("+M(100*Mn(this._r,255))+"%, "+M(100*Mn(this._g,255))+"%, "+M(100*Mn(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Me[_a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(ct){var St="#"+Pd(this._r,this._g,this._b,this._a),Pt=St,zt=this._gradientType?"GradientType = 1, ":"";return ct&&(Pt=K(ct).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+zt+"startColorstr="+St+",endColorstr="+Pt+")"},toString:function(ct){var St=!!ct;ct=ct||this._format;var Pt=!1,zt=this._a<1&&this._a>=0;return St||!zt||ct!=="hex"&&ct!=="hex6"&&ct!=="hex3"&&ct!=="name"?(ct==="rgb"&&(Pt=this.toRgbString()),ct==="prgb"&&(Pt=this.toPercentageRgbString()),ct!=="hex"&&ct!=="hex6"||(Pt=this.toHexString()),ct==="hex3"&&(Pt=this.toHexString(!0)),ct==="hex8"&&(Pt=this.toHex8String()),ct==="name"&&(Pt=this.toName()),ct==="hsl"&&(Pt=this.toHslString()),ct==="hsv"&&(Pt=this.toHsvString()),Pt||this.toHexString()):ct==="name"&&this._a===0?this.toName():this.toRgbString()},_applyModification:function(ct,St){var Pt=ct.apply(null,[this].concat([].slice.call(St)));return this._r=Pt._r,this._g=Pt._g,this._b=Pt._b,this.setAlpha(Pt._a),this},lighten:function(){return this._applyModification(cm,arguments)},brighten:function(){return this._applyModification(um,arguments)},darken:function(){return this._applyModification(pm,arguments)},desaturate:function(){return this._applyModification(sm,arguments)},saturate:function(){return this._applyModification(am,arguments)},greyscale:function(){return this._applyModification(lm,arguments)},spin:function(){return this._applyModification(fm,arguments)},_applyCombination:function(ct,St){return ct.apply(null,[this].concat([].slice.call(St)))},analogous:function(){return this._applyCombination(mm,arguments)},complement:function(){return this._applyCombination(dm,arguments)},monochromatic:function(){return this._applyCombination(ym,arguments)},splitcomplement:function(){return this._applyCombination(vm,arguments)},triad:function(){return this._applyCombination(hm,arguments)},tetrad:function(){return this._applyCombination(gm,arguments)}},K.fromRatio=function(ct,St){if(typeof ct=="object"){var Pt={};for(var zt in ct)ct.hasOwnProperty(zt)&&(Pt[zt]=zt==="a"?ct[zt]:Pc(ct[zt]));ct=Pt}return K(ct,St)},K.equals=function(ct,St){return!(!ct||!St)&&K(ct).toRgbString()==K(St).toRgbString()},K.random=function(){return K.fromRatio({r:tt(),g:tt(),b:tt()})},K.mix=function(ct,St,Pt){Pt=Pt===0?0:Pt||50;var zt,le=K(ct).toRgb(),Vt=K(St).toRgb(),Ue=Pt/100,en=2*Ue-1,Je=Vt.a-le.a,ho=1-(zt=((zt=en*Je==-1?en:(en+Je)/(1+en*Je))+1)/2),cr={r:Vt.r*zt+le.r*ho,g:Vt.g*zt+le.g*ho,b:Vt.b*zt+le.b*ho,a:Vt.a*Ue+le.a*(1-Ue)};return K(cr)},K.readability=function(ct,St){var Pt=K(ct),zt=K(St),le=Pt.toRgb(),Vt=zt.toRgb(),Ue=Pt.getBrightness(),en=zt.getBrightness(),Je=Math.max(le.r,Vt.r)-Math.min(le.r,Vt.r)+Math.max(le.g,Vt.g)-Math.min(le.g,Vt.g)+Math.max(le.b,Vt.b)-Math.min(le.b,Vt.b);return{brightness:Math.abs(Ue-en),color:Je}},K.isReadable=function(ct,St){var Pt=K.readability(ct,St);return Pt.brightness>125&&Pt.color>500},K.mostReadable=function(ct,St){for(var Pt=null,zt=0,le=!1,Vt=0;Vt<St.length;Vt++){var Ue=K.readability(ct,St[Vt]),en=Ue.brightness>125&&Ue.color>500,Je=3*(Ue.brightness/125)+Ue.color/500;(en&&!le||en&&le&&Je>zt||!en&&!le&&Je>zt)&&(le=en,zt=Je,Pt=K(St[Vt]))}return Pt};var kt,Ft,ae,me=K.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Me=K.hexNames=function(ct){var St={};for(var Pt in ct)ct.hasOwnProperty(Pt)&&(St[ct[Pt]]=Pt);return St}(me),Ve=(Ft="[\\s|\\(]+("+(kt="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+kt+")[,|\\s]+("+kt+")\\s*\\)?",ae="[\\s|\\(]+("+kt+")[,|\\s]+("+kt+")[,|\\s]+("+kt+")[,|\\s]+("+kt+")\\s*\\)?",{rgb:new RegExp("rgb"+Ft),rgba:new RegExp("rgba"+ae),hsl:new RegExp("hsl"+Ft),hsla:new RegExp("hsla"+ae),hsv:new RegExp("hsv"+Ft),hsva:new RegExp("hsva"+ae),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=K,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}function Ze(ct,St,Pt,zt){for(var le=[],Vt=0;Vt<ct.length;Vt++){var Ue=ct[Vt];if(Ue){var en=K(Ue),Je=en.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";Je+=K.equals(St,Ue)?" sp-thumb-active":"";var ho=en.toString(zt.preferredFormat||"rgb"),cr=i?"background-color:"+en.toRgbString():"filter:"+en.toFilter();le.push('<span title="'+ho+'" data-color="'+en.toRgbString()+'" class="'+Je+'"><span class="sp-thumb-inner" style="'+cr+';"></span></span>')}else le.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",zt.noColorSelectedText)).html())}return"<div class='sp-cf "+Pt+"'>"+le.join("")+"</div>"}function wn(ct,St){var Pt,zt,le,Vt=function(ke,Ee){var De=a.extend({},t,ke);return De.callbacks={move:Gr(De.move,Ee),change:Gr(De.change,Ee),show:Gr(De.show,Ee),hide:Gr(De.hide,Ee),beforeShow:Gr(De.beforeShow,Ee)},De}(St,ct),Ue=Vt.flat,en=Vt.showSelectionPalette,Je=Vt.localStorageKey,ho=Vt.theme,cr=Vt.callbacks,nn=(Pt=Ta,zt=10,function(){var ke=this,Ee=arguments,De=function(){le=null,Pt.apply(ke,Ee)};le||(le=setTimeout(De,zt))}),we=!1,on=!1,un=!0,er=0,Un=0,br=0,Yr=0,go=0,si=0,Os=0,wr=0,Ec=0,Ac=0,ai=1,lp=[],jc=[],cp={},li=Vt.selectionPalette.slice(0),wm=Vt.maxSelectionSize,Ad="sp-dragging",Ts=null,Mc=ct.ownerDocument,nr=(Mc.body,a(ct)),Pf=!1,Ke=a(f,Mc).addClass(ho),_m=Ke.find(".sp-picker-container"),up=Ke.find(".sp-color"),pp=Ke.find(".sp-dragger"),Ef=Ke.find(".sp-hue"),fp=Ke.find(".sp-slider"),Lc=Ke.find(".sp-alpha-inner"),jd=Ke.find(".sp-alpha"),dp=Ke.find(".sp-alpha-handle"),ci=Ke.find(".sp-input"),Md=Ke.find(".sp-palette"),Ld=Ke.find(".sp-initial"),Dd=Ke.find(".sp-cancel"),Af=Ke.find(".sp-clear"),Nd=Ke.find(".sp-choose"),jf=Ke.find(".sp-palette-toggle"),hp=nr.is("input"),xm=hp&&nr.attr("type")==="color"&&Kr(),Mf=hp&&!Ue,xl=Mf?a(l).addClass(ho).addClass(Vt.className).addClass(Vt.replacerClassName):a([]),Dc=Mf?xl:nr,Cl=xl.find(".sp-preview-inner"),Nc=Vt.color||hp&&nr.val(),Sl=!1,Ol=Vt.preferredFormat,Cm=!Vt.showButtons||Vt.clickoutFiresChange,ks=!Nc,Ca=Vt.allowEmpty&&!xm;function Lf(){if(Vt.showPaletteOnly&&(Vt.showPalette=!0),jf.text(Vt.showPaletteOnly?Vt.togglePaletteMoreText:Vt.togglePaletteLessText),Vt.palette){lp=Vt.palette.slice(0),jc=a.isArray(lp[0])?lp:[lp],cp={};for(var ke=0;ke<jc.length;ke++)for(var Ee=0;Ee<jc[ke].length;Ee++){var De=K(jc[ke][Ee]).toRgbString();cp[De]=!0}}Ke.toggleClass("sp-flat",Ue),Ke.toggleClass("sp-input-disabled",!Vt.showInput),Ke.toggleClass("sp-alpha-enabled",Vt.showAlpha),Ke.toggleClass("sp-clear-enabled",Ca),Ke.toggleClass("sp-buttons-disabled",!Vt.showButtons),Ke.toggleClass("sp-palette-buttons-disabled",!Vt.togglePaletteOnly),Ke.toggleClass("sp-palette-disabled",!Vt.showPalette),Ke.toggleClass("sp-palette-only",Vt.showPaletteOnly),Ke.toggleClass("sp-initial-disabled",!Vt.showInitial),Ke.addClass(Vt.className).addClass(Vt.containerClassName),Ta()}function Id(){if(Je&&window.localStorage){try{var ke=window.localStorage[Je].split(",#");ke.length>1&&(delete window.localStorage[Je],a.each(ke,function(Ee,De){Df(De)}))}catch{}try{li=window.localStorage[Je].split(";")}catch{}}}function Df(ke){if(en){var Ee=K(ke).toRgbString();if(!cp[Ee]&&a.inArray(Ee,li)===-1)for(li.push(Ee);li.length>wm;)li.shift();if(Je&&window.localStorage)try{window.localStorage[Je]=li.join(";")}catch{}}}function Fd(){var ke=Xr(),Ee=a.map(jc,function(De,Le){return Ze(De,ke,"sp-palette-row sp-palette-row-"+Le,Vt)});Id(),li&&Ee.push(Ze(function(){var De=[];if(Vt.showPalette)for(var Le=0;Le<li.length;Le++){var _r=K(li[Le]).toRgbString();cp[_r]||De.push(li[Le])}return De.reverse().slice(0,Vt.maxSelectionSize)}(),ke,"sp-palette-row sp-palette-row-selection",Vt)),Md.html(Ee.join(""))}function Vd(){if(Vt.showInitial){var ke=Sl,Ee=Xr();Ld.html(Ze([ke,Ee],Ee,"sp-palette-row-initial",Vt))}}function Nf(){(Un<=0||er<=0||Yr<=0)&&Ta(),on=!0,Ke.addClass(Ad),Ts=null,nr.trigger("dragstart.spectrum",[Xr()])}function If(){on=!1,Ke.removeClass(Ad),nr.trigger("dragstop.spectrum",[Xr()])}function Ff(){var ke=ci.val();if(ke!==null&&ke!==""||!Ca){var Ee=K(ke);Ee.isValid()?(Sa(Ee),Oa(!0)):ci.addClass("sp-validation-error")}else Sa(null),Oa(!0)}function Rd(){we?Ps():Vf()}function Vf(){var ke=a.Event("beforeShow.spectrum");if(we)Ta();else if(nr.trigger("beforeShow.spectrum",[Xr()]),cr.beforeShow(Xr())!==!1&&!ke.isDefaultPrevented()){(function(){for(var De=0;De<e.length;De++)e[De]&&e[De].hide()})(),we=!0;var Ee=a(Mc);Ee.bind("keydown.spectrum",Hd),Ee.bind("click.spectrum",zd),a(window).bind("resize.spectrum",nn),xl.addClass("sp-active"),Ke.removeClass("sp-hidden"),Ta(),kl(),Sl=Xr(),Vd(),cr.show(Sl),nr.trigger("show.spectrum",[Sl])}}function Hd(ke){ke.keyCode===27&&Ps()}function zd(ke){ke.button!=2&&(on||(Cm?Oa(!0):Ud(),Ps()))}function Ps(){we&&!Ue&&(we=!1,a(Mc).unbind("keydown.spectrum",Hd),a(Mc).unbind("click.spectrum",zd),a(window).unbind("resize.spectrum",nn),xl.removeClass("sp-active"),Ke.addClass("sp-hidden"),cr.hide(Xr()),nr.trigger("hide.spectrum",[Xr()]))}function Ud(){Sa(Sl,!0)}function Sa(ke,Ee){var De,Le;K.equals(ke,Xr())?kl():(!ke&&Ca?ks=!0:(ks=!1,un=!ke,Le=(De=K(ke)).toHsv(),wr=Le.h%360/360,Ec=Le.s,Ac=Le.v,ai=Le.a),kl(),De&&De.isValid()&&!Ee&&(Ol=Vt.preferredFormat||De.getFormat()))}function Xr(ke){return ke=ke||{},Ca&&ks?null:K.fromRatio({h:wr,s:Ec,v:Ac,a:Math.round(100*ai)/100},{format:ke.format||Ol})}function Tl(){kl(),cr.move(Xr()),nr.trigger("move.spectrum",[Xr()])}function kl(){ci.removeClass("sp-validation-error"),Bd();var ke=K.fromRatio({h:wr,s:1,v:1});up.css("background-color",ke.toHexString());var Ee=Ol;ai<1&&(ai!==0||Ee!=="name")&&(Ee!=="hex"&&Ee!=="hex3"&&Ee!=="hex6"&&Ee!=="name"||(Ee="rgb"));var De=Xr({format:Ee}),Le="";if(Cl.removeClass("sp-clear-display"),Cl.css("background-color","transparent"),!De&&Ca)Cl.addClass("sp-clear-display");else{var _r=De.toHexString(),ui=De.toRgbString();if(i||De.alpha===1?Cl.css("background-color",ui):(Cl.css("background-color","transparent"),Cl.css("filter",De.toFilter())),Vt.showAlpha){var Es=De.toRgb();Es.a=0;var As=K(Es).toRgbString(),ka="linear-gradient(left, "+As+", "+_r+")";n?Lc.css("filter",K(As).toFilter({gradientType:1},_r)):(Lc.css("background","-webkit-"+ka),Lc.css("background","-moz-"+ka),Lc.css("background","-ms-"+ka),Lc.css("background","linear-gradient(to right, "+As+", "+_r+")"))}Le=De.toString(Ee)}Vt.showInput&&ci.val(Le),Vt.showPalette&&Fd(),Vd()}function Bd(){var ke=Ec,Ee=Ac;if(Ca&&ks)dp.hide(),fp.hide(),pp.hide();else{dp.show(),fp.show(),pp.show();var De=ke*er,Le=Un-Ee*Un;De=Math.max(-br,Math.min(er-br,De-br)),Le=Math.max(-br,Math.min(Un-br,Le-br)),pp.css({top:Le+"px",left:De+"px"});var _r=ai*go;dp.css({left:_r-si/2+"px"});var ui=wr*Yr;fp.css({top:ui-Os+"px"})}}function Oa(ke){var Ee=Xr(),De="",Le=!!un||!K.equals(Ee,Sl);Ee&&(De=Ee.toString(Ol),!we&&Df(Ee)),hp&&nr.val(De),ke&&Le&&(cr.change(Ee),nr.trigger("change",[Ee]))}function Ta(){we&&(er=up.width(),Un=up.height(),br=pp.height(),Ef.width(),Yr=Ef.height(),Os=fp.height(),go=jd.width(),si=dp.width(),Ue||(Ke.css("position","absolute"),Vt.offset?Ke.offset(Vt.offset):Ke.offset(function(ke,Ee){var De=0,Le=ke.outerWidth(),_r=ke.outerHeight(),ui=Ee.outerHeight(),Es=ke[0].ownerDocument,As=Es.documentElement,ka=As.clientWidth,Rf=As.clientHeight,Sm=a(Es).scrollLeft(),Om=a(Es).scrollTop(),Hf=ka+Sm,$d=Rf+Om,Vi=Ee.offset();return Vi.top+=ui,Vi.left-=Math.min(Vi.left,Vi.left+Le>Hf&&Hf>Le?Math.abs(Vi.left+Le-Hf):0),Vi.top-=Math.min(Vi.top,Vi.top+_r>$d&&$d>_r?Math.abs(_r+ui-De):De),Vi}(Ke,Dc))),Bd(),Vt.showPalette&&Fd(),nr.trigger("reflow.spectrum"))}function Wd(){Ps(),Pf=!0,nr.attr("disabled",!0),Dc.addClass("sp-disabled")}(function(){if(n&&Ke.find("*:not(input)").attr("unselectable","on"),Lf(),Mf&&nr.after(xl).hide(),Ca||Af.hide(),Ue)nr.after(Ke).hide();else{var ke=Vt.appendTo==="parent"?nr.parent():a(Vt.appendTo);ke.length!==1&&(ke=a("body")),ke.append(Ke)}function Ee(Le){return Le.data&&Le.data.ignore?(Sa(a(Le.target).closest(".sp-thumb-el").data("color")),Tl()):(Sa(a(Le.target).closest(".sp-thumb-el").data("color")),Tl(),Vt.hideAfterPaletteSelect&&(Oa(!0),Ps())),!1}Id(),Dc.bind("click.spectrum touchstart.spectrum",function(Le){Pf||Rd(),Le.stopPropagation(),a(Le.target).is("input")||Le.preventDefault()}),(nr.is(":disabled")||Vt.disabled===!0)&&Wd(),Ke.click(qr),ci.change(Ff),ci.bind("paste",function(){setTimeout(Ff,1)}),ci.keydown(function(Le){Le.keyCode==13&&Ff()}),Dd.text(Vt.cancelText),Dd.bind("click.spectrum",function(Le){Le.stopPropagation(),Le.preventDefault(),Ud(),Ps()}),Af.attr("title",Vt.clearText),Af.bind("click.spectrum",function(Le){Le.stopPropagation(),Le.preventDefault(),ks=!0,Tl(),Ue&&Oa(!0)}),Nd.text(Vt.chooseText),Nd.bind("click.spectrum",function(Le){Le.stopPropagation(),Le.preventDefault(),n&&ci.is(":focus")&&ci.trigger("change"),ci.hasClass("sp-validation-error")||(Oa(!0),Ps())}),jf.text(Vt.showPaletteOnly?Vt.togglePaletteMoreText:Vt.togglePaletteLessText),jf.bind("click.spectrum",function(Le){Le.stopPropagation(),Le.preventDefault(),Vt.showPaletteOnly=!Vt.showPaletteOnly,Vt.showPaletteOnly||Ue||Ke.css("left","-="+(_m.outerWidth(!0)+5)),Lf()}),no(jd,function(Le,_r,ui){ai=Le/go,ks=!1,ui.shiftKey&&(ai=Math.round(10*ai)/10),Tl()},Nf,If),no(Ef,function(Le,_r){wr=parseFloat(_r/Yr),ks=!1,Vt.showAlpha||(ai=1),Tl()},Nf,If),no(up,function(Le,_r,ui){if(ui.shiftKey){if(!Ts){var Es=Ec*er,As=Un-Ac*Un,ka=Math.abs(Le-Es)>Math.abs(_r-As);Ts=ka?"x":"y"}}else Ts=null;var Rf=!Ts||Ts==="y";(!Ts||Ts==="x")&&(Ec=parseFloat(Le/er)),Rf&&(Ac=parseFloat((Un-_r)/Un)),ks=!1,Vt.showAlpha||(ai=1),Tl()},Nf,If),Nc?(Sa(Nc),kl(),Ol=Vt.preferredFormat||K(Nc).getFormat(),Df(Nc)):kl(),Ue&&Vf();var De=n?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Md.delegate(".sp-thumb-el",De,Ee),Ld.delegate(".sp-thumb-el:nth-child(1)",De,{ignore:!0},Ee)})();var gp={show:Vf,hide:Ps,toggle:Rd,reflow:Ta,option:function(ke,Ee){return ke===r?a.extend({},Vt):Ee===r?Vt[ke]:(Vt[ke]=Ee,ke==="preferredFormat"&&(Ol=Vt.preferredFormat),void Lf())},enable:function(){Pf=!1,nr.attr("disabled",!1),Dc.removeClass("sp-disabled")},disable:Wd,offset:function(ke){Vt.offset=ke,Ta()},set:function(ke){Sa(ke),Oa()},get:Xr,destroy:function(){nr.show(),Dc.unbind("click.spectrum touchstart.spectrum"),Ke.remove(),xl.remove(),e[gp.id]=null},container:Ke};return gp.id=e.push(gp)-1,gp}function Er(){}function qr(ct){ct.stopPropagation()}function Gr(ct,St){var Pt=Array.prototype.slice,zt=Pt.call(arguments,2);return function(){return ct.apply(St,zt.concat(Pt.call(arguments)))}}function no(ct,St,Pt,zt){St=St||function(){},Pt=Pt||function(){},zt=zt||function(){};var le=document,Vt=!1,Ue={},en=0,Je=0,ho="ontouchstart"in window,cr={};function nn(un){un.stopPropagation&&un.stopPropagation(),un.preventDefault&&un.preventDefault(),un.returnValue=!1}function we(un){if(Vt){if(n&&le.documentMode<9&&!un.button)return on();var er=un&&un.touches&&un.touches[0],Un=er&&er.pageX||un.pageX,br=er&&er.pageY||un.pageY,Yr=Math.max(0,Math.min(Un-Ue.left,Je)),go=Math.max(0,Math.min(br-Ue.top,en));ho&&nn(un),St.apply(ct,[Yr,go,un])}}function on(){Vt&&(a(le).unbind(cr),a(le.body).removeClass("sp-dragging"),setTimeout(function(){zt.apply(ct,arguments)},0)),Vt=!1}cr.selectstart=nn,cr.dragstart=nn,cr["touchmove mousemove"]=we,cr["touchend mouseup"]=on,a(ct).bind("touchstart mousedown",function(un){var er=un.which?un.which==3:un.button==2;er||Vt||Pt.apply(ct,arguments)!==!1&&(Vt=!0,en=a(ct).height(),Je=a(ct).width(),Ue=a(ct).offset(),a(le).bind(cr),a(le.body).addClass("sp-dragging"),we(un),nn(un))})}function Kr(){return a.fn.spectrum.inputTypeColorSupport()}function oi(ct,St,Pt){ct=Mn(ct,255),St=Mn(St,255),Pt=Mn(Pt,255);var zt,le,Vt=G(ct,St,Pt),Ue=R(ct,St,Pt),en=(Vt+Ue)/2;if(Vt==Ue)zt=le=0;else{var Je=Vt-Ue;switch(le=en>.5?Je/(2-Vt-Ue):Je/(Vt+Ue),Vt){case ct:zt=(St-Pt)/Je+(St<Pt?6:0);break;case St:zt=(Pt-ct)/Je+2;break;case Pt:zt=(ct-St)/Je+4}zt/=6}return{h:zt,s:le,l:en}}function Fi(ct,St,Pt){ct=Mn(ct,255),St=Mn(St,255),Pt=Mn(Pt,255);var zt,le,Vt=G(ct,St,Pt),Ue=R(ct,St,Pt),en=Vt,Je=Vt-Ue;if(le=Vt===0?0:Je/Vt,Vt==Ue)zt=0;else{switch(Vt){case ct:zt=(St-Pt)/Je+(St<Pt?6:0);break;case St:zt=(Pt-ct)/Je+2;break;case Pt:zt=(ct-St)/Je+4}zt/=6}return{h:zt,s:le,v:en}}function _a(ct,St,Pt,zt){var le=[xa(M(ct).toString(16)),xa(M(St).toString(16)),xa(M(Pt).toString(16))];return zt&&le[0].charAt(0)==le[0].charAt(1)&&le[1].charAt(0)==le[1].charAt(1)&&le[2].charAt(0)==le[2].charAt(1)?le[0].charAt(0)+le[1].charAt(0)+le[2].charAt(0):le.join("")}function Pd(ct,St,Pt,zt){var le;return[xa((le=zt,Math.round(255*parseFloat(le)).toString(16))),xa(M(ct).toString(16)),xa(M(St).toString(16)),xa(M(Pt).toString(16))].join("")}function sm(ct,St){St=St===0?0:St||10;var Pt=K(ct).toHsl();return Pt.s-=St/100,Pt.s=ap(Pt.s),K(Pt)}function am(ct,St){St=St===0?0:St||10;var Pt=K(ct).toHsl();return Pt.s+=St/100,Pt.s=ap(Pt.s),K(Pt)}function lm(ct){return K(ct).desaturate(100)}function cm(ct,St){St=St===0?0:St||10;var Pt=K(ct).toHsl();return Pt.l+=St/100,Pt.l=ap(Pt.l),K(Pt)}function um(ct,St){St=St===0?0:St||10;var Pt=K(ct).toRgb();return Pt.r=G(0,R(255,Pt.r-M(255*(-St/100)))),Pt.g=G(0,R(255,Pt.g-M(255*(-St/100)))),Pt.b=G(0,R(255,Pt.b-M(255*(-St/100)))),K(Pt)}function pm(ct,St){St=St===0?0:St||10;var Pt=K(ct).toHsl();return Pt.l-=St/100,Pt.l=ap(Pt.l),K(Pt)}function fm(ct,St){var Pt=K(ct).toHsl(),zt=(M(Pt.h)+St)%360;return Pt.h=zt<0?360+zt:zt,K(Pt)}function dm(ct){var St=K(ct).toHsl();return St.h=(St.h+180)%360,K(St)}function hm(ct){var St=K(ct).toHsl(),Pt=St.h;return[K(ct),K({h:(Pt+120)%360,s:St.s,l:St.l}),K({h:(Pt+240)%360,s:St.s,l:St.l})]}function gm(ct){var St=K(ct).toHsl(),Pt=St.h;return[K(ct),K({h:(Pt+90)%360,s:St.s,l:St.l}),K({h:(Pt+180)%360,s:St.s,l:St.l}),K({h:(Pt+270)%360,s:St.s,l:St.l})]}function vm(ct){var St=K(ct).toHsl(),Pt=St.h;return[K(ct),K({h:(Pt+72)%360,s:St.s,l:St.l}),K({h:(Pt+216)%360,s:St.s,l:St.l})]}function mm(ct,St,Pt){St=St||6,Pt=Pt||30;var zt=K(ct).toHsl(),le=360/Pt,Vt=[K(ct)];for(zt.h=(zt.h-(le*St>>1)+720)%360;--St;)zt.h=(zt.h+le)%360,Vt.push(K(zt));return Vt}function ym(ct,St){St=St||6;for(var Pt=K(ct).toHsv(),zt=Pt.h,le=Pt.s,Vt=Pt.v,Ue=[],en=1/St;St--;)Ue.push(K({h:zt,s:le,v:Vt})),Vt=(Vt+en)%1;return Ue}function Ed(ct){return ct=parseFloat(ct),(isNaN(ct)||ct<0||ct>1)&&(ct=1),ct}function Mn(ct,St){(function(zt){return typeof zt=="string"&&zt.indexOf(".")!=-1&&parseFloat(zt)===1})(ct)&&(ct="100%");var Pt=function(zt){return typeof zt=="string"&&zt.indexOf("%")!=-1}(ct);return ct=R(St,G(0,parseFloat(ct))),Pt&&(ct=parseInt(ct*St,10)/100),S.abs(ct-St)<1e-6?1:ct%St/parseFloat(St)}function ap(ct){return R(1,G(0,ct))}function ii(ct){return parseInt(ct,16)}function xa(ct){return ct.length==1?"0"+ct:""+ct}function Pc(ct){return ct<=1&&(ct=100*ct+"%"),ct}function bm(ct){return ii(ct)/255}}(wt.default);var pl=function(a){var r=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return r||t.replace(/ /g,"")};const uc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Nu(r,a),r.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},r.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,C.isUndefined)(e)||this.__onInputChange(e)},r.prototype.__onInputChange=function(t){var e=this.model,n=this.opts.onChange,i=t,l=this.getColorEl();if(l){l.spectrum("set",i);var f=l.spectrum("get"),d=i&&pl(f);d&&(i=d)}n?n(i):e.set({value:i},{fromInput:1})},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n=this.model,i=(0,C.isUndefined)(e.def)?n.get("defaults"):e.def,l=(0,C.isUndefined)(t)?(0,C.isUndefined)(i)?"":i:t,f=this.getInputEl(),d=this.getColorEl(),v=l!="none"?l:"";f.value=l,d.get(0).style.backgroundColor=v,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(d.spectrum("set",v),this.noneColor=l=="none",this.movedColor=v)},r.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,n=e.em,i=e.model,l=e.opts,f=this.ppfx,d=l.onChange,v=(0,wt.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),g=v.get(0).style,w=n&&n.config?n.config.el:"",S=n&&n.getConfig&&n.getConfig().colorPicker||{};this.movedColor="";var M,R=!1;this.$el.find("[data-colorp-c]").append(v);var G=function(tt,K){K===void 0&&(K=!0),d?d(tt,!K):(K&&i.setValueFromInput(0,!1),i.setValueFromInput(tt,K))};v.spectrum(ha(ha(ha({color:i.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color"),appendTo:w||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"\u2A2F",palette:[]},S),i.get("colorPicker")||{}),{move:function(tt){var K=pl(tt);t.movedColor=K,g.backgroundColor=K,G(K,!1)},change:function(tt){R=!0;var K=pl(tt);g.backgroundColor=K,G(K),t.noneColor=!1},show:function(tt){R=!1,t.movedColor="",M=d?i.getValue({noDefault:!0}):pl(tt)},hide:function(){R||!M&&!d||(t.noneColor&&(M=""),g.backgroundColor=M,v.spectrum("set",M),G(M,!1))}})),n&&n.on&&this.listenTo(n,"component:selected",function(){t.movedColor&&G(t.movedColor),R=!0,t.movedColor="",v.spectrum("hide")}),this.colorEl=v}return this.colorEl},r.prototype.render=function(){return ul.prototype.render.call(this),this.getColorEl(),this},r}(ul);var pc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Iu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return pc(r,a),r.prototype.templateInput=function(){return""},r.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),n=new uc({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();n.setValue(e,{fromTarget:1}),this.input=n.el}return this.input},r}(Io);var Yp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Yp(r,a),r.prototype.templateInput=function(){return""},r.prototype.onChange=function(){this.handleClick()},r.prototype.handleClick=function(){var t=this.model,e=this.em,n=t.get("command");n&&((0,C.isString)(n)?e.Commands.run(n):n(e.Editor,t))},r.prototype.renderLabel=function(){this.model.get("label")&&Io.prototype.renderLabel.apply(this)},r.prototype.getInputEl=function(){var t=this.model,e=this.ppfx,n=t.props(),i=n.labelButton,l=n.text,f=n.full,d=i||l,v="".concat(e,"btn");return'<button type="button" class="'.concat(v,"-prim").concat(f?" ".concat(v,"--full"):"",'">').concat(d,"</button>")},r}(Io);const ys=fc;fc.prototype.eventCapture=["click button"];var Fu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bs=function(){return bs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},bs.apply(this,arguments)},Vu="trait",Xp="".concat(Vu,":"),Jp="".concat(Xp,"custom"),bn={text:Io,number:Kp,select:ju,checkbox:da,color:Iu,button:ys},Zp=function(a){function r(t){var e=a.call(this,t,"TraitManager",Wp)||this;e.TraitsView=Eu,e.events={all:Vu,custom:Jp};var n=e.config,i=new k.Hn;e.model=i;var l=n.pStylePrefix;e.types=bs({},bn),l&&(n.stylePrefix="".concat(l).concat(n.stylePrefix));var f=(0,C.debounce)(function(){return e.__upSel()},0);i.listenTo(t,"component:toggled",f);var d=(0,C.debounce)(function(){return e.__onUp()},0);return i.listenTo(t,"trait:update",d),e}return Fu(r,a),r.prototype.__upSel=function(){this.select(this.em.getSelected())},r.prototype.__onUp=function(){this.select(this.getSelected())},r.prototype.select=function(t){var e=t?t.getTraits():[];this.model.set({component:t,traits:e}),this.__trgCustom()},r.prototype.getSelected=function(){return this.model.get("component")||null},r.prototype.getCurrent=function(){return this.model.get("traits")||[]},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.getTraitsViewer=function(){return this.view},r.prototype.addType=function(t,e){var n=this.getType("text");this.types[t]=n.extend(e)},r.prototype.getType=function(t){return this.getTypes()[t]},r.prototype.getTypes=function(){return this.types},r.prototype.render=function(){var t=this.view,e=this.em,n=this.getConfig(),i=t&&t.el;return t=new Eu({el:i,collection:[],editor:e,config:n},this.getTypes()),this.view=t,t.el},r.prototype.destroy=function(){this.model.stopListening(),this.model.clear()},r}(jt);const dc=Zp,ga={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};var uo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fl=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var n=t.config||{};e.config=n,e.parentView=t.parentView;var i=n.stylePrefix||"",l=n.pStylePrefix||"",f=e.collection;e.listenTo(f,"add",e.addTo),e.listenTo(f,"reset resetNavigator",e.render),e.listenTo(f,"remove",e.removeChildren),e.className="".concat(i,"layers");var d=n.em;if(n.sortable&&!e.opt.sorter){var v=d.Utils;e.opt.sorter=new v.Sorter({container:n.sortContainer||e.el,containerSel:".".concat(e.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,onEndMove:function(g,w,S){var M=w.getSourceModel();d.setSelected(M,{forceChange:1}),d.trigger("".concat(hr,":end"),S)},avoidSelectOnEnd:1,nested:1,ppfx:l,pfx:i})}return e.$el.data("collection",f),t.parent&&e.$el.data("model",t.parent),e}return uo(r,a),r.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var i=this,l=i.parentView,f=i.opt,d=i.config,v=f.ItemView,g=f.opened,w=f.module,S=e||null,M=new v({ItemView:v,level:f.level,model:t,parentView:l,config:d,sorter:f.sorter,opened:g,module:w}),R=M.render().el;if(S)S.appendChild(R);else if(n!==void 0){var G="before";this.$el.children().length==n&&(n--,G="after"),n<0?this.$el.append(R):this.$el.children().eq(n)[G](R)}else this.$el.append(R);return this.items.push(M),R},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k.G7.prototype.remove.apply(this,t),this.items.map(function(n){return n.remove()}),this},r.prototype.render=function(){var t=this,e=document.createDocumentFragment(),n=this.el;return n.innerHTML="",this.collection.each(function(i){return t.addToCollection(i,e)}),n.appendChild(e),n.className=this.className,this},r}(k.G7);const hc=fl;var Ru=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gc="contentEditable",Hu=function(a){function r(t){var e=a.call(this,t)||this;(0,C.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var n=e,i=n.model,l=n.pfx,f=n.ppfx,d=i.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(d," no-select ").concat(f,"two-color"),e.inputNameCls="".concat(f,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return Ru(r,a),r.prototype.events=function(){return{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-open]":"toggleOpening","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","mouseout [data-toggle-select]":"handleHoverOut","dblclick [data-name]":"handleEdit","keydown [data-name]":"handleEditKey","focusout [data-name]":"handleEditEnd"}},r.prototype.template=function(t){var e=this,n=e.pfx,i=e.ppfx,l=e.config,f=e.clsNoEdit,d=e.module,v=e.opt,g=e.em,w=l.hidable,S=d.getComponents(t).length,M=S?"":this.clsNoChild,R="".concat(this.clsTitle," ").concat(M),G="".concat(this.clsTitleC," ").concat(i,"one-bg"),tt="".concat(this.inputNameCls," ").concat(f," ").concat(i,"no-app"),K=v.level+1,kt="".concat(30+10*K,"px"),Ft=t.getName(),ae=t.getIcon(),me="".concat(n,"layer"),Me=(g==null?void 0:g.getConfig()).icons,Ve=Me.move,Ze=Me.eye,wn=Me.eyeOff,Er=Me.chevron;return`
      `.concat(w?'<i class="'.concat(n,`layer-vis" data-toggle-visible>
            <i class="`).concat(n,'layer-vis-on">').concat(Ze,`</i>
            <i class="`).concat(n,'layer-vis-off">').concat(wn,`</i>
          </i>`):"",`
      <div class="`).concat(G,`">
        <div class="`).concat(R,'" style="padding-left: ').concat(kt,`" data-toggle-select>
          <div class="`).concat(n,'layer-title-inn" title="').concat(Ft,`">
            <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(Er,`</i>
            `).concat(ae?'<span class="'.concat(me,'__icon">').concat(ae,"</span>"):"",`
            <span class="`).concat(tt,'" data-name>').concat(Ft,`</span>
          </div>
        </div>
      </div>
      <div class="`).concat(this.clsCount,'" data-count>').concat(S||"",`</div>
      <div class="`).concat(this.clsMove,'" data-toggle-move>').concat(Ve||"",`</div>
      <div class="`).concat(this.clsChildren,'"></div>')},Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),r.prototype.initComponent=function(){var t=this,e=this.model,n=this.config.onInit,i=e.components();this.listenTo(i,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(l){return t.listenTo(e,l[0],l[1])}),this.$el.data("model",e),this.$el.data("collection",i),e.viewLayer=this,n.bind(this)({component:e,render:this.__render,listenTo:this.listenTo})},r.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},r.prototype.getVisibilityEl=function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},r.prototype.updateVisibility=function(){var t=this,e=t.pfx,n=t.model,i=t.module,l="".concat(e,"layer-hidden"),f=i.isVisible(n)?"removeClass":"addClass";this.$el[f](l),this.getVisibilityEl()[f]("".concat(e,"layer-off"))},r.prototype.toggleVisibility=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setVisible(n,!e.isVisible(n))},r.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,n=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName();d[gc]="true",d.focus(),document.execCommand("selectAll",!1),n.setEditing(!0),i.find(".".concat(this.inputNameCls)).removeClass(l).addClass(f)},r.prototype.handleEditKey=function(t){t.stopPropagation(),((0,I.isEscKey)(t)||(0,I.isEnterKey)(t))&&this.handleEditEnd(t)},r.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,n=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName(),v=d.textContent;d.scrollLeft=0,d[gc]="false",this.setName(v,{component:this.model,propName:"custom-name"}),n.setEditing(!1),i.find(".".concat(this.inputNameCls)).addClass(l).removeClass(f),this.updateName()},r.prototype.setName=function(t,e){var n=e.propName;this.model.set(n,t)},r.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},r.prototype.updateOpening=function(){var t=this,e=t.$el,n=t.model,i=t.pfx,l="open",f="".concat(i,"layer-open"),d=this.getCaret();this.module.isOpen(n)?(e.addClass(l),d.addClass(f)):(e.removeClass(l),d.removeClass(f))},r.prototype.toggleOpening=function(t){var e=this.model,n=this.module;t==null||t.stopImmediatePropagation(),e.get("components").length&&n.setOpen(e,!n.isOpen(e))},r.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{selected:!0},{event:t})},r.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!0})},r.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!1})},r.prototype.startSort=function(t){t.stopPropagation();var e=this.em,n=this.sorter;t.button&&t.button!==0||n&&(n.onStart=function(i){return e.trigger("".concat(hr,":start"),i)},n.onMoveClb=function(i){return e.trigger(hr,i)},n.startSort(t.target))},r.prototype.updateStatus=function(){kn.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},r.prototype.checkChildren=function(){var t=this,e=t.model,n=t.clsNoChild,i=t.$el,l=t.module,f=l.getComponents(e).length,d=i.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),v=this.cnt;v||(v=i.children("[data-count]").get(0),this.cnt=v),d[f?"removeClass":"addClass"](n),v&&(v.innerHTML=f||""),!f&&l.setOpen(e,!1)},r.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},r.prototype.setRoot=function(t){t=(0,C.isString)(t)?this.em.getWrapper().find(t)[0]:t;var e=(0,I.getModel)(t,0);e&&(this.stopListening(),this.model=e,this.initComponent(),this._rendered&&this.render())},r.prototype.updateLayerable=function(){(this.parentView||this).render()},r.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k.G7.prototype.remove.apply(this,t),this.__clearItems(),this},r.prototype.render=function(){var t=this,e=t.model,n=t.config,i=t.pfx,l=t.ppfx,f=t.opt,d=t.sorter;this.__clearItems();var v=f.opened,g=f.module,w=f.ItemView,S=!g.__isLayerable(e),M=this.$el.empty(),R=f.level+1;delete this.inputName,this.items=new hc({ItemView:w,collection:e.get("components"),config:n,sorter:d,opened:v,parentView:this,parent:e,level:R,module:g});var G=this.items.render().$el;return n.showWrapper||R!==1?(M.html(this.template(e)),M.find(".".concat(this.clsChildren)).append(G)):M.append(G),e.get("draggable")&&n.sortable||M.children(".".concat(this.clsMove)).remove(),!g.isVisible(e)&&(this.className+=" ".concat(i,"hide")),S&&(this.className+=" ".concat(l,"hidden")),M.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},r.prototype.__render=function(){var t=this,e=t.model,n=t.config,i={component:e,el:t.el};n.onRender.bind(this)(i),this.em.trigger("layer:render",i)},r}(k.G7);const zu=Hu;var Uu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vc=function(){return vc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},vc.apply(this,arguments)},dl="layer",hl="".concat(dl,":"),rn="".concat(hl,"root"),mc="".concat(hl,"component"),Qp="".concat(hl,"custom"),ws={all:dl,root:rn,component:mc,custom:Qp},yc={mediaText:""},gl=["open","status","locked","custom-name","components","classes"].map(function(a){return"component:update:".concat(a)}).join(" "),tf=function(a){function r(t){var e=a.call(this,t,"LayerManager",ga)||this;return e.events=ws,(0,C.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new ut(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return Uu(r,a),r.prototype.onLoad=function(){var t=this,e=this,n=e.em,i=e.config,l=e.model;l.listenTo(n,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(n,gl,this.__onComponent),this.componentChanged(),l.listenToOnce(n,"load",function(){t.setRoot(i.root),t.__appendTo()})},r.prototype.setRoot=function(t){var e=this.em.getWrapper(),n=(0,I.isComponent)(t)?t:e;return t&&(0,C.isString)(t)&&(0,I.hasWin)()&&(n=e.find(t)[0]||e),this.model.set("root",n),n},r.prototype.getRoot=function(){return this.model.get("root")},r.prototype.getComponents=function(t){var e=this;return t.components().filter(function(n){return e.__isLayerable(n)})},r.prototype.setOpen=function(t,e){t.set("open",e)},r.prototype.isOpen=function(t){return!!t.get("open")},r.prototype.setVisible=function(t,e){var n="__prev-display",i=t.getStyle(yc),l=i.display;if(e){var f=t.get(n);delete i.display,f&&(i.display=f,t.unset(n))}else l&&t.set(n,l),i.display="none";t.setStyle(i,yc),this.updateLayer(t),this.em.trigger("component:toggled")},r.prototype.isVisible=function(t){return(e=t.getStyle(yc))===void 0&&(e={}),(e.display||"").trim().indexOf("none")!==0;var e},r.prototype.setLocked=function(t,e){t.set("locked",e)},r.prototype.isLocked=function(t){return t.get("locked")},r.prototype.setName=function(t,e){t.set("custom-name",e)},r.prototype.getName=function(t){return t.getName()},r.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},r.prototype.setLayerData=function(t,e,n){var i;n===void 0&&(n={});var l=this.em,f=this.config,d=e.open,v=e.selected,g=e.hovered,w=e.visible,S=e.locked,M=e.name,R=vc({fromLayers:!0},n);if((0,I.isDef)(d)&&this.setOpen(t,d),(0,I.isDef)(v))if(v){l.setSelected(t,R);var G=f.scrollCanvas;G&&((i=t.views)===null||i===void 0||i.forEach(function(tt){return tt.scrollIntoView(G)}))}else l.removeSelected(t,R);(0,I.isDef)(g)&&f.showHover&&(g?l.setHovered(t,R):l.setHovered(null,R)),(0,I.isDef)(w)&&w!==this.isVisible(t)&&this.setVisible(t,w),(0,I.isDef)(S)&&this.setLocked(t,S),(0,I.isDef)(M)&&this.setName(t,M)},r.prototype.componentChanged=function(t,e){var n;if(e===void 0&&(e={}),!e.fromLayers){var i=this.em,l=this.config.scrollLayers,f=this.model.get("opened"),d=i.getSelected(),v=d==null?void 0:d.parent();for(var g in f)f[g].set("open",!1),delete f[g];for(;v;)v.set("open",!0),f[v.cid]=v,v=v.parent();if(d&&l){var w=(n=d.viewLayer)===null||n===void 0?void 0:n.el;w==null||w.scrollIntoView(l)}}},r.prototype.getAll=function(){return this.view},r.prototype.render=function(){var t,e,n=this.config,i=this.model,l=zu.extend(n.extend);return this.view=new l({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:l,level:0,config:n,opened:i.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},r.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},r.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(rn,e)},r.prototype.__onComponent=function(t){this.updateLayer(t)},r.prototype.__isLayerable=function(t){var e=t.get("tagName");return(!this.config.hideTextnode||!t.is("textnode")&&e!=="br")&&t.get("layerable")},r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,{container:t.container,root:this.getRoot()})},r.prototype.updateLayer=function(t,e){this.em.trigger(mc,t,e)},r}(jt);const Pn=tf,ef={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};var nf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return nf(r,a),r.getDefaults=function(){return(0,C.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{type:"",src:""}},r.prototype.getType=function(){return this.get("type")},r.prototype.getSrc=function(){return this.get("src")},r.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},r.prototype.getExtension=function(){return this.getFilename().split(".").pop()},r}(k.Hn);const _s=Bu;Bu.prototype.idAttribute="src";var o=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),s=function(){return s=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},s.apply(this,arguments)};const u=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return o(r,a),r.prototype.defaults=function(){return s(s({},_s.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},r}(_s);var c=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),p=function(a){function r(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var n=t.config||{};e.config=n,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var i=e.init&&e.init.bind(e);return i&&i(t),e}return c(r,a),r.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},r.prototype.template=function(t,e){var n=this.pfx;return`
      <div class="`.concat(n,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(n,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(n,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},r.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,C.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},r.prototype.getPreview=function(){return""},r.prototype.getInfo=function(){return""},r.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},r}(k.G7);const h=p;var m=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),y=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},x=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return m(r,a),r.prototype.getPreview=function(){var t=this,e=t.pfx,n=t.ppfx,i=t.model.get("src");return rt(U||(U=y([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,i,e,n)},r.prototype.getInfo=function(){var t=this.pfx,e=this.model,n=e.get("name"),i=e.get("width"),l=e.get("height"),f=e.get("unitDim"),d=i&&l?"".concat(i,"x").concat(l).concat(f):"";return n=n||e.getFilename(),rt(W||(W=y([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),t,n,t,d)},r.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},r.prototype.onClick=function(){var t=this.model,e=this.pfx,n=this.__getBhv().select,i=this.config.onClick,l=this.collection;l.trigger("deselectAll"),this.$el.addClass(e+"highlight"),(0,C.isFunction)(n)?n(t,!1):(0,C.isFunction)(i)?i(t):this.updateTarget(l.target)},r.prototype.onDblClick=function(){var t=this.em,e=this.model,n=this.__getBhv().select,i=this.config.onDblClick,l=this.collection,f=l.target,d=l.onSelect;(0,C.isFunction)(n)?n(e,!0):(0,C.isFunction)(i)?i(e):(this.updateTarget(f),t==null||t.Modal.close()),(0,C.isFunction)(d)&&d(e)},r.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},r}(h);const O=x;var U,W;x.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var dt=function(){return dt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},dt.apply(this,arguments)},ht={types:[],initialize:function(a,r){var t=this;r===void 0&&(r={});var e=r.em;this.em=e,this.opts=r,this.model=function(i,l){var f,d,v;if(i===void 0&&(i={}),l===void 0&&(l={}),i&&i.type){var g=t.getBaseType();f=(v=t.getType(i.type))?v.model:g.model,d=v?v.view:g.view}else{var w=t.recognizeType(i);f=(v=w.type).model,d=v.view,i=w.attributes}var S=new f(i,dt(dt({},l),{em:e}));return S.typeView=d,S};var n=this.init&&this.init.bind(this);n&&n()},recognizeType:function(a){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t],n=e.isType(a);if(n=typeof n=="boolean"&&n?{type:e.id}:n)return{type:e,attributes:n}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t];if(e.id===a)return e}},addType:function(a,r){var t=this.getType(a),e=this.getBaseType(),n=t?t.model:e.model,i=t?t.view:e.view,l=r.model,f=r.view,d=r.isType;l=l instanceof k.Hn||(0,C.isFunction)(l)?l:n.extend(l||{}),f=f instanceof k.G7||(0,C.isFunction)(f)?f:i.extend(f||{}),!this.extendViewApi||r.model||r.view||(f=f.extend(r)),t?(t.model=l,t.view=f,t.isType=d||t.isType):(r.id=a,r.model=l,r.view=f,r.isType=d||function(v){if(v&&v.type==a)return!0},this.getTypes().unshift(r))}};const xt=ht;var Rt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Rt(r,a),r}(k.FE.extend(xt));const ne=Bt;Bt.prototype.types=[{id:"image",model:u,view:O,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var ie=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xt=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var n=e.collection;return e.listenTo(n,"reset",e.renderAssets),e.listenTo(n,"add",e.addToAsset),e.listenTo(n,"remove",e.removedAsset),e.listenTo(n,"deselectAll",e.deselectAll),e}return ie(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,i=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(n,"field ").concat(e,`add-field">
              <input placeholder="`).concat(i==null?void 0:i.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(n,'btn-prim">').concat(i==null?void 0:i.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},r.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim(),i=this.config.handleAdd;if(n){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),i?i.bind(this)(n):this.options.globalCollection.add(n,{at:0})}},r.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},r.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},r.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},r.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},r.prototype.addAsset=function(t,e){e===void 0&&(e=null);var n=e,i=this.collection,l=this.config,f=new t.typeView({model:t,collection:i,config:l}).render().el;if(n)n.appendChild(f);else{var d=this.getAssetsEl();d&&d.insertBefore(f,d.firstChild)}return f},r.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},r.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},r.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(i){return t.addAsset(i,e)}),n.append(e)},r.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},r}(k.G7);const ye=Xt;Xt.prototype.events={submit:"handleSubmit"};var ve=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ce=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},sn=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var n=t.config||{};e.module=t.module,e.config=n,e.em=e.config.em,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=n.disableUpload!==void 0?n.disableUpload:!n.upload&&!n.embedAsBase64,e.multiUpload=n.multiUpload===void 0||n.multiUpload;var i=n.uploadFile;return i?e.uploadFile=i.bind(e):!n.upload&&n.embedAsBase64&&(e.uploadFile=r.embedAsBase64),e.delegateEvents(),e}return ve(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.title,i=t.uploadId,l=t.disabled,f=t.multiUpload;return rt(gr||(gr=Ce([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,n,i,l?"disabled":"",f?"multiple":"")},r.prototype.events=function(){return{"change [data-input]":"uploadFile"}},r.prototype.onUploadStart=function(){var t=this.module;t&&t.__propEv("asset:upload:start")},r.prototype.onUploadEnd=function(t){var e=this.$el,n=this.module;n&&n.__propEv("asset:upload:end",t);var i=e.find("input");i&&i.val("")},r.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv("asset:upload:error",t)},r.prototype.onUploadResponse=function(t,e){var n,i=this,l=i.module,f=i.config,d=i.target;try{n=typeof t=="string"?JSON.parse(t):t}catch{n=t}l&&l.__propEv("asset:upload:response",n),f.autoAdd&&d&&d.add(n.data,{at:0}),this.onUploadEnd(t),e==null||e(n)},r.prototype.uploadFile=function(t,e){var n=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,f=l.beforeUpload;if((f&&f(i))!==!1){var d=new FormData,v=l.params,g=l.customFetch;for(var w in v)d.append(w,v[w]);if(this.multiUpload)for(var S=0;S<i.length;S++)d.append("".concat(l.uploadName,"[]"),i[S]);else i.length&&d.append(l.uploadName,i[0]);this.target;var M=l.upload,R=l.headers,G="X-Requested-With";if(R[G]===void 0&&(R[G]="XMLHttpRequest"),M){this.onUploadStart();var tt={method:"post",credentials:l.credentials||"include",headers:R,body:d};return(g?g(M,tt):Cu(M,tt).then(function(K){return(K.status/200|0)==1?K.text():K.text().then(function(kt){return Promise.reject(kt)})})).then(function(K){return n.onUploadResponse(K,e)}).catch(function(K){return n.onUploadError(K)})}}},r.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(n){e.className="",n.preventDefault(),t.uploadFile(n)})}},r.prototype.initDropzone=function(t){var e=this,n=0,i=this.config,l=t.model,f=t.el,d=l.Editor,v=l.Canvas.getBody(),g=this.ppfx,w="".concat(g,"dropzone-active"),S="".concat(g,"dropzone"),M=function(){f.className=f.className.replace(w,"").trim(),n=0},R=function(){return n||(f.className+=" ".concat(w),n=1),!1},G=function(){return M(),!1},tt=function(K){if(M(),K.preventDefault(),K.stopPropagation(),e.uploadFile(K),i.openAssetsOnDrop&&d){var kt=d.getSelected();d.runCommand("open-assets",{target:kt,onSelect:function(){d.Modal.close(),d.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(S,'">').concat(i.dropzoneContent,"</div>")),M(),"draggable"in f&&[f,v].forEach(function(K){K.ondragover=R,K.ondragleave=G,K.ondrop=tt})},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,i=t.em;return e.html(this.template({title:i&&i.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:n})),this.initDrop(),e.attr("class",n+"file-uploader"),this},r.embedAsBase64=function(t,e){var n=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(FileReader){for(var f=[],d=/^(.+)\/(.+)$/,v=function(S){var M=new Promise(function(R,G){var tt=new FileReader;tt.addEventListener("load",function(K){var kt,Ft=S.name,ae=d.exec(S.type);if((kt=ae?ae[1]:S.type)==="image"){var me={src:tt.result,name:Ft,type:kt,height:0,width:0},Me=new Image;Me.addEventListener("error",function(Ve){G(Ve)}),Me.addEventListener("load",function(){me.height=Me.height,me.width=Me.width,R(me)}),Me.src=me.src}else R(kt?{src:tt.result,name:Ft,type:kt}:tt.result)}),tt.addEventListener("error",function(K){G(K)}),tt.addEventListener("abort",function(K){G("Aborted")}),tt.readAsDataURL(S)});f.push(M)},g=0,w=i;g<w.length;g++)v(w[g]);return Promise.all(f).then(function(S){l.data=S,n.onUploadResponse(l,e)},function(S){n.onUploadError(S)})}this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))},r}(k.G7);const an=sn;var gr,hn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sr=function(){return sr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},sr.apply(this,arguments)},vr=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},xn="asset",En="".concat(xn,":"),dr="".concat(En,"select"),Vn="".concat(En,"update"),An="".concat(En,"add"),jn="".concat(En,"remove"),mr="".concat(jn,":before"),ni="".concat(En,"custom"),po="".concat(En,"open"),ar="".concat(En,"close"),Cn="".concat(En,"upload"),bc="".concat(Cn,":start"),Fo="".concat(Cn,":end"),Mi="".concat(Cn,":error"),Li="".concat(Cn,":response"),zn="open-assets",xs={all:xn,select:dr,update:Vn,add:An,remove:jn,removeBefore:mr,custom:ni,open:po,close:ar,uploadStart:bc,uploadEnd:Fo,uploadError:Mi,uploadResponse:Li},wc=function(a){function r(t){var e=a.call(this,t,"AssetManager",new ne([],t),xs,ef)||this;e.storageKey="assets",e.Asset=_s,e.Assets=ne;var n=e,i=n.all,l=n.config;e.assetsVis=new ne([]);var f=l.pStylePrefix;return f&&(l.stylePrefix="".concat(f).concat(l.stylePrefix)),i.on("add",function(d){return e.getAllVisible().add(d)}),i.on("remove",function(d){return e.getAllVisible().remove(d)}),e.__onAllEvent=(0,C.debounce)(function(){return e.__trgCustom()},0),e}return hn(r,a),r.prototype.__propEv=function(t){for(var e,n,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];(e=this.em).trigger.apply(e,vr([t],i,!1)),(n=this.getAll()).trigger.apply(n,vr([t],i,!1))},r.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;(t.container||e.open)&&this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(n,i){return t.remove(n,i)},select:function(n,i){var l=t.add(n);(0,C.isFunction)(e.select)&&e.select(l,i)},options:e.options||{}}},r.prototype.open=function(t){t===void 0&&(t={}),this.em.Commands.run(zn,sr({types:["image"],select:function(){}},t))},r.prototype.close=function(){this.em.Commands.stop(zn)},r.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(zn))},r.prototype.add=function(t,e){return e===void 0&&(e={}),e.at===void 0&&(e.at=0),this.all.add(t,e)},r.prototype.get=function(t){return this.all.where({src:t})[0]||null},r.prototype.getAll=function(){return this.all},r.prototype.getAllVisible=function(){return this.assetsVis},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t)},r.prototype.getContainer=function(){var t;return this.__getBehaviour().container||((t=this.am)===null||t===void 0?void 0:t.el)},r.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},r.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var n=this.__viewParams();n.fu=this.FileUploader(),this.am=new ye(sr({},n)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},r.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},r.prototype.addType=function(t,e){this.getAll().addType(t,e)},r.prototype.getType=function(t){return this.getAll().getType(t)},r.prototype.getTypes=function(){return this.getAll().getTypes()},r.prototype.AssetsView=function(){return this.am},r.prototype.FileUploader=function(){return this.fu||(this.fu=new an(this.__viewParams())),this.fu},r.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this.em,n=this.events;e.on("run:".concat(zn),function(){return t.__propEv(n.open)}),e.on("stop:".concat(zn),function(){return t.__propEv(n.close)})},r.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},r.prototype.setTarget=function(t){this.assetsVis.target=t},r.prototype.onSelect=function(t){this.assetsVis.onSelect=t},r.prototype.onClick=function(t){this.config.onClick=t},r.prototype.onDblClick=function(t){this.config.onDblClick=t},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=sr(sr({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(t){return this._bhv||{}},r.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},r}(Dt);const Gd=wc;var rf={placeholder:"eg. Text here"};const Kd={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:rf,alt:rf,title:rf,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};var Yd=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xd=function(a){function r(t){var e=a.call(this,t,"I18n",Kd)||this,n=e.config.messagesAdd;return n&&e.addMessages(n),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return Yd(r,a),r.prototype.setLocale=function(t){var e=this.em,n=this.config,i={value:t,valuePrev:n.locale};return e&&e.trigger("i18n:locale",i),n.locale=t,this},r.prototype.getLocale=function(){return this.config.locale},r.prototype.getMessages=function(t,e){e===void 0&&(e={});var n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},r.prototype.setMessages=function(t){var e=this.em;return this.config.messages=t,e&&e.trigger("i18n:update",t),this},r.prototype.addMessages=function(t){var e=this.em,n=this.config.messages;return e&&e.trigger("i18n:add",t),this.setMessages((0,I.deepMerge)(n,t)),this},r.prototype.t=function(t,e){e===void 0&&(e={});var n=this.config,i=e.params||{},l=e.l||this.getLocale(),f=e.lFlb||n.localeFallback,d=this._getMsg(t,l,e);return d||(d=this._getMsg(t,f,e)),!d&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),d=d&&(0,C.isString)(d)?this._addParams(d,i):d},r.prototype._localLang=function(){var t=(0,I.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},r.prototype._addParams=function(t,e){var n=new RegExp("{([\\w\\d-]*)}","g");return t.replace(n,function(i,l){return e[l]||""}).trim()},r.prototype._getMsg=function(t,e,n){n===void 0&&(n={});var i=this.getMessages(e,n);if(i){var l=i[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(f,d){if(!(0,C.isUndefined)(f))return f[d]},i)),l}},r.prototype._debug=function(t,e){e===void 0&&(e={});var n=this.em,i=this.config;(e.debug||i.debug)&&n&&n.logWarning(t)},r.prototype.destroy=function(){},r}(jt);const Jd=Xd;var Zd=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cs=function(){return Cs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Cs.apply(this,arguments)},Qd=function(){},th=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zd(r,a),r.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,C.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var n=e.container;this.el=typeof n=="string"?document.querySelector(n):n,this.$el=(0,wt.default)(this.el),this.containerSel=e.containerSel||"div",this.itemSel=e.itemSel||"div",this.draggable=e.draggable||!0,this.nested=!!e.nested,this.pfx=e.pfx||"",this.ppfx=e.ppfx||"",this.freezeClass=e.freezeClass||this.pfx+"freezed",this.onStart=e.onStart||Qd,this.onEndMove=e.onEndMove,this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||"v",this.onMoveClb=e.onMove,this.relative=e.relative||!1,this.ignoreViewChildren=!!e.ignoreViewChildren,this.plh=e.placer,this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.em=e.em,this.canvasRelative=!!e.canvasRelative,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},r.prototype.getScale=function(){return(0,C.result)(this,"scale")||1},r.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el=typeof e=="string"?document.querySelector(e):e,this.$el=(0,wt.default)(this.el)}return this.el},r.prototype.getDocuments=function(t){var e=this.em,n=t?t.ownerDocument:e==null?void 0:e.Canvas.getBody().ownerDocument,i=[document];return n&&i.push(n),i},r.prototype.updateOffset=function(){var t,e=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=e.top,this.offLeft=e.left},r.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},r.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var n=e.get("Canvas"),i=n.getDocument(),l=null;if(i.caretRangeFromPoint){var f=(0,I.getPointerEvent)(t);l=i.caretRangeFromPoint(f.clientX,f.clientY)}else t.rangeParent&&(l=i.createRange()).setStart(t.rangeParent,t.rangeOffset);var d=n.getWindow().getSelection();n.getFrameEl().focus(),d.removeAllRanges(),l&&d.addRange(l),this.setContentEditable(this.activeTextModel,!0)}},r.prototype.setContentEditable=function(t,e){if(t){var n=t.getEl();n.contentEditable!=e&&(n.contentEditable=e)}},r.prototype.toggleSortCursor=function(t){var e=this.em,n=e&&e.get("Canvas");n&&(t?n.startAutoscroll():n.stopAutoscroll())},r.prototype.setDragHelper=function(t,e){for(var n=e||"",i=t.cloneNode(!0),l=t.getBoundingClientRect(),f=getComputedStyle(t),d="",v=0;v<f.length;v++){var g=f[v];d+="".concat(g,":").concat(f.getPropertyValue(g),";")}document.body.appendChild(i),i.className+=" ".concat(this.pfx,"bdrag"),i.setAttribute("style",d),this.dragHelper=i,i.style.width="".concat(l.width,"px"),i.style.height="".concat(l.height,"px"),n&&this.moveDragHelper(n),this.em&&(0,wt.default)(this.em.Canvas.getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper),(0,wt.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},r.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(this.dragHelper&&e){var n=t.pageY,i=t.pageX,l=0,f=0,d=(e.defaultView||e.parentWindow).frameElement,v=this.dragHelper.style;if(d){var g=d.getBoundingClientRect();l=g.top+document.documentElement.scrollTop,f=g.left+document.documentElement.scrollLeft,n=t.clientY,i=t.clientX}v.top=n+l+"px",v.left=i+f+"px"}},r.prototype.matches=function(t,e){return I.matches.call(t,e)},r.prototype.closest=function(t,e){if(t)for(var n=t.parentNode;n&&n.nodeType===1;){if(this.matches(n,e))return n;n=n.parentNode}},r.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},r.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement("div"),n=document.createElement("div");return e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",n.className=t+"placeholder-int",e.appendChild(n),e},r.prototype.startSort=function(t,e){var n,i;e===void 0&&(e={});var l,f=this,d=f.em,v=f.itemSel,g=f.containerSel,w=f.plh,S=this.getContainerEl(e.container),M=this.getDocuments(t);delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(v,", ").concat(g))&&(t=this.closest(t,v)),this.sourceEl=t,w||(this.plh=this.createPlaceholder(),S.appendChild(this.plh)),t&&((l=this.getSourceModel(t))&&l.set&&l.set("status","freezed"),this.srcModel=l),(0,I.on)(S,"mousemove dragover",this.onMove),(0,I.on)(M,"mouseup dragend touchend",this.endMove),(0,I.on)(M,"keydown",this.rollback),this.onStart({sorter:this,target:l,parent:l&&((n=l.parent)===null||n===void 0?void 0:n.call(l)),index:l&&((i=l.index)===null||i===void 0?void 0:i.call(l))}),d==null||d.clearSelection(),this.toggleSortCursor(!0),d==null||d.trigger("sorter:drag:start",t,l)},r.prototype.getTargetModel=function(t){var e=t||this.target;return(0,wt.default)(e).data("model")},r.prototype.getSourceModel=function(t,e){var n=this,i=e===void 0?{}:e,l=i.target,f=i.avoidChildren,d=f===void 0?1:f,v=this.em,g=this.sourceEl,w=t||g,S=this.dropModel,M=this.dropContent,R=function(kt){return kt&&l&&kt.opt&&kt.opt.avoidChildren&&n.isTextableActive(kt,l)};if(M&&v){if(R(S)&&(S=void 0),!S){var G=v.Components.getComponents(),tt={avoidChildren:d,avoidStore:1,avoidUpdateStyle:1},K=G.add(M,Cs(Cs({},tt),{temporary:!0}));if(S=(S=G.remove(K,tt))instanceof Array?S[0]:S,this.dropModel=S,R(S))return this.getSourceModel(w,{target:l,avoidChildren:0})}return S}return w&&(0,wt.default)(w).data("model")},r.prototype.selectTargetModel=function(t,e){if(!(t instanceof k.FE||e&&e===t)){var n=this.targetModel;n&&n!==this.srcModel&&n.set("status",""),t&&t.set&&(t.set("status","selected-parent"),this.targetModel=t)}},r.prototype.onMove=function(t){var e=t,n=this,i=n.em,l=n.onMoveClb,f=n.plh,d=n.customTarget;this.moved=!0;var v=f.style.display;v&&v!=="none"||(f.style.display="block");var g=this.offset(this.el);this.elT=this.wmargin?Math.abs(g.top):g.top,this.elL=this.wmargin?Math.abs(g.left):g.left;var w=t.pageY-this.elT+this.el.scrollTop,S=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var M=i.get("Canvas").getMouseRelativeCanvas(t,{noScroll:1});S=M.x,w=M.y}this.rX=S,this.rY=w,this.eventMove=t;var R=this.getSourceModel(),G=d?d({sorter:this,event:t}):t.target,tt=this.dimsFromTarget(G,S,w),K=this.target,kt=K&&this.getTargetModel(K);if(this.selectTargetModel(kt,R),kt||(f.style.display="none"),K){this.lastDims=tt;var Ft=this.findPosition(tt,S,w);this.isTextableActive(R,kt)?(this.activeTextModel=kt,f.style.display="none",this.lastPos=Ft,this.updateTextViewCursorPosition(e)):(this.disableTextable(),delete this.activeTextModel,this.lastPos&&this.lastPos.index==Ft.index&&this.lastPos.method==Ft.method||(this.movePlaceholder(this.plh,tt,Ft,this.prevTargetDim),this.$plh||(this.$plh=(0,wt.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=Ft)),(0,C.isFunction)(l)&&l({event:t,target:R,parent:kt,index:Ft.index+(Ft.method=="after"?1:0)}),i&&i.trigger("sorter:drag",{target:K,targetModel:kt,sourceModel:R,dims:tt,pos:Ft,x:S,y:w})}},r.prototype.isTextableActive=function(t,e){var n;return((n=t==null?void 0:t.get)===null||n===void 0?void 0:n.call(t,"textable"))&&(e==null?void 0:e.isInstanceOf("text"))},r.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},r.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var n=t;return n.offsetHeight,!!this.styleInFlow(n,e)},r.prototype.styleInFlow=function(t,e){if(!(0,I.isTextNode)(t)){var n=t.style||{},i=(0,wt.default)(t),l=e&&(0,wt.default)(e);if(!n.overflow||n.overflow==="visible"){var f=i.css("float");if(!(f&&f!=="none"||l&&l.css("display")=="flex"&&l.css("flex-direction")!=="column")){switch(n.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(i.css("display")){case"block":case"list-item":case"table":case"flex":return!0}}}}},r.prototype.validTarget=function(t,e){var n=this.getTargetModel(t),i=this.getSourceModel(e,{target:n}),l={valid:!0,src:e=i&&i.view&&i.view.el,srcModel:i,trg:t=n&&n.view&&n.view.el,trgModel:n,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!e||!t)return l.valid=!1,l;var f=i.get("draggable");if((0,C.isFunction)(f)){var d=f(i,n);l.dragInfo=d,l.draggable=d,f=d}else f=f instanceof Array?f.join(", "):f,l.dragInfo=f,f=(0,C.isString)(f)?this.matches(t,f):f,l.draggable=f;var v=n.get("droppable");return(0,C.isFunction)(v)?(d=v(i,n),l.droppable=d,l.dropInfo=d,v=d):(v=(v=v instanceof k.FE?1:v)instanceof Array?v.join(", "):v,l.dropInfo=v,v=(0,C.isString)(v)?this.matches(e,v):v,v=f&&this.isTextableActive(i,n)?1:v,l.droppable=v),v&&f||(l.valid=!1),l},r.prototype.dimsFromTarget=function(t,e,n){var i=this.em,l=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return l;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var f=this.validTarget(t);if(i&&i.trigger("sorter:drag:validation",f),!f.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,n);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(l=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,n)||!this.nested&&!this.cacheDims.length){var d=this.targetP;d&&this.validTarget(d).valid&&(l=this.cacheDimsP,this.target=d)}return delete this.lastPos,l},r.prototype.getTargetFromEl=function(t){var e,n=t,i=this.targetPrev,l=this.em,f=this.containerSel,d=this.itemSel;if(this.matches(n,"".concat(d,", ").concat(f))||(n=this.closest(n,d)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(","))),i&&i!=n&&delete this.targetPrev,!this.targetPrev){e=this.closest(n,f);var v=this.validTarget(n);if(l&&l.trigger("sorter:drag:validation",v),!v.valid&&e)return this.getTargetFromEl(e);this.targetPrev=n}return this.nearElBorders(n)&&(e=this.closest(n,f))&&this.validTarget(e).valid&&(n=e),n},r.prototype.nearElBorders=function(t){var e=10,n=t.getBoundingClientRect(),i=t.ownerDocument.body,l=this.getCurrentPos(),f=l.x,d=l.y,v=n.top+i.scrollTop,g=n.left+i.scrollLeft,w=n.width,S=n.height;if(d<v+e||d>v+S-e||f<g+e||f>g+w-e)return 1},r.prototype.getCurrentPos=function(){var t=this.eventMove;return{x:(t==null?void 0:t.pageX)||0,y:(t==null?void 0:t.pageY)||0}},r.prototype.getDim=function(t){var e,n,i,l,f=this.em,d=this.canvasRelative,v=f==null?void 0:f.Canvas,g=v?v.getElementOffsets(t):{};if(d&&f){var w=v.getElementPos(t,{noScroll:1});e=w.top,n=w.left,i=w.height,l=w.width}else{var S=this.offset(t);e=this.relative?t.offsetTop:S.top-(this.wmargin?-1:1)*this.elT,n=this.relative?t.offsetLeft:S.left-(this.wmargin?-1:1)*this.elL,i=t.offsetHeight,l=t.offsetWidth}return{top:e,left:n,height:i,width:l,offsets:g}},r.prototype.getChildrenDim=function(t){var e=this,n=[];if(!t)return n;var i=this.getTargetModel(t);if(i&&i.view&&!this.ignoreViewChildren){var l=i.getCurrentView?i.getCurrentView():i.view;t=l.getChildrenContainer()}return(0,C.each)(t.children,function(f,d){var v=f,g=(0,I.getModel)(v,wt.default),w=g&&g.index?g.index():d;if((0,I.isTextNode)(v)||e.matches(v,e.itemSel)){var S,M=e.getDim(v),R=e.direction;S=R=="v"||R!="h"&&e.isInFlow(v,t),M.dir=S,M.el=v,M.indexEl=w,n.push(M)}}),n},r.prototype.nearBorders=function(t,e,n){var i=!1,l=this.borderOffset,f=e||0,d=n||0,v=t.top,g=t.left,w=t.height,S=t.width;return(v+l>d||d>v+w-l||g+l>f||f>g+S-l)&&(i=!0),i},r.prototype.findPosition=function(t,e,n){for(var i,l={index:0,indexEl:0,method:"before"},f=0,d=0,v=0,g=0,w=0,S=0,M=0,R=t.length;M<R;M++){var G=(i=t[M]).top,tt=i.left,K=i.height,kt=i.width;if(S=G+K,g=tt+kt/2,w=G+K/2,!(d&&tt>d||v&&w>=v||f&&tt+kt<f))if(l.index=M,l.indexEl=i.indexEl,i.dir){if(n<w){l.method="before";break}l.method="after"}else n<S&&(v=S),e<g?(d=g,l.method="before"):(f=g,l.method="after")}return l},r.prototype.movePlaceholder=function(t,e,n,i){var l=0,f=0,d=0,v="",g="",w="px",S=5,M=n.method,R=e[n.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),R){var G=R.top,tt=R.left,K=R.height,kt=R.width;R.dir?(v=kt+w,g="auto",f=M=="before"?G-l:G+K-l,d=tt):(v="auto",g=K-2*l+w,f=G+l,d=M=="before"?tt-l:tt+kt-l,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested)return void(t.style.display="none");if(i){var Ft=i.offsets||{},ae=Ft.paddingTop||S,me=Ft.paddingLeft||S;f=i.top+ae,d=i.left+me,v=parseInt("".concat(i.width))-2*me+w,g="auto"}}t.style.top=f+w,t.style.left=d+w,v&&(t.style.width=v),g&&(t.style.height=g)},r.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},r.prototype.sort=function(t,e){var n=t.parents.filter(function(l){return e.parents.includes(l)})[0];if(!n)return e.model.index()-t.model.index();var i=t.parents[t.parents.indexOf(n)-1];return e.parents[e.parents.indexOf(n)-1].index()-i.index()},r.prototype.endMove=function(){var t,e=this,n=this.sourceEl,i=[],l=this.getDocuments(),f=this.getContainerEl(),d=this.onEndMove,v=this.onEnd,g=this.target,w=this.lastPos;if((0,I.off)(f,"mousemove dragover",this.onMove),(0,I.off)(l,"mouseup dragend touchend",this.endMove),(0,I.off)(l,"keydown",this.rollback),this.plh.style.display="none",n&&(t=this.getSourceModel(),this.selectOnEnd&&t&&t.set&&(t.set("status",""),t.set("status","selected"))),this.moved&&g){var S=this.toMove,M=(0,C.isArray)(S)?S:S?[S]:[n],R=0;M.length===1?i.push(this.move(g,M[0],w)):M.map(function(K){return{model:K,parents:e.parents(K)}}).sort(this.sort).forEach(function(K){var kt=K.model,Ft=kt.index(),ae=kt.parent().getEl();i.push(e.move(g,kt,Cs(Cs({},w),{indexEl:w.indexEl-R,index:w.index-R}))),ae===g&&Ft<=w.index&&R++})}this.plh&&(this.plh.style.display="none");var G=this.dragHelper;if(G&&(G.parentNode.removeChild(G),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,C.isFunction)(d)){var tt={target:t,parent:t&&t.parent(),index:t&&t.index()};i.length?i.forEach(function(K){return d(K,e,tt)}):d(null,this,Cs(Cs({},tt),{cancelled:1}))}(0,C.isFunction)(v)&&v({sorter:this})},r.prototype.move=function(t,e,n){var i,l,f=this.em,d=this.dropContent,v=(0,I.getElement)(e),g=[],w=n.method==="after"?n.indexEl+1:n.indexEl,S=this.validTarget(t,v),M=(0,wt.default)(t).data("collection"),R=S.trgModel,G=S.srcModel,tt=S.draggable,K=R instanceof k.FE?1:S.droppable;if(M&&K&&tt){var kt={at:w,action:"move-component"},Ft=this.isTextableActive(G,R);if(d)i=(0,C.isFunction)(d)?d():d,kt.avoidUpdateStyle=!0,kt.action="add-component";else{var ae=G.collection.indexOf(G),me=M===G.collection;(!me||!(ae===w||ae===w-1)||Ft)&&(i=G.collection.remove(G,{temporary:!0}),me&&w>ae&&(kt.at=w-1))}i&&(Ft?(delete kt.at,l=R.getView().insertComponent(i,kt)):l=M.add(i,kt)),delete this.dropContent,delete this.prevTarget}else if(f){var Me=S.dropInfo||(R==null?void 0:R.get("droppable")),Ve=S.dragInfo||(G==null?void 0:G.get("draggable"));!M&&g.push("Target collection not found"),!K&&Me&&g.push("Target is not droppable, accepts [".concat(Me,"]")),!tt&&Ve&&g.push("Component not draggable, acceptable by [".concat(Ve,"]")),f.logWarning("Invalid target position",{errors:g,model:G,context:"sorter",target:R})}return f==null||f.trigger("sorter:drag:end",{targetCollection:M,modelToDrop:i,warns:g,validResult:S,dst:t,srcEl:v}),l},r.prototype.rollback=function(t){(0,I.off)(this.getDocuments(),"keydown",this.rollback),(t.which||t.keyCode)==27&&(this.moved=!1,this.endMove())},r}(k.G7);const eh=th;var va=function(){return va=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},va.apply(this,arguments)},nh=function(){function a(r){r===void 0&&(r={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=va({},this.defOpts),this.setOptions(r),(0,C.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(r,t){r===void 0&&(r={}),this.opts=va(va({},t?this.defOpts:this.opts),r),this.setup()},a.prototype.setup=function(){var r=this.opts,t=r.prefix||"",e=r.appendTo||document.body,n=this.container;for(n||((n=document.createElement("div")).className="".concat(t,"resizer-c"),e.appendChild(n),this.container=n);n.firstChild;)n.removeChild(n.firstChild);var i={};for(var l in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(d){return i[d]=r[d]?function(v,g){g===void 0&&(g={});var w=g.prefix||"",S=document.createElement("i");return S.className=w+"resizer-h "+w+"resizer-h-"+v,S.setAttribute("data-"+w+"handler",v),S}(d,r):null}),i){var f=i[l];f&&n.appendChild(f)}this.handlers=i,this.mousePosFetcher=r.mousePosFetcher,this.updateTarget=r.updateTarget,this.posFetcher=r.posFetcher,this.onStart=r.onStart,this.onMove=r.onMove,this.onEnd=r.onEnd,this.onUpdateContainer=r.onUpdateContainer},a.prototype.toggleFrames=function(r){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,C.each)(t,function(e){return e.style.pointerEvents=r?"none":""})}},a.prototype.isHandler=function(r){var t=this.handlers;for(var e in t)if(t[e]===r)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var r;return(r=this.el)===null||r===void 0?void 0:r.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(r,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(r,t):function(n,i){var l=i||window,f=n.getBoundingClientRect();return{left:f.left+l.pageXOffset,top:f.top+l.pageYOffset,width:f.width,height:f.height}}(r)},a.prototype.focus=function(r){r&&r===this.el||(this.el=r,this.updateContainer({forceShow:!0}),(0,I.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,I.off)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(r){var t=r;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,n=this.getParentEl(),i=this.opts||{},l=this.mousePosFetcher,f="data-"+i.prefix+"handler",d=this.getElementPos(e,{target:"el"}),v=this.getElementPos(n),g=t.target;this.handlerAttr=g.getAttribute(f),this.clickedHandler=g,this.startDim={t:d.top,l:d.left,w:d.width,h:d.height},this.rectDim={t:d.top,l:d.left,w:d.width,h:d.height},this.startPos=l?l(t):{x:t.clientX,y:t.clientY},this.parentDim={t:v.top,l:v.left,w:v.width,h:v.height};var w=this.getDocumentEl();this.docs=w,(0,I.on)(w,"pointermove",this.move),(0,I.on)(w,"keydown",this.handleKeyDown),(0,I.on)(w,"pointerup",this.stop),(0,C.isFunction)(this.onStart)&&this.onStart(t,{docs:w,config:i,el:e,resizer:this}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(r){var t=r,e=this.onMove,n=this.mousePosFetcher,i=n?n(t):{x:t.clientX,y:t.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(r){var t=this.el,e=this.opts,n=this.docs||this.getDocumentEl();(0,I.off)(n,"pointermove",this.move),(0,I.off)(n,"keydown",this.handleKeyDown),(0,I.off)(n,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,C.isFunction)(this.onEnd)&&this.onEnd(r,{docs:n,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(r){var t=this.el,e=this.opts,n=this.rectDim,i=this.updateTarget,l=this.getSelectedHandler(),f=e.unitHeight,d=e.unitWidth,v=e.keyWidth,g=e.keyHeight;if((0,C.isFunction)(i))i(t,n,{store:r,selectedHandler:l,resizer:this,config:e});else{var w=t.style;w[v]=n.w+d,w[g]=n.h+f}this.updateContainer()},a.prototype.updateContainer=function(r){var t;r===void 0&&(r={});var e=this,n=e.opts,i=e.container,l=e.el,f=i.style;!n.avoidContainerUpdate&&l&&r.forceShow&&(f.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:i,resizer:this,opts:va(va({},n),r)})},a.prototype.getSelectedHandler=function(){var r=this.handlers;if(this.selectedHandler){for(var t in r)if(r[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(r){r.keyCode===27&&(this.rectDim=this.startDim,this.stop(r))},a.prototype.handleMouseDown=function(r){var t=r.target;this.isHandler(t)?(this.selectedHandler=t,this.start(r)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(r){var t,e=this.opts||{},n=e.step,i=this.startDim,l=e.minDim,f=e.maxDim,d=r.delta.x,v=r.delta.y,g=this.parentDim.w,w=this.parentDim.h,S=this.opts.unitWidth,M=this.opts.unitHeight,R=S==="%"?i.w/100*g:i.w,G=M==="%"?i.h/100*w:i.h,tt={t:0,l:0,w:R,h:G};if(r){var K=r.handlerAttr;~K.indexOf("r")&&(t=S==="%"?(0,I.normalizeFloat)((R+d*n)/g*100,.01):(0,I.normalizeFloat)(R+d*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),tt.w=t),~K.indexOf("b")&&(t=M==="%"?(0,I.normalizeFloat)((G+v*n)/w*100,.01):(0,I.normalizeFloat)(G+v*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),tt.h=t),~K.indexOf("l")&&(t=S==="%"?(0,I.normalizeFloat)((R-d*n)/g*100,.01):(0,I.normalizeFloat)(R-d*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),tt.w=t),~K.indexOf("t")&&(t=M==="%"?(0,I.normalizeFloat)((G-v*n)/w*100,.01):(0,I.normalizeFloat)(G-v*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),tt.h=t);var kt=e.ratioDefault?!r.keys.shift:r.keys.shift;if(K.indexOf("c")<0&&kt){var Ft=i.w/i.h;tt.w/tt.h>Ft?tt.h=Math.round(tt.w/Ft):tt.w=Math.round(tt.h*Ft)}return~K.indexOf("l")&&(tt.l=i.w-tt.w),~K.indexOf("t")&&(tt.t=i.h-tt.h),tt}},a}();const rh=nh;var oh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),of=function(){return of=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},of.apply(this,arguments)};const ih=function(a){function r(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=eh,e.Resizer=rh,e.Dragger=Jr.Z,e.helpers=of({},I),e}return oh(r,a),r.prototype.destroy=function(){},r}(jt);var eo,fo={},Br={16:!1,18:!1,17:!1,91:!1},Uf="all",ma={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},Bf={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},sf=function(a){return Bf[a]||a.toUpperCase().charCodeAt(0)},vl=[];for(eo=1;eo<20;eo++)Bf["f"+eo]=111+eo;function _c(a,r){for(var t=a.length;t--;)if(a[t]===r)return t;return-1}function sh(a,r){if(a.length!=r.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==r[t])return!1;return!0}var ah={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function lh(a){for(eo in Br)Br[eo]=a[ah[eo]]}function ch(a){var r,t=a.keyCode,e=_c(vl,t);if(e>=0&&vl.splice(e,1),t!=93&&t!=224||(t=91),t in Br)for(r in Br[t]=!1,ma)ma[r]==t&&(Wr[r]=!1)}function uh(){for(eo in Br)Br[eo]=!1;for(eo in ma)Wr[eo]=!1}function Wr(a,r,t){var e,n;e=Wf(a),t===void 0&&(t=r,r="all");for(var i=0;i<e.length;i++)n=[],(a=e[i].split("+")).length>1&&(n=$f(a),a=[a[a.length-1]]),a=a[0],(a=sf(a))in fo||(fo[a]=[]),fo[a].push({shortcut:e[i],scope:r,method:t,key:e[i],mods:n})}for(eo in ma)Wr[eo]=!1;function af(){return Uf||"all"}function Wf(a){var r;return(r=(a=a.replace(/\s/g,"")).split(","))[r.length-1]==""&&(r[r.length-2]+=","),r}function $f(a){for(var r=a.slice(0,a.length-1),t=0;t<r.length;t++)r[t]=ma[r[t]];return r}function lf(a,r,t){a.addEventListener?a.addEventListener(r,t,!1):a.attachEvent&&a.attachEvent("on"+r,function(){t(window.event)})}Wr.setScope=function(a){Uf=a||"all"},Wr.getScope=af,Wr.deleteScope=function(a){var r,t,e;for(r in fo)for(t=fo[r],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++},Wr.filter=function(a){var r=(a.target||a.srcElement).tagName;return!(r=="INPUT"||r=="SELECT"||r=="TEXTAREA")},Wr.isPressed=function(a){return typeof a=="string"&&(a=sf(a)),_c(vl,a)!=-1},Wr.getPressedKeyCodes=function(){return vl.slice(0)},Wr.unbind=function(a,r){var t,e,n,i,l,f=[];for(t=Wf(a),i=0;i<t.length;i++){if((e=t[i].split("+")).length>1&&(f=$f(e)),a=e[e.length-1],a=sf(a),r===void 0&&(r=af()),!fo[a])return;for(n=0;n<fo[a].length;n++)(l=fo[a][n]).scope===r&&sh(l.mods,f)&&(fo[a][n]={})}},Wr.handlers=fo,Wr.init=function(a){lf(a.document,"keydown",function(r){(function(t){var e,n,i,l,f,d;if(e=t.keyCode,_c(vl,e)==-1&&vl.push(e),e!=93&&e!=224||(e=91),e in Br)for(i in Br[e]=!0,ma)ma[i]==e&&(Wr[i]=!0);else if(lh(t),Wr.filter.call(this,t)&&e in fo){for(d=af(),l=0;l<fo[e].length;l++)if((n=fo[e][l]).scope==d||n.scope=="all"){for(i in f=n.mods.length>0,Br)(!Br[i]&&_c(n.mods,+i)>-1||Br[i]&&_c(n.mods,+i)==-1)&&(f=!1);(n.mods.length!=0||Br[16]||Br[18]||Br[17]||Br[91])&&!f||n.method(t,n)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}})(r)}),lf(a.document,"keyup",ch),lf(a,"focus",uh)};const xc=Wr,ph={defaults:{"core:undo":{keys:"\u2318+z, ctrl+z",handler:"core:undo"},"core:redo":{keys:"\u2318+shift+z, ctrl+shift+z",handler:"core:redo"},"core:copy":{keys:"\u2318+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"\u2318+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};var fh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qf=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};(0,I.hasWin)()&&xc.init(window);var dh=function(a){function r(t){var e=a.call(this,t,"Keymaps",ph)||this;return e.keymaster=xc,e.keymaps={},e}return fh(r,a),r.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}},r.prototype.add=function(t,e,n,i){i===void 0&&(i={});var l=this.em,f=l.Commands,d=l.getEditor(),v=l.Canvas,g={id:t,keys:e,handler:n};return this.keymaps[t]&&this.remove(t),this.keymaps[t]=g,xc(e,function(w,S){var M={event:w,h:S},R=(0,C.isString)(n)?f.get(n):n;if(!l.isEditing()&&!d.Canvas.isInputFocused()||i.force){i.prevent&&v.getCanvasView().preventDefault(w),(0,C.isFunction)(R)?R(d,0,M):f.runCommand(R,M);var G=[t,S.shortcut,w];l.trigger.apply(l,qf(["keymap:emit"],G,!1)),l.trigger.apply(l,qf(["keymap:emit:".concat(t)],G,!1))}},void 0),l.trigger("keymap:add",g),g},r.prototype.get=function(t){return this.keymaps[t]},r.prototype.getAll=function(){return this.keymaps},r.prototype.remove=function(t){var e=this.em,n=this.get(t);if(n)return delete this.keymaps[t],n.keys.split(", ").forEach(function(i){xc.unbind(i.trim())}),e==null||e.trigger("keymap:remove",n),n},r.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),xc.handlers={},this},r.prototype.destroy=function(){this.removeAll(),this.keymaps={}},r}(jt);const hh=dh,gh={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};var vh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const mh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return vh(r,a),r.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},r.prototype.open=function(){this.set("open",!0)},r.prototype.close=function(){this.set("open",!1)},r}(ut);var yh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wu=function(){return Wu=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Wu.apply(this,arguments)};const bh=function(a){function r(t){var e=a.call(this,t)||this,n=e.model;return e.listenTo(n,"change:open",e.updateOpen),e.listenTo(n,"change:title",e.updateTitle),e.listenTo(n,"change:content",e.updateContent),e}return yh(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,i=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(n,"one-bg ").concat(n,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(i,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},r.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},r.prototype.onClick=function(t){this.config.backdrop&&t.target===this.el&&this.hide()},r.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},r.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},r.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},r.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),i=this.model.get("content");e.length&&n.append(e),t.empty().append(i)},r.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},r.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},r.prototype.hide=function(){this.model.close()},r.prototype.show=function(){this.model.open()},r.prototype.updateAttr=function(t){var e=this,n=e.pfx,i=e.$el,l=e.el,f=[].slice.call(l.attributes).map(function(d){return d.name});i.removeAttr(f.join(" ")),i.attr(Wu(Wu({},t||{}),{class:"".concat(n,"container ").concat(t&&t.class||"").trim()}))},r.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},r}(fn);var wh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const _h=function(a){function r(t){var e=a.call(this,t,"Modal",gh)||this;return e.model=new mh(e),e.model.on("change:open",function(n,i){t.trigger("modal:".concat(i?"open":"close"))}),e.model.on("change",(0,C.debounce)(function(){var n=e._evData(),i=e.config.custom;(0,C.isFunction)(i)&&i(n),t.trigger("modal",n)},0)),e}return wh(r,a),r.prototype._evData=function(){var t=this,e=this.getTitle(),n=this.getContent(),i=this.model.attributes;return{open:i.open,attributes:i.attributes,title:(0,C.isString)(e)?(0,Re.rw)(e):e,content:(0,C.isString)(n)?(0,Re.rw)(n):n.get?n.get(0):n,close:function(){t.close()}}},r.prototype.postRender=function(t){var e=t.model.config.el||t.el,n=this.render();n&&(e==null||e.appendChild(n))},r.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},r.prototype.close=function(){return this.model.close(),this},r.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},r.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},r.prototype.isOpen=function(){return!!this.model.get("open")},r.prototype.setTitle=function(t){return this.model.set("title",t),this},r.prototype.getTitle=function(){return this.model.get("title")},r.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},r.prototype.getContent=function(){return this.model.get("content")},r.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},r.prototype.getModel=function(){return this.model},r.prototype.render=function(){var t;if(!this.config.custom){var e=bh.extend(this.config.extend),n=this.modal&&this.modal.el;return this.modal=new e({el:n,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},r.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},r}(jt);var Gf="sw-visibility",Kf="export-template",Yf="open-sm",Xf="open-tm",Jf="open-layers",Zf="open-blocks",cf="fullscreen",uf="preview";const pf={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Gf,className:"fa fa-square-o",command:"core:component-outline",context:Gf,attributes:{title:"View components"}},{id:uf,className:"fa fa-eye",command:uf,context:uf,attributes:{title:"Preview"}},{id:cf,className:"fa fa-arrows-alt",command:cf,context:cf,attributes:{title:"Fullscreen"}},{id:Kf,className:"fa fa-code",command:Kf,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Yf,className:"fa fa-paint-brush",command:Yf,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Xf,className:"fa fa-cog",command:Xf,togglable:!1,attributes:{title:"Settings"}},{id:Jf,className:"fa fa-bars",command:Jf,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Zf,className:"fa fa-th-large",command:Zf,togglable:!1,attributes:{title:"Open Blocks"}}]}]};var xh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Qf=function(a){function r(t,e){var n=a.call(this,t,e)||this;return n.get("buttons").length&&n.set("buttons",new ed(n.module,n.get("buttons"))),n}return xh(r,a),r.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(r.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),r}(ut);var Ch=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),td=function(a){function r(t,e){return a.call(this,t,e,Qf)||this}return Ch(r,a),r.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(n,i){n!==t&&(n.set("active",!1),e&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(t,e))})},r.prototype.deactivateAll=function(t,e){var n=t||"";this.forEach(function(i){i.get("context")==n&&i!==e&&i.set("active",!1,{fromCollection:!0})})},r.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(n,i){n.get("context")==e&&n.set("disable",!0)})},r.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(n,i){n!==t&&(n.set("disable",!0),e&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(t,e))})},r}(Zt);const ed=td;td.prototype.model=Qf;var Sh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const nd=function(a){function r(t,e){var n=a.call(this,t,e)||this,i=n.get("buttons")||[];return n.buttons=new ed(t,i),n}return Sh(r,a),r.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(r.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),r}(ut);var Oh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rd=function(a){function r(t,e){return a.call(this,t,e,nd)||this}return Oh(r,a),r}(Zt);const Th=rd;rd.prototype.model=nd;var kh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ml=function(){return ml=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ml.apply(this,arguments)},Ph=function(a){function r(t){var e=a.call(this,t)||this,n=e,i=n.model,l=n.em,f=n.pfx,d=n.ppfx,v=i.className,g=i.attributes,w=g.command,S=g.listen;if(e.id=f+i.get("id"),e.activeCls="".concat(f,"active ").concat(d,"four-color"),e.disableCls="".concat(d,"disabled"),e.btnsVisCls="".concat(f,"visible"),e.className=f+"btn"+(v?" "+v:""),e.listenTo(i,"change",e.render),e.listenTo(i,"change:active updateActive",e.updateActive),e.listenTo(i,"checkActive",e.checkActive),e.listenTo(i,"change:bntsVis",e.updateBtnsVis),e.listenTo(i,"change:attributes",e.updateAttributes),e.listenTo(i,"change:className",e.updateClassName),e.listenTo(i,"change:disable",e.updateDisable),l&&(0,C.isString)(w)&&S){var M={fromListen:!0};e.listenTo(l,"run:".concat(w),function(){return i.set("active",!0,M)}),e.listenTo(l,"stop:".concat(w),function(){return i.set("active",!1,M)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return kh(r,a),r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.events=function(){return{click:"clicked"}},r.prototype.updateClassName=function(){var t=this.model,e=this.pfx,n=t.className,i=t.get("attributes").class,l="".concat(i||""," ").concat(e,"btn ").concat(n||"");this.$el.attr("class",l.trim())},r.prototype.updateAttributes=function(){var t=this,e=t.em,n=t.model,i=t.$el,l=n.get("attributes")||{},f=e&&e.t&&e.t("panels.buttons.titles.".concat(n.id));i.attr(l),f&&i.attr({title:f}),this.updateClassName()},r.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},r.prototype.updateActive=function(t,e,n){var i;n===void 0&&(n={});var l=this,f=l.model,d=l.commands,v=l.$el,g=l.activeCls,w=n.fromCollection,S=n.fromListen,M=f.get("context"),R=f.get("options"),G=f.command,tt={};G&&(d&&(0,C.isString)(G)?tt=d.get(G)||{}:(0,C.isFunction)(G)?tt=d.create({run:G}):G!==null&&(0,C.isObject)(G)&&(tt=d.create(G)),f.active?(!w&&((i=f.collection)===null||i===void 0||i.deactivateAll(M,f)),f.set("active",!0,{silent:!0}).trigger("checkActive"),!S&&d.runCommand(tt,ml(ml({},R),{sender:f})),tt.noStop&&f.set("active",!1)):(v.removeClass(g),!S&&d.stopCommand(tt,ml(ml({},R),{sender:f,force:1}))))},r.prototype.updateDisable=function(){var t=this.disableCls,e=this.model.disable;this.$el[e?"addClass":"removeClass"](t)},r.prototype.checkActive=function(){var t=this,e=t.model,n=t.$el,i=t.activeCls;e.active?n.addClass(i):n.removeClass(i)},r.prototype.clicked=function(t){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},r.prototype.toggleActive=function(){var t=this.model,e=this.em,n=t.active,i=t.togglable;n&&!i||(t.active=!n,n?t.runDefaultCommand&&e.runDefault():t.stopDefaultCommand&&e.stopDefault())},r.prototype.render=function(){var t=this.model,e=t.get("label"),n=this.$el;return!t.get("el")&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this},r}(fn);const Eh=Ph;var Ah=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const jh=function(a){function r(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return Ah(r,a),r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,i=t.get("el"),l=new Eh({el:i,model:t}).render().el;return n?n.appendChild(l):this.$el.append(l),l},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(n){return t.addToCollection(n,e)}),this.$el.append(e),this.$el.attr("class",(0,C.result)(this,"className")),this},r}(fn);var Mh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ff=function(){return ff=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ff.apply(this,arguments)},Lh=function(a){function r(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return Mh(r,a),r.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},r.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},r.prototype.toggleVisible=function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},r.prototype.attributes=function(){return this.model.get("attributes")},r.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,n=this.model.get("resizable");if(e&&n){var i,l,f,d=n===!0?[1,1,1,1]:n,v=d.length,g=0;v==2?(i=d[0],f=d[0],l=d[1],g=d[1]):v==4&&(i=d[0],l=d[1],f=d[2],g=d[3]);var w=new e.Utils.Resizer(ff({tc:i,cr:l,bc:f,cl:g,tl:0,tr:0,bl:0,br:0,appendTo:this.el,silentFrames:1,avoidContainerUpdate:1,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger("change:canvasOffset")},posFetcher:function(S,M){var R=M.target,G=S.style,tt=w.getConfig(),K=tt.keyWidth,kt=tt.keyHeight,Ft=S.getBoundingClientRect(),ae=R=="container",me=G[K],Me=G[kt];return{left:0,top:0,width:me&&!ae?parseFloat(me):Ft.width,height:Me&&!ae?parseFloat(Me):Ft.height}}},n));w.blur=function(){},w.focus(this.el)}},r.prototype.render=function(){var t=this.model.buttons,e=this.$el,n=this.ppfx,i="".concat(this.className," ").concat(this.id," ").concat(n,"one-bg ").concat(n,"two-color");if(e.addClass(i),this.toggleVisible(),t.length){var l=new jh(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},r}(fn);const Dh=Lh;var Nh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ih=function(a){function r(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return Nh(r,a),r.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,i=(this.config,t.get("el")),l=new Dh(t),f=l.render().el,d=t.get("appendTo");return i||(d?document.querySelector(d).appendChild(f):n?n.appendChild(f):this.$el.append(f)),l.initResize(),f},r.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each(function(i){return t.addToCollection(i,n)}),e.append(n),e.attr("class",this.className),this},r}(fn);var Fh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Vh=function(a){function r(t){var e=a.call(this,t,"Panels",pf)||this;for(var n in e.panels=new Th(e,e.config.defaults),pf)n in e.config||(e.config[n]=pf[n]);return e}return Fh(r,a),r.prototype.getPanels=function(){return this.panels},r.prototype.getPanelsEl=function(){return this.PanelsViewObj&&this.PanelsViewObj.el},r.prototype.addPanel=function(t){return this.panels.add(t)},r.prototype.removePanel=function(t){return this.panels.remove(t)},r.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},r.prototype.addButton=function(t,e){var n=this.getPanel(t);return n?n.get("buttons").add(e):null},r.prototype.removeButton=function(t,e){var n=this.getPanel(t);return n&&n.get("buttons").remove(e)},r.prototype.getButton=function(t,e){var n=this.getPanel(t);if(n){var i=n.get("buttons").where({id:e});return i.length?i[0]:null}return null},r.prototype.render=function(){return this.PanelsViewObj&&this.PanelsViewObj.remove(),this.PanelsViewObj=new Ih(this.panels),this.PanelsViewObj.render().el},r.prototype.active=function(){this.getPanels().each(function(t){t.get("buttons").each(function(e){e.get("active")&&e.trigger("updateActive")})})},r.prototype.disableButtons=function(){this.getPanels().each(function(t){t.get("buttons").each(function(e){e.get("disable")&&e.trigger("change:disable")})})},r.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},r}(jt),Rh={stylePrefix:"cm-",inlineCss:!1};var Hh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zh=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t};const Uh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Hh(r,a),r.prototype.build=function(t,e){e===void 0&&(e={});var n=e.em,i=zh(e,["em"]);if(e.cleanId&&n){var l=n.Css.getAll().toJSON().map(function(f){var d=f.selectors,v=d&&d.length===1&&d.models[0];return v&&v.isId()&&v.get("name")}).filter(Boolean);i.attributes||(i.attributes=function(f,d){var v=d.id;return v&&v[0]==="i"&&!f.get("script")&&!f.get("attributes").id&&l.indexOf(v)<0&&delete d.id,d})}return t.toHTML(i)},r}(k.Hn);var Bh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Bh(r,a),r.prototype.build=function(t){var e=this,n=t.toJSON();return this.beforeEach(n),(0,C.each)(n,function(i,l){var f=n[l];if(f instanceof k.Hn)n[l]=e.build(f);else if(f instanceof k.FE){var d=f;n[l]=[],d.length&&d.forEach(function(v,g){n[l][g]=e.build(v)})}}),n},r.prototype.beforeEach=function(t){delete t.status},r}(k.Hn);const $h=Wh;var qh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qh(r,a),r.prototype.mapModel=function(t){var e,n=this,i="",l=t.get("script-export")||t.get("script"),f=t.get("type"),d=t.get("components"),v=t.getId();if(l){var g=t.get("attributes");g=(0,C.extend)({},g,{id:v}),t.set("attributes",g,{silent:!0});var w=t.getScriptString(l),S=t.get("script-props");if(t.get("scriptUpdated")&&!S)this.mapJs[f+"-"+v]={ids:[v],code:w};else{var M=void 0,R=this.mapJs[f];if(S&&(M=t.__getScriptProps()),R)R.ids.push(v),M&&(R.props[v]=M);else{var G={ids:[v],code:w};M&&(G.props=((e={})[v]=M,e)),this.mapJs[f]=G}}}return d.forEach(function(tt){i+=n.mapModel(tt)}),i},r.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e,n,i="";for(var l in this.mapJs){var f=this.mapJs[l];if(f.code)if(f.props){if(e=f.code,n=void 0,(((n=e.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length===0)continue;i+=`
          var props = `.concat(JSON.stringify(f.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(f.code,`.bind(el))(props[el.id]);
          }`)}else{var d="#"+f.ids.join(", #");i+=`
          var items = document.querySelectorAll('`.concat(d,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(f.code,`
}.bind(items[i]))();
          }`)}}return i},r}(k.Hn);const Kh=Gh;var Cc,Yh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),df=function(){return df=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},df.apply(this,arguments)};(0,I.hasWin)()&&(Cc=gn(631),gn(531),gn(629),gn(210));var od=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Yh(r,a),r.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0}},r.prototype.init=function(t){return(0,C.bindAll)(this,"onChange"),this.editor=Cc.fromTextArea(t,df({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},r.prototype.onChange=function(){this.trigger("update",this)},r.prototype.getEditor=function(){return this.editor},r.prototype.getElement=function(){return this.element},r.prototype.setElement=function(t){return this.element=t,this},r.prototype.refresh=function(){return this.getEditor().refresh(),this},r.prototype.focus=function(){return this.getEditor().focus(),this},r.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},r.prototype.setContent=function(t,e){var n=this;e===void 0&&(e={});var i=this.editor;i&&(i.setValue(t),i.autoFormatRange&&(Cc.commands.selectAll(i),i.autoFormatRange(i.getCursor(!0),i.getCursor(!1)),Cc.commands.goDocStart(i)),!e.noRefresh&&setTimeout(function(){return n.refresh()}))},r}(k.Hn);const Xh=od;od.prototype.CodeMirror=Cc;var Jh=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zh=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a};const Qh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Jh(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.codeName,i=t.label;return rt(id||(id=Zh([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,n,e,i,e)},r.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},r.prototype.render=function(){var t=this,e=t.model,n=t.pfx,i=t.$el,l=e.toJSON();return l.pfx=n,i.html(this.template(l)),i.attr("class","".concat(n,"editor-c")),i.find("#".concat(n,"code")).append(e.get("input")),this},r}(k.G7);var id,tg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),eg="CodeMirror",ng=function(a){function r(t){var e=a.call(this,t,"CodeManager",Rh)||this;e.EditorView=Qh;var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new Uh,css:new kp,json:new $h,js:new Kh},e.defViewers={CodeMirror:new Xh},e.loadDefaultGenerators().loadDefaultViewers(),e}return tg(r,a),r.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},r.prototype.getGenerator=function(t){return this.generators[t]},r.prototype.getGenerators=function(){return this.generators},r.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},r.prototype.getViewer=function(t){return this.viewers[t]},r.prototype.getViewers=function(){return this.viewers},r.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,C.isUndefined)(t.type)?eg:t.type,n=this.getViewer(e)&&this.getViewer(e).clone(),i=document.createElement("div"),l=document.createElement("textarea");return i.appendChild(l),n.set(t),n.init(l),n.setElement(i),n},r.prototype.updateViewer=function(t,e){t.setContent(e)},r.prototype.getCode=function(t,e,n){n===void 0&&(n={}),n.em=this.em;var i=this.getGenerator(e);return i?i.build(t,n):""},r.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},r.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},r.prototype.destroy=function(){},r}(jt);const rg=ng;var og=gn(410),ig=gn.n(og);const sg={maximumStackLength:500,trackSelection:!0};var ag=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Di=function(){return Di=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Di.apply(this,arguments)},lg=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},$u=function(a){return a.avoidStore||a.noUndo},sd=function(a){return Object.keys(a.changedAttributes())},cg=function(a){function r(t){var e=a.call(this,t,"UndoManager",sg)||this;e.config._disable&&(e.config.maximumStackLength=0);var n=!0;return e.um=new(ig())(Di({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(i){var l=i.get("_undo");if(l){var f=i.get("_undoexc");if((0,C.isArray)(f)&&sd(i).some(function(d){return f.indexOf(d)>=0}))return!1;if((0,C.isBoolean)(l)||(0,C.isArray)(l)&&sd(i).some(function(d){return l.indexOf(d)>=0}))return!0}return!1},on:function(i,l,f){var d=this;!this.beforeCache&&(this.beforeCache=i.previousAttributes());var v=f||l||{};if(v.noUndo&&setTimeout(function(){d.beforeCache=null}),!$u(v)){var g=i.toJSON({fromUndo:n}),w={object:i,before:this.beforeCache,after:g};if(this.beforeCache=null,!(0,C.isEmpty)(g))return w}}}),e.um.changeUndoType("add",{on:function(i,l,f){if(f===void 0&&(f={}),!$u(f)&&e.isRegistered(l))return{object:l,before:void 0,after:i,options:Di(Di({},f),{fromUndo:n})}}}),e.um.changeUndoType("remove",{on:function(i,l,f){if(f===void 0&&(f={}),!$u(f)&&e.isRegistered(l))return{object:l,before:i,after:void 0,options:Di(Di({},f),{fromUndo:n})}}}),e.um.changeUndoType("reset",{undo:function(i,l){i.reset(l,{fromUndo:n})},redo:function(i,l,f){i.reset(f,{fromUndo:n})},on:function(i,l){if(l===void 0&&(l={}),!$u(l)&&e.isRegistered(i))return{object:i,before:l.previousModels,after:lg([],i.models,!0),options:Di(Di({},l),{fromUndo:n})}}}),e.um.on("undo redo",function(){t.trigger("change:canvasOffset"),t.getSelectedAll().map(function(i){return i.trigger("rerender:layer")})}),["undo","redo"].forEach(function(i){return e.um.on(i,function(){return t.trigger(i)})}),e}return ag(r,a),r.prototype.postLoad=function(){var t=this.config,e=this.em;t.trackSelection&&e&&this.add(e.get("selected"))},r.prototype.add=function(t){return this.um.register(t),this},r.prototype.remove=function(t){return this.um.unregister(t),this},r.prototype.removeAll=function(){return this.um.unregisterAll(),this},r.prototype.start=function(){return this.um.startTracking(),this},r.prototype.stop=function(){return this.um.stopTracking(),this},r.prototype.undo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.undo(t),this},r.prototype.undoAll=function(){return this.um.undoAll(),this},r.prototype.redo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.redo(t),this},r.prototype.redoAll=function(){return this.um.redoAll(),this},r.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},r.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},r.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},r.prototype.getStack=function(){return this.um.stack},r.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(n){var i=n.get("magicFusionIndex");e.indexOf(i)<0&&(e.push(i),t.push(n))}),t},r.prototype.skip=function(t){this.stop(),t(),this.start()},r.prototype.getGroupedStack=function(){var t={},e=this.getStack();return e.forEach(function(n,i){var l=n.get("magicFusionIndex"),f=function(d,v){var g=d.attributes,w=g.type,S=g.after,M=g.before,R=g.object,G=g.options;return{index:v,type:w,after:S,before:M,object:R,options:G===void 0?{}:G}}(n,i);t[l]?t[l].push(f):t[l]=[f]}),Object.keys(t).map(function(n){var i=t[n];return{index:i[i.length-1].index,actions:i,labels:(0,C.unique)(i.reduce(function(l,f){var d,v=(d=f.options)===null||d===void 0?void 0:d.action;return v&&l.push(v),l},[]))}})},r.prototype.goToGroup=function(t){var e=this;if(t){var n=this.getPointer(),i=t.index-n;(0,C.times)(Math.abs(i),function(){e[i<0?"undo":"redo"](!1)})}},r.prototype.getPointer=function(){return this.getStack().pointer},r.prototype.clear=function(){return this.um.clear(),this},r.prototype.getInstance=function(){return this.um},r.prototype.destroy=function(){this.clear().removeAll()},r}(jt);const ug=cg;var yl=function(){return yl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},yl.apply(this,arguments)},hf="_rte",ad=1,gf=0,ld=-1,qu=function(a,r){r===void 0&&(r="A");var t=a.selection()||{},e=t.anchorNode,n=t.focusNode,i=e==null?void 0:e.parentNode,l=n==null?void 0:n.parentNode;return(i==null?void 0:i.nodeName)==r||(l==null?void 0:l.nodeName)==r},Gu="data-selectme",Sc={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&qu(a)?ad:gf},result:function(a){qu(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(Gu,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return(a==null?void 0:a.selection())&&qu(a,"SPAN")?ld:gf},result:function(a){!qu(a,"SPAN")&&a.insertHTML("<span ".concat(Gu,">").concat(a.selection(),"</span>"),{select:!0})}}},pg=function(){function a(r,t,e){e===void 0&&(e={});var n=this;if(this.em=r,this.settings=e,t[hf])return t[hf];t[hf]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var i=(e.actions||[]).map(function(g){var w=g;return(0,C.isString)(g)?w=yl({},Sc[g]):Sc[g.name]&&(w=yl(yl({},Sc[g.name]),g)),w}),l=i.length?i:Object.keys(Sc).map(function(g){return Sc[g]});e.classes=yl({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var f=e.classes,d=e.actionbar;if(this.actionbar=d,this.classes=f,this.actions=l,!d){var v=e.actionbarContainer;(d=document.createElement("div")).className=f.actionbar,v==null||v.appendChild(d),this.actionbar=d,l.forEach(function(g){return n.addAction(g)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.destroy=function(){},a.prototype.setEl=function(r){this.el=r,this.doc=r.ownerDocument},a.prototype.updateActiveActions=function(){var r=this;this.getActions().forEach(function(t){var e=t.update,n=t.btn,i=r.classes,l=i.active,f=i.inactive,d=i.disabled,v=t.state,g=t.name,w=r.doc;if(n.className=n.className.replace(l,"").trim(),n.className=n.className.replace(f,"").trim(),n.className=n.className.replace(d,"").trim(),v)switch(v(r,w)){case ad:n.className+=" ".concat(l);break;case gf:n.className+=" ".concat(f);break;case ld:n.className+=" ".concat(d)}else w.queryCommandSupported(g)&&w.queryCommandState(g)&&(n.className+=" ".concat(l));e==null||e(r,t)})},a.prototype.enable=function(r){return this.enabled?this:this.__toggleEffects(!0,r)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(r,t){r===void 0&&(r=!1),t===void 0&&(t={});var e=r?I.on:I.off,n=this.el,i=this.doc;if(this.actionbarEl().style.display=r?"":"none",n.contentEditable="".concat(!!r),e(n,"mouseup keyup",this.updateActiveActions),e(i,"keydown",this.__onKeydown),e(i,"paste",this.__onPaste),this.enabled=r,r){var l=t.event;if(this.syncActions(),this.updateActiveActions(),l){var f=null;if(i.caretRangeFromPoint){var d=(0,I.getPointerEvent)(l);f=i.caretRangeFromPoint(d.clientX,d.clientY)}else l.rangeParent&&(f=i.createRange()).setStart(l.rangeParent,l.rangeOffset);var v=i.getSelection();v==null||v.removeAllRanges(),f&&(v==null||v.addRange(f))}n.focus()}return this},a.prototype.__onKeydown=function(r){var t=r,e=this.doc;t.key!=="Enter"||["insertOrderedList","insertUnorderedList"].some(function(n){return e.queryCommandState(n)})||(e.execCommand("insertLineBreak"),t.preventDefault())},a.prototype.__onPaste=function(r){var t=r.clipboardData||window.clipboardData,e=t.getData("text"),n=t.getData("text/html");if(e&&!n){r.preventDefault();var i=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,i)}},a.prototype.syncActions=function(){var r=this;this.getActions().forEach(function(t){if(r.actionbar&&(!t.state||t.state&&t.state(r,r.doc)>=0)){var e=t.event||"click";t.btn["on".concat(e)]=function(){t.result(r,t),r.updateActiveActions()}}})},a.prototype.addAction=function(r,t){t===void 0&&(t={});var e=t.sync,n=document.createElement("span"),i=r.icon,l=r.attributes||{};for(var f in n.className=this.classes.button,r.btn=n,l)n.setAttribute(f,l[f]);typeof i=="string"?n.innerHTML=i:n.appendChild(i),this.actionbarEl().appendChild(n),e&&(this.actions.push(r),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(r,t){this.doc.execCommand(r,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(r,t){var e=(t===void 0?{}:t).select,n=this,i=n.em,l=n.doc,f=n.el,d=l.getSelection();if(d&&d.rangeCount){var v=(0,I.getModel)(f),g=l.createElement("div"),w=d.getRangeAt(0);w.deleteContents(),(0,C.isString)(r)?g.innerHTML=r:r&&g.appendChild(r),Array.prototype.slice.call(g.childNodes).forEach(function(S){w.insertNode(S)}),d.removeAllRanges(),d.addRange(w),f.focus(),e&&v&&(v.once("rte:disable",function(){var S=v.find("[".concat(Gu,"]"))[0];S&&(i.setSelected(S),S.removeAttributes(Gu))}),v.trigger("disable"))}},a}();const fg=pg,dg={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"]};var hg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gg=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},vg=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},mg=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},vf="change:canvasOffset frame:scroll component:update",yg=function(a){function r(t){var e=a.call(this,t,"RichTextEditor",dg)||this,n=e.config,i=n.pStylePrefix;if(i&&(n.stylePrefix=i+n.stylePrefix),e.pfx=n.stylePrefix,e.actions=n.actions||[],!(0,I.hasWin)())return e;var l=document.createElement("div");return l.className="".concat(i,"rte-toolbar ").concat(i,"one-bg"),e.toolbar=l,e.initRte(document.createElement("div")),(0,I.on)(l,"mousedown",function(f){return f.stopPropagation()}),e}return hg(r,a),r.prototype.destroy=function(){var t,e,n;(t=this.globalRte)===null||t===void 0||t.destroy(),(n=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),(0,Re.L_)(this.toolbar)},r.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},r.prototype.initRte=function(t){var e=this.globalRte,n=this,i=n.em,l=n.pfx,f=n.actionbar,d=n.config,v=this.actions||mg([],d.actions,!0),g={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=i,e.setEl(t)):(e=new fg(i,t,{classes:g,actions:v,actionbar:f,actionbarContainer:this.toolbar}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},r.prototype.add=function(t,e){var n;e===void 0&&(e={}),e.name=t,(n=this.globalRte)===null||n===void 0||n.addAction(e,{sync:!0})},r.prototype.get=function(t){var e,n;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(i){i.name==t&&(n=i)}),n},r.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},r.prototype.remove=function(t){var e,n=this.getAll(),i=this.get(t);if(i){var l=i.btn,f=n.indexOf(i);(e=l==null?void 0:l.parentNode)===null||e===void 0||e.removeChild(l),n.splice(f,1)}return i},r.prototype.getToolbarEl=function(){return this.toolbar},r.prototype.updatePosition=function(){var t=this.em,e=this.toolbar,n="px",i=t.Canvas,l=e.style,f=i.getTargetToElementFixed(this.lastEl,e,{event:"rteToolbarPosUpdate",left:0});l.top=(f.top||0)+n,l.left=(f.left||0)+n},r.prototype.enable=function(t,e,n){return n===void 0&&(n={}),gg(this,void 0,void 0,function(){var i,l,f,d,v;return vg(this,function(g){switch(g.label){case 0:return this.lastEl=t.el,l=(i=this).customRte,f=i.em,d=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(d,e):this.initRte(d).enable(n)];case 1:return v=g.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(vf,this.updatePosition,this),f.on(vf,this.updatePosition,this),f.trigger("rte:enable",t,v)),[2,v]}})})},r.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},r.prototype.disable=function(t,e){var n=this.em,i=this.customRte,l=t.getChildrenContainer();i?i.disable(l,e):e&&e.disable(),this.hideToolbar(),n&&(n.off(vf,this.updatePosition,this),n.trigger("rte:disable",t,e))},r}(jt);const bg=yg;var mf=gn(790);const wg={stylePrefix:"com-",defaults:{},strict:!0};var _g=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ku=function(){return Ku=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ku.apply(this,arguments)},cd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},ud=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],xg=function(a){function r(t){var e=a.call(this,t,"Commands",wg)||this;e.CommandAbstract=mf.default,e.defaultCommands={},e.commands={},e.active={};var n=e.config,i=n.pStylePrefix,l=e.defaultCommands;for(var f in i&&(n.stylePrefix=i+n.stylePrefix),Object.keys(n.defaults).forEach(function(d){var v=n.defaults[d];v.id&&e.add(v.id,v)}),l["tlb-delete"]={run:function(d){return d.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(d){d.runCommand("core:copy"),d.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(d,v,g){g===void 0&&(g={});var w=d.getModel(),S=g&&g.event,M=g.target,R=M||d.getSelected(),G=M?[M]:cd([],d.getSelectedAll(),!0),tt=S&&S.type=="dragstart",K={preserveSelected:1};if(!R||!R.get("draggable"))return w.logWarning("The element is not draggable");var kt=R.get("dmode")||w.get("dmode"),Ft=function(){return w.stopDefault(K)},ae=(0,C.includes)(["absolute","translate"],kt);G.forEach(function(wn){return wn.trigger("disable")}),tt?setTimeout(Ft,0):Ft();var me=function(wn){w.trigger("".concat(hr,":start"),wn)},Me=function(wn){w.trigger(hr,wn)},Ve=function(wn,Er,qr){G.forEach(function(Gr){return Gr.set("status","selected")}),d.select(G),R.emitUpdate(),w.trigger("".concat(hr,":end"),qr),setTimeout(function(){return w.runDefault(K)}),(ae||qr.cancelled)&&w.set("_cmpDrag",1)};if(ae)d.runCommand("core:component-drag",{guidesInfo:1,mode:kt,target:R,onStart:me,onDrag:Me,onEnd:Ve,event:S});else{tt&&S.dataTransfer.setDragImage(R.view.el,0,0);var Ze=d.Commands.get("move-comp");Ze.onStart=me,Ze.onDrag=Me,Ze.onEndMoveFromModel=Ve,Ze.initSorterFromModels(G)}G.forEach(function(wn){return wn.set("status","freezed-selected")})}},l["core:undo"]=function(d){return d.UndoManager.undo()},l["core:redo"]=function(d){return d.UndoManager.redo()},ud.forEach(function(d){var v=d[2],g=gn(828)("./".concat(d[1])).default,w="core:".concat(d[0]);l[w]=g,v&&(l[v]=g,["run","stop"].forEach(function(S){t.on("".concat(S,":").concat(v),function(){for(var M=[],R=0;R<arguments.length;R++)M[R]=arguments[R];return t.trigger.apply(t,cd(["".concat(S,":").concat(w)],M,!1))})}))}),n.model=t.Canvas,l)e.add(f,l[f]);return e}return _g(r,a),r.prototype.add=function(t,e){var n=(0,C.isFunction)(e)?{run:e}:e;return n.stop||(n.noStop=!0),delete n.initialize,n.id=t,this.commands[t]=mf.default.extend(n),this},r.prototype.get=function(t){var e=this.commands[t];return(0,C.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},r.prototype.extend=function(t,e){e===void 0&&(e={});var n=this.get(t);if(n){var i=Ku(Ku({},n.constructor.prototype),e);this.add(t,i);var l=ud.filter(function(f){return"core:".concat(f[0])===t&&f[2]})[0];l&&this.add(l[2],i)}return this},r.prototype.has=function(t){return!!this.commands[t]},r.prototype.getAll=function(){return this.commands},r.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},r.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},r.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},r.prototype.getActive=function(){return this.active},r.prototype.runCommand=function(t,e){var n;if(e===void 0&&(e={}),t&&t.run){var i=this.em,l=this.config,f=t.id,d=i.Editor;this.isActive(f)&&!e.force&&l.strict||(n=d&&t.callRun(d,e),f&&t.stop&&!t.noStop&&!e.abort&&(this.active[f]=n))}return n},r.prototype.stopCommand=function(t,e){var n;if(e===void 0&&(e={}),t&&t.run){var i=this.em,l=this.config,f=t.id,d=i.Editor;(this.isActive(f)||e.force||!l.strict)&&(f&&delete this.active[f],n=t.callStop(d,e))}return n},r.prototype.create=function(t){return t.stop||(t.noStop=!0),new(mf.default.extend(t))(this.config)},r.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},r}(jt);const Cg=xg,Sg={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var Og=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$r=function(){return $r=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},$r.apply(this,arguments)},Tg=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},pd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},yf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Og(r,a),r.getDefaults=function(){return(0,C.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var n=this.getId()||"",i=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(i||n).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!i&&this.set("name",(0,I.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),r.callInit(this,t,e)},r.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},r.prototype.__upTargets=function(t,e){var n,i=this;e===void 0&&(e={});var l=this.em.Styles,f=this.getName(),d=e.__clear,v=d?"":this.__getFullValue(e),g=this.__getParentProp(),w=this.changedAttributes(),S=(0,C.keys)(w).reduce(function(kt,Ft){return kt[Ft]=i.previous(Ft),kt},{}),M=pd(pd([],(0,C.keys)(this.__getClearProps()),!0),["__p"],!1),R=(0,C.keys)(w),G=!e.__up&&!g&&(d||M.some(function(kt){return R.indexOf(kt)>=0})),tt=this.get("onChange"),K={property:this,from:S,to:w,value:v,opts:e};l.__trgEv(l.events.propertyUpdate,K),tt&&tt(K),G&&this.__upTargetsStyle(((n={})[f]=v,n),e)},r.prototype.__upTargetsStyle=function(t,e){var n,i=(n=this.em)===null||n===void 0?void 0:n.get("StyleManager");i==null||i.addStyleTargets($r($r({},t),{__p:!!e.avoidStore}),e)},r.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var n=e.partial,i=Tg(e,["partial"]);return t.__p=!(!i.avoidStore&&!n),this.set(t,$r($r({},i),{avoidStore:t.__p}))},r.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,$r($r({},e),{__up:!0}))},r.prototype.init=function(){},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("property")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,i=n===void 0||n,l=this.getId(),f=this.get("name")||this.get("label");return i&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||f},r.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,n=this.get("value");return this.hasValue()||e?n:this.getDefaultValue()},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget(),n=this.get("value");return!(0,C.isUndefined)(n)&&n!==""&&!e},r.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},r.prototype.getStyle=function(t){var e;t===void 0&&(t={});var n=this.getName();return(e={})[t.camelCase?(0,I.camelCase)(n):n]=this.__getFullValue(t),e},r.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,C.isUndefined)(t)?this.get("defaults"):t)},r.prototype.upValue=function(t,e){e===void 0&&(e={});var n=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),$r($r({},t),{__clear:!0})),this},r.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},r.prototype.getParent=function(){return this.__getParentProp()||null},r.prototype.isFull=function(){return!!this.get("full")},r.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},r.prototype.__getClearProps=function(){return{value:""}},r.prototype.setValue=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var i=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(i,$r({avoidStore:l},n))},r.prototype.setValueFromInput=function(t,e,n){n===void 0&&(n={}),this.setValue(t,e,$r($r({},n),{fromInput:1}))},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n={value:t},i="!important";if((0,C.isString)(t)&&t.indexOf(i)!==-1&&(n.value=t.replace(i,"").trim(),n.important=!0),!this.get("functionName")&&!e.complete)return n;var l=[],f="".concat(n.value),d=f.indexOf("(")+1,v=f.lastIndexOf(")"),g=f.substring(0,d-1);if(g&&(n.functionName=g),l.push(d),v>=0&&l.push(v),n.value=String.prototype.substring.apply(f,l),e.numeric){var w=parseFloat(n.value);n.unit=n.value.replace(w,""),n.value=w}return n},r.prototype.__getFullValue=function(t){var e=(t===void 0?{}:t).withDefault;return!this.hasValue()&&e?this.getDefaultValue():this.getFullValue()},r.prototype.getFullValue=function(t,e){e===void 0&&(e={});var n=this.get("functionName"),i=this.getDefaultValue(),l=(0,C.isUndefined)(t)?this.get("value"):t,f=!(0,C.isUndefined)(l)&&l!=="";if(l&&i&&l===i)return i;if(n&&f){var d=n==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(n,"(").concat(d,")")}return f&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},r.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},r.prototype.getParentTarget=function(){return this.get("parentTarget")||null},r.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,n=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}},r.prototype.__checkVisibility=function(t){var e=t.target,n=t.component,i=t.sectors,l=n||e;if(!l)return!1;var f=this.getId(),d=this.getName(),v=this.get("toRequire"),g=this.get("requires"),w=this.get("requiresParent"),S=l.get("unstylable"),M=l.get("stylable-require"),R=l.get("stylable");if((0,C.isArray)(R)&&(R=R.indexOf(d)>=0),(0,C.isArray)(S)&&(R=S.indexOf(d)<0),v&&(R=!e||M&&(M.indexOf(f)>=0||M.indexOf(d)>=0)),i&&g){var G=(0,C.keys)(g);i.forEach(function(Ft){Ft.getProperties().forEach(function(ae){if((0,C.includes)(G,ae.id)){var me=g[ae.id];R=R&&(0,C.includes)(me,ae.get("value"))}})})}if(w){var tt=n&&n.parent(),K=tt&&tt.getEl();if(K){var kt=(0,I.hasWin)()?window.getComputedStyle(K):{};(0,C.each)(w,function(Ft,ae){R=R&&kt[ae]&&(0,C.includes)(Ft,kt[ae])})}else R=!1}return!!R},r}(k.Hn);const On=yf;yf.callParentInit=function(a,r,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(r,[t,$r($r({},e),{skipInit:1})])},yf.callInit=function(a,r,t){t===void 0&&(t={}),!t.skipInit&&a.init(r,t)};var kg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bl=function(){return bl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},bl.apply(this,arguments)},fd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},dd=function(a){return a==="integer"||a==="number"},Pg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return kg(r,a),r.prototype.defaults=function(){return bl(bl({},On.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),On.callParentInit(On,this,t,e);var n=this.em,i=new xf(this.get("properties")||[],{em:n,parentProp:this});this.set("properties",i,{silent:!0}),this.listenTo(i,"change",this.__upProperties),On.callInit(this,t,e)},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),r.prototype.getProperties=function(){return fd([],this.get("properties").models,!0)},r.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},r.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},r.prototype.isDetached=function(){return!!this.get("detached")},r.prototype.getValues=function(t){var e=(t===void 0?{}:t).byName;return this.getProperties().reduce(function(n,i){return n[e?i.getName():i.getId()]="".concat(i.__getFullValue()),n},{})},r.prototype.getSeparator=function(){return this.getSplitSeparator()},r.prototype.getJoin=function(){return this.__getJoin()},r.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var n=this.getName(),i=this.__getJoin(),l=this.get("toStyle"),f=this.getValues(),d={};if(l)d=l(f,{join:i,name:n,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())d=f;else{var v=this.getProperties().map(function(g){return g.__getFullValue({withDefault:1})}).filter(Boolean).join(i);(e={})[n]=v,d=e}return this.isDetached()?d[n]="":(d[n]=d[n]||"",d=bl(bl({},d),this.getProperties().reduce(function(g,w){return g[w.getName()]="",g},{}))),t.camelCase?Object.keys(d).reduce(function(g,w){return g[(0,I.camelCase)(w)]=d[w],g},{}):d},r.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},r.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!e.__up&&!e.__clearIn){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},r.prototype.__upTargetsStyleProps=function(t,e){var n;t===void 0&&(t={});var i=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();(n={})[l]=i[l],i=n}this.__upTargetsStyle(i,t)},r.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),On.prototype._up.call(this,t,e),this},r.prototype.getStyle=function(t){return this.getStyleFromProps(t)},r.prototype.__getFullValue=function(t){return t===void 0&&(t={}),this.isDetached()||t.__clear?"":this.getStyleFromProps()[this.getName()]||""},r.prototype.__getJoin=function(){var t=this.get("join");return(0,C.isString)(t)?t:this.get("separator")},r.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),n=this.getProperties().map(function(i){return i.getName()});return fd([e],n,!0).some(function(i){return!(0,C.isUndefined)(t[i])&&t[i]!==""})},r.prototype.__splitValue=function(t,e){return t.split(e).map(function(n){return n.trim()}).filter(Boolean)},r.prototype.__splitStyleName=function(t,e,n){return this.__splitValue(t[e]||"",n)},r.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var n=(e===void 0?{}:e).byName,i=this.getProperties(),l=i.length===4&&i.every(function(v){return dd(v.getType())}),f=this.__splitValue(t,this.getSplitSeparator()),d={};return i.forEach(function(v,g){var w=f[g],S=(0,C.isUndefined)(w)?"":w;if(l){var M=f.length;S=f[g]||f[g%M+(M!=1&&M%2?1:0)]||S}var R=n?v.getName():v.getId();d[R]=S||""}),d},r.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var n=e.byName,i=this.getName(),l=this.getProperties(),f=this.getSplitSeparator(),d=this.get("fromStyle"),v=d?d(t,{property:this,name:i,separator:f}):{};return d||(v=this.__getSplitValue(t[i]||"",{byName:n}),l.forEach(function(g){var w=t[g.getName()],S=n?g.getName():g.getId();(0,C.isUndefined)(w)||w===""||(v[S]=w)})),v},r.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(i){var l=t[i.getId()];i.__getFullValue()!==l&&i.upValue(l,e)});var n=(0,C.keys)(t).map(function(i){return t[i]}).join(" ");this.set("value",n,{silent:!0})},r.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),On.prototype.clear.call(this),this},r.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},r.prototype.getFullValue=function(){return this.__getFullValue()},r.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},r}(On);const wl=Pg;var Eg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yu=function(){return Yu=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Yu.apply(this,arguments)},Ag=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Eg(r,a),r.prototype.defaults=function(){return{values:{}}},r.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},r.prototype.getId=function(){return this.cid},r.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},r.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(n,i){return n[(0,I.camelCase)(i)]=e[i],n},{}):e},r.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},r.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},r.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},r.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},r.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},r.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},r.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},r.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",Yu(Yu({},this.getValues()),t))},r}(k.Hn);const jg=Ag;var Mg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hd=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Mg(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},r}(k.FE);const Lg=hd;hd.prototype.model=jg;var Dg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ri=function(){return ri=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ri.apply(this,arguments)},Ng=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Ig=/,(?![^\(]*\))/,Fg=/\s(?![^(]*\))/,Vg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Dg(r,a),r.prototype.defaults=function(){return ri(ri({},wl.getDefaults()),{layers:[],layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),wl.callParentInit(wl,this,t,e);var n=this.get("layers"),i=new Lg(n,{prop:this});i.property=this,i.properties=this.get("properties"),this.set("layers",i,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(i,"add remove",this.__upLayers),wl.callInit(this,t,e)},r.prototype.getLayers=function(){return this.__getLayers().models},r.prototype.__getLayers=function(){return this.get("layers")},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.__getLayers().at(t)||void 0},r.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},r.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},r.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},r.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var n=t?t.getIndex():-1;n>=0&&(0,C.isNumber)(e)&&e>=0&&e<this.getLayers().length&&n!==e&&(this.removeLayer(t),this.__getLayers().add(t,{at:e}))},r.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={};return this.getProperties().forEach(function(i){var l=i.getId(),f=t[l];n[l]=(0,C.isUndefined)(f)?i.getDefaultValue():f}),this.__getLayers().push({values:n},e)},r.prototype.removeLayer=function(t){return this.__getLayers().remove(t)},r.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},r.prototype.getLayerLabel=function(t){var e="";if(t){var n=this.get("layerLabel"),i=t.getValues(),l=t.getIndex();if(n)e=n(t,{index:l,values:i,property:this});else{var f=[];this.getProperties().map(function(d){f.push(i[d.getId()])}),e=f.filter(Boolean).join(" ")}}return e},r.prototype.getStyleFromLayer=function(t,e){var n;e===void 0&&(e={});var i,l=this.__getJoin(),f=this.__getJoinLayers(),d=this.get("toStyle"),v=this.getName(),g=t.getValues();if(d)i=d(g,{join:l,joinLayers:f,name:v,layer:t,property:this});else{var w=this.getProperties().map(function(S){var M=S.getName(),R=g[S.getId()],G=(0,C.isUndefined)(R)?S.getDefaultValue():R;if(e.number&&dd(S.getType())){var tt=S.parseValue(R,e.number);G="".concat(tt.value).concat(tt.unit)}return{name:M,value:G}});i=this.isDetached()?w.reduce(function(S,M){return S[M.name]=M.value,S},{}):((n={})[this.getName()]=w.map(function(S){return S.value}).join(l),n)}return e.camelCase?Object.keys(i).reduce(function(S,M){return S[(0,I.camelCase)(M)]=i[M],S},{}):i},r.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var n={};return this.get("preview")&&(n=this.getStyleFromLayer(t,e)),n},r.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,C.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},r.prototype.__upProperties=function(t,e){var n;e===void 0&&(e={});var i=this.getSelectedLayer();i&&(i.upValues(((n={})[t.getId()]=t.__getFullValue(),n)),e.__up||this.__upTargetsStyleProps(e))},r.prototype.__upLayers=function(t,e,n){this.__upTargetsStyleProps(n||e)},r.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return On.prototype.__upTargets.call(this,t,e)},r.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(),t)},r.prototype.__upTargetsStyle=function(t,e){return On.prototype.__upTargetsStyle.call(this,t,e)},r.prototype.__upSelected=function(t,e){var n=(t===void 0?{}:t).noEvent;e===void 0&&(e={});var i=this.em.Styles,l=this.getSelectedLayer(),f=l==null?void 0:l.getValues();f&&this.getProperties().forEach(function(d){var v,g=(v=f[d.getId()])!==null&&v!==void 0?v:"";d.__getFullValue()!==g&&d.upValue(g,ri(ri({},e),{__up:!0}))}),!n&&i.__trgEv(i.events.layerSelect,{property:this})},r.prototype._up=function(t,e){e===void 0&&(e={});var n=t.__layers,i=n===void 0?[]:n,l=Ng(t,["__layers"]);return!this.isDetached()&&this.__setLayers(i),this.__upSelected({noEvent:!0},e),On.prototype._up.call(this,l,e),this},r.prototype.__setLayers=function(t){t===void 0&&(t=[]);var e=this.__getLayers(),n=t.map(function(i){return{values:i}});e.length===n.length?n.map(function(i,l){var f;return(f=e.at(l))===null||f===void 0?void 0:f.upValues(i.values)}):this.__getLayers().reset(n),this.__upSelected({noEvent:!0})},r.prototype.__parseValue=function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(Ig).map(function(i){return i.trim()}).map(function(i){return e.__parseLayer(i)}).filter(Boolean),n},r.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),n=t.split(Fg),i=this.getProperties();return e?e({value:t,values:n}):i.reduce(function(l,f,d){var v=n[d];return l[f.getId()]=(0,C.isUndefined)(v)?f.getDefaultValue():v,l},{})},r.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;var n=this.getName(),i=this.getProperties(),l=this.getLayerSeparator(),f=this.get("fromStyle"),d=f?f(t,{property:this,name:n,separatorLayers:l}):[];if(!f){var v=this.__splitStyleName(t,n,l).map(function(g){return g.split(e.getSplitSeparator())}).map(function(g){var w={};return i.forEach(function(S,M){var R=g[M];w[S.getId()]=(0,C.isUndefined)(R)?S.getDefaultValue():R}),w});i.forEach(function(g){var w=g.getId();e.__splitStyleName(t,g.getName(),l).map(function(S){var M;return(M={})[w]=S||g.getDefaultValue(),M}).forEach(function(S,M){v[M]=v[M]?ri(ri({},v[M]),S):S})}),d=v}return(0,C.isArray)(d)?d:[d]},r.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},r.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var n={},i=this.getName(),l=this.getLayers(),f=this.getProperties();if(l.map(function(v){return e.getStyleFromLayer(v,t)}).forEach(function(v){(0,C.keys)(v).map(function(g){n[g]||(n[g]=[]),n[g].push(v[g])})}),(0,C.keys)(n).map(function(v){n[v]=n[v].join(e.__getJoinLayers())}),this.isDetached())n[i]="",!l.length&&f.map(function(v){n[v.getName()]=""});else{var d=f.reduce(function(v,g){return v[g.getName()]="",v},{});n[i]=n[i]||"",n=ri(ri({},n),d)}return n},r.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,C.isString)(e)?e:t)},r.prototype.__getFullValue=function(){return this.get("detached")?"":this.getStyleFromLayers()[this.getName()]},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget();return this.getLayers().length>0&&!e},r.prototype.clear=function(t){return t===void 0&&(t={}),this.__getLayers().reset(),this.__upTargetsStyleProps(t),On.prototype.clear.call(this),this},r.prototype.__canClearProp=function(){return!1},r}(wl);const Rg=Vg;var Hg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xu=function(){return Xu=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Xu.apply(this,arguments)},zg=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Ug=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},bf="data-clear-style",Bg=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,C.bindAll)(e,"__change","__updateStyle");var n=t.config||{},i=n.em;e.config=n,e.em=i,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,C.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,C.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(i,"change:device",e.onValueChange);var f=e.init&&e.init.bind(e);return f&&f(),e}return Hg(r,a),r.prototype.events=function(){var t;return(t={change:"inputValueChanged"})["click [".concat(bf,"]")]="clear",t},r.prototype.template=function(t){var e=this.pfx,n=this.ppfx;return`
      <div class="`.concat(e,`label" data-sm-label></div>
      <div class="`).concat(n,`fields" data-sm-fields></div>
    `)},r.prototype.templateLabel=function(t){var e=this.pfx,n=this.em,i=t.parent,l=t.attributes,f=l.icon,d=f===void 0?"":f,v=l.info,g=v===void 0?"":v,w=n==null?void 0:n.getConfig().icons,S=(w==null?void 0:w.close)||"";return`
      <span class="`.concat(e,"icon ").concat(d,'" title="').concat(g,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(i?"":'<div class="'.concat(e,'clear" style="display: none" ').concat(bf,">").concat(S,"</div>"),`
    `)},r.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},r.prototype.remove=function(){var t=this;return k.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},r.prototype.updateStatus=function(){var t,e=this,n=e.model,i=e.pfx,l=e.ppfx,f=e.config,d="".concat(l,"four-color"),v="".concat(l,"color-warn"),g=this.$el.children(".".concat(i,"label")),w=this.getClearEl(),S=w?w.style:{};g.removeClass("".concat(d," ").concat(v)),S.display="none",n.hasValue({noParent:!0})&&f.highlightChanged?(g.addClass(d),f.clearProperties&&(S.display="")):n.hasValue()&&f.highlightComputed&&g.addClass(v),(t=this.parent)===null||t===void 0||t.updateStatus()},r.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},r.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(bf,"]"))),this.clearEl},r.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)},r.prototype.onValueChange=function(t,e,n){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},r.prototype.setValue=function(t){var e=this.model,n=(0,C.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(n);this.__setValueInput(n)},r.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},r.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},r.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},r.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(Xu(Xu({},this._getClbOpts()),{value:t}))},r.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.emit&&this.emit.bind(this);n&&n.apply(void 0,Ug([this._getClbOpts()],t,!1))},r.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var n=e.complete,i=e.partial,l=(zg(e,["complete","partial"]),this.model),f=n!==!1&&i!==!0;(0,I.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!f}):l.upValue(t,{partial:!f})},r.prototype._getClbOpts=function(){var t=this,e=t.model;return{el:t.el,createdEl:t.createdEl,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},r.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,n=t.model,i=t.el,l=t.$el,f=n.getName(),d=n.getType(),v=n.get("className")||"",g="".concat(e,"property"),w=d==="number"?"".concat(e).concat(d," ").concat(e,"integer"):"".concat(e).concat(d);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(n)),l.find("[data-sm-label]").append(this.templateLabel(n));var S=this.create&&this.create.bind(this);this.createdEl=S&&S(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(n)),i.className="".concat(g," ").concat(w," ").concat(g,"__").concat(f," ").concat(v).trim(),i.className+=n.isFull()?" ".concat(g,"--full"):"";var M=this.onRender&&this.onRender.bind(this);return M&&M(),this.setValue(n.getValue()),this},r.prototype.onRender=function(){},r}(k.G7);const Ni=Bg;var Wg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$g=function(a){function r(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var n=e.collection;return e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.render),e}return Wg(r,a),r.prototype.addTo=function(t,e,n){this.add(t,null,n)},r.prototype.add=function(t,e,n){n===void 0&&(n={});var i=this.parent,l=this.config,f=e||this.el,d=new t.typeView({model:t,config:l});i&&(d.parent=i),d.render();var v=d.el;this.properties.push(d),(0,Re.$Q)(f,v,n.at)},r.prototype.remove=function(){return k.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},r.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},r.prototype.render=function(){var t=this,e=this.$el,n=this.pfx;this.clearItems();var i=document.createDocumentFragment();return this.collection.forEach(function(l){return t.add(l,i)}),e.empty(),e.append(i),e.attr("class","".concat(n,"properties")),this},r}(k.G7);const wf=$g;var qg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ju=function(){return Ju=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ju.apply(this,arguments)};const Oc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qg(r,a),r.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},r.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),Ni.prototype.remove.apply(this,arguments),this},r.prototype.onValueChange=function(){},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.get("properties");if(n.length&&!this.props){var i=e.isDetached(),l=new wf({config:Ju(Ju({},this.config),{highlightComputed:i,highlightChanged:i}),collection:n,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},r.prototype.clearCached=function(){Ni.prototype.clearCached.apply(this,arguments),delete this.props},r}(Ni);var Gg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Kg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Gg(r,a),r.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},r.prototype.template=function(){var t=this,e=t.pfx,n=t.ppfx,i=t.em,l=i==null?void 0:i.getConfig().icons,f=(l==null?void 0:l.close)||"",d=(l==null?void 0:l.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(n,`no-touch-actions" data-move-layer>
          `).concat(d,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(f,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.propertyView=t.propertyView;var i=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(i,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},r.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},r.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},r.prototype.select=function(){this.model.select()},r.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},r.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},r.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},r.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var n=this.getPreviewEl(),i=t.getStylePreview({number:{min:-3,max:3}}),l=(0,C.keys)(i).map(function(f){return"".concat(f,":").concat(i[f])}).join(";");n.setAttribute("style",l)}},r.prototype.updateVisibility=function(){var t,e=this,n=e.pfx,i=e.model,l=e.propertyView,f=this.getPropertiesWrapper(),d=i.isSelected();f.style.display=d?"":"none",this.$el[d?"addClass":"removeClass"]("".concat(n,"active")),d&&f.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},r.prototype.render=function(){var t=this,e=t.el,n=t.pfx,i=t.model;return e.innerHTML=this.template(),e.className="".concat(n,"layer"),i.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},r}(k.G7);const Yg=Kg;var Xg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jg=function(a){function r(t){var e=a.call(this,t)||this,n=e.collection,i=t.config||{},l=i.em,f=i.stylePrefix||"",d=i.pStylePrefix||"";e.config=i,e.pfx=f,e.ppfx=d,e.propertyView=t.propertyView,e.className="".concat(f,"layers ").concat(d,"field"),e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.reset),e.items=[];var v=l==null?void 0:l.Utils;return e.sorter=v?new v.Sorter({container:e.el,ignoreViewChildren:1,containerSel:".".concat(f,"layers"),itemSel:".".concat(f,"layer"),pfx:i.pStylePrefix}):"",n.view=e,e.$el.data("model",n),e.$el.data("collection",n),e}return Xg(r,a),r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var i=e||null,l=this,f=l.propertyView,d=l.config,v=l.sorter,g=l.$el,w=new Yg({model:t,config:d,sorter:v,propertyView:f}),S=w.render().el;if(this.items.push(w),i)i.appendChild(S);else if(n!==void 0){var M="before";g.children().length===n&&(n--,M="after"),n<0?g.append(S):g.children().eq(n)[M](S)}else g.append(S);return S},r.prototype.reset=function(t,e){this.clearItems(),this.render()},r.prototype.remove=function(){return this.clearItems(),k.G7.prototype.remove.apply(this,arguments),this},r.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},r.prototype.render=function(){var t=this,e=this.$el,n=this.sorter,i=document.createDocumentFragment();return e.empty(),this.collection.forEach(function(l){return t.addToCollection(l,i)}),e.append(i),e.attr("class",this.className),n&&(n.plh=null),this},r}(k.G7);const Zg=Jg;var Qg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_l=function(){return _l=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_l.apply(this,arguments)},tv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Qg(r,a),r.prototype.events=function(){return _l(_l({},Oc.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},r.prototype.templateInput=function(){var t=this.pfx,e=this.em,n=e==null?void 0:e.getConfig().icons,i=(n==null?void 0:n.plus)||"+";return`
      <div class="`.concat(t,"field ").concat(t,`stack">
        <button type="button" id="`).concat(t,`add" data-add-layer>
          `).concat(i,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},r.prototype.init=function(){var t=this.model;this.listenTo(t.__getLayers(),"change reset",this.updateStatus)},r.prototype.addLayer=function(){this.model.addLayer({},{at:0})},r.prototype.setValue=function(){},r.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),Oc.prototype.remove.apply(this,arguments),this},r.prototype.clearCached=function(){Oc.prototype.clearCached.apply(this,arguments),delete this.layersView},r.prototype.onRender=function(){var t=this,e=t.model,n=t.el,i=t.config,l=e.get("properties");if(l.length&&!this.props){var f=new wf({config:_l(_l({},i),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});f.render();var d=new Zg({collection:e.__getLayers(),config:i,propertyView:this});d.render(),n.querySelector("[data-layers-wrapper]").appendChild(d.el),this.props=f,this.layersView=d}},r}(Oc);const ev=tv;var nv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zu=function(){return Zu=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Zu.apply(this,arguments)};const rv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return nv(r,a),r.prototype.events=function(){return Zu(Zu({},Ni.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},r.prototype.templateInput=function(){var t,e=this.pfx,n=this.em,i=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,l=i==null?void 0:i.close;return`
      <div class="`.concat(e,"field ").concat(e,`file">
        <div id='`).concat(e,`input-holder'>
          <div class="`).concat(e,`btn-c">
            <button class="`).concat(e,'btn" id="').concat(e,`images" type="button" data-open-assets>
              `).concat(n.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`preview-file" data-preview-box>
          <div id="`).concat(e,'preview-file" class="').concat(e,`preview-file-cnt" data-preview></div>
          <div id="`).concat(e,'close" class="').concat(e,'preview-file-close" data-clear-asset>').concat(l,`</div>
        </div>
      </div>
    `)},r.prototype.__setValueInput=function(t){var e=this.model,n=this.el,i=e.getDefaultValue(),l=n.querySelector("[data-preview-box]"),f=n.querySelector("[data-preview]");l.style.display=t&&t!==i?"":"none",f.style.backgroundImage=t||e.getDefaultValue()},r.prototype.openAssetManager=function(){var t,e=this,n=(t=this.em)===null||t===void 0?void 0:t.Assets;n==null||n.open({select:function(i,l){var f=(0,C.isString)(i)?i:i.get("src");e.model.upValue(f,{partial:!l}),l&&n.close()},types:["image"],accept:"image/*"})},r}(Ni);var ov=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ii=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ov(r,a),r.prototype.templateInput=function(t){return""},r.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},r.prototype.setValue=function(t){},r.prototype.onRender=function(){var t=this,e=t.ppfx,n=t.model,i=t.el;if(!this.inputInst){var l=n.input;l.ppfx=e,l.render(),i.querySelector(".".concat(e,"fields")).appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},r.prototype.clearCached=function(){Ni.prototype.clearCached.apply(this,arguments),this.inputInst=null},r}(Ni);var iv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const sv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return iv(r,a),r.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},r.prototype.remove=function(){var t=this;Ii.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(n){return t[n]=null}),this},r.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},r.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,n=e.ppfx,i=e.model,l=e.em,f=e.el,d=new uc({target:l,model:i,ppfx:n,onChange:this.__handleChange}).render();f.querySelector(".".concat(n,"fields")).appendChild(d.el),this.input=(t=d.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=d}},r}(Ii);var av=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qu=function(){return Qu=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Qu.apply(this,arguments)},gd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};const _f=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return av(r,a),r.prototype.defaults=function(){return Qu(Qu({},On.getDefaults()),{options:[],full:0})},r.prototype.getOptions=function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]},r.prototype.getOption=function(t){var e=this,n=(0,I.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(i){return e.getOptionId(i)===n})[0]||null},r.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},r.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(gd(gd([],e,!0),[t],!1))}return this},r.prototype.getOptionId=function(t){return(0,I.isDef)(t.id)?t.id:t.value},r.prototype.getOptionLabel=function(t,e){var n;e===void 0&&(e={});var i=e.locale,l=i===void 0||i,f=((0,C.isString)(t)?this.getOption(t):t)||{},d=this.getOptionId(f),v=f.label||f.name||d,g=e.property||this.getId();return l&&((n=this.em)===null||n===void 0?void 0:n.t("styleManager.options.".concat(g,".").concat(d)))||v},r.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];On.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},r.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},r}(On);var lv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const vd=function(a){function r(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return lv(r,a),r.prototype.templateInput=function(){var t=this.pfx,e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`select">
        <span id="`).concat(t,`input-holder"></span>
        <div class="`).concat(e,`sel-arrow">
          <div class="`).concat(e,`d-s-arrow"></div>
        </div>
      </div>
    `)},r.prototype.updateOptions=function(){delete this.input,this.onRender()},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.getOptions();if(!this.input){var i=[];n.forEach(function(f){var d=e.getOptionId(f),v=e.getOptionLabel(d),g=f.style?f.style.replace(/"/g,"&quot;"):"",w=g?'style="'.concat(g,'"'):"",S=d.replace(/"/g,"&quot;");i.push('<option value="'.concat(S,'" ').concat(w,">").concat(v,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(i.join(""),"</select>"),this.input=l.firstChild}},r.prototype.__setValueInput=function(t){var e=this.model,n=this.getInputEl(),i=e.getOptions()[0],l=i?e.getOptionId(i):"";n&&(n.value=t||l)},r}(Ni);var cv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tp=function(){return tp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},tp.apply(this,arguments)};const uv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return cv(r,a),r.prototype.defaults=function(){return tp(tp({},_f.getDefaults()),{full:1})},r}(_f);var pv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const fv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return pv(r,a),r.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},r.prototype.onRender=function(){var t=this.pfx,e=this.ppfx,n=this.model,i="".concat(e,"radio-item-label"),l=n.getName(),f=n.getOptions(),d="".concat(t,"radio ").concat(t,"radio-").concat(l),v=n.cid;if(!this.input){var g=[];f.forEach(function(S){var M=S.className?"".concat(S.className," ").concat(t,"icon ").concat(i):"",R=n.getOptionId(S),G="".concat(l,"-").concat(R,"-").concat(v),tt=M?"":n.getOptionLabel(R),K=S.title?'title="'.concat(S.title,'"'):"",kt=n.getValue()===R?"checked":"";g.push(`
          <div class="`.concat(e,`radio-item">
            <input type="radio" class="`).concat(d,'" id="').concat(G,'" name="').concat(l,"-").concat(v,'" value="').concat(R,'" ').concat(kt,`/>
            <label class="`).concat(M||i,'" ').concat(K,' for="').concat(G,'">').concat(tt,`</label>
          </div>
        `))});var w=this.el.querySelector(".".concat(e,"field"));w.innerHTML='<div class="'.concat(e,'radio-items">').concat(g.join(""),"</div>"),this.input=w.firstChild}},r.prototype.__setValueInput=function(t){var e,n=this.model,i=t||n.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(i,'"]'));l&&(l.checked=!0)},r}(vd);var dv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ya=function(){return ya=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ya.apply(this,arguments)};const ep=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return dv(r,a),r.prototype.defaults=function(){return ya(ya({},On.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},r.prototype.getUnits=function(){return this.get("units")||[]},r.prototype.getUnit=function(){return this.get("unit")},r.prototype.getMin=function(){return this.get("min")},r.prototype.getMax=function(){return this.get("max")},r.prototype.getStep=function(){return this.get("step")},r.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),On.callParentInit(On,this,t,e);var n=this.get("unit"),i=this.getUnits();this.input=(0,I.hasWin)()?new Du({model:this}):void 0,i.length&&!n&&this.set("unit",i[0],{silent:!0}),On.callInit(this,t,e)},r.prototype.__getClearProps=function(){return ya(ya({},On.prototype.__getClearProps()),{unit:""})},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n=On.prototype.parseValue.apply(this,arguments),i=this.input.validateInputValue(n.value,ya({deepCheck:1},e)),l=i.value,f=i.unit;return n.value=l,n.unit=f,n},r.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),n=(0,C.isUndefined)(t)?"":"".concat(t),i=!(0,C.isUndefined)(e)&&n?e:"",l="".concat(n).concat(i);return On.prototype.getFullValue.apply(this,[l])},r}(On);var hv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),np=function(){return np=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},np.apply(this,arguments)};const gv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return hv(r,a),r.prototype.defaults=function(){return np(np({},ep.getDefaults()),{showInput:1})},r}(ep);var vv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rp=function(){return rp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},rp.apply(this,arguments)};const mv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return vv(r,a),r.prototype.events=function(){return rp(rp({},Ii.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},r.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},r.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},r.prototype.inputValueChanged=function(){this.model.upValue(this.getSliderEl().value)},r.prototype.inputValueChangedSoft=function(){this.model.upValue(this.getSliderEl().value,{partial:!0})},r.prototype.setValue=function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(n.value),Ii.prototype.setValue.apply(this,arguments)},r.prototype.onRender=function(){Ii.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},r.prototype.clearCached=function(){Ii.prototype.clearCached.apply(this,arguments),delete this.slider},r}(Ii),xf=k.FE.extend(xt).extend({extendViewApi:1,init:function(){var a=this.opts,r=this.em,t=a.module||(r==null?void 0:r.get("StyleManager"));t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:Rg,view:ev,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:wl,view:Oc,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:On,view:rv,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:On,view:sv,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:_f,view:vd,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:uv,view:fv,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:gv,view:mv,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:ep,view:Ii,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:ep,view:Ii,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:On,view:Ni,isType:function(a){return a.type="base",a}}]});var yv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),op=function(){return op=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},op.apply(this,arguments)},bv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},wv=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};const md=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,i=e.em;n.em=i;var l=t||{},f=n.buildProperties(l.buildProps),d=n.get("name")||"",v=[];!n.get("id")&&n.set("id",d.replace(/ /g,"_").toLowerCase()),v=(v=f?n.extendProperties(f):n.get("properties").map(function(w){return(0,C.isString)(w)?n.buildProperties(w)[0]:w}).filter(Boolean)).map(function(w){return n.checkExtend(w)});var g=new xf(v,{em:i});return g.sector=n,n.set("properties",g),n}return yv(r,a),r.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.get("id")},r.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},r.prototype.setName=function(t){return this.set("name",t)},r.prototype.isOpen=function(){return!!this.get("open")},r.prototype.setOpen=function(t){return this.set("open",t)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.get("properties");return(e.models?wv([],e.models,!0):e).filter(function(n){var i=!0;return t.withValue&&(i=n.hasValue({noParent:!0})),t.withParentValue&&(i=!n.hasValue({noParent:!0})&&n.hasValue()),i})},r.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},r.prototype.addProperty=function(t,e){return this.get("properties").add(this.checkExtend(t),e)},r.prototype.extendProperties=function(t,e,n){n===void 0&&(n=!1);for(var i=t.length,l=e||this.get("properties"),f=this.get("extendBuilded"),d=[],v=0,g=l.length;v<g;v++){for(var w=l[v],S=0,M=0;M<i;M++){var R=t[M];if(!(w.property!=R.property&&w.id!=R.property)){var G=w.properties;G&&G.length&&(w.properties=this.extendProperties(R.properties||[],G,1)),t[M]=f?(0,C.extend)(R,w):w,d[M]=t[M],S=1}}S||(t.push(w),d.push(w))}return n?d.filter(function(tt){return tt}):t},r.prototype.checkExtend=function(t){var e=((0,C.isString)(t)?{extend:t}:t)||{},n=e.extend,i=bv(e,["extend"]);return n?op(op({},this.buildProperties([n])[0]||{}),i):t},r.prototype.buildProperties=function(t){var e,n=t||[];if(!n.length)return[];var i=(e=this.em)===null||e===void 0?void 0:e.get("StyleManager").builtIn;return i==null?void 0:i.build(n)},r}(k.Hn);var _v=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ip=function(){return ip=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ip.apply(this,arguments)};const xv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return _v(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={});var n=e.module,i=e.em;this.em=i,this.module=n,this.listenTo(this,"reset",this.onReset)},r.prototype.model=function(t,e){e===void 0&&(e={});var n=e.collection.em;return new md(t,ip(ip({},e),{em:n}))},r.prototype.onReset=function(t,e){e===void 0&&(e={}),(e.previousModels||[]).forEach(function(n){return n.get("properties").reset()})},r}(k.FE);var Ss=function(){return Ss=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ss.apply(this,arguments)},Cv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},ba=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},lr=function(a){return a.map(function(r){return{id:r}})},Sv=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var r=", sans-serif",t=["flex-start","flex-end","center"],e=ba(ba([],t,!0),["baseline","stretch"],!1);this.optsBgSize=lr(["auto","cover","contain"]),this.optsBgAttach=lr(["scroll","fixed","local"]),this.optsBgRepeat=lr(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=lr(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=lr(["visible","hidden","scroll","auto"]),this.optsDir=lr(["row","row-reverse","column","column-reverse"]),this.opstDisplay=lr(["block","inline","inline-block","flex","none"]),this.optsTransitFn=lr(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=lr(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=lr(["none","left","right"]),this.optsPos=lr(["static","relative","absolute","fixed"]),this.optsTextAlign=lr(["left","center","right","justify"]),this.optsFlexAlign=lr(e),this.optsJustCont=lr(ba(ba([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=lr(ba(ba([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=lr(ba(["auto"],e,!0)),this.optsTransitProp=lr(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=lr(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=lr(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+r,"Arial Black, Gadget"+r,"Brush Script MT"+r,"Comic Sans MS, cursive"+r,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+r,"Impact, Charcoal"+r,"Lucida Sans Unicode, Lucida Grande"+r,"Tahoma, Geneva"+r,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+r,"Verdana, Geneva"+r].map(function(n){return{id:n,label:n.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(r){var t=this;return function(){return r.map(function(e){if((0,C.isString)(e))return t.get(e);var n=e.extend,i=Cv(e,["extend"]);return Ss(Ss({},t.get(n)),i)})}},a.prototype.init=function(){var r=this,t=this,e=t.fixedValues,n=t.requireFlex,i=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:i,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:n},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:i,default:"0",requiresParent:n}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black"}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:n},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:n},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(f,d){var v=d.values,g=v["box-shadow-h"],w=v["box-shadow-v"],S=v["box-shadow-blur"],M=v["box-shadow-spread"];return"".concat(g," ").concat(w," ").concat(S," ").concat(M)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(f,d){var v=d.values,g=v["text-shadow-h"],w=v["text-shadow-v"],S=v["text-shadow-blur"];return"".concat(g," ").concat(w," ").concat(S)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(f,d){var v=d.values;return[v["background-repeat-sub"]||"",v["background-position-sub"]||"",v["background-attachment-sub"]||"",v["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(f,d){var v=d.property,g=f[d.name]||"",w=v.getLayerSeparator();return g?g.split(w).map(function(S){var M=v.__parseFn(S);return{"transform-type":M.name,"transform-value":M.value}}):[]},toStyle:function(f,d){var v;return(v={})[d.name]="".concat(f["transform-type"],"(").concat(f["transform-value"],")"),v},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(f){var d=f.property;if(f.to.value){var v=d.getOption(),g=Ss({},v.propValue||{}),w=d.getParent().getProperty("transform-value"),S=w.getUnit();(!S||(g==null?void 0:g.units.indexOf(S))<0)&&(g.unit=(g==null?void 0:g.units[0])||""),w.up(g)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(f){var d=f[0],v=f[1],g=f[2];r.add(d,v||{},{from:g})}),this},a.prototype.add=function(r,t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.from||"",i=this.props[n||r]||{},l=Ss(Ss(Ss({},i),{property:r}),t);return l.properties&&(0,C.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[r]=l,l},a.prototype.get=function(r){return this.props[r]},a.prototype.build=function(r){var t=this,e=[];return((0,C.isString)(r)?[r]:r).forEach(function(n){e.push(t.get(n)||{property:n})}),e},a}();const Ov=Sv;var Tv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kv=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Pv=function(a){function r(t){var e=a.call(this,t)||this,n=t.config||{},i=e.model,l=n.em;return e.config=n,e.em=l,e.pfx=n.stylePrefix||"",e.listenTo(i,"destroy remove",e.remove),e.listenTo(i,"change:open",e.updateOpen),e.listenTo(i,"change:visible",e.updateVisibility),e}return Tv(r,a),r.prototype.template=function(t){var e,n=t.pfx,i=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,f=(l==null?void 0:l.caret)||"",d="".concat(n,"sector-");return rt(yd||(yd=kv([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),d,d,f,d,i)},r.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},r.prototype.updateOpen=function(){var t=this,e=t.$el,n=t.model,i=t.pfx,l=n.isOpen();e[l?"addClass":"removeClass"]("".concat(i,"open")),this.getPropertiesEl().style.display=l?"":"none"},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.getPropertiesEl=function(){var t=this.$el,e=this.pfx;return t.find(".".concat(e,"properties")).get(0)},r.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},r.prototype.renderProperties=function(){var t=this.model,e=this.config,n=t.get("properties");if(n){var i=new wf({collection:n,config:e});this.$el.append(i.render().el)}},r.prototype.render=function(){var t=this,e=t.pfx,n=t.model,i=t.$el,l=n.getId(),f=n.getName();return i.html(this.template({pfx:e,label:f})),this.renderProperties(),i.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},r}(k.G7);const Ev=Pv;var yd,Av=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jv=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.module,i=t.config,l=e.collection;return e.pfx=(i==null?void 0:i.stylePrefix)||"",e.ppfx=(i==null?void 0:i.pStylePrefix)||"",e.config=i,e.module=n,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return Av(r,a),r.prototype.remove=function(){var t=this;return k.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},r.prototype.addTo=function(t,e,n){n===void 0&&(n={}),this.addToCollection(t,null,n)},r.prototype.addToCollection=function(t,e,n){n===void 0&&(n={});var i=this.config,l=this.el,f=e||l,d=new Ev({model:t,config:i}).render().el;return(0,Re.$Q)(f,d,n.at),d},r.prototype.render=function(){var t=this,e=this,n=e.$el,i=e.pfx,l=e.ppfx;n.empty();var f=document.createDocumentFragment();return this.collection.each(function(d){return t.addToCollection(d,f)}),n.append(f),n.addClass("".concat(i,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},r}(k.G7);const Mv=jv;var Lv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wa=function(){return wa=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},wa.apply(this,arguments)},bd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},wd="style",Tc="".concat(wd,":"),Cf="".concat(Tc,"sector"),Dv="".concat(Cf,":add"),Nv="".concat(Cf,":remove"),Iv="".concat(Cf,":update"),Sf="".concat(Tc,"property"),Fv="".concat(Sf,":add"),Vv="".concat(Sf,":remove"),Rv="".concat(Sf,":update"),_d="".concat(Tc,"layer:select"),Of="".concat(Tc,"target"),Hv="".concat(Tc,"custom"),xd=function(a){return a||a===0},zv={all:wd,sectorAdd:Dv,sectorRemove:Nv,sectorUpdate:Iv,propertyAdd:Fv,propertyRemove:Vv,propertyUpdate:Rv,layerSelect:_d,target:Of,custom:Hv},Uv=function(a){function r(t){var e=a.call(this,t,"StyleManager",new xv([],{em:t}),zv,Sg)||this;e.Sector=md,e.storageKey="",(0,C.bindAll)(e,"__clearStateTarget");var n=e.config,i=n.pStylePrefix;i&&(n.stylePrefix=i+n.stylePrefix),e.builtIn=new Ov,e.properties=new xf([],{em:t,module:e}),e.sectors=e.all;var l=new k.Hn({targets:[]});e.model=l,e.upAll=(0,C.debounce)(function(){return e.__upSel()},0),l.listenTo(t,"component:toggled component:update:classes change:state change:device frame:resized selector:type",e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var f=(0,C.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",f);var d=(0,C.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(_d," ").concat(Of),d),l.on("change:lastTarget",function(){return t.trigger(Of,e.getSelected())}),e}return Lv(r,a),r.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.__trgEv=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(e=this.em).trigger.apply(e,bd([t],n,!1))},r.prototype.__clearStateTarget=function(){var t=this,e=this.em,n=this.__getStateTarget();n&&(e==null||e.skip(function(){e.Css.remove(n),t.model.set({stateTarget:null})}))},r.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.addSector=function(t,e,n){n===void 0&&(n={});var i=this.getSector(t);return i||(e.id=t,i=this.sectors.add(e,n)),i},r.prototype.getSector=function(t,e){e===void 0&&(e={});var n=this.sectors.where({id:t})[0];return!n&&e.warn&&this._logNoSector(t),n||null},r.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,n=e&&e.models?t.array?bd([],e.models,!0):e:[];return t.visible?n.filter(function(i){return i.isVisible()}):n},r.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},r.prototype.addProperty=function(t,e,n){n===void 0&&(n={});var i=this.getSector(t,{warn:!0}),l=null;return i&&(l=i.addProperty(e,n)),l},r.prototype.getProperty=function(t,e){var n,i=this.getSector(t,{warn:!0});return i&&(n=i.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),n},r.prototype.getProperties=function(t){var e,n=this.getSector(t,{warn:!0});return n&&(e=n.properties),e},r.prototype.removeProperty=function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},r.prototype.select=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,C.isArray)(t)?t:[t],f=e.stylable,d=i.Css,v=[];l.filter(Boolean).forEach(function(G){var tt=G;if((0,C.isString)(G)){var K=d.getRule(G)||d.setRule(G);!(0,C.isUndefined)(f)&&K.set({stylable:f}),tt=K}v.push(tt)});var g=e.component||v.filter(function(G){return(0,I.isComponent)(G)}).reverse()[0];v=v.map(function(G){return n.getModelToStyle(G)});var w=i.getState(),S=v.slice().reverse()[0],M=this.getParentRules(S,{state:w,component:g}),R=this.__getStateTarget();return i.skip(function(){var G;if(w&&((G=S==null?void 0:S.getState)===null||G===void 0?void 0:G.call(S))){var tt=S.getStyle();R?R.setStyle(tt):R=d.getAll().add({selectors:"gjs-selected",style:tt,shallow:!0,important:!0})}else R&&(d.remove(R),R=void 0)}),this.model.set({targets:v,lastTarget:S,lastTargetParents:M,stateTarget:R,component:g}),this.__upProps(e),v},r.prototype.getSelected=function(){return this.model.get("lastTarget")||null},r.prototype.getSelectedAll=function(){return this.model.get("targets")},r.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},r.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},r.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var n=this.getSelected(),i=this.__getStateTarget();n&&(i==null||i.setStyle(n.getStyle(),e))},r.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},r.prototype.getBuiltInAll=function(){return this.builtIn.props},r.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},r.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var n=this.em,i=e.skipAdd;if(n&&(t==null?void 0:t.toHTML)){var l=n.getConfig(),f=n.UndoManager,d=n.Css,v=n.Selectors,g=v?v.getConfig():{},w=l.devicePreviewMode?"":n.get("state"),S=t.get("classes").getStyleable(),M=S.length,R=!g.componentFirst||e.useClasses,G={noCount:1},tt={state:w,addOpts:G},K=void 0;if(f.stop(),M&&R){var kt=n.getCurrentMedia();(K=d.get(S,w,kt))||i||(K=d.add(S,w,kt,{},G))}else if(l.avoidInlineStyle){var Ft=t.getId();!(K=d.getIdRule(Ft,tt))&&!i&&(K=d.setIdRule(Ft,{},tt)),t.is("wrapper")&&K.set("wrapper",1,G)}K&&(t=K),f.start()}return t},r.prototype.getParentRules=function(t,e){var n=e===void 0?{}:e,i=n.state,l=n.component,f=this.em,d=[];if(f&&t){var v=l,g=f.Css,w=f.CodeManager.getGenerator("css"),S=t.toHTML?t:t.getComponent(),M={combination:!0,array:!0},R=[],G=[],tt=[];S?(R=g.getRules("#".concat(S.getId())),tt=(G=v?g.getRules(v.getSelectors().getFullName(M)):[]).concat(R)):(R=v?g.getRules("#".concat(v.getId())):[],G=g.getRules(t.getSelectors().getFullName(M)),tt=R.concat(G));var K=tt.filter(function(kt){return(0,C.isUndefined)(i)?1:kt.get("state")===i}).sort(w.sortRules).reverse();d=K.slice(K.indexOf(t)+1)}return d},r.prototype.addType=function(t,e){this.properties.addType(t,e)},r.prototype.getType=function(t){return this.properties.getType(t)},r.prototype.getTypes=function(){return this.properties.getTypes()},r.prototype.createType=function(t,e){var n=e===void 0?{}:e,i=n.model,l=i===void 0?{}:i,f=n.view,d=f===void 0?{}:f,v=this.config,g=this.getType(t);if(g)return new g.view(wa({model:new g.model(l),config:v},d))},r.prototype.render=function(){var t=this,e=t.config,n=t.em,i=t.SectView,l=i&&i.el;return this.SectView=new Mv({el:l,em:n,config:e,module:this,collection:this.sectors}),this.SectView.render().el},r.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},r.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var n=this.getSelected();if(n){var i=this.sectors,l=this.model.get("component"),f=this.getSelectedParents(),d=n.getStyle(),v=f.map(function(g){return{target:g,style:g.getStyle()}});i.map(function(g){g.getProperties().map(function(w){e.__upProp(w,d,v,t)})}),i.forEach(function(g){var w=g.getProperties();w.forEach(function(M){var R=M.__checkVisibility({target:n,component:l,sectors:i});M.set("visible",R)});var S=w.some(function(M){return M.isVisible()});g.set("visible",S)})}},r.prototype.__upProp=function(t,e,n,i){var l=this,f=t.getName(),d=e[f],v=xd(d),g=t.getType()==="stack",w=t.getType()==="composite",S=wa(wa({},i),{__up:!0}),M=!w&&!g,R=g?t.__getLayersFromStyle(e):[],G=w?t.__getPropsFromStyle(e):{},tt=v?d:null,K=null;if(g&&R===null||w&&G===null){var kt=g?"__getLayersFromStyle":"__getPropsFromStyle";if(ae=n.filter(function(Ze){return t[kt](Ze.style)!==null})[0]){tt=ae.style[f],K=ae.target;var Ft=t[kt](ae.style);g?R=Ft:G=Ft}}else if(!v){var ae;tt=null,(ae=n.filter(function(Ze){return xd(Ze.style[f])})[0])&&(tt=ae.style[f],K=ae.target)}if(t.__setParentTarget(K),M&&t.__getFullValue()!==tt&&t.upValue(tt,S),g&&t.__setLayers(R||[]),w){var me=t.getProperties();if(t.isDetached()){var Me=t.__getPropsFromStyle(e,{byName:!0})||{},Ve=n.map(function(Ze){return wa(wa({},Ze),{style:t.__getPropsFromStyle(Ze.style,{byName:!0})||{}})});me.map(function(Ze){return l.__upProp(Ze,Me,Ve,i)})}else t.__setProperties(G||{},S),t.getProperties().map(function(Ze){return Ze.__setParentTarget(K)})}},r.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},r}(Dt);const Bv=Uv;var Wv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yr=function(){return yr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},yr.apply(this,arguments)},Tf=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},kf=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},$v=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},qv=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};J().$=wt.default;var Gv=[ih,Jd,hh,ug,ll,Gt,Hp,Bv,fs,_h,rg,Vh,bg,Gd,Ul,Pe,dc,Sp,Pn,Ut,Cg,ql],Kv=[];(function(a){var r=a.$;if(r&&r.prototype&&r.prototype.constructor.name!=="jQuery"){var t=r.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var i=this.get(0);return i&&i.focus(),this},t.bind=function(i,l){return this.on(i,l)},t.unbind=function(i,l){if((0,C.isObject)(i)){for(var f in i)i.hasOwnProperty(f)&&this.off(f,i[f]);return this}return this.off(i,l)},t.click=function(i){return i?this.on("click",i):this.trigger("click")},t.change=function(i){return i?this.on("change",i):this.trigger("change")},t.keydown=function(i){return i?this.on("keydown",i):this.trigger("keydown")},t.delegate=function(i,l,f,d){return d||(d=f),this.on(l,i,function(v){v.data=f,d(v)})},t.scrollLeft=function(){var i=this.get(0),l=(i=i.nodeType==9?i.defaultView:i)instanceof Window?i:null;return l?l.pageXOffset:i.scrollLeft||0},t.scrollTop=function(){var i=this.get(0),l=(i=i.nodeType==9?i.defaultView:i)instanceof Window?i:null;return l?l.pageYOffset:i.scrollTop||0};var e=r.prototype.offset;t.offset=function(i){var l,f;return i&&(l=i.top,f=i.left),l!==void 0&&this.css("top","".concat(l,"px")),f!==void 0&&this.css("left","".concat(f,"px")),e.call(this)},r.map=function(i,l){for(var f=[],d=0;d<i.length;d++)f.push(l(i[d],d));return f};var n=Array.prototype.indexOf;r.inArray=function(i,l,f){return l==null?-1:n.call(l,i,f)},r.Event=function(i,l){if(!(this instanceof r.Event))return new r.Event(i,l);this.type=i,this.isDefaultPrevented=function(){return!1}}}})({$:wt.default});var Cd={debug:console.log,info:console.info,warning:console.warn,error:console.error},Yv=function(a){function r(t){t===void 0&&(t={});var e=a.call(this)||this;e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var n=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new j),e.set("dmode",n.dragMode);var i=n.el,l=n.log,f=l===!0?(0,C.keys)(Cd):(0,C.isArray)(l)?l:[];return(0,C.bindAll)(e,"initBaseColorPicker"),i&&n.fromElement&&(n.components=i.innerHTML),e.attrsOrig=i?(0,C.toArray)(i.attributes).reduce(function(d,v){return d[v.nodeName]=v.nodeValue,d},{}):"",n.components&&!n.pageManager&&(n.pageManager={pages:[{component:n.components}]}),Gv.forEach(function(d){return e.loadModule(d)}),Kv.forEach(function(d){return e.tsLoadModule(d)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),f.forEach(function(d){return e.listenLog(d)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(d){var v=d.from,g=d.to;e.listenTo(e,v,function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];e.trigger.apply(e,qv([g],w,!1)),e.logWarning("The event '".concat(v,"' is deprecated, replace it with '").concat(g,"'"))})}),e}return Wv(r,a),r.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(r.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),r.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},r.prototype.getContainer=function(){return this.config.el},r.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),Cd[t])},Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),r.prototype.getConfig=function(t){var e=this.config;return(0,C.isUndefined)(t)?e:e[t]},r.prototype.loadOnStart=function(){var t=this,e=this.config,n=e.projectData,i=e.headless,l=this.get("StorageManager");this.toLoad.forEach(function(v){return v.onLoad()});var f=function(){t.modules.forEach(function(v){return v.postLoad&&v.postLoad(t)}),t.set("readyLoad",1)};i?(n&&this.loadData(n),f()):setTimeout(function(){return Tf(t,void 0,void 0,function(){var v;return kf(this,function(g){switch(g.label){case 0:return n?(this.loadData(n),[3,5]):[3,1];case 1:if(!(l!=null&&l.canAutoload()))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.load()];case 3:return g.sent(),[3,5];case 4:return v=g.sent(),this.logError(v),[3,5];case 5:return f(),[2]}})})});var d=new r({noticeOnUnload:!1,storageManager:!1,undoManager:!1});["PageManager","Canvas"].forEach(function(v){return d.get(v).onLoad()}),this.set("shallow",d)},r.prototype.updateChanges=function(){var t=this,e=this.get("StorageManager"),n=this.getDirtyCount();this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return t.trigger("update")}),this.config.noticeOnUnload&&(window.onbeforeunload=n?function(){return!0}:null),e.isAutosave()&&n>=e.getStepsBeforeSave()&&this.store().catch(function(i){return t.logError(i)})},r.prototype.loadModule=function(t){var e=this.config,n=new t(this),i=n.name.charAt(0).toLowerCase()+n.name.slice(1),l=(0,C.isUndefined)(e[i])?e[n.name]:e[i],f=l===!0?{}:l||{};return f.pStylePrefix=e.pStylePrefix||"",(0,C.isUndefined)(l)||l||(f._disable=1),n.storageKey&&n.store&&n.load&&this.storables.push(n),f.em=this,n.init(yr({},f)),!n.private&&this.set(n.name,n),n.onLoad&&this.toLoad.push(n),this.modules.push(n),this},r.prototype.tsLoadModule=function(t){var e=new(t.default||t)(this);return e.storageKey&&e.store&&e.load&&this.storables.push(e),!e.private&&this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),this},r.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},r.prototype.getEditor=function(){return this.get("Editor")},r.prototype.handleUpdates=function(t,e,n){var i=this;n===void 0&&(n={}),this.__skip||n.temporary||n.noCount||n.avoidStore||!this.get("ready")||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=i.getDirtyCount()||0,f=(n.unset,$v(n,["unset"]));i.set("changesCount",l+1,f)},0))},r.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},r.prototype.componentHovered=function(t,e,n){var i=this.previous("componentHovered");i&&this.trigger("component:unhovered",i,n),e&&this.trigger("component:hovered",e,n)},r.prototype.getSelected=function(){return this.selected.lastComponent()},r.prototype.getSelectedAll=function(){return this.selected.allComponents()},r.prototype.setSelected=function(t,e){var n=this;e===void 0&&(e={});var i=e.event,l=i&&(i.ctrlKey||i.metaKey),f=(i||{}).shiftKey,d=((0,C.isArray)(t)?t:[t]).map(function(S){return(0,I.getModel)(S,wt.default)}),v=this.getSelectedAll(),g=this.getConfig().multipleSelection,w=(0,C.isArray)(t);w&&this.removeSelected(v.filter(function(S){return!(0,C.contains)(d,S)})),d.forEach(function(S){var M=(0,I.getModel)(S,void 0);if(M&&(n.trigger("component:select:before",M,e),!M.get("selectable")||e.abort)){if(!e.useValid)return;for(var R=M.parent();R&&!R.get("selectable");)R=R.parent();M=R}if(l&&g)return n.toggleSelected(M);if(f&&g){n.clearSelection(n.get("Canvas").getWindow());var G,tt,K=M.collection,kt=M.index();if(n.getSelectedAll().forEach(function(Ft){var ae=Ft.collection,me=Ft.index();ae===K&&(me<kt?G=(0,C.isUndefined)(G)?me:Math.max(G,me):me>kt&&(tt=(0,C.isUndefined)(tt)?me:Math.min(tt,me)))}),!(0,C.isUndefined)(G))for(;G!==kt;)n.addSelected(K.at(G)),G++;if(!(0,C.isUndefined)(tt))for(;tt!==kt;)n.addSelected(K.at(tt)),tt--;return n.addSelected(M)}!w&&n.removeSelected(v.filter(function(Ft){return Ft!==M})),n.addSelected(M,e)})},r.prototype.addSelected=function(t,e){var n=this;e===void 0&&(e={});var i=(0,I.getModel)(t,wt.default);((0,C.isArray)(i)?i:[i]).forEach(function(l){var f=n.selected;l&&l.get("selectable")&&!l.parents().some(function(d){return f.hasComponent(d)})&&(e.forceChange&&n.removeSelected(l,e),f.allComponents().filter(function(d){return(0,C.contains)(d.parents(),l)}).forEach(function(d){return n.removeSelected(d,e)}),f.addComponent(l,e),l&&n.trigger("component:select",l,e))})},r.prototype.removeSelected=function(t,e){e===void 0&&(e={}),this.selected.removeComponent((0,I.getModel)(t,wt.default),e)},r.prototype.toggleSelected=function(t,e){var n=this;e===void 0&&(e={});var i=(0,I.getModel)(t,wt.default);((0,C.isArray)(i)?i:[i]).forEach(function(l){n.selected.hasComponent(l)?n.removeSelected(l,e):n.addSelected(l,e)})},r.prototype.setHovered=function(t,e){if(e===void 0&&(e={}),!t)return this.set("componentHovered","");var n="component:hover",i=(0,I.getModel)(t,void 0);if(i){if(e.forceChange&&this.set("componentHovered",""),this.trigger("".concat(n,":before"),i,e),!i.get("hoverable")){if(!e.useValid||e.abort)return;for(var l=i&&i.parent();l&&!l.get("hoverable");)l=l.parent();i=l}e.abort||(this.set("componentHovered",i,e),this.trigger(n,i,e))}},r.prototype.getHovered=function(){return this.get("componentHovered")},r.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.get("DomComponents").setComponents(t,e)},r.prototype.getComponents=function(){var t=this.get("DomComponents"),e=this.get("CodeManager");if(t&&e){var n=t.getComponents();return e.getCode(n,"json")}},r.prototype.setStyle=function(t,e){e===void 0&&(e={});var n=this.get("CssComposer");return n.clear(e),n.getAll().add(t,e),this},r.prototype.addStyle=function(t,e){e===void 0&&(e={});var n=this.getStyle().add(t,e);return(0,C.isArray)(n)?n:[n]},r.prototype.getStyle=function(){return this.Css.getAll()},r.prototype.setState=function(t){return this.set("state",t),this},r.prototype.getState=function(){return this.get("state")||""},r.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,n=e.optsHtml,i=e.jsInHtml?this.getJs(t):"",l=t.component||this.get("DomComponents").getComponent(),f=l?this.get("CodeManager").getCode(l,"html",yr(yr({},n),t)):"";return f+=i?"<script>".concat(i,"<\/script>"):""},r.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,n=e.optsCss,i=t.avoidProtected,l=(0,C.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,f=this.get("CssComposer"),d=t.component||this.Components.getComponent(),v=i?"":e.protectedCss,g=d&&this.CodeManager.getCode(d,"css",yr(yr({cssc:f,keepUnusedStyles:l},n),t));return d?t.json?g:v+g:""},r.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},r.prototype.store=function(t){return Tf(this,void 0,void 0,function(){var e;return kf(this,function(n){switch(n.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return n.sent(),this.clearDirtyCount(),[2,e]}})})},r.prototype.load=function(t){return Tf(this,void 0,void 0,function(){var e;return kf(this,function(n){switch(n.label){case 0:return[4,this.Storage.load(t)];case 1:return e=n.sent(),this.loadData(e),[2,e]}})})},r.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(n){t=yr(yr({},t),n.store(1))}),JSON.parse(JSON.stringify(t))},r.prototype.loadData=function(t){return t===void 0&&(t={}),(0,I.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},r.prototype.getDeviceModel=function(){var t=this.get("device");return this.get("DeviceManager").get(t)},r.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);e&&!this.defaultRunning&&(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},r.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);e&&this.defaultRunning&&(e.stop(this,this,t),this.defaultRunning=!1)},r.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.set("canvasOffset",null),this.set("canvasOffset",this.get("Canvas").getOffset()),t.tools&&this.trigger("canvas:updateTools")},r.prototype.clearSelection=function(t){var e;(e=(t||window).getSelection())===null||e===void 0||e.removeAllRanges()},r.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,i=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!i?"(".concat(n,": ").concat(l,")"):""},r.prototype.getWrapper=function(){return this.get("DomComponents").getWrapper()},r.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},r.prototype.getCurrentFrame=function(){return this.get("currentFrame")},r.prototype.getCurrentFrameModel=function(){return(this.getCurrentFrame()||{}).model},r.prototype.getIcon=function(t){return(this.config.icons||{})[t]||""},r.prototype.getDirtyCount=function(){return this.get("changesCount")},r.prototype.clearDirtyCount=function(){return this.set("changesCount",0)},r.prototype.getZoomDecimal=function(){return this.get("Canvas").getZoomDecimal()},r.prototype.getZoomMultiplier=function(){return this.get("Canvas").getZoomMultiplier()},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.get("I18n");return n==null?void 0:n.t.apply(n,t)},r.prototype.inAbsoluteMode=function(){return this.get("dmode")==="absolute"},r.prototype.destroyAll=function(){var t=this,e=this.config,n=this.view,i=this.getEditor(),l=(e.grapesjs||{}).editors,f=l===void 0?[]:l,d=this.get("shallow");d==null||d.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(v){return v.destroy()}),n&&n.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(v){return t[v]={}}),f.splice(f.indexOf(i),1),(0,I.hasWin)()&&(0,wt.default)(e.el).empty().attr(this.attrsOrig)},r.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},r.prototype.setEditing=function(t){return this.set("editing",t),this},r.prototype.isEditing=function(){return!!this.get("editing")},r.prototype.log=function(t,e){e===void 0&&(e={});var n=e.ns,i=e.level,l=i===void 0?"debug":i;if(this.trigger("log",t,e),l&&this.trigger("log:".concat(l),t,e),n){var f="log-".concat(n);this.trigger(f,t,e),l&&this.trigger("".concat(f,":").concat(l),t,e)}},r.prototype.logInfo=function(t,e){this.log(t,yr(yr({},e),{level:"info"}))},r.prototype.logWarning=function(t,e){this.log(t,yr(yr({},e),{level:"warning"}))},r.prototype.logError=function(t,e){this.log(t,yr(yr({},e),{level:"error"}))},r.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var n=this.config,i=n.colorPicker,l=i===void 0?{}:i,f=n.el,d=n.stylePrefix;return(0,wt.default)(t).spectrum(yr(yr({containerClassName:"".concat(d,"one-bg ").concat(d,"two-color"),appendTo:f||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"\u2A2F"},e),l))},r.prototype.skip=function(t){this.__skip=!0;var e=this.get("UndoManager");e?e.skip(t):t(),this.__skip=!1},r.prototype.data=function(t,e,n){var i="_gjs-data";if(t[i]||(t[i]={}),(0,C.isUndefined)(n))return t[i][e];t[i][e]=n},r}(k.Hn);const Xv=Yv;var Jv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zv=function(a){function r(t){var e=a.call(this,{model:t})||this,n=t.attributes,i=n.Panels,l=n.UndoManager;return t.view=e,t.once("change:ready",function(){i.active(),i.disableButtons(),l.clear(),setTimeout(function(){t.trigger("load",t.get("Editor")),t.clearDirtyCount()})}),e}return Jv(r,a),r.prototype.render=function(){var t=this,e=this.$el,n=this.model,i=n.attributes,l=i.Panels,f=i.Canvas,d=n.config,v=n.modules,g=d.stylePrefix,w=["".concat(g,"editor")];!d.customUI&&w.push("".concat(g,"one-bg ").concat(g,"two-color"));var S=(0,wt.default)(d.el||"body ".concat(d.container));d.cssIcons&&(0,I.appendStyles)(d.cssIcons,{unique:!0,prepand:!0}),e.empty(),d.width&&S.css("width",d.width),d.height&&S.css("height",d.height),e.append(f.render()),e.append(l.render());var M=n.get("shallow").get("Canvas").render();return M.style.display="none",e.append(M),e.attr("class",w.join(" ")),S.addClass("".concat(g,"editor-cont")).empty().append(e),v.forEach(function(R){return R.postRender&&R.postRender(t)}),this},r}(k.G7);const Qv=Zv;var kc=function(){return kc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},kc.apply(this,arguments)},Sd=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(v){try{d(e.next(v))}catch(g){i(g)}}function f(v){try{d(e.throw(v))}catch(g){i(g)}}function d(v){var g;v.done?n(v.value):(g=v.value,g instanceof t?g:new t(function(w){w(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Od=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(v){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(w){g=[6,w],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,v])}}},tm=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},em=function(){function a(r,t){var e;r===void 0&&(r={}),t===void 0&&(t={}),this.modules=[],this.html=rt,this.config=kc(kc(kc({},_t),r),{pStylePrefix:(e=r.stylePrefix)!==null&&e!==void 0?e:_t.stylePrefix}),this.em=new Xv(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return this.em.getConfig(r)},a.prototype.getHtml=function(r){return this.em.getHtml(r)},a.prototype.getCss=function(r){return this.em.getCss(r)},a.prototype.getJs=function(r){return this.em.getJs(r)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(r,t){return t===void 0&&(t={}),this.em.setComponents(r,t),this},a.prototype.addComponents=function(r,t){return this.getWrapper().append(r,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(r,t){return t===void 0&&(t={}),this.em.setStyle(r,t),this},a.prototype.addStyle=function(r,t){return t===void 0&&(t={}),this.em.addStyle(r,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var r=this.em.getSelected();if(r)return this.StyleManager.getModelToStyle(r)},a.prototype.select=function(r,t){return this.em.setSelected(r,t),this},a.prototype.selectAdd=function(r){return this.em.addSelected(r),this},a.prototype.selectRemove=function(r){return this.em.removeSelected(r),this},a.prototype.selectToggle=function(r){return this.em.toggleSelected(r),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(r){return this.em.set("device",r),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(r,t){return t===void 0&&(t={}),this.Commands.run(r,t)},a.prototype.stopCommand=function(r,t){return t===void 0&&(t={}),this.Commands.stop(r,t)},a.prototype.store=function(r){return Sd(this,void 0,void 0,function(){return Od(this,function(t){switch(t.label){case 0:return[4,this.em.store(r)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(r){return Sd(this,void 0,void 0,function(){return Od(this,function(t){switch(t.label){case 0:return[4,this.em.load(r)];case 1:return[2,t.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(r){return this.em.loadData(r)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(r){return this.em.loadData(r)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(r){this.em.refreshCanvas(r)},a.prototype.setCustomRte=function(r){this.RichTextEditor.customRte=r},a.prototype.setCustomParserCss=function(r){return this.Parser.getConfig().parserCss=r,this},a.prototype.setDragMode=function(r){return this.em.setDragMode(r),this},a.prototype.log=function(r,t){return t===void 0&&(t={}),this.em.log(r,t),this},a.prototype.t=function(){for(var r,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(r=this.em).t.apply(r,t)},a.prototype.on=function(r,t){return this.em.on(r,t),this},a.prototype.once=function(r,t){return this.em.once(r,t),this},a.prototype.off=function(r,t){return this.em.off(r,t),this},a.prototype.trigger=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,tm([r],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var r;return(r=this.editorView)===null||r===void 0?void 0:r.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var r;return(r=this.editorView)===null||r===void 0||r.remove(),this.editorView=new Qv(this.em),this.editorView.render().el},a.prototype.onReady=function(r){this.em.get("ready")?r(this):this.em.on("load",r)},a}();const nm=em,rm=function(){function a(){this.plugins={}}return a.prototype.add=function(r,t){var e=this.get(r);return e||(this.plugins[r]=t,t)},a.prototype.get=function(r){return this.plugins[r]},a.prototype.getAll=function(){return this.plugins},a}();var sp=function(){return sp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},sp.apply(this,arguments)};(function(){if((0,I.hasWin)()&&function(){for(var r,t=window.navigator.userAgent,e=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],n=0;n<e.length&&!(r=e[n][1].exec(t));n++);return!!r}()){var a=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(r){return r||(r=""),a.apply(document.implementation,[r])}}})();var Td=new rm,kd=[],om={$:wt.default,editors:kd,plugins:Td,version:"0.20.4",init:function(a){a===void 0&&(a={});var r=a.headless,t=a.container;if(!t&&!r)throw new Error("'container' is required");var e=sp(sp({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:r?void 0:(0,C.isElement)(t)?t:document.querySelector(t)}),n=new nm(e,{$:wt.default}),i=n.getModel();return e.plugins.forEach(function(l){var f=(0,C.isFunction)(l)?l:Td.get(l),d=e.pluginsOpts[l]||{};if(!f){var v=(0,I.getGlobal)()[l];f=(v==null?void 0:v.default)||v}f?f(n,d):(0,C.isFunction)(l)?l(n,d):i.logWarning("Plugin ".concat(l," not found"),{context:"plugins",plugin:l})}),i.loadOnStart(),e.autorender&&!r&&n.render(),kd.push(n),n}};const im=om})(),vp=vp.default})())})(qd);const km=Tm(qd.exports);km.init({height:"100%",showOffsets:!0,noticeOnUnload:!1,storageManager:!1,container:"#gjs",fromElement:!0,plugins:["grapesjs-preset-webpage"]});

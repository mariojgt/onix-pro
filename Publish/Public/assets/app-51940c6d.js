var ri=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Md(P){return P&&P.__esModule&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P}var yd={},n0={get exports(){return yd},set exports(P){yd=P}};/*! grapesjs - 0.20.4 */(function(P,B){(function(W,Q){P.exports=Q()})(typeof globalThis<"u"?globalThis:typeof window<"u"?window:ri,()=>(()=>{var W={410:(y,tt,N)=>{var K,gt,X;gt=[N(50),N(316)],(X=typeof(K=function(nt,G){var S=Array.prototype.slice;function T(k,H,et){return et.length<=4?k.call(H,et[0],et[1],et[2],et[3]):k.apply(H,et)}function D(k,H){return S.call(k,H)}function F(k,H){return k!=null&&(nt.isArray(H)||(H=D(arguments,1)),nt.all(H,function(et){return et in k}))}var R=function(){var k=!1,H=-1;function et(){H++,k=!0,nt.defer(function(){k=!1})}return function(){return k||et(),H}}();function dt(){this.registeredObjects=[],this.cidIndexes=[]}function bt(k,H,et,at){for(var Pt,ct=0,Tt=H.length;ct<Tt;ct++)if(Pt=H[ct]){if(k==="on"){if(!at.objectRegistry.register(Pt))continue}else if(!at.objectRegistry.unregister(Pt))continue;nt.isFunction(Pt[k])&&Pt[k]("all",et,at)}}function It(k,H){var et=H.type,at=H.undoTypes,Pt=!at[et]||at[et][k];nt.isFunction(Pt)&&Pt(H.object,H.before,H.after,H.options)}function Dt(k,H,et,at,Pt){if(!(et.isCurrentlyUndoRedoing||k==="undo"&&et.pointer===-1||k==="redo"&&et.pointer===et.length-1)){et.isCurrentlyUndoRedoing=!0;var ct,Tt,q=k==="undo";for(Pt?Tt=q&&et.pointer===et.length-1||!q&&et.pointer===-1?nt.clone(et.models):S.apply(et.models,q?[0,et.pointer]:[et.pointer,et.length-1]):(ct=et.at(q?et.pointer:et.pointer+1),Tt=at?et.where({magicFusionIndex:ct.get("magicFusionIndex")}):[ct]),et.pointer+=(q?-1:1)*Tt.length;ct=q?Tt.pop():Tt.shift();)ct[k]();et.isCurrentlyUndoRedoing=!1,H.trigger(k,H)}}function $t(k,H){var et=k.condition,at=typeof et;return at==="function"?!!T(et,k,H):at!=="boolean"||et}function de(k,H,et,at){if(k.track&&!k.isCurrentlyUndoRedoing&&H in at&&$t(at[H],et)){var Pt=T(at[H].on,at[H],et);if(F(Pt,"object","before","after")){if(Pt.type=H,Pt.magicFusionIndex=R(),Pt.undoTypes=at,k.pointer<k.length-1)for(var ct=k.length-k.pointer-1;ct--;)k.pop();k.pointer=k.length,k.add(Pt),k.length>k.maximumStackLength&&(k.shift(),k.pointer--)}}}dt.prototype={isRegistered:function(k){return k&&k.cid?this.registeredObjects[k.cid]:nt.contains(this.registeredObjects,k)},register:function(k){return!this.isRegistered(k)&&(k&&k.cid?(this.registeredObjects[k.cid]=k,this.cidIndexes.push(k.cid)):this.registeredObjects.push(k),!0)},unregister:function(k){if(this.isRegistered(k)){if(k&&k.cid)delete this.registeredObjects[k.cid],this.cidIndexes.splice(nt.indexOf(this.cidIndexes,k.cid),1);else{var H=nt.indexOf(this.registeredObjects,k);this.registeredObjects.splice(H,1)}return!0}return!1},get:function(){return nt.map(this.cidIndexes,function(k){return this.registeredObjects[k]},this).concat(this.registeredObjects)}};var Ct={add:{undo:function(k,H,et,at){k.remove(et,at)},redo:function(k,H,et,at){at.index&&(at.at=at.index),k.add(et,at)},on:function(k,H,et){return{object:H,before:void 0,after:k,options:nt.clone(et)}}},remove:{undo:function(k,H,et,at){"index"in at&&(at.at=at.index),k.add(H,at)},redo:function(k,H,et,at){k.remove(H,at)},on:function(k,H,et){return{object:H,before:k,after:void 0,options:nt.clone(et)}}},change:{undo:function(k,H,et,at){nt.isEmpty(H)?nt.each(nt.keys(et),k.unset,k):(k.set(H),at&&at.unsetData&&at.unsetData.before&&at.unsetData.before.length&&nt.each(at.unsetData.before,k.unset,k))},redo:function(k,H,et,at){nt.isEmpty(et)?nt.each(nt.keys(H),k.unset,k):(k.set(et),at&&at.unsetData&&at.unsetData.after&&at.unsetData.after.length&&nt.each(at.unsetData.after,k.unset,k))},on:function(k,H){var et=k.changedAttributes(),at=nt.keys(et),Pt=nt.pick(k.previousAttributes(),at),ct=nt.keys(Pt),Tt=(H||(H={})).unsetData={after:[],before:[]};return at.length!=ct.length&&(at.length>ct.length?nt.each(at,function(q){q in Pt||Tt.before.push(q)},this):nt.each(ct,function(q){q in et||Tt.after.push(q)})),{object:k,before:Pt,after:et,options:nt.clone(H)}}},reset:{undo:function(k,H,et){k.reset(H)},redo:function(k,H,et){k.reset(et)},on:function(k,H){return{object:k,before:H.previousModels,after:nt.clone(k.models)}}}};function _t(){}function Wt(k,H,et,at){if(typeof H=="object")return nt.each(H,function(Pt,ct){k===2?Wt(k,Pt,et,at):Wt(k,ct,Pt,et)});switch(k){case 0:F(et,"undo","redo","on")&&nt.all(nt.pick(et,"undo","redo","on"),nt.isFunction)&&(at[H]=et);break;case 1:at[H]&&nt.isObject(et)&&(at[H]=nt.extend({},at[H],et));break;case 2:delete at[H]}return this}_t.prototype=Ct;var Jt=G.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(k){It("undo",this.attributes)},redo:function(k){It("redo",this.attributes)}}),Rt=G.Collection.extend({model:Jt,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(k){this.maximumStackLength=k}}),Y=G.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(k){this.stack=new Rt,this.objectRegistry=new dt,this.undoTypes=new _t,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(H,et){this.stack.setMaxLength(et)},this),k&&k.track&&this.startTracking(),k&&k.register&&(nt.isArray(k.register)||nt.isArguments(k.register)?T(this.register,this,k.register):this.register(k.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(k){de(this.stack,k,D(arguments,1),this.undoTypes)},register:function(){bt("on",arguments,this._addToStack,this)},unregister:function(){bt("off",arguments,this._addToStack,this)},unregisterAll:function(){T(this.unregister,this,this.objectRegistry.get())},undo:function(k){Dt("undo",this,this.stack,k)},undoAll:function(){Dt("undo",this,this.stack,!1,!0)},redo:function(k){Dt("redo",this,this.stack,k)},redoAll:function(){Dt("redo",this,this.stack,!1,!0)},isAvailable:function(k){var H=this.stack,et=H.length;switch(k){case"undo":return et>0&&H.pointer>-1;case"redo":return et>0&&H.pointer<et-1;default:return!1}},merge:function(k){for(var H,et=nt.isArray(k)?k:D(arguments);H=et.pop();)H instanceof Y&&H.stack instanceof Rt&&(H.stack=this.stack)},addUndoType:function(k,H){Wt(0,k,H,this.undoTypes)},changeUndoType:function(k,H){Wt(1,k,H,this.undoTypes)},removeUndoType:function(k){Wt(2,k,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return nt.extend(Y,{defaults:function(k){nt.extend(Y.prototype.defaults,k)},addUndoType:function(k,H){Wt(0,k,H,Ct)},changeUndoType:function(k,H){Wt(1,k,H,Ct)},removeUndoType:function(k){Wt(2,k,void 0,Ct)}}),G.UndoManager=Y})=="function"?K.apply(tt,gt):K)===void 0||(y.exports=X)},316:(y,tt,N)=>{var K,gt;(function(X){var nt=typeof self=="object"&&self.self===self&&self||typeof N.g=="object"&&N.g.global===N.g&&N.g;K=[N(50),N(895),tt],gt=function(G,S,T){nt.Backbone=function(D,F,R,dt){var bt=D.Backbone,It=Array.prototype.slice;F.VERSION="1.4.1",F.$=dt,F.noConflict=function(){return D.Backbone=bt,this},F.emulateHTTP=!1,F.emulateJSON=!1;var Dt,$t=F.Events={},de=/\s+/,Ct=function(_,I,z,wt,Nt){var Mt,ce=0;if(z&&typeof z=="object")for(wt!==void 0&&("context"in Nt)&&Nt.context===void 0&&(Nt.context=wt),Mt=R.keys(z);ce<Mt.length;ce++)I=Ct(_,I,Mt[ce],z[Mt[ce]],Nt);else if(z&&de.test(z))for(Mt=z.split(de);ce<Mt.length;ce++)I=_(I,Mt[ce],wt,Nt);else I=_(I,z,wt,Nt);return I};$t.on=function(_,I,z){return this._events=Ct(_t,this._events||{},_,I,{context:z,ctx:this,listening:Dt}),Dt&&((this._listeners||(this._listeners={}))[Dt.id]=Dt,Dt.interop=!1),this},$t.listenTo=function(_,I,z){if(!_)return this;var wt=_._listenId||(_._listenId=R.uniqueId("l")),Nt=this._listeningTo||(this._listeningTo={}),Mt=Dt=Nt[wt];Mt||(this._listenId||(this._listenId=R.uniqueId("l")),Mt=Dt=Nt[wt]=new H(this,_));var ce=Wt(_,I,z,this);if(Dt=void 0,ce)throw ce;return Mt.interop&&Mt.on(I,z),this};var _t=function(_,I,z,wt){if(z){var Nt=_[I]||(_[I]=[]),Mt=wt.context,ce=wt.ctx,ke=wt.listening;ke&&ke.count++,Nt.push({callback:z,context:Mt,ctx:Mt||ce,listening:ke})}return _},Wt=function(_,I,z,wt){try{_.on(I,z,wt)}catch(Nt){return Nt}};$t.off=function(_,I,z){return this._events?(this._events=Ct(Jt,this._events,_,I,{context:z,listeners:this._listeners}),this):this},$t.stopListening=function(_,I,z){var wt=this._listeningTo;if(!wt)return this;for(var Nt=_?[_._listenId]:R.keys(wt),Mt=0;Mt<Nt.length;Mt++){var ce=wt[Nt[Mt]];if(!ce)break;ce.obj.off(I,z,this),ce.interop&&ce.off(I,z)}return R.isEmpty(wt)&&(this._listeningTo=void 0),this};var Jt=function(_,I,z,wt){if(_){var Nt,Mt=wt.context,ce=wt.listeners,ke=0;if(I||Mt||z){for(Nt=I?[I]:R.keys(_);ke<Nt.length;ke++){var ze=_[I=Nt[ke]];if(!ze)break;for(var Ye=[],pn=0;pn<ze.length;pn++){var ue=ze[pn];if(z&&z!==ue.callback&&z!==ue.callback._callback||Mt&&Mt!==ue.context)Ye.push(ue);else{var J=ue.listening;J&&J.off(I,z)}}Ye.length?_[I]=Ye:delete _[I]}return _}for(Nt=R.keys(ce);ke<Nt.length;ke++)ce[Nt[ke]].cleanup()}};$t.once=function(_,I,z){var wt=Ct(Rt,{},_,I,this.off.bind(this));return typeof _=="string"&&z==null&&(I=void 0),this.on(wt,I,z)},$t.listenToOnce=function(_,I,z){var wt=Ct(Rt,{},I,z,this.stopListening.bind(this,_));return this.listenTo(_,wt)};var Rt=function(_,I,z,wt){if(z){var Nt=_[I]=R.once(function(){wt(I,Nt),z.apply(this,arguments)});Nt._callback=z}return _};$t.trigger=function(_){if(!this._events)return this;for(var I=Math.max(0,arguments.length-1),z=Array(I),wt=0;wt<I;wt++)z[wt]=arguments[wt+1];return Ct(Y,this._events,_,void 0,z),this};var Y=function(_,I,z,wt){if(_){var Nt=_[I],Mt=_.all;Nt&&Mt&&(Mt=Mt.slice()),Nt&&k(Nt,wt),Mt&&k(Mt,[I].concat(wt))}return _},k=function(_,I){var z,wt=-1,Nt=_.length,Mt=I[0],ce=I[1],ke=I[2];switch(I.length){case 0:for(;++wt<Nt;)(z=_[wt]).callback.call(z.ctx);return;case 1:for(;++wt<Nt;)(z=_[wt]).callback.call(z.ctx,Mt);return;case 2:for(;++wt<Nt;)(z=_[wt]).callback.call(z.ctx,Mt,ce);return;case 3:for(;++wt<Nt;)(z=_[wt]).callback.call(z.ctx,Mt,ce,ke);return;default:for(;++wt<Nt;)(z=_[wt]).callback.apply(z.ctx,I);return}},H=function(_,I){this.id=_._listenId,this.listener=_,this.obj=I,this.interop=!0,this.count=0,this._events=void 0};H.prototype.on=$t.on,H.prototype.off=function(_,I){var z;this.interop?(this._events=Ct(Jt,this._events,_,I,{context:void 0,listeners:void 0}),z=!this._events):(this.count--,z=this.count===0),z&&this.cleanup()},H.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},$t.bind=$t.on,$t.unbind=$t.off,R.extend(F,$t);var et=F.Model=function(_,I){var z=_||{};I||(I={}),this.preinitialize.apply(this,arguments),this.cid=R.uniqueId(this.cidPrefix),this.attributes={},I.collection&&(this.collection=I.collection),I.parse&&(z=this.parse(z,I)||{});var wt=R.result(this,"defaults");z=R.defaults(R.extend({},wt,z),wt),this.set(z,I),this.changed={},this.initialize.apply(this,arguments)};R.extend(et.prototype,$t,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(_){return R.clone(this.attributes)},sync:function(){return F.sync.apply(this,arguments)},get:function(_){return this.attributes[_]},escape:function(_){return R.escape(this.get(_))},has:function(_){return this.get(_)!=null},matches:function(_){return!!R.iteratee(_,this)(this.attributes)},set:function(_,I,z){if(_==null)return this;var wt;if(typeof _=="object"?(wt=_,z=I):(wt={})[_]=I,z||(z={}),!this._validate(wt,z))return!1;var Nt=z.unset,Mt=z.silent,ce=[],ke=this._changing;this._changing=!0,ke||(this._previousAttributes=R.clone(this.attributes),this.changed={});var ze=this.attributes,Ye=this.changed,pn=this._previousAttributes;for(var ue in wt)I=wt[ue],R.isEqual(ze[ue],I)||ce.push(ue),R.isEqual(pn[ue],I)?delete Ye[ue]:Ye[ue]=I,Nt?delete ze[ue]:ze[ue]=I;if(this.idAttribute in wt){var J=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,J,z)}if(!Mt){ce.length&&(this._pending=z);for(var vt=0;vt<ce.length;vt++)this.trigger("change:"+ce[vt],this,ze[ce[vt]],z)}if(ke)return this;if(!Mt)for(;this._pending;)z=this._pending,this._pending=!1,this.trigger("change",this,z);return this._pending=!1,this._changing=!1,this},unset:function(_,I){return this.set(_,void 0,R.extend({},I,{unset:!0}))},clear:function(_){var I={};for(var z in this.attributes)I[z]=void 0;return this.set(I,R.extend({},_,{unset:!0}))},hasChanged:function(_){return _==null?!R.isEmpty(this.changed):R.has(this.changed,_)},changedAttributes:function(_){if(!_)return!!this.hasChanged()&&R.clone(this.changed);var I,z=this._changing?this._previousAttributes:this.attributes,wt={};for(var Nt in _){var Mt=_[Nt];R.isEqual(z[Nt],Mt)||(wt[Nt]=Mt,I=!0)}return!!I&&wt},previous:function(_){return _!=null&&this._previousAttributes?this._previousAttributes[_]:null},previousAttributes:function(){return R.clone(this._previousAttributes)},fetch:function(_){_=R.extend({parse:!0},_);var I=this,z=_.success;return _.success=function(wt){var Nt=_.parse?I.parse(wt,_):wt;if(!I.set(Nt,_))return!1;z&&z.call(_.context,I,wt,_),I.trigger("sync",I,wt,_)},Yt(this,_),this.sync("read",this,_)},save:function(_,I,z){var wt;_==null||typeof _=="object"?(wt=_,z=I):(wt={})[_]=I;var Nt=(z=R.extend({validate:!0,parse:!0},z)).wait;if(wt&&!Nt){if(!this.set(wt,z))return!1}else if(!this._validate(wt,z))return!1;var Mt=this,ce=z.success,ke=this.attributes;z.success=function(pn){Mt.attributes=ke;var ue=z.parse?Mt.parse(pn,z):pn;if(Nt&&(ue=R.extend({},wt,ue)),ue&&!Mt.set(ue,z))return!1;ce&&ce.call(z.context,Mt,pn,z),Mt.trigger("sync",Mt,pn,z)},Yt(this,z),wt&&Nt&&(this.attributes=R.extend({},ke,wt));var ze=this.isNew()?"create":z.patch?"patch":"update";ze!=="patch"||z.attrs||(z.attrs=wt);var Ye=this.sync(ze,this,z);return this.attributes=ke,Ye},destroy:function(_){_=_?R.clone(_):{};var I=this,z=_.success,wt=_.wait,Nt=function(){I.stopListening(),I.trigger("destroy",I,I.collection,_)};_.success=function(ce){wt&&Nt(),z&&z.call(_.context,I,ce,_),I.isNew()||I.trigger("sync",I,ce,_)};var Mt=!1;return this.isNew()?R.defer(_.success):(Yt(this,_),Mt=this.sync("delete",this,_)),wt||Nt(),Mt},url:function(){var _=R.result(this,"urlRoot")||R.result(this.collection,"url")||At();if(this.isNew())return _;var I=this.get(this.idAttribute);return _.replace(/[^\/]$/,"$&/")+encodeURIComponent(I)},parse:function(_,I){return _},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(_){return this._validate({},R.extend({},_,{validate:!0}))},_validate:function(_,I){if(!I.validate||!this.validate)return!0;_=R.extend({},this.attributes,_);var z=this.validationError=this.validate(_,I)||null;return!z||(this.trigger("invalid",this,z,R.extend(I,{validationError:z})),!1)}});var at=F.Collection=function(_,I){I||(I={}),this.preinitialize.apply(this,arguments),I.model&&(this.model=I.model),I.comparator!==void 0&&(this.comparator=I.comparator),this._reset(),this.initialize.apply(this,arguments),_&&this.reset(_,R.extend({silent:!0},I))},Pt={add:!0,remove:!0,merge:!0},ct={add:!0,remove:!1},Tt=function(_,I,z){z=Math.min(Math.max(z,0),_.length);var wt,Nt=Array(_.length-z),Mt=I.length;for(wt=0;wt<Nt.length;wt++)Nt[wt]=_[wt+z];for(wt=0;wt<Mt;wt++)_[wt+z]=I[wt];for(wt=0;wt<Nt.length;wt++)_[wt+Mt+z]=Nt[wt]};R.extend(at.prototype,$t,{model:et,preinitialize:function(){},initialize:function(){},toJSON:function(_){return this.map(function(I){return I.toJSON(_)})},sync:function(){return F.sync.apply(this,arguments)},add:function(_,I){return this.set(_,R.extend({merge:!1},I,ct))},remove:function(_,I){I=R.extend({},I);var z=!R.isArray(_);_=z?[_]:_.slice();var wt=this._removeModels(_,I);return!I.silent&&wt.length&&(I.changes={added:[],merged:[],removed:wt},this.trigger("update",this,I)),z?wt[0]:wt},set:function(_,I){if(_!=null){(I=R.extend({},Pt,I)).parse&&!this._isModel(_)&&(_=this.parse(_,I)||[]);var z=!R.isArray(_);_=z?[_]:_.slice();var wt=I.at;wt!=null&&(wt=+wt),wt>this.length&&(wt=this.length),wt<0&&(wt+=this.length+1);var Nt,Mt,ce=[],ke=[],ze=[],Ye=[],pn={},ue=I.add,J=I.merge,vt=I.remove,St=!1,Lt=this.comparator&&wt==null&&I.sort!==!1,pe=R.isString(this.comparator)?this.comparator:null;for(Mt=0;Mt<_.length;Mt++){Nt=_[Mt];var Se=this.get(Nt);if(Se){if(J&&Nt!==Se){var Qe=this._isModel(Nt)?Nt.attributes:Nt;I.parse&&(Qe=Se.parse(Qe,I)),Se.set(Qe,I),ze.push(Se),Lt&&!St&&(St=Se.hasChanged(pe))}pn[Se.cid]||(pn[Se.cid]=!0,ce.push(Se)),_[Mt]=Se}else ue&&(Nt=_[Mt]=this._prepareModel(Nt,I))&&(ke.push(Nt),this._addReference(Nt,I),pn[Nt.cid]=!0,ce.push(Nt))}if(vt){for(Mt=0;Mt<this.length;Mt++)pn[(Nt=this.models[Mt]).cid]||Ye.push(Nt);Ye.length&&this._removeModels(Ye,I)}var sn=!1,Un=!Lt&&ue&&vt;if(ce.length&&Un?(sn=this.length!==ce.length||R.some(this.models,function(Sn,Ze){return Sn!==ce[Ze]}),this.models.length=0,Tt(this.models,ce,0),this.length=this.models.length):ke.length&&(Lt&&(St=!0),Tt(this.models,ke,wt??this.length),this.length=this.models.length),St&&this.sort({silent:!0}),!I.silent){for(Mt=0;Mt<ke.length;Mt++)wt!=null&&(I.index=wt+Mt),(Nt=ke[Mt]).trigger("add",Nt,this,I);(St||sn)&&this.trigger("sort",this,I),(ke.length||Ye.length||ze.length)&&(I.changes={added:ke,removed:Ye,merged:ze},this.trigger("update",this,I))}return z?_[0]:_}},reset:function(_,I){I=I?R.clone(I):{};for(var z=0;z<this.models.length;z++)this._removeReference(this.models[z],I);return I.previousModels=this.models,this._reset(),_=this.add(_,R.extend({silent:!0},I)),I.silent||this.trigger("reset",this,I),_},push:function(_,I){return this.add(_,R.extend({at:this.length},I))},pop:function(_){var I=this.at(this.length-1);return this.remove(I,_)},unshift:function(_,I){return this.add(_,R.extend({at:0},I))},shift:function(_){var I=this.at(0);return this.remove(I,_)},slice:function(){return It.apply(this.models,arguments)},get:function(_){if(_!=null)return this._byId[_]||this._byId[this.modelId(this._isModel(_)?_.attributes:_,_.idAttribute)]||_.cid&&this._byId[_.cid]},has:function(_){return this.get(_)!=null},at:function(_){return _<0&&(_+=this.length),this.models[_]},where:function(_,I){return this[I?"find":"filter"](_)},findWhere:function(_){return this.where(_,!0)},sort:function(_){var I=this.comparator;if(!I)throw new Error("Cannot sort a set without a comparator");_||(_={});var z=I.length;return R.isFunction(I)&&(I=I.bind(this)),z===1||R.isString(I)?this.models=this.sortBy(I):this.models.sort(I),_.silent||this.trigger("sort",this,_),this},pluck:function(_){return this.map(_+"")},fetch:function(_){var I=(_=R.extend({parse:!0},_)).success,z=this;return _.success=function(wt){var Nt=_.reset?"reset":"set";z[Nt](wt,_),I&&I.call(_.context,z,wt,_),z.trigger("sync",z,wt,_)},Yt(this,_),this.sync("read",this,_)},create:function(_,I){var z=(I=I?R.clone(I):{}).wait;if(!(_=this._prepareModel(_,I)))return!1;z||this.add(_,I);var wt=this,Nt=I.success;return I.success=function(Mt,ce,ke){z&&wt.add(Mt,ke),Nt&&Nt.call(ke.context,Mt,ce,ke)},_.save(null,I),_},parse:function(_,I){return _},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(_,I){return _[I||this.model.prototype.idAttribute||"id"]},values:function(){return new Ut(this,Ht)},keys:function(){return new Ut(this,ae)},entries:function(){return new Ut(this,Fe)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(_,I){return this._isModel(_)?(_.collection||(_.collection=this),_):((I=I?R.clone(I):{}).collection=this,(z=this.model.prototype?new this.model(_,I):this.model(_,I)).validationError?(this.trigger("invalid",this,z.validationError,I),!1):z);var z},_removeModels:function(_,I){for(var z=[],wt=0;wt<_.length;wt++){var Nt=this.get(_[wt]);if(Nt){var Mt=this.indexOf(Nt);this.models.splice(Mt,1),this.length--,delete this._byId[Nt.cid];var ce=this.modelId(Nt.attributes,Nt.idAttribute);ce!=null&&delete this._byId[ce],I.silent||(I.index=Mt,Nt.trigger("remove",Nt,this,I)),z.push(Nt),this._removeReference(Nt,I)}}return z},_isModel:function(_){return _ instanceof et},_addReference:function(_,I){this._byId[_.cid]=_;var z=this.modelId(_.attributes,_.idAttribute);z!=null&&(this._byId[z]=_),_.on("all",this._onModelEvent,this)},_removeReference:function(_,I){delete this._byId[_.cid];var z=this.modelId(_.attributes,_.idAttribute);z!=null&&delete this._byId[z],this===_.collection&&delete _.collection,_.off("all",this._onModelEvent,this)},_onModelEvent:function(_,I,z,wt){if(I){if((_==="add"||_==="remove")&&z!==this)return;if(_==="destroy"&&this.remove(I,wt),_==="changeId"){var Nt=this.modelId(I.previousAttributes(),I.idAttribute),Mt=this.modelId(I.attributes,I.idAttribute);Nt!=null&&delete this._byId[Nt],Mt!=null&&(this._byId[Mt]=I)}}this.trigger.apply(this,arguments)}});var q=typeof Symbol=="function"&&Symbol.iterator;q&&(at.prototype[q]=at.prototype.values);var Ut=function(_,I){this._collection=_,this._kind=I,this._index=0},Ht=1,ae=2,Fe=3;q&&(Ut.prototype[q]=function(){return this}),Ut.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var _,I=this._collection.at(this._index);if(this._index++,this._kind===Ht)_=I;else{var z=this._collection.modelId(I.attributes,I.idAttribute);_=this._kind===ae?z:[z,I]}return{value:_,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Ie=F.View=function(_){this.cid=R.uniqueId("view"),this.preinitialize.apply(this,arguments),R.extend(this,R.pick(_,Ne)),this._ensureElement(),this.initialize.apply(this,arguments)},Ee=/^(\S+)\s*(.*)$/,Ne=["model","collection","el","id","attributes","className","tagName","events"];R.extend(Ie.prototype,$t,{tagName:"div",$:function(_){return this.$el.find(_)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(_){return this.undelegateEvents(),this._setElement(_),this.delegateEvents(),this},_setElement:function(_){this.$el=_ instanceof F.$?_:F.$(_),this.el=this.$el[0]},delegateEvents:function(_){if(_||(_=R.result(this,"events")),!_)return this;for(var I in this.undelegateEvents(),_){var z=_[I];if(R.isFunction(z)||(z=this[z]),z){var wt=I.match(Ee);this.delegate(wt[1],wt[2],z.bind(this))}}return this},delegate:function(_,I,z){return this.$el.on(_+".delegateEvents"+this.cid,I,z),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(_,I,z){return this.$el.off(_+".delegateEvents"+this.cid,I,z),this},_createElement:function(_){return document.createElement(_)},_ensureElement:function(){if(this.el)this.setElement(R.result(this,"el"));else{var _=R.extend({},R.result(this,"attributes"));this.id&&(_.id=R.result(this,"id")),this.className&&(_.class=R.result(this,"className")),this.setElement(this._createElement(R.result(this,"tagName"))),this._setAttributes(_)}},_setAttributes:function(_){this.$el.attr(_)}});var Ce=function(_,I,z,wt){switch(I){case 1:return function(){return _[z](this[wt])};case 2:return function(Nt){return _[z](this[wt],Nt)};case 3:return function(Nt,Mt){return _[z](this[wt],ve(Nt,this),Mt)};case 4:return function(Nt,Mt,ce){return _[z](this[wt],ve(Nt,this),Mt,ce)};default:return function(){var Nt=It.call(arguments);return Nt.unshift(this[wt]),_[z].apply(_,Nt)}}},Ve=function(_,I,z,wt){R.each(z,function(Nt,Mt){I[Mt]&&(_.prototype[Mt]=Ce(I,Nt,Mt,wt))})},ve=function(_,I){return R.isFunction(_)?_:R.isObject(_)&&!I._isModel(_)?ye(_):R.isString(_)?function(z){return z.get(_)}:_},ye=function(_){var I=R.matches(_);return function(z){return I(z.attributes)}},we={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},xe={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};R.each([[at,we,"models"],[et,xe,"attributes"]],function(_){var I=_[0],z=_[1],wt=_[2];I.mixin=function(Nt){var Mt=R.reduce(R.functions(Nt),function(ce,ke){return ce[ke]=0,ce},{});Ve(I,Nt,Mt,wt)},Ve(I,R,z,wt)}),F.sync=function(_,I,z){var wt=ft[_];R.defaults(z||(z={}),{emulateHTTP:F.emulateHTTP,emulateJSON:F.emulateJSON});var Nt={type:wt,dataType:"json"};if(z.url||(Nt.url=R.result(I,"url")||At()),z.data!=null||!I||_!=="create"&&_!=="update"&&_!=="patch"||(Nt.contentType="application/json",Nt.data=JSON.stringify(z.attrs||I.toJSON(z))),z.emulateJSON&&(Nt.contentType="application/x-www-form-urlencoded",Nt.data=Nt.data?{model:Nt.data}:{}),z.emulateHTTP&&(wt==="PUT"||wt==="DELETE"||wt==="PATCH")){Nt.type="POST",z.emulateJSON&&(Nt.data._method=wt);var Mt=z.beforeSend;z.beforeSend=function(ze){if(ze.setRequestHeader("X-HTTP-Method-Override",wt),Mt)return Mt.apply(this,arguments)}}Nt.type==="GET"||z.emulateJSON||(Nt.processData=!1);var ce=z.error;z.error=function(ze,Ye,pn){z.textStatus=Ye,z.errorThrown=pn,ce&&ce.call(z.context,ze,Ye,pn)};var ke=z.xhr=F.ajax(R.extend(Nt,z));return I.trigger("request",I,ke,z),ke};var ft={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};F.ajax=function(){return F.$.ajax.apply(F.$,arguments)};var ie=F.Router=function(_){_||(_={}),this.preinitialize.apply(this,arguments),_.routes&&(this.routes=_.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},re=/\((.*?)\)/g,he=/(\(\?)?:\w+/g,fe=/\*\w+/g,oe=/[\-{}\[\]+?.,\\\^$|#\s]/g;R.extend(ie.prototype,$t,{preinitialize:function(){},initialize:function(){},route:function(_,I,z){R.isRegExp(_)||(_=this._routeToRegExp(_)),R.isFunction(I)&&(z=I,I=""),z||(z=this[I]);var wt=this;return F.history.route(_,function(Nt){var Mt=wt._extractParameters(_,Nt);wt.execute(z,Mt,I)!==!1&&(wt.trigger.apply(wt,["route:"+I].concat(Mt)),wt.trigger("route",I,Mt),F.history.trigger("route",wt,I,Mt))}),this},execute:function(_,I,z){_&&_.apply(this,I)},navigate:function(_,I){return F.history.navigate(_,I),this},_bindRoutes:function(){if(this.routes){this.routes=R.result(this,"routes");for(var _,I=R.keys(this.routes);(_=I.pop())!=null;)this.route(_,this.routes[_])}},_routeToRegExp:function(_){return _=_.replace(oe,"\\$&").replace(re,"(?:$1)?").replace(he,function(I,z){return z?I:"([^/?]+)"}).replace(fe,"([^?]*?)"),new RegExp("^"+_+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(_,I){var z=_.exec(I).slice(1);return R.map(z,function(wt,Nt){return Nt===z.length-1?wt||null:wt?decodeURIComponent(wt):null})}});var He=F.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},nn=/^[#\/]|\s+$/g,Ge=/^\/+|\/+$/g,bn=/#.*$/;He.started=!1,R.extend(He.prototype,$t,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(_){return decodeURI(_.replace(/%25/g,"%2525"))},getSearch:function(){var _=this.location.href.replace(/#.*/,"").match(/\?.+/);return _?_[0]:""},getHash:function(_){var I=(_||this).location.href.match(/#(.*)$/);return I?I[1]:""},getPath:function(){var _=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return _.charAt(0)==="/"?_.slice(1):_},getFragment:function(_){return _==null&&(_=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),_.replace(nn,"")},start:function(_){if(He.started)throw new Error("Backbone.history has already been started");if(He.started=!0,this.options=R.extend({root:"/"},this.options,_),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Ge,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var I=this.root.slice(0,-1)||"/";return this.location.replace(I+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var z=document.body,wt=z.insertBefore(this.iframe,z.firstChild).contentWindow;wt.document.open(),wt.document.close(),wt.location.hash="#"+this.fragment}var Nt=window.addEventListener||function(Mt,ce){return attachEvent("on"+Mt,ce)};if(this._usePushState?Nt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Nt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var _=window.removeEventListener||function(I,z){return detachEvent("on"+I,z)};this._usePushState?_("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&_("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),He.started=!1},route:function(_,I){this.handlers.unshift({route:_,callback:I})},checkUrl:function(_){var I=this.getFragment();if(I===this.fragment&&this.iframe&&(I=this.getHash(this.iframe.contentWindow)),I===this.fragment)return!1;this.iframe&&this.navigate(I),this.loadUrl()},loadUrl:function(_){return!!this.matchRoot()&&(_=this.fragment=this.getFragment(_),R.some(this.handlers,function(I){if(I.route.test(_))return I.callback(_),!0}))},navigate:function(_,I){if(!He.started)return!1;I&&I!==!0||(I={trigger:!!I}),_=this.getFragment(_||"");var z=this.root;_!==""&&_.charAt(0)!=="?"||(z=z.slice(0,-1)||"/");var wt=z+_;_=_.replace(bn,"");var Nt=this.decodeFragment(_);if(this.fragment!==Nt){if(this.fragment=Nt,this._usePushState)this.history[I.replace?"replaceState":"pushState"]({},document.title,wt);else{if(!this._wantsHashChange)return this.location.assign(wt);if(this._updateHash(this.location,_,I.replace),this.iframe&&_!==this.getHash(this.iframe.contentWindow)){var Mt=this.iframe.contentWindow;I.replace||(Mt.document.open(),Mt.document.close()),this._updateHash(Mt.location,_,I.replace)}}return I.trigger?this.loadUrl(_):void 0}},_updateHash:function(_,I,z){if(z){var wt=_.href.replace(/(javascript:|#).*$/,"");_.replace(wt+"#"+I)}else _.hash="#"+I}}),F.history=new He;var Nn=function(_,I){var z,wt=this;return z=_&&R.has(_,"constructor")?_.constructor:function(){return wt.apply(this,arguments)},R.extend(z,wt,I),z.prototype=R.create(wt.prototype,_),z.prototype.constructor=z,z.__super__=wt.prototype,z};et.extend=at.extend=ie.extend=Ie.extend=He.extend=Nn;var At=function(){throw new Error('A "url" property or function must be specified')},Yt=function(_,I){var z=I.error;I.error=function(wt){z&&z.call(I.context,_,wt,I),_.trigger("error",_,wt,I)}};return F}(nt,T,G,S)}.apply(tt,K),gt===void 0||(y.exports=gt)})()},210:(y,tt,N)=>{(function(K){K.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(X,nt){return/^[;{}]$/.test(nt)}}),K.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(X,nt,G,S){return this.jsonMode?/^[\[,{]$/.test(nt)||/^}/.test(G):(nt!=";"||!S.lexical||S.lexical.type!=")")&&/^[;{}]$/.test(nt)&&!/^;/.test(G)}});var gt=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;K.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(X,nt,G,S){var T=!1;return this.configuration=="html"&&(T=!!S.context&&gt.test(S.context.tagName)),!T&&(X=="tag"&&/>$/.test(nt)&&S.context||/^</.test(G))}}),K.defineExtension("commentRange",function(X,nt,G){var S=this,T=K.innerMode(S.getMode(),S.getTokenAt(nt).state).mode;S.operation(function(){if(X)S.replaceRange(T.commentEnd,G),S.replaceRange(T.commentStart,nt),nt.line==G.line&&nt.ch==G.ch&&S.setCursor(nt.line,nt.ch+T.commentStart.length);else{var D=S.getRange(nt,G),F=D.indexOf(T.commentStart),R=D.lastIndexOf(T.commentEnd);F>-1&&R>-1&&R>F&&(D=D.substr(0,F)+D.substring(F+T.commentStart.length,R)+D.substr(R+T.commentEnd.length)),S.replaceRange(D,nt,G)}})}),K.defineExtension("autoIndentRange",function(X,nt){var G=this;this.operation(function(){for(var S=X.line;S<=nt.line;S++)G.indentLine(S,"smart")})}),K.defineExtension("autoFormatRange",function(X,nt){var G=this,S=G.getMode(),T=G.getRange(X,nt).split(`
`),D=K.copyState(S,G.getTokenAt(X).state),F=G.getOption("tabSize"),R="",dt=0,bt=X.ch===0;function It(){R+=`
`,bt=!0,++dt}for(var Dt=0;Dt<T.length;++Dt){for(var $t=new K.StringStream(T[Dt],F);!$t.eol();){var de=K.innerMode(S,D),Ct=S.token($t,D),_t=$t.current();$t.start=$t.pos,bt&&!/\S/.test(_t)||(R+=_t,bt=!1),!bt&&de.mode.newlineAfterToken&&de.mode.newlineAfterToken(Ct,_t,$t.string.slice($t.pos)||T[Dt+1]||"",de.state)&&It()}!$t.pos&&S.blankLine&&S.blankLine(D),!bt&&Dt<T.length-1&&It()}G.operation(function(){G.replaceRange(R,X,nt);for(var Wt=X.line+1,Jt=X.line+dt;Wt<=Jt;++Wt)G.indentLine(Wt,"smart");G.setSelection(X,G.getCursor(!1))})})})(N(631))},631:function(y){y.exports=function(){var tt=navigator.userAgent,N=navigator.platform,K=/gecko\/\d/i.test(tt),gt=/MSIE \d/.test(tt),X=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tt),nt=/Edge\/(\d+)/.exec(tt),G=gt||X||nt,S=G&&(gt?document.documentMode||6:+(nt||X)[1]),T=!nt&&/WebKit\//.test(tt),D=T&&/Qt\/\d+\.\d+/.test(tt),F=!nt&&/Chrome\/(\d+)/.exec(tt),R=F&&+F[1],dt=/Opera\//.test(tt),bt=/Apple Computer/.test(navigator.vendor),It=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(tt),Dt=/PhantomJS/.test(tt),$t=bt&&(/Mobile\/\w+/.test(tt)||navigator.maxTouchPoints>2),de=/Android/.test(tt),Ct=$t||de||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(tt),_t=$t||/Mac/.test(N),Wt=/\bCrOS\b/.test(tt),Jt=/win/i.test(N),Rt=dt&&tt.match(/Version\/(\d*\.\d*)/);Rt&&(Rt=Number(Rt[1])),Rt&&Rt>=15&&(dt=!1,T=!0);var Y=_t&&(D||dt&&(Rt==null||Rt<12.11)),k=K||G&&S>=9;function H(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}var et,at=function(o,s){var u=o.className,c=H(s).exec(u);if(c){var p=u.slice(c.index+c[0].length);o.className=u.slice(0,c.index)+(p?c[1]+p:"")}};function Pt(o){for(var s=o.childNodes.length;s>0;--s)o.removeChild(o.firstChild);return o}function ct(o,s){return Pt(o).appendChild(s)}function Tt(o,s,u,c){var p=document.createElement(o);if(u&&(p.className=u),c&&(p.style.cssText=c),typeof s=="string")p.appendChild(document.createTextNode(s));else if(s)for(var h=0;h<s.length;++h)p.appendChild(s[h]);return p}function q(o,s,u,c){var p=Tt(o,s,u,c);return p.setAttribute("role","presentation"),p}function Ut(o,s){if(s.nodeType==3&&(s=s.parentNode),o.contains)return o.contains(s);do if(s.nodeType==11&&(s=s.host),s==o)return!0;while(s=s.parentNode)}function Ht(){var o;try{o=document.activeElement}catch{o=document.body||null}for(;o&&o.shadowRoot&&o.shadowRoot.activeElement;)o=o.shadowRoot.activeElement;return o}function ae(o,s){var u=o.className;H(s).test(u)||(o.className+=(u?" ":"")+s)}function Fe(o,s){for(var u=o.split(" "),c=0;c<u.length;c++)u[c]&&!H(u[c]).test(s)&&(s+=" "+u[c]);return s}et=document.createRange?function(o,s,u,c){var p=document.createRange();return p.setEnd(c||o,u),p.setStart(o,s),p}:function(o,s,u){var c=document.body.createTextRange();try{c.moveToElementText(o.parentNode)}catch{return c}return c.collapse(!0),c.moveEnd("character",u),c.moveStart("character",s),c};var Ie=function(o){o.select()};function Ee(o){var s=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,s)}}function Ne(o,s,u){for(var c in s||(s={}),o)!o.hasOwnProperty(c)||u===!1&&s.hasOwnProperty(c)||(s[c]=o[c]);return s}function Ce(o,s,u,c,p){s==null&&(s=o.search(/[^\s\u00a0]/))==-1&&(s=o.length);for(var h=c||0,w=p||0;;){var C=o.indexOf("	",h);if(C<0||C>=s)return w+(s-h);w+=C-h,w+=u-w%u,h=C+1}}$t?Ie=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:G&&(Ie=function(o){try{o.select()}catch{}});var Ve=function(){this.id=null,this.f=null,this.time=0,this.handler=Ee(this.onTimeout,this)};function ve(o,s){for(var u=0;u<o.length;++u)if(o[u]==s)return u;return-1}Ve.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},Ve.prototype.set=function(o,s){this.f=s;var u=+new Date+o;(!this.id||u<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=u)};var ye=50,we={toString:function(){return"CodeMirror.Pass"}},xe={scroll:!1},ft={origin:"*mouse"},ie={origin:"+move"};function re(o,s,u){for(var c=0,p=0;;){var h=o.indexOf("	",c);h==-1&&(h=o.length);var w=h-c;if(h==o.length||p+w>=s)return c+Math.min(w,s-p);if(p+=h-c,c=h+1,(p+=u-p%u)>=s)return c}}var he=[""];function fe(o){for(;he.length<=o;)he.push(oe(he)+" ");return he[o]}function oe(o){return o[o.length-1]}function He(o,s){for(var u=[],c=0;c<o.length;c++)u[c]=s(o[c],c);return u}function nn(o,s,u){for(var c=0,p=u(s);c<o.length&&u(o[c])<=p;)c++;o.splice(c,0,s)}function Ge(){}function bn(o,s){var u;return Object.create?u=Object.create(o):(Ge.prototype=o,u=new Ge),s&&Ne(s,u),u}var Nn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function At(o){return/\w/.test(o)||o>""&&(o.toUpperCase()!=o.toLowerCase()||Nn.test(o))}function Yt(o,s){return s?!!(s.source.indexOf("\\w")>-1&&At(o))||s.test(o):At(o)}function _(o){for(var s in o)if(o.hasOwnProperty(s)&&o[s])return!1;return!0}var I=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function z(o){return o.charCodeAt(0)>=768&&I.test(o)}function wt(o,s,u){for(;(u<0?s>0:s<o.length)&&z(o.charAt(s));)s+=u;return s}function Nt(o,s,u){for(var c=s>u?-1:1;;){if(s==u)return s;var p=(s+u)/2,h=c<0?Math.ceil(p):Math.floor(p);if(h==s)return o(h)?s:u;o(h)?u=h:s=h+c}}function Mt(o,s,u,c){if(!o)return c(s,u,"ltr",0);for(var p=!1,h=0;h<o.length;++h){var w=o[h];(w.from<u&&w.to>s||s==u&&w.to==s)&&(c(Math.max(w.from,s),Math.min(w.to,u),w.level==1?"rtl":"ltr",h),p=!0)}p||c(s,u,"ltr")}var ce=null;function ke(o,s,u){var c;ce=null;for(var p=0;p<o.length;++p){var h=o[p];if(h.from<s&&h.to>s)return p;h.to==s&&(h.from!=h.to&&u=="before"?c=p:ce=p),h.from==s&&(h.from!=h.to&&u!="before"?c=p:ce=p)}return c??ce}var ze=function(){var o="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function u(j){return j<=247?o.charAt(j):1424<=j&&j<=1524?"R":1536<=j&&j<=1785?s.charAt(j-1536):1774<=j&&j<=2220?"r":8192<=j&&j<=8203?"w":j==8204?"b":"L"}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,p=/[stwN]/,h=/[LRr]/,w=/[Lb1n]/,C=/[1n]/;function E(j,ot,it){this.level=j,this.from=ot,this.to=it}return function(j,ot){var it=ot=="ltr"?"L":"R";if(j.length==0||ot=="ltr"&&!c.test(j))return!1;for(var Et=j.length,kt=[],Ft=0;Ft<Et;++Ft)kt.push(u(j.charCodeAt(Ft)));for(var Qt=0,se=it;Qt<Et;++Qt){var be=kt[Qt];be=="m"?kt[Qt]=se:se=be}for(var Te=0,ge=it;Te<Et;++Te){var De=kt[Te];De=="1"&&ge=="r"?kt[Te]="n":h.test(De)&&(ge=De,De=="r"&&(kt[Te]="R"))}for(var Me=1,Be=kt[0];Me<Et-1;++Me){var Tn=kt[Me];Tn=="+"&&Be=="1"&&kt[Me+1]=="1"?kt[Me]="1":Tn!=","||Be!=kt[Me+1]||Be!="1"&&Be!="n"||(kt[Me]=Be),Be=Tn}for(var En=0;En<Et;++En){var Qr=kt[En];if(Qr==",")kt[En]="N";else if(Qr=="%"){var Dn=void 0;for(Dn=En+1;Dn<Et&&kt[Dn]=="%";++Dn);for(var kr=En&&kt[En-1]=="!"||Dn<Et&&kt[Dn]=="1"?"1":"N",to=En;to<Dn;++to)kt[to]=kr;En=Dn-1}}for(var Bn=0,Qn=it;Bn<Et;++Bn){var Ur=kt[Bn];Qn=="L"&&Ur=="1"?kt[Bn]="L":h.test(Ur)&&(Qn=Ur)}for(var ar=0;ar<Et;++ar)if(p.test(kt[ar])){var tr=void 0;for(tr=ar+1;tr<Et&&p.test(kt[tr]);++tr);for(var er=(ar?kt[ar-1]:it)=="L",eo=er==((tr<Et?kt[tr]:it)=="L")?er?"L":"R":it,ls=ar;ls<tr;++ls)kt[ls]=eo;ar=tr-1}for(var Qo,Pr=[],zn=0;zn<Et;)if(w.test(kt[zn])){var Kc=zn;for(++zn;zn<Et&&w.test(kt[zn]);++zn);Pr.push(new E(0,Kc,zn))}else{var Di=zn,Is=Pr.length,Fs=ot=="rtl"?1:0;for(++zn;zn<Et&&kt[zn]!="L";++zn);for(var fr=Di;fr<zn;)if(C.test(kt[fr])){Di<fr&&(Pr.splice(Is,0,new E(1,Di,fr)),Is+=Fs);var wa=fr;for(++fr;fr<zn&&C.test(kt[fr]);++fr);Pr.splice(Is,0,new E(2,wa,fr)),Is+=Fs,Di=fr}else++fr;Di<zn&&Pr.splice(Is,0,new E(1,Di,zn))}return ot=="ltr"&&(Pr[0].level==1&&(Qo=j.match(/^\s+/))&&(Pr[0].from=Qo[0].length,Pr.unshift(new E(0,0,Qo[0].length))),oe(Pr).level==1&&(Qo=j.match(/\s+$/))&&(oe(Pr).to-=Qo[0].length,Pr.push(new E(0,Et-Qo[0].length,Et)))),ot=="rtl"?Pr.reverse():Pr}}();function Ye(o,s){var u=o.order;return u==null&&(u=o.order=ze(o.text,s)),u}var pn=[],ue=function(o,s,u){if(o.addEventListener)o.addEventListener(s,u,!1);else if(o.attachEvent)o.attachEvent("on"+s,u);else{var c=o._handlers||(o._handlers={});c[s]=(c[s]||pn).concat(u)}};function J(o,s){return o._handlers&&o._handlers[s]||pn}function vt(o,s,u){if(o.removeEventListener)o.removeEventListener(s,u,!1);else if(o.detachEvent)o.detachEvent("on"+s,u);else{var c=o._handlers,p=c&&c[s];if(p){var h=ve(p,u);h>-1&&(c[s]=p.slice(0,h).concat(p.slice(h+1)))}}}function St(o,s){var u=J(o,s);if(u.length)for(var c=Array.prototype.slice.call(arguments,2),p=0;p<u.length;++p)u[p].apply(null,c)}function Lt(o,s,u){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),St(o,u||s.type,o,s),Sn(s)||s.codemirrorIgnore}function pe(o){var s=o._handlers&&o._handlers.cursorActivity;if(s)for(var u=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]),c=0;c<s.length;++c)ve(u,s[c])==-1&&u.push(s[c])}function Se(o,s){return J(o,s).length>0}function Qe(o){o.prototype.on=function(s,u){ue(this,s,u)},o.prototype.off=function(s,u){vt(this,s,u)}}function sn(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function Un(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function Sn(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==0}function Ze(o){sn(o),Un(o)}function $r(o){return o.target||o.srcElement}function lr(o){var s=o.which;return s==null&&(1&o.button?s=1:2&o.button?s=3:4&o.button&&(s=2)),_t&&o.ctrlKey&&s==1&&(s=3),s}var Wr,On,Ln=function(){if(G&&S<9)return!1;var o=Tt("div");return"draggable"in o||"dragDrop"in o}();function rr(o){if(Wr==null){var s=Tt("span","​");ct(o,Tt("span",[s,document.createTextNode("x")])),o.firstChild.offsetHeight!=0&&(Wr=s.offsetWidth<=1&&s.offsetHeight>2&&!(G&&S<8))}var u=Wr?Tt("span","​"):Tt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return u.setAttribute("cm-text",""),u}function qr(o){if(On!=null)return On;var s=ct(o,document.createTextNode("AخA")),u=et(s,0,1).getBoundingClientRect(),c=et(s,1,2).getBoundingClientRect();return Pt(o),!(!u||u.left==u.right)&&(On=c.right-u.right<3)}var $n,Ho=`

b`.split(/\n/).length!=3?function(o){for(var s=0,u=[],c=o.length;s<=c;){var p=o.indexOf(`
`,s);p==-1&&(p=o.length);var h=o.slice(s,o.charAt(p-1)=="\r"?p-1:p),w=h.indexOf("\r");w!=-1?(u.push(h.slice(0,w)),s+=w+1):(u.push(h),s=p+1)}return u}:function(o){return o.split(/\r\n?|\n/)},oi=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){var s;try{s=o.ownerDocument.selection.createRange()}catch{}return!(!s||s.parentElement()!=o)&&s.compareEndPoints("StartToEnd",s)!=0},Bo="oncopy"in($n=Tt("div"))||($n.setAttribute("oncopy","return;"),typeof $n.oncopy=="function"),ko=null;function Sr(o){if(ko!=null)return ko;var s=ct(o,Tt("span","x")),u=s.getBoundingClientRect(),c=et(s,0,1).getBoundingClientRect();return ko=Math.abs(u.left-c.left)>1}var hr={},dn={};function Wn(o,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),hr[o]=s}function Gr(o,s){dn[o]=s}function zo(o){if(typeof o=="string"&&dn.hasOwnProperty(o))o=dn[o];else if(o&&typeof o.name=="string"&&dn.hasOwnProperty(o.name)){var s=dn[o.name];typeof s=="string"&&(s={name:s}),(o=bn(s,o)).name=s.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return zo("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return zo("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function so(o,s){s=zo(s);var u=hr[s.name];if(!u)return so(o,"text/plain");var c=u(o,s);if(Zn.hasOwnProperty(s.name)){var p=Zn[s.name];for(var h in p)p.hasOwnProperty(h)&&(c.hasOwnProperty(h)&&(c["_"+h]=c[h]),c[h]=p[h])}if(c.name=s.name,s.helperType&&(c.helperType=s.helperType),s.modeProps)for(var w in s.modeProps)c[w]=s.modeProps[w];return c}var Zn={};function qn(o,s){Ne(s,Zn.hasOwnProperty(o)?Zn[o]:Zn[o]={})}function or(o,s){if(s===!0)return s;if(o.copyState)return o.copyState(s);var u={};for(var c in s){var p=s[c];p instanceof Array&&(p=p.concat([])),u[c]=p}return u}function ii(o,s){for(var u;o.innerMode&&(u=o.innerMode(s))&&u.mode!=o;)s=u.state,o=u.mode;return u||{mode:o,state:s}}function po(o,s,u){return!o.startState||o.startState(s,u)}var ln=function(o,s,u){this.pos=this.start=0,this.string=o,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=u};function je(o,s){if((s-=o.first)<0||s>=o.size)throw new Error("There is no line "+(s+o.first)+" in the document.");for(var u=o;!u.lines;)for(var c=0;;++c){var p=u.children[c],h=p.chunkSize();if(s<h){u=p;break}s-=h}return u.lines[s]}function gr(o,s,u){var c=[],p=s.line;return o.iter(s.line,u.line+1,function(h){var w=h.text;p==u.line&&(w=w.slice(0,u.ch)),p==s.line&&(w=w.slice(s.ch)),c.push(w),++p}),c}function si(o,s,u){var c=[];return o.iter(s,u,function(p){c.push(p.text)}),c}function mr(o,s){var u=s-o.height;if(u)for(var c=o;c;c=c.parent)c.height+=u}function cn(o){if(o.parent==null)return null;for(var s=o.parent,u=ve(s.lines,o),c=s.parent;c;s=c,c=c.parent)for(var p=0;c.children[p]!=s;++p)u+=c.children[p].chunkSize();return u+s.first}function Gn(o,s){var u=o.first;t:do{for(var c=0;c<o.children.length;++c){var p=o.children[c],h=p.height;if(s<h){o=p;continue t}s-=h,u+=p.chunkSize()}return u}while(!o.lines);for(var w=0;w<o.lines.length;++w){var C=o.lines[w].height;if(s<C)break;s-=C}return u+w}function Po(o,s){return s>=o.first&&s<o.first+o.size}function ai(o,s){return String(o.lineNumberFormatter(s+o.firstLineNumber))}function ne(o,s,u){if(u===void 0&&(u=null),!(this instanceof ne))return new ne(o,s,u);this.line=o,this.ch=s,this.sticky=u}function M(o,s){return o.line-s.line||o.ch-s.ch}function st(o,s){return o.sticky==s.sticky&&M(o,s)==0}function Gt(o){return ne(o.line,o.ch)}function me(o,s){return M(o,s)<0?s:o}function Oe(o,s){return M(o,s)<0?o:s}function an(o,s){return Math.max(o.first,Math.min(s,o.first+o.size-1))}function _e(o,s){if(s.line<o.first)return ne(o.first,0);var u=o.first+o.size-1;return s.line>u?ne(u,je(o,u).text.length):An(s,je(o,s.line).text.length)}function An(o,s){var u=o.ch;return u==null||u>s?ne(o.line,s):u<0?ne(o.line,0):o}function In(o,s){for(var u=[],c=0;c<s.length;c++)u[c]=_e(o,s[c]);return u}ln.prototype.eol=function(){return this.pos>=this.string.length},ln.prototype.sol=function(){return this.pos==this.lineStart},ln.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ln.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ln.prototype.eat=function(o){var s=this.string.charAt(this.pos);if(typeof o=="string"?s==o:s&&(o.test?o.test(s):o(s)))return++this.pos,s},ln.prototype.eatWhile=function(o){for(var s=this.pos;this.eat(o););return this.pos>s},ln.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},ln.prototype.skipToEnd=function(){this.pos=this.string.length},ln.prototype.skipTo=function(o){var s=this.string.indexOf(o,this.pos);if(s>-1)return this.pos=s,!0},ln.prototype.backUp=function(o){this.pos-=o},ln.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ce(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ce(this.string,this.lineStart,this.tabSize):0)},ln.prototype.indentation=function(){return Ce(this.string,null,this.tabSize)-(this.lineStart?Ce(this.string,this.lineStart,this.tabSize):0)},ln.prototype.match=function(o,s,u){if(typeof o!="string"){var c=this.string.slice(this.pos).match(o);return c&&c.index>0?null:(c&&s!==!1&&(this.pos+=c[0].length),c)}var p=function(h){return u?h.toLowerCase():h};if(p(this.string.substr(this.pos,o.length))==p(o))return s!==!1&&(this.pos+=o.length),!0},ln.prototype.current=function(){return this.string.slice(this.start,this.pos)},ln.prototype.hideFirstChars=function(o,s){this.lineStart+=o;try{return s()}finally{this.lineStart-=o}},ln.prototype.lookAhead=function(o){var s=this.lineOracle;return s&&s.lookAhead(o)},ln.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};var Ni=function(o,s){this.state=o,this.lookAhead=s},wr=function(o,s,u,c){this.state=s,this.doc=o,this.line=u,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};function Ii(o,s,u,c){var p=[o.state.modeGen],h={};Lo(o,s.text,o.doc.mode,u,function(j,ot){return p.push(j,ot)},h,c);for(var w=u.state,C=function(j){u.baseTokens=p;var ot=o.state.overlays[j],it=1,Et=0;u.state=!0,Lo(o,s.text,ot.mode,u,function(kt,Ft){for(var Qt=it;Et<kt;){var se=p[it];se>kt&&p.splice(it,1,kt,p[it+1],se),it+=2,Et=Math.min(kt,se)}if(Ft)if(ot.opaque)p.splice(Qt,it-Qt,kt,"overlay "+Ft),it=Qt+2;else for(;Qt<it;Qt+=2){var be=p[Qt+1];p[Qt+1]=(be?be+" ":"")+"overlay "+Ft}},h),u.state=w,u.baseTokens=null,u.baseTokenPos=1},E=0;E<o.state.overlays.length;++E)C(E);return{styles:p,classes:h.bgClass||h.textClass?h:null}}function Lr(o,s,u){if(!s.styles||s.styles[0]!=o.state.modeGen){var c=Ao(o,cn(s)),p=s.text.length>o.options.maxHighlightLength&&or(o.doc.mode,c.state),h=Ii(o,s,c);p&&(c.state=p),s.stateAfter=c.save(!p),s.styles=h.styles,h.classes?s.styleClasses=h.classes:s.styleClasses&&(s.styleClasses=null),u===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return s.styles}function Ao(o,s,u){var c=o.doc,p=o.display;if(!c.mode.startState)return new wr(c,!0,s);var h=Fi(o,s,u),w=h>c.first&&je(c,h-1).stateAfter,C=w?wr.fromSaved(c,w,h):new wr(c,po(c.mode),h);return c.iter(h,s,function(E){fo(o,E.text,C);var j=C.line;E.stateAfter=j==s-1||j%5==0||j>=p.viewFrom&&j<p.viewTo?C.save():null,C.nextLine()}),u&&(c.modeFrontier=C.line),C}function fo(o,s,u,c){var p=o.doc.mode,h=new ln(s,o.options.tabSize,u);for(h.start=h.pos=c||0,s==""&&jo(p,u.state);!h.eol();)cr(p,h,u.state),h.start=h.pos}function jo(o,s){if(o.blankLine)return o.blankLine(s);if(o.innerMode){var u=ii(o,s);return u.mode.blankLine?u.mode.blankLine(u.state):void 0}}function cr(o,s,u,c){for(var p=0;p<10;p++){c&&(c[0]=ii(o,u).mode);var h=o.token(s,u);if(s.pos>s.start)return h}throw new Error("Mode "+o.name+" failed to advance stream.")}wr.prototype.lookAhead=function(o){var s=this.doc.getLine(this.line+o);return s!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),s},wr.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},wr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},wr.fromSaved=function(o,s,u){return s instanceof Ni?new wr(o,or(o.mode,s.state),u,s.lookAhead):new wr(o,or(o.mode,s),u)},wr.prototype.save=function(o){var s=o!==!1?or(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ni(s,this.maxLookAhead):s};var Mo=function(o,s,u){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=s||null,this.state=u};function ao(o,s,u,c){var p,h,w=o.doc,C=w.mode,E=je(w,(s=_e(w,s)).line),j=Ao(o,s.line,u),ot=new ln(E.text,o.options.tabSize,j);for(c&&(h=[]);(c||ot.pos<s.ch)&&!ot.eol();)ot.start=ot.pos,p=cr(C,ot,j.state),c&&h.push(new Mo(ot,p,or(w.mode,j.state)));return c?h:new Mo(ot,p,j.state)}function ys(o,s){if(o)for(;;){var u=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!u)break;o=o.slice(0,u.index)+o.slice(u.index+u[0].length);var c=u[1]?"bgClass":"textClass";s[c]==null?s[c]=u[2]:new RegExp("(?:^|\\s)"+u[2]+"(?:$|\\s)").test(s[c])||(s[c]+=" "+u[2])}return o}function Lo(o,s,u,c,p,h,w){var C=u.flattenSpans;C==null&&(C=o.options.flattenSpans);var E,j=0,ot=null,it=new ln(s,o.options.tabSize,c),Et=o.options.addModeClass&&[null];for(s==""&&ys(jo(u,c.state),h);!it.eol();){if(it.pos>o.options.maxHighlightLength?(C=!1,w&&fo(o,s,c,it.pos),it.pos=s.length,E=null):E=ys(cr(u,it,c.state,Et),h),Et){var kt=Et[0].name;kt&&(E="m-"+(E?kt+" "+E:kt))}if(!C||ot!=E){for(;j<it.start;)p(j=Math.min(it.start,j+5e3),ot);ot=E}it.start=it.pos}for(;j<it.pos;){var Ft=Math.min(it.pos,j+5e3);p(Ft,ot),j=Ft}}function Fi(o,s,u){for(var c,p,h=o.doc,w=u?-1:s-(o.doc.mode.innerMode?1e3:100),C=s;C>w;--C){if(C<=h.first)return h.first;var E=je(h,C-1),j=E.stateAfter;if(j&&(!u||C+(j instanceof Ni?j.lookAhead:0)<=h.modeFrontier))return C;var ot=Ce(E.text,null,o.options.tabSize);(p==null||c>ot)&&(p=C-1,c=ot)}return p}function bs(o,s){if(o.modeFrontier=Math.min(o.modeFrontier,s),!(o.highlightFrontier<s-10)){for(var u=o.first,c=s-1;c>u;c--){var p=je(o,c).stateAfter;if(p&&(!(p instanceof Ni)||c+p.lookAhead<s)){u=c+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,u)}}var ur=!1,lo=!1;function mi(){ur=!0}function ws(){lo=!0}function Dr(o,s,u){this.marker=o,this.from=s,this.to=u}function Uo(o,s){if(o)for(var u=0;u<o.length;++u){var c=o[u];if(c.marker==s)return c}}function vi(o,s){for(var u,c=0;c<o.length;++c)o[c]!=s&&(u||(u=[])).push(o[c]);return u}function Ri(o,s,u){var c=u&&window.WeakSet&&(u.markedSpans||(u.markedSpans=new WeakSet));c&&o.markedSpans&&c.has(o.markedSpans)?o.markedSpans.push(s):(o.markedSpans=o.markedSpans?o.markedSpans.concat([s]):[s],c&&c.add(o.markedSpans)),s.marker.attachLine(o)}function Ws(o,s,u){var c;if(o)for(var p=0;p<o.length;++p){var h=o[p],w=h.marker;if(h.from==null||(w.inclusiveLeft?h.from<=s:h.from<s)||h.from==s&&w.type=="bookmark"&&(!u||!h.marker.insertLeft)){var C=h.to==null||(w.inclusiveRight?h.to>=s:h.to>s);(c||(c=[])).push(new Dr(w,h.from,C?null:h.to))}}return c}function Do(o,s,u){var c;if(o)for(var p=0;p<o.length;++p){var h=o[p],w=h.marker;if(h.to==null||(w.inclusiveRight?h.to>=s:h.to>s)||h.from==s&&w.type=="bookmark"&&(!u||h.marker.insertLeft)){var C=h.from==null||(w.inclusiveLeft?h.from<=s:h.from<s);(c||(c=[])).push(new Dr(w,C?null:h.from-s,h.to==null?null:h.to-s))}}return c}function li(o,s){if(s.full)return null;var u=Po(o,s.from.line)&&je(o,s.from.line).markedSpans,c=Po(o,s.to.line)&&je(o,s.to.line).markedSpans;if(!u&&!c)return null;var p=s.from.ch,h=s.to.ch,w=M(s.from,s.to)==0,C=Ws(u,p,w),E=Do(c,h,w),j=s.text.length==1,ot=oe(s.text).length+(j?p:0);if(C)for(var it=0;it<C.length;++it){var Et=C[it];if(Et.to==null){var kt=Uo(E,Et.marker);kt?j&&(Et.to=kt.to==null?null:kt.to+ot):Et.to=p}}if(E)for(var Ft=0;Ft<E.length;++Ft){var Qt=E[Ft];Qt.to!=null&&(Qt.to+=ot),Qt.from==null?Uo(C,Qt.marker)||(Qt.from=ot,j&&(C||(C=[])).push(Qt)):(Qt.from+=ot,j&&(C||(C=[])).push(Qt))}C&&(C=Vi(C)),E&&E!=C&&(E=Vi(E));var se=[C];if(!j){var be,Te=s.text.length-2;if(Te>0&&C)for(var ge=0;ge<C.length;++ge)C[ge].to==null&&(be||(be=[])).push(new Dr(C[ge].marker,null,null));for(var De=0;De<Te;++De)se.push(be);se.push(E)}return se}function Vi(o){for(var s=0;s<o.length;++s){var u=o[s];u.from!=null&&u.from==u.to&&u.marker.clearWhenEmpty!==!1&&o.splice(s--,1)}return o.length?o:null}function rn(o,s,u){var c=null;if(o.iter(s.line,u.line+1,function(kt){if(kt.markedSpans)for(var Ft=0;Ft<kt.markedSpans.length;++Ft){var Qt=kt.markedSpans[Ft].marker;!Qt.readOnly||c&&ve(c,Qt)!=-1||(c||(c=[])).push(Qt)}}),!c)return null;for(var p=[{from:s,to:u}],h=0;h<c.length;++h)for(var w=c[h],C=w.find(0),E=0;E<p.length;++E){var j=p[E];if(!(M(j.to,C.from)<0||M(j.from,C.to)>0)){var ot=[E,1],it=M(j.from,C.from),Et=M(j.to,C.to);(it<0||!w.inclusiveLeft&&!it)&&ot.push({from:j.from,to:C.from}),(Et>0||!w.inclusiveRight&&!Et)&&ot.push({from:C.to,to:j.to}),p.splice.apply(p,ot),E+=ot.length-3}}return p}function Vn(o){var s=o.markedSpans;if(s){for(var u=0;u<s.length;++u)s[u].marker.detachLine(o);o.markedSpans=null}}function Hi(o,s){if(s){for(var u=0;u<s.length;++u)s[u].marker.attachLine(o);o.markedSpans=s}}function Or(o){return o.inclusiveLeft?-1:0}function ir(o){return o.inclusiveRight?1:0}function kn(o,s){var u=o.lines.length-s.lines.length;if(u!=0)return u;var c=o.find(),p=s.find(),h=M(c.from,p.from)||Or(o)-Or(s);if(h)return-h;var w=M(c.to,p.to)||ir(o)-ir(s);return w||s.id-o.id}function Tr(o,s){var u,c=lo&&o.markedSpans;if(c)for(var p=void 0,h=0;h<c.length;++h)(p=c[h]).marker.collapsed&&(s?p.from:p.to)==null&&(!u||kn(u,p.marker)<0)&&(u=p.marker);return u}function $o(o){return Tr(o,!0)}function Kr(o){return Tr(o,!1)}function Bi(o,s){var u,c=lo&&o.markedSpans;if(c)for(var p=0;p<c.length;++p){var h=c[p];h.marker.collapsed&&(h.from==null||h.from<s)&&(h.to==null||h.to>s)&&(!u||kn(u,h.marker)<0)&&(u=h.marker)}return u}function jn(o,s,u,c,p){var h=je(o,s),w=lo&&h.markedSpans;if(w)for(var C=0;C<w.length;++C){var E=w[C];if(E.marker.collapsed){var j=E.marker.find(0),ot=M(j.from,u)||Or(E.marker)-Or(p),it=M(j.to,c)||ir(E.marker)-ir(p);if(!(ot>=0&&it<=0||ot<=0&&it>=0)&&(ot<=0&&(E.marker.inclusiveRight&&p.inclusiveLeft?M(j.to,u)>=0:M(j.to,u)>0)||ot>=0&&(E.marker.inclusiveRight&&p.inclusiveLeft?M(j.from,c)<=0:M(j.from,c)<0)))return!0}}}function Nr(o){for(var s;s=$o(o);)o=s.find(-1,!0).line;return o}function zi(o){for(var s;s=Kr(o);)o=s.find(1,!0).line;return o}function yi(o){for(var s,u;s=Kr(o);)o=s.find(1,!0).line,(u||(u=[])).push(o);return u}function Kn(o,s){var u=je(o,s),c=Nr(u);return u==c?s:cn(c)}function Yr(o,s){if(s>o.lastLine())return s;var u,c=je(o,s);if(!Jr(o,c))return s;for(;u=Kr(c);)c=u.find(1,!0).line;return cn(c)+1}function Jr(o,s){var u=lo&&s.markedSpans;if(u){for(var c=void 0,p=0;p<u.length;++p)if((c=u[p]).marker.collapsed&&(c.from==null||!c.marker.widgetNode&&c.from==0&&c.marker.inclusiveLeft&&Hn(o,s,c)))return!0}}function Hn(o,s,u){if(u.to==null){var c=u.marker.find(1,!0);return Hn(o,c.line,Uo(c.line.markedSpans,u.marker))}if(u.marker.inclusiveRight&&u.to==s.text.length)return!0;for(var p=void 0,h=0;h<s.markedSpans.length;++h)if((p=s.markedSpans[h]).marker.collapsed&&!p.marker.widgetNode&&p.from==u.to&&(p.to==null||p.to!=u.from)&&(p.marker.inclusiveLeft||u.marker.inclusiveRight)&&Hn(o,s,p))return!0}function Ir(o){for(var s=0,u=(o=Nr(o)).parent,c=0;c<u.lines.length;++c){var p=u.lines[c];if(p==o)break;s+=p.height}for(var h=u.parent;h;h=(u=h).parent)for(var w=0;w<h.children.length;++w){var C=h.children[w];if(C==u)break;s+=C.height}return s}function ci(o){if(o.height==0)return 0;for(var s,u=o.text.length,c=o;s=$o(c);){var p=s.find(0,!0);c=p.from.line,u+=p.from.ch-p.to.ch}for(c=o;s=Kr(c);){var h=s.find(0,!0);u-=c.text.length-h.from.ch,u+=(c=h.to.line).text.length-h.to.ch}return u}function bi(o){var s=o.display,u=o.doc;s.maxLine=je(u,u.first),s.maxLineLength=ci(s.maxLine),s.maxLineChanged=!0,u.iter(function(c){var p=ci(c);p>s.maxLineLength&&(s.maxLineLength=p,s.maxLine=c)})}var Zr=function(o,s,u){this.text=o,Hi(this,s),this.height=u?u(this):1};function _s(o,s,u,c){o.text=s,o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null),o.order!=null&&(o.order=null),Vn(o),Hi(o,u);var p=c?c(o):1;p!=o.height&&mr(o,p)}function qs(o){o.parent=null,Vn(o)}Zr.prototype.lineNo=function(){return cn(this)},Qe(Zr);var Gs={},Ui={};function ui(o,s){if(!o||/^\s*$/.test(o))return null;var u=s.addModeClass?Ui:Gs;return u[o]||(u[o]=o.replace(/\S+/g,"cm-$&"))}function $i(o,s){var u=q("span",null,null,T?"padding-right: .1px":null),c={pre:q("pre",[u],"CodeMirror-line"),content:u,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")};s.measure={};for(var p=0;p<=(s.rest?s.rest.length:0);p++){var h=p?s.rest[p-1]:s.line,w=void 0;c.pos=0,c.addToken=Cs,qr(o.display.measure)&&(w=Ye(h,o.doc.direction))&&(c.addToken=Ys(c.addToken,w)),c.map=[],qi(h,c,Lr(o,h,s!=o.display.externalMeasured&&cn(h))),h.styleClasses&&(h.styleClasses.bgClass&&(c.bgClass=Fe(h.styleClasses.bgClass,c.bgClass||"")),h.styleClasses.textClass&&(c.textClass=Fe(h.styleClasses.textClass,c.textClass||""))),c.map.length==0&&c.map.push(0,0,c.content.appendChild(rr(o.display.measure))),p==0?(s.measure.map=c.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(c.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(T){var C=c.content.lastChild;(/\bcm-tab\b/.test(C.className)||C.querySelector&&C.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack")}return St(o,"renderLine",o,s.line,c.pre),c.pre.className&&(c.textClass=Fe(c.pre.className,c.textClass||"")),c}function Ks(o){var s=Tt("span","•","cm-invalidchar");return s.title="\\u"+o.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function Cs(o,s,u,c,p,h,w){if(s){var C,E=o.splitSpaces?Wi(s,o.trailingSpace):s,j=o.cm.state.specialChars,ot=!1;if(j.test(s)){C=document.createDocumentFragment();for(var it=0;;){j.lastIndex=it;var Et=j.exec(s),kt=Et?Et.index-it:s.length-it;if(kt){var Ft=document.createTextNode(E.slice(it,it+kt));G&&S<9?C.appendChild(Tt("span",[Ft])):C.appendChild(Ft),o.map.push(o.pos,o.pos+kt,Ft),o.col+=kt,o.pos+=kt}if(!Et)break;it+=kt+1;var Qt=void 0;if(Et[0]=="	"){var se=o.cm.options.tabSize,be=se-o.col%se;(Qt=C.appendChild(Tt("span",fe(be),"cm-tab"))).setAttribute("role","presentation"),Qt.setAttribute("cm-text","	"),o.col+=be}else Et[0]=="\r"||Et[0]==`
`?((Qt=C.appendChild(Tt("span",Et[0]=="\r"?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",Et[0]),o.col+=1):((Qt=o.cm.options.specialCharPlaceholder(Et[0])).setAttribute("cm-text",Et[0]),G&&S<9?C.appendChild(Tt("span",[Qt])):C.appendChild(Qt),o.col+=1);o.map.push(o.pos,o.pos+1,Qt),o.pos++}}else o.col+=s.length,C=document.createTextNode(E),o.map.push(o.pos,o.pos+s.length,C),G&&S<9&&(ot=!0),o.pos+=s.length;if(o.trailingSpace=E.charCodeAt(s.length-1)==32,u||c||p||ot||h||w){var Te=u||"";c&&(Te+=c),p&&(Te+=p);var ge=Tt("span",[C],Te,h);if(w)for(var De in w)w.hasOwnProperty(De)&&De!="style"&&De!="class"&&ge.setAttribute(De,w[De]);return o.content.appendChild(ge)}o.content.appendChild(C)}}function Wi(o,s){if(o.length>1&&!/  /.test(o))return o;for(var u=s,c="",p=0;p<o.length;p++){var h=o.charAt(p);h!=" "||!u||p!=o.length-1&&o.charCodeAt(p+1)!=32||(h=" "),c+=h,u=h==" "}return c}function Ys(o,s){return function(u,c,p,h,w,C,E){p=p?p+" cm-force-border":"cm-force-border";for(var j=u.pos,ot=j+c.length;;){for(var it=void 0,Et=0;Et<s.length&&!((it=s[Et]).to>j&&it.from<=j);Et++);if(it.to>=ot)return o(u,c,p,h,w,C,E);o(u,c.slice(0,it.to-j),p,h,null,C,E),h=null,c=c.slice(it.to-j),j=it.to}}}function Fr(o,s,u,c){var p=!c&&u.widgetNode;p&&o.map.push(o.pos,o.pos+s,p),!c&&o.cm.display.input.needsContentAttribute&&(p||(p=o.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",u.id)),p&&(o.cm.display.input.setUneditable(p),o.content.appendChild(p)),o.pos+=s,o.trailingSpace=!1}function qi(o,s,u){var c=o.markedSpans,p=o.text,h=0;if(c)for(var w,C,E,j,ot,it,Et,kt=p.length,Ft=0,Qt=1,se="",be=0;;){if(be==Ft){E=j=ot=C="",Et=null,it=null,be=1/0;for(var Te=[],ge=void 0,De=0;De<c.length;++De){var Me=c[De],Be=Me.marker;if(Be.type=="bookmark"&&Me.from==Ft&&Be.widgetNode)Te.push(Be);else if(Me.from<=Ft&&(Me.to==null||Me.to>Ft||Be.collapsed&&Me.to==Ft&&Me.from==Ft)){if(Me.to!=null&&Me.to!=Ft&&be>Me.to&&(be=Me.to,j=""),Be.className&&(E+=" "+Be.className),Be.css&&(C=(C?C+";":"")+Be.css),Be.startStyle&&Me.from==Ft&&(ot+=" "+Be.startStyle),Be.endStyle&&Me.to==be&&(ge||(ge=[])).push(Be.endStyle,Me.to),Be.title&&((Et||(Et={})).title=Be.title),Be.attributes)for(var Tn in Be.attributes)(Et||(Et={}))[Tn]=Be.attributes[Tn];Be.collapsed&&(!it||kn(it.marker,Be)<0)&&(it=Me)}else Me.from>Ft&&be>Me.from&&(be=Me.from)}if(ge)for(var En=0;En<ge.length;En+=2)ge[En+1]==be&&(j+=" "+ge[En]);if(!it||it.from==Ft)for(var Qr=0;Qr<Te.length;++Qr)Fr(s,0,Te[Qr]);if(it&&(it.from||0)==Ft){if(Fr(s,(it.to==null?kt+1:it.to)-Ft,it.marker,it.from==null),it.to==null)return;it.to==Ft&&(it=!1)}}if(Ft>=kt)break;for(var Dn=Math.min(kt,be);;){if(se){var kr=Ft+se.length;if(!it){var to=kr>Dn?se.slice(0,Dn-Ft):se;s.addToken(s,to,w?w+E:E,ot,Ft+to.length==be?j:"",C,Et)}if(kr>=Dn){se=se.slice(Dn-Ft),Ft=Dn;break}Ft=kr,ot=""}se=p.slice(h,h=u[Qt++]),w=ui(u[Qt++],s.cm.options)}}else for(var Bn=1;Bn<u.length;Bn+=2)s.addToken(s,p.slice(h,h=u[Bn]),ui(u[Bn+1],s.cm.options))}function Gi(o,s,u){this.line=s,this.rest=yi(s),this.size=this.rest?cn(oe(this.rest))-u+1:1,this.node=this.text=null,this.hidden=Jr(o,s)}function ho(o,s,u){for(var c,p=[],h=s;h<u;h=c){var w=new Gi(o.doc,je(o.doc,h),h);c=h+w.size,p.push(w)}return p}var Rr=null;function wi(o){Rr?Rr.ops.push(o):o.ownsGroup=Rr={ops:[o],delayedCallbacks:[]}}function Ki(o){var s=o.delayedCallbacks,u=0;do{for(;u<s.length;u++)s[u].call(null);for(var c=0;c<o.ops.length;c++){var p=o.ops[c];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(u<s.length)}function Yi(o,s){var u=o.ownsGroup;if(u)try{Ki(u)}finally{Rr=null,s(u)}}var Wo=null;function Mn(o,s){var u=J(o,s);if(u.length){var c,p=Array.prototype.slice.call(arguments,2);Rr?c=Rr.delayedCallbacks:Wo?c=Wo:(c=Wo=[],setTimeout(go,0));for(var h=function(C){c.push(function(){return u[C].apply(null,p)})},w=0;w<u.length;++w)h(w)}}function go(){var o=Wo;Wo=null;for(var s=0;s<o.length;++s)o[s]()}function Ji(o,s,u,c){for(var p=0;p<s.changes.length;p++){var h=s.changes[p];h=="text"?Ss(o,s):h=="gutter"?No(o,s,u,c):h=="class"?Zi(o,s):h=="widget"&&fi(o,s,c)}s.changes=null}function pi(o){return o.node==o.text&&(o.node=Tt("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),G&&S<8&&(o.node.style.zIndex=2)),o.node}function _i(o,s){var u=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(u&&(u+=" CodeMirror-linebackground"),s.background)u?s.background.className=u:(s.background.parentNode.removeChild(s.background),s.background=null);else if(u){var c=pi(s);s.background=c.insertBefore(Tt("div",null,u),c.firstChild),o.display.input.setUneditable(s.background)}}function xs(o,s){var u=o.display.externalMeasured;return u&&u.line==s.line?(o.display.externalMeasured=null,s.measure=u.measure,u.built):$i(o,s)}function Ss(o,s){var u=s.text.className,c=xs(o,s);s.text==s.node&&(s.node=c.pre),s.text.parentNode.replaceChild(c.pre,s.text),s.text=c.pre,c.bgClass!=s.bgClass||c.textClass!=s.textClass?(s.bgClass=c.bgClass,s.textClass=c.textClass,Zi(o,s)):u&&(s.text.className=u)}function Zi(o,s){_i(o,s),s.line.wrapClass?pi(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var u=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=u||""}function No(o,s,u,c){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var p=pi(s);s.gutterBackground=Tt("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),o.display.input.setUneditable(s.gutterBackground),p.insertBefore(s.gutterBackground,s.text)}var h=s.line.gutterMarkers;if(o.options.lineNumbers||h){var w=pi(s),C=s.gutter=Tt("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(C.setAttribute("aria-hidden","true"),o.display.input.setUneditable(C),w.insertBefore(C,s.text),s.line.gutterClass&&(C.className+=" "+s.line.gutterClass),!o.options.lineNumbers||h&&h["CodeMirror-linenumbers"]||(s.lineNumber=C.appendChild(Tt("div",ai(o.options,u),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),h)for(var E=0;E<o.display.gutterSpecs.length;++E){var j=o.display.gutterSpecs[E].className,ot=h.hasOwnProperty(j)&&h[j];ot&&C.appendChild(Tt("div",[ot],"CodeMirror-gutter-elt","left: "+c.gutterLeft[j]+"px; width: "+c.gutterWidth[j]+"px"))}}}function fi(o,s,u){s.alignable&&(s.alignable=null);for(var c=H("CodeMirror-linewidget"),p=s.node.firstChild,h=void 0;p;p=h)h=p.nextSibling,c.test(p.className)&&s.node.removeChild(p);Qi(o,s,u)}function Xi(o,s,u,c){var p=xs(o,s);return s.text=s.node=p.pre,p.bgClass&&(s.bgClass=p.bgClass),p.textClass&&(s.textClass=p.textClass),Zi(o,s),No(o,s,u,c),Qi(o,s,c),s.node}function Qi(o,s,u){if(ts(o,s.line,s,u,!0),s.rest)for(var c=0;c<s.rest.length;c++)ts(o,s.rest[c],s,u,!1)}function ts(o,s,u,c,p){if(s.widgets)for(var h=pi(u),w=0,C=s.widgets;w<C.length;++w){var E=C[w],j=Tt("div",[E.node],"CodeMirror-linewidget"+(E.className?" "+E.className:""));E.handleMouseEvents||j.setAttribute("cm-ignore-events","true"),ja(E,j,u,c),o.display.input.setUneditable(j),p&&E.above?h.insertBefore(j,u.gutter||u.text):h.appendChild(j),Mn(E,"redraw")}}function ja(o,s,u,c){if(o.noHScroll){(u.alignable||(u.alignable=[])).push(s);var p=c.wrapperWidth;s.style.left=c.fixedPos+"px",o.coverGutter||(p-=c.gutterTotalWidth,s.style.paddingLeft=c.gutterTotalWidth+"px"),s.style.width=p+"px"}o.coverGutter&&(s.style.zIndex=5,s.style.position="relative",o.noHScroll||(s.style.marginLeft=-c.gutterTotalWidth+"px"))}function O(o){if(o.height!=null)return o.height;var s=o.doc.cm;if(!s)return 0;if(!Ut(document.body,o.node)){var u="position: relative;";o.coverGutter&&(u+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),o.noHScroll&&(u+="width: "+s.display.wrapper.clientWidth+"px;"),ct(s.display.measure,Tt("div",[o.node],null,u))}return o.height=o.node.parentNode.offsetHeight}function V(o,s){for(var u=$r(s);u!=o.wrapper;u=u.parentNode)if(!u||u.nodeType==1&&u.getAttribute("cm-ignore-events")=="true"||u.parentNode==o.sizer&&u!=o.mover)return!0}function lt(o){return o.lineSpace.offsetTop}function mt(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function jt(o){if(o.cachedPaddingH)return o.cachedPaddingH;var s=ct(o.measure,Tt("pre","x","CodeMirror-line-like")),u=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,c={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight)};return isNaN(c.left)||isNaN(c.right)||(o.cachedPaddingH=c),c}function xt(o){return ye-o.display.nativeBarWidth}function Kt(o){return o.display.scroller.clientWidth-xt(o)-o.display.barWidth}function le(o){return o.display.scroller.clientHeight-xt(o)-o.display.barHeight}function We(o,s,u){var c=o.options.lineWrapping,p=c&&Kt(o);if(!s.measure.heights||c&&s.measure.width!=p){var h=s.measure.heights=[];if(c){s.measure.width=p;for(var w=s.text.firstChild.getClientRects(),C=0;C<w.length-1;C++){var E=w[C],j=w[C+1];Math.abs(E.bottom-j.bottom)>2&&h.push((E.bottom+j.top)/2-u.top)}}h.push(u.bottom-u.top)}}function tn(o,s,u){if(o.line==s)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var c=0;c<o.rest.length;c++)if(o.rest[c]==s)return{map:o.measure.maps[c],cache:o.measure.caches[c]};for(var p=0;p<o.rest.length;p++)if(cn(o.rest[p])>u)return{map:o.measure.maps[p],cache:o.measure.caches[p],before:!0}}}function Cn(o,s){var u=cn(s=Nr(s)),c=o.display.externalMeasured=new Gi(o.doc,s,u);c.lineN=u;var p=c.built=$i(o,c);return c.text=p.pre,ct(o.display.lineMeasure,p.pre),c}function Vr(o,s,u,c){return Xr(o,qo(o,s),u,c)}function Ci(o,s){if(s>=o.display.viewFrom&&s<o.display.viewTo)return o.display.view[Ei(o,s)];var u=o.display.externalMeasured;return u&&s>=u.lineN&&s<u.lineN+u.size?u:void 0}function qo(o,s){var u=cn(s),c=Ci(o,u);c&&!c.text?c=null:c&&c.changes&&(Ji(o,c,u,Fa(o)),o.curOp.forceUpdate=!0),c||(c=Cn(o,s));var p=tn(c,s,u);return{line:s,view:c,rect:null,map:p.map,cache:p.cache,before:p.before,hasHeights:!1}}function Xr(o,s,u,c,p){s.before&&(u=-1);var h,w=u+(c||"");return s.cache.hasOwnProperty(w)?h=s.cache[w]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(We(o,s.view,s.rect),s.hasHeights=!0),(h=dc(o,s,u,c)).bogus||(s.cache[w]=h)),{left:h.left,right:h.right,top:p?h.rtop:h.top,bottom:p?h.rbottom:h.bottom}}var Go,Ma={left:0,right:0,top:0,bottom:0};function xi(o,s,u){for(var c,p,h,w,C,E,j=0;j<o.length;j+=3)if(C=o[j],E=o[j+1],s<C?(p=0,h=1,w="left"):s<E?h=(p=s-C)+1:(j==o.length-3||s==E&&o[j+3]>s)&&(p=(h=E-C)-1,s>=E&&(w="right")),p!=null){if(c=o[j+2],C==E&&u==(c.insertLeft?"left":"right")&&(w=u),u=="left"&&p==0)for(;j&&o[j-2]==o[j-3]&&o[j-1].insertLeft;)c=o[(j-=3)+2],w="left";if(u=="right"&&p==E-C)for(;j<o.length-3&&o[j+3]==o[j+4]&&!o[j+5].insertLeft;)c=o[(j+=3)+2],w="right";break}return{node:c,start:p,end:h,collapse:w,coverStart:C,coverEnd:E}}function _l(o,s){var u=Ma;if(s=="left")for(var c=0;c<o.length&&(u=o[c]).left==u.right;c++);else for(var p=o.length-1;p>=0&&(u=o[p]).left==u.right;p--);return u}function dc(o,s,u,c){var p,h=xi(s.map,u,c),w=h.node,C=h.start,E=h.end,j=h.collapse;if(w.nodeType==3){for(var ot=0;ot<4;ot++){for(;C&&z(s.line.text.charAt(h.coverStart+C));)--C;for(;h.coverStart+E<h.coverEnd&&z(s.line.text.charAt(h.coverStart+E));)++E;if((p=G&&S<9&&C==0&&E==h.coverEnd-h.coverStart?w.parentNode.getBoundingClientRect():_l(et(w,C,E).getClientRects(),c)).left||p.right||C==0)break;E=C,C-=1,j="right"}G&&S<11&&(p=hc(o.display.measure,p))}else{var it;C>0&&(j=c="right"),p=o.options.lineWrapping&&(it=w.getClientRects()).length>1?it[c=="right"?it.length-1:0]:w.getBoundingClientRect()}if(G&&S<9&&!C&&(!p||!p.left&&!p.right)){var Et=w.parentNode.getClientRects()[0];p=Et?{left:Et.left,right:Et.left+di(o.display),top:Et.top,bottom:Et.bottom}:Ma}for(var kt=p.top-s.rect.top,Ft=p.bottom-s.rect.top,Qt=(kt+Ft)/2,se=s.view.measure.heights,be=0;be<se.length-1&&!(Qt<se[be]);be++);var Te=be?se[be-1]:0,ge=se[be],De={left:(j=="right"?p.right:p.left)-s.rect.left,right:(j=="left"?p.left:p.right)-s.rect.left,top:Te,bottom:ge};return p.left||p.right||(De.bogus=!0),o.options.singleCursorHeightPerLine||(De.rtop=kt,De.rbottom=Ft),De}function hc(o,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Sr(o))return s;var u=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*u,right:s.right*u,top:s.top*c,bottom:s.bottom*c}}function Cl(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var s=0;s<o.rest.length;s++)o.measure.caches[s]={}}function Os(o){o.display.externalMeasure=null,Pt(o.display.lineMeasure);for(var s=0;s<o.display.view.length;s++)Cl(o.display.view[s])}function es(o){Os(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function La(){return F&&de?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function xl(){return F&&de?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Js(o){var s=Nr(o).widgets,u=0;if(s)for(var c=0;c<s.length;++c)s[c].above&&(u+=O(s[c]));return u}function Zs(o,s,u,c,p){if(!p){var h=Js(s);u.top+=h,u.bottom+=h}if(c=="line")return u;c||(c="local");var w=Ir(s);if(c=="local"?w+=lt(o.display):w-=o.display.viewOffset,c=="page"||c=="window"){var C=o.display.lineSpace.getBoundingClientRect();w+=C.top+(c=="window"?0:xl());var E=C.left+(c=="window"?0:La());u.left+=E,u.right+=E}return u.top+=w,u.bottom+=w,u}function Da(o,s,u){if(u=="div")return s;var c=s.left,p=s.top;if(u=="page")c-=La(),p-=xl();else if(u=="local"||!u){var h=o.display.sizer.getBoundingClientRect();c+=h.left,p+=h.top}var w=o.display.lineSpace.getBoundingClientRect();return{left:c-w.left,top:p-w.top}}function Xs(o,s,u,c,p){return c||(c=je(o.doc,s.line)),Zs(o,c,Vr(o,c,s.ch,p),u)}function Hr(o,s,u,c,p,h){function w(Ft,Qt){var se=Xr(o,p,Ft,Qt?"right":"left",h);return Qt?se.left=se.right:se.right=se.left,Zs(o,c,se,u)}c=c||je(o.doc,s.line),p||(p=qo(o,c));var C=Ye(c,o.doc.direction),E=s.ch,j=s.sticky;if(E>=c.text.length?(E=c.text.length,j="before"):E<=0&&(E=0,j="after"),!C)return w(j=="before"?E-1:E,j=="before");function ot(Ft,Qt,se){return w(se?Ft-1:Ft,C[Qt].level==1!=se)}var it=ke(C,E,j),Et=ce,kt=ot(E,it,j=="before");return Et!=null&&(kt.other=ot(E,Et,j!="before")),kt}function Qs(o,s){var u=0;s=_e(o.doc,s),o.options.lineWrapping||(u=di(o.display)*s.ch);var c=je(o.doc,s.line),p=Ir(c)+lt(o.display);return{left:u,right:u,top:p,bottom:p+c.height}}function Ko(o,s,u,c,p){var h=ne(o,s,u);return h.xRel=p,c&&(h.outside=c),h}function ta(o,s,u){var c=o.doc;if((u+=o.display.viewOffset)<0)return Ko(c.first,0,null,-1,-1);var p=Gn(c,u),h=c.first+c.size-1;if(p>h)return Ko(c.first+c.size-1,je(c,h).text.length,null,1,1);s<0&&(s=0);for(var w=je(c,p);;){var C=Ia(o,w,p,s,u),E=Bi(w,C.ch+(C.xRel>0||C.outside>0?1:0));if(!E)return C;var j=E.find(1);if(j.line==p)return j;w=je(c,p=j.line)}}function Sl(o,s,u,c){c-=Js(s);var p=s.text.length,h=Nt(function(w){return Xr(o,u,w-1).bottom<=c},p,0);return{begin:h,end:p=Nt(function(w){return Xr(o,u,w).top>c},h,p)}}function Na(o,s,u,c){return u||(u=qo(o,s)),Sl(o,s,u,Zs(o,s,Xr(o,u,c),"line").top)}function ns(o,s,u,c){return!(o.bottom<=u)&&(o.top>u||(c?o.left:o.right)>s)}function Ia(o,s,u,c,p){p-=Ir(s);var h=qo(o,s),w=Js(s),C=0,E=s.text.length,j=!0,ot=Ye(s,o.doc.direction);if(ot){var it=(o.options.lineWrapping?Si:rs)(o,s,u,h,ot,c,p);C=(j=it.level!=1)?it.from:it.to-1,E=j?it.to:it.from-1}var Et,kt,Ft=null,Qt=null,se=Nt(function(Me){var Be=Xr(o,h,Me);return Be.top+=w,Be.bottom+=w,!!ns(Be,c,p,!1)&&(Be.top<=p&&Be.left<=c&&(Ft=Me,Qt=Be),!0)},C,E),be=!1;if(Qt){var Te=c-Qt.left<Qt.right-c,ge=Te==j;se=Ft+(ge?0:1),kt=ge?"after":"before",Et=Te?Qt.left:Qt.right}else{j||se!=E&&se!=C||se++,kt=se==0?"after":se==s.text.length?"before":Xr(o,h,se-(j?1:0)).bottom+w<=p==j?"after":"before";var De=Hr(o,ne(u,se,kt),"line",s,h);Et=De.left,be=p<De.top?-1:p>=De.bottom?1:0}return Ko(u,se=wt(s.text,se,1),kt,be,c-Et)}function rs(o,s,u,c,p,h,w){var C=Nt(function(it){var Et=p[it],kt=Et.level!=1;return ns(Hr(o,ne(u,kt?Et.to:Et.from,kt?"before":"after"),"line",s,c),h,w,!0)},0,p.length-1),E=p[C];if(C>0){var j=E.level!=1,ot=Hr(o,ne(u,j?E.from:E.to,j?"after":"before"),"line",s,c);ns(ot,h,w,!0)&&ot.top>w&&(E=p[C-1])}return E}function Si(o,s,u,c,p,h,w){var C=Sl(o,s,c,w),E=C.begin,j=C.end;/\s/.test(s.text.charAt(j-1))&&j--;for(var ot=null,it=null,Et=0;Et<p.length;Et++){var kt=p[Et];if(!(kt.from>=j||kt.to<=E)){var Ft=Xr(o,c,kt.level!=1?Math.min(j,kt.to)-1:Math.max(E,kt.from)).right,Qt=Ft<h?h-Ft+1e9:Ft-h;(!ot||it>Qt)&&(ot=kt,it=Qt)}}return ot||(ot=p[p.length-1]),ot.from<E&&(ot={from:E,to:ot.to,level:ot.level}),ot.to>j&&(ot={from:ot.from,to:j,level:ot.level}),ot}function mo(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(Go==null){Go=Tt("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)Go.appendChild(document.createTextNode("x")),Go.appendChild(Tt("br"));Go.appendChild(document.createTextNode("x"))}ct(o.measure,Go);var u=Go.offsetHeight/50;return u>3&&(o.cachedTextHeight=u),Pt(o.measure),u||1}function di(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var s=Tt("span","xxxxxxxxxx"),u=Tt("pre",[s],"CodeMirror-line-like");ct(o.measure,u);var c=s.getBoundingClientRect(),p=(c.right-c.left)/10;return p>2&&(o.cachedCharWidth=p),p||10}function Fa(o){for(var s=o.display,u={},c={},p=s.gutters.clientLeft,h=s.gutters.firstChild,w=0;h;h=h.nextSibling,++w){var C=o.display.gutterSpecs[w].className;u[C]=h.offsetLeft+h.clientLeft+p,c[C]=h.clientWidth}return{fixedPos:co(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:u,gutterWidth:c,wrapperWidth:s.wrapper.clientWidth}}function co(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function Oi(o){var s=mo(o.display),u=o.options.lineWrapping,c=u&&Math.max(5,o.display.scroller.clientWidth/di(o.display)-3);return function(p){if(Jr(o.doc,p))return 0;var h=0;if(p.widgets)for(var w=0;w<p.widgets.length;w++)p.widgets[w].height&&(h+=p.widgets[w].height);return u?h+(Math.ceil(p.text.length/c)||1)*s:h+s}}function Ra(o){var s=o.doc,u=Oi(o);s.iter(function(c){var p=u(c);p!=c.height&&mr(c,p)})}function Ti(o,s,u,c){var p=o.display;if(!u&&$r(s).getAttribute("cm-not-content")=="true")return null;var h,w,C=p.lineSpace.getBoundingClientRect();try{h=s.clientX-C.left,w=s.clientY-C.top}catch{return null}var E,j=ta(o,h,w);if(c&&j.xRel>0&&(E=je(o.doc,j.line).text).length==j.ch){var ot=Ce(E,E.length,o.options.tabSize)-E.length;j=ne(j.line,Math.max(0,Math.round((h-jt(o.display).left)/di(o.display))-ot))}return j}function Ei(o,s){if(s>=o.display.viewTo||(s-=o.display.viewFrom)<0)return null;for(var u=o.display.view,c=0;c<u.length;c++)if((s-=u[c].size)<0)return c}function pr(o,s,u,c){s==null&&(s=o.doc.first),u==null&&(u=o.doc.first+o.doc.size),c||(c=0);var p=o.display;if(c&&u<p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>s)&&(p.updateLineNumbers=s),o.curOp.viewChanged=!0,s>=p.viewTo)lo&&Kn(o.doc,s)<p.viewTo&&hi(o);else if(u<=p.viewFrom)lo&&Yr(o.doc,u+c)>p.viewFrom?hi(o):(p.viewFrom+=c,p.viewTo+=c);else if(s<=p.viewFrom&&u>=p.viewTo)hi(o);else if(s<=p.viewFrom){var h=ea(o,u,u+c,1);h?(p.view=p.view.slice(h.index),p.viewFrom=h.lineN,p.viewTo+=c):hi(o)}else if(u>=p.viewTo){var w=ea(o,s,s,-1);w?(p.view=p.view.slice(0,w.index),p.viewTo=w.lineN):hi(o)}else{var C=ea(o,s,s,-1),E=ea(o,u,u+c,1);C&&E?(p.view=p.view.slice(0,C.index).concat(ho(o,C.lineN,E.lineN)).concat(p.view.slice(E.index)),p.viewTo+=c):hi(o)}var j=p.externalMeasured;j&&(u<j.lineN?j.lineN+=c:s<j.lineN+j.size&&(p.externalMeasured=null))}function vo(o,s,u){o.curOp.viewChanged=!0;var c=o.display,p=o.display.externalMeasured;if(p&&s>=p.lineN&&s<p.lineN+p.size&&(c.externalMeasured=null),!(s<c.viewFrom||s>=c.viewTo)){var h=c.view[Ei(o,s)];if(h.node!=null){var w=h.changes||(h.changes=[]);ve(w,u)==-1&&w.push(u)}}}function hi(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function ea(o,s,u,c){var p,h=Ei(o,s),w=o.display.view;if(!lo||u==o.doc.first+o.doc.size)return{index:h,lineN:u};for(var C=o.display.viewFrom,E=0;E<h;E++)C+=w[E].size;if(C!=s){if(c>0){if(h==w.length-1)return null;p=C+w[h].size-s,h++}else p=C-s;s+=p,u+=p}for(;Kn(o.doc,u)!=u;){if(h==(c<0?0:w.length-1))return null;u+=c*w[h-(c<0?1:0)].size,h+=c}return{index:h,lineN:u}}function na(o,s,u){var c=o.display;c.view.length==0||s>=c.viewTo||u<=c.viewFrom?(c.view=ho(o,s,u),c.viewFrom=s):(c.viewFrom>s?c.view=ho(o,s,c.viewFrom).concat(c.view):c.viewFrom<s&&(c.view=c.view.slice(Ei(o,s))),c.viewFrom=s,c.viewTo<u?c.view=c.view.concat(ho(o,c.viewTo,u)):c.viewTo>u&&(c.view=c.view.slice(0,Ei(o,u)))),c.viewTo=u}function v(o){for(var s=o.display.view,u=0,c=0;c<s.length;c++){var p=s[c];p.hidden||p.node&&!p.changes||++u}return u}function b(o){o.display.input.showSelection(o.display.input.prepareSelection())}function L(o,s){s===void 0&&(s=!0);var u=o.doc,c={},p=c.cursors=document.createDocumentFragment(),h=c.selection=document.createDocumentFragment(),w=o.options.$customCursor;w&&(s=!0);for(var C=0;C<u.sel.ranges.length;C++)if(s||C!=u.sel.primIndex){var E=u.sel.ranges[C];if(!(E.from().line>=o.display.viewTo||E.to().line<o.display.viewFrom)){var j=E.empty();if(w){var ot=w(o,E);ot&&ht(o,ot,p)}else(j||o.options.showCursorWhenSelecting)&&ht(o,E.head,p);j||qe(o,E,h)}}return c}function ht(o,s,u){var c=Hr(o,s,"div",null,null,!o.options.singleCursorHeightPerLine),p=u.appendChild(Tt("div"," ","CodeMirror-cursor"));if(p.style.left=c.left+"px",p.style.top=c.top+"px",p.style.height=Math.max(0,c.bottom-c.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)){var h=Xs(o,s,"div",null,null),w=h.right-h.left;p.style.width=(w>0?w:o.defaultCharWidth())+"px"}if(c.other){var C=u.appendChild(Tt("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));C.style.display="",C.style.left=c.other.left+"px",C.style.top=c.other.top+"px",C.style.height=.85*(c.other.bottom-c.other.top)+"px"}}function qt(o,s){return o.top-s.top||o.left-s.left}function qe(o,s,u){var c=o.display,p=o.doc,h=document.createDocumentFragment(),w=jt(o.display),C=w.left,E=Math.max(c.sizerWidth,Kt(o)-c.sizer.offsetLeft)-w.right,j=p.direction=="ltr";function ot(ge,De,Me,Be){De<0&&(De=0),De=Math.round(De),Be=Math.round(Be),h.appendChild(Tt("div",null,"CodeMirror-selected","position: absolute; left: "+ge+`px;
                             top: `+De+"px; width: "+(Me??E-ge)+`px;
                             height: `+(Be-De)+"px"))}function it(ge,De,Me){var Be,Tn,En=je(p,ge),Qr=En.text.length;function Dn(Bn,Qn){return Xs(o,ne(ge,Bn),"div",En,Qn)}function kr(Bn,Qn,Ur){var ar=Na(o,En,null,Bn),tr=Qn=="ltr"==(Ur=="after")?"left":"right";return Dn(Ur=="after"?ar.begin:ar.end-(/\s/.test(En.text.charAt(ar.end-1))?2:1),tr)[tr]}var to=Ye(En,p.direction);return Mt(to,De||0,Me??Qr,function(Bn,Qn,Ur,ar){var tr=Ur=="ltr",er=Dn(Bn,tr?"left":"right"),eo=Dn(Qn-1,tr?"right":"left"),ls=De==null&&Bn==0,Qo=Me==null&&Qn==Qr,Pr=ar==0,zn=!to||ar==to.length-1;if(eo.top-er.top<=3){var Kc=(j?Qo:ls)&&zn,Di=(j?ls:Qo)&&Pr?C:(tr?er:eo).left,Is=Kc?E:(tr?eo:er).right;ot(Di,er.top,Is-Di,er.bottom)}else{var Fs,fr,wa,Yc;tr?(Fs=j&&ls&&Pr?C:er.left,fr=j?E:kr(Bn,Ur,"before"),wa=j?C:kr(Qn,Ur,"after"),Yc=j&&Qo&&zn?E:eo.right):(Fs=j?kr(Bn,Ur,"before"):C,fr=!j&&ls&&Pr?E:er.right,wa=!j&&Qo&&zn?C:eo.left,Yc=j?kr(Qn,Ur,"after"):E),ot(Fs,er.top,fr-Fs,er.bottom),er.bottom<eo.top&&ot(C,er.bottom,null,eo.top),ot(wa,eo.top,Yc-wa,eo.bottom)}(!Be||qt(er,Be)<0)&&(Be=er),qt(eo,Be)<0&&(Be=eo),(!Tn||qt(er,Tn)<0)&&(Tn=er),qt(eo,Tn)<0&&(Tn=eo)}),{start:Be,end:Tn}}var Et=s.from(),kt=s.to();if(Et.line==kt.line)it(Et.line,Et.ch,kt.ch);else{var Ft=je(p,Et.line),Qt=je(p,kt.line),se=Nr(Ft)==Nr(Qt),be=it(Et.line,Et.ch,se?Ft.text.length+1:null).end,Te=it(kt.line,se?0:null,kt.ch).start;se&&(be.top<Te.top-2?(ot(be.right,be.top,null,be.bottom),ot(C,Te.top,Te.left,Te.bottom)):ot(be.right,be.top,Te.left-be.right,be.bottom)),be.bottom<Te.top&&ot(C,be.bottom,null,Te.top)}u.appendChild(h)}function hn(o){if(o.state.focused){var s=o.display;clearInterval(s.blinker);var u=!0;s.cursorDiv.style.visibility="",o.options.cursorBlinkRate>0?s.blinker=setInterval(function(){o.hasFocus()||Yo(o),s.cursorDiv.style.visibility=(u=!u)?"":"hidden"},o.options.cursorBlinkRate):o.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function Br(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||gi(o))}function vr(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&Yo(o))},100)}function gi(o,s){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||(St(o,"focus",o,s),o.state.focused=!0,ae(o.display.wrapper,"CodeMirror-focused"),o.curOp||o.display.selForContextMenu==o.doc.sel||(o.display.input.reset(),T&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),hn(o))}function Yo(o,s){o.state.delayingBlurEvent||(o.state.focused&&(St(o,"blur",o,s),o.state.focused=!1,at(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function Ol(o){for(var s=o.display,u=s.lineDiv.offsetTop,c=Math.max(0,s.scroller.getBoundingClientRect().top),p=s.lineDiv.getBoundingClientRect().top,h=0,w=0;w<s.view.length;w++){var C=s.view[w],E=o.options.lineWrapping,j=void 0,ot=0;if(!C.hidden){if(p+=C.line.height,G&&S<8){var it=C.node.offsetTop+C.node.offsetHeight;j=it-u,u=it}else{var Et=C.node.getBoundingClientRect();j=Et.bottom-Et.top,!E&&C.text.firstChild&&(ot=C.text.firstChild.getBoundingClientRect().right-Et.left-1)}var kt=C.line.height-j;if((kt>.005||kt<-.005)&&(p<c&&(h-=kt),mr(C.line,j),Va(C.line),C.rest))for(var Ft=0;Ft<C.rest.length;Ft++)Va(C.rest[Ft]);if(ot>o.display.sizerWidth){var Qt=Math.ceil(ot/di(o.display));Qt>o.display.maxLineLength&&(o.display.maxLineLength=Qt,o.display.maxLine=C.line,o.display.maxLineChanged=!0)}}}Math.abs(h)>2&&(s.scroller.scrollTop+=h)}function Va(o){if(o.widgets)for(var s=0;s<o.widgets.length;++s){var u=o.widgets[s],c=u.node.parentNode;c&&(u.height=c.offsetHeight)}}function Ha(o,s,u){var c=u&&u.top!=null?Math.max(0,u.top):o.scroller.scrollTop;c=Math.floor(c-lt(o));var p=u&&u.bottom!=null?u.bottom:c+o.wrapper.clientHeight,h=Gn(s,c),w=Gn(s,p);if(u&&u.ensure){var C=u.ensure.from.line,E=u.ensure.to.line;C<h?(h=C,w=Gn(s,Ir(je(s,C))+o.wrapper.clientHeight)):Math.min(E,s.lastLine())>=w&&(h=Gn(s,Ir(je(s,E))-o.wrapper.clientHeight),w=E)}return{from:h,to:Math.max(w,h+1)}}function Kp(o,s){if(!Lt(o,"scrollCursorIntoView")){var u=o.display,c=u.sizer.getBoundingClientRect(),p=null;if(s.top+c.top<0?p=!0:s.bottom+c.top>(window.innerHeight||document.documentElement.clientHeight)&&(p=!1),p!=null&&!Dt){var h=Tt("div","​",null,`position: absolute;
                         top: `+(s.top-u.viewOffset-lt(o.display))+`px;
                         height: `+(s.bottom-s.top+xt(o)+u.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");o.display.lineSpace.appendChild(h),h.scrollIntoView(p),o.display.lineSpace.removeChild(h)}}}function gc(o,s,u,c){var p;c==null&&(c=0),o.options.lineWrapping||s!=u||(u=s.sticky=="before"?ne(s.line,s.ch+1,"before"):s,s=s.ch?ne(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var h=0;h<5;h++){var w=!1,C=Hr(o,s),E=u&&u!=s?Hr(o,u):C,j=mc(o,p={left:Math.min(C.left,E.left),top:Math.min(C.top,E.top)-c,right:Math.max(C.left,E.left),bottom:Math.max(C.bottom,E.bottom)+c}),ot=o.doc.scrollTop,it=o.doc.scrollLeft;if(j.scrollTop!=null&&(za(o,j.scrollTop),Math.abs(o.doc.scrollTop-ot)>1&&(w=!0)),j.scrollLeft!=null&&(ki(o,j.scrollLeft),Math.abs(o.doc.scrollLeft-it)>1&&(w=!0)),!w)break}return p}function Yp(o,s){var u=mc(o,s);u.scrollTop!=null&&za(o,u.scrollTop),u.scrollLeft!=null&&ki(o,u.scrollLeft)}function mc(o,s){var u=o.display,c=mo(o.display);s.top<0&&(s.top=0);var p=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:u.scroller.scrollTop,h=le(o),w={};s.bottom-s.top>h&&(s.bottom=s.top+h);var C=o.doc.height+mt(u),E=s.top<c,j=s.bottom>C-c;if(s.top<p)w.scrollTop=E?0:s.top;else if(s.bottom>p+h){var ot=Math.min(s.top,(j?C:s.bottom)-h);ot!=p&&(w.scrollTop=ot)}var it=o.options.fixedGutter?0:u.gutters.offsetWidth,Et=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:u.scroller.scrollLeft-it,kt=Kt(o)-u.gutters.offsetWidth,Ft=s.right-s.left>kt;return Ft&&(s.right=s.left+kt),s.left<10?w.scrollLeft=0:s.left<Et?w.scrollLeft=Math.max(0,s.left+it-(Ft?0:10)):s.right>kt+Et-3&&(w.scrollLeft=s.right+(Ft?0:10)-kt),w}function Tl(o,s){s!=null&&(Ts(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+s)}function ra(o){Ts(o);var s=o.getCursor();o.curOp.scrollToPos={from:s,to:s,margin:o.options.cursorScrollMargin}}function Ba(o,s,u){s==null&&u==null||Ts(o),s!=null&&(o.curOp.scrollLeft=s),u!=null&&(o.curOp.scrollTop=u)}function Jp(o,s){Ts(o),o.curOp.scrollToPos=s}function Ts(o){var s=o.curOp.scrollToPos;s&&(o.curOp.scrollToPos=null,gu(o,Qs(o,s.from),Qs(o,s.to),s.margin))}function gu(o,s,u,c){var p=mc(o,{left:Math.min(s.left,u.left),top:Math.min(s.top,u.top)-c,right:Math.max(s.right,u.right),bottom:Math.max(s.bottom,u.bottom)+c});Ba(o,p.scrollLeft,p.scrollTop)}function za(o,s){Math.abs(o.doc.scrollTop-s)<2||(K||yc(o,{top:s}),Ua(o,s,!0),K&&yc(o),ia(o,100))}function Ua(o,s,u){s=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,s)),(o.display.scroller.scrollTop!=s||u)&&(o.doc.scrollTop=s,o.display.scrollbars.setScrollTop(s),o.display.scroller.scrollTop!=s&&(o.display.scroller.scrollTop=s))}function ki(o,s,u,c){s=Math.max(0,Math.min(s,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),(u?s==o.doc.scrollLeft:Math.abs(o.doc.scrollLeft-s)<2)&&!c||(o.doc.scrollLeft=s,Ga(o),o.display.scroller.scrollLeft!=s&&(o.display.scroller.scrollLeft=s),o.display.scrollbars.setScrollLeft(s))}function $a(o){var s=o.display,u=s.gutters.offsetWidth,c=Math.round(o.doc.height+mt(o.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:o.options.fixedGutter?u:0,docHeight:c,scrollHeight:c+xt(o)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:u}}var Es=function(o,s,u){this.cm=u;var c=this.vert=Tt("div",[Tt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=Tt("div",[Tt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=p.tabIndex=-1,o(c),o(p),ue(c,"scroll",function(){c.clientHeight&&s(c.scrollTop,"vertical")}),ue(p,"scroll",function(){p.clientWidth&&s(p.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,G&&S<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Es.prototype.update=function(o){var s=o.scrollWidth>o.clientWidth+1,u=o.scrollHeight>o.clientHeight+1,c=o.nativeBarWidth;if(u){this.vert.style.display="block",this.vert.style.bottom=s?c+"px":"0";var p=o.viewHeight-(s?c:0);this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+p)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=u?c+"px":"0",this.horiz.style.left=o.barLeft+"px";var h=o.viewWidth-o.barLeft-(u?c:0);this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+h)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&o.clientHeight>0&&(c==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:u?c:0,bottom:s?c:0}},Es.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Es.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Es.prototype.zeroWidthHack=function(){var o=_t&&!It?"12px":"18px";this.horiz.style.height=this.vert.style.width=o,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Ve,this.disableVert=new Ve},Es.prototype.enableZeroWidthBar=function(o,s,u){function c(){var p=o.getBoundingClientRect();(u=="vert"?document.elementFromPoint(p.right-1,(p.top+p.bottom)/2):document.elementFromPoint((p.right+p.left)/2,p.bottom-1))!=o?o.style.visibility="hidden":s.set(1e3,c)}o.style.visibility="",s.set(1e3,c)},Es.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var Wa=function(){};function oa(o,s){s||(s=$a(o));var u=o.display.barWidth,c=o.display.barHeight;yo(o,s);for(var p=0;p<4&&u!=o.display.barWidth||c!=o.display.barHeight;p++)u!=o.display.barWidth&&o.options.lineWrapping&&Ol(o),yo(o,$a(o)),u=o.display.barWidth,c=o.display.barHeight}function yo(o,s){var u=o.display,c=u.scrollbars.update(s);u.sizer.style.paddingRight=(u.barWidth=c.right)+"px",u.sizer.style.paddingBottom=(u.barHeight=c.bottom)+"px",u.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(u.scrollbarFiller.style.display="block",u.scrollbarFiller.style.height=c.bottom+"px",u.scrollbarFiller.style.width=c.right+"px"):u.scrollbarFiller.style.display="",c.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(u.gutterFiller.style.display="block",u.gutterFiller.style.height=c.bottom+"px",u.gutterFiller.style.width=s.gutterWidth+"px"):u.gutterFiller.style.display=""}Wa.prototype.update=function(){return{bottom:0,right:0}},Wa.prototype.setScrollLeft=function(){},Wa.prototype.setScrollTop=function(){},Wa.prototype.clear=function(){};var mu={native:Es,null:Wa};function vu(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&at(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new mu[o.options.scrollbarStyle](function(s){o.display.wrapper.insertBefore(s,o.display.scrollbarFiller),ue(s,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,u){u=="horizontal"?ki(o,s):za(o,s)},o),o.display.scrollbars.addClass&&ae(o.display.wrapper,o.display.scrollbars.addClass)}var Zp=0;function ks(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Zp,markArrays:null},wi(o.curOp)}function Ps(o){var s=o.curOp;s&&Yi(s,function(u){for(var c=0;c<u.ops.length;c++)u.ops[c].cm.curOp=null;Xp(u)})}function Xp(o){for(var s=o.ops,u=0;u<s.length;u++)Qp(s[u]);for(var c=0;c<s.length;c++)tf(s[c]);for(var p=0;p<s.length;p++)ef(s[p]);for(var h=0;h<s.length;h++)qa(s[h]);for(var w=0;w<s.length;w++)nf(s[w])}function Qp(o){var s=o.cm,u=s.display;As(s),o.updateMaxLine&&bi(s),o.mustUpdate=o.viewChanged||o.forceUpdate||o.scrollTop!=null||o.scrollToPos&&(o.scrollToPos.from.line<u.viewFrom||o.scrollToPos.to.line>=u.viewTo)||u.maxLineChanged&&s.options.lineWrapping,o.update=o.mustUpdate&&new El(s,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate)}function tf(o){o.updatedDisplay=o.mustUpdate&&vc(o.cm,o.update)}function ef(o){var s=o.cm,u=s.display;o.updatedDisplay&&Ol(s),o.barMeasure=$a(s),u.maxLineChanged&&!s.options.lineWrapping&&(o.adjustWidthTo=Vr(s,u.maxLine,u.maxLine.text.length).left+3,s.display.sizerWidth=o.adjustWidthTo,o.barMeasure.scrollWidth=Math.max(u.scroller.clientWidth,u.sizer.offsetLeft+o.adjustWidthTo+xt(s)+s.display.barWidth),o.maxScrollLeft=Math.max(0,u.sizer.offsetLeft+o.adjustWidthTo-Kt(s))),(o.updatedDisplay||o.selectionChanged)&&(o.preparedSelection=u.input.prepareSelection())}function qa(o){var s=o.cm;o.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=o.adjustWidthTo+"px",o.maxScrollLeft<s.doc.scrollLeft&&ki(s,Math.min(s.display.scroller.scrollLeft,o.maxScrollLeft),!0),s.display.maxLineChanged=!1);var u=o.focus&&o.focus==Ht();o.preparedSelection&&s.display.input.showSelection(o.preparedSelection,u),(o.updatedDisplay||o.startHeight!=s.doc.height)&&oa(s,o.barMeasure),o.updatedDisplay&&kl(s,o.barMeasure),o.selectionChanged&&hn(s),s.state.focused&&o.updateInput&&s.display.input.reset(o.typing),u&&Br(o.cm)}function nf(o){var s=o.cm,u=s.display,c=s.doc;o.updatedDisplay&&yu(s,o.update),u.wheelStartX==null||o.scrollTop==null&&o.scrollLeft==null&&!o.scrollToPos||(u.wheelStartX=u.wheelStartY=null),o.scrollTop!=null&&Ua(s,o.scrollTop,o.forceScroll),o.scrollLeft!=null&&ki(s,o.scrollLeft,!0,!0),o.scrollToPos&&Kp(s,gc(s,_e(c,o.scrollToPos.from),_e(c,o.scrollToPos.to),o.scrollToPos.margin));var p=o.maybeHiddenMarkers,h=o.maybeUnhiddenMarkers;if(p)for(var w=0;w<p.length;++w)p[w].lines.length||St(p[w],"hide");if(h)for(var C=0;C<h.length;++C)h[C].lines.length&&St(h[C],"unhide");u.wrapper.offsetHeight&&(c.scrollTop=s.display.scroller.scrollTop),o.changeObjs&&St(s,"changes",s,o.changeObjs),o.update&&o.update.finish()}function zr(o,s){if(o.curOp)return s();ks(o);try{return s()}finally{Ps(o)}}function yr(o,s){return function(){if(o.curOp)return s.apply(o,arguments);ks(o);try{return s.apply(o,arguments)}finally{Ps(o)}}}function Er(o){return function(){if(this.curOp)return o.apply(this,arguments);ks(this);try{return o.apply(this,arguments)}finally{Ps(this)}}}function br(o){return function(){var s=this.cm;if(!s||s.curOp)return o.apply(this,arguments);ks(s);try{return o.apply(this,arguments)}finally{Ps(s)}}}function ia(o,s){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(s,Ee(rf,o))}function rf(o){var s=o.doc;if(!(s.highlightFrontier>=o.display.viewTo)){var u=+new Date+o.options.workTime,c=Ao(o,s.highlightFrontier),p=[];s.iter(c.line,Math.min(s.first+s.size,o.display.viewTo+500),function(h){if(c.line>=o.display.viewFrom){var w=h.styles,C=h.text.length>o.options.maxHighlightLength?or(s.mode,c.state):null,E=Ii(o,h,c,!0);C&&(c.state=C),h.styles=E.styles;var j=h.styleClasses,ot=E.classes;ot?h.styleClasses=ot:j&&(h.styleClasses=null);for(var it=!w||w.length!=h.styles.length||j!=ot&&(!j||!ot||j.bgClass!=ot.bgClass||j.textClass!=ot.textClass),Et=0;!it&&Et<w.length;++Et)it=w[Et]!=h.styles[Et];it&&p.push(c.line),h.stateAfter=c.save(),c.nextLine()}else h.text.length<=o.options.maxHighlightLength&&fo(o,h.text,c),h.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>u)return ia(o,o.options.workDelay),!0}),s.highlightFrontier=c.line,s.modeFrontier=Math.max(s.modeFrontier,c.line),p.length&&zr(o,function(){for(var h=0;h<p.length;h++)vo(o,p[h],"text")})}}var El=function(o,s,u){var c=o.display;this.viewport=s,this.visible=Ha(c,o.doc,s),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=Kt(o),this.force=u,this.dims=Fa(o),this.events=[]};function As(o){var s=o.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=xt(o)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=xt(o)+"px",s.scrollbarsClipped=!0)}function of(o){if(o.hasFocus())return null;var s=Ht();if(!s||!Ut(o.display.lineDiv,s))return null;var u={activeElt:s};if(window.getSelection){var c=window.getSelection();c.anchorNode&&c.extend&&Ut(o.display.lineDiv,c.anchorNode)&&(u.anchorNode=c.anchorNode,u.anchorOffset=c.anchorOffset,u.focusNode=c.focusNode,u.focusOffset=c.focusOffset)}return u}function sf(o){if(o&&o.activeElt&&o.activeElt!=Ht()&&(o.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(o.activeElt.nodeName)&&o.anchorNode&&Ut(document.body,o.anchorNode)&&Ut(document.body,o.focusNode))){var s=window.getSelection(),u=document.createRange();u.setEnd(o.anchorNode,o.anchorOffset),u.collapse(!1),s.removeAllRanges(),s.addRange(u),s.extend(o.focusNode,o.focusOffset)}}function vc(o,s){var u=o.display,c=o.doc;if(s.editorIsHidden)return hi(o),!1;if(!s.force&&s.visible.from>=u.viewFrom&&s.visible.to<=u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo)&&u.renderedView==u.view&&v(o)==0)return!1;wu(o)&&(hi(o),s.dims=Fa(o));var p=c.first+c.size,h=Math.max(s.visible.from-o.options.viewportMargin,c.first),w=Math.min(p,s.visible.to+o.options.viewportMargin);u.viewFrom<h&&h-u.viewFrom<20&&(h=Math.max(c.first,u.viewFrom)),u.viewTo>w&&u.viewTo-w<20&&(w=Math.min(p,u.viewTo)),lo&&(h=Kn(o.doc,h),w=Yr(o.doc,w));var C=h!=u.viewFrom||w!=u.viewTo||u.lastWrapHeight!=s.wrapperHeight||u.lastWrapWidth!=s.wrapperWidth;na(o,h,w),u.viewOffset=Ir(je(o.doc,u.viewFrom)),o.display.mover.style.top=u.viewOffset+"px";var E=v(o);if(!C&&E==0&&!s.force&&u.renderedView==u.view&&(u.updateLineNumbers==null||u.updateLineNumbers>=u.viewTo))return!1;var j=of(o);return E>4&&(u.lineDiv.style.display="none"),bu(o,u.updateLineNumbers,s.dims),E>4&&(u.lineDiv.style.display=""),u.renderedView=u.view,sf(j),Pt(u.cursorDiv),Pt(u.selectionDiv),u.gutters.style.height=u.sizer.style.minHeight=0,C&&(u.lastWrapHeight=s.wrapperHeight,u.lastWrapWidth=s.wrapperWidth,ia(o,400)),u.updateLineNumbers=null,!0}function yu(o,s){for(var u=s.viewport,c=!0;;c=!1){if(c&&o.options.lineWrapping&&s.oldDisplayWidth!=Kt(o))c&&(s.visible=Ha(o.display,o.doc,u));else if(u&&u.top!=null&&(u={top:Math.min(o.doc.height+mt(o.display)-le(o),u.top)}),s.visible=Ha(o.display,o.doc,u),s.visible.from>=o.display.viewFrom&&s.visible.to<=o.display.viewTo)break;if(!vc(o,s))break;Ol(o);var p=$a(o);b(o),oa(o,p),kl(o,p),s.force=!1}s.signal(o,"update",o),o.display.viewFrom==o.display.reportedViewFrom&&o.display.viewTo==o.display.reportedViewTo||(s.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function yc(o,s){var u=new El(o,s);if(vc(o,u)){Ol(o),yu(o,u);var c=$a(o);b(o),oa(o,c),kl(o,c),u.finish()}}function bu(o,s,u){var c=o.display,p=o.options.lineNumbers,h=c.lineDiv,w=h.firstChild;function C(Ft){var Qt=Ft.nextSibling;return T&&_t&&o.display.currentWheelTarget==Ft?Ft.style.display="none":Ft.parentNode.removeChild(Ft),Qt}for(var E=c.view,j=c.viewFrom,ot=0;ot<E.length;ot++){var it=E[ot];if(!it.hidden)if(it.node&&it.node.parentNode==h){for(;w!=it.node;)w=C(w);var Et=p&&s!=null&&s<=j&&it.lineNumber;it.changes&&(ve(it.changes,"gutter")>-1&&(Et=!1),Ji(o,it,j,u)),Et&&(Pt(it.lineNumber),it.lineNumber.appendChild(document.createTextNode(ai(o.options,j)))),w=it.node.nextSibling}else{var kt=Xi(o,it,j,u);h.insertBefore(kt,w)}j+=it.size}for(;w;)w=C(w)}function bc(o){var s=o.gutters.offsetWidth;o.sizer.style.marginLeft=s+"px",Mn(o,"gutterChanged",o)}function kl(o,s){o.display.sizer.style.minHeight=s.docHeight+"px",o.display.heightForcer.style.top=s.docHeight+"px",o.display.gutters.style.height=s.docHeight+o.display.barHeight+xt(o)+"px"}function Ga(o){var s=o.display,u=s.view;if(s.alignWidgets||s.gutters.firstChild&&o.options.fixedGutter){for(var c=co(s)-s.scroller.scrollLeft+o.doc.scrollLeft,p=s.gutters.offsetWidth,h=c+"px",w=0;w<u.length;w++)if(!u[w].hidden){o.options.fixedGutter&&(u[w].gutter&&(u[w].gutter.style.left=h),u[w].gutterBackground&&(u[w].gutterBackground.style.left=h));var C=u[w].alignable;if(C)for(var E=0;E<C.length;E++)C[E].style.left=h}o.options.fixedGutter&&(s.gutters.style.left=c+p+"px")}}function wu(o){if(!o.options.lineNumbers)return!1;var s=o.doc,u=ai(o.options,s.first+s.size-1),c=o.display;if(u.length!=c.lineNumChars){var p=c.measure.appendChild(Tt("div",[Tt("div",u)],"CodeMirror-linenumber CodeMirror-gutter-elt")),h=p.firstChild.offsetWidth,w=p.offsetWidth-h;return c.lineGutter.style.width="",c.lineNumInnerWidth=Math.max(h,c.lineGutter.offsetWidth-w)+1,c.lineNumWidth=c.lineNumInnerWidth+w,c.lineNumChars=c.lineNumInnerWidth?u.length:-1,c.lineGutter.style.width=c.lineNumWidth+"px",bc(o.display),!0}return!1}function Pl(o,s){for(var u=[],c=!1,p=0;p<o.length;p++){var h=o[p],w=null;if(typeof h!="string"&&(w=h.style,h=h.className),h=="CodeMirror-linenumbers"){if(!s)continue;c=!0}u.push({className:h,style:w})}return s&&!c&&u.push({className:"CodeMirror-linenumbers",style:null}),u}function _u(o){var s=o.gutters,u=o.gutterSpecs;Pt(s),o.lineGutter=null;for(var c=0;c<u.length;++c){var p=u[c],h=p.className,w=p.style,C=s.appendChild(Tt("div",null,"CodeMirror-gutter "+h));w&&(C.style.cssText=w),h=="CodeMirror-linenumbers"&&(o.lineGutter=C,C.style.width=(o.lineNumWidth||1)+"px")}s.style.display=u.length?"":"none",bc(o)}function sa(o){_u(o.display),pr(o),Ga(o)}function Cu(o,s,u,c){var p=this;this.input=u,p.scrollbarFiller=Tt("div",null,"CodeMirror-scrollbar-filler"),p.scrollbarFiller.setAttribute("cm-not-content","true"),p.gutterFiller=Tt("div",null,"CodeMirror-gutter-filler"),p.gutterFiller.setAttribute("cm-not-content","true"),p.lineDiv=q("div",null,"CodeMirror-code"),p.selectionDiv=Tt("div",null,null,"position: relative; z-index: 1"),p.cursorDiv=Tt("div",null,"CodeMirror-cursors"),p.measure=Tt("div",null,"CodeMirror-measure"),p.lineMeasure=Tt("div",null,"CodeMirror-measure"),p.lineSpace=q("div",[p.measure,p.lineMeasure,p.selectionDiv,p.cursorDiv,p.lineDiv],null,"position: relative; outline: none");var h=q("div",[p.lineSpace],"CodeMirror-lines");p.mover=Tt("div",[h],null,"position: relative"),p.sizer=Tt("div",[p.mover],"CodeMirror-sizer"),p.sizerWidth=null,p.heightForcer=Tt("div",null,null,"position: absolute; height: "+ye+"px; width: 1px;"),p.gutters=Tt("div",null,"CodeMirror-gutters"),p.lineGutter=null,p.scroller=Tt("div",[p.sizer,p.heightForcer,p.gutters],"CodeMirror-scroll"),p.scroller.setAttribute("tabIndex","-1"),p.wrapper=Tt("div",[p.scrollbarFiller,p.gutterFiller,p.scroller],"CodeMirror"),p.wrapper.setAttribute("translate","no"),G&&S<8&&(p.gutters.style.zIndex=-1,p.scroller.style.paddingRight=0),T||K&&Ct||(p.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(p.wrapper):o(p.wrapper)),p.viewFrom=p.viewTo=s.first,p.reportedViewFrom=p.reportedViewTo=s.first,p.view=[],p.renderedView=null,p.externalMeasured=null,p.viewOffset=0,p.lastWrapHeight=p.lastWrapWidth=0,p.updateLineNumbers=null,p.nativeBarWidth=p.barHeight=p.barWidth=0,p.scrollbarsClipped=!1,p.lineNumWidth=p.lineNumInnerWidth=p.lineNumChars=null,p.alignWidgets=!1,p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.maxLine=null,p.maxLineLength=0,p.maxLineChanged=!1,p.wheelDX=p.wheelDY=p.wheelStartX=p.wheelStartY=null,p.shift=!1,p.selForContextMenu=null,p.activeTouch=null,p.gutterSpecs=Pl(c.gutters,c.lineNumbers),_u(p),u.init(p)}El.prototype.signal=function(o,s){Se(o,s)&&this.events.push(arguments)},El.prototype.finish=function(){for(var o=0;o<this.events.length;o++)St.apply(null,this.events[o])};var Al=0,Pi=null;function xu(o){var s=o.wheelDeltaX,u=o.wheelDeltaY;return s==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(s=o.detail),u==null&&o.detail&&o.axis==o.VERTICAL_AXIS?u=o.detail:u==null&&(u=o.wheelDelta),{x:s,y:u}}function af(o){var s=xu(o);return s.x*=Pi,s.y*=Pi,s}function Su(o,s){F&&R>=102&&(o.display.chromeScrollHack==null?o.display.sizer.style.pointerEvents="none":clearTimeout(o.display.chromeScrollHack),o.display.chromeScrollHack=setTimeout(function(){o.display.chromeScrollHack=null,o.display.sizer.style.pointerEvents=""},100));var u=xu(s),c=u.x,p=u.y,h=Pi;s.deltaMode===0&&(c=s.deltaX,p=s.deltaY,h=1);var w=o.display,C=w.scroller,E=C.scrollWidth>C.clientWidth,j=C.scrollHeight>C.clientHeight;if(c&&E||p&&j){if(p&&_t&&T){t:for(var ot=s.target,it=w.view;ot!=C;ot=ot.parentNode)for(var Et=0;Et<it.length;Et++)if(it[Et].node==ot){o.display.currentWheelTarget=ot;break t}}if(c&&!K&&!dt&&h!=null)return p&&j&&za(o,Math.max(0,C.scrollTop+p*h)),ki(o,Math.max(0,C.scrollLeft+c*h)),(!p||p&&j)&&sn(s),void(w.wheelStartX=null);if(p&&h!=null){var kt=p*h,Ft=o.doc.scrollTop,Qt=Ft+w.wrapper.clientHeight;kt<0?Ft=Math.max(0,Ft+kt-50):Qt=Math.min(o.doc.height,Qt+kt+50),yc(o,{top:Ft,bottom:Qt})}Al<20&&s.deltaMode!==0&&(w.wheelStartX==null?(w.wheelStartX=C.scrollLeft,w.wheelStartY=C.scrollTop,w.wheelDX=c,w.wheelDY=p,setTimeout(function(){if(w.wheelStartX!=null){var se=C.scrollLeft-w.wheelStartX,be=C.scrollTop-w.wheelStartY,Te=be&&w.wheelDY&&be/w.wheelDY||se&&w.wheelDX&&se/w.wheelDX;w.wheelStartX=w.wheelStartY=null,Te&&(Pi=(Pi*Al+Te)/(Al+1),++Al)}},200)):(w.wheelDX+=c,w.wheelDY+=p))}}G?Pi=-.53:K?Pi=15:F?Pi=-.7:bt&&(Pi=-.3333333333333333);var bo=function(o,s){this.ranges=o,this.primIndex=s};bo.prototype.primary=function(){return this.ranges[this.primIndex]},bo.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var u=this.ranges[s],c=o.ranges[s];if(!st(u.anchor,c.anchor)||!st(u.head,c.head))return!1}return!0},bo.prototype.deepCopy=function(){for(var o=[],s=0;s<this.ranges.length;s++)o[s]=new mn(Gt(this.ranges[s].anchor),Gt(this.ranges[s].head));return new bo(o,this.primIndex)},bo.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},bo.prototype.contains=function(o,s){s||(s=o);for(var u=0;u<this.ranges.length;u++){var c=this.ranges[u];if(M(s,c.from())>=0&&M(o,c.to())<=0)return u}return-1};var mn=function(o,s){this.anchor=o,this.head=s};function Io(o,s,u){var c=o&&o.options.selectionsMayTouch,p=s[u];s.sort(function(Et,kt){return M(Et.from(),kt.from())}),u=ve(s,p);for(var h=1;h<s.length;h++){var w=s[h],C=s[h-1],E=M(C.to(),w.from());if(c&&!w.empty()?E>0:E>=0){var j=Oe(C.from(),w.from()),ot=me(C.to(),w.to()),it=C.empty()?w.from()==w.head:C.from()==C.head;h<=u&&--u,s.splice(--h,2,new mn(it?ot:j,it?j:ot))}}return new bo(s,u)}function os(o,s){return new bo([new mn(o,s||o)],0)}function Jo(o){return o.text?ne(o.from.line+o.text.length-1,oe(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function Ou(o,s){if(M(o,s.from)<0)return o;if(M(o,s.to)<=0)return Jo(s);var u=o.line+s.text.length-(s.to.line-s.from.line)-1,c=o.ch;return o.line==s.to.line&&(c+=Jo(s).ch-s.to.ch),ne(u,c)}function jl(o,s){for(var u=[],c=0;c<o.sel.ranges.length;c++){var p=o.sel.ranges[c];u.push(new mn(Ou(p.anchor,s),Ou(p.head,s)))}return Io(o.cm,u,o.sel.primIndex)}function Tu(o,s,u){return o.line==s.line?ne(u.line,o.ch-s.ch+u.ch):ne(u.line+(o.line-s.line),o.ch)}function is(o,s,u){for(var c=[],p=ne(o.first,0),h=p,w=0;w<s.length;w++){var C=s[w],E=Tu(C.from,p,h),j=Tu(Jo(C),p,h);if(p=C.to,h=j,u=="around"){var ot=o.sel.ranges[w],it=M(ot.head,ot.anchor)<0;c[w]=new mn(it?j:E,it?E:j)}else c[w]=new mn(E,E)}return new bo(c,o.sel.primIndex)}function Ml(o){o.doc.mode=so(o.options,o.doc.modeOption),Ai(o)}function Ai(o){o.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,ia(o,100),o.state.modeGen++,o.curOp&&pr(o)}function Eu(o,s){return s.from.ch==0&&s.to.ch==0&&oe(s.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function wc(o,s,u,c){function p(Te){return u?u[Te]:null}function h(Te,ge,De){_s(Te,ge,De,c),Mn(Te,"change",Te,s)}function w(Te,ge){for(var De=[],Me=Te;Me<ge;++Me)De.push(new Zr(j[Me],p(Me),c));return De}var C=s.from,E=s.to,j=s.text,ot=je(o,C.line),it=je(o,E.line),Et=oe(j),kt=p(j.length-1),Ft=E.line-C.line;if(s.full)o.insert(0,w(0,j.length)),o.remove(j.length,o.size-j.length);else if(Eu(o,s)){var Qt=w(0,j.length-1);h(it,it.text,kt),Ft&&o.remove(C.line,Ft),Qt.length&&o.insert(C.line,Qt)}else if(ot==it)if(j.length==1)h(ot,ot.text.slice(0,C.ch)+Et+ot.text.slice(E.ch),kt);else{var se=w(1,j.length-1);se.push(new Zr(Et+ot.text.slice(E.ch),kt,c)),h(ot,ot.text.slice(0,C.ch)+j[0],p(0)),o.insert(C.line+1,se)}else if(j.length==1)h(ot,ot.text.slice(0,C.ch)+j[0]+it.text.slice(E.ch),p(0)),o.remove(C.line+1,Ft);else{h(ot,ot.text.slice(0,C.ch)+j[0],p(0)),h(it,Et+it.text.slice(E.ch),kt);var be=w(1,j.length-1);Ft>1&&o.remove(C.line+1,Ft-1),o.insert(C.line+1,be)}Mn(o,"change",o,s)}function ji(o,s,u){function c(p,h,w){if(p.linked)for(var C=0;C<p.linked.length;++C){var E=p.linked[C];if(E.doc!=h){var j=w&&E.sharedHist;u&&!j||(s(E.doc,j),c(E.doc,p,j))}}}c(o,null,!0)}function ku(o,s){if(s.cm)throw new Error("This document is already in use.");o.doc=s,s.cm=o,Ra(o),Ml(o),Ll(o),o.options.direction=s.direction,o.options.lineWrapping||bi(o),o.options.mode=s.modeOption,pr(o)}function Ll(o){(o.doc.direction=="rtl"?ae:at)(o.display.lineDiv,"CodeMirror-rtl")}function lf(o){zr(o,function(){Ll(o),pr(o)})}function Dl(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function _c(o,s){var u={from:Gt(s.from),to:Jo(s),text:gr(o,s.from,s.to)};return Sc(o,u,s.from.line,s.to.line+1),ji(o,function(c){return Sc(c,u,s.from.line,s.to.line+1)},!0),u}function Pu(o){for(;o.length&&oe(o).ranges;)o.pop()}function cf(o,s){return s?(Pu(o.done),oe(o.done)):o.done.length&&!oe(o.done).ranges?oe(o.done):o.done.length>1&&!o.done[o.done.length-2].ranges?(o.done.pop(),oe(o.done)):void 0}function Cc(o,s,u,c){var p=o.history;p.undone.length=0;var h,w,C=+new Date;if((p.lastOp==c||p.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&p.lastModTime>C-(o.cm?o.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(h=cf(p,p.lastOp==c)))w=oe(h.changes),M(s.from,s.to)==0&&M(s.from,w.to)==0?w.to=Jo(s):h.changes.push(_c(o,s));else{var E=oe(p.done);for(E&&E.ranges||Nl(o.sel,p.done),h={changes:[_c(o,s)],generation:p.generation},p.done.push(h);p.done.length>p.undoDepth;)p.done.shift(),p.done[0].ranges||p.done.shift()}p.done.push(u),p.generation=++p.maxGeneration,p.lastModTime=p.lastSelTime=C,p.lastOp=p.lastSelOp=c,p.lastOrigin=p.lastSelOrigin=s.origin,w||St(o,"historyAdded")}function xc(o,s,u,c){var p=s.charAt(0);return p=="*"||p=="+"&&u.ranges.length==c.ranges.length&&u.somethingSelected()==c.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}function uf(o,s,u,c){var p=o.history,h=c&&c.origin;u==p.lastSelOp||h&&p.lastSelOrigin==h&&(p.lastModTime==p.lastSelTime&&p.lastOrigin==h||xc(o,h,oe(p.done),s))?p.done[p.done.length-1]=s:Nl(s,p.done),p.lastSelTime=+new Date,p.lastSelOrigin=h,p.lastSelOp=u,c&&c.clearRedo!==!1&&Pu(p.undone)}function Nl(o,s){var u=oe(s);u&&u.ranges&&u.equals(o)||s.push(o)}function Sc(o,s,u,c){var p=s["spans_"+o.id],h=0;o.iter(Math.max(o.first,u),Math.min(o.first+o.size,c),function(w){w.markedSpans&&((p||(p=s["spans_"+o.id]={}))[h]=w.markedSpans),++h})}function pf(o){if(!o)return null;for(var s,u=0;u<o.length;++u)o[u].marker.explicitlyCleared?s||(s=o.slice(0,u)):s&&s.push(o[u]);return s?s.length?s:null:o}function ff(o,s){var u=s["spans_"+o.id];if(!u)return null;for(var c=[],p=0;p<s.text.length;++p)c.push(pf(u[p]));return c}function Oc(o,s){var u=ff(o,s),c=li(o,s);if(!u)return c;if(!c)return u;for(var p=0;p<u.length;++p){var h=u[p],w=c[p];if(h&&w)t:for(var C=0;C<w.length;++C){for(var E=w[C],j=0;j<h.length;++j)if(h[j].marker==E.marker)continue t;h.push(E)}else w&&(u[p]=w)}return u}function aa(o,s,u){for(var c=[],p=0;p<o.length;++p){var h=o[p];if(h.ranges)c.push(u?bo.prototype.deepCopy.call(h):h);else{var w=h.changes,C=[];c.push({changes:C});for(var E=0;E<w.length;++E){var j=w[E],ot=void 0;if(C.push({from:j.from,to:j.to,text:j.text}),s)for(var it in j)(ot=it.match(/^spans_(\d+)$/))&&ve(s,Number(ot[1]))>-1&&(oe(C)[it]=j[it],delete j[it])}}}return c}function js(o,s,u,c){if(c){var p=o.anchor;if(u){var h=M(s,p)<0;h!=M(u,p)<0?(p=s,s=u):h!=M(s,u)<0&&(s=u)}return new mn(p,s)}return new mn(u||s,s)}function Il(o,s,u,c,p){p==null&&(p=o.cm&&(o.cm.display.shift||o.extend)),_r(o,new bo([js(o.sel.primary(),s,u,p)],0),c)}function Au(o,s,u){for(var c=[],p=o.cm&&(o.cm.display.shift||o.extend),h=0;h<o.sel.ranges.length;h++)c[h]=js(o.sel.ranges[h],s[h],null,p);_r(o,Io(o.cm,c,o.sel.primIndex),u)}function Fl(o,s,u,c){var p=o.sel.ranges.slice(0);p[s]=u,_r(o,Io(o.cm,p,o.sel.primIndex),c)}function Tc(o,s,u,c){_r(o,os(s,u),c)}function ju(o,s,u){var c={ranges:s.ranges,update:function(p){this.ranges=[];for(var h=0;h<p.length;h++)this.ranges[h]=new mn(_e(o,p[h].anchor),_e(o,p[h].head))},origin:u&&u.origin};return St(o,"beforeSelectionChange",o,c),o.cm&&St(o.cm,"beforeSelectionChange",o.cm,c),c.ranges!=s.ranges?Io(o.cm,c.ranges,c.ranges.length-1):s}function Ec(o,s,u){var c=o.history.done,p=oe(c);p&&p.ranges?(c[c.length-1]=s,Rl(o,s,u)):_r(o,s,u)}function _r(o,s,u){Rl(o,s,u),uf(o,o.sel,o.cm?o.cm.curOp.id:NaN,u)}function Rl(o,s,u){(Se(o,"beforeSelectionChange")||o.cm&&Se(o.cm,"beforeSelectionChange"))&&(s=ju(o,s,u));var c=u&&u.bias||(M(s.primary().head,o.sel.primary().head)<0?-1:1);la(o,kc(o,s,c,!0)),u&&u.scroll===!1||!o.cm||o.cm.getOption("readOnly")=="nocursor"||ra(o.cm)}function la(o,s){s.equals(o.sel)||(o.sel=s,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,pe(o.cm)),Mn(o,"cursorActivity",o))}function Vl(o){la(o,kc(o,o.sel,null,!1))}function kc(o,s,u,c){for(var p,h=0;h<s.ranges.length;h++){var w=s.ranges[h],C=s.ranges.length==o.sel.ranges.length&&o.sel.ranges[h],E=Ka(o,w.anchor,C&&C.anchor,u,c),j=w.head==w.anchor?E:Ka(o,w.head,C&&C.head,u,c);(p||E!=w.anchor||j!=w.head)&&(p||(p=s.ranges.slice(0,h)),p[h]=new mn(E,j))}return p?Io(o.cm,p,s.primIndex):s}function Ms(o,s,u,c,p){var h=je(o,s.line);if(h.markedSpans)for(var w=0;w<h.markedSpans.length;++w){var C=h.markedSpans[w],E=C.marker,j="selectLeft"in E?!E.selectLeft:E.inclusiveLeft,ot="selectRight"in E?!E.selectRight:E.inclusiveRight;if((C.from==null||(j?C.from<=s.ch:C.from<s.ch))&&(C.to==null||(ot?C.to>=s.ch:C.to>s.ch))){if(p&&(St(E,"beforeCursorEnter"),E.explicitlyCleared)){if(h.markedSpans){--w;continue}break}if(!E.atomic)continue;if(u){var it=E.find(c<0?1:-1),Et=void 0;if((c<0?ot:j)&&(it=ca(o,it,-c,it&&it.line==s.line?h:null)),it&&it.line==s.line&&(Et=M(it,u))&&(c<0?Et<0:Et>0))return Ms(o,it,s,c,p)}var kt=E.find(c<0?-1:1);return(c<0?j:ot)&&(kt=ca(o,kt,c,kt.line==s.line?h:null)),kt?Ms(o,kt,s,c,p):null}}return s}function Ka(o,s,u,c,p){var h=c||1,w=Ms(o,s,u,h,p)||!p&&Ms(o,s,u,h,!0)||Ms(o,s,u,-h,p)||!p&&Ms(o,s,u,-h,!0);return w||(o.cantEdit=!0,ne(o.first,0))}function ca(o,s,u,c){return u<0&&s.ch==0?s.line>o.first?_e(o,ne(s.line-1)):null:u>0&&s.ch==(c||je(o,s.line)).text.length?s.line<o.first+o.size-1?ne(s.line+1,0):null:new ne(s.line,s.ch+u)}function Mu(o){o.setSelection(ne(o.firstLine(),0),ne(o.lastLine()),xe)}function Lu(o,s,u){var c={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return c.canceled=!0}};return u&&(c.update=function(p,h,w,C){p&&(c.from=_e(o,p)),h&&(c.to=_e(o,h)),w&&(c.text=w),C!==void 0&&(c.origin=C)}),St(o,"beforeChange",o,c),o.cm&&St(o.cm,"beforeChange",o.cm,c),c.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function Ls(o,s,u){if(o.cm){if(!o.cm.curOp)return yr(o.cm,Ls)(o,s,u);if(o.cm.state.suppressEdits)return}if(!(Se(o,"beforeChange")||o.cm&&Se(o.cm,"beforeChange"))||(s=Lu(o,s,!0))){var c=ur&&!u&&rn(o,s.from,s.to);if(c)for(var p=c.length-1;p>=0;--p)Du(o,{from:c[p].from,to:c[p].to,text:p?[""]:s.text,origin:s.origin});else Du(o,s)}}function Du(o,s){if(s.text.length!=1||s.text[0]!=""||M(s.from,s.to)!=0){var u=jl(o,s);Cc(o,s,u,o.cm?o.cm.curOp.id:NaN),Ya(o,s,u,li(o,s));var c=[];ji(o,function(p,h){h||ve(c,p.history)!=-1||(Iu(p.history,s),c.push(p.history)),Ya(p,s,null,li(p,s))})}}function Hl(o,s,u){var c=o.cm&&o.cm.state.suppressEdits;if(!c||u){for(var p,h=o.history,w=o.sel,C=s=="undo"?h.done:h.undone,E=s=="undo"?h.undone:h.done,j=0;j<C.length&&(p=C[j],u?!p.ranges||p.equals(o.sel):p.ranges);j++);if(j!=C.length){for(h.lastOrigin=h.lastSelOrigin=null;;){if(!(p=C.pop()).ranges){if(c)return void C.push(p);break}if(Nl(p,E),u&&!p.equals(o.sel))return void _r(o,p,{clearRedo:!1});w=p}var ot=[];Nl(w,E),E.push({changes:ot,generation:h.generation}),h.generation=p.generation||++h.maxGeneration;for(var it=Se(o,"beforeChange")||o.cm&&Se(o.cm,"beforeChange"),Et=function(Qt){var se=p.changes[Qt];if(se.origin=s,it&&!Lu(o,se,!1))return C.length=0,{};ot.push(_c(o,se));var be=Qt?jl(o,se):oe(C);Ya(o,se,be,Oc(o,se)),!Qt&&o.cm&&o.cm.scrollIntoView({from:se.from,to:Jo(se)});var Te=[];ji(o,function(ge,De){De||ve(Te,ge.history)!=-1||(Iu(ge.history,se),Te.push(ge.history)),Ya(ge,se,null,Oc(ge,se))})},kt=p.changes.length-1;kt>=0;--kt){var Ft=Et(kt);if(Ft)return Ft.v}}}}function Pc(o,s){if(s!=0&&(o.first+=s,o.sel=new bo(He(o.sel.ranges,function(p){return new mn(ne(p.anchor.line+s,p.anchor.ch),ne(p.head.line+s,p.head.ch))}),o.sel.primIndex),o.cm)){pr(o.cm,o.first,o.first-s,s);for(var u=o.cm.display,c=u.viewFrom;c<u.viewTo;c++)vo(o.cm,c,"gutter")}}function Ya(o,s,u,c){if(o.cm&&!o.cm.curOp)return yr(o.cm,Ya)(o,s,u,c);if(s.to.line<o.first)Pc(o,s.text.length-1-(s.to.line-s.from.line));else if(!(s.from.line>o.lastLine())){if(s.from.line<o.first){var p=s.text.length-1-(o.first-s.from.line);Pc(o,p),s={from:ne(o.first,0),to:ne(s.to.line+p,s.to.ch),text:[oe(s.text)],origin:s.origin}}var h=o.lastLine();s.to.line>h&&(s={from:s.from,to:ne(h,je(o,h).text.length),text:[s.text[0]],origin:s.origin}),s.removed=gr(o,s.from,s.to),u||(u=jl(o,s)),o.cm?df(o.cm,s,c):wc(o,s,c),Rl(o,u,xe),o.cantEdit&&Ka(o,ne(o.firstLine(),0))&&(o.cantEdit=!1)}}function df(o,s,u){var c=o.doc,p=o.display,h=s.from,w=s.to,C=!1,E=h.line;o.options.lineWrapping||(E=cn(Nr(je(c,h.line))),c.iter(E,w.line+1,function(kt){if(kt==p.maxLine)return C=!0,!0})),c.sel.contains(s.from,s.to)>-1&&pe(o),wc(c,s,u,Oi(o)),o.options.lineWrapping||(c.iter(E,h.line+s.text.length,function(kt){var Ft=ci(kt);Ft>p.maxLineLength&&(p.maxLine=kt,p.maxLineLength=Ft,p.maxLineChanged=!0,C=!1)}),C&&(o.curOp.updateMaxLine=!0)),bs(c,h.line),ia(o,400);var j=s.text.length-(w.line-h.line)-1;s.full?pr(o):h.line!=w.line||s.text.length!=1||Eu(o.doc,s)?pr(o,h.line,w.line+1,j):vo(o,h.line,"text");var ot=Se(o,"changes"),it=Se(o,"change");if(it||ot){var Et={from:h,to:w,text:s.text,removed:s.removed,origin:s.origin};it&&Mn(o,"change",o,Et),ot&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(Et)}o.display.selForContextMenu=null}function ua(o,s,u,c,p){var h;c||(c=u),M(c,u)<0&&(u=(h=[c,u])[0],c=h[1]),typeof s=="string"&&(s=o.splitLines(s)),Ls(o,{from:u,to:c,text:s,origin:p})}function Nu(o,s,u,c){u<o.line?o.line+=c:s<o.line&&(o.line=s,o.ch=0)}function Ja(o,s,u,c){for(var p=0;p<o.length;++p){var h=o[p],w=!0;if(h.ranges){h.copied||((h=o[p]=h.deepCopy()).copied=!0);for(var C=0;C<h.ranges.length;C++)Nu(h.ranges[C].anchor,s,u,c),Nu(h.ranges[C].head,s,u,c)}else{for(var E=0;E<h.changes.length;++E){var j=h.changes[E];if(u<j.from.line)j.from=ne(j.from.line+c,j.from.ch),j.to=ne(j.to.line+c,j.to.ch);else if(s<=j.to.line){w=!1;break}}w||(o.splice(0,p+1),p=0)}}}function Iu(o,s){var u=s.from.line,c=s.to.line,p=s.text.length-(c-u)-1;Ja(o.done,u,c,p),Ja(o.undone,u,c,p)}function Za(o,s,u,c){var p=s,h=s;return typeof s=="number"?h=je(o,an(o,s)):p=cn(s),p==null?null:(c(h,p)&&o.cm&&vo(o.cm,p,u),h)}function Xa(o){this.lines=o,this.parent=null;for(var s=0,u=0;u<o.length;++u)o[u].parent=this,s+=o[u].height;this.height=s}function pa(o){this.children=o;for(var s=0,u=0,c=0;c<o.length;++c){var p=o[c];s+=p.chunkSize(),u+=p.height,p.parent=this}this.size=s,this.height=u,this.parent=null}mn.prototype.from=function(){return Oe(this.anchor,this.head)},mn.prototype.to=function(){return me(this.anchor,this.head)},mn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Xa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,s){for(var u=o,c=o+s;u<c;++u){var p=this.lines[u];this.height-=p.height,qs(p),Mn(p,"delete")}this.lines.splice(o,s)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,s,u){this.height+=u,this.lines=this.lines.slice(0,o).concat(s).concat(this.lines.slice(o));for(var c=0;c<s.length;++c)s[c].parent=this},iterN:function(o,s,u){for(var c=o+s;o<c;++o)if(u(this.lines[o]))return!0}},pa.prototype={chunkSize:function(){return this.size},removeInner:function(o,s){this.size-=s;for(var u=0;u<this.children.length;++u){var c=this.children[u],p=c.chunkSize();if(o<p){var h=Math.min(s,p-o),w=c.height;if(c.removeInner(o,h),this.height-=w-c.height,p==h&&(this.children.splice(u--,1),c.parent=null),(s-=h)==0)break;o=0}else o-=p}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof Xa))){var C=[];this.collapse(C),this.children=[new Xa(C)],this.children[0].parent=this}},collapse:function(o){for(var s=0;s<this.children.length;++s)this.children[s].collapse(o)},insertInner:function(o,s,u){this.size+=s.length,this.height+=u;for(var c=0;c<this.children.length;++c){var p=this.children[c],h=p.chunkSize();if(o<=h){if(p.insertInner(o,s,u),p.lines&&p.lines.length>50){for(var w=p.lines.length%25+25,C=w;C<p.lines.length;){var E=new Xa(p.lines.slice(C,C+=25));p.height-=E.height,this.children.splice(++c,0,E),E.parent=this}p.lines=p.lines.slice(0,w),this.maybeSpill()}break}o-=h}},maybeSpill:function(){if(!(this.children.length<=10)){var o=this;do{var s=new pa(o.children.splice(o.children.length-5,5));if(o.parent){o.size-=s.size,o.height-=s.height;var u=ve(o.parent.children,o);o.parent.children.splice(u+1,0,s)}else{var c=new pa(o.children);c.parent=o,o.children=[c,s],o=c}s.parent=o.parent}while(o.children.length>10);o.parent.maybeSpill()}},iterN:function(o,s,u){for(var c=0;c<this.children.length;++c){var p=this.children[c],h=p.chunkSize();if(o<h){var w=Math.min(s,h-o);if(p.iterN(o,w,u))return!0;if((s-=w)==0)break;o=0}else o-=h}}};var Qa=function(o,s,u){if(u)for(var c in u)u.hasOwnProperty(c)&&(this[c]=u[c]);this.doc=o,this.node=s};function Ac(o,s,u){Ir(s)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&Tl(o,u)}function jc(o,s,u,c){var p=new Qa(o,u,c),h=o.cm;return h&&p.noHScroll&&(h.display.alignWidgets=!0),Za(o,s,"widget",function(w){var C=w.widgets||(w.widgets=[]);if(p.insertAt==null?C.push(p):C.splice(Math.min(C.length,Math.max(0,p.insertAt)),0,p),p.line=w,h&&!Jr(o,w)){var E=Ir(w)<o.scrollTop;mr(w,w.height+O(p)),E&&Tl(h,p.height),h.curOp.forceUpdate=!0}return!0}),h&&Mn(h,"lineWidgetAdded",h,p,typeof s=="number"?s:cn(s)),p}Qa.prototype.clear=function(){var o=this.doc.cm,s=this.line.widgets,u=this.line,c=cn(u);if(c!=null&&s){for(var p=0;p<s.length;++p)s[p]==this&&s.splice(p--,1);s.length||(u.widgets=null);var h=O(this);mr(u,Math.max(0,u.height-h)),o&&(zr(o,function(){Ac(o,u,-h),vo(o,c,"widget")}),Mn(o,"lineWidgetCleared",o,this,c))}},Qa.prototype.changed=function(){var o=this,s=this.height,u=this.doc.cm,c=this.line;this.height=null;var p=O(this)-s;p&&(Jr(this.doc,c)||mr(c,c.height+p),u&&zr(u,function(){u.curOp.forceUpdate=!0,Ac(u,c,p),Mn(u,"lineWidgetChanged",u,o,cn(c))}))},Qe(Qa);var Mc=0,ss=function(o,s){this.lines=[],this.type=s,this.doc=o,this.id=++Mc};function fa(o,s,u,c,p){if(c&&c.shared)return hf(o,s,u,c,p);if(o.cm&&!o.cm.curOp)return yr(o.cm,fa)(o,s,u,c,p);var h=new ss(o,p),w=M(s,u);if(c&&Ne(c,h,!1),w>0||w==0&&h.clearWhenEmpty!==!1)return h;if(h.replacedWith&&(h.collapsed=!0,h.widgetNode=q("span",[h.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||h.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(h.widgetNode.insertLeft=!0)),h.collapsed){if(jn(o,s.line,s,u,h)||s.line!=u.line&&jn(o,u.line,s,u,h))throw new Error("Inserting collapsed marker partially overlapping an existing one");ws()}h.addToHistory&&Cc(o,{from:s,to:u,origin:"markText"},o.sel,NaN);var C,E=s.line,j=o.cm;if(o.iter(E,u.line+1,function(it){j&&h.collapsed&&!j.options.lineWrapping&&Nr(it)==j.display.maxLine&&(C=!0),h.collapsed&&E!=s.line&&mr(it,0),Ri(it,new Dr(h,E==s.line?s.ch:null,E==u.line?u.ch:null),o.cm&&o.cm.curOp),++E}),h.collapsed&&o.iter(s.line,u.line+1,function(it){Jr(o,it)&&mr(it,0)}),h.clearOnEnter&&ue(h,"beforeCursorEnter",function(){return h.clear()}),h.readOnly&&(mi(),(o.history.done.length||o.history.undone.length)&&o.clearHistory()),h.collapsed&&(h.id=++Mc,h.atomic=!0),j){if(C&&(j.curOp.updateMaxLine=!0),h.collapsed)pr(j,s.line,u.line+1);else if(h.className||h.startStyle||h.endStyle||h.css||h.attributes||h.title)for(var ot=s.line;ot<=u.line;ot++)vo(j,ot,"text");h.atomic&&Vl(j.doc),Mn(j,"markerAdded",j,h)}return h}ss.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,s=o&&!o.curOp;if(s&&ks(o),Se(this,"clear")){var u=this.find();u&&Mn(this,"clear",u.from,u.to)}for(var c=null,p=null,h=0;h<this.lines.length;++h){var w=this.lines[h],C=Uo(w.markedSpans,this);o&&!this.collapsed?vo(o,cn(w),"text"):o&&(C.to!=null&&(p=cn(w)),C.from!=null&&(c=cn(w))),w.markedSpans=vi(w.markedSpans,C),C.from==null&&this.collapsed&&!Jr(this.doc,w)&&o&&mr(w,mo(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(var E=0;E<this.lines.length;++E){var j=Nr(this.lines[E]),ot=ci(j);ot>o.display.maxLineLength&&(o.display.maxLine=j,o.display.maxLineLength=ot,o.display.maxLineChanged=!0)}c!=null&&o&&this.collapsed&&pr(o,c,p+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&Vl(o.doc)),o&&Mn(o,"markerCleared",o,this,c,p),s&&Ps(o),this.parent&&this.parent.clear()}},ss.prototype.find=function(o,s){var u,c;o==null&&this.type=="bookmark"&&(o=1);for(var p=0;p<this.lines.length;++p){var h=this.lines[p],w=Uo(h.markedSpans,this);if(w.from!=null&&(u=ne(s?h:cn(h),w.from),o==-1))return u;if(w.to!=null&&(c=ne(s?h:cn(h),w.to),o==1))return c}return u&&{from:u,to:c}},ss.prototype.changed=function(){var o=this,s=this.find(-1,!0),u=this,c=this.doc.cm;s&&c&&zr(c,function(){var p=s.line,h=cn(s.line),w=Ci(c,h);if(w&&(Cl(w),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!Jr(u.doc,p)&&u.height!=null){var C=u.height;u.height=null;var E=O(u)-C;E&&mr(p,p.height+E)}Mn(c,"markerChanged",c,o)})},ss.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;s.maybeHiddenMarkers&&ve(s.maybeHiddenMarkers,this)!=-1||(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},ss.prototype.detachLine=function(o){if(this.lines.splice(ve(this.lines,o),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Qe(ss);var tl=function(o,s){this.markers=o,this.primary=s;for(var u=0;u<o.length;++u)o[u].parent=this};function hf(o,s,u,c,p){(c=Ne(c)).shared=!1;var h=[fa(o,s,u,c,p)],w=h[0],C=c.widgetNode;return ji(o,function(E){C&&(c.widgetNode=C.cloneNode(!0)),h.push(fa(E,_e(E,s),_e(E,u),c,p));for(var j=0;j<E.linked.length;++j)if(E.linked[j].isParent)return;w=oe(h)}),new tl(h,w)}function Fu(o){return o.findMarks(ne(o.first,0),o.clipPos(ne(o.lastLine())),function(s){return s.parent})}function Ru(o,s){for(var u=0;u<s.length;u++){var c=s[u],p=c.find(),h=o.clipPos(p.from),w=o.clipPos(p.to);if(M(h,w)){var C=fa(o,h,w,c.primary,c.primary.type);c.markers.push(C),C.parent=c}}}function Vu(o){for(var s=function(c){var p=o[c],h=[p.primary.doc];ji(p.primary.doc,function(E){return h.push(E)});for(var w=0;w<p.markers.length;w++){var C=p.markers[w];ve(h,C.doc)==-1&&(C.parent=null,p.markers.splice(w--,1))}},u=0;u<o.length;u++)s(u)}tl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();Mn(this,"clear")}},tl.prototype.find=function(o,s){return this.primary.find(o,s)},Qe(tl);var gf=0,sr=function(o,s,u,c,p){if(!(this instanceof sr))return new sr(o,s,u,c,p);u==null&&(u=0),pa.call(this,[new Xa([new Zr("",null)])]),this.first=u,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=u;var h=ne(u,0);this.sel=os(h),this.history=new Dl(null),this.id=++gf,this.modeOption=s,this.lineSep=c,this.direction=p=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),wc(this,{from:h,to:h,text:o}),_r(this,os(h),xe)};sr.prototype=bn(pa.prototype,{constructor:sr,iter:function(o,s,u){u?this.iterN(o-this.first,s-o,u):this.iterN(this.first,this.first+this.size,o)},insert:function(o,s){for(var u=0,c=0;c<s.length;++c)u+=s[c].height;this.insertInner(o-this.first,s,u)},remove:function(o,s){this.removeInner(o-this.first,s)},getValue:function(o){var s=si(this,this.first,this.first+this.size);return o===!1?s:s.join(o||this.lineSeparator())},setValue:br(function(o){var s=ne(this.first,0),u=this.first+this.size-1;Ls(this,{from:s,to:ne(u,je(this,u).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&Ba(this.cm,0,0),_r(this,os(s),xe)}),replaceRange:function(o,s,u,c){ua(this,o,s=_e(this,s),u=u?_e(this,u):s,c)},getRange:function(o,s,u){var c=gr(this,_e(this,o),_e(this,s));return u===!1?c:u===""?c.join(""):c.join(u||this.lineSeparator())},getLine:function(o){var s=this.getLineHandle(o);return s&&s.text},getLineHandle:function(o){if(Po(this,o))return je(this,o)},getLineNumber:function(o){return cn(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=je(this,o)),Nr(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return _e(this,o)},getCursor:function(o){var s=this.sel.primary();return o==null||o=="head"?s.head:o=="anchor"?s.anchor:o=="end"||o=="to"||o===!1?s.to():s.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:br(function(o,s,u){Tc(this,_e(this,typeof o=="number"?ne(o,s||0):o),null,u)}),setSelection:br(function(o,s,u){Tc(this,_e(this,o),_e(this,s||o),u)}),extendSelection:br(function(o,s,u){Il(this,_e(this,o),s&&_e(this,s),u)}),extendSelections:br(function(o,s){Au(this,In(this,o),s)}),extendSelectionsBy:br(function(o,s){Au(this,In(this,He(this.sel.ranges,o)),s)}),setSelections:br(function(o,s,u){if(o.length){for(var c=[],p=0;p<o.length;p++)c[p]=new mn(_e(this,o[p].anchor),_e(this,o[p].head||o[p].anchor));s==null&&(s=Math.min(o.length-1,this.sel.primIndex)),_r(this,Io(this.cm,c,s),u)}}),addSelection:br(function(o,s,u){var c=this.sel.ranges.slice(0);c.push(new mn(_e(this,o),_e(this,s||o))),_r(this,Io(this.cm,c,c.length-1),u)}),getSelection:function(o){for(var s,u=this.sel.ranges,c=0;c<u.length;c++){var p=gr(this,u[c].from(),u[c].to());s=s?s.concat(p):p}return o===!1?s:s.join(o||this.lineSeparator())},getSelections:function(o){for(var s=[],u=this.sel.ranges,c=0;c<u.length;c++){var p=gr(this,u[c].from(),u[c].to());o!==!1&&(p=p.join(o||this.lineSeparator())),s[c]=p}return s},replaceSelection:function(o,s,u){for(var c=[],p=0;p<this.sel.ranges.length;p++)c[p]=o;this.replaceSelections(c,s,u||"+input")},replaceSelections:br(function(o,s,u){for(var c=[],p=this.sel,h=0;h<p.ranges.length;h++){var w=p.ranges[h];c[h]={from:w.from(),to:w.to(),text:this.splitLines(o[h]),origin:u}}for(var C=s&&s!="end"&&is(this,c,s),E=c.length-1;E>=0;E--)Ls(this,c[E]);C?Ec(this,C):this.cm&&ra(this.cm)}),undo:br(function(){Hl(this,"undo")}),redo:br(function(){Hl(this,"redo")}),undoSelection:br(function(){Hl(this,"undo",!0)}),redoSelection:br(function(){Hl(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,s=0,u=0,c=0;c<o.done.length;c++)o.done[c].ranges||++s;for(var p=0;p<o.undone.length;p++)o.undone[p].ranges||++u;return{undo:s,redo:u}},clearHistory:function(){var o=this;this.history=new Dl(this.history),ji(this,function(s){return s.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:aa(this.history.done),undone:aa(this.history.undone)}},setHistory:function(o){var s=this.history=new Dl(this.history);s.done=aa(o.done.slice(0),null,!0),s.undone=aa(o.undone.slice(0),null,!0)},setGutterMarker:br(function(o,s,u){return Za(this,o,"gutter",function(c){var p=c.gutterMarkers||(c.gutterMarkers={});return p[s]=u,!u&&_(p)&&(c.gutterMarkers=null),!0})}),clearGutter:br(function(o){var s=this;this.iter(function(u){u.gutterMarkers&&u.gutterMarkers[o]&&Za(s,u,"gutter",function(){return u.gutterMarkers[o]=null,_(u.gutterMarkers)&&(u.gutterMarkers=null),!0})})}),lineInfo:function(o){var s;if(typeof o=="number"){if(!Po(this,o)||(s=o,!(o=je(this,o))))return null}else if((s=cn(o))==null)return null;return{line:s,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:br(function(o,s,u){return Za(this,o,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(c[p]){if(H(u).test(c[p]))return!1;c[p]+=" "+u}else c[p]=u;return!0})}),removeLineClass:br(function(o,s,u){return Za(this,o,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",h=c[p];if(!h)return!1;if(u==null)c[p]=null;else{var w=h.match(H(u));if(!w)return!1;var C=w.index+w[0].length;c[p]=h.slice(0,w.index)+(w.index&&C!=h.length?" ":"")+h.slice(C)||null}return!0})}),addLineWidget:br(function(o,s,u){return jc(this,o,s,u)}),removeLineWidget:function(o){o.clear()},markText:function(o,s,u){return fa(this,_e(this,o),_e(this,s),u,u&&u.type||"range")},setBookmark:function(o,s){var u={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return fa(this,o=_e(this,o),o,u,"bookmark")},findMarksAt:function(o){var s=[],u=je(this,(o=_e(this,o)).line).markedSpans;if(u)for(var c=0;c<u.length;++c){var p=u[c];(p.from==null||p.from<=o.ch)&&(p.to==null||p.to>=o.ch)&&s.push(p.marker.parent||p.marker)}return s},findMarks:function(o,s,u){o=_e(this,o),s=_e(this,s);var c=[],p=o.line;return this.iter(o.line,s.line+1,function(h){var w=h.markedSpans;if(w)for(var C=0;C<w.length;C++){var E=w[C];E.to!=null&&p==o.line&&o.ch>=E.to||E.from==null&&p!=o.line||E.from!=null&&p==s.line&&E.from>=s.ch||u&&!u(E.marker)||c.push(E.marker.parent||E.marker)}++p}),c},getAllMarks:function(){var o=[];return this.iter(function(s){var u=s.markedSpans;if(u)for(var c=0;c<u.length;++c)u[c].from!=null&&o.push(u[c].marker)}),o},posFromIndex:function(o){var s,u=this.first,c=this.lineSeparator().length;return this.iter(function(p){var h=p.text.length+c;if(h>o)return s=o,!0;o-=h,++u}),_e(this,ne(u,s))},indexFromPos:function(o){var s=(o=_e(this,o)).ch;if(o.line<this.first||o.ch<0)return 0;var u=this.lineSeparator().length;return this.iter(this.first,o.line,function(c){s+=c.text.length+u}),s},copy:function(o){var s=new sr(si(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,o&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(o){o||(o={});var s=this.first,u=this.first+this.size;o.from!=null&&o.from>s&&(s=o.from),o.to!=null&&o.to<u&&(u=o.to);var c=new sr(si(this,s,u),o.mode||this.modeOption,s,this.lineSep,this.direction);return o.sharedHist&&(c.history=this.history),(this.linked||(this.linked=[])).push({doc:c,sharedHist:o.sharedHist}),c.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],Ru(c,Fu(this)),c},unlinkDoc:function(o){if(o instanceof Fn&&(o=o.doc),this.linked){for(var s=0;s<this.linked.length;++s)if(this.linked[s].doc==o){this.linked.splice(s,1),o.unlinkDoc(this),Vu(Fu(this));break}}if(o.history==this.history){var u=[o.id];ji(o,function(c){return u.push(c.id)},!0),o.history=new Dl(null),o.history.done=aa(this.history.done,u),o.history.undone=aa(this.history.undone,u)}},iterLinkedDocs:function(o){ji(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):Ho(o)},lineSeparator:function(){return this.lineSep||`
`},setDirection:br(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(s){return s.order=null}),this.cm&&lf(this.cm))})}),sr.prototype.eachLine=sr.prototype.iter;var Hu=0;function mf(o){var s=this;if(zu(s),!Lt(s,o)&&!V(s.display,o)){sn(o),G&&(Hu=+new Date);var u=Ti(s,o,!0),c=o.dataTransfer.files;if(u&&!s.isReadOnly())if(c&&c.length&&window.FileReader&&window.File)for(var p=c.length,h=Array(p),w=0,C=function(){++w==p&&yr(s,function(){var kt={from:u=_e(s.doc,u),to:u,text:s.doc.splitLines(h.filter(function(Ft){return Ft!=null}).join(s.doc.lineSeparator())),origin:"paste"};Ls(s.doc,kt),Ec(s.doc,os(_e(s.doc,u),_e(s.doc,Jo(kt))))})()},E=function(kt,Ft){if(s.options.allowDropFileTypes&&ve(s.options.allowDropFileTypes,kt.type)==-1)C();else{var Qt=new FileReader;Qt.onerror=function(){return C()},Qt.onload=function(){var se=Qt.result;/[\x00-\x08\x0e-\x1f]{2}/.test(se)||(h[Ft]=se),C()},Qt.readAsText(kt)}},j=0;j<c.length;j++)E(c[j],j);else{if(s.state.draggingText&&s.doc.sel.contains(u)>-1)return s.state.draggingText(o),void setTimeout(function(){return s.display.input.focus()},20);try{var ot=o.dataTransfer.getData("Text");if(ot){var it;if(s.state.draggingText&&!s.state.draggingText.copy&&(it=s.listSelections()),Rl(s.doc,os(u,u)),it)for(var Et=0;Et<it.length;++Et)ua(s.doc,"",it[Et].anchor,it[Et].head,"drag");s.replaceSelection(ot,"around","paste"),s.display.input.focus()}}catch{}}}}function Bu(o,s){if(G&&(!o.state.draggingText||+new Date-Hu<100))Ze(s);else if(!Lt(o,s)&&!V(o.display,s)&&(s.dataTransfer.setData("Text",o.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!bt)){var u=Tt("img",null,null,"position: fixed; left: 0; top: 0;");u.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",dt&&(u.width=u.height=1,o.display.wrapper.appendChild(u),u._top=u.offsetTop),s.dataTransfer.setDragImage(u,0,0),dt&&u.parentNode.removeChild(u)}}function vf(o,s){var u=Ti(o,s);if(u){var c=document.createDocumentFragment();ht(o,u,c),o.display.dragCursor||(o.display.dragCursor=Tt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),ct(o.display.dragCursor,c)}}function zu(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function Lc(o){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),u=[],c=0;c<s.length;c++){var p=s[c].CodeMirror;p&&u.push(p)}u.length&&u[0].operation(function(){for(var h=0;h<u.length;h++)o(u[h])})}}var Uu=!1;function Yn(){Uu||($u(),Uu=!0)}function $u(){var o;ue(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,Lc(Dc)},100))}),ue(window,"blur",function(){return Lc(Yo)})}function Dc(o){var s=o.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,o.setSize()}for(var Fo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ds=0;Ds<10;Ds++)Fo[Ds+48]=Fo[Ds+96]=String(Ds);for(var Bl=65;Bl<=90;Bl++)Fo[Bl]=String.fromCharCode(Bl);for(var da=1;da<=12;da++)Fo[da+111]=Fo[da+63235]="F"+da;var Zo={};function Wu(o){var s,u,c,p,h=o.split(/-(?!$)/);o=h[h.length-1];for(var w=0;w<h.length-1;w++){var C=h[w];if(/^(cmd|meta|m)$/i.test(C))p=!0;else if(/^a(lt)?$/i.test(C))s=!0;else if(/^(c|ctrl|control)$/i.test(C))u=!0;else{if(!/^s(hift)?$/i.test(C))throw new Error("Unrecognized modifier name: "+C);c=!0}}return s&&(o="Alt-"+o),u&&(o="Ctrl-"+o),p&&(o="Cmd-"+o),c&&(o="Shift-"+o),o}function zl(o){var s={};for(var u in o)if(o.hasOwnProperty(u)){var c=o[u];if(/^(name|fallthrough|(de|at)tach)$/.test(u))continue;if(c=="..."){delete o[u];continue}for(var p=He(u.split(" "),Wu),h=0;h<p.length;h++){var w=void 0,C=void 0;h==p.length-1?(C=p.join(" "),w=c):(C=p.slice(0,h+1).join(" "),w="...");var E=s[C];if(E){if(E!=w)throw new Error("Inconsistent bindings for "+C)}else s[C]=w}delete o[u]}for(var j in s)o[j]=s[j];return o}function Ns(o,s,u,c){var p=(s=Mi(s)).call?s.call(o,c):s[o];if(p===!1)return"nothing";if(p==="...")return"multi";if(p!=null&&u(p))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return Ns(o,s.fallthrough,u,c);for(var h=0;h<s.fallthrough.length;h++){var w=Ns(o,s.fallthrough[h],u,c);if(w)return w}}}function Nc(o){var s=typeof o=="string"?o:Fo[o.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function qu(o,s,u){var c=o;return s.altKey&&c!="Alt"&&(o="Alt-"+o),(Y?s.metaKey:s.ctrlKey)&&c!="Ctrl"&&(o="Ctrl-"+o),(Y?s.ctrlKey:s.metaKey)&&c!="Mod"&&(o="Cmd-"+o),!u&&s.shiftKey&&c!="Shift"&&(o="Shift-"+o),o}function Gu(o,s){if(dt&&o.keyCode==34&&o.char)return!1;var u=Fo[o.keyCode];return u!=null&&!o.altGraphKey&&(o.keyCode==3&&o.code&&(u=o.code),qu(u,o,s))}function Mi(o){return typeof o=="string"?Zo[o]:o}function as(o,s){for(var u=o.doc.sel.ranges,c=[],p=0;p<u.length;p++){for(var h=s(u[p]);c.length&&M(h.from,oe(c).to)<=0;){var w=c.pop();if(M(w.from,h.from)<0){h.from=w.from;break}}c.push(h)}zr(o,function(){for(var C=c.length-1;C>=0;C--)ua(o.doc,"",c[C].from,c[C].to,"+delete");ra(o)})}function el(o,s,u){var c=wt(o.text,s+u,u);return c<0||c>o.text.length?null:c}function Ul(o,s,u){var c=el(o,s.ch,u);return c==null?null:new ne(s.line,c,u<0?"after":"before")}function $l(o,s,u,c,p){if(o){s.doc.direction=="rtl"&&(p=-p);var h=Ye(u,s.doc.direction);if(h){var w,C=p<0?oe(h):h[0],E=p<0==(C.level==1)?"after":"before";if(C.level>0||s.doc.direction=="rtl"){var j=qo(s,u);w=p<0?u.text.length-1:0;var ot=Xr(s,j,w).top;w=Nt(function(it){return Xr(s,j,it).top==ot},p<0==(C.level==1)?C.from:C.to-1,w),E=="before"&&(w=el(u,w,1))}else w=p<0?C.to:C.from;return new ne(c,w,E)}}return new ne(c,p<0?u.text.length:0,p<0?"before":"after")}function Ku(o,s,u,c){var p=Ye(s,o.doc.direction);if(!p)return Ul(s,u,c);u.ch>=s.text.length?(u.ch=s.text.length,u.sticky="before"):u.ch<=0&&(u.ch=0,u.sticky="after");var h=ke(p,u.ch,u.sticky),w=p[h];if(o.doc.direction=="ltr"&&w.level%2==0&&(c>0?w.to>u.ch:w.from<u.ch))return Ul(s,u,c);var C,E=function(be,Te){return el(s,be instanceof ne?be.ch:be,Te)},j=function(be){return o.options.lineWrapping?(C=C||qo(o,s),Na(o,s,C,be)):{begin:0,end:s.text.length}},ot=j(u.sticky=="before"?E(u,-1):u.ch);if(o.doc.direction=="rtl"||w.level==1){var it=w.level==1==c<0,Et=E(u,it?1:-1);if(Et!=null&&(it?Et<=w.to&&Et<=ot.end:Et>=w.from&&Et>=ot.begin)){var kt=it?"before":"after";return new ne(u.line,Et,kt)}}var Ft=function(be,Te,ge){for(var De=function(En,Qr){return Qr?new ne(u.line,E(En,1),"before"):new ne(u.line,En,"after")};be>=0&&be<p.length;be+=Te){var Me=p[be],Be=Te>0==(Me.level!=1),Tn=Be?ge.begin:E(ge.end,-1);if(Me.from<=Tn&&Tn<Me.to||(Tn=Be?Me.from:E(Me.to,-1),ge.begin<=Tn&&Tn<ge.end))return De(Tn,Be)}},Qt=Ft(h+c,c,ot);if(Qt)return Qt;var se=c>0?ot.end:E(ot.begin,-1);return se==null||c>0&&se==s.text.length||!(Qt=Ft(c>0?0:p.length-1,c,j(se)))?null:Qt}Zo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Zo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Zo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Zo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Zo.default=_t?Zo.macDefault:Zo.pcDefault;var ha={selectAll:Mu,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),xe)},killLine:function(o){return as(o,function(s){if(s.empty()){var u=je(o.doc,s.head.line).text.length;return s.head.ch==u&&s.head.line<o.lastLine()?{from:s.head,to:ne(s.head.line+1,0)}:{from:s.head,to:ne(s.head.line,u)}}return{from:s.from(),to:s.to()}})},deleteLine:function(o){return as(o,function(s){return{from:ne(s.from().line,0),to:_e(o.doc,ne(s.to().line+1,0))}})},delLineLeft:function(o){return as(o,function(s){return{from:ne(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(o){return as(o,function(s){var u=o.charCoords(s.head,"div").top+5;return{from:o.coordsChar({left:0,top:u},"div"),to:s.from()}})},delWrappedLineRight:function(o){return as(o,function(s){var u=o.charCoords(s.head,"div").top+5,c=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div");return{from:s.from(),to:c}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection(ne(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection(ne(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(s){return nl(o,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(s){return Ju(o,s.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(s){return Yu(o,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div")},ie)},goLineLeft:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5;return o.coordsChar({left:0,top:u},"div")},ie)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(s){var u=o.cursorCoords(s.head,"div").top+5,c=o.coordsChar({left:0,top:u},"div");return c.ch<o.getLine(c.line).search(/\S/)?Ju(o,s.head):c},ie)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var s=[],u=o.listSelections(),c=o.options.tabSize,p=0;p<u.length;p++){var h=u[p].from(),w=Ce(o.getLine(h.line),h.ch,c);s.push(fe(c-w%c))}o.replaceSelections(s)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return zr(o,function(){for(var s=o.listSelections(),u=[],c=0;c<s.length;c++)if(s[c].empty()){var p=s[c].head,h=je(o.doc,p.line).text;if(h){if(p.ch==h.length&&(p=new ne(p.line,p.ch-1)),p.ch>0)p=new ne(p.line,p.ch+1),o.replaceRange(h.charAt(p.ch-1)+h.charAt(p.ch-2),ne(p.line,p.ch-2),p,"+transpose");else if(p.line>o.doc.first){var w=je(o.doc,p.line-1).text;w&&(p=new ne(p.line,1),o.replaceRange(h.charAt(0)+o.doc.lineSeparator()+w.charAt(w.length-1),ne(p.line-1,w.length-1),p,"+transpose"))}}u.push(new mn(p,p))}o.setSelections(u)})},newlineAndIndent:function(o){return zr(o,function(){for(var s=o.listSelections(),u=s.length-1;u>=0;u--)o.replaceRange(o.doc.lineSeparator(),s[u].anchor,s[u].head,"+input");s=o.listSelections();for(var c=0;c<s.length;c++)o.indentLine(s[c].from().line,null,!0);ra(o)})},openLine:function(o){return o.replaceSelection(`
`,"start")},toggleOverwrite:function(o){return o.toggleOverwrite()}};function nl(o,s){var u=je(o.doc,s),c=Nr(u);return c!=u&&(s=cn(c)),$l(!0,o,c,s,1)}function Yu(o,s){var u=je(o.doc,s),c=zi(u);return c!=u&&(s=cn(c)),$l(!0,o,u,s,-1)}function Ju(o,s){var u=nl(o,s.line),c=je(o.doc,u.line),p=Ye(c,o.doc.direction);if(!p||p[0].level==0){var h=Math.max(u.ch,c.text.search(/\S/)),w=s.line==u.line&&s.ch<=h&&s.ch;return ne(u.line,w?0:h,u.sticky)}return u}function Wl(o,s,u){if(typeof s=="string"&&!(s=ha[s]))return!1;o.display.input.ensurePolled();var c=o.display.shift,p=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),u&&(o.display.shift=!1),p=s(o)!=we}finally{o.display.shift=c,o.state.suppressEdits=!1}return p}function yf(o,s,u){for(var c=0;c<o.state.keyMaps.length;c++){var p=Ns(s,o.state.keyMaps[c],u,o);if(p)return p}return o.options.extraKeys&&Ns(s,o.options.extraKeys,u,o)||Ns(s,o.options.keyMap,u,o)}var bf=new Ve;function rl(o,s,u,c){var p=o.state.keySeq;if(p){if(Nc(s))return"handled";if(/\'$/.test(s)?o.state.keySeq=null:bf.set(50,function(){o.state.keySeq==p&&(o.state.keySeq=null,o.display.input.reset())}),ga(o,p+" "+s,u,c))return!0}return ga(o,s,u,c)}function ga(o,s,u,c){var p=yf(o,s,c);return p=="multi"&&(o.state.keySeq=s),p=="handled"&&Mn(o,"keyHandled",o,s,u),p!="handled"&&p!="multi"||(sn(u),hn(o)),!!p}function Ic(o,s){var u=Gu(s,!0);return!!u&&(s.shiftKey&&!o.state.keySeq?rl(o,"Shift-"+u,s,function(c){return Wl(o,c,!0)})||rl(o,u,s,function(c){if(typeof c=="string"?/^go[A-Z]/.test(c):c.motion)return Wl(o,c)}):rl(o,u,s,function(c){return Wl(o,c)}))}function Li(o,s,u){return rl(o,"'"+u+"'",s,function(c){return Wl(o,c,!0)})}var Fc=null;function Rc(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField()||(s.curOp.focus=Ht(),Lt(s,o)))){G&&S<11&&o.keyCode==27&&(o.returnValue=!1);var u=o.keyCode;s.display.shift=u==16||o.shiftKey;var c=Ic(s,o);dt&&(Fc=c?u:null,c||u!=88||Bo||!(_t?o.metaKey:o.ctrlKey)||s.replaceSelection("",null,"cut")),K&&!_t&&!c&&u==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),u!=18||/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)||Zu(s)}}function Zu(o){var s=o.display.lineDiv;function u(c){c.keyCode!=18&&c.altKey||(at(s,"CodeMirror-crosshair"),vt(document,"keyup",u),vt(document,"mouseover",u))}ae(s,"CodeMirror-crosshair"),ue(document,"keyup",u),ue(document,"mouseover",u)}function Xu(o){o.keyCode==16&&(this.doc.sel.shift=!1),Lt(this,o)}function Qu(o){var s=this;if(!(o.target&&o.target!=s.display.input.getField()||V(s.display,o)||Lt(s,o)||o.ctrlKey&&!o.altKey||_t&&o.metaKey)){var u=o.keyCode,c=o.charCode;if(dt&&u==Fc)return Fc=null,void sn(o);if(!dt||o.which&&!(o.which<10)||!Ic(s,o)){var p=String.fromCharCode(c??u);p!="\b"&&(Li(s,o,p)||s.display.input.onKeyPress(o))}}}var ol,il,wf=400,ql=function(o,s,u){this.time=o,this.pos=s,this.button=u};function Gl(o,s){var u=+new Date;return il&&il.compare(u,o,s)?(ol=il=null,"triple"):ol&&ol.compare(u,o,s)?(il=new ql(u,o,s),ol=null,"double"):(ol=new ql(u,o,s),il=null,"single")}function tp(o){var s=this,u=s.display;if(!(Lt(s,o)||u.activeTouch&&u.input.supportsTouch())){if(u.input.ensurePolled(),u.shift=o.shiftKey,V(u,o))T||(u.scroller.draggable=!1,setTimeout(function(){return u.scroller.draggable=!0},100));else if(!Hc(s,o)){var c=Ti(s,o),p=lr(o),h=c?Gl(c,p):"single";window.focus(),p==1&&s.state.selectingText&&s.state.selectingText(o),c&&ep(s,p,c,h,o)||(p==1?c?_f(s,c,h,o):$r(o)==u.scroller&&sn(o):p==2?(c&&Il(s.doc,c),setTimeout(function(){return u.input.focus()},20)):p==3&&(k?s.display.input.onContextMenu(o):vr(s)))}}}function ep(o,s,u,c,p){var h="Click";return c=="double"?h="Double"+h:c=="triple"&&(h="Triple"+h),rl(o,qu(h=(s==1?"Left":s==2?"Middle":"Right")+h,p),p,function(w){if(typeof w=="string"&&(w=ha[w]),!w)return!1;var C=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),C=w(o,u)!=we}finally{o.state.suppressEdits=!1}return C})}function np(o,s,u){var c=o.getOption("configureMouse"),p=c?c(o,s,u):{};if(p.unit==null){var h=Wt?u.shiftKey&&u.metaKey:u.altKey;p.unit=h?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(p.extend==null||o.doc.extend)&&(p.extend=o.doc.extend||u.shiftKey),p.addNew==null&&(p.addNew=_t?u.metaKey:u.ctrlKey),p.moveOnDrag==null&&(p.moveOnDrag=!(_t?u.altKey:u.ctrlKey)),p}function _f(o,s,u,c){G?setTimeout(Ee(Br,o),0):o.curOp.focus=Ht();var p,h=np(o,u,c),w=o.doc.sel;o.options.dragDrop&&Ln&&!o.isReadOnly()&&u=="single"&&(p=w.contains(s))>-1&&(M((p=w.ranges[p]).from(),s)<0||s.xRel>0)&&(M(p.to(),s)>0||s.xRel<0)?Cf(o,c,s,h):sl(o,c,s,h)}function Cf(o,s,u,c){var p=o.display,h=!1,w=yr(o,function(j){T&&(p.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:vr(o)),vt(p.wrapper.ownerDocument,"mouseup",w),vt(p.wrapper.ownerDocument,"mousemove",C),vt(p.scroller,"dragstart",E),vt(p.scroller,"drop",w),h||(sn(j),c.addNew||Il(o.doc,u,null,null,c.extend),T&&!bt||G&&S==9?setTimeout(function(){p.wrapper.ownerDocument.body.focus({preventScroll:!0}),p.input.focus()},20):p.input.focus())}),C=function(j){h=h||Math.abs(s.clientX-j.clientX)+Math.abs(s.clientY-j.clientY)>=10},E=function(){return h=!0};T&&(p.scroller.draggable=!0),o.state.draggingText=w,w.copy=!c.moveOnDrag,ue(p.wrapper.ownerDocument,"mouseup",w),ue(p.wrapper.ownerDocument,"mousemove",C),ue(p.scroller,"dragstart",E),ue(p.scroller,"drop",w),o.state.delayingBlurEvent=!0,setTimeout(function(){return p.input.focus()},20),p.scroller.dragDrop&&p.scroller.dragDrop()}function rp(o,s,u){if(u=="char")return new mn(s,s);if(u=="word")return o.findWordAt(s);if(u=="line")return new mn(ne(s.line,0),_e(o.doc,ne(s.line+1,0)));var c=u(o,s);return new mn(c.from,c.to)}function sl(o,s,u,c){G&&vr(o);var p=o.display,h=o.doc;sn(s);var w,C,E=h.sel,j=E.ranges;if(c.addNew&&!c.extend?(C=h.sel.contains(u),w=C>-1?j[C]:new mn(u,u)):(w=h.sel.primary(),C=h.sel.primIndex),c.unit=="rectangle")c.addNew||(w=new mn(u,u)),u=Ti(o,s,!0,!0),C=-1;else{var ot=rp(o,u,c.unit);w=c.extend?js(w,ot.anchor,ot.head,c.extend):ot}c.addNew?C==-1?(C=j.length,_r(h,Io(o,j.concat([w]),C),{scroll:!1,origin:"*mouse"})):j.length>1&&j[C].empty()&&c.unit=="char"&&!c.extend?(_r(h,Io(o,j.slice(0,C).concat(j.slice(C+1)),0),{scroll:!1,origin:"*mouse"}),E=h.sel):Fl(h,C,w,ft):(C=0,_r(h,new bo([w],0),ft),E=h.sel);var it=u;function Et(ge){if(M(it,ge)!=0)if(it=ge,c.unit=="rectangle"){for(var De=[],Me=o.options.tabSize,Be=Ce(je(h,u.line).text,u.ch,Me),Tn=Ce(je(h,ge.line).text,ge.ch,Me),En=Math.min(Be,Tn),Qr=Math.max(Be,Tn),Dn=Math.min(u.line,ge.line),kr=Math.min(o.lastLine(),Math.max(u.line,ge.line));Dn<=kr;Dn++){var to=je(h,Dn).text,Bn=re(to,En,Me);En==Qr?De.push(new mn(ne(Dn,Bn),ne(Dn,Bn))):to.length>Bn&&De.push(new mn(ne(Dn,Bn),ne(Dn,re(to,Qr,Me))))}De.length||De.push(new mn(u,u)),_r(h,Io(o,E.ranges.slice(0,C).concat(De),C),{origin:"*mouse",scroll:!1}),o.scrollIntoView(ge)}else{var Qn,Ur=w,ar=rp(o,ge,c.unit),tr=Ur.anchor;M(ar.anchor,tr)>0?(Qn=ar.head,tr=Oe(Ur.from(),ar.anchor)):(Qn=ar.anchor,tr=me(Ur.to(),ar.head));var er=E.ranges.slice(0);er[C]=Kl(o,new mn(_e(h,tr),Qn)),_r(h,Io(o,er,C),ft)}}var kt=p.wrapper.getBoundingClientRect(),Ft=0;function Qt(ge){var De=++Ft,Me=Ti(o,ge,!0,c.unit=="rectangle");if(Me)if(M(Me,it)!=0){o.curOp.focus=Ht(),Et(Me);var Be=Ha(p,h);(Me.line>=Be.to||Me.line<Be.from)&&setTimeout(yr(o,function(){Ft==De&&Qt(ge)}),150)}else{var Tn=ge.clientY<kt.top?-20:ge.clientY>kt.bottom?20:0;Tn&&setTimeout(yr(o,function(){Ft==De&&(p.scroller.scrollTop+=Tn,Qt(ge))}),50)}}function se(ge){o.state.selectingText=!1,Ft=1/0,ge&&(sn(ge),p.input.focus()),vt(p.wrapper.ownerDocument,"mousemove",be),vt(p.wrapper.ownerDocument,"mouseup",Te),h.history.lastSelOrigin=null}var be=yr(o,function(ge){ge.buttons!==0&&lr(ge)?Qt(ge):se(ge)}),Te=yr(o,se);o.state.selectingText=Te,ue(p.wrapper.ownerDocument,"mousemove",be),ue(p.wrapper.ownerDocument,"mouseup",Te)}function Kl(o,s){var u=s.anchor,c=s.head,p=je(o.doc,u.line);if(M(u,c)==0&&u.sticky==c.sticky)return s;var h=Ye(p);if(!h)return s;var w=ke(h,u.ch,u.sticky),C=h[w];if(C.from!=u.ch&&C.to!=u.ch)return s;var E,j=w+(C.from==u.ch==(C.level!=1)?0:1);if(j==0||j==h.length)return s;if(c.line!=u.line)E=(c.line-u.line)*(o.doc.direction=="ltr"?1:-1)>0;else{var ot=ke(h,c.ch,c.sticky),it=ot-w||(c.ch-u.ch)*(C.level==1?-1:1);E=ot==j-1||ot==j?it<0:it>0}var Et=h[j+(E?-1:0)],kt=E==(Et.level==1),Ft=kt?Et.from:Et.to,Qt=kt?"after":"before";return u.ch==Ft&&u.sticky==Qt?s:new mn(new ne(u.line,Ft,Qt),c)}function Vc(o,s,u,c){var p,h;if(s.touches)p=s.touches[0].clientX,h=s.touches[0].clientY;else try{p=s.clientX,h=s.clientY}catch{return!1}if(p>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;c&&sn(s);var w=o.display,C=w.lineDiv.getBoundingClientRect();if(h>C.bottom||!Se(o,u))return Sn(s);h-=C.top-w.viewOffset;for(var E=0;E<o.display.gutterSpecs.length;++E){var j=w.gutters.childNodes[E];if(j&&j.getBoundingClientRect().right>=p)return St(o,u,o,Gn(o.doc,h),o.display.gutterSpecs[E].className,s),Sn(s)}}function Hc(o,s){return Vc(o,s,"gutterClick",!0)}function op(o,s){V(o.display,s)||xf(o,s)||Lt(o,s,"contextmenu")||k||o.display.input.onContextMenu(s)}function xf(o,s){return!!Se(o,"gutterContextMenu")&&Vc(o,s,"gutterContextMenu",!1)}function Bc(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),es(o)}ql.prototype.compare=function(o,s,u){return this.time+wf>o&&M(s,this.pos)==0&&u==this.button};var ma={toString:function(){return"CodeMirror.Init"}},ip={},va={};function sp(o){var s=o.optionHandlers;function u(c,p,h,w){o.defaults[c]=p,h&&(s[c]=w?function(C,E,j){j!=ma&&h(C,E,j)}:h)}o.defineOption=u,o.Init=ma,u("value","",function(c,p){return c.setValue(p)},!0),u("mode",null,function(c,p){c.doc.modeOption=p,Ml(c)},!0),u("indentUnit",2,Ml,!0),u("indentWithTabs",!1),u("smartIndent",!0),u("tabSize",4,function(c){Ai(c),es(c),pr(c)},!0),u("lineSeparator",null,function(c,p){if(c.doc.lineSep=p,p){var h=[],w=c.doc.first;c.doc.iter(function(E){for(var j=0;;){var ot=E.text.indexOf(p,j);if(ot==-1)break;j=ot+p.length,h.push(ne(w,ot))}w++});for(var C=h.length-1;C>=0;C--)ua(c.doc,p,h[C],ne(h[C].line,h[C].ch+p.length))}}),u("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(c,p,h){c.state.specialChars=new RegExp(p.source+(p.test("	")?"":"|	"),"g"),h!=ma&&c.refresh()}),u("specialCharPlaceholder",Ks,function(c){return c.refresh()},!0),u("electricChars",!0),u("inputStyle",Ct?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),u("spellcheck",!1,function(c,p){return c.getInputField().spellcheck=p},!0),u("autocorrect",!1,function(c,p){return c.getInputField().autocorrect=p},!0),u("autocapitalize",!1,function(c,p){return c.getInputField().autocapitalize=p},!0),u("rtlMoveVisually",!Jt),u("wholeLineUpdateBefore",!0),u("theme","default",function(c){Bc(c),sa(c)},!0),u("keyMap","default",function(c,p,h){var w=Mi(p),C=h!=ma&&Mi(h);C&&C.detach&&C.detach(c,w),w.attach&&w.attach(c,C||null)}),u("extraKeys",null),u("configureMouse",null),u("lineWrapping",!1,Of,!0),u("gutters",[],function(c,p){c.display.gutterSpecs=Pl(p,c.options.lineNumbers),sa(c)},!0),u("fixedGutter",!0,function(c,p){c.display.gutters.style.left=p?co(c.display)+"px":"0",c.refresh()},!0),u("coverGutterNextToScrollbar",!1,function(c){return oa(c)},!0),u("scrollbarStyle","native",function(c){vu(c),oa(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),u("lineNumbers",!1,function(c,p){c.display.gutterSpecs=Pl(c.options.gutters,p),sa(c)},!0),u("firstLineNumber",1,sa,!0),u("lineNumberFormatter",function(c){return c},sa,!0),u("showCursorWhenSelecting",!1,b,!0),u("resetSelectionOnContextMenu",!0),u("lineWiseCopyCut",!0),u("pasteLinesPerSelection",!0),u("selectionsMayTouch",!1),u("readOnly",!1,function(c,p){p=="nocursor"&&(Yo(c),c.display.input.blur()),c.display.input.readOnlyChanged(p)}),u("screenReaderLabel",null,function(c,p){p=p===""?null:p,c.display.input.screenReaderLabelChanged(p)}),u("disableInput",!1,function(c,p){p||c.display.input.reset()},!0),u("dragDrop",!0,Sf),u("allowDropFileTypes",null),u("cursorBlinkRate",530),u("cursorScrollMargin",0),u("cursorHeight",1,b,!0),u("singleCursorHeightPerLine",!0,b,!0),u("workTime",100),u("workDelay",100),u("flattenSpans",!0,Ai,!0),u("addModeClass",!1,Ai,!0),u("pollInterval",100),u("undoDepth",200,function(c,p){return c.doc.history.undoDepth=p}),u("historyEventDelay",1250),u("viewportMargin",10,function(c){return c.refresh()},!0),u("maxHighlightLength",1e4,Ai,!0),u("moveInputWithCursor",!0,function(c,p){p||c.display.input.resetPosition()}),u("tabindex",null,function(c,p){return c.display.input.getField().tabIndex=p||""}),u("autofocus",null),u("direction","ltr",function(c,p){return c.doc.setDirection(p)},!0),u("phrases",null)}function Sf(o,s,u){if(!s!=!(u&&u!=ma)){var c=o.display.dragFunctions,p=s?ue:vt;p(o.display.scroller,"dragstart",c.start),p(o.display.scroller,"dragenter",c.enter),p(o.display.scroller,"dragover",c.over),p(o.display.scroller,"dragleave",c.leave),p(o.display.scroller,"drop",c.drop)}}function Of(o){o.options.lineWrapping?(ae(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(at(o.display.wrapper,"CodeMirror-wrap"),bi(o)),Ra(o),pr(o),es(o),setTimeout(function(){return oa(o)},100)}function Fn(o,s){var u=this;if(!(this instanceof Fn))return new Fn(o,s);this.options=s=s?Ne(s):{},Ne(ip,s,!1);var c=s.value;typeof c=="string"?c=new sr(c,s.mode,null,s.lineSeparator,s.direction):s.mode&&(c.modeOption=s.mode),this.doc=c;var p=new Fn.inputStyles[s.inputStyle](this),h=this.display=new Cu(o,c,p,s);for(var w in h.wrapper.CodeMirror=this,Bc(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),vu(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ve,keySeq:null,specialChars:null},s.autofocus&&!Ct&&h.input.focus(),G&&S<11&&setTimeout(function(){return u.display.input.reset(!0)},20),Tf(this),Yn(),ks(this),this.curOp.forceUpdate=!0,ku(this,c),s.autofocus&&!Ct||this.hasFocus()?setTimeout(function(){u.hasFocus()&&!u.state.focused&&gi(u)},20):Yo(this),va)va.hasOwnProperty(w)&&va[w](this,s[w],ma);wu(this),s.finishInit&&s.finishInit(this);for(var C=0;C<zc.length;++C)zc[C](this);Ps(this),T&&s.lineWrapping&&getComputedStyle(h.lineDiv).textRendering=="optimizelegibility"&&(h.lineDiv.style.textRendering="auto")}function Tf(o){var s=o.display;ue(s.scroller,"mousedown",yr(o,tp)),ue(s.scroller,"dblclick",G&&S<11?yr(o,function(E){if(!Lt(o,E)){var j=Ti(o,E);if(j&&!Hc(o,E)&&!V(o.display,E)){sn(E);var ot=o.findWordAt(j);Il(o.doc,ot.anchor,ot.head)}}}):function(E){return Lt(o,E)||sn(E)}),ue(s.scroller,"contextmenu",function(E){return op(o,E)}),ue(s.input.getField(),"contextmenu",function(E){s.scroller.contains(E.target)||op(o,E)});var u,c={end:0};function p(){s.activeTouch&&(u=setTimeout(function(){return s.activeTouch=null},1e3),(c=s.activeTouch).end=+new Date)}function h(E){if(E.touches.length!=1)return!1;var j=E.touches[0];return j.radiusX<=1&&j.radiusY<=1}function w(E,j){if(j.left==null)return!0;var ot=j.left-E.left,it=j.top-E.top;return ot*ot+it*it>400}ue(s.scroller,"touchstart",function(E){if(!Lt(o,E)&&!h(E)&&!Hc(o,E)){s.input.ensurePolled(),clearTimeout(u);var j=+new Date;s.activeTouch={start:j,moved:!1,prev:j-c.end<=300?c:null},E.touches.length==1&&(s.activeTouch.left=E.touches[0].pageX,s.activeTouch.top=E.touches[0].pageY)}}),ue(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),ue(s.scroller,"touchend",function(E){var j=s.activeTouch;if(j&&!V(s,E)&&j.left!=null&&!j.moved&&new Date-j.start<300){var ot,it=o.coordsChar(s.activeTouch,"page");ot=!j.prev||w(j,j.prev)?new mn(it,it):!j.prev.prev||w(j,j.prev.prev)?o.findWordAt(it):new mn(ne(it.line,0),_e(o.doc,ne(it.line+1,0))),o.setSelection(ot.anchor,ot.head),o.focus(),sn(E)}p()}),ue(s.scroller,"touchcancel",p),ue(s.scroller,"scroll",function(){s.scroller.clientHeight&&(za(o,s.scroller.scrollTop),ki(o,s.scroller.scrollLeft,!0),St(o,"scroll",o))}),ue(s.scroller,"mousewheel",function(E){return Su(o,E)}),ue(s.scroller,"DOMMouseScroll",function(E){return Su(o,E)}),ue(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(E){Lt(o,E)||Ze(E)},over:function(E){Lt(o,E)||(vf(o,E),Ze(E))},start:function(E){return Bu(o,E)},drop:yr(o,mf),leave:function(E){Lt(o,E)||zu(o)}};var C=s.input.getField();ue(C,"keyup",function(E){return Xu.call(o,E)}),ue(C,"keydown",yr(o,Rc)),ue(C,"keypress",yr(o,Qu)),ue(C,"focus",function(E){return gi(o,E)}),ue(C,"blur",function(E){return Yo(o,E)})}Fn.defaults=ip,Fn.optionHandlers=va;var zc=[];function al(o,s,u,c){var p,h=o.doc;u==null&&(u="add"),u=="smart"&&(h.mode.indent?p=Ao(o,s).state:u="prev");var w=o.options.tabSize,C=je(h,s),E=Ce(C.text,null,w);C.stateAfter&&(C.stateAfter=null);var j,ot=C.text.match(/^\s*/)[0];if(c||/\S/.test(C.text)){if(u=="smart"&&((j=h.mode.indent(p,C.text.slice(ot.length),C.text))==we||j>150)){if(!c)return;u="prev"}}else j=0,u="not";u=="prev"?j=s>h.first?Ce(je(h,s-1).text,null,w):0:u=="add"?j=E+o.options.indentUnit:u=="subtract"?j=E-o.options.indentUnit:typeof u=="number"&&(j=E+u),j=Math.max(0,j);var it="",Et=0;if(o.options.indentWithTabs)for(var kt=Math.floor(j/w);kt;--kt)Et+=w,it+="	";if(Et<j&&(it+=fe(j-Et)),it!=ot)return ua(h,it,ne(s,0),ne(s,ot.length),"+input"),C.stateAfter=null,!0;for(var Ft=0;Ft<h.sel.ranges.length;Ft++){var Qt=h.sel.ranges[Ft];if(Qt.head.line==s&&Qt.head.ch<ot.length){var se=ne(s,ot.length);Fl(h,Ft,new mn(se,se));break}}}Fn.defineInitHook=function(o){return zc.push(o)};var Xo=null;function Yl(o){Xo=o}function Uc(o,s,u,c,p){var h=o.doc;o.display.shift=!1,c||(c=h.sel);var w=+new Date-200,C=p=="paste"||o.state.pasteIncoming>w,E=Ho(s),j=null;if(C&&c.ranges.length>1)if(Xo&&Xo.text.join(`
`)==s){if(c.ranges.length%Xo.text.length==0){j=[];for(var ot=0;ot<Xo.text.length;ot++)j.push(h.splitLines(Xo.text[ot]))}}else E.length==c.ranges.length&&o.options.pasteLinesPerSelection&&(j=He(E,function(be){return[be]}));for(var it=o.curOp.updateInput,Et=c.ranges.length-1;Et>=0;Et--){var kt=c.ranges[Et],Ft=kt.from(),Qt=kt.to();kt.empty()&&(u&&u>0?Ft=ne(Ft.line,Ft.ch-u):o.state.overwrite&&!C?Qt=ne(Qt.line,Math.min(je(h,Qt.line).text.length,Qt.ch+oe(E).length)):C&&Xo&&Xo.lineWise&&Xo.text.join(`
`)==E.join(`
`)&&(Ft=Qt=ne(Ft.line,0)));var se={from:Ft,to:Qt,text:j?j[Et%j.length]:E,origin:p||(C?"paste":o.state.cutIncoming>w?"cut":"+input")};Ls(o.doc,se),Mn(o,"inputRead",o,se)}s&&!C&&$c(o,s),ra(o),o.curOp.updateInput<2&&(o.curOp.updateInput=it),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function ap(o,s){var u=o.clipboardData&&o.clipboardData.getData("Text");if(u)return o.preventDefault(),s.isReadOnly()||s.options.disableInput||!s.hasFocus()||zr(s,function(){return Uc(s,u,0,null,"paste")}),!0}function $c(o,s){if(o.options.electricChars&&o.options.smartIndent)for(var u=o.doc.sel,c=u.ranges.length-1;c>=0;c--){var p=u.ranges[c];if(!(p.head.ch>100||c&&u.ranges[c-1].head.line==p.head.line)){var h=o.getModeAt(p.head),w=!1;if(h.electricChars){for(var C=0;C<h.electricChars.length;C++)if(s.indexOf(h.electricChars.charAt(C))>-1){w=al(o,p.head.line,"smart");break}}else h.electricInput&&h.electricInput.test(je(o.doc,p.head.line).text.slice(0,p.head.ch))&&(w=al(o,p.head.line,"smart"));w&&Mn(o,"electricInput",o,p.head.line)}}}function lp(o){for(var s=[],u=[],c=0;c<o.doc.sel.ranges.length;c++){var p=o.doc.sel.ranges[c].head.line,h={anchor:ne(p,0),head:ne(p+1,0)};u.push(h),s.push(o.getRange(h.anchor,h.head))}return{text:s,ranges:u}}function cp(o,s,u,c){o.setAttribute("autocorrect",u?"":"off"),o.setAttribute("autocapitalize",c?"":"off"),o.setAttribute("spellcheck",!!s)}function up(){var o=Tt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=Tt("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return T?o.style.width="1000px":o.setAttribute("wrap","off"),$t&&(o.style.border="1px solid black"),cp(o),s}function Wc(o){var s=o.optionHandlers,u=o.helpers={};o.prototype={constructor:o,focus:function(){window.focus(),this.display.input.focus()},setOption:function(c,p){var h=this.options,w=h[c];h[c]==p&&c!="mode"||(h[c]=p,s.hasOwnProperty(c)&&yr(this,s[c])(this,p,w),St(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,p){this.state.keyMaps[p?"push":"unshift"](Mi(c))},removeKeyMap:function(c){for(var p=this.state.keyMaps,h=0;h<p.length;++h)if(p[h]==c||p[h].name==c)return p.splice(h,1),!0},addOverlay:Er(function(c,p){var h=c.token?c:o.getMode(this.options,c);if(h.startState)throw new Error("Overlays may not be stateful.");nn(this.state.overlays,{mode:h,modeSpec:c,opaque:p&&p.opaque,priority:p&&p.priority||0},function(w){return w.priority}),this.state.modeGen++,pr(this)}),removeOverlay:Er(function(c){for(var p=this.state.overlays,h=0;h<p.length;++h){var w=p[h].modeSpec;if(w==c||typeof c=="string"&&w.name==c)return p.splice(h,1),this.state.modeGen++,void pr(this)}}),indentLine:Er(function(c,p,h){typeof p!="string"&&typeof p!="number"&&(p=p==null?this.options.smartIndent?"smart":"prev":p?"add":"subtract"),Po(this.doc,c)&&al(this,c,p,h)}),indentSelection:Er(function(c){for(var p=this.doc.sel.ranges,h=-1,w=0;w<p.length;w++){var C=p[w];if(C.empty())C.head.line>h&&(al(this,C.head.line,c,!0),h=C.head.line,w==this.doc.sel.primIndex&&ra(this));else{var E=C.from(),j=C.to(),ot=Math.max(h,E.line);h=Math.min(this.lastLine(),j.line-(j.ch?0:1))+1;for(var it=ot;it<h;++it)al(this,it,c);var Et=this.doc.sel.ranges;E.ch==0&&p.length==Et.length&&Et[w].from().ch>0&&Fl(this.doc,w,new mn(E,Et[w].to()),xe)}}}),getTokenAt:function(c,p){return ao(this,c,p)},getLineTokens:function(c,p){return ao(this,ne(c),p,!0)},getTokenTypeAt:function(c){c=_e(this.doc,c);var p,h=Lr(this,je(this.doc,c.line)),w=0,C=(h.length-1)/2,E=c.ch;if(E==0)p=h[2];else for(;;){var j=w+C>>1;if((j?h[2*j-1]:0)>=E)C=j;else{if(!(h[2*j+1]<E)){p=h[2*j+2];break}w=j+1}}var ot=p?p.indexOf("overlay "):-1;return ot<0?p:ot==0?null:p.slice(0,ot-1)},getModeAt:function(c){var p=this.doc.mode;return p.innerMode?o.innerMode(p,this.getTokenAt(c).state).mode:p},getHelper:function(c,p){return this.getHelpers(c,p)[0]},getHelpers:function(c,p){var h=[];if(!u.hasOwnProperty(p))return h;var w=u[p],C=this.getModeAt(c);if(typeof C[p]=="string")w[C[p]]&&h.push(w[C[p]]);else if(C[p])for(var E=0;E<C[p].length;E++){var j=w[C[p][E]];j&&h.push(j)}else C.helperType&&w[C.helperType]?h.push(w[C.helperType]):w[C.name]&&h.push(w[C.name]);for(var ot=0;ot<w._global.length;ot++){var it=w._global[ot];it.pred(C,this)&&ve(h,it.val)==-1&&h.push(it.val)}return h},getStateAfter:function(c,p){var h=this.doc;return Ao(this,(c=an(h,c??h.first+h.size-1))+1,p).state},cursorCoords:function(c,p){var h=this.doc.sel.primary();return Hr(this,c==null?h.head:typeof c=="object"?_e(this.doc,c):c?h.from():h.to(),p||"page")},charCoords:function(c,p){return Xs(this,_e(this.doc,c),p||"page")},coordsChar:function(c,p){return ta(this,(c=Da(this,c,p||"page")).left,c.top)},lineAtHeight:function(c,p){return c=Da(this,{top:c,left:0},p||"page").top,Gn(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,p,h){var w,C=!1;if(typeof c=="number"){var E=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>E&&(c=E,C=!0),w=je(this.doc,c)}else w=c;return Zs(this,w,{top:0,left:0},p||"page",h||C).top+(C?this.doc.height-Ir(w):0)},defaultTextHeight:function(){return mo(this.display)},defaultCharWidth:function(){return di(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,p,h,w,C){var E=this.display,j=(c=Hr(this,_e(this.doc,c))).bottom,ot=c.left;if(p.style.position="absolute",p.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(p),E.sizer.appendChild(p),w=="over")j=c.top;else if(w=="above"||w=="near"){var it=Math.max(E.wrapper.clientHeight,this.doc.height),Et=Math.max(E.sizer.clientWidth,E.lineSpace.clientWidth);(w=="above"||c.bottom+p.offsetHeight>it)&&c.top>p.offsetHeight?j=c.top-p.offsetHeight:c.bottom+p.offsetHeight<=it&&(j=c.bottom),ot+p.offsetWidth>Et&&(ot=Et-p.offsetWidth)}p.style.top=j+"px",p.style.left=p.style.right="",C=="right"?(ot=E.sizer.clientWidth-p.offsetWidth,p.style.right="0px"):(C=="left"?ot=0:C=="middle"&&(ot=(E.sizer.clientWidth-p.offsetWidth)/2),p.style.left=ot+"px"),h&&Yp(this,{left:ot,top:j,right:ot+p.offsetWidth,bottom:j+p.offsetHeight})},triggerOnKeyDown:Er(Rc),triggerOnKeyPress:Er(Qu),triggerOnKeyUp:Xu,triggerOnMouseDown:Er(tp),execCommand:function(c){if(ha.hasOwnProperty(c))return ha[c].call(null,this)},triggerElectric:Er(function(c){$c(this,c)}),findPosH:function(c,p,h,w){var C=1;p<0&&(C=-1,p=-p);for(var E=_e(this.doc,c),j=0;j<p&&!(E=Jl(this.doc,E,C,h,w)).hitSide;++j);return E},moveH:Er(function(c,p){var h=this;this.extendSelectionsBy(function(w){return h.display.shift||h.doc.extend||w.empty()?Jl(h.doc,w.head,c,p,h.options.rtlMoveVisually):c<0?w.from():w.to()},ie)}),deleteH:Er(function(c,p){var h=this.doc.sel,w=this.doc;h.somethingSelected()?w.replaceSelection("",null,"+delete"):as(this,function(C){var E=Jl(w,C.head,c,p,!1);return c<0?{from:E,to:C.head}:{from:C.head,to:E}})}),findPosV:function(c,p,h,w){var C=1,E=w;p<0&&(C=-1,p=-p);for(var j=_e(this.doc,c),ot=0;ot<p;++ot){var it=Hr(this,j,"div");if(E==null?E=it.left:it.left=E,(j=Zl(this,it,C,h)).hitSide)break}return j},moveV:Er(function(c,p){var h=this,w=this.doc,C=[],E=!this.display.shift&&!w.extend&&w.sel.somethingSelected();if(w.extendSelectionsBy(function(ot){if(E)return c<0?ot.from():ot.to();var it=Hr(h,ot.head,"div");ot.goalColumn!=null&&(it.left=ot.goalColumn),C.push(it.left);var Et=Zl(h,it,c,p);return p=="page"&&ot==w.sel.primary()&&Tl(h,Xs(h,Et,"div").top-it.top),Et},ie),C.length)for(var j=0;j<w.sel.ranges.length;j++)w.sel.ranges[j].goalColumn=C[j]}),findWordAt:function(c){var p=je(this.doc,c.line).text,h=c.ch,w=c.ch;if(p){var C=this.getHelper(c,"wordChars");c.sticky!="before"&&w!=p.length||!h?++w:--h;for(var E=p.charAt(h),j=Yt(E,C)?function(ot){return Yt(ot,C)}:/\s/.test(E)?function(ot){return/\s/.test(ot)}:function(ot){return!/\s/.test(ot)&&!Yt(ot)};h>0&&j(p.charAt(h-1));)--h;for(;w<p.length&&j(p.charAt(w));)++w}return new mn(ne(c.line,h),ne(c.line,w))},toggleOverwrite:function(c){c!=null&&c==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ae(this.display.cursorDiv,"CodeMirror-overwrite"):at(this.display.cursorDiv,"CodeMirror-overwrite"),St(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Ht()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Er(function(c,p){Ba(this,c,p)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-xt(this)-this.display.barHeight,width:c.scrollWidth-xt(this)-this.display.barWidth,clientHeight:le(this),clientWidth:Kt(this)}},scrollIntoView:Er(function(c,p){c==null?(c={from:this.doc.sel.primary().head,to:null},p==null&&(p=this.options.cursorScrollMargin)):typeof c=="number"?c={from:ne(c,0),to:null}:c.from==null&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=p||0,c.from.line!=null?Jp(this,c):gu(this,c.from,c.to,c.margin)}),setSize:Er(function(c,p){var h=this,w=function(E){return typeof E=="number"||/^\d+$/.test(String(E))?E+"px":E};c!=null&&(this.display.wrapper.style.width=w(c)),p!=null&&(this.display.wrapper.style.height=w(p)),this.options.lineWrapping&&Os(this);var C=this.display.viewFrom;this.doc.iter(C,this.display.viewTo,function(E){if(E.widgets){for(var j=0;j<E.widgets.length;j++)if(E.widgets[j].noHScroll){vo(h,C,"widget");break}}++C}),this.curOp.forceUpdate=!0,St(this,"refresh",this)}),operation:function(c){return zr(this,c)},startOperation:function(){return ks(this)},endOperation:function(){return Ps(this)},refresh:Er(function(){var c=this.display.cachedTextHeight;pr(this),this.curOp.forceUpdate=!0,es(this),Ba(this,this.doc.scrollLeft,this.doc.scrollTop),bc(this.display),(c==null||Math.abs(c-mo(this.display))>.5||this.options.lineWrapping)&&Ra(this),St(this,"refresh",this)}),swapDoc:Er(function(c){var p=this.doc;return p.cm=null,this.state.selectingText&&this.state.selectingText(),ku(this,c),es(this),this.display.input.reset(),Ba(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,Mn(this,"swapDoc",this,p),p}),phrase:function(c){var p=this.options.phrases;return p&&Object.prototype.hasOwnProperty.call(p,c)?p[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Qe(o),o.registerHelper=function(c,p,h){u.hasOwnProperty(c)||(u[c]=o[c]={_global:[]}),u[c][p]=h},o.registerGlobalHelper=function(c,p,h,w){o.registerHelper(c,p,w),u[c]._global.push({pred:h,val:w})}}function Jl(o,s,u,c,p){var h=s,w=u,C=je(o,s.line),E=p&&o.direction=="rtl"?-u:u;function j(){var Te=s.line+E;return!(Te<o.first||Te>=o.first+o.size)&&(s=new ne(Te,s.ch,s.sticky),C=je(o,Te))}function ot(Te){var ge;if(c=="codepoint"){var De=C.text.charCodeAt(s.ch+(u>0?0:-1));if(isNaN(De))ge=null;else{var Me=u>0?De>=55296&&De<56320:De>=56320&&De<57343;ge=new ne(s.line,Math.max(0,Math.min(C.text.length,s.ch+u*(Me?2:1))),-u)}}else ge=p?Ku(o.cm,C,s,u):Ul(C,s,u);if(ge==null){if(Te||!j())return!1;s=$l(p,o.cm,C,s.line,E)}else s=ge;return!0}if(c=="char"||c=="codepoint")ot();else if(c=="column")ot(!0);else if(c=="word"||c=="group")for(var it=null,Et=c=="group",kt=o.cm&&o.cm.getHelper(s,"wordChars"),Ft=!0;!(u<0)||ot(!Ft);Ft=!1){var Qt=C.text.charAt(s.ch)||`
`,se=Yt(Qt,kt)?"w":Et&&Qt==`
`?"n":!Et||/\s/.test(Qt)?null:"p";if(!Et||Ft||se||(se="s"),it&&it!=se){u<0&&(u=1,ot(),s.sticky="after");break}if(se&&(it=se),u>0&&!ot(!Ft))break}var be=Ka(o,s,h,w,!0);return st(h,be)&&(be.hitSide=!0),be}function Zl(o,s,u,c){var p,h,w=o.doc,C=s.left;if(c=="page"){var E=Math.min(o.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),j=Math.max(E-.5*mo(o.display),3);p=(u>0?s.bottom:s.top)+u*j}else c=="line"&&(p=u>0?s.bottom+3:s.top-3);for(;(h=ta(o,C,p)).outside;){if(u<0?p<=0:p>=w.height){h.hitSide=!0;break}p+=5*u}return h}var wn=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ve,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function qc(o,s){var u=Ci(o,s.line);if(!u||u.hidden)return null;var c=je(o.doc,s.line),p=tn(u,c,s.line),h=Ye(c,o.doc.direction),w="left";h&&(w=ke(h,s.ch)%2?"right":"left");var C=xi(p.map,s.ch,w);return C.offset=C.collapse=="right"?C.end:C.start,C}function Ef(o){for(var s=o;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function ya(o,s){return s&&(o.bad=!0),o}function Gc(o,s,u,c,p){var h="",w=!1,C=o.doc.lineSeparator(),E=!1;function j(kt){return function(Ft){return Ft.id==kt}}function ot(){w&&(h+=C,E&&(h+=C),w=E=!1)}function it(kt){kt&&(ot(),h+=kt)}function Et(kt){if(kt.nodeType==1){var Ft=kt.getAttribute("cm-text");if(Ft)return void it(Ft);var Qt,se=kt.getAttribute("cm-marker");if(se){var be=o.findMarks(ne(c,0),ne(p+1,0),j(+se));return void(be.length&&(Qt=be[0].find(0))&&it(gr(o.doc,Qt.from,Qt.to).join(C)))}if(kt.getAttribute("contenteditable")=="false")return;var Te=/^(pre|div|p|li|table|br)$/i.test(kt.nodeName);if(!/^br$/i.test(kt.nodeName)&&kt.textContent.length==0)return;Te&&ot();for(var ge=0;ge<kt.childNodes.length;ge++)Et(kt.childNodes[ge]);/^(pre|p)$/i.test(kt.nodeName)&&(E=!0),Te&&(w=!0)}else kt.nodeType==3&&it(kt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Et(s),s!=u;)s=s.nextSibling,E=!1;return h}function Xl(o,s,u){var c;if(s==o.display.lineDiv){if(!(c=o.display.lineDiv.childNodes[u]))return ya(o.clipPos(ne(o.display.viewTo-1)),!0);s=null,u=0}else for(c=s;;c=c.parentNode){if(!c||c==o.display.lineDiv)return null;if(c.parentNode&&c.parentNode==o.display.lineDiv)break}for(var p=0;p<o.display.view.length;p++){var h=o.display.view[p];if(h.node==c)return kf(h,s,u)}}function kf(o,s,u){var c=o.text.firstChild,p=!1;if(!s||!Ut(c,s))return ya(ne(cn(o.line),0),!0);if(s==c&&(p=!0,s=c.childNodes[u],u=0,!s)){var h=o.rest?oe(o.rest):o.line;return ya(ne(cn(h),h.text.length),p)}var w=s.nodeType==3?s:null,C=s;for(w||s.childNodes.length!=1||s.firstChild.nodeType!=3||(w=s.firstChild,u&&(u=w.nodeValue.length));C.parentNode!=c;)C=C.parentNode;var E=o.measure,j=E.maps;function ot(se,be,Te){for(var ge=-1;ge<(j?j.length:0);ge++)for(var De=ge<0?E.map:j[ge],Me=0;Me<De.length;Me+=3){var Be=De[Me+2];if(Be==se||Be==be){var Tn=cn(ge<0?o.line:o.rest[ge]),En=De[Me]+Te;return(Te<0||Be!=se)&&(En=De[Me+(Te?1:0)]),ne(Tn,En)}}}var it=ot(w,C,u);if(it)return ya(it,p);for(var Et=C.nextSibling,kt=w?w.nodeValue.length-u:0;Et;Et=Et.nextSibling){if(it=ot(Et,Et.firstChild,0))return ya(ne(it.line,it.ch-kt),p);kt+=Et.textContent.length}for(var Ft=C.previousSibling,Qt=u;Ft;Ft=Ft.previousSibling){if(it=ot(Ft,Ft.firstChild,-1))return ya(ne(it.line,it.ch+Qt),p);Qt+=Ft.textContent.length}}wn.prototype.init=function(o){var s=this,u=this,c=u.cm,p=u.div=o.lineDiv;function h(C){for(var E=C.target;E;E=E.parentNode){if(E==p)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(E.className))break}return!1}function w(C){if(h(C)&&!Lt(c,C)){if(c.somethingSelected())Yl({lineWise:!1,text:c.getSelections()}),C.type=="cut"&&c.replaceSelection("",null,"cut");else{if(!c.options.lineWiseCopyCut)return;var E=lp(c);Yl({lineWise:!0,text:E.text}),C.type=="cut"&&c.operation(function(){c.setSelections(E.ranges,0,xe),c.replaceSelection("",null,"cut")})}if(C.clipboardData){C.clipboardData.clearData();var j=Xo.text.join(`
`);if(C.clipboardData.setData("Text",j),C.clipboardData.getData("Text")==j)return void C.preventDefault()}var ot=up(),it=ot.firstChild;c.display.lineSpace.insertBefore(ot,c.display.lineSpace.firstChild),it.value=Xo.text.join(`
`);var Et=Ht();Ie(it),setTimeout(function(){c.display.lineSpace.removeChild(ot),Et.focus(),Et==p&&u.showPrimarySelection()},50)}}p.contentEditable=!0,cp(p,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize),ue(p,"paste",function(C){!h(C)||Lt(c,C)||ap(C,c)||S<=11&&setTimeout(yr(c,function(){return s.updateFromDOM()}),20)}),ue(p,"compositionstart",function(C){s.composing={data:C.data,done:!1}}),ue(p,"compositionupdate",function(C){s.composing||(s.composing={data:C.data,done:!1})}),ue(p,"compositionend",function(C){s.composing&&(C.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),ue(p,"touchstart",function(){return u.forceCompositionEnd()}),ue(p,"input",function(){s.composing||s.readFromDOMSoon()}),ue(p,"copy",w),ue(p,"cut",w)},wn.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},wn.prototype.prepareSelection=function(){var o=L(this.cm,!1);return o.focus=Ht()==this.div,o},wn.prototype.showSelection=function(o,s){o&&this.cm.display.view.length&&((o.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(o))},wn.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},wn.prototype.showPrimarySelection=function(){var o=this.getSelection(),s=this.cm,u=s.doc.sel.primary(),c=u.from(),p=u.to();if(s.display.viewTo==s.display.viewFrom||c.line>=s.display.viewTo||p.line<s.display.viewFrom)o.removeAllRanges();else{var h=Xl(s,o.anchorNode,o.anchorOffset),w=Xl(s,o.focusNode,o.focusOffset);if(!h||h.bad||!w||w.bad||M(Oe(h,w),c)!=0||M(me(h,w),p)!=0){var C=s.display.view,E=c.line>=s.display.viewFrom&&qc(s,c)||{node:C[0].measure.map[2],offset:0},j=p.line<s.display.viewTo&&qc(s,p);if(!j){var ot=C[C.length-1].measure,it=ot.maps?ot.maps[ot.maps.length-1]:ot.map;j={node:it[it.length-1],offset:it[it.length-2]-it[it.length-3]}}if(E&&j){var Et,kt=o.rangeCount&&o.getRangeAt(0);try{Et=et(E.node,E.offset,j.offset,j.node)}catch{}Et&&(!K&&s.state.focused?(o.collapse(E.node,E.offset),Et.collapsed||(o.removeAllRanges(),o.addRange(Et))):(o.removeAllRanges(),o.addRange(Et)),kt&&o.anchorNode==null?o.addRange(kt):K&&this.startGracePeriod()),this.rememberSelection()}else o.removeAllRanges()}}},wn.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},wn.prototype.showMultipleSelections=function(o){ct(this.cm.display.cursorDiv,o.cursors),ct(this.cm.display.selectionDiv,o.selection)},wn.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},wn.prototype.selectionInEditor=function(){var o=this.getSelection();if(!o.rangeCount)return!1;var s=o.getRangeAt(0).commonAncestorContainer;return Ut(this.div,s)},wn.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&Ht()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},wn.prototype.blur=function(){this.div.blur()},wn.prototype.getField=function(){return this.div},wn.prototype.supportsTouch=function(){return!0},wn.prototype.receivedFocus=function(){var o=this,s=this;function u(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,u))}this.selectionInEditor()?setTimeout(function(){return o.pollSelection()},20):zr(this.cm,function(){return s.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,u)},wn.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},wn.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var o=this.getSelection(),s=this.cm;if(de&&F&&this.cm.display.gutterSpecs.length&&Ef(o.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var u=Xl(s,o.anchorNode,o.anchorOffset),c=Xl(s,o.focusNode,o.focusOffset);u&&c&&zr(s,function(){_r(s.doc,os(u,c),xe),(u.bad||c.bad)&&(s.curOp.selectionChanged=!0)})}}},wn.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o,s,u,c=this.cm,p=c.display,h=c.doc.sel.primary(),w=h.from(),C=h.to();if(w.ch==0&&w.line>c.firstLine()&&(w=ne(w.line-1,je(c.doc,w.line-1).length)),C.ch==je(c.doc,C.line).text.length&&C.line<c.lastLine()&&(C=ne(C.line+1,0)),w.line<p.viewFrom||C.line>p.viewTo-1)return!1;w.line==p.viewFrom||(o=Ei(c,w.line))==0?(s=cn(p.view[0].line),u=p.view[0].node):(s=cn(p.view[o].line),u=p.view[o-1].node.nextSibling);var E,j,ot=Ei(c,C.line);if(ot==p.view.length-1?(E=p.viewTo-1,j=p.lineDiv.lastChild):(E=cn(p.view[ot+1].line)-1,j=p.view[ot+1].node.previousSibling),!u)return!1;for(var it=c.doc.splitLines(Gc(c,u,j,s,E)),Et=gr(c.doc,ne(s,0),ne(E,je(c.doc,E).text.length));it.length>1&&Et.length>1;)if(oe(it)==oe(Et))it.pop(),Et.pop(),E--;else{if(it[0]!=Et[0])break;it.shift(),Et.shift(),s++}for(var kt=0,Ft=0,Qt=it[0],se=Et[0],be=Math.min(Qt.length,se.length);kt<be&&Qt.charCodeAt(kt)==se.charCodeAt(kt);)++kt;for(var Te=oe(it),ge=oe(Et),De=Math.min(Te.length-(it.length==1?kt:0),ge.length-(Et.length==1?kt:0));Ft<De&&Te.charCodeAt(Te.length-Ft-1)==ge.charCodeAt(ge.length-Ft-1);)++Ft;if(it.length==1&&Et.length==1&&s==w.line)for(;kt&&kt>w.ch&&Te.charCodeAt(Te.length-Ft-1)==ge.charCodeAt(ge.length-Ft-1);)kt--,Ft++;it[it.length-1]=Te.slice(0,Te.length-Ft).replace(/^\u200b+/,""),it[0]=it[0].slice(kt).replace(/\u200b+$/,"");var Me=ne(s,kt),Be=ne(E,Et.length?oe(Et).length-Ft:0);return it.length>1||it[0]||M(Me,Be)?(ua(c.doc,it,Me,Be,"+input"),!0):void 0},wn.prototype.ensurePolled=function(){this.forceCompositionEnd()},wn.prototype.reset=function(){this.forceCompositionEnd()},wn.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},wn.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing){if(!o.composing.done)return;o.composing=null}o.updateFromDOM()},80))},wn.prototype.updateFromDOM=function(){var o=this;!this.cm.isReadOnly()&&this.pollContent()||zr(this.cm,function(){return pr(o.cm)})},wn.prototype.setUneditable=function(o){o.contentEditable="false"},wn.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||yr(this.cm,Uc)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},wn.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},wn.prototype.onContextMenu=function(){},wn.prototype.resetPosition=function(){},wn.prototype.needsContentAttribute=!0;var Xn=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new Ve,this.hasSelection=!1,this.composing=null};function Pf(o,s){if((s=s?Ne(s):{}).value=o.value,!s.tabindex&&o.tabIndex&&(s.tabindex=o.tabIndex),!s.placeholder&&o.placeholder&&(s.placeholder=o.placeholder),s.autofocus==null){var u=Ht();s.autofocus=u==o||o.getAttribute("autofocus")!=null&&u==document.body}function c(){o.value=C.getValue()}var p;if(o.form&&(ue(o.form,"submit",c),!s.leaveSubmitMethodAlone)){var h=o.form;p=h.submit;try{var w=h.submit=function(){c(),h.submit=p,h.submit(),h.submit=w}}catch{}}s.finishInit=function(E){E.save=c,E.getTextArea=function(){return o},E.toTextArea=function(){E.toTextArea=isNaN,c(),o.parentNode.removeChild(E.getWrapperElement()),o.style.display="",o.form&&(vt(o.form,"submit",c),s.leaveSubmitMethodAlone||typeof o.form.submit!="function"||(o.form.submit=p))}},o.style.display="none";var C=Fn(function(E){return o.parentNode.insertBefore(E,o.nextSibling)},s);return C}function Af(o){o.off=vt,o.on=ue,o.wheelEventPixels=af,o.Doc=sr,o.splitLines=Ho,o.countColumn=Ce,o.findColumn=re,o.isWordChar=At,o.Pass=we,o.signal=St,o.Line=Zr,o.changeEnd=Jo,o.scrollbarModel=mu,o.Pos=ne,o.cmpPos=M,o.modes=hr,o.mimeModes=dn,o.resolveMode=zo,o.getMode=so,o.modeExtensions=Zn,o.extendMode=qn,o.copyState=or,o.startState=po,o.innerMode=ii,o.commands=ha,o.keyMap=Zo,o.keyName=Gu,o.isModifierKey=Nc,o.lookupKey=Ns,o.normalizeKeyMap=zl,o.StringStream=ln,o.SharedTextMarker=tl,o.TextMarker=ss,o.LineWidget=Qa,o.e_preventDefault=sn,o.e_stopPropagation=Un,o.e_stop=Ze,o.addClass=ae,o.contains=Ut,o.rmClass=at,o.keyNames=Fo}Xn.prototype.init=function(o){var s=this,u=this,c=this.cm;this.createField(o);var p=this.textarea;function h(w){if(!Lt(c,w)){if(c.somethingSelected())Yl({lineWise:!1,text:c.getSelections()});else{if(!c.options.lineWiseCopyCut)return;var C=lp(c);Yl({lineWise:!0,text:C.text}),w.type=="cut"?c.setSelections(C.ranges,null,xe):(u.prevInput="",p.value=C.text.join(`
`),Ie(p))}w.type=="cut"&&(c.state.cutIncoming=+new Date)}}o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),$t&&(p.style.width="0px"),ue(p,"input",function(){G&&S>=9&&s.hasSelection&&(s.hasSelection=null),u.poll()}),ue(p,"paste",function(w){Lt(c,w)||ap(w,c)||(c.state.pasteIncoming=+new Date,u.fastPoll())}),ue(p,"cut",h),ue(p,"copy",h),ue(o.scroller,"paste",function(w){if(!V(o,w)&&!Lt(c,w)){if(!p.dispatchEvent)return c.state.pasteIncoming=+new Date,void u.focus();var C=new Event("paste");C.clipboardData=w.clipboardData,p.dispatchEvent(C)}}),ue(o.lineSpace,"selectstart",function(w){V(o,w)||sn(w)}),ue(p,"compositionstart",function(){var w=c.getCursor("from");u.composing&&u.composing.range.clear(),u.composing={start:w,range:c.markText(w,c.getCursor("to"),{className:"CodeMirror-composing"})}}),ue(p,"compositionend",function(){u.composing&&(u.poll(),u.composing.range.clear(),u.composing=null)})},Xn.prototype.createField=function(o){this.wrapper=up(),this.textarea=this.wrapper.firstChild},Xn.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},Xn.prototype.prepareSelection=function(){var o=this.cm,s=o.display,u=o.doc,c=L(o);if(o.options.moveInputWithCursor){var p=Hr(o,u.sel.primary().head,"div"),h=s.wrapper.getBoundingClientRect(),w=s.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,p.top+w.top-h.top)),c.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,p.left+w.left-h.left))}return c},Xn.prototype.showSelection=function(o){var s=this.cm.display;ct(s.cursorDiv,o.cursors),ct(s.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},Xn.prototype.reset=function(o){if(!this.contextMenuPending&&!this.composing){var s=this.cm;if(s.somethingSelected()){this.prevInput="";var u=s.getSelection();this.textarea.value=u,s.state.focused&&Ie(this.textarea),G&&S>=9&&(this.hasSelection=u)}else o||(this.prevInput=this.textarea.value="",G&&S>=9&&(this.hasSelection=null))}},Xn.prototype.getField=function(){return this.textarea},Xn.prototype.supportsTouch=function(){return!1},Xn.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!Ct||Ht()!=this.textarea))try{this.textarea.focus()}catch{}},Xn.prototype.blur=function(){this.textarea.blur()},Xn.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Xn.prototype.receivedFocus=function(){this.slowPoll()},Xn.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},Xn.prototype.fastPoll=function(){var o=!1,s=this;function u(){s.poll()||o?(s.pollingFast=!1,s.slowPoll()):(o=!0,s.polling.set(60,u))}s.pollingFast=!0,s.polling.set(20,u)},Xn.prototype.poll=function(){var o=this,s=this.cm,u=this.textarea,c=this.prevInput;if(this.contextMenuPending||!s.state.focused||oi(u)&&!c&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var p=u.value;if(p==c&&!s.somethingSelected())return!1;if(G&&S>=9&&this.hasSelection===p||_t&&/[\uf700-\uf7ff]/.test(p))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var h=p.charCodeAt(0);if(h!=8203||c||(c="​"),h==8666)return this.reset(),this.cm.execCommand("undo")}for(var w=0,C=Math.min(c.length,p.length);w<C&&c.charCodeAt(w)==p.charCodeAt(w);)++w;return zr(s,function(){Uc(s,p.slice(w),c.length-w,null,o.composing?"*compose":null),p.length>1e3||p.indexOf(`
`)>-1?u.value=o.prevInput="":o.prevInput=p,o.composing&&(o.composing.range.clear(),o.composing.range=s.markText(o.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Xn.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Xn.prototype.onKeyPress=function(){G&&S>=9&&(this.hasSelection=null),this.fastPoll()},Xn.prototype.onContextMenu=function(o){var s=this,u=s.cm,c=u.display,p=s.textarea;s.contextMenuPending&&s.contextMenuPending();var h=Ti(u,o),w=c.scroller.scrollTop;if(h&&!dt){u.options.resetSelectionOnContextMenu&&u.doc.sel.contains(h)==-1&&yr(u,_r)(u.doc,os(h),xe);var C,E=p.style.cssText,j=s.wrapper.style.cssText,ot=s.wrapper.offsetParent.getBoundingClientRect();if(s.wrapper.style.cssText="position: static",p.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(o.clientY-ot.top-5)+"px; left: "+(o.clientX-ot.left-5)+`px;
      z-index: 1000; background: `+(G?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,T&&(C=window.scrollY),c.input.focus(),T&&window.scrollTo(null,C),c.input.reset(),u.somethingSelected()||(p.value=s.prevInput=" "),s.contextMenuPending=kt,c.selForContextMenu=u.doc.sel,clearTimeout(c.detectingSelectAll),G&&S>=9&&Et(),k){Ze(o);var it=function(){vt(window,"mouseup",it),setTimeout(kt,20)};ue(window,"mouseup",it)}else setTimeout(kt,50)}function Et(){if(p.selectionStart!=null){var Ft=u.somethingSelected(),Qt="​"+(Ft?p.value:"");p.value="⇚",p.value=Qt,s.prevInput=Ft?"":"​",p.selectionStart=1,p.selectionEnd=Qt.length,c.selForContextMenu=u.doc.sel}}function kt(){if(s.contextMenuPending==kt&&(s.contextMenuPending=!1,s.wrapper.style.cssText=j,p.style.cssText=E,G&&S<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=w),p.selectionStart!=null)){(!G||G&&S<9)&&Et();var Ft=0,Qt=function(){c.selForContextMenu==u.doc.sel&&p.selectionStart==0&&p.selectionEnd>0&&s.prevInput=="​"?yr(u,Mu)(u):Ft++<10?c.detectingSelectAll=setTimeout(Qt,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout(Qt,200)}}},Xn.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},Xn.prototype.setUneditable=function(){},Xn.prototype.needsContentAttribute=!1,sp(Fn),Wc(Fn);var pp="iter insert remove copy getEditor constructor".split(" ");for(var ba in sr.prototype)sr.prototype.hasOwnProperty(ba)&&ve(pp,ba)<0&&(Fn.prototype[ba]=function(o){return function(){return o.apply(this.doc,arguments)}}(sr.prototype[ba]));return Qe(sr),Fn.inputStyles={textarea:Xn,contenteditable:wn},Fn.defineMode=function(o){Fn.defaults.mode||o=="null"||(Fn.defaults.mode=o),Wn.apply(this,arguments)},Fn.defineMIME=Gr,Fn.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),Fn.defineMIME("text/plain","null"),Fn.defineExtension=function(o,s){Fn.prototype[o]=s},Fn.defineDocExtension=function(o,s){sr.prototype[o]=s},Fn.fromTextArea=Pf,Af(Fn),Fn.version="5.65.6",Fn}()},629:(y,tt,N)=>{(function(K){function gt(k){for(var H={},et=0;et<k.length;++et)H[k[et].toLowerCase()]=!0;return H}K.defineMode("css",function(k,H){var et=H.inline;H.propertyKeywords||(H=K.resolveMode("text/css"));var at,Pt,ct=k.indentUnit,Tt=H.tokenHooks,q=H.documentTypes||{},Ut=H.mediaTypes||{},Ht=H.mediaFeatures||{},ae=H.mediaValueKeywords||{},Fe=H.propertyKeywords||{},Ie=H.nonStandardPropertyKeywords||{},Ee=H.fontProperties||{},Ne=H.counterDescriptors||{},Ce=H.colorKeywords||{},Ve=H.valueKeywords||{},ve=H.allowNested,ye=H.lineComment,we=H.supportsAtComponent===!0,xe=k.highlightNonStandardPropertyKeywords!==!1;function ft(At,Yt){return at=Yt,At}function ie(At,Yt){var _=At.next();if(Tt[_]){var I=Tt[_](At,Yt);if(I!==!1)return I}return _=="@"?(At.eatWhile(/[\w\\\-]/),ft("def",At.current())):_=="="||(_=="~"||_=="|")&&At.eat("=")?ft(null,"compare"):_=='"'||_=="'"?(Yt.tokenize=re(_),Yt.tokenize(At,Yt)):_=="#"?(At.eatWhile(/[\w\\\-]/),ft("atom","hash")):_=="!"?(At.match(/^\s*\w*/),ft("keyword","important")):/\d/.test(_)||_=="."&&At.eat(/\d/)?(At.eatWhile(/[\w.%]/),ft("number","unit")):_!=="-"?/[,+>*\/]/.test(_)?ft(null,"select-op"):_=="."&&At.match(/^-?[_a-z][_a-z0-9-]*/i)?ft("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(_)?ft(null,_):At.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(At.current())&&(Yt.tokenize=he),ft("variable callee","variable")):/[\w\\\-]/.test(_)?(At.eatWhile(/[\w\\\-]/),ft("property","word")):ft(null,null):/[\d.]/.test(At.peek())?(At.eatWhile(/[\w.%]/),ft("number","unit")):At.match(/^-[\w\\\-]*/)?(At.eatWhile(/[\w\\\-]/),At.match(/^\s*:/,!1)?ft("variable-2","variable-definition"):ft("variable-2","variable")):At.match(/^\w+-/)?ft("meta","meta"):void 0}function re(At){return function(Yt,_){for(var I,z=!1;(I=Yt.next())!=null;){if(I==At&&!z){At==")"&&Yt.backUp(1);break}z=!z&&I=="\\"}return(I==At||!z&&At!=")")&&(_.tokenize=null),ft("string","string")}}function he(At,Yt){return At.next(),At.match(/^\s*[\"\')]/,!1)?Yt.tokenize=null:Yt.tokenize=re(")"),ft(null,"(")}function fe(At,Yt,_){this.type=At,this.indent=Yt,this.prev=_}function oe(At,Yt,_,I){return At.context=new fe(_,Yt.indentation()+(I===!1?0:ct),At.context),_}function He(At){return At.context.prev&&(At.context=At.context.prev),At.context.type}function nn(At,Yt,_){return Nn[_.context.type](At,Yt,_)}function Ge(At,Yt,_,I){for(var z=I||1;z>0;z--)_.context=_.context.prev;return nn(At,Yt,_)}function bn(At){var Yt=At.current().toLowerCase();Pt=Ve.hasOwnProperty(Yt)?"atom":Ce.hasOwnProperty(Yt)?"keyword":"variable"}var Nn={top:function(At,Yt,_){if(At=="{")return oe(_,Yt,"block");if(At=="}"&&_.context.prev)return He(_);if(we&&/@component/i.test(At))return oe(_,Yt,"atComponentBlock");if(/^@(-moz-)?document$/i.test(At))return oe(_,Yt,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(At))return oe(_,Yt,"atBlock");if(/^@(font-face|counter-style)/i.test(At))return _.stateArg=At,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(At))return"keyframes";if(At&&At.charAt(0)=="@")return oe(_,Yt,"at");if(At=="hash")Pt="builtin";else if(At=="word")Pt="tag";else{if(At=="variable-definition")return"maybeprop";if(At=="interpolation")return oe(_,Yt,"interpolation");if(At==":")return"pseudo";if(ve&&At=="(")return oe(_,Yt,"parens")}return _.context.type},block:function(At,Yt,_){if(At=="word"){var I=Yt.current().toLowerCase();return Fe.hasOwnProperty(I)?(Pt="property","maybeprop"):Ie.hasOwnProperty(I)?(Pt=xe?"string-2":"property","maybeprop"):ve?(Pt=Yt.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Pt+=" error","maybeprop")}return At=="meta"?"block":ve||At!="hash"&&At!="qualifier"?Nn.top(At,Yt,_):(Pt="error","block")},maybeprop:function(At,Yt,_){return At==":"?oe(_,Yt,"prop"):nn(At,Yt,_)},prop:function(At,Yt,_){if(At==";")return He(_);if(At=="{"&&ve)return oe(_,Yt,"propBlock");if(At=="}"||At=="{")return Ge(At,Yt,_);if(At=="(")return oe(_,Yt,"parens");if(At!="hash"||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(Yt.current())){if(At=="word")bn(Yt);else if(At=="interpolation")return oe(_,Yt,"interpolation")}else Pt+=" error";return"prop"},propBlock:function(At,Yt,_){return At=="}"?He(_):At=="word"?(Pt="property","maybeprop"):_.context.type},parens:function(At,Yt,_){return At=="{"||At=="}"?Ge(At,Yt,_):At==")"?He(_):At=="("?oe(_,Yt,"parens"):At=="interpolation"?oe(_,Yt,"interpolation"):(At=="word"&&bn(Yt),"parens")},pseudo:function(At,Yt,_){return At=="meta"?"pseudo":At=="word"?(Pt="variable-3",_.context.type):nn(At,Yt,_)},documentTypes:function(At,Yt,_){return At=="word"&&q.hasOwnProperty(Yt.current())?(Pt="tag",_.context.type):Nn.atBlock(At,Yt,_)},atBlock:function(At,Yt,_){if(At=="(")return oe(_,Yt,"atBlock_parens");if(At=="}"||At==";")return Ge(At,Yt,_);if(At=="{")return He(_)&&oe(_,Yt,ve?"block":"top");if(At=="interpolation")return oe(_,Yt,"interpolation");if(At=="word"){var I=Yt.current().toLowerCase();Pt=I=="only"||I=="not"||I=="and"||I=="or"?"keyword":Ut.hasOwnProperty(I)?"attribute":Ht.hasOwnProperty(I)?"property":ae.hasOwnProperty(I)?"keyword":Fe.hasOwnProperty(I)?"property":Ie.hasOwnProperty(I)?xe?"string-2":"property":Ve.hasOwnProperty(I)?"atom":Ce.hasOwnProperty(I)?"keyword":"error"}return _.context.type},atComponentBlock:function(At,Yt,_){return At=="}"?Ge(At,Yt,_):At=="{"?He(_)&&oe(_,Yt,ve?"block":"top",!1):(At=="word"&&(Pt="error"),_.context.type)},atBlock_parens:function(At,Yt,_){return At==")"?He(_):At=="{"||At=="}"?Ge(At,Yt,_,2):Nn.atBlock(At,Yt,_)},restricted_atBlock_before:function(At,Yt,_){return At=="{"?oe(_,Yt,"restricted_atBlock"):At=="word"&&_.stateArg=="@counter-style"?(Pt="variable","restricted_atBlock_before"):nn(At,Yt,_)},restricted_atBlock:function(At,Yt,_){return At=="}"?(_.stateArg=null,He(_)):At=="word"?(Pt=_.stateArg=="@font-face"&&!Ee.hasOwnProperty(Yt.current().toLowerCase())||_.stateArg=="@counter-style"&&!Ne.hasOwnProperty(Yt.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(At,Yt,_){return At=="word"?(Pt="variable","keyframes"):At=="{"?oe(_,Yt,"top"):nn(At,Yt,_)},at:function(At,Yt,_){return At==";"?He(_):At=="{"||At=="}"?Ge(At,Yt,_):(At=="word"?Pt="tag":At=="hash"&&(Pt="builtin"),"at")},interpolation:function(At,Yt,_){return At=="}"?He(_):At=="{"||At==";"?Ge(At,Yt,_):(At=="word"?Pt="variable":At!="variable"&&At!="("&&At!=")"&&(Pt="error"),"interpolation")}};return{startState:function(At){return{tokenize:null,state:et?"block":"top",stateArg:null,context:new fe(et?"block":"top",At||0,null)}},token:function(At,Yt){if(!Yt.tokenize&&At.eatSpace())return null;var _=(Yt.tokenize||ie)(At,Yt);return _&&typeof _=="object"&&(at=_[1],_=_[0]),Pt=_,at!="comment"&&(Yt.state=Nn[Yt.state](at,At,Yt)),Pt},indent:function(At,Yt){var _=At.context,I=Yt&&Yt.charAt(0),z=_.indent;return _.type!="prop"||I!="}"&&I!=")"||(_=_.prev),_.prev&&(I!="}"||_.type!="block"&&_.type!="top"&&_.type!="interpolation"&&_.type!="restricted_atBlock"?(I!=")"||_.type!="parens"&&_.type!="atBlock_parens")&&(I!="{"||_.type!="at"&&_.type!="atBlock")||(z=Math.max(0,_.indent-ct)):z=(_=_.prev).indent),z},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:ye,fold:"brace"}});var X=["domain","regexp","url","url-prefix"],nt=gt(X),G=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],S=gt(G),T=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],D=gt(T),F=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],R=gt(F),dt=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],bt=gt(dt),It=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],Dt=gt(It),$t=gt(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),de=gt(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),Ct=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],_t=gt(Ct),Wt=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Jt=gt(Wt),Rt=X.concat(G).concat(T).concat(F).concat(dt).concat(It).concat(Ct).concat(Wt);function Y(k,H){for(var et,at=!1;(et=k.next())!=null;){if(at&&et=="/"){H.tokenize=null;break}at=et=="*"}return["comment","comment"]}K.registerHelper("hintWords","css",Rt),K.defineMIME("text/css",{documentTypes:nt,mediaTypes:S,mediaFeatures:D,mediaValueKeywords:R,propertyKeywords:bt,nonStandardPropertyKeywords:Dt,fontProperties:$t,counterDescriptors:de,colorKeywords:_t,valueKeywords:Jt,tokenHooks:{"/":function(k,H){return!!k.eat("*")&&(H.tokenize=Y,Y(k,H))}},name:"css"}),K.defineMIME("text/x-scss",{mediaTypes:S,mediaFeatures:D,mediaValueKeywords:R,propertyKeywords:bt,nonStandardPropertyKeywords:Dt,colorKeywords:_t,valueKeywords:Jt,fontProperties:$t,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(k,H){return k.eat("/")?(k.skipToEnd(),["comment","comment"]):k.eat("*")?(H.tokenize=Y,Y(k,H)):["operator","operator"]},":":function(k){return!!k.match(/^\s*\{/,!1)&&[null,null]},$:function(k){return k.match(/^[\w-]+/),k.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(k){return!!k.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),K.defineMIME("text/x-less",{mediaTypes:S,mediaFeatures:D,mediaValueKeywords:R,propertyKeywords:bt,nonStandardPropertyKeywords:Dt,colorKeywords:_t,valueKeywords:Jt,fontProperties:$t,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(k,H){return k.eat("/")?(k.skipToEnd(),["comment","comment"]):k.eat("*")?(H.tokenize=Y,Y(k,H)):["operator","operator"]},"@":function(k){return k.eat("{")?[null,"interpolation"]:!k.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(k.eatWhile(/[\w\\\-]/),k.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),K.defineMIME("text/x-gss",{documentTypes:nt,mediaTypes:S,mediaFeatures:D,propertyKeywords:bt,nonStandardPropertyKeywords:Dt,fontProperties:$t,counterDescriptors:de,colorKeywords:_t,valueKeywords:Jt,supportsAtComponent:!0,tokenHooks:{"/":function(k,H){return!!k.eat("*")&&(H.tokenize=Y,Y(k,H))}},name:"css",helperType:"gss"})})(N(631))},531:(y,tt,N)=>{(function(K){var gt={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function X(R,dt,bt){var It=R.current(),Dt=It.search(dt);return Dt>-1?R.backUp(It.length-Dt):It.match(/<\/?$/)&&(R.backUp(It.length),R.match(dt,!1)||R.match(It)),bt}var nt={};function G(R){var dt=nt[R];return dt||(nt[R]=new RegExp("\\s+"+R+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function S(R,dt){var bt=R.match(G(dt));return bt?/^\s*(.*?)\s*$/.exec(bt[2])[1]:""}function T(R,dt){return new RegExp((dt?"^":"")+"</\\s*"+R+"\\s*>","i")}function D(R,dt){for(var bt in R)for(var It=dt[bt]||(dt[bt]=[]),Dt=R[bt],$t=Dt.length-1;$t>=0;$t--)It.unshift(Dt[$t])}function F(R,dt){for(var bt=0;bt<R.length;bt++){var It=R[bt];if(!It[0]||It[1].test(S(dt,It[0])))return It[2]}}K.defineMode("htmlmixed",function(R,dt){var bt=K.getMode(R,{name:"xml",htmlMode:!0,multilineTagIndentFactor:dt.multilineTagIndentFactor,multilineTagIndentPastTag:dt.multilineTagIndentPastTag,allowMissingTagName:dt.allowMissingTagName}),It={},Dt=dt&&dt.tags,$t=dt&&dt.scriptTypes;if(D(gt,It),Dt&&D(Dt,It),$t)for(var de=$t.length-1;de>=0;de--)It.script.unshift(["type",$t[de].matches,$t[de].mode]);function Ct(_t,Wt){var Jt,Rt=bt.token(_t,Wt.htmlState),Y=/\btag\b/.test(Rt);if(Y&&!/[<>\s\/]/.test(_t.current())&&(Jt=Wt.htmlState.tagName&&Wt.htmlState.tagName.toLowerCase())&&It.hasOwnProperty(Jt))Wt.inTag=Jt+" ";else if(Wt.inTag&&Y&&/>$/.test(_t.current())){var k=/^([\S]+) (.*)/.exec(Wt.inTag);Wt.inTag=null;var H=_t.current()==">"&&F(It[k[1]],k[2]),et=K.getMode(R,H),at=T(k[1],!0),Pt=T(k[1],!1);Wt.token=function(ct,Tt){return ct.match(at,!1)?(Tt.token=Ct,Tt.localState=Tt.localMode=null,null):X(ct,Pt,Tt.localMode.token(ct,Tt.localState))},Wt.localMode=et,Wt.localState=K.startState(et,bt.indent(Wt.htmlState,"",""))}else Wt.inTag&&(Wt.inTag+=_t.current(),_t.eol()&&(Wt.inTag+=" "));return Rt}return{startState:function(){return{token:Ct,inTag:null,localMode:null,localState:null,htmlState:K.startState(bt)}},copyState:function(_t){var Wt;return _t.localState&&(Wt=K.copyState(_t.localMode,_t.localState)),{token:_t.token,inTag:_t.inTag,localMode:_t.localMode,localState:Wt,htmlState:K.copyState(bt,_t.htmlState)}},token:function(_t,Wt){return Wt.token(_t,Wt)},indent:function(_t,Wt,Jt){return!_t.localMode||/^\s*<\//.test(Wt)?bt.indent(_t.htmlState,Wt,Jt):_t.localMode.indent?_t.localMode.indent(_t.localState,Wt,Jt):K.Pass},innerMode:function(_t){return{state:_t.localState||_t.htmlState,mode:_t.localMode||bt}}}},"xml","javascript","css"),K.defineMIME("text/html","htmlmixed")})(N(631),N(589),N(876),N(629))},876:(y,tt,N)=>{(function(K){K.defineMode("javascript",function(gt,X){var nt,G,S=gt.indentUnit,T=X.statementIndent,D=X.jsonld,F=X.json||D,R=X.trackScope!==!1,dt=X.typescript,bt=X.wordCharacters||/[\w$\xa1-\uffff]/,It=function(){function M(An){return{type:An,style:"keyword"}}var st=M("keyword a"),Gt=M("keyword b"),me=M("keyword c"),Oe=M("keyword d"),an=M("operator"),_e={type:"atom",style:"atom"};return{if:M("if"),while:st,with:st,else:Gt,do:Gt,try:Gt,finally:Gt,return:Oe,break:Oe,continue:Oe,new:M("new"),delete:me,void:me,throw:me,debugger:M("debugger"),var:M("var"),const:M("var"),let:M("var"),function:M("function"),catch:M("catch"),for:M("for"),switch:M("switch"),case:M("case"),default:M("default"),in:an,typeof:an,instanceof:an,true:_e,false:_e,null:_e,undefined:_e,NaN:_e,Infinity:_e,this:M("this"),class:M("class"),super:M("atom"),yield:me,export:M("export"),import:M("import"),extends:me,await:me}}(),Dt=/[+\-*&%=<>!?|~^@]/,$t=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function de(M){for(var st,Gt=!1,me=!1;(st=M.next())!=null;){if(!Gt){if(st=="/"&&!me)return;st=="["?me=!0:me&&st=="]"&&(me=!1)}Gt=!Gt&&st=="\\"}}function Ct(M,st,Gt){return nt=M,G=Gt,st}function _t(M,st){var Gt=M.next();if(Gt=='"'||Gt=="'")return st.tokenize=Wt(Gt),st.tokenize(M,st);if(Gt=="."&&M.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Ct("number","number");if(Gt=="."&&M.match(".."))return Ct("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Gt))return Ct(Gt);if(Gt=="="&&M.eat(">"))return Ct("=>","operator");if(Gt=="0"&&M.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Ct("number","number");if(/\d/.test(Gt))return M.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Ct("number","number");if(Gt=="/")return M.eat("*")?(st.tokenize=Jt,Jt(M,st)):M.eat("/")?(M.skipToEnd(),Ct("comment","comment")):ne(M,st,1)?(de(M),M.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Ct("regexp","string-2")):(M.eat("="),Ct("operator","operator",M.current()));if(Gt=="`")return st.tokenize=Rt,Rt(M,st);if(Gt=="#"&&M.peek()=="!")return M.skipToEnd(),Ct("meta","meta");if(Gt=="#"&&M.eatWhile(bt))return Ct("variable","property");if(Gt=="<"&&M.match("!--")||Gt=="-"&&M.match("->")&&!/\S/.test(M.string.slice(0,M.start)))return M.skipToEnd(),Ct("comment","comment");if(Dt.test(Gt))return Gt==">"&&st.lexical&&st.lexical.type==">"||(M.eat("=")?Gt!="!"&&Gt!="="||M.eat("="):/[<>*+\-|&?]/.test(Gt)&&(M.eat(Gt),Gt==">"&&M.eat(Gt))),Gt=="?"&&M.eat(".")?Ct("."):Ct("operator","operator",M.current());if(bt.test(Gt)){M.eatWhile(bt);var me=M.current();if(st.lastType!="."){if(It.propertyIsEnumerable(me)){var Oe=It[me];return Ct(Oe.type,Oe.style,me)}if(me=="async"&&M.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Ct("async","keyword",me)}return Ct("variable","variable",me)}}function Wt(M){return function(st,Gt){var me,Oe=!1;if(D&&st.peek()=="@"&&st.match($t))return Gt.tokenize=_t,Ct("jsonld-keyword","meta");for(;(me=st.next())!=null&&(me!=M||Oe);)Oe=!Oe&&me=="\\";return Oe||(Gt.tokenize=_t),Ct("string","string")}}function Jt(M,st){for(var Gt,me=!1;Gt=M.next();){if(Gt=="/"&&me){st.tokenize=_t;break}me=Gt=="*"}return Ct("comment","comment")}function Rt(M,st){for(var Gt,me=!1;(Gt=M.next())!=null;){if(!me&&(Gt=="`"||Gt=="$"&&M.eat("{"))){st.tokenize=_t;break}me=!me&&Gt=="\\"}return Ct("quasi","string-2",M.current())}var Y="([{}])";function k(M,st){st.fatArrowAt&&(st.fatArrowAt=null);var Gt=M.string.indexOf("=>",M.start);if(!(Gt<0)){if(dt){var me=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(M.string.slice(M.start,Gt));me&&(Gt=me.index)}for(var Oe=0,an=!1,_e=Gt-1;_e>=0;--_e){var An=M.string.charAt(_e),In=Y.indexOf(An);if(In>=0&&In<3){if(!Oe){++_e;break}if(--Oe==0){An=="("&&(an=!0);break}}else if(In>=3&&In<6)++Oe;else if(bt.test(An))an=!0;else if(/["'\/`]/.test(An))for(;;--_e){if(_e==0)return;if(M.string.charAt(_e-1)==An&&M.string.charAt(_e-2)!="\\"){_e--;break}}else if(an&&!Oe){++_e;break}}an&&!Oe&&(st.fatArrowAt=_e)}}var H={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function et(M,st,Gt,me,Oe,an){this.indented=M,this.column=st,this.type=Gt,this.prev=Oe,this.info=an,me!=null&&(this.align=me)}function at(M,st){if(!R)return!1;for(var Gt=M.localVars;Gt;Gt=Gt.next)if(Gt.name==st)return!0;for(var me=M.context;me;me=me.prev)for(Gt=me.vars;Gt;Gt=Gt.next)if(Gt.name==st)return!0}function Pt(M,st,Gt,me,Oe){var an=M.cc;for(ct.state=M,ct.stream=Oe,ct.marked=null,ct.cc=an,ct.style=st,M.lexical.hasOwnProperty("align")||(M.lexical.align=!0);;)if((an.length?an.pop():F?re:ft)(Gt,me)){for(;an.length&&an[an.length-1].lex;)an.pop()();return ct.marked?ct.marked:Gt=="variable"&&at(M,me)?"variable-2":st}}var ct={state:null,column:null,marked:null,cc:null};function Tt(){for(var M=arguments.length-1;M>=0;M--)ct.cc.push(arguments[M])}function q(){return Tt.apply(null,arguments),!0}function Ut(M,st){for(var Gt=st;Gt;Gt=Gt.next)if(Gt.name==M)return!0;return!1}function Ht(M){var st=ct.state;if(ct.marked="def",R){if(st.context){if(st.lexical.info=="var"&&st.context&&st.context.block){var Gt=ae(M,st.context);if(Gt!=null)return void(st.context=Gt)}else if(!Ut(M,st.localVars))return void(st.localVars=new Ee(M,st.localVars))}X.globalVars&&!Ut(M,st.globalVars)&&(st.globalVars=new Ee(M,st.globalVars))}}function ae(M,st){if(st){if(st.block){var Gt=ae(M,st.prev);return Gt?Gt==st.prev?st:new Ie(Gt,st.vars,!0):null}return Ut(M,st.vars)?st:new Ie(st.prev,new Ee(M,st.vars),!1)}return null}function Fe(M){return M=="public"||M=="private"||M=="protected"||M=="abstract"||M=="readonly"}function Ie(M,st,Gt){this.prev=M,this.vars=st,this.block=Gt}function Ee(M,st){this.name=M,this.next=st}var Ne=new Ee("this",new Ee("arguments",null));function Ce(){ct.state.context=new Ie(ct.state.context,ct.state.localVars,!1),ct.state.localVars=Ne}function Ve(){ct.state.context=new Ie(ct.state.context,ct.state.localVars,!0),ct.state.localVars=null}function ve(){ct.state.localVars=ct.state.context.vars,ct.state.context=ct.state.context.prev}function ye(M,st){var Gt=function(){var me=ct.state,Oe=me.indented;if(me.lexical.type=="stat")Oe=me.lexical.indented;else for(var an=me.lexical;an&&an.type==")"&&an.align;an=an.prev)Oe=an.indented;me.lexical=new et(Oe,ct.stream.column(),M,null,me.lexical,st)};return Gt.lex=!0,Gt}function we(){var M=ct.state;M.lexical.prev&&(M.lexical.type==")"&&(M.indented=M.lexical.indented),M.lexical=M.lexical.prev)}function xe(M){function st(Gt){return Gt==M?q():M==";"||Gt=="}"||Gt==")"||Gt=="]"?Tt():q(st)}return st}function ft(M,st){return M=="var"?q(ye("vardef",st),On,xe(";"),we):M=="keyword a"?q(ye("form"),fe,ft,we):M=="keyword b"?q(ye("form"),ft,we):M=="keyword d"?ct.stream.match(/^\s*$/,!1)?q():q(ye("stat"),He,xe(";"),we):M=="debugger"?q(xe(";")):M=="{"?q(ye("}"),Ve,pn,we,ve):M==";"?q():M=="if"?(ct.state.lexical.info=="else"&&ct.state.cc[ct.state.cc.length-1]==we&&ct.state.cc.pop()(),q(ye("form"),fe,ft,we,oi)):M=="function"?q(hr):M=="for"?q(ye("form"),Ve,Bo,ft,ve,we):M=="class"||dt&&st=="interface"?(ct.marked="keyword",q(ye("form",M=="class"?M:st),so,we)):M=="variable"?dt&&st=="declare"?(ct.marked="keyword",q(ft)):dt&&(st=="module"||st=="enum"||st=="type")&&ct.stream.match(/^\s*\w/,!1)?(ct.marked="keyword",st=="enum"?q(Gn):st=="type"?q(Wn,xe("operator"),Lt,xe(";")):q(ye("form"),Ln,xe("{"),ye("}"),pn,we,we)):dt&&st=="namespace"?(ct.marked="keyword",q(ye("form"),re,ft,we)):dt&&st=="abstract"?(ct.marked="keyword",q(ft)):q(ye("stat"),wt):M=="switch"?q(ye("form"),fe,xe("{"),ye("}","switch"),Ve,pn,we,we,ve):M=="case"?q(re,xe(":")):M=="default"?q(xe(":")):M=="catch"?q(ye("form"),Ce,ie,ft,we,ve):M=="export"?q(ye("stat"),ii,we):M=="import"?q(ye("stat"),ln,we):M=="async"?q(ft):st=="@"?q(re,ft):Tt(ye("stat"),re,xe(";"),we)}function ie(M){if(M=="(")return q(Gr,xe(")"))}function re(M,st){return oe(M,st,!1)}function he(M,st){return oe(M,st,!0)}function fe(M){return M!="("?Tt():q(ye(")"),He,xe(")"),we)}function oe(M,st,Gt){if(ct.state.fatArrowAt==ct.stream.start){var me=Gt?Yt:At;if(M=="(")return q(Ce,ye(")"),ze(Gr,")"),we,xe("=>"),me,ve);if(M=="variable")return Tt(Ce,Ln,xe("=>"),me,ve)}var Oe=Gt?Ge:nn;return H.hasOwnProperty(M)?q(Oe):M=="function"?q(hr,Oe):M=="class"||dt&&st=="interface"?(ct.marked="keyword",q(ye("form"),zo,we)):M=="keyword c"||M=="async"?q(Gt?he:re):M=="("?q(ye(")"),He,xe(")"),we,Oe):M=="operator"||M=="spread"?q(Gt?he:re):M=="["?q(ye("]"),cn,we,Oe):M=="{"?Ye(Mt,"}",null,Oe):M=="quasi"?Tt(bn,Oe):M=="new"?q(_(Gt)):q()}function He(M){return M.match(/[;\}\)\],]/)?Tt():Tt(re)}function nn(M,st){return M==","?q(He):Ge(M,st,!1)}function Ge(M,st,Gt){var me=Gt==0?nn:Ge,Oe=Gt==0?re:he;return M=="=>"?q(Ce,Gt?Yt:At,ve):M=="operator"?/\+\+|--/.test(st)||dt&&st=="!"?q(me):dt&&st=="<"&&ct.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?q(ye(">"),ze(Lt,">"),we,me):st=="?"?q(re,xe(":"),Oe):q(Oe):M=="quasi"?Tt(bn,me):M!=";"?M=="("?Ye(he,")","call",me):M=="."?q(Nt,me):M=="["?q(ye("]"),He,xe("]"),we,me):dt&&st=="as"?(ct.marked="keyword",q(Lt,me)):M=="regexp"?(ct.state.lastType=ct.marked="operator",ct.stream.backUp(ct.stream.pos-ct.stream.start-1),q(Oe)):void 0:void 0}function bn(M,st){return M!="quasi"?Tt():st.slice(st.length-2)!="${"?q(bn):q(He,Nn)}function Nn(M){if(M=="}")return ct.marked="string-2",ct.state.tokenize=Rt,q(bn)}function At(M){return k(ct.stream,ct.state),Tt(M=="{"?ft:re)}function Yt(M){return k(ct.stream,ct.state),Tt(M=="{"?ft:he)}function _(M){return function(st){return st=="."?q(M?z:I):st=="variable"&&dt?q($r,M?Ge:nn):Tt(M?he:re)}}function I(M,st){if(st=="target")return ct.marked="keyword",q(nn)}function z(M,st){if(st=="target")return ct.marked="keyword",q(Ge)}function wt(M){return M==":"?q(we,ft):Tt(nn,xe(";"),we)}function Nt(M){if(M=="variable")return ct.marked="property",q()}function Mt(M,st){return M=="async"?(ct.marked="property",q(Mt)):M=="variable"||ct.style=="keyword"?(ct.marked="property",st=="get"||st=="set"?q(ce):(dt&&ct.state.fatArrowAt==ct.stream.start&&(Gt=ct.stream.match(/^\s*:\s*/,!1))&&(ct.state.fatArrowAt=ct.stream.pos+Gt[0].length),q(ke))):M=="number"||M=="string"?(ct.marked=D?"property":ct.style+" property",q(ke)):M=="jsonld-keyword"?q(ke):dt&&Fe(st)?(ct.marked="keyword",q(Mt)):M=="["?q(re,ue,xe("]"),ke):M=="spread"?q(he,ke):st=="*"?(ct.marked="keyword",q(Mt)):M==":"?Tt(ke):void 0;var Gt}function ce(M){return M!="variable"?Tt(ke):(ct.marked="property",q(hr))}function ke(M){return M==":"?q(he):M=="("?Tt(hr):void 0}function ze(M,st,Gt){function me(Oe,an){if(Gt?Gt.indexOf(Oe)>-1:Oe==","){var _e=ct.state.lexical;return _e.info=="call"&&(_e.pos=(_e.pos||0)+1),q(function(An,In){return An==st||In==st?Tt():Tt(M)},me)}return Oe==st||an==st?q():Gt&&Gt.indexOf(";")>-1?Tt(M):q(xe(st))}return function(Oe,an){return Oe==st||an==st?q():Tt(M,me)}}function Ye(M,st,Gt){for(var me=3;me<arguments.length;me++)ct.cc.push(arguments[me]);return q(ye(st,Gt),ze(M,st),we)}function pn(M){return M=="}"?q():Tt(ft,pn)}function ue(M,st){if(dt){if(M==":")return q(Lt);if(st=="?")return q(ue)}}function J(M,st){if(dt&&(M==":"||st=="in"))return q(Lt)}function vt(M){if(dt&&M==":")return ct.stream.match(/^\s*\w+\s+is\b/,!1)?q(re,St,Lt):q(Lt)}function St(M,st){if(st=="is")return ct.marked="keyword",q()}function Lt(M,st){return st=="keyof"||st=="typeof"||st=="infer"||st=="readonly"?(ct.marked="keyword",q(st=="typeof"?he:Lt)):M=="variable"||st=="void"?(ct.marked="type",q(Ze)):st=="|"||st=="&"?q(Lt):M=="string"||M=="number"||M=="atom"?q(Ze):M=="["?q(ye("]"),ze(Lt,"]",","),we,Ze):M=="{"?q(ye("}"),Se,we,Ze):M=="("?q(ze(Sn,")"),pe,Ze):M=="<"?q(ze(Lt,">"),Lt):M=="quasi"?Tt(sn,Ze):void 0}function pe(M){if(M=="=>")return q(Lt)}function Se(M){return M.match(/[\}\)\]]/)?q():M==","||M==";"?q(Se):Tt(Qe,Se)}function Qe(M,st){return M=="variable"||ct.style=="keyword"?(ct.marked="property",q(Qe)):st=="?"||M=="number"||M=="string"?q(Qe):M==":"?q(Lt):M=="["?q(xe("variable"),J,xe("]"),Qe):M=="("?Tt(dn,Qe):M.match(/[;\}\)\],]/)?void 0:q()}function sn(M,st){return M!="quasi"?Tt():st.slice(st.length-2)!="${"?q(sn):q(Lt,Un)}function Un(M){if(M=="}")return ct.marked="string-2",ct.state.tokenize=Rt,q(sn)}function Sn(M,st){return M=="variable"&&ct.stream.match(/^\s*[?:]/,!1)||st=="?"?q(Sn):M==":"?q(Lt):M=="spread"?q(Sn):Tt(Lt)}function Ze(M,st){return st=="<"?q(ye(">"),ze(Lt,">"),we,Ze):st=="|"||M=="."||st=="&"?q(Lt):M=="["?q(Lt,xe("]"),Ze):st=="extends"||st=="implements"?(ct.marked="keyword",q(Lt)):st=="?"?q(Lt,xe(":"),Lt):void 0}function $r(M,st){if(st=="<")return q(ye(">"),ze(Lt,">"),we,Ze)}function lr(){return Tt(Lt,Wr)}function Wr(M,st){if(st=="=")return q(Lt)}function On(M,st){return st=="enum"?(ct.marked="keyword",q(Gn)):Tt(Ln,ue,$n,Ho)}function Ln(M,st){return dt&&Fe(st)?(ct.marked="keyword",q(Ln)):M=="variable"?(Ht(st),q()):M=="spread"?q(Ln):M=="["?Ye(qr,"]"):M=="{"?Ye(rr,"}"):void 0}function rr(M,st){return M!="variable"||ct.stream.match(/^\s*:/,!1)?(M=="variable"&&(ct.marked="property"),M=="spread"?q(Ln):M=="}"?Tt():M=="["?q(re,xe("]"),xe(":"),rr):q(xe(":"),Ln,$n)):(Ht(st),q($n))}function qr(){return Tt(Ln,$n)}function $n(M,st){if(st=="=")return q(he)}function Ho(M){if(M==",")return q(On)}function oi(M,st){if(M=="keyword b"&&st=="else")return q(ye("form","else"),ft,we)}function Bo(M,st){return st=="await"?q(Bo):M=="("?q(ye(")"),ko,we):void 0}function ko(M){return M=="var"?q(On,Sr):M=="variable"?q(Sr):Tt(Sr)}function Sr(M,st){return M==")"?q():M==";"?q(Sr):st=="in"||st=="of"?(ct.marked="keyword",q(re,Sr)):Tt(re,Sr)}function hr(M,st){return st=="*"?(ct.marked="keyword",q(hr)):M=="variable"?(Ht(st),q(hr)):M=="("?q(Ce,ye(")"),ze(Gr,")"),we,vt,ft,ve):dt&&st=="<"?q(ye(">"),ze(lr,">"),we,hr):void 0}function dn(M,st){return st=="*"?(ct.marked="keyword",q(dn)):M=="variable"?(Ht(st),q(dn)):M=="("?q(Ce,ye(")"),ze(Gr,")"),we,vt,ve):dt&&st=="<"?q(ye(">"),ze(lr,">"),we,dn):void 0}function Wn(M,st){return M=="keyword"||M=="variable"?(ct.marked="type",q(Wn)):st=="<"?q(ye(">"),ze(lr,">"),we):void 0}function Gr(M,st){return st=="@"&&q(re,Gr),M=="spread"?q(Gr):dt&&Fe(st)?(ct.marked="keyword",q(Gr)):dt&&M=="this"?q(ue,$n):Tt(Ln,ue,$n)}function zo(M,st){return M=="variable"?so(M,st):Zn(M,st)}function so(M,st){if(M=="variable")return Ht(st),q(Zn)}function Zn(M,st){return st=="<"?q(ye(">"),ze(lr,">"),we,Zn):st=="extends"||st=="implements"||dt&&M==","?(st=="implements"&&(ct.marked="keyword"),q(dt?Lt:re,Zn)):M=="{"?q(ye("}"),qn,we):void 0}function qn(M,st){return M=="async"||M=="variable"&&(st=="static"||st=="get"||st=="set"||dt&&Fe(st))&&ct.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(ct.marked="keyword",q(qn)):M=="variable"||ct.style=="keyword"?(ct.marked="property",q(or,qn)):M=="number"||M=="string"?q(or,qn):M=="["?q(re,ue,xe("]"),or,qn):st=="*"?(ct.marked="keyword",q(qn)):dt&&M=="("?Tt(dn,qn):M==";"||M==","?q(qn):M=="}"?q():st=="@"?q(re,qn):void 0}function or(M,st){if(st=="!"||st=="?")return q(or);if(M==":")return q(Lt,$n);if(st=="=")return q(he);var Gt=ct.state.lexical.prev;return Tt(Gt&&Gt.info=="interface"?dn:hr)}function ii(M,st){return st=="*"?(ct.marked="keyword",q(mr,xe(";"))):st=="default"?(ct.marked="keyword",q(re,xe(";"))):M=="{"?q(ze(po,"}"),mr,xe(";")):Tt(ft)}function po(M,st){return st=="as"?(ct.marked="keyword",q(xe("variable"))):M=="variable"?Tt(he,po):void 0}function ln(M){return M=="string"?q():M=="("?Tt(re):M=="."?Tt(nn):Tt(je,gr,mr)}function je(M,st){return M=="{"?Ye(je,"}"):(M=="variable"&&Ht(st),st=="*"&&(ct.marked="keyword"),q(si))}function gr(M){if(M==",")return q(je,gr)}function si(M,st){if(st=="as")return ct.marked="keyword",q(je)}function mr(M,st){if(st=="from")return ct.marked="keyword",q(re)}function cn(M){return M=="]"?q():Tt(ze(he,"]"))}function Gn(){return Tt(ye("form"),Ln,xe("{"),ye("}"),ze(Po,"}"),we,we)}function Po(){return Tt(Ln,$n)}function ai(M,st){return M.lastType=="operator"||M.lastType==","||Dt.test(st.charAt(0))||/[,.]/.test(st.charAt(0))}function ne(M,st,Gt){return st.tokenize==_t&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(st.lastType)||st.lastType=="quasi"&&/\{\s*$/.test(M.string.slice(0,M.pos-(Gt||0)))}return Ce.lex=Ve.lex=!0,ve.lex=!0,we.lex=!0,{startState:function(M){var st={tokenize:_t,lastType:"sof",cc:[],lexical:new et((M||0)-S,0,"block",!1),localVars:X.localVars,context:X.localVars&&new Ie(null,null,!1),indented:M||0};return X.globalVars&&typeof X.globalVars=="object"&&(st.globalVars=X.globalVars),st},token:function(M,st){if(M.sol()&&(st.lexical.hasOwnProperty("align")||(st.lexical.align=!1),st.indented=M.indentation(),k(M,st)),st.tokenize!=Jt&&M.eatSpace())return null;var Gt=st.tokenize(M,st);return nt=="comment"?Gt:(st.lastType=nt!="operator"||G!="++"&&G!="--"?nt:"incdec",Pt(st,Gt,nt,G,M))},indent:function(M,st){if(M.tokenize==Jt||M.tokenize==Rt)return K.Pass;if(M.tokenize!=_t)return 0;var Gt,me=st&&st.charAt(0),Oe=M.lexical;if(!/^\s*else\b/.test(st))for(var an=M.cc.length-1;an>=0;--an){var _e=M.cc[an];if(_e==we)Oe=Oe.prev;else if(_e!=oi&&_e!=ve)break}for(;(Oe.type=="stat"||Oe.type=="form")&&(me=="}"||(Gt=M.cc[M.cc.length-1])&&(Gt==nn||Gt==Ge)&&!/^[,\.=+\-*:?[\(]/.test(st));)Oe=Oe.prev;T&&Oe.type==")"&&Oe.prev.type=="stat"&&(Oe=Oe.prev);var An=Oe.type,In=me==An;return An=="vardef"?Oe.indented+(M.lastType=="operator"||M.lastType==","?Oe.info.length+1:0):An=="form"&&me=="{"?Oe.indented:An=="form"?Oe.indented+S:An=="stat"?Oe.indented+(ai(M,st)?T||S:0):Oe.info!="switch"||In||X.doubleIndentSwitch==0?Oe.align?Oe.column+(In?0:1):Oe.indented+(In?0:S):Oe.indented+(/^(?:case|default)\b/.test(st)?S:2*S)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:F?null:"/*",blockCommentEnd:F?null:"*/",blockCommentContinue:F?null:" * ",lineComment:F?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:F?"json":"javascript",jsonldMode:D,jsonMode:F,expressionAllowed:ne,skipExpression:function(M){Pt(M,"atom","atom","true",new K.StringStream("",2,null))}}}),K.registerHelper("wordChars","javascript",/[\w$]/),K.defineMIME("text/javascript","javascript"),K.defineMIME("text/ecmascript","javascript"),K.defineMIME("application/javascript","javascript"),K.defineMIME("application/x-javascript","javascript"),K.defineMIME("application/ecmascript","javascript"),K.defineMIME("application/json",{name:"javascript",json:!0}),K.defineMIME("application/x-json",{name:"javascript",json:!0}),K.defineMIME("application/manifest+json",{name:"javascript",json:!0}),K.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),K.defineMIME("text/typescript",{name:"javascript",typescript:!0}),K.defineMIME("application/typescript",{name:"javascript",typescript:!0})})(N(631))},589:(y,tt,N)=>{(function(K){var gt={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},X={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};K.defineMode("xml",function(nt,G){var S,T,D=nt.indentUnit,F={},R=G.htmlMode?gt:X;for(var dt in R)F[dt]=R[dt];for(var dt in G)F[dt]=G[dt];function bt(q,Ut){function Ht(Fe){return Ut.tokenize=Fe,Fe(q,Ut)}var ae=q.next();return ae=="<"?q.eat("!")?q.eat("[")?q.match("CDATA[")?Ht($t("atom","]]>")):null:q.match("--")?Ht($t("comment","-->")):q.match("DOCTYPE",!0,!0)?(q.eatWhile(/[\w\._\-]/),Ht(de(1))):null:q.eat("?")?(q.eatWhile(/[\w\._\-]/),Ut.tokenize=$t("meta","?>"),"meta"):(S=q.eat("/")?"closeTag":"openTag",Ut.tokenize=It,"tag bracket"):ae=="&"?(q.eat("#")?q.eat("x")?q.eatWhile(/[a-fA-F\d]/)&&q.eat(";"):q.eatWhile(/[\d]/)&&q.eat(";"):q.eatWhile(/[\w\.\-:]/)&&q.eat(";"))?"atom":"error":(q.eatWhile(/[^&<]/),null)}function It(q,Ut){var Ht=q.next();if(Ht==">"||Ht=="/"&&q.eat(">"))return Ut.tokenize=bt,S=Ht==">"?"endTag":"selfcloseTag","tag bracket";if(Ht=="=")return S="equals",null;if(Ht=="<"){Ut.tokenize=bt,Ut.state=Rt,Ut.tagName=Ut.tagStart=null;var ae=Ut.tokenize(q,Ut);return ae?ae+" tag error":"tag error"}return/[\'\"]/.test(Ht)?(Ut.tokenize=Dt(Ht),Ut.stringStartCol=q.column(),Ut.tokenize(q,Ut)):(q.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Dt(q){var Ut=function(Ht,ae){for(;!Ht.eol();)if(Ht.next()==q){ae.tokenize=It;break}return"string"};return Ut.isInAttribute=!0,Ut}function $t(q,Ut){return function(Ht,ae){for(;!Ht.eol();){if(Ht.match(Ut)){ae.tokenize=bt;break}Ht.next()}return q}}function de(q){return function(Ut,Ht){for(var ae;(ae=Ut.next())!=null;){if(ae=="<")return Ht.tokenize=de(q+1),Ht.tokenize(Ut,Ht);if(ae==">"){if(q==1){Ht.tokenize=bt;break}return Ht.tokenize=de(q-1),Ht.tokenize(Ut,Ht)}}return"meta"}}function Ct(q){return q&&q.toLowerCase()}function _t(q,Ut,Ht){this.prev=q.context,this.tagName=Ut||"",this.indent=q.indented,this.startOfLine=Ht,(F.doNotIndent.hasOwnProperty(Ut)||q.context&&q.context.noIndent)&&(this.noIndent=!0)}function Wt(q){q.context&&(q.context=q.context.prev)}function Jt(q,Ut){for(var Ht;;){if(!q.context||(Ht=q.context.tagName,!F.contextGrabbers.hasOwnProperty(Ct(Ht))||!F.contextGrabbers[Ct(Ht)].hasOwnProperty(Ct(Ut))))return;Wt(q)}}function Rt(q,Ut,Ht){return q=="openTag"?(Ht.tagStart=Ut.column(),Y):q=="closeTag"?k:Rt}function Y(q,Ut,Ht){return q=="word"?(Ht.tagName=Ut.current(),T="tag",at):F.allowMissingTagName&&q=="endTag"?(T="tag bracket",at(q,Ut,Ht)):(T="error",Y)}function k(q,Ut,Ht){if(q=="word"){var ae=Ut.current();return Ht.context&&Ht.context.tagName!=ae&&F.implicitlyClosed.hasOwnProperty(Ct(Ht.context.tagName))&&Wt(Ht),Ht.context&&Ht.context.tagName==ae||F.matchClosing===!1?(T="tag",H):(T="tag error",et)}return F.allowMissingTagName&&q=="endTag"?(T="tag bracket",H(q,Ut,Ht)):(T="error",et)}function H(q,Ut,Ht){return q!="endTag"?(T="error",H):(Wt(Ht),Rt)}function et(q,Ut,Ht){return T="error",H(q,Ut,Ht)}function at(q,Ut,Ht){if(q=="word")return T="attribute",Pt;if(q=="endTag"||q=="selfcloseTag"){var ae=Ht.tagName,Fe=Ht.tagStart;return Ht.tagName=Ht.tagStart=null,q=="selfcloseTag"||F.autoSelfClosers.hasOwnProperty(Ct(ae))?Jt(Ht,ae):(Jt(Ht,ae),Ht.context=new _t(Ht,ae,Fe==Ht.indented)),Rt}return T="error",at}function Pt(q,Ut,Ht){return q=="equals"?ct:(F.allowMissing||(T="error"),at(q,Ut,Ht))}function ct(q,Ut,Ht){return q=="string"?Tt:q=="word"&&F.allowUnquoted?(T="string",at):(T="error",at(q,Ut,Ht))}function Tt(q,Ut,Ht){return q=="string"?Tt:at(q,Ut,Ht)}return bt.isInText=!0,{startState:function(q){var Ut={tokenize:bt,state:Rt,indented:q||0,tagName:null,tagStart:null,context:null};return q!=null&&(Ut.baseIndent=q),Ut},token:function(q,Ut){if(!Ut.tagName&&q.sol()&&(Ut.indented=q.indentation()),q.eatSpace())return null;S=null;var Ht=Ut.tokenize(q,Ut);return(Ht||S)&&Ht!="comment"&&(T=null,Ut.state=Ut.state(S||Ht,q,Ut),T&&(Ht=T=="error"?Ht+" error":T)),Ht},indent:function(q,Ut,Ht){var ae=q.context;if(q.tokenize.isInAttribute)return q.tagStart==q.indented?q.stringStartCol+1:q.indented+D;if(ae&&ae.noIndent)return K.Pass;if(q.tokenize!=It&&q.tokenize!=bt)return Ht?Ht.match(/^(\s*)/)[0].length:0;if(q.tagName)return F.multilineTagIndentPastTag!==!1?q.tagStart+q.tagName.length+2:q.tagStart+D*(F.multilineTagIndentFactor||1);if(F.alignCDATA&&/<!\[CDATA\[/.test(Ut))return 0;var Fe=Ut&&/^<(\/)?([\w_:\.-]*)/.exec(Ut);if(Fe&&Fe[1])for(;ae;){if(ae.tagName==Fe[2]){ae=ae.prev;break}if(!F.implicitlyClosed.hasOwnProperty(Ct(ae.tagName)))break;ae=ae.prev}else if(Fe)for(;ae;){var Ie=F.contextGrabbers[Ct(ae.tagName)];if(!Ie||!Ie.hasOwnProperty(Ct(Fe[2])))break;ae=ae.prev}for(;ae&&ae.prev&&!ae.startOfLine;)ae=ae.prev;return ae?ae.indent+D:q.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:F.htmlMode?"html":"xml",helperType:F.htmlMode?"html":"xml",skipAttribute:function(q){q.state==ct&&(q.state=at)},xmlCurrentTag:function(q){return q.tagName?{name:q.tagName,close:q.type=="closeTag"}:null},xmlCurrentContext:function(q){for(var Ut=[],Ht=q.context;Ht;Ht=Ht.prev)Ut.push(Ht.tagName);return Ut.reverse()}}}),K.defineMIME("text/xml","xml"),K.defineMIME("application/xml","xml"),K.mimeModes.hasOwnProperty("text/html")||K.defineMIME("text/html",{name:"xml",htmlMode:!0})})(N(631))},858:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>K});const K={run:function(gt){gt.DomComponents.clear(),gt.CssComposer.clear()}}},884:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>nt});var K=N(50),gt=N(163),X=N(668);const nt={run:function(G){(0,K.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=G,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(G){this.toggleMove(),this.disableDragger()},onKeyUp:function(G){(0,gt.getKeyChar)(G)===" "&&this.editor.stopCommand(this.id)},enableDragger:function(G){this.toggleDragger(1,G)},disableDragger:function(G){this.toggleDragger(0,G)},toggleDragger:function(G,S){var T=this.canvasModel,D=this.em,F=this.dragger,R=G?"add":"remove";this.getCanvas().classList[R]("".concat(this.ppfx,"is__grabbing")),F||(F=new X.Z({getPosition:function(){return{x:T.get("x"),y:T.get("y")}},setPosition:function(dt){var bt=dt.x,It=dt.y;T.set({x:bt,y:It})},onStart:function(dt,bt){D.trigger("canvas:move:start",bt)},onDrag:function(dt,bt){D.trigger("canvas:move",bt)},onEnd:function(dt,bt){D.trigger("canvas:move:end",bt)}}),this.dragger=F),G?F.start(S):F.stop()},toggleMove:function(G){var S=this.ppfx,T=G?"add":"remove",D=G?"on":"off",F={on:gt.on,off:gt.off},R=this.getCanvas(),dt=["".concat(S,"is__grab")];!G&&dt.push("".concat(S,"is__grabbing")),dt.forEach(function(bt){return R.classList[T](bt)}),F[D](document,"keyup",this.onKeyUp),F[D](R,"mousedown",this.enableDragger),F[D](document,"mouseup",this.disableDragger)}}},790:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>G,defineCommand:()=>nt});var K,gt=N(346),X=(K=function(S,T){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var R in F)Object.prototype.hasOwnProperty.call(F,R)&&(D[R]=F[R])},K(S,T)},function(S,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function D(){this.constructor=S}K(S,T),S.prototype=T===null?Object.create(T):(D.prototype=T.prototype,new D)});function nt(S){return S}const G=function(S){function T(D){var F=S.call(this,0)||this;F.config=D||{},F.em=F.config.em||{};var R=F.config.stylePrefix;return F.pfx=R,F.ppfx=F.config.pStylePrefix,F.hoverClass="".concat(R,"hover"),F.badgeClass="".concat(R,"badge"),F.plhClass="".concat(R,"placeholder"),F.freezClass="".concat(F.ppfx,"freezed"),F.canvas=F.em.Canvas,F.init(F.config),F}return X(T,S),T.prototype.onFrameScroll=function(D){},T.prototype.getCanvas=function(){return this.canvas.getElement()},T.prototype.getCanvasBody=function(){return this.canvas.getBody()},T.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},T.prototype.offset=function(D){var F=D.getBoundingClientRect();return{top:F.top+D.ownerDocument.body.scrollTop,left:F.left+D.ownerDocument.body.scrollLeft}},T.prototype.init=function(D){},T.prototype.callRun=function(D,F){F===void 0&&(F={});var R=this.id;if(D.trigger("run:".concat(R,":before"),F),!F||!F.abort){var dt=F.sender||D,bt=this.run(D,dt,F);return D.trigger("run:".concat(R),bt,F),D.trigger("run",R,bt,F),bt}D.trigger("abort:".concat(R),F)},T.prototype.callStop=function(D,F){F===void 0&&(F={});var R=this.id,dt=F.sender||D;D.trigger("stop:".concat(R,":before"),F);var bt=this.stop(D,dt,F);return D.trigger("stop:".concat(R),bt,F),D.trigger("stop",R,bt,F),bt},T.prototype.stopCommand=function(D){this.em.Commands.stop(this.id,D)},T.prototype.run=function(D,F,R){},T.prototype.stop=function(D,F,R){},T}(gt.Hn)},180:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>X});var K=N(50),gt=function(nt,G,S){if(S||arguments.length===2)for(var T,D=0,F=G.length;D<F;D++)!T&&D in G||(T||(T=Array.prototype.slice.call(G,0,D)),T[D]=G[D]);return nt.concat(T||Array.prototype.slice.call(G))};const X={run:function(nt,G,S){var T=this;S===void 0&&(S={});var D=[],F=S.component||nt.getSelectedAll();return(F=(0,K.isArray)(F)?gt([],F,!0):[F]).filter(Boolean).forEach(function(R){if(!R.get("removable"))return D.push(R),T.em.logWarning("The element is not removable",{component:R});R.remove()}),nt.select(D),F}}},544:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>G});var K=N(50),gt=N(668),X=function(){return X=Object.assign||function(S){for(var T,D=1,F=arguments.length;D<F;D++)for(var R in T=arguments[D])Object.prototype.hasOwnProperty.call(T,R)&&(S[R]=T[R]);return S},X.apply(this,arguments)},nt="dmode";const G={run:function(S,T,D){var F=this;D===void 0&&(D={}),(0,K.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var R=D.target,dt=D.event,bt=D.mode,It=D.dragger,Dt=It===void 0?{}:It,$t=R.getEl(),de=X({doc:$t.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return F.guidesStatic},guidesTarget:function(){return F.guidesTarget}},Dt);this.setupGuides(),this.opts=D,this.editor=S,this.em=S.getModel(),this.target=R,this.isTran=bt=="translate",this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var Ct=this.dragger;return Ct?Ct.setOptions(de):(Ct=new gt.Z(de),this.dragger=Ct),dt&&Ct.start(dt),this.toggleDrag(1),this.em.trigger("".concat(nt,":start"),this.getEventOpts()),Ct},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(S){var T=S.guide;T&&T.parentNode.removeChild(T)}),this.guides=[]},getGuidesContainer:function(){var S=this,T=this.guidesEl;if(!T){var D=this,F=D.editor,R=D.em,dt=D.opts,bt=F.getConfig().stylePrefix,It=document.createElement("div"),Dt=document.createElement("div"),$t='<div class="'.concat(bt,"guide-info__line ").concat(bt,`danger-bg">
        <div class="`).concat(bt,"guide-info__content ").concat(bt,`danger-color"></div>
      </div>`);(T=document.createElement("div")).className="".concat(bt,"guides"),It.className="".concat(bt,"guide-info ").concat(bt,"guide-info__x"),Dt.className="".concat(bt,"guide-info ").concat(bt,"guide-info__y"),It.innerHTML=$t,Dt.innerHTML=$t,T.appendChild(It),T.appendChild(Dt),F.Canvas.getGlobalToolsEl().appendChild(T),this.guidesEl=T,this.elGuideInfoX=It,this.elGuideInfoY=Dt,this.elGuideInfoContentX=It.querySelector(".".concat(bt,"guide-info__content")),this.elGuideInfoContentY=Dt.querySelector(".".concat(bt,"guide-info__content")),R.on("canvas:update frame:scroll",(0,K.debounce)(function(){var de;S.updateGuides(),dt.debug&&((de=S.guides)===null||de===void 0||de.forEach(function(Ct){return S.renderGuide(Ct)}))},200))}return T},getGuidesStatic:function(){var S=this,T=[],D=this.target.getEl(),F=D.parentNode,R=F===void 0?{}:F;return(0,K.each)(R.children,function(dt){return T=T.concat(D!==dt?S.getElementGuides(dt):[])}),T.concat(this.getElementGuides(R))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(S){var T,D,F=this;(S||this.guides).forEach(function(R){var dt=R.origin,bt=T===dt?D:F.getElementPos(dt);T=dt,D=bt,(0,K.each)(F.getGuidePosUpdate(R,bt),function(It,Dt){return R[Dt]=It}),R.originRect=bt})},getGuidePosUpdate:function(S,T){var D={},F=T.top,R=T.height,dt=T.left,bt=T.width;switch(S.type){case"t":D.y=F;break;case"b":D.y=F+R;break;case"l":D.x=dt;break;case"r":D.x=dt+bt;break;case"x":D.x=dt+bt/2;break;case"y":D.y=F+R/2}return D},renderGuide:function(S){S===void 0&&(S={});var T=S.guide||document.createElement("div"),D="px",F=S.active?2:1,R=T.children[0];return T.style="position: absolute; background-color: ".concat(S.active?"green":"red",";"),T.children.length||((R=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",T.appendChild(R)),S.y?(T.style.width="100%",T.style.height="".concat(F).concat(D),T.style.top="".concat(S.y).concat(D),T.style.left=0):(T.style.width="".concat(F).concat(D),T.style.height="100%",T.style.left="".concat(S.x).concat(D),T.style.top="0".concat(D)),!S.guide&&this.guidesContainer.appendChild(T),T},getElementPos:function(S){return this.editor.Canvas.getElementPos(S,{noScroll:1})},getElementGuides:function(S){var T=this,D=this.opts,F=this.getElementPos(S),R=F.top,dt=F.height,bt=F.left,It=F.width,Dt=[{type:"t",y:R},{type:"b",y:R+dt},{type:"l",x:bt},{type:"r",x:bt+It},{type:"x",x:bt+It/2},{type:"y",y:R+dt/2}].map(function($t){return X(X({},$t),{origin:S,originRect:F,guide:D.debug&&T.renderGuide($t)})});return Dt.forEach(function($t){var de;return(de=T.guides)===null||de===void 0?void 0:de.push($t)}),Dt},getTranslate:function(S,T){T===void 0&&(T="x");var D=0;return(S||"").split(" ").forEach(function(F){var R=F.trim(),dt="translate".concat(T.toUpperCase(),"(");R.indexOf(dt)===0&&(D=parseFloat(R.replace(dt,"")))}),D},setTranslate:function(S,T,D){var F="translate".concat(T.toUpperCase(),"("),R="".concat(F).concat(D,")"),dt=(S||"").split(" ").map(function(bt){return bt.trim().indexOf(F)===0&&(bt=R),bt}).join(" ");return dt.indexOf(F)<0&&(dt+=" ".concat(R)),dt},getPosition:function(){var S=this.target,T=this.isTran,D=S.getStyle(),F=D.left,R=D.top,dt=D.transform,bt=0,It=0;return T?(bt=this.getTranslate(dt),It=this.getTranslate(dt,"y")):(bt=parseFloat(F||0),It=parseFloat(R||0)),{x:bt,y:It}},setPosition:function(S){var T=S.x,D=S.y,F=S.end,R=S.position,dt=S.width,bt=S.height,It=this,Dt=It.target,$t=It.isTran,de=It.em,Ct="px",_t=F?"":1,Wt="".concat(T).concat(Ct),Jt="".concat(D).concat(Ct),Rt={};if($t){var Y=Dt.getStyle().transform||"";Y=this.setTranslate(Y,"x",Wt),Rt={transform:Y=this.setTranslate(Y,"y",Jt),en:_t},Dt.addStyle(Rt,{avoidStore:!F})}else{var k={position:R,width:dt,height:bt},H={left:Wt,top:Jt,en:_t};(0,K.keys)(k).forEach(function(et){var at=k[et];at&&(H[et]=at)}),Rt=H,Dt.addStyle(Rt,{avoidStore:!F})}de.getSelected()&&(0,K.keys)(Rt).forEach(function(et){return de.trigger("update:component:style:".concat(et))})},_getDragData:function(){var S=this.target;return{target:S,parent:S.parent(),index:S.index()}},onStart:function(S){var T=this,D=T.target,F=T.editor,R=T.isTran,dt=T.opts,bt=dt.center,It=dt.onStart,Dt=F.Canvas,$t=D.getStyle(),de="absolute",Ct=[de,"relative"];if(It&&It(this._getDragData()),!R&&$t.position!==de){var _t=Dt.offset(D.getEl()),Wt=_t.left,Jt=_t.top,Rt=_t.width,Y=_t.height,k=D.parent(),H=void 0;do{var et=k.getStyle();H=Ct.indexOf(et.position)>=0?k:null,k=k.parent()}while(k&&!H);if(bt){var at=Dt.getMouseRelativeCanvas(S);Wt=at.x,Jt=at.y}else if(H){var Pt=Dt.offset(H.getEl());Wt-=Pt.left,Jt-=Pt.top}this.setPosition({x:Wt,y:Jt,width:"".concat(Rt,"px"),height:"".concat(Y,"px"),position:de})}},onDrag:function(){for(var S=this,T=[],D=0;D<arguments.length;D++)T[D]=arguments[D];var F=this,R=F.guidesTarget,dt=F.opts,bt=dt.onDrag;this.updateGuides(R),dt.debug&&R.forEach(function(It){return S.renderGuide(It)}),dt.guidesInfo&&this.renderGuideInfo(R.filter(function(It){return It.active})),bt&&bt(this._getDragData())},onEnd:function(S,T,D){D===void 0&&(D={});var F=this,R=F.editor,dt=F.opts,bt=F.id,It=dt.onEnd;It&&It(S,D,X(X({event:S},D),this._getDragData())),R.stopCommand(bt),this.hideGuidesInfo(),this.em.trigger("".concat(nt,":end"),this.getEventOpts())},hideGuidesInfo:function(){var S=this;["X","Y"].forEach(function(T){var D=S["elGuideInfo".concat(T)];D&&(D.style.display="none")})},renderGuideInfo:function(S){var T=this;S===void 0&&(S=[]);var D=this.guidesStatic;this.hideGuidesInfo(),S.forEach(function(F){var R=F.origin,dt=F.x,bt=T.getElementPos(R),It=(0,K.isUndefined)(dt)?"y":"x",Dt=It==="y",$t=bt[Dt?"left":"top"],de=bt.rect[Dt?"left":"top"],Ct=Dt?$t+bt.width:$t+bt.height,_t=Dt?de+bt.rect.width:de+bt.rect.height,Wt=T["elGuideInfo".concat(It.toUpperCase())],Jt=T["elGuideInfoContent".concat(It.toUpperCase())],Rt=Wt.style,Y=D==null?void 0:D.filter(function(Ve){return Ve.type===F.type}).map(function(Ve){var ve=Ve.originRect,ye=ve.left,we=ve.width,xe=ve.top,ft=ve.height,ie=Dt?ye+we:xe+ft;return{gap:ie<$t?$t-ie:(Dt?ye:xe)-Ct,guide:Ve}}).filter(function(Ve){return Ve.gap>0}).sort(function(Ve,ve){return Ve.gap-ve.gap}).map(function(Ve){return Ve.guide})[0];if(Y){var k=Y.originRect,H=k.left,et=k.width,at=k.top,Pt=k.height,ct=k.rect,Tt=Dt?H<bt.left:at<bt.top,q=Dt?H:at,Ut=Dt?ct.left:ct.top,Ht=Dt?H+et:at+Pt,ae=Dt?ct.left+ct.width:ct.top+ct.height,Fe=Dt?F.y:F.x,Ie=Tt?Ht:Ct,Ee="".concat(Fe,"px"),Ne=Tt?$t-Ht:q-Ct,Ce=Tt?de-ae:Ut-_t;Rt.display="",Rt[Dt?"top":"left"]=Ee,Rt[Dt?"left":"top"]="".concat(Ie,"px"),Rt[Dt?"width":"height"]="".concat(Ne,"px"),Jt.innerHTML="".concat(Math.round(Ce),"px"),T.em.trigger("".concat(nt,":active"),X(X({},T.getEventOpts()),{guide:F,guidesStatic:D,matched:Y,posFirst:Fe,posSecond:Ie,size:Ne,sizeRaw:Ce,elGuideInfo:Wt,elGuideInfoCnt:Jt}))}})},toggleDrag:function(S){var T=this.ppfx,D=this.editor,F=S?"add":"remove",R=["".concat(T,"is__grabbing")],dt=D.Canvas,bt=dt.getBody();R.forEach(function(It){return bt.classList[F](It)}),dt[S?"startAutoscroll":"stopAutoscroll"]()}}},236:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>K});const K={run:function(gt){if(gt.Canvas.hasFocus()){var X=[];gt.getSelectedAll().forEach(function(nt){var G=nt.components(),S=G&&G.filter(function(T){return T.get("selectable")})[0];S&&X.push(S)}),X.length&&gt.select(X)}}}},368:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>K});const K={run:function(gt,X,nt){if(nt===void 0&&(nt={}),gt.Canvas.hasFocus()||nt.force){var G=[];gt.getSelectedAll().forEach(function(S){for(var T=S.parent();T&&!T.get("selectable");)T=T.parent();T&&G.push(T)}),G.length&&gt.select(G)}}}},243:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>K});const K={run:function(gt){if(gt.Canvas.hasFocus()){var X=[];gt.getSelectedAll().forEach(function(nt){var G=nt.parent();if(G){var S,T=G.components().length,D=0,F=0;do D++,S=(F=nt.index()+D)<=T?G.getChildAt(F):null;while(S&&!S.get("selectable"));X.push(S||nt)}}),X.length&&gt.select(X)}}}},400:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>K});const K={run:function(gt){if(gt.Canvas.hasFocus()){var X=[];gt.getSelectedAll().forEach(function(nt){var G=nt.parent();if(G){var S,T=0,D=0;do T++,S=(D=nt.index()-T)>=0?G.getChildAt(D):null;while(S&&!S.get("selectable"));X.push(S||nt)}}),X.length&&gt.select(X)}}}},910:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=N(50);const gt={run:function(X,nt,G){G===void 0&&(G={});var S=G.target,T=[];if(!S.get("styles"))return T;var D=S.get("type"),F=X.Pages.getAllWrappers();if(!(0,K.flatten)(F.map(function(dt){return dt.findType(D)})).length){var R=X.CssComposer.getAll();T=R.filter(function(dt){return dt.get("group")==="cmp:".concat(D)}),R.remove(T)}return T}}},744:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=function(X,nt,G){if(G||arguments.length===2)for(var S,T=0,D=nt.length;T<D;T++)!S&&T in nt||(S||(S=Array.prototype.slice.call(nt,0,T)),S[T]=nt[T]);return X.concat(S||Array.prototype.slice.call(nt))};const gt={run:function(X){var nt=X.getModel(),G=K([],X.getSelectedAll(),!0);G.length&&nt.set("clipboard",G)}}},517:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>nt});var K=N(50),gt=N(895),X=N(407);const nt=(0,K.extend)({},X.default,{init:function(){(0,K.bindAll)(this,"startDelete","stopDelete","onDelete"),this.hoverClass=this.pfx+"hover-delete",this.badgeClass=this.pfx+"badge-red"},enable:function(){this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function(G){G.stopPropagation();var S=(0,gt.default)(G.target);S.data("model").get("removable")&&(S.addClass(this.hoverClass),this.attachBadge(S.get(0)))},stopDelete:function(G){G.stopPropagation(),(0,gt.default)(G.target).removeClass(this.hoverClass),this.badge&&this.badge.css({left:-1e3,top:-1e3})},onDelete:function(G){G.stopPropagation();var S=(0,gt.default)(G.target);S.data("model").get("removable")&&(S.data("model").destroy(),this.removeBadge(),this.clean())},updateBadgeLabel:function(G){this.badge.html("Remove "+G.getName())}})},457:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=N(895);const gt={run:function(X,nt){var G=this;nt&&nt.set&&nt.set("active",0);var S=X.getConfig(),T=X.Modal,D=S.stylePrefix;if(this.cm=X.CodeManager||null,!this.$editors){var F=this.buildEditor("htmlmixed","hopscotch","HTML"),R=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=F.el,this.cssEditor=R.el;var dt=(0,K.default)('<div class="'.concat(D,'export-dl"></div>'));dt.append(F.$el).append(R.$el),this.$editors=dt}T.open({title:S.textViewCode,content:this.$editors}).getModel().once("change:open",function(){return X.stopCommand("".concat(G.id))}),this.htmlEditor.setContent(X.getHtml()),this.cssEditor.setContent(X.getCss())},stop:function(X){var nt=X.Modal;nt&&nt.close()},buildEditor:function(X,nt,G){var S=document.createElement("textarea");!this.codeMirror&&(this.codeMirror=this.cm.getViewer("CodeMirror"));var T=this.codeMirror.clone().set({label:G,codeName:X,theme:nt,input:S}),D=new this.cm.EditorView({model:T,config:this.cm.getConfig()}).render().$el;return T.init(S),{el:T,$el:D}}}},975:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=N(50);const gt={isEnabled:function(){var X=document;return!!(X.fullscreenElement||X.webkitFullscreenElement||X.mozFullScreenElement)},enable:function(X){var nt="";return X.requestFullscreen?X.requestFullscreen():X.webkitRequestFullscreen?(nt="webkit",X.webkitRequestFullscreen()):X.mozRequestFullScreen?(nt="moz",X.mozRequestFullScreen()):X.msRequestFullscreen&&X.msRequestFullscreen(),nt},disable:function(){var X=document;this.isEnabled()&&(X.exitFullscreen?X.exitFullscreen():X.webkitExitFullscreen?X.webkitExitFullscreen():X.mozCancelFullScreen?X.mozCancelFullScreen():X.msExitFullscreen&&X.msExitFullscreen())},fsChanged:function(X){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(X||"","fullscreenchange"),this.fsChanged))},run:function(X,nt,G){G===void 0&&(G={}),this.sender=nt;var S=G.target,T=(0,K.isElement)(S)?S:document.querySelector(S),D=this.enable(T||X.getContainer());this.fsChanged=this.fsChanged.bind(this,D),document.addEventListener(D+"fullscreenchange",this.fsChanged),X.trigger("change:canvasOffset")},stop:function(X,nt){nt&&nt.set&&nt.set("active",!1),this.disable(),X&&X.trigger("change:canvasOffset")}}},191:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>S});var K=N(50),gt=N(895),X=N(163),nt=N(407),G=N(189);const S=(0,K.extend)({},G.default,nt.default,{init:function(T){nt.default.init.apply(this,arguments),(0,K.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=T,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var T=[],D=0;D<arguments.length;D++)T[D]=arguments[D];nt.default.enable.apply(this,T),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var F=this.$wrapper;F.css("cursor","move"),F.on("mousedown",this.initSorter),F.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(T){var D=(0,gt.default)(T.target).data("model").get("draggable");D&&(this.cacheEl=null,this.startSelectPosition(T.target,this.frameEl.contentDocument),this.sorter.draggable=D,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,X.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(T){var D=T.get("draggable");if(D){this.cacheEl=null;var F=T.view.el;this.startSelectPosition(F,this.frameEl.contentDocument),this.sorter.draggable=D,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,X.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(T){this.cacheEl=null;var D=T[T.length-1],F=(this.em.get("currentFrame")||{}).model,R=D.getEl(F),dt=R.ownerDocument;this.startSelectPosition(R,dt,{onStart:this.onStart}),this.sorter.draggable=D.get("draggable"),this.sorter.toMove=T,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,X.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,X.off)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,X.off)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(T,D){},rollback:function(T,D){((T.which||T.keyCode)==27||D)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,gt.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,gt.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var T=[],D=0;D<arguments.length;D++)T[D]=arguments[D];nt.default.stop.apply(this,T),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass);var F=this.$wrapper;F.css("cursor","").unbind().removeClass(this.noSelClass)}})},912:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>X});var K=N(50),gt=N(491);const X={open:function(nt){var G=this,S=this,T=S.editor,D=S.title,F=S.config,R=S.am,dt=F.custom;if((0,K.isFunction)(dt.open))return dt.open(R.__customData());T.Modal.open({title:D,content:nt}).onceClose(function(){return T.stopCommand(G.id)})},close:function(){var nt=this.config.custom;if((0,K.isFunction)(nt.close))return nt.close(this.am.__customData());var G=this.editor.Modal;G&&G.close()},run:function(nt,G,S){S===void 0&&(S={});var T=nt.AssetManager,D=T.getConfig(),F=S.types,R=F===void 0?[]:F,dt=S.accept,bt=S.select;if(this.title=S.modalTitle||nt.t("assetManager.modalTitle")||"",this.editor=nt,this.config=D,this.am=T,T.setTarget(S.target),T.onClick(S.onClick),T.onDblClick(S.onDblClick),T.onSelect(S.onSelect),T.__behaviour({select:bt,types:R,options:S}),D.custom)this.rendered=this.rendered||(0,gt.ut)("div"),this.rendered.className="".concat(D.stylePrefix,"custom-wrp"),T.__behaviour({container:this.rendered}),T.__trgCustom();else{if(!this.rendered||R){var It=T.getAll().filter(function($t){return $t});R&&R.length&&(It=It.filter(function($t){return R.indexOf($t.get("type"))!==-1})),T.render(It),this.rendered=T.getContainer()}if(dt){var Dt=this.rendered.querySelector("input#".concat(D.stylePrefix,"uploadFile"));Dt&&Dt.setAttribute("accept",dt)}}return this.open(this.rendered),this},stop:function(nt){this.editor=nt,this.close(this.rendered)}}},117:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>X});var K=N(50),gt=N(491);const X={open:function(){var nt=this,G=nt.container,S=nt.editor,T=nt.bm,D=nt.config,F=D.custom,R=D.appendTo;if((0,K.isFunction)(F.open))return F.open(T.__customData());if(this.firstRender&&!R){var dt="views-container",bt=S.Panels;(bt.getPanel(dt)||bt.addPanel({id:dt})).set("appendContent",G).trigger("change:appendContent"),F||G.appendChild(T.render())}G&&(G.style.display="block")},close:function(){var nt=this.container,G=this.config.custom;if((0,K.isFunction)(G.close))return G.close(this.bm.__customData());nt&&(nt.style.display="none")},run:function(nt){var G=nt.Blocks;this.config=G.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,gt.ut)("div"),this.editor=nt,this.bm=G;var S=this.container;G.__behaviour({container:S}),this.config.custom&&G.__trgCustom(),this.open()},stop:function(){this.close()}}},614:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>K});const K={run:function(gt){var X=gt.LayerManager,nt=gt.Panels,G=X.getConfig();if(!G.appendTo){if(!this.layers){var S="views-container",T=document.createElement("div"),D=nt.getPanel(S)||nt.addPanel({id:S});G.custom?X.__trgCustom({container:T}):T.appendChild(X.render()),D.set("appendContent",T).trigger("change:appendContent"),this.layers=T}this.layers.style.display="block"}},stop:function(){var gt=this.layers;gt&&(gt.style.display="none")}}},801:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=N(895);const gt={run:function(X,nt){if(this.sender=nt,!this.$cn){var G=X.getConfig(),S=X.Panels,T="change:appendContent";this.$cn=(0,K.default)("<div></div>"),this.$cn2=(0,K.default)("<div></div>"),this.$cn.append(this.$cn2);var D=X.DeviceManager;if(D&&G.showDevices){var F=S.addPanel({id:"devices-c"}),R=D.render();F.set("appendContent",R).trigger(T)}var dt=X.SelectorManager;this.slm=dt;var bt=dt.getConfig();bt.custom?dt.__trgCustom({container:this.$cn2.get(0)}):bt.appendTo||this.$cn2.append(dt.render([]));var It=X.StyleManager;this.sm=It;var Dt=It.getConfig(),$t=Dt.stylePrefix;this.$header=(0,K.default)('<div class="'.concat($t,'header">').concat(X.t("styleManager.empty"),"</div>")),this.$cn.append(this.$header),Dt.custom?It.__trgCustom({container:this.$cn2.get(0)}):Dt.appendTo||this.$cn2.append(It.render());var de="views-container";this.panel=S.getPanel(de),this.panel||(this.panel=S.addPanel({id:de})),this.panel.set("appendContent",this.$cn).trigger(T),this.em=X.getModel(),this.listenTo(this.em,It.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var X,nt,G,S,T=this.sender,D=this.sm;T&&T.get&&!T.get("active")||!D||(D.getSelected()?((X=this.$cn2)===null||X===void 0||X.show(),(nt=this.$header)===null||nt===void 0||nt.hide()):((G=this.$cn2)===null||G===void 0||G.hide(),(S=this.$header)===null||S===void 0||S.show()))},stop:function(){var X,nt;(X=this.$cn2)===null||X===void 0||X.hide(),(nt=this.$header)===null||nt===void 0||nt.hide()}}},395:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=N(895);const gt={run:function(X,nt){this.sender=nt;var G,S=X.getModel(),T=X.Config.stylePrefix,D=X.TraitManager,F=D.getConfig();if(!F.appendTo){if(!this.$cn){this.$cn=(0,K.default)("<div></div>"),this.$cn2=(0,K.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,K.default)("<div>").append('<div class="'.concat(F.stylePrefix,'header">').concat(S.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),this.$cn2.append('<div class="'.concat(T,'traits-label">').concat(S.t("traitManager.label"),"</div>")),this.$cn2.append(D.render());var R=X.Panels;(G=R.getPanel("views-container")?R.getPanel("views-container"):R.addPanel({id:"views-container"}))==null||G.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=X.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var X=this.sender;X&&X.get&&!X.get("active")||(this.target.getSelectedAll().length===1?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},98:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=N(50);const gt={run:function(X,nt,G){G===void 0&&(G={});var S=X.getModel().get("clipboard"),T=X.getSelected();S&&T&&(X.getSelectedAll().forEach(function(D){var F=D.collection;if(F){var R,dt={at:D.index()+1,action:G.action||"paste-component"};if((0,K.contains)(S,D)&&D.get("copyable"))R=F.add(D.clone(),dt);else{var bt=S.filter(function(It){return It.get("copyable")}).filter(function(It){return X.Components.canMove(D.parent(),It).result});R=F.add(bt.map(function(It){return It.clone()}),dt)}(R=(0,K.isArray)(R)?R:[R]).forEach(function(It){return X.trigger("component:paste",It)})}}),T.emitUpdate())}}},129:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>nt});var K=N(50),gt=function(G,S,T){if(T||arguments.length===2)for(var D,F=0,R=S.length;F<R;F++)!D&&F in S||(D||(D=Array.prototype.slice.call(S,0,F)),D[F]=S[F]);return G.concat(D||Array.prototype.slice.call(S))},X="core:component-outline";const nt={getPanels:function(G){return this.panels||(this.panels=G.Panels.getPanels()),this.panels},preventDrag:function(G){G.abort=1},tglEffects:function(G){var S=this.em,T=G?"on":"off";if(S){var D=S.Canvas,F=D.getBody(),R=D.getToolbarEl();R&&(R.style.display=G?"none":"");var dt=F.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,K.each)(dt,function(bt){return bt.style.pointerEvents=G?"all":""}),S[T]("run:tlb-move:before",this.preventDrag)}},run:function(G,S){var T=this;this.sender=S,this.selected=gt([],G.getSelectedAll(),!0),G.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=G.Commands.isActive(X)),this.shouldRunSwVisibility&&G.stopCommand(X),G.getModel().stopDefault();var D=this.getPanels(G),F=G.Canvas.getElement(),R=G.getEl(),dt=G.Config.stylePrefix;if(!this.helper){var bt=document.createElement("span");bt.className="".concat(dt,"off-prv fa fa-eye-slash"),R.appendChild(bt),bt.onclick=function(){return T.stopCommand()},this.helper=bt}this.helper.style.display="inline-block",D.forEach(function(Dt){return Dt.set("visible",!1)});var It=F.style;It.width="100%",It.height="100%",It.top="0",It.left="0",It.padding="0",It.margin="0",G.refresh(),this.tglEffects(1)},stop:function(G){var S=this.sender,T=S===void 0?{}:S,D=this.selected;T.set&&T.set("active",0);var F=this.getPanels(G);this.shouldRunSwVisibility&&(G.runCommand(X),this.shouldRunSwVisibility=!1),G.getModel().runDefault(),F.forEach(function(R){return R.set("visible",!0)}),G.Canvas.getElement().setAttribute("style",""),D&&G.select(D),delete this.selected,this.helper&&(this.helper.style.display="none"),G.refresh(),this.tglEffects()}}},116:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=function(){return K=Object.assign||function(X){for(var nt,G=1,S=arguments.length;G<S;G++)for(var T in nt=arguments[G])Object.prototype.hasOwnProperty.call(nt,T)&&(X[T]=nt[T]);return X},K.apply(this,arguments)};const gt={run:function(X,nt,G){var S=G||{},T=X.Canvas,D=T.getCanvasView(),F=K({appendTo:T.getResizerEl(),prefix:X.getConfig().stylePrefix,posFetcher:D.getElementPos.bind(D),mousePosFetcher:T.getMouseRelativePos},S.options||{}),R=this.canvasResizer;return R&&!S.forceNew||(this.canvasResizer=new X.Utils.Resizer(F),R=this.canvasResizer),R.setOptions(F,!0),R.blur(),R.focus(S.el),R},stop:function(){var X;(X=this.canvasResizer)===null||X===void 0||X.blur()}}},407:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>Rt});var K,gt=N(50),X=N(895),nt=N(346),G=(K=function(Y,k){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,et){H.__proto__=et}||function(H,et){for(var at in et)Object.prototype.hasOwnProperty.call(et,at)&&(H[at]=et[at])},K(Y,k)},function(Y,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function H(){this.constructor=Y}K(Y,k),Y.prototype=k===null?Object.create(k):(H.prototype=k.prototype,new H)});const S=function(Y){function k(){return Y!==null&&Y.apply(this,arguments)||this}return G(k,Y),k.prototype.defaults=function(){return{command:"",attributes:{}}},k}(nt.Hn);var T=function(){var Y=function(k,H){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,at){et.__proto__=at}||function(et,at){for(var Pt in at)Object.prototype.hasOwnProperty.call(at,Pt)&&(et[Pt]=at[Pt])},Y(k,H)};return function(k,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function et(){this.constructor=k}Y(k,H),k.prototype=H===null?Object.create(H):(et.prototype=H.prototype,new et)}}(),D=function(Y){function k(){return Y!==null&&Y.apply(this,arguments)||this}return T(k,Y),k}(nt.FE);const F=D;D.prototype.model=S;var R=N(330),dt=function(){var Y=function(k,H){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,at){et.__proto__=at}||function(et,at){for(var Pt in at)Object.prototype.hasOwnProperty.call(at,Pt)&&(et[Pt]=at[Pt])},Y(k,H)};return function(k,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function et(){this.constructor=k}Y(k,H),k.prototype=H===null?Object.create(H):(et.prototype=H.prototype,new et)}}(),bt=function(){return bt=Object.assign||function(Y){for(var k,H=1,et=arguments.length;H<et;H++)for(var at in k=arguments[H])Object.prototype.hasOwnProperty.call(k,at)&&(Y[at]=k[at]);return Y},bt.apply(this,arguments)};const It=function(Y){function k(H){var et=Y.call(this,H)||this;return et.em=H.config.em,et}return dt(k,Y),k.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},k.prototype.attributes=function(){return this.model.get("attributes")},k.prototype.handleClick=function(H){H.preventDefault(),H.stopPropagation();var et=this.em,at=et.Canvas.getFrameEl().getBoundingClientRect(),Pt=at.left,ct=at.top,Tt=bt(bt({},H),{clientX:H.clientX-Pt,clientY:H.clientY-ct});et.trigger("toolbar:run:before",{event:Tt}),this.execCommand(Tt)},k.prototype.execCommand=function(H){var et=this.em,at={event:H},Pt=this.model.get("command"),ct=et.Editor;(0,gt.isFunction)(Pt)&&Pt(ct,null,at),(0,gt.isString)(Pt)&&ct.runCommand(Pt,at)},k.prototype.render=function(){var H=this,et=H.em,at=H.$el,Pt=H.model,ct=Pt.get("id"),Tt=Pt.get("label"),q=et.getConfig().stylePrefix;return at.addClass("".concat(q,"toolbar-item")),ct&&at.addClass("".concat(q,"toolbar-item__").concat(ct)),Tt&&at.append(Tt),this},k}(nt.G7);var Dt=function(){var Y=function(k,H){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(et,at){et.__proto__=at}||function(et,at){for(var Pt in at)Object.prototype.hasOwnProperty.call(at,Pt)&&(et[Pt]=at[Pt])},Y(k,H)};return function(k,H){if(typeof H!="function"&&H!==null)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");function et(){this.constructor=k}Y(k,H),k.prototype=H===null?Object.create(H):(et.prototype=H.prototype,new et)}}(),$t=function(Y){function k(H){var et=Y.call(this,H)||this,at=H.em;return et.em=at,et.config={em:at},et.listenTo(et.collection,"reset",et.render),et}return Dt(k,Y),k.prototype.onRender=function(){var H=this.em.config.stylePrefix;this.el.className="".concat(H,"toolbar-items")},k}(R.Z);const de=$t;$t.prototype.itemView=It;var Ct,_t=N(491),Wt=N(163),Jt=function(){return Jt=Object.assign||function(Y){for(var k,H=1,et=arguments.length;H<et;H++)for(var at in k=arguments[H])Object.prototype.hasOwnProperty.call(k,at)&&(Y[at]=k[at]);return Y},Jt.apply(this,arguments)};const Rt={init:function(Y){(0,gt.bindAll)(this,"onHover","onOut","onClick","onFrameScroll","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),Ct=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(Y){var k=this,H=this.em,et=H.getConfig().listenToEl,at=H.getContainer().parentNode,Pt=Y?"on":"off",ct={on:Wt.on,off:Wt.off};!et.length&&at&&et.push(at),ct[Pt](window,"resize",this.onFrameUpdated),ct[Pt](et,"scroll",this.onContainerChange),H[Pt]("component:toggled component:update undo redo",this.onSelect,this),H[Pt]("change:componentHovered",this.onHovered,this),H[Pt]("component:resize styleable:change component:input",this.updateGlobalPos,this),H[Pt]("component:update:toolbar",this._upToolbar,this),H[Pt]("change:canvasOffset",this.updateAttached,this),H[Pt]("frame:updated",this.onFrameUpdated,this),H[Pt]("canvas:updateTools",this.onFrameUpdated,this),H.Canvas.getFrames().forEach(function(Tt){var q=Tt.view,Ut=q==null?void 0:q.getWindow();Ut&&function(Ht,ae){ct[Pt](ae,"mouseover",k.onHover),ct[Pt](ae,"mouseleave",k.onOut),ct[Pt](ae,"click",k.onClick),ct[Pt](Ht,"scroll",k.onFrameScroll,!0)}(Ut,q==null?void 0:q.getBody())})},onHover:function(Y){Y.stopPropagation();var k=this.em,H=Y.target,et=(0,Wt.getViewEl)(H),at=et&&et._getFrame(),Pt=(0,X.default)(H),ct=Pt.data("model");if(!ct)for(var Tt=Pt.parent();!ct&&Tt.length&&!(0,_t.Mx)(Tt[0]);)ct=Tt.data("model"),Tt=Tt.parent();this.currentDoc=H.ownerDocument,k.setHovered(ct,{useValid:!0}),at&&k.set("currentFrame",at)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(Y,k){var H,et=this,at={};k?(H=k.views)===null||H===void 0||H.forEach(function(Pt){var ct=Pt.el,Tt=et.getElementPos(ct);at={el:ct,pos:Tt,component:k,view:(0,Wt.getViewEl)(ct)},et.updateToolsLocal(at),ct.ownerDocument===et.currentDoc&&(et.elHovered=at)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(Pt){var ct=Pt.view,Tt=ct&&ct.getToolsEl();Tt&&et.toggleToolsEl(0,0,{el:Tt})}))},onSelect:(0,gt.debounce)(function(){var Y=this.em,k=Y.getSelected(),H=Y.get("currentFrame")||{},et=k&&k.getView(H.model),at=et&&et.el,Pt={};at&&(0,_t.pn)(at)&&(Pt={el:at,pos:this.getElementPos(at),component:k,view:(0,Wt.getViewEl)(at)}),this.elSelected=Pt,this.updateToolsGlobal(),this.updateLocalPos(Pt),this.initResize(k)},0),updateGlobalPos:function(){var Y=this.getElSelected();Y.el&&(Y.pos=this.getElementPos(Y.el),this.updateToolsGlobal())},updateLocalPos:function(Y){var k=this.getElHovered();k.el&&(k.pos=this.getElementPos(k.el),this.updateToolsLocal(Y))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered(0)},toggleToolsEl:function(Y,k,H){H===void 0&&(H={});var et=H.el||this.canvas.getToolsEl(k);return et&&(et.style.display=Y?"":"none"),et||{}},showElementOffset:function(Y,k,H){H===void 0&&(H={}),Ct&&this.editor.runCommand("show-offset",{el:Y,elPos:k,view:H.view,force:1,top:0,left:0})},hideElementOffset:function(Y){this.editor.stopCommand("show-offset",{view:Y})},showFixedElementOffset:function(Y,k){this.editor.runCommand("show-offset",{el:Y,elPos:k,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(Y){this.canvas.getHighlighter(Y).style.opacity=0},onClick:function(Y){Y.stopPropagation(),Y.preventDefault();var k=this.em;if(k.get("_cmpDrag"))return k.set("_cmpDrag");var H=(0,X.default)(Y.target),et=H.data("model");if(!et)for(var at=H.parent();!et&&at.length&&!(0,_t.Mx)(at[0]);)et=at.data("model"),at=at.parent();if(et){if(k.isEditing()&&!et.get("textable")&&et.isChildOf("text"))return;this.select(et,Y)}},select:function(Y,k){k===void 0&&(k={}),Y&&(this.editor.select(Y,{event:k,useValid:!0}),this.initResize(Y))},updateBadge:function(Y,k,H){H===void 0&&(H={});var et=this.canvas,at=(0,X.default)(Y).data("model");if(at&&at.get("badgable")){var Pt=this.getBadge(H);if(!H.posOnly){var ct=this.canvas.getConfig(),Tt=at.getIcon(),q=ct.pStylePrefix||"",Ut="".concat(q,"badge"),Ht=ct.customBadgeLabel,ae="".concat(Tt?'<div class="'.concat(Ut,'__icon">').concat(Tt,"</div>"):"",`
        <div class="`).concat(Ut,'__name">').concat(at.getName(),"</div>");Pt.innerHTML=Ht?Ht(at):ae}var Fe="px",Ie=Pt.style;Ie.display="block";var Ee=et.getTargetToElementFixed(Y,Pt,{pos:k}).top,Ne=H.leftOff<0?-H.leftOff:0;Ie.top=Ee+Fe,Ie.left=Ne+Fe}},showHighlighter:function(Y){this.canvas.getHighlighter(Y).style.opacity=""},initResize:function(Y){var k,H=this.em,et=this.canvas,at=H==null?void 0:H.Editor,Pt=(H==null?void 0:H.config).stylePrefix||"",ct="".concat(Pt,"resizing"),Tt=!(0,gt.isElement)(Y)&&(0,Wt.isTaggableNode)(Y)?Y:H.getSelected(),q=Tt&&Tt.get("resizable"),Ut={},Ht=function(Fe,Ie,Ee){var Ne=Ee.docs;Ne&&Ne.forEach(function(Ce){var Ve=Ce.body,ve=Ve.className||"";Ve.className=(Fe=="add"?"".concat(ve," ").concat(ct):ve.replace(ct,"")).trim()})};if(at&&q){var ae=(0,gt.isElement)(Y)?Y:Tt.getEl();Ut={onStart:function(Fe,Ie){Ie===void 0&&(Ie={});var Ee=Ie.el,Ne=Ie.config,Ce=Ie.resizer,Ve=Ne.keyHeight,ve=Ne.keyWidth,ye=Ne.currentUnit,we=Ne.keepAutoHeight,xe=Ne.keepAutoWidth;Ht("add",0,Ie),k=H.Styles.getModelToStyle(Tt),et.toggleFramesEvents(!1);var ft=getComputedStyle(Ee),ie=k.getStyle(),re=ie[ve];Ne.autoWidth=xe&&re==="auto",isNaN(parseFloat(re))&&(re=ft[ve]);var he=ie[Ve];Ne.autoHeight=we&&he==="auto",isNaN(parseFloat(he))&&(he=ft[Ve]),Ce.startDim.w=parseFloat(re),Ce.startDim.h=parseFloat(he),Ct=!1,ye&&(Ne.unitHeight=(0,Wt.getUnitFromValue)(he),Ne.unitWidth=(0,Wt.getUnitFromValue)(re))},onMove:function(){at.trigger("component:resize")},onEnd:function(Fe,Ie){Ht("remove",0,Ie),at.trigger("component:resize"),et.toggleFramesEvents(!0),Ct=!0},updateTarget:function(Fe,Ie,Ee){if(Ee===void 0&&(Ee={}),k){var Ne=Ee.store,Ce=Ee.selectedHandler,Ve=Ee.config,ve=Ve.keyHeight,ye=Ve.keyWidth,we=Ve.autoHeight,xe=Ve.autoWidth,ft=Ve.unitWidth,ie=Ve.unitHeight,re=["tc","bc"].indexOf(Ce)>=0,he=["cl","cr"].indexOf(Ce)>=0,fe={},oe=Ne?"":1;if(!re){var He=et.getBody().offsetWidth,nn=Ie.w<He?Ie.w:He;fe[ye]=xe?"auto":"".concat(nn).concat(ft)}he||(fe[ve]=we?"auto":"".concat(Ie.h).concat(ie)),k.addStyle(Jt(Jt({},fe),{en:oe}),{avoidStore:!Ne});var Ge="update:component:style",bn="".concat(Ge,":").concat(ve," ").concat(Ge,":").concat(ye);H&&H.trigger(bn,null,null,{noEmit:1})}}},typeof q=="object"&&(Ut=Jt(Jt(Jt({},Ut),q),{parent:Ut})),this.resizer=at.runCommand("resize",{el:ae,options:Ut,force:1})}else at.stopCommand("resize"),this.resizer=null},updateToolbar:function(Y){var k=this.config.em,H=Y==k?k.getSelected():Y,et=this.canvas.getToolbarEl(),at=et.style,Pt=H.get("toolbar"),ct=k.config.showToolbar;if(H&&ct&&Pt&&Pt.length){if(at.display="",!this.toolbar){et.innerHTML="",this.toolbar=new F(Pt);var Tt=new de({collection:this.toolbar,em:k});et.appendChild(Tt.render().el)}this.toolbar.reset(Pt),at.top="-100px",at.left="0"}else at.display="none"},updateToolbarPos:function(Y){var k="px",H=this.canvas.getToolbarEl().style;H.top="".concat(Y.top).concat(k),H.left="".concat(Y.left).concat(k),H.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(Y){return Y===void 0&&(Y={}),this.canvas.getBadgeEl(Y.view)},onFrameScroll:function(){this.updateTools()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(Y){return Y&&Y.get("status")==="selected"},updateToolsLocal:function(Y){var k=Y||this.getElHovered(),H=k.el,et=k.pos,at=k.view,Pt=k.component;if(H){var ct=Pt.get("hoverable"),Tt=this.lastHovered!==H,q=Tt?{}:{posOnly:1};Tt&&ct&&(this.lastHovered=H,this.showHighlighter(at),this.showElementOffset(H,et,{view:at})),this.isCompSelected(Pt)&&(this.hideHighlighter(at),this.hideElementOffset(at));var Ut="px",Ht=this.toggleToolsEl(1,at),ae=Ht.style,Fe=this.canvas.canvasRectOffset(H,et),Ie=Fe.top,Ee=Fe.left;this.updateBadge(H,et,Jt(Jt({},q),{view:at,topOff:Ie,leftOff:Ee})),ae.top=Ie+Ut,ae.left=Ee+Ut,ae.width=et.width+Ut,ae.height=et.height+Ut,this._trgToolUp("local",{component:Pt,el:Ht,top:Ie,left:Ee,width:et.width,height:et.height})}else this.lastHovered=0},_upToolbar:(0,gt.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(Y,k){k===void 0&&(k={}),this.em.trigger("canvas:tools:update",Jt({type:Y},k))},updateToolsGlobal:function(Y){Y===void 0&&(Y={});var k=this.getElSelected(),H=k.el,et=k.pos,at=k.component;if(!H)return this.toggleToolsEl(),void(this.lastSelected=0);var Pt=this.canvas;(this.lastSelected!==H||Y.force)&&(this.lastSelected=H,this.updateToolbar(at));var ct="px",Tt=this.toggleToolsEl(1),q=Tt.style,Ut=Pt.getTargetToElementFixed(H,Pt.getToolbarEl(),{pos:et}),Ht=Ut.canvasOffsetTop,ae=Ut.canvasOffsetLeft;q.top=Ht+ct,q.left=ae+ct,q.width=et.width+ct,q.height=et.height+ct,this.updateToolbarPos({top:Ut.top,left:Ut.left}),this._trgToolUp("global",{component:at,el:Tt,top:Ht,left:ae,width:et.width,height:et.height})},updateAttached:(0,gt.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,gt.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(Y){return this.canvas.getCanvasView().getElementPos(Y)},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(Y){Y&&Y.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(Y){(0,Wt.hasWin)()&&(this.editor=Y&&Y.get("Editor"),this.enable())},stop:function(Y,k,H){if(H===void 0&&(H={}),(0,Wt.hasWin)()){var et=this.em,at=this.editor;this.onHovered(),this.stopSelectComponent(),!H.preserveSelected&&et.setSelected(),this.toggleToolsEl(),at&&at.stopCommand("resize")}}}},189:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=N(895);const gt={startSelectPosition:function(X,nt,G){var S=this;G===void 0&&(G={}),this.isPointed=!1;var T=this.em.Utils,D=X.ownerDocument.body;T&&!this.sorter&&(this.sorter=new T.Sorter({container:D,placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:nt,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return S.em.getZoomDecimal()}})),G.onStart&&(this.sorter.onStart=G.onStart),X&&this.sorter.startSort(X,{container:D})},getOffsetDim:function(){var X=this.offset(this.canvas.getFrameEl()),nt=this.offset(this.canvas.getElement());return{top:X.top-nt.top,left:X.left-nt.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length,this.posTargetEl=this.cDim.length===0?(0,K.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,K.default)(this.cDim[this.posIndex][5]).parent():(0,K.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(X,nt,G){var S=X||0,T=nt||"before",D=G.length,F=D!==0&&T=="after"&&S==D;return D!==0&&(!F&&!G[S][4]||G[S-1]&&!G[S-1][4]||F&&!G[S-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},804:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>G});var K=N(50),gt=N(895),X=N(163),nt=function(){return nt=Object.assign||function(S){for(var T,D=1,F=arguments.length;D<F;D++)for(var R in T=arguments[D])Object.prototype.hasOwnProperty.call(T,R)&&(S[R]=T[R]);return S},nt.apply(this,arguments)};const G={getOffsetMethod:function(S){return"get"+(S||"")+"OffsetViewerEl"},run:function(S,T,D){var F=D||{},R=F.state||"",dt=S.getConfig(),bt=this.em.getZoomDecimal(),It=F.el||"";if(!dt.showOffsets||(0,X.isTextNode)(It)||!dt.showOffsetsSelected&&R=="Fixed")S.stopCommand("".concat(this.id),D);else{var Dt=S.Canvas,$t=nt({},F.elPos||Dt.getElementPos(It));(0,K.isUndefined)(F.top)||($t.top=F.top),(0,K.isUndefined)(F.left)||($t.left=F.left);var de=window.getComputedStyle(It),Ct=this.ppfx,_t=R+"State",Wt=Dt[this.getOffsetMethod(R)](D.view);Wt.style.opacity="";var Jt=this["marginT"+R],Rt=this["marginB"+R],Y=this["marginL"+R],k=this["marginR"+R],H=this["padT"+R],et=this["padB"+R],at=this["padL"+R],Pt=this["padR"+R];if(Wt.childNodes.length&&(this[_t]="1",Jt=Wt.querySelector("[data-offset-m-t]"),Rt=Wt.querySelector("[data-offset-m-b]"),Y=Wt.querySelector("[data-offset-m-l]"),k=Wt.querySelector("[data-offset-m-r]"),H=Wt.querySelector("[data-offset-p-t]"),et=Wt.querySelector("[data-offset-p-b]"),at=Wt.querySelector("[data-offset-p-l]"),Pt=Wt.querySelector("[data-offset-p-r]")),!this[_t]){var ct=R.toLowerCase(),Tt=ct+"margin-v",q=ct+"padding-v",Ut=(0,gt.default)('<div class="'.concat(Ct,'marginName">')).get(0),Ht=(0,gt.default)('<div class="'.concat(Ct,'paddingName">')).get(0),ae=Ct+q+"-el",Fe="".concat(Ct+Tt+"-el"," ").concat(Ct+Tt),Ie="".concat(ae," ").concat(Ct+q);Jt=(0,gt.default)('<div class="'.concat(Fe,'-top"></div>')).get(0),Rt=(0,gt.default)('<div class="'.concat(Fe,'-bottom"></div>')).get(0),Y=(0,gt.default)('<div class="'.concat(Fe,'-left"></div>')).get(0),k=(0,gt.default)('<div class="'.concat(Fe,'-right"></div>')).get(0),H=(0,gt.default)('<div class="'.concat(Ie,'-top"></div>')).get(0),et=(0,gt.default)('<div class="'.concat(Ie,'-bottom"></div>')).get(0),at=(0,gt.default)('<div class="'.concat(Ie,'-left"></div>')).get(0),Pt=(0,gt.default)('<div class="'.concat(Ie,'-right"></div>')).get(0),this["marginT"+R]=Jt,this["marginB"+R]=Rt,this["marginL"+R]=Y,this["marginR"+R]=k,this["padT"+R]=H,this["padB"+R]=et,this["padL"+R]=at,this["padR"+R]=Pt,Ut.appendChild(Jt),Ut.appendChild(Rt),Ut.appendChild(Y),Ut.appendChild(k),Ht.appendChild(H),Ht.appendChild(et),Ht.appendChild(at),Ht.appendChild(Pt),Wt.appendChild(Ut),Wt.appendChild(Ht),this[_t]="1"}var Ee="px",Ne=parseFloat(de.marginLeft.replace(Ee,""))*bt,Ce=parseFloat(de.marginRight.replace(Ee,""))*bt,Ve=parseFloat(de.marginTop.replace(Ee,""))*bt,ve=parseFloat(de.marginBottom.replace(Ee,""))*bt,ye=Jt.style,we=Rt.style,xe=Y.style,ft=k.style,ie=H.style,re=et.style,he=at.style,fe=Pt.style,oe=parseFloat($t.left),He=parseFloat(de.width)*bt+Ee;ye.height=Ve+Ee,ye.width=He,ye.top=$t.top-Ve+Ee,ye.left=oe+Ee,we.height=ve+Ee,we.width=He,we.top=$t.top+$t.height+Ee,we.left=oe+Ee;var nn=$t.height+Ve+ve+Ee,Ge=$t.top-Ve+Ee;xe.height=nn,xe.width=Ne+Ee,xe.top=Ge,xe.left=oe-Ne+Ee,ft.height=nn,ft.width=Ce+Ee,ft.top=Ge,ft.left=oe+$t.width+Ee;var bn=parseFloat(de.paddingTop)*bt;ie.height=bn+Ee;var Nn=parseFloat(de.paddingBottom)*bt;re.height=Nn+Ee;var At=$t.height-Nn-bn+Ee,Yt=$t.top+bn+Ee;he.height=At,he.width=parseFloat(de.paddingLeft)*bt+Ee,he.top=Yt;var _=parseFloat(de.paddingRight)*bt;fe.height=At,fe.width=_+Ee,fe.top=Yt}},stop:function(S,T,D){D===void 0&&(D={});var F=(D||{}).state||"",R=this.getOffsetMethod(F);S.Canvas[R](D.view).style.opacity=0}}},434:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>gt});var K=N(50);const gt={init:function(){(0,K.bindAll)(this,"_onFramesChange")},run:function(X){this.toggleVis(X)},stop:function(X){this.toggleVis(X,0)},toggleVis:function(X,nt){var G=this;if(nt===void 0&&(nt=1),!X.Commands.isActive("preview")){var S=X.Canvas,T=nt?"on":"off";S.getFrames().forEach(function(D){return G._upFrame(D,nt)}),S.getModel()[T]("change:frames",this._onFramesChange)}},_onFramesChange:function(X,nt){var G=this;nt.forEach(function(S){return S.once("loaded",function(){return G._upFrame(S,!0)})})},_upFrame:function(X,nt){var G,S=nt?"add":"remove";(G=X.view)===null||G===void 0||G.getBody().classList[S]("".concat(this.ppfx,"dashed"))}}},346:(y,tt,N)=>{N.d(tt,{FE:()=>S,G7:()=>T,Hn:()=>G});var K,gt=N(316),X=N.n(gt),nt=(K=function(D,F){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,dt){R.__proto__=dt}||function(R,dt){for(var bt in dt)Object.prototype.hasOwnProperty.call(dt,bt)&&(R[bt]=dt[bt])},K(D,F)},function(D,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function R(){this.constructor=D}K(D,F),D.prototype=F===null?Object.create(F):(R.prototype=F.prototype,new R)}),G=function(D){function F(){return D!==null&&D.apply(this,arguments)||this}return nt(F,D),F}(X().Model),S=function(D){function F(){return D!==null&&D.apply(this,arguments)||this}return nt(F,D),F}(X().Collection),T=function(D){function F(){return D!==null&&D.apply(this,arguments)||this}return nt(F,D),F}(X().View)},330:(y,tt,N)=>{N.d(tt,{Z:()=>S});var K,gt=N(50),X=N(346),nt=(K=function(T,D){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,R){F.__proto__=R}||function(F,R){for(var dt in R)Object.prototype.hasOwnProperty.call(R,dt)&&(F[dt]=R[dt])},K(T,D)},function(T,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function F(){this.constructor=T}K(T,D),T.prototype=D===null?Object.create(D):(F.prototype=D.prototype,new F)}),G=function(T){function D(F,R,dt){F===void 0&&(F={}),dt===void 0&&(dt=!1);var bt=T.call(this,F)||this;return bt.itemsView="",bt.itemType="type",bt.reuseView=!1,bt.config=R||F.config||{},dt&&bt.listenTo(bt.collection,"add",bt.addTo),bt.items=[],bt}return nt(D,T),D.prototype.addTo=function(F){this.add(F)},D.prototype.itemViewNotFound=function(F){var R=this.config,dt=this.ns,bt=R.em,It="".concat(dt?"[".concat(dt,"]: "):"","'").concat(F,"' type not found");bt&&bt.logWarning(It)},D.prototype.add=function(F,R){var dt,bt=this,It=bt.config,Dt=bt.reuseView,$t=bt.items,de=this.itemsView||{},Ct=R||null,_t=this.itemView,Wt=F.get(this.itemType);de[Wt]?_t=de[Wt]:!Wt||de[Wt]||(0,gt.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],Wt)||this.itemViewNotFound(Wt),dt=F.view&&Dt?F.view:new _t({model:F,config:It},It),$t&&$t.push(dt);var Jt=dt.render().el;Ct?Ct.appendChild(Jt):this.$el.append(Jt)},D.prototype.render=function(){var F=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(R){this.add(R,F)},this),this.$el.append(F),this.onRender(),this},D.prototype.onRender=function(){},D.prototype.onRemoveBefore=function(F,R){},D.prototype.onRemove=function(F,R){},D.prototype.remove=function(F){F===void 0&&(F={});var R=this.items;return this.onRemoveBefore(R,F),this.clearItems(),T.prototype.remove.call(this),this.onRemove(R,F),this},D.prototype.clearItems=function(){this.items},D}(X.G7);const S=G;G.prototype.itemView=""},668:(y,tt,N)=>{N.d(tt,{Z:()=>G});var K=N(50),gt=N(163),X=function(){return X=Object.assign||function(S){for(var T,D=1,F=arguments.length;D<F;D++)for(var R in T=arguments[D])Object.prototype.hasOwnProperty.call(T,R)&&(S[R]=T[R]);return S},X.apply(this,arguments)},nt=["x","y"];const G=function(){function S(T){return T===void 0&&(T={}),this.opts={snapOffset:5,scale:1},(0,K.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(T),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return S.prototype.setOptions=function(T){T===void 0&&(T={}),this.opts=X(X({},this.opts),T)},S.prototype.toggleDrag=function(T){var D=this.getDocumentEl(),F=this.getContainerEl(),R=this.getWindowEl(),dt=T?"on":"off",bt={on:gt.on,off:gt.off};bt[dt](F,"mousemove dragover",this.drag),bt[dt](D,"mouseup dragend touchend",this.stop),bt[dt](D,"keydown",this.keyHandle),bt[dt](R,"scroll",this.handleScroll)},S.prototype.handleScroll=function(){var T=this.lastScroll,D=this.delta,F=this.getScrollInfo(),R={x:F.x-T.x,y:F.y-T.y};this.move(D.x+R.x,D.y+R.y),this.lastScrollDiff=R},S.prototype.start=function(T){var D=this.opts,F=D.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(T),this.guidesStatic=(0,K.result)(D,"guidesStatic")||[],this.guidesTarget=(0,K.result)(D,"guidesTarget")||[],(0,K.isFunction)(F)&&F(T,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(T)},S.prototype.drag=function(T){var D=this,F=this,R=F.opts,dt=F.lastScrollDiff,bt=F.globScrollDiff,It=R.onDrag,Dt=this.startPointer,$t=this.getPointerPos(T),de={x:bt.x+dt.x,y:bt.y+dt.y};this.globScrollDiff=de;var Ct={x:$t.x-Dt.x+de.x,y:$t.y-Dt.y+de.y};this.lastScrollDiff={x:0,y:0};var _t=this.lockedAxis;(_t=T.shiftKey?!_t&&this.detectAxisLock(Ct.x,Ct.y):null)==="x"?Ct.x=Dt.x:_t==="y"&&(Ct.y=Dt.y);var Wt=function(et){nt.forEach(function(at){return et[at]=et[at]*(0,K.result)(R,"scale")}),D.delta=et,D.move(et.x,et.y),(0,K.isFunction)(It)&&It(T,D)},Jt=X({},Ct);if(this.currentPointer=$t,this.lockedAxis=_t,this.lastScroll=this.getScrollInfo(),Wt(Ct),this.guidesTarget.length){var Rt=this.snapGuides(Jt),Y=Rt.newDelta,k=Rt.trgX,H=Rt.trgY;(k||H)&&Wt(Y)}T.which===0&&this.stop(T)},S.prototype.snapGuides=function(T){var D=this,F=T,R=this.trgX,dt=this.trgY;return this.guidesTarget.forEach(function(bt){bt.x&&D.trgX||bt.y&&D.trgY||(bt.active=!1,D.guidesStatic.forEach(function(It){if(!(bt.y&&It.x||bt.x&&It.y)){var Dt=bt.y&&It.y,$t=Dt?"y":"x",de=bt[$t],Ct=It[$t],_t=T[$t],Wt=Dt?dt:R;if(D.isPointIn(de,Ct)&&(0,K.isUndefined)(Wt)){var Jt=_t-(de-Ct);D.setGuideLock(bt,Jt)}}}))}),R=this.trgX,dt=this.trgY,nt.forEach(function(bt){var It=bt.toUpperCase(),Dt=D["trg".concat(It)];Dt&&!D.isPointIn(T[bt],Dt.lock)&&(D.setGuideLock(Dt,null),Dt=null),Dt&&!(0,K.isUndefined)(Dt.lock)&&(F[bt]=Dt.lock)}),{newDelta:F,trgX:this.trgX,trgY:this.trgY}},S.prototype.isPointIn=function(T,D,F){var R=(F===void 0?{}:F).offset||this.opts.snapOffset||0;return T>=D&&T<=D+R||T<=D&&T>=D-R},S.prototype.setGuideLock=function(T,D){var F=(0,K.isUndefined)(T.x)?"Y":"X",R="trg".concat(F);return D!==null?(T.active=!0,T.lock=D,this[R]=T):(delete T.active,delete T.lock,delete this[R]),T},S.prototype.stop=function(T,D){D===void 0&&(D={});var F=this.delta,R=!!D.cancel,dt=R?0:F.x,bt=R?0:F.y;this.toggleDrag(),this.lockedAxis=null,this.move(dt,bt,!0);var It=this.opts.onEnd;(0,K.isFunction)(It)&&It(T,this,{cancelled:R})},S.prototype.keyHandle=function(T){(0,gt.isEscKey)(T)&&this.stop(T,{cancel:!0})},S.prototype.move=function(T,D,F){var R=this.el,dt=this.opts,bt=this.startPosition;if(bt){var It=dt.setPosition,Dt=bt.x+T,$t=bt.y+D;this.position={x:Dt,y:$t,end:F},(0,K.isFunction)(It)&&It(this.position),R&&(R.style.left="".concat(Dt,"px"),R.style.top="".concat($t,"px"))}},S.prototype.getContainerEl=function(){var T=this.opts.container;return T?[T]:this.getDocumentEl()},S.prototype.getWindowEl=function(){return this.getContainerEl().map(function(T){var D=T.ownerDocument||T;return D.defaultView||D.parentWindow})},S.prototype.getDocumentEl=function(T){var D=this.opts.doc;if(T=T||this.el,!this.docs.length){var F=[document];T&&F.push(T.ownerDocument),D&&F.push(D),this.docs=F}return this.docs},S.prototype.getPointerPos=function(T){var D=this.opts.getPointerPosition,F=(0,gt.getPointerEvent)(T);return D?D(T):{x:F.clientX,y:F.clientY}},S.prototype.getStartPosition=function(){var T=this.el,D=this.opts.getPosition,F={x:0,y:0};return(0,K.isFunction)(D)?F=D():T&&(F={x:parseFloat(T.style.left),y:parseFloat(T.style.top)}),F},S.prototype.getScrollInfo=function(){var T=this.opts.doc,D=T&&T.body;return{y:D?D.scrollTop:0,x:D?D.scrollLeft:0}},S.prototype.detectAxisLock=function(T,D){var F=T,R=D,dt=Math.abs(F),bt=Math.abs(R);return R>=dt||R<=-dt?"x":F>bt||F<-bt?"y":void 0},S}()},895:(y,tt,N)=>{N.r(tt),N.d(tt,{default:()=>ue});var K=typeof document<"u"?document:null,gt=typeof window<"u"?window:null,X=Array.prototype,nt=X.filter,G=X.indexOf,S=X.map,T=X.push,D=X.reverse,F=X.slice,R=X.splice,dt=/^#[\w-]*$/,bt=/^\.[\w-]*$/,It=/<.+>/,Dt=/^\w+$/;function $t(J,vt){return vt===void 0&&(vt=K),bt.test(J)?vt.getElementsByClassName(J.slice(1)):Dt.test(J)?vt.getElementsByTagName(J):vt.querySelectorAll(J)}function de(J,vt){if(vt===void 0&&(vt=K),J){if(J.__cash)return J;var St=J;if(at(J)){if(vt.__cash&&(vt=vt[0]),!(St=dt.test(J)?vt.getElementById(J.slice(1)):It.test(J)?ze(J):$t(J,vt)))return}else if(et(J))return this.ready(J);(St.nodeType||St===gt)&&(St=[St]),this.length=St.length;for(var Lt=0,pe=this.length;Lt<pe;Lt++)this[Lt]=St[Lt]}}function Ct(J,vt){return new de(J,vt)}var _t=Ct.fn=Ct.prototype=de.prototype={constructor:Ct,__cash:!0,length:0,splice:R};_t.get=function(J){return J===void 0?F.call(this):this[J<0?J+this.length:J]},_t.eq=function(J){return Ct(this.get(J))},_t.first=function(){return this.eq(0)},_t.last=function(){return this.eq(-1)},_t.map=function(J){return Ct(S.call(this,function(vt,St){return J.call(vt,St,vt)}))},_t.slice=function(){return Ct(F.apply(this,arguments))};var Wt=/(?:^\w|[A-Z]|\b\w)/g,Jt=/[\s-_]+/g;function Rt(J){return J.replace(Wt,function(vt,St){return vt[St?"toUpperCase":"toLowerCase"]()}).replace(Jt,"")}function Y(J,vt){for(var St=0,Lt=J.length;St<Lt&&vt.call(J[St],J[St],St,J)!==!1;St++);}Ct.camelCase=Rt,Ct.each=Y,_t.each=function(J){return Y(this,function(vt,St){return J.call(vt,St,vt)}),this},_t.removeProp=function(J){return this.each(function(vt,St){delete St[J]})},Ct.extend=_t.extend=function(J){J===void 0&&(J=this);for(var vt=arguments,St=vt.length,Lt=St<2?0:1;Lt<St;Lt++)for(var pe in vt[Lt])J[pe]=vt[Lt][pe];return J};var k=1;function H(J,vt){var St=J&&(J.matches||J.webkitMatchesSelector||J.mozMatchesSelector||J.msMatchesSelector||J.oMatchesSelector);return!!St&&St.call(J,vt)}function et(J){return typeof J=="function"}function at(J){return typeof J=="string"}function Pt(J){return!isNaN(parseFloat(J))&&isFinite(J)}Ct.guid=k,Ct.matches=H,Ct.isFunction=et,Ct.isString=at,Ct.isNumeric=Pt;var ct=Array.isArray;function Tt(J){return at(J)?function(vt,St){return H(St,J)}:J.__cash?function(vt,St){return J.is(St)}:function(vt,St,Lt){return St===Lt}}Ct.isArray=ct,_t.prop=function(J,vt){if(J){if(at(J))return arguments.length<2?this[0]&&this[0][J]:this.each(function(Lt,pe){pe[J]=vt});for(var St in J)this.prop(St,J[St]);return this}},_t.filter=function(J){if(!J)return Ct();var vt=et(J)?J:Tt(J);return Ct(nt.call(this,function(St,Lt){return vt.call(St,Lt,St,J)}))};var q=/\S+/g;function Ut(J){return at(J)&&J.match(q)||[]}function Ht(J){return J.filter(function(vt,St,Lt){return Lt.indexOf(vt)===St})}function ae(J,vt,St){if(J.nodeType===1){var Lt=gt.getComputedStyle(J,null);return vt?St?Lt.getPropertyValue(vt):Lt[vt]:Lt}}function Fe(J,vt){return parseInt(ae(J,vt),10)||0}_t.hasClass=function(J){var vt=Ut(J),St=!1;return vt.length&&this.each(function(Lt,pe){return!(St=pe.classList.contains(vt[0]))}),St},_t.removeAttr=function(J){var vt=Ut(J);return vt.length?this.each(function(St,Lt){Y(vt,function(pe){Lt.removeAttribute(pe)})}):this},_t.attr=function(J,vt){if(J){if(at(J)){if(arguments.length<2){if(!this[0])return;var St=this[0].getAttribute(J);return St===null?void 0:St}return vt===null?this.removeAttr(J):this.each(function(pe,Se){Se.setAttribute(J,vt)})}for(var Lt in J)this.attr(Lt,J[Lt]);return this}},_t.toggleClass=function(J,vt){var St=Ut(J),Lt=vt!==void 0;return St.length?this.each(function(pe,Se){Y(St,function(Qe){Lt?vt?Se.classList.add(Qe):Se.classList.remove(Qe):Se.classList.toggle(Qe)})}):this},_t.addClass=function(J){return this.toggleClass(J,!0)},_t.removeClass=function(J){return arguments.length?this.toggleClass(J,!1):this.attr("class","")},Ct.unique=Ht,_t.add=function(J,vt){return Ct(Ht(this.get().concat(Ct(J,vt).get())))};var Ie=/^--/;function Ee(J){return Ie.test(J)}var Ne={},Ce=K&&K.createElement("div"),Ve=Ce?Ce.style:{},ve=["webkit","moz","ms","o"];function ye(J,vt){if(vt===void 0&&(vt=Ee(J)),vt)return J;if(!Ne[J]){var St=Rt(J),Lt=""+St.charAt(0).toUpperCase()+St.slice(1);Y((St+" "+ve.join(Lt+" ")+Lt).split(" "),function(pe){if(pe in Ve)return Ne[J]=pe,!1})}return Ne[J]}Ct.prefixedProp=ye;var we={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function xe(J,vt,St){return St===void 0&&(St=Ee(J)),St||we[J]||!Pt(vt)?vt:vt+"px"}_t.css=function(J,vt){if(at(J)){var St=Ee(J);return J=ye(J,St),arguments.length<2?this[0]&&ae(this[0],J,St):J?(vt=xe(J,vt,St),this.each(function(pe,Se){Se.nodeType===1&&(St?Se.style.setProperty(J,vt):Se.style[J]=vt)})):this}for(var Lt in J)this.css(Lt,J[Lt]);return this};var ft="__cashData",ie=/^data-(.*)/;function re(J){return J[ft]=J[ft]||{}}function he(J,vt){var St=re(J);if(vt){if(!(vt in St)){var Lt=J.dataset?J.dataset[vt]||J.dataset[Rt(vt)]:Ct(J).attr("data-"+vt);if(Lt!==void 0){try{Lt=JSON.parse(Lt)}catch{}St[vt]=Lt}}return St[vt]}return St}function fe(J,vt){return Fe(J,"border"+(vt?"Left":"Top")+"Width")+Fe(J,"padding"+(vt?"Left":"Top"))+Fe(J,"padding"+(vt?"Right":"Bottom"))+Fe(J,"border"+(vt?"Right":"Bottom")+"Width")}function oe(J,vt){for(var St=0,Lt=vt.length;St<Lt;St++)if(J.indexOf(vt[St])<0)return!1;return!0}function He(J,vt,St){Y(J[St],function(Lt){Lt[0];var pe=Lt[1];vt.removeEventListener(St,pe)}),delete J[St]}Ct.hasData=function(J){return ft in J},_t.data=function(J,vt){var St=this;if(!J)return this[0]?(Y(this[0].attributes,function(pe){var Se=pe.name.match(ie);Se&&St.data(Se[1])}),he(this[0])):void 0;if(at(J))return vt===void 0?this[0]&&he(this[0],J):this.each(function(pe,Se){return function(Qe,sn,Un){re(Qe)[sn]=Un}(Se,J,vt)});for(var Lt in J)this.data(Lt,J[Lt]);return this},_t.removeData=function(J){return this.each(function(vt,St){return function(Lt,pe){pe===void 0?delete Lt[ft]:delete re(Lt)[pe]}(St,J)})},Y(["Width","Height"],function(J){_t["inner"+J]=function(){if(this[0])return this[0]===gt?gt["inner"+J]:this[0]["client"+J]}}),Y(["width","height"],function(J,vt){_t[J]=function(St){return this[0]?arguments.length?(St=parseInt(St,10),this.each(function(Lt,pe){if(pe.nodeType===1){var Se=ae(pe,"boxSizing");pe.style[J]=xe(J,St+(Se==="border-box"?fe(pe,!vt):0))}})):this[0]===gt?this[0][Rt("outer-"+J)]:this[0].getBoundingClientRect()[J]-fe(this[0],!vt):St===void 0?void 0:this}}),Y(["Width","Height"],function(J,vt){_t["outer"+J]=function(St){if(this[0])return this[0]===gt?gt["outer"+J]:this[0]["offset"+J]+(St?Fe(this[0],"margin"+(vt?"Top":"Left"))+Fe(this[0],"margin"+(vt?"Bottom":"Right")):0)}});var nn="__cashEvents",Ge=".";function bn(J){return J[nn]=J[nn]||{}}function Nn(J){var vt=J.split(Ge);return[vt[0],vt.slice(1).sort()]}function At(J,vt,St,Lt){var pe=bn(J);if(vt){var Se=pe[vt];if(!Se)return;Lt&&(Lt.guid=Lt.guid||k++),pe[vt]=Se.filter(function(Qe){var sn=Qe[0],Un=Qe[1];if(Lt&&Un.guid!==Lt.guid||!oe(sn,St))return!0;J.removeEventListener(vt,Un)})}else if(St&&St.length)for(vt in pe)At(J,vt,St,Lt);else for(vt in pe)He(pe,J,vt)}_t.off=function(J,vt){var St=this;return J===void 0?this.each(function(Lt,pe){return At(pe)}):Y(Ut(J),function(Lt){var pe=Nn(Lt),Se=pe[0],Qe=pe[1];St.each(function(sn,Un){return At(Un,Se,Qe,vt)})}),this},_t.on=function(J,vt,St,Lt){var pe=this;if(!at(J)){for(var Se in J)this.on(Se,vt,J[Se]);return this}return et(vt)&&(St=vt,vt=!1),Y(Ut(J),function(Qe){var sn=Nn(Qe),Un=sn[0],Sn=sn[1];pe.each(function(Ze,$r){var lr=function Wr(On){if(!On.namespace||oe(Sn,On.namespace.split(Ge))){var Ln=$r;if(vt){for(var rr=On.target;!H(rr,vt);)if(rr===$r||!(rr=rr.parentNode))return;Ln=rr}On.namespace=On.namespace||"";var qr=St.call(Ln,On,On.data);Lt&&At($r,Un,Sn,Wr),qr===!1&&(On.preventDefault(),On.stopPropagation())}};lr.guid=St.guid=St.guid||k++,function(Wr,On,Ln,rr){rr.guid=rr.guid||k++;var qr=bn(Wr);qr[On]=qr[On]||[],qr[On].push([Ln,rr]),Wr.addEventListener(On,rr)}($r,Un,Sn,lr)})}),this},_t.one=function(J,vt,St){return this.on(J,vt,St,!0)},_t.ready=function(J){var vt=function(){return J(Ct)};return K.readyState!=="loading"?setTimeout(vt):K.addEventListener("DOMContentLoaded",vt),this},_t.trigger=function(J,vt){var St=J;if(at(J)){var Lt=Nn(J),pe=Lt[0],Se=Lt[1];(St=K.createEvent("HTMLEvents")).initEvent(pe,!0,!0),St.namespace=Se.join(Ge)}return St.data=vt,this.each(function(Qe,sn){sn.dispatchEvent(St)})};var Yt=/select-one/i,_=/select-multiple/i;function I(J){var vt=J.type;return Yt.test(vt)?function(St){return St.selectedIndex<0?null:St.options[St.selectedIndex].value}(J):_.test(vt)?function(St){var Lt=[];return Y(St.options,function(pe){!pe.selected||pe.disabled||pe.parentNode.disabled||Lt.push(pe.value)}),Lt}(J):J.value}var z=/%20/g,wt=/file|reset|submit|button|image/i,Nt=/radio|checkbox/i;_t.serialize=function(){var J="";return this.each(function(vt,St){Y(St.elements||[St],function(Lt){if(!Lt.disabled&&Lt.name&&Lt.tagName!=="FIELDSET"&&!wt.test(Lt.type)&&(!Nt.test(Lt.type)||Lt.checked)){var pe=I(Lt);pe!==void 0&&Y(ct(pe)?pe:[pe],function(Se){J+=function(Qe,sn){return"&"+encodeURIComponent(Qe)+"="+encodeURIComponent(sn).replace(z,"+")}(Lt.name,Se)})}})}),J.substr(1)},_t.val=function(J){return J===void 0?this[0]&&I(this[0]):this.each(function(vt,St){var Lt=_.test(St.type),pe=J===null?Lt?[]:"":J;Lt&&ct(pe)?Y(St.options,function(Se){Se.selected=pe.indexOf(Se.value)>=0}):St.value=pe})},_t.clone=function(){return this.map(function(J,vt){return vt.cloneNode(!0)})},_t.detach=function(){return this.each(function(J,vt){vt.parentNode&&vt.parentNode.removeChild(vt)})};var Mt,ce=/^\s*<(\w+)[^>]*>/,ke=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function ze(J){if(function(){if(!Mt){var Lt=K.createElement("table"),pe=K.createElement("tr");Mt={"*":K.createElement("div"),tr:K.createElement("tbody"),td:pe,th:pe,thead:Lt,tbody:Lt,tfoot:Lt}}}(),!at(J))return[];if(ke.test(J))return[K.createElement(RegExp.$1)];var vt=ce.test(J)&&RegExp.$1,St=Mt[vt]||Mt["*"];return St.innerHTML=J,Ct(St.childNodes).detach().get()}function Ye(J,vt,St){if(vt!==void 0){var Lt=at(vt);!Lt&&vt.length?Y(vt,function(pe){return Ye(J,pe,St)}):Y(J,Lt?function(pe){pe.insertAdjacentHTML(St?"afterbegin":"beforeend",vt)}:function(pe,Se){return function(Qe,sn,Un){Un?Qe.insertBefore(sn,Qe.childNodes[0]):Qe.appendChild(sn)}(pe,Se?vt.cloneNode(!0):vt,St)})}}Ct.parseHTML=ze,_t.empty=function(){var J=this[0];if(J)for(;J.firstChild;)J.removeChild(J.firstChild);return this},_t.append=function(){var J=this;return Y(arguments,function(vt){Ye(J,vt)}),this},_t.appendTo=function(J){return Ye(Ct(J),this),this},_t.html=function(J){if(J===void 0)return this[0]&&this[0].innerHTML;var vt=J.nodeType?J[0].outerHTML:J;return this.each(function(St,Lt){Lt.innerHTML=vt})},_t.insertAfter=function(J){var vt=this;return Ct(J).each(function(St,Lt){var pe=Lt.parentNode;vt.each(function(Se,Qe){pe.insertBefore(St?Qe.cloneNode(!0):Qe,Lt.nextSibling)})}),this},_t.after=function(){var J=this;return Y(D.apply(arguments),function(vt){D.apply(Ct(vt).slice()).insertAfter(J)}),this},_t.insertBefore=function(J){var vt=this;return Ct(J).each(function(St,Lt){var pe=Lt.parentNode;vt.each(function(Se,Qe){pe.insertBefore(St?Qe.cloneNode(!0):Qe,Lt)})}),this},_t.before=function(){var J=this;return Y(arguments,function(vt){Ct(vt).insertBefore(J)}),this},_t.prepend=function(){var J=this;return Y(arguments,function(vt){Ye(J,vt,!0)}),this},_t.prependTo=function(J){return Ye(Ct(J),D.apply(this.slice()),!0),this},_t.remove=function(){return this.detach().off()},_t.replaceWith=function(J){var vt=this;return this.each(function(St,Lt){var pe=Lt.parentNode;if(pe){var Se=St?Ct(J).clone():Ct(J);if(!Se[0])return vt.remove(),!1;pe.replaceChild(Se[0],Lt),Ct(Se[0]).after(Se.slice(1))}})},_t.replaceAll=function(J){return Ct(J).replaceWith(this),this},_t.text=function(J){return J===void 0?this[0]?this[0].textContent:"":this.each(function(vt,St){St.textContent=J})};var pn=K&&K.documentElement;_t.offset=function(){var J=this[0];if(J){var vt=J.getBoundingClientRect();return{top:vt.top+gt.pageYOffset-pn.clientTop,left:vt.left+gt.pageXOffset-pn.clientLeft}}},_t.offsetParent=function(){return Ct(this[0]&&this[0].offsetParent)},_t.position=function(){var J=this[0];if(J)return{left:J.offsetLeft,top:J.offsetTop}},_t.children=function(J){var vt=[];return this.each(function(St,Lt){T.apply(vt,Lt.children)}),vt=Ct(Ht(vt)),J?vt.filter(function(St,Lt){return H(Lt,J)}):vt},_t.contents=function(){var J=[];return this.each(function(vt,St){T.apply(J,St.tagName==="IFRAME"?[St.contentDocument]:St.childNodes)}),Ct(J.length&&Ht(J))},_t.find=function(J){for(var vt=[],St=0,Lt=this.length;St<Lt;St++){var pe=$t(J,this[St]);pe.length&&T.apply(vt,pe)}return Ct(vt.length&&Ht(vt))},_t.has=function(J){var vt=at(J)?function(St,Lt){return!!$t(J,Lt).length}:function(St,Lt){return Lt.contains(J)};return this.filter(vt)},_t.is=function(J){if(!J||!this[0])return!1;var vt=Tt(J),St=!1;return this.each(function(Lt,pe){return!(St=vt(Lt,pe,J))}),St},_t.next=function(){return Ct(this[0]&&this[0].nextElementSibling)},_t.not=function(J){if(!J||!this[0])return this;var vt=Tt(J);return this.filter(function(St,Lt){return!vt(St,Lt,J)})},_t.parent=function(){var J=[];return this.each(function(vt,St){St&&St.parentNode&&J.push(St.parentNode)}),Ct(Ht(J))},_t.index=function(J){var vt=J?Ct(J)[0]:this[0],St=J?this:Ct(vt).parent().children();return G.call(St,vt)},_t.closest=function(J){return J&&this[0]?this.is(J)?this.filter(J):this.parent().closest(J):Ct()},_t.parents=function(J){var vt,St=[];return this.each(function(Lt,pe){for(vt=pe;vt&&vt.parentNode&&vt!==K.body.parentNode;)vt=vt.parentNode,(!J||J&&H(vt,J))&&St.push(vt)}),Ct(Ht(St))},_t.prev=function(){return Ct(this[0]&&this[0].previousElementSibling)},_t.siblings=function(){var J=this[0];return this.parent().children().filter(function(vt,St){return St!==J})};const ue=Ct},491:(y,tt,N)=>{N.d(tt,{$Q:()=>dt,FW:()=>D,G1:()=>nt,L_:()=>S,Mx:()=>G,R3:()=>bt,SJ:()=>de,dL:()=>R,pn:()=>F,rw:()=>Dt,sE:()=>T,t3:()=>$t,ut:()=>It});var K=N(50),gt="tag",X="attributes",nt="transitionend oTransitionEnd transitionend webkitTransitionEnd",G=function(Ct){return Ct&&Ct.nodeType===9},S=function(Ct){var _t=Ct&&Ct.parentNode;_t&&_t.removeChild(Ct)},T=function(Ct,_t){return Ct.querySelectorAll(_t)},D=function(Ct,_t){return _t===void 0&&(_t={}),Ct&&Ct.setAttribute&&(0,K.each)(_t,function(Wt,Jt){return Ct.setAttribute(Jt,Wt)})},F=function(Ct){return Ct&&!!(Ct.offsetWidth||Ct.offsetHeight||Ct.getClientRects().length)},R=function(Ct,_t){var Wt;(Wt=Ct.parentNode)===null||Wt===void 0||Wt.replaceChild(_t,Ct)},dt=function(Ct,_t,Wt){var Jt=Ct.childNodes,Rt=Jt.length,Y=(0,K.isUndefined)(Wt)?Rt:Wt;(0,K.isString)(_t)&&(Ct.insertAdjacentHTML("beforeEnd",_t),_t=Ct.lastChild,Ct.removeChild(_t)),Y>=Rt?Ct.appendChild(_t):Ct.insertBefore(_t,Jt[Y])},bt=function(Ct,_t){return dt(Ct,_t)},It=function(Ct,_t,Wt){_t===void 0&&(_t={});var Jt=document.createElement(Ct);return _t&&(0,K.each)(_t,function(Rt,Y){return Jt.setAttribute(Y,Rt)}),Wt&&((0,K.isString)(Wt)?Jt.innerHTML=Wt:Jt.appendChild(Wt)),Jt},Dt=function(Ct){return document.createTextNode(Ct)},$t=function(Ct,_t){var Wt,Jt=Ct.type;try{Wt=new window[_t](Jt,Ct)}catch{(Wt=document.createEvent(_t)).initEvent(Jt,!0,!0)}return Wt._parentEvent=Ct,Jt.indexOf("key")===0&&(Wt.keyCodeVal=Ct.keyCode,["keyCode","which"].forEach(function(Rt){Object.defineProperty(Wt,Rt,{get:function(){return this.keyCodeVal}})})),Wt},de=function(Ct,_t){_t===void 0&&(_t=[]),(Array.isArray(_t)?_t:[_t]).forEach(function(Wt){var Jt=Wt[gt]||"div",Rt=Wt[X]||{},Y=document.createElement(Jt);(0,K.each)(Rt,function(k,H){Y.setAttribute(H,k)}),Ct.appendChild(Y)})}},163:(y,tt,N)=>{N.r(tt),N.d(tt,{appendStyles:()=>dt,buildBase64UrlFromSvg:()=>xe,camelCase:()=>Ct,capitalize:()=>Ne,createId:()=>we,deepMerge:()=>Pt,escape:()=>et,escapeNodeContent:()=>at,find:()=>H,getElRect:()=>Tt,getElement:()=>Jt,getGlobal:()=>S,getKeyChar:()=>Ht,getKeyCode:()=>Ut,getModel:()=>ct,getPointerEvent:()=>q,getUiClass:()=>R,getUnitFromValue:()=>$t,getViewEl:()=>ve,hasDnd:()=>Wt,hasWin:()=>G,isCommentNode:()=>Y,isComponent:()=>Ce,isDef:()=>nt,isEmptyObj:()=>Ee,isEnterKey:()=>Fe,isEscKey:()=>ae,isObject:()=>Ie,isRule:()=>Ve,isTaggableNode:()=>k,isTextNode:()=>Rt,matches:()=>F,normalizeFloat:()=>_t,off:()=>Dt,on:()=>It,setViewEl:()=>ye,shallowDiff:()=>bt,toLowerCase:()=>T,upFirst:()=>de});var K=N(50),gt=function(){return gt=Object.assign||function(ft){for(var ie,re=1,he=arguments.length;re<he;re++)for(var fe in ie=arguments[re])Object.prototype.hasOwnProperty.call(ie,fe)&&(ft[fe]=ie[fe]);return ft},gt.apply(this,arguments)},X=function(ft,ie,re){if(re||arguments.length===2)for(var he,fe=0,oe=ie.length;fe<oe;fe++)!he&&fe in ie||(he||(he=Array.prototype.slice.call(ie,0,fe)),he[fe]=ie[fe]);return ft.concat(he||Array.prototype.slice.call(ie))},nt=function(ft){return ft!==void 0},G=function(){return typeof window<"u"},S=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:N.g},T=function(ft){return(ft||"").toLowerCase()},D=G()?window.Element.prototype:{},F=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.msMatchesSelector,R=function(ft,ie){var re=ft.getConfig(),he=re.stylePrefix;return[re.customUI&&"".concat(he,"cui"),ie].filter(function(fe){return fe}).join(" ")},dt=function(ft,ie){ie===void 0&&(ie={});var re=(0,K.isArray)(ft)?X([],ft,!0):[ft];if(re.length){var he=re.shift();if(he&&(!ie.unique||!document.querySelector('link[href="'.concat(he,'"]')))){var fe=document.head,oe=document.createElement("link");oe.href=he,oe.rel="stylesheet",ie.prepand?fe.insertBefore(oe,fe.firstChild):fe.appendChild(oe)}dt(re)}},bt=function(ft,ie){var re={},he=(0,K.keys)(ie);for(var fe in ft)if(ft.hasOwnProperty(fe)){var oe=ft[fe],He=ie[fe];he.indexOf(fe)>=0?oe!==He&&(re[fe]=He):re[fe]=null}for(var fe in ie)ie.hasOwnProperty(fe)&&(0,K.isUndefined)(ft[fe])&&(re[fe]=ie[fe]);return re},It=function(ft,ie,re,he){var fe=ie.split(/\s+/);ft=ft instanceof Array?ft:[ft];for(var oe=function(nn){ft.forEach(function(Ge){return Ge&&Ge.addEventListener(fe[nn],re,he)})},He=0;He<fe.length;++He)oe(He)},Dt=function(ft,ie,re,he){var fe=ie.split(/\s+/);ft=ft instanceof Array?ft:[ft];for(var oe=function(nn){ft.forEach(function(Ge){return Ge&&Ge.removeEventListener(fe[nn],re,he)})},He=0;He<fe.length;++He)oe(He)},$t=function(ft){return ft.replace(parseFloat(ft),"")},de=function(ft){return ft[0].toUpperCase()+ft.toLowerCase().slice(1)},Ct=function(ft){return ft.replace(/-./g,function(ie){return ie[1].toUpperCase()})},_t=function(ft,ie,re){ie===void 0&&(ie=1),re===void 0&&(re=0);var he=0;if(isNaN(ft))return re;if(ft=parseFloat(ft),Math.floor(ft)!==ft){var fe=ie.toString().split(".")[1];he=fe?fe.length:0}return he?parseFloat(ft.toFixed(he)):ft},Wt=function(ft){return"draggable"in document.createElement("i")&&(!ft||ft.config.nativeDnD)},Jt=function(ft){return(0,K.isElement)(ft)||Rt(ft)?ft:ft&&ft.getEl?ft.getEl():void 0},Rt=function(ft){return ft&&ft.nodeType===3},Y=function(ft){return ft&&ft.nodeType===8},k=function(ft){return ft&&!Rt(ft)&&!Y(ft)},H=function(ft,ie){var re=null;return ft.some(function(he,fe){return ie(he,fe,ft)?(re=he,1):0}),re},et=function(ft){return ft===void 0&&(ft=""),"".concat(ft).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},at=function(ft){return ft===void 0&&(ft=""),"".concat(ft).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Pt=function(){for(var ft=[],ie=0;ie<arguments.length;ie++)ft[ie]=arguments[ie];for(var re=gt({},ft[0]),he=1;he<ft.length;he++){var fe=gt({},ft[he]);for(var oe in fe){var He=re[oe],nn=fe[oe];Ie(He)&&Ie(nn)?re[oe]=Pt(He,nn):re[oe]=nn}}return re},ct=function(ft,ie){var re=ft;return!ie&&ft&&ft.__cashData?re=ft.__cashData.model:(0,K.isElement)(ft)&&(re=ie(ft).data("model")),re},Tt=function(ft){var ie,re={top:0,left:0,width:0,height:0};if(!ft)return re;if(Rt(ft)){var he=document.createRange();he.selectNode(ft),ie=he.getBoundingClientRect(),he.detach()}return ie||(ft.getBoundingClientRect?ft.getBoundingClientRect():re)},q=function(ft){return ft.touches&&ft.touches[0]?ft.touches[0]:ft},Ut=function(ft){return ft.which||ft.keyCode},Ht=function(ft){return String.fromCharCode(Ut(ft))},ae=function(ft){return Ut(ft)===27},Fe=function(ft){return Ut(ft)===13},Ie=function(ft){return ft!==null&&!Array.isArray(ft)&&typeof ft=="object"},Ee=function(ft){return Object.keys(ft).length<=0},Ne=function(ft){return ft===void 0&&(ft=""),ft&&ft.charAt(0).toUpperCase()+ft.substring(1)},Ce=function(ft){return ft&&ft.toHTML},Ve=function(ft){return ft&&ft.toCSS},ve=function(ft){return ft.__gjsv},ye=function(ft,ie){ft.__gjsv=ie},we=function(ft){ft===void 0&&(ft=16);for(var ie="",re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",he=re.length,fe=0;fe<ft;fe++)ie+=re.charAt(Math.floor(Math.random()*he));return ie},xe=function(ft){if(ft&&ft.substr(0,4)==="<svg"){var ie="";return G()?ie=window.btoa(ft):typeof Buffer<"u"&&(ie=Buffer.from(ft,"utf8").toString("base64")),ie?"data:image/svg+xml;base64,".concat(ie):ft}return ft}},828:(y,tt,N)=>{var K={"./CanvasClear":858,"./CanvasClear.ts":858,"./CanvasMove":884,"./CanvasMove.ts":884,"./CommandAbstract":790,"./CommandAbstract.ts":790,"./ComponentDelete":180,"./ComponentDelete.ts":180,"./ComponentDrag":544,"./ComponentDrag.ts":544,"./ComponentEnter":236,"./ComponentEnter.ts":236,"./ComponentExit":368,"./ComponentExit.ts":368,"./ComponentNext":243,"./ComponentNext.ts":243,"./ComponentPrev":400,"./ComponentPrev.ts":400,"./ComponentStyleClear":910,"./ComponentStyleClear.ts":910,"./CopyComponent":744,"./CopyComponent.ts":744,"./DeleteComponent":517,"./DeleteComponent.ts":517,"./ExportTemplate":457,"./ExportTemplate.ts":457,"./Fullscreen":975,"./Fullscreen.ts":975,"./MoveComponent":191,"./MoveComponent.ts":191,"./OpenAssets":912,"./OpenAssets.ts":912,"./OpenBlocks":117,"./OpenBlocks.ts":117,"./OpenLayers":614,"./OpenLayers.ts":614,"./OpenStyleManager":801,"./OpenStyleManager.ts":801,"./OpenTraitManager":395,"./OpenTraitManager.ts":395,"./PasteComponent":98,"./PasteComponent.ts":98,"./Preview":129,"./Preview.ts":129,"./Resize":116,"./Resize.ts":116,"./SelectComponent":407,"./SelectComponent.ts":407,"./SelectPosition":189,"./SelectPosition.ts":189,"./ShowOffset":804,"./ShowOffset.ts":804,"./SwitchVisibility":434,"./SwitchVisibility.ts":434};function gt(nt){var G=X(nt);return N(G)}function X(nt){if(!N.o(K,nt)){var G=new Error("Cannot find module '"+nt+"'");throw G.code="MODULE_NOT_FOUND",G}return K[nt]}gt.keys=function(){return Object.keys(K)},gt.resolve=X,y.exports=gt,gt.id=828},50:(y,tt,N)=>{N.r(tt),N.d(tt,{VERSION:()=>gt,after:()=>Dr,all:()=>zi,allKeys:()=>ue,any:()=>yi,assign:()=>$n,before:()=>Uo,bind:()=>jo,bindAll:()=>ao,chain:()=>Ii,chunk:()=>No,clone:()=>ko,collect:()=>Tr,compact:()=>Ki,compose:()=>ws,constant:()=>He,contains:()=>Kn,countBy:()=>Ks,create:()=>Bo,debounce:()=>ur,default:()=>ja,defaults:()=>Ho,defer:()=>Fi,delay:()=>Lo,detect:()=>Or,difference:()=>Wo,drop:()=>Rr,each:()=>kn,escape:()=>ne,every:()=>zi,extend:()=>qr,extendOwn:()=>$n,filter:()=>jn,find:()=>Or,findIndex:()=>Do,findKey:()=>Ri,findLastIndex:()=>li,findWhere:()=>ir,first:()=>ho,flatten:()=>Yi,foldl:()=>Kr,foldr:()=>Bi,forEach:()=>kn,functions:()=>Ln,get:()=>Gr,groupBy:()=>ui,has:()=>zo,head:()=>ho,identity:()=>so,include:()=>Kn,includes:()=>Kn,indexBy:()=>$i,indexOf:()=>Vn,initial:()=>Gi,inject:()=>Kr,intersection:()=>pi,invert:()=>On,invoke:()=>Yr,isArguments:()=>he,isArray:()=>ft,isArrayBuffer:()=>Ie,isBoolean:()=>at,isDataView:()=>xe,isDate:()=>Ut,isElement:()=>Pt,isEmpty:()=>wt,isEqual:()=>pn,isError:()=>ae,isFinite:()=>fe,isFunction:()=>Ce,isMap:()=>Un,isMatch:()=>Nt,isNaN:()=>oe,isNull:()=>H,isNumber:()=>q,isObject:()=>k,isRegExp:()=>Ht,isSet:()=>Ze,isString:()=>Tt,isSymbol:()=>Fe,isTypedArray:()=>Yt,isUndefined:()=>et,isWeakMap:()=>Sn,isWeakSet:()=>$r,iteratee:()=>po,keys:()=>z,last:()=>wi,lastIndexOf:()=>Hi,map:()=>Tr,mapObject:()=>je,matcher:()=>Zn,matches:()=>Zn,max:()=>Ir,memoize:()=>ys,methods:()=>Ln,min:()=>ci,mixin:()=>Xi,negate:()=>mi,noop:()=>gr,now:()=>Gn,object:()=>Ss,omit:()=>qi,once:()=>vi,pairs:()=>Wr,partial:()=>fo,partition:()=>Cs,pick:()=>Fr,pluck:()=>Jr,property:()=>qn,propertyOf:()=>si,random:()=>cn,range:()=>Zi,reduce:()=>Kr,reduceRight:()=>Bi,reject:()=>Nr,rest:()=>Rr,restArguments:()=>Y,result:()=>In,sample:()=>_s,select:()=>jn,shuffle:()=>qs,size:()=>Wi,some:()=>yi,sortBy:()=>Gs,sortedIndex:()=>Vi,tail:()=>Rr,take:()=>ho,tap:()=>Sr,template:()=>An,templateSettings:()=>st,throttle:()=>bs,times:()=>mr,toArray:()=>Zr,toPath:()=>hr,transpose:()=>_i,unescape:()=>M,union:()=>Ji,uniq:()=>go,unique:()=>go,uniqueId:()=>wr,unzip:()=>_i,values:()=>lr,where:()=>Hn,without:()=>Mn,wrap:()=>lo,zip:()=>xs});var K={};N.r(K),N.d(K,{VERSION:()=>gt,after:()=>Dr,all:()=>zi,allKeys:()=>ue,any:()=>yi,assign:()=>$n,before:()=>Uo,bind:()=>jo,bindAll:()=>ao,chain:()=>Ii,chunk:()=>No,clone:()=>ko,collect:()=>Tr,compact:()=>Ki,compose:()=>ws,constant:()=>He,contains:()=>Kn,countBy:()=>Ks,create:()=>Bo,debounce:()=>ur,default:()=>Qi,defaults:()=>Ho,defer:()=>Fi,delay:()=>Lo,detect:()=>Or,difference:()=>Wo,drop:()=>Rr,each:()=>kn,escape:()=>ne,every:()=>zi,extend:()=>qr,extendOwn:()=>$n,filter:()=>jn,find:()=>Or,findIndex:()=>Do,findKey:()=>Ri,findLastIndex:()=>li,findWhere:()=>ir,first:()=>ho,flatten:()=>Yi,foldl:()=>Kr,foldr:()=>Bi,forEach:()=>kn,functions:()=>Ln,get:()=>Gr,groupBy:()=>ui,has:()=>zo,head:()=>ho,identity:()=>so,include:()=>Kn,includes:()=>Kn,indexBy:()=>$i,indexOf:()=>Vn,initial:()=>Gi,inject:()=>Kr,intersection:()=>pi,invert:()=>On,invoke:()=>Yr,isArguments:()=>he,isArray:()=>ft,isArrayBuffer:()=>Ie,isBoolean:()=>at,isDataView:()=>xe,isDate:()=>Ut,isElement:()=>Pt,isEmpty:()=>wt,isEqual:()=>pn,isError:()=>ae,isFinite:()=>fe,isFunction:()=>Ce,isMap:()=>Un,isMatch:()=>Nt,isNaN:()=>oe,isNull:()=>H,isNumber:()=>q,isObject:()=>k,isRegExp:()=>Ht,isSet:()=>Ze,isString:()=>Tt,isSymbol:()=>Fe,isTypedArray:()=>Yt,isUndefined:()=>et,isWeakMap:()=>Sn,isWeakSet:()=>$r,iteratee:()=>po,keys:()=>z,last:()=>wi,lastIndexOf:()=>Hi,map:()=>Tr,mapObject:()=>je,matcher:()=>Zn,matches:()=>Zn,max:()=>Ir,memoize:()=>ys,methods:()=>Ln,min:()=>ci,mixin:()=>Xi,negate:()=>mi,noop:()=>gr,now:()=>Gn,object:()=>Ss,omit:()=>qi,once:()=>vi,pairs:()=>Wr,partial:()=>fo,partition:()=>Cs,pick:()=>Fr,pluck:()=>Jr,property:()=>qn,propertyOf:()=>si,random:()=>cn,range:()=>Zi,reduce:()=>Kr,reduceRight:()=>Bi,reject:()=>Nr,rest:()=>Rr,restArguments:()=>Y,result:()=>In,sample:()=>_s,select:()=>jn,shuffle:()=>qs,size:()=>Wi,some:()=>yi,sortBy:()=>Gs,sortedIndex:()=>Vi,tail:()=>Rr,take:()=>ho,tap:()=>Sr,template:()=>An,templateSettings:()=>st,throttle:()=>bs,times:()=>mr,toArray:()=>Zr,toPath:()=>hr,transpose:()=>_i,unescape:()=>M,union:()=>Ji,uniq:()=>go,unique:()=>go,uniqueId:()=>wr,unzip:()=>_i,values:()=>lr,where:()=>Hn,without:()=>Mn,wrap:()=>lo,zip:()=>xs});var gt="1.13.4",X=typeof self=="object"&&self.self===self&&self||typeof ri=="object"&&ri.global===ri&&ri||Function("return this")()||{},nt=Array.prototype,G=Object.prototype,S=typeof Symbol<"u"?Symbol.prototype:null,T=nt.push,D=nt.slice,F=G.toString,R=G.hasOwnProperty,dt=typeof ArrayBuffer<"u",bt=typeof DataView<"u",It=Array.isArray,Dt=Object.keys,$t=Object.create,de=dt&&ArrayBuffer.isView,Ct=isNaN,_t=isFinite,Wt=!{toString:null}.propertyIsEnumerable("toString"),Jt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Rt=Math.pow(2,53)-1;function Y(O,V){return V=V==null?O.length-1:+V,function(){for(var lt=Math.max(arguments.length-V,0),mt=Array(lt),jt=0;jt<lt;jt++)mt[jt]=arguments[jt+V];switch(V){case 0:return O.call(this,mt);case 1:return O.call(this,arguments[0],mt);case 2:return O.call(this,arguments[0],arguments[1],mt)}var xt=Array(V+1);for(jt=0;jt<V;jt++)xt[jt]=arguments[jt];return xt[V]=mt,O.apply(this,xt)}}function k(O){var V=typeof O;return V==="function"||V==="object"&&!!O}function H(O){return O===null}function et(O){return O===void 0}function at(O){return O===!0||O===!1||F.call(O)==="[object Boolean]"}function Pt(O){return!(!O||O.nodeType!==1)}function ct(O){var V="[object "+O+"]";return function(lt){return F.call(lt)===V}}const Tt=ct("String"),q=ct("Number"),Ut=ct("Date"),Ht=ct("RegExp"),ae=ct("Error"),Fe=ct("Symbol"),Ie=ct("ArrayBuffer");var Ee=ct("Function"),Ne=X.document&&X.document.childNodes;typeof Int8Array!="object"&&typeof Ne!="function"&&(Ee=function(O){return typeof O=="function"||!1});const Ce=Ee,Ve=ct("Object");var ve=bt&&Ve(new DataView(new ArrayBuffer(8))),ye=typeof Map<"u"&&Ve(new Map),we=ct("DataView");const xe=ve?function(O){return O!=null&&Ce(O.getInt8)&&Ie(O.buffer)}:we,ft=It||ct("Array");function ie(O,V){return O!=null&&R.call(O,V)}var re=ct("Arguments");(function(){re(arguments)||(re=function(O){return ie(O,"callee")})})();const he=re;function fe(O){return!Fe(O)&&_t(O)&&!isNaN(parseFloat(O))}function oe(O){return q(O)&&Ct(O)}function He(O){return function(){return O}}function nn(O){return function(V){var lt=O(V);return typeof lt=="number"&&lt>=0&&lt<=Rt}}function Ge(O){return function(V){return V==null?void 0:V[O]}}const bn=Ge("byteLength"),Nn=nn(bn);var At=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const Yt=dt?function(O){return de?de(O)&&!xe(O):Nn(O)&&At.test(F.call(O))}:He(!1),_=Ge("length");function I(O,V){V=function(Kt){for(var le={},We=Kt.length,tn=0;tn<We;++tn)le[Kt[tn]]=!0;return{contains:function(Cn){return le[Cn]===!0},push:function(Cn){return le[Cn]=!0,Kt.push(Cn)}}}(V);var lt=Jt.length,mt=O.constructor,jt=Ce(mt)&&mt.prototype||G,xt="constructor";for(ie(O,xt)&&!V.contains(xt)&&V.push(xt);lt--;)(xt=Jt[lt])in O&&O[xt]!==jt[xt]&&!V.contains(xt)&&V.push(xt)}function z(O){if(!k(O))return[];if(Dt)return Dt(O);var V=[];for(var lt in O)ie(O,lt)&&V.push(lt);return Wt&&I(O,V),V}function wt(O){if(O==null)return!0;var V=_(O);return typeof V=="number"&&(ft(O)||Tt(O)||he(O))?V===0:_(z(O))===0}function Nt(O,V){var lt=z(V),mt=lt.length;if(O==null)return!mt;for(var jt=Object(O),xt=0;xt<mt;xt++){var Kt=lt[xt];if(V[Kt]!==jt[Kt]||!(Kt in jt))return!1}return!0}function Mt(O){return O instanceof Mt?O:this instanceof Mt?void(this._wrapped=O):new Mt(O)}function ce(O){return new Uint8Array(O.buffer||O,O.byteOffset||0,bn(O))}Mt.VERSION=gt,Mt.prototype.value=function(){return this._wrapped},Mt.prototype.valueOf=Mt.prototype.toJSON=Mt.prototype.value,Mt.prototype.toString=function(){return String(this._wrapped)};var ke="[object DataView]";function ze(O,V,lt,mt){if(O===V)return O!==0||1/O==1/V;if(O==null||V==null)return!1;if(O!=O)return V!=V;var jt=typeof O;return(jt==="function"||jt==="object"||typeof V=="object")&&Ye(O,V,lt,mt)}function Ye(O,V,lt,mt){O instanceof Mt&&(O=O._wrapped),V instanceof Mt&&(V=V._wrapped);var jt=F.call(O);if(jt!==F.call(V))return!1;if(ve&&jt=="[object Object]"&&xe(O)){if(!xe(V))return!1;jt=ke}switch(jt){case"[object RegExp]":case"[object String]":return""+O==""+V;case"[object Number]":return+O!=+O?+V!=+V:+O==0?1/+O==1/V:+O==+V;case"[object Date]":case"[object Boolean]":return+O==+V;case"[object Symbol]":return S.valueOf.call(O)===S.valueOf.call(V);case"[object ArrayBuffer]":case ke:return Ye(ce(O),ce(V),lt,mt)}var xt=jt==="[object Array]";if(!xt&&Yt(O)){if(bn(O)!==bn(V))return!1;if(O.buffer===V.buffer&&O.byteOffset===V.byteOffset)return!0;xt=!0}if(!xt){if(typeof O!="object"||typeof V!="object")return!1;var Kt=O.constructor,le=V.constructor;if(Kt!==le&&!(Ce(Kt)&&Kt instanceof Kt&&Ce(le)&&le instanceof le)&&"constructor"in O&&"constructor"in V)return!1}mt=mt||[];for(var We=(lt=lt||[]).length;We--;)if(lt[We]===O)return mt[We]===V;if(lt.push(O),mt.push(V),xt){if((We=O.length)!==V.length)return!1;for(;We--;)if(!ze(O[We],V[We],lt,mt))return!1}else{var tn,Cn=z(O);if(We=Cn.length,z(V).length!==We)return!1;for(;We--;)if(!ie(V,tn=Cn[We])||!ze(O[tn],V[tn],lt,mt))return!1}return lt.pop(),mt.pop(),!0}function pn(O,V){return ze(O,V)}function ue(O){if(!k(O))return[];var V=[];for(var lt in O)V.push(lt);return Wt&&I(O,V),V}function J(O){var V=_(O);return function(lt){if(lt==null)return!1;var mt=ue(lt);if(_(mt))return!1;for(var jt=0;jt<V;jt++)if(!Ce(lt[O[jt]]))return!1;return O!==Qe||!Ce(lt[vt])}}var vt="forEach",St="has",Lt=["clear","delete"],pe=["get",St,"set"],Se=Lt.concat(vt,pe),Qe=Lt.concat(pe),sn=["add"].concat(Lt,vt,St);const Un=ye?J(Se):ct("Map"),Sn=ye?J(Qe):ct("WeakMap"),Ze=ye?J(sn):ct("Set"),$r=ct("WeakSet");function lr(O){for(var V=z(O),lt=V.length,mt=Array(lt),jt=0;jt<lt;jt++)mt[jt]=O[V[jt]];return mt}function Wr(O){for(var V=z(O),lt=V.length,mt=Array(lt),jt=0;jt<lt;jt++)mt[jt]=[V[jt],O[V[jt]]];return mt}function On(O){for(var V={},lt=z(O),mt=0,jt=lt.length;mt<jt;mt++)V[O[lt[mt]]]=lt[mt];return V}function Ln(O){var V=[];for(var lt in O)Ce(O[lt])&&V.push(lt);return V.sort()}function rr(O,V){return function(lt){var mt=arguments.length;if(V&&(lt=Object(lt)),mt<2||lt==null)return lt;for(var jt=1;jt<mt;jt++)for(var xt=arguments[jt],Kt=O(xt),le=Kt.length,We=0;We<le;We++){var tn=Kt[We];V&&lt[tn]!==void 0||(lt[tn]=xt[tn])}return lt}}const qr=rr(ue),$n=rr(z),Ho=rr(ue,!0);function oi(O){if(!k(O))return{};if($t)return $t(O);var V=function(){};V.prototype=O;var lt=new V;return V.prototype=null,lt}function Bo(O,V){var lt=oi(O);return V&&$n(lt,V),lt}function ko(O){return k(O)?ft(O)?O.slice():qr({},O):O}function Sr(O,V){return V(O),O}function hr(O){return ft(O)?O:[O]}function dn(O){return Mt.toPath(O)}function Wn(O,V){for(var lt=V.length,mt=0;mt<lt;mt++){if(O==null)return;O=O[V[mt]]}return lt?O:void 0}function Gr(O,V,lt){var mt=Wn(O,dn(V));return et(mt)?lt:mt}function zo(O,V){for(var lt=(V=dn(V)).length,mt=0;mt<lt;mt++){var jt=V[mt];if(!ie(O,jt))return!1;O=O[jt]}return!!lt}function so(O){return O}function Zn(O){return O=$n({},O),function(V){return Nt(V,O)}}function qn(O){return O=dn(O),function(V){return Wn(V,O)}}function or(O,V,lt){if(V===void 0)return O;switch(lt??3){case 1:return function(mt){return O.call(V,mt)};case 3:return function(mt,jt,xt){return O.call(V,mt,jt,xt)};case 4:return function(mt,jt,xt,Kt){return O.call(V,mt,jt,xt,Kt)}}return function(){return O.apply(V,arguments)}}function ii(O,V,lt){return O==null?so:Ce(O)?or(O,V,lt):k(O)&&!ft(O)?Zn(O):qn(O)}function po(O,V){return ii(O,V,1/0)}function ln(O,V,lt){return Mt.iteratee!==po?Mt.iteratee(O,V):ii(O,V,lt)}function je(O,V,lt){V=ln(V,lt);for(var mt=z(O),jt=mt.length,xt={},Kt=0;Kt<jt;Kt++){var le=mt[Kt];xt[le]=V(O[le],le,O)}return xt}function gr(){}function si(O){return O==null?gr:function(V){return Gr(O,V)}}function mr(O,V,lt){var mt=Array(Math.max(0,O));V=or(V,lt,1);for(var jt=0;jt<O;jt++)mt[jt]=V(jt);return mt}function cn(O,V){return V==null&&(V=O,O=0),O+Math.floor(Math.random()*(V-O+1))}Mt.toPath=hr,Mt.iteratee=po;const Gn=Date.now||function(){return new Date().getTime()};function Po(O){var V=function(xt){return O[xt]},lt="(?:"+z(O).join("|")+")",mt=RegExp(lt),jt=RegExp(lt,"g");return function(xt){return xt=xt==null?"":""+xt,mt.test(xt)?xt.replace(jt,V):xt}}const ai={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ne=Po(ai),M=Po(On(ai)),st=Mt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Gt=/(.)^/,me={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Oe=/\\|'|\r|\n|\u2028|\u2029/g;function an(O){return"\\"+me[O]}var _e=/^\s*(\w|\$)+\s*$/;function An(O,V,lt){!V&&lt&&(V=lt),V=Ho({},V,Mt.templateSettings);var mt=RegExp([(V.escape||Gt).source,(V.interpolate||Gt).source,(V.evaluate||Gt).source].join("|")+"|$","g"),jt=0,xt="__p+='";O.replace(mt,function(tn,Cn,Vr,Ci,qo){return xt+=O.slice(jt,qo).replace(Oe,an),jt=qo+tn.length,Cn?xt+=`'+
((__t=(`+Cn+`))==null?'':_.escape(__t))+
'`:Vr?xt+=`'+
((__t=(`+Vr+`))==null?'':__t)+
'`:Ci&&(xt+=`';
`+Ci+`
__p+='`),tn}),xt+=`';
`;var Kt,le=V.variable;if(le){if(!_e.test(le))throw new Error("variable is not a bare identifier: "+le)}else xt=`with(obj||{}){
`+xt+`}
`,le="obj";xt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+xt+`return __p;
`;try{Kt=new Function(le,"_",xt)}catch(tn){throw tn.source=xt,tn}var We=function(tn){return Kt.call(this,tn,Mt)};return We.source="function("+le+`){
`+xt+"}",We}function In(O,V,lt){var mt=(V=dn(V)).length;if(!mt)return Ce(lt)?lt.call(O):lt;for(var jt=0;jt<mt;jt++){var xt=O==null?void 0:O[V[jt]];xt===void 0&&(xt=lt,jt=mt),O=Ce(xt)?xt.call(O):xt}return O}var Ni=0;function wr(O){var V=++Ni+"";return O?O+V:V}function Ii(O){var V=Mt(O);return V._chain=!0,V}function Lr(O,V,lt,mt,jt){if(!(mt instanceof V))return O.apply(lt,jt);var xt=oi(O.prototype),Kt=O.apply(xt,jt);return k(Kt)?Kt:xt}var Ao=Y(function(O,V){var lt=Ao.placeholder,mt=function(){for(var jt=0,xt=V.length,Kt=Array(xt),le=0;le<xt;le++)Kt[le]=V[le]===lt?arguments[jt++]:V[le];for(;jt<arguments.length;)Kt.push(arguments[jt++]);return Lr(O,mt,this,this,Kt)};return mt});Ao.placeholder=Mt;const fo=Ao,jo=Y(function(O,V,lt){if(!Ce(O))throw new TypeError("Bind must be called on a function");var mt=Y(function(jt){return Lr(O,mt,V,this,lt.concat(jt))});return mt}),cr=nn(_);function Mo(O,V,lt,mt){if(mt=mt||[],V||V===0){if(V<=0)return mt.concat(O)}else V=1/0;for(var jt=mt.length,xt=0,Kt=_(O);xt<Kt;xt++){var le=O[xt];if(cr(le)&&(ft(le)||he(le)))if(V>1)Mo(le,V-1,lt,mt),jt=mt.length;else for(var We=0,tn=le.length;We<tn;)mt[jt++]=le[We++];else lt||(mt[jt++]=le)}return mt}const ao=Y(function(O,V){var lt=(V=Mo(V,!1,!1)).length;if(lt<1)throw new Error("bindAll must be passed function names");for(;lt--;){var mt=V[lt];O[mt]=jo(O[mt],O)}return O});function ys(O,V){var lt=function(mt){var jt=lt.cache,xt=""+(V?V.apply(this,arguments):mt);return ie(jt,xt)||(jt[xt]=O.apply(this,arguments)),jt[xt]};return lt.cache={},lt}const Lo=Y(function(O,V,lt){return setTimeout(function(){return O.apply(null,lt)},V)}),Fi=fo(Lo,Mt,1);function bs(O,V,lt){var mt,jt,xt,Kt,le=0;lt||(lt={});var We=function(){le=lt.leading===!1?0:Gn(),mt=null,Kt=O.apply(jt,xt),mt||(jt=xt=null)},tn=function(){var Cn=Gn();le||lt.leading!==!1||(le=Cn);var Vr=V-(Cn-le);return jt=this,xt=arguments,Vr<=0||Vr>V?(mt&&(clearTimeout(mt),mt=null),le=Cn,Kt=O.apply(jt,xt),mt||(jt=xt=null)):mt||lt.trailing===!1||(mt=setTimeout(We,Vr)),Kt};return tn.cancel=function(){clearTimeout(mt),le=0,mt=jt=xt=null},tn}function ur(O,V,lt){var mt,jt,xt,Kt,le,We=function(){var Cn=Gn()-jt;V>Cn?mt=setTimeout(We,V-Cn):(mt=null,lt||(Kt=O.apply(le,xt)),mt||(xt=le=null))},tn=Y(function(Cn){return le=this,xt=Cn,jt=Gn(),mt||(mt=setTimeout(We,V),lt&&(Kt=O.apply(le,xt))),Kt});return tn.cancel=function(){clearTimeout(mt),mt=xt=le=null},tn}function lo(O,V){return fo(V,O)}function mi(O){return function(){return!O.apply(this,arguments)}}function ws(){var O=arguments,V=O.length-1;return function(){for(var lt=V,mt=O[V].apply(this,arguments);lt--;)mt=O[lt].call(this,mt);return mt}}function Dr(O,V){return function(){if(--O<1)return V.apply(this,arguments)}}function Uo(O,V){var lt;return function(){return--O>0&&(lt=V.apply(this,arguments)),O<=1&&(V=null),lt}}const vi=fo(Uo,2);function Ri(O,V,lt){V=ln(V,lt);for(var mt,jt=z(O),xt=0,Kt=jt.length;xt<Kt;xt++)if(V(O[mt=jt[xt]],mt,O))return mt}function Ws(O){return function(V,lt,mt){lt=ln(lt,mt);for(var jt=_(V),xt=O>0?0:jt-1;xt>=0&&xt<jt;xt+=O)if(lt(V[xt],xt,V))return xt;return-1}}const Do=Ws(1),li=Ws(-1);function Vi(O,V,lt,mt){for(var jt=(lt=ln(lt,mt,1))(V),xt=0,Kt=_(O);xt<Kt;){var le=Math.floor((xt+Kt)/2);lt(O[le])<jt?xt=le+1:Kt=le}return xt}function rn(O,V,lt){return function(mt,jt,xt){var Kt=0,le=_(mt);if(typeof xt=="number")O>0?Kt=xt>=0?xt:Math.max(xt+le,Kt):le=xt>=0?Math.min(xt+1,le):xt+le+1;else if(lt&&xt&&le)return mt[xt=lt(mt,jt)]===jt?xt:-1;if(jt!=jt)return(xt=V(D.call(mt,Kt,le),oe))>=0?xt+Kt:-1;for(xt=O>0?Kt:le-1;xt>=0&&xt<le;xt+=O)if(mt[xt]===jt)return xt;return-1}}const Vn=rn(1,Do,Vi),Hi=rn(-1,li);function Or(O,V,lt){var mt=(cr(O)?Do:Ri)(O,V,lt);if(mt!==void 0&&mt!==-1)return O[mt]}function ir(O,V){return Or(O,Zn(V))}function kn(O,V,lt){var mt,jt;if(V=or(V,lt),cr(O))for(mt=0,jt=O.length;mt<jt;mt++)V(O[mt],mt,O);else{var xt=z(O);for(mt=0,jt=xt.length;mt<jt;mt++)V(O[xt[mt]],xt[mt],O)}return O}function Tr(O,V,lt){V=ln(V,lt);for(var mt=!cr(O)&&z(O),jt=(mt||O).length,xt=Array(jt),Kt=0;Kt<jt;Kt++){var le=mt?mt[Kt]:Kt;xt[Kt]=V(O[le],le,O)}return xt}function $o(O){var V=function(lt,mt,jt,xt){var Kt=!cr(lt)&&z(lt),le=(Kt||lt).length,We=O>0?0:le-1;for(xt||(jt=lt[Kt?Kt[We]:We],We+=O);We>=0&&We<le;We+=O){var tn=Kt?Kt[We]:We;jt=mt(jt,lt[tn],tn,lt)}return jt};return function(lt,mt,jt,xt){var Kt=arguments.length>=3;return V(lt,or(mt,xt,4),jt,Kt)}}const Kr=$o(1),Bi=$o(-1);function jn(O,V,lt){var mt=[];return V=ln(V,lt),kn(O,function(jt,xt,Kt){V(jt,xt,Kt)&&mt.push(jt)}),mt}function Nr(O,V,lt){return jn(O,mi(ln(V)),lt)}function zi(O,V,lt){V=ln(V,lt);for(var mt=!cr(O)&&z(O),jt=(mt||O).length,xt=0;xt<jt;xt++){var Kt=mt?mt[xt]:xt;if(!V(O[Kt],Kt,O))return!1}return!0}function yi(O,V,lt){V=ln(V,lt);for(var mt=!cr(O)&&z(O),jt=(mt||O).length,xt=0;xt<jt;xt++){var Kt=mt?mt[xt]:xt;if(V(O[Kt],Kt,O))return!0}return!1}function Kn(O,V,lt,mt){return cr(O)||(O=lr(O)),(typeof lt!="number"||mt)&&(lt=0),Vn(O,V,lt)>=0}const Yr=Y(function(O,V,lt){var mt,jt;return Ce(V)?jt=V:(V=dn(V),mt=V.slice(0,-1),V=V[V.length-1]),Tr(O,function(xt){var Kt=jt;if(!Kt){if(mt&&mt.length&&(xt=Wn(xt,mt)),xt==null)return;Kt=xt[V]}return Kt==null?Kt:Kt.apply(xt,lt)})});function Jr(O,V){return Tr(O,qn(V))}function Hn(O,V){return jn(O,Zn(V))}function Ir(O,V,lt){var mt,jt,xt=-1/0,Kt=-1/0;if(V==null||typeof V=="number"&&typeof O[0]!="object"&&O!=null)for(var le=0,We=(O=cr(O)?O:lr(O)).length;le<We;le++)(mt=O[le])!=null&&mt>xt&&(xt=mt);else V=ln(V,lt),kn(O,function(tn,Cn,Vr){((jt=V(tn,Cn,Vr))>Kt||jt===-1/0&&xt===-1/0)&&(xt=tn,Kt=jt)});return xt}function ci(O,V,lt){var mt,jt,xt=1/0,Kt=1/0;if(V==null||typeof V=="number"&&typeof O[0]!="object"&&O!=null)for(var le=0,We=(O=cr(O)?O:lr(O)).length;le<We;le++)(mt=O[le])!=null&&mt<xt&&(xt=mt);else V=ln(V,lt),kn(O,function(tn,Cn,Vr){((jt=V(tn,Cn,Vr))<Kt||jt===1/0&&xt===1/0)&&(xt=tn,Kt=jt)});return xt}var bi=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Zr(O){return O?ft(O)?D.call(O):Tt(O)?O.match(bi):cr(O)?Tr(O,so):lr(O):[]}function _s(O,V,lt){if(V==null||lt)return cr(O)||(O=lr(O)),O[cn(O.length-1)];var mt=Zr(O),jt=_(mt);V=Math.max(Math.min(V,jt),0);for(var xt=jt-1,Kt=0;Kt<V;Kt++){var le=cn(Kt,xt),We=mt[Kt];mt[Kt]=mt[le],mt[le]=We}return mt.slice(0,V)}function qs(O){return _s(O,1/0)}function Gs(O,V,lt){var mt=0;return V=ln(V,lt),Jr(Tr(O,function(jt,xt,Kt){return{value:jt,index:mt++,criteria:V(jt,xt,Kt)}}).sort(function(jt,xt){var Kt=jt.criteria,le=xt.criteria;if(Kt!==le){if(Kt>le||Kt===void 0)return 1;if(Kt<le||le===void 0)return-1}return jt.index-xt.index}),"value")}function Ui(O,V){return function(lt,mt,jt){var xt=V?[[],[]]:{};return mt=ln(mt,jt),kn(lt,function(Kt,le){var We=mt(Kt,le,lt);O(xt,Kt,We)}),xt}}const ui=Ui(function(O,V,lt){ie(O,lt)?O[lt].push(V):O[lt]=[V]}),$i=Ui(function(O,V,lt){O[lt]=V}),Ks=Ui(function(O,V,lt){ie(O,lt)?O[lt]++:O[lt]=1}),Cs=Ui(function(O,V,lt){O[lt?0:1].push(V)},!0);function Wi(O){return O==null?0:cr(O)?O.length:z(O).length}function Ys(O,V,lt){return V in lt}const Fr=Y(function(O,V){var lt={},mt=V[0];if(O==null)return lt;Ce(mt)?(V.length>1&&(mt=or(mt,V[1])),V=ue(O)):(mt=Ys,V=Mo(V,!1,!1),O=Object(O));for(var jt=0,xt=V.length;jt<xt;jt++){var Kt=V[jt],le=O[Kt];mt(le,Kt,O)&&(lt[Kt]=le)}return lt}),qi=Y(function(O,V){var lt,mt=V[0];return Ce(mt)?(mt=mi(mt),V.length>1&&(lt=V[1])):(V=Tr(Mo(V,!1,!1),String),mt=function(jt,xt){return!Kn(V,xt)}),Fr(O,mt,lt)});function Gi(O,V,lt){return D.call(O,0,Math.max(0,O.length-(V==null||lt?1:V)))}function ho(O,V,lt){return O==null||O.length<1?V==null||lt?void 0:[]:V==null||lt?O[0]:Gi(O,O.length-V)}function Rr(O,V,lt){return D.call(O,V==null||lt?1:V)}function wi(O,V,lt){return O==null||O.length<1?V==null||lt?void 0:[]:V==null||lt?O[O.length-1]:Rr(O,Math.max(0,O.length-V))}function Ki(O){return jn(O,Boolean)}function Yi(O,V){return Mo(O,V,!1)}const Wo=Y(function(O,V){return V=Mo(V,!0,!0),jn(O,function(lt){return!Kn(V,lt)})}),Mn=Y(function(O,V){return Wo(O,V)});function go(O,V,lt,mt){at(V)||(mt=lt,lt=V,V=!1),lt!=null&&(lt=ln(lt,mt));for(var jt=[],xt=[],Kt=0,le=_(O);Kt<le;Kt++){var We=O[Kt],tn=lt?lt(We,Kt,O):We;V&&!lt?(Kt&&xt===tn||jt.push(We),xt=tn):lt?Kn(xt,tn)||(xt.push(tn),jt.push(We)):Kn(jt,We)||jt.push(We)}return jt}const Ji=Y(function(O){return go(Mo(O,!0,!0))});function pi(O){for(var V=[],lt=arguments.length,mt=0,jt=_(O);mt<jt;mt++){var xt=O[mt];if(!Kn(V,xt)){var Kt;for(Kt=1;Kt<lt&&Kn(arguments[Kt],xt);Kt++);Kt===lt&&V.push(xt)}}return V}function _i(O){for(var V=O&&Ir(O,_).length||0,lt=Array(V),mt=0;mt<V;mt++)lt[mt]=Jr(O,mt);return lt}const xs=Y(_i);function Ss(O,V){for(var lt={},mt=0,jt=_(O);mt<jt;mt++)V?lt[O[mt]]=V[mt]:lt[O[mt][0]]=O[mt][1];return lt}function Zi(O,V,lt){V==null&&(V=O||0,O=0),lt||(lt=V<O?-1:1);for(var mt=Math.max(Math.ceil((V-O)/lt),0),jt=Array(mt),xt=0;xt<mt;xt++,O+=lt)jt[xt]=O;return jt}function No(O,V){if(V==null||V<1)return[];for(var lt=[],mt=0,jt=O.length;mt<jt;)lt.push(D.call(O,mt,mt+=V));return lt}function fi(O,V){return O._chain?Mt(V).chain():V}function Xi(O){return kn(Ln(O),function(V){var lt=Mt[V]=O[V];Mt.prototype[V]=function(){var mt=[this._wrapped];return T.apply(mt,arguments),fi(this,lt.apply(Mt,mt))}}),Mt}kn(["pop","push","reverse","shift","sort","splice","unshift"],function(O){var V=nt[O];Mt.prototype[O]=function(){var lt=this._wrapped;return lt!=null&&(V.apply(lt,arguments),O!=="shift"&&O!=="splice"||lt.length!==0||delete lt[0]),fi(this,lt)}}),kn(["concat","join","slice"],function(O){var V=nt[O];Mt.prototype[O]=function(){var lt=this._wrapped;return lt!=null&&(lt=V.apply(lt,arguments)),fi(this,lt)}});const Qi=Mt;var ts=Xi(K);ts._=ts;const ja=ts}},Q={};function rt(y){var tt=Q[y];if(tt!==void 0)return tt.exports;var N=Q[y]={exports:{}};return W[y].call(N.exports,N,N.exports,rt),N.exports}rt.n=y=>{var tt=y&&y.__esModule?()=>y.default:()=>y;return rt.d(tt,{a:tt}),tt},rt.d=(y,tt)=>{for(var N in tt)rt.o(tt,N)&&!rt.o(y,N)&&Object.defineProperty(y,N,{enumerable:!0,get:tt[N]})},rt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),rt.o=(y,tt)=>Object.prototype.hasOwnProperty.call(y,tt),rt.r=y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var U={};return(()=>{rt.d(U,{default:()=>Ny});var y=rt(50),tt=rt(895),N=rt(163);function K(a){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var e=a.raw;return e.reduce(function(n,i,l){var f=r[l-1],d=e[l-1];return Array.isArray(f)?f=f.join(""):d&&d.slice(-1)==="$"?n=n.slice(0,-1):f=(0,N.escape)(f),n+f+i})}const gt={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,multiFrames:!1,customUI:!1};var X=rt(316),nt=rt.n(X),G,S=rt(346),T=(G=function(a,r){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},G(a,r)},function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=a}G(a,r),a.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}),D=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return T(r,a),r}(S.Hn);const F=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return T(r,a),r.prototype.getByComponent=function(t){var e=this;return this.filter(function(n){return e.getComponent(n)===t})[0]},r.prototype.addComponent=function(t,e){var n=this,i=((0,y.isArray)(t)?t:[t]).filter(function(l){return!n.hasComponent(l)}).map(function(l){return new D({component:l})})[0];return this.push(i,e)},r.prototype.getComponent=function(t){return t.get("component")},r.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},r.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},r.prototype.allComponents=function(){var t=this;return this.map(function(e){return t.getComponent(e)}).filter(function(e){return e})},r.prototype.removeComponent=function(t,e){var n=this,i=((0,y.isArray)(t)?t:[t]).map(function(l){return n.getByComponent(l)});return this.remove(i,e)},r}(S.FE);var R=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dt=function(){return dt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},dt.apply(this,arguments)},bt=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},It=function(){function a(r,t,e){this.cls=[],this.isPrivate=!1,this._em=r,this._name=t;var n=this.name.charAt(0).toLowerCase()+this.name.slice(1),i=(0,y.isUndefined)(r.config[n])?r.config[this.name]:r.config[n],l=i===!0?{}:i||{};l.pStylePrefix=r.config.pStylePrefix||"",(0,y.isUndefined)(i)||i||(l._disable=1),l.em=r,this._config=(0,N.deepMerge)(e||{},l)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.init=function(r){},a.prototype.render=function(r){},a.prototype.postLoad=function(r){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return r?this.config[r]:this.config},a.prototype.__logWarn=function(r,t){t===void 0&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(r),t)},a.prototype.__appendTo=function(){var r=this.getConfig().appendTo;if(r){var t=(0,y.isElement)(r)?r:document.querySelector(r);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},a}();const Dt=It;var $t=function(a){function r(t,e,n,i,l,f){f===void 0&&(f={});var d=a.call(this,t,e,l)||this;return d.cls=[],d.private=!1,d.all=n,d.events=i,!f.skipListen&&d.__initListen(),d}return R(r,a),r.prototype.postLoad=function(t){},r.prototype.render=function(t){},r.prototype.getProjectData=function(t){var e={},n=this.storageKey;return n&&(e[n]=t||this.getAll()),e},r.prototype.loadProjectData=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.all,i=e.onResult,l=e.reset,f=this.storageKey,d={action:"load"},m=n||this.all,g=t[f];if(typeof g=="string")try{g=JSON.parse(g)}catch{this.__logWarn("Data parsing failed",{input:g})}return l&&g&&m.reset(void 0,d),i?g&&i(g,d):g&&(0,N.isDef)(g.length)&&m.reset(g,d),g},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},r.prototype.getAll=function(){return bt([],this.all.models,!0)},r.prototype.getAllMap=function(){return this.getAll().reduce(function(t,e){return t[e.get(e.idAttribute)]=e,t},{})},r.prototype.__initListen=function(t){t===void 0&&(t={});var e=this,n=e.all,i=e.em,l=e.events;n&&i&&n.on("add",function(f,d,m){return i.trigger(l.add,f,m)}).on("remove",function(f,d,m){return i.trigger(l.remove,f,m)}).on("change",function(f,d){return i.trigger(l.update,f,f.changedAttributes(),d)}).on("all",this.__catchAllEvent,this),this.cls=[n].concat(t.collections||[]),(t.propagate||[]).forEach(function(f){var d=f.entity,m=f.event;d.on("all",function(g,x,A,$){var Z=dt({event:g},$||A);[i,n].map(function(ut){return ut.trigger(m,x,Z)})})})},r.prototype.__remove=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,y.isString)(t)?this.get(t):t,f=function(){return l&&n.all.remove(l,e),l};return!e.silent&&(i==null||i.trigger(this.events.removeBefore,l,f,e)),!e.abort&&f()},r.prototype.__catchAllEvent=function(t,e,n,i){var l=this.em,f=this.events,d=i||n;l&&f.all&&l.trigger(f.all,{event:t,model:e,options:d}),this.__onAllEvent()},r.prototype.__appendTo=function(t){var e=this.config.appendTo;if(e){var n=(0,y.isElement)(e)?e:document.querySelector(e);if(!n)return this.__logWarn('"appendTo" element not found');n.appendChild(this.render(t))}},r.prototype.__onAllEvent=function(){},r.prototype._createId=function(t){t===void 0&&(t=16);var e,n=this.getAll().length+t,i=this.getAllMap();do e=(0,N.createId)(n);while(i[e]);return e},r.prototype.__listenAdd=function(t,e){var n=this;t.on("add",function(i,l,f){return n.em.trigger(e,i,f)})},r.prototype.__listenRemove=function(t,e){var n=this;t.on("remove",function(i,l,f){return n.em.trigger(e,i,f)})},r.prototype.__listenUpdate=function(t,e){var n=this;t.on("change",function(i,l){return n.em.trigger(e,i,i.changedAttributes(),l)})},r.prototype.__destroy=function(){var t;this.cls.forEach(function(e){e.stopListening(),e.reset()}),(t=this.view)===null||t===void 0||t.remove(),this.view=void 0},r}(It);const de={stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:`
    body { background-color: #fff }
    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }
    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }
    * ::-webkit-scrollbar { width: 10px }
  `,notTextable:["button","a","input[type=checkbox]","input[type=radio]"]};var Ct=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const _t=function(a){function r(t,e,n){var i=a.call(this,e,n)||this;return i._module=t,i}return Ct(r,a),Object.defineProperty(r.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),r}(S.Hn);var Wt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Jt=function(a){function r(t,e,n){return a.call(this,e,{module:t,modelConstructor:n})||this}return Wt(r,a),r.prototype.add=function(t,e){var n,i=this,l=(0,y.isArray)(t)?t:(0,y.isUndefined)(t)?void 0:[t];return l=(n=l==null?void 0:l.map(function(f){return f instanceof i.newModel?f:new i.newModel(i.module,f)}))!==null&&n!==void 0?n:[void 0],a.prototype.add.call(this,(0,y.isArray)(t)?l:l[0],e)},r.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},r}(S.FE);var Rt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Y=function(){return Y=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Y.apply(this,arguments)},k=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},H="__aw",et="__ah",at=function(a){function r(t,e){var n=a.call(this,t,e)||this,i=n.em,l=n.attributes,f=l.styles,d=l.component,m=i.Components,g=m.getConfig(),x=i.Css.getAll(),A={},$={em:i,config:g,frame:n,idMap:A};if(!(0,N.isComponent)(d)){var Z=(0,N.isObject)(d)?d:{components:d};!Z.type&&(Z.type="wrapper");var ut=m.getType("wrapper").model;n.set("component",new ut(Z,$))}return f?(0,N.isObject)(f)||(Object.keys(A).length&&Array.isArray(f)&&f.forEach(function(yt){var pt=yt.selectors;if(pt&&pt.length==1){var Bt=pt[0],Zt=Bt.name&&Bt.type===2&&Bt;if(Zt&&A[Zt.name])Zt.name=A[Zt.name];else if((0,y.isString)(Bt)&&Bt[0]==="#"){var Pe=Bt.substring(1);Pe&&A[Pe]&&(pt[0]="#".concat(A[Pe]))}}}),x.add(f),n.set("styles",x)):n.set("styles",x),!e.width&&n.set(H,1),!e.height&&n.set(et,1),n}return Rt(r,a),r.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(r.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),r.prototype.onRemove=function(){this.getComponent().remove({root:1})},r.prototype.changesUp=function(t){t===void 0&&(t={}),t.temporary||t.noCount||t.avoidStore||this.set("changesCount",this.get("changesCount")+1)},r.prototype.getComponent=function(){return this.get("component")},r.prototype.getStyles=function(){return this.get("styles")},r.prototype.disable=function(){this.trigger("disable")},r.prototype.remove=function(){this.view=void 0;var t=this.collection;return t&&t.remove(this)},r.prototype.getHead=function(){return k([],this.head,!0)},r.prototype.setHead=function(t){return this.set("head",k([],t,!0))},r.prototype.addHeadItem=function(t){this.head.push(t)},r.prototype.getHeadByAttr=function(t,e,n){return this.head.filter(function(i){return i.attributes&&i.attributes[t]==e&&(!n||n===i.tag)})[0]},r.prototype.removeHeadByAttr=function(t,e,n){var i=this.getHeadByAttr(t,e,n),l=this.head.indexOf(i);l>=0&&this.head.splice(l,1)},r.prototype.addLink=function(t){var e="link";!this.getHeadByAttr("href",t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:"stylesheet"}})},r.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},r.prototype.addScript=function(t){var e="script";!this.getHeadByAttr("src",t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},r.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},r.prototype.getPage=function(){var t;return(t=this.collection)===null||t===void 0?void 0:t.page},r.prototype._emitUpdated=function(t){t===void 0&&(t={}),this.em.trigger("frame:updated",Y({frame:this},t))},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=_t.prototype.toJSON.call(this,t),n=(0,y.result)(this,"defaults");return t.fromUndo&&delete e.component,delete e.styles,delete e.changesCount,e[H]&&delete e.width,e[et]&&delete e.height,(0,y.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,y.forEach)(n,function(i,l){e[l]===i&&delete e[l]}),(0,y.forEach)(["attributes","head"],function(i){(0,y.isEmpty)(e[i])&&delete e[i]}),e},r}(_t);const Pt=at;var ct=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Tt=function(a){function r(t,e){e===void 0&&(e=[]);var n=a.call(this,t,e,Pt)||this;return n.loadedItems=0,n.itemsToLoad=0,(0,y.bindAll)(n,"itemLoaded"),n.on("reset",n.onReset),n.on("remove",n.onRemove),n}return ct(r,a),r.prototype.onReset=function(t,e){var n=this;((e==null?void 0:e.previousModels)||[]).map(function(i){return n.onRemove(i)})},r.prototype.onRemove=function(t){t==null||t.onRemove()},r.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},r.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},r.prototype.listenToLoadItems=function(t){var e=this;this.forEach(function(n){return n[t?"on":"off"]("loaded",e.itemLoaded)})},r}(Jt);var q=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ut=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,i=e.em,l={};n.em=i,t.frames||(l.component=t.component,l.styles=t.styles,["component","styles"].map(function(g){return n.unset(g)}));var f=t.frames||[l],d=new Tt(i.Canvas,f);d.page=n,n.set("frames",d),!n.getId()&&n.set("id",i==null?void 0:i.get("PageManager")._createId());var m=i==null?void 0:i.get("UndoManager");return m==null||m.add(d),n}return q(r,a),r.prototype.defaults=function(){return{frames:[],_undo:!0}},r.prototype.onRemove=function(){this.getFrames().reset()},r.prototype.getFrames=function(){return this.get("frames")},r.prototype.getId=function(){return this.id},r.prototype.getName=function(){return this.get("name")},r.prototype.setName=function(t){return this.set({name:t})},r.prototype.getAllFrames=function(){return this.getFrames().models||[]},r.prototype.getMainFrame=function(){return this.getFrames().at(0)},r.prototype.getMainComponent=function(){var t=this.getMainFrame();return t==null?void 0:t.getComponent()},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=S.Hn.prototype.toJSON.call(this,t),n=(0,y.result)(this,"defaults");return(0,y.forEach)(e,function(i,l){l.indexOf("_")===0&&delete e[l]}),(0,y.forEach)(n,function(i,l){e[l]===i&&delete e[l]}),e},r}(S.Hn);var Ht=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ae=function(){return ae=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ae.apply(this,arguments)};const Fe=function(a){function r(t,e){var n=a.call(this,t)||this;return n.on("reset",n.onReset),n.on("remove",n.onRemove),n.model=function(i,l){return l===void 0&&(l={}),new Ut(i,ae(ae({},l),{em:e}))},n}return Ht(r,a),r.prototype.onReset=function(t,e){var n,i=this;(n=e==null?void 0:e.previousModels)===null||n===void 0||n.map(function(l){return i.onRemove(l)})},r.prototype.onRemove=function(t){t==null||t.onRemove()},r}(S.FE);var Ie=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ee=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ne="page",Ce="".concat(Ne,":"),Ve="".concat(Ce,"select"),ve="".concat(Ve,":before"),ye="".concat(Ce,"update"),we="".concat(Ce,"add"),xe="".concat(we,":before"),ft="".concat(Ce,"remove"),ie="".concat(ft,":before"),re="change:selected",he="main",fe={all:Ne,select:Ve,selectBefore:ve,update:ye,add:we,addBefore:xe,remove:ft,removeBefore:ie},oe=function(a){function r(t){var e=a.call(this,t,"PageManager",new Fe([],t),fe)||this;e.storageKey="pages",(0,y.bindAll)(e,"_onPageChange");var n=new _t({_undo:!0});return e.model=n,e.pages.on("reset",function(i){return i.at(0)&&e.select(i.at(0))}),e.pages.on("all",e.__onChange,e),n.on(re,e._onPageChange),e}return Ie(r,a),Object.defineProperty(r.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),r.prototype.getAll=function(){return Ee([],this.all.models,!0)},r.prototype.__onChange=function(t,e,n,i){var l=i||n;this.em.trigger(Ne,{event:t,page:e,options:l})},r.prototype.onLoad=function(){var t,e=this,n=this.pages,i={silent:!0};n.add(((t=this.config.pages)===null||t===void 0?void 0:t.map(function(f){return new Ut(f,{em:e.em,config:e.config})}))||[],i);var l=n.length?this.getMain():this.add({type:he},i);l&&this.select(l,i)},r.prototype._onPageChange=function(t,e,n){var i=this.em,l=i.Layers,f=e.getMainComponent();l&&f&&l.setRoot(f),i.trigger(Ve,e,t.previous("selected")),this.__onChange(re,e,n)},r.prototype.postLoad=function(){var t=this,e=t.em,n=t.model,i=t.pages,l=e.UndoManager;l.add(n),l.add(i),i.on("add remove reset change",function(f,d,m){return e.changesUp(m||d)})},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var i=this.em;t.id=t.id||this._createId();var l=function(){var f=n.pages.add(new Ut(t,{em:n.em,config:n.config}),e);return e.select&&n.select(f),f};return!e.silent&&i.trigger(xe,t,l,e),!e.abort&&l()},r.prototype.remove=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,y.isString)(t)?this.get(t):t,f=function(){return l&&n.pages.remove(l,e),l};return!e.silent&&i.trigger(ie,l,f,e),!e.abort&&f()},r.prototype.get=function(t){return this.pages.filter(function(e){return e.get(e.idAttribute)===t})[0]},r.prototype.getMain=function(){var t=this.pages;return t.filter(function(e){return e.get("type")===he})[0]||t.at(0)},r.prototype.getAllWrappers=function(){var t=this.getAll();return(0,y.unique)((0,y.flatten)(t.map(function(e){return e.getAllFrames().map(function(n){return n.getComponent()})})))},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,y.isString)(t)?this.get(t):t;return n&&(this.em.trigger(ve,n,e),this.model.set("selected",n,e)),this},r.prototype.getSelected=function(){return this.model.get("selected")},r.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(e){return t[e]=0})},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.pages,reset:!0})},r.prototype._createId=function(){var t,e=this.getAll().length+16,n=this.getAllMap();do t=(0,N.createId)(e);while(n[t]);return t},r}($t);const He=oe,nn={default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]};var Ge=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const bn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ge(r,a),r.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},r.prototype.initialize=function(){var t=this;this.get("widthMedia")===null&&this.set("widthMedia",this.get("width")),this.get("width")===null&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(e){return t.checkUnit(e)})},r.prototype.checkUnit=function(t){var e=this.get(t)||"";(parseFloat(e)||0).toString()===e.toString()&&this.set(t,"".concat(e,"px"))},r.prototype.getName=function(){return this.get("name")||this.get("id")},r.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},r}(S.Hn);var Nn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),At=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Nn(r,a),r}(S.FE);const Yt=At;At.prototype.model=bn;var _=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),I=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a};const z=function(a){function r(t){var e=a.call(this,t)||this;return e.config=t.config||{},e.em=e.config.em,e.ppfx=e.config.pStylePrefix||"",e.listenTo(e.em,"change:device",e.updateSelect),e}return _(r,a),r.prototype.template=function(t){var e=t.ppfx,n=t.label;return K(wt||(wt=I([`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `],[`
      <div class="`,'device-label">',`</div>
      <div class="`,"field ",`select">
        <span id="`,`input-holder">
          <select class="`,`devices"></select>
        </span>
        <div class="`,`sel-arrow">
          <div class="`,`d-s-arrow"></div>
        </div>
      </div>
      <button style="display:none" class="`,`add-trasp" data-add-trasp>+</button>
    `])),e,n,e,e,e,e,e,e,e)},r.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},r.prototype.startAdd=function(){},r.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set("device",e?e.val():"")}},r.prototype.updateSelect=function(){var t=this.em,e=this.devicesEl;if(t&&t.getDeviceModel&&e){var n=t.getDeviceModel();e.val(n?n.get("id"):"")}},r.prototype.getOptions=function(){var t=this.collection,e=this.em,n="";return t.forEach(function(i){var l=i.attributes,f=l.name,d=l.id,m=e&&e.t&&e.t("deviceManager.devices.".concat(d))||f;n+='<option value="'.concat(d||f,'">').concat(m,"</option>")}),n},r.prototype.render=function(){var t=this,e=t.em,n=t.ppfx,i=t.$el,l=t.el,f=e&&e.t&&e.t("deviceManager.device");return i.html(this.template({ppfx:n,label:f})),this.devicesEl=i.find(".".concat(n,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get("device")),l.className="".concat(n,"devices-c"),this},r}(S.G7);var wt,Nt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mt=function(){return Mt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Mt.apply(this,arguments)},ce="device",ke="".concat(ce,":"),ze="".concat(ke,"select"),Ye="".concat(ke,"update"),pn="".concat(ke,"add"),ue="".concat(ke,"remove"),J="".concat(ue,":before"),vt="change:device",St={all:ce,select:ze,update:Ye,add:pn,remove:ue,removeBefore:J},Lt=function(a){function r(t){var e,n=this;return(n=a.call(this,t,"DeviceManager",new Yt,St,nn)||this).Device=bn,n.Devices=Yt,n.storageKey="",n.devices=n.all,(e=n.config.devices)===null||e===void 0||e.forEach(function(i){return n.add(i,{silent:!0})}),n.select(n.config.default||n.devices.at(0)),t.on(vt,n._onSelect,n),n}return Nt(r,a),r.prototype._onSelect=function(t,e,n){var i=this.em,l=this.events,f=t.previous("device"),d=this.get(e),m=l.select;i.trigger(m,d,this.get(f)),this.__catchAllEvent(m,d,n)},r.prototype.add=function(t,e){var n;e===void 0&&(e={});var i=e;if((0,y.isString)(t)){var l=e;n=Mt(Mt({},i=arguments[2]||{}),{id:t,name:i.name||t,width:l})}else n=t;return n.id||(n.id=n.name||this._createId()),this.devices.add(n,i)},r.prototype.get=function(t){return this.getAll().filter(function(e){return e.get("name")===t})[0]||this.devices.get(t)||null},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getDevices=function(){return this.devices.models},r.prototype.select=function(t,e){e===void 0&&(e={});var n=(0,y.isString)(t)?this.get(t):t;return n&&this.em.set("device",n.get("id"),e),this},r.prototype.getSelected=function(){return this.get(this.em.get("device"))},r.prototype.getAll=function(){return this.devices},r.prototype.render=function(){var t,e=this.em;return(t=this.view)===null||t===void 0||t.remove(),this.view=new z({collection:this.devices,config:Mt({em:e},this.config)}),this.view.render().el},r.prototype.destroy=function(){this.__destroy()},r}($t);const pe=Lt;var Se=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Qe=function(a){function r(t){var e=this,n=t.em,i=t.config,l=i.scripts,f=i.styles;return(e=a.call(this,t,{scripts:l,styles:f})||this).set("frames",new Tt(t)),e.listenTo(e,"change:zoom",e.onZoomChange),e.listenTo(n,"change:device ".concat(Ye),e.updateDevice),e.listenTo(n,Ve,e._pageUpdated),e}return Se(r,a),r.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[]}},Object.defineProperty(r.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),r.prototype.init=function(){var t=this.em.Pages.getMain();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype._pageUpdated=function(t,e){var n=this.em;n.setSelected(),n.get("readyCanvas")&&n.stopDefault(),e==null||e.getFrames().map(function(i){return i.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},r.prototype.updateDevice=function(t){t===void 0&&(t={});var e=this.em,n=e.getDeviceModel(),i=t.frame||e.getCurrentFrameModel();if(i&&n){var l=n.attributes,f=l.width,d=l.height;i.set({width:f,height:d},{noUndo:1})}},r.prototype.onZoomChange=function(){this.get("zoom")<1&&this.set("zoom",1)},r}(_t);const sn=Qe;var Un=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Sn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Un(r,a),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"module",{get:function(){var t,e;return(e=(t=this.model)===null||t===void 0?void 0:t.module)!==null&&e!==void 0?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),r.prototype.preinitialize=function(t){this.className=""},r}(S.G7);var Ze=rt(491),$r=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const lr=function(a){function r(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var n=a.call(this,t)||this;return n.itemsView="",n.itemType="type",n.reuseView=!1,n.viewCollection=[],e&&n.listenTo(n.collection,"add",n.addTo),n}return $r(r,a),r.prototype.addTo=function(t){this.add(t)},r.prototype.itemViewNotFound=function(t){},r.prototype.add=function(t,e){var n,i=this,l=i.reuseView,f=i.viewCollection,d=(i.itemsView,e||null),m=t.get(this.itemType);n=t.view&&l?t.view:this.renderView(t,m),f.push(n);var g=n.render().el;d?d.appendChild(g):this.$el.append(g)},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(n){return t.add(n,e)}),this.$el.append(e),this.onRender(),this},r.prototype.onRender=function(){},r.prototype.onRemoveBefore=function(t,e){},r.prototype.onRemove=function(t,e){},r.prototype.remove=function(t){t===void 0&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),S.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},r.prototype.clearItems=function(){this.viewCollection},r}(Sn);var Wr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const On=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{};var n=e.model;return e.listenTo(n,"change",e.render),e.listenTo(n,"destroy remove",e.remove),e.listenTo(n.get("selectors"),"change",e.render),e}return Wr(r,a),r.prototype.tagName=function(){return"style"},r.prototype.render=function(){var t=this.model,e=this.el,n=t.get("important");return e.innerHTML=t.toCSS({important:n}),this},r}(S.G7);var Ln=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const rr=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ln(r,a),r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=t.get("important");return this.el.textContent=t.getDeclaration({important:e}),this},r}(On);var qr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$n=function(a,r){return"".concat(a).concat(r?"-".concat(parseFloat(r)):"")},Ho=function(a){function r(t){var e=a.call(this,t)||this;(0,y.bindAll)(e,"sortRules");var n=t.config||{};e.atRules={},e.config=n,e.em=n.em,e.pfx=n.stylePrefix||"",e.className=e.pfx+"rules";var i=e.collection;return e.listenTo(i,"add",e.addTo),e.listenTo(i,"reset",e.render),e}return qr(r,a),r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){if(this.renderStarted){var n,i,l=e||null,f={model:t,config:this.config};if(t.get("atRuleType")==="keyframes"){var d=t.getAtRule(),m=this.atRules[d];if(!m){var g=document.createElement("style");m=document.createTextNode(""),g.appendChild(document.createTextNode("".concat(d,"{"))),g.appendChild(m),g.appendChild(document.createTextNode("}")),this.atRules[d]=m,n=g}i=new rr(f),m.appendData(i.render().el.textContent)}else n=(i=new On(f)).render().el;var x=this.className,A=t.get("mediaText"),$=$n(x),Z=$;if(A&&(Z=$n(x,this.getMediaWidth(A))),n){var ut=l||this.el,yt=void 0;try{yt=ut.querySelector("#".concat(Z))}catch{}yt||(yt=ut.querySelector("#".concat($))),yt==null||yt.appendChild(n)}return n}},r.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},r.prototype.sortRules=function(t,e){var n=(this.em.getConfig().mediaCondition||"").indexOf("min-width")!==-1;return n?(n?t:e)-(n?e:t):0},r.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,n=e.em,i=e.$el,l=e.collection,f=this.className,d=document.createDocumentFragment();i.empty();var m=n.Devices.getAll().pluck("priority").sort(this.sortRules);return m.every(function(g){return g})&&m.unshift(0),m.forEach(function(g){return d.appendChild((0,Ze.ut)("div",{id:$n(f,g)}))}),l.each(function(g){return t.addToCollection(g,d)}),i.append(d),i.attr("class",f),this},r}(S.G7);const oi=Ho;var Bo=function(){return Bo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Bo.apply(this,arguments)},ko=function(){function a(r,t){var e=this;this.em=r,this.canvas=r.Canvas;var n=t||this.canvas.getFrames().map(function(l){return l.getComponent().getEl()}),i=Array.isArray(n)?n:[n];this.el=i[0],this.counter=0,(0,y.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave"),i.forEach(function(l){return e.toggleEffects(l,!0)})}return a.prototype.toggleEffects=function(r,t){var e={on:N.on,off:N.off},n=t?"on":"off";e[n](r,"dragenter",this.handleDragEnter),e[n](r,"dragover",this.handleDragOver),e[n](r,"drop",this.handleDrop),e[n](r,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(r){var t,e=r?N.on:N.off,n=this.el.ownerDocument,i=(t=n.defaultView)===null||t===void 0?void 0:t.frameElement;this.sortOpts=r?{onStart:function(l){var f=l.sorter;(0,N.on)(i,"pointermove",f.onMove)},onEnd:function(l){var f=l.sorter;(0,N.off)(i,"pointermove",f.onMove)},customTarget:function(l){var f=l.event;return n.elementFromPoint(f.clientX,f.clientY)}}:null,e(i,"pointerenter",this.handleDragEnter),e(i,"pointermove",this.handleDragOver),e(document,"pointerup",this.handleDrop),e(i,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(r){this.over?this.endDrop(r):this.__customTglEff(!1)},a.prototype.endDrop=function(r,t){var e=this.em,n=this.dragStop;this.counter=0,n&&n(r),this.__customTglEff(!1),e.trigger("canvas:dragend",t)},a.prototype.handleDragLeave=function(r){this.updateCounter(-1,r)},a.prototype.updateCounter=function(r,t){this.counter+=r,this.counter===0&&this.endDrop(!0,t)},a.prototype.handleDragEnter=function(r){var t=this,e=this.em,n=this.canvas,i=r.dataTransfer;if(this.updateCounter(1,r),!this.over){this.over=!0;var l,f,d=e.Utils,m=e.get("dragContent")||"<br>";if(e.stopDefault(),e.inAbsoluteMode()){var g=e.Components.getWrapper(),x=g.append({})[0],A=e.Commands.run("core:component-drag",{event:r,guidesInfo:1,center:1,target:x,onEnd:function(Z,ut,yt){var pt;if(!yt.cancelled){pt=g.append(m)[0];var Bt=n.getOffset(),Zt=x.getStyle(),Pe=Zt.top,Le=Zt.left,Ke=Zt.position;pt.addStyle({left:parseFloat(Le)-Bt.left+"px",top:parseFloat(Pe)-Bt.top+"px",position:Ke})}t.handleDragEnd(pt,i),x.remove()}});l=function(Z){return A.stop(r,{cancel:Z})},f=function(Z){return m=Z}}else{var $=new d.Sorter(Bo({em:e,wmargin:1,nested:1,canvasRelative:1,direction:"a",container:this.el,placer:n.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:"gjs-",onEndMove:function(Z){return t.handleDragEnd(Z,i)},document:this.el.ownerDocument},this.sortOpts||{}));$.setDropContent(m),$.startSort(),this.sorter=$,l=function(Z){Z&&($.moved=!1),$.endMove()},f=function(Z){return $.setDropContent(Z)}}this.dragStop=l,this.dragContent=f,e.trigger("canvas:dragenter",i,m)}},a.prototype.handleDragEnd=function(r,t){var e=this.em;this.over=!1,r&&(e.set("dragResult",r),e.trigger("canvas:drop",t,r)),e.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(r){r.preventDefault(),this.em.trigger("canvas:dragover",r)},a.prototype.handleDrop=function(r){r.preventDefault();var t=this.dragContent,e=r.dataTransfer,n=this.getContentByData(e).content;r.target.style.border="",n&&t&&t(n),this.endDrop(!n,r)},a.prototype.getContentByData=function(r){var t=this.em,e=r&&r.types,n=r&&r.files||[],i=t.get("dragContent"),l=r&&r.getData("text");if(n.length){l=[];for(var f=0;f<n.length;f++){var d=n[f],m=d.type.split("/")[0];m=="image"&&l.push({type:m,file:d,attributes:{alt:d.name}})}}else if(i)l=i;else if((0,y.indexOf)(e,"text/html")>=0)l=r&&r.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,y.indexOf)(e,"text/uri-list")>=0)l={type:"link",attributes:{href:l},content:l};else if((0,y.indexOf)(e,"text/json")>=0){var g=r&&r.getData("text/json");g&&(l=JSON.parse(g))}else e.length===1&&e[0]==="text/plain"&&(l="<div>".concat(l,"</div>"));var x={content:l};return t.trigger("canvas:dragdata",r,x),x},a}();const Sr=ko;var hr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),dn=function(){return dn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},dn.apply(this,arguments)},Wn=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Gr=function(a){function r(t,e){var n=a.call(this,{model:t})||this;n.dragging=!1,n.lastMaxHeight=0,n.tools={},(0,y.bindAll)(n,"updateClientY","stopAutoscroll","autoscroll","_emitUpdate");var i=n,l=i.el;i.em,n.module._config=dn(dn({},n.config||{}),{frameView:n}),n.frameWrapView=e,n.showGlobalTools=(0,y.debounce)(n.showGlobalTools.bind(n),50);var f=n.getCanvasModel();return n.listenTo(t,"change:head",n.updateHead),n.listenTo(f,"change:styles",n.renderStyles),t.view=n,(0,N.setViewEl)(l,n),n}return hr(r,a),Object.defineProperty(r.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),r.prototype.updateHead=function(){var t=this.model,e=this.getHead(),n=[],i=[],l=t.head,f=t.previous("head"),d=function(g){return g===void 0&&(g={}),Object.keys(g).sort().map(function(x){return"[".concat(x,'="').concat(g[x],'"]')}).join("")},m=function(g,x,A){g.forEach(function($){var Z=$.tag,ut=$.attributes;!x.some(function(yt){return yt.tag===Z&&d(yt.attributes)===d(ut)})&&A.push($)})};m(l,f,i),m(f,l,n),n.forEach(function(g){var x,A=e.querySelector("".concat(g.tag).concat(d(g.attributes)));(x=A==null?void 0:A.parentNode)===null||x===void 0||x.removeChild(A)}),(0,Ze.SJ)(e,i)},r.prototype.getEl=function(){return this.el},r.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},r.prototype.getWindow=function(){return this.getEl().contentWindow},r.prototype.getDoc=function(){return this.getEl().contentDocument},r.prototype.getHead=function(){return this.getDoc().querySelector("head")},r.prototype.getBody=function(){return this.getDoc().querySelector("body")},r.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},r.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Ze.ut)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},r.prototype.getToolsEl=function(){var t;return(t=this.frameWrapView)===null||t===void 0?void 0:t.elTools},r.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},r.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},r.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},r.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},r.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},r.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),n=e.scrollTop,i=e.scrollLeft,l=t.offsetHeight,f=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:l,width:f,scrollTop:n,scrollLeft:i,scrollBottom:n+l,scrollRight:i+f}},r.prototype._getTool=function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.wrapper;return this._toggleEffects(!1),this.tools={},n&&n.remove(),Sn.prototype.remove.apply(this,t),this},r.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout(function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)},0)},r.prototype.autoscroll=function(){if(this.dragging){var t=this.lastClientY,e=this.em.Canvas,n=this.getWindow(),i=n.pageYOffset,l=t||0,f=e.getConfig().autoscrollLimit,d=this.getRect().height-f,m=i;l<f&&(m-=f-l),l>d&&(m+=l-d),!(0,y.isUndefined)(t)&&m!==i&&m>0&&m<this.lastMaxHeight&&(this.getGlobalToolsEl().style.opacity="0",this.showGlobalTools(),n.scrollTo(0,m)),requestAnimationFrame(this.autoscroll)}},r.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,N.getPointerEvent)(t).clientY*this.em.getZoomDecimal()},r.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},r.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},r.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),n=t?"on":"off",i={on:N.on,off:N.off};i[n](e,"mousemove dragover",this.updateClientY),i[n](e,"mouseup",this.stopAutoscroll)},r.prototype.render=function(){var t=this.$el,e=this.ppfx;return t.attr({class:"".concat(e,"frame")}),this.renderScripts(),this},r.prototype.renderScripts=function(){var t=this,e=this,n=e.el,i=e.model,l=e.em,f="frame:load",d={el:n,model:i,view:this},m=this.getCanvasModel(),g=function(x){var A;if(x.length>0){var $=x.shift(),Z=(0,Ze.ut)("script",dn({type:"text/javascript"},(0,y.isString)($)?{src:$}:$));Z.onerror=Z.onload=g.bind(null,x),(A=n.contentDocument)===null||A===void 0||A.head.appendChild(Z)}else t.renderBody(),l&&l.trigger(f,d)};n.onload=function(){var x=t.config.frameContent;if(x){var A=t.getDoc();A.open(),A.write(x),A.close()}l&&l.trigger("".concat(f,":before"),d),g(Wn([],m.get("scripts"),!0))}},r.prototype.renderStyles=function(t){t===void 0&&(t={});var e=this.getHead(),n=this.getCanvasModel(),i=function(x){return x.map(function(A){return{tag:"link",attributes:dn({rel:"stylesheet"},(0,y.isString)(A)?{href:A}:A)}})},l=i(t.prev||n.previous("styles")),f=i(n.get("styles")),d=[],m=[],g=function(x,A,$){x.forEach(function(Z){var ut=Z.attributes.href;!A.some(function(yt){return yt.attributes.href===ut})&&$.push(Z)})};g(f,l,m),g(l,f,d),d.forEach(function(x){var A,$=e.querySelector('link[href="'.concat(x.attributes.href,'"]'));(A=$==null?void 0:$.parentNode)===null||A===void 0||A.removeChild($)}),(0,Ze.SJ)(e,m)},r.prototype.renderBody=function(){var t,e,n=this,i=this,l=i.config,f=i.em,d=i.model,m=i.ppfx,g=this.getDoc(),x=this.getBody(),A=this.getWindow(),$=f.config;A._isEditor=!0,this.renderStyles({prev:[]}),(0,Ze.R3)(x,`<style>
      `.concat($.baseCss||l.frameStyle||"",`

      [data-gjs-type="wrapper"] {
        min-height: 100vh;
        padding-top: 0.001em;
      }

      .`).concat(m,`dashed *[data-gjs-highlightable] {
        outline: 1px dashed rgba(170,170,170,0.7);
        outline-offset: -2px;
      }

      .`).concat(m,`selected {
        outline: 2px solid #3b97e3 !important;
        outline-offset: -2px;
      }

      .`).concat(m,`selected-parent {
        outline: 2px solid `).concat("#ffca6f",` !important
      }

      .`).concat(m,`no-select {
        user-select: none;
        -webkit-user-select:none;
        -moz-user-select: none;
      }

      .`).concat(m,`freezed {
        opacity: 0.5;
        pointer-events: none;
      }

      .`).concat(m,`no-pointer {
        pointer-events: none;
      }

      .`).concat(m,`plh-image {
        background: #f5f5f5;
        border: none;
        height: 100px;
        width: 100px;
        display: block;
        outline: 3px solid #ffca6f;
        cursor: pointer;
        outline-offset: -2px
      }

      .`).concat(m,`grabbing {
        cursor: grabbing;
        cursor: -webkit-grabbing;
      }

      .`).concat(m,`is__grabbing {
        overflow-x: hidden;
      }

      .`).concat(m,`is__grabbing,
      .`).concat(m,`is__grabbing * {
        cursor: grabbing !important;
      }

      `).concat($.canvasCss||"",`
      `).concat($.protectedCss||"",`
    </style>`));var Z=d.getComponent(),ut=f.Components.getType("wrapper").view;this.wrapper=new ut({model:Z,config:dn(dn({},Z.config),{em:f,frameView:this})}).render(),(0,Ze.R3)(x,(t=this.wrapper)===null||t===void 0?void 0:t.el),(0,Ze.R3)(x,new oi({collection:d.getStyles(),config:dn(dn({},f.Css.getConfig()),{frameView:this})}).render().el),(0,Ze.R3)(x,this.getJsContainer()),(0,N.on)(x,"click",function(yt){var pt;return yt&&((pt=yt.target)===null||pt===void 0?void 0:pt.tagName)=="A"&&yt.preventDefault()}),(0,N.on)(x,"submit",function(yt){return yt&&yt.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent"}].forEach(function(yt){return yt.event.split(" ").forEach(function(pt){g.addEventListener(pt,function(Bt){return n.el.dispatchEvent((0,Ze.t3)(Bt,yt.class))})})}),this._toggleEffects(!0),(0,N.hasDnd)(f)&&(this.droppable=new Sr(f,(e=this.wrapper)===null||e===void 0?void 0:e.el)),d.trigger("loaded")},r.prototype._toggleEffects=function(t){var e=t?N.on:N.off,n=this.getWindow();n&&e(n,"".concat(Ze.G1," resize"),this._emitUpdate)},r.prototype._emitUpdate=function(){this.model._emitUpdated()},r}(Sn);const zo=Gr;var so=rt(668),Zn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qn=function(){return qn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},qn.apply(this,arguments)};const or=function(a){function r(t,e){var n=a.call(this,{model:t})||this;return(0,y.bindAll)(n,"onScroll","frameLoaded","updateOffset","remove","startDrag"),qn(qn({},t.config),{frameWrapView:n}),n.cv=e,n.frame=new zo(t,n),n.classAnim="".concat(n.ppfx,"frame-wrapper--anim"),n.updateOffset=(0,y.debounce)(n.updateOffset.bind(n),0),n.updateSize=(0,y.debounce)(n.updateSize.bind(n),0),n.listenTo(t,"loaded",n.frameLoaded),n.listenTo(t,"change:x change:y",n.updatePos),n.listenTo(t,"change:width change:height",n.updateSize),n.listenTo(t,"destroy remove",n.remove),n.updatePos(),n.setupDragger(),n}return Zn(r,a),r.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},r.prototype.setupDragger=function(){var t,e,n,i=this,l=this.module,f=this.model,d=function(m){l.toggleFramesEvents(m)};this.dragger=new so.Z({onStart:function(){var m=f.attributes,g=m.x,x=m.y;n=i.em.getZoomMultiplier(),t=g,e=x,d(!1)},onEnd:function(){return d(!0)},setPosition:function(m){f.set({x:t+m.x*n,y:e+m.y*n})}})},r.prototype.startDrag=function(t){var e;t&&((e=this.dragger)===null||e===void 0||e.start(t))},r.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,Ze.L_)(this.elTools)},r.prototype.remove=function(t){var e=this;return this.__clear(t),Sn.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(n){return e[n]=0}),this},r.prototype.updateOffset=function(){var t,e=this,n=e.em,i=e.$el,l=e.frame;n&&(n.runDefault({preserveSelected:1}),i.removeClass(this.classAnim),(t=l==null?void 0:l.model)===null||t===void 0||t._emitUpdated())},r.prototype.updatePos=function(t){var e=this.model,n=this.el,i=e.attributes,l=i.x,f=i.y,d=n.style;this.frame.rect=void 0,d.left=isNaN(l)?l:"".concat(l,"px"),d.top=isNaN(f)?f:"".concat(f,"px"),t&&this.updateOffset()},r.prototype.updateSize=function(){this.updateDim()},r.prototype.updateDim=function(){var t=this,e=t.em,n=t.el,i=t.$el,l=t.model,f=t.classAnim,d=t.frame;if(d){d.rect=void 0,i.addClass(f);var m=this.__handleSize(),g=m.noChanges,x=m.width,A=m.height;((0,y.isNull)(x)||(0,y.isNull)(A))&&l.set(qn(qn({},x?{}:{width:n.offsetWidth}),A?{}:{height:n.offsetHeight}),{silent:1}),e.stopDefault({preserveSelected:1}),g?this.updateOffset():setTimeout(this.updateOffset,350)}},r.prototype.onScroll=function(){var t=this.frame;this.em.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},r.prototype.frameLoaded=function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},r.prototype.__handleSize=function(){var t="px",e=this.model,n=this.el.style,i=e.attributes,l=i.width,f=i.height,d=n.width||"",m=n.height||"",g=l||"",x=f||"",A=d==g&&m==x;return n.width=(0,y.isNumber)(g)?"".concat(g).concat(t):g,n.height=(0,y.isNumber)(x)?"".concat(x).concat(t):x,{noChanges:A,width:l,height:f,newW:g,newH:x}},r.prototype.render=function(){var t=this,e=t.frame,n=t.$el,i=t.ppfx,l=t.cv,f=t.model,d=t.el,m=f.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),n.empty().attr({class:"".concat(i,"frame-wrapper")}).append(`
      <div class="`.concat(i,`frame-wrapper__top gjs-two-color" data-frame-top>
        <div class="`).concat(i,`frame-wrapper__name" data-action-move>
          `).concat(f.get("name")||"",`
        </div>
        <div class="`).concat(i,`frame-wrapper__top-r">
          <div class="`).concat(i,`frame-wrapper__icon" data-action-remove style="display: none">
            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>
          </div>
        </div>
      </div>
      <div class="`).concat(i,`frame-wrapper__right" data-frame-right></div>
      <div class="`).concat(i,`frame-wrapper__left" data-frame-left></div>
      <div class="`).concat(i,`frame-wrapper__bottom" data-frame-bottom></div>
      `)).append(e.el);var g=(0,Ze.ut)("div",{class:"".concat(i,"tools"),style:"pointer-events:none; display: none"},`
      <div class="`.concat(i,`highlighter" data-hl></div>
      <div class="`).concat(i,`badge" data-badge></div>
      <div class="`).concat(i,`placeholder">
        <div class="`).concat(i,`placeholder-int"></div>
      </div>
      <div class="`).concat(i,`ghost"></div>
      <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
      <div class="`).concat(i,`resizer"></div>
      <div class="`).concat(i,`offset-v" data-offset>
        <div class="gjs-marginName" data-offset-m>
          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>
          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>
          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>
          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>
        </div>
        <div class="gjs-paddingName" data-offset-m>
          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>
          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>
          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>
          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>
        </div>
      </div>
      <div class="`).concat(i,`offset-fixed-v"></div>
    `));this.elTools=g;var x=l==null?void 0:l.toolsWrapper;return x&&x.appendChild(g),m&&m({el:d,elTop:d.querySelector("[data-frame-top]"),elRight:d.querySelector("[data-frame-right]"),elBottom:d.querySelector("[data-frame-bottom]"),elLeft:d.querySelector("[data-frame-left]"),frame:f,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},r}(Sn);var ii=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),po=function(a){function r(t,e){t===void 0&&(t={});var n=a.call(this,t,!0)||this;return n.listenTo(n.collection,"reset",n.render),n.canvasView=e.canvasView,n._module=e.module,n}return ii(r,a),r.prototype.onRemoveBefore=function(t,e){e===void 0&&(e={}),t.forEach(function(n){return n.remove(e)})},r.prototype.onRender=function(){var t=this.$el,e=this.ppfx;t.attr({class:"".concat(e,"frames")})},r.prototype.renderView=function(t,e){return new or(t,this.canvasView)},r}(lr);const ln=po;var je=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gr=function(){return gr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},gr.apply(this,arguments)},si=function(a){function r(t){var e=a.call(this,{model:t})||this;e.ready=!1,(0,y.bindAll)(e,"clearOff","onKeyPress","onCanvasMove"),e.className=e.pfx+"canvas";var n=e.em;return e._initFrames(),e.listenTo(n,"change:canvasOffset",e.clearOff),e.listenTo(n,"component:selected",e.checkSelected),e.listenTo(t,"change:zoom change:x change:y",e.updateFrames),e.listenTo(t,"change:frames",e._onFramesUpdate),e.toggleListeners(!0),e}return je(r,a),r.prototype.events=function(){return{wheel:"onWheel"}},r.prototype.template=function(){var t=this.pfx;return`
      <div class="`.concat(t,`canvas__frames" data-frames></div>
      <div id="`).concat(t,'tools" class="').concat(t,`canvas__tools" data-tools></div>
    `)},r.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},r.prototype._initFrames=function(){var t=this,e=t.frames,n=t.model,i=t.config,l=t.em,f=n.frames;l.set("readyCanvas",0),f.once("loaded:all",function(){return l.set("readyCanvas",1)}),e==null||e.remove(),this.frames=new ln({collection:f},gr(gr({},i),{canvasView:this}))},r.prototype.checkSelected=function(t,e){var n;e===void 0&&(e={});var i=e.scroll,l=this.em.get("currentFrame");i&&((n=t.views)===null||n===void 0||n.forEach(function(f){f._getFrame()===l&&f.scrollIntoView(i)}))},r.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.frames)===null||t===void 0||t.remove(),this.frames=void 0,Sn.prototype.remove.apply(this,e),this.toggleListeners(!1),this},r.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),(e=t._parentEvent)===null||e===void 0||e.preventDefault())},r.prototype.onCanvasMove=function(t){},r.prototype.toggleListeners=function(t){this.el;var e=t?N.on:N.off;e(document,"keypress",this.onKeyPress),e(window,"scroll resize",this.clearOff)},r.prototype.onKeyPress=function(t){var e=this.em;(0,N.getKeyChar)(t)!==" "||e.getZoomDecimal()===1||e.Canvas.isInputFocused()||(this.preventDefault(t),e.Editor.runCommand("core:canvas-move"))},r.prototype.onWheel=function(t){if((t.ctrlKey||t.metaKey)&&this.em.getConfig().multiFrames){this.preventDefault(t);var e=this.model,n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),i=e.get("zoom");e.set("zoom",i+2*n)}},r.prototype.updateFrames=function(t){var e=this.em,n=this.model.attributes,i=n.x,l=n.y,f=this.getZoom(),d={preserveSelected:1},m=f?1/f:1;this.framesArea.style.transform="scale(".concat(f,") translate(").concat(i*m,"px, ").concat(l*m,"px)"),this.clearOff(),e.stopDefault(d),e.trigger("canvas:update",t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){return e.runDefault(d)},300)},r.prototype.getZoom=function(){return this.em.getZoomDecimal()},r.prototype.isElInViewport=function(t){var e=(0,N.getElement)(t),n=(0,N.getElRect)(e),i=this.getFrameOffset(e),l=n.top,f=n.left;return l>=0&&f>=0&&l<=i.height&&f<=i.width},r.prototype.offset=function(t,e){var n,i;e===void 0&&(e={});var l=(0,N.getElRect)(t),f=t==null?void 0:t.ownerDocument.body,d=e.noScroll;return{top:l.top+(d?0:(n=f==null?void 0:f.scrollTop)!==null&&n!==void 0?n:0),left:l.left+(d?0:(i=f==null?void 0:f.scrollLeft)!==null&&i!==void 0?i:0),width:l.width,height:l.height}},r.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},r.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var n=(e=this.frame)===null||e===void 0?void 0:e.el,i=t==null?void 0:t.ownerDocument.defaultView,l=i?i.frameElement:n;this.frmOff=this.offset(l||n)}return this.frmOff},r.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},r.prototype.getElementPos=function(t,e){e===void 0&&(e={});var n=this.getZoom(),i=e||{},l=this.getFrameOffset(t),f=this.el,d=this.getCanvasOffset(),m=this.offset(t,e),g=i.avoidFrameOffset?0:l.top,x=i.avoidFrameOffset?0:l.left;return{top:m.top*n+g-d.top+f.scrollTop,left:m.left*n+x-d.left+f.scrollLeft,height:m.height*n,width:m.width*n,zoom:n,rect:m}},r.prototype.getElementOffsets=function(t){var e=this;if(!t||(0,N.isTextNode)(t))return{};var n={},i=window.getComputedStyle(t);return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"].forEach(function(l){n[l]=parseFloat(i[l])*e.getZoom()}),n},r.prototype.getPosition=function(t){var e;t===void 0&&(t={});var n=(e=this.frame)===null||e===void 0?void 0:e.el.contentDocument;if(n){var i=n.body,l=this.getZoom(),f=this.getFrameOffset(),d=this.getCanvasOffset(),m=t.noScroll;return{top:f.top+(m?0:i.scrollTop)*l-d.top,left:f.left+(m?0:i.scrollLeft)*l-d.left,width:d.width,height:d.height}}},r.prototype.updateScript=function(t){var e=t.model,n=e.getId();t.scriptContainer||(t.scriptContainer=(0,Ze.ut)("div",{"data-id":n}),this.getJsContainer().appendChild(t.scriptContainer)),t.el.id=n,t.scriptContainer.innerHTML="";var i=document.createElement("script"),l=e.getScriptString(),f=e.get("script-props")?l:`function(){
`.concat(l,`
;}`),d=JSON.stringify(e.__getScriptProps());i.innerHTML=`
      setTimeout(function() {
        var item = document.getElementById('`.concat(n,`');
        if (!item) return;
        (`).concat(f,".bind(item))(").concat(d,`)
      }, 1);`),setTimeout(function(){var m=t.scriptContainer;m==null||m.appendChild(i)},0)},r.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return e&&e.getJsContainer()},r.prototype.getFrameView=function(t){return(t==null?void 0:t._getFrame())||this.em.get("currentFrame")},r.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,n=t.frames,i=t.em,l=t.framesArea,f=e.frames;f.listenToLoad(),n.render();var d=f.at(0),m=d==null?void 0:d.view;i.setCurrentFrame(m),l==null||l.appendChild(n.el),this.frame=m}},r.prototype.render=function(){var t=this,e=t.el,n=t.$el,i=t.ppfx,l=t.config,f=t.em;n.html(this.template());var d=n.find("[data-frames]");this.framesArea=d.get(0);var m=n.find("[data-tools]");return this.toolsWrapper=m.get(0),m.append(`
      <div class="`.concat(i,"tools ").concat(i,`tools-gl" style="pointer-events:none">
        <div class="`).concat(i,`placeholder">
          <div class="`).concat(i,`placeholder-int"></div>
        </div>
      </div>
      <div id="`).concat(i,`tools" style="pointer-events:none">
        `).concat(l.extHl?'<div class="'.concat(i,'highlighter-sel"></div>'):"",`
        <div class="`).concat(i,`badge"></div>
        <div class="`).concat(i,`ghost"></div>
        <div class="`).concat(i,`toolbar" style="pointer-events:all"></div>
        <div class="`).concat(i,`resizer"></div>
        <div class="`).concat(i,`offset-v"></div>
        <div class="`).concat(i,`offset-fixed-v"></div>
      </div>
    `)),this.toolsEl=e.querySelector("#".concat(i,"tools")),this.hlEl=e.querySelector(".".concat(i,"highlighter")),this.badgeEl=e.querySelector(".".concat(i,"badge")),this.placerEl=e.querySelector(".".concat(i,"placeholder")),this.ghostEl=e.querySelector(".".concat(i,"ghost")),this.toolbarEl=e.querySelector(".".concat(i,"toolbar")),this.resizerEl=e.querySelector(".".concat(i,"resizer")),this.offsetEl=e.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=e.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=e.querySelector(".".concat(i,"tools-gl")),this.el.className=(0,N.getUiClass)(f,this.className),this.ready=!0,this._renderFrames(),this},r}(Sn);const mr=si;var cn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Gn=function(){return Gn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Gn.apply(this,arguments)},Po=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},ai=function(a){function r(t){var e=a.call(this,t,"Canvas",de)||this;return e.canvas=new sn(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return cn(r,a),r.prototype.getCanvasView=function(){return this.canvasView},r.prototype.init=function(){},r.prototype.onLoad=function(){this.model.init()},r.prototype.getModel=function(){return this.canvas},r.prototype.getElement=function(){return this.getCanvasView().el},r.prototype.getFrame=function(t){return this.getFrames()[t||0]},r.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.el},r.prototype.getFramesEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.framesArea},r.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t==null?void 0:t.getWindow()},r.prototype.getDocument=function(){var t=this.getFrameEl();return t==null?void 0:t.contentDocument},r.prototype.getBody=function(){var t=this.getDocument();return t==null?void 0:t.body},r.prototype._getLocalEl=function(t,e,n){var i=t,l=e==null?void 0:e._getFrame();return i=l?l[n]():i},r.prototype.getGlobalToolsEl=function(){var t;return(t=this.canvasView)===null||t===void 0?void 0:t.toolsGlobEl},r.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},r.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},r.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},r.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},r.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},r.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},r.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},r.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},r.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},r.prototype.render=function(){var t;return(t=this.canvasView)===null||t===void 0||t.remove(),this.canvasView=new mr(this.canvas),this.canvasView.render().el},r.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},r.prototype.offset=function(t){return this.getCanvasView().offset(t)},r.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},r.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},r.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},r.prototype.getRect=function(){var t,e=(t=this.getCanvasView().getPosition())!==null&&t!==void 0?t:{},n=e.top,i=n===void 0?0:n,l=e.left,f=l===void 0?0:l;return Gn(Gn({},this.getCanvasView().getCanvasOffset()),{topScroll:i,leftScroll:f})},r.prototype.getTargetToElementDim=function(t,e,n){n===void 0&&(n={});var i=n||{},l=this.getCanvasView().getPosition();if(l){var f=i.elPos||this.getCanvasView().getElementPos(e),d=n.toRight||0,m=i.targetHeight||t.offsetHeight,g=i.targetWidth||t.offsetWidth,x=i.event||null,A=f.top-m,$=f.left;$+=d?f.width:0;var Z=($=d?$-g:$)<l.left?l.left:$,ut=A<l.top?l.top:A,yt={top:ut=ut>f.top+f.height?f.top+f.height:ut,left:Z,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:l.top,canvasLeft:l.left,canvasWidth:l.width,canvasHeight:l.height};return x&&this.em&&this.em.trigger(x,yt),yt}},r.prototype.canvasRectOffset=function(t,e,n){var i=this;n===void 0&&(n={});var l=function(f,d,m){d===void 0&&(d=1);var g=i.em.getZoomDecimal(),x=d?"top":"left",A=f.ownerDocument,$=n.offset?function(gn){var Rn=gn.defaultView;return Rn==null?void 0:Rn.frameElement}(A):{},Z=$.offsetTop,ut=Z===void 0?0:Z,yt=$.offsetLeft,pt=yt===void 0?0:yt,Bt=A.body||{},Zt=Bt.scrollTop,Pe=Zt===void 0?0:Zt,Le=Bt.scrollLeft,Ke=d?Pe:Le===void 0?0:Le,en=d?ut:pt;return m[x]-(Ke-en)*g};return{top:l(t,1,e),left:l(t,0,e)}},r.prototype.getTargetToElementFixed=function(t,e,n){var i;n===void 0&&(n={});var l=n.pos||this.getElementPos(t),f=n.canvasOff||this.canvasRectOffset(t,l),d=e.offsetHeight||0,m=e.offsetWidth||0,g=l.left+l.width,x=this.getCanvasView(),A=x.getPosition(),$=x.getFrameOffset(t),Z=n.event,ut=-d,yt=(0,y.isUndefined)(n.left)?l.width-m:n.left;yt=l.left<-yt?-l.left:yt;var pt=(i=A==null?void 0:A.width)!==null&&i!==void 0?i:0;yt=g>pt?yt-(g-pt):yt;var Bt=l.height+d,Zt=Bt<$.height;f.top<d&&(Zt?ut+=Bt:ut=-f.top<l.height?-f.top:l.height);var Pe={top:ut,left:yt,canvasOffsetTop:f.top,canvasOffsetLeft:f.left};return Z&&this.em.trigger(Z,Pe),Pe},r.prototype.getMouseRelativePos=function(t,e){e===void 0&&(e={});var n=0,i=0,l=e.subWinOffset,f=t.target.ownerDocument,d=f.defaultView||f.parentWindow,m=d.frameElement,g=l?d.pageYOffset:0,x=l?d.pageXOffset:0;if(m){var A=m.getBoundingClientRect();n=A.top||0,i=A.left||0}return{y:t.clientY+n-g,x:t.clientX+i-x}},r.prototype.getMouseRelativeCanvas=function(t,e){var n,i=this.getZoomDecimal(),l=(n=this.getCanvasView().getPosition(e))!==null&&n!==void 0?n:{},f=l.top,d=f===void 0?0:f,m=l.left,g=m===void 0?0:m;return{y:t.clientY*i+d,x:t.clientX*i+g}},r.prototype.hasFocus=function(){return this.getDocument().hasFocus()},r.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),n=Po(["body"],this.config.notTextable,!0),i=e&&document.activeElement===e?t&&t.activeElement:document.activeElement;return i&&!n.some(function(l){return i.matches(l)})},r.prototype.scrollTo=function(t,e){e===void 0&&(e={});var n=(0,N.getElement)(t),i=n&&(0,N.getViewEl)(n);i&&i.scrollIntoView(e)},r.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},r.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},r.prototype.setZoom=function(t){return this.canvas.set("zoom",parseFloat(t)),this},r.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},r.prototype.setCoords=function(t,e){return this.canvas.set({x:parseFloat(t),y:parseFloat(e)}),this},r.prototype.getCoords=function(){var t=this.canvas.attributes;return{x:t.x,y:t.y}},r.prototype.getZoomDecimal=function(){return this.getZoom()/100},r.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},r.prototype.toggleFramesEvents=function(t){this.getFramesEl().style.pointerEvents=t?"":"none"},r.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},r.prototype.addFrame=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.canvas.frames.add(new Pt(this,Gn({},t)),e)},r.prototype.destroy=function(){var t,e=this;this.canvas.stopListening(),(t=this.canvasView)===null||t===void 0||t.remove(),["model","droppable"].forEach(function(n){return e[n]={}})},r}(Dt);const ne=ai,M={stylePrefix:"comp-",components:[],draggableComponents:!0,processor:void 0,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]};var st="text/html",Gt=st,me=function(){return me=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},me.apply(this,arguments)},Oe="data-gjs-",an="parse:html";const _e=function(a,r){return r===void 0&&(r={}),{compTypes:"",modelAttrStart:Oe,getPropAttribute:function(t,e){var n=t.replace(this.modelAttrStart,""),i=(e==null?void 0:e.length)||0,l=e==null?void 0:e.substring(0,1),f=e==null?void 0:e.substring(i-1),d=e==="true"||e!=="false"&&e;try{d=l=="{"&&f=="}"||l=="["&&f=="]"?JSON.parse(d):d}catch{}return{name:n,value:d}},splitPropsFromAttr:function(t){var e=this;t===void 0&&(t={});var n={},i={};return(0,y.each)(t,function(l,f){if(f.indexOf(e.modelAttrStart)===0){var d=e.getPropAttribute(f,l);n[d.name]=d.value}else i[f]=l}),{props:n,attrs:i}},parseStyle:function(t){for(var e={},n=t.split(";"),i=0,l=n.length;i<l;i++){var f=n[i].trim();if(f){var d=f.split(":");e[d[0].trim()]=d.slice(1).join(":").trim()}}return e},parseClass:function(t){for(var e=[],n=t.split(" "),i=0,l=n.length;i<l;i++){var f=n[i].trim();f&&e.push(f)}return e},parseNode:function(t,e){e===void 0&&(e={});for(var n=[],i=t.childNodes,l=0,f=i.length;l<f;l++){var d=i[l],m=d.attributes||[],g=m.length,x=n[n.length-1],A=d.childNodes.length,$=this.compTypes,Z={};if($){var ut="",yt=d.getAttribute&&d.getAttribute("".concat(this.modelAttrStart,"type"));if(yt)Z={type:yt};else{for(var pt=0;pt<$.length;pt++){var Bt=$[pt];if(ut=Bt.model.isComponent(d,e)){typeof ut!="object"&&(ut={type:Bt.id});break}}Z=ut}}if(!Z.tagName){var Zt=d.tagName||"",Pe=d.namespaceURI||"";Z.tagName=Zt&&Pe==="http://www.w3.org/1999/xhtml"?Zt.toLowerCase():Zt}g&&(Z.attributes={});for(var Le=0;Le<g;Le++){var Ke=m[Le].nodeName,en=m[Le].nodeValue;if(Ke=="style")Z.style=this.parseStyle(en);else if(Ke=="class")Z.classes=this.parseClass(en);else{if(Ke=="contenteditable")continue;if(Ke.indexOf(this.modelAttrStart)===0){var gn=this.getPropAttribute(Ke,en);Z[gn.name]=gn.value}else en===""&&d[Ke]===!0&&(en=!0),Z.attributes[Ke]=en}}if(A&&!Z.components){var Rn=d.childNodes[0];A===1&&Rn.nodeType===3?(!Z.type&&(Z.type="text"),Z.components={type:"textnode",content:Rn.nodeValue}):Z.components=this.parseNode(d,me(me({},e),{inSvg:e.inSvg||Z.type==="svg"}))}if(Z.type=="textnode"){if(x&&x.type=="textnode"){x.content+=Z.content;continue}if(!e.keepEmptyTextNodes){var uo=d.nodeValue;if(uo!=" "&&!uo.trim())continue}}A||"".concat(d.outerHTML).slice(-2)!=="/>"||(Z.void=!0);var xo=Z.components;if(!Z.type&&xo){for(var So=1,Vo=0,Oo=0;Oo<xo.length;Oo++){var us=xo[Oo],Bs=us.type;if(["text","textnode"].indexOf(Bs)<0&&r.textTags.indexOf(us.tagName)<0){So=0;break}Bs=="textnode"&&(Vo=1)}So&&Vo&&(Z.type="text")}(Z.tagName||Z.type=="textnode")&&n.push(Z)}return n},parse:function(t,e,n){var i;n===void 0&&(n={});var l=(a==null?void 0:a.get("Config"))||{},f={},d=me(me({},r),n),m=me(me(me({},r.optionsHtml),{htmlType:((i=r.optionsHtml)===null||i===void 0?void 0:i.htmlType)||r.htmlType}),n),g=(0,y.isFunction)(d.parserHtml)?d.parserHtml(t,m):function(Bt,Zt){Zt===void 0&&(Zt={});var Pe,Le=new DOMParser,Ke=Zt.htmlType||Gt,en=Ke===st,gn=en?Bt:"<div>".concat(Bt,"</div>"),Rn=Le.parseFromString(gn,Ke);if(en){var uo=Rn.head,xo=Rn.body,So=uo.querySelectorAll("script");(0,y.each)(So,function(Oo){return xo.appendChild(Oo)});var Vo=[];(0,y.each)(uo.children,function(Oo){return Vo.push(Oo)}),(0,y.each)(Vo,function(Oo,us){return xo.insertBefore(Oo,xo.children[us])}),Pe=xo}else Pe=Rn.firstChild;return Pe}(t,m),x=g.querySelectorAll("script"),A=x.length;if(!((0,y.isUndefined)(l.allowScripts)?m.allowScripts:l.allowScripts))for(;A--;)x[A].parentNode.removeChild(x[A]);if(m.allowUnsafeAttr||this.__clearUnsafeAttr(g),e){for(var $=g.querySelectorAll("style"),Z=$.length,ut="";Z--;)ut=$[Z].innerHTML+ut,$[Z].parentNode.removeChild($[Z]);ut&&(f.css=e.parse(ut))}a&&a.trigger("".concat(an,":root"),{input:t,root:g});var yt=this.parseNode(g,d),pt=yt.length!==1||d.returnArray?yt:yt[0];return f.html=pt,a&&a.trigger(an,{input:t,output:f}),f},__clearUnsafeAttr:function(t){var e=this,n=t.attributes||[],i=t.childNodes||[],l=[];(0,y.each)(n,function(f){var d=f.nodeName||"";d.indexOf("on")===0&&l.push(d)}),l.map(function(f){return t.removeAttribute(f)}),(0,y.each)(i,function(f){return e.__clearUnsafeAttr(f)})}}};var An=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),In=function(){return In=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},In.apply(this,arguments)},Ni=_e();const wr=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return An(r,a),r.prototype.parseStyle=function(t){return Ni.parseStyle(t)},r.prototype.extendStyle=function(t){return In(In({},this.getStyle()),t)},r.prototype.getStyle=function(t){var e=this.get("style")||{},n=In({},e);return t&&(0,y.isString)(t)?n[t]:n},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,y.isString)(t)&&(t=this.parseStyle(t));var i=this.getStyle(e),l=In({},t),f=In({},l);(0,y.keys)(f).forEach(function(m){f[m]===""&&delete f[m]}),this.set("style",f,e);var d=(0,N.shallowDiff)(i,l);return delete d.__p,(0,y.keys)(d).forEach(function(m){var g=n.em;e.noEvent||(n.trigger("change:style:".concat(m)),g&&(g.trigger("styleable:change",n,m,e),g.trigger("styleable:change:".concat(m),n,m,e)))}),l},r.prototype.addStyle=function(t,e,n){e===void 0&&(e=""),n===void 0&&(n={}),typeof t=="string"?t={prop:e}:n=e||{},t=this.extendStyle(t),this.setStyle(t,n)},r.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},r.prototype.styleToString=function(t){t===void 0&&(t={});var e=[],n=this.getStyle(t);for(var i in n){var l=t.important,f=(0,y.isArray)(l)?l.indexOf(i)>=0:l,d="".concat(n[i]).concat(f?" !important":""),m=i.substr(0,2)=="__";d&&!m&&e.push("".concat(i,":").concat(d,";"))}return e.join("")},r.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},r.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},r}(S.Hn);var Ii=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lr=function(){return Lr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Lr.apply(this,arguments)},Ao=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},fo=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},jo=function(a,r){return r===void 0&&(r=[]),a?(((0,y.isArray)(a)||(0,y.isFunction)(a.map)?a:[a]).map(function(t){r.push(t.getId()),jo(t.components().models,r)}),r):[]},cr=function(a,r,t){r===void 0&&(r={}),t===void 0&&(t={}),t.visitedCmps=t.visitedCmps||{};var e=t.visitedCmps;return((0,y.isArray)(a)?a:[a]).map(function(n){var i=n.attributes,l=i===void 0?{}:i,f=n.components,d=n.tagName,m=l.id,g=(l.draggable,Ao(l,["id","draggable"])),x=n;if(m&&(e[m]?(e[m].push(x),m=jn.getNewId(r),x.attributes.id=m):(e[m]=[],r[m]&&(x=r[m],d&&x.set({tagName:d},Lr(Lr({},t),{silent:!0})),(0,y.keys)(g).length&&x.addAttributes(g,Lr({},t))))),f){var A=cr(f,r);if((0,y.isFunction)(x.components)){var $=x.components();$.length>0&&$.reset(A,t)}else x.components=A}return x})},Mo=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ii(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.opt=e,this.listenTo(this,"add",this.onAdd),this.listenTo(this,"remove",this.removeChildren),this.listenTo(this,"reset",this.resetChildren);var n=e.em,i=e.config;this.config=i,this.em=n,this.domc=e.domc||(n==null?void 0:n.Components)},r.prototype.resetChildren=function(t,e){var n=this;e===void 0&&(e={});var i=this,l=e.previousModels||[],f=l.filter(function(m){return!t.get(m.cid)}),d=jo(t);e.keepIds=jo(l).filter(function(m){return d.indexOf(m)>=0}),f.forEach(function(m){return n.removeChildren(m,i,e)}),t.each(function(m){return n.onAdd(m)})},r.prototype.resetFromString=function(t,e){t===void 0&&(t=""),e===void 0&&(e={}),e.keepIds=jo(this);var n=this,i=n.domc,l=n.em,f=n.parent,d=l==null?void 0:l.Css,m=(i==null?void 0:i.allById())||{},g=this.parseString(t,e),x=cr(g,m,e),A=e.visitedCmps,$=A===void 0?{}:A;Object.keys($).forEach(function(Z){var ut=$[Z];if(ut.length){var yt=(d==null?void 0:d.getRules("#".concat(Z)))||[];yt.length&&ut.forEach(function(pt){yt.forEach(function(Bt){var Zt=Bt.clone();Zt.set("selectors",["#".concat(pt.attributes.id)]),d.getAll().add(Zt)})})}}),this.reset(x,e),l==null||l.trigger("component:content",f,e,t)},r.prototype.removeChildren=function(t,e,n){var i=this;if(n===void 0&&(n={}),t){var l=this.domc,f=this.em,d=n.temporary||n.fromUndo;if(t.prevColl=this,!d){var m=t.getId(),g=f.Selectors.getAll(),x=f.Css.getAll(),A=(n.keepIds||[]).indexOf(m)<0;delete(l?l.allById():{})[m];var $=A?x.remove(x.filter(function(ut){return ut.getSelectors().getFullString()==="#".concat(m)}),n):[];g.remove($.map(function(ut){return ut.getSelectors().at(0)})),t.opt.temporary||(f.Commands.run("core:component-style-clear",{target:t}),t.removed(),t.trigger("removed"),f.trigger("component:remove",t)),t.components().forEach(function(ut){return i.removeChildren(ut,e,n)})}var Z=t.components();f.stopListening(Z),f.stopListening(t),f.stopListening(t.get("classes")),t.__postRemove()}},r.prototype.model=function(t,e){var n,i=e.collection.opt,l=i.em,f=l.Components.componentTypes;e.em=l,e.config=i.config,e.componentTypes=f,e.domc=i.domc;for(var d=0;d<f.length;d++)if(f[d].id==t.type){n=f[d].model;break}return n||(n=f[f.length-1].model,l&&t.type&&l.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new n(t,e)},r.prototype.parseString=function(t,e){e===void 0&&(e={});var n=this.em,i=this.domc,l=n.Css,f=n.Parser.parseHtml(t);if(jn.checkId(f.html,f.css,i.componentsById,e),f.css&&l&&!e.temporary){e.at;var d=Ao(e,["at"]);l.addCollection(f.css,Lr(Lr({},d),{extend:1}))}return f.html},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={}),e.keepIds=fo(fo([],e.keepIds||[],!0),jo(e.previousModels),!0),(0,y.isString)(t)?t=this.parseString(t,e):(0,y.isArray)(t)&&(t=fo([],t,!0)).forEach(function(f,d){if((0,y.isString)(f)){var m=n.parseString(f,e);t[d]=(0,y.isArray)(m)&&!m.length?null:m}});var i=(0,y.isArray)(t);t=(i?t:[t]).filter(Boolean).map(function(f){return n.processDef(f)}),t=i?(0,y.flatten)(t,1):t[0];var l=S.FE.prototype.add.apply(this,[t,e]);return this.__firstAdd=l,l},r.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var e=this.em,n=this.config,i=(n===void 0?{}:n).processor,l=t;if(i){var f=i(l=Lr({},l));f&&((0,y.each)(l,function($,Z){return delete l[Z]}),(0,y.extend)(l,f))}if(l.$$typeof&&typeof l.props=="object"){(l=Lr({},l)).props=Lr({},l.props);var d=e.Components,m=e.Parser.parserHtml;(0,y.each)(l,function($,Z){(0,y.includes)(["props","type"],Z)||delete l[Z]});var g=l.props,x=g.children;delete g.children,delete l.props;var A=m.splitPropsFromAttr(g);l.attributes=A.attrs,x&&(l.components=x),l.type?d.getType(l.type)||(l.tagName=l.type,delete l.type):l.type="textnode",(0,y.extend)(l,A.props)}return l},r.prototype.onAdd=function(t,e,n){n===void 0&&(n={});var i=this.domc,l=this.em,f=t.getStyle(),d=l&&l.getConfig().avoidInlineStyle;if(i&&i.Component.ensureInList(t),!(0,y.isEmpty)(f)&&!d&&l&&l.get&&l.getConfig().forceClass&&!n.temporary){var m=t.cid;l.Css.setClassRule(m,f),t.setStyle({}),t.addClass(m)}t.__postAdd({recursive:!0})},r}(S.FE);const ao=Mo;var ys=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Lo=1,Fi=2,bs=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t,e)||this,i=e.config,l=i===void 0?{}:i,f=n.get("name"),d=n.get("label");f?d||n.set("label",f):n.set("name",d);var m=n.get("name"),g=l.escapeName,x=g?g(m):r.escapeName(m);return n.set("name",x),n.em=e.em,n}return ys(r,a),r.prototype.defaults=function(){return{name:"",label:"",type:Lo,active:!0,private:!1,protected:!1,_undo:!0}},r.prototype.isId=function(){return this.get("type")===Fi},r.prototype.isClass=function(){return this.get("type")===Lo},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.escape,n=this.get("name"),i="";switch(this.get("type")){case Lo:i=".";break;case Fi:i="#"}return i+(e?e(n):n)},r.prototype.toString=function(){return this.getFullName()},r.prototype.getLabel=function(){return this.get("label")},r.prototype.setLabel=function(t){return this.set("label",t)},r.prototype.getActive=function(){return this.get("active")},r.prototype.setActive=function(t){return this.set("active",t)},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=this.em,n=S.Hn.prototype.toJSON.call(this,[t]),i=(0,y.result)(this,"defaults");if(e&&e.getConfig().avoidDefaults){(0,y.forEach)(i,function(f,d){n[d]===f&&delete n[d]}),n.label===n.name&&delete n.label;var l=(0,y.keys)(n).length;l===1&&n.name&&(n=n.name),l===2&&n.name&&n.type&&(n=this.getFullName())}return n},r.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\:@]+)/gi,"-")},r.TYPE_CLASS=Lo,r.TYPE_ID=Fi,r}(S.Hn);const ur=bs;bs.prototype.idAttribute="name";var lo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mi=function(a,r){return a.reduce(function(t,e,n){return t.concat(mi(a.slice(n+1),"".concat(r).concat(e)))},[r])},ws=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return lo(r,a),r.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||ur.TYPE_CLASS)},r.prototype.getStyleable=function(){return(0,y.filter)(this.models,function(t){return t.get("active")&&!t.get("private")})},r.prototype.getValid=function(t){var e=(t===void 0?{}:t).noDisabled;return(0,y.filter)(this.models,function(n){return!n.get("private")}).filter(function(n){return e?n.get("active"):1})},r.prototype.getFullString=function(t,e){e===void 0&&(e={});var n=[];return(t||this).forEach(function(i){return n.push(i.getFullName(e))}),e.sort&&n.sort(),n.join("").trim()},r.prototype.getFullName=function(t){t===void 0&&(t={});var e=t.combination,n=t.array,i=[],l=this.map(function(f){return f.getFullName(t)}).sort();return e?l.forEach(function(f,d){i=i.concat(mi(l.slice(d+1),f))}):i=l,n?i:e?i.join(","):i.join("")},r}(S.FE);const Dr=ws;ws.prototype.model=ur;var Uo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vi=function(){return vi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},vi.apply(this,arguments)};const Ri=function(a){function r(t){var e=a.call(this,t)||this,n=e.attributes,i=n.target,l=n.name,f=n.changeProp,d=n.value;if(!e.get("id")&&e.set("id",l),i){e.target=i,e.unset("target");var m=f?"change:".concat(l):"change:attributes:".concat(l);e.listenTo(i,m,e.targetUpdated);var g=d||e.getValue();!(0,y.isUndefined)(g)&&e.set({value:g},{silent:!0})}return e}return Uo(r,a),r.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",changeProp:!1,options:[]}},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,i=n===void 0||n,l=this.getId(),f=this.get("label")||this.getName();return i&&((e=this.em)===null||e===void 0?void 0:e.t("traitManager.traits.labels.".concat(l)))||f},r.prototype.getValue=function(){return this.getTargetValue()},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n={};e.partial&&(n.avoidStore=!0),this.setTargetValue(t,n),e.partial===!1&&(this.setTargetValue(""),this.setTargetValue(t))},r.prototype.props=function(){return this.attributes},r.prototype.targetUpdated=function(){var t,e=this.getTargetValue();this.set({value:e},{fromTarget:1}),(t=this.em)===null||t===void 0||t.trigger("trait:update",{trait:this,component:this.target})},r.prototype.getTargetValue=function(){var t,e=this.getName(),n=this.target;return t=this.get("changeProp")?n.get(e):n.getAttributes()[e],(0,y.isUndefined)(t)?"":t},r.prototype.setTargetValue=function(t,e){var n;e===void 0&&(e={});var i=this.target,l=this.attributes,f=this.getName();if(!(0,y.isUndefined)(t)){var d=t;if(t==="false"?d=!1:t==="true"&&(d=!0),this.getType()==="checkbox"){var m=l.valueTrue,g=l.valueFalse;d&&!(0,y.isUndefined)(m)&&(d=m),d||(0,y.isUndefined)(g)||(d=g)}this.get("changeProp")?i.set(f,d,e):i.addAttributes(((n={})[f]=d,n),e)}},r.prototype.setValueFromInput=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var i={value:t};this.set(i,vi(vi({},n),{avoidStore:1})),e&&(this.set("value","",n),this.set(i,n))},r.prototype.getInitValue=function(){var t,e=this.target,n=this.getName();if(e){var i=e.get("attributes");t=this.get("changeProp")?e.get(n):i[n]}return t||this.get("value")||this.get("default")},r}(S.Hn);var Ws=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Do=function(a){function r(t,e){var n=a.call(this,t)||this;return n.em=e.em,n.listenTo(n,"add",n.handleAdd),n.listenTo(n,"reset",n.handleReset),n}return Ws(r,a),r.prototype.handleReset=function(t,e){var n=(e===void 0?{}:e).previousModels;(n===void 0?[]:n).forEach(function(i){return i.trigger("remove")})},r.prototype.handleAdd=function(t){t.em=this.em;var e=this.target;e&&(t.target=e)},r.prototype.setTarget=function(t){this.target=t},r.prototype.add=function(t,e){var n=this.em;if((0,y.isString)(t)||(0,y.isArray)(t)){var i=n&&n.get&&n.Traits,l=function(x){return x===void 0&&(x={}),{build:function(A){var $=[];typeof A=="string"&&(A=[A]);for(var Z=0;Z<A.length;Z++){var ut=A[Z],yt={name:ut,type:"text"};ut==="target"&&(yt.type="select",yt.default=!1,yt.options=x.optionsTarget),$.push(yt)}return $}}}(i&&i.getConfig());(0,y.isString)(t)&&(t=[t]);for(var f=0,d=t.length;f<d;f++){var m=t[f],g=(0,y.isString)(m)?l.build(m)[0]:m;g.target=this.target,t[f]=g}}return S.FE.prototype.add.apply(this,[t,e])},r}(S.FE);const li=Do;Do.prototype.model=Ri;var Vi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rn=function(){return rn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},rn.apply(this,arguments)},Vn=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Hi=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Or="component:drag",ir="__symbols",kn="__symbol",Tr="__symbol_ovrd",$o="component:update",Kr="".concat($o,"-inside"),Bi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Vi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){var t;return(t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,locked:!1,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null})[kn]=0,t[ir]=0,t[Tr]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.updated=function(t,e,n){},r.prototype.removed=function(){},r.prototype.initialize=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={}),(0,y.bindAll)(this,"__upSymbProps","__upSymbCls","__upSymbComps");var i=e.em,l=this.parent(),f=l==null?void 0:l.attributes,d=this.get("propagate");if(d&&this.set("propagate",(0,y.isArray)(d)?d:[d]),f&&f.propagate&&!d){var m={},g=f.propagate;g.forEach(function(ut){return m[ut]=l.get(ut)}),m.propagate=g,this.set(rn(rn({},m),t))}if(e&&e.config&&e.config.voidElements.indexOf(this.get("tagName"))>=0&&this.set("void",!0),e.em=i,this.opt=e,this.em=i,this.frame=e.frame,this.config=e.config||{},this.set("attributes",rn(rn({},(0,y.result)(this,"defaults").attributes||{}),this.get("attributes")||{})),this.ccid=r.createId(this,e),this.initClasses(),this.initTraits(),this.initComponents(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,"change:script",this.scriptUpdated),this.listenTo(this,"change:tagName",this.tagUpdated),this.listenTo(this,"change:attributes",this.attrUpdated),this.listenTo(this,"change:attributes:id",this._idUpdated),this.on("change:toolbar",this.__emitUpdateTlb),this.on("change",this.__onChange),this.on(Kr,this.__propToParent),this.set("status",""),this.views=[],["classes","traits","components"].forEach(function(ut){var yt="add remove ".concat(ut!=="components"?"change":"");n.listenTo(n.get(ut),yt.trim(),function(){for(var pt=[],Bt=0;Bt<arguments.length;Bt++)pt[Bt]=arguments[Bt];return n.emitUpdate.apply(n,Vn([ut],pt,!1))})}),!e.temporary){var x=i&&i.Css,A=this.attributes,$=A.styles,Z=A.type;$&&x&&x.addCollection($,{avoidUpdateStyle:!0},{group:"cmp:".concat(Z)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),i&&i.trigger("component:create",this)}},r.prototype.__postAdd=function(t){t===void 0&&(t={});var e=this.em,n=e==null?void 0:e.UndoManager,i=this.components();n&&!this.__hasUm&&(n.add(i),n.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&i.map(function(l){return l.__postAdd(t)})},r.prototype.__postRemove=function(){var t=this.em,e=t==null?void 0:t.get("UndoManager");e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},r.prototype.__onChange=function(t,e){var n=this,i=this.changedAttributes()||{};(0,y.keys)(i).forEach(function(l){return n.emitUpdate(l)}),["status","open","toolbar","traits"].forEach(function(l){return delete i[l]}),(0,N.isEmptyObj)(i)||(this.__changesUp(e),this.__propSelfToParent({component:this,changed:i,options:e}))},r.prototype.__changesUp=function(t){var e=this.em;[this.frame,e].forEach(function(n){return n&&n.changesUp(t)})},r.prototype.__propSelfToParent=function(t){this.trigger($o,t),this.__propToParent(t)},r.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(Kr,t)},r.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},r.prototype.is=function(t){return this.get("type")==t},r.prototype.props=function(){return this.attributes},r.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.find=function(t){var e,n=[],i=(e=this.view)===null||e===void 0?void 0:e.$el.find(t);return i==null||i.each(function(l){var f=i.eq(l).data("model");f&&n.push(f)}),n},r.prototype.findType=function(t){var e=[],n=function(i){return i.forEach(function(l){l.is(t)&&e.push(l),n(l.components())})};return n(this.components()),e},r.prototype.closest=function(t){var e,n=(e=this.view)===null||e===void 0?void 0:e.$el.closest(t);return n!=null&&n.length?n.data("model"):void 0},r.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},r.prototype.contains=function(t){var e=!1;if(!t)return e;var n=function(i){!e&&i.forEach(function(l){l===t&&(e=!0),!e&&n(l.components())})};return n(this.components()),e},r.prototype.tagUpdated=function(){this.trigger("rerender")},r.prototype.replaceWith=function(t){var e=this.collection,n=e.indexOf(this);return e.remove(this),e.add(t,{at:n})},r.prototype.attrUpdated=function(t,e,n){var i=this;n===void 0&&(n={});var l=this.get("attributes"),f=l.class;f&&this.setClass(f),delete l.class;var d=l.style;d&&this.setStyle(d),delete l.style;var m=rn({},this.previous("attributes")),g=(0,N.shallowDiff)(m,this.get("attributes"));(0,y.keys)(g).forEach(function(x){return i.trigger("change:attributes:".concat(x),i,g[x],n)})},r.prototype.setAttributes=function(t,e){return e===void 0&&(e={}),this.set("attributes",rn({},t),e),this},r.prototype.addAttributes=function(t,e){return e===void 0&&(e={}),this.setAttributes(rn(rn({},this.getAttributes({noClass:!0})),t),e)},r.prototype.removeAttributes=function(t,e){t===void 0&&(t=[]),e===void 0&&(e={});var n=Array.isArray(t)?t:[t],i=this.getAttributes();return n.map(function(l){return delete i[l]}),this.setAttributes(i,e)},r.prototype.getStyle=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=this.em,i=(0,y.isString)(t)?t:"",l=i?e:t;if(n&&n.getConfig().avoidInlineStyle&&!l.inline){var f=n.get("state"),d=n.Css.getIdRule(this.getId(),rn({state:f},l));if(this.rule=d,d)return d.getStyle(i)}return a.prototype.getStyle.call(this,i)},r.prototype.setStyle=function(t,e){var n=this;t===void 0&&(t={}),e===void 0&&(e={});var i=this,l=i.opt,f=i.em;if(f&&f.getConfig().avoidInlineStyle&&!l.temporary&&!e.inline){var d=this.get("style")||{};t=(0,y.isString)(t)?this.parseStyle(t):t,t=rn(rn({},t),d);var m=f.get("state"),g=f.Css,x=this.getStyle(e);this.rule=g.setIdRule(this.getId(),t,rn(rn({},e),{state:m}));var A=(0,N.shallowDiff)(x,t);this.set("style","",{silent:!0}),(0,y.keys)(A).forEach(function($){return n.trigger("change:style:".concat($))})}else t=a.prototype.setStyle.apply(this,arguments);return t},r.prototype.getAttributes=function(t){t===void 0&&(t={});var e=this.em,n=[],i=rn({},this.get("attributes")),l=e==null?void 0:e.Selectors,f=this.getId();if(t.noClass?delete i.class:(this.classes.forEach(function(g){return n.push((0,y.isString)(g)?g:g.get("name"))}),n.length&&(i.class=n.join(" "))),!t.noStyle){var d=this.get("style");(0,N.isObject)(d)&&!(0,N.isEmptyObj)(d)&&(i.style=this.styleToString({inline:1}))}if(!(0,y.has)(i,"id")){var m=void 0;(function(g){return g&&g.getConfig().avoidInlineStyle})(e)?m=l&&l.get(f,l.Selector.TYPE_ID):(0,y.isEmpty)(this.getStyle())||(m=1),(this.__getSymbol()||this.__getSymbols())&&(m=1),m&&(i.id=f)}return i},r.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},r.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},r.prototype.removeClass=function(t){var e=[];t=(0,y.isArray)(t)?t:[t];var n=this.classes,i=ur.TYPE_CLASS;return t.forEach(function(l){l.split(" ").forEach(function(f){var d=n.where({name:f,type:i})[0];d&&e.push(n.remove(d))})}),e},r.prototype.getClasses=function(){var t=this.getAttributes().class;return t?t.split(" "):[]},r.prototype.__logSymbol=function(t,e,n){n===void 0&&(n={});var i=this.__getSymbol(),l=this.__getSymbols();(i||l)&&this.em.log(t,{model:this,toUp:e,context:"symbols",opts:n})},r.prototype.__initSymb=function(){this.__symbReady||(this.on("change",this.__upSymbProps),this.__symbReady=!0)},r.prototype.__isSymbol=function(){return(0,y.isArray)(this.get(ir))},r.prototype.__isSymbolOrInst=function(){return!(!this.__isSymbol()&&!this.get(kn))},r.prototype.__isSymbolTop=function(){var t=this.parent();return this.__isSymbolOrInst()&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},r.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop();return(e.__isSymbol()?e:e.__getSymbol())!==t},r.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},r.prototype.__getSymbol=function(){var t=this.get(kn);if(t&&(0,y.isString)(t)){var e=this.__getAllById()[t];e?(t=e,this.set(kn,e)):t=0}return t},r.prototype.__getSymbols=function(){var t=this,e=this.get(ir);return e&&(0,y.isArray)(e)&&(e.forEach(function(n,i){n&&(0,y.isString)(n)&&(e[i]=t.__getAllById()[n])}),e=e.filter(function(n){return n&&!(0,y.isString)(n)})),e},r.prototype.__isSymbOvrd=function(t){t===void 0&&(t="");var e=this.get(Tr),n=t.split(":")[0],i=t!==n?[t,n]:[t];return e===!0||(0,y.isArray)(e)&&i.some(function(l){return e.indexOf(l)>=0})},r.prototype.__getSymbToUp=function(t){var e=this;t===void 0&&(t={});var n=[],i=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||i&&this.__isSymbOvrd(i))return n;var l=this.__getSymbols()||[],f=this.__getSymbol();return n=(f?Vn([f],f.__getSymbols()||[],!0):l).filter(function(d){return d!==e}).filter(function(d){return!(i&&d.__isSymbOvrd(i))})},r.prototype.__getSymbTop=function(t){for(var e=this,n=this.parent(t);n&&(n.__isSymbol()||n.__getSymbol());)e=n,n=n.parent(t);return e},r.prototype.__upSymbProps=function(t,e){var n=this;e===void 0&&(e={});var i=this.changedAttributes()||{},l=i.attributes||{};if(delete i.status,delete i.open,delete i[ir],delete i[kn],delete i[Tr],delete i.attributes,delete l.id,(0,N.isEmptyObj)(l)||(i.attributes=l),!(0,N.isEmptyObj)(i)){var f=this.__getSymbToUp(e);(0,y.keys)(i).map(function(d){n.__isSymbOvrd(d)&&delete i[d]}),this.__logSymbol("props",f,{opts:e,changed:i}),f.forEach(function(d){var m=rn({},i);(0,y.keys)(m).map(function(g){d.__isSymbOvrd(g)&&delete m[g]}),d.set(m,rn({fromInstance:n},e))})}},r.prototype.__upSymbCls=function(t,e,n){var i=this;n===void 0&&(n={});var l=this.__getSymbToUp(n);this.__logSymbol("classes",l,{opts:n}),l.forEach(function(f){f.set("classes",i.get("classes"),{fromInstance:i})}),this.__changesUp(n)},r.prototype.__upSymbComps=function(t,e,n){var i=this,l=n||e||{},f={fromInstance:l.fromInstance,fromUndo:l.fromUndo},d=t.opt.temporary;if(n)if(n.add){var m=[],g=!!this.__getSymbols();if((Zt=this.__getSymbToUp(rn(rn({},f),{changed:"components:add"}))).length){var x=t.__getSymbol();m=(x?x.__getSymbols():t.__getSymbols())||[],(m=Vn([],m,!0)).push(x||t)}!d&&this.__logSymbol("add",Zt,{opts:n,addedInstances:m.map(function(Le){return Le.cid}),added:t.cid}),Zt.forEach(function(Le){var Ke=Le.__getSymbTop(),en=m.filter(function(gn){var Rn=gn.__getSymbTop({prev:1});return Ke&&Rn&&Rn===Ke})[0]||t.clone({symbol:!0,symbolInv:g});Le.append(en,rn({fromInstance:i},n))})}else{var A=t.__getSymbol();if(A&&!n.temporary&&A.set(ir,A.__getSymbols().filter(function(Le){return Le!==t})),!t.__isSymbolTop()){var $="components:remove",Z=n.index,ut=t.parent(),yt=rn({fromInstance:t},n),pt=t.__isSymbolNested(),Bt=function(Le){var Ke=Le.parent();Ke&&!Ke.__isSymbOvrd($)&&Le.remove(yt)};Zt=ut!=null&&ut.__isSymbOvrd($)?[]:t.__getSymbToUp(f),pt&&(Zt=ut==null?void 0:ut.__getSymbToUp(rn(rn({},f),{changed:$})),Bt=function(Le){var Ke=Le.components().at(Z);Ke&&Ke.remove(rn({fromInstance:ut},yt))}),!d&&this.__logSymbol("remove",Zt,{opts:n,removed:t.cid,isSymbNested:pt}),Zt.forEach(Bt)}}else{var Zt=this.__getSymbToUp(rn(rn({},f),{changed:"components:reset"})),Pe=t.models;this.__logSymbol("reset",Zt,{components:Pe}),Zt.forEach(function(Le){var Ke=Pe.map(function(en){return en.clone({symbol:!0})});Le.components().reset(Ke,rn({fromInstance:i},e))})}this.__changesUp(l)},r.prototype.initClasses=function(t,e,n){n===void 0&&(n={});var i=this.get("attributes").class||[],l=[this,"change:classes",this.initClasses],f=this.get("classes")||i,d=(0,y.isString)(f)?f.split(" "):f;this.stopListening.apply(this,l);var m=this.normalizeClasses(d),g=new Dr([]);return this.set("classes",g,n),g.add(m),g.on("add remove reset",this.__upSymbCls),this.listenTo.apply(this,l),this},r.prototype.initComponents=function(){var t=[this,"change:components",this.initComponents];this.stopListening.apply(this,t);var e=new ao([],this.opt);e.parent=this;var n=this.get("components"),i=!this.opt.avoidChildren;return this.set("components",e),i&&n&&e.add((0,y.isFunction)(n)?n(this):n,this.opt),e.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},r.prototype.initTraits=function(t){var e=this.em,n="change:traits";this.off(n,this.initTraits),this.__loadTraits();var i=rn({},this.get("attributes")),l=this.traits;return l.each(function(f){if(!f.get("changeProp")){var d=f.get("name"),m=f.getInitValue();d&&m&&(i[d]=m)}}),l.length&&this.set("attributes",i),this.on(n,this.initTraits),t&&e&&e.trigger("component:toggled"),this},r.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var n=this.previous(t)||[],i=this.get(t)||[],l=n.map(function(d){return"change:".concat(d)}).join(" "),f=i.map(function(d){return"change:".concat(d)}).join(" ");l&&this.off(l,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,e)}},r.prototype.__scriptPropsChange=function(t,e,n){n===void 0&&(n={}),n.avoidStore||this.trigger("rerender")},r.prototype.append=function(t,e){e===void 0&&(e={});var n=((0,y.isArray)(t)?Vn([],t,!0):[t]).map(function(l){return(0,y.isString)(l)||l.collection&&l.collection.remove(l,{temporary:!0}),l}),i=this.components().add(n,e);return(0,y.isArray)(i)?i:[i]},r.prototype.components=function(t,e){e===void 0&&(e={});var n=this.get("components");return(0,y.isUndefined)(t)?n:(n.reset(void 0,e),t?this.append(t,e):[])},r.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},r.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},r.prototype.empty=function(t){return t===void 0&&(t={}),this.components().reset(void 0,t),this},r.prototype.parent=function(t){t===void 0&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},r.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},r.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},r.prototype.initToolbar=function(){var t=this.em,e=this,n=t&&t.getConfig().stylePrefix||"";if(!e.get("toolbar")&&t){var i=[];e.collection&&i.push({label:t.getIcon("arrowUp"),command:function(l){return l.runCommand("core:component-exit",{force:1})}}),e.get("draggable")&&i.push({attributes:{class:"".concat(n,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),e.get("copyable")&&i.push({label:t.getIcon("copy"),command:"tlb-clone"}),e.get("removable")&&i.push({label:t.getIcon("delete"),command:"tlb-delete"}),e.set("toolbar",i)}},r.prototype.__loadTraits=function(t,e){e===void 0&&(e={});var n=t||this.traits;if(!(n instanceof li)){n=(0,y.isFunction)(n)?n(this):n;var i=new li([],this.opt);i.setTarget(this),n.length&&(n.forEach(function(l){return l.attributes&&delete l.attributes.value}),i.add(n)),this.set({traits:i},e)}return this},r.prototype.getTraits=function(){return this.__loadTraits(),Vn([],this.traits.models,!0)},r.prototype.setTraits=function(t){var e=(0,y.isArray)(t)?t:[t];return this.set({traits:e}),this.getTraits()},r.prototype.getTrait=function(t){return this.getTraits().filter(function(e){return e.get("id")===t||e.get("name")===t})[0]||null},r.prototype.updateTrait=function(t,e){var n,i=this.getTrait(t);return i&&i.set(e),(n=this.em)===null||n===void 0||n.trigger("component:toggled"),this},r.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},r.prototype.removeTrait=function(t){var e,n=this,i=((0,y.isArray)(t)?t:[t]).map(function(d){return n.getTrait(d)}),l=this.traits,f=i.length?l.remove(i):[];return(e=this.em)===null||e===void 0||e.trigger("component:toggled"),(0,y.isArray)(f)?f:[f]},r.prototype.addTrait=function(t,e){var n;e===void 0&&(e={}),this.__loadTraits();var i=this.traits.add(t,e);return(n=this.em)===null||n===void 0||n.trigger("component:toggled"),(0,y.isArray)(i)?i:[i]},r.prototype.normalizeClasses=function(t){var e=[],n=this.em,i=n==null?void 0:n.Selectors;return i?t.models?Vn([],t.models,!0):(t.forEach(function(l){return e.push(i.add(l))}),e):[]},r.prototype.clone=function(t){t===void 0&&(t={});var e=this.em,n=rn({},this.attributes),i=rn({},this.opt),l=this.getId(),f=e==null?void 0:e.Css;n.attributes=rn({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get("components").each(function($,Z){n.components[Z]=$.clone(rn(rn({},t),{_inner:1}))}),this.get("traits").each(function($,Z){n.traits[Z]=$.clone()}),this.get("classes").each(function($,Z){n.classes[Z]=$.get("name")}),n.status="",i.collection=null;var d=new this.constructor(n,i),m="#".concat(d.getId());(f?f.getRules("#".concat(l)):[]).forEach(function($){var Z=$.clone();Z.set("selectors",[m]),f.getAll().add(Z)}),d.set(ir,0);var g=this.__getSymbol(),x=this.__getSymbols();t.symbol||!g&&!x?g?(g.set(ir,Vn(Vn([],g.__getSymbols(),!0),[d],!1)),d.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(ir,Vn(Vn([],x,!0),[d],!1)),d.set(kn,this),d.__initSymb()):t.symbolInv?(this.set(ir,[d]),d.set(kn,this),[this,d].map(function($){return $.__initSymb()})):(d.set(ir,[this]),[this,d].map(function($){return $.__initSymb()}),this.set(kn,d))):(d.set(kn,0),d.set(ir,0));var A="component:clone";return e&&e.trigger(A,d),this.trigger(A,d),d},r.prototype.getName=function(){var t=this.em,e=this.attributes,n=e.type,i=e.tagName,l=e.name,f=n||i,d=n?"":i,m="domComponents.names.",g=l&&(t==null?void 0:t.t("".concat(m).concat(l))),x=d&&(t==null?void 0:t.t("".concat(m).concat(d))),A=t&&(t.t("".concat(m).concat(n))||t.t("".concat(m).concat(i)));return this.get("custom-name")||g||l||x||(0,N.capitalize)(d)||A||(0,N.capitalize)(f)},r.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},r.prototype.toHTML=function(t){t===void 0&&(t={});var e=this,n=[],i=t.tag||e.get("tagName"),l=e.get("void"),f=t.attributes,d=this.getAttrToHTML();if(delete t.tag,f&&((0,y.isFunction)(f)?d=f(e,d)||{}:(0,N.isObject)(f)&&(d=f)),t.withProps){var m=this.toJSON();(0,y.forEach)(m,function(pt,Bt){Bt[0]!=="_"&&["classes","attributes","components"].indexOf(Bt)<0&&(d["data-gjs-".concat(Bt)]=(0,y.isArray)(pt)||(0,N.isObject)(pt)?JSON.stringify(pt):pt)})}for(var g in d){var x=d[g];if(!(0,y.isUndefined)(x)&&x!==null)if((0,y.isBoolean)(x))x&&n.push(g);else{var A="";if(t.altQuoteAttr&&(0,y.isString)(x)&&x.indexOf('"')>=0)A="'".concat(x.replace(/'/g,"&apos;"),"'");else{var $=(0,y.isString)(x)?x.replace(/"/g,"&quot;"):x;A='"'.concat($,'"')}n.push("".concat(g,"=").concat(A))}}var Z=n.length?" ".concat(n.join(" ")):"",ut=e.getInnerHTML(t),yt="<".concat(i).concat(Z).concat(l?"/":"",">").concat(ut);return!l&&(yt+="</".concat(i,">")),yt},r.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},r.prototype.__innerHTML=function(t){t===void 0&&(t={});var e=this.components();return e.length?e.map(function(n){return n.toHTML(t)}).join(""):this.get("content")},r.prototype.getAttrToHTML=function(){var t=this.getAttributes();return delete t.style,t},r.prototype.toJSON=function(t){t===void 0&&(t={});var e=X.Model.prototype.toJSON.call(this,t);if(e.attributes=this.getAttributes(),delete e.attributes.class,delete e.toolbar,delete e.traits,delete e.status,delete e.open,delete e._undoexc,!t.fromUndo){var n=e[kn],i=e[ir];i&&(0,y.isArray)(i)&&(e[ir]=i.filter(function(l){return l}).map(function(l){return l.getId?l.getId():l})),n&&!(0,y.isString)(n)&&(e[kn]=n.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(e),e},r.prototype.getChangedProps=function(t){var e=t||X.Model.prototype.toJSON.apply(this),n=(0,y.result)(this,"defaults");return(0,y.forEach)(n,function(i,l){["type"].indexOf(l)===-1&&e[l]===i&&delete e[l]}),(0,y.isEmpty)(e.type)&&delete e.type,(0,y.forEach)(["attributes","style"],function(i){(0,y.isEmpty)(n[i])&&(0,y.isEmpty)(e[i])&&delete e[i]}),(0,y.forEach)(["classes","components"],function(i){(!e[i]||(0,y.isEmpty)(n[i])&&!e[i].length)&&delete e[i]}),e},r.prototype.getId=function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},r.prototype.setId=function(t,e){var n=rn({},this.get("attributes"));return n.id=t,this.set("attributes",n,e),this},r.prototype.getEl=function(t){t===void 0&&(t=void 0);var e=this.getView(t);return e&&e.el},r.prototype.getView=function(t){var e=this.view,n=this.views;return t&&(e=n.filter(function(i){return i._getFrame()===t.view})[0]),e},r.prototype.getCurrentView=function(){var t=(this.em.get("currentFrame")||{}).model;return this.getView(t)},r.prototype.__getScriptProps=function(){var t=this.props();return(this.get("script-props")||[]).reduce(function(e,n){return e[n]=t[n],e},{})},r.prototype.getScriptString=function(t){var e=this,n=t||this.get("script")||"";if(!n)return n;if(this.get("script-props"))n=n.toString().trim();else{if(typeof n=="function"){var i=n.toString().trim();n=(i=i.replace(/^function[\s\w]*\(\)\s?\{/,"").replace(/\}$/,"")).trim()}var l=this.em.getConfig(),f=Hi(l.tagVarStart||"{[ "),d=Hi(l.tagVarEnd||" ]}"),m=new RegExp("".concat(f,"([\\w\\d-]*)").concat(d),"g");n=n.replace(m,function(g,x){e.scriptUpdated();var A=e.attributes[x]||"";return(0,y.isArray)(A)||typeof A=="object"?JSON.stringify(A):A})}return n},r.prototype.emitUpdate=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var l=this.em,f=$o+(t?":".concat(t):""),d=t&&this.get(t);t&&this.updated.apply(this,Vn([t,d,t&&this.previous(t)],n,!1)),this.trigger.apply(this,Vn([f],n,!1)),l&&l.trigger.apply(l,Vn([f,this],n,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=d,e),options:n[2]||n[1]||{}})},r.prototype.onAll=function(t){return(0,y.isFunction)(t)&&(t(this),this.components().forEach(function(e){return e.onAll(t)})),this},r.prototype.remove=function(t){var e=this;t===void 0&&(t={});var n=this.em,i=this.collection,l=function(){i&&i.remove(e,rn(rn({},t),{action:"remove-component"})),i||(e.components("",t),e.components().removeChildren(e,void 0,t))},f=rn({},t);return[this,n].map(function(d){return d.trigger("component:remove:before",e,l,f)}),!f.abort&&l(),this},r.prototype.move=function(t,e){if(e===void 0&&(e={}),t){var n=e.at,i=this.index(),l=t===this.parent();l&&(i===n||i===n-1)||(l&&n&&n>i&&(e.at=n-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},r.prototype.isInstanceOf=function(t){var e,n,i=(n=(e=this.em)===null||e===void 0?void 0:e.Components.getType(t))===null||n===void 0?void 0:n.model;return!!i&&this instanceof i},r.prototype.isChildOf=function(t){for(var e=(0,y.isString)(t),n=this.parent();n;){if(e){if(n.isInstanceOf(t))return!0}else if(n===t)return!0;n=n.parent()}return!1},r.prototype.resetId=function(t){var e=this.em,n=this.getId();if(!n)return this;var i=r.createId(this);this.setId(i);var l=e==null?void 0:e.Css.getIdRule(n),f=l==null?void 0:l.get("selectors").at(0);return f==null||f.set("name",i),this},r.prototype._getStyleRule=function(t){var e=(t===void 0?{}:t).id,n=this.em,i=e||this.getId();return n==null?void 0:n.Css.getIdRule(i)},r.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return e==null?void 0:e.get("selectors").at(0)},r.prototype._idUpdated=function(t,e,n){if(n===void 0&&(n={}),!n.idUpdate){var i=this.ccid,l=(this.get("attributes")||{}).id,f=(this.previous("attributes")||{}).id||i,d=r.getList(this);if(d[l]||!l&&f)return this.setId(f,{idUpdate:!0});delete d[f],d[l]=this,this.ccid=l;var m=this._getStyleSelector({id:f});m&&m.set({name:l,label:l})}},r.getDefaults=function(){return(0,y.result)(this.prototype,"defaults")},r.isComponent=function(t){return{tagName:(0,N.toLowerCase)(t.tagName)}},r.ensureInList=function(t){var e=r.getList(t),n=t.getId(),i=e[n];if(i){if(i!==t){var l=r.getIncrementId(n,e);t.setId(l),e[l]=t}}else e[n]=t;t.components().forEach(function(f){return r.ensureInList(f)})},r.createId=function(t,e){e===void 0&&(e={});var n,i=r.getList(t),l=e.idMap,f=l===void 0?{}:l,d=t.get("attributes").id;return d?(n=r.getIncrementId(d,i,e),t.setId(n),d!==n&&(f[d]=n)):n=r.getNewId(i),i[n]=t,n},r.getNewId=function(t){for(var e=Object.keys(t).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-e),i="i".concat(n);t[i];)i=r.getNewId(t);return i},r.getIncrementId=function(t,e,n){n===void 0&&(n={});var i=n.keepIds,l=1,f=t;if((i===void 0?[]:i).indexOf(t)<0)for(;e[f];)l++,f="".concat(t,"-").concat(l);return f},r.getList=function(t){var e=t.opt,n=e===void 0?{}:e,i=n.domc,l=n.em,f=i||(l==null?void 0:l.Components);return f?f.componentsById:{}},r.checkId=function(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n={}),i===void 0&&(i={});var l=(0,y.isArray)(t)?t:[t],f=i.keepIds,d=f===void 0?[]:f;l.forEach(function(m){m.attributes;var g=m.attributes,x=g===void 0?{}:g,A=m.components,$=x.id;if($&&n[$]&&d.indexOf($)<0){var Z=r.getIncrementId($,n);x.id=Z,(0,y.isArray)(e)&&e.forEach(function(ut){var yt=ut.selectors;yt.forEach(function(pt,Bt){pt==="#".concat($)&&(yt[Bt]="#".concat(Z))})})}A&&r.checkId(A,e,n,i)})},r}(wr);const jn=Bi;var Nr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),zi=function(a){function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.compView=Hn,t}return Nr(r,a),r.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,"add",this.addTo),this.listenTo(e,"reset",this.resetChildren),this.listenTo(e,"remove",this.removeChildren)},r.prototype.removeChildren=function(t,e,n){var i=this;n===void 0&&(n={}),t.views.forEach(function(l){if(l){var f=l.childrenView,d=l.scriptContainer;f&&f.stopListening(),(0,Ze.L_)(d),l.remove.apply(l)}}),t.components().forEach(function(l){return i.removeChildren(l,e,n)})},r.prototype.addTo=function(t,e,n){n===void 0&&(n={});var i=this.em,l=this.collection.indexOf(t);if(this.addToCollection(t,null,l),i&&!n.temporary){var f=function(d){i.trigger("component:add",d),d.components().forEach(function(m){return f(m)})};f(t)}},r.prototype.addToCollection=function(t,e,n){for(var i=this,l=i.config,f=i.opts,d=i.em,m=e||null,g=l.frameView,x=(g==null?void 0:g.model)&&t.getView(g.model),A=f.componentTypes||(d==null?void 0:d.Components.getTypes()),$=t.get("type")||"default",Z=this.compView,ut=0;ut<A.length;ut++)if(A[ut].id==$){Z=A[ut].view;break}var yt,pt=x||new Z({model:t,config:l,componentTypes:A});try{yt=pt.render().el}catch(Le){yt=document.createTextNode(""),d.logError(Le)}if(m)m.appendChild(yt);else{var Bt=this.parentEl,Zt=Bt.childNodes;if((0,y.isUndefined)(n))Bt.appendChild(yt);else{var Pe=Zt.length==n;Pe&&n--,Pe||!Zt.length?Bt.appendChild(yt):Bt.insertBefore(yt,Zt[n])}}return t.opt.temporary||d==null||d.trigger("component:mount",t),yt},r.prototype.resetChildren=function(t,e){var n=this,i=(e===void 0?{}:e).previousModels,l=i===void 0?[]:i;this.parentEl.innerHTML="",l.forEach(function(f){return n.removeChildren(f,n.collection)}),t.each(function(f){return n.addToCollection(f)})},r.prototype.render=function(t){var e=this,n=this.el,i=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(l){return e.addToCollection(l,i)}),n.innerHTML="",n.appendChild(i),this},r}(S.G7);const yi=zi;var Kn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yr=function(){return Yr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Yr.apply(this,arguments)},Jr=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Kn(r,a),r.prototype.className=function(){return this.getClasses()},r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{},i=n.em,l=e.opt||{},f=this.$el,d=this.el;this.opts=t,this.modelOpt=l,this.config=n,this.em=i,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.attr=e.get("attributes"),this.classe=this.attr.class||[],this.listenTo(e,"change:style",this.updateStyle),this.listenTo(e,"change:attributes",this.renderAttributes),this.listenTo(e,"change:highlightable",this.updateHighlight),this.listenTo(e,"change:status change:locked",this.updateStatus),this.listenTo(e,"change:script rerender",this.reset),this.listenTo(e,"change:content",this.updateContent),this.listenTo(e,"change",this.handleChange),this.listenTo(e,"active",this.onActive),this.listenTo(e,"disable",this.onDisable),f.data("model",e),(0,N.setViewEl)(d,this),e.view=this,this._getFrame()&&e.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=Yr(Yr({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!l.temporary&&this.init(this._clbObj())},r.prototype.__isDraggable=function(){var t=this.model,e=this.config,n=t.attributes.draggable;return e.draggableComponents&&n},r.prototype._clbObj=function(){var t=this,e=t.em,n=t.model,i=t.el;return{editor:e==null?void 0:e.getEditor(),model:n,el:i}},r.prototype.init=function(t){},r.prototype.removed=function(t){},r.prototype.onRender=function(t){},r.prototype.onActive=function(t){},r.prototype.onDisable=function(){},r.prototype.remove=function(){var t;a.prototype.remove.call(this);var e=this.model,n=this.$el,i=e.views,l=this._getFrame()||{};return e.components().forEach(function(f){var d=f.getView(l.model);d==null||d.remove()}),(t=this.childrenView)===null||t===void 0||t.remove(),i.splice(i.indexOf(this),1),this.removed(this._clbObj()),n.data({model:"",collection:"",view:""}),this},r.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run("tlb-move",{target:this.model,event:t})},r.prototype.initClasses=function(){var t=this.model,e="change:classes",n=t.get("classes");n instanceof Dr&&(this.stopListening(t,e,this.initClasses),this.listenTo(t,e,this.initClasses),this.listenTo(n,"add remove change",this.updateClasses),n.length&&this.importClasses())},r.prototype.initComponents=function(t){t===void 0&&(t={});var e=this,n=e.model,i=e.$el,l=e.childrenView,f=n.get("components"),d=[n,"change:components",this.initComponents];f instanceof ao&&(i.data("collection",f),l&&l.remove(),this.stopListening.apply(this,d),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,d))},r.prototype.handleChange=function(){var t=this.model,e=(0,y.keys)(t.changed);if(e.length!==1||e[0]!=="status")for(var n in t.emitUpdate(),t.changed)t.emitUpdate(n)},r.prototype.importClasses=function(){var t=this.em.Selectors;t&&this.model.classes.each(function(e){t.add(e.get("name"))})},r.prototype.updateStatus=function(t){t===void 0&&(t={});var e=this,n=e.em,i=e.el,l=e.ppfx,f=e.model,d=n==null?void 0:n.Canvas.getConfig().extHl,m=f.get("status"),g="".concat(l,"selected"),x="".concat(g,"-parent"),A="".concat(l,"freezed"),$="".concat(l,"hovered"),Z="".concat(l,"no-pointer"),ut=[g,x,A,$,Z],yt=d&&!t.noExtHl?"":g;this.$el.removeClass(ut.join(" "));var pt=[i.getAttribute("class")||""];switch(m){case"selected":pt.push(yt);break;case"selected-parent":pt.push(x);break;case"freezed":pt.push(A);break;case"freezed-selected":pt.push(A,yt);break;case"hovered":!t.avoidHover&&pt.push($)}f.get("locked")&&pt.push(Z);var Bt=pt.filter(Boolean).join(" ");Bt&&i.setAttribute("class",Bt)},r.prototype.updateHighlight=function(){var t=this.model,e=t.get("textable"),n=t.get("highlightable")&&(e||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!n||"")},r.prototype.updateStyle=function(t,e,n){n===void 0&&(n={});var i=this.model,l=this.em;if(l&&l.getConfig().avoidInlineStyle&&!n.inline){var f=i.getStyle();!(0,y.isEmpty)(f)&&i.setStyle(f)}else this.setAttribute("style",i.styleToString(n))},r.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},r.prototype.setAttribute=function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},r.prototype.getClasses=function(){return this.model.getClasses().join(" ")},r.prototype.updateAttributes=function(){var t=[],e=this,n=e.model,i=e.$el,l=e.el,f=n.attributes,d=f.textable,m=f.type,g=Yr(Yr({id:n.getId(),"data-gjs-type":m||"default"},this.__isDraggable()&&{draggable:!0}),d&&{contenteditable:"false"});(0,y.each)(l.attributes,function(A){return t.push(A.nodeName)}),t.forEach(function(A){return i.removeAttr(A)}),this.updateStyle(),this.updateHighlight();var x=Yr(Yr({},g),n.getAttributes());(0,y.keys)(x).forEach(function(A){return x[A]===!1&&delete x[A]}),i.attr(x)},r.prototype.updateContent=function(){var t=this.model.get("content"),e=this.model.components().length;this.getChildrenContainer().innerHTML=e?"":t},r.prototype.prevDef=function(t){t.preventDefault()},r.prototype.updateScript=function(){var t=this.model,e=this.em;t.get("script")&&(e==null||e.Canvas.getCanvasView().updateScript(this))},r.prototype.getChildrenContainer=function(){var t=this.el;return typeof this.getChildrenSelector=="function"?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},r.prototype.getOffsetRect=function(){var t={},e=this.el,n=0,i=0,l=function(f){var d=f.offsetParent;d?(n+=d.offsetTop,i+=d.offsetLeft,l(d)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+i,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return l(e),t},r.prototype.isInViewport=function(t){var e,n=(t===void 0?{}:t).rect,i=this.el.ownerDocument,l=i.body,f=(e=i.defaultView)===null||e===void 0?void 0:e.frameElement,d=n||this.getOffsetRect(),m=d.top,g=d.left,x=this._getFrame().getOffsetRect();return m>=x.scrollTop&&g>=x.scrollLeft&&m<=x.scrollBottom&&g<=(f==null?void 0:f.offsetWidth)+l.scrollLeft},r.prototype.scrollIntoView=function(t){var e;t===void 0&&(t={});var n=this.getOffsetRect();if(!this.isInViewport({rect:n})||t.force){var i=this.el;t.behavior!=="smooth"?(e=i.ownerDocument.defaultView)===null||e===void 0||e.scrollTo(0,n.top):i.scrollIntoView(Yr({behavior:"smooth",block:"nearest"},t))}},r.prototype.reset=function(){var t=this.el;this.el="",this._ensureElement(),this._setData(),(0,Ze.dL)(t,this.el),this.render()},r.prototype._setData=function(){var t=this.model,e=t.components();this.$el.data({model:t,collection:e,view:this})},r.prototype._getFrame=function(){var t;return(t=this.em)===null||t===void 0?void 0:t.get("Canvas").config.frameView},r.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new yi({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),i=0,l=n.length;i<l;i++)t.appendChild(n.shift())},r.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},r.prototype.onAttrUpdate=function(){},r.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,N.setViewEl)(this.el,this),this.postRender()),this},r.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},r.getEvents=function(){return(0,y.result)(this.prototype,"events")},r}(S.G7);const Hn=Jr;var Ir=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ci=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ir(r,a),r.prototype.tagName=function(){return"div"},r}(Hn);var bi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Zr=function(){return Zr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Zr.apply(this,arguments)};const _s=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return bi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Zr(Zr({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return["td","th"].indexOf((0,N.toLowerCase)(t.tagName))>=0},r}(jn);var qs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Gs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qs(r,a),r}(Hn);var Ui=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ui=function(){return ui=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ui.apply(this,arguments)},$i="tr";const Ks=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ui(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ui(ui({},a.prototype.defaults),{tagName:$i,draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)===$i},r}(jn);var Cs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Wi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Cs(r,a),r}(Hn);var Ys=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Fr=function(){return Fr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Fr.apply(this,arguments)},qi="table";const Gi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ys(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Fr(Fr({},a.prototype.defaults),{type:qi,tagName:qi,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("components");!n.length&&n.add({type:"tbody"})},r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)===qi},r}(jn),ho=Hn.extend({events:{}});var Rr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wi=function(){return wi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},wi.apply(this,arguments)},Ki="tbody";const Yi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Rr(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return wi(wi({},a.prototype.defaults),{type:Ki,tagName:Ki,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("components"),i=this.get("columns"),l=this.get("rows");if(!n.length){for(var f=[];l--;){for(var d=[],m=i;m--;)d.push({type:"cell",classes:["cell"]});f.push({type:"row",classes:["row"],components:d})}n.add(f)}},r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)===Ki},r}(jn);var Wo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mn=function(){return Mn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Mn.apply(this,arguments)},go="thead";const Ji=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Wo(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Mn(Mn({},a.prototype.defaults),{type:go,tagName:go})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)===go},r}(Yi);var pi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const _i=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return pi(r,a),r}(Hn);var xs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ss=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return xs(r,a),r}(Hn);var Zi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),No=function(){return No=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},No.apply(this,arguments)},fi="tfoot";const Xi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zi(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return No(No({},a.prototype.defaults),{type:fi,tagName:fi})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)===fi},r}(Yi);var Qi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const ts=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Qi(r,a),r}(Hn);var ja=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),O=function(){return O=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},O.apply(this,arguments)},V='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',lt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ja(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return O(O({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(V,`>
        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>
      </svg>`),fallback:"<svg ".concat(V,`>
        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>
      </svg>`),file:""})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){a.prototype.initialize.call(this,t,e);var n=this.get("attributes").src;n&&(0,N.buildBase64UrlFromSvg)((0,y.result)(this,"defaults").src)!==n&&this.set("src",n,{silent:!0})},r.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var t=this.em;if(t){var e="image-editor";if(t.Commands.has(e)){for(var n=!1,i=this.get("toolbar"),l=0;l<i.length;l++)if(i[l].command==="image-editor"){n=!0;break}n||(i.push({attributes:{class:"fa fa-pencil"},command:e}),this.set("toolbar",i))}}},r.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},r.prototype.getSrcResult=function(t){t===void 0&&(t={});var e=this.get(t.fallback?"fallback":"src")||"",n=e;return e&&e.substr(0,4)==="<svg"&&(n=(0,N.buildBase64UrlFromSvg)(e)),n},r.prototype.isDefaultSrc=function(){var t=this.get("src"),e=(0,y.result)(this,"defaults").src;return t===e||t===(0,N.buildBase64UrlFromSvg)(e)},r.prototype.toJSON=function(t){var e=a.prototype.toJSON.call(this,t),n=e.attributes;return n&&e.src===n.src&&delete e.src,e},r.prototype.parseUri=function(t){var e={};if((0,N.hasWin)())(e=document.createElement("a")).href=t;else if(typeof URL<"u")try{e=new URL(t)}catch{}return{hostname:e.hostname||"",pathname:e.pathname||"",protocol:e.protocol||"",search:e.search||"",hash:e.hash||"",port:e.port||"",query:function(n){n===void 0&&(n="");for(var i={},l=n.substring(1).split("&"),f=0;f<l.length;f++){var d=l[f].split("="),m=decodeURIComponent(d[0]);m&&(i[m]=decodeURIComponent(d[1]||""))}return i}(e.search)}},r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)==="img"},r}(jn);const mt=lt;var jt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xt=function(){return xt=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xt.apply(this,arguments)},Kt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return jt(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){var t=a.prototype.defaults;return xt(xt({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){this.get("src")?this.parseFromSrc():this.updateSrc(),a.prototype.initialize.call(this,t,e),this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},r.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},r.prototype.getMapUrl=function(){var t=this.get("address"),e=this.get("zoom"),n=this.get("mapType");t=t?"&q="+t:"",e=e?"&z="+e:"",n=n?"&t="+n:"";var i=this.get("mapUrl")+"?"+t+e+n;return i+="&output=embed"},r.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")).query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},r.isComponent=function(t){if((0,N.toLowerCase)(t.tagName)=="iframe"&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},r}(mt);const le=Kt;var We=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tn=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return We(r,a),r.prototype.tagName=function(){return"img"},r.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},r.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this.model,e=this.em,n=t.get("file");if(n&&e){var i=e.Assets.FileUploader();i==null||i.uploadFile({dataTransfer:{files:[n]}},function(l){var f=l&&l.data&&l.data[0],d=f&&((0,y.isString)(f)?f:f.src);d&&t.set({src:d})}),t.set("file","")}}},r.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},r.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var t=this,e=t.el,n=t.classEmpty,i=t.model,l=i.getSrcResult()&&!i.isDefaultSrc()?"remove":"add";e.classList[l](n)},r.prototype.onActive=function(t){t==null||t.stopPropagation();var e=this.em,n=this.model,i=e==null?void 0:e.Assets;i&&n.get("editable")&&i.open({select:function(l,f){n.set({src:l.getSrc()}),f&&i.close()},target:n,types:["image"],accept:"image/*"})},r.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},r.prototype.onLoad=function(){this.em.trigger("change:canvasOffset")},r.prototype.noDrag=function(t){return t.preventDefault(),!1},r.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,e=this.model,n=t.attr("class")||"";return!e.get("src")&&t.attr("class","".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this},r}(Hn);const Cn=tn;var Vr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ci=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Vr(r,a),r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},r.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},r.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},r.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},r}(Cn);var qo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xr=function(){return Xr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Xr.apply(this,arguments)};const Go=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qo(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Xr(Xr({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),r}(jn);var Ma=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xi=function(){return xi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},xi.apply(this,arguments)},_l="link",dc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ma(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return xi(xi({},a.prototype.defaults),{type:_l,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){var n;if(e===void 0&&(e={}),(0,N.toLowerCase)(t.tagName)==="a"){var i=e.textTags||[];n={type:_l,editable:!1};var l=t.childNodes;l.length||delete n.editable,(0,y.forEach)(l,function(f){var d=f.tagName;(f.nodeType==3&&f.textContent.trim()!==""||d&&i.indexOf((0,N.toLowerCase)(d))>=0)&&delete n.editable})}return n},r}(Go);const hc=dc;var Cl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Os=function(){return Os=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Os.apply(this,arguments)},es=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(m){try{d(e.next(m))}catch(g){i(g)}}function f(m){try{d(e.throw(m))}catch(g){i(g)}}function d(m){var g;m.done?n(m.value):(g=m.value,g instanceof t?g:new t(function(x){x(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},La=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(m){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(x){g=[6,x],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,m])}}},xl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Cl(r,a),r.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),(0,y.bindAll)(this,"disableEditing","onDisable");var e=this.model,n=this.em;this.listenTo(e,"focus",this.onActive),this.listenTo(e,"change:content",this.updateContentText),this.listenTo(e,"sync:content",this.syncContent),this.rte=n==null?void 0:n.RichTextEditor},r.prototype.updateContentText=function(t,e,n){n===void 0&&(n={}),!n.fromDisable&&this.disableEditing()},r.prototype.canActivate=function(){var t,e=this,n=e.model,i=e.rteEnabled,l=e.em,f=(l==null?void 0:l.getEditing())===n,d=!0,m=!1;if((i||!n.get("editable")||f||(m=n.isChildOf("text")))&&(d=!1,m&&!n.get("textable"))){for(var g=n.parent();g&&!g.isInstanceOf("text");)g=g.parent();g&&g.get("editable")?t=g:d=!0}return{result:d,delegate:t}},r.prototype.onActive=function(t){var e,n;return es(this,void 0,void 0,function(){var i,l,f,d,m,g,x,A;return La(this,function($){switch($.label){case 0:if(l=(i=this).rte,f=i.em,d=this.canActivate(),m=d.result,g=d.delegate,!m)return g&&((e=t==null?void 0:t.stopPropagation)===null||e===void 0||e.call(t),f.setSelected(g),g.trigger("active",t)),[2];if((n=t==null?void 0:t.stopPropagation)===null||n===void 0||n.call(t),this.lastContent=this.getContent(),!l)return[3,4];$.label=1;case 1:return $.trys.push([1,3,,4]),x=this,[4,l.enable(this,this.activeRte,{event:t})];case 2:return x.activeRte=$.sent(),[3,4];case 3:return A=$.sent(),f.logError(A),[3,4];case 4:return this.toggleEvents(!0),[2]}})})},r.prototype.onDisable=function(){this.disableEditing()},r.prototype.disableEditing=function(t){return t===void 0&&(t={}),es(this,void 0,void 0,function(){var e,n,i,l,f,d,m;return La(this,function(g){switch(g.label){case 0:if(n=(e=this).model,i=e.rte,l=e.activeRte,f=e.em,d=n&&n.get("editable"),!i)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,i.disable(this,l)];case 2:return g.sent(),[3,4];case 3:return m=g.sent(),f.logError(m),[3,4];case 4:d&&this.getContent()!==this.lastContent&&(this.syncContent(t),this.lastContent=""),g.label=5;case 5:return this.toggleEvents(),[2]}})})},r.prototype.getContent=function(){var t=this.activeRte;return typeof(t==null?void 0:t.getContent)=="function"?t.getContent():this.getChildrenContainer().innerHTML},r.prototype.syncContent=function(t){t===void 0&&(t={});var e=this,n=e.model,i=e.rte;if(e.rteEnabled||t.force){var l=this.getContent(),f=n.components(),d=Os({fromDisable:1},t);n.set("content","",d),i!=null&&i.customRte?(f.length&&f.reset(void 0,t),n.set("content",l,d)):f.resetFromString(l,t)}},r.prototype.insertComponent=function(t,e){var n;e===void 0&&(e={});var i=this.model,l=this.el.ownerDocument.getSelection();if(l!=null&&l.rangeCount){var f=l.getRangeAt(0),d=f.startContainer,m=f.startOffset,g=(0,N.getModel)(d),x=[];if(g&&(!((n=g.is)===null||n===void 0)&&n.call(g,"textnode"))){var A=g.collection;A.forEach(function(ut){if(ut===g){var yt="textnode",pt=ut.get("content")||"";x.push({type:yt,content:pt.slice(0,m)}),x.push(t),x.push({type:yt,content:pt.slice(m)})}else x.push(ut)});var $=x.filter(Boolean),Z=$.indexOf(t);return A.reset($,e),A.at(Z)}}return i.append(t,e)},r.prototype.onInput=function(){var t=this.em,e="component",n=["".concat(e,":update"),"".concat(e,":input")].join(" ");t&&t.trigger(n,this.model)},r.prototype.disablePropagation=function(t){t.stopPropagation()},r.prototype.toggleEvents=function(t){var e=this,n=e.em,i=e.model,l=e.$el,f={on:N.on,off:N.off},d=t?"on":"off";n.setEditing(!!t&&this),this.rteEnabled=!!t;var m=[this.el.ownerDocument,document];if(f.off(m,"mousedown",this.onDisable),f[d](m,"mousedown",this.onDisable),n[d]("toolbar:run:before",this.onDisable),i&&(i[d]("removed",this.onDisable),i.trigger("rte:".concat(t?"enable":"disable"))),l==null||l.off("mousedown",this.disablePropagation),l&&l[d]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var g=this.el;g;)g.draggable=!t,(g=g.parentNode)&&g.tagName=="BODY"&&(g=0)},r}(Hn);const Js=xl;var Zs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Da=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zs(r,a),r.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},r}(Js);var Xs=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hr=function(){return Hr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Hr.apply(this,arguments)},Qs="label";const Ko=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Xs(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Hr(Hr({},a.prototype.defaults),{type:Qs,tagName:Qs,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)===Qs},r}(Go);var ta=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Sl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ta(r,a),r.prototype.tagName=function(){return"span"},r}(Da);var Na=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ns=function(){return ns=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ns.apply(this,arguments)},Ia="video",rs="yt",Si="vi",mo="ytnc",di=function(a){return a&&a!=="0"},Fa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Na(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return ns(ns({},a.prototype.defaults),{type:Ia,tagName:Ia,videoId:"",void:!1,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,poster:"",muted:0,autoplay:0,controls:1,color:"",list:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t,e){this.em=e.em,this.get("src")&&this.parseFromSrc(),this.updateTraits(),this.listenTo(this,"change:provider",this.updateTraits),this.listenTo(this,"change:videoId change:provider",this.updateSrc),a.prototype.initialize.call(this,t,e)},r.prototype.updateTraits=function(){var t,e=this.em,n="iframe";switch(this.get("provider")){case rs:case mo:t=this.getYoutubeTraits();break;case Si:t=this.getVimeoTraits();break;default:n="video",t=this.getSourceTraits()}this.set({tagName:n},{silent:!0}),this.set({traits:t}),e.get("ready")&&e.trigger("component:toggled")},r.prototype.parseFromSrc=function(){var t=this.get("provider"),e=this.parseUri(this.get("src")),n=e.query;switch(t){case rs:case mo:case Si:this.set("videoId",e.pathname.split("/").pop()),n.list&&this.set("list",n.list),di(n.autoplay)&&this.set("autoplay",1),di(n.loop)&&this.set("loop",1),parseInt(n.controls)===0&&this.set("controls",0),di(n.color)&&this.set("color",n.color),n.rel==="0"&&this.set("rel",0),n.modestbranding==="1"&&this.set("modestbranding",1)}},r.prototype.updateSrc=function(){var t="";switch(this.get("provider")){case rs:t=this.getYoutubeSrc();break;case mo:t=this.getYoutubeNoCookieSrc();break;case Si:t=this.getVimeoSrc()}this.set({src:t})},r.prototype.getAttrToHTML=function(){var t=a.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case rs:case mo:case Si:break;default:this.get("loop")&&(t.loop="loop"),this.get("autoplay")&&(t.autoplay="autoplay"),this.get("controls")&&(t.controls="controls")}return t},r.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:rs,name:"Youtube"},{value:mo,name:"Youtube (no cookie)"},{value:Si,name:"Vimeo"}]}},r.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},r.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},r.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},r.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},r.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},r.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},r.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),e=this.get("ytUrl"),n=this.get("list");return e+=t+(t.indexOf("?")<0?"?":""),e+=n?"&list=".concat(n):"",e+=this.get("autoplay")?"&autoplay=1":"",e+=this.get("controls")?"":"&controls=0&showinfo=0",e+=this.get("loop")?"&loop=1&playlist=".concat(t):"",e+=this.get("rel")?"":"&rel=0",e+=this.get("modestbranding")?"&modestbranding=1":""},r.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get("ytUrl"),this.get("ytncUrl"))},r.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1":"",t+=this.get("loop")?"&loop=1":"",t+=this.get("controls")?"":"&title=0&portrait=0&badge=0",t+=this.get("color")?"&color="+this.get("color"):""},r.isComponent=function(t){var e=t.tagName,n=t.src,i=/youtube\.com\/embed/.test(n),l=/youtube-nocookie\.com\/embed/.test(n),f=/player\.vimeo\.com\/video/.test(n),d=i||l||f;if((0,N.toLowerCase)(e)==Ia||(0,N.toLowerCase)(e)=="iframe"&&d){var m={type:"video"};return n&&(m.src=n),d&&(i?m.provider=rs:l?m.provider=mo:f&&(m.provider=Si)),m}},r}(mt);const co=Fa;var Oi=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ra=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Oi(r,a),r.prototype.tagName=function(){return"div"},r.prototype.events=function(){return{}},r.prototype.initialize=function(){Hn.prototype.initialize.apply(this,arguments);var t=this.model,e=["loop","autoplay","controls","color","rel","modestbranding","poster"],n=e.map(function(i){return"change:".concat(i)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,n,this.updateVideo)},r.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},r.prototype.updateSrc=function(){var t=this.model,e=this.videoEl;if(e){var n=t.get("provider"),i=t.get("src");switch(n){case"yt":i=t.getYoutubeSrc();break;case"ytnc":i=t.getYoutubeNoCookieSrc();break;case"vi":i=t.getVimeoSrc()}e.src=i}},r.prototype.updateVideo=function(){var t=this.model,e=this.videoEl;switch(t.get("provider")){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(e){var n=e;n.loop=t.get("loop"),n.autoplay=t.get("autoplay"),n.controls=t.get("controls"),n.poster=t.get("poster")}}},r.prototype.renderByProvider=function(t){var e;switch(t){case"yt":e=this.renderYoutube();break;case"ytnc":e=this.renderYoutubeNoCookie();break;case"vi":e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},r.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},r.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},r.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},r.prototype.render=function(){Hn.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},r}(Cn);const Ti=Ra;var Ei=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pr=function(){return pr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},pr.apply(this,arguments)},vo="script";const hi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ei(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return pr(pr({},a.prototype.defaults),{type:vo,tagName:vo,droppable:!1,draggable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t){if((0,N.toLowerCase)(t.tagName)==vo){var e={type:vo};return t.src&&(e.src=t.src,e.onload=t.onload),e}},r}(jn);var ea=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),na=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ea(r,a),r.prototype.tagName=function(){return"script"},r.prototype.events=function(){return{}},r.prototype.render=function(){var t=this.model,e=this.em,n=t.get("src"),i=e&&e.get("scriptCount"),l=i||0,f="";if(n){var d=t.get("onload"),m="script".concat(l),g="script".concat(l+1),x="".concat(m,"Start"),A="".concat(g,"Start");f=`
        var `.concat(m,` = document.createElement('script');
        `).concat(m,`.onload = function() {
          `).concat(d?"".concat(d,`();
`):"",`
          typeof `).concat(A," == 'function' && ").concat(A,`();
        };
        `).concat(m,".src = '").concat(n,`';
        function `).concat(x,"() { document.body.appendChild(").concat(m,`); };
        `).concat(l?"":"".concat(x,"();"),`
      `),e&&e.set("scriptCount",l+1)}else f=t.__innerHTML();return this.el.innerHTML=f,this.postRender(),this},r}(Cn);const v=na;var b=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),L=function(){return L=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},L.apply(this,arguments)},ht="svg";const qt=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return b(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return L(L({},a.prototype.defaults),{type:ht,tagName:ht,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),r.prototype.getName=function(){var t=this.get("tagName"),e=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)===ht},r}(jn);var qe=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hn=function(){return hn=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},hn.apply(this,arguments)};const Br=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qe(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return hn(hn({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),r.isComponent=function(t,e){return e===void 0&&(e={}),!!e.inSvg},r}(qt);var vr=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gi=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return vr(r,a),r.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},r}(Hn);const Yo=gi;var Ol=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Va=function(){return Va=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Va.apply(this,arguments)};const Ha=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Ol(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Va(Va({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){var t=this.parent(),e=this.get("content");return t!=null&&t.is("script")?e:this.__escapeContent(e)},r.prototype.__escapeContent=function(t){return(0,N.escapeNodeContent)(t)},r.isComponent=function(t){if(t.nodeType===3)return{type:"textnode",content:t.textContent}},r}(jn);var Kp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),gc=function(){return gc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},gc.apply(this,arguments)};const Yp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Kp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return gc({},a.prototype.defaults)},enumerable:!1,configurable:!0}),r.prototype.toHTML=function(){return"<!--".concat(this.get("content"),"-->")},r.isComponent=function(t){if(t.nodeType==8)return{tagName:"NULL",type:"comment",content:t.textContent}},r}(Ha);var mc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Tl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return mc(r,a),r.prototype._setAttributes=function(){},r.prototype.renderAttributes=function(){},r.prototype.updateStatus=function(){},r.prototype.updateClasses=function(){},r.prototype.setAttribute=function(){},r.prototype.updateAttributes=function(){},r.prototype.initClasses=function(){},r.prototype.initComponents=function(){},r.prototype.delegateEvents=function(){return this},r.prototype._createElement=function(){return document.createTextNode("")},r.prototype.render=function(){var t=this.model,e=this.el;return t.opt.temporary||(e.textContent=t.get("content")),this},r}(Hn);var ra=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Ba=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ra(r,a),r.prototype._createElement=function(){return document.createComment(this.model.get("content"))},r}(Tl);var Jp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ts=function(){return Ts=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ts.apply(this,arguments)};const gu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Jp(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Ts(Ts({},a.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),r.prototype.__postAdd=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return!this.__hasUm&&(e==null||e.add(this)),a.prototype.__postAdd.call(this)},r.prototype.__postRemove=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.UndoManager;return e==null||e.remove(this),a.prototype.__postRemove.call(this)},r.isComponent=function(){return!1},r}(jn);var za=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ua=function(){return Ua=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ua.apply(this,arguments)},ki="iframe";const $a=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return za(r,a),Object.defineProperty(r.prototype,"defaults",{get:function(){return Ua(Ua({},a.prototype.defaults),{type:ki,tagName:ki,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),r.isComponent=function(t){return(0,N.toLowerCase)(t.tagName)===ki},r}(jn);var Es=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Wa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Es(r,a),r.prototype.tagName=function(){return"div"},r.prototype.initialize=function(t){a.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},r.prototype.updateSrc=function(){var t=(0,Ze.sE)(this.el,"iframe")[0];t&&(0,Ze.FW)(t,{src:this.__getSrc()})},r.prototype.render=function(){a.prototype.render.call(this);var t=(0,Ze.ut)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},r.prototype.__getSrc=function(){return this.model.getAttributes().src||""},r}(Hn);var oa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yo=function(){return yo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},yo.apply(this,arguments)},mu=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},vu=function(a){function r(t){var e=a.call(this,t,"DomComponents",new ao(void 0,{em:t}))||this;for(var n in e.componentTypes=[{id:"cell",model:_s,view:Gs},{id:"row",model:Ks,view:Wi},{id:"table",model:Gi,view:ho},{id:"thead",model:Ji,view:_i},{id:"tbody",model:Yi,view:Ss},{id:"tfoot",model:Xi,view:ts},{id:"map",model:le,view:Ci},{id:"link",model:hc,view:Da},{id:"label",model:Ko,view:Sl},{id:"video",model:co,view:Ti},{id:"image",model:mt,view:Cn},{id:"script",model:hi,view:v},{id:"svg-in",model:Br,view:Yo},{id:"svg",model:qt,view:Yo},{id:"iframe",model:$a,view:Wa},{id:"comment",model:Yp,view:Ba},{id:"textnode",model:Ha,view:Tl},{id:"text",model:Go,view:Js},{id:"wrapper",model:gu,view:ci},{id:"default",model:jn,view:Hn}],e.componentsById={},e.Component=jn,e.Components=ao,e.ComponentsView=yi,e.storageKey="components",t&&(e.config.components=t.config.components||e.config.components),M)n in e.config||(e.config[n]=M[n]);var i=e.config.pStylePrefix;if(i&&(e.config.stylePrefix=i+e.config.stylePrefix),t){e.config.modal=t.Modal||"",e.config.am=t.Assets||"",t.get("Parser").compTypes=e.componentTypes,t.on("change:componentHovered",e.componentHovered,e);var l=t.get("selected");t.listenTo(l,"add",function(f,d,m){return e.selectAdd(l.getComponent(f),m)}),t.listenTo(l,"remove",function(f,d,m){return e.selectRemove(l.getComponent(f),m)})}return e}return oa(r,a),r.prototype.load=function(t){var e=this;return this.loadProjectData(t,{onResult:function(n){var i=e.getWrapper();if(i||(e.em.Pages.add({},{select:!0}),i=e.getWrapper()),(0,y.isArray)(n))n.length&&i.components(n);else{var l=n.components,f=l===void 0?[]:l,d=mu(n,["components"]);i.set(d),i.components(f)}}})},r.prototype.store=function(){return{}},r.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=t==null?void 0:t.getMainFrame();return e==null?void 0:e.getComponent()},r.prototype.getWrapper=function(){return this.getComponent()},r.prototype.getComponents=function(){var t=this.getWrapper();return t==null?void 0:t.get("components")},r.prototype.addComponent=function(t,e){return e===void 0&&(e={}),this.getComponents().add(t,e)},r.prototype.render=function(){var t;return(t=this.componentView)===null||t===void 0?void 0:t.render().el},r.prototype.clear=function(t){t===void 0&&(t={});var e=this.getComponents();return e==null||e.filter(Boolean).forEach(function(n){return n.remove(t)}),this},r.prototype.setComponents=function(t,e){e===void 0&&(e={}),this.clear(e).addComponent(t,e)},r.prototype.addType=function(t,e){var n=this.em,i=e.model,l=i===void 0?{}:i,f=e.view,d=f===void 0?{}:f,m=e.isComponent,g=e.extend,x=e.extendView,A=e.extendFn,$=A===void 0?[]:A,Z=e.extendFnView,ut=Z===void 0?[]:Z,yt=this.getType(t),pt=this.getType(g),Bt=this.getType(x),Zt=pt||yt||this.getType("default"),Pe=Zt.model,Le=Bt?Bt.view:Zt.view,Ke=function(Rn,uo,xo){return Rn.reduce(function(So,Vo){var Oo=uo[Vo],us=xo.prototype[Vo];return Oo&&us&&(So[Vo]=function(){for(var Bs=[],dl=0;dl<arguments.length;dl++)Bs[dl]=arguments[dl];us.bind(this).apply(void 0,Bs),Oo.bind(this).apply(void 0,Bs)}),So},{})};if(typeof l=="object"){var en=(0,y.result)(l,"defaults");delete l.defaults,e.model=Pe.extend(yo(yo({},l),Ke($,l,Pe)),{isComponent:!yt||pt||m?m||function(){return 0}:Pe.isComponent}),Object.defineProperty(e.model.prototype,"defaults",{value:yo(yo({},(0,y.result)(Pe.prototype,"defaults")||{}),en||{})})}typeof d=="object"&&(e.view=Le.extend(yo(yo({},d),Ke(ut,d,Le)))),yt?(yt.model=e.model,yt.view=e.view):(e.id=t,this.componentTypes.unshift(e));var gn="component:type:".concat(yt?"update":"add");return n==null||n.trigger(gn,yt||e),this},r.prototype.getType=function(t){for(var e=this.componentTypes,n=0;n<e.length;n++)if(e[n].id==t)return e[n]},r.prototype.removeType=function(t){var e=this.componentTypes,n=this.getType(t);if(n){var i=e.indexOf(n);return e.splice(i,1),n}},r.prototype.getTypes=function(){return this.componentTypes},r.prototype.selectAdd=function(t,e){var n=this;e===void 0&&(e={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(i){return n.em.trigger(i,t,e)}))},r.prototype.selectRemove=function(t,e){var n=this;e===void 0&&(e={}),t&&(this.em,t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(i){return n.em.trigger(i,t,e)}))},r.prototype.componentHovered=function(){var t=this.em,e=t.get("componentHovered"),n=t.previous("componentHovered"),i="hovered";n&&n.get("status")==i&&n.set({status:"",state:""}),e&&(0,y.isEmpty)(e.get("status"))&&e.set("status",i)},r.prototype.getShallowWrapper=function(){var t=this.shallow,e=this.em;if(!t&&e){var n=e.shallow;if(!n)return;var i=n.Components;if(i.componentTypes=this.componentTypes,t=i.getWrapper()){var l=[$o,Kr].join(" ");t.on(l,(0,y.debounce)(function(){return t==null?void 0:t.components("")},100))}this.shallow=t}return t},r.prototype.canMove=function(t,e,n){var i=n||n===0?n:null,l={result:!1,reason:0,target:t,source:null};if(!e||!t)return l;var f=e.toHTML?e:null;if(!f){var d=this.getShallowWrapper();f=(d==null?void 0:d.append(e)[0])||null}if(l.source=f,!f)return l;var m=f.get("draggable");if((0,y.isFunction)(m))m=!!m(f,t,i);else{var g=t.getEl();m=(0,y.isArray)(m)?m.join(","):m,m=(0,y.isString)(m)?g==null?void 0:g.matches(m):m}if(!m)return yo(yo({},l),{reason:1});var x=t.get("droppable");(0,y.isFunction)(x)?x=!!x(f,t,i):x===!1&&t.isInstanceOf("text")&&f.get("textable")?x=!0:(g=f.getEl(),x=(0,y.isArray)(x)?x.join(","):x,x=(0,y.isString)(x)?g==null?void 0:g.matches(x):x);var A=[t].concat(t.parents()).indexOf(f)>-1;return yo(yo({},l),!x||A?{reason:2}:{result:!0})},r.prototype.allById=function(){return this.componentsById},r.prototype.getById=function(t){return this.componentsById[t]||null},r.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach(function(n){return e[n]&&e[n].remove()}),(t=this.componentView)===null||t===void 0||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(n){return{}})},r}($t);const Zp=vu,ks={stylePrefix:"css-",rules:[]};var Ps=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Xp=Number.MAX_VALUE,Qp=function(a){function r(){var t=a.call(this)||this;return(0,y.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return Ps(r,a),r.prototype.buildFromModel=function(t,e){var n=this;e===void 0&&(e={});var i="",l=this.em,f=l&&l.getConfig().avoidInlineStyle,d=t.styleToString(),m=t.classes;return this.ids.push("#".concat(t.getId())),m.forEach(function(g){return n.compCls.push(g.getFullName())}),!f&&d&&(i="#".concat(t.getId(),"{").concat(d,"}")),t.components().forEach(function(g){return i+=n.buildFromModel(g,e)}),i},r.prototype.build=function(t,e){var n=this;e===void 0&&(e={});var i=e.json,l=e.em,f=e.cssc||(l==null?void 0:l.Css);this.em=l,this.compCls=[],this.ids=[],this.model=t;var d=[],m=t?this.buildFromModel(t,e):"",g=(0,y.isUndefined)(e.clearStyles)&&l?l.getConfig().clearStyles:e.clearStyles;if(f){var x=e.rules||f.getAll(),A={},$=[];e.onlyMatched&&t&&(0,N.hasWin)()&&(x=this.matchedRules(t,x)),x.forEach(function(Z){var ut=Z.getAtRule();if(ut){var yt=A[ut];yt?yt.push(Z):A[ut]=[Z]}else{var pt=n.buildFromRule(Z,$,e);i?d.push(pt):m+=pt}}),this.sortMediaObject(A).forEach(function(Z){var ut="",yt=Z.key;Z.value.forEach(function(pt){var Bt=n.buildFromRule(pt,$,e);pt.get("singleAtRule")?m+="".concat(yt,"{").concat(Bt,"}"):ut+=Bt,i&&d.push(Bt)}),ut&&(m+="".concat(yt,"{").concat(ut,"}"))}),l&&g&&x.remove&&x.remove($)}return i?d.filter(function(Z){return Z}):m},r.prototype.buildFromRule=function(t,e,n){var i,l=this;n===void 0&&(n={});var f,d="",m=this.model,g=t.selectorsToString({skipAdd:1}),x=t.get("selectorsAdd"),A=t.get("singleAtRule");if((i=t.get("selectors"))===null||i===void 0||i.forEach(function(Z){var ut=Z.getFullName();(l.compCls.indexOf(ut)>=0||l.ids.indexOf(ut)>=0||n.keepUnusedStyles)&&(f=1)}),g&&f||x||A||!m){var $=t.getDeclaration({body:1});$&&(n.json?d=t:d+=$)}else e.push(t);return d},r.prototype.matchedRules=function(t,e){var n=this,i=t.getEl(),l=[];return e.forEach(function(f){try{f.selectorsToString().split(",").some(function(d){return i==null?void 0:i.matches(n.__cleanSelector(d))})&&l.push(f)}catch{}}),t.components().forEach(function(f){l=l.concat(n.matchedRules(f,e))}),l=l.filter(function(f,d){return l.indexOf(f)===d})},r.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):Xp},r.prototype.sortMediaObject=function(t){var e=this;t===void 0&&(t={});var n=[];return(0,y.each)(t,function(i,l){return n.push({key:l,value:i})}),n.sort(function(i,l){var f=[i.key,l.key].every(function(g){return g.indexOf("min-width")!==-1}),d=f?i.key:l.key,m=f?l.key:i.key;return e.getQueryLength(d)-e.getQueryLength(m)})},r.prototype.sortRules=function(t,e){var n=function(d){return d.get("mediaText")||""},i=[n(t),n(e)].every(function(d){return d.indexOf("min-width")!==-1}),l=n(i?t:e),f=n(i?e:t);return this.getQueryLength(l)-this.getQueryLength(f)},r.prototype.__cleanSelector=function(t){return t.split(" ").map(function(e){return e.split(":")[0]}).join(" ")},r}(S.Hn);const tf=Qp;var ef=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qa=function(){return qa=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},qa.apply(this,arguments)},nf=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},zr=((0,N.hasWin)()?window:{}).CSS,yr=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this;return n.config=t||{},n.opt=e,n.em=e.em,n.ensureSelectors(null,null,{}),n.on("change",n.__onChange),n}return ef(r,a),r.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},r.prototype.__onChange=function(t,e){var n=this.em,i=this.changedAttributes();i&&!(0,N.isEmptyObj)(i)&&(n==null||n.changesUp(e))},r.prototype.clone=function(){var t=qa({},this.opt),e=qa({},this.attributes);return e.selectors=this.get("selectors").map(function(n){return n.clone()}),new this.constructor(e,t)},r.prototype.ensureSelectors=function(t,e,n){var i=this.em,l=i==null?void 0:i.get("SelectorManager"),f=[this,"change:selectors",this.ensureSelectors],d=this.getSelectors();if(this.stopListening.apply(this,f),d.models&&(d=nf([],d.models,!0)),d=(0,y.isString)(d)?[d]:d,Array.isArray(d)){var m=d.filter(function(g){return g}).map(function(g){return l?l.add(g):g});d=new Dr(m)}this.set("selectors",d,n),this.listenTo.apply(this,f)},r.prototype.getAtRule=function(){var t=this.get("atRuleType"),e=this.get("mediaText"),n=t?"@".concat(t):e?"@media":"";return n+(e&&n?" ".concat(e):"")},r.prototype.selectorsToString=function(t){t===void 0&&(t={});var e=[],n=this.get("state"),i=this.get("selectorsAdd"),l={escape:function(m){return zr&&zr.escape?zr.escape(m):m}},f=this.get("selectors").getFullString(0,l),d=n&&!t.skipState?":".concat(n):"";return f&&e.push("".concat(f).concat(d)),i&&!t.skipAdd&&e.push(i),e.join(", ")},r.prototype.getDeclaration=function(t){t===void 0&&(t={});var e="",n=this.attributes.important,i=this.selectorsToString(t),l=this.styleToString(qa({important:n},t)),f=this.get("singleAtRule");return(i||f)&&(l||t.allowEmpty)&&(e=f?l:"".concat(i,"{").concat(l,"}")),e},r.prototype.getDevice=function(){var t=this.em,e=this.attributes,n=e.atRuleType,i=e.mediaText,l=(t==null?void 0:t.get("DeviceManager").getDevices())||[],f=l.filter(function(d){return d.getWidthMedia()===""})[0];return n==="media"&&i?l.filter(function(d){return d.getWidthMedia()===((m=/(-?\d*\.?\d+)\w{0,}/.exec(i))?m[0]:"");var m})[0]||null:f||null},r.prototype.getState=function(){var t=this.em,e=this.get("state");return((t==null?void 0:t.get("SelectorManager").getStates())||[]).filter(function(n){return n.getName()===e})[0]||null},r.prototype.getComponent=function(){var t,e=this.getSelectors(),n=e.length==1&&e.at(0),i=n&&n.isId()&&n.get("name");return i&&((t=this.em)===null||t===void 0?void 0:t.get("DomComponents").getById(i))||null},r.prototype.toCSS=function(t){t===void 0&&(t={});var e="",n=this.getAtRule(),i=this.getDeclaration(t);return(i||t.allowEmpty)&&(e=i),n&&e&&(e="".concat(n,"{").concat(e,"}")),e},r.prototype.toJSON=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=S.Hn.prototype.toJSON.apply(this,e);if(!((t=this.em)===null||t===void 0)&&t.getConfig().avoidDefaults){var l=this.defaults();(0,y.forEach)(l,function(f,d){i[d]===f&&delete i[d]}),delete i.style.__p,(0,y.isEmpty)(i.selectors)&&delete i.selectors,(0,y.isEmpty)(i.style)&&delete i.style}return i},r.prototype.compare=function(t,e,n,i){var l;i===void 0&&(i={});var f=e||"",d=n||"",m=i.selectorsAdd||"",g=i.atRuleType||"";d&&!g&&(g="media");var x=((0,y.isArray)(t)||t.models?t.models||t:[t]).map(function(ut){return ut.getFullName()}),A=(l=this.get("selectors"))===null||l===void 0?void 0:l.map(function(ut){return ut.getFullName()}),$=x.slice().sort(),Z=A.slice().sort();return!(x.length!==A.length||!$.every(function(ut,yt){return ut===Z[yt]}))&&this.get("state")===f&&this.get("mediaText")===d&&this.get("selectorsAdd")===m&&this.get("atRuleType")===g},r}(wr);const Er=yr;var br=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ia=function(a){function r(t,e){var n=a.call(this,t)||this;return n.editor=e==null?void 0:e.em,setTimeout(function(){n.on("remove",n.onRemove),n.on("add",n.onAdd)}),n}return br(r,a),r.prototype.toJSON=function(t){return S.FE.prototype.toJSON.call(this,t).filter(function(e){return e.style&&!e.shallow})},r.prototype.onAdd=function(t,e,n){t.ensureSelectors(t,e,n)},r.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},r.prototype.add=function(t,e){return e===void 0&&(e={}),typeof t=="string"&&(t=this.editor.get("Parser").parseCss(t)),e.em=this.editor,S.FE.prototype.add.apply(this,[t,e])},r}(S.FE);const rf=ia;ia.prototype.model=Er;var El=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),As=function(){return As=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},As.apply(this,arguments)},of=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},sf=function(a){function r(t){var e=a.call(this,t,"CssComposer",null,{},ks)||this;e.Selectors=Dr,e.storageKey="styles";var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),n.rules=e.em.config.style||n.rules||"",e.rules=new rf([],n),e}return El(r,a),r.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},r.prototype.postLoad=function(){var t,e=(t=this.em)===null||t===void 0?void 0:t.get("UndoManager");e&&e.add(this.getAll())},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},r.prototype.add=function(t,e,n,i,l){i===void 0&&(i={}),l===void 0&&(l={});var f=e||"",d=n||"",m=As({},i),g=this.get(t,f,d,m);return g&&g.config&&!g.config.singleAtRule||(m.state=f,m.mediaText=d,m.selectors=[],d&&!m.atRuleType&&(m.atRuleType="media"),(g=new Er(m,this.config)).get("selectors").add(t,l),this.rules.add(g,l)),g},r.prototype.get=function(t,e,n,i){var l=t;if((0,y.isString)(t)){var f=this.em.Selectors,d=t.split(",")[0].trim(),m=this.em.Parser.parserCss.checkNode({selectors:d})[0];l=f.get(m.selectors)}return this.rules.find(function(g){return g.compare(l,e,n,i)})||null},r.prototype.getAll=function(){return this.rules},r.prototype.addCollection=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=this.em,l=[];(0,y.isString)(t)&&(t=i.Parser.parseCss(t));for(var f=t instanceof Array?t:[t],d=0,m=f.length;d<m;d++){var g=f[d]||{};if(g.selectors){var x=i==null?void 0:i.Selectors;x||console.warn("Selector Manager not found");for(var A=g.selectors,$=A instanceof Array?A:[A],Z=[],ut=0,yt=$.length;ut<yt;ut++){var pt=x.add($[ut]);Z.push(pt)}var Bt=this.get(Z,g.state,g.mediaText,g),Zt=this.add(Z,g.state,g.mediaText,g,e),Pe=!Bt||!e.avoidUpdateStyle,Le=g.style||{};if((0,N.isObject)(n)&&Zt.set(n,e),Pe){var Ke=e.extend?As(As({},Zt.get("style")),Le):Le;Zt.set("style",Ke,e)}l.push(Zt)}}return l},r.prototype.addRules=function(t){return this.addCollection(t)},r.prototype.setRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.atRuleType,l=n.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],d=f.state,m=f.selectorsAdd,g=this.em.Selectors.add(f.selectors),x=this.add(g,d,l,{selectorsAdd:m,atRule:i});return x.setStyle(e,n),x},r.prototype.getRule=function(t,e){e===void 0&&(e={});var n=this.em,i=n.Selectors,l=n.Parser.parserCss.checkNode({selectors:t})[0],f=i.get(l.selectors),d=l.state,m=l.selectorsAdd,g=e.atRuleType,x=e.atRuleParams;return f?this.get(f,d,x,{selectorsAdd:m,atRuleType:g}):void 0},r.prototype.getRules=function(t){var e=this.getAll();if(!t)return of([],e.models,!0);var n={sort:!0},i=(0,y.isString)(t)?t.split(",").map(function(l){return l.trim()}):t;return e.filter(function(l){return i.indexOf(l.getSelectors().getFullString(null,n))>=0})},r.prototype.setIdRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.addOpts,l=i===void 0?{}:i,f=n.mediaText,d=n.state||"",m=(0,y.isUndefined)(f)?this.em.getCurrentMedia():f,g=this.em.Selectors.add({name:t,type:ur.TYPE_ID},l),x=this.add(g,d,m,{},l);return x.setStyle(e,As(As({},n),l)),x},r.prototype.getIdRule=function(t,e){e===void 0&&(e={});var n=e.mediaText,i=e.state||"",l=(0,y.isUndefined)(n)?this.em.getCurrentMedia():n,f=this.em.Selectors.get(t,ur.TYPE_ID);return f&&this.get(f,i,l)},r.prototype.setClassRule=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=n.state||"",l=n.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors.add({name:t,type:ur.TYPE_CLASS}),d=this.add(f,i,l);return d.setStyle(e,n),d},r.prototype.getClassRule=function(t,e){e===void 0&&(e={});var n=e.state||"",i=e.mediaText||this.em.getCurrentMedia(),l=this.em.Selectors.get(t,ur.TYPE_CLASS);return l&&this.get(l,n,i)},r.prototype.remove=function(t,e){var n=(0,y.isString)(t)?this.getRules(t):t,i=this.getAll().remove(n,e);return(0,y.isArray)(i)?i:[i]},r.prototype.clear=function(t){return t===void 0&&(t={}),this.getAll().reset([],t),this},r.prototype.getComponentRules=function(t,e){e===void 0&&(e={});var n=e.state,i=e.mediaText;e.current&&(n=this.em.get("state")||"",i=this.em.getCurrentMedia());var l=t.getId();return this.getAll().filter(function(f){return!(!(0,y.isUndefined)(n)&&f.get("state")!==n)&&!(!(0,y.isUndefined)(i)&&f.get("mediaText")!==i)&&f.getSelectorsString()==="#".concat(l)})},r.prototype.render=function(){var t;return(t=this.rulesView)===null||t===void 0||t.remove(),this.rulesView=new oi({collection:this.rules,config:this.config}),this.rulesView.render().el},r.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),(t=this.rulesView)===null||t===void 0||t.remove()},r}($t);const vc=sf,yu={appendTo:"",blocks:[],appendOnClick:!1,custom:!1};var yc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const bu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return yc(r,a),r.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},r.prototype.getId=function(){return this.id},r.prototype.getLabel=function(){return this.get("label")},r.prototype.getMedia=function(){return this.get("media")},r.prototype.getContent=function(){return this.get("content")},r.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,y.isFunction)(t==null?void 0:t.get)?t.get("label"):t!=null&&t.label?t==null?void 0:t.label:t},r}(S.Hn);var bc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return bc(r,a),r}(S.FE);const Ga=kl;kl.prototype.model=bu;var wu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Pl=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return wu(r,a),r.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},r}(S.Hn);var _u=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sa=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return _u(r,a),r}(S.FE);const Cu=sa;sa.prototype.model=Pl;var Al=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Pi=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,i=n.model;return n.em=e.em,n.config=e,n.endDrag=n.endDrag.bind(n),n.ppfx=e.pStylePrefix||"",n.listenTo(i,"destroy remove",n.remove),n.listenTo(i,"change",n.render),n}return Al(r,a),r.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.handleClick=function(t){var e=this,n=e.config,i=e.model,l=e.em,f=i.get("onClick")||n.appendOnClick;if(l.trigger("block:click",i,t),f){if((0,y.isFunction)(f))return f(i,l==null?void 0:l.getEditor(),{event:t});var d,m,g=n.getSorter(),x=i.get("content"),A=l.getSelected();if(g.setDropContent(x),A)if(g.validTarget(A.getEl(),x).valid)d=A;else{var $=A.parent();$&&g.validTarget($.getEl(),x).valid&&(d=$,m=$.components().indexOf(A)+1)}if(!d){var Z=l.getWrapper();g.validTarget(Z.getEl(),x).valid&&(d=Z)}var ut=d&&d.append(x,{at:m})[0];ut&&l.setSelected(ut,{scroll:1})}},r.prototype.startDrag=function(t){var e=this,n=e.config,i=e.em,l=e.model,f=l.get("disable");if(t.button===0&&n.getSorter&&!this.el.draggable&&!f){i.refreshCanvas();var d=n.getSorter();d.__currentBlock=l,d.setDragHelper(this.el,t),d.setDropContent(this.model.get("content")),d.startSort(this.el),(0,N.on)(document,"mouseup",this.endDrag)}},r.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},r.prototype.handleDrag=function(t){this.__getModule().__drag(t)},r.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},r.prototype.endDrag=function(){(0,N.off)(document,"mouseup",this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},r.prototype.render=function(){var t,e=this,n=e.em,i=e.el,l=e.$el,f=e.ppfx,d=e.model,m=d.get("disable"),g=d.get("attributes")||{},x=g.class||"",A="".concat(f,"block"),$=n&&n.t("blockManager.labels.".concat(d.id))||d.get("label"),Z=d.get("render"),ut=d.get("media"),yt=m?"".concat(A,"--disable"):"".concat(f,"four-color-h");l.attr(g),i.className="".concat(x," ").concat(A," ").concat(f,"one-bg ").concat(yt).trim(),i.innerHTML=`
      `.concat(ut?'<div class="'.concat(A,'__media">').concat(ut,"</div>"):"",`
      <div class="`).concat(A,'-label">').concat($,`</div>
    `),i.title=g.title||((t=i.textContent)===null||t===void 0?void 0:t.trim()),i.setAttribute("draggable","".concat(!(!(0,N.hasDnd)(n)||m)));var pt=Z&&Z({el:i,model:d,className:A,prefix:f});return pt&&(i.innerHTML=pt),this},r}(S.G7);const xu=Pi;var af=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Su=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},bo=function(a){function r(t,e){var n=a.call(this,t)||this;n.config=e;var i=e.pStylePrefix||"";return n.em=e.em,n.pfx=i,n.caretR="fa fa-caret-right",n.caretD="fa fa-caret-down",n.iconClass="".concat(i,"caret-icon"),n.activeClass="".concat(i,"open"),n.className="".concat(i,"block-category"),n.listenTo(n.model,"change:open",n.updateVisibility),n.model.view=n,n}return af(r,a),r.prototype.events=function(){return{"click [data-title]":"toggle"}},r.prototype.template=function(t){var e=t.pfx,n=t.label;return K(Io||(Io=Su([`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `],[`
      <div class="`,`title" data-title>
        <i class="`,`caret-icon"></i>
        `,`
      </div>
      <div class="`,`blocks-c"></div>
    `])),e,e,n,e)},r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},r.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=""},r.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display="none"},r.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},r.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.pfx,"blocks-c"))),this.blocksEl},r.prototype.append=function(t){this.getBlocksEl().appendChild(t)},r.prototype.render=function(){var t=this,e=t.em,n=t.el,i=t.$el,l=t.model,f=t.pfx,d=e.t("blockManager.categories.".concat(l.id))||l.get("label");return n.innerHTML=this.template({pfx:f,label:d}),i.addClass(this.className),i.css({order:l.get("order")}),this.updateVisibility(),this},r}(S.G7);const mn=bo;var Io,os=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Jo=function(){return Jo=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Jo.apply(this,arguments)},Ou=function(a){function r(t,e){var n=a.call(this,t)||this;(0,y.bindAll)(n,"getSorter","onDrag","onDrop","onMove"),n.config=e||{},n.categories=t.categories||"",n.renderedCategories={};var i=n.config.pStylePrefix||"";n.ppfx=i,n.noCatClass="".concat(i,"blocks-no-cat"),n.blockContClass="".concat(i,"blocks-c"),n.catsClass="".concat(i,"block-categories");var l=n.collection;return n.listenTo(l,"add",n.addTo),n.listenTo(l,"reset",n.render),n.em=n.config.em,n.em&&(n.config.getSorter=n.getSorter),n}return os(r,a),r.prototype.__getModule=function(){return this.em.Blocks},r.prototype.updateConfig=function(t){t===void 0&&(t={}),this.config=Jo(Jo({},this.config),t)},r.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,n=t.Canvas;this.sorter=new e.Sorter({container:n.getBody(),placer:n.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:n.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},r.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},r.prototype.onMove=function(t){this.__getModule().__drag(t),this.em.trigger("block:drag:move",t)},r.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},r.prototype.addTo=function(t){this.add(t)},r.prototype.add=function(t,e){var n=this.config,i=new xu({model:t,attributes:t.get("attributes")},n).render().el,l=t.get("category");if(l&&this.categories&&!n.ignoreCategories){(0,y.isString)(l)?l={id:l,label:l}:(0,y.isObject)(l)&&!l.id&&(l.id=l.label);var f=this.categories.add(l),d=f.get("id"),m=this.getCategoriesEl(),g=this.renderedCategories[d];return t.set("category",f,{silent:!0}),!g&&m&&(g=new mn({model:f},n).render(),this.renderedCategories[d]=g,m.appendChild(g.el)),void(g&&g.append(i))}e?e.appendChild(i):this.append(i)},r.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},r.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},r.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},r.prototype.render=function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories={},this.el.innerHTML=`
      <div class="`.concat(this.catsClass,`"></div>
      <div class="`).concat(this.noCatClass,`">
        <div class="`).concat(this.blockContClass,`"></div>
      </div>
    `),this.collection.each(function(l){return t.add(l,n)}),this.append(n);var i="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(i),this.rendered=!0,this},r}(S.G7);const jl=Ou;var Tu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),is=function(){return is=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},is.apply(this,arguments)},Ml="block",Ai="".concat(Ml,":"),Eu="".concat(Ai,"add"),wc="".concat(Ai,"update"),ji="".concat(Ai,"remove"),ku="".concat(ji,":before"),Ll="".concat(Ai,"drag"),lf={all:Ml,update:wc,add:Eu,remove:ji,removeBefore:ku,drag:Ll,dragStart:"".concat(Ll,":start"),dragEnd:"".concat(Ll,":stop"),custom:"".concat(Ai,"custom")},Dl=function(a){function r(t){var e,n=this;return(n=a.call(this,t,"BlockManager",new Ga(((e=t.config.blockManager)===null||e===void 0?void 0:e.blocks)||[]),lf,yu)||this).Block=bu,n.Blocks=Ga,n.Category=Pl,n.Categories=Cu,n.storageKey="",n.blocks=n.all,n.blocksVisible=new Ga(n.blocks.models),n.categories=new Cu,n.blocks.on("add",function(i){return n.blocksVisible.add(i)}),n.blocks.on("remove",function(i){return n.blocksVisible.remove(i)}),n.blocks.on("reset",function(i){return n.blocksVisible.reset(i.models)}),n}return Tu(r,a),r.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(n,i){return t.startDrag(n,i)},drag:function(n){return t.__drag(n)},dragStop:function(n){return t.endDrag(n)}}},r.prototype.__startDrag=function(t,e){var n=this,i=n.em,l=n.events,f=n.blocks,d=t.getContent?t.getContent():t;this._dragBlock=t,i.set({dragResult:null,dragContent:d}),[i,f].map(function(m){return m.trigger(l.dragStart,t,e)})},r.prototype.__drag=function(t){var e=this,n=e.em,i=e.events,l=e.blocks,f=this._dragBlock;[n,l].map(function(d){return d.trigger(i.drag,f,t)})},r.prototype.__endDrag=function(t){t===void 0&&(t={});var e=this,n=e.em,i=e.events,l=e.blocks,f=this._dragBlock,d=t.component||n.get("dragResult");if(delete this._dragBlock,d&&f){var m="activeOnRender",g=d.get&&d.get(m),x=f.get("activate")||g,A=f.get("select"),$=(0,y.isArray)(d)?d[0]:d;(A||x&&A!==!1)&&n.setSelected($),x&&($.trigger("active"),g&&$.unset(m)),f.get("resetId")&&$.onAll(function(Z){return Z.resetId()})}n.set({dragResult:null,dragContent:null}),f&&[n,l].map(function(Z){return Z.trigger(i.dragEnd,d,f)})},r.prototype.__getFrameViews=function(){return this.em.get("Canvas").getFrames().map(function(t){return t.view})},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=is(is({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(){return this._bhv||{}},r.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach(function(n){return n.droppable.startCustom()})},r.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(e){return e.droppable.endCustom(t)}),this.__endDrag()},r.prototype.postRender=function(){var t=this,e=t.categories,n=t.config,i=t.em,l=this.blocksVisible;this.blocksView=new jl({collection:l,categories:e},is(is({},n),{em:i})),this.__appendTo(l.models),this.__trgCustom()},r.prototype.add=function(t,e,n){n===void 0&&(n={});var i=e||{};return i.id=t,this.blocks.add(i,n)},r.prototype.get=function(t){return this.blocks.get(t)},r.prototype.getAll=function(){return this.blocks},r.prototype.getAllVisible=function(){return this.blocksVisible},r.prototype.remove=function(t,e){return e===void 0&&(e={}),this.__remove(t,e)},r.prototype.getCategories=function(){return this.categories},r.prototype.getContainer=function(){var t;return(t=this.blocksView)===null||t===void 0?void 0:t.el},r.prototype.render=function(t,e){e===void 0&&(e={});var n=this,i=n.categories,l=n.config,f=n.em,d=t||this.getAll().models;if(e.external){var m=new Ga(d);return new jl({collection:m,categories:i},is(is({em:f},l),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(d),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},r.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map(function(n){return n.stopListening()}),e.map(function(n){return n.reset()}),(t=this.blocksView)===null||t===void 0||t.remove()},r}($t);const _c=Dl,Pu={stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};var cf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return cf(r,a),r.prototype.defaults=function(){return{name:"",label:""}},r.prototype.getName=function(){return this.get("name")},r.prototype.getLabel=function(){return this.get("label")||this.getName()},r}(S.Hn);const xc=Cc;Cc.prototype.idAttribute="name";var uf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Nl=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Sc="contentEditable",pf=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.config||{};return e.config=n,e.module=t.module,e.coll=t.coll||null,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.listenTo(e.model,"change:active",e.updateStatus),e}return uf(r,a),r.prototype.template=function(){var t=this,e=t.pfx,n=t.model,i=t.config,l=n.get("label")||"";return K(Oc||(Oc=Nl([`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `],[`
      <span id="`,'checkbox" class="',`tag-status" data-tag-status></span>
      <span id="`,'tag-label" data-tag-name>',`</span>
      <span id="`,'close" class="','tag-close" data-tag-remove> $',` </span>
    `])),e,e,e,l,e,e,i.iconTagRemove)},r.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},r.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},r.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[Sc]="true",e.focus(),t==null||t.setEditing(!0)},r.prototype.endEditTag=function(){var t=this.model,e=this.getInputEl(),n=e.textContent||"",i=this.em,l=i==null?void 0:i.Selectors;if(e[Sc]="false",i==null||i.setEditing(!1),l){var f=l.escapeName(n);l.get(f)?e.innerText=t.get("label"):t.set({name:f,label:n})}},r.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.get("active"))},r.prototype.removeTag=function(){this.module.removeSelected(this.model)},r.prototype.updateStatus=function(){var t=this,e=t.model,n=t.$el,i=t.config,l=i.iconTagOn,f=i.iconTagOff,d=n.find("[data-tag-status]");e.get("active")?(d.html(l),n.removeClass("opac50")):(d.html(f),n.addClass("opac50"))},r.prototype.render=function(){var t=this.pfx,e=this.ppfx;return this.$el.html(this.template()),this.$el.attr("class","".concat(t,"tag ").concat(e,"three-bg")),this.updateStatus(),this},r}(S.G7);const ff=pf;var Oc,aa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),js=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Il=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.className=e.pfx+"tags",e.stateInputId=e.pfx+"states",e.stateInputC=e.pfx+"input-c",e.states=e.config.states||[];var n=e.config.em,i=e.collection;e.target=n;var l=n.Selectors;return e.module=l,e.em=n,e.componentChanged=(0,y.debounce)(e.componentChanged.bind(e),0),e.checkSync=(0,y.debounce)(e.checkSync.bind(e),0),e.listenTo(n,"component:toggled component:update:classes",e.componentChanged),e.listenTo(n,"styleManager:update",e.componentChanged),e.listenTo(n,"component:update:classes change:state",e.__handleStateChange),e.listenTo(n,"styleable:change change:device",e.checkSync),e.listenTo(i,"add",e.addNew),e.listenTo(i,"reset",e.renderClasses),e.listenTo(i,"remove",e.tagRemoved),e.listenTo(l.getAll(),l.events.state,(0,y.debounce)(function(){return e.renderStates()},0)),e.delegateEvents(),e}return aa(r,a),r.prototype.template=function(t){var e=t.labelInfo,n=t.labelHead,i=t.iconSync,l=t.iconAdd,f=t.pfx,d=t.ppfx;return K(Fl||(Fl=js([' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`],[' <div id="','up" class="',`header">
        <div id="`,'label" class="','header-label">',`</div>
        <div id="`,'status-c" class="',`header-status">
          <span id="`,`input-c" data-states-c>
            <div class="`,"field ",`select">
              <span id="`,`input-holder">
                <select id="`,`states" data-states></select>
              </span>
              <div class="`,`sel-arrow">
                <div class="`,`d-s-arrow"></div>
              </div>
            </div>
          </span>
        </div>
      </div>
      <div id="`,'tags-field" class="',`field">
        <div id="`,`tags-c" data-selectors></div>
        <input id="`,`new" data-input />
        <span id="`,'add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',` </span>
        <span class="`,"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',` </span>
      </div>
      <div class="`,`sels-info">
        <div class="`,'label-sel">',`:</div>
        <div class="`,`sels" data-selected></div>
      </div>`])),f,f,f,f,n,f,f,f,d,d,d,f,d,d,f,d,f,f,f,f,f,l,f,f,i,f,f,e,f)},r.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},r.prototype.syncStyle=function(){var t,e=this.em,n=this.getTarget(),i=e.Css,l=this.getCommonSelectors({opts:{noDisabled:1}}),f=e.get("state"),d=e.getCurrentMedia(),m=[],g=i.get(l,f,d)||i.add(l,f,d);this.getTargets().forEach(function(x){var A=i.getIdRule(x.getId(),{state:f,mediaText:d});t=A.getStyle(),A.setStyle({}),m.push(A)}),t&&g.addStyle(t),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:n,selectors:l,mediaText:d,rule:g,ruleComponents:m,state:f})},r.prototype.tagRemoved=function(t){this.updateStateVis()},r.prototype.addNew=function(t){this.addToClasses(t)},r.prototype.startNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:"none"}),(e=this.$input)===null||e===void 0||e.show().focus()},r.prototype.endNewTag=function(){var t,e;(t=this.$addBtn)===null||t===void 0||t.css({display:""}),(e=this.$input)===null||e===void 0||e.hide().val("")},r.prototype.onInputKeyUp=function(t){var e;t.keyCode===13?(t.preventDefault(),this.addNewTag((e=this.$input)===null||e===void 0?void 0:e.val())):t.keyCode===27&&this.endNewTag()},r.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},r.prototype.componentChanged=function(t){var e=(t===void 0?{}:t).targets;this.updateSelection(e)},r.prototype.updateSelection=function(t){var e=t||this.getTargets(),n=[];return(e=(0,y.isArray)(e)?e:[e])&&e.length&&(n=this.getCommonSelectors({targets:e}),this.checkSync({validSelectors:n})),this.collection.reset(n),this.updateStateVis(e),this.module.__trgCustom(),n},r.prototype.getCommonSelectors=function(t){var e=t===void 0?{}:t,n=e.targets,i=e.opts,l=i===void 0?{}:i,f=n||this.getTargets();return this.module.__getCommonSelectors(f,l)},r.prototype._commonSelectors=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.module).__common.apply(t,e)},r.prototype.checkSync=function(){var t,e=this,n=e.$btnSyncEl,i=e.config,l=e.collection,f=this.getTarget();if(f&&i.componentFirst&&l.length){var d=f.getStyle();t=!(0,y.isEmpty)(d)}n&&n[t?"show":"hide"]()},r.prototype.getTarget=function(){return this.target.getSelected()},r.prototype.getTargets=function(){return this.target.getSelectedAll()},r.prototype.updateStateVis=function(t){var e=this.em,n=e&&e.getConfig().avoidInlineStyle,i=this.collection.length||n?"":"none";this.getStatesC().css("display",i),this.updateSelector(t)},r.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},r.prototype.updateSelector=function(t){var e=this,n=this.el.querySelector("[data-selected]"),i=[],l=t||this.getTargets();(l=(0,y.isArray)(l)?l:[l]).forEach(function(f){return i.push(e.__getName(f))}),n&&(n.innerHTML=i.join(", ")),this.checkStates()},r.prototype.__getName=function(t){var e,n=this,i=n.pfx,l=n.config,f=n.em,d=l.selectedName,m=l.componentFirst;if((0,y.isString)(t))e=K(Tc||(Tc=js(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),i,t);else{var g=t==null?void 0:t.getSelectors();if(!g)return"";var x=g.getStyleable(),A=f.get("state"),$=t.getId?K(ju||(ju=js(['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"],['<span class="','sel-cmp">',`</span>
            <span class="`,'sel-id">#',"</span>"])),i,t.getName(),i,t.getId()):"";e=(e=this.collection.getFullString(x))?K(Ec||(Ec=js(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),i,e):t.get("selectorsAdd")||$,e=m&&$?$:e,e+=A?K(_r||(_r=js(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),i,A):"",e=d?d({result:e,state:A,target:t}):e}return e&&'<span class="'.concat(i,'sel">').concat(e,"</span>")},r.prototype.stateChanged=function(t){var e=this.em,n=t.target.value;e.set("state",n)},r.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},r.prototype.addToClasses=function(t,e){var n=e,i=this.getClasses(),l=new ff({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(l):i.append(l),l},r.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each(function(i){return t.addToClasses(i,e)}),n.append(e)},r.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},r.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},r.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},r.prototype.renderStates=function(){var t=this.module,e=this.em,n=e.t("selectorManager.emptyState"),i=t.getStates().map(function(f){var d=e.t("selectorManager.states.".concat(f.id))||f.getLabel()||f.id;return'<option value="'.concat(f.id,'">').concat(d,"</option>")}).join(""),l=this.getStates();l&&l.html('<option value="">'.concat(n,"</option>").concat(i)),this.checkStates()},r.prototype.render=function(){var t=this,e=t.em,n=t.pfx,i=t.ppfx,l=t.config,f=t.$el,d=t.el,m=l.render,g={iconSync:l.iconSync,iconAdd:l.iconAdd,labelHead:e.t("selectorManager.label"),labelInfo:e.t("selectorManager.selected"),ppfx:i,pfx:n,el:d};f.html(this.template(g));var x=m&&m(g);return x&&x!==d&&f.empty().append(x),this.$input=f.find("[data-input]"),this.$addBtn=f.find("[data-add]"),this.$classes=f.find("#"+n+"tags-c"),this.$btnSyncEl=f.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),f.attr("class","".concat(this.className," ").concat(i,"one-bg ").concat(i,"two-color")),this},r}(S.G7);const Au=Il;var Fl,Tc,ju,Ec,_r,Rl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),la=function(){return la=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},la.apply(this,arguments)},Vl=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},kc=function(a){return(0,y.isString)(a)&&a[0]=="#"},Ms=function(a){return(0,y.isString)(a)&&a[0]=="."},Ka="selector",ca="".concat(Ka,":"),Mu="".concat(ca,"add"),Lu="".concat(ca,"update"),Ls="".concat(ca,"remove"),Du="".concat(Ls,":before"),Hl="".concat(ca,"custom"),Pc="".concat(ca,"state"),Ya={all:Ka,update:Lu,add:Mu,remove:Ls,removeBefore:Du,state:Pc,custom:Hl},df=function(a){function r(t){var e=a.call(this,t,"SelectorManager",new Dr([]),Ya,Pu,{skipListen:!0})||this;e.Selector=ur,e.Selectors=Dr,e.storageKey="",(0,y.bindAll)(e,"__updateSelectedByComponents");var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),e.all=new Dr(n.selectors),e.selected=new Dr([],{em:t,config:n}),e.states=new S.FE(n.states.map(function(l){return new xc(l)}),{model:xc}),e.model=new S.Hn({cFirst:n.componentFirst,_undo:!0}),e.__update=(0,y.debounce)(function(){return e.__trgCustom()},0),e.__initListen({collections:[e.states,e.selected],propagate:[{entity:e.states,event:e.events.state}]}),t.on("change:state",function(l,f){return t.trigger(Pc,f)}),e.model.on("change:cFirst",function(l,f){return t.trigger("selector:type",f)}),t.on("component:toggled component:update:classes",e.__updateSelectedByComponents),e.model.listenTo(t,"component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target",function(){return e.__update()}),e}return Rl(r,a),r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},r.prototype.getAll=function(t){return t===void 0&&(t={}),this.all?t.array?Vl([],this.all.models,!0):this.all:[]},r.prototype.__customData=function(t){t===void 0&&(t={});var e=t.container;return{states:this.getStates(),selected:this.getSelected(),container:e}},r.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},r.prototype.select=function(t,e){e===void 0&&(e={});var n=Array.isArray(t)?t:[t],i=this.em.Styles.select(n,e);this.selected.reset(this.__getCommonSelectors(i));var l=this.selectorTags,f=i.filter(function(d){return d}).map(function(d){return(0,N.isComponent)(d)||(0,N.isRule)(d)&&!d.get("selectorsAdd")?d:d.getSelectorsString()});return l&&l.componentChanged({targets:f}),this},r.prototype.addSelector=function(t,e,n){e===void 0&&(e={}),n===void 0&&(n={});var i=la({},e);(0,y.isObject)(t)?i=t:i.name=t,kc(i.name)?(i.name=i.name.substr(1),i.type=ur.TYPE_ID):Ms(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var l=i.name,f=this.getConfig(),d=this.all,m=this.em,g=l?this.get(l,i.type):d.where(i)[0];if(!g){var x=i instanceof ur?i:new ur(i,la(la({},n),{config:f,em:m}));return d.add(x,n)}return g},r.prototype.getSelector=function(t,e){return e===void 0&&(e=ur.TYPE_CLASS),kc(t)?(t=t.substr(1),e=ur.TYPE_ID):Ms(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},r.prototype.add=function(t,e){var n=this;e===void 0&&(e={});var i=(0,y.isString)(t)?{}:e;return(0,y.isArray)(t)?t.map(function(l){return n.addSelector(l,e,i)}):this.addSelector(t,e,i)},r.prototype.addClass=function(t){var e=this,n=[];return(0,y.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(i){return n.push(e.addSelector(i))}),n},r.prototype.get=function(t,e){var n=this;if((0,y.isArray)(t)){var i=[];return t.map(function(l){return n.getSelector(l)}).filter(Boolean).forEach(function(l){return i.indexOf(l)<0&&i.push(l)}),i}return this.getSelector(t,e)},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.setState=function(t){return this.em.setState(t),this},r.prototype.getState=function(){return this.em.getState()},r.prototype.getStates=function(){return Vl([],this.states.models,!0)},r.prototype.setStates=function(t,e){return this.states.reset(t.map(function(n){return new xc(n)}),e)},r.prototype.getSelected=function(){return this.__getCommon()},r.prototype.getSelectedAll=function(){return Vl([],this.selected.models,!0)},r.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach(function(n){n.getSelectors().add(e)})},r.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(e){!t.get("protected")&&e&&e.getSelectors().remove(t)})},r.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},r.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},r.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},r.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):ur.escapeName(t)},r.prototype.render=function(t){var e=this.selectorTags,n=this.getConfig(),i=e==null?void 0:e.el;return this.selected.reset(t),this.selectorTags=new Au({el:i,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},r.prototype.destroy=function(){var t=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),t==null||t.remove(),this.selectorTags=void 0},r.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},r.prototype.__getCommonSelectors=function(t,e){e===void 0&&(e={});var n=t.map(function(i){return i.getSelectors&&i.getSelectors().getValid(e)}).filter(Boolean);return this.__common.apply(this,n)},r.prototype.__common=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?e.length===1?e[0]:e.length===2?e[0].filter(function(i){return e[1].indexOf(i)>=0}):e.slice(1).reduce(function(i,l){return t.__common(i,l)},e[0]):[]},r.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},r}($t);const ua=df,Nu={textTags:["br","b","i","u","a","ul","ol"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};var Ja={4:"media",5:"font-face",6:"page",7:"keyframes",11:"counter-style",12:"supports",13:"document",14:"font-feature-values",15:"viewport"},Iu=(0,y.keys)(Ja),Za=["5","6","11","15"],Xa=["font-face","page","counter-style","viewport"],pa=function(a){a===void 0&&(a="");for(var r=[],t=[],e=a.split(","),n=0,i=e.length;n<i;n++){var l=e[n].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(l)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(l)){var f=l.split(".").filter(Boolean);t.push(f)}else r.push(l)}return{result:t,add:r}},Qa=function(a){for(var r=a.style,t={},e=0,n=r.length;e<n;e++){var i=r[e],l=r.getPropertyValue(i),f=r.getPropertyPriority(i);t[i]="".concat(l).concat(f?" !".concat(f):"")}return t},Ac=function(a){return(a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"").trim()},jc=function(a,r,t){r===void 0&&(r={}),t===void 0&&(t={});var e={},n=a.length,i=a[n-1],l=i?i.split(/:(.+)/):[],f=l[1],d=t.atRule,m=t.selectorsAdd,g=t.mediaText;return Xa.indexOf(d)>=0&&(e.singleAtRule=!0),d&&(e.atRuleType=d),m&&(e.selectorsAdd=m),g&&(e.mediaText=g),f&&(a[n-1]=l[0],e.state=f,l.splice(l.length-1,1)),e.selectors=a,e.style=r,e},Mc=function(a){for(var r=[],t=a.cssRules||[],e=0,n=t.length;e<n;e++){var i=t[e],l=i.type.toString(),f=!1,d="",m="",g=i.selectorText||i.keyText,x=Za.indexOf(l)>=0;if(x)f=!0,d=Ja[l],m=Ac(i);else if(Iu.indexOf(l)>=0){var A=Mc(i);m=Ac(i);for(var $=0,Z=A.length;$<Z;$++){var ut=A[$];m&&(ut.mediaText=m),ut.atRuleType=Ja[l]}r=r.concat(A)}if(g||x){for(var yt=Qa(i),pt=pa(g),Bt=pt.add,Zt=pt.result,Pe=void 0,Le=0,Ke=Zt.length;Le<Ke;Le++){var en=jc(Zt[Le],yt,{atRule:Ja[l]});r.push(en),Pe=en}if(Bt.length){var gn=Bt.join(", ");Pe?Pe.selectorsAdd=gn:(en={selectors:[],selectorsAdd:gn,style:yt},f&&(en.singleAtRule=f),d&&(en.atRuleType=d),m&&(en.mediaText=m),r.push(en))}}}return r};const ss=function(a,r){return r===void 0&&(r={}),{parse:function(t){var e=this,n=[],i=r.parserCss,l=a==null?void 0:a.Editor,f=i?i(t,l):function(d){var m=document.createElement("style");m.innerHTML=d,document.head.appendChild(m);var g=m.sheet;return document.head.removeChild(m),Mc(g)}(t);return f.forEach(function(d){return n=n.concat(e.checkNode(d))}),a==null||a.trigger("parse:css",{input:t,output:n}),n},checkNode:function(t){var e=t.selectors,n=t.style,i=[t];if((0,y.isString)(e)){var l=[],f=t,d=pa(e),m=d.result,g=d.add.join(", "),x={atRule:f.atRule,mediaText:f.params};m.length?m.forEach(function(A){l.push(jc(A,n,x))}):l.push(jc([],n,x)),g&&(l[l.length-1].selectorsAdd=g),i=l}return i}}};var fa=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tl=function(a){function r(t){var e=a.call(this,t,"Parser",Nu)||this,n=e.config;return e.parserCss=ss(t,n),e.parserHtml=_e(t,n),e}return fa(r,a),r.prototype.parseHtml=function(t,e){e===void 0&&(e={});var n=this.em,i=this.parserHtml;return i.compTypes=n.Components.getTypes()||{},i.parse(t,this.parserCss,e)},r.prototype.parseCss=function(t){return this.parserCss.parse(t)},r.prototype.destroy=function(){},r}(Dt);const hf=tl,Fu={id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}};var Ru=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(m){try{d(e.next(m))}catch(g){i(g)}}function f(m){try{d(e.throw(m))}catch(g){i(g)}}function d(m){var g;m.done?n(m.value):(g=m.value,g instanceof t?g:new t(function(x){x(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Vu=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(m){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(x){g=[6,x],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,m])}}};const gf=function(){function a(){}return a.prototype.store=function(r,t){return t===void 0&&(t={}),Ru(this,void 0,void 0,function(){return Vu(this,function(e){return this.hasLocal(t,!0)&&localStorage.setItem(t.key,JSON.stringify(r)),[2,r]})})},a.prototype.load=function(r){return r===void 0&&(r={}),Ru(this,void 0,void 0,function(){var t;return Vu(this,function(e){return t={},this.hasLocal(r,!0)&&(t=JSON.parse(localStorage.getItem(r.key)||"{}")),[2,t]})})},a.prototype.hasLocal=function(r,t){if(r===void 0&&(r={}),r.checkLocal&&(!(0,N.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},a}();function sr(a){return sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sr(a)}const Hu=function(a){var r=this.constructor;return this.then(function(t){return r.resolve(a()).then(function(){return t})},function(t){return r.resolve(a()).then(function(){return r.reject(t)})})},mf=function(a){return new this(function(r,t){if(!a||a.length===void 0)return t(new TypeError(sr(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var e=Array.prototype.slice.call(a);if(e.length===0)return r([]);var n=e.length;function i(f,d){if(d&&(sr(d)==="object"||typeof d=="function")){var m=d.then;if(typeof m=="function")return void m.call(d,function(g){i(f,g)},function(g){e[f]={status:"rejected",reason:g},--n==0&&r(e)})}e[f]={status:"fulfilled",value:d},--n==0&&r(e)}for(var l=0;l<e.length;l++)i(l,e[l])})};function Bu(a,r){this.name="AggregateError",this.errors=a,this.message=r||""}Bu.prototype=Error.prototype;const vf=function(a){var r=this;return new r(function(t,e){if(!a||a.length===void 0)return e(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(a);if(n.length===0)return e();for(var i=[],l=0;l<n.length;l++)try{r.resolve(n[l]).then(t).catch(function(f){i.push(f),i.length===n.length&&e(new Bu(i,"All promises were rejected"))})}catch(f){e(f)}})};var zu=setTimeout;function Lc(a){return Boolean(a&&a.length!==void 0)}function Uu(){}function Yn(a){if(!(this instanceof Yn))throw new TypeError("Promises must be constructed via new");if(typeof a!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],da(a,this)}function $u(a,r){for(;a._state===3;)a=a._value;a._state!==0?(a._handled=!0,Yn._immediateFn(function(){var t=a._state===1?r.onFulfilled:r.onRejected;if(t!==null){var e;try{e=t(a._value)}catch(n){return void Fo(r.promise,n)}Dc(r.promise,e)}else(a._state===1?Dc:Fo)(r.promise,a._value)})):a._deferreds.push(r)}function Dc(a,r){try{if(r===a)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(sr(r)==="object"||typeof r=="function")){var t=r.then;if(r instanceof Yn)return a._state=3,a._value=r,void Ds(a);if(typeof t=="function")return void da((e=t,n=r,function(){e.apply(n,arguments)}),a)}a._state=1,a._value=r,Ds(a)}catch(i){Fo(a,i)}var e,n}function Fo(a,r){a._state=2,a._value=r,Ds(a)}function Ds(a){a._state===2&&a._deferreds.length===0&&Yn._immediateFn(function(){a._handled||Yn._unhandledRejectionFn(a._value)});for(var r=0,t=a._deferreds.length;r<t;r++)$u(a,a._deferreds[r]);a._deferreds=null}function Bl(a,r,t){this.onFulfilled=typeof a=="function"?a:null,this.onRejected=typeof r=="function"?r:null,this.promise=t}function da(a,r){var t=!1;try{a(function(e){t||(t=!0,Dc(r,e))},function(e){t||(t=!0,Fo(r,e))})}catch(e){if(t)return;t=!0,Fo(r,e)}}Yn.prototype.catch=function(a){return this.then(null,a)},Yn.prototype.then=function(a,r){var t=new this.constructor(Uu);return $u(this,new Bl(a,r,t)),t},Yn.prototype.finally=Hu,Yn.all=function(a){return new Yn(function(r,t){if(!Lc(a))return t(new TypeError("Promise.all accepts an array"));var e=Array.prototype.slice.call(a);if(e.length===0)return r([]);var n=e.length;function i(f,d){try{if(d&&(sr(d)==="object"||typeof d=="function")){var m=d.then;if(typeof m=="function")return void m.call(d,function(g){i(f,g)},t)}e[f]=d,--n==0&&r(e)}catch(g){t(g)}}for(var l=0;l<e.length;l++)i(l,e[l])})},Yn.any=vf,Yn.allSettled=mf,Yn.resolve=function(a){return a&&sr(a)==="object"&&a.constructor===Yn?a:new Yn(function(r){r(a)})},Yn.reject=function(a){return new Yn(function(r,t){t(a)})},Yn.race=function(a){return new Yn(function(r,t){if(!Lc(a))return t(new TypeError("Promise.race accepts an array"));for(var e=0,n=a.length;e<n;e++)Yn.resolve(a[e]).then(r,t)})},Yn._immediateFn=typeof setImmediate=="function"&&function(a){setImmediate(a)}||function(a){zu(a,0)},Yn._unhandledRejectionFn=function(a){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};const Zo=Yn;(0,N.hasWin)()&&(window.Promise=window.Promise||Zo);const Wu=typeof fetch=="function"?fetch.bind():function(a,r){return new Zo(function(t,e){var n=new XMLHttpRequest;for(var i in n.open(r.method||"get",a),n.withCredentials=r.credentials=="include",r.headers||{})n.setRequestHeader(i,r.headers[i]);n.onload=function(l){return t({status:n.status,statusText:n.statusText,text:function(){return Zo.resolve(n.responseText)}})},n.onerror=e,n.upload&&r.onProgress&&(n.upload.onprogress=r.onProgress),r.body?n.send(r.body):n.send()})};var zl=function(){return zl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},zl.apply(this,arguments)},Ns=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(m){try{d(e.next(m))}catch(g){i(g)}}function f(m){try{d(e.throw(m))}catch(g){i(g)}}function d(m){var g;m.done?n(m.value):(g=m.value,g instanceof t?g:new t(function(x){x(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Nc=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(m){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(x){g=[6,x],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,m])}}};const qu=function(){function a(){}return a.prototype.store=function(r,t){return t===void 0&&(t={}),Ns(this,void 0,void 0,function(){return Nc(this,function(e){switch(e.label){case 0:return[4,this.request(t.urlStore,this.__props(t,r),t)];case 1:return[2,e.sent()]}})})},a.prototype.load=function(r){return r===void 0&&(r={}),Ns(this,void 0,void 0,function(){return Nc(this,function(t){switch(t.label){case 0:return[4,this.request(r.urlLoad,this.__props(r),r)];case 1:return[2,t.sent()]}})})},a.prototype.request=function(r,t,e){return t===void 0&&(t={}),e===void 0&&(e={}),Wu(r,t).then(function(n){var i=n.text();return(n.status/200|0)==1?i:i.then(Promise.reject)}).then(function(n){var i=n&&(0,y.isString)(n);return e.contentTypeJson&&i?JSON.parse(n):n})},a.prototype.__props=function(r,t){r===void 0&&(r={});var e,n=r.contentTypeJson,i=r.headers||{},l=r.fetchOptions||{},f="X-Requested-With",d="Content-Type";if((0,y.isUndefined)(i[f])&&(i[f]="XMLHttpRequest"),(0,y.isUndefined)(i[d])&&n&&(i[d]="application/json; charset=utf-8"),t)if(n)e=JSON.stringify(t);else for(var m in e=new FormData,t)e.append(m,t[m]);var g={method:e?"POST":"GET",credentials:r.credentials,headers:i,body:e};return zl(zl({},g),(0,y.isFunction)(l)?l(g):l)},a}();var Gu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mi=function(){return Mi=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Mi.apply(this,arguments)},as=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(m){try{d(e.next(m))}catch(g){i(g)}}function f(m){try{d(e.throw(m))}catch(g){i(g)}}function d(m){var g;m.done?n(m.value):(g=m.value,g instanceof t?g:new t(function(x){x(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},el=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(m){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(x){g=[6,x],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,m])}}},Ul="storage:start",$l="storage:after",Ku="storage:end",ha="storage:error",nl="local",Yu="remote",Ju=function(a){function r(t){var e=a.call(this,t,"StorageManager",Fu)||this;e.storages={};var n=e.config;return n._disable&&(n.type=""),e.storages={},e.add(nl,new gf),e.add(Yu,new qu),e.setCurrent(n.type),e}return Gu(r,a),r.prototype.isAutosave=function(){return!!this.config.autosave},r.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},r.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},r.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},r.prototype.add=function(t,e){return this.storages[t]=e,this},r.prototype.get=function(t){return this.storages[t]},r.prototype.getStorages=function(){return this.storages},r.prototype.getCurrent=function(){return this.config.currentStorage},r.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},r.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},r.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},r.prototype.store=function(t,e){return e===void 0&&(e={}),as(this,void 0,void 0,function(){var n,i,l,f,d;return el(this,function(m){switch(m.label){case 0:n=this.getCurrentStorage(),i=Mi(Mi({},this.getCurrentOptions()),e),l=this.getRecoveryStorage(),f=this.getCurrentOptions(nl),m.label=1;case 1:return m.trys.push([1,5,,9]),[4,this.__exec(n,i,t)];case 2:return m.sent(),l?[4,this.__exec(l,f,{})]:[3,4];case 3:m.sent(),m.label=4;case 4:return[3,9];case 5:return d=m.sent(),l?[4,this.__exec(l,f,t)]:[3,7];case 6:return m.sent(),[3,8];case 7:throw d;case 8:return[3,9];case 9:return[2,t]}})})},r.prototype.load=function(t){return t===void 0&&(t={}),as(this,void 0,void 0,function(){var e,n,i,l,f;return el(this,function(d){switch(d.label){case 0:return e=this.getCurrentStorage(),n=Mi(Mi({},this.getCurrentOptions()),t),(i=this.getRecoveryStorage())?[4,this.__exec(i,this.getCurrentOptions(nl))]:[3,5];case 1:if(f=d.sent(),(0,y.isEmpty)(f))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return d.sent(),l=f,[3,5];case 4:return d.sent(),[3,5];case 5:return l?[3,7]:[4,this.__exec(e,n)];case 6:l=d.sent(),d.label=7;case 7:return[2,l||{}]}})})},r.prototype.__askRecovery=function(){var t=this.em,e=this.getRecovery();return new Promise(function(n,i){(0,y.isFunction)(e)?e(n,i,t==null?void 0:t.getEditor()):confirm(t==null?void 0:t.t("storageManager.recover"))?n(null):i()})},r.prototype.getRecovery=function(){return this.config.recovery},r.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===Yu&&this.get(nl)},r.prototype.__exec=function(t,e,n){var i;return as(this,void 0,void 0,function(){var l,f,d,m,g,x,A,$,Z,ut,yt,pt,Bt;return el(this,function(Zt){switch(Zt.label){case 0:if(l=n?"store":"load",f=this.getConfig(),d=f.onStore,m=f.onLoad,this.onStart(l,n),!t)return[2,n||{}];Zt.label=1;case 1:return Zt.trys.push([1,14,,15]),x=(i=this.em)===null||i===void 0?void 0:i.getEditor(),A=void 0,n?(Z=d)?[4,d(n,x)]:[3,3]:[3,7];case 2:Z=Zt.sent(),Zt.label=3;case 3:return $=Z||n,(ut=e.onStore)?[4,e.onStore($,x)]:[3,5];case 4:ut=Zt.sent(),Zt.label=5;case 5:return $=ut||$,[4,t.store($,e)];case 6:return A=Zt.sent(),g=n,[3,13];case 7:return[4,t.load(e)];case 8:return A=Zt.sent(),g=this.__clearKeys(A),(yt=e.onLoad)?[4,e.onLoad(g,x)]:[3,10];case 9:yt=Zt.sent(),Zt.label=10;case 10:return g=yt||g,(pt=m)?[4,m(g,x)]:[3,12];case 11:pt=Zt.sent(),Zt.label=12;case 12:g=pt||g,Zt.label=13;case 13:return this.onAfter(l,g,A),this.onEnd(l,g),[3,15];case 14:throw Bt=Zt.sent(),this.onError(l,Bt),Bt;case 15:return[2,g]}})})},r.prototype.__clearKeys=function(t){t===void 0&&(t={});var e=this.getConfig(),n=new RegExp("^".concat(e.id)),i={};for(var l in t)i[l.replace(n,"")]=t[l];return i},r.prototype.getCurrentOptions=function(t){var e=this.getConfig(),n=t||this.getCurrent();return e.options[n]||{}},r.prototype.onStart=function(t,e){var n=this.em;n&&(n.trigger(Ul),t&&n.trigger("".concat(Ul,":").concat(t),e))},r.prototype.onAfter=function(t,e,n){var i=this.em;i&&(i.trigger($l),i.trigger("".concat($l,":").concat(t),e,n),i.trigger("storage:".concat(t),e,n))},r.prototype.onEnd=function(t,e){var n=this.em;n&&(n.trigger(Ku),t&&n.trigger("".concat(Ku,":").concat(t),e))},r.prototype.onError=function(t,e){var n=this.em;n&&(n.trigger(ha,e),t&&n.trigger("".concat(ha,":").concat(t),e),this.onEnd(t,e))},r.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},r.prototype.destroy=function(){this.storages={}},r}(Dt);const Wl=Ju,yf={stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}]};var bf=rt(330),rl=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ga=function(){return ga=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ga.apply(this,arguments)},Ic=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.events={},e.appendInput=!0;var n=t.config,i=n===void 0?{}:n,l=e,f=l.model,d=l.eventCapture,m=f.target,g=f.attributes.type;e.config=i,e.em=i.em,e.pfx=i.stylePrefix||"",e.ppfx=i.pStylePrefix||"",e.target=m;var x=e.ppfx;return e.clsField="".concat(x,"field ").concat(x,"field-").concat(g),[["change:value",e.onValueChange],["remove",e.removeView]].forEach(function(A){var $=A[0],Z=A[1];f.off($,Z),e.listenTo(f,$,Z)}),f.view=e,e.listenTo(f,"change:label",e.render),e.listenTo(f,"change:placeholder",e.rerender),e.events={},d.forEach(function(A){return e.events[A]="onChange"}),e.delegateEvents(),e.init(),e}return rl(r,a),r.prototype.attributes=function(){return this.model.get("attributes")||{}},r.prototype.templateLabel=function(t){var e=this.ppfx,n=this.getLabel();return'<div class="'.concat(e,'label" title="').concat(n,'">').concat(n,"</div>")},r.prototype.templateInput=function(t){var e=this.clsField;return'<div class="'.concat(e,'" data-input></div>')},r.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},r.prototype.removeView=function(){this.remove(),this.removed()},r.prototype.init=function(){},r.prototype.removed=function(){},r.prototype.onRender=function(t){},r.prototype.onUpdate=function(t){},r.prototype.onEvent=function(t){},r.prototype.onChange=function(t){var e=this.getInputElem();e&&!(0,y.isUndefined)(e.value)&&this.model.set("value",e.value),this.onEvent(ga(ga({},this.getClbOpts()),{event:t}))},r.prototype.getValueForTarget=function(){return this.model.get("value")},r.prototype.setInputValue=function(t){var e=this.getInputElem();e&&(e.value=t)},r.prototype.onValueChange=function(t,e,n){if(n===void 0&&(n={}),n.fromTarget)this.setInputValue(t.get("value")),this.postUpdate();else{var i=this.getValueForTarget();t.setTargetValue(i,n)}},r.prototype.renderLabel=function(){var t=this.$el,e=this.target,n=this.getLabel(),i=this.templateLabel(e);this.createLabel&&(i=this.createLabel({label:n,component:e,trait:this})||""),t.find("[data-label]").append(i)},r.prototype.getLabel=function(){var t=this.em,e=this.model.attributes,n=e.label,i=e.name;return t.t("traitManager.traits.labels.".concat(i))||(0,N.capitalize)(n||i).replace(/-/g," ")},r.prototype.getComponent=function(){return this.target},r.prototype.getInputEl=function(){if(!this.$input){var t=this.em,e=this.model,n=e,i=e.attributes.name,l=n.get("placeholder")||n.get("default")||"",f=n.get("type")||"text",d=n.get("min"),m=n.get("max"),g=this.getModelValue(),x=(0,tt.default)('<input type="'.concat(f,'">')),A=t.t("traitManager.traits.attributes.".concat(i))||{};x.attr(ga({placeholder:l},A)),(0,y.isUndefined)(g)||(n.set({value:g},{silent:!0}),x.prop("value",g)),d&&x.prop("min",d),m&&x.prop("max",m),this.$input=x}return this.$input.get(0)},r.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},r.prototype.getModelValue=function(){var t,e=this.model,n=this.target,i=e.getName();if(e.get("changeProp"))t=n.get(i);else{var l=n.get("attributes");t=e.get("value")||l[i]}return(0,y.isUndefined)(t)?"":t},r.prototype.getElInput=function(){return this.elInput},r.prototype.renderField=function(){var t=this,e=t.$el,n=t.appendInput,i=t.model,l=e.find("[data-input]"),f=l[l.length-1],d=i.el;d||(d=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,y.isString)(d)?(f.innerHTML=d,this.elInput=f.firstChild):(n?f.appendChild(d):f.insertBefore(d,f.firstChild),this.elInput=d),i.el=this.elInput},r.prototype.hasLabel=function(){var t=this.model.attributes.label;return!this.noLabel&&t!==!1},r.prototype.rerender=function(){delete this.model.el,this.render()},r.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,i=t.ppfx,l=t.model.attributes,f=l.type,d=l.id,m=this.hasLabel&&this.hasLabel(),g="".concat(n,"trait");delete this.$input;var x='<div class="'.concat(g," ").concat(g,"--").concat(f,`">
      `).concat(m?'<div class="'.concat(i,'label-wrp" data-label></div>'):"",`
      <div class="`).concat(i,"field-wrp ").concat(i,"field-wrp--").concat(f,`" data-input>
        `).concat(this.templateInput?(0,y.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"",`
      </div>
    </div>`);return e.empty().append(x),m&&this.renderLabel(),this.renderField(),this.el.className="".concat(g,"__wrp ").concat(g,"__wrp-").concat(d),this.postUpdate(),this.onRender(this.getClbOpts()),this},r}(S.G7);const Li=Ic;Ic.prototype.eventCapture=["change"];var Fc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rc=function(a){function r(t,e){t===void 0&&(t={});var n=a.call(this,t)||this;n.reuseView=!0,n.itemsView=e;var i=t.config||{},l=i.stylePrefix||"",f=t.editor;return n.config=i,n.em=f,n.pfx=l,n.ppfx=i.pStylePrefix||"",n.className="".concat(l,"traits"),n.listenTo(f,"component:toggled",n.updatedCollection),n.updatedCollection(),n}return Fc(r,a),r.prototype.updatedCollection=function(){var t=this,e=t.ppfx,n=t.className,i=t.em.getSelected();this.el.className="".concat(n," ").concat(e,"one-bg ").concat(e,"two-color"),this.collection=i?i.traits:[],this.render()},r}(bf.Z);const Zu=Rc;Rc.prototype.itemView=Li;var Xu=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Qu=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.rerender),e}return Xu(r,a),r.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<div class="'.concat(e,`">
      <div data-input></div>
      <div class="`).concat(t,`sel-arrow">
        <div class="`).concat(t,`d-s-arrow"></div>
      </div>
    </div>`)},r.prototype.getInputEl=function(){if(!this.$input){var t=this.model,e=this.em,n=t.get("name"),i=t.get("options")||[],l=[],f="<select>";i.forEach(function(g){var x,A,$,Z="";(0,y.isString)(g)?(x=g,A=g):(x=g.name||g.label||g.value,A="".concat((0,y.isUndefined)(g.value)?g.id:g.value).replace(/"/g,"&quot;"),Z+=($=g.style?g.style.replace(/"/g,"&quot;"):"")?' style="'.concat($,'"'):"");var ut=e.t("traitManager.traits.options.".concat(n,".").concat(A))||x;f+='<option value="'.concat(A,'"').concat(Z,">").concat(ut,"</option>"),l.push(A)}),f+="</select>",this.$input=(0,tt.default)(f);var d=t.getTargetValue(),m=l.indexOf(d)>=0?d:t.get("default");!(0,y.isUndefined)(m)&&this.$input.val(m)}return this.$input.get(0)},r}(Li);var ol=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const il=function(a){function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.appendInput=!1,t}return ol(r,a),r.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return'<label class="'.concat(e,`" data-input>
    <i class="`).concat(t,`chk-icon"></i>
  </label>`)},r.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},r.prototype.getInputEl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!this.$input,i=Li.prototype.getInputEl.apply(this,t);if(n){var l=void 0,f=void 0,d=this,m=d.model,g=d.target,x=m.attributes.valueFalse,A=m.getName();m.get("changeProp")?f=l=g.get(A):l=!(!(f=g.get("attributes")[A])&&f!==""),(0,y.isUndefined)(x)||f!==x||(l=!1),i.checked=l}return i},r}(Li);var wf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ql=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.ppfx||"";return e.opts=t,e.ppfx=n,e.em=t.target||{},!t.onChange&&e.listenTo(e.model,"change:value",e.handleModelChange),e}return wf(r,a),r.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},r.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.setValue=function(t,e){var n=this.model,i=t||n.get("defaults"),l=this.getInputEl();l&&(l.value=i)},r.prototype.handleModelChange=function(t,e,n){this.setValue(e,n)},r.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},r.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},r.prototype.getInputEl=function(){if(!this.inputEl){var t=this.model,e=this.opts.type||"text",n=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,tt.default)('<input type="'.concat(e,'" placeholder="').concat(n,'">'))}return this.inputEl.get(0)},r.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},r}(S.G7);const Gl=ql;ql.prototype.events={change:"handleChange"};var tp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ep=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;return(0,y.bindAll)(e,"moveIncrement","upIncrement"),e.doc=document,e.listenTo(e.model,"change:unit",e.handleModelChange),e}return tp(r,a),r.prototype.template=function(){var t=this.ppfx;return`
      <span class="`.concat(t,`input-holder"></span>
      <span class="`).concat(t,`field-units"></span>
      <div class="`).concat(t,`field-arrows" data-arrows>
        <div class="`).concat(t,`field-arrow-u" data-arrow-up></div>
        <div class="`).concat(t,`field-arrow-d" data-arrow-down></div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},r.prototype.setValue=function(t,e){var n=e||{},i=this.validateInputValue(t,{deepCheck:1}),l={value:i.value,unit:""};(i.unit||i.force)&&(l.unit=i.unit),this.model.set(l,n),n.silent&&this.handleModelChange()},r.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},r.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set("unit",e),this.elementUpdated()},r.prototype.handleKeyDown=function(t){t.key==="ArrowUp"&&(t.preventDefault(),this.upArrowClick()),t.key==="ArrowDown"&&(t.preventDefault(),this.downArrowClick())},r.prototype.elementUpdated=function(){this.model.trigger("el:change")},r.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var e=this.getUnitEl();e&&(e.value=t.get("unit")||"")},r.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get("units")||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach(function(l){var f=l==t.get("unit")?"selected":"";n.push("<option ".concat(f,">").concat(l,"</option>"))});var i=document.createElement("div");i.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(n.join(""),"</select>"),this.unitEl=i.firstChild}}return this.unitEl},r.prototype.upArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(t.get("value"));this.setValue(this.normalizeValue(n+e)),this.elementUpdated()},r.prototype.downArrowClick=function(){var t=this.model,e=t.get("step"),n=parseFloat(t.get("value"));this.setValue(this.normalizeValue(n-e)),this.elementUpdated()},r.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get("value")||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,N.on)(this.doc,"mousemove",this.moveIncrement),(0,N.on)(this.doc,"mouseup",this.upIncrement)},r.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,n=e.get("step"),i=this.current,l=this.normalizeValue(i.val+(i.y-t.pageY)*n),f=this.validateInputValue(l),d=f.value,m=f.unit;return this.prValue=d,e.set({value:d,unit:m},{avoidStore:1}),!1},r.prototype.upIncrement=function(){var t=this.model,e=t.get("step");if((0,N.off)(this.doc,"mouseup",this.upIncrement),(0,N.off)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set("value",n,{avoidStore:1}).set("value",n+e),this.elementUpdated()}},r.prototype.normalizeValue=function(t,e){e===void 0&&(e=0);var n=this.model.get("step"),i=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var l=n.toString().split(".")[1];i=l?l.length:0}return i?parseFloat(t.toFixed(i)):t},r.prototype.validateInputValue=function(t,e){e===void 0&&(e={});var n=0,i=e||{},l=this.model,f="",d=(0,y.isUndefined)(t)?f:t,m=e.units||l.get("units")||[],g=l.get("unit")||m.length&&m[0]||"",x=(0,y.isUndefined)(e.max)?l.get("max"):e.max,A=(0,y.isUndefined)(e.min)?l.get("min"):e.min,$=!!l.get("limitlessMax"),Z=!!l.get("limitlessMin");if(i.deepCheck){var ut=l.get("fixedValues")||[];if(d===""&&(g=""),d){var yt=new RegExp("^"+ut.join("|"),"g");if(ut.length&&yt.test(d))d=d.match(yt)[0],g="",n=1;else{var pt=d+"";d+="",d=parseFloat(d.replace(",",".")),d=isNaN(d)?f:d;var Bt=pt.replace(d,"");(0,y.indexOf)(m,Bt)>=0&&(g=Bt)}}}return $||(0,y.isUndefined)(x)||x===""||(d=d>x?x:d),Z||(0,y.isUndefined)(A)||A===""||(d=d<A?A:d),{force:n,value:d,unit:g}},r.prototype.render=function(){Gl.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},r}(Gl);const np=ep;ep.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var _f=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Cf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return _f(r,a),r.prototype.getValueForTarget=function(){var t=this.model,e=t.attributes,n=e.value,i=e.unit;return(0,y.isUndefined)(n)||n===""?t.get("default"):n+i},r.prototype.getInputEl=function(){if(!this.input){var t=this.ppfx,e=this.model,n=this.getModelValue(),i=new np({contClass:"".concat(t,"field-int"),type:"number",model:e,ppfx:t});i.render(),this.$input=i.inputEl,this.$unit=i.unitEl,e.set("value",n,{fromTarget:!0}),this.$input.val(n),this.input=i.el}return this.input},r}(Li);var rp=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),sl=function(){return sl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},sl.apply(this,arguments)};tt.default&&function(a,r){if((0,N.hasWin)()){var t={beforeShow:uo,move:uo,change:uo,show:uo,hide:uo,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},e=[],n=!!/msie/i.exec(window.navigator.userAgent),i=function(){function Ot(zt,te){return!!~(""+zt).indexOf(te)}var Vt=document.createElement("div").style;return Vt.cssText="background-color:rgba(0,0,0,.5)",Ot(Vt.backgroundColor,"rgba")||Ot(Vt.backgroundColor,"hsla")}(),l=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),f=function(){var Ot="";if(n)for(var Vt=1;Vt<=6;Vt++)Ot+="<div class='sp-"+Vt+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",Ot,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),d="spectrum.id";a.fn.spectrum=function(Ot,Vt){if(typeof Ot=="string"){var zt=this,te=Array.prototype.slice.call(arguments,1);return this.each(function(){var Ae=e[a(this).data(d)];if(Ae){var Xt=Ae[Ot];if(!Xt)throw new Error("Spectrum: no such method: '"+Ot+"'");Ot=="get"?zt=Ae.get():Ot=="container"?zt=Ae.container:Ot=="option"?zt=Ae.option.apply(Ae,te):Ot=="destroy"?(Ae.destroy(),a(this).removeData(d)):Xt.apply(Ae,te)}}),zt}return this.spectrum("destroy").each(function(){var Ae=Rn(this,a.extend({},Ot,a(this).data()));a(this).data(d,Ae.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=Vo,a.fn.spectrum.defaults=t,a.fn.spectrum.inputTypeColorSupport=function Ot(){if(Ot._cachedResult===void 0){var Vt=a("<input type='color'/>")[0];Ot._cachedResult=Vt.type==="color"&&Vt.value!==""}return Ot._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var Ot=a("input[type=color]");Ot.length&&!Oo()&&Ot.spectrum({preferredFormat:"hex6"})};var m=/^[\s,#]+/,g=/\s+$/,x=0,A=Math,$=A.round,Z=A.min,ut=A.max,yt=A.random,pt=function(Ot,Vt){if(Vt=Vt||{},(Ot=Ot||"")instanceof pt)return Ot;if(!(this instanceof pt))return new pt(Ot,Vt);var zt=function(te){var Ae={r:0,g:0,b:0},Xt=1,on=!1,vn=!1;typeof te=="string"&&(te=function(yn){yn=yn.replace(m,"").replace(g,"").toLowerCase();var Re,xn=!1;if(Le[yn])yn=Le[yn],xn=!0;else if(yn=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Re=en.rgb.exec(yn))?{r:Re[1],g:Re[2],b:Re[3]}:(Re=en.rgba.exec(yn))?{r:Re[1],g:Re[2],b:Re[3],a:Re[4]}:(Re=en.hsl.exec(yn))?{h:Re[1],s:Re[2],l:Re[3]}:(Re=en.hsla.exec(yn))?{h:Re[1],s:Re[2],l:Re[3],a:Re[4]}:(Re=en.hsv.exec(yn))?{h:Re[1],s:Re[2],v:Re[3]}:(Re=en.hsva.exec(yn))?{h:Re[1],s:Re[2],v:Re[3],a:Re[4]}:(Re=en.hex8.exec(yn))?{a:Yy(Re[1]),r:ps(Re[2]),g:ps(Re[3]),b:ps(Re[4]),format:xn?"name":"hex8"}:(Re=en.hex6.exec(yn))?{r:ps(Re[1]),g:ps(Re[2]),b:ps(Re[3]),format:xn?"name":"hex"}:(Re=en.hex3.exec(yn))?{r:ps(Re[1]+""+Re[1]),g:ps(Re[2]+""+Re[2]),b:ps(Re[3]+""+Re[3]),format:xn?"name":"hex"}:!1}(te)),typeof te=="object"&&(te.hasOwnProperty("r")&&te.hasOwnProperty("g")&&te.hasOwnProperty("b")?(fn=te.r,ei=te.g,jr=te.b,Ae={r:255*nr(fn,255),g:255*nr(ei,255),b:255*nr(jr,255)},on=!0,vn=String(te.r).substr(-1)==="%"?"prgb":"rgb"):te.hasOwnProperty("h")&&te.hasOwnProperty("s")&&te.hasOwnProperty("v")?(te.s=ru(te.s),te.v=ru(te.v),Ae=function(yn,Re,xn){yn=6*nr(yn,360),Re=nr(Re,100),xn=nr(xn,100);var Pn=A.floor(yn),Cr=yn-Pn,dr=xn*(1-Re),ro=xn*(1-Cr*Re),To=xn*(1-(1-Cr)*Re),ni=Pn%6,fs=[xn,ro,dr,dr,To,xn][ni],xa=[To,xn,xn,ro,dr,dr][ni],oo=[dr,dr,To,xn,xn,ro][ni];return{r:255*fs,g:255*xa,b:255*oo}}(te.h,te.s,te.v),on=!0,vn="hsv"):te.hasOwnProperty("h")&&te.hasOwnProperty("s")&&te.hasOwnProperty("l")&&(te.s=ru(te.s),te.l=ru(te.l),Ae=function(yn,Re,xn){var Pn,Cr,dr;function ro(fs,xa,oo){return oo<0&&(oo+=1),oo>1&&(oo-=1),oo<1/6?fs+6*(xa-fs)*oo:oo<1/2?xa:oo<2/3?fs+(xa-fs)*(2/3-oo)*6:fs}if(yn=nr(yn,360),Re=nr(Re,100),xn=nr(xn,100),Re===0)Pn=Cr=dr=xn;else{var To=xn<.5?xn*(1+Re):xn+Re-xn*Re,ni=2*xn-To;Pn=ro(ni,To,yn+1/3),Cr=ro(ni,To,yn),dr=ro(ni,To,yn-1/3)}return{r:255*Pn,g:255*Cr,b:255*dr}}(te.h,te.s,te.l),on=!0,vn="hsl"),te.hasOwnProperty("a")&&(Xt=te.a));var fn,ei,jr;return Xt=Ph(Xt),{ok:on,format:te.format||vn,r:Z(255,ut(Ae.r,0)),g:Z(255,ut(Ae.g,0)),b:Z(255,ut(Ae.b,0)),a:Xt}}(Ot);this._originalInput=Ot,this._r=zt.r,this._g=zt.g,this._b=zt.b,this._a=zt.a,this._roundA=$(100*this._a)/100,this._format=Vt.format||zt.format,this._gradientType=Vt.gradientType,this._r<1&&(this._r=$(this._r)),this._g<1&&(this._g=$(this._g)),this._b<1&&(this._b=$(this._b)),this._ok=zt.ok,this._tc_id=x++};pt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Ot=this.toRgb();return(299*Ot.r+587*Ot.g+114*Ot.b)/1e3},setAlpha:function(Ot){return this._a=Ph(Ot),this._roundA=$(100*this._a)/100,this},toHsv:function(){var Ot=Bs(this._r,this._g,this._b);return{h:360*Ot.h,s:Ot.s,v:Ot.v,a:this._a}},toHsvString:function(){var Ot=Bs(this._r,this._g,this._b),Vt=$(360*Ot.h),zt=$(100*Ot.s),te=$(100*Ot.v);return this._a==1?"hsv("+Vt+", "+zt+"%, "+te+"%)":"hsva("+Vt+", "+zt+"%, "+te+"%, "+this._roundA+")"},toHsl:function(){var Ot=us(this._r,this._g,this._b);return{h:360*Ot.h,s:Ot.s,l:Ot.l,a:this._a}},toHslString:function(){var Ot=us(this._r,this._g,this._b),Vt=$(360*Ot.h),zt=$(100*Ot.s),te=$(100*Ot.l);return this._a==1?"hsl("+Vt+", "+zt+"%, "+te+"%)":"hsla("+Vt+", "+zt+"%, "+te+"%, "+this._roundA+")"},toHex:function(Ot){return dl(this._r,this._g,this._b,Ot)},toHexString:function(Ot){return"#"+this.toHex(Ot)},toHex8:function(){return kh(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:$(this._r),g:$(this._g),b:$(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+$(this._r)+", "+$(this._g)+", "+$(this._b)+")":"rgba("+$(this._r)+", "+$(this._g)+", "+$(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:$(100*nr(this._r,255))+"%",g:$(100*nr(this._g,255))+"%",b:$(100*nr(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+$(100*nr(this._r,255))+"%, "+$(100*nr(this._g,255))+"%, "+$(100*nr(this._b,255))+"%)":"rgba("+$(100*nr(this._r,255))+"%, "+$(100*nr(this._g,255))+"%, "+$(100*nr(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Ke[dl(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Ot){var Vt="#"+kh(this._r,this._g,this._b,this._a),zt=Vt,te=this._gradientType?"GradientType = 1, ":"";return Ot&&(zt=pt(Ot).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+te+"startColorstr="+Vt+",endColorstr="+zt+")"},toString:function(Ot){var Vt=!!Ot;Ot=Ot||this._format;var zt=!1,te=this._a<1&&this._a>=0;return Vt||!te||Ot!=="hex"&&Ot!=="hex6"&&Ot!=="hex3"&&Ot!=="name"?(Ot==="rgb"&&(zt=this.toRgbString()),Ot==="prgb"&&(zt=this.toPercentageRgbString()),Ot!=="hex"&&Ot!=="hex6"||(zt=this.toHexString()),Ot==="hex3"&&(zt=this.toHexString(!0)),Ot==="hex8"&&(zt=this.toHex8String()),Ot==="name"&&(zt=this.toName()),Ot==="hsl"&&(zt=this.toHslString()),Ot==="hsv"&&(zt=this.toHsvString()),zt||this.toHexString()):Ot==="name"&&this._a===0?this.toName():this.toRgbString()},_applyModification:function(Ot,Vt){var zt=Ot.apply(null,[this].concat([].slice.call(Vt)));return this._r=zt._r,this._g=zt._g,this._b=zt._b,this.setAlpha(zt._a),this},lighten:function(){return this._applyModification(Vy,arguments)},brighten:function(){return this._applyModification(Hy,arguments)},darken:function(){return this._applyModification(By,arguments)},desaturate:function(){return this._applyModification(Iy,arguments)},saturate:function(){return this._applyModification(Fy,arguments)},greyscale:function(){return this._applyModification(Ry,arguments)},spin:function(){return this._applyModification(zy,arguments)},_applyCombination:function(Ot,Vt){return Ot.apply(null,[this].concat([].slice.call(Vt)))},analogous:function(){return this._applyCombination(Gy,arguments)},complement:function(){return this._applyCombination(Uy,arguments)},monochromatic:function(){return this._applyCombination(Ky,arguments)},splitcomplement:function(){return this._applyCombination(qy,arguments)},triad:function(){return this._applyCombination($y,arguments)},tetrad:function(){return this._applyCombination(Wy,arguments)}},pt.fromRatio=function(Ot,Vt){if(typeof Ot=="object"){var zt={};for(var te in Ot)Ot.hasOwnProperty(te)&&(zt[te]=te==="a"?Ot[te]:ru(Ot[te]));Ot=zt}return pt(Ot,Vt)},pt.equals=function(Ot,Vt){return!(!Ot||!Vt)&&pt(Ot).toRgbString()==pt(Vt).toRgbString()},pt.random=function(){return pt.fromRatio({r:yt(),g:yt(),b:yt()})},pt.mix=function(Ot,Vt,zt){zt=zt===0?0:zt||50;var te,Ae=pt(Ot).toRgb(),Xt=pt(Vt).toRgb(),on=zt/100,vn=2*on-1,fn=Xt.a-Ae.a,ei=1-(te=((te=vn*fn==-1?vn:(vn+fn)/(1+vn*fn))+1)/2),jr={r:Xt.r*te+Ae.r*ei,g:Xt.g*te+Ae.g*ei,b:Xt.b*te+Ae.b*ei,a:Xt.a*on+Ae.a*(1-on)};return pt(jr)},pt.readability=function(Ot,Vt){var zt=pt(Ot),te=pt(Vt),Ae=zt.toRgb(),Xt=te.toRgb(),on=zt.getBrightness(),vn=te.getBrightness(),fn=Math.max(Ae.r,Xt.r)-Math.min(Ae.r,Xt.r)+Math.max(Ae.g,Xt.g)-Math.min(Ae.g,Xt.g)+Math.max(Ae.b,Xt.b)-Math.min(Ae.b,Xt.b);return{brightness:Math.abs(on-vn),color:fn}},pt.isReadable=function(Ot,Vt){var zt=pt.readability(Ot,Vt);return zt.brightness>125&&zt.color>500},pt.mostReadable=function(Ot,Vt){for(var zt=null,te=0,Ae=!1,Xt=0;Xt<Vt.length;Xt++){var on=pt.readability(Ot,Vt[Xt]),vn=on.brightness>125&&on.color>500,fn=3*(on.brightness/125)+on.color/500;(vn&&!Ae||vn&&Ae&&fn>te||!vn&&!Ae&&fn>te)&&(Ae=vn,te=fn,zt=pt(Vt[Xt]))}return zt};var Bt,Zt,Pe,Le=pt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ke=pt.hexNames=function(Ot){var Vt={};for(var zt in Ot)Ot.hasOwnProperty(zt)&&(Vt[Ot[zt]]=zt);return Vt}(Le),en=(Zt="[\\s|\\(]+("+(Bt="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Bt+")[,|\\s]+("+Bt+")\\s*\\)?",Pe="[\\s|\\(]+("+Bt+")[,|\\s]+("+Bt+")[,|\\s]+("+Bt+")[,|\\s]+("+Bt+")\\s*\\)?",{rgb:new RegExp("rgb"+Zt),rgba:new RegExp("rgba"+Pe),hsl:new RegExp("hsl"+Zt),hsla:new RegExp("hsla"+Pe),hsv:new RegExp("hsv"+Zt),hsva:new RegExp("hsva"+Pe),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=pt,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}function gn(Ot,Vt,zt,te){for(var Ae=[],Xt=0;Xt<Ot.length;Xt++){var on=Ot[Xt];if(on){var vn=pt(on),fn=vn.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";fn+=pt.equals(Vt,on)?" sp-thumb-active":"";var ei=vn.toString(te.preferredFormat||"rgb"),jr=i?"background-color:"+vn.toRgbString():"filter:"+vn.toFilter();Ae.push('<span title="'+ei+'" data-color="'+vn.toRgbString()+'" class="'+fn+'"><span class="sp-thumb-inner" style="'+jr+';"></span></span>')}else Ae.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",te.noColorSelectedText)).html())}return"<div class='sp-cf "+zt+"'>"+Ae.join("")+"</div>"}function Rn(Ot,Vt){var zt,te,Ae,Xt=function(Ue,$e){var Xe=a.extend({},t,Ue);return Xe.callbacks={move:So(Xe.move,$e),change:So(Xe.change,$e),show:So(Xe.show,$e),hide:So(Xe.hide,$e),beforeShow:So(Xe.beforeShow,$e)},Xe}(Vt,Ot),on=Xt.flat,vn=Xt.showSelectionPalette,fn=Xt.localStorageKey,ei=Xt.theme,jr=Xt.callbacks,yn=(zt=yl,te=10,function(){var Ue=this,$e=arguments,Xe=function(){Ae=null,zt.apply(Ue,$e)};Ae||(Ae=setTimeout(Xe,te))}),Re=!1,xn=!1,Pn=!0,Cr=0,dr=0,ro=0,To=0,ni=0,fs=0,xa=0,oo=0,ou=0,iu=0,ds=1,Ap=[],su=[],jp={},hs=Xt.selectionPalette.slice(0),Jy=Xt.maxSelectionSize,Ah="sp-dragging",Sa=null,au=Ot.ownerDocument,xr=(au.body,a(Ot)),ed=!1,un=a(f,au).addClass(ei),Zy=un.find(".sp-picker-container"),Mp=un.find(".sp-color"),Lp=un.find(".sp-dragger"),nd=un.find(".sp-hue"),Dp=un.find(".sp-slider"),lu=un.find(".sp-alpha-inner"),jh=un.find(".sp-alpha"),Np=un.find(".sp-alpha-handle"),gs=un.find(".sp-input"),Mh=un.find(".sp-palette"),Lh=un.find(".sp-initial"),Dh=un.find(".sp-cancel"),rd=un.find(".sp-clear"),Nh=un.find(".sp-choose"),od=un.find(".sp-palette-toggle"),Ip=xr.is("input"),Xy=Ip&&xr.attr("type")==="color"&&Oo(),id=Ip&&!on,ic=id?a(l).addClass(ei).addClass(Xt.className).addClass(Xt.replacerClassName):a([]),cu=id?ic:xr,sc=ic.find(".sp-preview-inner"),uu=Xt.color||Ip&&xr.val(),ac=!1,lc=Xt.preferredFormat,Qy=!Xt.showButtons||Xt.clickoutFiresChange,Oa=!uu,gl=Xt.allowEmpty&&!Xy;function sd(){if(Xt.showPaletteOnly&&(Xt.showPalette=!0),od.text(Xt.showPaletteOnly?Xt.togglePaletteMoreText:Xt.togglePaletteLessText),Xt.palette){Ap=Xt.palette.slice(0),su=a.isArray(Ap[0])?Ap:[Ap],jp={};for(var Ue=0;Ue<su.length;Ue++)for(var $e=0;$e<su[Ue].length;$e++){var Xe=pt(su[Ue][$e]).toRgbString();jp[Xe]=!0}}un.toggleClass("sp-flat",on),un.toggleClass("sp-input-disabled",!Xt.showInput),un.toggleClass("sp-alpha-enabled",Xt.showAlpha),un.toggleClass("sp-clear-enabled",gl),un.toggleClass("sp-buttons-disabled",!Xt.showButtons),un.toggleClass("sp-palette-buttons-disabled",!Xt.togglePaletteOnly),un.toggleClass("sp-palette-disabled",!Xt.showPalette),un.toggleClass("sp-palette-only",Xt.showPaletteOnly),un.toggleClass("sp-initial-disabled",!Xt.showInitial),un.addClass(Xt.className).addClass(Xt.containerClassName),yl()}function Ih(){if(fn&&window.localStorage){try{var Ue=window.localStorage[fn].split(",#");Ue.length>1&&(delete window.localStorage[fn],a.each(Ue,function($e,Xe){ad(Xe)}))}catch{}try{hs=window.localStorage[fn].split(";")}catch{}}}function ad(Ue){if(vn){var $e=pt(Ue).toRgbString();if(!jp[$e]&&a.inArray($e,hs)===-1)for(hs.push($e);hs.length>Jy;)hs.shift();if(fn&&window.localStorage)try{window.localStorage[fn]=hs.join(";")}catch{}}}function Fh(){var Ue=Eo(),$e=a.map(su,function(Xe,Je){return gn(Xe,Ue,"sp-palette-row sp-palette-row-"+Je,Xt)});Ih(),hs&&$e.push(gn(function(){var Xe=[];if(Xt.showPalette)for(var Je=0;Je<hs.length;Je++){var io=pt(hs[Je]).toRgbString();jp[io]||Xe.push(hs[Je])}return Xe.reverse().slice(0,Xt.maxSelectionSize)}(),Ue,"sp-palette-row sp-palette-row-selection",Xt)),Mh.html($e.join(""))}function Rh(){if(Xt.showInitial){var Ue=ac,$e=Eo();Lh.html(gn([Ue,$e],$e,"sp-palette-row-initial",Xt))}}function ld(){(dr<=0||Cr<=0||To<=0)&&yl(),xn=!0,un.addClass(Ah),Sa=null,xr.trigger("dragstart.spectrum",[Eo()])}function cd(){xn=!1,un.removeClass(Ah),xr.trigger("dragstop.spectrum",[Eo()])}function ud(){var Ue=gs.val();if(Ue!==null&&Ue!==""||!gl){var $e=pt(Ue);$e.isValid()?(ml($e),vl(!0)):gs.addClass("sp-validation-error")}else ml(null),vl(!0)}function Vh(){Re?Ta():pd()}function pd(){var Ue=a.Event("beforeShow.spectrum");if(Re)yl();else if(xr.trigger("beforeShow.spectrum",[Eo()]),jr.beforeShow(Eo())!==!1&&!Ue.isDefaultPrevented()){(function(){for(var Xe=0;Xe<e.length;Xe++)e[Xe]&&e[Xe].hide()})(),Re=!0;var $e=a(au);$e.bind("keydown.spectrum",Hh),$e.bind("click.spectrum",Bh),a(window).bind("resize.spectrum",yn),ic.addClass("sp-active"),un.removeClass("sp-hidden"),yl(),uc(),ac=Eo(),Rh(),jr.show(ac),xr.trigger("show.spectrum",[ac])}}function Hh(Ue){Ue.keyCode===27&&Ta()}function Bh(Ue){Ue.button!=2&&(xn||(Qy?vl(!0):zh(),Ta()))}function Ta(){Re&&!on&&(Re=!1,a(au).unbind("keydown.spectrum",Hh),a(au).unbind("click.spectrum",Bh),a(window).unbind("resize.spectrum",yn),ic.removeClass("sp-active"),un.addClass("sp-hidden"),jr.hide(Eo()),xr.trigger("hide.spectrum",[Eo()]))}function zh(){ml(ac,!0)}function ml(Ue,$e){var Xe,Je;pt.equals(Ue,Eo())?uc():(!Ue&&gl?Oa=!0:(Oa=!1,Pn=!Ue,Je=(Xe=pt(Ue)).toHsv(),oo=Je.h%360/360,ou=Je.s,iu=Je.v,ds=Je.a),uc(),Xe&&Xe.isValid()&&!$e&&(lc=Xt.preferredFormat||Xe.getFormat()))}function Eo(Ue){return Ue=Ue||{},gl&&Oa?null:pt.fromRatio({h:oo,s:ou,v:iu,a:Math.round(100*ds)/100},{format:Ue.format||lc})}function cc(){uc(),jr.move(Eo()),xr.trigger("move.spectrum",[Eo()])}function uc(){gs.removeClass("sp-validation-error"),Uh();var Ue=pt.fromRatio({h:oo,s:1,v:1});Mp.css("background-color",Ue.toHexString());var $e=lc;ds<1&&(ds!==0||$e!=="name")&&($e!=="hex"&&$e!=="hex3"&&$e!=="hex6"&&$e!=="name"||($e="rgb"));var Xe=Eo({format:$e}),Je="";if(sc.removeClass("sp-clear-display"),sc.css("background-color","transparent"),!Xe&&gl)sc.addClass("sp-clear-display");else{var io=Xe.toHexString(),ms=Xe.toRgbString();if(i||Xe.alpha===1?sc.css("background-color",ms):(sc.css("background-color","transparent"),sc.css("filter",Xe.toFilter())),Xt.showAlpha){var Ea=Xe.toRgb();Ea.a=0;var ka=pt(Ea).toRgbString(),bl="linear-gradient(left, "+ka+", "+io+")";n?lu.css("filter",pt(ka).toFilter({gradientType:1},io)):(lu.css("background","-webkit-"+bl),lu.css("background","-moz-"+bl),lu.css("background","-ms-"+bl),lu.css("background","linear-gradient(to right, "+ka+", "+io+")"))}Je=Xe.toString($e)}Xt.showInput&&gs.val(Je),Xt.showPalette&&Fh(),Rh()}function Uh(){var Ue=ou,$e=iu;if(gl&&Oa)Np.hide(),Dp.hide(),Lp.hide();else{Np.show(),Dp.show(),Lp.show();var Xe=Ue*Cr,Je=dr-$e*dr;Xe=Math.max(-ro,Math.min(Cr-ro,Xe-ro)),Je=Math.max(-ro,Math.min(dr-ro,Je-ro)),Lp.css({top:Je+"px",left:Xe+"px"});var io=ds*ni;Np.css({left:io-fs/2+"px"});var ms=oo*To;Dp.css({top:ms-xa+"px"})}}function vl(Ue){var $e=Eo(),Xe="",Je=!!Pn||!pt.equals($e,ac);$e&&(Xe=$e.toString(lc),!Re&&ad($e)),Ip&&xr.val(Xe),Ue&&Je&&(jr.change($e),xr.trigger("change",[$e]))}function yl(){Re&&(Cr=Mp.width(),dr=Mp.height(),ro=Lp.height(),nd.width(),To=nd.height(),xa=Dp.height(),ni=jh.width(),fs=Np.width(),on||(un.css("position","absolute"),Xt.offset?un.offset(Xt.offset):un.offset(function(Ue,$e){var Xe=0,Je=Ue.outerWidth(),io=Ue.outerHeight(),ms=$e.outerHeight(),Ea=Ue[0].ownerDocument,ka=Ea.documentElement,bl=ka.clientWidth,fd=ka.clientHeight,t0=a(Ea).scrollLeft(),e0=a(Ea).scrollTop(),dd=bl+t0,Wh=fd+e0,zs=$e.offset();return zs.top+=ms,zs.left-=Math.min(zs.left,zs.left+Je>dd&&dd>Je?Math.abs(zs.left+Je-dd):0),zs.top-=Math.min(zs.top,zs.top+io>Wh&&Wh>io?Math.abs(io+ms-Xe):Xe),zs}(un,cu))),Uh(),Xt.showPalette&&Fh(),xr.trigger("reflow.spectrum"))}function $h(){Ta(),ed=!0,xr.attr("disabled",!0),cu.addClass("sp-disabled")}(function(){if(n&&un.find("*:not(input)").attr("unselectable","on"),sd(),id&&xr.after(ic).hide(),gl||rd.hide(),on)xr.after(un).hide();else{var Ue=Xt.appendTo==="parent"?xr.parent():a(Xt.appendTo);Ue.length!==1&&(Ue=a("body")),Ue.append(un)}function $e(Je){return Je.data&&Je.data.ignore?(ml(a(Je.target).closest(".sp-thumb-el").data("color")),cc()):(ml(a(Je.target).closest(".sp-thumb-el").data("color")),cc(),Xt.hideAfterPaletteSelect&&(vl(!0),Ta())),!1}Ih(),cu.bind("click.spectrum touchstart.spectrum",function(Je){ed||Vh(),Je.stopPropagation(),a(Je.target).is("input")||Je.preventDefault()}),(xr.is(":disabled")||Xt.disabled===!0)&&$h(),un.click(xo),gs.change(ud),gs.bind("paste",function(){setTimeout(ud,1)}),gs.keydown(function(Je){Je.keyCode==13&&ud()}),Dh.text(Xt.cancelText),Dh.bind("click.spectrum",function(Je){Je.stopPropagation(),Je.preventDefault(),zh(),Ta()}),rd.attr("title",Xt.clearText),rd.bind("click.spectrum",function(Je){Je.stopPropagation(),Je.preventDefault(),Oa=!0,cc(),on&&vl(!0)}),Nh.text(Xt.chooseText),Nh.bind("click.spectrum",function(Je){Je.stopPropagation(),Je.preventDefault(),n&&gs.is(":focus")&&gs.trigger("change"),gs.hasClass("sp-validation-error")||(vl(!0),Ta())}),od.text(Xt.showPaletteOnly?Xt.togglePaletteMoreText:Xt.togglePaletteLessText),od.bind("click.spectrum",function(Je){Je.stopPropagation(),Je.preventDefault(),Xt.showPaletteOnly=!Xt.showPaletteOnly,Xt.showPaletteOnly||on||un.css("left","-="+(Zy.outerWidth(!0)+5)),sd()}),Vo(jh,function(Je,io,ms){ds=Je/ni,Oa=!1,ms.shiftKey&&(ds=Math.round(10*ds)/10),cc()},ld,cd),Vo(nd,function(Je,io){oo=parseFloat(io/To),Oa=!1,Xt.showAlpha||(ds=1),cc()},ld,cd),Vo(Mp,function(Je,io,ms){if(ms.shiftKey){if(!Sa){var Ea=ou*Cr,ka=dr-iu*dr,bl=Math.abs(Je-Ea)>Math.abs(io-ka);Sa=bl?"x":"y"}}else Sa=null;var fd=!Sa||Sa==="y";(!Sa||Sa==="x")&&(ou=parseFloat(Je/Cr)),fd&&(iu=parseFloat((dr-io)/dr)),Oa=!1,Xt.showAlpha||(ds=1),cc()},ld,cd),uu?(ml(uu),uc(),lc=Xt.preferredFormat||pt(uu).getFormat(),ad(uu)):uc(),on&&pd();var Xe=n?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Mh.delegate(".sp-thumb-el",Xe,$e),Lh.delegate(".sp-thumb-el:nth-child(1)",Xe,{ignore:!0},$e)})();var Fp={show:pd,hide:Ta,toggle:Vh,reflow:yl,option:function(Ue,$e){return Ue===r?a.extend({},Xt):$e===r?Xt[Ue]:(Xt[Ue]=$e,Ue==="preferredFormat"&&(lc=Xt.preferredFormat),void sd())},enable:function(){ed=!1,xr.attr("disabled",!1),cu.removeClass("sp-disabled")},disable:$h,offset:function(Ue){Xt.offset=Ue,yl()},set:function(Ue){ml(Ue),vl()},get:Eo,destroy:function(){xr.show(),cu.unbind("click.spectrum touchstart.spectrum"),un.remove(),ic.remove(),e[Fp.id]=null},container:un};return Fp.id=e.push(Fp)-1,Fp}function uo(){}function xo(Ot){Ot.stopPropagation()}function So(Ot,Vt){var zt=Array.prototype.slice,te=zt.call(arguments,2);return function(){return Ot.apply(Vt,te.concat(zt.call(arguments)))}}function Vo(Ot,Vt,zt,te){Vt=Vt||function(){},zt=zt||function(){},te=te||function(){};var Ae=document,Xt=!1,on={},vn=0,fn=0,ei="ontouchstart"in window,jr={};function yn(Pn){Pn.stopPropagation&&Pn.stopPropagation(),Pn.preventDefault&&Pn.preventDefault(),Pn.returnValue=!1}function Re(Pn){if(Xt){if(n&&Ae.documentMode<9&&!Pn.button)return xn();var Cr=Pn&&Pn.touches&&Pn.touches[0],dr=Cr&&Cr.pageX||Pn.pageX,ro=Cr&&Cr.pageY||Pn.pageY,To=Math.max(0,Math.min(dr-on.left,fn)),ni=Math.max(0,Math.min(ro-on.top,vn));ei&&yn(Pn),Vt.apply(Ot,[To,ni,Pn])}}function xn(){Xt&&(a(Ae).unbind(jr),a(Ae.body).removeClass("sp-dragging"),setTimeout(function(){te.apply(Ot,arguments)},0)),Xt=!1}jr.selectstart=yn,jr.dragstart=yn,jr["touchmove mousemove"]=Re,jr["touchend mouseup"]=xn,a(Ot).bind("touchstart mousedown",function(Pn){var Cr=Pn.which?Pn.which==3:Pn.button==2;Cr||Xt||zt.apply(Ot,arguments)!==!1&&(Xt=!0,vn=a(Ot).height(),fn=a(Ot).width(),on=a(Ot).offset(),a(Ae).bind(jr),a(Ae.body).addClass("sp-dragging"),Re(Pn),yn(Pn))})}function Oo(){return a.fn.spectrum.inputTypeColorSupport()}function us(Ot,Vt,zt){Ot=nr(Ot,255),Vt=nr(Vt,255),zt=nr(zt,255);var te,Ae,Xt=ut(Ot,Vt,zt),on=Z(Ot,Vt,zt),vn=(Xt+on)/2;if(Xt==on)te=Ae=0;else{var fn=Xt-on;switch(Ae=vn>.5?fn/(2-Xt-on):fn/(Xt+on),Xt){case Ot:te=(Vt-zt)/fn+(Vt<zt?6:0);break;case Vt:te=(zt-Ot)/fn+2;break;case zt:te=(Ot-Vt)/fn+4}te/=6}return{h:te,s:Ae,l:vn}}function Bs(Ot,Vt,zt){Ot=nr(Ot,255),Vt=nr(Vt,255),zt=nr(zt,255);var te,Ae,Xt=ut(Ot,Vt,zt),on=Z(Ot,Vt,zt),vn=Xt,fn=Xt-on;if(Ae=Xt===0?0:fn/Xt,Xt==on)te=0;else{switch(Xt){case Ot:te=(Vt-zt)/fn+(Vt<zt?6:0);break;case Vt:te=(zt-Ot)/fn+2;break;case zt:te=(Ot-Vt)/fn+4}te/=6}return{h:te,s:Ae,v:vn}}function dl(Ot,Vt,zt,te){var Ae=[hl($(Ot).toString(16)),hl($(Vt).toString(16)),hl($(zt).toString(16))];return te&&Ae[0].charAt(0)==Ae[0].charAt(1)&&Ae[1].charAt(0)==Ae[1].charAt(1)&&Ae[2].charAt(0)==Ae[2].charAt(1)?Ae[0].charAt(0)+Ae[1].charAt(0)+Ae[2].charAt(0):Ae.join("")}function kh(Ot,Vt,zt,te){var Ae;return[hl((Ae=te,Math.round(255*parseFloat(Ae)).toString(16))),hl($(Ot).toString(16)),hl($(Vt).toString(16)),hl($(zt).toString(16))].join("")}function Iy(Ot,Vt){Vt=Vt===0?0:Vt||10;var zt=pt(Ot).toHsl();return zt.s-=Vt/100,zt.s=Pp(zt.s),pt(zt)}function Fy(Ot,Vt){Vt=Vt===0?0:Vt||10;var zt=pt(Ot).toHsl();return zt.s+=Vt/100,zt.s=Pp(zt.s),pt(zt)}function Ry(Ot){return pt(Ot).desaturate(100)}function Vy(Ot,Vt){Vt=Vt===0?0:Vt||10;var zt=pt(Ot).toHsl();return zt.l+=Vt/100,zt.l=Pp(zt.l),pt(zt)}function Hy(Ot,Vt){Vt=Vt===0?0:Vt||10;var zt=pt(Ot).toRgb();return zt.r=ut(0,Z(255,zt.r-$(255*(-Vt/100)))),zt.g=ut(0,Z(255,zt.g-$(255*(-Vt/100)))),zt.b=ut(0,Z(255,zt.b-$(255*(-Vt/100)))),pt(zt)}function By(Ot,Vt){Vt=Vt===0?0:Vt||10;var zt=pt(Ot).toHsl();return zt.l-=Vt/100,zt.l=Pp(zt.l),pt(zt)}function zy(Ot,Vt){var zt=pt(Ot).toHsl(),te=($(zt.h)+Vt)%360;return zt.h=te<0?360+te:te,pt(zt)}function Uy(Ot){var Vt=pt(Ot).toHsl();return Vt.h=(Vt.h+180)%360,pt(Vt)}function $y(Ot){var Vt=pt(Ot).toHsl(),zt=Vt.h;return[pt(Ot),pt({h:(zt+120)%360,s:Vt.s,l:Vt.l}),pt({h:(zt+240)%360,s:Vt.s,l:Vt.l})]}function Wy(Ot){var Vt=pt(Ot).toHsl(),zt=Vt.h;return[pt(Ot),pt({h:(zt+90)%360,s:Vt.s,l:Vt.l}),pt({h:(zt+180)%360,s:Vt.s,l:Vt.l}),pt({h:(zt+270)%360,s:Vt.s,l:Vt.l})]}function qy(Ot){var Vt=pt(Ot).toHsl(),zt=Vt.h;return[pt(Ot),pt({h:(zt+72)%360,s:Vt.s,l:Vt.l}),pt({h:(zt+216)%360,s:Vt.s,l:Vt.l})]}function Gy(Ot,Vt,zt){Vt=Vt||6,zt=zt||30;var te=pt(Ot).toHsl(),Ae=360/zt,Xt=[pt(Ot)];for(te.h=(te.h-(Ae*Vt>>1)+720)%360;--Vt;)te.h=(te.h+Ae)%360,Xt.push(pt(te));return Xt}function Ky(Ot,Vt){Vt=Vt||6;for(var zt=pt(Ot).toHsv(),te=zt.h,Ae=zt.s,Xt=zt.v,on=[],vn=1/Vt;Vt--;)on.push(pt({h:te,s:Ae,v:Xt})),Xt=(Xt+vn)%1;return on}function Ph(Ot){return Ot=parseFloat(Ot),(isNaN(Ot)||Ot<0||Ot>1)&&(Ot=1),Ot}function nr(Ot,Vt){(function(te){return typeof te=="string"&&te.indexOf(".")!=-1&&parseFloat(te)===1})(Ot)&&(Ot="100%");var zt=function(te){return typeof te=="string"&&te.indexOf("%")!=-1}(Ot);return Ot=Z(Vt,ut(0,parseFloat(Ot))),zt&&(Ot=parseInt(Ot*Vt,10)/100),A.abs(Ot-Vt)<1e-6?1:Ot%Vt/parseFloat(Vt)}function Pp(Ot){return Z(1,ut(0,Ot))}function ps(Ot){return parseInt(Ot,16)}function hl(Ot){return Ot.length==1?"0"+Ot:""+Ot}function ru(Ot){return Ot<=1&&(Ot=100*Ot+"%"),Ot}function Yy(Ot){return ps(Ot)/255}}(tt.default);var Kl=function(a){var r=a.getFormat()==="name"&&a.toName(),t=a.getAlpha()==1?a.toHexString():a.toRgbString();return r||t.replace(/ /g,"")};const Vc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return rp(r,a),r.prototype.template=function(){var t=this.ppfx;return`
      <div class="`.concat(this.holderClass(),`"></div>
      <div class="`).concat(t,`field-colorp">
        <div class="`).concat(t,`field-colorp-c" data-colorp-c>
          <div class="`).concat(t,`checker-bg"></div>
        </div>
      </div>
    `)},r.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},r.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},r.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},r.prototype.handleChange=function(t){t.stopPropagation();var e=t.target.value;(0,y.isUndefined)(e)||this.__onInputChange(e)},r.prototype.__onInputChange=function(t){var e=this.model,n=this.opts.onChange,i=t,l=this.getColorEl();if(l){l.spectrum("set",i);var f=l.spectrum("get"),d=i&&Kl(f);d&&(i=d)}n?n(i):e.set({value:i},{fromInput:1})},r.prototype.setValue=function(t,e){e===void 0&&(e={});var n=this.model,i=(0,y.isUndefined)(e.def)?n.get("defaults"):e.def,l=(0,y.isUndefined)(t)?(0,y.isUndefined)(i)?"":i:t,f=this.getInputEl(),d=this.getColorEl(),m=l!="none"?l:"";f.value=l,d.get(0).style.backgroundColor=m,(e.fromTarget||e.fromInput&&!e.avoidStore)&&(d.spectrum("set",m),this.noneColor=l=="none",this.movedColor=m)},r.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,n=e.em,i=e.model,l=e.opts,f=this.ppfx,d=l.onChange,m=(0,tt.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),g=m.get(0).style,x=n&&n.config?n.config.el:"",A=n&&n.getConfig&&n.getConfig().colorPicker||{};this.movedColor="";var $,Z=!1;this.$el.find("[data-colorp-c]").append(m);var ut=function(yt,pt){pt===void 0&&(pt=!0),d?d(yt,!pt):(pt&&i.setValueFromInput(0,!1),i.setValueFromInput(yt,pt))};m.spectrum(sl(sl(sl({color:i.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color"),appendTo:x||"body",maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"⨯",palette:[]},A),i.get("colorPicker")||{}),{move:function(yt){var pt=Kl(yt);t.movedColor=pt,g.backgroundColor=pt,ut(pt,!1)},change:function(yt){Z=!0;var pt=Kl(yt);g.backgroundColor=pt,ut(pt),t.noneColor=!1},show:function(yt){Z=!1,t.movedColor="",$=d?i.getValue({noDefault:!0}):Kl(yt)},hide:function(){Z||!$&&!d||(t.noneColor&&($=""),g.backgroundColor=$,m.spectrum("set",$),ut($,!1))}})),n&&n.on&&this.listenTo(n,"component:selected",function(){t.movedColor&&ut(t.movedColor),Z=!0,t.movedColor="",m.spectrum("hide")}),this.colorEl=m}return this.colorEl},r.prototype.render=function(){return Gl.prototype.render.call(this),this.getColorEl(),this},r}(Gl);var Hc=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const op=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Hc(r,a),r.prototype.templateInput=function(){return""},r.prototype.getInputEl=function(){if(!this.input){var t=this.model,e=this.getModelValue(),n=new Vc({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();n.setValue(e,{fromTarget:1}),this.input=n.el}return this.input},r}(Li);var xf=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Bc=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return xf(r,a),r.prototype.templateInput=function(){return""},r.prototype.onChange=function(){this.handleClick()},r.prototype.handleClick=function(){var t=this.model,e=this.em,n=t.get("command");n&&((0,y.isString)(n)?e.Commands.run(n):n(e.Editor,t))},r.prototype.renderLabel=function(){this.model.get("label")&&Li.prototype.renderLabel.apply(this)},r.prototype.getInputEl=function(){var t=this.model,e=this.ppfx,n=t.props(),i=n.labelButton,l=n.text,f=n.full,d=i||l,m="".concat(e,"btn");return'<button type="button" class="'.concat(m,"-prim").concat(f?" ".concat(m,"--full"):"",'">').concat(d,"</button>")},r}(Li);const ma=Bc;Bc.prototype.eventCapture=["click button"];var ip=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),va=function(){return va=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},va.apply(this,arguments)},sp="trait",Sf="".concat(sp,":"),Of="".concat(Sf,"custom"),Fn={text:Li,number:Cf,select:Qu,checkbox:il,color:op,button:ma},Tf=function(a){function r(t){var e=a.call(this,t,"TraitManager",yf)||this;e.TraitsView=Zu,e.events={all:sp,custom:Of};var n=e.config,i=new S.Hn;e.model=i;var l=n.pStylePrefix;e.types=va({},Fn),l&&(n.stylePrefix="".concat(l).concat(n.stylePrefix));var f=(0,y.debounce)(function(){return e.__upSel()},0);i.listenTo(t,"component:toggled",f);var d=(0,y.debounce)(function(){return e.__onUp()},0);return i.listenTo(t,"trait:update",d),e}return ip(r,a),r.prototype.__upSel=function(){this.select(this.em.getSelected())},r.prototype.__onUp=function(){this.select(this.getSelected())},r.prototype.select=function(t){var e=t?t.getTraits():[];this.model.set({component:t,traits:e}),this.__trgCustom()},r.prototype.getSelected=function(){return this.model.get("component")||null},r.prototype.getCurrent=function(){return this.model.get("traits")||[]},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.getTraitsViewer=function(){return this.view},r.prototype.addType=function(t,e){var n=this.getType("text");this.types[t]=n.extend(e)},r.prototype.getType=function(t){return this.getTypes()[t]},r.prototype.getTypes=function(){return this.types},r.prototype.render=function(){var t=this.view,e=this.em,n=this.getConfig(),i=t&&t.el;return t=new Zu({el:i,collection:[],editor:e,config:n},this.getTypes()),this.view=t,t.el},r.prototype.destroy=function(){this.model.stopListening(),this.model.clear()},r}(Dt);const zc=Tf,al={stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};var Xo=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Yl=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.items=[],e.opt=t;var n=t.config||{};e.config=n,e.parentView=t.parentView;var i=n.stylePrefix||"",l=n.pStylePrefix||"",f=e.collection;e.listenTo(f,"add",e.addTo),e.listenTo(f,"reset resetNavigator",e.render),e.listenTo(f,"remove",e.removeChildren),e.className="".concat(i,"layers");var d=n.em;if(n.sortable&&!e.opt.sorter){var m=d.Utils;e.opt.sorter=new m.Sorter({container:n.sortContainer||e.el,containerSel:".".concat(e.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,onEndMove:function(g,x,A){var $=x.getSourceModel();d.setSelected($,{forceChange:1}),d.trigger("".concat(Or,":end"),A)},avoidSelectOnEnd:1,nested:1,ppfx:l,pfx:i})}return e.$el.data("collection",f),t.parent&&e.$el.data("model",t.parent),e}return Xo(r,a),r.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var i=this,l=i.parentView,f=i.opt,d=i.config,m=f.ItemView,g=f.opened,x=f.module,A=e||null,$=new m({ItemView:m,level:f.level,model:t,parentView:l,config:d,sorter:f.sorter,opened:g,module:x}),Z=$.render().el;if(A)A.appendChild(Z);else if(n!==void 0){var ut="before";this.$el.children().length==n&&(n--,ut="after"),n<0?this.$el.append(Z):this.$el.children().eq(n)[ut](Z)}else this.$el.append(Z);return this.items.push($),Z},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S.G7.prototype.remove.apply(this,t),this.items.map(function(n){return n.remove()}),this},r.prototype.render=function(){var t=this,e=document.createDocumentFragment(),n=this.el;return n.innerHTML="",this.collection.each(function(i){return t.addToCollection(i,e)}),n.appendChild(e),n.className=this.className,this},r}(S.G7);const Uc=Yl;var ap=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),$c="contentEditable",lp=function(a){function r(t){var e=a.call(this,t)||this;(0,y.bindAll)(e,"__render"),e.opt=t,e.module=t.module,e.config=t.config||{},e.sorter=t.sorter||"",e.parentView=t.parentView;var n=e,i=n.model,l=n.pfx,f=n.ppfx,d=i.get("type")||"default";return e.className="".concat(l,"layer ").concat(l,"layer__t-").concat(d," no-select ").concat(f,"two-color"),e.inputNameCls="".concat(f,"layer-name"),e.clsTitleC="".concat(l,"layer-title-c"),e.clsTitle="".concat(l,"layer-title"),e.clsCaret="".concat(l,"layer-caret"),e.clsCount="".concat(l,"layer-count"),e.clsMove="".concat(l,"layer-move"),e.clsChildren="".concat(l,"layer-children"),e.clsNoChild="".concat(l,"layer-no-chld"),e.clsEdit="".concat(e.inputNameCls,"--edit"),e.clsNoEdit="".concat(e.inputNameCls,"--no-edit"),e.initComponent(),e}return ap(r,a),r.prototype.events=function(){return{"mousedown [data-toggle-move]":"startSort","touchstart [data-toggle-move]":"startSort","click [data-toggle-visible]":"toggleVisibility","click [data-toggle-open]":"toggleOpening","click [data-toggle-select]":"handleSelect","mouseover [data-toggle-select]":"handleHover","mouseout [data-toggle-select]":"handleHoverOut","dblclick [data-name]":"handleEdit","keydown [data-name]":"handleEditKey","focusout [data-name]":"handleEditEnd"}},r.prototype.template=function(t){var e=this,n=e.pfx,i=e.ppfx,l=e.config,f=e.clsNoEdit,d=e.module,m=e.opt,g=e.em,x=l.hidable,A=d.getComponents(t).length,$=A?"":this.clsNoChild,Z="".concat(this.clsTitle," ").concat($),ut="".concat(this.clsTitleC," ").concat(i,"one-bg"),yt="".concat(this.inputNameCls," ").concat(f," ").concat(i,"no-app"),pt=m.level+1,Bt="".concat(30+10*pt,"px"),Zt=t.getName(),Pe=t.getIcon(),Le="".concat(n,"layer"),Ke=(g==null?void 0:g.getConfig()).icons,en=Ke.move,gn=Ke.eye,Rn=Ke.eyeOff,uo=Ke.chevron;return`
      `.concat(x?'<i class="'.concat(n,`layer-vis" data-toggle-visible>
            <i class="`).concat(n,'layer-vis-on">').concat(gn,`</i>
            <i class="`).concat(n,'layer-vis-off">').concat(Rn,`</i>
          </i>`):"",`
      <div class="`).concat(ut,`">
        <div class="`).concat(Z,'" style="padding-left: ').concat(Bt,`" data-toggle-select>
          <div class="`).concat(n,'layer-title-inn" title="').concat(Zt,`">
            <i class="`).concat(this.clsCaret,'" data-toggle-open>').concat(uo,`</i>
            `).concat(Pe?'<span class="'.concat(Le,'__icon">').concat(Pe,"</span>"):"",`
            <span class="`).concat(yt,'" data-name>').concat(Zt,`</span>
          </div>
        </div>
      </div>
      <div class="`).concat(this.clsCount,'" data-count>').concat(A||"",`</div>
      <div class="`).concat(this.clsMove,'" data-toggle-move>').concat(en||"",`</div>
      <div class="`).concat(this.clsChildren,'"></div>')},Object.defineProperty(r.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),r.prototype.initComponent=function(){var t=this,e=this.model,n=this.config.onInit,i=e.components();this.listenTo(i,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(l){return t.listenTo(e,l[0],l[1])}),this.$el.data("model",e),this.$el.data("collection",i),e.viewLayer=this,n.bind(this)({component:e,render:this.__render,listenTo:this.listenTo})},r.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},r.prototype.getVisibilityEl=function(){return this.eyeEl||(this.eyeEl=this.$el.children(".".concat(this.pfx,"layer-vis"))),this.eyeEl},r.prototype.updateVisibility=function(){var t=this,e=t.pfx,n=t.model,i=t.module,l="".concat(e,"layer-hidden"),f=i.isVisible(n)?"removeClass":"addClass";this.$el[f](l),this.getVisibilityEl()[f]("".concat(e,"layer-off"))},r.prototype.toggleVisibility=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setVisible(n,!e.isVisible(n))},r.prototype.handleEdit=function(t){t==null||t.stopPropagation();var e=this,n=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName();d[$c]="true",d.focus(),document.execCommand("selectAll",!1),n.setEditing(!0),i.find(".".concat(this.inputNameCls)).removeClass(l).addClass(f)},r.prototype.handleEditKey=function(t){t.stopPropagation(),((0,N.isEscKey)(t)||(0,N.isEnterKey)(t))&&this.handleEditEnd(t)},r.prototype.handleEditEnd=function(t){t==null||t.stopPropagation();var e=this,n=e.em,i=e.$el,l=e.clsNoEdit,f=e.clsEdit,d=this.getInputName(),m=d.textContent;d.scrollLeft=0,d[$c]="false",this.setName(m,{component:this.model,propName:"custom-name"}),n.setEditing(!1),i.find(".".concat(this.inputNameCls)).addClass(l).removeClass(f),this.updateName()},r.prototype.setName=function(t,e){var n=e.propName;this.model.set(n,t)},r.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},r.prototype.updateOpening=function(){var t=this,e=t.$el,n=t.model,i=t.pfx,l="open",f="".concat(i,"layer-open"),d=this.getCaret();this.module.isOpen(n)?(e.addClass(l),d.addClass(f)):(e.removeClass(l),d.removeClass(f))},r.prototype.toggleOpening=function(t){var e=this.model,n=this.module;t==null||t.stopImmediatePropagation(),e.get("components").length&&n.setOpen(e,!n.isOpen(e))},r.prototype.handleSelect=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{selected:!0},{event:t})},r.prototype.handleHover=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!0})},r.prototype.handleHoverOut=function(t){t==null||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!1})},r.prototype.startSort=function(t){t.stopPropagation();var e=this.em,n=this.sorter;t.button&&t.button!==0||n&&(n.onStart=function(i){return e.trigger("".concat(Or,":start"),i)},n.onMoveClb=function(i){return e.trigger(Or,i)},n.startSort(t.target))},r.prototype.updateStatus=function(){Hn.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},r.prototype.checkChildren=function(){var t=this,e=t.model,n=t.clsNoChild,i=t.$el,l=t.module,f=l.getComponents(e).length,d=i.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),m=this.cnt;m||(m=i.children("[data-count]").get(0),this.cnt=m),d[f?"removeClass":"addClass"](n),m&&(m.innerHTML=f||""),!f&&l.setOpen(e,!1)},r.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},r.prototype.setRoot=function(t){t=(0,y.isString)(t)?this.em.getWrapper().find(t)[0]:t;var e=(0,N.getModel)(t,0);e&&(this.stopListening(),this.model=e,this.initComponent(),this._rendered&&this.render())},r.prototype.updateLayerable=function(){(this.parentView||this).render()},r.prototype.__clearItems=function(){var t;(t=this.items)===null||t===void 0||t.remove()},r.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S.G7.prototype.remove.apply(this,t),this.__clearItems(),this},r.prototype.render=function(){var t=this,e=t.model,n=t.config,i=t.pfx,l=t.ppfx,f=t.opt,d=t.sorter;this.__clearItems();var m=f.opened,g=f.module,x=f.ItemView,A=!g.__isLayerable(e),$=this.$el.empty(),Z=f.level+1;delete this.inputName,this.items=new Uc({ItemView:x,collection:e.get("components"),config:n,sorter:d,opened:m,parentView:this,parent:e,level:Z,module:g});var ut=this.items.render().$el;return n.showWrapper||Z!==1?($.html(this.template(e)),$.find(".".concat(this.clsChildren)).append(ut)):$.append(ut),e.get("draggable")&&n.sortable||$.children(".".concat(this.clsMove)).remove(),!g.isVisible(e)&&(this.className+=" ".concat(i,"hide")),A&&(this.className+=" ".concat(l,"hidden")),$.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},r.prototype.__render=function(){var t=this,e=t.model,n=t.config,i={component:e,el:t.el};n.onRender.bind(this)(i),this.em.trigger("layer:render",i)},r}(S.G7);const cp=lp;var up=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wc=function(){return Wc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Wc.apply(this,arguments)},Jl="layer",Zl="".concat(Jl,":"),wn="".concat(Zl,"root"),qc="".concat(Zl,"component"),Ef="".concat(Zl,"custom"),ya={all:Jl,root:wn,component:qc,custom:Ef},Gc={mediaText:""},Xl=["open","status","locked","custom-name","components","classes"].map(function(a){return"component:update:".concat(a)}).join(" "),kf=function(a){function r(t){var e=a.call(this,t,"LayerManager",al)||this;return e.events=ya,(0,y.bindAll)(e,"componentChanged","__onRootChange","__onComponent"),e.model=new _t(e,{opened:{}}),e.config.stylePrefix=e.config.pStylePrefix,e}return up(r,a),r.prototype.onLoad=function(){var t=this,e=this,n=e.em,i=e.config,l=e.model;l.listenTo(n,"component:selected",this.componentChanged),l.on("change:root",this.__onRootChange),l.listenTo(n,Xl,this.__onComponent),this.componentChanged(),l.listenToOnce(n,"load",function(){t.setRoot(i.root),t.__appendTo()})},r.prototype.setRoot=function(t){var e=this.em.getWrapper(),n=(0,N.isComponent)(t)?t:e;return t&&(0,y.isString)(t)&&(0,N.hasWin)()&&(n=e.find(t)[0]||e),this.model.set("root",n),n},r.prototype.getRoot=function(){return this.model.get("root")},r.prototype.getComponents=function(t){var e=this;return t.components().filter(function(n){return e.__isLayerable(n)})},r.prototype.setOpen=function(t,e){t.set("open",e)},r.prototype.isOpen=function(t){return!!t.get("open")},r.prototype.setVisible=function(t,e){var n="__prev-display",i=t.getStyle(Gc),l=i.display;if(e){var f=t.get(n);delete i.display,f&&(i.display=f,t.unset(n))}else l&&t.set(n,l),i.display="none";t.setStyle(i,Gc),this.updateLayer(t),this.em.trigger("component:toggled")},r.prototype.isVisible=function(t){return(e=t.getStyle(Gc))===void 0&&(e={}),(e.display||"").trim().indexOf("none")!==0;var e},r.prototype.setLocked=function(t,e){t.set("locked",e)},r.prototype.isLocked=function(t){return t.get("locked")},r.prototype.setName=function(t,e){t.set("custom-name",e)},r.prototype.getName=function(t){return t.getName()},r.prototype.getLayerData=function(t){var e=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:e==="selected",hovered:e==="hovered",visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},r.prototype.setLayerData=function(t,e,n){var i;n===void 0&&(n={});var l=this.em,f=this.config,d=e.open,m=e.selected,g=e.hovered,x=e.visible,A=e.locked,$=e.name,Z=Wc({fromLayers:!0},n);if((0,N.isDef)(d)&&this.setOpen(t,d),(0,N.isDef)(m))if(m){l.setSelected(t,Z);var ut=f.scrollCanvas;ut&&((i=t.views)===null||i===void 0||i.forEach(function(yt){return yt.scrollIntoView(ut)}))}else l.removeSelected(t,Z);(0,N.isDef)(g)&&f.showHover&&(g?l.setHovered(t,Z):l.setHovered(null,Z)),(0,N.isDef)(x)&&x!==this.isVisible(t)&&this.setVisible(t,x),(0,N.isDef)(A)&&this.setLocked(t,A),(0,N.isDef)($)&&this.setName(t,$)},r.prototype.componentChanged=function(t,e){var n;if(e===void 0&&(e={}),!e.fromLayers){var i=this.em,l=this.config.scrollLayers,f=this.model.get("opened"),d=i.getSelected(),m=d==null?void 0:d.parent();for(var g in f)f[g].set("open",!1),delete f[g];for(;m;)m.set("open",!0),f[m.cid]=m,m=m.parent();if(d&&l){var x=(n=d.viewLayer)===null||n===void 0?void 0:n.el;x==null||x.scrollIntoView(l)}}},r.prototype.getAll=function(){return this.view},r.prototype.render=function(){var t,e,n=this.config,i=this.model,l=cp.extend(n.extend);return this.view=new l({el:(t=this.view)===null||t===void 0?void 0:t.el,ItemView:l,level:0,config:n,opened:i.get("opened"),model:this.getRoot(),module:this}),(e=this.view)===null||e===void 0?void 0:e.render().el},r.prototype.destroy=function(){var t;(t=this.view)===null||t===void 0||t.remove()},r.prototype.__onRootChange=function(){var t,e=this.getRoot();(t=this.view)===null||t===void 0||t.setRoot(e),this.em.trigger(wn,e)},r.prototype.__onComponent=function(t){this.updateLayer(t)},r.prototype.__isLayerable=function(t){var e=t.get("tagName");return(!this.config.hideTextnode||!t.is("textnode")&&e!=="br")&&t.get("layerable")},r.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,{container:t.container,root:this.getRoot()})},r.prototype.updateLayer=function(t,e){this.em.trigger(qc,t,e)},r}(Dt);const Xn=kf,Pf={assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""};var Af=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),pp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Af(r,a),r.getDefaults=function(){return(0,y.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{type:"",src:""}},r.prototype.getType=function(){return this.get("type")},r.prototype.getSrc=function(){return this.get("src")},r.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},r.prototype.getExtension=function(){return this.getFilename().split(".").pop()},r}(S.Hn);const ba=pp;pp.prototype.idAttribute="src";var o=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),s=function(){return s=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},s.apply(this,arguments)};const u=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return o(r,a),r.prototype.defaults=function(){return s(s({},ba.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},r}(ba);var c=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),p=function(a){function r(t){var e=a.call(this,t)||this;e.options=t,e.collection=t.collection;var n=t.config||{};e.config=n,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.em=n.em,e.className=e.pfx+"asset",e.listenTo(e.model,"destroy remove",e.remove),e.model.view=e;var i=e.init&&e.init.bind(e);return i&&i(t),e}return c(r,a),r.prototype.__getBhv=function(){var t=this.em,e=t==null?void 0:t.Assets;return(e==null?void 0:e.__getBehaviour())||{}},r.prototype.template=function(t,e){var n=this.pfx;return`
      <div class="`.concat(n,`preview-cont">
        `).concat(this.getPreview(),`
      </div>
      <div class="`).concat(n,`meta">
        `).concat(this.getInfo(),`
      </div>
      <div class="`).concat(n,`close" data-toggle="asset-remove">
        &Cross;
      </div>
    `)},r.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,y.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},r.prototype.getPreview=function(){return""},r.prototype.getInfo=function(){return""},r.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},r}(S.G7);const h=p;var w=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),C=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},E=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return w(r,a),r.prototype.getPreview=function(){var t=this,e=t.pfx,n=t.ppfx,i=t.model.get("src");return K(ot||(ot=C([`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `],[`
      <div class="`,`preview" style="background-image: url('`,`');"></div>
      <div class="`,"preview-bg ",`checker-bg"></div>
    `])),e,i,e,n)},r.prototype.getInfo=function(){var t=this.pfx,e=this.model,n=e.get("name"),i=e.get("width"),l=e.get("height"),f=e.get("unitDim"),d=i&&l?"".concat(i,"x").concat(l).concat(f):"";return n=n||e.getFilename(),K(it||(it=C([`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `],[`
      <div class="`,'name">',`</div>
      <div class="`,'dimensions">',`</div>
    `])),t,n,t,d)},r.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},r.prototype.onClick=function(){var t=this.model,e=this.pfx,n=this.__getBhv().select,i=this.config.onClick,l=this.collection;l.trigger("deselectAll"),this.$el.addClass(e+"highlight"),(0,y.isFunction)(n)?n(t,!1):(0,y.isFunction)(i)?i(t):this.updateTarget(l.target)},r.prototype.onDblClick=function(){var t=this.em,e=this.model,n=this.__getBhv().select,i=this.config.onDblClick,l=this.collection,f=l.target,d=l.onSelect;(0,y.isFunction)(n)?n(e,!0):(0,y.isFunction)(i)?i(e):(this.updateTarget(f),t==null||t.Modal.close()),(0,y.isFunction)(d)&&d(e)},r.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},r}(h);const j=E;var ot,it;E.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var Et=function(){return Et=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Et.apply(this,arguments)},kt={types:[],initialize:function(a,r){var t=this;r===void 0&&(r={});var e=r.em;this.em=e,this.opts=r,this.model=function(i,l){var f,d,m;if(i===void 0&&(i={}),l===void 0&&(l={}),i&&i.type){var g=t.getBaseType();f=(m=t.getType(i.type))?m.model:g.model,d=m?m.view:g.view}else{var x=t.recognizeType(i);f=(m=x.type).model,d=m.view,i=x.attributes}var A=new f(i,Et(Et({},l),{em:e}));return A.typeView=d,A};var n=this.init&&this.init.bind(this);n&&n()},recognizeType:function(a){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t],n=e.isType(a);if(n=typeof n=="boolean"&&n?{type:e.id}:n)return{type:e,attributes:n}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var r=this.getTypes(),t=0;t<r.length;t++){var e=r[t];if(e.id===a)return e}},addType:function(a,r){var t=this.getType(a),e=this.getBaseType(),n=t?t.model:e.model,i=t?t.view:e.view,l=r.model,f=r.view,d=r.isType;l=l instanceof S.Hn||(0,y.isFunction)(l)?l:n.extend(l||{}),f=f instanceof S.G7||(0,y.isFunction)(f)?f:i.extend(f||{}),!this.extendViewApi||r.model||r.view||(f=f.extend(r)),t?(t.model=l,t.view=f,t.isType=d||t.isType):(r.id=a,r.model=l,r.view=f,r.isType=d||function(m){if(m&&m.type==a)return!0},this.getTypes().unshift(r))}};const Ft=kt;var Qt=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),se=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Qt(r,a),r}(S.FE.extend(Ft));const be=se;se.prototype.types=[{id:"image",model:u,view:j,isType:function(a){return typeof a=="string"?{type:"image",src:a}:a}}];var Te=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ge=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t,e.config=t.config,e.pfx=e.config.stylePrefix||"",e.ppfx=e.config.pStylePrefix||"",e.em=e.config.em;var n=e.collection;return e.listenTo(n,"reset",e.renderAssets),e.listenTo(n,"add",e.addToAsset),e.listenTo(n,"remove",e.removedAsset),e.listenTo(n,"deselectAll",e.deselectAll),e}return Te(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,i=t.em,l="";return this.config.showUrlInput&&(l=`
          <form class="`.concat(e,`add-asset">
            <div class="`).concat(n,"field ").concat(e,`add-field">
              <input placeholder="`).concat(i==null?void 0:i.t("assetManager.inputPlh"),`"/>
            </div>
            <button class="`).concat(n,'btn-prim">').concat(i==null?void 0:i.t("assetManager.addButton"),`</button>
            <div style="clear:both"></div>
          </form>
      `)),`
    <div class="`.concat(e,`assets-cont">
      <div class="`).concat(e,`assets-header">
        `).concat(l,`
      </div>
      <div class="`).concat(e,`assets" data-el="assets"></div>
      <div style="clear:both"></div>
    </div>
    `)},r.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim(),i=this.config.handleAdd;if(n){e.value="";var l=this.getAssetsEl();l&&(l.scrollTop=0),i?i.bind(this)(n):this.options.globalCollection.add(n,{at:0})}},r.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},r.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},r.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},r.prototype.addToAsset=function(t){this.collection.length==1&&this.toggleNoAssets(!0),this.addAsset(t)},r.prototype.addAsset=function(t,e){e===void 0&&(e=null);var n=e,i=this.collection,l=this.config,f=new t.typeView({model:t,collection:i,config:l}).render().el;if(n)n.appendChild(f);else{var d=this.getAssetsEl();d&&d.insertBefore(f,d.firstChild)}return f},r.prototype.toggleNoAssets=function(t){t===void 0&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},r.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},r.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(i){return t.addAsset(i,e)}),n.append(e)},r.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},r}(S.G7);const De=ge;ge.prototype.events={submit:"handleSubmit"};var Me=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Be=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},Tn=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;e.options=t;var n=t.config||{};e.module=t.module,e.config=n,e.em=e.config.em,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.target=e.options.globalCollection||{},e.uploadId=e.pfx+"uploadFile",e.disabled=n.disableUpload!==void 0?n.disableUpload:!n.upload&&!n.embedAsBase64,e.multiUpload=n.multiUpload===void 0||n.multiUpload;var i=n.uploadFile;return i?e.uploadFile=i.bind(e):!n.upload&&n.embedAsBase64&&(e.uploadFile=r.embedAsBase64),e.delegateEvents(),e}return Me(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.title,i=t.uploadId,l=t.disabled,f=t.multiUpload;return K(Qr||(Qr=Be([`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `],[`
      <form>
        <div id="`,'title">',`</div>
        <input
          data-input
          type="file"
          id="`,`"
          name="file"
          accept="*/*"
          `,`
          `,`
        />
        <div style="clear:both;"></div>
      </form>
    `])),e,n,i,l?"disabled":"",f?"multiple":"")},r.prototype.events=function(){return{"change [data-input]":"uploadFile"}},r.prototype.onUploadStart=function(){var t=this.module;t&&t.__propEv("asset:upload:start")},r.prototype.onUploadEnd=function(t){var e=this.$el,n=this.module;n&&n.__propEv("asset:upload:end",t);var i=e.find("input");i&&i.val("")},r.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv("asset:upload:error",t)},r.prototype.onUploadResponse=function(t,e){var n,i=this,l=i.module,f=i.config,d=i.target;try{n=typeof t=="string"?JSON.parse(t):t}catch{n=t}l&&l.__propEv("asset:upload:response",n),f.autoAdd&&d&&d.add(n.data,{at:0}),this.onUploadEnd(t),e==null||e(n)},r.prototype.uploadFile=function(t,e){var n=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l=this.config,f=l.beforeUpload;if((f&&f(i))!==!1){var d=new FormData,m=l.params,g=l.customFetch;for(var x in m)d.append(x,m[x]);if(this.multiUpload)for(var A=0;A<i.length;A++)d.append("".concat(l.uploadName,"[]"),i[A]);else i.length&&d.append(l.uploadName,i[0]);this.target;var $=l.upload,Z=l.headers,ut="X-Requested-With";if(Z[ut]===void 0&&(Z[ut]="XMLHttpRequest"),$){this.onUploadStart();var yt={method:"post",credentials:l.credentials||"include",headers:Z,body:d};return(g?g($,yt):Wu($,yt).then(function(pt){return(pt.status/200|0)==1?pt.text():pt.text().then(function(Bt){return Promise.reject(Bt)})})).then(function(pt){return n.onUploadResponse(pt,e)}).catch(function(pt){return n.onUploadError(pt)})}}},r.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var e=this.uploadForm;"draggable"in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return e.className="",!1},this.uploadForm.ondrop=function(n){e.className="",n.preventDefault(),t.uploadFile(n)})}},r.prototype.initDropzone=function(t){var e=this,n=0,i=this.config,l=t.model,f=t.el,d=l.Editor,m=l.Canvas.getBody(),g=this.ppfx,x="".concat(g,"dropzone-active"),A="".concat(g,"dropzone"),$=function(){f.className=f.className.replace(x,"").trim(),n=0},Z=function(){return n||(f.className+=" ".concat(x),n=1),!1},ut=function(){return $(),!1},yt=function(pt){if($(),pt.preventDefault(),pt.stopPropagation(),e.uploadFile(pt),i.openAssetsOnDrop&&d){var Bt=d.getSelected();d.runCommand("open-assets",{target:Bt,onSelect:function(){d.Modal.close(),d.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(A,'">').concat(i.dropzoneContent,"</div>")),$(),"draggable"in f&&[f,m].forEach(function(pt){pt.ondragover=Z,pt.ondragleave=ut,pt.ondrop=yt})},r.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,i=t.em;return e.html(this.template({title:i&&i.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:n})),this.initDrop(),e.attr("class",n+"file-uploader"),this},r.embedAsBase64=function(t,e){var n=this,i=t.dataTransfer?t.dataTransfer.files:t.target.files,l={data:[]};if(FileReader){for(var f=[],d=/^(.+)\/(.+)$/,m=function(A){var $=new Promise(function(Z,ut){var yt=new FileReader;yt.addEventListener("load",function(pt){var Bt,Zt=A.name,Pe=d.exec(A.type);if((Bt=Pe?Pe[1]:A.type)==="image"){var Le={src:yt.result,name:Zt,type:Bt,height:0,width:0},Ke=new Image;Ke.addEventListener("error",function(en){ut(en)}),Ke.addEventListener("load",function(){Le.height=Ke.height,Le.width=Ke.width,Z(Le)}),Ke.src=Le.src}else Z(Bt?{src:yt.result,name:Zt,type:Bt}:yt.result)}),yt.addEventListener("error",function(pt){ut(pt)}),yt.addEventListener("abort",function(pt){ut("Aborted")}),yt.readAsDataURL(A)});f.push($)},g=0,x=i;g<x.length;g++)m(x[g]);return Promise.all(f).then(function(A){l.data=A,n.onUploadResponse(l,e)},function(A){n.onUploadError(A)})}this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))},r}(S.G7);const En=Tn;var Qr,Dn=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),kr=function(){return kr=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},kr.apply(this,arguments)},to=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Bn="asset",Qn="".concat(Bn,":"),Ur="".concat(Qn,"select"),ar="".concat(Qn,"update"),tr="".concat(Qn,"add"),er="".concat(Qn,"remove"),eo="".concat(er,":before"),ls="".concat(Qn,"custom"),Qo="".concat(Qn,"open"),Pr="".concat(Qn,"close"),zn="".concat(Qn,"upload"),Kc="".concat(zn,":start"),Di="".concat(zn,":end"),Is="".concat(zn,":error"),Fs="".concat(zn,":response"),fr="open-assets",wa={all:Bn,select:Ur,update:ar,add:tr,remove:er,removeBefore:eo,custom:ls,open:Qo,close:Pr,uploadStart:Kc,uploadEnd:Di,uploadError:Is,uploadResponse:Fs},Yc=function(a){function r(t){var e=a.call(this,t,"AssetManager",new be([],t),wa,Pf)||this;e.storageKey="assets",e.Asset=ba,e.Assets=be;var n=e,i=n.all,l=n.config;e.assetsVis=new be([]);var f=l.pStylePrefix;return f&&(l.stylePrefix="".concat(f).concat(l.stylePrefix)),i.on("add",function(d){return e.getAllVisible().add(d)}),i.on("remove",function(d){return e.getAllVisible().remove(d)}),e.__onAllEvent=(0,y.debounce)(function(){return e.__trgCustom()},0),e}return Dn(r,a),r.prototype.__propEv=function(t){for(var e,n,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];(e=this.em).trigger.apply(e,to([t],i,!1)),(n=this.getAll()).trigger.apply(n,to([t],i,!1))},r.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;(t.container||e.open)&&this.em.trigger(this.events.custom,this.__customData())},r.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:e.types||[],container:e.container,close:function(){return t.close()},remove:function(n,i){return t.remove(n,i)},select:function(n,i){var l=t.add(n);(0,y.isFunction)(e.select)&&e.select(l,i)},options:e.options||{}}},r.prototype.open=function(t){t===void 0&&(t={}),this.em.Commands.run(fr,kr({types:["image"],select:function(){}},t))},r.prototype.close=function(){this.em.Commands.stop(fr)},r.prototype.isOpen=function(){var t=this.em.Commands;return!!(t!=null&&t.isActive(fr))},r.prototype.add=function(t,e){return e===void 0&&(e={}),e.at===void 0&&(e.at=0),this.all.add(t,e)},r.prototype.get=function(t){return this.all.where({src:t})[0]||null},r.prototype.getAll=function(){return this.all},r.prototype.getAllVisible=function(){return this.assetsVis},r.prototype.remove=function(t,e){return this.__remove(t,e)},r.prototype.store=function(){return this.getProjectData()},r.prototype.load=function(t){return this.loadProjectData(t)},r.prototype.getContainer=function(){var t;return this.__getBehaviour().container||((t=this.am)===null||t===void 0?void 0:t.el)},r.prototype.getAssetsEl=function(){var t;return(t=this.am)===null||t===void 0?void 0:t.el.querySelector("[data-el=assets]")},r.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var n=this.__viewParams();n.fu=this.FileUploader(),this.am=new De(kr({},n)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},r.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},r.prototype.addType=function(t,e){this.getAll().addType(t,e)},r.prototype.getType=function(t){return this.getAll().getType(t)},r.prototype.getTypes=function(){return this.getAll().getTypes()},r.prototype.AssetsView=function(){return this.am},r.prototype.FileUploader=function(){return this.fu||(this.fu=new En(this.__viewParams())),this.fu},r.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this.em,n=this.events;e.on("run:".concat(fr),function(){return t.__propEv(n.open)}),e.on("stop:".concat(fr),function(){return t.__propEv(n.close)})},r.prototype.postRender=function(t){var e;this.config.dropzone&&((e=this.fu)===null||e===void 0||e.initDropzone(t))},r.prototype.setTarget=function(t){this.assetsVis.target=t},r.prototype.onSelect=function(t){this.assetsVis.onSelect=t},r.prototype.onClick=function(t){this.config.onClick=t},r.prototype.onDblClick=function(t){this.config.onDblClick=t},r.prototype.__behaviour=function(t){return t===void 0&&(t={}),this._bhv=kr(kr({},this._bhv||{}),t)},r.prototype.__getBehaviour=function(t){return this._bhv||{}},r.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),(t=this.fu)===null||t===void 0||t.remove(),(e=this.am)===null||e===void 0||e.remove(),this._bhv={}},r}($t);const xg=Yc;var jf={placeholder:"eg. Text here"};const Sg={locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",traits:{labels:{},attributes:{id:jf,alt:jf,title:jf,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}}},messagesAdd:void 0};var Og=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tg=function(a){function r(t){var e=a.call(this,t,"I18n",Sg)||this,n=e.config.messagesAdd;return n&&e.addMessages(n),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return Og(r,a),r.prototype.setLocale=function(t){var e=this.em,n=this.config,i={value:t,valuePrev:n.locale};return e&&e.trigger("i18n:locale",i),n.locale=t,this},r.prototype.getLocale=function(){return this.config.locale},r.prototype.getMessages=function(t,e){e===void 0&&(e={});var n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},r.prototype.setMessages=function(t){var e=this.em;return this.config.messages=t,e&&e.trigger("i18n:update",t),this},r.prototype.addMessages=function(t){var e=this.em,n=this.config.messages;return e&&e.trigger("i18n:add",t),this.setMessages((0,N.deepMerge)(n,t)),this},r.prototype.t=function(t,e){e===void 0&&(e={});var n=this.config,i=e.params||{},l=e.l||this.getLocale(),f=e.lFlb||n.localeFallback,d=this._getMsg(t,l,e);return d||(d=this._getMsg(t,f,e)),!d&&this._debug("'".concat(t,"' i18n key not found in '").concat(l,"' lang"),e),d=d&&(0,y.isString)(d)?this._addParams(d,i):d},r.prototype._localLang=function(){var t=(0,N.hasWin)()&&window.navigator||{},e=t.language||t.userLanguage;return e?e.split("-")[0]:"en"},r.prototype._addParams=function(t,e){var n=new RegExp("{([\\w\\d-]*)}","g");return t.replace(n,function(i,l){return e[l]||""}).trim()},r.prototype._getMsg=function(t,e,n){n===void 0&&(n={});var i=this.getMessages(e,n);if(i){var l=i[t];return!l&&t.indexOf(".")>0&&(l=t.split(".").reduce(function(f,d){if(!(0,y.isUndefined)(f))return f[d]},i)),l}},r.prototype._debug=function(t,e){e===void 0&&(e={});var n=this.em,i=this.config;(e.debug||i.debug)&&n&&n.logWarning(t)},r.prototype.destroy=function(){},r}(Dt);const Eg=Tg;var kg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_a=function(){return _a=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_a.apply(this,arguments)},Pg=function(){},Ag=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return kg(r,a),r.prototype.initialize=function(t){t===void 0&&(t={}),this.opt=t||{},(0,y.bindAll)(this,"startSort","onMove","endMove","rollback","updateOffset","moveDragHelper");var e=t||{};this.elT=0,this.elL=0,this.borderOffset=e.borderOffset||10;var n=e.container;this.el=typeof n=="string"?document.querySelector(n):n,this.$el=(0,tt.default)(this.el),this.containerSel=e.containerSel||"div",this.itemSel=e.itemSel||"div",this.draggable=e.draggable||!0,this.nested=!!e.nested,this.pfx=e.pfx||"",this.ppfx=e.ppfx||"",this.freezeClass=e.freezeClass||this.pfx+"freezed",this.onStart=e.onStart||Pg,this.onEndMove=e.onEndMove,this.customTarget=e.customTarget,this.onEnd=e.onEnd,this.direction=e.direction||"v",this.onMoveClb=e.onMove,this.relative=e.relative||!1,this.ignoreViewChildren=!!e.ignoreViewChildren,this.plh=e.placer,this.wmargin=e.wmargin||0,this.offTop=e.offsetTop||0,this.offLeft=e.offsetLeft||0,this.document=e.document||document,this.em=e.em,this.canvasRelative=!!e.canvasRelative,this.selectOnEnd=!e.avoidSelectOnEnd,this.scale=e.scale,this.em&&this.em.on&&(this.em.on("change:canvasOffset",this.updateOffset),this.updateOffset())},r.prototype.getScale=function(){return(0,y.result)(this,"scale")||1},r.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el=typeof e=="string"?document.querySelector(e):e,this.$el=(0,tt.default)(this.el)}return this.el},r.prototype.getDocuments=function(t){var e=this.em,n=t?t.ownerDocument:e==null?void 0:e.Canvas.getBody().ownerDocument,i=[document];return n&&i.push(n),i},r.prototype.updateOffset=function(){var t,e=((t=this.em)===null||t===void 0?void 0:t.get("canvasOffset"))||{};this.offTop=e.top,this.offLeft=e.left},r.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},r.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var n=e.get("Canvas"),i=n.getDocument(),l=null;if(i.caretRangeFromPoint){var f=(0,N.getPointerEvent)(t);l=i.caretRangeFromPoint(f.clientX,f.clientY)}else t.rangeParent&&(l=i.createRange()).setStart(t.rangeParent,t.rangeOffset);var d=n.getWindow().getSelection();n.getFrameEl().focus(),d.removeAllRanges(),l&&d.addRange(l),this.setContentEditable(this.activeTextModel,!0)}},r.prototype.setContentEditable=function(t,e){if(t){var n=t.getEl();n.contentEditable!=e&&(n.contentEditable=e)}},r.prototype.toggleSortCursor=function(t){var e=this.em,n=e&&e.get("Canvas");n&&(t?n.startAutoscroll():n.stopAutoscroll())},r.prototype.setDragHelper=function(t,e){for(var n=e||"",i=t.cloneNode(!0),l=t.getBoundingClientRect(),f=getComputedStyle(t),d="",m=0;m<f.length;m++){var g=f[m];d+="".concat(g,":").concat(f.getPropertyValue(g),";")}document.body.appendChild(i),i.className+=" ".concat(this.pfx,"bdrag"),i.setAttribute("style",d),this.dragHelper=i,i.style.width="".concat(l.width,"px"),i.style.height="".concat(l.height,"px"),n&&this.moveDragHelper(n),this.em&&(0,tt.default)(this.em.Canvas.getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper),(0,tt.default)(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},r.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(this.dragHelper&&e){var n=t.pageY,i=t.pageX,l=0,f=0,d=(e.defaultView||e.parentWindow).frameElement,m=this.dragHelper.style;if(d){var g=d.getBoundingClientRect();l=g.top+document.documentElement.scrollTop,f=g.left+document.documentElement.scrollLeft,n=t.clientY,i=t.clientX}m.top=n+l+"px",m.left=i+f+"px"}},r.prototype.matches=function(t,e){return N.matches.call(t,e)},r.prototype.closest=function(t,e){if(t)for(var n=t.parentNode;n&&n.nodeType===1;){if(this.matches(n,e))return n;n=n.parentNode}},r.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},r.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement("div"),n=document.createElement("div");return e.className=t+"placeholder",e.style.display="none",e.style.pointerEvents="none",n.className=t+"placeholder-int",e.appendChild(n),e},r.prototype.startSort=function(t,e){var n,i;e===void 0&&(e={});var l,f=this,d=f.em,m=f.itemSel,g=f.containerSel,x=f.plh,A=this.getContainerEl(e.container),$=this.getDocuments(t);delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(m,", ").concat(g))&&(t=this.closest(t,m)),this.sourceEl=t,x||(this.plh=this.createPlaceholder(),A.appendChild(this.plh)),t&&((l=this.getSourceModel(t))&&l.set&&l.set("status","freezed"),this.srcModel=l),(0,N.on)(A,"mousemove dragover",this.onMove),(0,N.on)($,"mouseup dragend touchend",this.endMove),(0,N.on)($,"keydown",this.rollback),this.onStart({sorter:this,target:l,parent:l&&((n=l.parent)===null||n===void 0?void 0:n.call(l)),index:l&&((i=l.index)===null||i===void 0?void 0:i.call(l))}),d==null||d.clearSelection(),this.toggleSortCursor(!0),d==null||d.trigger("sorter:drag:start",t,l)},r.prototype.getTargetModel=function(t){var e=t||this.target;return(0,tt.default)(e).data("model")},r.prototype.getSourceModel=function(t,e){var n=this,i=e===void 0?{}:e,l=i.target,f=i.avoidChildren,d=f===void 0?1:f,m=this.em,g=this.sourceEl,x=t||g,A=this.dropModel,$=this.dropContent,Z=function(Bt){return Bt&&l&&Bt.opt&&Bt.opt.avoidChildren&&n.isTextableActive(Bt,l)};if($&&m){if(Z(A)&&(A=void 0),!A){var ut=m.Components.getComponents(),yt={avoidChildren:d,avoidStore:1,avoidUpdateStyle:1},pt=ut.add($,_a(_a({},yt),{temporary:!0}));if(A=(A=ut.remove(pt,yt))instanceof Array?A[0]:A,this.dropModel=A,Z(A))return this.getSourceModel(x,{target:l,avoidChildren:0})}return A}return x&&(0,tt.default)(x).data("model")},r.prototype.selectTargetModel=function(t,e){if(!(t instanceof S.FE||e&&e===t)){var n=this.targetModel;n&&n!==this.srcModel&&n.set("status",""),t&&t.set&&(t.set("status","selected-parent"),this.targetModel=t)}},r.prototype.onMove=function(t){var e=t,n=this,i=n.em,l=n.onMoveClb,f=n.plh,d=n.customTarget;this.moved=!0;var m=f.style.display;m&&m!=="none"||(f.style.display="block");var g=this.offset(this.el);this.elT=this.wmargin?Math.abs(g.top):g.top,this.elL=this.wmargin?Math.abs(g.left):g.left;var x=t.pageY-this.elT+this.el.scrollTop,A=t.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var $=i.get("Canvas").getMouseRelativeCanvas(t,{noScroll:1});A=$.x,x=$.y}this.rX=A,this.rY=x,this.eventMove=t;var Z=this.getSourceModel(),ut=d?d({sorter:this,event:t}):t.target,yt=this.dimsFromTarget(ut,A,x),pt=this.target,Bt=pt&&this.getTargetModel(pt);if(this.selectTargetModel(Bt,Z),Bt||(f.style.display="none"),pt){this.lastDims=yt;var Zt=this.findPosition(yt,A,x);this.isTextableActive(Z,Bt)?(this.activeTextModel=Bt,f.style.display="none",this.lastPos=Zt,this.updateTextViewCursorPosition(e)):(this.disableTextable(),delete this.activeTextModel,this.lastPos&&this.lastPos.index==Zt.index&&this.lastPos.method==Zt.method||(this.movePlaceholder(this.plh,yt,Zt,this.prevTargetDim),this.$plh||(this.$plh=(0,tt.default)(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css("top","+="+this.offTop+"px"),this.offLeft&&this.$plh.css("left","+="+this.offLeft+"px")),this.lastPos=Zt)),(0,y.isFunction)(l)&&l({event:t,target:Z,parent:Bt,index:Zt.index+(Zt.method=="after"?1:0)}),i&&i.trigger("sorter:drag",{target:pt,targetModel:Bt,sourceModel:Z,dims:yt,pos:Zt,x:A,y:x})}},r.prototype.isTextableActive=function(t,e){var n;return((n=t==null?void 0:t.get)===null||n===void 0?void 0:n.call(t,"textable"))&&(e==null?void 0:e.isInstanceOf("text"))},r.prototype.disableTextable=function(){var t=this.activeTextModel;t==null||t.getView().disableEditing(),this.setContentEditable(t,!1)},r.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var n=t;return n.offsetHeight,!!this.styleInFlow(n,e)},r.prototype.styleInFlow=function(t,e){if(!(0,N.isTextNode)(t)){var n=t.style||{},i=(0,tt.default)(t),l=e&&(0,tt.default)(e);if(!n.overflow||n.overflow==="visible"){var f=i.css("float");if(!(f&&f!=="none"||l&&l.css("display")=="flex"&&l.css("flex-direction")!=="column")){switch(n.position){case"static":case"relative":case"":break;default:return}switch(t.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return!0}switch(i.css("display")){case"block":case"list-item":case"table":case"flex":return!0}}}}},r.prototype.validTarget=function(t,e){var n=this.getTargetModel(t),i=this.getSourceModel(e,{target:n}),l={valid:!0,src:e=i&&i.view&&i.view.el,srcModel:i,trg:t=n&&n.view&&n.view.el,trgModel:n,draggable:!1,droppable:!1,dragInfo:"",dropInfo:""};if(!e||!t)return l.valid=!1,l;var f=i.get("draggable");if((0,y.isFunction)(f)){var d=f(i,n);l.dragInfo=d,l.draggable=d,f=d}else f=f instanceof Array?f.join(", "):f,l.dragInfo=f,f=(0,y.isString)(f)?this.matches(t,f):f,l.draggable=f;var m=n.get("droppable");return(0,y.isFunction)(m)?(d=m(i,n),l.droppable=d,l.dropInfo=d,m=d):(m=(m=m instanceof S.FE?1:m)instanceof Array?m.join(", "):m,l.dropInfo=m,m=(0,y.isString)(m)?this.matches(e,m):m,m=f&&this.isTextableActive(i,n)?1:m,l.droppable=m),m&&f||(l.valid=!1),l},r.prototype.dimsFromTarget=function(t,e,n){var i=this.em,l=[];if(!t||(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(","))),!t))return l;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var f=this.validTarget(t);if(i&&i.trigger("sorter:drag:validation",f),!f.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,n);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(l=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,n)||!this.nested&&!this.cacheDims.length){var d=this.targetP;d&&this.validTarget(d).valid&&(l=this.cacheDimsP,this.target=d)}return delete this.lastPos,l},r.prototype.getTargetFromEl=function(t){var e,n=t,i=this.targetPrev,l=this.em,f=this.containerSel,d=this.itemSel;if(this.matches(n,"".concat(d,", ").concat(f))||(n=this.closest(n,d)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(","))),i&&i!=n&&delete this.targetPrev,!this.targetPrev){e=this.closest(n,f);var m=this.validTarget(n);if(l&&l.trigger("sorter:drag:validation",m),!m.valid&&e)return this.getTargetFromEl(e);this.targetPrev=n}return this.nearElBorders(n)&&(e=this.closest(n,f))&&this.validTarget(e).valid&&(n=e),n},r.prototype.nearElBorders=function(t){var e=10,n=t.getBoundingClientRect(),i=t.ownerDocument.body,l=this.getCurrentPos(),f=l.x,d=l.y,m=n.top+i.scrollTop,g=n.left+i.scrollLeft,x=n.width,A=n.height;if(d<m+e||d>m+A-e||f<g+e||f>g+x-e)return 1},r.prototype.getCurrentPos=function(){var t=this.eventMove;return{x:(t==null?void 0:t.pageX)||0,y:(t==null?void 0:t.pageY)||0}},r.prototype.getDim=function(t){var e,n,i,l,f=this.em,d=this.canvasRelative,m=f==null?void 0:f.Canvas,g=m?m.getElementOffsets(t):{};if(d&&f){var x=m.getElementPos(t,{noScroll:1});e=x.top,n=x.left,i=x.height,l=x.width}else{var A=this.offset(t);e=this.relative?t.offsetTop:A.top-(this.wmargin?-1:1)*this.elT,n=this.relative?t.offsetLeft:A.left-(this.wmargin?-1:1)*this.elL,i=t.offsetHeight,l=t.offsetWidth}return{top:e,left:n,height:i,width:l,offsets:g}},r.prototype.getChildrenDim=function(t){var e=this,n=[];if(!t)return n;var i=this.getTargetModel(t);if(i&&i.view&&!this.ignoreViewChildren){var l=i.getCurrentView?i.getCurrentView():i.view;t=l.getChildrenContainer()}return(0,y.each)(t.children,function(f,d){var m=f,g=(0,N.getModel)(m,tt.default),x=g&&g.index?g.index():d;if((0,N.isTextNode)(m)||e.matches(m,e.itemSel)){var A,$=e.getDim(m),Z=e.direction;A=Z=="v"||Z!="h"&&e.isInFlow(m,t),$.dir=A,$.el=m,$.indexEl=x,n.push($)}}),n},r.prototype.nearBorders=function(t,e,n){var i=!1,l=this.borderOffset,f=e||0,d=n||0,m=t.top,g=t.left,x=t.height,A=t.width;return(m+l>d||d>m+x-l||g+l>f||f>g+A-l)&&(i=!0),i},r.prototype.findPosition=function(t,e,n){for(var i,l={index:0,indexEl:0,method:"before"},f=0,d=0,m=0,g=0,x=0,A=0,$=0,Z=t.length;$<Z;$++){var ut=(i=t[$]).top,yt=i.left,pt=i.height,Bt=i.width;if(A=ut+pt,g=yt+Bt/2,x=ut+pt/2,!(d&&yt>d||m&&x>=m||f&&yt+Bt<f))if(l.index=$,l.indexEl=i.indexEl,i.dir){if(n<x){l.method="before";break}l.method="after"}else n<A&&(m=A),e<g?(d=g,l.method="before"):(f=g,l.method="after")}return l},r.prototype.movePlaceholder=function(t,e,n,i){var l=0,f=0,d=0,m="",g="",x="px",A=5,$=n.method,Z=e[n.index];if(t.classList.remove("vertical"),t.classList.add("horizontal"),Z){var ut=Z.top,yt=Z.left,pt=Z.height,Bt=Z.width;Z.dir?(m=Bt+x,g="auto",f=$=="before"?ut-l:ut+pt-l,d=yt):(m="auto",g=pt-2*l+x,f=ut+l,d=$=="before"?yt-l:yt+Bt-l,t.classList.remove("horizontal"),t.classList.add("vertical"))}else{if(!this.nested)return void(t.style.display="none");if(i){var Zt=i.offsets||{},Pe=Zt.paddingTop||A,Le=Zt.paddingLeft||A;f=i.top+Pe,d=i.left+Le,m=parseInt("".concat(i.width))-2*Le+x,g="auto"}}t.style.top=f+x,t.style.left=d+x,m&&(t.style.width=m),g&&(t.style.height=g)},r.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},r.prototype.sort=function(t,e){var n=t.parents.filter(function(l){return e.parents.includes(l)})[0];if(!n)return e.model.index()-t.model.index();var i=t.parents[t.parents.indexOf(n)-1];return e.parents[e.parents.indexOf(n)-1].index()-i.index()},r.prototype.endMove=function(){var t,e=this,n=this.sourceEl,i=[],l=this.getDocuments(),f=this.getContainerEl(),d=this.onEndMove,m=this.onEnd,g=this.target,x=this.lastPos;if((0,N.off)(f,"mousemove dragover",this.onMove),(0,N.off)(l,"mouseup dragend touchend",this.endMove),(0,N.off)(l,"keydown",this.rollback),this.plh.style.display="none",n&&(t=this.getSourceModel(),this.selectOnEnd&&t&&t.set&&(t.set("status",""),t.set("status","selected"))),this.moved&&g){var A=this.toMove,$=(0,y.isArray)(A)?A:A?[A]:[n],Z=0;$.length===1?i.push(this.move(g,$[0],x)):$.map(function(pt){return{model:pt,parents:e.parents(pt)}}).sort(this.sort).forEach(function(pt){var Bt=pt.model,Zt=Bt.index(),Pe=Bt.parent().getEl();i.push(e.move(g,Bt,_a(_a({},x),{indexEl:x.indexEl-Z,index:x.index-Z}))),Pe===g&&Zt<=x.index&&Z++})}this.plh&&(this.plh.style.display="none");var ut=this.dragHelper;if(ut&&(ut.parentNode.removeChild(ut),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,y.isFunction)(d)){var yt={target:t,parent:t&&t.parent(),index:t&&t.index()};i.length?i.forEach(function(pt){return d(pt,e,yt)}):d(null,this,_a(_a({},yt),{cancelled:1}))}(0,y.isFunction)(m)&&m({sorter:this})},r.prototype.move=function(t,e,n){var i,l,f=this.em,d=this.dropContent,m=(0,N.getElement)(e),g=[],x=n.method==="after"?n.indexEl+1:n.indexEl,A=this.validTarget(t,m),$=(0,tt.default)(t).data("collection"),Z=A.trgModel,ut=A.srcModel,yt=A.draggable,pt=Z instanceof S.FE?1:A.droppable;if($&&pt&&yt){var Bt={at:x,action:"move-component"},Zt=this.isTextableActive(ut,Z);if(d)i=(0,y.isFunction)(d)?d():d,Bt.avoidUpdateStyle=!0,Bt.action="add-component";else{var Pe=ut.collection.indexOf(ut),Le=$===ut.collection;(!Le||!(Pe===x||Pe===x-1)||Zt)&&(i=ut.collection.remove(ut,{temporary:!0}),Le&&x>Pe&&(Bt.at=x-1))}i&&(Zt?(delete Bt.at,l=Z.getView().insertComponent(i,Bt)):l=$.add(i,Bt)),delete this.dropContent,delete this.prevTarget}else if(f){var Ke=A.dropInfo||(Z==null?void 0:Z.get("droppable")),en=A.dragInfo||(ut==null?void 0:ut.get("draggable"));!$&&g.push("Target collection not found"),!pt&&Ke&&g.push("Target is not droppable, accepts [".concat(Ke,"]")),!yt&&en&&g.push("Component not draggable, acceptable by [".concat(en,"]")),f.logWarning("Invalid target position",{errors:g,model:ut,context:"sorter",target:Z})}return f==null||f.trigger("sorter:drag:end",{targetCollection:$,modelToDrop:i,warns:g,validResult:A,dst:t,srcEl:m}),l},r.prototype.rollback=function(t){(0,N.off)(this.getDocuments(),"keydown",this.rollback),(t.which||t.keyCode)==27&&(this.moved=!1,this.endMove())},r}(S.G7);const jg=Ag;var ll=function(){return ll=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ll.apply(this,arguments)},Mg=function(){function a(r){r===void 0&&(r={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=ll({},this.defOpts),this.setOptions(r),(0,y.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(r,t){r===void 0&&(r={}),this.opts=ll(ll({},t?this.defOpts:this.opts),r),this.setup()},a.prototype.setup=function(){var r=this.opts,t=r.prefix||"",e=r.appendTo||document.body,n=this.container;for(n||((n=document.createElement("div")).className="".concat(t,"resizer-c"),e.appendChild(n),this.container=n);n.firstChild;)n.removeChild(n.firstChild);var i={};for(var l in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(d){return i[d]=r[d]?function(m,g){g===void 0&&(g={});var x=g.prefix||"",A=document.createElement("i");return A.className=x+"resizer-h "+x+"resizer-h-"+m,A.setAttribute("data-"+x+"handler",m),A}(d,r):null}),i){var f=i[l];f&&n.appendChild(f)}this.handlers=i,this.mousePosFetcher=r.mousePosFetcher,this.updateTarget=r.updateTarget,this.posFetcher=r.posFetcher,this.onStart=r.onStart,this.onMove=r.onMove,this.onEnd=r.onEnd,this.onUpdateContainer=r.onUpdateContainer},a.prototype.toggleFrames=function(r){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,y.each)(t,function(e){return e.style.pointerEvents=r?"none":""})}},a.prototype.isHandler=function(r){var t=this.handlers;for(var e in t)if(t[e]===r)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var r;return(r=this.el)===null||r===void 0?void 0:r.parentElement},a.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},a.prototype.getElementPos=function(r,t){t===void 0&&(t={});var e=this.posFetcher;return e?e(r,t):function(n,i){var l=i||window,f=n.getBoundingClientRect();return{left:f.left+l.pageXOffset,top:f.top+l.pageYOffset,width:f.width,height:f.height}}(r)},a.prototype.focus=function(r){r&&r===this.el||(this.el=r,this.updateContainer({forceShow:!0}),(0,N.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,N.off)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(r){var t=r;if(t.button===0){t.preventDefault(),t.stopPropagation();var e=this.el,n=this.getParentEl(),i=this.opts||{},l=this.mousePosFetcher,f="data-"+i.prefix+"handler",d=this.getElementPos(e,{target:"el"}),m=this.getElementPos(n),g=t.target;this.handlerAttr=g.getAttribute(f),this.clickedHandler=g,this.startDim={t:d.top,l:d.left,w:d.width,h:d.height},this.rectDim={t:d.top,l:d.left,w:d.width,h:d.height},this.startPos=l?l(t):{x:t.clientX,y:t.clientY},this.parentDim={t:m.top,l:m.left,w:m.width,h:m.height};var x=this.getDocumentEl();this.docs=x,(0,N.on)(x,"pointermove",this.move),(0,N.on)(x,"keydown",this.handleKeyDown),(0,N.on)(x,"pointerup",this.stop),(0,y.isFunction)(this.onStart)&&this.onStart(t,{docs:x,config:i,el:e,resizer:this}),this.toggleFrames(!0),this.move(t)}},a.prototype.move=function(r){var t=r,e=this.onMove,n=this.mousePosFetcher,i=n?n(t):{x:t.clientX,y:t.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),e&&e(t)},a.prototype.stop=function(r){var t=this.el,e=this.opts,n=this.docs||this.getDocumentEl();(0,N.off)(n,"pointermove",this.move),(0,N.off)(n,"keydown",this.handleKeyDown),(0,N.off)(n,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,y.isFunction)(this.onEnd)&&this.onEnd(r,{docs:n,config:e,el:t,resizer:this}),delete this.docs},a.prototype.updateRect=function(r){var t=this.el,e=this.opts,n=this.rectDim,i=this.updateTarget,l=this.getSelectedHandler(),f=e.unitHeight,d=e.unitWidth,m=e.keyWidth,g=e.keyHeight;if((0,y.isFunction)(i))i(t,n,{store:r,selectedHandler:l,resizer:this,config:e});else{var x=t.style;x[m]=n.w+d,x[g]=n.h+f}this.updateContainer()},a.prototype.updateContainer=function(r){var t;r===void 0&&(r={});var e=this,n=e.opts,i=e.container,l=e.el,f=i.style;!n.avoidContainerUpdate&&l&&r.forceShow&&(f.display="block"),(t=this.onUpdateContainer)===null||t===void 0||t.call(this,{el:i,resizer:this,opts:ll(ll({},n),r)})},a.prototype.getSelectedHandler=function(){var r=this.handlers;if(this.selectedHandler){for(var t in r)if(r[t]===this.selectedHandler)return t}},a.prototype.handleKeyDown=function(r){r.keyCode===27&&(this.rectDim=this.startDim,this.stop(r))},a.prototype.handleMouseDown=function(r){var t=r.target;this.isHandler(t)?(this.selectedHandler=t,this.start(r)):t!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(r){var t,e=this.opts||{},n=e.step,i=this.startDim,l=e.minDim,f=e.maxDim,d=r.delta.x,m=r.delta.y,g=this.parentDim.w,x=this.parentDim.h,A=this.opts.unitWidth,$=this.opts.unitHeight,Z=A==="%"?i.w/100*g:i.w,ut=$==="%"?i.h/100*x:i.h,yt={t:0,l:0,w:Z,h:ut};if(r){var pt=r.handlerAttr;~pt.indexOf("r")&&(t=A==="%"?(0,N.normalizeFloat)((Z+d*n)/g*100,.01):(0,N.normalizeFloat)(Z+d*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),yt.w=t),~pt.indexOf("b")&&(t=$==="%"?(0,N.normalizeFloat)((ut+m*n)/x*100,.01):(0,N.normalizeFloat)(ut+m*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),yt.h=t),~pt.indexOf("l")&&(t=A==="%"?(0,N.normalizeFloat)((Z-d*n)/g*100,.01):(0,N.normalizeFloat)(Z-d*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),yt.w=t),~pt.indexOf("t")&&(t=$==="%"?(0,N.normalizeFloat)((ut-m*n)/x*100,.01):(0,N.normalizeFloat)(ut-m*n,n),t=Math.max(l,t),f&&(t=Math.min(f,t)),yt.h=t);var Bt=e.ratioDefault?!r.keys.shift:r.keys.shift;if(pt.indexOf("c")<0&&Bt){var Zt=i.w/i.h;yt.w/yt.h>Zt?yt.h=Math.round(yt.w/Zt):yt.w=Math.round(yt.h*Zt)}return~pt.indexOf("l")&&(yt.l=i.w-yt.w),~pt.indexOf("t")&&(yt.t=i.h-yt.h),yt}},a}();const Lg=Mg;var Dg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Mf=function(){return Mf=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Mf.apply(this,arguments)};const Ng=function(a){function r(t){var e=a.call(this,t,"Utils")||this;return e.Sorter=jg,e.Resizer=Lg,e.Dragger=so.Z,e.helpers=Mf({},N),e}return Dg(r,a),r.prototype.destroy=function(){},r}(Dt);var Ro,ti={},wo={16:!1,18:!1,17:!1,91:!1},zd="all",cl={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},Ud={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},Lf=function(a){return Ud[a]||a.toUpperCase().charCodeAt(0)},Ql=[];for(Ro=1;Ro<20;Ro++)Ud["f"+Ro]=111+Ro;function Jc(a,r){for(var t=a.length;t--;)if(a[t]===r)return t;return-1}function Ig(a,r){if(a.length!=r.length)return!1;for(var t=0;t<a.length;t++)if(a[t]!==r[t])return!1;return!0}var Fg={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function Rg(a){for(Ro in wo)wo[Ro]=a[Fg[Ro]]}function Vg(a){var r,t=a.keyCode,e=Jc(Ql,t);if(e>=0&&Ql.splice(e,1),t!=93&&t!=224||(t=91),t in wo)for(r in wo[t]=!1,cl)cl[r]==t&&(_o[r]=!1)}function Hg(){for(Ro in wo)wo[Ro]=!1;for(Ro in cl)_o[Ro]=!1}function _o(a,r,t){var e,n;e=$d(a),t===void 0&&(t=r,r="all");for(var i=0;i<e.length;i++)n=[],(a=e[i].split("+")).length>1&&(n=Wd(a),a=[a[a.length-1]]),a=a[0],(a=Lf(a))in ti||(ti[a]=[]),ti[a].push({shortcut:e[i],scope:r,method:t,key:e[i],mods:n})}for(Ro in cl)_o[Ro]=!1;function Df(){return zd||"all"}function $d(a){var r;return(r=(a=a.replace(/\s/g,"")).split(","))[r.length-1]==""&&(r[r.length-2]+=","),r}function Wd(a){for(var r=a.slice(0,a.length-1),t=0;t<r.length;t++)r[t]=cl[r[t]];return r}function Nf(a,r,t){a.addEventListener?a.addEventListener(r,t,!1):a.attachEvent&&a.attachEvent("on"+r,function(){t(window.event)})}_o.setScope=function(a){zd=a||"all"},_o.getScope=Df,_o.deleteScope=function(a){var r,t,e;for(r in ti)for(t=ti[r],e=0;e<t.length;)t[e].scope===a?t.splice(e,1):e++},_o.filter=function(a){var r=(a.target||a.srcElement).tagName;return!(r=="INPUT"||r=="SELECT"||r=="TEXTAREA")},_o.isPressed=function(a){return typeof a=="string"&&(a=Lf(a)),Jc(Ql,a)!=-1},_o.getPressedKeyCodes=function(){return Ql.slice(0)},_o.unbind=function(a,r){var t,e,n,i,l,f=[];for(t=$d(a),i=0;i<t.length;i++){if((e=t[i].split("+")).length>1&&(f=Wd(e)),a=e[e.length-1],a=Lf(a),r===void 0&&(r=Df()),!ti[a])return;for(n=0;n<ti[a].length;n++)(l=ti[a][n]).scope===r&&Ig(l.mods,f)&&(ti[a][n]={})}},_o.handlers=ti,_o.init=function(a){Nf(a.document,"keydown",function(r){(function(t){var e,n,i,l,f,d;if(e=t.keyCode,Jc(Ql,e)==-1&&Ql.push(e),e!=93&&e!=224||(e=91),e in wo)for(i in wo[e]=!0,cl)cl[i]==e&&(_o[i]=!0);else if(Rg(t),_o.filter.call(this,t)&&e in ti){for(d=Df(),l=0;l<ti[e].length;l++)if((n=ti[e][l]).scope==d||n.scope=="all"){for(i in f=n.mods.length>0,wo)(!wo[i]&&Jc(n.mods,+i)>-1||wo[i]&&Jc(n.mods,+i)==-1)&&(f=!1);(n.mods.length!=0||wo[16]||wo[18]||wo[17]||wo[91])&&!f||n.method(t,n)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}})(r)}),Nf(a.document,"keyup",Vg),Nf(a,"focus",Hg)};const Zc=_o,Bg={defaults:{"core:undo":{keys:"⌘+z, ctrl+z",handler:"core:undo"},"core:redo":{keys:"⌘+shift+z, ctrl+shift+z",handler:"core:redo"},"core:copy":{keys:"⌘+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"⌘+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}};var zg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),qd=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};(0,N.hasWin)()&&Zc.init(window);var Ug=function(a){function r(t){var e=a.call(this,t,"Keymaps",Bg)||this;return e.keymaster=Zc,e.keymaps={},e}return zg(r,a),r.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}},r.prototype.add=function(t,e,n,i){i===void 0&&(i={});var l=this.em,f=l.Commands,d=l.getEditor(),m=l.Canvas,g={id:t,keys:e,handler:n};return this.keymaps[t]&&this.remove(t),this.keymaps[t]=g,Zc(e,function(x,A){var $={event:x,h:A},Z=(0,y.isString)(n)?f.get(n):n;if(!l.isEditing()&&!d.Canvas.isInputFocused()||i.force){i.prevent&&m.getCanvasView().preventDefault(x),(0,y.isFunction)(Z)?Z(d,0,$):f.runCommand(Z,$);var ut=[t,A.shortcut,x];l.trigger.apply(l,qd(["keymap:emit"],ut,!1)),l.trigger.apply(l,qd(["keymap:emit:".concat(t)],ut,!1))}},void 0),l.trigger("keymap:add",g),g},r.prototype.get=function(t){return this.keymaps[t]},r.prototype.getAll=function(){return this.keymaps},r.prototype.remove=function(t){var e=this.em,n=this.get(t);if(n)return delete this.keymaps[t],n.keys.split(", ").forEach(function(i){Zc.unbind(i.trim())}),e==null||e.trigger("keymap:remove",n),n},r.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(e){return t.remove(e)}),Zc.handlers={},this},r.prototype.destroy=function(){this.removeAll(),this.keymaps={}},r}(Dt);const $g=Ug,Wg={stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}};var qg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Gg=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qg(r,a),r.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},r.prototype.open=function(){this.set("open",!0)},r.prototype.close=function(){this.set("open",!1)},r}(_t);var Kg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fp=function(){return fp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},fp.apply(this,arguments)};const Yg=function(a){function r(t){var e=a.call(this,t)||this,n=e.model;return e.listenTo(n,"change:open",e.updateOpen),e.listenTo(n,"change:title",e.updateTitle),e.listenTo(n,"change:content",e.updateContent),e}return Kg(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.ppfx,i=t.content,l=t.title;return'<div class="'.concat(e,"dialog ").concat(n,"one-bg ").concat(n,`two-color">
      <div class="`).concat(e,`header">
        <div class="`).concat(e,'title">').concat(l,`</div>
        <div class="`).concat(e,`btn-close" data-close-modal>&Cross;</div>
      </div>
      <div class="`).concat(e,`content">
        <div id="`).concat(e,'c">').concat(i,`</div>
        <div style="clear:both"></div>
      </div>
    </div>
    <div class="`).concat(e,'collector" style="display: none"></div>')},r.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},r.prototype.onClick=function(t){this.config.backdrop&&t.target===this.el&&this.hide()},r.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},r.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},r.prototype.getTitle=function(t){return t===void 0&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},r.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),i=this.model.get("content");e.length&&n.append(e),t.empty().append(i)},r.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},r.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},r.prototype.hide=function(){this.model.close()},r.prototype.show=function(){this.model.open()},r.prototype.updateAttr=function(t){var e=this,n=e.pfx,i=e.$el,l=e.el,f=[].slice.call(l.attributes).map(function(d){return d.name});i.removeAttr(f.join(" ")),i.attr(fp(fp({},t||{}),{class:"".concat(n,"container ").concat(t&&t.class||"").trim()}))},r.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},r}(Sn);var Jg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Zg=function(a){function r(t){var e=a.call(this,t,"Modal",Wg)||this;return e.model=new Gg(e),e.model.on("change:open",function(n,i){t.trigger("modal:".concat(i?"open":"close"))}),e.model.on("change",(0,y.debounce)(function(){var n=e._evData(),i=e.config.custom;(0,y.isFunction)(i)&&i(n),t.trigger("modal",n)},0)),e}return Jg(r,a),r.prototype._evData=function(){var t=this,e=this.getTitle(),n=this.getContent(),i=this.model.attributes;return{open:i.open,attributes:i.attributes,title:(0,y.isString)(e)?(0,Ze.rw)(e):e,content:(0,y.isString)(n)?(0,Ze.rw)(n):n.get?n.get(0):n,close:function(){t.close()}}},r.prototype.postRender=function(t){var e=t.model.config.el||t.el,n=this.render();n&&(e==null||e.appendChild(n))},r.prototype.open=function(t){t===void 0&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},r.prototype.close=function(){return this.model.close(),this},r.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},r.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},r.prototype.isOpen=function(){return!!this.model.get("open")},r.prototype.setTitle=function(t){return this.model.set("title",t),this},r.prototype.getTitle=function(){return this.model.get("title")},r.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},r.prototype.getContent=function(){return this.model.get("content")},r.prototype.getContentEl=function(){var t;return(t=this.modal)===null||t===void 0?void 0:t.getContent().get(0)},r.prototype.getModel=function(){return this.model},r.prototype.render=function(){var t;if(!this.config.custom){var e=Yg.extend(this.config.extend),n=this.modal&&this.modal.el;return this.modal=new e({el:n,model:this.model,config:this.config}),(t=this.modal)===null||t===void 0?void 0:t.render().el}},r.prototype.destroy=function(){var t;(t=this.modal)===null||t===void 0||t.remove()},r}(Dt);var Gd="sw-visibility",Kd="export-template",Yd="open-sm",Jd="open-tm",Zd="open-layers",Xd="open-blocks",If="fullscreen",Ff="preview";const Rf={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Gd,className:"fa fa-square-o",command:"core:component-outline",context:Gd,attributes:{title:"View components"}},{id:Ff,className:"fa fa-eye",command:Ff,context:Ff,attributes:{title:"Preview"}},{id:If,className:"fa fa-arrows-alt",command:If,context:If,attributes:{title:"Fullscreen"}},{id:Kd,className:"fa fa-code",command:Kd,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Yd,className:"fa fa-paint-brush",command:Yd,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Jd,className:"fa fa-cog",command:Jd,togglable:!1,attributes:{title:"Settings"}},{id:Zd,className:"fa fa-bars",command:Zd,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Xd,className:"fa fa-th-large",command:Xd,togglable:!1,attributes:{title:"Open Blocks"}}]}]};var Xg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Qd=function(a){function r(t,e){var n=a.call(this,t,e)||this;return n.get("buttons").length&&n.set("buttons",new eh(n.module,n.get("buttons"))),n}return Xg(r,a),r.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(r.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),r}(_t);var Qg=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),th=function(a){function r(t,e){return a.call(this,t,e,Qd)||this}return Qg(r,a),r.prototype.deactivateAllExceptOne=function(t,e){this.forEach(function(n,i){n!==t&&(n.set("active",!1),e&&n.get("buttons").length&&n.get("buttons").deactivateAllExceptOne(t,e))})},r.prototype.deactivateAll=function(t,e){var n=t||"";this.forEach(function(i){i.get("context")==n&&i!==e&&i.set("active",!1,{fromCollection:!0})})},r.prototype.disableAllButtons=function(t){var e=t||"";this.forEach(function(n,i){n.get("context")==e&&n.set("disable",!0)})},r.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach(function(n,i){n!==t&&(n.set("disable",!0),e&&n.get("buttons").length&&n.get("buttons").disableAllButtonsExceptOne(t,e))})},r}(Jt);const eh=th;th.prototype.model=Qd;var tm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const nh=function(a){function r(t,e){var n=a.call(this,t,e)||this,i=n.get("buttons")||[];return n.buttons=new eh(t,i),n}return tm(r,a),r.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(r.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),r}(_t);var em=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),rh=function(a){function r(t,e){return a.call(this,t,e,nh)||this}return em(r,a),r}(Jt);const nm=rh;rh.prototype.model=nh;var rm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),tc=function(){return tc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},tc.apply(this,arguments)},om=function(a){function r(t){var e=a.call(this,t)||this,n=e,i=n.model,l=n.em,f=n.pfx,d=n.ppfx,m=i.className,g=i.attributes,x=g.command,A=g.listen;if(e.id=f+i.get("id"),e.activeCls="".concat(f,"active ").concat(d,"four-color"),e.disableCls="".concat(d,"disabled"),e.btnsVisCls="".concat(f,"visible"),e.className=f+"btn"+(m?" "+m:""),e.listenTo(i,"change",e.render),e.listenTo(i,"change:active updateActive",e.updateActive),e.listenTo(i,"checkActive",e.checkActive),e.listenTo(i,"change:bntsVis",e.updateBtnsVis),e.listenTo(i,"change:attributes",e.updateAttributes),e.listenTo(i,"change:className",e.updateClassName),e.listenTo(i,"change:disable",e.updateDisable),l&&(0,y.isString)(x)&&A){var $={fromListen:!0};e.listenTo(l,"run:".concat(x),function(){return i.set("active",!0,$)}),e.listenTo(l,"stop:".concat(x),function(){return i.set("active",!1,$)})}return l&&l.get&&(e.commands=l.get("Commands")),e}return rm(r,a),r.prototype.tagName=function(){return this.model.get("tagName")},r.prototype.events=function(){return{click:"clicked"}},r.prototype.updateClassName=function(){var t=this.model,e=this.pfx,n=t.className,i=t.get("attributes").class,l="".concat(i||""," ").concat(e,"btn ").concat(n||"");this.$el.attr("class",l.trim())},r.prototype.updateAttributes=function(){var t=this,e=t.em,n=t.model,i=t.$el,l=n.get("attributes")||{},f=e&&e.t&&e.t("panels.buttons.titles.".concat(n.id));i.attr(l),f&&i.attr({title:f}),this.updateClassName()},r.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},r.prototype.updateActive=function(t,e,n){var i;n===void 0&&(n={});var l=this,f=l.model,d=l.commands,m=l.$el,g=l.activeCls,x=n.fromCollection,A=n.fromListen,$=f.get("context"),Z=f.get("options"),ut=f.command,yt={};ut&&(d&&(0,y.isString)(ut)?yt=d.get(ut)||{}:(0,y.isFunction)(ut)?yt=d.create({run:ut}):ut!==null&&(0,y.isObject)(ut)&&(yt=d.create(ut)),f.active?(!x&&((i=f.collection)===null||i===void 0||i.deactivateAll($,f)),f.set("active",!0,{silent:!0}).trigger("checkActive"),!A&&d.runCommand(yt,tc(tc({},Z),{sender:f})),yt.noStop&&f.set("active",!1)):(m.removeClass(g),!A&&d.stopCommand(yt,tc(tc({},Z),{sender:f,force:1}))))},r.prototype.updateDisable=function(){var t=this.disableCls,e=this.model.disable;this.$el[e?"addClass":"removeClass"](t)},r.prototype.checkActive=function(){var t=this,e=t.model,n=t.$el,i=t.activeCls;e.active?n.addClass(i):n.removeClass(i)},r.prototype.clicked=function(t){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},r.prototype.toggleActive=function(){var t=this.model,e=this.em,n=t.active,i=t.togglable;n&&!i||(t.active=!n,n?t.runDefaultCommand&&e.runDefault():t.stopDefaultCommand&&e.stopDefault())},r.prototype.render=function(){var t=this.model,e=t.get("label"),n=this.$el;return!t.get("el")&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this},r}(Sn);const im=om;var sm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const am=function(a){function r(t){var e=a.call(this,{collection:t})||this;return e.listenTo(e.collection,"add",e.addTo),e.listenTo(e.collection,"reset remove",e.render),e.className=e.pfx+"buttons",e}return sm(r,a),r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,i=t.get("el"),l=new im({el:i,model:t}).render().el;return n?n.appendChild(l):this.$el.append(l),l},r.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(n){return t.addToCollection(n,e)}),this.$el.append(e),this.$el.attr("class",(0,y.result)(this,"className")),this},r}(Sn);var lm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Vf=function(){return Vf=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Vf.apply(this,arguments)},cm=function(a){function r(t){var e=a.call(this,{model:t,el:t.get("el")})||this;return e.className=e.pfx+"panel",e.id=e.pfx+t.get("id"),e.listenTo(t,"change:appendContent",e.appendContent),e.listenTo(t,"change:content",e.updateContent),e.listenTo(t,"change:visible",e.toggleVisible),t.view=e,e}return lm(r,a),r.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},r.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},r.prototype.toggleVisible=function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},r.prototype.attributes=function(){return this.model.get("attributes")},r.prototype.initResize=function(){var t=this.em,e=t==null?void 0:t.Editor,n=this.model.get("resizable");if(e&&n){var i,l,f,d=n===!0?[1,1,1,1]:n,m=d.length,g=0;m==2?(i=d[0],f=d[0],l=d[1],g=d[1]):m==4&&(i=d[0],l=d[1],f=d[2],g=d[3]);var x=new e.Utils.Resizer(Vf({tc:i,cr:l,bc:f,cl:g,tl:0,tr:0,bl:0,br:0,appendTo:this.el,silentFrames:1,avoidContainerUpdate:1,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger("change:canvasOffset")},posFetcher:function(A,$){var Z=$.target,ut=A.style,yt=x.getConfig(),pt=yt.keyWidth,Bt=yt.keyHeight,Zt=A.getBoundingClientRect(),Pe=Z=="container",Le=ut[pt],Ke=ut[Bt];return{left:0,top:0,width:Le&&!Pe?parseFloat(Le):Zt.width,height:Ke&&!Pe?parseFloat(Ke):Zt.height}}},n));x.blur=function(){},x.focus(this.el)}},r.prototype.render=function(){var t=this.model.buttons,e=this.$el,n=this.ppfx,i="".concat(this.className," ").concat(this.id," ").concat(n,"one-bg ").concat(n,"two-color");if(e.addClass(i),this.toggleVisible(),t.length){var l=new am(t);e.append(l.render().el)}return e.append(this.model.get("content")),this},r}(Sn);const um=cm;var pm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const fm=function(a){function r(t){var e=a.call(this,{collection:t})||this;return e.listenTo(t,"add",e.addTo),e.listenTo(t,"reset",e.render),e.listenTo(t,"remove",e.onRemove),e.className=e.pfx+"panels",e}return pm(r,a),r.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},r.prototype.addTo=function(t){this.addToCollection(t)},r.prototype.addToCollection=function(t,e){var n=e||null,i=(this.config,t.get("el")),l=new um(t),f=l.render().el,d=t.get("appendTo");return i||(d?document.querySelector(d).appendChild(f):n?n.appendChild(f):this.$el.append(f)),l.initResize(),f},r.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each(function(i){return t.addToCollection(i,n)}),e.append(n),e.attr("class",this.className),this},r}(Sn);var dm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const hm=function(a){function r(t){var e=a.call(this,t,"Panels",Rf)||this;for(var n in e.panels=new nm(e,e.config.defaults),Rf)n in e.config||(e.config[n]=Rf[n]);return e}return dm(r,a),r.prototype.getPanels=function(){return this.panels},r.prototype.getPanelsEl=function(){return this.PanelsViewObj&&this.PanelsViewObj.el},r.prototype.addPanel=function(t){return this.panels.add(t)},r.prototype.removePanel=function(t){return this.panels.remove(t)},r.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},r.prototype.addButton=function(t,e){var n=this.getPanel(t);return n?n.get("buttons").add(e):null},r.prototype.removeButton=function(t,e){var n=this.getPanel(t);return n&&n.get("buttons").remove(e)},r.prototype.getButton=function(t,e){var n=this.getPanel(t);if(n){var i=n.get("buttons").where({id:e});return i.length?i[0]:null}return null},r.prototype.render=function(){return this.PanelsViewObj&&this.PanelsViewObj.remove(),this.PanelsViewObj=new fm(this.panels),this.PanelsViewObj.render().el},r.prototype.active=function(){this.getPanels().each(function(t){t.get("buttons").each(function(e){e.get("active")&&e.trigger("updateActive")})})},r.prototype.disableButtons=function(){this.getPanels().each(function(t){t.get("buttons").each(function(e){e.get("disable")&&e.trigger("change:disable")})})},r.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},r}(Dt),gm={stylePrefix:"cm-",inlineCss:!1};var mm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vm=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t};const ym=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return mm(r,a),r.prototype.build=function(t,e){e===void 0&&(e={});var n=e.em,i=vm(e,["em"]);if(e.cleanId&&n){var l=n.Css.getAll().toJSON().map(function(f){var d=f.selectors,m=d&&d.length===1&&d.models[0];return m&&m.isId()&&m.get("name")}).filter(Boolean);i.attributes||(i.attributes=function(f,d){var m=d.id;return m&&m[0]==="i"&&!f.get("script")&&!f.get("attributes").id&&l.indexOf(m)<0&&delete d.id,d})}return t.toHTML(i)},r}(S.Hn);var bm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return bm(r,a),r.prototype.build=function(t){var e=this,n=t.toJSON();return this.beforeEach(n),(0,y.each)(n,function(i,l){var f=n[l];if(f instanceof S.Hn)n[l]=e.build(f);else if(f instanceof S.FE){var d=f;n[l]=[],d.length&&d.forEach(function(m,g){n[l][g]=e.build(m)})}}),n},r.prototype.beforeEach=function(t){delete t.status},r}(S.Hn);const _m=wm;var Cm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),xm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Cm(r,a),r.prototype.mapModel=function(t){var e,n=this,i="",l=t.get("script-export")||t.get("script"),f=t.get("type"),d=t.get("components"),m=t.getId();if(l){var g=t.get("attributes");g=(0,y.extend)({},g,{id:m}),t.set("attributes",g,{silent:!0});var x=t.getScriptString(l),A=t.get("script-props");if(t.get("scriptUpdated")&&!A)this.mapJs[f+"-"+m]={ids:[m],code:x};else{var $=void 0,Z=this.mapJs[f];if(A&&($=t.__getScriptProps()),Z)Z.ids.push(m),$&&(Z.props[m]=$);else{var ut={ids:[m],code:x};$&&(ut.props=((e={})[m]=$,e)),this.mapJs[f]=ut}}}return d.forEach(function(yt){i+=n.mapModel(yt)}),i},r.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e,n,i="";for(var l in this.mapJs){var f=this.mapJs[l];if(f.code)if(f.props){if(e=f.code,n=void 0,(((n=e.toString().match(/\{([\s\S]*)\}/m))===null||n===void 0?void 0:n[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length===0)continue;i+=`
          var props = `.concat(JSON.stringify(f.props),`;
          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');
          var els = document.querySelectorAll(ids);
          for (var i = 0, len = els.length; i < len; i++) {
            var el = els[i];
            (`).concat(f.code,`.bind(el))(props[el.id]);
          }`)}else{var d="#"+f.ids.join(", #");i+=`
          var items = document.querySelectorAll('`.concat(d,`');
          for (var i = 0, len = items.length; i < len; i++) {
            (function(){
`).concat(f.code,`
}.bind(items[i]))();
          }`)}}return i},r}(S.Hn);const Sm=xm;var Xc,Om=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Hf=function(){return Hf=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Hf.apply(this,arguments)};(0,N.hasWin)()&&(Xc=rt(631),rt(531),rt(629),rt(210));var oh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Om(r,a),r.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0}},r.prototype.init=function(t){return(0,y.bindAll)(this,"onChange"),this.editor=Xc.fromTextArea(t,Hf({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},r.prototype.onChange=function(){this.trigger("update",this)},r.prototype.getEditor=function(){return this.editor},r.prototype.getElement=function(){return this.element},r.prototype.setElement=function(t){return this.element=t,this},r.prototype.refresh=function(){return this.getEditor().refresh(),this},r.prototype.focus=function(){return this.getEditor().focus(),this},r.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},r.prototype.setContent=function(t,e){var n=this;e===void 0&&(e={});var i=this.editor;i&&(i.setValue(t),i.autoFormatRange&&(Xc.commands.selectAll(i),i.autoFormatRange(i.getCursor(!0),i.getCursor(!1)),Xc.commands.goDocStart(i)),!e.noRefresh&&setTimeout(function(){return n.refresh()}))},r}(S.Hn);const Tm=oh;oh.prototype.CodeMirror=Xc;var Em=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),km=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a};const Pm=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Em(r,a),r.prototype.template=function(t){var e=t.pfx,n=t.codeName,i=t.label;return K(ih||(ih=km([`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `],[`
      <div class="`,'editor" id="',"",`">
        <div id="`,'title">',`</div>
        <div id="`,`code"></div>
      </div>
    `])),e,e,n,e,i,e)},r.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},r.prototype.render=function(){var t=this,e=t.model,n=t.pfx,i=t.$el,l=e.toJSON();return l.pfx=n,i.html(this.template(l)),i.attr("class","".concat(n,"editor-c")),i.find("#".concat(n,"code")).append(e.get("input")),this},r}(S.G7);var ih,Am=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),jm="CodeMirror",Mm=function(a){function r(t){var e=a.call(this,t,"CodeManager",gm)||this;e.EditorView=Pm;var n=e.config,i=n.pStylePrefix;return i&&(n.stylePrefix=i+n.stylePrefix),e.generators={},e.viewers={},e.defGenerators={html:new ym,css:new tf,json:new _m,js:new Sm},e.defViewers={CodeMirror:new Tm},e.loadDefaultGenerators().loadDefaultViewers(),e}return Am(r,a),r.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},r.prototype.getGenerator=function(t){return this.generators[t]},r.prototype.getGenerators=function(){return this.generators},r.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},r.prototype.getViewer=function(t){return this.viewers[t]},r.prototype.getViewers=function(){return this.viewers},r.prototype.createViewer=function(t){t===void 0&&(t={});var e=(0,y.isUndefined)(t.type)?jm:t.type,n=this.getViewer(e)&&this.getViewer(e).clone(),i=document.createElement("div"),l=document.createElement("textarea");return i.appendChild(l),n.set(t),n.init(l),n.setElement(i),n},r.prototype.updateViewer=function(t,e){t.setContent(e)},r.prototype.getCode=function(t,e,n){n===void 0&&(n={}),n.em=this.em;var i=this.getGenerator(e);return i?i.build(t,n):""},r.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},r.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},r.prototype.destroy=function(){},r}(Dt);const Lm=Mm;var Dm=rt(410),Nm=rt.n(Dm);const Im={maximumStackLength:500,trackSelection:!0};var Fm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Rs=function(){return Rs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Rs.apply(this,arguments)},Rm=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},dp=function(a){return a.avoidStore||a.noUndo},sh=function(a){return Object.keys(a.changedAttributes())},Vm=function(a){function r(t){var e=a.call(this,t,"UndoManager",Im)||this;e.config._disable&&(e.config.maximumStackLength=0);var n=!0;return e.um=new(Nm())(Rs({track:!0,register:[]},e.config)),e.um.changeUndoType("change",{condition:function(i){var l=i.get("_undo");if(l){var f=i.get("_undoexc");if((0,y.isArray)(f)&&sh(i).some(function(d){return f.indexOf(d)>=0}))return!1;if((0,y.isBoolean)(l)||(0,y.isArray)(l)&&sh(i).some(function(d){return l.indexOf(d)>=0}))return!0}return!1},on:function(i,l,f){var d=this;!this.beforeCache&&(this.beforeCache=i.previousAttributes());var m=f||l||{};if(m.noUndo&&setTimeout(function(){d.beforeCache=null}),!dp(m)){var g=i.toJSON({fromUndo:n}),x={object:i,before:this.beforeCache,after:g};if(this.beforeCache=null,!(0,y.isEmpty)(g))return x}}}),e.um.changeUndoType("add",{on:function(i,l,f){if(f===void 0&&(f={}),!dp(f)&&e.isRegistered(l))return{object:l,before:void 0,after:i,options:Rs(Rs({},f),{fromUndo:n})}}}),e.um.changeUndoType("remove",{on:function(i,l,f){if(f===void 0&&(f={}),!dp(f)&&e.isRegistered(l))return{object:l,before:i,after:void 0,options:Rs(Rs({},f),{fromUndo:n})}}}),e.um.changeUndoType("reset",{undo:function(i,l){i.reset(l,{fromUndo:n})},redo:function(i,l,f){i.reset(f,{fromUndo:n})},on:function(i,l){if(l===void 0&&(l={}),!dp(l)&&e.isRegistered(i))return{object:i,before:l.previousModels,after:Rm([],i.models,!0),options:Rs(Rs({},l),{fromUndo:n})}}}),e.um.on("undo redo",function(){t.trigger("change:canvasOffset"),t.getSelectedAll().map(function(i){return i.trigger("rerender:layer")})}),["undo","redo"].forEach(function(i){return e.um.on(i,function(){return t.trigger(i)})}),e}return Fm(r,a),r.prototype.postLoad=function(){var t=this.config,e=this.em;t.trackSelection&&e&&this.add(e.get("selected"))},r.prototype.add=function(t){return this.um.register(t),this},r.prototype.remove=function(t){return this.um.unregister(t),this},r.prototype.removeAll=function(){return this.um.unregisterAll(),this},r.prototype.start=function(){return this.um.startTracking(),this},r.prototype.stop=function(){return this.um.stopTracking(),this},r.prototype.undo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.undo(t),this},r.prototype.undoAll=function(){return this.um.undoAll(),this},r.prototype.redo=function(t){t===void 0&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.redo(t),this},r.prototype.redoAll=function(){return this.um.redoAll(),this},r.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},r.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},r.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},r.prototype.getStack=function(){return this.um.stack},r.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach(function(n){var i=n.get("magicFusionIndex");e.indexOf(i)<0&&(e.push(i),t.push(n))}),t},r.prototype.skip=function(t){this.stop(),t(),this.start()},r.prototype.getGroupedStack=function(){var t={},e=this.getStack();return e.forEach(function(n,i){var l=n.get("magicFusionIndex"),f=function(d,m){var g=d.attributes,x=g.type,A=g.after,$=g.before,Z=g.object,ut=g.options;return{index:m,type:x,after:A,before:$,object:Z,options:ut===void 0?{}:ut}}(n,i);t[l]?t[l].push(f):t[l]=[f]}),Object.keys(t).map(function(n){var i=t[n];return{index:i[i.length-1].index,actions:i,labels:(0,y.unique)(i.reduce(function(l,f){var d,m=(d=f.options)===null||d===void 0?void 0:d.action;return m&&l.push(m),l},[]))}})},r.prototype.goToGroup=function(t){var e=this;if(t){var n=this.getPointer(),i=t.index-n;(0,y.times)(Math.abs(i),function(){e[i<0?"undo":"redo"](!1)})}},r.prototype.getPointer=function(){return this.getStack().pointer},r.prototype.clear=function(){return this.um.clear(),this},r.prototype.getInstance=function(){return this.um},r.prototype.destroy=function(){this.clear().removeAll()},r}(Dt);const Hm=Vm;var ec=function(){return ec=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ec.apply(this,arguments)},Bf="_rte",ah=1,zf=0,lh=-1,hp=function(a,r){r===void 0&&(r="A");var t=a.selection()||{},e=t.anchorNode,n=t.focusNode,i=e==null?void 0:e.parentNode,l=n==null?void 0:n.parentNode;return(i==null?void 0:i.nodeName)==r||(l==null?void 0:l.nodeName)==r},gp="data-selectme",Qc={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:`<svg viewBox="0 0 24 24">
          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>`,name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&hp(a)?ah:zf},result:function(a){hp(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(gp,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:`<svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`,attributes:{title:"Wrap for style"},state:function(a){return a!=null&&a.selection()&&hp(a,"SPAN")?lh:zf},result:function(a){!hp(a,"SPAN")&&a.insertHTML("<span ".concat(gp,">").concat(a.selection(),"</span>"),{select:!0})}}},Bm=function(){function a(r,t,e){e===void 0&&(e={});var n=this;if(this.em=r,this.settings=e,t[Bf])return t[Bf];t[Bf]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var i=(e.actions||[]).map(function(g){var x=g;return(0,y.isString)(g)?x=ec({},Qc[g]):Qc[g.name]&&(x=ec(ec({},Qc[g.name]),g)),x}),l=i.length?i:Object.keys(Qc).map(function(g){return Qc[g]});e.classes=ec({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},e.classes);var f=e.classes,d=e.actionbar;if(this.actionbar=d,this.classes=f,this.actions=l,!d){var m=e.actionbarContainer;(d=document.createElement("div")).className=f.actionbar,m==null||m.appendChild(d),this.actionbar=d,l.forEach(function(g){return n.addAction(g)})}return e.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.destroy=function(){},a.prototype.setEl=function(r){this.el=r,this.doc=r.ownerDocument},a.prototype.updateActiveActions=function(){var r=this;this.getActions().forEach(function(t){var e=t.update,n=t.btn,i=r.classes,l=i.active,f=i.inactive,d=i.disabled,m=t.state,g=t.name,x=r.doc;if(n.className=n.className.replace(l,"").trim(),n.className=n.className.replace(f,"").trim(),n.className=n.className.replace(d,"").trim(),m)switch(m(r,x)){case ah:n.className+=" ".concat(l);break;case zf:n.className+=" ".concat(f);break;case lh:n.className+=" ".concat(d)}else x.queryCommandSupported(g)&&x.queryCommandState(g)&&(n.className+=" ".concat(l));e==null||e(r,t)})},a.prototype.enable=function(r){return this.enabled?this:this.__toggleEffects(!0,r)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(r,t){r===void 0&&(r=!1),t===void 0&&(t={});var e=r?N.on:N.off,n=this.el,i=this.doc;if(this.actionbarEl().style.display=r?"":"none",n.contentEditable="".concat(!!r),e(n,"mouseup keyup",this.updateActiveActions),e(i,"keydown",this.__onKeydown),e(i,"paste",this.__onPaste),this.enabled=r,r){var l=t.event;if(this.syncActions(),this.updateActiveActions(),l){var f=null;if(i.caretRangeFromPoint){var d=(0,N.getPointerEvent)(l);f=i.caretRangeFromPoint(d.clientX,d.clientY)}else l.rangeParent&&(f=i.createRange()).setStart(l.rangeParent,l.rangeOffset);var m=i.getSelection();m==null||m.removeAllRanges(),f&&(m==null||m.addRange(f))}n.focus()}return this},a.prototype.__onKeydown=function(r){var t=r,e=this.doc;t.key!=="Enter"||["insertOrderedList","insertUnorderedList"].some(function(n){return e.queryCommandState(n)})||(e.execCommand("insertLineBreak"),t.preventDefault())},a.prototype.__onPaste=function(r){var t=r.clipboardData||window.clipboardData,e=t.getData("text"),n=t.getData("text/html");if(e&&!n){r.preventDefault();var i=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,i)}},a.prototype.syncActions=function(){var r=this;this.getActions().forEach(function(t){if(r.actionbar&&(!t.state||t.state&&t.state(r,r.doc)>=0)){var e=t.event||"click";t.btn["on".concat(e)]=function(){t.result(r,t),r.updateActiveActions()}}})},a.prototype.addAction=function(r,t){t===void 0&&(t={});var e=t.sync,n=document.createElement("span"),i=r.icon,l=r.attributes||{};for(var f in n.className=this.classes.button,r.btn=n,l)n.setAttribute(f,l[f]);typeof i=="string"?n.innerHTML=i:n.appendChild(i),this.actionbarEl().appendChild(n),e&&(this.actions.push(r),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(r,t){this.doc.execCommand(r,!1,t)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(r,t){var e=(t===void 0?{}:t).select,n=this,i=n.em,l=n.doc,f=n.el,d=l.getSelection();if(d&&d.rangeCount){var m=(0,N.getModel)(f),g=l.createElement("div"),x=d.getRangeAt(0);x.deleteContents(),(0,y.isString)(r)?g.innerHTML=r:r&&g.appendChild(r),Array.prototype.slice.call(g.childNodes).forEach(function(A){x.insertNode(A)}),d.removeAllRanges(),d.addRange(x),f.focus(),e&&m&&(m.once("rte:disable",function(){var A=m.find("[".concat(gp,"]"))[0];A&&(i.setSelected(A),A.removeAttributes(gp))}),m.trigger("disable"))}},a}();const zm=Bm,Um={stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"]};var $m=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Wm=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(m){try{d(e.next(m))}catch(g){i(g)}}function f(m){try{d(e.throw(m))}catch(g){i(g)}}function d(m){var g;m.done?n(m.value):(g=m.value,g instanceof t?g:new t(function(x){x(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},qm=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(m){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(x){g=[6,x],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,m])}}},Gm=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Uf="change:canvasOffset frame:scroll component:update",Km=function(a){function r(t){var e=a.call(this,t,"RichTextEditor",Um)||this,n=e.config,i=n.pStylePrefix;if(i&&(n.stylePrefix=i+n.stylePrefix),e.pfx=n.stylePrefix,e.actions=n.actions||[],!(0,N.hasWin)())return e;var l=document.createElement("div");return l.className="".concat(i,"rte-toolbar ").concat(i,"one-bg"),e.toolbar=l,e.initRte(document.createElement("div")),(0,N.on)(l,"mousedown",function(f){return f.stopPropagation()}),e}return $m(r,a),r.prototype.destroy=function(){var t,e,n;(t=this.globalRte)===null||t===void 0||t.destroy(),(n=(e=this.customRte)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),(0,Ze.L_)(this.toolbar)},r.prototype.postRender=function(t){var e=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},r.prototype.initRte=function(t){var e=this.globalRte,n=this,i=n.em,l=n.pfx,f=n.actionbar,d=n.config,m=this.actions||Gm([],d.actions,!0),g={actionbar:"".concat(l,"actionbar"),button:"".concat(l,"action"),active:"".concat(l,"active"),inactive:"".concat(l,"inactive"),disabled:"".concat(l,"disabled")};return e?(e.em=i,e.setEl(t)):(e=new zm(i,t,{classes:g,actions:m,actionbar:f,actionbarContainer:this.toolbar}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},r.prototype.add=function(t,e){var n;e===void 0&&(e={}),e.name=t,(n=this.globalRte)===null||n===void 0||n.addAction(e,{sync:!0})},r.prototype.get=function(t){var e,n;return(e=this.globalRte)===null||e===void 0||e.getActions().forEach(function(i){i.name==t&&(n=i)}),n},r.prototype.getAll=function(){var t;return((t=this.globalRte)===null||t===void 0?void 0:t.getActions())||[]},r.prototype.remove=function(t){var e,n=this.getAll(),i=this.get(t);if(i){var l=i.btn,f=n.indexOf(i);(e=l==null?void 0:l.parentNode)===null||e===void 0||e.removeChild(l),n.splice(f,1)}return i},r.prototype.getToolbarEl=function(){return this.toolbar},r.prototype.updatePosition=function(){var t=this.em,e=this.toolbar,n="px",i=t.Canvas,l=e.style,f=i.getTargetToElementFixed(this.lastEl,e,{event:"rteToolbarPosUpdate",left:0});l.top=(f.top||0)+n,l.left=(f.left||0)+n},r.prototype.enable=function(t,e,n){return n===void 0&&(n={}),Wm(this,void 0,void 0,function(){var i,l,f,d,m;return qm(this,function(g){switch(g.label){case 0:return this.lastEl=t.el,l=(i=this).customRte,f=i.em,d=t.getChildrenContainer(),this.toolbar.style.display="",[4,l?l.enable(d,e):this.initRte(d).enable(n)];case 1:return m=g.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(Uf,this.updatePosition,this),f.on(Uf,this.updatePosition,this),f.trigger("rte:enable",t,m)),[2,m]}})})},r.prototype.hideToolbar=function(){var t=this.toolbar.style,e="-1000px";t.top=e,t.left=e,t.display="none"},r.prototype.disable=function(t,e){var n=this.em,i=this.customRte,l=t.getChildrenContainer();i?i.disable(l,e):e&&e.disable(),this.hideToolbar(),n&&(n.off(Uf,this.updatePosition,this),n.trigger("rte:disable",t,e))},r}(Dt);const Ym=Km;var $f=rt(790);const Jm={stylePrefix:"com-",defaults:{},strict:!0};var Zm=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),mp=function(){return mp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},mp.apply(this,arguments)},ch=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},uh=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],Xm=function(a){function r(t){var e=a.call(this,t,"Commands",Jm)||this;e.CommandAbstract=$f.default,e.defaultCommands={},e.commands={},e.active={};var n=e.config,i=n.pStylePrefix,l=e.defaultCommands;for(var f in i&&(n.stylePrefix=i+n.stylePrefix),Object.keys(n.defaults).forEach(function(d){var m=n.defaults[d];m.id&&e.add(m.id,m)}),l["tlb-delete"]={run:function(d){return d.runCommand("core:component-delete")}},l["tlb-clone"]={run:function(d){d.runCommand("core:copy"),d.runCommand("core:paste",{action:"clone-component"})}},l["tlb-move"]={run:function(d,m,g){g===void 0&&(g={});var x=d.getModel(),A=g&&g.event,$=g.target,Z=$||d.getSelected(),ut=$?[$]:ch([],d.getSelectedAll(),!0),yt=A&&A.type=="dragstart",pt={preserveSelected:1};if(!Z||!Z.get("draggable"))return x.logWarning("The element is not draggable");var Bt=Z.get("dmode")||x.get("dmode"),Zt=function(){return x.stopDefault(pt)},Pe=(0,y.includes)(["absolute","translate"],Bt);ut.forEach(function(Rn){return Rn.trigger("disable")}),yt?setTimeout(Zt,0):Zt();var Le=function(Rn){x.trigger("".concat(Or,":start"),Rn)},Ke=function(Rn){x.trigger(Or,Rn)},en=function(Rn,uo,xo){ut.forEach(function(So){return So.set("status","selected")}),d.select(ut),Z.emitUpdate(),x.trigger("".concat(Or,":end"),xo),setTimeout(function(){return x.runDefault(pt)}),(Pe||xo.cancelled)&&x.set("_cmpDrag",1)};if(Pe)d.runCommand("core:component-drag",{guidesInfo:1,mode:Bt,target:Z,onStart:Le,onDrag:Ke,onEnd:en,event:A});else{yt&&A.dataTransfer.setDragImage(Z.view.el,0,0);var gn=d.Commands.get("move-comp");gn.onStart=Le,gn.onDrag=Ke,gn.onEndMoveFromModel=en,gn.initSorterFromModels(ut)}ut.forEach(function(Rn){return Rn.set("status","freezed-selected")})}},l["core:undo"]=function(d){return d.UndoManager.undo()},l["core:redo"]=function(d){return d.UndoManager.redo()},uh.forEach(function(d){var m=d[2],g=rt(828)("./".concat(d[1])).default,x="core:".concat(d[0]);l[x]=g,m&&(l[m]=g,["run","stop"].forEach(function(A){t.on("".concat(A,":").concat(m),function(){for(var $=[],Z=0;Z<arguments.length;Z++)$[Z]=arguments[Z];return t.trigger.apply(t,ch(["".concat(A,":").concat(x)],$,!1))})}))}),n.model=t.Canvas,l)e.add(f,l[f]);return e}return Zm(r,a),r.prototype.add=function(t,e){var n=(0,y.isFunction)(e)?{run:e}:e;return n.stop||(n.noStop=!0),delete n.initialize,n.id=t,this.commands[t]=$f.default.extend(n),this},r.prototype.get=function(t){var e=this.commands[t];return(0,y.isFunction)(e)?(e=new e(this.config),this.commands[t]=e):e||this.em.logWarning("'".concat(t,"' command not found")),e},r.prototype.extend=function(t,e){e===void 0&&(e={});var n=this.get(t);if(n){var i=mp(mp({},n.constructor.prototype),e);this.add(t,i);var l=uh.filter(function(f){return"core:".concat(f[0])===t&&f[2]})[0];l&&this.add(l[2],i)}return this},r.prototype.has=function(t){return!!this.commands[t]},r.prototype.getAll=function(){return this.commands},r.prototype.run=function(t,e){return e===void 0&&(e={}),this.runCommand(this.get(t),e)},r.prototype.stop=function(t,e){return e===void 0&&(e={}),this.stopCommand(this.get(t),e)},r.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},r.prototype.getActive=function(){return this.active},r.prototype.runCommand=function(t,e){var n;if(e===void 0&&(e={}),t&&t.run){var i=this.em,l=this.config,f=t.id,d=i.Editor;this.isActive(f)&&!e.force&&l.strict||(n=d&&t.callRun(d,e),f&&t.stop&&!t.noStop&&!e.abort&&(this.active[f]=n))}return n},r.prototype.stopCommand=function(t,e){var n;if(e===void 0&&(e={}),t&&t.run){var i=this.em,l=this.config,f=t.id,d=i.Editor;(this.isActive(f)||e.force||!l.strict)&&(f&&delete this.active[f],n=t.callStop(d,e))}return n},r.prototype.create=function(t){return t.stop||(t.noStop=!0),new($f.default.extend(t))(this.config)},r.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},r}(Dt);const Qm=Xm,tv={sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]};var ev=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Co=function(){return Co=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Co.apply(this,arguments)},nv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},ph=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Wf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return ev(r,a),r.getDefaults=function(){return(0,y.result)(this.prototype,"defaults")},r.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.em=e.em;var n=this.getId()||"",i=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(i||n).replace(/ /g,"-"));var l=this.get("property");!this.get("id")&&this.set("id",l),!i&&this.set("name",(0,N.capitalize)(l).replace(/-/g," ")),this.on("change",this.__upTargets),r.callInit(this,t,e)},r.prototype.__getParentProp=function(){var t,e;return(e=(t=this.collection)===null||t===void 0?void 0:t.opts)===null||e===void 0?void 0:e.parentProp},r.prototype.__upTargets=function(t,e){var n,i=this;e===void 0&&(e={});var l=this.em.Styles,f=this.getName(),d=e.__clear,m=d?"":this.__getFullValue(e),g=this.__getParentProp(),x=this.changedAttributes(),A=(0,y.keys)(x).reduce(function(Bt,Zt){return Bt[Zt]=i.previous(Zt),Bt},{}),$=ph(ph([],(0,y.keys)(this.__getClearProps()),!0),["__p"],!1),Z=(0,y.keys)(x),ut=!e.__up&&!g&&(d||$.some(function(Bt){return Z.indexOf(Bt)>=0})),yt=this.get("onChange"),pt={property:this,from:A,to:x,value:m,opts:e};l.__trgEv(l.events.propertyUpdate,pt),yt&&yt(pt),ut&&this.__upTargetsStyle(((n={})[f]=m,n),e)},r.prototype.__upTargetsStyle=function(t,e){var n,i=(n=this.em)===null||n===void 0?void 0:n.get("StyleManager");i==null||i.addStyleTargets(Co(Co({},t),{__p:!!e.avoidStore}),e)},r.prototype._up=function(t,e){e===void 0&&(e={}),e.noTarget&&(e.__up=!0);var n=e.partial,i=nv(e,["partial"]);return t.__p=!(!i.avoidStore&&!n),this.set(t,Co(Co({},i),{avoidStore:t.__p}))},r.prototype.up=function(t,e){e===void 0&&(e={}),this.set(t,Co(Co({},e),{__up:!0}))},r.prototype.init=function(){},r.prototype.getId=function(){return this.get("id")},r.prototype.getType=function(){return this.get("type")},r.prototype.getName=function(){return this.get("property")},r.prototype.getLabel=function(t){var e;t===void 0&&(t={});var n=t.locale,i=n===void 0||n,l=this.getId(),f=this.get("name")||this.get("label");return i&&((e=this.em)===null||e===void 0?void 0:e.t("styleManager.properties.".concat(l)))||f},r.prototype.getValue=function(t){t===void 0&&(t={});var e=t.noDefault,n=this.get("value");return this.hasValue()||e?n:this.getDefaultValue()},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget(),n=this.get("value");return!(0,y.isUndefined)(n)&&n!==""&&!e},r.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},r.prototype.getStyle=function(t){var e;t===void 0&&(t={});var n=this.getName();return(e={})[t.camelCase?(0,N.camelCase)(n):n]=this.__getFullValue(t),e},r.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,y.isUndefined)(t)?this.get("defaults"):t)},r.prototype.upValue=function(t,e){e===void 0&&(e={});var n=t===null||t===""?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.clear=function(t){return t===void 0&&(t={}),this._up(this.__getClearProps(),Co(Co({},t),{__clear:!0})),this},r.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},r.prototype.getParent=function(){return this.__getParentProp()||null},r.prototype.isFull=function(){return!!this.get("full")},r.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},r.prototype.__getClearProps=function(){return{value:""}},r.prototype.setValue=function(t,e,n){e===void 0&&(e=!0),n===void 0&&(n={});var i=this.parseValue(t),l=!e;!l&&this.set({value:void 0},{avoidStore:l,silent:!0}),this.set(i,Co({avoidStore:l},n))},r.prototype.setValueFromInput=function(t,e,n){n===void 0&&(n={}),this.setValue(t,e,Co(Co({},n),{fromInput:1}))},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n={value:t},i="!important";if((0,y.isString)(t)&&t.indexOf(i)!==-1&&(n.value=t.replace(i,"").trim(),n.important=!0),!this.get("functionName")&&!e.complete)return n;var l=[],f="".concat(n.value),d=f.indexOf("(")+1,m=f.lastIndexOf(")"),g=f.substring(0,d-1);if(g&&(n.functionName=g),l.push(d),m>=0&&l.push(m),n.value=String.prototype.substring.apply(f,l),e.numeric){var x=parseFloat(n.value);n.unit=n.value.replace(x,""),n.value=x}return n},r.prototype.__getFullValue=function(t){var e=(t===void 0?{}:t).withDefault;return!this.hasValue()&&e?this.getDefaultValue():this.getFullValue()},r.prototype.getFullValue=function(t,e){e===void 0&&(e={});var n=this.get("functionName"),i=this.getDefaultValue(),l=(0,y.isUndefined)(t)?this.get("value"):t,f=!(0,y.isUndefined)(l)&&l!=="";if(l&&i&&l===i)return i;if(n&&f){var d=n==="url"?"'".concat(l.replace(/'|"/g,""),"'"):l;l="".concat(n,"(").concat(d,")")}return f&&this.get("important")&&!e.skipImportant&&(l="".concat(l," !important")),l||""},r.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},r.prototype.getParentTarget=function(){return this.get("parentTarget")||null},r.prototype.__parseFn=function(t){t===void 0&&(t="");var e=t.indexOf("(")+1,n=t.lastIndexOf(")");return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}},r.prototype.__checkVisibility=function(t){var e=t.target,n=t.component,i=t.sectors,l=n||e;if(!l)return!1;var f=this.getId(),d=this.getName(),m=this.get("toRequire"),g=this.get("requires"),x=this.get("requiresParent"),A=l.get("unstylable"),$=l.get("stylable-require"),Z=l.get("stylable");if((0,y.isArray)(Z)&&(Z=Z.indexOf(d)>=0),(0,y.isArray)(A)&&(Z=A.indexOf(d)<0),m&&(Z=!e||$&&($.indexOf(f)>=0||$.indexOf(d)>=0)),i&&g){var ut=(0,y.keys)(g);i.forEach(function(Zt){Zt.getProperties().forEach(function(Pe){if((0,y.includes)(ut,Pe.id)){var Le=g[Pe.id];Z=Z&&(0,y.includes)(Le,Pe.get("value"))}})})}if(x){var yt=n&&n.parent(),pt=yt&&yt.getEl();if(pt){var Bt=(0,N.hasWin)()?window.getComputedStyle(pt):{};(0,y.each)(x,function(Zt,Pe){Z=Z&&Bt[Pe]&&(0,y.includes)(Zt,Bt[Pe])})}else Z=!1}return!!Z},r}(S.Hn);const Jn=Wf;Wf.callParentInit=function(a,r,t,e){e===void 0&&(e={}),a.prototype.initialize.apply(r,[t,Co(Co({},e),{skipInit:1})])},Wf.callInit=function(a,r,t){t===void 0&&(t={}),!t.skipInit&&a.init(r,t)};var rv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),nc=function(){return nc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},nc.apply(this,arguments)},fh=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},dh=function(a){return a==="integer"||a==="number"},ov=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return rv(r,a),r.prototype.defaults=function(){return nc(nc({},Jn.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Jn.callParentInit(Jn,this,t,e);var n=this.em,i=new Yf(this.get("properties")||[],{em:n,parentProp:this});this.set("properties",i,{silent:!0}),this.listenTo(i,"change",this.__upProperties),Jn.callInit(this,t,e)},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),r.prototype.getProperties=function(){return fh([],this.get("properties").models,!0)},r.prototype.getProperty=function(t){return this.properties.filter(function(e){return e.getId()===t||e.getName()===t})[0]},r.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},r.prototype.isDetached=function(){return!!this.get("detached")},r.prototype.getValues=function(t){var e=(t===void 0?{}:t).byName;return this.getProperties().reduce(function(n,i){return n[e?i.getName():i.getId()]="".concat(i.__getFullValue()),n},{})},r.prototype.getSeparator=function(){return this.getSplitSeparator()},r.prototype.getJoin=function(){return this.__getJoin()},r.prototype.getStyleFromProps=function(t){var e;t===void 0&&(t={});var n=this.getName(),i=this.__getJoin(),l=this.get("toStyle"),f=this.getValues(),d={};if(l)d=l(f,{join:i,name:n,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())d=f;else{var m=this.getProperties().map(function(g){return g.__getFullValue({withDefault:1})}).filter(Boolean).join(i);(e={})[n]=m,d=e}return this.isDetached()?d[n]="":(d[n]=d[n]||"",d=nc(nc({},d),this.getProperties().reduce(function(g,x){return g[x.getName()]="",g},{}))),t.camelCase?Object.keys(d).reduce(function(g,x){return g[(0,N.camelCase)(x)]=d[x],g},{}):d},r.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},r.prototype.__upProperties=function(t,e){if(e===void 0&&(e={}),!e.__up&&!e.__clearIn){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},r.prototype.__upTargetsStyleProps=function(t,e){var n;t===void 0&&(t={});var i=this.getStyleFromProps();if(this.isDetached()&&e){var l=e.getName();(n={})[l]=i[l],i=n}this.__upTargetsStyle(i,t)},r.prototype._up=function(t,e){return e===void 0&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),Jn.prototype._up.call(this,t,e),this},r.prototype.getStyle=function(t){return this.getStyleFromProps(t)},r.prototype.__getFullValue=function(t){return t===void 0&&(t={}),this.isDetached()||t.__clear?"":this.getStyleFromProps()[this.getName()]||""},r.prototype.__getJoin=function(){var t=this.get("join");return(0,y.isString)(t)?t:this.get("separator")},r.prototype.__styleHasProps=function(t){t===void 0&&(t={});var e=this.getName(),n=this.getProperties().map(function(i){return i.getName()});return fh([e],n,!0).some(function(i){return!(0,y.isUndefined)(t[i])&&t[i]!==""})},r.prototype.__splitValue=function(t,e){return t.split(e).map(function(n){return n.trim()}).filter(Boolean)},r.prototype.__splitStyleName=function(t,e,n){return this.__splitValue(t[e]||"",n)},r.prototype.__getSplitValue=function(t,e){t===void 0&&(t="");var n=(e===void 0?{}:e).byName,i=this.getProperties(),l=i.length===4&&i.every(function(m){return dh(m.getType())}),f=this.__splitValue(t,this.getSplitSeparator()),d={};return i.forEach(function(m,g){var x=f[g],A=(0,y.isUndefined)(x)?"":x;if(l){var $=f.length;A=f[g]||f[g%$+($!=1&&$%2?1:0)]||A}var Z=n?m.getName():m.getId();d[Z]=A||""}),d},r.prototype.__getPropsFromStyle=function(t,e){if(t===void 0&&(t={}),e===void 0&&(e={}),!this.__styleHasProps(t))return null;var n=e.byName,i=this.getName(),l=this.getProperties(),f=this.getSplitSeparator(),d=this.get("fromStyle"),m=d?d(t,{property:this,name:i,separator:f}):{};return d||(m=this.__getSplitValue(t[i]||"",{byName:n}),l.forEach(function(g){var x=t[g.getName()],A=n?g.getName():g.getId();(0,y.isUndefined)(x)||x===""||(m[A]=x)})),m},r.prototype.__setProperties=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.getProperties().forEach(function(i){var l=t[i.getId()];i.__getFullValue()!==l&&i.upValue(l,e)});var n=(0,y.keys)(t).map(function(i){return t[i]}).join(" ");this.set("value",n,{silent:!0})},r.prototype.clear=function(){var t=this;return this.getProperties().map(function(e){return e.clear({__clearIn:!t.isDetached()})}),Jn.prototype.clear.call(this),this},r.prototype.hasValue=function(t){return this.getProperties().some(function(e){return e.hasValue(t)})},r.prototype.getFullValue=function(){return this.__getFullValue()},r.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},r}(Jn);const rc=ov;var iv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),vp=function(){return vp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},vp.apply(this,arguments)},sv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return iv(r,a),r.prototype.defaults=function(){return{values:{}}},r.prototype.initialize=function(){var t=this.collection;this.prop=t==null?void 0:t.prop},r.prototype.getId=function(){return this.cid},r.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},r.prototype.getValues=function(t){t===void 0&&(t={});var e=this.get("values");return t.camelCase?Object.keys(e).reduce(function(n,i){return n[(0,N.camelCase)(i)]=e[i],n},{}):e},r.prototype.getLabel=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.getLayerLabel(this)},r.prototype.isSelected=function(){var t;return((t=this.prop)===null||t===void 0?void 0:t.getSelectedLayer())===this},r.prototype.select=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.selectLayer(this)},r.prototype.remove=function(){var t;return(t=this.prop)===null||t===void 0?void 0:t.removeLayer(this)},r.prototype.move=function(t){var e;return(e=this.prop)===null||e===void 0?void 0:e.moveLayer(this,t)},r.prototype.getStylePreview=function(t){var e;return t===void 0&&(t={}),(e=this.prop)===null||e===void 0?void 0:e.getStylePreview(this,t)},r.prototype.hasPreview=function(){var t;return!!(!((t=this.prop)===null||t===void 0)&&t.get("preview"))},r.prototype.upValues=function(t){return t===void 0&&(t={}),this.set("values",vp(vp({},this.getValues()),t))},r}(S.Hn);const av=sv;var lv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),hh=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return lv(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={}),this.prop=e.prop},r}(S.FE);const cv=hh;hh.prototype.model=av;var uv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),cs=function(){return cs=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},cs.apply(this,arguments)},pv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},fv=/,(?![^\(]*\))/,dv=/\s(?![^(]*\))/,hv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return uv(r,a),r.prototype.defaults=function(){return cs(cs({},rc.getDefaults()),{layers:[],layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),rc.callParentInit(rc,this,t,e);var n=this.get("layers"),i=new cv(n,{prop:this});i.property=this,i.properties=this.get("properties"),this.set("layers",i,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(i,"add remove",this.__upLayers),rc.callInit(this,t,e)},r.prototype.getLayers=function(){return this.__getLayers().models},r.prototype.__getLayers=function(){return this.get("layers")},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.__getLayers().at(t)||void 0},r.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},r.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},r.prototype.selectLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},r.prototype.moveLayer=function(t,e){e===void 0&&(e=0);var n=t?t.getIndex():-1;n>=0&&(0,y.isNumber)(e)&&e>=0&&e<this.getLayers().length&&n!==e&&(this.removeLayer(t),this.__getLayers().add(t,{at:e}))},r.prototype.addLayer=function(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={};return this.getProperties().forEach(function(i){var l=i.getId(),f=t[l];n[l]=(0,y.isUndefined)(f)?i.getDefaultValue():f}),this.__getLayers().push({values:n},e)},r.prototype.removeLayer=function(t){return this.__getLayers().remove(t)},r.prototype.removeLayerAt=function(t){t===void 0&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},r.prototype.getLayerLabel=function(t){var e="";if(t){var n=this.get("layerLabel"),i=t.getValues(),l=t.getIndex();if(n)e=n(t,{index:l,values:i,property:this});else{var f=[];this.getProperties().map(function(d){f.push(i[d.getId()])}),e=f.filter(Boolean).join(" ")}}return e},r.prototype.getStyleFromLayer=function(t,e){var n;e===void 0&&(e={});var i,l=this.__getJoin(),f=this.__getJoinLayers(),d=this.get("toStyle"),m=this.getName(),g=t.getValues();if(d)i=d(g,{join:l,joinLayers:f,name:m,layer:t,property:this});else{var x=this.getProperties().map(function(A){var $=A.getName(),Z=g[A.getId()],ut=(0,y.isUndefined)(Z)?A.getDefaultValue():Z;if(e.number&&dh(A.getType())){var yt=A.parseValue(Z,e.number);ut="".concat(yt.value).concat(yt.unit)}return{name:$,value:ut}});i=this.isDetached()?x.reduce(function(A,$){return A[$.name]=$.value,A},{}):((n={})[this.getName()]=x.map(function(A){return A.value}).join(l),n)}return e.camelCase?Object.keys(i).reduce(function(A,$){return A[(0,N.camelCase)($)]=i[$],A},{}):i},r.prototype.getStylePreview=function(t,e){e===void 0&&(e={});var n={};return this.get("preview")&&(n=this.getStyleFromLayer(t,e)),n},r.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,y.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},r.prototype.__upProperties=function(t,e){var n;e===void 0&&(e={});var i=this.getSelectedLayer();i&&(i.upValues(((n={})[t.getId()]=t.__getFullValue(),n)),e.__up||this.__upTargetsStyleProps(e))},r.prototype.__upLayers=function(t,e,n){this.__upTargetsStyleProps(n||e)},r.prototype.__upTargets=function(t,e){if(e===void 0&&(e={}),!e.__select)return Jn.prototype.__upTargets.call(this,t,e)},r.prototype.__upTargetsStyleProps=function(t){t===void 0&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(),t)},r.prototype.__upTargetsStyle=function(t,e){return Jn.prototype.__upTargetsStyle.call(this,t,e)},r.prototype.__upSelected=function(t,e){var n=(t===void 0?{}:t).noEvent;e===void 0&&(e={});var i=this.em.Styles,l=this.getSelectedLayer(),f=l==null?void 0:l.getValues();f&&this.getProperties().forEach(function(d){var m,g=(m=f[d.getId()])!==null&&m!==void 0?m:"";d.__getFullValue()!==g&&d.upValue(g,cs(cs({},e),{__up:!0}))}),!n&&i.__trgEv(i.events.layerSelect,{property:this})},r.prototype._up=function(t,e){e===void 0&&(e={});var n=t.__layers,i=n===void 0?[]:n,l=pv(t,["__layers"]);return!this.isDetached()&&this.__setLayers(i),this.__upSelected({noEvent:!0},e),Jn.prototype._up.call(this,l,e),this},r.prototype.__setLayers=function(t){t===void 0&&(t=[]);var e=this.__getLayers(),n=t.map(function(i){return{values:i}});e.length===n.length?n.map(function(i,l){var f;return(f=e.at(l))===null||f===void 0?void 0:f.upValues(i.values)}):this.__getLayers().reset(n),this.__upSelected({noEvent:!0})},r.prototype.__parseValue=function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(fv).map(function(i){return i.trim()}).map(function(i){return e.__parseLayer(i)}).filter(Boolean),n},r.prototype.__parseLayer=function(t){var e=this.get("parseLayer"),n=t.split(dv),i=this.getProperties();return e?e({value:t,values:n}):i.reduce(function(l,f,d){var m=n[d];return l[f.getId()]=(0,y.isUndefined)(m)?f.getDefaultValue():m,l},{})},r.prototype.__getLayersFromStyle=function(t){var e=this;if(t===void 0&&(t={}),!this.__styleHasProps(t))return null;var n=this.getName(),i=this.getProperties(),l=this.getLayerSeparator(),f=this.get("fromStyle"),d=f?f(t,{property:this,name:n,separatorLayers:l}):[];if(!f){var m=this.__splitStyleName(t,n,l).map(function(g){return g.split(e.getSplitSeparator())}).map(function(g){var x={};return i.forEach(function(A,$){var Z=g[$];x[A.getId()]=(0,y.isUndefined)(Z)?A.getDefaultValue():Z}),x});i.forEach(function(g){var x=g.getId();e.__splitStyleName(t,g.getName(),l).map(function(A){var $;return($={})[x]=A||g.getDefaultValue(),$}).forEach(function(A,$){m[$]=m[$]?cs(cs({},m[$]),A):A})}),d=m}return(0,y.isArray)(d)?d:[d]},r.prototype.getStyle=function(t){return t===void 0&&(t={}),this.getStyleFromLayers(t)},r.prototype.getStyleFromLayers=function(t){var e=this;t===void 0&&(t={});var n={},i=this.getName(),l=this.getLayers(),f=this.getProperties();if(l.map(function(m){return e.getStyleFromLayer(m,t)}).forEach(function(m){(0,y.keys)(m).map(function(g){n[g]||(n[g]=[]),n[g].push(m[g])})}),(0,y.keys)(n).map(function(m){n[m]=n[m].join(e.__getJoinLayers())}),this.isDetached())n[i]="",!l.length&&f.map(function(m){n[m.getName()]=""});else{var d=f.reduce(function(m,g){return m[g.getName()]="",m},{});n[i]=n[i]||"",n=cs(cs({},n),d)}return n},r.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),e=this.get("layerSeparator");return t||((0,y.isString)(e)?e:t)},r.prototype.__getFullValue=function(){return this.get("detached")?"":this.getStyleFromLayers()[this.getName()]},r.prototype.hasValue=function(t){t===void 0&&(t={});var e=t.noParent&&this.getParentTarget();return this.getLayers().length>0&&!e},r.prototype.clear=function(t){return t===void 0&&(t={}),this.__getLayers().reset(),this.__upTargetsStyleProps(t),Jn.prototype.clear.call(this),this},r.prototype.__canClearProp=function(){return!1},r}(rc);const gv=hv;var mv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),yp=function(){return yp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},yp.apply(this,arguments)},vv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},yv=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},qf="data-clear-style",bv=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this;(0,y.bindAll)(e,"__change","__updateStyle");var n=t.config||{},i=n.em;e.config=n,e.em=i,e.pfx=n.stylePrefix||"",e.ppfx=n.pStylePrefix||"",e.__destroyFn=e.destroy?e.destroy.bind(e):function(){};var l=e.model;l.view=e,e.onValueChange=(0,y.debounce)(e.onValueChange.bind(e),10),e.updateStatus=(0,y.debounce)(e.updateStatus.bind(e),0),e.listenTo(l,"destroy remove",e.remove),e.listenTo(l,"change:visible",e.updateVisibility),e.listenTo(l,"change:name change:className change:full",e.render),e.listenTo(l,"change:value",e.onValueChange),e.listenTo(l,"change:parentTarget",e.updateStatus),e.listenTo(i,"change:device",e.onValueChange);var f=e.init&&e.init.bind(e);return f&&f(),e}return mv(r,a),r.prototype.events=function(){var t;return(t={change:"inputValueChanged"})["click [".concat(qf,"]")]="clear",t},r.prototype.template=function(t){var e=this.pfx,n=this.ppfx;return`
      <div class="`.concat(e,`label" data-sm-label></div>
      <div class="`).concat(n,`fields" data-sm-fields></div>
    `)},r.prototype.templateLabel=function(t){var e=this.pfx,n=this.em,i=t.parent,l=t.attributes,f=l.icon,d=f===void 0?"":f,m=l.info,g=m===void 0?"":m,x=n==null?void 0:n.getConfig().icons,A=(x==null?void 0:x.close)||"";return`
      <span class="`.concat(e,"icon ").concat(d,'" title="').concat(g,`">
        `).concat(t.getLabel(),`
      </span>
      `).concat(i?"":'<div class="'.concat(e,'clear" style="display: none" ').concat(qf,">").concat(A,"</div>"),`
    `)},r.prototype.templateInput=function(t){return`
      <div class="`.concat(this.ppfx,`field">
        <input placeholder="`).concat(t.getDefaultValue(),`"/>
      </div>
    `)},r.prototype.remove=function(){var t=this;return S.G7.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(e){return t[e]=null}),this.__destroyFn(this._getClbOpts()),this},r.prototype.updateStatus=function(){var t,e=this,n=e.model,i=e.pfx,l=e.ppfx,f=e.config,d="".concat(l,"four-color"),m="".concat(l,"color-warn"),g=this.$el.children(".".concat(i,"label")),x=this.getClearEl(),A=x?x.style:{};g.removeClass("".concat(d," ").concat(m)),A.display="none",n.hasValue({noParent:!0})&&f.highlightChanged?(g.addClass(d),f.clearProperties&&(A.display="")):n.hasValue()&&f.highlightComputed&&g.addClass(m),(t=this.parent)===null||t===void 0||t.updateStatus()},r.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},r.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(qf,"]"))),this.clearEl},r.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)},r.prototype.onValueChange=function(t,e,n){this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},r.prototype.setValue=function(t){var e=this.model,n=(0,y.isUndefined)(t)||t===""?e.getDefaultValue():t;if(this.update)return this.__update(n);this.__setValueInput(n)},r.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},r.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},r.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},r.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(yp(yp({},this._getClbOpts()),{value:t}))},r.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.emit&&this.emit.bind(this);n&&n.apply(void 0,yv([this._getClbOpts()],t,!1))},r.prototype.__updateStyle=function(t,e){e===void 0&&(e={});var n=e.complete,i=e.partial,l=(vv(e,["complete","partial"]),this.model),f=n!==!1&&i!==!0;(0,N.isObject)(t)?l.__upTargetsStyle(t,{avoidStore:!f}):l.upValue(t,{partial:!f})},r.prototype._getClbOpts=function(){var t=this,e=t.model;return{el:t.el,createdEl:t.createdEl,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},r.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,n=t.model,i=t.el,l=t.$el,f=n.getName(),d=n.getType(),m=n.get("className")||"",g="".concat(e,"property"),x=d==="number"?"".concat(e).concat(d," ").concat(e,"integer"):"".concat(e).concat(d);this.createdEl&&this.__destroyFn(this._getClbOpts()),l.empty().append(this.template(n)),l.find("[data-sm-label]").append(this.templateLabel(n));var A=this.create&&this.create.bind(this);this.createdEl=A&&A(this._getClbOpts()),l.find("[data-sm-fields]").append(this.createdEl||this.templateInput(n)),i.className="".concat(g," ").concat(x," ").concat(g,"__").concat(f," ").concat(m).trim(),i.className+=n.isFull()?" ".concat(g,"--full"):"";var $=this.onRender&&this.onRender.bind(this);return $&&$(),this.setValue(n.getValue()),this},r.prototype.onRender=function(){},r}(S.G7);const Vs=bv;var wv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_v=function(a){function r(t){var e=a.call(this,t)||this;e.config=t.config||{},e.pfx=e.config.stylePrefix||"",e.properties=[],e.parent=t.parent;var n=e.collection;return e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.render),e}return wv(r,a),r.prototype.addTo=function(t,e,n){this.add(t,null,n)},r.prototype.add=function(t,e,n){n===void 0&&(n={});var i=this.parent,l=this.config,f=e||this.el,d=new t.typeView({model:t,config:l});i&&(d.parent=i),d.render();var m=d.el;this.properties.push(d),(0,Ze.$Q)(f,m,n.at)},r.prototype.remove=function(){return S.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},r.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},r.prototype.render=function(){var t=this,e=this.$el,n=this.pfx;this.clearItems();var i=document.createDocumentFragment();return this.collection.forEach(function(l){return t.add(l,i)}),e.empty(),e.append(i),e.attr("class","".concat(n,"properties")),this},r}(S.G7);const Gf=_v;var Cv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),bp=function(){return bp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},bp.apply(this,arguments)};const tu=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Cv(r,a),r.prototype.templateInput=function(){var t=this.pfx;return`
      <div class="`.concat(t,"field ").concat(t,`composite">
        <span id="`).concat(t,`input-holder"></span>
      </div>
    `)},r.prototype.remove=function(){var t;return(t=this.props)===null||t===void 0||t.remove(),Vs.prototype.remove.apply(this,arguments),this},r.prototype.onValueChange=function(){},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.get("properties");if(n.length&&!this.props){var i=e.isDetached(),l=new Gf({config:bp(bp({},this.config),{highlightComputed:i,highlightChanged:i}),collection:n,parent:this});l.render(),this.$el.find("#".concat(t,"input-holder")).append(l.el),this.props=l}},r.prototype.clearCached=function(){Vs.prototype.clearCached.apply(this,arguments),delete this.props},r}(Vs);var xv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return xv(r,a),r.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},r.prototype.template=function(){var t=this,e=t.pfx,n=t.ppfx,i=t.em,l=i==null?void 0:i.getConfig().icons,f=(l==null?void 0:l.close)||"",d=(l==null?void 0:l.move)||"";return`
      <div class="`.concat(e,`label-wrp">
        <div id="`).concat(e,'move" class="').concat(n,`no-touch-actions" data-move-layer>
          `).concat(d,`
        </div>
        <div id="`).concat(e,`label" data-label></div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`layer-preview" style="display: none" data-preview-box>
          <div id="`).concat(e,'preview" class="').concat(e,`layer-preview-cnt" data-preview></div>
        </div>
        <div id="`).concat(e,'close-layer" class="').concat(e,`btn-close" data-close-layer>
          `).concat(f,`
        </div>
      </div>
      <div id="`).concat(e,`inputs" data-properties></div>
    `)},r.prototype.initialize=function(t){t===void 0&&(t={});var e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||"",this.ppfx=n.pStylePrefix||"",this.propertyView=t.propertyView;var i=this.propertyView.model;this.listenTo(e,"destroy remove",this.remove),this.listenTo(e,"change:values",this.updateLabel),this.listenTo(i,"change:selectedLayer",this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data("model",e)},r.prototype.initSorter=function(){var t;(t=this.sorter)===null||t===void 0||t.startSort(this.el)},r.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},r.prototype.select=function(){this.model.select()},r.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},r.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},r.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},r.prototype.updateLabel=function(){var t=this.model,e=t.getLabel();if(this.getLabelEl().innerHTML=e,t.hasPreview()){var n=this.getPreviewEl(),i=t.getStylePreview({number:{min:-3,max:3}}),l=(0,y.keys)(i).map(function(f){return"".concat(f,":").concat(i[f])}).join(";");n.setAttribute("style",l)}},r.prototype.updateVisibility=function(){var t,e=this,n=e.pfx,i=e.model,l=e.propertyView,f=this.getPropertiesWrapper(),d=i.isSelected();f.style.display=d?"":"none",this.$el[d?"addClass":"removeClass"]("".concat(n,"active")),d&&f.appendChild((t=l.props)===null||t===void 0?void 0:t.el)},r.prototype.render=function(){var t=this,e=t.el,n=t.pfx,i=t.model;return e.innerHTML=this.template(),e.className="".concat(n,"layer"),i.hasPreview()&&(e.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},r}(S.G7);const Ov=Sv;var Tv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ev=function(a){function r(t){var e=a.call(this,t)||this,n=e.collection,i=t.config||{},l=i.em,f=i.stylePrefix||"",d=i.pStylePrefix||"";e.config=i,e.pfx=f,e.ppfx=d,e.propertyView=t.propertyView,e.className="".concat(f,"layers ").concat(d,"field"),e.listenTo(n,"add",e.addTo),e.listenTo(n,"reset",e.reset),e.items=[];var m=l==null?void 0:l.Utils;return e.sorter=m?new m.Sorter({container:e.el,ignoreViewChildren:1,containerSel:".".concat(f,"layers"),itemSel:".".concat(f,"layer"),pfx:i.pStylePrefix}):"",n.view=e,e.$el.data("model",n),e.$el.data("collection",n),e}return Tv(r,a),r.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},r.prototype.addToCollection=function(t,e,n){var i=e||null,l=this,f=l.propertyView,d=l.config,m=l.sorter,g=l.$el,x=new Ov({model:t,config:d,sorter:m,propertyView:f}),A=x.render().el;if(this.items.push(x),i)i.appendChild(A);else if(n!==void 0){var $="before";g.children().length===n&&(n--,$="after"),n<0?g.append(A):g.children().eq(n)[$](A)}else g.append(A);return A},r.prototype.reset=function(t,e){this.clearItems(),this.render()},r.prototype.remove=function(){return this.clearItems(),S.G7.prototype.remove.apply(this,arguments),this},r.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},r.prototype.render=function(){var t=this,e=this.$el,n=this.sorter,i=document.createDocumentFragment();return e.empty(),this.collection.forEach(function(l){return t.addToCollection(l,i)}),e.append(i),e.attr("class",this.className),n&&(n.plh=null),this},r}(S.G7);const kv=Ev;var Pv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),oc=function(){return oc=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},oc.apply(this,arguments)},Av=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Pv(r,a),r.prototype.events=function(){return oc(oc({},tu.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},r.prototype.templateInput=function(){var t=this.pfx,e=this.em,n=e==null?void 0:e.getConfig().icons,i=(n==null?void 0:n.plus)||"+";return`
      <div class="`.concat(t,"field ").concat(t,`stack">
        <button type="button" id="`).concat(t,`add" data-add-layer>
          `).concat(i,`
        </button>
        <div data-layers-wrapper></div>
      </div>
    `)},r.prototype.init=function(){var t=this.model;this.listenTo(t.__getLayers(),"change reset",this.updateStatus)},r.prototype.addLayer=function(){this.model.addLayer({},{at:0})},r.prototype.setValue=function(){},r.prototype.remove=function(){var t;return(t=this.layersView)===null||t===void 0||t.remove(),tu.prototype.remove.apply(this,arguments),this},r.prototype.clearCached=function(){tu.prototype.clearCached.apply(this,arguments),delete this.layersView},r.prototype.onRender=function(){var t=this,e=t.model,n=t.el,i=t.config,l=e.get("properties");if(l.length&&!this.props){var f=new Gf({config:oc(oc({},i),{highlightComputed:!1,highlightChanged:!1}),collection:l,parent:this});f.render();var d=new kv({collection:e.__getLayers(),config:i,propertyView:this});d.render(),n.querySelector("[data-layers-wrapper]").appendChild(d.el),this.props=f,this.layersView=d}},r}(tu);const jv=Av;var Mv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),wp=function(){return wp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},wp.apply(this,arguments)};const Lv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Mv(r,a),r.prototype.events=function(){return wp(wp({},Vs.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},r.prototype.templateInput=function(){var t,e=this.pfx,n=this.em,i=(t=this.em)===null||t===void 0?void 0:t.getConfig().icons,l=i==null?void 0:i.close;return`
      <div class="`.concat(e,"field ").concat(e,`file">
        <div id='`).concat(e,`input-holder'>
          <div class="`).concat(e,`btn-c">
            <button class="`).concat(e,'btn" id="').concat(e,`images" type="button" data-open-assets>
              `).concat(n.t("styleManager.fileButton"),`
            </button>
          </div>
          <div style="clear:both;"></div>
        </div>
        <div id="`).concat(e,'preview-box" class="').concat(e,`preview-file" data-preview-box>
          <div id="`).concat(e,'preview-file" class="').concat(e,`preview-file-cnt" data-preview></div>
          <div id="`).concat(e,'close" class="').concat(e,'preview-file-close" data-clear-asset>').concat(l,`</div>
        </div>
      </div>
    `)},r.prototype.__setValueInput=function(t){var e=this.model,n=this.el,i=e.getDefaultValue(),l=n.querySelector("[data-preview-box]"),f=n.querySelector("[data-preview]");l.style.display=t&&t!==i?"":"none",f.style.backgroundImage=t||e.getDefaultValue()},r.prototype.openAssetManager=function(){var t,e=this,n=(t=this.em)===null||t===void 0?void 0:t.Assets;n==null||n.open({select:function(i,l){var f=(0,y.isString)(i)?i:i.get("src");e.model.upValue(f,{partial:!l}),l&&n.close()},types:["image"],accept:"image/*"})},r}(Vs);var Dv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Hs=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Dv(r,a),r.prototype.templateInput=function(t){return""},r.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},r.prototype.setValue=function(t){},r.prototype.onRender=function(){var t=this,e=t.ppfx,n=t.model,i=t.el;if(!this.inputInst){var l=n.input;l.ppfx=e,l.render(),i.querySelector(".".concat(e,"fields")).appendChild(l.el),this.input=l.inputEl.get(0),this.inputInst=l}},r.prototype.clearCached=function(){Vs.prototype.clearCached.apply(this,arguments),this.inputInst=null},r}(Vs);var Nv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const Iv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Nv(r,a),r.prototype.setValue=function(t){var e;(e=this.inputInst)===null||e===void 0||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},r.prototype.remove=function(){var t=this;Hs.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),["inputInst","$color"].forEach(function(n){return t[n]=null}),this},r.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},r.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,n=e.ppfx,i=e.model,l=e.em,f=e.el,d=new Vc({target:l,model:i,ppfx:n,onChange:this.__handleChange}).render();f.querySelector(".".concat(n,"fields")).appendChild(d.el),this.input=(t=d.inputEl)===null||t===void 0?void 0:t.get(0),this.inputInst=d}},r}(Hs);var Fv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),_p=function(){return _p=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},_p.apply(this,arguments)},gh=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};const Kf=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Fv(r,a),r.prototype.defaults=function(){return _p(_p({},Jn.getDefaults()),{options:[],full:0})},r.prototype.getOptions=function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]},r.prototype.getOption=function(t){var e=this,n=(0,N.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(i){return e.getOptionId(i)===n})[0]||null},r.prototype.setOptions=function(t){return t===void 0&&(t=[]),this.set("options",t),this},r.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(gh(gh([],e,!0),[t],!1))}return this},r.prototype.getOptionId=function(t){return(0,N.isDef)(t.id)?t.id:t.value},r.prototype.getOptionLabel=function(t,e){var n;e===void 0&&(e={});var i=e.locale,l=i===void 0||i,f=((0,y.isString)(t)?this.getOption(t):t)||{},d=this.getOptionId(f),m=f.label||f.name||d,g=e.property||this.getId();return l&&((n=this.em)===null||n===void 0?void 0:n.t("styleManager.options.".concat(g,".").concat(d)))||m},r.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Jn.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},r.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},r}(Jn);var Rv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const mh=function(a){function r(t){var e=a.call(this,t)||this;return e.listenTo(e.model,"change:options",e.updateOptions),e}return Rv(r,a),r.prototype.templateInput=function(){var t=this.pfx,e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`select">
        <span id="`).concat(t,`input-holder"></span>
        <div class="`).concat(e,`sel-arrow">
          <div class="`).concat(e,`d-s-arrow"></div>
        </div>
      </div>
    `)},r.prototype.updateOptions=function(){delete this.input,this.onRender()},r.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.getOptions();if(!this.input){var i=[];n.forEach(function(f){var d=e.getOptionId(f),m=e.getOptionLabel(d),g=f.style?f.style.replace(/"/g,"&quot;"):"",x=g?'style="'.concat(g,'"'):"",A=d.replace(/"/g,"&quot;");i.push('<option value="'.concat(A,'" ').concat(x,">").concat(m,"</option>"))});var l=this.el.querySelector("#".concat(t,"input-holder"));l.innerHTML="<select>".concat(i.join(""),"</select>"),this.input=l.firstChild}},r.prototype.__setValueInput=function(t){var e=this.model,n=this.getInputEl(),i=e.getOptions()[0],l=i?e.getOptionId(i):"";n&&(n.value=t||l)},r}(Vs);var Vv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Cp=function(){return Cp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Cp.apply(this,arguments)};const Hv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Vv(r,a),r.prototype.defaults=function(){return Cp(Cp({},Kf.getDefaults()),{full:1})},r}(Kf);var Bv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();const zv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Bv(r,a),r.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},r.prototype.onRender=function(){var t=this.pfx,e=this.ppfx,n=this.model,i="".concat(e,"radio-item-label"),l=n.getName(),f=n.getOptions(),d="".concat(t,"radio ").concat(t,"radio-").concat(l),m=n.cid;if(!this.input){var g=[];f.forEach(function(A){var $=A.className?"".concat(A.className," ").concat(t,"icon ").concat(i):"",Z=n.getOptionId(A),ut="".concat(l,"-").concat(Z,"-").concat(m),yt=$?"":n.getOptionLabel(Z),pt=A.title?'title="'.concat(A.title,'"'):"",Bt=n.getValue()===Z?"checked":"";g.push(`
          <div class="`.concat(e,`radio-item">
            <input type="radio" class="`).concat(d,'" id="').concat(ut,'" name="').concat(l,"-").concat(m,'" value="').concat(Z,'" ').concat(Bt,`/>
            <label class="`).concat($||i,'" ').concat(pt,' for="').concat(ut,'">').concat(yt,`</label>
          </div>
        `))});var x=this.el.querySelector(".".concat(e,"field"));x.innerHTML='<div class="'.concat(e,'radio-items">').concat(g.join(""),"</div>"),this.input=x.firstChild}},r.prototype.__setValueInput=function(t){var e,n=this.model,i=t||n.getDefaultValue(),l=(e=this.getInputEl())===null||e===void 0?void 0:e.querySelector('[value="'.concat(i,'"]'));l&&(l.checked=!0)},r}(mh);var Uv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ul=function(){return ul=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},ul.apply(this,arguments)};const xp=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Uv(r,a),r.prototype.defaults=function(){return ul(ul({},Jn.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},r.prototype.getUnits=function(){return this.get("units")||[]},r.prototype.getUnit=function(){return this.get("unit")},r.prototype.getMin=function(){return this.get("min")},r.prototype.getMax=function(){return this.get("max")},r.prototype.getStep=function(){return this.get("step")},r.prototype.upUnit=function(t,e){return e===void 0&&(e={}),this._up({unit:t},e)},r.prototype.initialize=function(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Jn.callParentInit(Jn,this,t,e);var n=this.get("unit"),i=this.getUnits();this.input=(0,N.hasWin)()?new np({model:this}):void 0,i.length&&!n&&this.set("unit",i[0],{silent:!0}),Jn.callInit(this,t,e)},r.prototype.__getClearProps=function(){return ul(ul({},Jn.prototype.__getClearProps()),{unit:""})},r.prototype.parseValue=function(t,e){e===void 0&&(e={});var n=Jn.prototype.parseValue.apply(this,arguments),i=this.input.validateInputValue(n.value,ul({deepCheck:1},e)),l=i.value,f=i.unit;return n.value=l,n.unit=f,n},r.prototype.getFullValue=function(){var t=this.get("value"),e=this.get("unit"),n=(0,y.isUndefined)(t)?"":"".concat(t),i=!(0,y.isUndefined)(e)&&n?e:"",l="".concat(n).concat(i);return Jn.prototype.getFullValue.apply(this,[l])},r}(Jn);var $v=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Sp=function(){return Sp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Sp.apply(this,arguments)};const Wv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return $v(r,a),r.prototype.defaults=function(){return Sp(Sp({},xp.getDefaults()),{showInput:1})},r}(xp);var qv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Op=function(){return Op=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Op.apply(this,arguments)};const Gv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return qv(r,a),r.prototype.events=function(){return Op(Op({},Hs.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},r.prototype.templateInput=function(t){var e=this.ppfx;return`
      <div class="`.concat(e,"field ").concat(e,`field-range">
        <input type="range" min="`).concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),`"/>
      </div>
    `)},r.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},r.prototype.inputValueChanged=function(){this.model.upValue(this.getSliderEl().value)},r.prototype.inputValueChangedSoft=function(){this.model.upValue(this.getSliderEl().value,{partial:!0})},r.prototype.setValue=function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=t===""?e.getDefaultValue():parseFloat(n.value),Hs.prototype.setValue.apply(this,arguments)},r.prototype.onRender=function(){Hs.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},r.prototype.clearCached=function(){Hs.prototype.clearCached.apply(this,arguments),delete this.slider},r}(Hs),Yf=S.FE.extend(Ft).extend({extendViewApi:1,init:function(){var a=this.opts,r=this.em,t=a.module||(r==null?void 0:r.get("StyleManager"));t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:gv,view:jv,isType:function(a){if(a&&a.type=="stack")return a}},{id:"composite",model:rc,view:tu,isType:function(a){if(a&&a.type=="composite")return a}},{id:"file",model:Jn,view:Lv,isType:function(a){if(a&&a.type=="file")return a}},{id:"color",model:Jn,view:Iv,isType:function(a){if(a&&a.type=="color")return a}},{id:"select",model:Kf,view:mh,isType:function(a){if(a&&a.type=="select")return a}},{id:"radio",model:Hv,view:zv,isType:function(a){if(a&&a.type=="radio")return a}},{id:"slider",model:Wv,view:Gv,isType:function(a){if(a&&a.type=="slider")return a}},{id:"integer",model:xp,view:Hs,isType:function(a){if(a&&a.type=="integer")return a}},{id:"number",model:xp,view:Hs,isType:function(a){if(a&&a.type=="number")return a}},{id:"base",model:Jn,view:Vs,isType:function(a){return a.type="base",a}}]});var Kv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Tp=function(){return Tp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Tp.apply(this,arguments)},Yv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Jv=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};const vh=function(a){function r(t,e){e===void 0&&(e={});var n=a.call(this,t)||this,i=e.em;n.em=i;var l=t||{},f=n.buildProperties(l.buildProps),d=n.get("name")||"",m=[];!n.get("id")&&n.set("id",d.replace(/ /g,"_").toLowerCase()),m=(m=f?n.extendProperties(f):n.get("properties").map(function(x){return(0,y.isString)(x)?n.buildProperties(x)[0]:x}).filter(Boolean)).map(function(x){return n.checkExtend(x)});var g=new Yf(m,{em:i});return g.sector=n,n.set("properties",g),n}return Kv(r,a),r.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(r.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),r.prototype.getId=function(){return this.get("id")},r.prototype.getName=function(){var t,e=this.getId();return((t=this.em)===null||t===void 0?void 0:t.t("styleManager.sectors.".concat(e)))||this.get("name")},r.prototype.setName=function(t){return this.set("name",t)},r.prototype.isOpen=function(){return!!this.get("open")},r.prototype.setOpen=function(t){return this.set("open",t)},r.prototype.isVisible=function(){return!!this.get("visible")},r.prototype.getProperties=function(t){t===void 0&&(t={});var e=this.get("properties");return(e.models?Jv([],e.models,!0):e).filter(function(n){var i=!0;return t.withValue&&(i=n.hasValue({noParent:!0})),t.withParentValue&&(i=!n.hasValue({noParent:!0})&&n.hasValue()),i})},r.prototype.getProperty=function(t){return this.getProperties().filter(function(e){return e.get("id")===t})[0]||void 0},r.prototype.addProperty=function(t,e){return this.get("properties").add(this.checkExtend(t),e)},r.prototype.extendProperties=function(t,e,n){n===void 0&&(n=!1);for(var i=t.length,l=e||this.get("properties"),f=this.get("extendBuilded"),d=[],m=0,g=l.length;m<g;m++){for(var x=l[m],A=0,$=0;$<i;$++){var Z=t[$];if(!(x.property!=Z.property&&x.id!=Z.property)){var ut=x.properties;ut&&ut.length&&(x.properties=this.extendProperties(Z.properties||[],ut,1)),t[$]=f?(0,y.extend)(Z,x):x,d[$]=t[$],A=1}}A||(t.push(x),d.push(x))}return n?d.filter(function(yt){return yt}):t},r.prototype.checkExtend=function(t){var e=((0,y.isString)(t)?{extend:t}:t)||{},n=e.extend,i=Yv(e,["extend"]);return n?Tp(Tp({},this.buildProperties([n])[0]||{}),i):t},r.prototype.buildProperties=function(t){var e,n=t||[];if(!n.length)return[];var i=(e=this.em)===null||e===void 0?void 0:e.get("StyleManager").builtIn;return i==null?void 0:i.build(n)},r}(S.Hn);var Zv=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),Ep=function(){return Ep=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ep.apply(this,arguments)};const Xv=function(a){function r(){return a!==null&&a.apply(this,arguments)||this}return Zv(r,a),r.prototype.initialize=function(t,e){e===void 0&&(e={});var n=e.module,i=e.em;this.em=i,this.module=n,this.listenTo(this,"reset",this.onReset)},r.prototype.model=function(t,e){e===void 0&&(e={});var n=e.collection.em;return new vh(t,Ep(Ep({},e),{em:n}))},r.prototype.onReset=function(t,e){e===void 0&&(e={}),(e.previousModels||[]).forEach(function(n){return n.get("properties").reset()})},r}(S.FE);var Ca=function(){return Ca=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},Ca.apply(this,arguments)},Qv=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},pl=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},Ar=function(a){return a.map(function(r){return{id:r}})},ty=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var r=", sans-serif",t=["flex-start","flex-end","center"],e=pl(pl([],t,!0),["baseline","stretch"],!1);this.optsBgSize=Ar(["auto","cover","contain"]),this.optsBgAttach=Ar(["scroll","fixed","local"]),this.optsBgRepeat=Ar(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=Ar(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=Ar(["visible","hidden","scroll","auto"]),this.optsDir=Ar(["row","row-reverse","column","column-reverse"]),this.opstDisplay=Ar(["block","inline","inline-block","flex","none"]),this.optsTransitFn=Ar(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=Ar(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=Ar(["none","left","right"]),this.optsPos=Ar(["static","relative","absolute","fixed"]),this.optsTextAlign=Ar(["left","center","right","justify"]),this.optsFlexAlign=Ar(e),this.optsJustCont=Ar(pl(pl([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=Ar(pl(pl([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=Ar(pl(["auto"],e,!0)),this.optsTransitProp=Ar(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=Ar(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=Ar(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+r,"Arial Black, Gadget"+r,"Brush Script MT"+r,"Comic Sans MS, cursive"+r,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+r,"Impact, Charcoal"+r,"Lucida Sans Unicode, Lucida Grande"+r,"Tahoma, Geneva"+r,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+r,"Verdana, Geneva"+r].map(function(n){return{id:n,label:n.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(r){var t=this;return function(){return r.map(function(e){if((0,y.isString)(e))return t.get(e);var n=e.extend,i=Qv(e,["extend"]);return Ca(Ca({},t.get(n)),i)})}},a.prototype.init=function(){var r=this,t=this,e=t.fixedValues,n=t.requireFlex,i=t.typeNumber;this.props={};var l=[["text-shadow-h",{type:i,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:e},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:n},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:i,default:"0",requiresParent:n}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black"}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:n},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:n},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(f,d){var m=d.values,g=m["box-shadow-h"],x=m["box-shadow-v"],A=m["box-shadow-blur"],$=m["box-shadow-spread"];return"".concat(g," ").concat(x," ").concat(A," ").concat($)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(f,d){var m=d.values,g=m["text-shadow-h"],x=m["text-shadow-v"],A=m["text-shadow-blur"];return"".concat(g," ").concat(x," ").concat(A)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(f,d){var m=d.values;return[m["background-repeat-sub"]||"",m["background-position-sub"]||"",m["background-attachment-sub"]||"",m["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(f,d){var m=d.property,g=f[d.name]||"",x=m.getLayerSeparator();return g?g.split(x).map(function(A){var $=m.__parseFn(A);return{"transform-type":$.name,"transform-value":$.value}}):[]},toStyle:function(f,d){var m;return(m={})[d.name]="".concat(f["transform-type"],"(").concat(f["transform-value"],")"),m},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(f){var d=f.property;if(f.to.value){var m=d.getOption(),g=Ca({},m.propValue||{}),x=d.getParent().getProperty("transform-value"),A=x.getUnit();(!A||(g==null?void 0:g.units.indexOf(A))<0)&&(g.unit=(g==null?void 0:g.units[0])||""),x.up(g)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]];return l.forEach(function(f){var d=f[0],m=f[1],g=f[2];r.add(d,m||{},{from:g})}),this},a.prototype.add=function(r,t,e){t===void 0&&(t={}),e===void 0&&(e={});var n=e.from||"",i=this.props[n||r]||{},l=Ca(Ca(Ca({},i),{property:r}),t);return l.properties&&(0,y.isFunction)(l.properties)&&(l.properties=l.properties()),this.props[r]=l,l},a.prototype.get=function(r){return this.props[r]},a.prototype.build=function(r){var t=this,e=[];return((0,y.isString)(r)?[r]:r).forEach(function(n){e.push(t.get(n)||{property:n})}),e},a}();const ey=ty;var ny=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ry=function(a,r){return Object.defineProperty?Object.defineProperty(a,"raw",{value:r}):a.raw=r,a},oy=function(a){function r(t){var e=a.call(this,t)||this,n=t.config||{},i=e.model,l=n.em;return e.config=n,e.em=l,e.pfx=n.stylePrefix||"",e.listenTo(i,"destroy remove",e.remove),e.listenTo(i,"change:open",e.updateOpen),e.listenTo(i,"change:visible",e.updateVisibility),e}return ny(r,a),r.prototype.template=function(t){var e,n=t.pfx,i=t.label,l=(e=this.em)===null||e===void 0?void 0:e.getConfig().icons,f=(l==null?void 0:l.caret)||"",d="".concat(n,"sector-");return K(yh||(yh=ry([`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `],[`
      <div class="`,`title" data-sector-title>
        <div class="`,'caret">$',`</div>
        <div class="`,'label">',`</div>
      </div>
    `])),d,d,f,d,i)},r.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},r.prototype.updateOpen=function(){var t=this,e=t.$el,n=t.model,i=t.pfx,l=n.isOpen();e[l?"addClass":"removeClass"]("".concat(i,"open")),this.getPropertiesEl().style.display=l?"":"none"},r.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},r.prototype.getPropertiesEl=function(){var t=this.$el,e=this.pfx;return t.find(".".concat(e,"properties")).get(0)},r.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},r.prototype.renderProperties=function(){var t=this.model,e=this.config,n=t.get("properties");if(n){var i=new Gf({collection:n,config:e});this.$el.append(i.render().el)}},r.prototype.render=function(){var t=this,e=t.pfx,n=t.model,i=t.$el,l=n.getId(),f=n.getName();return i.html(this.template({pfx:e,label:f})),this.renderProperties(),i.attr("class","".concat(e,"sector ").concat(e,"sector__").concat(l," no-select")),this.updateOpen(),this},r}(S.G7);const iy=oy;var yh,sy=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ay=function(a){function r(t){t===void 0&&(t={});var e=a.call(this,t)||this,n=t.module,i=t.config,l=e.collection;return e.pfx=(i==null?void 0:i.stylePrefix)||"",e.ppfx=(i==null?void 0:i.pStylePrefix)||"",e.config=i,e.module=n,e.listenTo(l,"add",e.addTo),e.listenTo(l,"reset",e.render),e}return sy(r,a),r.prototype.remove=function(){var t=this;return S.G7.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(e){return t[e]={}}),this},r.prototype.addTo=function(t,e,n){n===void 0&&(n={}),this.addToCollection(t,null,n)},r.prototype.addToCollection=function(t,e,n){n===void 0&&(n={});var i=this.config,l=this.el,f=e||l,d=new iy({model:t,config:i}).render().el;return(0,Ze.$Q)(f,d,n.at),d},r.prototype.render=function(){var t=this,e=this,n=e.$el,i=e.pfx,l=e.ppfx;n.empty();var f=document.createDocumentFragment();return this.collection.each(function(d){return t.addToCollection(d,f)}),n.append(f),n.addClass("".concat(i,"sectors ").concat(l,"one-bg ").concat(l,"two-color")),this},r}(S.G7);const ly=ay;var cy=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),fl=function(){return fl=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},fl.apply(this,arguments)},bh=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},wh="style",eu="".concat(wh,":"),Jf="".concat(eu,"sector"),uy="".concat(Jf,":add"),py="".concat(Jf,":remove"),fy="".concat(Jf,":update"),Zf="".concat(eu,"property"),dy="".concat(Zf,":add"),hy="".concat(Zf,":remove"),gy="".concat(Zf,":update"),_h="".concat(eu,"layer:select"),Xf="".concat(eu,"target"),my="".concat(eu,"custom"),Ch=function(a){return a||a===0},vy={all:wh,sectorAdd:uy,sectorRemove:py,sectorUpdate:fy,propertyAdd:dy,propertyRemove:hy,propertyUpdate:gy,layerSelect:_h,target:Xf,custom:my},yy=function(a){function r(t){var e=a.call(this,t,"StyleManager",new Xv([],{em:t}),vy,tv)||this;e.Sector=vh,e.storageKey="",(0,y.bindAll)(e,"__clearStateTarget");var n=e.config,i=n.pStylePrefix;i&&(n.stylePrefix=i+n.stylePrefix),e.builtIn=new ey,e.properties=new Yf([],{em:t,module:e}),e.sectors=e.all;var l=new S.Hn({targets:[]});e.model=l,e.upAll=(0,y.debounce)(function(){return e.__upSel()},0),l.listenTo(t,"component:toggled component:update:classes change:state change:device frame:resized selector:type",e.upAll),l.listenTo(t,"component:toggled",e.__clearStateTarget);var f=(0,y.debounce)(function(){e.__upProps(),e.__trgCustom()},0);l.listenTo(t,"styleable:change undo redo",f);var d=(0,y.debounce)(function(){return e.__trgCustom()},0);return l.listenTo(t,"".concat(_h," ").concat(Xf),d),l.on("change:lastTarget",function(){return t.trigger(Xf,e.getSelected())}),e}return cy(r,a),r.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},r.prototype.__trgCustom=function(t){t===void 0&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},r.prototype.__trgEv=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(e=this.em).trigger.apply(e,bh([t],n,!1))},r.prototype.__clearStateTarget=function(){var t=this,e=this.em,n=this.__getStateTarget();n&&(e==null||e.skip(function(){e.Css.remove(n),t.model.set({stateTarget:null})}))},r.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},r.prototype.postRender=function(){this.__appendTo()},r.prototype.addSector=function(t,e,n){n===void 0&&(n={});var i=this.getSector(t);return i||(e.id=t,i=this.sectors.add(e,n)),i},r.prototype.getSector=function(t,e){e===void 0&&(e={});var n=this.sectors.where({id:t})[0];return!n&&e.warn&&this._logNoSector(t),n||null},r.prototype.getSectors=function(t){t===void 0&&(t={});var e=this.sectors,n=e&&e.models?t.array?bh([],e.models,!0):e:[];return t.visible?n.filter(function(i){return i.isVisible()}):n},r.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},r.prototype.addProperty=function(t,e,n){n===void 0&&(n={});var i=this.getSector(t,{warn:!0}),l=null;return i&&(l=i.addProperty(e,n)),l},r.prototype.getProperty=function(t,e){var n,i=this.getSector(t,{warn:!0});return i&&(n=i.properties.filter(function(l){return l.get("property")===e||l.get("id")===e})[0]),n},r.prototype.getProperties=function(t){var e,n=this.getSector(t,{warn:!0});return n&&(e=n.properties),e},r.prototype.removeProperty=function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},r.prototype.select=function(t,e){var n=this;e===void 0&&(e={});var i=this.em,l=(0,y.isArray)(t)?t:[t],f=e.stylable,d=i.Css,m=[];l.filter(Boolean).forEach(function(ut){var yt=ut;if((0,y.isString)(ut)){var pt=d.getRule(ut)||d.setRule(ut);!(0,y.isUndefined)(f)&&pt.set({stylable:f}),yt=pt}m.push(yt)});var g=e.component||m.filter(function(ut){return(0,N.isComponent)(ut)}).reverse()[0];m=m.map(function(ut){return n.getModelToStyle(ut)});var x=i.getState(),A=m.slice().reverse()[0],$=this.getParentRules(A,{state:x,component:g}),Z=this.__getStateTarget();return i.skip(function(){var ut;if(x&&(!((ut=A==null?void 0:A.getState)===null||ut===void 0)&&ut.call(A))){var yt=A.getStyle();Z?Z.setStyle(yt):Z=d.getAll().add({selectors:"gjs-selected",style:yt,shallow:!0,important:!0})}else Z&&(d.remove(Z),Z=void 0)}),this.model.set({targets:m,lastTarget:A,lastTargetParents:$,stateTarget:Z,component:g}),this.__upProps(e),m},r.prototype.getSelected=function(){return this.model.get("lastTarget")||null},r.prototype.getSelectedAll=function(){return this.model.get("targets")},r.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},r.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},r.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map(function(l){return l.addStyle(t,e)});var n=this.getSelected(),i=this.__getStateTarget();n&&(i==null||i.setStyle(n.getStyle(),e))},r.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},r.prototype.getBuiltInAll=function(){return this.builtIn.props},r.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},r.prototype.getModelToStyle=function(t,e){e===void 0&&(e={});var n=this.em,i=e.skipAdd;if(n&&(t!=null&&t.toHTML)){var l=n.getConfig(),f=n.UndoManager,d=n.Css,m=n.Selectors,g=m?m.getConfig():{},x=l.devicePreviewMode?"":n.get("state"),A=t.get("classes").getStyleable(),$=A.length,Z=!g.componentFirst||e.useClasses,ut={noCount:1},yt={state:x,addOpts:ut},pt=void 0;if(f.stop(),$&&Z){var Bt=n.getCurrentMedia();(pt=d.get(A,x,Bt))||i||(pt=d.add(A,x,Bt,{},ut))}else if(l.avoidInlineStyle){var Zt=t.getId();!(pt=d.getIdRule(Zt,yt))&&!i&&(pt=d.setIdRule(Zt,{},yt)),t.is("wrapper")&&pt.set("wrapper",1,ut)}pt&&(t=pt),f.start()}return t},r.prototype.getParentRules=function(t,e){var n=e===void 0?{}:e,i=n.state,l=n.component,f=this.em,d=[];if(f&&t){var m=l,g=f.Css,x=f.CodeManager.getGenerator("css"),A=t.toHTML?t:t.getComponent(),$={combination:!0,array:!0},Z=[],ut=[],yt=[];A?(Z=g.getRules("#".concat(A.getId())),yt=(ut=m?g.getRules(m.getSelectors().getFullName($)):[]).concat(Z)):(Z=m?g.getRules("#".concat(m.getId())):[],ut=g.getRules(t.getSelectors().getFullName($)),yt=Z.concat(ut));var pt=yt.filter(function(Bt){return(0,y.isUndefined)(i)?1:Bt.get("state")===i}).sort(x.sortRules).reverse();d=pt.slice(pt.indexOf(t)+1)}return d},r.prototype.addType=function(t,e){this.properties.addType(t,e)},r.prototype.getType=function(t){return this.properties.getType(t)},r.prototype.getTypes=function(){return this.properties.getTypes()},r.prototype.createType=function(t,e){var n=e===void 0?{}:e,i=n.model,l=i===void 0?{}:i,f=n.view,d=f===void 0?{}:f,m=this.config,g=this.getType(t);if(g)return new g.view(fl({model:new g.model(l),config:m},d))},r.prototype.render=function(){var t=this,e=t.config,n=t.em,i=t.SectView,l=i&&i.el;return this.SectView=new ly({el:l,em:n,config:e,module:this,collection:this.sectors}),this.SectView.render().el},r.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},r.prototype.__upProps=function(t){var e=this;t===void 0&&(t={});var n=this.getSelected();if(n){var i=this.sectors,l=this.model.get("component"),f=this.getSelectedParents(),d=n.getStyle(),m=f.map(function(g){return{target:g,style:g.getStyle()}});i.map(function(g){g.getProperties().map(function(x){e.__upProp(x,d,m,t)})}),i.forEach(function(g){var x=g.getProperties();x.forEach(function($){var Z=$.__checkVisibility({target:n,component:l,sectors:i});$.set("visible",Z)});var A=x.some(function($){return $.isVisible()});g.set("visible",A)})}},r.prototype.__upProp=function(t,e,n,i){var l=this,f=t.getName(),d=e[f],m=Ch(d),g=t.getType()==="stack",x=t.getType()==="composite",A=fl(fl({},i),{__up:!0}),$=!x&&!g,Z=g?t.__getLayersFromStyle(e):[],ut=x?t.__getPropsFromStyle(e):{},yt=m?d:null,pt=null;if(g&&Z===null||x&&ut===null){var Bt=g?"__getLayersFromStyle":"__getPropsFromStyle";if(Pe=n.filter(function(gn){return t[Bt](gn.style)!==null})[0]){yt=Pe.style[f],pt=Pe.target;var Zt=t[Bt](Pe.style);g?Z=Zt:ut=Zt}}else if(!m){var Pe;yt=null,(Pe=n.filter(function(gn){return Ch(gn.style[f])})[0])&&(yt=Pe.style[f],pt=Pe.target)}if(t.__setParentTarget(pt),$&&t.__getFullValue()!==yt&&t.upValue(yt,A),g&&t.__setLayers(Z||[]),x){var Le=t.getProperties();if(t.isDetached()){var Ke=t.__getPropsFromStyle(e,{byName:!0})||{},en=n.map(function(gn){return fl(fl({},gn),{style:t.__getPropsFromStyle(gn.style,{byName:!0})||{}})});Le.map(function(gn){return l.__upProp(gn,Ke,en,i)})}else t.__setProperties(ut||{},A),t.getProperties().map(function(gn){return gn.__setParentTarget(pt)})}},r.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(e){e.reset(),e.stopListening()}),(t=this.SectView)===null||t===void 0||t.remove(),this.model.stopListening(),this.upAll.cancel()},r}($t);const by=yy;var wy=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),no=function(){return no=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},no.apply(this,arguments)},Qf=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(m){try{d(e.next(m))}catch(g){i(g)}}function f(m){try{d(e.throw(m))}catch(g){i(g)}}function d(m){var g;m.done?n(m.value):(g=m.value,g instanceof t?g:new t(function(x){x(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},td=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(m){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(x){g=[6,x],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,m])}}},_y=function(a,r){var t={};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&r.indexOf(e)<0&&(t[e]=a[e]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(e=Object.getOwnPropertySymbols(a);n<e.length;n++)r.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(a,e[n])&&(t[e[n]]=a[e[n]])}return t},Cy=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))};nt().$=tt.default;var xy=[Ng,Eg,$g,Hm,Wl,pe,hf,by,ua,Zg,Lm,hm,Ym,xg,vc,He,zc,Zp,Xn,ne,Qm,_c],Sy=[];(function(a){var r=a.$;if(r&&r.prototype&&r.prototype.constructor.name!=="jQuery"){var t=r.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var i=this.get(0);return i&&i.focus(),this},t.bind=function(i,l){return this.on(i,l)},t.unbind=function(i,l){if((0,y.isObject)(i)){for(var f in i)i.hasOwnProperty(f)&&this.off(f,i[f]);return this}return this.off(i,l)},t.click=function(i){return i?this.on("click",i):this.trigger("click")},t.change=function(i){return i?this.on("change",i):this.trigger("change")},t.keydown=function(i){return i?this.on("keydown",i):this.trigger("keydown")},t.delegate=function(i,l,f,d){return d||(d=f),this.on(l,i,function(m){m.data=f,d(m)})},t.scrollLeft=function(){var i=this.get(0),l=(i=i.nodeType==9?i.defaultView:i)instanceof Window?i:null;return l?l.pageXOffset:i.scrollLeft||0},t.scrollTop=function(){var i=this.get(0),l=(i=i.nodeType==9?i.defaultView:i)instanceof Window?i:null;return l?l.pageYOffset:i.scrollTop||0};var e=r.prototype.offset;t.offset=function(i){var l,f;return i&&(l=i.top,f=i.left),l!==void 0&&this.css("top","".concat(l,"px")),f!==void 0&&this.css("left","".concat(f,"px")),e.call(this)},r.map=function(i,l){for(var f=[],d=0;d<i.length;d++)f.push(l(i[d],d));return f};var n=Array.prototype.indexOf;r.inArray=function(i,l,f){return l==null?-1:n.call(l,i,f)},r.Event=function(i,l){if(!(this instanceof r.Event))return new r.Event(i,l);this.type=i,this.isDefaultPrevented=function(){return!1}}}})({$:tt.default});var xh={debug:console.log,info:console.info,warning:console.warn,error:console.error},Oy=function(a){function r(t){t===void 0&&(t={});var e=a.call(this)||this;e.__skip=!1,e.defaultRunning=!1,e.destroyed=!1,e._config=t;var n=e.config;e.set("Config",t),e.set("modules",[]),e.set("toLoad",[]),e.set("storables",[]),e.set("selected",new F),e.set("dmode",n.dragMode);var i=n.el,l=n.log,f=l===!0?(0,y.keys)(xh):(0,y.isArray)(l)?l:[];return(0,y.bindAll)(e,"initBaseColorPicker"),i&&n.fromElement&&(n.components=i.innerHTML),e.attrsOrig=i?(0,y.toArray)(i.attributes).reduce(function(d,m){return d[m.nodeName]=m.nodeValue,d},{}):"",n.components&&!n.pageManager&&(n.pageManager={pages:[{component:n.components}]}),xy.forEach(function(d){return e.loadModule(d)}),Sy.forEach(function(d){return e.tsLoadModule(d)}),e.on("change:componentHovered",e.componentHovered,e),e.on("change:changesCount",e.updateChanges,e),e.on("change:readyLoad change:readyCanvas",e._checkReady,e),f.forEach(function(d){return e.listenLog(d)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(d){var m=d.from,g=d.to;e.listenTo(e,m,function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];e.trigger.apply(e,Cy([g],x,!1)),e.logWarning("The event '".concat(m,"' is deprecated, replace it with '").concat(g,"'"))})}),e}return wy(r,a),r.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(r.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),r.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},r.prototype.getContainer=function(){return this.config.el},r.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),xh[t])},Object.defineProperty(r.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),r.prototype.getConfig=function(t){var e=this.config;return(0,y.isUndefined)(t)?e:e[t]},r.prototype.loadOnStart=function(){var t=this,e=this.config,n=e.projectData,i=e.headless,l=this.get("StorageManager");this.toLoad.forEach(function(m){return m.onLoad()});var f=function(){t.modules.forEach(function(m){return m.postLoad&&m.postLoad(t)}),t.set("readyLoad",1)};i?(n&&this.loadData(n),f()):setTimeout(function(){return Qf(t,void 0,void 0,function(){var m;return td(this,function(g){switch(g.label){case 0:return n?(this.loadData(n),[3,5]):[3,1];case 1:if(!(l!=null&&l.canAutoload()))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.load()];case 3:return g.sent(),[3,5];case 4:return m=g.sent(),this.logError(m),[3,5];case 5:return f(),[2]}})})});var d=new r({noticeOnUnload:!1,storageManager:!1,undoManager:!1});["PageManager","Canvas"].forEach(function(m){return d.get(m).onLoad()}),this.set("shallow",d)},r.prototype.updateChanges=function(){var t=this,e=this.get("StorageManager"),n=this.getDirtyCount();this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return t.trigger("update")}),this.config.noticeOnUnload&&(window.onbeforeunload=n?function(){return!0}:null),e.isAutosave()&&n>=e.getStepsBeforeSave()&&this.store().catch(function(i){return t.logError(i)})},r.prototype.loadModule=function(t){var e=this.config,n=new t(this),i=n.name.charAt(0).toLowerCase()+n.name.slice(1),l=(0,y.isUndefined)(e[i])?e[n.name]:e[i],f=l===!0?{}:l||{};return f.pStylePrefix=e.pStylePrefix||"",(0,y.isUndefined)(l)||l||(f._disable=1),n.storageKey&&n.store&&n.load&&this.storables.push(n),f.em=this,n.init(no({},f)),!n.private&&this.set(n.name,n),n.onLoad&&this.toLoad.push(n),this.modules.push(n),this},r.prototype.tsLoadModule=function(t){var e=new(t.default||t)(this);return e.storageKey&&e.store&&e.load&&this.storables.push(e),!e.private&&this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),this},r.prototype.init=function(t,e){e===void 0&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set("Editor",t)},r.prototype.getEditor=function(){return this.get("Editor")},r.prototype.handleUpdates=function(t,e,n){var i=this;n===void 0&&(n={}),this.__skip||n.temporary||n.noCount||n.avoidStore||!this.get("ready")||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var l=i.getDirtyCount()||0,f=(n.unset,_y(n,["unset"]));i.set("changesCount",l+1,f)},0))},r.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},r.prototype.componentHovered=function(t,e,n){var i=this.previous("componentHovered");i&&this.trigger("component:unhovered",i,n),e&&this.trigger("component:hovered",e,n)},r.prototype.getSelected=function(){return this.selected.lastComponent()},r.prototype.getSelectedAll=function(){return this.selected.allComponents()},r.prototype.setSelected=function(t,e){var n=this;e===void 0&&(e={});var i=e.event,l=i&&(i.ctrlKey||i.metaKey),f=(i||{}).shiftKey,d=((0,y.isArray)(t)?t:[t]).map(function(A){return(0,N.getModel)(A,tt.default)}),m=this.getSelectedAll(),g=this.getConfig().multipleSelection,x=(0,y.isArray)(t);x&&this.removeSelected(m.filter(function(A){return!(0,y.contains)(d,A)})),d.forEach(function(A){var $=(0,N.getModel)(A,void 0);if($&&(n.trigger("component:select:before",$,e),!$.get("selectable")||e.abort)){if(!e.useValid)return;for(var Z=$.parent();Z&&!Z.get("selectable");)Z=Z.parent();$=Z}if(l&&g)return n.toggleSelected($);if(f&&g){n.clearSelection(n.get("Canvas").getWindow());var ut,yt,pt=$.collection,Bt=$.index();if(n.getSelectedAll().forEach(function(Zt){var Pe=Zt.collection,Le=Zt.index();Pe===pt&&(Le<Bt?ut=(0,y.isUndefined)(ut)?Le:Math.max(ut,Le):Le>Bt&&(yt=(0,y.isUndefined)(yt)?Le:Math.min(yt,Le)))}),!(0,y.isUndefined)(ut))for(;ut!==Bt;)n.addSelected(pt.at(ut)),ut++;if(!(0,y.isUndefined)(yt))for(;yt!==Bt;)n.addSelected(pt.at(yt)),yt--;return n.addSelected($)}!x&&n.removeSelected(m.filter(function(Zt){return Zt!==$})),n.addSelected($,e)})},r.prototype.addSelected=function(t,e){var n=this;e===void 0&&(e={});var i=(0,N.getModel)(t,tt.default);((0,y.isArray)(i)?i:[i]).forEach(function(l){var f=n.selected;l&&l.get("selectable")&&!l.parents().some(function(d){return f.hasComponent(d)})&&(e.forceChange&&n.removeSelected(l,e),f.allComponents().filter(function(d){return(0,y.contains)(d.parents(),l)}).forEach(function(d){return n.removeSelected(d,e)}),f.addComponent(l,e),l&&n.trigger("component:select",l,e))})},r.prototype.removeSelected=function(t,e){e===void 0&&(e={}),this.selected.removeComponent((0,N.getModel)(t,tt.default),e)},r.prototype.toggleSelected=function(t,e){var n=this;e===void 0&&(e={});var i=(0,N.getModel)(t,tt.default);((0,y.isArray)(i)?i:[i]).forEach(function(l){n.selected.hasComponent(l)?n.removeSelected(l,e):n.addSelected(l,e)})},r.prototype.setHovered=function(t,e){if(e===void 0&&(e={}),!t)return this.set("componentHovered","");var n="component:hover",i=(0,N.getModel)(t,void 0);if(i){if(e.forceChange&&this.set("componentHovered",""),this.trigger("".concat(n,":before"),i,e),!i.get("hoverable")){if(!e.useValid||e.abort)return;for(var l=i&&i.parent();l&&!l.get("hoverable");)l=l.parent();i=l}e.abort||(this.set("componentHovered",i,e),this.trigger(n,i,e))}},r.prototype.getHovered=function(){return this.get("componentHovered")},r.prototype.setComponents=function(t,e){return e===void 0&&(e={}),this.get("DomComponents").setComponents(t,e)},r.prototype.getComponents=function(){var t=this.get("DomComponents"),e=this.get("CodeManager");if(t&&e){var n=t.getComponents();return e.getCode(n,"json")}},r.prototype.setStyle=function(t,e){e===void 0&&(e={});var n=this.get("CssComposer");return n.clear(e),n.getAll().add(t,e),this},r.prototype.addStyle=function(t,e){e===void 0&&(e={});var n=this.getStyle().add(t,e);return(0,y.isArray)(n)?n:[n]},r.prototype.getStyle=function(){return this.Css.getAll()},r.prototype.setState=function(t){return this.set("state",t),this},r.prototype.getState=function(){return this.get("state")||""},r.prototype.getHtml=function(t){t===void 0&&(t={});var e=this.config,n=e.optsHtml,i=e.jsInHtml?this.getJs(t):"",l=t.component||this.get("DomComponents").getComponent(),f=l?this.get("CodeManager").getCode(l,"html",no(no({},n),t)):"";return f+=i?"<script>".concat(i,"<\/script>"):""},r.prototype.getCss=function(t){t===void 0&&(t={});var e=this.config,n=e.optsCss,i=t.avoidProtected,l=(0,y.isUndefined)(t.keepUnusedStyles)?e.keepUnusedStyles:t.keepUnusedStyles,f=this.get("CssComposer"),d=t.component||this.Components.getComponent(),m=i?"":e.protectedCss,g=d&&this.CodeManager.getCode(d,"css",no(no({cssc:f,keepUnusedStyles:l},n),t));return d?t.json?g:m+g:""},r.prototype.getJs=function(t){t===void 0&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,"js").trim():""},r.prototype.store=function(t){return Qf(this,void 0,void 0,function(){var e;return td(this,function(n){switch(n.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return n.sent(),this.clearDirtyCount(),[2,e]}})})},r.prototype.load=function(t){return Qf(this,void 0,void 0,function(){var e;return td(this,function(n){switch(n.label){case 0:return[4,this.Storage.load(t)];case 1:return e=n.sent(),this.loadData(e),[2,e]}})})},r.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(n){t=no(no({},t),n.store(1))}),JSON.parse(JSON.stringify(t))},r.prototype.loadData=function(t){return t===void 0&&(t={}),(0,N.isEmptyObj)(t)||(this.storables.forEach(function(e){return e.clear()}),this.storables.forEach(function(e){return e.load(t)})),t},r.prototype.getDeviceModel=function(){var t=this.get("device");return this.get("DeviceManager").get(t)},r.prototype.runDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);e&&!this.defaultRunning&&(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},r.prototype.stopDefault=function(t){t===void 0&&(t={});var e=this.get("Commands").get(this.config.defaultCommand);e&&this.defaultRunning&&(e.stop(this,this,t),this.defaultRunning=!1)},r.prototype.refreshCanvas=function(t){t===void 0&&(t={}),this.set("canvasOffset",null),this.set("canvasOffset",this.get("Canvas").getOffset()),t.tools&&this.trigger("canvas:updateTools")},r.prototype.clearSelection=function(t){var e;(e=(t||window).getSelection())===null||e===void 0||e.removeAllRanges()},r.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,i=t.devicePreviewMode,l=e&&e.get("widthMedia");return e&&l&&!i?"(".concat(n,": ").concat(l,")"):""},r.prototype.getWrapper=function(){return this.get("DomComponents").getWrapper()},r.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},r.prototype.getCurrentFrame=function(){return this.get("currentFrame")},r.prototype.getCurrentFrameModel=function(){return(this.getCurrentFrame()||{}).model},r.prototype.getIcon=function(t){return(this.config.icons||{})[t]||""},r.prototype.getDirtyCount=function(){return this.get("changesCount")},r.prototype.clearDirtyCount=function(){return this.set("changesCount",0)},r.prototype.getZoomDecimal=function(){return this.get("Canvas").getZoomDecimal()},r.prototype.getZoomMultiplier=function(){return this.get("Canvas").getZoomMultiplier()},r.prototype.setDragMode=function(t){return this.set("dmode",t)},r.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.get("I18n");return n==null?void 0:n.t.apply(n,t)},r.prototype.inAbsoluteMode=function(){return this.get("dmode")==="absolute"},r.prototype.destroyAll=function(){var t=this,e=this.config,n=this.view,i=this.getEditor(),l=(e.grapesjs||{}).editors,f=l===void 0?[]:l,d=this.get("shallow");d==null||d.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach(function(m){return m.destroy()}),n&&n.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(m){return t[m]={}}),f.splice(f.indexOf(i),1),(0,N.hasWin)()&&(0,tt.default)(e.el).empty().attr(this.attrsOrig)},r.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},r.prototype.setEditing=function(t){return this.set("editing",t),this},r.prototype.isEditing=function(){return!!this.get("editing")},r.prototype.log=function(t,e){e===void 0&&(e={});var n=e.ns,i=e.level,l=i===void 0?"debug":i;if(this.trigger("log",t,e),l&&this.trigger("log:".concat(l),t,e),n){var f="log-".concat(n);this.trigger(f,t,e),l&&this.trigger("".concat(f,":").concat(l),t,e)}},r.prototype.logInfo=function(t,e){this.log(t,no(no({},e),{level:"info"}))},r.prototype.logWarning=function(t,e){this.log(t,no(no({},e),{level:"warning"}))},r.prototype.logError=function(t,e){this.log(t,no(no({},e),{level:"error"}))},r.prototype.initBaseColorPicker=function(t,e){e===void 0&&(e={});var n=this.config,i=n.colorPicker,l=i===void 0?{}:i,f=n.el,d=n.stylePrefix;return(0,tt.default)(t).spectrum(no(no({containerClassName:"".concat(d,"one-bg ").concat(d,"two-color"),appendTo:f||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"⨯"},e),l))},r.prototype.skip=function(t){this.__skip=!0;var e=this.get("UndoManager");e?e.skip(t):t(),this.__skip=!1},r.prototype.data=function(t,e,n){var i="_gjs-data";if(t[i]||(t[i]={}),(0,y.isUndefined)(n))return t[i][e];t[i][e]=n},r}(S.Hn);const Ty=Oy;var Ey=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}a(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ky=function(a){function r(t){var e=a.call(this,{model:t})||this,n=t.attributes,i=n.Panels,l=n.UndoManager;return t.view=e,t.once("change:ready",function(){i.active(),i.disableButtons(),l.clear(),setTimeout(function(){t.trigger("load",t.get("Editor")),t.clearDirtyCount()})}),e}return Ey(r,a),r.prototype.render=function(){var t=this,e=this.$el,n=this.model,i=n.attributes,l=i.Panels,f=i.Canvas,d=n.config,m=n.modules,g=d.stylePrefix,x=["".concat(g,"editor")];!d.customUI&&x.push("".concat(g,"one-bg ").concat(g,"two-color"));var A=(0,tt.default)(d.el||"body ".concat(d.container));d.cssIcons&&(0,N.appendStyles)(d.cssIcons,{unique:!0,prepand:!0}),e.empty(),d.width&&A.css("width",d.width),d.height&&A.css("height",d.height),e.append(f.render()),e.append(l.render());var $=n.get("shallow").get("Canvas").render();return $.style.display="none",e.append($),e.attr("class",x.join(" ")),A.addClass("".concat(g,"editor-cont")).empty().append(e),m.forEach(function(Z){return Z.postRender&&Z.postRender(t)}),this},r}(S.G7);const Py=ky;var nu=function(){return nu=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},nu.apply(this,arguments)},Sh=function(a,r,t,e){return new(t||(t=Promise))(function(n,i){function l(m){try{d(e.next(m))}catch(g){i(g)}}function f(m){try{d(e.throw(m))}catch(g){i(g)}}function d(m){var g;m.done?n(m.value):(g=m.value,g instanceof t?g:new t(function(x){x(g)})).then(l,f)}d((e=e.apply(a,r||[])).next())})},Oh=function(a,r){var t,e,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function f(d){return function(m){return function(g){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,g[0]&&(l=0)),l;)try{if(t=1,e&&(n=2&g[0]?e.return:g[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,g[1])).done)return n;switch(e=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return l.label++,{value:g[1],done:!1};case 5:l.label++,e=g[1],g=[0];continue;case 7:g=l.ops.pop(),l.trys.pop();continue;default:if(n=l.trys,!((n=n.length>0&&n[n.length-1])||g[0]!==6&&g[0]!==2)){l=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){l.label=g[1];break}if(g[0]===6&&l.label<n[1]){l.label=n[1],n=g;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(g);break}n[2]&&l.ops.pop(),l.trys.pop();continue}g=r.call(a,l)}catch(x){g=[6,x],e=0}finally{t=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([d,m])}}},Ay=function(a,r,t){if(t||arguments.length===2)for(var e,n=0,i=r.length;n<i;n++)!e&&n in r||(e||(e=Array.prototype.slice.call(r,0,n)),e[n]=r[n]);return a.concat(e||Array.prototype.slice.call(r))},jy=function(){function a(r,t){var e;r===void 0&&(r={}),t===void 0&&(t={}),this.modules=[],this.html=K,this.config=nu(nu(nu({},gt),r),{pStylePrefix:(e=r.stylePrefix)!==null&&e!==void 0?e:gt.stylePrefix}),this.em=new Ty(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(r){return this.em.getConfig(r)},a.prototype.getHtml=function(r){return this.em.getHtml(r)},a.prototype.getCss=function(r){return this.em.getCss(r)},a.prototype.getJs=function(r){return this.em.getJs(r)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(r,t){return t===void 0&&(t={}),this.em.setComponents(r,t),this},a.prototype.addComponents=function(r,t){return this.getWrapper().append(r,t)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(r,t){return t===void 0&&(t={}),this.em.setStyle(r,t),this},a.prototype.addStyle=function(r,t){return t===void 0&&(t={}),this.em.addStyle(r,t)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var r=this.em.getSelected();if(r)return this.StyleManager.getModelToStyle(r)},a.prototype.select=function(r,t){return this.em.setSelected(r,t),this},a.prototype.selectAdd=function(r){return this.em.addSelected(r),this},a.prototype.selectRemove=function(r){return this.em.removeSelected(r),this},a.prototype.selectToggle=function(r){return this.em.toggleSelected(r),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(r){return this.em.set("device",r),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(r,t){return t===void 0&&(t={}),this.Commands.run(r,t)},a.prototype.stopCommand=function(r,t){return t===void 0&&(t={}),this.Commands.stop(r,t)},a.prototype.store=function(r){return Sh(this,void 0,void 0,function(){return Oh(this,function(t){switch(t.label){case 0:return[4,this.em.store(r)];case 1:return[2,t.sent()]}})})},a.prototype.load=function(r){return Sh(this,void 0,void 0,function(){return Oh(this,function(t){switch(t.label){case 0:return[4,this.em.load(r)];case 1:return[2,t.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(r){return this.em.loadData(r)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(r){return this.em.loadData(r)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(r){this.em.refreshCanvas(r)},a.prototype.setCustomRte=function(r){this.RichTextEditor.customRte=r},a.prototype.setCustomParserCss=function(r){return this.Parser.getConfig().parserCss=r,this},a.prototype.setDragMode=function(r){return this.em.setDragMode(r),this},a.prototype.log=function(r,t){return t===void 0&&(t={}),this.em.log(r,t),this},a.prototype.t=function(){for(var r,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(r=this.em).t.apply(r,t)},a.prototype.on=function(r,t){return this.em.on(r,t),this},a.prototype.once=function(r,t){return this.em.once(r,t),this},a.prototype.off=function(r,t){return this.em.off(r,t),this},a.prototype.trigger=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return this.em.trigger.apply(this.em,Ay([r],t,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var r;return(r=this.editorView)===null||r===void 0?void 0:r.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var r;return(r=this.editorView)===null||r===void 0||r.remove(),this.editorView=new Py(this.em),this.editorView.render().el},a.prototype.onReady=function(r){this.em.get("ready")?r(this):this.em.on("load",r)},a}();const My=jy,Ly=function(){function a(){this.plugins={}}return a.prototype.add=function(r,t){var e=this.get(r);return e||(this.plugins[r]=t,t)},a.prototype.get=function(r){return this.plugins[r]},a.prototype.getAll=function(){return this.plugins},a}();var kp=function(){return kp=Object.assign||function(a){for(var r,t=1,e=arguments.length;t<e;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a},kp.apply(this,arguments)};(function(){if((0,N.hasWin)()&&function(){for(var r,t=window.navigator.userAgent,e=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],n=0;n<e.length&&!(r=e[n][1].exec(t));n++);return!!r}()){var a=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(r){return r||(r=""),a.apply(document.implementation,[r])}}})();var Th=new Ly,Eh=[],Dy={$:tt.default,editors:Eh,plugins:Th,version:"0.20.4",init:function(a){a===void 0&&(a={});var r=a.headless,t=a.container;if(!t&&!r)throw new Error("'container' is required");var e=kp(kp({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:r?void 0:(0,y.isElement)(t)?t:document.querySelector(t)}),n=new My(e,{$:tt.default}),i=n.getModel();return e.plugins.forEach(function(l){var f=(0,y.isFunction)(l)?l:Th.get(l),d=e.pluginsOpts[l]||{};if(!f){var m=(0,N.getGlobal)()[l];f=(m==null?void 0:m.default)||m}f?f(n,d):(0,y.isFunction)(l)?l(n,d):i.logWarning("Plugin ".concat(l," not found"),{context:"plugins",plugin:l})}),i.loadOnStart(),e.autorender&&!r&&n.render(),Eh.push(n),n}};const Ny=Dy})(),U=U.default})())})(n0);const r0=Md(yd),zp="gjs-open-import-webpage",bd="set-device-desktop",wd="set-device-tablet",_d="set-device-mobile",Cd="canvas-clear",xd="save-data",Sd="load-data",o0=(P,B)=>{const W=P.getConfig("stylePrefix"),Q=P.Modal,rt=document.createElement("div"),U=B.modalImportLabel,y=B.modalImportContent,tt=P.CodeManager.getViewer("CodeMirror").clone();let N=tt.editor;const K=document.createElement("button");return K.type="button",K.innerHTML=B.modalImportButton,K.className=`${W}btn-prim ${W}btn-import`,K.onclick=gt=>{P.Css.clear(),P.setComponents(N.getValue().trim()),Q.close()},tt.set({codeName:"htmlmixed",theme:"hopscotch",readOnly:0,...B.importViewerOptions}),{run(gt){if(!N){const nt=document.createElement("textarea");if(U){const G=document.createElement("div");G.className=`${W}import-label`,G.innerHTML=U,rt.appendChild(G)}rt.appendChild(nt),rt.appendChild(K),tt.init(nt),N=tt.editor}Q.setTitle(B.modalImportTitle),Q.setContent(rt);const X=typeof y=="function"?y(gt):y;tt.setContent(X||""),Q.open().onceClose(()=>gt.stopCommand(zp)),N.refresh()},stop(){Q.close()}}};function ng(P,B){return function(){return P.apply(B,arguments)}}const{toString:rg}=Object.prototype,{getPrototypeOf:Ld}=Object,Dd=(P=>B=>{const W=rg.call(B);return P[W]||(P[W]=W.slice(8,-1).toLowerCase())})(Object.create(null)),$s=P=>(P=P.toLowerCase(),B=>Dd(B)===P),$p=P=>B=>typeof B===P,{isArray:fc}=Array,fu=$p("undefined");function i0(P){return P!==null&&!fu(P)&&P.constructor!==null&&!fu(P.constructor)&&Aa(P.constructor.isBuffer)&&P.constructor.isBuffer(P)}const og=$s("ArrayBuffer");function s0(P){let B;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?B=ArrayBuffer.isView(P):B=P&&P.buffer&&og(P.buffer),B}const a0=$p("string"),Aa=$p("function"),ig=$p("number"),Nd=P=>P!==null&&typeof P=="object",l0=P=>P===!0||P===!1,Rp=P=>{if(Dd(P)!=="object")return!1;const B=Ld(P);return(B===null||B===Object.prototype||Object.getPrototypeOf(B)===null)&&!(Symbol.toStringTag in P)&&!(Symbol.iterator in P)},c0=$s("Date"),u0=$s("File"),p0=$s("Blob"),f0=$s("FileList"),d0=P=>Nd(P)&&Aa(P.pipe),h0=P=>{const B="[object FormData]";return P&&(typeof FormData=="function"&&P instanceof FormData||rg.call(P)===B||Aa(P.toString)&&P.toString()===B)},g0=$s("URLSearchParams"),m0=P=>P.trim?P.trim():P.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function du(P,B,{allOwnKeys:W=!1}={}){if(P===null||typeof P>"u")return;let Q,rt;if(typeof P!="object"&&(P=[P]),fc(P))for(Q=0,rt=P.length;Q<rt;Q++)B.call(null,P[Q],Q,P);else{const U=W?Object.getOwnPropertyNames(P):Object.keys(P),y=U.length;let tt;for(Q=0;Q<y;Q++)tt=U[Q],B.call(null,P[tt],tt,P)}}function sg(P,B){B=B.toLowerCase();const W=Object.keys(P);let Q=W.length,rt;for(;Q-- >0;)if(rt=W[Q],B===rt.toLowerCase())return rt;return null}const ag=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),lg=P=>!fu(P)&&P!==ag;function Od(){const{caseless:P}=lg(this)&&this||{},B={},W=(Q,rt)=>{const U=P&&sg(B,rt)||rt;Rp(B[U])&&Rp(Q)?B[U]=Od(B[U],Q):Rp(Q)?B[U]=Od({},Q):fc(Q)?B[U]=Q.slice():B[U]=Q};for(let Q=0,rt=arguments.length;Q<rt;Q++)arguments[Q]&&du(arguments[Q],W);return B}const v0=(P,B,W,{allOwnKeys:Q}={})=>(du(B,(rt,U)=>{W&&Aa(rt)?P[U]=ng(rt,W):P[U]=rt},{allOwnKeys:Q}),P),y0=P=>(P.charCodeAt(0)===65279&&(P=P.slice(1)),P),b0=(P,B,W,Q)=>{P.prototype=Object.create(B.prototype,Q),P.prototype.constructor=P,Object.defineProperty(P,"super",{value:B.prototype}),W&&Object.assign(P.prototype,W)},w0=(P,B,W,Q)=>{let rt,U,y;const tt={};if(B=B||{},P==null)return B;do{for(rt=Object.getOwnPropertyNames(P),U=rt.length;U-- >0;)y=rt[U],(!Q||Q(y,P,B))&&!tt[y]&&(B[y]=P[y],tt[y]=!0);P=W!==!1&&Ld(P)}while(P&&(!W||W(P,B))&&P!==Object.prototype);return B},_0=(P,B,W)=>{P=String(P),(W===void 0||W>P.length)&&(W=P.length),W-=B.length;const Q=P.indexOf(B,W);return Q!==-1&&Q===W},C0=P=>{if(!P)return null;if(fc(P))return P;let B=P.length;if(!ig(B))return null;const W=new Array(B);for(;B-- >0;)W[B]=P[B];return W},x0=(P=>B=>P&&B instanceof P)(typeof Uint8Array<"u"&&Ld(Uint8Array)),S0=(P,B)=>{const Q=(P&&P[Symbol.iterator]).call(P);let rt;for(;(rt=Q.next())&&!rt.done;){const U=rt.value;B.call(P,U[0],U[1])}},O0=(P,B)=>{let W;const Q=[];for(;(W=P.exec(B))!==null;)Q.push(W);return Q},T0=$s("HTMLFormElement"),E0=P=>P.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(W,Q,rt){return Q.toUpperCase()+rt}),qh=(({hasOwnProperty:P})=>(B,W)=>P.call(B,W))(Object.prototype),k0=$s("RegExp"),cg=(P,B)=>{const W=Object.getOwnPropertyDescriptors(P),Q={};du(W,(rt,U)=>{B(rt,U,P)!==!1&&(Q[U]=rt)}),Object.defineProperties(P,Q)},P0=P=>{cg(P,(B,W)=>{if(Aa(P)&&["arguments","caller","callee"].indexOf(W)!==-1)return!1;const Q=P[W];if(Aa(Q)){if(B.enumerable=!1,"writable"in B){B.writable=!1;return}B.set||(B.set=()=>{throw Error("Can not rewrite read-only method '"+W+"'")})}})},A0=(P,B)=>{const W={},Q=rt=>{rt.forEach(U=>{W[U]=!0})};return fc(P)?Q(P):Q(String(P).split(B)),W},j0=()=>{},M0=(P,B)=>(P=+P,Number.isFinite(P)?P:B),hd="abcdefghijklmnopqrstuvwxyz",Gh="0123456789",ug={DIGIT:Gh,ALPHA:hd,ALPHA_DIGIT:hd+hd.toUpperCase()+Gh},L0=(P=16,B=ug.ALPHA_DIGIT)=>{let W="";const{length:Q}=B;for(;P--;)W+=B[Math.random()*Q|0];return W};function D0(P){return!!(P&&Aa(P.append)&&P[Symbol.toStringTag]==="FormData"&&P[Symbol.iterator])}const N0=P=>{const B=new Array(10),W=(Q,rt)=>{if(Nd(Q)){if(B.indexOf(Q)>=0)return;if(!("toJSON"in Q)){B[rt]=Q;const U=fc(Q)?[]:{};return du(Q,(y,tt)=>{const N=W(y,rt+1);!fu(N)&&(U[tt]=N)}),B[rt]=void 0,U}}return Q};return W(P,0)},ee={isArray:fc,isArrayBuffer:og,isBuffer:i0,isFormData:h0,isArrayBufferView:s0,isString:a0,isNumber:ig,isBoolean:l0,isObject:Nd,isPlainObject:Rp,isUndefined:fu,isDate:c0,isFile:u0,isBlob:p0,isRegExp:k0,isFunction:Aa,isStream:d0,isURLSearchParams:g0,isTypedArray:x0,isFileList:f0,forEach:du,merge:Od,extend:v0,trim:m0,stripBOM:y0,inherits:b0,toFlatObject:w0,kindOf:Dd,kindOfTest:$s,endsWith:_0,toArray:C0,forEachEntry:S0,matchAll:O0,isHTMLForm:T0,hasOwnProperty:qh,hasOwnProp:qh,reduceDescriptors:cg,freezeMethods:P0,toObjectSet:A0,toCamelCase:E0,noop:j0,toFiniteNumber:M0,findKey:sg,global:ag,isContextDefined:lg,ALPHABET:ug,generateString:L0,isSpecCompliantForm:D0,toJSONObject:N0};function _n(P,B,W,Q,rt){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=P,this.name="AxiosError",B&&(this.code=B),W&&(this.config=W),Q&&(this.request=Q),rt&&(this.response=rt)}ee.inherits(_n,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const pg=_n.prototype,fg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(P=>{fg[P]={value:P}});Object.defineProperties(_n,fg);Object.defineProperty(pg,"isAxiosError",{value:!0});_n.from=(P,B,W,Q,rt,U)=>{const y=Object.create(pg);return ee.toFlatObject(P,y,function(N){return N!==Error.prototype},tt=>tt!=="isAxiosError"),_n.call(y,P.message,B,W,Q,rt),y.cause=P,y.name=P.name,U&&Object.assign(y,U),y};const I0=null;function Td(P){return ee.isPlainObject(P)||ee.isArray(P)}function dg(P){return ee.endsWith(P,"[]")?P.slice(0,-2):P}function Kh(P,B,W){return P?P.concat(B).map(function(rt,U){return rt=dg(rt),!W&&U?"["+rt+"]":rt}).join(W?".":""):B}function F0(P){return ee.isArray(P)&&!P.some(Td)}const R0=ee.toFlatObject(ee,{},null,function(B){return/^is[A-Z]/.test(B)});function Wp(P,B,W){if(!ee.isObject(P))throw new TypeError("target must be an object");B=B||new FormData,W=ee.toFlatObject(W,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,D){return!ee.isUndefined(D[T])});const Q=W.metaTokens,rt=W.visitor||gt,U=W.dots,y=W.indexes,N=(W.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(B);if(!ee.isFunction(rt))throw new TypeError("visitor must be a function");function K(S){if(S===null)return"";if(ee.isDate(S))return S.toISOString();if(!N&&ee.isBlob(S))throw new _n("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(S)||ee.isTypedArray(S)?N&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function gt(S,T,D){let F=S;if(S&&!D&&typeof S=="object"){if(ee.endsWith(T,"{}"))T=Q?T:T.slice(0,-2),S=JSON.stringify(S);else if(ee.isArray(S)&&F0(S)||(ee.isFileList(S)||ee.endsWith(T,"[]"))&&(F=ee.toArray(S)))return T=dg(T),F.forEach(function(dt,bt){!(ee.isUndefined(dt)||dt===null)&&B.append(y===!0?Kh([T],bt,U):y===null?T:T+"[]",K(dt))}),!1}return Td(S)?!0:(B.append(Kh(D,T,U),K(S)),!1)}const X=[],nt=Object.assign(R0,{defaultVisitor:gt,convertValue:K,isVisitable:Td});function G(S,T){if(!ee.isUndefined(S)){if(X.indexOf(S)!==-1)throw Error("Circular reference detected in "+T.join("."));X.push(S),ee.forEach(S,function(F,R){(!(ee.isUndefined(F)||F===null)&&rt.call(B,F,ee.isString(R)?R.trim():R,T,nt))===!0&&G(F,T?T.concat(R):[R])}),X.pop()}}if(!ee.isObject(P))throw new TypeError("data must be an object");return G(P),B}function Yh(P){const B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(P).replace(/[!'()~]|%20|%00/g,function(Q){return B[Q]})}function Id(P,B){this._pairs=[],P&&Wp(P,this,B)}const hg=Id.prototype;hg.append=function(B,W){this._pairs.push([B,W])};hg.toString=function(B){const W=B?function(Q){return B.call(this,Q,Yh)}:Yh;return this._pairs.map(function(rt){return W(rt[0])+"="+W(rt[1])},"").join("&")};function V0(P){return encodeURIComponent(P).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gg(P,B,W){if(!B)return P;const Q=W&&W.encode||V0,rt=W&&W.serialize;let U;if(rt?U=rt(B,W):U=ee.isURLSearchParams(B)?B.toString():new Id(B,W).toString(Q),U){const y=P.indexOf("#");y!==-1&&(P=P.slice(0,y)),P+=(P.indexOf("?")===-1?"?":"&")+U}return P}class H0{constructor(){this.handlers=[]}use(B,W,Q){return this.handlers.push({fulfilled:B,rejected:W,synchronous:Q?Q.synchronous:!1,runWhen:Q?Q.runWhen:null}),this.handlers.length-1}eject(B){this.handlers[B]&&(this.handlers[B]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(B){ee.forEach(this.handlers,function(Q){Q!==null&&B(Q)})}}const Jh=H0,mg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},B0=typeof URLSearchParams<"u"?URLSearchParams:Id,z0=typeof FormData<"u"?FormData:null,U0=typeof Blob<"u"?Blob:null,$0=(()=>{let P;return typeof navigator<"u"&&((P=navigator.product)==="ReactNative"||P==="NativeScript"||P==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),W0=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),vs={isBrowser:!0,classes:{URLSearchParams:B0,FormData:z0,Blob:U0},isStandardBrowserEnv:$0,isStandardBrowserWebWorkerEnv:W0,protocols:["http","https","file","blob","url","data"]};function q0(P,B){return Wp(P,new vs.classes.URLSearchParams,Object.assign({visitor:function(W,Q,rt,U){return vs.isNode&&ee.isBuffer(W)?(this.append(Q,W.toString("base64")),!1):U.defaultVisitor.apply(this,arguments)}},B))}function G0(P){return ee.matchAll(/\w+|\[(\w*)]/g,P).map(B=>B[0]==="[]"?"":B[1]||B[0])}function K0(P){const B={},W=Object.keys(P);let Q;const rt=W.length;let U;for(Q=0;Q<rt;Q++)U=W[Q],B[U]=P[U];return B}function vg(P){function B(W,Q,rt,U){let y=W[U++];const tt=Number.isFinite(+y),N=U>=W.length;return y=!y&&ee.isArray(rt)?rt.length:y,N?(ee.hasOwnProp(rt,y)?rt[y]=[rt[y],Q]:rt[y]=Q,!tt):((!rt[y]||!ee.isObject(rt[y]))&&(rt[y]=[]),B(W,Q,rt[y],U)&&ee.isArray(rt[y])&&(rt[y]=K0(rt[y])),!tt)}if(ee.isFormData(P)&&ee.isFunction(P.entries)){const W={};return ee.forEachEntry(P,(Q,rt)=>{B(G0(Q),rt,W,0)}),W}return null}const Y0={"Content-Type":void 0};function J0(P,B,W){if(ee.isString(P))try{return(B||JSON.parse)(P),ee.trim(P)}catch(Q){if(Q.name!=="SyntaxError")throw Q}return(W||JSON.stringify)(P)}const qp={transitional:mg,adapter:["xhr","http"],transformRequest:[function(B,W){const Q=W.getContentType()||"",rt=Q.indexOf("application/json")>-1,U=ee.isObject(B);if(U&&ee.isHTMLForm(B)&&(B=new FormData(B)),ee.isFormData(B))return rt&&rt?JSON.stringify(vg(B)):B;if(ee.isArrayBuffer(B)||ee.isBuffer(B)||ee.isStream(B)||ee.isFile(B)||ee.isBlob(B))return B;if(ee.isArrayBufferView(B))return B.buffer;if(ee.isURLSearchParams(B))return W.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),B.toString();let tt;if(U){if(Q.indexOf("application/x-www-form-urlencoded")>-1)return q0(B,this.formSerializer).toString();if((tt=ee.isFileList(B))||Q.indexOf("multipart/form-data")>-1){const N=this.env&&this.env.FormData;return Wp(tt?{"files[]":B}:B,N&&new N,this.formSerializer)}}return U||rt?(W.setContentType("application/json",!1),J0(B)):B}],transformResponse:[function(B){const W=this.transitional||qp.transitional,Q=W&&W.forcedJSONParsing,rt=this.responseType==="json";if(B&&ee.isString(B)&&(Q&&!this.responseType||rt)){const y=!(W&&W.silentJSONParsing)&&rt;try{return JSON.parse(B)}catch(tt){if(y)throw tt.name==="SyntaxError"?_n.from(tt,_n.ERR_BAD_RESPONSE,this,null,this.response):tt}}return B}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vs.classes.FormData,Blob:vs.classes.Blob},validateStatus:function(B){return B>=200&&B<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ee.forEach(["delete","get","head"],function(B){qp.headers[B]={}});ee.forEach(["post","put","patch"],function(B){qp.headers[B]=ee.merge(Y0)});const Fd=qp,Z0=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),X0=P=>{const B={};let W,Q,rt;return P&&P.split(`
`).forEach(function(y){rt=y.indexOf(":"),W=y.substring(0,rt).trim().toLowerCase(),Q=y.substring(rt+1).trim(),!(!W||B[W]&&Z0[W])&&(W==="set-cookie"?B[W]?B[W].push(Q):B[W]=[Q]:B[W]=B[W]?B[W]+", "+Q:Q)}),B},Zh=Symbol("internals");function pu(P){return P&&String(P).trim().toLowerCase()}function Vp(P){return P===!1||P==null?P:ee.isArray(P)?P.map(Vp):String(P)}function Q0(P){const B=Object.create(null),W=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let Q;for(;Q=W.exec(P);)B[Q[1]]=Q[2];return B}function tb(P){return/^[-_a-zA-Z]+$/.test(P.trim())}function gd(P,B,W,Q,rt){if(ee.isFunction(Q))return Q.call(this,B,W);if(rt&&(B=W),!!ee.isString(B)){if(ee.isString(Q))return B.indexOf(Q)!==-1;if(ee.isRegExp(Q))return Q.test(B)}}function eb(P){return P.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(B,W,Q)=>W.toUpperCase()+Q)}function nb(P,B){const W=ee.toCamelCase(" "+B);["get","set","has"].forEach(Q=>{Object.defineProperty(P,Q+W,{value:function(rt,U,y){return this[Q].call(this,B,rt,U,y)},configurable:!0})})}class Gp{constructor(B){B&&this.set(B)}set(B,W,Q){const rt=this;function U(tt,N,K){const gt=pu(N);if(!gt)throw new Error("header name must be a non-empty string");const X=ee.findKey(rt,gt);(!X||rt[X]===void 0||K===!0||K===void 0&&rt[X]!==!1)&&(rt[X||N]=Vp(tt))}const y=(tt,N)=>ee.forEach(tt,(K,gt)=>U(K,gt,N));return ee.isPlainObject(B)||B instanceof this.constructor?y(B,W):ee.isString(B)&&(B=B.trim())&&!tb(B)?y(X0(B),W):B!=null&&U(W,B,Q),this}get(B,W){if(B=pu(B),B){const Q=ee.findKey(this,B);if(Q){const rt=this[Q];if(!W)return rt;if(W===!0)return Q0(rt);if(ee.isFunction(W))return W.call(this,rt,Q);if(ee.isRegExp(W))return W.exec(rt);throw new TypeError("parser must be boolean|regexp|function")}}}has(B,W){if(B=pu(B),B){const Q=ee.findKey(this,B);return!!(Q&&this[Q]!==void 0&&(!W||gd(this,this[Q],Q,W)))}return!1}delete(B,W){const Q=this;let rt=!1;function U(y){if(y=pu(y),y){const tt=ee.findKey(Q,y);tt&&(!W||gd(Q,Q[tt],tt,W))&&(delete Q[tt],rt=!0)}}return ee.isArray(B)?B.forEach(U):U(B),rt}clear(B){const W=Object.keys(this);let Q=W.length,rt=!1;for(;Q--;){const U=W[Q];(!B||gd(this,this[U],U,B,!0))&&(delete this[U],rt=!0)}return rt}normalize(B){const W=this,Q={};return ee.forEach(this,(rt,U)=>{const y=ee.findKey(Q,U);if(y){W[y]=Vp(rt),delete W[U];return}const tt=B?eb(U):String(U).trim();tt!==U&&delete W[U],W[tt]=Vp(rt),Q[tt]=!0}),this}concat(...B){return this.constructor.concat(this,...B)}toJSON(B){const W=Object.create(null);return ee.forEach(this,(Q,rt)=>{Q!=null&&Q!==!1&&(W[rt]=B&&ee.isArray(Q)?Q.join(", "):Q)}),W}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([B,W])=>B+": "+W).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(B){return B instanceof this?B:new this(B)}static concat(B,...W){const Q=new this(B);return W.forEach(rt=>Q.set(rt)),Q}static accessor(B){const Q=(this[Zh]=this[Zh]={accessors:{}}).accessors,rt=this.prototype;function U(y){const tt=pu(y);Q[tt]||(nb(rt,y),Q[tt]=!0)}return ee.isArray(B)?B.forEach(U):U(B),this}}Gp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.freezeMethods(Gp.prototype);ee.freezeMethods(Gp);const Us=Gp;function md(P,B){const W=this||Fd,Q=B||W,rt=Us.from(Q.headers);let U=Q.data;return ee.forEach(P,function(tt){U=tt.call(W,U,rt.normalize(),B?B.status:void 0)}),rt.normalize(),U}function yg(P){return!!(P&&P.__CANCEL__)}function hu(P,B,W){_n.call(this,P??"canceled",_n.ERR_CANCELED,B,W),this.name="CanceledError"}ee.inherits(hu,_n,{__CANCEL__:!0});function rb(P,B,W){const Q=W.config.validateStatus;!W.status||!Q||Q(W.status)?P(W):B(new _n("Request failed with status code "+W.status,[_n.ERR_BAD_REQUEST,_n.ERR_BAD_RESPONSE][Math.floor(W.status/100)-4],W.config,W.request,W))}const ob=vs.isStandardBrowserEnv?function(){return{write:function(W,Q,rt,U,y,tt){const N=[];N.push(W+"="+encodeURIComponent(Q)),ee.isNumber(rt)&&N.push("expires="+new Date(rt).toGMTString()),ee.isString(U)&&N.push("path="+U),ee.isString(y)&&N.push("domain="+y),tt===!0&&N.push("secure"),document.cookie=N.join("; ")},read:function(W){const Q=document.cookie.match(new RegExp("(^|;\\s*)("+W+")=([^;]*)"));return Q?decodeURIComponent(Q[3]):null},remove:function(W){this.write(W,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function ib(P){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(P)}function sb(P,B){return B?P.replace(/\/+$/,"")+"/"+B.replace(/^\/+/,""):P}function bg(P,B){return P&&!ib(B)?sb(P,B):B}const ab=vs.isStandardBrowserEnv?function(){const B=/(msie|trident)/i.test(navigator.userAgent),W=document.createElement("a");let Q;function rt(U){let y=U;return B&&(W.setAttribute("href",y),y=W.href),W.setAttribute("href",y),{href:W.href,protocol:W.protocol?W.protocol.replace(/:$/,""):"",host:W.host,search:W.search?W.search.replace(/^\?/,""):"",hash:W.hash?W.hash.replace(/^#/,""):"",hostname:W.hostname,port:W.port,pathname:W.pathname.charAt(0)==="/"?W.pathname:"/"+W.pathname}}return Q=rt(window.location.href),function(y){const tt=ee.isString(y)?rt(y):y;return tt.protocol===Q.protocol&&tt.host===Q.host}}():function(){return function(){return!0}}();function lb(P){const B=/^([-+\w]{1,25})(:?\/\/|:)/.exec(P);return B&&B[1]||""}function cb(P,B){P=P||10;const W=new Array(P),Q=new Array(P);let rt=0,U=0,y;return B=B!==void 0?B:1e3,function(N){const K=Date.now(),gt=Q[U];y||(y=K),W[rt]=N,Q[rt]=K;let X=U,nt=0;for(;X!==rt;)nt+=W[X++],X=X%P;if(rt=(rt+1)%P,rt===U&&(U=(U+1)%P),K-y<B)return;const G=gt&&K-gt;return G?Math.round(nt*1e3/G):void 0}}function Xh(P,B){let W=0;const Q=cb(50,250);return rt=>{const U=rt.loaded,y=rt.lengthComputable?rt.total:void 0,tt=U-W,N=Q(tt),K=U<=y;W=U;const gt={loaded:U,total:y,progress:y?U/y:void 0,bytes:tt,rate:N||void 0,estimated:N&&y&&K?(y-U)/N:void 0,event:rt};gt[B?"download":"upload"]=!0,P(gt)}}const ub=typeof XMLHttpRequest<"u",pb=ub&&function(P){return new Promise(function(W,Q){let rt=P.data;const U=Us.from(P.headers).normalize(),y=P.responseType;let tt;function N(){P.cancelToken&&P.cancelToken.unsubscribe(tt),P.signal&&P.signal.removeEventListener("abort",tt)}ee.isFormData(rt)&&(vs.isStandardBrowserEnv||vs.isStandardBrowserWebWorkerEnv)&&U.setContentType(!1);let K=new XMLHttpRequest;if(P.auth){const G=P.auth.username||"",S=P.auth.password?unescape(encodeURIComponent(P.auth.password)):"";U.set("Authorization","Basic "+btoa(G+":"+S))}const gt=bg(P.baseURL,P.url);K.open(P.method.toUpperCase(),gg(gt,P.params,P.paramsSerializer),!0),K.timeout=P.timeout;function X(){if(!K)return;const G=Us.from("getAllResponseHeaders"in K&&K.getAllResponseHeaders()),T={data:!y||y==="text"||y==="json"?K.responseText:K.response,status:K.status,statusText:K.statusText,headers:G,config:P,request:K};rb(function(F){W(F),N()},function(F){Q(F),N()},T),K=null}if("onloadend"in K?K.onloadend=X:K.onreadystatechange=function(){!K||K.readyState!==4||K.status===0&&!(K.responseURL&&K.responseURL.indexOf("file:")===0)||setTimeout(X)},K.onabort=function(){K&&(Q(new _n("Request aborted",_n.ECONNABORTED,P,K)),K=null)},K.onerror=function(){Q(new _n("Network Error",_n.ERR_NETWORK,P,K)),K=null},K.ontimeout=function(){let S=P.timeout?"timeout of "+P.timeout+"ms exceeded":"timeout exceeded";const T=P.transitional||mg;P.timeoutErrorMessage&&(S=P.timeoutErrorMessage),Q(new _n(S,T.clarifyTimeoutError?_n.ETIMEDOUT:_n.ECONNABORTED,P,K)),K=null},vs.isStandardBrowserEnv){const G=(P.withCredentials||ab(gt))&&P.xsrfCookieName&&ob.read(P.xsrfCookieName);G&&U.set(P.xsrfHeaderName,G)}rt===void 0&&U.setContentType(null),"setRequestHeader"in K&&ee.forEach(U.toJSON(),function(S,T){K.setRequestHeader(T,S)}),ee.isUndefined(P.withCredentials)||(K.withCredentials=!!P.withCredentials),y&&y!=="json"&&(K.responseType=P.responseType),typeof P.onDownloadProgress=="function"&&K.addEventListener("progress",Xh(P.onDownloadProgress,!0)),typeof P.onUploadProgress=="function"&&K.upload&&K.upload.addEventListener("progress",Xh(P.onUploadProgress)),(P.cancelToken||P.signal)&&(tt=G=>{K&&(Q(!G||G.type?new hu(null,P,K):G),K.abort(),K=null)},P.cancelToken&&P.cancelToken.subscribe(tt),P.signal&&(P.signal.aborted?tt():P.signal.addEventListener("abort",tt)));const nt=lb(gt);if(nt&&vs.protocols.indexOf(nt)===-1){Q(new _n("Unsupported protocol "+nt+":",_n.ERR_BAD_REQUEST,P));return}K.send(rt||null)})},Hp={http:I0,xhr:pb};ee.forEach(Hp,(P,B)=>{if(P){try{Object.defineProperty(P,"name",{value:B})}catch{}Object.defineProperty(P,"adapterName",{value:B})}});const fb={getAdapter:P=>{P=ee.isArray(P)?P:[P];const{length:B}=P;let W,Q;for(let rt=0;rt<B&&(W=P[rt],!(Q=ee.isString(W)?Hp[W.toLowerCase()]:W));rt++);if(!Q)throw Q===!1?new _n(`Adapter ${W} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(ee.hasOwnProp(Hp,W)?`Adapter '${W}' is not available in the build`:`Unknown adapter '${W}'`);if(!ee.isFunction(Q))throw new TypeError("adapter is not a function");return Q},adapters:Hp};function vd(P){if(P.cancelToken&&P.cancelToken.throwIfRequested(),P.signal&&P.signal.aborted)throw new hu(null,P)}function Qh(P){return vd(P),P.headers=Us.from(P.headers),P.data=md.call(P,P.transformRequest),["post","put","patch"].indexOf(P.method)!==-1&&P.headers.setContentType("application/x-www-form-urlencoded",!1),fb.getAdapter(P.adapter||Fd.adapter)(P).then(function(Q){return vd(P),Q.data=md.call(P,P.transformResponse,Q),Q.headers=Us.from(Q.headers),Q},function(Q){return yg(Q)||(vd(P),Q&&Q.response&&(Q.response.data=md.call(P,P.transformResponse,Q.response),Q.response.headers=Us.from(Q.response.headers))),Promise.reject(Q)})}const tg=P=>P instanceof Us?P.toJSON():P;function pc(P,B){B=B||{};const W={};function Q(K,gt,X){return ee.isPlainObject(K)&&ee.isPlainObject(gt)?ee.merge.call({caseless:X},K,gt):ee.isPlainObject(gt)?ee.merge({},gt):ee.isArray(gt)?gt.slice():gt}function rt(K,gt,X){if(ee.isUndefined(gt)){if(!ee.isUndefined(K))return Q(void 0,K,X)}else return Q(K,gt,X)}function U(K,gt){if(!ee.isUndefined(gt))return Q(void 0,gt)}function y(K,gt){if(ee.isUndefined(gt)){if(!ee.isUndefined(K))return Q(void 0,K)}else return Q(void 0,gt)}function tt(K,gt,X){if(X in B)return Q(K,gt);if(X in P)return Q(void 0,K)}const N={url:U,method:U,data:U,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:tt,headers:(K,gt)=>rt(tg(K),tg(gt),!0)};return ee.forEach(Object.keys(P).concat(Object.keys(B)),function(gt){const X=N[gt]||rt,nt=X(P[gt],B[gt],gt);ee.isUndefined(nt)&&X!==tt||(W[gt]=nt)}),W}const wg="1.3.4",Rd={};["object","boolean","number","function","string","symbol"].forEach((P,B)=>{Rd[P]=function(Q){return typeof Q===P||"a"+(B<1?"n ":" ")+P}});const eg={};Rd.transitional=function(B,W,Q){function rt(U,y){return"[Axios v"+wg+"] Transitional option '"+U+"'"+y+(Q?". "+Q:"")}return(U,y,tt)=>{if(B===!1)throw new _n(rt(y," has been removed"+(W?" in "+W:"")),_n.ERR_DEPRECATED);return W&&!eg[y]&&(eg[y]=!0,console.warn(rt(y," has been deprecated since v"+W+" and will be removed in the near future"))),B?B(U,y,tt):!0}};function db(P,B,W){if(typeof P!="object")throw new _n("options must be an object",_n.ERR_BAD_OPTION_VALUE);const Q=Object.keys(P);let rt=Q.length;for(;rt-- >0;){const U=Q[rt],y=B[U];if(y){const tt=P[U],N=tt===void 0||y(tt,U,P);if(N!==!0)throw new _n("option "+U+" must be "+N,_n.ERR_BAD_OPTION_VALUE);continue}if(W!==!0)throw new _n("Unknown option "+U,_n.ERR_BAD_OPTION)}}const Ed={assertOptions:db,validators:Rd},Pa=Ed.validators;class Up{constructor(B){this.defaults=B,this.interceptors={request:new Jh,response:new Jh}}request(B,W){typeof B=="string"?(W=W||{},W.url=B):W=B||{},W=pc(this.defaults,W);const{transitional:Q,paramsSerializer:rt,headers:U}=W;Q!==void 0&&Ed.assertOptions(Q,{silentJSONParsing:Pa.transitional(Pa.boolean),forcedJSONParsing:Pa.transitional(Pa.boolean),clarifyTimeoutError:Pa.transitional(Pa.boolean)},!1),rt!==void 0&&Ed.assertOptions(rt,{encode:Pa.function,serialize:Pa.function},!0),W.method=(W.method||this.defaults.method||"get").toLowerCase();let y;y=U&&ee.merge(U.common,U[W.method]),y&&ee.forEach(["delete","get","head","post","put","patch","common"],S=>{delete U[S]}),W.headers=Us.concat(y,U);const tt=[];let N=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(W)===!1||(N=N&&T.synchronous,tt.unshift(T.fulfilled,T.rejected))});const K=[];this.interceptors.response.forEach(function(T){K.push(T.fulfilled,T.rejected)});let gt,X=0,nt;if(!N){const S=[Qh.bind(this),void 0];for(S.unshift.apply(S,tt),S.push.apply(S,K),nt=S.length,gt=Promise.resolve(W);X<nt;)gt=gt.then(S[X++],S[X++]);return gt}nt=tt.length;let G=W;for(X=0;X<nt;){const S=tt[X++],T=tt[X++];try{G=S(G)}catch(D){T.call(this,D);break}}try{gt=Qh.call(this,G)}catch(S){return Promise.reject(S)}for(X=0,nt=K.length;X<nt;)gt=gt.then(K[X++],K[X++]);return gt}getUri(B){B=pc(this.defaults,B);const W=bg(B.baseURL,B.url);return gg(W,B.params,B.paramsSerializer)}}ee.forEach(["delete","get","head","options"],function(B){Up.prototype[B]=function(W,Q){return this.request(pc(Q||{},{method:B,url:W,data:(Q||{}).data}))}});ee.forEach(["post","put","patch"],function(B){function W(Q){return function(U,y,tt){return this.request(pc(tt||{},{method:B,headers:Q?{"Content-Type":"multipart/form-data"}:{},url:U,data:y}))}}Up.prototype[B]=W(),Up.prototype[B+"Form"]=W(!0)});const Bp=Up;class Vd{constructor(B){if(typeof B!="function")throw new TypeError("executor must be a function.");let W;this.promise=new Promise(function(U){W=U});const Q=this;this.promise.then(rt=>{if(!Q._listeners)return;let U=Q._listeners.length;for(;U-- >0;)Q._listeners[U](rt);Q._listeners=null}),this.promise.then=rt=>{let U;const y=new Promise(tt=>{Q.subscribe(tt),U=tt}).then(rt);return y.cancel=function(){Q.unsubscribe(U)},y},B(function(U,y,tt){Q.reason||(Q.reason=new hu(U,y,tt),W(Q.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(B){if(this.reason){B(this.reason);return}this._listeners?this._listeners.push(B):this._listeners=[B]}unsubscribe(B){if(!this._listeners)return;const W=this._listeners.indexOf(B);W!==-1&&this._listeners.splice(W,1)}static source(){let B;return{token:new Vd(function(rt){B=rt}),cancel:B}}}const hb=Vd;function gb(P){return function(W){return P.apply(null,W)}}function mb(P){return ee.isObject(P)&&P.isAxiosError===!0}const kd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kd).forEach(([P,B])=>{kd[B]=P});const vb=kd;function _g(P){const B=new Bp(P),W=ng(Bp.prototype.request,B);return ee.extend(W,Bp.prototype,B,{allOwnKeys:!0}),ee.extend(W,B,null,{allOwnKeys:!0}),W.create=function(rt){return _g(pc(P,rt))},W}const Mr=_g(Fd);Mr.Axios=Bp;Mr.CanceledError=hu;Mr.CancelToken=hb;Mr.isCancel=yg;Mr.VERSION=wg;Mr.toFormData=Wp;Mr.AxiosError=_n;Mr.Cancel=Mr.CanceledError;Mr.all=function(B){return Promise.all(B)};Mr.spread=gb;Mr.isAxiosError=mb;Mr.mergeConfig=pc;Mr.AxiosHeaders=Us;Mr.formToJSON=P=>vg(ee.isHTMLForm(P)?new FormData(P):P);Mr.HttpStatusCode=vb;Mr.default=Mr;const yb=Mr,bb="myKey",Hd=yb.create({baseURL:"/onix-api/",headers:{Authorization:"Bearer "+bb,Accept:"application/json","Content-Type":"application/json"}});var Pd={},wb={get exports(){return Pd},set exports(P){Pd=P}};/*!
* sweetalert2 v11.7.3
* Released under the MIT License.
*/(function(P,B){(function(W,Q){P.exports=Q()})(ri,function(){var W={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Q="swal2-",rt=v=>{const b={};for(const L in v)b[v[L]]=Q+v[L];return b},U=rt(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),y=rt(["success","warning","info","question","error"]),tt="SweetAlert2:",N=v=>{const b=[];for(let L=0;L<v.length;L++)b.indexOf(v[L])===-1&&b.push(v[L]);return b},K=v=>v.charAt(0).toUpperCase()+v.slice(1),gt=v=>{console.warn(`${tt} ${typeof v=="object"?v.join(" "):v}`)},X=v=>{console.error(`${tt} ${v}`)},nt=[],G=v=>{nt.includes(v)||(nt.push(v),gt(v))},S=(v,b)=>{G(`"${v}" is deprecated and will be removed in the next major release. Please use "${b}" instead.`)},T=v=>typeof v=="function"?v():v,D=v=>v&&typeof v.toPromise=="function",F=v=>D(v)?v.toPromise():Promise.resolve(v),R=v=>v&&Promise.resolve(v)===v,dt=()=>document.body.querySelector(`.${U.container}`),bt=v=>{const b=dt();return b?b.querySelector(v):null},It=v=>bt(`.${v}`),Dt=()=>It(U.popup),$t=()=>It(U.icon),de=()=>It(U["icon-content"]),Ct=()=>It(U.title),_t=()=>It(U["html-container"]),Wt=()=>It(U.image),Jt=()=>It(U["progress-steps"]),Rt=()=>It(U["validation-message"]),Y=()=>bt(`.${U.actions} .${U.confirm}`),k=()=>bt(`.${U.actions} .${U.cancel}`),H=()=>bt(`.${U.actions} .${U.deny}`),et=()=>It(U["input-label"]),at=()=>bt(`.${U.loader}`),Pt=()=>It(U.actions),ct=()=>It(U.footer),Tt=()=>It(U["timer-progress-bar"]),q=()=>It(U.close),Ut=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Ht=()=>{const v=Array.from(Dt().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((L,ht)=>{const qt=parseInt(L.getAttribute("tabindex")),qe=parseInt(ht.getAttribute("tabindex"));return qt>qe?1:qt<qe?-1:0}),b=Array.from(Dt().querySelectorAll(Ut)).filter(L=>L.getAttribute("tabindex")!=="-1");return N(v.concat(b)).filter(L=>Ge(L))},ae=()=>Ce(document.body,U.shown)&&!Ce(document.body,U["toast-shown"])&&!Ce(document.body,U["no-backdrop"]),Fe=()=>Dt()&&Ce(Dt(),U.toast),Ie=()=>Dt().hasAttribute("data-loading"),Ee={previousBodyPadding:null},Ne=(v,b)=>{if(v.textContent="",b){const ht=new DOMParser().parseFromString(b,"text/html");Array.from(ht.querySelector("head").childNodes).forEach(qt=>{v.appendChild(qt)}),Array.from(ht.querySelector("body").childNodes).forEach(qt=>{qt instanceof HTMLVideoElement||qt instanceof HTMLAudioElement?v.appendChild(qt.cloneNode(!0)):v.appendChild(qt)})}},Ce=(v,b)=>{if(!b)return!1;const L=b.split(/\s+/);for(let ht=0;ht<L.length;ht++)if(!v.classList.contains(L[ht]))return!1;return!0},Ve=(v,b)=>{Array.from(v.classList).forEach(L=>{!Object.values(U).includes(L)&&!Object.values(y).includes(L)&&!Object.values(b.showClass).includes(L)&&v.classList.remove(L)})},ve=(v,b,L)=>{if(Ve(v,b),b.customClass&&b.customClass[L]){if(typeof b.customClass[L]!="string"&&!b.customClass[L].forEach){gt(`Invalid type of customClass.${L}! Expected string or iterable object, got "${typeof b.customClass[L]}"`);return}ft(v,b.customClass[L])}},ye=(v,b)=>{if(!b)return null;switch(b){case"select":case"textarea":case"file":return v.querySelector(`.${U.popup} > .${U[b]}`);case"checkbox":return v.querySelector(`.${U.popup} > .${U.checkbox} input`);case"radio":return v.querySelector(`.${U.popup} > .${U.radio} input:checked`)||v.querySelector(`.${U.popup} > .${U.radio} input:first-child`);case"range":return v.querySelector(`.${U.popup} > .${U.range} input`);default:return v.querySelector(`.${U.popup} > .${U.input}`)}},we=v=>{if(v.focus(),v.type!=="file"){const b=v.value;v.value="",v.value=b}},xe=(v,b,L)=>{!v||!b||(typeof b=="string"&&(b=b.split(/\s+/).filter(Boolean)),b.forEach(ht=>{Array.isArray(v)?v.forEach(qt=>{L?qt.classList.add(ht):qt.classList.remove(ht)}):L?v.classList.add(ht):v.classList.remove(ht)}))},ft=(v,b)=>{xe(v,b,!0)},ie=(v,b)=>{xe(v,b,!1)},re=(v,b)=>{const L=Array.from(v.children);for(let ht=0;ht<L.length;ht++){const qt=L[ht];if(qt instanceof HTMLElement&&Ce(qt,b))return qt}},he=(v,b,L)=>{L===`${parseInt(L)}`&&(L=parseInt(L)),L||parseInt(L)===0?v.style[b]=typeof L=="number"?`${L}px`:L:v.style.removeProperty(b)},fe=function(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";v.style.display=b},oe=v=>{v.style.display="none"},He=(v,b,L,ht)=>{const qt=v.querySelector(b);qt&&(qt.style[L]=ht)},nn=function(v,b){let L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";b?fe(v,L):oe(v)},Ge=v=>!!(v&&(v.offsetWidth||v.offsetHeight||v.getClientRects().length)),bn=()=>!Ge(Y())&&!Ge(H())&&!Ge(k()),Nn=v=>v.scrollHeight>v.clientHeight,At=v=>{const b=window.getComputedStyle(v),L=parseFloat(b.getPropertyValue("animation-duration")||"0"),ht=parseFloat(b.getPropertyValue("transition-duration")||"0");return L>0||ht>0},Yt=function(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const L=Tt();Ge(L)&&(b&&(L.style.transition="none",L.style.width="100%"),setTimeout(()=>{L.style.transition=`width ${v/1e3}s linear`,L.style.width="0%"},10))},_=()=>{const v=Tt(),b=parseInt(window.getComputedStyle(v).width);v.style.removeProperty("transition"),v.style.width="100%";const L=parseInt(window.getComputedStyle(v).width),ht=b/L*100;v.style.width=`${ht}%`},I=100,z={},wt=()=>{z.previousActiveElement instanceof HTMLElement?(z.previousActiveElement.focus(),z.previousActiveElement=null):document.body&&document.body.focus()},Nt=v=>new Promise(b=>{if(!v)return b();const L=window.scrollX,ht=window.scrollY;z.restoreFocusTimeout=setTimeout(()=>{wt(),b()},I),window.scrollTo(L,ht)}),Mt=()=>typeof window>"u"||typeof document>"u",ce=`
 <div aria-labelledby="${U.title}" aria-describedby="${U["html-container"]}" class="${U.popup}" tabindex="-1">
   <button type="button" class="${U.close}"></button>
   <ul class="${U["progress-steps"]}"></ul>
   <div class="${U.icon}"></div>
   <img class="${U.image}" />
   <h2 class="${U.title}" id="${U.title}"></h2>
   <div class="${U["html-container"]}" id="${U["html-container"]}"></div>
   <input class="${U.input}" />
   <input type="file" class="${U.file}" />
   <div class="${U.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${U.select}"></select>
   <div class="${U.radio}"></div>
   <label for="${U.checkbox}" class="${U.checkbox}">
     <input type="checkbox" />
     <span class="${U.label}"></span>
   </label>
   <textarea class="${U.textarea}"></textarea>
   <div class="${U["validation-message"]}" id="${U["validation-message"]}"></div>
   <div class="${U.actions}">
     <div class="${U.loader}"></div>
     <button type="button" class="${U.confirm}"></button>
     <button type="button" class="${U.deny}"></button>
     <button type="button" class="${U.cancel}"></button>
   </div>
   <div class="${U.footer}"></div>
   <div class="${U["timer-progress-bar-container"]}">
     <div class="${U["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),ke=()=>{const v=dt();return v?(v.remove(),ie([document.documentElement,document.body],[U["no-backdrop"],U["toast-shown"],U["has-column"]]),!0):!1},ze=()=>{z.currentInstance.resetValidationMessage()},Ye=()=>{const v=Dt(),b=re(v,U.input),L=re(v,U.file),ht=v.querySelector(`.${U.range} input`),qt=v.querySelector(`.${U.range} output`),qe=re(v,U.select),hn=v.querySelector(`.${U.checkbox} input`),Br=re(v,U.textarea);b.oninput=ze,L.onchange=ze,qe.onchange=ze,hn.onchange=ze,Br.oninput=ze,ht.oninput=()=>{ze(),qt.value=ht.value},ht.onchange=()=>{ze(),qt.value=ht.value}},pn=v=>typeof v=="string"?document.querySelector(v):v,ue=v=>{const b=Dt();b.setAttribute("role",v.toast?"alert":"dialog"),b.setAttribute("aria-live",v.toast?"polite":"assertive"),v.toast||b.setAttribute("aria-modal","true")},J=v=>{window.getComputedStyle(v).direction==="rtl"&&ft(dt(),U.rtl)},vt=v=>{const b=ke();if(Mt()){X("SweetAlert2 requires document to initialize");return}const L=document.createElement("div");L.className=U.container,b&&ft(L,U["no-transition"]),Ne(L,ce);const ht=pn(v.target);ht.appendChild(L),ue(v),J(ht),Ye()},St=(v,b)=>{v instanceof HTMLElement?b.appendChild(v):typeof v=="object"?Lt(v,b):v&&Ne(b,v)},Lt=(v,b)=>{v.jquery?pe(b,v):Ne(b,v.toString())},pe=(v,b)=>{if(v.textContent="",0 in b)for(let L=0;L in b;L++)v.appendChild(b[L].cloneNode(!0));else v.appendChild(b.cloneNode(!0))},Se=(()=>{if(Mt())return!1;const v=document.createElement("div"),b={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const L in b)if(Object.prototype.hasOwnProperty.call(b,L)&&typeof v.style[L]<"u")return b[L];return!1})(),Qe=()=>{const v=document.createElement("div");v.className=U["scrollbar-measure"],document.body.appendChild(v);const b=v.getBoundingClientRect().width-v.clientWidth;return document.body.removeChild(v),b},sn=(v,b)=>{const L=Pt(),ht=at();!b.showConfirmButton&&!b.showDenyButton&&!b.showCancelButton?oe(L):fe(L),ve(L,b,"actions"),Un(L,ht,b),Ne(ht,b.loaderHtml),ve(ht,b,"loader")};function Un(v,b,L){const ht=Y(),qt=H(),qe=k();Ze(ht,"confirm",L),Ze(qt,"deny",L),Ze(qe,"cancel",L),Sn(ht,qt,qe,L),L.reverseButtons&&(L.toast?(v.insertBefore(qe,ht),v.insertBefore(qt,ht)):(v.insertBefore(qe,b),v.insertBefore(qt,b),v.insertBefore(ht,b)))}function Sn(v,b,L,ht){if(!ht.buttonsStyling){ie([v,b,L],U.styled);return}ft([v,b,L],U.styled),ht.confirmButtonColor&&(v.style.backgroundColor=ht.confirmButtonColor,ft(v,U["default-outline"])),ht.denyButtonColor&&(b.style.backgroundColor=ht.denyButtonColor,ft(b,U["default-outline"])),ht.cancelButtonColor&&(L.style.backgroundColor=ht.cancelButtonColor,ft(L,U["default-outline"]))}function Ze(v,b,L){nn(v,L[`show${K(b)}Button`],"inline-block"),Ne(v,L[`${b}ButtonText`]),v.setAttribute("aria-label",L[`${b}ButtonAriaLabel`]),v.className=U[b],ve(v,L,`${b}Button`),ft(v,L[`${b}ButtonClass`])}const $r=(v,b)=>{const L=q();Ne(L,b.closeButtonHtml),ve(L,b,"closeButton"),nn(L,b.showCloseButton),L.setAttribute("aria-label",b.closeButtonAriaLabel)},lr=(v,b)=>{const L=dt();L&&(Wr(L,b.backdrop),On(L,b.position),Ln(L,b.grow),ve(L,b,"container"))};function Wr(v,b){typeof b=="string"?v.style.background=b:b||ft([document.documentElement,document.body],U["no-backdrop"])}function On(v,b){b in U?ft(v,U[b]):(gt('The "position" parameter is not valid, defaulting to "center"'),ft(v,U.center))}function Ln(v,b){if(b&&typeof b=="string"){const L=`grow-${b}`;L in U&&ft(v,U[L])}}const rr=["input","file","range","select","radio","checkbox","textarea"],qr=(v,b)=>{const L=Dt(),ht=W.innerParams.get(v),qt=!ht||b.input!==ht.input;rr.forEach(qe=>{const hn=re(L,U[qe]);oi(qe,b.inputAttributes),hn.className=U[qe],qt&&oe(hn)}),b.input&&(qt&&$n(b),Bo(b))},$n=v=>{if(!Wn[v.input]){X(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${v.input}"`);return}const b=hr(v.input),L=Wn[v.input](b,v);fe(b),v.inputAutoFocus&&setTimeout(()=>{we(L)})},Ho=v=>{for(let b=0;b<v.attributes.length;b++){const L=v.attributes[b].name;["type","value","style"].includes(L)||v.removeAttribute(L)}},oi=(v,b)=>{const L=ye(Dt(),v);if(L){Ho(L);for(const ht in b)L.setAttribute(ht,b[ht])}},Bo=v=>{const b=hr(v.input);typeof v.customClass=="object"&&ft(b,v.customClass.input)},ko=(v,b)=>{(!v.placeholder||b.inputPlaceholder)&&(v.placeholder=b.inputPlaceholder)},Sr=(v,b,L)=>{if(L.inputLabel){v.id=U.input;const ht=document.createElement("label"),qt=U["input-label"];ht.setAttribute("for",v.id),ht.className=qt,typeof L.customClass=="object"&&ft(ht,L.customClass.inputLabel),ht.innerText=L.inputLabel,b.insertAdjacentElement("beforebegin",ht)}},hr=v=>re(Dt(),U[v]||U.input),dn=(v,b)=>{["string","number"].includes(typeof b)?v.value=`${b}`:R(b)||gt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof b}"`)},Wn={};Wn.text=Wn.email=Wn.password=Wn.number=Wn.tel=Wn.url=(v,b)=>(dn(v,b.inputValue),Sr(v,v,b),ko(v,b),v.type=b.input,v),Wn.file=(v,b)=>(Sr(v,v,b),ko(v,b),v),Wn.range=(v,b)=>{const L=v.querySelector("input"),ht=v.querySelector("output");return dn(L,b.inputValue),L.type=b.input,dn(ht,b.inputValue),Sr(L,v,b),v},Wn.select=(v,b)=>{if(v.textContent="",b.inputPlaceholder){const L=document.createElement("option");Ne(L,b.inputPlaceholder),L.value="",L.disabled=!0,L.selected=!0,v.appendChild(L)}return Sr(v,v,b),v},Wn.radio=v=>(v.textContent="",v),Wn.checkbox=(v,b)=>{const L=ye(Dt(),"checkbox");L.value="1",L.id=U.checkbox,L.checked=Boolean(b.inputValue);const ht=v.querySelector("span");return Ne(ht,b.inputPlaceholder),L},Wn.textarea=(v,b)=>{dn(v,b.inputValue),ko(v,b),Sr(v,v,b);const L=ht=>parseInt(window.getComputedStyle(ht).marginLeft)+parseInt(window.getComputedStyle(ht).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const ht=parseInt(window.getComputedStyle(Dt()).width),qt=()=>{const qe=v.offsetWidth+L(v);qe>ht?Dt().style.width=`${qe}px`:Dt().style.width=null};new MutationObserver(qt).observe(v,{attributes:!0,attributeFilter:["style"]})}}),v};const Gr=(v,b)=>{const L=_t();ve(L,b,"htmlContainer"),b.html?(St(b.html,L),fe(L,"block")):b.text?(L.textContent=b.text,fe(L,"block")):oe(L),qr(v,b)},zo=(v,b)=>{const L=ct();nn(L,b.footer),b.footer&&St(b.footer,L),ve(L,b,"footer")},so=(v,b)=>{const L=W.innerParams.get(v),ht=$t();if(L&&b.icon===L.icon){po(ht,b),Zn(ht,b);return}if(!b.icon&&!b.iconHtml){oe(ht);return}if(b.icon&&Object.keys(y).indexOf(b.icon)===-1){X(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${b.icon}"`),oe(ht);return}fe(ht),po(ht,b),Zn(ht,b),ft(ht,b.showClass.icon)},Zn=(v,b)=>{for(const L in y)b.icon!==L&&ie(v,y[L]);ft(v,y[b.icon]),ln(v,b),qn(),ve(v,b,"icon")},qn=()=>{const v=Dt(),b=window.getComputedStyle(v).getPropertyValue("background-color"),L=v.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ht=0;ht<L.length;ht++)L[ht].style.backgroundColor=b},or=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,ii=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,po=(v,b)=>{let L=v.innerHTML,ht;b.iconHtml?ht=je(b.iconHtml):b.icon==="success"?(ht=or,L=L.replace(/ style=".*?"/g,"")):b.icon==="error"?ht=ii:ht=je({question:"?",warning:"!",info:"i"}[b.icon]),L.trim()!==ht.trim()&&Ne(v,ht)},ln=(v,b)=>{if(b.iconColor){v.style.color=b.iconColor,v.style.borderColor=b.iconColor;for(const L of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])He(v,L,"backgroundColor",b.iconColor);He(v,".swal2-success-ring","borderColor",b.iconColor)}},je=v=>`<div class="${U["icon-content"]}">${v}</div>`,gr=(v,b)=>{const L=Wt();if(!b.imageUrl){oe(L);return}fe(L,""),L.setAttribute("src",b.imageUrl),L.setAttribute("alt",b.imageAlt),he(L,"width",b.imageWidth),he(L,"height",b.imageHeight),L.className=U.image,ve(L,b,"image")},si=(v,b)=>{const L=dt(),ht=Dt();b.toast?(he(L,"width",b.width),ht.style.width="100%",ht.insertBefore(at(),$t())):he(ht,"width",b.width),he(ht,"padding",b.padding),b.color&&(ht.style.color=b.color),b.background&&(ht.style.background=b.background),oe(Rt()),mr(ht,b)},mr=(v,b)=>{v.className=`${U.popup} ${Ge(v)?b.showClass.popup:""}`,b.toast?(ft([document.documentElement,document.body],U["toast-shown"]),ft(v,U.toast)):ft(v,U.modal),ve(v,b,"popup"),typeof b.customClass=="string"&&ft(v,b.customClass),b.icon&&ft(v,U[`icon-${b.icon}`])},cn=(v,b)=>{const L=Jt();if(!b.progressSteps||b.progressSteps.length===0){oe(L);return}fe(L),L.textContent="",b.currentProgressStep>=b.progressSteps.length&&gt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),b.progressSteps.forEach((ht,qt)=>{const qe=Gn(ht);if(L.appendChild(qe),qt===b.currentProgressStep&&ft(qe,U["active-progress-step"]),qt!==b.progressSteps.length-1){const hn=Po(b);L.appendChild(hn)}})},Gn=v=>{const b=document.createElement("li");return ft(b,U["progress-step"]),Ne(b,v),b},Po=v=>{const b=document.createElement("li");return ft(b,U["progress-step-line"]),v.progressStepsDistance&&he(b,"width",v.progressStepsDistance),b},ai=(v,b)=>{const L=Ct();nn(L,b.title||b.titleText,"block"),b.title&&St(b.title,L),b.titleText&&(L.innerText=b.titleText),ve(L,b,"title")},ne=(v,b)=>{si(v,b),lr(v,b),cn(v,b),so(v,b),gr(v,b),ai(v,b),$r(v,b),Gr(v,b),sn(v,b),zo(v,b),typeof b.didRender=="function"&&b.didRender(Dt())};function M(){const v=W.innerParams.get(this);if(!v)return;const b=W.domCache.get(this);oe(b.loader),Fe()?v.icon&&fe($t()):st(b),ie([b.popup,b.actions],U.loading),b.popup.removeAttribute("aria-busy"),b.popup.removeAttribute("data-loading"),b.confirmButton.disabled=!1,b.denyButton.disabled=!1,b.cancelButton.disabled=!1}const st=v=>{const b=v.popup.getElementsByClassName(v.loader.getAttribute("data-button-to-replace"));b.length?fe(b[0],"inline-block"):bn()&&oe(v.actions)};function Gt(v){const b=W.innerParams.get(v||this),L=W.domCache.get(v||this);return L?ye(L.popup,b.input):null}const me=()=>Ge(Dt()),Oe=()=>Y()&&Y().click(),an=()=>H()&&H().click(),_e=()=>k()&&k().click(),An=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),In=v=>{v.keydownTarget&&v.keydownHandlerAdded&&(v.keydownTarget.removeEventListener("keydown",v.keydownHandler,{capture:v.keydownListenerCapture}),v.keydownHandlerAdded=!1)},Ni=(v,b,L,ht)=>{In(b),L.toast||(b.keydownHandler=qt=>Ao(v,qt,ht),b.keydownTarget=L.keydownListenerCapture?window:Dt(),b.keydownListenerCapture=L.keydownListenerCapture,b.keydownTarget.addEventListener("keydown",b.keydownHandler,{capture:b.keydownListenerCapture}),b.keydownHandlerAdded=!0)},wr=(v,b)=>{const L=Ht();if(L.length){v=v+b,v===L.length?v=0:v===-1&&(v=L.length-1),L[v].focus();return}Dt().focus()},Ii=["ArrowRight","ArrowDown"],Lr=["ArrowLeft","ArrowUp"],Ao=(v,b,L)=>{const ht=W.innerParams.get(v);ht&&(b.isComposing||b.keyCode===229||(ht.stopKeydownPropagation&&b.stopPropagation(),b.key==="Enter"?fo(v,b,ht):b.key==="Tab"?jo(b):[...Ii,...Lr].includes(b.key)?cr(b.key):b.key==="Escape"&&Mo(b,ht,L)))},fo=(v,b,L)=>{if(T(L.allowEnterKey)&&b.target&&v.getInput()&&b.target instanceof HTMLElement&&b.target.outerHTML===v.getInput().outerHTML){if(["textarea","file"].includes(L.input))return;Oe(),b.preventDefault()}},jo=v=>{const b=v.target,L=Ht();let ht=-1;for(let qt=0;qt<L.length;qt++)if(b===L[qt]){ht=qt;break}v.shiftKey?wr(ht,-1):wr(ht,1),v.stopPropagation(),v.preventDefault()},cr=v=>{const b=Y(),L=H(),ht=k(),qt=[b,L,ht];if(document.activeElement instanceof HTMLElement&&!qt.includes(document.activeElement))return;const qe=Ii.includes(v)?"nextElementSibling":"previousElementSibling";let hn=document.activeElement;for(let Br=0;Br<Pt().children.length;Br++){if(hn=hn[qe],!hn)return;if(hn instanceof HTMLButtonElement&&Ge(hn))break}hn instanceof HTMLButtonElement&&hn.focus()},Mo=(v,b,L)=>{T(b.allowEscapeKey)&&(v.preventDefault(),L(An.esc))};var ao={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const ys=()=>{Array.from(document.body.children).forEach(b=>{b===dt()||b.contains(dt())||(b.hasAttribute("aria-hidden")&&b.setAttribute("data-previous-aria-hidden",b.getAttribute("aria-hidden")),b.setAttribute("aria-hidden","true"))})},Lo=()=>{Array.from(document.body.children).forEach(b=>{b.hasAttribute("data-previous-aria-hidden")?(b.setAttribute("aria-hidden",b.getAttribute("data-previous-aria-hidden")),b.removeAttribute("data-previous-aria-hidden")):b.removeAttribute("aria-hidden")})},Fi=()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!Ce(document.body,U.iosfix)){const b=document.body.scrollTop;document.body.style.top=`${b*-1}px`,ft(document.body,U.iosfix),ur(),bs()}},bs=()=>{const v=navigator.userAgent,b=!!v.match(/iPad/i)||!!v.match(/iPhone/i),L=!!v.match(/WebKit/i);b&&L&&!v.match(/CriOS/i)&&Dt().scrollHeight>window.innerHeight-44&&(dt().style.paddingBottom=`${44}px`)},ur=()=>{const v=dt();let b;v.ontouchstart=L=>{b=lo(L)},v.ontouchmove=L=>{b&&(L.preventDefault(),L.stopPropagation())}},lo=v=>{const b=v.target,L=dt();return mi(v)||ws(v)?!1:b===L||!Nn(L)&&b instanceof HTMLElement&&b.tagName!=="INPUT"&&b.tagName!=="TEXTAREA"&&!(Nn(_t())&&_t().contains(b))},mi=v=>v.touches&&v.touches.length&&v.touches[0].touchType==="stylus",ws=v=>v.touches&&v.touches.length>1,Dr=()=>{if(Ce(document.body,U.iosfix)){const v=parseInt(document.body.style.top,10);ie(document.body,U.iosfix),document.body.style.top="",document.body.scrollTop=v*-1}},Uo=()=>{Ee.previousBodyPadding===null&&document.body.scrollHeight>window.innerHeight&&(Ee.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Ee.previousBodyPadding+Qe()}px`)},vi=()=>{Ee.previousBodyPadding!==null&&(document.body.style.paddingRight=`${Ee.previousBodyPadding}px`,Ee.previousBodyPadding=null)};function Ri(v,b,L,ht){Fe()?kn(v,ht):(Nt(L).then(()=>kn(v,ht)),In(z)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(b.setAttribute("style","display:none !important"),b.removeAttribute("class"),b.innerHTML=""):b.remove(),ae()&&(vi(),Dr(),Lo()),Ws()}function Ws(){ie([document.documentElement,document.body],[U.shown,U["height-auto"],U["no-backdrop"],U["toast-shown"]])}function Do(v){v=Hi(v);const b=ao.swalPromiseResolve.get(this),L=Vi(this);this.isAwaitingPromise()?v.isDismissed||(Vn(this),b(v)):L&&b(v)}function li(){return!!W.awaitingPromise.get(this)}const Vi=v=>{const b=Dt();if(!b)return!1;const L=W.innerParams.get(v);if(!L||Ce(b,L.hideClass.popup))return!1;ie(b,L.showClass.popup),ft(b,L.hideClass.popup);const ht=dt();return ie(ht,L.showClass.backdrop),ft(ht,L.hideClass.backdrop),Or(v,b,L),!0};function rn(v){const b=ao.swalPromiseReject.get(this);Vn(this),b&&b(v)}const Vn=v=>{v.isAwaitingPromise()&&(W.awaitingPromise.delete(v),W.innerParams.get(v)||v._destroy())},Hi=v=>typeof v>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},v),Or=(v,b,L)=>{const ht=dt(),qt=Se&&At(b);typeof L.willClose=="function"&&L.willClose(b),qt?ir(v,b,ht,L.returnFocus,L.didClose):Ri(v,ht,L.returnFocus,L.didClose)},ir=(v,b,L,ht,qt)=>{z.swalCloseEventFinishedCallback=Ri.bind(null,v,L,ht,qt),b.addEventListener(Se,function(qe){qe.target===b&&(z.swalCloseEventFinishedCallback(),delete z.swalCloseEventFinishedCallback)})},kn=(v,b)=>{setTimeout(()=>{typeof b=="function"&&b.bind(v.params)(),v._destroy()})};function Tr(v,b,L){const ht=W.domCache.get(v);b.forEach(qt=>{ht[qt].disabled=L})}function $o(v,b){if(v)if(v.type==="radio"){const ht=v.parentNode.parentNode.querySelectorAll("input");for(let qt=0;qt<ht.length;qt++)ht[qt].disabled=b}else v.disabled=b}function Kr(){Tr(this,["confirmButton","denyButton","cancelButton"],!1)}function Bi(){Tr(this,["confirmButton","denyButton","cancelButton"],!0)}function jn(){$o(this.getInput(),!1)}function Nr(){$o(this.getInput(),!0)}function zi(v){const b=W.domCache.get(this),L=W.innerParams.get(this);Ne(b.validationMessage,v),b.validationMessage.className=U["validation-message"],L.customClass&&L.customClass.validationMessage&&ft(b.validationMessage,L.customClass.validationMessage),fe(b.validationMessage);const ht=this.getInput();ht&&(ht.setAttribute("aria-invalid",!0),ht.setAttribute("aria-describedby",U["validation-message"]),we(ht),ft(ht,U.inputerror))}function yi(){const v=W.domCache.get(this);v.validationMessage&&oe(v.validationMessage);const b=this.getInput();b&&(b.removeAttribute("aria-invalid"),b.removeAttribute("aria-describedby"),ie(b,U.inputerror))}const Kn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Yr=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Jr={},Hn=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ir=v=>Object.prototype.hasOwnProperty.call(Kn,v),ci=v=>Yr.indexOf(v)!==-1,bi=v=>Jr[v],Zr=v=>{Ir(v)||gt(`Unknown parameter "${v}"`)},_s=v=>{Hn.includes(v)&&gt(`The parameter "${v}" is incompatible with toasts`)},qs=v=>{bi(v)&&S(v,bi(v))},Gs=v=>{v.backdrop===!1&&v.allowOutsideClick&&gt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const b in v)Zr(b),v.toast&&_s(b),qs(b)};function Ui(v){const b=Dt(),L=W.innerParams.get(this);if(!b||Ce(b,L.hideClass.popup)){gt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const ht=ui(v),qt=Object.assign({},L,ht);ne(this,qt),W.innerParams.set(this,qt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,v),writable:!1,enumerable:!0}})}const ui=v=>{const b={};return Object.keys(v).forEach(L=>{ci(L)?b[L]=v[L]:gt(`Invalid parameter to update: ${L}`)}),b};function $i(){const v=W.domCache.get(this),b=W.innerParams.get(this);if(!b){Cs(this);return}v.popup&&z.swalCloseEventFinishedCallback&&(z.swalCloseEventFinishedCallback(),delete z.swalCloseEventFinishedCallback),typeof b.didDestroy=="function"&&b.didDestroy(),Ks(this)}const Ks=v=>{Cs(v),delete v.params,delete z.keydownHandler,delete z.keydownTarget,delete z.currentInstance},Cs=v=>{v.isAwaitingPromise()?(Wi(W,v),W.awaitingPromise.set(v,!0)):(Wi(ao,v),Wi(W,v))},Wi=(v,b)=>{for(const L in v)v[L].delete(b)};var Ys=Object.freeze({__proto__:null,_destroy:$i,close:Do,closeModal:Do,closePopup:Do,closeToast:Do,disableButtons:Bi,disableInput:Nr,disableLoading:M,enableButtons:Kr,enableInput:jn,getInput:Gt,handleAwaitingPromise:Vn,hideLoading:M,isAwaitingPromise:li,rejectPromise:rn,resetValidationMessage:yi,showValidationMessage:zi,update:Ui});const Fr=v=>{let b=Dt();b||new na,b=Dt();const L=at();Fe()?oe($t()):qi(b,v),fe(L),b.setAttribute("data-loading","true"),b.setAttribute("aria-busy","true"),b.focus()},qi=(v,b)=>{const L=Pt(),ht=at();!b&&Ge(Y())&&(b=Y()),fe(L),b&&(oe(b),ht.setAttribute("data-button-to-replace",b.className)),ht.parentNode.insertBefore(ht,b),ft([v,L],U.loading)},Gi=(v,b)=>{b.input==="select"||b.input==="radio"?Yi(v,b):["text","email","number","tel","textarea"].includes(b.input)&&(D(b.inputValue)||R(b.inputValue))&&(Fr(Y()),Wo(v,b))},ho=(v,b)=>{const L=v.getInput();if(!L)return null;switch(b.input){case"checkbox":return Rr(L);case"radio":return wi(L);case"file":return Ki(L);default:return b.inputAutoTrim?L.value.trim():L.value}},Rr=v=>v.checked?1:0,wi=v=>v.checked?v.value:null,Ki=v=>v.files.length?v.getAttribute("multiple")!==null?v.files:v.files[0]:null,Yi=(v,b)=>{const L=Dt(),ht=qt=>{Mn[b.input](L,go(qt),b)};D(b.inputOptions)||R(b.inputOptions)?(Fr(Y()),F(b.inputOptions).then(qt=>{v.hideLoading(),ht(qt)})):typeof b.inputOptions=="object"?ht(b.inputOptions):X(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof b.inputOptions}`)},Wo=(v,b)=>{const L=v.getInput();oe(L),F(b.inputValue).then(ht=>{L.value=b.input==="number"?`${parseFloat(ht)||0}`:`${ht}`,fe(L),L.focus(),v.hideLoading()}).catch(ht=>{X(`Error in inputValue promise: ${ht}`),L.value="",fe(L),L.focus(),v.hideLoading()})},Mn={select:(v,b,L)=>{const ht=re(v,U.select),qt=(qe,hn,Br)=>{const vr=document.createElement("option");vr.value=Br,Ne(vr,hn),vr.selected=Ji(Br,L.inputValue),qe.appendChild(vr)};b.forEach(qe=>{const hn=qe[0],Br=qe[1];if(Array.isArray(Br)){const vr=document.createElement("optgroup");vr.label=hn,vr.disabled=!1,ht.appendChild(vr),Br.forEach(gi=>qt(vr,gi[1],gi[0]))}else qt(ht,Br,hn)}),ht.focus()},radio:(v,b,L)=>{const ht=re(v,U.radio);b.forEach(qe=>{const hn=qe[0],Br=qe[1],vr=document.createElement("input"),gi=document.createElement("label");vr.type="radio",vr.name=U.radio,vr.value=hn,Ji(hn,L.inputValue)&&(vr.checked=!0);const Yo=document.createElement("span");Ne(Yo,Br),Yo.className=U.label,gi.appendChild(vr),gi.appendChild(Yo),ht.appendChild(gi)});const qt=ht.querySelectorAll("input");qt.length&&qt[0].focus()}},go=v=>{const b=[];return typeof Map<"u"&&v instanceof Map?v.forEach((L,ht)=>{let qt=L;typeof qt=="object"&&(qt=go(qt)),b.push([ht,qt])}):Object.keys(v).forEach(L=>{let ht=v[L];typeof ht=="object"&&(ht=go(ht)),b.push([L,ht])}),b},Ji=(v,b)=>b&&b.toString()===v.toString(),pi=v=>{const b=W.innerParams.get(v);v.disableButtons(),b.input?Ss(v,"confirm"):Qi(v,!0)},_i=v=>{const b=W.innerParams.get(v);v.disableButtons(),b.returnInputValueOnDeny?Ss(v,"deny"):No(v,!1)},xs=(v,b)=>{v.disableButtons(),b(An.cancel)},Ss=(v,b)=>{const L=W.innerParams.get(v);if(!L.input){X(`The "input" parameter is needed to be set when using returnInputValueOn${K(b)}`);return}const ht=ho(v,L);L.inputValidator?Zi(v,ht,b):v.getInput().checkValidity()?b==="deny"?No(v,ht):Qi(v,ht):(v.enableButtons(),v.showValidationMessage(L.validationMessage))},Zi=(v,b,L)=>{const ht=W.innerParams.get(v);v.disableInput(),Promise.resolve().then(()=>F(ht.inputValidator(b,ht.validationMessage))).then(qe=>{v.enableButtons(),v.enableInput(),qe?v.showValidationMessage(qe):L==="deny"?No(v,b):Qi(v,b)})},No=(v,b)=>{const L=W.innerParams.get(v||void 0);L.showLoaderOnDeny&&Fr(H()),L.preDeny?(W.awaitingPromise.set(v||void 0,!0),Promise.resolve().then(()=>F(L.preDeny(b,L.validationMessage))).then(qt=>{qt===!1?(v.hideLoading(),Vn(v)):v.close({isDenied:!0,value:typeof qt>"u"?b:qt})}).catch(qt=>Xi(v||void 0,qt))):v.close({isDenied:!0,value:b})},fi=(v,b)=>{v.close({isConfirmed:!0,value:b})},Xi=(v,b)=>{v.rejectPromise(b)},Qi=(v,b)=>{const L=W.innerParams.get(v||void 0);L.showLoaderOnConfirm&&Fr(),L.preConfirm?(v.resetValidationMessage(),W.awaitingPromise.set(v||void 0,!0),Promise.resolve().then(()=>F(L.preConfirm(b,L.validationMessage))).then(qt=>{Ge(Rt())||qt===!1?(v.hideLoading(),Vn(v)):fi(v,typeof qt>"u"?b:qt)}).catch(qt=>Xi(v||void 0,qt))):fi(v,b)},ts=(v,b,L)=>{W.innerParams.get(v).toast?ja(v,b,L):(lt(b),mt(b),jt(v,b,L))},ja=(v,b,L)=>{b.popup.onclick=()=>{const ht=W.innerParams.get(v);ht&&(O(ht)||ht.timer||ht.input)||L(An.close)}},O=v=>v.showConfirmButton||v.showDenyButton||v.showCancelButton||v.showCloseButton;let V=!1;const lt=v=>{v.popup.onmousedown=()=>{v.container.onmouseup=function(b){v.container.onmouseup=void 0,b.target===v.container&&(V=!0)}}},mt=v=>{v.container.onmousedown=()=>{v.popup.onmouseup=function(b){v.popup.onmouseup=void 0,(b.target===v.popup||v.popup.contains(b.target))&&(V=!0)}}},jt=(v,b,L)=>{b.container.onclick=ht=>{const qt=W.innerParams.get(v);if(V){V=!1;return}ht.target===b.container&&T(qt.allowOutsideClick)&&L(An.backdrop)}},xt=v=>typeof v=="object"&&v.jquery,Kt=v=>v instanceof Element||xt(v),le=v=>{const b={};return typeof v[0]=="object"&&!Kt(v[0])?Object.assign(b,v[0]):["title","html","icon"].forEach((L,ht)=>{const qt=v[ht];typeof qt=="string"||Kt(qt)?b[L]=qt:qt!==void 0&&X(`Unexpected type of ${L}! Expected "string" or "Element", got ${typeof qt}`)}),b};function We(){const v=this;for(var b=arguments.length,L=new Array(b),ht=0;ht<b;ht++)L[ht]=arguments[ht];return new v(...L)}function tn(v){class b extends this{_main(ht,qt){return super._main(ht,Object.assign({},v,qt))}}return b}const Cn=()=>z.timeout&&z.timeout.getTimerLeft(),Vr=()=>{if(z.timeout)return _(),z.timeout.stop()},Ci=()=>{if(z.timeout){const v=z.timeout.start();return Yt(v),v}},qo=()=>{const v=z.timeout;return v&&(v.running?Vr():Ci())},Xr=v=>{if(z.timeout){const b=z.timeout.increase(v);return Yt(b,!0),b}},Go=()=>z.timeout&&z.timeout.isRunning();let Ma=!1;const xi={};function _l(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";xi[v]=this,Ma||(document.body.addEventListener("click",dc),Ma=!0)}const dc=v=>{for(let b=v.target;b&&b!==document;b=b.parentNode)for(const L in xi){const ht=b.getAttribute(L);if(ht){xi[L].fire({template:ht});return}}};var hc=Object.freeze({__proto__:null,argsToParams:le,bindClickHandler:_l,clickCancel:_e,clickConfirm:Oe,clickDeny:an,enableLoading:Fr,fire:We,getActions:Pt,getCancelButton:k,getCloseButton:q,getConfirmButton:Y,getContainer:dt,getDenyButton:H,getFocusableElements:Ht,getFooter:ct,getHtmlContainer:_t,getIcon:$t,getIconContent:de,getImage:Wt,getInputLabel:et,getLoader:at,getPopup:Dt,getProgressSteps:Jt,getTimerLeft:Cn,getTimerProgressBar:Tt,getTitle:Ct,getValidationMessage:Rt,increaseTimer:Xr,isDeprecatedParameter:bi,isLoading:Ie,isTimerRunning:Go,isUpdatableParameter:ci,isValidParameter:Ir,isVisible:me,mixin:tn,resumeTimer:Ci,showLoading:Fr,stopTimer:Vr,toggleTimer:qo});class Cl{constructor(b,L){this.callback=b,this.remaining=L,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(b){const L=this.running;return L&&this.stop(),this.remaining+=b,L&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Os=["swal-title","swal-html","swal-footer"],es=v=>{const b=typeof v.template=="string"?document.querySelector(v.template):v.template;if(!b)return{};const L=b.content;return Qs(L),Object.assign(La(L),xl(L),Js(L),Zs(L),Da(L),Xs(L),Hr(L,Os))},La=v=>{const b={};return Array.from(v.querySelectorAll("swal-param")).forEach(ht=>{Ko(ht,["name","value"]);const qt=ht.getAttribute("name"),qe=ht.getAttribute("value");typeof Kn[qt]=="boolean"?b[qt]=qe!=="false":typeof Kn[qt]=="object"?b[qt]=JSON.parse(qe):b[qt]=qe}),b},xl=v=>{const b={};return Array.from(v.querySelectorAll("swal-function-param")).forEach(ht=>{const qt=ht.getAttribute("name"),qe=ht.getAttribute("value");b[qt]=new Function(`return ${qe}`)()}),b},Js=v=>{const b={};return Array.from(v.querySelectorAll("swal-button")).forEach(ht=>{Ko(ht,["type","color","aria-label"]);const qt=ht.getAttribute("type");b[`${qt}ButtonText`]=ht.innerHTML,b[`show${K(qt)}Button`]=!0,ht.hasAttribute("color")&&(b[`${qt}ButtonColor`]=ht.getAttribute("color")),ht.hasAttribute("aria-label")&&(b[`${qt}ButtonAriaLabel`]=ht.getAttribute("aria-label"))}),b},Zs=v=>{const b={},L=v.querySelector("swal-image");return L&&(Ko(L,["src","width","height","alt"]),L.hasAttribute("src")&&(b.imageUrl=L.getAttribute("src")),L.hasAttribute("width")&&(b.imageWidth=L.getAttribute("width")),L.hasAttribute("height")&&(b.imageHeight=L.getAttribute("height")),L.hasAttribute("alt")&&(b.imageAlt=L.getAttribute("alt"))),b},Da=v=>{const b={},L=v.querySelector("swal-icon");return L&&(Ko(L,["type","color"]),L.hasAttribute("type")&&(b.icon=L.getAttribute("type")),L.hasAttribute("color")&&(b.iconColor=L.getAttribute("color")),b.iconHtml=L.innerHTML),b},Xs=v=>{const b={},L=v.querySelector("swal-input");L&&(Ko(L,["type","label","placeholder","value"]),b.input=L.getAttribute("type")||"text",L.hasAttribute("label")&&(b.inputLabel=L.getAttribute("label")),L.hasAttribute("placeholder")&&(b.inputPlaceholder=L.getAttribute("placeholder")),L.hasAttribute("value")&&(b.inputValue=L.getAttribute("value")));const ht=Array.from(v.querySelectorAll("swal-input-option"));return ht.length&&(b.inputOptions={},ht.forEach(qt=>{Ko(qt,["value"]);const qe=qt.getAttribute("value"),hn=qt.innerHTML;b.inputOptions[qe]=hn})),b},Hr=(v,b)=>{const L={};for(const ht in b){const qt=b[ht],qe=v.querySelector(qt);qe&&(Ko(qe,[]),L[qt.replace(/^swal-/,"")]=qe.innerHTML.trim())}return L},Qs=v=>{const b=Os.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(v.children).forEach(L=>{const ht=L.tagName.toLowerCase();b.includes(ht)||gt(`Unrecognized element <${ht}>`)})},Ko=(v,b)=>{Array.from(v.attributes).forEach(L=>{b.indexOf(L.name)===-1&&gt([`Unrecognized attribute "${L.name}" on <${v.tagName.toLowerCase()}>.`,`${b.length?`Allowed attributes are: ${b.join(", ")}`:"To set the value, use HTML within the element."}`])})},ta=10,Sl=v=>{const b=dt(),L=Dt();typeof v.willOpen=="function"&&v.willOpen(L);const qt=window.getComputedStyle(document.body).overflowY;rs(b,L,v),setTimeout(()=>{ns(b,L)},ta),ae()&&(Ia(b,v.scrollbarPadding,qt),ys()),!Fe()&&!z.previousActiveElement&&(z.previousActiveElement=document.activeElement),typeof v.didOpen=="function"&&setTimeout(()=>v.didOpen(L)),ie(b,U["no-transition"])},Na=v=>{const b=Dt();if(v.target!==b)return;const L=dt();b.removeEventListener(Se,Na),L.style.overflowY="auto"},ns=(v,b)=>{Se&&At(b)?(v.style.overflowY="hidden",b.addEventListener(Se,Na)):v.style.overflowY="auto"},Ia=(v,b,L)=>{Fi(),b&&L!=="hidden"&&Uo(),setTimeout(()=>{v.scrollTop=0})},rs=(v,b,L)=>{ft(v,L.showClass.backdrop),b.style.setProperty("opacity","0","important"),fe(b,"grid"),setTimeout(()=>{ft(b,L.showClass.popup),b.style.removeProperty("opacity")},ta),ft([document.documentElement,document.body],U.shown),L.heightAuto&&L.backdrop&&!L.toast&&ft([document.documentElement,document.body],U["height-auto"])};var Si={email:(v,b)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(v)?Promise.resolve():Promise.resolve(b||"Invalid email address"),url:(v,b)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(v)?Promise.resolve():Promise.resolve(b||"Invalid URL")};function mo(v){v.inputValidator||Object.keys(Si).forEach(b=>{v.input===b&&(v.inputValidator=Si[b])})}function di(v){(!v.target||typeof v.target=="string"&&!document.querySelector(v.target)||typeof v.target!="string"&&!v.target.appendChild)&&(gt('Target parameter is not valid, defaulting to "body"'),v.target="body")}function Fa(v){mo(v),v.showLoaderOnConfirm&&!v.preConfirm&&gt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),di(v),typeof v.title=="string"&&(v.title=v.title.split(`
`).join("<br />")),vt(v)}let co;class Oi{constructor(){if(typeof window>"u")return;co=this;for(var b=arguments.length,L=new Array(b),ht=0;ht<b;ht++)L[ht]=arguments[ht];const qt=Object.freeze(this.constructor.argsToParams(L));Object.defineProperties(this,{params:{value:qt,writable:!1,enumerable:!0,configurable:!0}});const qe=co._main(co.params);W.promise.set(this,qe)}_main(b){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gs(Object.assign({},L,b)),z.currentInstance&&(z.currentInstance._destroy(),ae()&&Lo()),z.currentInstance=co;const ht=Ti(b,L);Fa(ht),Object.freeze(ht),z.timeout&&(z.timeout.stop(),delete z.timeout),clearTimeout(z.restoreFocusTimeout);const qt=Ei(co);return ne(co,ht),W.innerParams.set(co,ht),Ra(co,qt,ht)}then(b){return W.promise.get(this).then(b)}finally(b){return W.promise.get(this).finally(b)}}const Ra=(v,b,L)=>new Promise((ht,qt)=>{const qe=hn=>{v.close({isDismissed:!0,dismiss:hn})};ao.swalPromiseResolve.set(v,ht),ao.swalPromiseReject.set(v,qt),b.confirmButton.onclick=()=>{pi(v)},b.denyButton.onclick=()=>{_i(v)},b.cancelButton.onclick=()=>{xs(v,qe)},b.closeButton.onclick=()=>{qe(An.close)},ts(v,b,qe),Ni(v,z,L,qe),Gi(v,L),Sl(L),pr(z,L,qe),vo(b,L),setTimeout(()=>{b.container.scrollTop=0})}),Ti=(v,b)=>{const L=es(v),ht=Object.assign({},Kn,b,L,v);return ht.showClass=Object.assign({},Kn.showClass,ht.showClass),ht.hideClass=Object.assign({},Kn.hideClass,ht.hideClass),ht},Ei=v=>{const b={popup:Dt(),container:dt(),actions:Pt(),confirmButton:Y(),denyButton:H(),cancelButton:k(),loader:at(),closeButton:q(),validationMessage:Rt(),progressSteps:Jt()};return W.domCache.set(v,b),b},pr=(v,b,L)=>{const ht=Tt();oe(ht),b.timer&&(v.timeout=new Cl(()=>{L("timer"),delete v.timeout},b.timer),b.timerProgressBar&&(fe(ht),ve(ht,b,"timerProgressBar"),setTimeout(()=>{v.timeout&&v.timeout.running&&Yt(b.timer)})))},vo=(v,b)=>{if(!b.toast){if(!T(b.allowEnterKey)){ea();return}hi(v,b)||wr(-1,1)}},hi=(v,b)=>b.focusDeny&&Ge(v.denyButton)?(v.denyButton.focus(),!0):b.focusCancel&&Ge(v.cancelButton)?(v.cancelButton.focus(),!0):b.focusConfirm&&Ge(v.confirmButton)?(v.confirmButton.focus(),!0):!1,ea=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const v=new Date,b=localStorage.getItem("swal-initiation");b?(v.getTime()-Date.parse(b))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const L=document.createElement("audio");L.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",L.loop=!0,document.body.appendChild(L),setTimeout(()=>{L.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${v}`)}Object.assign(Oi.prototype,Ys),Object.assign(Oi,hc),Object.keys(Ys).forEach(v=>{Oi[v]=function(){if(co)return co[v](...arguments)}}),Oi.DismissReason=An,Oi.version="11.7.3";const na=Oi;return na.default=na,na}),typeof ri<"u"&&ri.Sweetalert2&&(ri.swal=ri.sweetAlert=ri.Swal=ri.SweetAlert=ri.Sweetalert2)})(wb);const wl=Pd;const _b=async()=>{await Hd.get("/config").then(P=>{const B=P.data,W=B.primaryColor,Q=B.secondaryColor,rt=B.tertiaryColor,U=B.quaternaryColor,y="gjs-";let tt="";[["one",W],["two",Q],["three",rt],["four",U]].forEach(([K,gt])=>{tt+=`
            .${y}${K}-bg {
            background-color: ${gt};
            }

            .${y}${K}-color {
            color: ${gt};
            }

            .${y}${K}-color-h:hover {
            color: ${gt};
            }
        `});const N=document.createElement("style");N.innerText=tt,document.head.appendChild(N)})},Cb=async P=>{P.Panels.addPanel({id:"views"}).get("buttons").add([{attributes:{title:"Open Code"},className:"fa fa-file-code-o",command:"open-code",togglable:!1,id:"open-code"}])},Cg=async(P,B=!1)=>{let W=JSON.parse(localStorage.getItem("onix-data"));const Q=P.Storage,rt=P.getProjectData();let U=await Q.store(rt),y=null;switch(W.mode){case"page":y="/save/page";break;case"component":y="/save/component"}await Hd.post(y,{slug:W.slug,data:U,preview:P.getHtml()}).then(tt=>{B?wl.fire({icon:"success",title:"Success",text:tt.data.message,toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:N=>{N.addEventListener("mouseenter",wl.stopTimer),N.addEventListener("mouseleave",wl.resumeTimer)}}):wl.fire({icon:"success",title:"Success",text:tt.data.message})}).catch(tt=>{const N=tt.response.data.errors;let K=[];for(const[gt,X]of Object.entries(N))K.push("<p>"+X+"</p>");wl.fire({icon:"error",title:"Oops...",html:K.join("")})})},xb=async(P,B="page",W)=>{await Hd.get("/load/"+B+"/"+W).then(Q=>{if(Q.data.page.content){const rt=JSON.parse(Q.data.page.content);P.loadProjectData(rt)}localStorage.setItem("onix-data",JSON.stringify({slug:W,mode:B}))}).catch(Q=>{wl.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})},Sb=(P,B)=>{const{Commands:W}=P,Q=B.textCleanCanvas;W.add(zp,o0(P,B)),W.add(bd,{run:rt=>rt.setDevice("Desktop"),stop:()=>{}}),W.add(wd,{run:rt=>rt.setDevice("Tablet"),stop:()=>{}}),W.add(_d,{run:rt=>rt.setDevice("Mobile portrait"),stop:()=>{}}),W.add(Cd,rt=>confirm(Q)&&rt.runCommand("core:canvas-clear")),W.add(xd,rt=>{Cg(rt)}),W.add(Sd,rt=>{rt.runCommand("onix-grape-save")})},Ob=(P,B)=>{const W=(Q,rt)=>{B.blocks.indexOf(Q)>=0&&P.Blocks.add(Q,{select:!0,category:"Basic",...rt,...B.block(Q)})};W("link-block",{label:"Link Block",media:`<svg viewBox="0 0 24 24">
      <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"></path>
    </svg>`,content:{type:"link",editable:!1,droppable:!0,style:{display:"inline-block",padding:"5px","min-height":"50px","min-width":"50px"}}}),W("quote",{label:"Quote",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z" />
    </svg>`,content:`<blockquote class="quote">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore ipsum dolor sit
      </blockquote>`}),W("text-basic",{label:"Text section",media:`<svg viewBox="0 0 24 24">
        <path fill="currentColor" d="M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z" />
    </svg>`,content:`<div class="flex items-center justify-center h-screen bg-yellow-200">
    <div class="bg-white rounded-3xl border shadow-xl p-8 w-3/6">
      <div class="flex justify-between items-center mb-4">
        <button class="inline-flex items-center justify-center w-14 h-14 text-blue-100 bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-full">
          <svg fill="#FFFFFF" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 26 26" width="26px" height="26px"><path d="M 9 5 L 9 7 L 7 7 L 7 20 L 9 20 L 9 22 L 11 22 L 11 20 L 13 20 L 13 22 L 15 22 L 15 19.90625 C 15.265625 19.871094 15.554688 19.855469 15.8125 19.8125 C 16.414063 19.613281 16.90625 19.394531 17.40625 19.09375 C 17.804688 18.792969 18.199219 18.40625 18.5 17.90625 C 18.800781 17.40625 18.90625 16.886719 18.90625 16.1875 C 18.90625 15.386719 18.585938 14.695313 18.1875 14.09375 C 17.6875 13.492188 17.085938 13.105469 16.1875 12.90625 C 16.886719 12.605469 17.386719 12.210938 17.6875 11.8125 C 17.988281 11.414063 18.1875 10.886719 18.1875 10.1875 C 18.1875 9.585938 18.105469 9.085938 17.90625 8.6875 C 17.707031 8.289063 17.398438 7.886719 17 7.6875 C 16.601563 7.488281 16.195313 7.289063 15.59375 7.1875 C 15.398438 7.15625 15.199219 7.125 15 7.09375 L 15 5 L 13 5 L 13 7 L 11 7 L 11 5 Z M 10 9 L 12.90625 9 C 13.207031 9 13.488281 8.992188 13.6875 9.09375 C 13.988281 9.09375 14.207031 9.210938 14.40625 9.3125 C 14.605469 9.414063 14.804688 9.488281 14.90625 9.6875 C 15.007813 9.886719 15.09375 10.105469 15.09375 10.40625 C 15.09375 11.007813 14.992188 11.394531 14.59375 11.59375 C 14.195313 11.894531 13.789063 12 13.1875 12 L 10 12 Z M 10 14 L 13.5 14 C 14.199219 14 14.8125 14.199219 15.3125 14.5 C 15.8125 14.800781 16 15.394531 16 16.09375 C 16 16.394531 15.914063 16.800781 15.8125 17 C 15.613281 17.300781 15.386719 17.492188 15.1875 17.59375 C 14.988281 17.695313 14.707031 17.804688 14.40625 17.90625 C 14.105469 18.007813 13.707031 18 13.40625 18 L 10 18 Z" /></svg>
        </button>
        <div>
          <span class="font-bold text-green-500">+ $726 (15%)</span><br />
          <span class="font-medium text-xs text-gray-500 flex justify-end">0.382 coin</span>
        </div>
      </div>
      <div>
        <h3 class="font-semibold text-sm text-gray-400">BTC</h3>
        <h1 class="font-semibold text-xl text-gray-700">$ 1,936.00</h1>
      </div>
    </div>
  </div>`})},Tb=(P,B)=>{const{Panels:W}=P,Q=P.getConfig(),rt="sw-visibility",U="export-template",y="open-sm",tt="open-tm",N="open-layers",K="open-blocks",gt="fullscreen",X="preview",nt='style="display: block; max-width:22px"';Q.showDevices=!1,W.getPanels().reset([{id:"commands",buttons:[{}]},{id:"devices-c",buttons:[{id:bd,command:bd,active:!0,label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M21,16H3V4H21M21,2H3C1.89,2 1,2.89 1,4V16A2,2 0 0,0 3,18H10V20H8V22H16V20H14V18H21A2,2 0 0,0 23,16V4C23,2.89 22.1,2 21,2Z" />
        </svg>`},{id:wd,command:wd,label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M19,18H5V6H19M21,4H3C1.89,4 1,4.89 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18V6C23,4.89 22.1,4 21,4Z" />
        </svg>`},{id:_d,command:_d,label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M17,19H7V5H17M17,1H7C5.89,1 5,1.89 5,3V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V3C19,1.89 18.1,1 17,1Z" />
        </svg>`}]},{id:"options",buttons:[{id:rt,command:rt,context:rt,label:`<svg ${nt} viewBox="0 0 24 24">
        <path fill="currentColor" d="M15,5H17V3H15M15,21H17V19H15M11,5H13V3H11M19,5H21V3H19M19,9H21V7H19M19,21H21V19H19M19,13H21V11H19M19,17H21V15H19M3,5H5V3H3M3,9H5V7H3M3,13H5V11H3M3,17H5V15H3M3,21H5V19H3M11,21H13V19H11M7,21H9V19H7M7,5H9V3H7V5Z" />
    </svg>`},{id:X,context:X,command:()=>P.runCommand(X),label:`<svg ${nt} viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"></path></svg>`},{id:gt,command:gt,context:gt,label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z" />
        </svg>`},{id:U,command:()=>P.runCommand(U),label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z" />
        </svg>`},{id:"undo",command:()=>P.runCommand("core:undo"),label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M20 13.5C20 17.09 17.09 20 13.5 20H6V18H13.5C16 18 18 16 18 13.5S16 9 13.5 9H7.83L10.91 12.09L9.5 13.5L4 8L9.5 2.5L10.92 3.91L7.83 7H13.5C17.09 7 20 9.91 20 13.5Z" />
        </svg>`},{id:"redo",command:()=>P.runCommand("core:redo"),label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M10.5 18H18V20H10.5C6.91 20 4 17.09 4 13.5S6.91 7 10.5 7H16.17L13.08 3.91L14.5 2.5L20 8L14.5 13.5L13.09 12.09L16.17 9H10.5C8 9 6 11 6 13.5S8 18 10.5 18Z" />
        </svg>`},{id:zp,command:()=>P.runCommand(zp),label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
        </svg>`},{id:Cd,command:()=>P.runCommand(Cd),label:`<svg ${nt} viewBox="0 0 24 24">
              <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
          </svg>`},{id:xd,command:()=>P.runCommand(xd),label:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                </svg>`},{id:Sd,command:()=>P.runCommand(Sd),label:`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                  </svg>
                  `}]},{id:"views",buttons:[{id:y,command:y,active:!0,label:`<svg ${nt} viewBox="0 0 24 24">
            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />
        </svg>`},{id:tt,command:tt,label:`<svg ${nt} viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" />
      </svg>`},{id:N,command:N,label:`<svg ${nt} viewBox="0 0 24 24">
          <path fill="currentColor" d="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z" />
      </svg>`},{id:K,command:K,label:`<svg ${nt} viewBox="0 0 24 24">
          <path fill="currentColor" d="M17,13H13V17H11V13H7V11H11V7H13V11H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z" />
      </svg>`}]}]);const G=W.getButton("views",K);P.on("load",()=>G==null?void 0:G.set("active",!0)),B.showStylesOnChange&&P.on("component:selected",()=>{const S=W.getButton("views",y),T=W.getButton("views",N);(!T||!T.get("active"))&&P.getSelected()&&(S==null||S.set("active",!0))})},Eb=(P,B={})=>{const W={blocks:["link-block","quote","text-basic"],block:()=>({}),modalImportTitle:"Import",modalImportButton:"Import",modalImportLabel:"",modalImportContent:"",importViewerOptions:{},textCleanCanvas:"Are you sure you want to clear the canvas?",showStylesOnChange:!0,useCustomTheme:!0,...B};Ob(P,W),Sb(P,W),Tb(P,W)};var Ad={},kb={get exports(){return Ad},set exports(P){Ad=P}};/*! grapesjs-script-editor - 1.0.3 */(function(P,B){(function(W,Q){P.exports=Q()})(window,function(){return function(W){var Q={};function rt(U){if(Q[U])return Q[U].exports;var y=Q[U]={i:U,l:!1,exports:{}};return W[U].call(y.exports,y,y.exports,rt),y.l=!0,y.exports}return rt.m=W,rt.c=Q,rt.d=function(U,y,tt){rt.o(U,y)||Object.defineProperty(U,y,{enumerable:!0,get:tt})},rt.r=function(U){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})},rt.t=function(U,y){if(1&y&&(U=rt(U)),8&y||4&y&&typeof U=="object"&&U&&U.__esModule)return U;var tt=Object.create(null);if(rt.r(tt),Object.defineProperty(tt,"default",{enumerable:!0,value:U}),2&y&&typeof U!="string")for(var N in U)rt.d(tt,N,function(K){return U[K]}.bind(null,N));return tt},rt.n=function(U){var y=U&&U.__esModule?function(){return U.default}:function(){return U};return rt.d(y,"a",y),y},rt.o=function(U,y){return Object.prototype.hasOwnProperty.call(U,y)},rt.p="",rt(rt.s=1)}([function(W,Q){W.exports=function(rt,U,y){return U in rt?Object.defineProperty(rt,U,{value:y,enumerable:!0,configurable:!0,writable:!0}):rt[U]=y,rt}},function(W,Q,rt){rt.r(Q);var U=rt(0),y=rt.n(U),tt="edit-script";function N(G,S){var T=Object.keys(G);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(G);S&&(D=D.filter(function(F){return Object.getOwnPropertyDescriptor(G,F).enumerable})),T.push.apply(T,D)}return T}function K(G){for(var S=1;S<arguments.length;S++){var T=arguments[S]!=null?arguments[S]:{};S%2?N(Object(T),!0).forEach(function(D){y()(G,D,T[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(T)):N(Object(T)).forEach(function(D){Object.defineProperty(G,D,Object.getOwnPropertyDescriptor(T,D))})}return G}var gt=function(G){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=G.Commands,D=G.Modal,F=G.Components,R=S.modalTitle,dt=S.codeViewOptions,bt=S.commandAttachScript,It=S.toolbarIcon,Dt=S.onRun,$t=S.onError,de=S.starter,Ct=S.scriptTypesSupport,_t=null,Wt=function(Jt,Rt){Rt instanceof HTMLElement?Jt.appendChild(Rt):Rt&&Jt.insertAdjacentHTML("beforeend",Rt)};G.$.isString(Ct)&&(Ct=Ct.split(",")),G.$.isArray(Ct)&&(Ct=Ct.includes("*")?F.getTypes().map(function(Jt){return Jt.id}):Ct),Ct&&Ct.forEach(function(Jt){var Rt=F.getType(Jt).model;F.addType(Jt,{model:{initToolbar:function(){Rt.prototype.initToolbar.apply(this,arguments);var Y=this.get("toolbar"),k=Y.some(function(H){return H.command===tt});k||(Y.unshift(K({command:tt,label:It},S.toolbarBtnCustomScript)),this.set("toolbar",Y))}}})}),T.add(tt,K({run:function(Jt,Rt){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.editor=Jt,this.options=Y,this.target=Y.target||Jt.getSelected();var k=this.target;k&&this.showCustomCode(k)},stop:function(Jt){D.close()},showCustomCode:function(Jt){var Rt=this,Y=this.editor,k=this.options.title||R;_t||(_t=this.getContent());var H=Jt.getScriptString()||de;D.open({title:k,content:_t}).getModel().once("change:open",function(){return Y.stopCommand(Rt.id)}),this.getCodeViewer().setContent(H)},getPreContent:function(){},getPostContent:function(){},getContent:function(){var Jt=this.editor,Rt=document.createElement("div"),Y=Jt.getConfig("stylePrefix");Rt.className="".concat(Y,"attach-script"),Wt(Rt,this.getPreContent());var k=this.getCodeViewer();return k.refresh(),setTimeout(function(){return k.focus()},0),Rt.appendChild(k.getElement()),Wt(Rt,this.getPostContent()),Wt(Rt,this.getContentActions()),Rt},getContentActions:function(){var Jt=this,Rt=this.editor,Y=document.createElement("div");Y.id="actns";var k=document.createElement("button"),H=Rt.getConfig("stylePrefix");k.innerHTML=S.buttonLabel,k.className="".concat(H,"btn-prim ").concat(H,"btn-save__inject-logic"),k.onclick=function(){return Jt.handleSave()};var et=document.createElement("div");return et.id="logic-toolbar",et.className="fa fa-bug",et.style="margin:5px;padding:10px;background:rgba(0,0,0,0.2);border-radius:3px;border:1px solid rgba(0,0,0,0.2);cursor:pointer",et.onclick=function(){return Jt.runCode()},Y.appendChild(et),Y.appendChild(k),Y},handleSave:function(){var Jt=this.editor,Rt=this.target,Y=this.getCodeViewer().getContent();Rt.set("script",Y),Jt.Modal.close()},getCodeViewer:function(){var Jt=this.editor;return this.codeViewer||(this.codeViewer=Jt.CodeManager.createViewer(K({codeName:"javascript",theme:"hopscotch",readOnly:0,autoBeautify:1},dt))),this.codeViewer},runCode:function(){try{var Jt=this.getCodeViewer().getContent();Function('"use strict";'+Jt)(),Dt&&Dt()}catch(Rt){console.log("error",Rt),$t&&$t(Rt)}}},bt))};function X(G,S){var T=Object.keys(G);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(G);S&&(D=D.filter(function(F){return Object.getOwnPropertyDescriptor(G,F).enumerable})),T.push.apply(T,D)}return T}function nt(G){for(var S=1;S<arguments.length;S++){var T=arguments[S]!=null?arguments[S]:{};S%2?X(Object(T),!0).forEach(function(D){y()(G,D,T[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(T)):X(Object(T)).forEach(function(D){Object.defineProperty(G,D,Object.getOwnPropertyDescriptor(T,D))})}return G}Q.default=function(G){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=nt(nt({},{starter:"let el = this",toolbarIcon:'<i class="fa fa-file-code-o"></i>',scriptTypesSupport:["default","wrapper","text","textnode","image","video","svg"],toolbarBtnCustomScript:{},onRun:function(){return console.log("valid syntax")},onError:function(D){return console.log("error",D)},modalTitle:"Script",codeLabel:"JS",codeViewOptions:{},buttonLabel:"Save",commandAttachScript:{}}),S);gt(G,T)}}])})})(kb);const Pb=Md(Ad);var jd={},Ab={get exports(){return jd},set exports(P){jd=P}};/*! grapesjs-component-code-editor - 1.0.20 */(function(P,B){(function(W,Q){P.exports=Q()})(window,function(){return function(W){var Q={};function rt(U){if(Q[U])return Q[U].exports;var y=Q[U]={i:U,l:!1,exports:{}};return W[U].call(y.exports,y,y.exports,rt),y.l=!0,y.exports}return rt.m=W,rt.c=Q,rt.d=function(U,y,tt){rt.o(U,y)||Object.defineProperty(U,y,{enumerable:!0,get:tt})},rt.r=function(U){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})},rt.t=function(U,y){if(1&y&&(U=rt(U)),8&y||4&y&&typeof U=="object"&&U&&U.__esModule)return U;var tt=Object.create(null);if(rt.r(tt),Object.defineProperty(tt,"default",{enumerable:!0,value:U}),2&y&&typeof U!="string")for(var N in U)rt.d(tt,N,function(K){return U[K]}.bind(null,N));return tt},rt.n=function(U){var y=U&&U.__esModule?function(){return U.default}:function(){return U};return rt.d(y,"a",y),y},rt.o=function(U,y){return Object.prototype.hasOwnProperty.call(U,y)},rt.p="",rt(rt.s=3)}([function(W,Q){W.exports=function(rt,U,y){return U in rt?Object.defineProperty(rt,U,{value:y,enumerable:!0,configurable:!0,writable:!0}):rt[U]=y,rt}},function(W,Q){W.exports=function(rt,U){if(!(rt instanceof U))throw new TypeError("Cannot call a class as a function")}},function(W,Q){function rt(U,y){for(var tt=0;tt<y.length;tt++){var N=y[tt];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(U,N.key,N)}}W.exports=function(U,y,tt){return y&&rt(U.prototype,y),tt&&rt(U,tt),U}},function(W,Q,rt){rt.r(Q);var U=rt(0),y=rt.n(U),tt=rt(1),N=rt.n(tt),K=rt(2),gt=rt.n(K),X=typeof window<"u"?window:null,nt=X===null,G=nt?void 0:X.document,S=function(){return!1},T=nt?"calc":["","-webkit-","-moz-","-o-"].filter(function(Rt){var Y=G.createElement("div");return Y.style.cssText="width:"+Rt+"calc(9px)",!!Y.style.length}).shift()+"calc",D=function(Rt){return typeof Rt=="string"||Rt instanceof String},F=function(Rt){if(D(Rt)){var Y=G.querySelector(Rt);if(!Y)throw new Error("Selector "+Rt+" did not match a DOM element");return Y}return Rt},R=function(Rt,Y,k){var H=Rt[Y];return H!==void 0?H:k},dt=function(Rt,Y,k,H){if(Y){if(H==="end")return 0;if(H==="center")return Rt/2}else if(k){if(H==="start")return 0;if(H==="center")return Rt/2}return Rt},bt=function(Rt,Y){var k=G.createElement("div");return k.className="gutter gutter-"+Y,k},It=function(Rt,Y,k){var H={};return D(Y)?H[Rt]=Y:H[Rt]=T+"("+Y+"% - "+k+"px)",H},Dt=function(Rt,Y){var k;return(k={})[Rt]=Y+"px",k},$t=function(Rt,Y){if(Y===void 0&&(Y={}),nt)return{};var k,H,et,at,Pt,ct,Tt=Rt;Array.from&&(Tt=Array.from(Tt));var q=F(Tt[0]).parentNode,Ut=getComputedStyle?getComputedStyle(q):null,Ht=Ut?Ut.flexDirection:null,ae=R(Y,"sizes")||Tt.map(function(){return 100/Tt.length}),Fe=R(Y,"minSize",100),Ie=Array.isArray(Fe)?Fe:Tt.map(function(){return Fe}),Ee=R(Y,"expandToMin",!1),Ne=R(Y,"gutterSize",10),Ce=R(Y,"gutterAlign","center"),Ve=R(Y,"snapOffset",30),ve=R(Y,"dragInterval",1),ye=R(Y,"direction","horizontal"),we=R(Y,"cursor",ye==="horizontal"?"col-resize":"row-resize"),xe=R(Y,"gutter",bt),ft=R(Y,"elementStyle",It),ie=R(Y,"gutterStyle",Dt);function re(_,I,z,wt){var Nt=ft(k,I,z,wt);Object.keys(Nt).forEach(function(Mt){_.style[Mt]=Nt[Mt]})}function he(){return ct.map(function(_){return _.size})}function fe(_){return"touches"in _?_.touches[0][H]:_[H]}function oe(_){var I=ct[this.a],z=ct[this.b],wt=I.size+z.size;I.size=_/this.size*wt,z.size=wt-_/this.size*wt,re(I.element,I.size,this._b,I.i),re(z.element,z.size,this._c,z.i)}function He(_){var I,z=ct[this.a],wt=ct[this.b];this.dragging&&(I=fe(_)-this.start+(this._b-this.dragOffset),ve>1&&(I=Math.round(I/ve)*ve),I<=z.minSize+Ve+this._b?I=z.minSize+this._b:I>=this.size-(wt.minSize+Ve+this._c)&&(I=this.size-(wt.minSize+this._c)),oe.call(this,I),R(Y,"onDrag",S)(he()))}function nn(){var _=ct[this.a].element,I=ct[this.b].element,z=_.getBoundingClientRect(),wt=I.getBoundingClientRect();this.size=z[k]+wt[k]+this._b+this._c,this.start=z[et],this.end=z[at]}function Ge(_){var I=function(Mt){if(!getComputedStyle)return null;var ce=getComputedStyle(Mt);if(!ce)return null;var ke=Mt[Pt];return ke===0?null:ke-=ye==="horizontal"?parseFloat(ce.paddingLeft)+parseFloat(ce.paddingRight):parseFloat(ce.paddingTop)+parseFloat(ce.paddingBottom)}(q);if(I===null||Ie.reduce(function(Mt,ce){return Mt+ce},0)>I)return _;var z=0,wt=[],Nt=_.map(function(Mt,ce){var ke=I*Mt/100,ze=dt(Ne,ce===0,ce===_.length-1,Ce),Ye=Ie[ce]+ze;return ke<Ye?(z+=Ye-ke,wt.push(0),Ye):(wt.push(ke-Ye),ke)});return z===0?_:Nt.map(function(Mt,ce){var ke=Mt;if(z>0&&wt[ce]-z>0){var ze=Math.min(z,wt[ce]-z);z-=ze,ke=Mt-ze}return ke/I*100})}function bn(){var _=ct[this.a].element,I=ct[this.b].element;this.dragging&&R(Y,"onDragEnd",S)(he()),this.dragging=!1,X.removeEventListener("mouseup",this.stop),X.removeEventListener("touchend",this.stop),X.removeEventListener("touchcancel",this.stop),X.removeEventListener("mousemove",this.move),X.removeEventListener("touchmove",this.move),this.stop=null,this.move=null,_.removeEventListener("selectstart",S),_.removeEventListener("dragstart",S),I.removeEventListener("selectstart",S),I.removeEventListener("dragstart",S),_.style.userSelect="",_.style.webkitUserSelect="",_.style.MozUserSelect="",_.style.pointerEvents="",I.style.userSelect="",I.style.webkitUserSelect="",I.style.MozUserSelect="",I.style.pointerEvents="",this.gutter.style.cursor="",this.parent.style.cursor="",G.body.style.cursor=""}function Nn(_){if(!("button"in _)||_.button===0){var I=ct[this.a].element,z=ct[this.b].element;this.dragging||R(Y,"onDragStart",S)(he()),_.preventDefault(),this.dragging=!0,this.move=He.bind(this),this.stop=bn.bind(this),X.addEventListener("mouseup",this.stop),X.addEventListener("touchend",this.stop),X.addEventListener("touchcancel",this.stop),X.addEventListener("mousemove",this.move),X.addEventListener("touchmove",this.move),I.addEventListener("selectstart",S),I.addEventListener("dragstart",S),z.addEventListener("selectstart",S),z.addEventListener("dragstart",S),I.style.userSelect="none",I.style.webkitUserSelect="none",I.style.MozUserSelect="none",I.style.pointerEvents="none",z.style.userSelect="none",z.style.webkitUserSelect="none",z.style.MozUserSelect="none",z.style.pointerEvents="none",this.gutter.style.cursor=we,this.parent.style.cursor=we,G.body.style.cursor=we,nn.call(this),this.dragOffset=fe(_)-this.end}}ye==="horizontal"?(k="width",H="clientX",et="left",at="right",Pt="clientWidth"):ye==="vertical"&&(k="height",H="clientY",et="top",at="bottom",Pt="clientHeight"),ae=Ge(ae);var At=[];function Yt(_){var I=_.i===At.length,z=I?At[_.i-1]:At[_.i];nn.call(z);var wt=I?z.size-_.minSize-z._c:_.minSize+z._b;oe.call(z,wt)}return(ct=Tt.map(function(_,I){var z,wt={element:F(_),size:ae[I],minSize:Ie[I],i:I};if(I>0&&((z={a:I-1,b:I,dragging:!1,direction:ye,parent:q})._b=dt(Ne,I-1==0,!1,Ce),z._c=dt(Ne,!1,I===Tt.length-1,Ce),Ht==="row-reverse"||Ht==="column-reverse")){var Nt=z.a;z.a=z.b,z.b=Nt}if(I>0){var Mt=xe(I,ye,wt.element);(function(ce,ke,ze){var Ye=ie(k,ke,ze);Object.keys(Ye).forEach(function(pn){ce.style[pn]=Ye[pn]})})(Mt,Ne,I),z._a=Nn.bind(z),Mt.addEventListener("mousedown",z._a),Mt.addEventListener("touchstart",z._a),q.insertBefore(Mt,wt.element),z.gutter=Mt}return re(wt.element,wt.size,dt(Ne,I===0,I===Tt.length-1,Ce),I),I>0&&At.push(z),wt})).forEach(function(_){var I=_.element.getBoundingClientRect()[k];I<_.minSize&&(Ee?Yt(_):_.minSize=I)}),{setSizes:function(_){var I=Ge(_);I.forEach(function(z,wt){if(wt>0){var Nt=At[wt-1],Mt=ct[Nt.a],ce=ct[Nt.b];Mt.size=I[wt-1],ce.size=z,re(Mt.element,Mt.size,Nt._b,Mt.i),re(ce.element,ce.size,Nt._c,ce.i)}})},getSizes:he,collapse:function(_){Yt(ct[_])},destroy:function(_,I){At.forEach(function(z){if(I!==!0?z.parent.removeChild(z.gutter):(z.gutter.removeEventListener("mousedown",z._a),z.gutter.removeEventListener("touchstart",z._a)),_!==!0){var wt=ft(k,z.a.size,z._b);Object.keys(wt).forEach(function(Nt){ct[z.a].element.style[Nt]="",ct[z.b].element.style[Nt]=""})}})},parent:q,pairs:At}};function de(Rt,Y){var k=Object.keys(Rt);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(Rt);Y&&(H=H.filter(function(et){return Object.getOwnPropertyDescriptor(Rt,et).enumerable})),k.push.apply(k,H)}return k}var Ct=function(){function Rt(Y,k){N()(this,Rt),this.editor=Y,this.$=Y.$,this.pfx=Y.getConfig("stylePrefix"),this.opts=k,this.canvas=this.findWithinEditor(".".concat(this.pfx,"cv-canvas")),this.panelViews=k.appendTo?this.$(k.appendTo):this.findWithinEditor(".".concat(this.pfx,"pn-").concat(k.panelId)),this.isShowing=!0}return gt()(Rt,[{key:"findPanel",value:function(){var Y=this.editor.Panels,k=this.opts.panelId;return Y.getPanel(k)||Y.addPanel({id:k})}},{key:"findWithinEditor",value:function(Y){return this.$(Y,this.editor.getEl())}},{key:"buildCodeEditor",value:function(Y){var k=this.editor,H=this.opts;return k.CodeManager.createViewer(function(et){for(var at=1;at<arguments.length;at++){var Pt=arguments[at]!=null?arguments[at]:{};at%2?de(Object(Pt),!0).forEach(function(ct){y()(et,ct,Pt[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(Pt)):de(Object(Pt)).forEach(function(ct){Object.defineProperty(et,ct,Object.getOwnPropertyDescriptor(Pt,ct))})}return et}({codeName:Y==="html"?"htmlmixed":"css",theme:"hopscotch",readOnly:0,autoBeautify:1,autoCloseTags:1,autoCloseBrackets:1,styleActiveLine:1,smartIndent:1},H.codeViewOptions))}},{key:"buildSection",value:function(Y,k){var H=this.$,et=this.pfx,at=this.opts,Pt=H("<section></section>"),ct=Y==="html"?at.htmlBtnText:at.cssBtnText,Tt=at.cleanCssBtn&&Y==="css"?'<button class="cp-delete-'.concat(Y," ").concat(et,'btn-prim">').concat(at.cleanCssBtnText,"</button>"):"";Pt.append(H(`
            <div class="codepanel-separator">
                <div class="codepanel-label">`.concat(Y,`</div>
                <div class="cp-btn-container">
                    `).concat(Tt,`
                    <button class="cp-apply-`).concat(Y," ").concat(et,'btn-prim">').concat(ct,`</button>
                </div>
            </div>`)));var q=k.getElement();return q.style.height="calc(100% - 30px)",Pt.append(q),this.codePanel.append(Pt),Pt.get(0)}},{key:"buildCodePanel",value:function(){var Y=this,k=this.$,H=this.editor,et=this.opts.panelId?this.findPanel():0;this.codePanel=k("<div></div>"),this.codePanel.addClass("code-panel"),this.htmlCodeEditor=this.buildCodeEditor("html"),this.cssCodeEditor=this.buildCodeEditor("css");var at=[this.buildSection("html",this.htmlCodeEditor),this.buildSection("css",this.cssCodeEditor)];et&&!this.opts.appendTo&&et.set("appendContent",this.codePanel).trigger("change:appendContent"),this.opts.appendTo&&k(this.opts.appendTo).append(this.codePanel),this.updateEditorContents(),this.codePanel.find(".cp-apply-html").on("click",this.updateHtml.bind(this)),this.codePanel.find(".cp-apply-css").on("click",this.updateCss.bind(this)),this.opts.cleanCssBtn&&this.codePanel.find(".cp-delete-css").on("click",this.deleteSelectedCss.bind(this)),$t(at,{direction:"vertical",sizes:[50,50],minSize:100,gutterSize:1,onDragEnd:this.refreshEditors.bind(this)}),H.on("component:update",function(Pt){return Y.updateEditorContents()}),H.on("stop:preview",function(){Y.isShowing&&!Y.opts.preserveWidth&&Y.canvas.css("width",Y.opts.openState.cv)})}},{key:"showCodePanel",value:function(){this.isShowing=!0,this.updateEditorContents(),this.codePanel.css("display","block"),setTimeout(this.refreshEditors.bind(this),320),this.opts.preserveWidth||(this.panelViews.css("width",this.opts.openState.pn),this.canvas.css("width",this.opts.openState.cv))}},{key:"hideCodePanel",value:function(){this.codePanel&&this.codePanel.css("display","none"),this.isShowing=!1,this.opts.preserveWidth||(this.panelViews.css("width",this.opts.closedState.pn),this.canvas.css("width",this.opts.closedState.cv))}},{key:"refreshEditors",value:function(){this.htmlCodeEditor.refresh(),this.cssCodeEditor.refresh()}},{key:"updateHtml",value:function(Y){Y==null||Y.preventDefault();var k=this.editor,H=this.component,et=this.htmlCodeEditor.getContent().trim();if(et&&et!==this.previousHtmlCode){this.previousHtmlCode=et;var at="";this.cssCodeEditor.getContent().split(`}
`).filter(function(Pt){return Boolean(Pt.trim())}).map(function(Pt){if(!/}$/.test(Pt))return"".concat(Pt,"}")}).forEach(function(Pt){/^#/.test(Pt)&&(at+=Pt)}),et+="<style>".concat(at,"</style>"),H.attributes.type==="wrapper"?k.setComponents(et):k.select(H.replaceWith(et))}}},{key:"updateCss",value:function(Y){Y==null||Y.preventDefault();var k=this.cssCodeEditor.getContent().trim();k&&k!==this.previousCssCode&&(this.previousCssCode=k,this.editor.Css.addRules(k))}},{key:"deleteSelectedCss",value:function(Y){var k=this;Y==null||Y.preventDefault(),this.cssCodeEditor.editor.getSelections().forEach(function(H){return k.parseRemove(H)}),this.cssCodeEditor.editor.deleteH()}},{key:"parseRemove",value:function(Y){var k=this.editor;k.Css.remove(this.getRules(k.Parser.parseCss(Y)))}},{key:"getRules",value:function(Y){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=this.editor,et=H.Selectors;return Y.map(function(at){var Pt=et.get(at.selectors),ct=at.state,Tt=at.selectorsAdd,q=k.atRuleType,Ut=k.atRuleParams;return Pt&&H.Css.get(Pt,ct,Ut,{selectorsAdd:Tt,atRule:q})})}},{key:"updateEditorContents",value:function(){this.isShowing&&(this.component=this.editor.getSelected(),this.component&&(this.htmlCodeEditor.setContent(this.getComponentHtml(this.component)),this.cssCodeEditor.setContent(this.editor.CodeManager.getCode(this.component,"css",{cssc:this.editor.Css}))))}},{key:"getComponentHtml",value:function(Y){var k=this.pfx,H=this.opts,et="",at=Y.getEl();!H.clearData&&at.classList.remove("".concat(k,"selected"));var Pt=H.clearData?Y.toHTML():Y.attributes.type==="wrapper"?at.innerHTML:at.outerHTML;!H.clearData&&at.classList.add("".concat(k,"selected")),et+=Pt;var ct=H.editJs?Y.getScriptString():"";return et+=ct?"<script>".concat(ct,"<\/script>"):""}}]),Rt}(),_t=function(Rt,Y){var k=Rt.Commands,H=null;k.add("open-code",{run:function(et){!H&&(H=new Ct(et,Y))&&H.buildCodePanel(),H.showCodePanel()},stop:function(et){H&&H.hideCodePanel()}}),k.add("code-editor-object",function(){return H}),k.add("code-editor-constructor",function(){return Ct})};function Wt(Rt,Y){var k=Object.keys(Rt);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(Rt);Y&&(H=H.filter(function(et){return Object.getOwnPropertyDescriptor(Rt,et).enumerable})),k.push.apply(k,H)}return k}function Jt(Rt){for(var Y=1;Y<arguments.length;Y++){var k=arguments[Y]!=null?arguments[Y]:{};Y%2?Wt(Object(k),!0).forEach(function(H){y()(Rt,H,k[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Rt,Object.getOwnPropertyDescriptors(k)):Wt(Object(k)).forEach(function(H){Object.defineProperty(Rt,H,Object.getOwnPropertyDescriptor(k,H))})}return Rt}Q.default=function(Rt){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=Jt(Jt({},{panelId:"views-container",appendTo:"",openState:{cv:"65%",pn:"35%"},closedState:{cv:"85%",pn:"15%"},codeViewOptions:{},preserveWidth:!1,editJs:!1,clearData:!1,cleanCssBtn:!0,htmlBtnText:"Apply",cssBtnText:"Apply",cleanCssBtnText:"Delete"}),Y);_t(Rt,k)}}])})})(Ab);const jb=Md(jd),Bd=r0.init({container:"#gjs",width:"auto",height:"1000px",showOffsets:!0,noticeOnUnload:!1,storageManager:!1,fromElement:!0,plugins:[Eb,jb,Pb],canvas:{styles:["https://cdn.jsdelivr.net/npm/daisyui@2.51.3/dist/full.css"],scripts:["https://cdn.tailwindcss.com"]}});Cb(Bd);_b();window.loadEditorData=function(P="page",B){xb(Bd,P,B)};window.saveEditorData=function(){Cg(Bd,!0)};window.Swal=wl;
